(function(){var e={"esri/views/3d/layers/i3s/LEPCC":"1RVI","esri/core/libs/gl-matrix-2/mat4":"FXVB","arcgis-js-api/core/libs/gl-matrix-2/mat4":"FXVB","arcgis-js-api/core/libs/gl-matrix-2/math/mat4":"Jl7l","esri/views/3d/layers/i3s/PointCloudWorkerUtil":"NNdt","esri/views/3d/layers/i3s/I3SBinaryReader":"W2ph","esri/core/libs/gl-matrix-2/quatf32":"fdzS","esri/core/libs/gl-matrix-2/factories/quatf32":"gKSc","esri/core/libs/gl-matrix-2/factories/vec3f32":"iHt0","esri/core/libs/gl-matrix-2/vec3f32":"vlC2","esri/views/3d/layers/PointCloudWorker":"wCvz"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"1RVI":function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("ma1f")],void 0===(a=(function(e,t,r){"use strict";function n(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+0,10)),version:t.getUint16(r+10,!0),checksum:t.getUint32(r+12,!0)}}function a(e,t,r){var n=[];t=o(e,t,n);for(var a=[],i=0;i<n.length;i++){a.length=0,t=o(e,t,a);for(var u=0;u<a.length;u++)r.push(a[u]+n[i])}return t}function o(e,t,n){var a=new DataView(e,t),o=a.getUint8(0),i=31&o,u=!!(32&o),s=(192&o)>>6,c=0;if(0===s)c=a.getUint32(1,!0),t+=5;else if(1===s)c=a.getUint16(1,!0),t+=3;else{if(2!==s)throw new r("lepcc-decode-error","Bad count type");c=a.getUint8(1),t+=2}if(u)throw new r("lepcc-decode-error","LUT not implemented");for(var l=Math.ceil(c*i/8),f=new Uint8Array(e,t,l),d=0,v=0,h=0,p=-1>>>32-i,b=0;b<c;b++){for(;v<i;)d|=f[h]<<v,v+=8,h+=1;n[b]=d&p,d>>>=i,(v-=i)+i>32&&(d|=f[h-1]>>8-v)}return t+h}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeIntensity=t.decodeRGB=t.decodeXYZ=void 0,t.decodeXYZ=function(e){var t=new DataView(e,0),o=0,i=n(e,t,o),u=i.version;if(o+=16,"LEPCC     "!==i.identifier)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var s=function(e,t){return{sizeLo:e.getUint32(t+0,!0),sizeHi:e.getUint32(t+4,!0),minX:e.getFloat64(t+8,!0),minY:e.getFloat64(t+16,!0),minZ:e.getFloat64(t+24,!0),maxX:e.getFloat64(t+32,!0),maxY:e.getFloat64(t+40,!0),maxZ:e.getFloat64(t+48,!0),errorX:e.getFloat64(t+56,!0),errorY:e.getFloat64(t+64,!0),errorZ:e.getFloat64(t+72,!0),count:e.getUint32(t+80,!0),reserved:e.getUint32(t+84,!0)}}(t,o);if(o+=88,s.sizeHi*Math.pow(2,32)+s.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var c=new Float64Array(3*s.count),l=[],f=[],d=[],v=[];if(o=a(e,o,l),o=a(e,o,f),o=a(e,o,d),(o=a(e,o,v))!==e.byteLength)throw new r("lepcc-decode-error","Bad length");for(var h=0,p=0,b=0;b<l.length;b++){p+=l[b];for(var y=0,g=0;g<f[b];g++){var m=v[h];c[3*h]=Math.min(s.maxX,s.minX+2*s.errorX*(y+=d[h])),c[3*h+1]=Math.min(s.maxY,s.minY+2*s.errorY*p),c[3*h+2]=Math.min(s.maxZ,s.minZ+2*s.errorZ*m),h++}}return{errorX:s.errorX,errorY:s.errorY,errorZ:s.errorZ,result:c}},t.decodeRGB=function(e){var t=new DataView(e,0),a=0,o=n(e,t,a),i=o.version;if(a+=16,"ClusterRGB"!==o.identifier)throw new r("lepcc-decode-error","Bad identifier");if(i>1)throw new r("lepcc-decode-error","Unknown version");var u=function(e,t){return{sizeLo:e.getUint32(t+0,!0),sizeHi:e.getUint32(t+4,!0),count:e.getUint32(t+8,!0),colorMapCount:e.getUint16(t+12,!0),lookupMethod:e.getUint8(t+14),compressionMethod:e.getUint8(t+15)}}(t,a);if(a+=16,u.sizeHi*Math.pow(2,32)+u.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");if((2===u.lookupMethod||1===u.lookupMethod)&&0===u.compressionMethod){if(3*u.colorMapCount+u.count+a!==e.byteLength||u.colorMapCount>256)throw new r("lepcc-decode-error","Bad count");for(var s=new Uint8Array(e,a,3*u.colorMapCount),c=new Uint8Array(e,a+3*u.colorMapCount,u.count),l=new Uint8Array(3*u.count),f=0;f<u.count;f++){var d=c[f];l[3*f]=s[3*d],l[3*f+1]=s[3*d+1],l[3*f+2]=s[3*d+2]}return l}if(0===u.lookupMethod&&0===u.compressionMethod){if(3*u.count+a!==e.byteLength||0!==u.colorMapCount)throw new r("lepcc-decode-error","Bad count");return new Uint8Array(e,a).slice()}if(u.lookupMethod<=2&&1===u.compressionMethod){if(a+3!==e.byteLength||1!==u.colorMapCount)throw new r("lepcc-decode-error","Bad count");var v=t.getUint8(a),h=t.getUint8(a+1),p=t.getUint8(a+2);for(l=new Uint8Array(3*u.count),f=0;f<u.count;f++)l[3*f]=v,l[3*f+1]=h,l[3*f+2]=p;return l}throw new r("lepcc-decode-error","Bad method "+u.lookupMethod+","+u.compressionMethod)},t.decodeIntensity=function(e){var t=new DataView(e,0),a=0,i=n(e,t,a),u=i.version;if(a+=16,"Intensity "!==i.identifier)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var s=function(e,t){return{sizeLo:e.getUint32(t+0,!0),sizeHi:e.getUint32(t+4,!0),count:e.getUint32(t+8,!0),scaleFactor:e.getUint16(t+12,!0),bitsPerPoint:e.getUint8(t+14),reserved:e.getUint8(t+15)}}(t,a);if(a+=16,s.sizeHi*Math.pow(2,32)+s.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var c=new Uint16Array(s.count);if(8===s.bitsPerPoint){if(s.count+a!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(var l=new Uint8Array(e,a,s.count),f=0;f<s.count;f++)c[f]=l[f]*s.scaleFactor}else if(16===s.bitsPerPoint){if(2*s.count+a!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(l=new Uint16Array(e,a,s.count),f=0;f<s.count;f++)c[f]=l[f]*s.scaleFactor}else{if(o(e,a,l=[])!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(f=0;f<s.count;f++)c[f]=l[f]*s.scaleFactor}return c}}).apply(null,n))||(e.exports=a)},FXVB:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("Jl7l")],void 0===(a=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=void 0,t.mat4=r}).apply(null,n))||(e.exports=a)},Jl7l:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("jaBu"),r("qysZ")],void 0===(a=(function(e,t,r,n){"use strict";function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],d=t[9],v=t[10],h=t[11],p=t[12],b=t[13],y=t[14],g=t[15],m=r[0],M=r[1],w=r[2],I=r[3];return e[0]=m*n+M*u+w*f+I*p,e[1]=m*a+M*s+w*d+I*b,e[2]=m*o+M*c+w*v+I*y,e[3]=m*i+M*l+w*h+I*g,e[4]=(m=r[4])*n+(M=r[5])*u+(w=r[6])*f+(I=r[7])*p,e[5]=m*a+M*s+w*d+I*b,e[6]=m*o+M*c+w*v+I*y,e[7]=m*i+M*l+w*h+I*g,e[8]=(m=r[8])*n+(M=r[9])*u+(w=r[10])*f+(I=r[11])*p,e[9]=m*a+M*s+w*d+I*b,e[10]=m*o+M*c+w*v+I*y,e[11]=m*i+M*l+w*h+I*g,e[12]=(m=r[12])*n+(M=r[13])*u+(w=r[14])*f+(I=r[15])*p,e[13]=m*a+M*s+w*d+I*b,e[14]=m*o+M*c+w*v+I*y,e[15]=m*i+M*l+w*h+I*g,e}function i(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],u=n+n,s=a+a,c=o+o,l=n*u,f=n*s,d=n*c,v=a*s,h=a*c,p=o*c,b=i*u,y=i*s,g=i*c;return e[0]=1-(v+p),e[1]=f+g,e[2]=d-y,e[3]=0,e[4]=f-g,e[5]=1-(l+p),e[6]=h+b,e[7]=0,e[8]=d+y,e[9]=h-b,e[10]=1-(l+v),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=t.equals=t.exactEquals=t.multiplyScalarAndAdd=t.multiplyScalar=t.subtract=t.add=t.frob=t.str=t.targetTo=t.lookAt=t.ortho=t.perspectiveFromFieldOfView=t.perspective=t.frustum=t.fromQuat=t.fromRotationTranslationScaleOrigin=t.fromRotationTranslationScale=t.getRotation=t.getScaling=t.getTranslation=t.fromQuat2=t.fromRotationTranslation=t.fromZRotation=t.fromYRotation=t.fromXRotation=t.fromRotation=t.fromScaling=t.fromTranslation=t.rotateZ=t.rotateY=t.rotateX=t.rotate=t.scale=t.translate=t.multiply=t.determinant=t.adjoint=t.invert=t.transpose=t.identity=t.set=t.copy=void 0,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,n,a,o,i,u,s,c,l,f,d,v,h,p,b){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e[6]=u,e[7]=s,e[8]=c,e[9]=l,e[10]=f,e[11]=d,e[12]=v,e[13]=h,e[14]=p,e[15]=b,e},t.identity=a,t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],o=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=a,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],d=t[10],v=t[11],h=t[12],p=t[13],b=t[14],y=t[15],g=r*u-n*i,m=r*s-a*i,M=r*c-o*i,w=n*s-a*u,I=n*c-o*u,A=a*c-o*s,S=l*p-f*h,C=l*b-d*h,O=l*y-v*h,U=f*b-d*p,x=f*y-v*p,T=d*y-v*b,P=g*T-m*x+M*U+w*O-I*C+A*S;return P?(e[0]=(u*T-s*x+c*U)*(P=1/P),e[1]=(a*x-n*T-o*U)*P,e[2]=(p*A-b*I+y*w)*P,e[3]=(d*I-f*A-v*w)*P,e[4]=(s*O-i*T-c*C)*P,e[5]=(r*T-a*O+o*C)*P,e[6]=(b*M-h*A-y*m)*P,e[7]=(l*A-d*M+v*m)*P,e[8]=(i*x-u*O+c*S)*P,e[9]=(n*O-r*x-o*S)*P,e[10]=(h*I-p*M+y*g)*P,e[11]=(f*M-l*I-v*g)*P,e[12]=(u*C-i*U-s*S)*P,e[13]=(r*U-n*C+a*S)*P,e[14]=(p*m-h*w-b*g)*P,e[15]=(l*w-f*m+d*g)*P,e):null},t.adjoint=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],d=t[10],v=t[11],h=t[12],p=t[13],b=t[14],y=t[15];return e[0]=u*(d*y-v*b)-f*(s*y-c*b)+p*(s*v-c*d),e[1]=-(n*(d*y-v*b)-f*(a*y-o*b)+p*(a*v-o*d)),e[2]=n*(s*y-c*b)-u*(a*y-o*b)+p*(a*c-o*s),e[3]=-(n*(s*v-c*d)-u*(a*v-o*d)+f*(a*c-o*s)),e[4]=-(i*(d*y-v*b)-l*(s*y-c*b)+h*(s*v-c*d)),e[5]=r*(d*y-v*b)-l*(a*y-o*b)+h*(a*v-o*d),e[6]=-(r*(s*y-c*b)-i*(a*y-o*b)+h*(a*c-o*s)),e[7]=r*(s*v-c*d)-i*(a*v-o*d)+l*(a*c-o*s),e[8]=i*(f*y-v*p)-l*(u*y-c*p)+h*(u*v-c*f),e[9]=-(r*(f*y-v*p)-l*(n*y-o*p)+h*(n*v-o*f)),e[10]=r*(u*y-c*p)-i*(n*y-o*p)+h*(n*c-o*u),e[11]=-(r*(u*v-c*f)-i*(n*v-o*f)+l*(n*c-o*u)),e[12]=-(i*(f*b-d*p)-l*(u*b-s*p)+h*(u*d-s*f)),e[13]=r*(f*b-d*p)-l*(n*b-a*p)+h*(n*d-a*f),e[14]=-(r*(u*b-s*p)-i*(n*b-a*p)+h*(n*s-a*u)),e[15]=r*(u*d-s*f)-i*(n*d-a*f)+l*(n*s-a*u),e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],i=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],d=e[11],v=e[12],h=e[13],p=e[14],b=e[15];return(t*i-r*o)*(f*b-d*p)-(t*u-n*o)*(l*b-d*h)+(t*s-a*o)*(l*p-f*h)+(r*u-n*i)*(c*b-d*v)-(r*s-a*i)*(c*p-f*v)+(n*s-a*u)*(c*h-l*v)},t.multiply=o,t.translate=function(e,t,r){var n=r[0],a=r[1],o=r[2],i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,d=void 0,v=void 0,h=void 0,p=void 0,b=void 0,y=void 0;return t===e?(e[12]=t[0]*n+t[4]*a+t[8]*o+t[12],e[13]=t[1]*n+t[5]*a+t[9]*o+t[13],e[14]=t[2]*n+t[6]*a+t[10]*o+t[14],e[15]=t[3]*n+t[7]*a+t[11]*o+t[15]):(u=t[1],s=t[2],c=t[3],l=t[4],f=t[5],d=t[6],v=t[7],h=t[8],p=t[9],b=t[10],y=t[11],e[0]=i=t[0],e[1]=u,e[2]=s,e[3]=c,e[4]=l,e[5]=f,e[6]=d,e[7]=v,e[8]=h,e[9]=p,e[10]=b,e[11]=y,e[12]=i*n+l*a+h*o+t[12],e[13]=u*n+f*a+p*o+t[13],e[14]=s*n+d*a+b*o+t[14],e[15]=c*n+v*a+y*o+t[15]),e},t.scale=function(e,t,r){var n=r[0],a=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,a){var o,i,u,s,c,l,f,d,v,h,p,b,y,g,m,M,w,I,A,S,C,O,U,x,T=a[0],P=a[1],F=a[2],B=Math.sqrt(T*T+P*P+F*F);return B<n.EPSILON?null:(T*=B=1/B,P*=B,F*=B,o=Math.sin(r),u=1-(i=Math.cos(r)),c=t[1],l=t[2],f=t[3],v=t[5],h=t[6],p=t[7],y=t[9],g=t[10],m=t[11],A=T*P*u-F*o,S=P*P*u+i,C=F*P*u+T*o,O=T*F*u+P*o,U=P*F*u-T*o,x=F*F*u+i,e[0]=(s=t[0])*(M=T*T*u+i)+(d=t[4])*(w=P*T*u+F*o)+(b=t[8])*(I=F*T*u-P*o),e[1]=c*M+v*w+y*I,e[2]=l*M+h*w+g*I,e[3]=f*M+p*w+m*I,e[4]=s*A+d*S+b*C,e[5]=c*A+v*S+y*C,e[6]=l*A+h*S+g*C,e[7]=f*A+p*S+m*C,e[8]=s*O+d*U+b*x,e[9]=c*O+v*U+y*x,e[10]=l*O+h*U+g*x,e[11]=f*O+p*U+m*x,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+c*n,e[5]=i*a+l*n,e[6]=u*a+f*n,e[7]=s*a+d*n,e[8]=c*a-o*n,e[9]=l*a-i*n,e[10]=f*a-u*n,e[11]=d*a-s*n,e},t.rotateY=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],i=t[1],u=t[2],s=t[3],c=t[8],l=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-c*n,e[1]=i*a-l*n,e[2]=u*a-f*n,e[3]=s*a-d*n,e[8]=o*n+c*a,e[9]=i*n+l*a,e[10]=u*n+f*a,e[11]=s*n+d*a,e},t.rotateZ=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],i=t[1],u=t[2],s=t[3],c=t[4],l=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+c*n,e[1]=i*a+l*n,e[2]=u*a+f*n,e[3]=s*a+d*n,e[4]=c*a-o*n,e[5]=l*a-i*n,e[6]=f*a-u*n,e[7]=d*a-s*n,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var a,o,i,u=r[0],s=r[1],c=r[2],l=Math.sqrt(u*u+s*s+c*c);return l<n.EPSILON?null:(u*=l=1/l,s*=l,c*=l,a=Math.sin(t),i=1-(o=Math.cos(t)),e[0]=u*u*i+o,e[1]=s*u*i+c*a,e[2]=c*u*i-s*a,e[3]=0,e[4]=u*s*i-c*a,e[5]=s*s*i+o,e[6]=c*s*i+u*a,e[7]=0,e[8]=u*c*i+s*a,e[9]=s*c*i-u*a,e[10]=c*c*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=i,t.fromQuat2=function(e,t){var r=u,n=-t[0],a=-t[1],o=-t[2],s=t[3],c=t[4],l=t[5],f=t[6],d=t[7],v=n*n+a*a+o*o+s*s;return v>0?(r[0]=2*(c*s+d*n+l*o-f*a)/v,r[1]=2*(l*s+d*a+f*n-c*o)/v,r[2]=2*(f*s+d*o+c*a-l*n)/v):(r[0]=2*(c*s+d*n+l*o-f*a),r[1]=2*(l*s+d*a+f*n-c*o),r[2]=2*(f*s+d*o+c*a-l*n)),i(e,t,r),e};var u=r.create();function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[4],i=t[5],u=t[6],s=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(r*r+n*n+a*a),e[1]=Math.sqrt(o*o+i*i+u*u),e[2]=Math.sqrt(s*s+c*c+l*l),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},t.fromRotationTranslationScale=function(e,t,r,n){var a=t[0],o=t[1],i=t[2],u=t[3],s=a+a,c=o+o,l=i+i,f=a*s,d=a*c,v=a*l,h=o*c,p=o*l,b=i*l,y=u*s,g=u*c,m=u*l,M=n[0],w=n[1],I=n[2];return e[0]=(1-(h+b))*M,e[1]=(d+m)*M,e[2]=(v-g)*M,e[3]=0,e[4]=(d-m)*w,e[5]=(1-(f+b))*w,e[6]=(p+y)*w,e[7]=0,e[8]=(v+g)*I,e[9]=(p-y)*I,e[10]=(1-(f+h))*I,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,n,a){var o=t[0],i=t[1],u=t[2],s=t[3],c=o+o,l=i+i,f=u+u,d=o*c,v=o*l,h=o*f,p=i*l,b=i*f,y=u*f,g=s*c,m=s*l,M=s*f,w=n[0],I=n[1],A=n[2],S=a[0],C=a[1],O=a[2],U=(1-(p+y))*w,x=(v+M)*w,T=(h-m)*w,P=(v-M)*I,F=(1-(d+y))*I,B=(b+g)*I,R=(h+m)*A,L=(b-g)*A,V=(1-(d+p))*A;return e[0]=U,e[1]=x,e[2]=T,e[3]=0,e[4]=P,e[5]=F,e[6]=B,e[7]=0,e[8]=R,e[9]=L,e[10]=V,e[11]=0,e[12]=r[0]+S-(U*S+P*C+R*O),e[13]=r[1]+C-(x*S+F*C+L*O),e[14]=r[2]+O-(T*S+B*C+V*O),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r+r,u=n+n,s=a+a,c=r*i,l=n*i,f=n*u,d=a*i,v=a*u,h=a*s,p=o*i,b=o*u,y=o*s;return e[0]=1-f-h,e[1]=l+y,e[2]=d-b,e[3]=0,e[4]=l-y,e[5]=1-c-h,e[6]=v+p,e[7]=0,e[8]=d+b,e[9]=v-p,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,n,a,o,i){var u=1/(r-t),s=1/(a-n),c=1/(o-i);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(a+n)*s,e[10]=(i+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*c,e[15]=0,e},t.perspective=function(e,t,r,n,a){var o=1/Math.tan(t/2),i=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=(a+n)*(i=1/(n-a)),e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e},t.perspectiveFromFieldOfView=function(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(i-u)*s*.5,e[9]=(a-o)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},t.ortho=function(e,t,r,n,a,o,i){var u=1/(t-r),s=1/(n-a),c=1/(o-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*u,e[13]=(a+n)*s,e[14]=(i+o)*c,e[15]=1,e},t.lookAt=function(e,t,r,o){var i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,d=void 0,v=void 0,h=void 0,p=void 0,b=t[0],y=t[1],g=t[2],m=o[0],M=o[1],w=o[2],I=r[0],A=r[1],S=r[2];return Math.abs(b-I)<n.EPSILON&&Math.abs(y-A)<n.EPSILON&&Math.abs(g-S)<n.EPSILON?a(e):(d=b-I,v=y-A,h=g-S,i=M*(h*=p=1/Math.sqrt(d*d+v*v+h*h))-w*(v*=p),u=w*(d*=p)-m*h,s=m*v-M*d,(p=Math.sqrt(i*i+u*u+s*s))?(i*=p=1/p,u*=p,s*=p):(i=0,u=0,s=0),c=v*s-h*u,l=h*i-d*s,f=d*u-v*i,(p=Math.sqrt(c*c+l*l+f*f))?(c*=p=1/p,l*=p,f*=p):(c=0,l=0,f=0),e[0]=i,e[1]=c,e[2]=d,e[3]=0,e[4]=u,e[5]=l,e[6]=v,e[7]=0,e[8]=s,e[9]=f,e[10]=h,e[11]=0,e[12]=-(i*b+u*y+s*g),e[13]=-(c*b+l*y+f*g),e[14]=-(d*b+v*y+h*g),e[15]=1,e)},t.targetTo=function(e,t,r,n){var a=t[0],o=t[1],i=t[2],u=n[0],s=n[1],c=n[2],l=a-r[0],f=o-r[1],d=i-r[2],v=l*l+f*f+d*d;v>0&&(l*=v=1/Math.sqrt(v),f*=v,d*=v);var h=s*d-c*f,p=c*l-u*d,b=u*f-s*l;return(v=h*h+p*p+b*b)>0&&(h*=v=1/Math.sqrt(v),p*=v,b*=v),e[0]=h,e[1]=p,e[2]=b,e[3]=0,e[4]=f*b-d*p,e[5]=d*h-l*b,e[6]=l*p-f*h,e[7]=0,e[8]=l,e[9]=f,e[10]=d,e[11]=0,e[12]=a,e[13]=o,e[14]=i,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],d=e[9],v=e[10],h=e[11],p=e[12],b=e[13],y=e[14],g=e[15],m=t[0],M=t[1],w=t[2],I=t[3],A=t[4],S=t[5],C=t[6],O=t[7],U=t[8],x=t[9],T=t[10],P=t[11],F=t[12],B=t[13],R=t[14],L=t[15];return Math.abs(r-m)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(a-M)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-w)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-I)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(u-A)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(s-S)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-C)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(l-O)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(f-U)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(d-x)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(v-T)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(h-P)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-F)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(b-B)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(B))&&Math.abs(y-R)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(g-L)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))},t.mul=o,t.sub=s}).apply(null,n))||(e.exports=a)},NNdt:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("LxLY"),r("O0KB"),r("qasq"),r("mkxQ"),r("W2ph"),r("1RVI")],void 0===(a=(function(e,t,r,n,a,o,i,u){"use strict";function s(e,t){for(var r=new Float64Array(t),n=0;n<t;n++)r[n]=e[3*n+2];return r}function c(e){return null==e||"none"===e?null:"low-four-bit"===e?function(e){return 15&e}:"high-four-bit"===e?function(e){return(240&e)>>4}:"absolute-value"===e?function(e){return Math.abs(e)}:"modulo-ten"===e?function(e){return e%10}:null}function l(e){for(var t=0,r=0,n=e||[];r<n.length;r++)t|=1<<n[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.filterInPlace=t.elevationFromPositions=t.getAttributeValues=t.readGeometry=t.evaluateRenderer=void 0,t.evaluateRenderer=function(e,t,r,i){var u=e.rendererJSON,s=null,l=null;if(t&&e.isRGBRenderer)s=t;else if(t&&"pointCloudUniqueValueRenderer"===u.type){var f=(l=o.fromJSON(u)).colorUniqueValueInfos;s=new Uint8Array(3*i);for(var d=c(l.fieldTransformType),v=0;v<i;v++)for(var h=(y=d?d(t[v]):t[v])+"",p=0;p<f.length;p++)if(f[p].values.indexOf(h)>=0){s[3*v]=f[p].color.r,s[3*v+1]=f[p].color.g,s[3*v+2]=f[p].color.b;break}}else if(t&&"pointCloudStretchRenderer"===u.type){var b=(l=a.fromJSON(u)).stops;for(s=new Uint8Array(3*i),d=c(l.fieldTransformType),v=0;v<i;v++){var y=d?d(t[v]):t[v],g=b.length-1;if(y<b[0].value)s[3*v]=b[0].color.r,s[3*v+1]=b[0].color.g,s[3*v+2]=b[0].color.b;else if(y>=b[g].value)s[3*v]=b[g].color.r,s[3*v+1]=b[g].color.g,s[3*v+2]=b[g].color.b;else for(p=1;p<b.length;p++)if(y<b[p].value){var m=(y-b[p-1].value)/(b[p].value-b[p-1].value);s[3*v]=b[p].color.r*m+b[p-1].color.r*(1-m),s[3*v+1]=b[p].color.g*m+b[p-1].color.g*(1-m),s[3*v+2]=b[p].color.b*m+b[p-1].color.b*(1-m);break}}}else if(t&&"pointCloudClassBreaksRenderer"===u.type){var M=(l=n.fromJSON(u)).colorClassBreakInfos;for(s=new Uint8Array(3*i),d=c(l.fieldTransformType),v=0;v<i;v++)for(y=d?d(t[v]):t[v],p=0;p<M.length;p++)if(y>=M[p].minValue&&y<=M[p].maxValue){s[3*v]=M[p].color.r,s[3*v+1]=M[p].color.g,s[3*v+2]=M[p].color.b;break}}else for(s=new Uint8Array(3*i),v=0;v<s.length;v++)s[v]=255;if(r&&l&&l.colorModulation){var w=l.colorModulation.minValue,I=l.colorModulation.maxValue;for(v=0;v<i;v++){var A=(y=r[v])>=I?1:y<=w?.3:.3+.7*(y-w)/(I-w);s[3*v]=A*s[3*v],s[3*v+1]=A*s[3*v+1],s[3*v+2]=A*s[3*v+2]}}return s},t.readGeometry=function(e,t){if(null==e.encoding||""===e.encoding){var n=i.createGeometryIndexFromSchema(t,e);if(r.isNone(n.vertexAttributes.position))return;for(var a=i.createTypedView(t,n.vertexAttributes.position),o=n.header.fields,s=[o.offsetX,o.offsetY,o.offsetZ],c=[o.scaleX,o.scaleY,o.scaleZ],l=a.length/3,f=new Float64Array(3*l),d=0;d<l;d++)f[3*d]=a[3*d]*c[0]+s[0],f[3*d+1]=a[3*d+1]*c[1]+s[1],f[3*d+2]=a[3*d+2]*c[2]+s[2];return f}if("lepcc-xyz"===e.encoding)return u.decodeXYZ(t).result},t.getAttributeValues=function(e,t,n){return r.isSome(e)&&e.attributeInfo.useElevation?s(t,n):r.isSome(e)?i.readBinaryAttribute(e.attributeInfo.storageInfo,e.buffer,n):null},t.elevationFromPositions=s,t.filterInPlace=function(e,t,r,n,a){for(var o=e.length/3,i=0,u=0;u<o;u++){for(var s=!0,c=0;c<n.length&&s;c++){var f=n[c].filterJSON,d=a[c].values[u];switch(f.type){case"pointCloudValueFilter":var v="exclude"===f.mode;-1!==f.values.indexOf(d)===v&&(s=!1);break;case"pointCloudBitfieldFilter":var h=l(f.requiredSetBits),p=l(f.requiredClearBits);(d&h)===h&&0==(d&p)||(s=!1);break;case"pointCloudReturnFilter":for(var b=15&d,y=d>>>4&15,g=y>1,m=1===b,M=b===y,w=!1,I=0,A=f.includedReturns;I<A.length;I++){var S=A[I];if("last"===S&&M||"firstOfMany"===S&&m&&g||"lastOfMany"===S&&M&&g||"single"===S&&!g){w=!0;break}}w||(s=!1)}}s&&(r[i]=u,e[3*i]=e[3*u],e[3*i+1]=e[3*u+1],e[3*i+2]=e[3*u+2],t[3*i]=t[3*u],t[3*i+1]=t[3*u+1],t[3*i+2]=t[3*u+2],i++)}return i}}).apply(null,n))||(e.exports=a)},W2ph:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("rg9i"),r("qsST"),r("1RVI")],void 0===(a=(function(e,t,r,n,a,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBytesPerValue=t.isValueType=t.valueType2ArrayBufferReader=t.valueType2TypedArrayClassMap=t.readBinaryAttribute=t.createGeometryDescriptorForDraco=t.createGeometryDescriptorFromSchema=t.createGeometryDescriptor=t.createGeometryIndexFromSchema=t.createGeometryDescriptorFromDefinition=t.createAttributeDataIndex=t.createRawView=t.createTypedView=t.readStringArray=t.readHeader=void 0;var u=o.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function s(e,t,r){for(var a="",o=0;o<r;){var i=e[t+o];if(i<128)a+=String.fromCharCode(i),o++;else if(i>=192&&i<224){if(o+1>=r)throw new n("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var u=(31&i)<<6|63&e[t+o+1];a+=String.fromCharCode(u),o+=2}else if(i>=224&&i<240){if(o+2>=r)throw new n("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");u=(15&i)<<12|(63&e[t+o+1])<<6|63&e[t+o+2],a+=String.fromCharCode(u),o+=3}else{if(!(i>=240&&i<248))throw new n("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=r)throw new n("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");(u=(7&i)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3])>=65536?a+=String.fromCharCode(55296+(u-65536>>10),56320+(1023&u)):a+=String.fromCharCode(u),o+=4}}return a}function c(e,r){for(var n={byteOffset:0,byteCount:0,fields:Object.create(null)},a=0,o=0;o<r.length;o++){var i=r[o],u=i.valueType||i.type;n.fields[i.property]=(0,t.valueType2ArrayBufferReader[u])(e,a),a+=t.valueType2TypedArrayClassMap[u].BYTES_PER_ELEMENT}return n.byteCount=a,n}function l(e,t,r){var a,o,i=[],u=0;for(o=0;o<e;o+=1){if((a=t[o])>0){if(i.push(s(r,u,a-1)),0!==r[u+a-1])throw new n("string-array-error","Invalid string array: missing null termination.")}else i.push(null);u+=a}return i}function f(e,r){return new(0,t.valueType2TypedArrayClassMap[r.valueType])(e,r.byteOffset,r.count*r.valuesPerElement)}function d(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}function v(e,t,r){for(var o=null!=t.header?c(e,t.header):{byteOffset:0,byteCount:0,fields:{count:r}},i={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},u=o.byteCount,s=0;s<t.ordering.length;s++){var l=t.ordering[s],f=a.clone(t[l]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=u,f.byteCount=o.fields[l+"ByteCount"],"UTF-8"!==f.encoding)throw new n("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!m(f.valueType))throw new n("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var d=M(f.valueType);f.byteOffset=u+=u%d!=0?d-u%d:0,f.byteCount=d*f.valuesPerElement*f.count}u+=f.byteCount,i.entries[l]=f}return i.byteCount=u-i.byteOffset,i}function h(e,t,r){if(t!==e&&u.error("Invalid "+r+" buffer size\n expected: "+e+", actual: "+t+")"),t<e)throw new n("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function p(e){return{isDraco:!1,isLegacy:!1,color:null!=e.color,normal:null!=e.normal,uv0:null!=e.uv0,uvRegion:null!=e.uvRegion,featureIndex:null!=e.faceRange&&null!=e.featureId}}function b(e){for(var t={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1},r=0,n=e.ordering;r<n.length;r++){var a=n[r];if(e.vertexAttributes[a])switch(a){case"position":break;case"normal":t.normal=!0;break;case"color":t.color=!0;break;case"uv0":t.uv0=!0;break;case"region":t.uvRegion=!0}}return e.featureAttributes&&e.featureAttributeOrder&&(t.featureIndex=!0),t}function y(e){for(var t={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1},r=0,n=e;r<n.length;r++)switch(n[r]){case"position":break;case"normal":t.normal=!0;break;case"uv0":t.uv0=!0;break;case"color":t.color=!0;break;case"uv-region":t.uvRegion=!0;break;case"feature-index":t.featureIndex=!0}return t}t.readHeader=c,t.readStringArray=l,t.createTypedView=f,t.createRawView=d,t.createAttributeDataIndex=v,t.createGeometryDescriptorFromDefinition=p,t.createGeometryIndexFromSchema=function(e,t){for(var n=c(e,t&&t.header),a=n.byteCount,o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,u=null!=i.vertexCount?i.vertexCount:i.count,s=0,l=t.ordering;s<l.length;s++){var f=l[s];if(t.vertexAttributes[f]){var d=r.__assign(r.__assign({},t.vertexAttributes[f]),{byteOffset:a,count:u});o.vertexAttributes[g[f]?g[f]:"_"+f]=d,a+=M(d.valueType)*d.valuesPerElement*u}}var v=i.faceCount;if(t.faces&&v){o.faces={};for(var p=0,b=t.ordering;p<b.length;p++){var y=b[p];t.faces[y]&&(d=r.__assign(r.__assign({},t.faces[y]),{byteOffset:a,count:v}),o.faces[y]=d,a+=M(d.valueType)*d.valuesPerElement*v)}}var m=i.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&m){o.featureAttributes={};for(var w=0,I=t.featureAttributeOrder;w<I.length;w++){var A=I[w];t.featureAttributes[A]&&(d=r.__assign(r.__assign({},t.featureAttributes[A]),{byteOffset:a,count:m}),o.featureAttributes[A]=d,a+=("UInt64"===d.valueType?8:M(d.valueType))*d.valuesPerElement*m)}}return h(a,e.byteLength,"geometry"),o.byteCount=a-o.byteOffset,o},t.createGeometryDescriptor=function(e,t){return e&&e.compressedAttributes&&"draco"===e.compressedAttributes.encoding?y(e.compressedAttributes.attributes):e?p(e):b(t)},t.createGeometryDescriptorFromSchema=b,t.createGeometryDescriptorForDraco=y;var g={position:"position",normal:"normal",color:"color",uv0:"uv0",region:"uvRegion"};function m(e){return t.valueType2TypedArrayClassMap.hasOwnProperty(e)}function M(e){return m(e)?t.valueType2TypedArrayClassMap[e].BYTES_PER_ELEMENT:0}t.readBinaryAttribute=function(e,t,r){if("lepcc-rgb"===e.encoding)return i.decodeRGB(t);if("lepcc-intensity"===e.encoding)return i.decodeIntensity(t);if(null!=e.encoding&&""!==e.encoding)throw new n("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(u.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(u.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var a=v(t,e,r);h(a.byteOffset+a.byteCount,t.byteLength,"attribute");var o=a.entries.attributeValues||a.entries.objectIds;if(o){if("String"===o.valueType){var s=a.entries.attributeByteCounts,c=f(t,s),p=d(t,o);return l(s.count,c,p)}return f(t,o)}throw new n("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},t.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},t.valueType2ArrayBufferReader={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}},t.isValueType=m,t.getBytesPerValue=M}).apply(null,n))||(e.exports=a)},fdzS:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("gKSc")],void 0===(a=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quatf32=void 0,t.quatf32=r}).apply(null,n))||(e.exports=a)},gKSc:function(e,t,r){var n,a;n=[r.dj.c(e.i),t],void 0===(a=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createView=t.fromValues=t.clone=t.create=void 0,t.create=function(){var e=new Float32Array(4);return e[3]=1,e},t.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,r,n){var a=new Float32Array(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a},t.createView=function(e,t){return new Float32Array(e,t,4)}}).apply(null,n))||(e.exports=a)},iHt0:function(e,t,r){var n,a;n=[r.dj.c(e.i),t],void 0===(a=(function(e,t){"use strict";function r(){return new Float32Array(3)}function n(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}function a(){return r()}function o(){return n(1,1,1)}function i(){return n(1,0,0)}function u(){return n(0,1,0)}function s(){return n(0,0,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.UNIT_Z=t.UNIT_Y=t.UNIT_X=t.ONES=t.ZEROS=t.unitZ=t.unitY=t.unitX=t.ones=t.zeros=t.createView=t.fromValues=t.clone=t.create=void 0,t.create=r,t.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.fromValues=n,t.createView=function(e,t){return new Float32Array(e,t,3)},t.zeros=a,t.ones=o,t.unitX=i,t.unitY=u,t.unitZ=s,t.ZEROS=a(),t.ONES=o(),t.UNIT_X=i(),t.UNIT_Y=u(),t.UNIT_Z=s()}).apply(null,n))||(e.exports=a)},vlC2:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("iHt0")],void 0===(a=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3f32=void 0,t.vec3f32=r}).apply(null,n))||(e.exports=a)},wCvz:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r("LxLY"),r("qMld"),r("rusB"),r("EuvN"),r("fdzS"),r("0LE5"),r("vlC2"),r("Z4y+"),r("NNdt"),r("mmEe")],void 0===(a=(function(e,t,r,n,a,o,i,u,s,c,l,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(){}return e.prototype.transform=function(e){var t=this._transform(e),o=[t.points.buffer,t.rgb.buffer];r.isSome(t.pointIdFilterMap)&&o.push(t.pointIdFilterMap.buffer);for(var i=0,u=t.attributes;i<u.length;i++){var s=u[i];"buffer"in s.values&&a.isArrayBuffer(s.values.buffer)&&s.values.buffer!==t.rgb.buffer&&o.push(s.values.buffer)}return n.resolve({result:t,transferList:o})},e.prototype._transform=function(e){var t=l.readGeometry(e.schema,e.geometryBuffer),n=t.length/3,a=null,o=[],i=l.getAttributeValues(e.primaryAttributeData,t,n);r.isSome(e.primaryAttributeData)&&i&&o.push({attributeInfo:e.primaryAttributeData.attributeInfo,values:i});var u=l.getAttributeValues(e.modulationAttributeData,t,n);r.isSome(e.modulationAttributeData)&&u&&o.push({attributeInfo:e.modulationAttributeData.attributeInfo,values:u});var s=l.evaluateRenderer(e.rendererInfo,i,u,n);if(e.filterInfo&&e.filterInfo.length>0&&r.isSome(e.filterAttributesData)){var f=e.filterAttributesData.map((function(e){var r=l.getAttributeValues(e,t,n),a={attributeInfo:e.attributeInfo,values:r};return o.push(a),a}));a=new Uint32Array(n),n=l.filterInPlace(t,s,a,e.filterInfo,f)}for(var d=0,v=e.userAttributesData;d<v.length;d++){var h=v[d],p=l.getAttributeValues(h,t,n);o.push({attributeInfo:h.attributeInfo,values:p})}3*n<s.length&&(s=new Uint8Array(s.buffer.slice(0,3*n))),this._applyElevationOffsetInPlace(t,n,e.elevationOffset);var b=this._transformCoordinates(t,n,e.obb,c.fromJSON(e.inSR),c.fromJSON(e.outSR));return{obb:e.obb,points:b,rgb:s,attributes:o,pointIdFilterMap:a}},e.prototype._transformCoordinates=function(e,t,r,n,a){if(!f.bufferToBuffer(e,n,0,e,a,0,t))throw Error("Can't reproject");var i=s.vec3f32.fromValues(r.center[0],r.center[1],r.center[2]),c=s.vec3f32.create(),l=s.vec3f32.create();o.quat.conjugate(v,r.quaternion);for(var d=new Float32Array(3*t),h=0;h<t;h++)c[0]=e[3*h]-i[0],c[1]=e[3*h+1]-i[1],c[2]=e[3*h+2]-i[2],u.vec3.transformQuat(l,c,v),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(l[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(l[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(l[2])),d[3*h]=c[0],d[3*h+1]=c[1],d[3*h+2]=c[2];return d},e.prototype._applyElevationOffsetInPlace=function(e,t,r){if(0!==r)for(var n=0;n<t;n++)e[3*n+2]+=r},e}(),v=i.quatf32.create();t.default=function(){return new d}}).apply(null,n))||(e.exports=a)}}]);