!function(){function t(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,s=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(s.push(r.value),!e||s.length!==e);a=!0);}catch(o){u=!0,i=o}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return s}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e,n,r,i,s,a){try{var u=t[s](a),o=u.value}catch(h){return void n(h)}u.done?e(o):Promise.resolve(o).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){c(s,r,i,a,u,"next",t)}function u(t){c(s,r,i,a,u,"throw",t)}a(void 0)}))}}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}function v(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1kEK":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,n){var r=new i(t.getPointX(e),t.getPointY(e),n),s=t.hasZ(e),a=t.hasM(e);return s&&(r.z=t.getPointZ(e)),a&&(r.m=t.getPointM(e)),r},exportPolygon:function(t,e,n){return new s(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,n){return new a(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,n){return new u(t.exportPoints(e),n,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,n){var r=t.hasZ(e),i=t.hasM(e),s=new o(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),n);if(r){var a=t.getZExtent(e);s.zmin=a.vmin,s.zmax=a.vmax}if(i){var u=t.getMExtent(e);s.mmin=u.vmin,s.mmax=u.vmax}return s}},i=function t(e,n,r){_(this,t),this.x=e,this.y=n,this.spatialReference=r,this.z=void 0,this.m=void 0},s=function t(e,n,r,i){_(this,t),this.rings=e,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),i&&(this.hasM=i)},a=function t(e,n,r,i){_(this,t),this.paths=e,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),i&&(this.hasM=i)},u=function t(e,n,r,i){_(this,t),this.points=e,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),i&&(this.hasM=i)},o=function t(e,n,r,i,s){_(this,t),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}},"2AbE":function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return I}));var r=n("wSAH"),i=n("srIe"),s=n("6S2I"),a=n("zlDU"),u=n("9MzC"),o=n("OKTS"),h=n("DxxZ"),l=n("gLc9"),c=n("jIHu"),v=n("yN2G"),y=n("l8tk"),p=n("gzK8"),g=s.a.getLogger("esri.views.layers.2d.features.support.AttributeStore"),x=Object(y.b)(y.a,g),b=function(t){return(2147483648&t)>>>31},k=function(t){return 2147483647&t};function I(t){return 1===b(t)}var S={sharedArrayBuffer:Object(r.a)("esri-shared-array-buffer"),atomics:Object(r.a)("esri-atomics")};function O(t,e){return function(n){return e(t(n))}}var w=function(){function t(e,n,r,i){_(this,t),this.size=0,this.texelSize=4;var s=i.pixelType,a=i.layout,u=i.textureOnly;this.textureOnly=u||!1,this.pixelType=s,this._ctype=n,this.layout=a,this._resetRange(),this._shared=e,this.size=r,u||(this.data=this._initData(s,r,e,n))}return m(t,[{key:"buffer",get:function(){return Object(i.b)(this.data,(function(t){return t.buffer}))}},{key:"unsetComponentAllTexels",value:function(t,e){for(var n=Object(i.q)(this.data),r=0;r<this.size*this.size;r++)n[r*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}},{key:"setComponentAllTexels",value:function(t,e){for(var n=Object(i.q)(this.data),r=0;r<this.size*this.size;r++)n[r*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}},{key:"setComponent",value:function(t,e,n){var r,s=Object(i.q)(this.data),a=d(n);try{for(a.s();!(r=a.n()).done;){var u=r.value;s[u*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,u),this.dirtyEnd=Math.max(this.dirtyEnd,u)}}catch(o){a.e(o)}finally{a.f()}}},{key:"setComponentTexel",value:function(t,e,n){Object(i.q)(this.data)[n*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,n),this.dirtyEnd=Math.max(this.dirtyEnd,n)}},{key:"unsetComponentTexel",value:function(t,e,n){Object(i.q)(this.data)[n*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,n),this.dirtyEnd=Math.max(this.dirtyEnd,n)}},{key:"getData",value:function(t,e){var n=k(t);return Object(i.q)(this.data)[n*this.texelSize+e]}},{key:"setData",value:function(t,e,n){var r=k(t);0!=(this.layout&1<<e)?(this.data[r*this.texelSize+e]=n,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)):g.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")}},{key:"lock",value:function(){5121===this.pixelType&&this._shared&&S.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,1)}},{key:"unlock",value:function(){5121===this.pixelType&&this._shared&&S.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,0)}},{key:"expand",value:function(t){if(this.size=t,!this.textureOnly){var e=this._initData(this.pixelType,t,this._shared,this._ctype),n=Object(i.q)(this.data);e.set(n),this.data=e}}},{key:"toMessage",value:function(){var t=this.dirtyStart,e=this.dirtyEnd,n=this.texelSize;if(t>e)return null;this._resetRange();var r=!(this._shared||"local"===this._ctype),s=this.pixelType,a=this.layout,u=Object(i.q)(this.data);return u.slice?{start:t,end:e,data:r&&u.slice(t*n,(e+1)*n)||null,pixelType:s,layout:a}:r?{start:t,end:e,data:new(Object(v.j)(this.pixelType))(Array.prototype.slice.call(this.data,t*n,(e+1)*n)),pixelType:s,layout:a}:{start:t,end:e,data:null,pixelType:s,layout:a}}},{key:"_initData",value:function(t,e,n,r){for(var i=n&&"local"!==r?SharedArrayBuffer:ArrayBuffer,s=Object(v.j)(t),a=new s(new i(e*e*4*s.BYTES_PER_ELEMENT)),u=0;u<a.length;u+=4)a[u+1]=255;return a}},{key:"_resetRange",value:function(){this.dirtyStart=2147483647,this.dirtyEnd=0}}]),t}();e.a=function(){function t(e,n){_(this,t),this._client=e,this.config=n,this._attributeComputeMap=new Map,this._blocks=new Array,this._filters=new Array(c.m),this._targetType=0,this._abortController=Object(u.d)(),this._hasScaleExpr=!1,this._size=32,this._idsToHighlight=new Set;var r=n.supportsTextureFloat?5126:5121;x("Creating AttributeStore ".concat(S.sharedArrayBuffer?"with":"without"," shared memory")),this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:r,layout:15},{pixelType:r,layout:15}],this._blocks=this._blockDescriptors.map((function(){return null}))}var e,s,v,y;return m(t,[{key:"destroy",value:function(){this._abortController.abort()}},{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}},{key:"update",value:function(t,e){this.config=e;var n=e.schema.processors[0].storage,s=Object(h.a)(this._schema,n);if((t.targets.feature||t.targets.aggregate)&&(t.storage.data=!0),s&&(Object(r.a)("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",s),t.storage.data=!0,this._schema=n,this._attributeComputeMap.clear(),!Object(i.j)(n))){switch(n.target){case"feature":this._targetType=0;break;case"aggregate":this._targetType=1}var a,u=d(n.mapping);try{for(u.s();!(a=u.n()).done;){var o=a.value;this._bindAttribute(o)}}catch(l){u.e(l)}finally{u.f()}}}},{key:"onTileData",value:function(t,e){if(!Object(i.j)(e.addOrUpdate))for(var n=e.addOrUpdate.getCursor();n.next();){var r=n.getDisplayId();this.setAttributeData(r,n)}}},{key:"invalidateResources",value:function(){this._createResourcesPromise=null,this._abortController.abort(),this._abortController=Object(u.d)()}},{key:"setHighlight",value:(y=f(regeneratorRuntime.mark((function t(e,n){var r,i,s,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this._getBlock(0),i=n.map((function(t){return k(t)})),r.lock(),r.unsetComponentAllTexels(0,1),r.setComponent(0,1,i),r.unlock(),this._idsToHighlight.clear(),s=d(e);try{for(s.s();!(a=s.n()).done;)u=a.value,this._idsToHighlight.add(u)}catch(o){s.e(o)}finally{s.f()}return t.next=6,this.sendUpdates();case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return y.apply(this,arguments)})},{key:"updateFilters",value:(v=f(regeneratorRuntime.mark((function t(e,n){var i,s,a,u,o,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.config,s=n.service,a=n.spatialReference,u=i.filters,o=u.map((function(t,e){return h._updateFilter(t,e,s,a)})),t.next=3,Promise.all(o);case 3:if(t.t0=t.sent.some((function(t){return t})),!t.t0){t.next=6;break}e.storage.filters=!0,Object(r.a)("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed");case 6:case"end":return t.stop()}}),t)}))),function(t,e){return v.apply(this,arguments)})},{key:"setData",value:function(t,e,n,r){var i=k(t);this._ensureSizeForTexel(i),this._getBlock(e).setData(t,n,r)}},{key:"getData",value:function(t,e,n){return this._getBlock(e).getData(t,n)}},{key:"getHighlightFlag",value:function(t){return this._idsToHighlight.has(t)?c.j:0}},{key:"unsetAttributeData",value:function(t){var e=k(t);this._getBlock(0).setData(e,0,0)}},{key:"setAttributeData",value:function(t,e){var n=this,r=k(t);if(this._ensureSizeForTexel(r),this._getBlock(0).setData(r,0,this.getFilterFlags(e)),this._targetType===b(t)){var i=this._attributeComputeMap,s=this.config.supportsTextureFloat?1:2;i.size&&i.forEach((function(t,i){var a=i*s%4,u=Math.floor(i*s/4),h=n._getBlock(u+c.b),l=t(e);if(n.config.supportsTextureFloat)h.setData(r,a,l);else if(l===c.n)h.setData(r,a,255),h.setData(r,a+1,255);else{var f=Object(o.c)(Math.round(l),-32767,32766)+32768,d=(65280&f)>>8;h.setData(r,a,255&f),h.setData(r,a+1,d)}}))}}},{key:"sendUpdates",value:function(){var t=this;if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=Object(u.g)(),this._nextUpdate.promise;var e={blocks:this._blocks.map((function(t){return Object(i.k)(t)?t.toMessage():null}))};return this._currUpdate=this._createResources().then((function(){var n=function(){if(t._currUpdate=null,t._nextUpdate){var e=t._nextUpdate;t._nextUpdate=null,t.sendUpdates().then((function(){return e.resolve()}))}},r=t._client.update(e,t._signal).then(n).catch(n);return t._client.render(t._signal),r})).catch((function(e){return Object(u.m)(e)?(t._createResourcesPromise=null,t._createResources()):(g.error(new a.a("mapview-attribute-store","Encountered an error during client update",e)),Promise.resolve())})),this._currUpdate}},{key:"_ensureSizeForTexel",value:function(t){for(;t>=this._size*this._size;)if(this._expand())return}},{key:"_bindAttribute",value:function(t){var e;if(null!=t.fieldIndex)t.normalizationField&&g.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported."),e=function(e){return e.getComputedNumericAtIndex(t.fieldIndex)};else{if(!t.field)return;e=t.normalizationField?function(e){var n=e.readAttribute(t.normalizationField);return n?e.readAttribute(t.field)/n:null}:function(e){return e.readAttribute(t.field)}}t.valueRepresentation&&(e=O(e,(function(e){return Object(p.b)(e,t.valueRepresentation)}))),this._attributeComputeMap.set(t.binding,O(e,(function(t){return null===t||isNaN(t)||t===1/0?c.n:t})))}},{key:"_createResources",value:function(){var t=this;if(Object(i.k)(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(c.a),x("Initializing AttributeStore");var e={shared:S.sharedArrayBuffer&&!("local"===this._client.type),size:this._size,blocks:Object(i.m)(this._blocks,(function(t){return{textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType}}))},n=this._client.initialize(e,this._signal).catch((function(e){Object(u.m)(e)?t._createResourcesPromise=null:g.error(new a.a("mapview-attribute-store","Encountered an error during client initialization",e))}));return this._createResourcesPromise=n,n.then((function(){return Object(i.j)(t._createResourcesPromise)?t._createResources():void 0})),n}},{key:"_getBlock",value:function(t){var e=this._blocks[t];if(Object(i.k)(e))return e;x("Initializing AttributeBlock at index "+t);var n=new w(S.sharedArrayBuffer,this._client.type,this._size,this._blockDescriptors[t]);return this._blocks[t]=n,this._createResourcesPromise=null,n}},{key:"_expand",value:function(){if(this._size<this.config.maxTextureSize){var t=this._size<<=1;return x("Expanding block size to",t,this._blocks),Object(i.h)(this._blocks,(function(e){return e.expand(t)})),this._createResourcesPromise=null,this._size=t,0}return g.error(new a.a("mapview-limitations","Maximum number of onscreen features exceeded.")),-1}},{key:"_updateFilter",value:(s=f(regeneratorRuntime.mark((function t(e,n,r,s){var a,u,o,h,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this._filters[n],u=Object(i.k)(a)&&a.hash,a||e){t.next=3;break}return t.abrupt("return",!1);case 3:if(u!==JSON.stringify(e)){t.next=5;break}return t.abrupt("return",!1);case 5:if(!Object(i.j)(e)){t.next=8;break}return o=1<<n+1,h=this._getBlock(0),t.abrupt("return",(this._filters[n]=null,h.setComponentAllTexels(0,o),this.sendUpdates(),!0));case 8:return t.next=10,this._getFilter(n,r);case 10:return l=t.sent,t.next=13,l.update(e,s);case 13:return t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return s.apply(this,arguments)})},{key:"_getFilter",value:(e=f(regeneratorRuntime.mark((function t(e,r){var s,a,u,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=this._filters[e],!Object(i.k)(s)){t.next=3;break}return t.abrupt("return",s);case 3:return t.next=5,Promise.all([n.e(0),n.e(141)]).then(n.bind(null,"64Oa"));case 5:return a=t.sent,u=a.default,o=new u({geometryType:r.geometryType,hasM:!1,hasZ:!1,timeInfo:r.timeInfo,fieldsIndex:new l.a(r.fields)}),t.abrupt("return",(this._filters[e]=o,o));case 9:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"isVisible",value:function(t){return!!(2&this._getBlock(0).getData(t,0))}},{key:"getFilterFlags",value:function(t){for(var e=0,n=function(t){return 1===b(t)?254:255}(t.getDisplayId()),r=0;r<this._filters.length;r++){var s=this._filters[r];e|=(n&1<<r&&!Object(i.j)(s)&&!s.check(t)?0:1)<<r}var a=0;if(this._idsToHighlight.size){var u=t.getObjectId();a=this.getHighlightFlag(u)}return e<<1|a}}]),t}()},"2X7Z":function(t,e,n){"use strict";function r(t,e){return t?e?4:3:e?3:2}function i(t,e,n,i,u){if(!e||!e.lengths.length)return null;var o="upperLeft"===(null==u?void 0:u.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);var h,l=t.coords,c=[],f=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],v=e.lengths,y=e.coords,p=r(n,i),m=0,_=d(v);try{for(_.s();!(h=_.n()).done;){var g=h.value,x=s(f,y,m,g,n,i,o);x&&c.push(x),m+=g*p}}catch(I){_.e(I)}finally{_.f()}if(c.sort((function(t,e){var r=o*t[2]-o*e[2];return 0===r&&n&&(r=t[4]-e[4]),r})),c.length){var b=6*c[0][2];l[0]=c[0][0]/b,l[1]=c[0][1]/b,n&&(b=6*c[0][4],l[2]=0!==b?c[0][3]/b:0),(l[0]<f[0]||l[0]>f[1]||l[1]<f[2]||l[1]>f[3]||n&&(l[2]<f[4]||l[2]>f[5]))&&(l.length=0)}if(!l.length){var k=e.lengths[0]?a(y,0,v[0],n,i):null;if(!k)return null;l[0]=k[0],l[1]=k[1],n&&k.length>2&&(l[2]=k[2])}return t}function s(t,e,n,i,s,a){for(var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=r(s,a),h=n,l=n+o,c=0,f=0,d=0,v=0,y=0,p=0,m=i-1;p<m;p++,h+=o,l+=o){var _=e[h],g=e[h+1],x=e[h+2],b=e[l],k=e[l+1],I=e[l+2],S=_*k-b*g;v+=S,c+=(_+b)*S,f+=(g+k)*S,s&&(d+=(x+I)*(S=_*I-b*x),y+=S),_<t[0]&&(t[0]=_),_>t[1]&&(t[1]=_),g<t[2]&&(t[2]=g),g>t[3]&&(t[3]=g),s&&(x<t[4]&&(t[4]=x),x>t[5]&&(t[5]=x))}if(v*u>0&&(v*=-1),y*u>0&&(y*=-1),!v)return null;var O=[c,f,.5*v];return s&&(O[3]=d,O[4]=.5*y),O}function a(t,e,n,i,s){for(var a=r(i,s),c=e,f=e+a,d=0,v=0,y=0,p=0,m=0,_=n-1;m<_;m++,c+=a,f+=a){var g=t[c],x=t[c+1],b=t[c+2],k=t[f],I=t[f+1],S=t[f+2],O=i?o(g,x,b,k,I,S):u(g,x,k,I);if(O)if(d+=O,i){var w=l(g,x,b,k,I,S);v+=O*w[0],y+=O*w[1],p+=O*w[2]}else{var j=h(g,x,k,I);v+=O*j[0],y+=O*j[1]}}return d>0?i?[v/d,y/d,p/d]:[v/d,y/d]:n>0?i?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function u(t,e,n,r){var i=n-t,s=r-e;return Math.sqrt(i*i+s*s)}function o(t,e,n,r,i,s){var a=r-t,u=i-e,o=s-n;return Math.sqrt(a*a+u*u+o*o)}function h(t,e,n,r){return[t+.5*(n-t),e+.5*(r-e)]}function l(t,e,n,r,i,s){return[t+.5*(r-t),e+.5*(i-e),n+.5*(s-n)]}n.d(e,"a",(function(){return i}))},"7g5W":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("VW+2"),i=n("OvF4"),s=n("kYAx"),a=n("AtWh"),u=n("rlSK"),o=function(){function t(e,n){_(this,t),this.key=new u.a(0,0,0,0),this.bounds=Object(s.g)(),this.objectIds=new Set,this.key.set(n);var r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level,this.needsClear=!0}return m(t,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return i.a.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}},{key:"bbox",get:function(){var t=this.bounds;return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}}},{key:"clone",value:function(){return new t(this.tileInfoView,this.key)}},{key:"createChildTiles",value:function(){for(var e=this.key.getChildKeys(),n=r.a.acquire(),i=0;i<e.length;i++)n[i]=new t(this.tileInfoView,e[i]);return n}},{key:"getQuantizationParameters",value:function(){return a.a.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}]),t}()},"8NDJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n("wSAH");var r=n("srIe"),i=n("qatw"),s=(n("4GrV"),n("gVKr")),a=n("ZlUD"),u=n("2X7Z"),o=n("feGD"),h=0,l=function(){function t(e){_(this,t),this.type="FeatureSetReader",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._sx=1,this._sy=1,this._xmin=-1,this._xmax=0,this._ymin=0,this._ymax=0,this._deleted=null,this._joined=[],this.instance=e}return m(t,[{key:"isEmpty",get:function(){return Object(r.k)(this._deleted)&&this._deleted.countSet()===this.getApproximateSize()}},{key:"_hasFilter",get:function(){return-1!==this._xmin}},{key:"setArcadeSpatialReference",value:function(t){this._arcadeSpatialReference=t}},{key:"attachStorage",value:function(t){this._storage=t}},{key:"getQuantizationTransform",value:function(){throw new Error("Unable to find transform for featureSet")}},{key:"getStorage",value:function(){return this._storage}},{key:"getComputedNumeric",value:function(t){return this.getComputedNumericAtIndex(0)}},{key:"setComputedNumeric",value:function(t,e){return this.setComputedNumericAtIndex(e,0)}},{key:"getComputedString",value:function(t){return this.getComputedStringAtIndex(0)}},{key:"setComputedString",value:function(t,e){return this.setComputedStringAtIndex(0,e)}},{key:"getComputedNumericAtIndex",value:function(t){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),t)}},{key:"setComputedNumericAtIndex",value:function(t,e){this._storage.setComputedNumericAtIndex(this.getDisplayId(),t,e)}},{key:"getComputedStringAtIndex",value:function(t){return this._storage.getComputedStringAtIndex(this.getDisplayId(),t)}},{key:"setComputedStringAtIndex",value:function(t,e){return this._storage.setComputedStringAtIndex(this.getDisplayId(),t,e)}},{key:"transform",value:function(t,e,n,r){var i=this.copy();return i._tx+=t,i._ty+=e,i._sx*=n,i._sy*=r,i}},{key:"extent",value:function(t,e,n,r){var i=this.copy();return i._xmin=t,i._xmax=n,i._ymin=e,i._ymax=r,i}},{key:"hasFilter",value:function(){return this._hasFilter}},{key:"readAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._readAttribute(t,e);if(void 0!==n)return n;var r,i=d(this._joined);try{for(i.s();!(r=i.n()).done;){var s=r.value;s.setIndex(this.getIndex());var a=s._readAttribute(t,e);if(void 0!==a)return a}}catch(u){i.e(u)}finally{i.f()}}},{key:"readAttributes",value:function(){return this._readAttributes()}},{key:"joinAttributes",value:function(t){this._joined.push(t)}},{key:"readArcadeFeature",value:function(){return this}},{key:"geometry",value:function(){var t=this.readHydratedGeometry(),e=Object(a.k)(t,this.geometryType,this.hasZ,this.hasM),n=Object(i.a)(e);return n.spatialReference=this._arcadeSpatialReference,n}},{key:"field",value:function(t){return this.readAttribute(t,!0)}},{key:"hasField",value:function(t){return!0}},{key:"setField",value:function(t,e){}},{key:"keys",value:function(){return[]}},{key:"castToText",value:function(){return""}},{key:"removeAtIndex",value:function(t){Object(r.j)(this._deleted)&&(this._deleted=o.a.create(this.getApproximateSize())),this._deleted.set(t)}},{key:"_getExists",value:function(){return Object(r.j)(this._deleted)||!this._deleted.has(this.getIndex())}},{key:"_computeCentroid",value:function(){if("esriGeometryPolygon"!==this.geometryType)return null;var t=this.readUnquantizedGeometry();if(!t||t.hasIndeterminateRingOrder)return null;var e=Object(r.r)(this.getQuantizationTransform(),null);return Object(u.a)(new s.a,t,this.hasM,this.hasZ,e)}},{key:"copyInto",value:function(t){t.seen=this.seen,t._storage=this._storage,t._arcadeSpatialReference=this._arcadeSpatialReference,t._joined=this._joined,t._tx=this._tx,t._ty=this._ty,t._sx=this._sx,t._sy=this._sy,t._xmin=this._xmin,t._xmax=this._xmax,t._ymin=this._ymin,t._ymax=this._ymax}}],[{key:"createInstance",value:function(){return h=++h>65535?0:h}}]),t}()},HsO1:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return k}));var r=n("f4Nx"),i=n("l4ZG"),s=n("gYg2"),a=n("1kEK"),u=[0,0];function o(t,e){if(!e)return null;if("x"in e){var n,r={x:0,y:0};return n=l(t(e.x,e.y,u),2),r.x=n[0],r.y=n[1],null!=e.z&&(r.z=e.z),null!=e.m&&(r.m=e.m),r}if("xmin"in e){var i,s,a={xmin:0,ymin:0,xmax:0,ymax:0};return i=l(t(e.xmin,e.ymin,u),2),a.xmin=i[0],a.ymin=i[1],s=l(t(e.xmax,e.ymax,u),2),a.xmax=s[0],a.ymax=s[1],e.hasZ&&(a.zmin=e.zmin,a.zmax=e.zmax,a.hasZ=!0),e.hasM&&(a.mmin=e.mmin,a.mmax=e.mmax,a.hasM=!0),a}return"rings"in e?{rings:h(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:h(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:c(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:void 0}function h(t,e){var n,r=[],i=d(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;r.push(c(s,e))}}catch(a){i.e(a)}finally{i.f()}return r}function c(t,e){var n,r=[],i=d(t);try{for(i.s();!(n=i.n()).done;){var s=n.value,a=e(s[0],s[1],[0,0]);r.push(a),s.length>2&&a.push(s[2]),s.length>3&&a.push(s[3])}}catch(u){i.e(u)}finally{i.f()}return r}function v(t,e){return y.apply(this,arguments)}function y(){return(y=f(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return r=Array.isArray(e)?e.map((function(t){var e;return null==(e=t.geometry)?void 0:e.spatialReference})):[e],t.next=5,Object(s.f)(r.map((function(t){return{source:t,dest:n}})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=o.bind(null,i.c),g=o.bind(null,i.f);function x(t,e,n){return t?(n||(n=e,e=t.spatialReference),Object(r.i)(e)&&Object(r.i)(n)&&!Object(r.c)(e,n)?Object(i.a)(e,n)?Object(r.m)(n)?p(t):g(t):Object(s.m)(a.a,[t],e,n,null)[0]:t):t}var b=new(function(){function t(){_(this,t),this._jobs=[],this._timer=null,this._process=this._process.bind(this)}var e;return m(t,[{key:"push",value:(e=f(regeneratorRuntime.mark((function t(e,n,i){var s,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!e||!e.length||!n||!i||Object(r.c)(n,i),s={geometries:e,inSpatialReference:n,outSpatialReference:i,resolve:null},t.abrupt("return",(this._jobs.push(s),new Promise((function(t){s.resolve=t,null===a._timer&&(a._timer=setTimeout(a._process,10))}))));case 3:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"_process",value:function(){this._timer=null;var t=this._jobs.shift();if(t){var e=t.geometries,n=t.inSpatialReference,u=t.outSpatialReference,o=t.resolve;Object(i.a)(n,u)?Object(r.m)(u)?o(e.map(p)):o(e.map(g)):o(Object(s.m)(a.a,e,n,u,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}}]),t}());function k(t,e,n){return I.apply(this,arguments)}function I(){return(I=f(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",b.push(e,n,r));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},NIRN:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("6S2I"),i=n("zlDU"),s=n("yE7X"),a=n("yN2G"),u=r.a.getLogger("esri.views.2d.engine.webgl");function o(t){return Object(a.o)(t.minDataValue)&&Object(a.o)(t.maxDataValue)&&null!=t.minSize&&null!=t.maxSize?s.e.SIZE_MINMAX_VALUE:(t.expression&&"view.scale"===t.expression||t.valueExpression&&"$view.scale"===t.valueExpression)&&Array.isArray(t.stops)?s.e.SIZE_SCALE_STOPS:(null!=t.field||t.expression&&"view.scale"!==t.expression||t.valueExpression&&"$view.scale"!==t.valueExpression)&&(Array.isArray(t.stops)||"levels"in t&&t.levels)?s.e.SIZE_FIELD_STOPS:(null!=t.field||t.expression&&"view.scale"!==t.expression||t.valueExpression&&"$view.scale"!==t.valueExpression)&&null!=t.valueUnit?s.e.SIZE_UNIT_VALUE:(u.error(new i.a("mapview-bad-type","Found invalid size VisualVariable",t)),s.e.NONE)}},Q0oN:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("srIe"),a=n("ZlUD"),o=n("8NDJ"),c=function(t){s(n,t);var e=u(n);function n(t,r,i){var s;return _(this,n),(s=e.call(this,t))._featureIndex=-1,s._dateFields=new Set,s._geometryType=i,s._features=r,s}return m(n,[{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}},{key:"getApproximateSize",value:function(){return this._features.length}},{key:"getCursor",value:function(){return this.copy()}},{key:"getQuantizationTransform",value:function(){return this._transform}},{key:"getAttributeHash",value:function(){var t="";for(var e in this._current.attributes)t+=this._current.attributes[e];return t}},{key:"getIndex",value:function(){return this._featureIndex}},{key:"setIndex",value:function(t){this._featureIndex=t}},{key:"getObjectId",value:function(){return this._current.objectId}},{key:"getDisplayId",value:function(){return this._current.displayId}},{key:"setDisplayId",value:function(t){this._current.displayId=t}},{key:"getGroupId",value:function(){return this._current.groupId}},{key:"setGroupId",value:function(t){this._current.groupId=t}},{key:"copy",value:function(){var t=new n(this.instance,this._features,this.geometryType);return this.copyInto(t),t}},{key:"next",value:function(){for(;++this._featureIndex<this._features.length&&!this._passesFilter()&&!this._getExists(););return this._featureIndex<this._features.length}},{key:"readLegacyFeature",value:function(){return Object(a.i)(this._current,this.geometryType,this.hasZ,this.hasM)}},{key:"readOptimizedFeature",value:function(){return this._current}},{key:"readLegacyPointGeometry",value:function(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null}},{key:"readLegacyGeometry",value:function(){var t=this.readGeometry();return Object(a.k)(t,this.geometryType,this.hasZ,this.hasM)}},{key:"readLegacyCentroid",value:function(){var t=this.readCentroid();return t?{x:t.coords[0]*this._sx+this._tx,y:t.coords[1]*this._sy+this._ty}:null}},{key:"readGeometryArea",value:function(){return Object(a.s)(this._current.geometry,2)}},{key:"readUnquantizedGeometry",value:function(){var t=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!t)return t;var e=t.clone();return function(t){var e,n=t.coords,r=0,i=d(t.lengths);try{for(i.s();!(e=i.n()).done;){for(var s=e.value,a=1;a<s;a++)n[2*(r+a)]+=n[2*(r+a)-2],n[2*(r+a)+1]+=n[2*(r+a)-1];r+=s}}catch(u){i.e(u)}finally{i.f()}}(e),e}},{key:"readHydratedGeometry",value:function(){var t=this._current.geometry;if(!t)return null;var e=t.clone();return Object(r.k)(this._transform)&&Object(a.z)(e,e,this.hasZ,this.hasM,this._transform),e}},{key:"getXHydrate",value:function(){var t=this._current.geometry.coords[0],e=this.getQuantizationTransform();return Object(r.j)(e)?t:t*e.scale[0]+e.translate[0]}},{key:"getYHydrate",value:function(){var t=this._current.geometry.coords[1],e=this.getQuantizationTransform();return Object(r.j)(e)?t:e.translate[1]-t*e.scale[1]}},{key:"getX",value:function(){return this._current.geometry.coords[0]*this._sx+this._tx}},{key:"getY",value:function(){return this._current.geometry.coords[1]*this._sy+this._ty}},{key:"readGeometry",value:function(){if(!this._current.hasGeometry)return null;var t=this._current.geometry.clone();if(t.isPoint)return t.coords[0]=t.coords[0]*this._sx+this._tx,t.coords[1]=t.coords[1]*this._sy+this._ty,t;var e,n=0,r=d(t.lengths);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.coords[2*n]=t.coords[2*n]*this._sx+this._tx,t.coords[2*n+1]=t.coords[2*n+1]*this._sy+this._ty,n+=i}}catch(s){r.e(s)}finally{r.f()}return t}},{key:"readCentroid",value:function(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){var t=this._computeCentroid();if(!t)return null;t.coords[0]=(t.coords[0]-this._tx)/this._sx,t.coords[1]=(t.coords[1]-this._ty)/this._sy,this._current.centroid=t}var e=this._current.centroid.clone();return e.coords[0]=e.coords[0]*this._sx+this._tx,e.coords[1]=e.coords[1]*this._sx+this._ty,e}},{key:"_readAttribute",value:function(t,e){var n=this._current.attributes[t];if(void 0!==n)return null!=n&&e&&this._dateFields.has(t)?new Date(n):n;var r=this.readAttributes(),i=t.toLocaleLowerCase().trim();for(var s in r)if(s.toLocaleLowerCase().trim()===i){var a=this._current.attributes[s];return null!=a&&e&&this._dateFields.has(s)?new Date(a):a}}},{key:"copyInto",value:function(t){i(h(n.prototype),"copyInto",this).call(this,t),t._featureIndex=this._featureIndex,t._transform=this._transform,t._dateFields=this._dateFields}},{key:"_readAttributes",value:function(){return this._current.attributes}},{key:"_passesFilter",value:function(){if(!this._hasFilter)return!0;var t=0,e=0;switch(this.geometryType){case"esriGeometryPoint":var n=this._current.geometry;if(!n)return!1;var r=l(n.coords,2);t=r[0],e=r[1];break;case"esriGeometryPolygon":var i,s=this.readCentroid();if(!s)return!1;t=(i=l(s.coords,2))[0],e=i[1],t-=this._tx,e-=this._ty;break;default:return!1}return t>=this._xmin&&t<=this._xmax&&e>=this._ymin&&e<=this._ymax}}],[{key:"fromFeatures",value:function(t,e,r){for(var i=Object(a.c)([],t,e,!1,!1,r),s=0;s<i.length;s++)i[s].displayId=t[s].displayId;return n.fromOptimizedFeatures(i,e)}},{key:"fromFeatureSet",value:function(t,e){var r=Object(a.b)(t,e);return n.fromOptimizedFeatureSet(r)}},{key:"fromOptimizedFeatureSet",value:function(t){var e=t.features,r=t.geometryType,i=n.fromOptimizedFeatures(e,r);i._exceededTransferLimit=t.exceededTransferLimit,i._transform=t.transform;var s,a=d(t.fields);try{for(a.s();!(s=a.n()).done;){var u=s.value;"esriFieldTypeDate"===u.type&&i._dateFields.add(u.name)}}catch(o){a.e(o)}finally{a.f()}return i}},{key:"fromOptimizedFeatures",value:function(t,e,r){var i=new n(o.a.createInstance(),t,e);return i._transform=r,i}}]),n}(o.a)},RjdO:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("X2wA"),i=Object(r.b)((function(t){var e;void 0!==(e=function(){function t(n,r,i,s,a){for(;s>i;){if(s-i>600){var u=s-i+1,o=r-i+1,h=Math.log(u),l=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*l*(u-l)/u)*(o-u/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-o*l/u+c)),Math.min(s,Math.floor(r+(u-o)*l/u+c)),a)}var f=n[r],d=i,v=s;for(e(n,i,r),a(n[s],f)>0&&e(n,i,s);d<v;){for(e(n,d,v),d++,v--;a(n[d],f)<0;)d++;for(;a(n[v],f)>0;)v--}0===a(n[i],f)?e(n,i,v):e(n,++v,s),v<=r&&(i=v+1),r<=v&&(s=v-1)}}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}return function(e,r,i,s,a){t(e,r,i||0,s||e.length-1,a||n)}}())&&(t.exports=e)}))},Swtj:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("feGD"),i=function(){function t(){_(this,t),this._freeIds=[],this._idCounter=1}return m(t,[{key:"createId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e){return((e?2147483648:0)|t)>>>0}(this._getFreeId(),t)}},{key:"releaseId",value:function(t){this._freeIds.push(t)}},{key:"_getFreeId",value:function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}]),t}();function s(t,e,n){if(!(t.length>e))for(;t.length<=e;)t.push(n)}var a=function(){function t(){_(this,t),this._numerics=[],this._strings=[],this._idGenerator=new i,this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}return m(t,[{key:"createBitset",value:function(){var t=this._bitsets.length;return this._bitsets.push(r.a.create(this._allocatedSize,2147483647)),t+1}},{key:"getBitset",value:function(t){return this._bitsets[t-1]}},{key:"_expand",value:function(){this._allocatedSize<<=1;var t,e=d(this._bitsets);try{for(e.s();!(t=e.n()).done;){t.value.resize(this._allocatedSize)}}catch(n){e.e(n)}finally{e.f()}}},{key:"_ensureNumeric",value:function(t,e){this._numerics[t]||(this._numerics[t]=[]),s(this._numerics[t],e,0)}},{key:"_ensureInstanceId",value:function(t){s(this._instanceIds,t,0)}},{key:"_ensureString",value:function(t,e){this._strings[t]||(this._strings[t]=[]),s(this._strings[t],e,null)}},{key:"createDisplayId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._idGenerator.createId();return e>this._allocatedSize&&this._expand(),function(t,e){return((e?2147483648:0)|t)>>>0}(e,t)}},{key:"releaseDisplayId",value:function(t){var e,n=d(this._bitsets);try{for(n.s();!(e=n.n()).done;){e.value.unset(t)}}catch(r){n.e(r)}finally{n.f()}return this._idGenerator.releaseId(2147483647&t)}},{key:"getComputedNumeric",value:function(t,e){return this.getComputedNumericAtIndex(2147483647&t,0)}},{key:"setComputedNumeric",value:function(t,e,n){return this.setComputedNumericAtIndex(2147483647&t,n,0)}},{key:"getComputedString",value:function(t,e){return this.getComputedStringAtIndex(2147483647&t,0)}},{key:"setComputedString",value:function(t,e,n){return this.setComputedStringAtIndex(2147483647&t,0,n)}},{key:"getComputedNumericAtIndex",value:function(t,e){var n=2147483647&t;return this._ensureNumeric(e,n),this._numerics[e][n]}},{key:"setComputedNumericAtIndex",value:function(t,e,n){var r=2147483647&t;this._ensureNumeric(e,r),this._numerics[e][r]=n}},{key:"getInstanceId",value:function(t){var e=2147483647&t;return this._ensureInstanceId(e),this._instanceIds[e]}},{key:"setInstanceId",value:function(t,e){var n=2147483647&t;this._ensureInstanceId(n),this._instanceIds[n]=e}},{key:"getComputedStringAtIndex",value:function(t,e){var n=2147483647&t;return this._ensureString(e,n),this._strings[e][n]}},{key:"setComputedStringAtIndex",value:function(t,e,n){var r=2147483647&t;this._ensureString(e,r),this._strings[e][r]=n}},{key:"getXMin",value:function(t){return this._bounds[4*(2147483647&t)]}},{key:"getYMin",value:function(t){return this._bounds[4*(2147483647&t)+1]}},{key:"getXMax",value:function(t){return this._bounds[4*(2147483647&t)+2]}},{key:"getYMax",value:function(t){return this._bounds[4*(2147483647&t)+3]}},{key:"setBounds",value:function(t,e){var n=e.readHydratedGeometry();if(!n||!n.coords.length)return!1;var r=1/0,i=1/0,a=-1/0,u=-1/0;n.forEachVertex((function(t,e){r=Math.min(r,t),i=Math.min(i,e),a=Math.max(a,t),u=Math.max(u,e)}));var o=2147483647&t;return s(this._bounds,4*o+4,0),this._bounds[4*o]=r,this._bounds[4*o+1]=i,this._bounds[4*o+2]=a,this._bounds[4*o+3]=u,!0}}]),t}()},feGD:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(e,n){_(this,t),this._mask=0,this._buf=e,this._mask=n}return m(t,[{key:"_getIndex",value:function(t){return Math.floor(t/32)}},{key:"has",value:function(t){var e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)}},{key:"hasRange",value:function(t,e){for(var n=t,r=e;n%32&&n!==r;){if(this.has(n))return!0;n++}for(;r%32&&n!==r;){if(this.has(n))return!0;r--}if(n===r)return!1;for(var i=n/32;i!==r/32;i++)if(this._buf[i])return!0;return!1}},{key:"set",value:function(t){var e=this._mask&t,n=this._getIndex(e);this._buf[n]|=1<<e%32}},{key:"setRange",value:function(t,e){for(var n=t,r=e;n%32&&n!==r;)this.set(n++);for(;r%32&&n!==r;)this.set(r--);if(n!==r)for(var i=n/32;i!==r/32;i++)this._buf[i]=4294967295}},{key:"unset",value:function(t){var e=this._mask&t,n=this._getIndex(e);this._buf[n]&=4294967295^1<<e%32}},{key:"resize",value:function(t){var e=this._buf,n=new Uint32Array(Math.ceil(t/32));n.set(e),this._buf=n}},{key:"or",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this}},{key:"and",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this}},{key:"xor",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this}},{key:"ior",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this}},{key:"iand",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this}},{key:"ixor",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this}},{key:"any",value:function(){for(var t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1}},{key:"copy",value:function(t){for(var e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this}},{key:"clone",value:function(){return new t(this._buf.slice(),this._mask)}},{key:"clear",value:function(){for(var t=0;t<this._buf.length;t++)this._buf[t]=0}},{key:"forEachSet",value:function(t){for(var e=0;e<this._buf.length;e++){var n=this._buf[e],r=32*e;if(n)for(;n;)1&n&&t(r),n>>>=1,r++}}},{key:"countSet",value:function(){var t=0;return this.forEachSet((function(e){t++})),t}}],[{key:"fromBuffer",value:function(e,n){return new t(e,n)}},{key:"create",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295,r=new Uint32Array(Math.ceil(e/32));return new t(r,n)}}]),t}()},gzK8:function(t,e,r){"use strict";r.d(e,"a",(function(){return y})),r.d(e,"b",(function(){return l}));var i=r("srIe"),s=r("qRWG"),a=r("jIHu"),u=r("yE7X"),o=r("qaIE"),h=r("NIRN");function l(t,e){if(!t||!e)return t;switch(e){case"radius":case"distance":return 2*t;case"diameter":case"width":return t;case"area":return Math.sqrt(t)}return t}function c(t){return t.map((function(t){return function(t){return{value:t.value,size:Object(s.k)(t.size)}}(t)}))}function f(t){return"string"==typeof t||"number"==typeof t?Object(s.k)(t):{type:"size",expression:t.expression,stops:c(t.stops)}}var v=function(t){for(var e=[],n=[],r=c(t),i=r.length,u=0;u<6;u++){var o=r[Math.min(u,i-1)];e.push(o.value),n.push(null==o.size?a.n:Object(s.h)(o.size))}return{values:new Float32Array(e),sizes:new Float32Array(n)}};function y(t){var e=t&&t.length>0?{}:null,r=e?{}:null;if(!e)return{vvFields:e,vvRanges:r};var i,s=d(t);try{for(s.s();!(i=s.n()).done;){var a=i.value;if(a.field&&(e[a.type]=a.field),"size"===a.type){r.size||(r.size={});var o=a;switch(Object(h.a)(o)){case u.e.SIZE_MINMAX_VALUE:r.size.minMaxValue={minDataValue:o.minDataValue,maxDataValue:o.maxDataValue,minSize:f(o.minSize),maxSize:f(o.maxSize)};break;case u.e.SIZE_SCALE_STOPS:r.size.scaleStops={stops:c(o.stops)};break;case u.e.SIZE_FIELD_STOPS:if(o.levels){var l={};for(var y in o.levels)l[y]=v(o.levels[y]);r.size.fieldStops={type:"level-dependent",levels:l}}else r.size.fieldStops=n({type:"static"},v(o.stops));break;case u.e.SIZE_UNIT_VALUE:r.size.unitValue={unit:o.valueUnit,valueRepresentation:o.valueRepresentation}}}else"color"===a.type?r.color=_(a):"opacity"===a.type?r.opacity=p(a):"rotation"===a.type&&(r.rotation={type:a.rotationType})}}catch(m){s.e(m)}finally{s.f()}return{vvFields:e,vvRanges:r}}function p(t){var e={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"==typeof t.field){if(!t.stops)return null;if(t.stops.length>8)return null;for(var n=t.stops,r=0;r<8;++r){var i=n[Math.min(r,n.length-1)];e.values[r]=i.value,e.opacities[r]=i.opacity}}else{if(!(t.stops&&t.stops.length>=0))return null;for(var s=t.stops&&t.stops.length>=0&&t.stops[0].opacity,a=0;a<8;a++)e.values[a]=1/0,e.opacities[a]=s}return e}function m(t,e,n){t[4*e+0]=n.r/255,t[4*e+1]=n.g/255,t[4*e+2]=n.b/255,t[4*e+3]=n.a}function _(t){if(Object(i.j)(t))return null;if(t.normalizationField)return null;var e={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"==typeof t.field){if(!t.stops)return null;if(t.stops.length>8)return null;e.field=t.field;for(var n=t.stops,r=0;r<8;++r){var s=n[Math.min(r,n.length-1)];e.values[r]=s.value,m(e.colors,r,s.color)}}else{if(!(t.stops&&t.stops.length>=0))return null;for(var a=t.stops&&t.stops.length>=0&&t.stops[0].color,u=0;u<8;u++)e.values[u]=1/0,m(e.colors,u,a)}for(var h=0;h<32;h+=4)Object(o.b)(e.colors,h,!0);return e}},"kB+0":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("RjdO");function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}function s(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){u(t,0,t.children.length,e,t)}function u(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,a=e;a<n;a++)s=t.children[a],o(i,t.leaf?r(s):s);return i}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function v(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function y(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,i,s){for(var a,u=[e,n];u.length;)(n=u.pop())-(e=u.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,Object(r.a)(t,a,e,n,s),u.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!p(t,e))return n;for(var i,s,a,u,o=[];e;){for(i=0,s=e.children.length;i<s;i++)a=e.children[i],p(t,u=e.leaf?r(a):a)&&(e.leaf?n.push(a):y(t,u)?this._all(a,n):o.push(a));e=o.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!p(t,e))return!1;for(var r,i,s,a,u=[];e;){for(r=0,i=e.children.length;r<i;r++)if(s=e.children[r],p(t,a=e.leaf?n(s):s)){if(e.leaf||y(t,a))return!0;u.push(s)}e=u.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,u=this.data,o=this.toBBox(t),h=[],l=[];u||h.length;){if(u||(u=h.pop(),r=h[h.length-1],n=l.pop(),a=!0),u.leaf&&-1!==(i=s(t,u.children,e)))return u.children.splice(i,1),h.push(u),this._condense(h),this;a||u.leaf||!y(u,o)?r?(n++,u=r.children[n],a=!1):u=null:(h.push(u),l.push(n),n=0,r=u,u=u.children[0])}return this},toBBox:function(t){return t},compareMinX:h,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,s=n-e+1,u=this._maxEntries;if(s<=u)return a(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(u)),u=Math.ceil(s/Math.pow(u,r-1))),(i=m([])).leaf=!1,i.height=r;var o,h,l,c,f=Math.ceil(s/u),d=f*Math.ceil(Math.sqrt(u));for(_(t,e,n,d,this.compareMinX),o=e;o<=n;o+=d)for(_(t,o,l=Math.min(o+d-1,n),f,this.compareMinY),h=o;h<=l;h+=f)c=Math.min(h+f-1,l),i.children.push(this._build(t,h,c,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,s,a,u,o,h,l,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,s=e.children.length;i<s;i++)o=c(a=e.children[i]),(h=d(t,a)-o)<f?(f=h,l=o<l?o:l,u=a):h===f&&o<l&&(l=o,u=a);e=u||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),i=[],s=this._chooseSubtree(r,this.data,e,i);for(s.children.push(t),o(s,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),u=m(n.children.splice(s,n.children.length-s));u.height=n.height,u.leaf=n.leaf,a(n,this.toBBox),a(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(n,u)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,s,a,o,h,l,f;for(h=l=1/0,r=e;r<=n-e;r++)a=v(i=u(t,0,r,this.toBBox),s=u(t,r,n,this.toBBox)),o=c(i)+c(s),a<h?(h=a,f=r,l=o<l?o:l):a===h&&o<l&&(l=o,f=r);return f},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:h,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,s,a=this.toBBox,h=u(t,0,e,a),l=u(t,n-e,n,a),c=f(h)+f(l);for(i=e;i<n-e;i++)s=t.children[i],o(h,t.leaf?a(s):s),c+=f(h);for(i=n-e-1;i>=e;i--)s=t.children[i],o(l,t.leaf?a(s):s),c+=f(l);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)o(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},l8tk:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var r=function(t,e){return t&&function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.warn.apply(e,["DEBUG:"].concat(n))}||function(){return null}},i=!1},w5u1:function(e,n,r){"use strict";var i=r("wSAH"),a=r("zm0L"),o=r("rlSK"),h=r("umoc"),l=r("7g5W"),c=r("kB+0"),f={added:[],removed:[]},v=new Set,y=new o.a(0,0,0,0);n.a=function(e){s(r,e);var n=u(r);function r(t){var e;return _(this,r),(e=n.call(this))._tiles=new Map,e._index=Object(c.a)(9,Object(i.a)("csp-restrictions")?function(t){return{minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),e.tiles=[],e.tileScheme=t,e}return m(r,[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}},{key:"has",value:function(t){return this._tiles.has(t)}},{key:"get",value:function(t){return this._tiles.get(t)}},{key:"findByKey",value:function(t){return this._tiles.get(t.id)}},{key:"minLOD",value:function(){return Math.min.apply(Math,t(this.tiles.map((function(t){return t.level}))))}},{key:"intersections",value:function(t,e){var n="string"==typeof t?this.get(t):t;if(!n)return[];var r,i=e*n.resolution,s=n.bounds[0]-i,a=n.bounds[1]-i,u=n.bounds[2]+i,o=n.bounds[3]+i,h=[],l=d(this._index.search({minX:s,minY:a,maxX:u,maxY:o}));try{for(l.s();!(r=l.n()).done;){var c=r.value,f=c.bounds.slice();f[0]=Math.max(f[0],s),f[1]=Math.max(f[1],a),f[2]=Math.min(f[2],u),f[3]=Math.min(f[3],o),f[2]-f[0]>0&&f[3]-f[1]>0&&h.push({bounds:f,tile:c})}}catch(v){l.e(v)}finally{l.f()}return h}},{key:"boundsIntersections",value:function(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}},{key:"updateTiles",value:function(t){var e,n=this,r={added:[],removed:[]},i=d(t.added);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(!this.has(s)){var a=new l.a(this.tileScheme,s);this._tiles.set(s,a),this._index.insert(a),r.added.push(a)}}}catch(f){i.e(f)}finally{i.f()}var u,o=d(t.removed);try{for(o.s();!(u=o.n()).done;){var h=u.value;if(this.has(h)){var c=this.get(h);this._tiles.delete(h),this._index.remove(c),r.removed.push(c)}}}catch(f){o.e(f)}finally{o.f()}this.tiles.length=0,this._tiles.forEach((function(t){return n.tiles.push(t)})),(r.added.length||r.removed.length)&&this.emit("update",r)}},{key:"setViewState",value:function(t){var e=this.tileScheme.getTileCoverage(t,0);if(e){var n=e.spans,r=e.lodInfo,i=r.level;if(n.length>0){var s,a=d(n);try{for(a.s();!(s=a.n()).done;)for(var u=s.value,o=u.row,c=u.colFrom,p=u.colTo,m=c;m<=p;m++){var _=y.set(i,o,r.normalizeCol(m),r.getWorldForColumn(m)).id;if(v.add(_),!this.has(_)){var g=new l.a(this.tileScheme,_);this._tiles.set(_,g),this._index.insert(g),this.tiles.push(g),f.added.push(g)}}}catch(k){a.e(k)}finally{a.f()}}for(var x=this.tiles.length-1;x>=0;x--){var b=this.tiles[x];v.has(b.id)||(this._tiles.delete(b.id),this.tiles.splice(x,1),this._index.remove(b),f.removed.push(b))}(f.added.length||f.removed.length)&&this.emit("update",f),h.a.pool.release(e),v.clear(),f.added.length=0,f.removed.length=0}}}]),r}(a.a)}}])}();