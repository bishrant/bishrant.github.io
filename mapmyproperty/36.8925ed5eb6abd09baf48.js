(function(){var e={"arcgis-js-api/views/2d/engine/webgl/BitBlitRenderer":"+P5t","arcgis-js-api/views/2d/engine/webgl/shaders/BitBlitPrograms":"/2xn","arcgis-js-api/views/2d/engine/webgl/fontUtils":"0XPR","arcgis-js-api/views/2d/engine/webgl/SpriteMosaic":"1ZJt","arcgis-js-api/views/navigation/Momentum":"2JMt","arcgis-js-api/views/2d/engine/webgl/effects/Effect":"3ikD","arcgis-js-api/views/2d/engine/webgl/effects/highlight/HighlightSurfaces":"3o6C","arcgis-js-api/views/2d/engine/webgl/GlyphMosaic":"3pdx","arcgis-js-api/views/2d/engine/webgl/shaders/StencilPrograms":"5MKl","arcgis-js-api/views/navigation/ZoomMomentumEstimator":"6N7s","arcgis-js-api/views/2d/magnifier/MagnifierView2D":"6XLe","arcgis-js-api/symbols/cim/Rasterizer":"C+up","arcgis-js-api/views/2d/engine/webgl/collisions/visualVariableSimpleUtils":"CE5S","arcgis-js-api/views/navigation/FilteredFiniteDifference":"E9c0","arcgis-js-api/views/navigation/MomentumEstimator":"F3FF","arcgis-js-api/views/2d/navigation/actions/Pan":"G+IK","arcgis-js-api/views/2d/engine/vectorTiles/shaders/ProgramCache":"GBWg","arcgis-js-api/views/2d/mapViewDeps":"HOOW","arcgis-js-api/views/2d/engine/webgl/GlyphSource":"Hoc/","arcgis-js-api/views/2d/engine/webgl/effects/HittestEffect":"HtXH","arcgis-js-api/views/2d/engine/webgl/effects/AnimationEffect":"I6Kl","arcgis-js-api/views/2d/engine/Stage":"LN/d","arcgis-js-api/views/2d/engine/webgl/animatedFormats/gif":"MUu6","arcgis-js-api/views/2d/engine/webgl/Painter":"OO/B","arcgis-js-api/views/2d/engine/webgl/shaders/BlendPrograms":"ORRN","arcgis-js-api/views/2d/navigation/MapViewNavigation":"PDtg","arcgis-js-api/views/2d/engine/webgl/Profiler":"PKCt","arcgis-js-api/views/2d/engine/webgl/RectangleBinPack":"PhOF","arcgis-js-api/views/2d/engine/webgl/effects/highlight/HighlightRenderer":"RyYO","arcgis-js-api/views/2d/engine/webgl/collisions/LayerCollisionInfo":"S0eh","arcgis-js-api/views/2d/engine/webgl/collisions/CollisionBucketEntry":"ST29","arcgis-js-api/views/2d/engine/webgl/shaders/HighlightPrograms":"TEGq","arcgis-js-api/views/2d/engine/webgl/collisions/CollisionBucket":"TF9k","arcgis-js-api/views/2d/navigation/actions/Rotate":"UrSa","arcgis-js-api/views/2d/engine/webgl/WebGLDriverTest":"W14q","arcgis-js-api/core/LRUCache":"W6K4","arcgis-js-api/views/2d/engine/webgl/SDFConverter":"XCks","arcgis-js-api/views/2d/navigation/actions/Pinch":"Y6jg","arcgis-js-api/views/2d/engine/webgl/shaders/MagnifierPrograms":"YIDE","arcgis-js-api/views/2d/engine/webgl/effects/post-processing/EffectManager":"ajSa","arcgis-js-api/views/2d/engine/webgl/animatedFormats/apng":"dEz+","arcgis-js-api/views/2d/engine/webgl/util/symbolUtils":"dtJe","arcgis-js-api/views/2d/engine/webgl/collisions/LayerViewSorter":"eFQu","arcgis-js-api/views/2d/engine/webgl/TextureManager":"eprR","arcgis-js-api/views/navigation/RotationMomentumEstimator":"f7cP","arcgis-js-api/views/2d/engine/webgl/collisions/CollisionEngine":"gm1X","arcgis-js-api/views/2d/engine/webgl/painter/RenderPass":"hAHX","arcgis-js-api/views/navigation/PanPlanarMomentumEstimator":"kLlh","arcgis-js-api/views/2d/LabelManager":"kUhT","arcgis-js-api/views/2d/engine/webgl/effects/highlight/HighlightGradient":"mvc2","arcgis-js-api/views/2d/engine/webgl/effects/highlight/parameters":"n4XV","arcgis-js-api/views/2d/engine/webgl/effects/HighlightEffect":"nOTS","arcgis-js-api/views/2d/engine/webgl/effects/BlendEffect":"nzKn","arcgis-js-api/views/2d/engine/webgl/MaterialManager":"pvXx","arcgis-js-api/views/2d/navigation/ZoomBox":"q4Xm","arcgis-js-api/views/2d/engine/webgl/packingUtils":"qdig","arcgis-js-api/views/2d/engine/webgl/shaders/MaterialPrograms":"wdp+"},t=this||window,i=t.webpackJsonp=t.webpackJsonp||[];i.registerAbsMids?i.registerAbsMids(e):(i.absMidsWaiting=i.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"+P5t":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("DJpR"),i("/2xn")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BitBlitRenderer=void 0;var n=function(){function e(){this._initialized=!1}return e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null),this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)},e.prototype.render=function(e,t,i,r){e&&(this._initialized||this._initialize(e),e.setBlendFunctionSeparate(1,771,1,771),e.bindVAO(this._vertexArrayObject),e.bindProgram(this._program),t.setSamplingMode(i),e.bindTexture(t,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",r),e.drawArrays(5,0,4),e.bindTexture(null,0),e.bindVAO())},e.prototype._initialize=function(e){if(this._initialized)return!0;var t=r.bitBlit.attributes,n=i.createProgram(e,r.bitBlit);if(!n)return!1;var a=new Int8Array(16);a[0]=-1,a[1]=-1,a[2]=0,a[3]=0,a[4]=1,a[5]=-1,a[6]=1,a[7]=0,a[8]=-1,a[9]=1,a[10]=0,a[11]=1,a[12]=1,a[13]=1,a[14]=1,a[15]=1;var s=new i.VertexArrayObject(e,t,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:i.BufferObject.createVertex(e,35044,a)});return this._program=n,this._vertexArrayObject=s,this._initialized=!0,!0},e}();t.BitBlitRenderer=n}).apply(null,r))||(e.exports=n)},"/2xn":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("hPTP")],void 0===(n=(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitBlit=void 0,t.bitBlit={name:"bitBlit",shaders:{vertexShader:i.resolveIncludes("bitBlit/bitBlit.vert"),fragmentShader:i.resolveIncludes("bitBlit/bitBlit.frag")},attributes:{a_pos:0,a_tex:1}}}).apply(null,r))||(e.exports=n)},"0XPR":function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFontDecorationTop=t.getFullyQualifiedFontName=void 0,t.getFullyQualifiedFontName=function(e){var t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblic":return"-italic"}return""}(e);return function(e){var t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}(e.family)+(t.length>0?t:"-regular")},t.getFontDecorationTop=function(e){switch(e){case"underline":return-26;case"line-through":return-18}return NaN}}).apply(null,r))||(e.exports=n)},"1ZJt":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("ma1f"),i("H1tY"),i("LxLY"),i("DJpR"),i("tI6k"),i("VY6u"),i("6cAc"),i("PhOF")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h){"use strict";function l(e){return e&&"static"===e.type}return function(){function e(e,t,i,n){if(void 0===n&&(n=0),this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._fixSpriteLocationsTable=r("fix-sprite-locations"),this._testId=r("test-id"),this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,(t<=0||i<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=t,this._pageHeight=i,this._requestRender=e,n>0&&(this._maxItemSize=n),this.pixelRatio=window.devicePixelRatio||1,this._fixSpriteLocationsTable){var a=[];for(var s in this._fixSpriteLocationsTable[this._testId]){var o=this._fixSpriteLocationsTable[this._testId][s];a[o.page]=o.pageSize}for(var u=0,l=a;u<l.length;u++){var c=l[u];this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(c[0]*c[1])},size:[c[0],c[1]],dirty:!0,texture:void 0})}}this._binPack=new h(this._pageWidth,this._pageHeight);var d=Math.floor(this._pageWidth),p=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(d*p)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}return e.prototype.getWidth=function(e){return e>=this._mosaicPages.length?-1:this._mosaicPages[e].size[0]},e.prototype.getHeight=function(e){return e>=this._mosaicPages.length?-1:this._mosaicPages[e].size[1]},e.prototype.getPageTexture=function(e){return e<this._mosaicPages.length?this._mosaicPages[e].texture:null},e.prototype.has=function(e){return this._mosaicRects.has(e)},Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._mosaicRects.size},enumerable:!1,configurable:!0}),e.prototype.getSpriteItem=function(e){return this._mosaicRects.get(e)},e.prototype.addSpriteItem=function(e,t,i,r,n,a){var s,o,h,c;if(this._mosaicRects.has(e))return this._mosaicRects.get(e);if(l(i))if(this._fixSpriteLocationsTable&&this._fixSpriteLocationsTable[this._testId]&&this._fixSpriteLocationsTable[this._testId][e]){var d=this._fixSpriteLocationsTable[this._testId][e];o=d.rect,h=d.page,c=d.pageSize}else o=(s=this._allocateImage(t[0],t[1]))[0],h=s[1],c=s[2];else o=new u.default(0,0,t[0],t[1]),h=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:i,size:t,dirty:!0,texture:void 0});if(o.width<=0||o.height<=0)return null;var p={rect:o,width:t[0],height:t[1],sdf:n,simplePattern:a,pixelRatio:1,page:h};return this._mosaicRects.set(e,p),l(i)&&this._copy({rect:o,spriteSize:t,spriteData:i.data,page:h,pageSize:c,repeat:r,sdf:n}),p},e.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length},e.prototype.processNextItem=function(){var e=this._spriteCopyQueue.pop();e&&this._copy(e)},e.prototype.getSpriteItems=function(e){for(var t={},i=0,r=e;i<r.length;i++){var n=r[i];t[n]=this.getSpriteItem(n)}return t},e.prototype.getMosaicItemPosition=function(e){var t=this.getSpriteItem(e),i=t&&t.rect;if(!i)return null;i.width=t.width,i.height=t.height;var r=s.SPRITE_PADDING,n=this._mosaicPages[t.page];return{size:[t.width,t.height],tl:[(i.x+r)/n[0],(i.y+r)/n[1]],br:[(i.x+r+t.width)/n[0],(i.y+r+t.height)/n[1]],page:t.page}},e.prototype.bind=function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var s=this._mosaicPages[i],o=s.mosaicsData,u=s.texture;if(u||(u=function(e,t,i){return l(t)?new a.Texture(e,{pixelFormat:6408,dataType:5121,width:i[0],height:i[1]},new Uint8Array(t.data.buffer)):new a.Texture(e,{pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:i[0],height:i[1]},null)}(e,o,s.size),s.texture=u),u.setSamplingMode(t),l(o))e.bindTexture(u,r),s.dirty&&(u.setData(new Uint8Array(o.data.buffer)),u.generateMipmap());else{var h=o.data,c=h.bindFrame(e,u,r);n.isSome(this._requestRender)&&c&&h.frameCount>0&&this._requestRender.requestRender(),h.bindFrame(e,u,r)}s.dirty=!1},e._copyBits=function(e,t,i,r,n,a,s,o,u,h,l){var c=r*t+i,d=o*a+s;if(l){d-=a;for(var p=-1;p<=h;c=((++p+h)%h+r)*t+i,d+=a)for(var f=-1;f<=u;f++)n[d+f]=e[c+(f+u)%u]}else for(p=0;p<h;p++){for(f=0;f<u;f++)n[d+f]=e[c+f];c+=t,d+=a}},e.prototype._copy=function(t){if(!(t.page>=this._mosaicPages.length)){var r=this._mosaicPages[t.page],n=r.mosaicsData;if(!l(r.mosaicsData))throw new i("mapview-invalid-resource","unsuitable data type!");var a=t.spriteData,o=n.data;o&&a||console.error("Source or target images are uninitialized!"),e._copyBits(a,t.spriteSize[0],0,0,o,t.pageSize[0],t.rect.x+s.SPRITE_PADDING,t.rect.y+s.SPRITE_PADDING,t.spriteSize[0],t.spriteSize[1],t.repeat),r.dirty=!0}},e.prototype._allocateImage=function(e,t){e+=2*s.SPRITE_PADDING,t+=2*s.SPRITE_PADDING;var i=Math.max(e,t);if(this._maxItemSize&&this._maxItemSize<i){var r=Math.pow(2,Math.ceil(o.log2(e))),n=Math.pow(2,Math.ceil(o.log2(t))),a=new u.default(0,0,e,t);return this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(r*n)},size:[r,n],dirty:!0,texture:void 0}),[a,this._mosaicPages.length-1,[r,n]]}var c=this._binPack.allocate(e,t);if(c.width<=0){var d=this._mosaicPages[this._currentPage];return!d.dirty&&l(d.mosaicsData)&&(d.mosaicsData=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new h(this._pageWidth,this._pageHeight),this._allocateImage(e,t)}return[c,this._currentPage,[this._pageWidth,this._pageHeight]]},e.prototype.dispose=function(){this._binPack=null;for(var e=0,t=this._mosaicPages;e<t.length;e++){var i=t[e],r=i.texture;r&&r.dispose();var n=i.mosaicsData;l(n)||n.data.pause()}this._mosaicPages=null,this._mosaicRects.clear()},e}()}).apply(null,r))||(e.exports=n)},"2JMt":function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Momentum=void 0;var i=function(){function e(e,t,i){this._initialVelocity=e,this._stopVelocity=t,this._friction=i,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}return Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),e.prototype.isFinished=function(e){return e>this.duration},Object.defineProperty(e.prototype,"friction",{get:function(){return this._friction},enumerable:!1,configurable:!0}),e.prototype.value=function(e){return this.valueFromInitialVelocity(this._initialVelocity,e)},e.prototype.valueDelta=function(e,t){var i=this.value(e);return this.value(e+t)-i},e.prototype.valueFromInitialVelocity=function(e,t){t=Math.min(t,this.duration);var i=1-this.friction;return e*(Math.pow(i,t)-1)/Math.log(i)},e}();t.Momentum=i}).apply(null,r))||(e.exports=n)},"3ikD":function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Effect=void 0,t.Effect=function(){this.name=this.constructor.name}}).apply(null,r))||(e.exports=n)},"3o6C":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("DJpR")],void 0===(n=(function(e,t,i){"use strict";function r(e,t,r){var n=new i.Texture(e,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:t,height:r,samplingMode:9729});return[n,new i.FramebufferObject(e,{colorTarget:0,depthStencilTarget:2},n)]}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._width=void 0,this._height=void 0,this._resources=null}return e.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)},e.prototype._initialize=function(e,t,i){this._width=t,this._height=i;var n=r(e,t,i),a=n[0],s=n[1],o=r(e,t,i);this._resources={sharedBlur1Tex:a,sharedBlur1Fbo:s,sharedBlur2Tex:o[0],sharedBlur2Fbo:o[1]}},e.prototype.setup=function(e,t,i){!this._resources||this._width===t&&this._height===i||this.dispose(),this._resources||this._initialize(e,t,i)},Object.defineProperty(e.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!1,configurable:!0}),e}();t.default=n}).apply(null,r))||(e.exports=n)},"3pdx":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("H1tY"),i("qMld"),i("DJpR"),i("6cAc"),i("PhOF")],void 0===(n=(function(e,t,i,r,n,a,s,o){"use strict";var u;r("stable-symbol-rendering")&&(u=new Set);var h=function(e){return Math.floor(e/256)};return function(){function e(e,t,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphCache={},this._textures=[],this._rangePromises=new Map,!u&&r("stable-symbol-rendering")&&(u=new Set),this.width=e,this.height=t,this._glyphSource=i,this._binPack=new o(e-4,t-4),this._glyphData.push(new Uint8Array(e*t)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph()}return e.prototype.dispose=function(){this._binPack=null;for(var e=0,t=this._textures;e<t.length;e++){var i=t[e];i&&i.dispose()}this._textures.length=0,this._glyphData.length=0},e.prototype._initDecorationGlyph=function(){for(var e=[117,149,181,207,207,181,149,117],t=[],i=0;i<e.length;i++)for(var r=e[i],n=0;n<11;n++)t.push(r);var a={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(t)};this._recordGlyph(a)},e.prototype.getGlyphItems=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var a,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return a=this._getGlyphCache(e),[4,this._fetchRanges(e,t,n)];case 1:return i.sent(),r("stable-symbol-rendering")?[2,this._getMosaicItemsStable(a,e,t)]:[2,t.map((function(t){return s._getMosaicItem(a,e,t)}))]}}))}))},e.prototype.bind=function(e,t,i,r){var n=this._getTexture(e,i);n.setSamplingMode(t),this._dirties[i]&&(n.setData(this._glyphData[i]),this._dirties[i]=!1),e.bindTexture(n,r)},e.prototype._getGlyphCache=function(e){return this._glyphCache[e]||(this._glyphCache[e]={}),this._glyphCache[e]},e.prototype._getTexture=function(e,t){return this._textures[t]||(this._textures[t]=new a.Texture(e,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height))),this._textures[t]},e.prototype._invalidate=function(){this._dirties[this._currentPage]=!0},e.prototype._fetchRanges=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var a,s,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return a=function(e){for(var t=new Set,i=0,r=e;i<r.length;i++)t.add(h(r[i]));return t}(t),s=[],a.forEach((function(t){s.push(o._fetchRange(e,t,r))})),[4,n.all(s)];case 1:return i.sent(),[2]}}))}))},e.prototype._fetchRange=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var a=this;return i.__generator(this,(function(i){return t>256?[2,null]:[2,(s=this._rangePromises,o=e+t,u=function(){return a._glyphSource.getRange(e,t,r)},s.has(o)||s.set(o,u().then((function(){s.delete(o)})).catch((function(e){s.delete(o),n.throwIfNotAbortError(e)}))),s.get(o))];var s,o,u}))}))},e.prototype._getMosaicItem=function(e,t,i){if(!e[i]){var r=this._glyphSource.getGlyph(t,i);if(!r||!r.metrics)return function(e){return{rect:new s.default(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:e,sdf:!0}}(i);var n=this._recordGlyph(r);e[i]={rect:n,page:this._currentPage,metrics:r.metrics,code:i,sdf:!0},this._invalidate()}return e[i]},e.prototype._getMosaicItemsStable=function(e,t,i){var r=this,n=[],a=i.map((function(e){return e}));return i.map((function(e){return e})).sort().map((function(i){return r._getMosaicItem(e,t,i)})).forEach((function(e){var t=a.indexOf(e.code);n[t]=e,a[t]=null})),n},e.prototype._recordGlyph=function(e){var t,i=e.metrics;if(0===i.width)t=new s.default(0,0,0,0);else{var n=i.width+6,a=i.height+6;(t=this._binPack.allocate(n,a)).isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph(),this._binPack=new o(this.width-4,this.height-4),t=this._binPack.allocate(n,a));var u=this._glyphData[this._currentPage],h=e.bitmap,l=void 0,c=void 0;if(h)for(var d=0;d<a;d++){l=n*d,c=this.width*(t.y+d)+t.x;for(var p=0;p<n;p++)u[c+p]=h[l+p]}r("esri-glyph-debug")&&this._showDebugPage(u)}return t},e.prototype._showDebugPage=function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),r=new ImageData(this.width,this.height),n=r.data;t.width=this.width,t.height=this.height,t.style.border="1px solid black";for(var a=0;a<e.length;++a)n[4*a+0]=e[a],n[4*a+1]=0,n[4*a+2]=0,n[4*a+3]=255;i.putImageData(r,0,0),document.body.appendChild(t)},e}()}).apply(null,r))||(e.exports=n)},"5MKl":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("hPTP")],void 0===(n=(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stencil=void 0,t.stencil={name:"stencil",shaders:{vertexShader:i.resolveIncludes("stencil/stencil.vert"),fragmentShader:i.resolveIncludes("stencil/stencil.frag")},attributes:{a_pos:0}}}).apply(null,r))||(e.exports=n)},"6N7s":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("2JMt"),i("F3FF")],void 0===(n=(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZoomMomentumEstimator=t.ZoomMomentum=void 0;var a=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return i.__extends(t,e),t.prototype.value=function(t){var i=e.prototype.value.call(this,t);return Math.exp(i)},t.prototype.valueDelta=function(t,i){var r=e.prototype.value.call(this,t),n=e.prototype.value.call(this,t+i)-r;return Math.exp(n)},t}(r.Momentum);t.ZoomMomentum=a;var s=function(e){function t(t,i,r,n){return void 0===t&&(t=2.5),void 0===i&&(i=.01),void 0===r&&(r=.95),void 0===n&&(n=12),e.call(this,t,i,r,n)||this}return i.__extends(t,e),t.prototype.add=function(t,i){e.prototype.add.call(this,Math.log(t),i)},t.prototype.createMomentum=function(e,t,i){return new a(e,t,i)},t}(n.MomentumEstimator);t.ZoomMomentumEstimator=s}).apply(null,r))||(e.exports=n)},"6XLe":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("KFwS"),i("qMld"),i("DJpR"),i("Brhx"),i("JNkf"),i("YIDE")],void 0===(n=(function(e,t,i,r,n,a,s,o,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){function t(){var t=e.call(this)||this;return t.visible=!1,t}return i.__extends(t,e),t.prototype.destroy=function(){this._readbackTexture&&(this._readbackTexture.dispose(),this._readbackTexture=null,this._maskTexture.dispose(),this._maskTexture=null,this._overlayTexture.dispose(),this._overlayTexture=null,this._vertexArrayObject.dispose(),this._vertexArrayObject=null,this._program.dispose(),this._program=null,this._resourcesPromise=null)},Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e,this.requestRender()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magnifier",{get:function(){return this._magnifier},set:function(e){var t=this;this._magnifier=e,this._handle&&this._handle.remove(),this._handle=e.watch("version",(function(){t.visible=e.visible,t.requestRender()})),this.visible=e.visible,this.requestRender()},enumerable:!1,configurable:!0}),t.prototype.doRender=function(e){var t,i=e.context;if(this._resourcesPromise){if(e.drawPhase===o.WGLDrawPhase.MAP&&this._canRender()){this._updateResources(i);var r=this._magnifier,n=1/r.factor,a=Math.ceil(n*this.overlay.width),s=Math.ceil(n*this.overlay.height),u=e.state.size,h=e.pixelRatio,l=h*u[0],c=h*u[1],d=r.position||{x:.5*u[0],y:.5*u[1]},p=h*d.x,f=c-h*d.y,g=.5*a,m=.5*s;g>p?p=g:p>=l-g&&(p=l-g-1),m>f?f=m:f>=c-m&&(f=c-m-1);var _=p-g,v=f-m,y=this._readbackTexture;i.bindTexture(y,0),i.gl.copyTexImage2D(y.descriptor.target,0,y.descriptor.pixelFormat,_,v,a,s,0);var b=null===(t=this.background)||void 0===t?void 0:t.color,w=b?[b.a*b.r/255,b.a*b.g/255,b.a*b.b/255,b.a]:[1,1,1,1],x=(p+r.offsetX)/l*2-1,T=(f-r.offsetY)/c*2-1,S=this.overlay.width/l*2,P=this.overlay.height/c*2,M=this._program;i.bindVAO(this._vertexArrayObject),i.bindTexture(this._overlayTexture,6),i.bindTexture(this._maskTexture,7),i.bindProgram(M),M.setUniform4fv("u_background",w),M.setUniform1i("u_readbackTexture",0),M.setUniform1i("u_overlyTexture",6),M.setUniform1i("u_maskTexture",7),M.setUniform2f("u_drawPos",x,T),M.setUniform1f("u_width",S),M.setUniform1f("u_height",P),i.setStencilTestEnabled(!1),i.drawArrays(5,0,4),i.bindVAO()}}else this._resourcesPromise=this._loadResources("esri/images/magnifier/mask.png","esri/images/magnifier/overlay.png")},t.prototype._canRender=function(){return this.mask&&this.overlay&&null!=this._magnifier},t.prototype._loadResources=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var a,s;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,n.all([r.fetchAsset(e,{responseType:"image"}),r.fetchAsset(t,{responseType:"image"})])];case 1:return a=i.sent(),s=a[1].data,this.mask=a[0].data,this.overlay=s,this.requestRender(),[2]}}))}))},t.prototype._updateResources=function(e){if(!this._readbackTexture){var t=1/this._magnifier.factor,i=Math.ceil(t*this.overlay.width),r=Math.ceil(t*this.overlay.height);this._program=u.createMagnifierProgram(e);var n=new Uint16Array([0,1,0,0,1,1,1,0]);this._vertexArrayObject=new a.VertexArrayObject(e,u.magnifierProgramTemplate.attributes,{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:a.BufferObject.createVertex(e,35044,n)}),this._overlayTexture=new a.Texture(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.overlay),this._maskTexture=new a.Texture(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.mask),this._readbackTexture=new a.Texture(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:i,height:r})}},t}(s.DisplayObject);t.default=h}).apply(null,r))||(e.exports=n)},"C+up":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("Ahpp"),i("fb50"),i("pJp3"),i("UUqC")],void 0===(n=(function(e,t,i,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.prototype.dispose=function(){this._rasterizationCanvas=null},e.prototype.rasterizeJSONResource=function(e,t,a){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){var s=i.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[s[1],s[2]],image:new Uint32Array(s[0].buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type){var o=i.SymbolHelper.rasterizeSimpleLine(e.style,e.cap);return{size:[o[1],o[2]],image:new Uint32Array(o[0].buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}var u,h,l;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(u=i.CIMSymbolHelper.fromSimpleMarker(e),l=n.getSDFInfo(u)):"CIMHatchFill"===e.type?(u=i.CIMSymbolHelper.fromCIMHatchFill(e),h=new r.default(u.frame.xmin,-u.frame.ymax,u.frame.xmax-u.frame.xmin,u.frame.ymax-u.frame.ymin)):e.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type?(u=i.CIMSymbolHelper.fromCIMInsidePolygon(e),h=new r.default(u.frame.xmin,-u.frame.ymax,u.frame.xmax-u.frame.xmin,u.frame.ymax-u.frame.ymin)):l=n.getSDFInfo(u=e),l&&!a){var c=n.buildSDF(l),d=c[0];return d?{size:[c[1],c[2]],image:new Uint32Array(d.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}var p=i.CIMSymbolHelper.rasterize(this._rasterizationCanvas,u,h,!a),f=p[0],g=p[3],m=p[4];return f?{size:[p[1],p[2]],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:g,anchorY:m}:null},e.prototype.rasterizeImageResource=function(e,t){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e.width,this._rasterizationCanvas.height=e.height;var i=this._rasterizationCanvas.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):(e.setAttribute("width",e.width.toString()),e.setAttribute("height",e.height.toString()),i.drawImage(e,0,0,e.width,e.height));var r,n=i.getImageData(0,0,e.width,e.height),s=new Uint8Array(n.data);if(t)for(var o=0,u=t;o<u.length;o++){var h=u[o];if(h&&h.oldColor&&4===h.oldColor.length&&h.newColor&&4===h.newColor.length){var l=h.oldColor,c=l[0],d=l[1],p=l[2],f=l[3],g=h.newColor,m=g[0],_=g[1],v=g[2],y=g[3];if(c===m&&d===_&&p===v&&f===y)continue;for(var b=0;b<s.length;b+=4)c===s[b]&&d===s[b+1]&&p===s[b+2]&&f===s[b+3]&&(s[b]=m,s[b+1]=_,s[b+2]=v,s[b+3]=y)}}for(b=0;b<s.length;b+=4)s[b]=s[b]*(r=s[b+3]/255),s[b+1]=s[b+1]*r,s[b+2]=s[b+2]*r;var w=e.width,x=e.height,T=s;if(w>=512||x>=512){var S=e.width/e.height;S>1?(w=512,x=Math.round(512/S)):(x=512,w=Math.round(512*S)),T=new Uint8Array(4*w*x),a.resampleHermite(s,e.width,e.height,new Uint8ClampedArray(T.buffer),w,x,!1)}return{size:[w,x],image:new Uint32Array(T.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}},e}();t.default=s}).apply(null,r))||(e.exports=n)},CE5S:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xoE+"),i("4oaH")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeForValueSimple=void 0;var n=Math.PI;function a(e,t){switch(t.transformationType){case"additive":return function(e,t){return e+(s(t.minSize,e)||t.minDataValue)}(e,t);case"constant":return function(e,t){var i=e.stops,r=i&&i.length&&i[0].size;return null==r&&(r=e.minSize),s(r,t)}(t,e);case"clamped-linear":return function(e,t){var i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),r=s(t.minSize,e),n=s(t.maxSize,e);return e<=t.minDataValue?r:e>=t.maxDataValue?n:r+i*(n-r)}(e,t);case"proportional":return function(e,t){var r=e/t.minDataValue,n=s(t.minSize,e),a=s(t.maxSize,e);return i.clamp(r*n,n,a)}(e,t);case"stops":return function(e,t){var i=function(e,t){if(t){var i=0,r=t.length-1;return t.some((function(t,n){return e<t?(r=n,!0):(i=n,!1)})),[i,r,(e-t[i])/(t[r]-t[i])]}}(e,t.cache.ipData),r=i[0],n=i[1],a=i[2];if(r===n)return s(t.stops[r].size,e);var o=s(t.stops[r].size,e);return o+(s(t.stops[n].size,e)-o)*a}(e,t);case"real-world-size":return function(e,t){var a,o=r.meterIn[t.valueUnit],u=s(t.minSize,e),h=s(t.maxSize,e),l=t.valueRepresentation;return a="area"===l?2*Math.sqrt(e/n)/o:"radius"===l||"distance"===l?2*e/o:e/o,i.clamp(a,u,h)}(e,t);case"identity":return e;case"unknown":return null}}function s(e,t){return"number"==typeof e?e:a(t,e)}t.getSizeForValueSimple=a}).apply(null,r))||(e.exports=n)},E9c0:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredFiniteDifference=void 0;var i=function(){function e(e){this.gain=e}return e.prototype.update=function(e){if(this.hasLastValue){var t=this.computeDelta(e);this.updateDelta(t)}this.lastValue=e},e.prototype.reset=function(){this.lastValue=void 0,this.filteredDelta=void 0},Object.defineProperty(e.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!1,configurable:!0}),e.prototype.computeDelta=function(e){return e-this.lastValue},e.prototype.updateDelta=function(e){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*e:e},e}();t.FilteredFiniteDifference=i}).apply(null,r))||(e.exports=n)},F3FF:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xoE+"),i("E9c0"),i("2JMt")],void 0===(n=(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MomentumEstimator=void 0;var a=function(){function e(e,t,i,n){void 0===e&&(e=2.5),void 0===t&&(t=.01),void 0===i&&(i=.95),void 0===n&&(n=12),this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=i,this.maxVelocity=n,this.enabled=!0,this.value=new r.FilteredFiniteDifference(.8),this.time=new r.FilteredFiniteDifference(.3)}return e.prototype.add=function(e,t){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(t)<.01)return;if(this.value.hasFilteredDelta){var i=this.value.computeDelta(e);this.value.filteredDelta*i<0&&this.value.reset()}}this.time.update(t),this.value.update(e)}},e.prototype.reset=function(){this.value.reset(),this.time.reset()},e.prototype.evaluateMomentum=function(){if(!this.enabled||!this.value.hasFilteredDelta)return null;var e=this.value.filteredDelta/this.time.filteredDelta;return e=i.clamp(e,-this.maxVelocity,this.maxVelocity),Math.abs(e)<this.minimumInitialVelocity?null:this.createMomentum(e,this.stopVelocity,this.friction)},e.prototype.createMomentum=function(e,t,i){return new n.Momentum(e,t,i)},e}();t.MomentumEstimator=a}).apply(null,r))||(e.exports=n)},"G+IK":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("TMur"),i("Ebn8"),i("Gtr7"),i("jBNx"),i("Vx27"),i("0LE5"),i("Rdxj"),i("xI7m"),i("kLlh")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l,c){"use strict";return function(e){function t(t){var i=e.call(this,t)||this;return i.animationTime=0,i.momentumEstimator=new c.PanPlanarMomentumEstimator(500,6,.92),i.momentum=null,i.tmpMomentum=h.vec3f64.create(),i.momentumFinished=!1,i.viewpoint=new n({targetGeometry:new r.Point,scale:0,rotation:0}),i.watch("momentumFinished",(function(e){e&&i.navigation.stop()})),i}return i.__extends(t,e),t.prototype.begin=function(e,t){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(t),this.previousDrag=t},t.prototype.update=function(e,t){this.addToEstimator(t);var i=t.center.x,r=t.center.y,n=this.previousDrag;e.viewpoint=l.translateBy(this.viewpoint,e.viewpoint,[(i=n?n.center.x-i:-i)||0,(r=n?r-n.center.y:r)||0]),this.previousDrag=t},t.prototype.end=function(e,t){this.addToEstimator(t),this.momentum=e.navigation.momentumEnabled?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(e),this.previousDrag=null,this.navigation.end()},t.prototype.addToEstimator=function(e){var t=e.center.x,i=e.center.y,r=s.createScreenPointArray(-t,i),n=h.vec3f64.fromValues(-t,i,0);this.momentumEstimator.add(r,n,.001*e.timestamp)},t.prototype.onAnimationUpdate=function(e){var t=this;this.navigation.animationManager.animateContinous(e.viewpoint,(function(i,r){t.momentumFinished=!t.momentum||t.momentum.isFinished(t.animationTime);var n=.001*r;if(!t.momentumFinished){var a=t.momentum.valueDelta(t.animationTime,n);u.vec3.scale(t.tmpMomentum,t.momentum.direction,a),l.translateBy(i,i,t.tmpMomentum),e.constraints.constrainByGeometry(i)}t.animationTime+=n}))},t.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())},i.__decorate([o.property()],t.prototype,"momentumFinished",void 0),i.__decorate([o.property()],t.prototype,"viewpoint",void 0),i.__decorate([o.property()],t.prototype,"navigation",void 0),i.__decorate([o.subclass("esri.views.2d.navigation.actions.Pan")],t)}(a)}).apply(null,r))||(e.exports=n)},GBWg:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("DJpR"),i("lUvf")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._cache=new Array(8);for(var t=0;t<8;t++)this._cache[t]={};this._programRepo=new i.ProgramCache(e)}return e.prototype.dispose=function(){this._programRepo&&(this._programRepo.dispose(),this._programRepo=null)},e.prototype.getProgram=function(e,t,i){var r=this._cache[e];if(!r[t]){var n=this._programRepo.getProgram(this._getProgramTemplate(e),i);r[t]=n}return r[t]},e.prototype.getProgramAttributes=function(e){switch(e){case 0:return r.background.attributes;case 5:return r.circle.attributes;case 1:return r.fill.attributes;case 4:return r.icon.attributes;case 3:return r.line.attributes;case 2:return r.outline.attributes;case 6:return r.text.attributes;default:return null}},e.prototype._getProgramTemplate=function(e){switch(e){case 0:return r.background;case 5:return r.circle;case 1:return r.fill;case 4:return r.icon;case 3:return r.line;case 2:return r.outline;case 6:return r.text;default:return null}},e}();t.default=n}).apply(null,r))||(e.exports=n)},HOOW:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("LN/d"),i("kUhT"),i("apjU"),i("PDtg"),i("6XLe")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Stage",{enumerable:!0,get:function(){return i.Stage}}),Object.defineProperty(t,"LabelManager",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"GraphicsView2D",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"MapViewNavigation",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"MagnifierView2D",{enumerable:!0,get:function(){return s.default}})}).apply(null,r))||(e.exports=n)},"Hoc/":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("zp6E"),i("v7zm"),i("qMld")],void 0===(n=(function(e,t,i,r,n,a){"use strict";var s=function(){function e(e){for(this._metrics=[],this._bitmaps=[];e.next();)switch(e.tag()){case 1:for(var t=e.getMessage();t.next();)switch(t.tag()){case 3:for(var i=t.getMessage(),r=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,h=void 0;i.next();)switch(i.tag()){case 1:r=i.getUInt32();break;case 2:n=i.getBytes();break;case 3:a=i.getUInt32();break;case 4:s=i.getUInt32();break;case 5:o=i.getSInt32();break;case 6:u=i.getSInt32();break;case 7:h=i.getUInt32();break;default:i.skip()}i.release(),r&&(this._metrics[r]={width:a,height:s,left:o,top:u,advance:h},this._bitmaps[r]=n);break;default:t.skip()}t.release();break;default:e.skip()}}return e.prototype.getMetrics=function(e){return this._metrics[e]},e.prototype.getBitmap=function(e){return this._bitmaps[e]},e}(),o=function(){function e(){this._ranges=[]}return e.prototype.getRange=function(e){return this._ranges[e]},e.prototype.addRange=function(e,t){this._ranges[e]=t},e}();return function(){function e(e){this._glyphInfo={},this._baseURL=e}return e.prototype.getRange=function(e,t,o){var u=this._getFontStack(e);if(u.getRange(t))return a.resolve();var h=256*t,l=h+255,c=this._baseURL.replace("{fontstack}",e).replace("{range}",h+"-"+l);return r(c,i.__assign({responseType:"array-buffer"},o)).then((function(e){u.addRange(t,new s(new n(new Uint8Array(e.data),new DataView(e.data))))}))},e.prototype.getGlyph=function(e,t){var i=this._getFontStack(e);if(i){var r=Math.floor(t/256);if(!(r>256)){var n=i.getRange(r);if(n)return{metrics:n.getMetrics(t),bitmap:n.getBitmap(t)}}}},e.prototype._getFontStack=function(e){var t=this._glyphInfo[e];return t||(t=this._glyphInfo[e]=new o),t},e}()}).apply(null,r))||(e.exports=n)},HtXH:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("R2Zq"),i("LxLY"),i("tI6k"),i("3ikD")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HittestEffect=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=t.constructor.name,t.defines=["id"],t._lastSize=0,t}return i.__extends(t,e),t.prototype.dispose=function(){n.isSome(this._fbo)&&this._fbo.dispose()},t.prototype.bind=function(e){var t=e.context,i=e.painter,r=t.getViewport(),n=i.getFbos(r.width,r.height).effect0;t.bindFramebuffer(n),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)},t.prototype.unbind=function(){},t.prototype.draw=function(e,t,i){var n=this,s=e.state,o=e.pixelRatio;void 0===i&&(i=a.HITTEST_SEARCH_SIZE);var u=e.context.getBoundFramebufferObject(),h=s.size[1]*o,l=Math.round(i*o),c=l/2,d=l/2;this._ensureBuffer(l),t.forEach((function(e,i){var a=new Map,s=Math.floor(i[0]*o-l/2),p=Math.floor(h-i[1]*o-l/2);u.readPixels(s,p,l,l,6408,5121,n._buf);for(var f=0;f<n._buf32.length;f++){var g=n._buf32[f];if(4294967295!==g&&0!==g){var m=f%l,_=l-Math.floor(f/l),v=(c-m)*(c-m)+(d-_)*(d-_),y=a.has(g)?a.get(g):4294967295;a.set(g,Math.min(v,y))}}var b=r.pairsOfMap(a).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}));e.resolve(b),t.delete(i)}))},t.prototype._ensureBuffer=function(e){this._lastSize!==e&&(this._lastSize=e,this._buf=new Uint8Array(4*e*e),this._buf32=new Uint32Array(this._buf.buffer))},t}(s.Effect);t.HittestEffect=o}).apply(null,r))||(e.exports=n)},I6Kl:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("LxLY"),i("tI6k"),i("Nwkb"),i("3ikD")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEffect=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defines=[],t._desc={vsPath:"fx/integrate",fsPath:"fx/integrate",attributes:{a_position:0}},t}return i.__extends(t,e),t.prototype.dispose=function(){this._quad&&this._quad.dispose()},t.prototype.bind=function(){},t.prototype.unbind=function(){},t.prototype.draw=function(e,t){if(t.size){var i=e.context,s=e.renderingOptions;this._quad||(this._quad=new a(i,[0,0,1,0,0,1,1,1]));var o=i.getBoundFramebufferObject(),u=i.getViewport(),h=u.x,l=u.y,c=u.width,d=u.height;t.bindTextures(i);var p=t.getBlock(n.ATTRIBUTE_DATA_ANIMATION);if(!r.isNone(p)){var f=p.getFBO(i),g=p.getFBO(i,1);i.setViewport(0,0,t.size,t.size),this._computeDelta(e,g,s.labelsAnimationTime),this._updateAnimationState(e,g,f),i.bindFramebuffer(o),i.setViewport(h,l,c,d)}}},t.prototype._computeDelta=function(e,t,i){var r=e.context,a=e.displayLevel,s=e.painter.materialManager.getProgram(e,this._desc,["delta"]);r.bindFramebuffer(t),r.setClearColor(0,0,0,0),r.clear(r.gl.COLOR_BUFFER_BIT),r.bindProgram(s),s.setUniform1i("u_maskTexture",n.TEXTURE_BINDING_ATTRIBUTE_DATA_0),s.setUniform1i("u_sourceTexture",n.TEXTURE_BINDING_ATTRIBUTE_DATA_1),s.setUniform1f("u_timeDelta",e.deltaTime),s.setUniform1f("u_animationTime",i/1e3),s.setUniform1f("u_zoomLevel",Math.round(10*a)),this._quad.draw()},t.prototype._updateAnimationState=function(e,t,i){var r=e.context,n=e.painter.materialManager.getProgram(e,this._desc,["update"]);r.bindTexture(t.colorTexture,1),r.bindProgram(n),n.setUniform1i("u_sourceTexture",1),r.bindFramebuffer(i),r.setClearColor(0,0,0,0),r.clear(r.gl.COLOR_BUFFER_BIT),this._quad.draw()},t}(s.Effect);t.AnimationEffect=o}).apply(null,r))||(e.exports=n)},"LN/d":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("ma1f"),i("a97G"),i("H1tY"),i("afW+"),i("ULaq"),i("8MXS"),i("KJwU"),i("aMdW"),i("N5UP"),i("W9tT"),i("DIqE"),i("DJpR"),i("1Mg+"),i("JNkf"),i("OO/B"),i("PKCt"),i("W14q"),i("5MKl"),i("HkoZ"),i("dlMz")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l,c,d,p,f,g,m,_,v,y,b,w,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.EXTRA_RENDER_TIME=void 0,t.EXTRA_RENDER_TIME=2e3;var T=function(e){function T(t,i){var o=e.call(this)||this;o._trash=new Set,o._clipData=new Float32Array(8),o._upperLeft=p.vec2f64.create(),o._upperRight=p.vec2f64.create(),o._lowerLeft=p.vec2f64.create(),o._lowerRight=p.vec2f64.create(),o._mat2=c.mat2df64.create(),o._clipRendererInitialized=!1,o._supersampleScreenshots=!0,o.renderRequested=!1,o.stage=o,o._stationary=!0;var u=i.canvas,h=void 0===u?document.createElement("canvas"):u,l=i.alpha,d=void 0===l||l,g=i.stencil,m=void 0===g||g,b=i.renderContext,x=void 0===b?"webgl":b,T=i.supersampleScreenshots,S=void 0===T||T,P=i.contextOptions,M=void 0===P?{}:P;o._canvas=h;var I=f.createContextOrErrorHTML(h,{alpha:d,antialias:!1,depth:!0,stencil:m},x);return o.context=new f.RenderingContext(I,M),o.painter=new _.default(o.context,o),a("esri-2d-profiler")&&(o._debugOutput=document.createElement("div"),o._debugOutput.setAttribute("style","margin: 24px 64px; position: absolute; color: red;"),t.appendChild(o._debugOutput)),o._renderParameters={drawPhase:0,state:o.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1,blendMode:null,deltaTime:-1,time:0,inFadeTransition:!1,effects:null,context:o.context,painter:o.painter,timeline:i.timeline||new w.Timeline,renderingOptions:i.renderingOptions,driverTestResult:y.testWebGLDriver(o.context),profiler:new v.Profiler(o.context,o._debugOutput),dataUploadCounter:0},o._taskHandle=s.addFrameTask({render:function(e){return o.renderFrame(e)}}),o._taskHandle.pause(),o._supersampleScreenshots=S,o._lostWebGLContextHandle=n.on(h,"webglcontextlost",(function(){o.emit("webgl-error",{error:new r("webgl-context-lost")})})),h.setAttribute("style","width: 100%; height:100%; display:block;"),t.appendChild(h),o}return i.__extends(T,e),T.prototype.destroy=function(){this.removeAllChildren(),this._emptyTrash(),this._taskHandle.remove(),this._taskHandle=null,this._boundFBO=null,this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null),this._clipVAO&&(this._clipVAO.dispose(),this._clipVAO=null,this._clipVBO=null),this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=null),this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null),this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas),this._debugOutput&&this._debugOutput.parentNode&&this._debugOutput.parentNode.removeChild(this._debugOutput),this.highlightOptions=null,this.painter.dispose(),this.context.dispose(),this._canvas=null},Object.defineProperty(T.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e,this.requestRender()},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(e){var t=this;this._highlightOptionsHandle&&(this._highlightOptionsHandle.remove(),this._highlightOptionsHandle=null),this._highlightOptions=e,this._highlightOptions&&(this._highlightOptionsHandle=u.init(this._highlightOptions,"version",(function(){t.painter.setHighlightOptions(e),t.requestRender()})))},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"renderingOptions",{get:function(){return this._renderingOptions},set:function(e){this._renderingOptions=e,this.requestRender()},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,this.requestRender()},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"stationary",{get:function(){return this._stationary},set:function(e){this._stationary!==e&&(this._stationary=e,this.requestRender())},enumerable:!1,configurable:!0}),T.prototype.trashDisplayObject=function(e){this._trash.add(e),this.requestRender()},T.prototype.untrashDisplayObject=function(e){return this._trash.delete(e)},T.prototype.requestRender=function(){this._lastRenderRequestTime=performance.now(),this.renderRequested||(this.renderRequested=!0,this.emit("will-render"),this._taskHandle.resume())},T.prototype.renderFrame=function(e){e.time-this._lastRenderRequestTime>=t.EXTRA_RENDER_TIME&&this._taskHandle.pause(),this.renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this._renderParameters.globalOpacity=1,this._renderParameters.time=e.time,this._renderParameters.deltaTime=e.deltaTime,this._renderParameters.effects=null,this.processRender(this._renderParameters),this._emptyTrash(),this.emit("post-render")},T.prototype.renderChildren=function(e){this._renderChildren(this.children,e)},T.prototype._renderChildren=function(e,t){var i=this.context;t.profiler.recordStart("drawLayers"),t.dataUploadCounter=0,this._beforeRenderChildren(t),t.drawPhase=m.WGLDrawPhase.MAP,this.painter.beforeRenderLayers(i,this.background);for(var r=0,n=e;r<n.length;r++)n[r].processRender(t);if(this.painter.renderLayers(i),this._isLabelDrawPhaseRequired(e)){t.drawPhase=m.WGLDrawPhase.LABEL,this.painter.beforeRenderLayers(i);for(var s=0,o=e;s<o.length;s++)o[s].processRender(t);this.painter.renderLayers(i)}if(a("esri-tiles-debug")){t.drawPhase=m.WGLDrawPhase.DEBUG,this.painter.beforeRenderLayers(i);for(var u=0,h=e;u<h.length;u++)h[u].processRender(t);this.painter.renderLayers(i)}t.profiler.recordEnd("drawLayers"),this._afterRenderChildren()},T.prototype._beforeRenderChildren=function(e){var t=this.context,i=e.state,r=e.pixelRatio;t.enforceState();var n=i.size,a=i.rotation,s=Math.round(n[0]*r),o=Math.round(n[1]*r);if(this._boundFBO=t.getBoundFramebufferObject(),i.spatialReference&&(i.spatialReference._isWrappable?i.spatialReference._isWrappable():i.spatialReference.isWrappable)){var u=h.common.toRadian(a),c=Math.abs(Math.cos(u)),p=Math.abs(Math.sin(u)),g=Math.round(s*c+o*p),m=Math.round(i.worldScreenWidth);if(g<=m)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===s&&this._clipFBO.height===o||(this._clipFBO=new f.FramebufferObject(t,{colorTarget:0,depthStencilTarget:3,width:s,height:o}));var _=(this.state.padding.left-this.state.padding.right)/2,v=(this.state.padding.bottom-this.state.padding.top)/2,y=.5*s,b=.5*o,w=1/s,x=1/o,T=m*r*.5,S=.5*(s*p+o*c),P=this._upperLeft,M=this._upperRight,I=this._lowerLeft,C=this._lowerRight;d.vec2.set(P,-T,-S),d.vec2.set(M,T,-S),d.vec2.set(I,-T,S),d.vec2.set(C,T,S),l.mat2d.identity(this._mat2),l.mat2d.translate(this._mat2,this._mat2,[y+_,b+v]),0!==a&&l.mat2d.rotate(this._mat2,this._mat2,u),d.vec2.transformMat2d(P,P,this._mat2),d.vec2.transformMat2d(M,M,this._mat2),d.vec2.transformMat2d(I,I,this._mat2),d.vec2.transformMat2d(C,C,this._mat2);var O=this._clipData;O.set([2*I[0]*w-1,2*(o-I[1])*x-1,2*C[0]*w-1,2*(o-C[1])*x-1,2*P[0]*w-1,2*(o-P[1])*x-1,2*M[0]*w-1,2*(o-M[1])*x-1]),this._clipRendererInitialized||this._initializeClipRenderer(t),this._clipVBO.setData(O),this._boundFBO=t.getBoundFramebufferObject(),t.bindFramebuffer(this._clipFBO),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),t.setClearColor(0,0,0,0),t.setClearDepth(1),t.setClearStencil(0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT|t.gl.STENCIL_BUFFER_BIT),t.setDepthWriteEnabled(!1),this._clipFrame=!0}}else this._clipFrame=!1},T.prototype._afterRenderChildren=function(){var e=this.context;if(e.logIno(),this._clipFrame&&this._clipRendererInitialized){if(e.bindFramebuffer(this._boundFBO),this._boundFBO=null,e.bindVAO(this._clipVAO),e.bindProgram(this._clipStencilProgram),e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setStencilFunction(519,1,255),e.drawElements(4,6,5123,0),e.bindVAO(),e.setColorMask(!0,!0,!0,!0),null!=this.background){var t=this.background.color,i=t.a;e.setClearColor(i*t.r/255,i*t.g/255,i*t.b/255,i)}else e.setClearColor(0,0,0,0);e.clear(e.gl.COLOR_BUFFER_BIT),e.setBlendingEnabled(!0),e.setStencilFunction(514,1,255),this.painter.blitTexture(e,this._clipFBO.colorTexture,9728,1),e.setStencilTestEnabled(!1)}},T.prototype.doRender=function(t){var i=this.context,r=t.state,n=t.pixelRatio;this._resizeCanvas(t),this.context.enforceState(),i.setViewport(0,0,n*r.size[0],n*r.size[1]),i.setDepthWriteEnabled(!0),i.setStencilWriteMask(255),e.prototype.doRender.call(this,t)},T.prototype.takeScreenshot=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var r,n,a,s,o,u,h,l,c,d,p,g,m;return i.__generator(this,(function(_){return r=x.screenshotSuperSampleSettings(e,this._supersampleScreenshots,this._state.padding),n=r.framebufferWidth,a=r.framebufferHeight,s=this.context,o=e.layers,u=this.children,h=i.__assign(i.__assign({},this._renderParameters),{drawPhase:null,globalOpacity:1,stationary:!0,state:this._renderParameters.state.clone(),pixelRatio:r.pixelRatio,time:Date.now(),deltaTime:0,blendMode:null,effects:null,inFadeTransition:!1}),null!=e.rotation&&((l=h.state.viewpoint).rotation=e.rotation,h.state.viewpoint=l),o.length>0&&(u=[],o.forEach((function(e){var i=t.find((function(t){return t.layer.id===e.id}));i&&"container"in i&&i.container&&u.push(i.container)}))),c=new f.FramebufferObject(s,{colorTarget:0,depthStencilTarget:3,width:n,height:a}),d=s.getBoundFramebufferObject(),p=s.getViewport(),s.bindFramebuffer(c),s.setViewport(0,0,n,a),this._renderChildren(u,h),g=this._readbackScreenshot(r),s.bindFramebuffer(d),s.setViewport(p.x,p.y,p.width,p.height),this.requestRender(),m=this._ensureScreenshotEncodeCanvas(),[2,x.encodeResult(g,e,m,{flipY:!0,premultipliedAlpha:!0})]}))}))},T.prototype._ensureScreenshotEncodeCanvas=function(){return this._screenshotEncodeCanvas||(this._screenshotEncodeCanvas=document.createElement("canvas")),this._screenshotEncodeCanvas},T.prototype._readbackScreenshot=function(e){var t=e.framebufferWidth,i=e.framebufferHeight,r=e.region,n=e.resample,a=this.context.gl;if(n){var s=x.createEmptyImageData(t,i,this._ensureScreenshotEncodeCanvas());a.readPixels(0,0,t,i,6408,5121,new Uint8Array(s.data.buffer));var o=x.createEmptyImageData(r.width,r.height,this._ensureScreenshotEncodeCanvas());return x.resampleHermite(s,o,!0,n.region.x,i-(n.region.y+n.region.height),n.region.width,n.region.height)}return s=x.createEmptyImageData(r.width,r.height,this._ensureScreenshotEncodeCanvas()),a.readPixels(r.x,i-(r.y+r.height),r.width,r.height,6408,5121,new Uint8Array(s.data.buffer)),s},T.prototype._resizeCanvas=function(e){var t=this._canvas,i=t.style,r=e.state.size,n=e.pixelRatio,a=r[0],s=r[1],o=Math.round(a*n),u=Math.round(s*n);t.width===o&&t.height===u||(t.width=o,t.height=u),i.width=a+"px",i.height=s+"px"},T.prototype._initializeClipRenderer=function(e){if(this._clipRendererInitialized)return!0;var t=b.stencil.attributes,i=f.createProgram(e,b.stencil);if(!i)return!1;var r=f.BufferObject.createVertex(e,35040,32),n=new Uint16Array([0,1,2,2,1,3]),a=f.BufferObject.createIndex(e,35044,n),s=new f.VertexArrayObject(e,t,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:r},a);return this._clipStencilProgram=i,this._clipVBO=r,this._clipVAO=s,this._clipRendererInitialized=!0,!0},T.prototype._emptyTrash=function(){for(;this._trash.size>0;){var e=o.valuesOfSet(this._trash);this._trash.clear();for(var t=0,i=e;t<i.length;t++)i[t].processDetach()}},T.prototype._isLabelDrawPhaseRequired=function(e){for(var t=!1,i=0,r=e;i<r.length;i++){var n=r[i];if(!(n instanceof g.Container)){t=t||!1;break}if(n.hasLabels)return!0;t=t||this._isLabelDrawPhaseRequired(n.children)}return t},T}(g.Container);t.Stage=T}).apply(null,r))||(e.exports=n)},MUu6:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("ma1f"),i("qMld")],void 0===(n=(function(e,t,i,r,n){"use strict";function a(e){if(!e||0===e.byteLength)return!1;var t=e.constructor===Uint8Array?e:new Uint8Array(e);return 71===t[0]&&73===t[1]&&70===t[2]&&56===t[3]}Object.defineProperty(t,"__esModule",{value:!0}),t.isAnimatedGIF=t.getGIFSize=t.isGIF=void 0,t.isGIF=a,t.getGIFSize=function(e){var t=new Uint8ClampedArray(e),i=6;return[t[i++]+(t[i++]<<8),t[i++]+(t[i++]<<8)]},t.isAnimatedGIF=function(e){if(!e||0===e.byteLength)return!1;var t=new Uint8Array(e);if(!a(t))return!1;for(var i=0,r=0,n=t.length-9;r<n&&(0!==t[r]||33!==t[r+1]||249!==t[r+2]||4!==t[r+3]||0!==t[r+8]||44!==t[r+9]&&33!==t[r+9]||!(++i>1));++r);return i>1};var s=function(){function e(){this.paused=!1,this.playing=!1,this.waitTillDone=!0,this.loading=!1,this.firstFrameOnly=!1,this.frames=[],this.comment="",this.length=0,this.currentFrameNumber=0,this.frameCount=0,this.playSpeed=1,this.lastFrame=null,this.playOnLoad=!0,this.complete=!1,this.interlaceOffsets=[0,4,2,1],this.interlaceSteps=[8,8,4,2],this._lastUsedFrame=-1}return e.create=function(t,a){return i.__awaiter(this,void 0,void 0,(function(){var s,o;return i.__generator(this,(function(i){switch(i.label){case 0:s=new e,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s._load(t,a)];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),n.isAbortError(o)?[3,4]:[2,new r("invalid-resource","Could not load PNG: "+o.message)];case 4:return[2,s]}}))}))},e.prototype.play=function(){this.playing||(this.paused=!1,this.playing=!0,this._play())},e.prototype.pause=function(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)},e.prototype.togglePlay=function(){this.paused||!this.playing?this.play():this.pause()},e.prototype.bindFrame=function(e,t,i){e.bindTexture(t,i);var r=this.frameChanged();if(r){var n=this.currentFrame;t.updateData(0,0,0,n.width,n.height,n.frameData),this.updateUsedFrame()}return r},e.prototype.seekFrame=function(e){clearTimeout(this.timerID),this.currentFrameNumber=e%this.frames.length,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)},e.prototype.seek=function(e){clearTimeout(this.timerID),e<0&&(e=0),e*=1e3,e%=this.length;for(var t=0;e>this.frames[t].time+this.frames[t].delay&&t<this.frames.length;)t+=1;this.currentFrameNumber=t,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)},e.prototype.frameChanged=function(){return this._lastUsedFrame!==this.currentFrameNumber},e.prototype.updateUsedFrame=function(){this._lastUsedFrame=this.currentFrameNumber},e.prototype._load=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var a;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.loading=!0,[4,this._parse(e,t)];case 1:return i.sent(),this.loading=!1,this.play(),[3,3];case 2:return a=i.sent(),n.isAbortError(a)?[3,3]:[2,new r("invalid-resource","Could not parse gif!")];case 3:return[2]}}))}))},e.prototype._parse=function(e,t){var i=this,r=new o(e);r.pos+=6,this.width=r.data[r.pos++]+(r.data[r.pos++]<<8),this.height=r.data[r.pos++]+(r.data[r.pos++]<<8);var a=r.data[r.pos++];return this.globalColourCount=1<<1+(7&a),r.pos++,r.pos++,128&a&&(this.globalColourTable=this._parseColourTable(this.globalColourCount,r)),n.create((function(e,n){setTimeout((function(){return i._parseBlock(r,e,n,t)}),0)}))},e.prototype._parseBlock=function(e,t,r,a){return i.__awaiter(this,void 0,void 0,(function(){var s,o=this;return i.__generator(this,(function(i){if(a&&a.signal&&n.isAborted(a.signal))return r(n.createAbortError()),[2];if(44===(s=e.data[e.pos++])){if(this._parseImg(e),this.firstFrameOnly)return this._finishedLoading(),t(),[2]}else{if(59===s)return this._finishedLoading(),t(),[2];this._parseExt(e)}return"function"==typeof this.onprogress&&this.onprogress({bytesRead:e.pos,totalBytes:e.data.length,frame:this.frames.length}),setTimeout((function(){return o._parseBlock(e,t,r,a)}),0),[2]}))}))},e.prototype._parseColourTable=function(e,t){for(var i=[],r=0;r<e;r++)i.push([t.data[t.pos++],t.data[t.pos++],t.data[t.pos++]]);return i},e.prototype._parseImg=function(e){var t=this,i={};this.frames.push(i),i.disposalMethod=this.disposalMethod,i.time=this.length,i.delay=10*this.delayTime,this.length+=i.delay,i.transparencyIndex=this.transparencyGiven?this.transparencyIndex:void 0,i.leftPos=e.data[e.pos++]+(e.data[e.pos++]<<8),i.topPos=e.data[e.pos++]+(e.data[e.pos++]<<8),i.width=e.data[e.pos++]+(e.data[e.pos++]<<8),i.height=e.data[e.pos++]+(e.data[e.pos++]<<8);var r=e.data[e.pos++];i.localColourTableFlag=!!(128&r),i.localColourTableFlag&&(i.localColourTable=this._parseColourTable(1<<1+(7&r),e)),this.pixelBufSize!==i.width*i.height&&(this.pixelBuf=new Uint8Array(i.width*i.height),this.pixelBufSize=i.width*i.height),this._lzwDecode(e.data[e.pos++],e.readSubBlocksB()),64&r?(i.interlaced=!0,function(e){var i=t.pixelBufSize/e;t.interlacedBufSize!==t.pixelBufSize&&(t.deinterlaceBuf=new Uint8Array(t.pixelBufSize),t.interlacedBufSize=t.pixelBufSize);for(var r=0,n=0;n<4;n++)for(var a=t.interlaceOffsets[n];a<i;a+=t.interlaceSteps[n])t.deinterlaceBuf.set(t.pixelBuf.subarray(r,r+e),a*e),r+=e}(i.width)):i.interlaced=!1,this._processFrame(i)},e.prototype._lzwDecode=function(e,t){var i,r,n,a,s,o,u,h,l,c,d;n=r=0;var p=[];for(s=1+(a=1<<e),o=e+1,d=!1;!d;){for(h=u,u=0,i=0;i<o;i++)t[n>>3]&1<<(7&n)&&(u|=1<<i),n++;if(u===a){for(p=[],o=e+1,i=0;i<a;i++)p[i]=[i];p[a]=[],p[s]=null}else{if(u===s)return void(d=!0);for(u>=p.length?p.push(p[h].concat(p[h][0])):h!==a&&p.push(p[h].concat(p[u][0])),c=(l=p[u]).length,i=0;i<c;i++)this.pixelBuf[r++]=l[i];p.length===1<<o&&o<12&&o++}}},e.prototype._processFrame=function(e){e.image=document.createElement("canvas"),e.image.width=this.width,e.image.height=this.height,e.ctx=e.image.getContext("2d");var t=e.localColourTableFlag?e.localColourTable:this.globalColourTable;null===this.lastFrame&&(this.lastFrame=e);var i=2===this.lastFrame.disposalMethod||3===this.lastFrame.disposalMethod;i||e.ctx.drawImage(this.lastFrame.image,0,0,this.width,this.height);for(var r,n,a=e.ctx.getImageData(e.leftPos,e.topPos,e.width,e.height),s=e.transparencyIndex,o=a.data,u=e.interlaced?this.deinterlaceBuf:this.pixelBuf,h=u.length,l=0,c=0;c<h;c++)n=t[r=u[c]],s!==r?(o[l++]=n[0],o[l++]=n[1],o[l++]=n[2],o[l++]=255):i?(o[l+3]=0,l+=4):l+=4;e.ctx.putImageData(a,e.leftPos,e.topPos),this.lastFrame=e},e.prototype._parseExt=function(e){var t=e.data[e.pos++];249===t?this._parseGCExt(e):254===t?this.comment+=e.readSubBlocks():255===t?this._parseAppExt(e):(1===t&&(e.pos+=13),e.readSubBlocks())},e.prototype._parseAppExt=function(e){e.pos+=1,"NETSCAPE"===e.getString(8)?e.pos+=8:(e.pos+=3,e.readSubBlocks())},e.prototype._parseGCExt=function(e){var t;e.pos++,t=e.data[e.pos++],this.disposalMethod=(28&t)>>2,this.transparencyGiven=!!(1&t),this.delayTime=e.data[e.pos++]+(e.data[e.pos++]<<8),this.transparencyIndex=e.data[e.pos++],e.pos++},e.prototype._finishedLoading=function(){this.loading=!1,this.frameCount=this.frames.length,this.lastFrame=null,this.complete=!0,this.disposalMethod=void 0,this.transparencyGiven=void 0,this.delayTime=void 0,this.transparencyIndex=void 0,this.waitTillDone=void 0,this.pixelBuf=void 0,this.deinterlaceBuf=void 0,this.pixelBufSize=void 0,this.deinterlaceBuf=void 0,this.currentFrameNumber=0,this.frames.length>0&&this._setCurrentFrame(0),this.playOnLoad&&this.play()},e.prototype._play=function(){var e,t,i=this;0!==this.playSpeed?(this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),t=this.currentFrameNumber,(t-=1)<0&&(t=this.frames.length-1),e=1*-this.frames[t].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,e=1*this.frames[this.currentFrameNumber].delay/this.playSpeed),this._setCurrentFrame(this.currentFrameNumber),this.timerID=window.setTimeout((function(){return i._play()}),e)):this.pause()},e.prototype._setCurrentFrame=function(e){this.currentFrame={frameData:this.frames[e].image,top:0,left:0,width:this.width,height:this.height}},e}();t.default=s;var o=function(){function e(e){this.pos=0,this.data=new Uint8ClampedArray(e),this.len=this.data.length}return e.prototype.getString=function(e){for(var t="";e--;)t+=String.fromCharCode(this.data[this.pos++]);return t},e.prototype.readSubBlocks=function(){var e,t,i="";do{for(t=e=this.data[this.pos++];t--;)i+=String.fromCharCode(this.data[this.pos++])}while(0!==e&&this.pos<this.len);return i},e.prototype.readSubBlocksB=function(){var e,t,i=[];do{for(t=e=this.data[this.pos++];t--;)i.push(this.data[this.pos++])}while(0!==e&&this.pos<this.len);return i},e}()}).apply(null,r))||(e.exports=n)},"OO/B":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("LxLY"),i("DJpR"),i("itWS"),i("GBWg"),i("+P5t"),i("JNkf"),i("pvXx"),i("eprR"),i("I6Kl"),i("nzKn"),i("nOTS"),i("HtXH"),i("ajSa"),i("hAHX")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l,c,d,p,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PainterOptions=void 0,t.PainterOptions=function(){};var m=function(){function e(e,t){this.context=e,this._blitRenderer=new s.BitBlitRenderer,this._brushCache=new Map,this._vtlProgramCache=null,this._blendEffect=new c.BlendEffect,this.effects={highlight:new d.default,hittest:new p.HittestEffect,integrate:new l.AnimationEffect},this.materialManager=new u(e),this._vtlProgramCache=new a.default(e),this.textureManager=new h(t),this._effectsManager=new f.EffectManager(t)}return e.prototype.getRenderTarget=function(){return this._renderTarget},e.prototype.setRenderTarget=function(e){this._renderTarget=e},e.prototype.getFbos=function(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){for(var i in this._fbos)this._fbos[i].resize(e,t);return this._fbos}var n={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e,height:t},a={colorTarget:0,depthStencilTarget:3},s=new r.Renderbuffer(this.context,{width:e,height:t,internalFormat:34041});this._stencilBuf=s,this._fbos={output:new r.FramebufferObject(this.context,a,n,s),blend:new r.FramebufferObject(this.context,a,n,s),effect0:new r.FramebufferObject(this.context,a,n,s)}}return this._fbos},e.prototype.getSharedStencilBuffer=function(){return this._stencilBuf},e.prototype.beforeRenderLayers=function(e,t){void 0===t&&(t=null);var r=e.getViewport(),n=r.width,a=r.height;this._prevFBO=e.getBoundFramebufferObject();var s=this.getFbos(n,a);if(e.bindFramebuffer(s.output),e.setDepthWriteEnabled(!0),i.isSome(t)){var o=t.color,u=o.a;e.setClearColor(u*o.r/255,u*o.g/255,u*o.b/255,u)}else e.setClearColor(0,0,0,0);e.setClearDepth(1),e.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.setDepthWriteEnabled(!1)},e.prototype.beforeRenderLayer=function(e,t,i){var r=e.context;if(_(e.blendMode,e.effects,i))r.bindFramebuffer(this._fbos.blend),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.clear(r.gl.COLOR_BUFFER_BIT);else{var n=this._getOutputFBO();r.bindFramebuffer(n)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(r.gl.STENCIL_BUFFER_BIT)},e.prototype.compositeLayer=function(e,t){var r=e.context,n=e.blendMode,a=e.effects;if(_(n,a,t)){i.isSome(a)&&a.length>0&&this._applyEffects(e,a);var s=this._getOutputFBO();r.bindFramebuffer(s),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),r.setBlendingEnabled(!0),r.setBlendFunctionSeparate(1,771,1,771),r.setColorMask(!0,!0,!0,!0);var o=i.isSome(n)?n:"normal";this._blendEffect.draw(e,this._fbos.blend.colorTexture,9728,o,t)}},e.prototype.renderLayers=function(e){if(e.bindFramebuffer(this._prevFBO),this._fbos){var t=this._getOutputFBO();e.setStencilTestEnabled(!1),e.setStencilWriteMask(0),this.blitTexture(e,t.colorTexture,9728)}},e.prototype.dispose=function(){if(this.materialManager.dispose(),this.textureManager.dispose(),this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null),this._vtlProgramCache&&(this._vtlProgramCache.dispose(),this._vtlProgramCache=null),this._brushCache&&(this._brushCache.forEach((function(e){return e.dispose()})),this._brushCache.clear(),this._brushCache=null),this._fbos)for(var e in this._fbos)this._fbos[e]&&this._fbos[e].dispose();if(this.effects)for(var t in this.effects)this.effects[t]&&this.effects[t].dispose();this._prevFBO=null},e.prototype.getGeometryBrush=function(e){var t,i=((t={})[o.WGLGeometryType.FILL]=n.brushes.fill,t[o.WGLGeometryType.LINE]=n.brushes.line,t[o.WGLGeometryType.MARKER]=n.brushes.marker,t[o.WGLGeometryType.TEXT]=n.brushes.text,t)[e],r=this._brushCache.get(i);return void 0===r&&(r=new i,this._brushCache.set(i,r)),this._brushCache.get(i)},e.prototype.renderObject=function(e,t,i,r){var a=n.brushes[i];if(!a)return null;var s=this._brushCache.get(a);void 0===s&&(s=new a,this._brushCache.set(a,s)),s.prepareState(e,t,r),s.draw(e,t,r)},e.prototype.renderObjects=function(e,t,i,r){var a=n.brushes[i];if(!a)return null;var s=this._brushCache.get(a);void 0===s&&(s=new a,this._brushCache.set(a,s)),s.drawMany(e,t,r)},e.prototype.getVectorTileProgramCach=function(){return this._vtlProgramCache},e.prototype.registerRenderPass=function(e){var t=this,i=e.brushes.map((function(e){return t._brushCache.has(e)||t._brushCache.set(e,new e),t._brushCache.get(e)}));return new g.default(i,e)},e.prototype.setHighlightOptions=function(e){this.effects.highlight.setHighlightOptions(e)},e.prototype.blitTexture=function(e,t,i,r){void 0===r&&(r=1),e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(1,771,1,771),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,i,r)},e.prototype._getOutputFBO=function(){return null!=this._renderTarget?this._renderTarget:this._fbos.output},e.prototype._applyEffects=function(e,t){for(var i=e.context,r=0,n=this._effectsManager.getPostProcessingEffects(t);r<n.length;r++){var a=n[r],s=a.postProcessingEffect,o=a.effect;i.bindFramebuffer(this._fbos.blend),s.draw(e,this._fbos.blend,o)}},e}();function _(e,t,r){return 1!==r||i.isSome(e)&&"normal"!==e||i.isSome(t)&&t.length>0}t.default=m}).apply(null,r))||(e.exports=n)},ORRN:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("hPTP")],void 0===(n=(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blend=void 0;var r=function(e){return"#define "+function(e){return e.replace("-","_").toUpperCase()}(e)+"\n"};t.blend={name:"blend",attributes:{a_pos:0,a_tex:1},shaders:function(e){return{vertexShader:r(e)+i.resolveIncludes("blend/blend.vert"),fragmentShader:r(e)+i.resolveIncludes("blend/blend.frag")}}}}).apply(null,r))||(e.exports=n)},PDtg:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("Ebn8"),i("Gtr7"),i("Vx27"),i("oxlp"),i("xI7m"),i("q4Xm"),i("G+IK"),i("Y6jg"),i("UrSa")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=new r({targetGeometry:new s}),p=[0,0],f=function(e){function t(t){var i=e.call(this,t)||this;return i._endTimer=null,i.animationManager=null,i}return i.__extends(t,e),t.prototype.initialize=function(){this.pan=new h({navigation:this}),this.rotate=new c({navigation:this}),this.pinch=new l({navigation:this}),this.zoomBox=new u({view:this.view,navigation:this})},t.prototype.destroy=function(){this.zoomBox.destroy(),this.zoomBox=null,this.animationManager=null},t.prototype.begin=function(){this._set("interacting",!0)},t.prototype.end=function(){this._lastEventTimestamp=performance.now(),this._startTimer(250)},t.prototype.zoom=function(e,t){return void 0===t&&(t=this._getDefaultAnchor()),i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(i){return this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs?e<1?[2,this.zoomIn(t)]:[2,this.zoomOut(t)]:(this.setViewpoint(t,e,0,[0,0]),[2])}))}))},t.prototype.zoomIn=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,r;return i.__generator(this,(function(i){return r=(t=this.view).constraints.snapToNextScale(t.scale),[2,this._zoomToScale(r,e)]}))}))},t.prototype.zoomOut=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,r;return i.__generator(this,(function(i){return r=(t=this.view).constraints.snapToPreviousScale(t.scale),[2,this._zoomToScale(r,e)]}))}))},t.prototype.setViewpoint=function(e,t,i,r){this.begin(),this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,e,t,i,r),this.end()},t.prototype.setViewpointImmediate=function(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=[0,0]),void 0===r&&(r=this._getDefaultAnchor()),this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,r,e,t,i)},t.prototype.continousRotateClockwise=function(){var e=this.get("view.viewpoint");this.animationManager.animateContinous(e,(function(e){o.rotateBy(e,e,-1)}))},t.prototype.continousRotateCounterclockwise=function(){var e=this.get("view.viewpoint");this.animationManager.animateContinous(e,(function(e){o.rotateBy(e,e,1)}))},t.prototype.resetRotation=function(){this.view.rotation=0},t.prototype.continousPanLeft=function(){this._continuousPan([-10,0])},t.prototype.continousPanRight=function(){this._continuousPan([10,0])},t.prototype.continousPanUp=function(){this._continuousPan([0,10])},t.prototype.continousPanDown=function(){this._continuousPan([0,-10])},t.prototype.stop=function(){this.pan.stopMomentumNavigation(),this.animationManager.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))},t.prototype._continuousPan=function(e){var t=this,i=this.get("view.viewpoint");this.animationManager.animateContinous(i,(function(i){o.translateBy(i,i,e),t.view.constraints.constrainByGeometry(i)}))},t.prototype._startTimer=function(e){var t=this;return null!==this._endTimer||(this._endTimer=setTimeout((function(){t._endTimer=null;var e=performance.now()-t._lastEventTimestamp;e<250?t._endTimer=t._startTimer(e):t._set("interacting",!1)}),e)),this._endTimer},t.prototype._getDefaultAnchor=function(){var e=this.view,t=e.size,i=e.padding,r=i.top,n=i.bottom;return p[0]=.5*(t[0]-i.right+i.left),p[1]=.5*(t[1]-n+r),p},t.prototype._zoomToScale=function(e,t){return void 0===t&&(t=this._getDefaultAnchor()),i.__awaiter(this,void 0,void 0,(function(){var r,n,a,s,u,h,l,c;return i.__generator(this,(function(i){return a=(r=this.view).scale,s=r.viewpoint,u=r.size,h=r.padding,l=(n=r.constraints).canZoomInTo(e),c=n.canZoomOutTo(e),e<a&&!l||e>a&&!c?[2]:(o.padAndScaleAndRotateBy(d,s,e/a,0,t,u,h),n.constrainByGeometry(d),[2,r.goTo(d,{animate:!0})])}))}))},t.prototype._scaleRotateTranslateViewpoint=function(e,t,i,r,n){var a=this.view,s=a.size,u=a.padding,h=a.constraints,l=a.viewpoint,c=a.scale*i,d=h.canZoomInTo(c),p=h.canZoomOutTo(c);return(i<1&&!d||i>1&&!p)&&(i=1),o.translateBy(l,l,n),o.padAndScaleAndRotateBy(e,l,i,r,t,s,u),h.constrainByGeometry(e)},i.__decorate([a.property()],t.prototype,"animationManager",void 0),i.__decorate([a.property({type:Boolean,readOnly:!0})],t.prototype,"interacting",void 0),i.__decorate([a.property()],t.prototype,"pan",void 0),i.__decorate([a.property()],t.prototype,"pinch",void 0),i.__decorate([a.property()],t.prototype,"rotate",void 0),i.__decorate([a.property()],t.prototype,"view",void 0),i.__decorate([a.property()],t.prototype,"zoomBox",void 0),i.__decorate([a.subclass("esri.views.2d.navigation.MapViewNavigation")],t)}(n);t.default=f}).apply(null,r))||(e.exports=n)},PKCt:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zIqJ"),i("BcWh"),i("H1tY"),i("LxLY"),i("U6iw")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Profiler=void 0;var o=n("esri-2d-profiler"),u=function(){function e(e,t){var n=this;if(this._events=new r,this._entries=new Map,this._timings=new i.default(10),o){this._ext=s.load(e.gl,{}),this._debugOutput=t;var a=e.gl;if(this.enableCommandLogging){var u=function(e){if("function"==typeof a[e]){var t=a[e],i=-1!==e.indexOf("draw");a[e]=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return n._events.emit("command",{container:n._currentContainer,pass:n._currentPass,brush:n._currentBrush,method:e,args:r,isDrawCommand:i}),n._currentSummary&&(n._currentSummary.commands++,i&&n._currentSummary.drawCommands++),t.apply(a,r)}}};for(var h in a)u(h)}}}return Object.defineProperty(e.prototype,"enableCommandLogging",{get:function(){return!("object"==typeof o&&o.disableCommands)},enumerable:!1,configurable:!0}),e.prototype.recordContainerStart=function(e){o&&(this._currentContainer=e)},e.prototype.recordContainerEnd=function(){o&&(this._currentContainer=null)},e.prototype.recordPassStart=function(e){o&&(this._currentPass=e,this._initSummary())},e.prototype.recordPassEnd=function(){o&&(this._currentPass=null,this._emitSummary())},e.prototype.recordBrushStart=function(e){o&&(this._currentBrush=e)},e.prototype.recordBrushEnd=function(){o&&(this._currentBrush=null)},e.prototype.recordStart=function(e){if(o&&a.isSome(this._ext)){if(this._entries.has(e)){var t=this._entries.get(e),i=this._ext.resultAvailable(t.query),r=this._ext.disjoint();if(i&&!r){var n=this._ext.getResult(t.query)/1e6,s=0;if(a.isSome(this._timings.enqueue(n))){for(var u=this._timings.entries,h=u.length,l=0,c=0,d=u;c<d.length;c++)l+=d[c];s=l/h}var p=n.toFixed(2),f=s?s.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed("Frame report for "+e+", "+p+" ms ("+f+" last 10 avg)\n"+t.commandsLen+" Commands ("+t.drawCommands+" draw)"),console.log("RenderPass breakdown: "),console.table(t.summaries),console.log("Commands: ",t.commands),console.groupEnd()):console.log("Frame report for "+e+", "+p+" ms ("+f+" last 10 avg)"),this._debugOutput.innerHTML=p+" ("+f+")"}for(var g=0,m=t.handles;g<m.length;g++)m[g].remove();this._entries.delete(e)}var _={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(_.handles.push(this._events.on("command",(function(e){_.commandsLen++,_.commands.push(e),e.isDrawCommand&&_.drawCommands++}))),_.handles.push(this._events.on("summary",(function(e){_.summaries.push(e)})))),this._ext.beginTimeElapsed(_.query),this._entries.set(e,_)}},e.prototype.recordEnd=function(e){o&&a.isSome(this._ext)&&this._entries.has(e)&&this._ext.endTimeElapsed()},e.prototype._initSummary=function(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})},e.prototype._emitSummary=function(){this.enableCommandLogging&&this._events.emit("summary",this._currentSummary)},e}();t.Profiler=u}).apply(null,r))||(e.exports=n)},PhOF:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("6cAc")],void 0===(n=(function(e,t,i){"use strict";return function(){function e(e,t){this._width=0,this._height=0,this._free=[],this._width=e,this._height=t,this._free.push(new i.default(0,0,e,t))}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.allocate=function(e,t){if(e>this._width||t>this._height)return new i.default;for(var r=null,n=-1,a=0;a<this._free.length;++a){var s=this._free[a];e<=s.width&&t<=s.height&&(null===r||s.y<=r.y&&s.x<=r.x)&&(r=s,n=a)}return null===r?new i.default:(this._free.splice(n,1),r.width<r.height?(r.width>e&&this._free.push(new i.default(r.x+e,r.y,r.width-e,t)),r.height>t&&this._free.push(new i.default(r.x,r.y+t,r.width,r.height-t))):(r.width>e&&this._free.push(new i.default(r.x+e,r.y,r.width-e,r.height)),r.height>t&&this._free.push(new i.default(r.x,r.y+t,e,r.height-t))),new i.default(r.x,r.y,e,t))},e.prototype.release=function(e){for(var t=0;t<this._free.length;++t){var i=this._free[t];if(i.y===e.y&&i.height===e.height&&i.x+i.width===e.x)i.width+=e.width;else if(i.x===e.x&&i.width===e.width&&i.y+i.height===e.y)i.height+=e.height;else if(e.y===i.y&&e.height===i.height&&e.x+e.width===i.x)i.x=e.x,i.width+=e.width;else{if(e.x!==i.x||e.width!==i.width||e.y+e.height!==i.y)continue;i.y=e.y,i.height+=e.height}this._free.splice(t,1),this.release(e)}this._free.push(e)},e}()}).apply(null,r))||(e.exports=n)},RyYO:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("DJpR"),i("tI6k"),i("n4XV"),i("TEGq")],void 0===(n=(function(e,t,i,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this._width=void 0,this._height=void 0,this._resources=null}return e.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)},e.prototype.preBlur=function(e,t){e.bindTexture(t,r.TEXTURE_BINDING_HIGHLIGHT_0),e.bindProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]),this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",n.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX),e.bindVAO(this._resources.quadVAO),e.drawArrays(5,0,4),e.bindVAO()},e.prototype.finalBlur=function(e,t){e.bindTexture(t,r.TEXTURE_BINDING_HIGHLIGHT_0),e.bindProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]),this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",n.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX),e.bindVAO(this._resources.quadVAO),e.drawArrays(5,0,4),e.bindVAO()},e.prototype.renderHighlight=function(e,t,i){e.bindTexture(t,r.TEXTURE_BINDING_HIGHLIGHT_0),e.bindProgram(this._resources.highlightProgram),i.applyHighlightOptions(e,this._resources.highlightProgram),e.bindVAO(this._resources.quadVAO),e.setBlendingEnabled(!0),e.setBlendFunction(1,771),e.drawArrays(5,0,4),e.bindVAO()},e.prototype._initialize=function(e,t,s){this._width=t,this._height=s;var o=new i.BufferObject(e,34962,35044,new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]).buffer),u=new i.VertexArrayObject(e,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!1},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!1}]},{geometry:o}),h=i.createProgram(e,a.highlight),l=i.createProgram(e,a.blur);h.setUniform1i("u_texture",r.TEXTURE_BINDING_HIGHLIGHT_0),h.setUniform1i("u_shade",r.TEXTURE_BINDING_HIGHLIGHT_1),h.setUniform4fv("u_sigmas",n.SIGMAS),l.setUniform1i("u_texture",r.TEXTURE_BINDING_HIGHLIGHT_0),l.setUniform4fv("u_sigmas",n.SIGMAS),this._resources={quadGeometry:o,quadVAO:u,highlightProgram:h,blurProgram:l}},e.prototype.setup=function(e,t,i){this._resources?(this._width=t,this._height=i):this._initialize(e,t,i)},e}();t.default=s}).apply(null,r))||(e.exports=n)},S0eh:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("qsST"),i("xoE+"),i("jBNx"),i("CE5S")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLabelVVEvaluator=void 0;var o=function(e,t){return e.order-t.order},u=function(e,t){return e.index-t.index},h=r.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine");function l(e,t){var i=!!e.maxScale,r=!!e.minScale&&t.scaleToZoom(e.minScale)||0,a=i&&t.scaleToZoom(e.maxScale)||255;return{deconflictionStrategy:e.deconflictionStrategy,minZoom:n.clamp(Math.floor(10*r),0,255),maxZoom:n.clamp(Math.floor(10*a),0,255)}}function c(e){return function(t){return a.pt2px(s.getSizeForValueSimple(t,e))}}function d(e){if(!e)return null;for(var t=0,i=e;t<i.length;t++){var r=i[t];if("size"===r.type)return c(r)}return null}t.createLabelVVEvaluator=d;var p=function(){function e(e,t,r,n){var a=this;this._vvHandle=null;var s=e.layer,o=s.geometryType,u=s.labelingInfo,h=s.renderer;h&&(this.vvEval=d("visualVariables"in h&&h.visualVariables)),this._vvHandle=s.watch("renderer",(function(e){e&&(a.vvEval=d("visualVariables"in e&&e.visualVariables))}));var c=s.featureReduction,p=c&&"cluster"===c.type&&c.labelingInfo,f=(u||[]).map((function(e){return l(e,n)})),g=(p||[]).map((function(e){return l(e,n)}));this.layerView=e,this.geometryType=o,this.index=t,this.order=r,this.zoomRanges=i.__spreadArrays(f,g),this.layerView=e}return e.prototype.hasVV=function(){return!!this.vvEval},e.prototype.allOrNothing=function(){return!("polyline"===this.geometryType)},e.prototype.destroy=function(){this._vvHandle.remove()},e.create=function(t,i,r,n){for(var a=r.sort(o),s=!1,u=-1,h=0,l=a;h<l.length;h++){var c=l[h];!s&&c.order>i&&(u=c.index,s=!0),s&&c.index++}return s||(u=a.length),new e(t,u,i,n)},e.delete=function(e,t){for(var i=t.sort(u),r=e+1;r<i.length;r++)t[r].index--;t[e].destroy(),t.splice(e,1)},e.find=function(e,t){for(var i=0,r=t;i<r.length;i++){var n=r[i];if(n.index===e)return n}return h.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!"),null},e}();t.default=p}).apply(null,r))||(e.exports=n)},ST29:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("W9tT")],void 0===(n=(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._reference=null}return Object.defineProperty(e.prototype,"dirty",{get:function(){return this.reference&&this.reference.isDirty},set:function(e){this.reference&&this.reference.hasData&&(e||this.reference.isDirty)&&(this.reference.isDirty=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._reference&&this._reference.labelIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reference",{get:function(){return this._reference},set:function(e){this._reference=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(e,t,r){var n=e.state,a=r.layerView.tileRenderer,s=this.reference;if(!s||!s.hasData)return!1;t&&(s.isDirty=!0);for(var o=s.transforms.labelMat2d,u=o[4],h=o[5],l=0,c=s.displayObjects;l<c.length;l++)for(var d=c[l],p=a.featuresView.attributeView,f=r.hasVV()?p.getVVSize(d.id):0,g=0,m=d.metrics;g<m.length;g++){var _=m[g];r.hasVV()&&_.computeVVOffset(f,r.vvEval);var v=_.bounds.center,y=_.bounds.centerT;s.isDirty&&(_.minZoom=-1);var b=i.vec2.copy(y,_.anchor);if(n.rotation?i.vec2.transformMat2d(b,b,o):(y[0]=b[0]+u,y[1]=b[1]+h),i.vec2.add(y,b,v),y[0]+=_.offsetX,y[1]+=_.offsetY,_.boxes)for(var w=0,x=_.boxes;w<x.length;w++){var T=x[w],S=T.centerT;i.vec2.add(S,_.anchor,T.center),n.rotation?i.vec2.transformMat2d(S,S,o):(S[0]=S[0]+u,S[1]=S[1]+h)}}return!0},e}();t.default=r}).apply(null,r))||(e.exports=n)},TEGq:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("hPTP")],void 0===(n=(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blur=t.highlight=void 0,t.highlight={name:"highlight",shaders:{vertexShader:i.resolveIncludes("highlight/textured.vert"),fragmentShader:i.resolveIncludes("highlight/highlight.frag")},attributes:{a_position:0,a_texcoord:1}},t.blur={name:"blur",shaders:{vertexShader:i.resolveIncludes("highlight/textured.vert"),fragmentShader:i.resolveIncludes("highlight/blur.frag")},attributes:{a_position:0,a_texcoord:1}}}).apply(null,r))||(e.exports=n)},TF9k:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("ked+"),i("ST29")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.neighbors=new Array(9),this._tiles=new Array(t);for(var i=0;i<t;i++)this._tiles[i]=new r.default;this.key=e}return Object.defineProperty(e.prototype,"isDirty",{get:function(){for(var e=0,t=this._tiles;e<t.length;e++)if(t[e].dirty)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._tiles.length},enumerable:!1,configurable:!0}),e.prototype.getTile=function(e){return this._tiles[e]},e.prototype.getReference=function(e){var t=this._tiles[e];return t&&t.reference},e.prototype.onRegisterLayer=function(e){this.invalidateRange(e),this._add(e)},e.prototype.onUnregisterLayer=function(e){this.invalidateRange(e),this._remove(e)},e.prototype.onLabelsRendered=function(){},e.prototype.invalidateRange=function(e){for(var t=e;t<this._tiles.length;t++)this._tiles[t].dirty=!0},e.prototype.add=function(e){this._add(e)},e.prototype.remove=function(e){this._remove(e)},e.prototype.canDelete=function(){return 0===this._tiles.length},e.prototype.ready=function(){for(var e=0,t=this._tiles;e<t.length;e++)t[e].dirty=!1},e.prototype.computeNeighbors=function(e){this.neighbors[0]=this._getNeighbor(e,-1,-1),this.neighbors[1]=this._getNeighbor(e,0,-1),this.neighbors[2]=this._getNeighbor(e,1,-1),this.neighbors[3]=this._getNeighbor(e,-1,0),this.neighbors[4]=this,this.neighbors[5]=this._getNeighbor(e,1,0),this.neighbors[6]=this._getNeighbor(e,-1,1),this.neighbors[7]=this._getNeighbor(e,0,1),this.neighbors[8]=this._getNeighbor(e,1,1)},e.prototype.reset=function(e,t,i){var r=this._tiles[i.index];r&&r.reset(e,t,i)},e.prototype._add=function(e){var t=[];if(e>=this._tiles.length)this._tiles.push(new r.default);else{for(var i=0;i<this._tiles.length;i++)i===e&&t.push(new r.default),t.push(this._tiles[i]);this._tiles=t}},e.prototype._remove=function(e){for(var t=[],i=0;i<this._tiles.length;i++)i!==e&&t.push(this._tiles[i]);this._tiles=t},e.prototype._getNeighbor=function(e,t,r){var n=this.key,a=i.TileKey.getId(n.level,n.row+r,n.col+t,n.world);return e.has(a)?e.get(a):null},e}();t.default=n}).apply(null,r))||(e.exports=n)},UrSa:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("TMur"),i("Ebn8"),i("Gtr7"),i("Vx27"),i("W9tT"),i("DIqE"),i("xI7m")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h){"use strict";var l=u.vec2f64.create(),c=u.vec2f64.create();return function(e){function t(t){var i=e.call(this,t)||this;return i._previousCenter=u.vec2f64.create(),i.viewpoint=new n({targetGeometry:new r.Point,scale:0,rotation:0}),i}return i.__extends(t,e),t.prototype.begin=function(e,t){this.navigation.begin(),o.vec2.set(this._previousCenter,t.center.x,t.center.y)},t.prototype.update=function(e,t){var i=e.state,r=i.size,n=i.padding;o.vec2.set(l,t.center.x,t.center.y),h.getAnchor(c,r,n),e.viewpoint=h.rotateBy(this.viewpoint,e.state.paddedViewState.viewpoint,h.angleBetween(c,this._previousCenter,l)),o.vec2.copy(this._previousCenter,l)},t.prototype.end=function(){this.navigation.end()},i.__decorate([s.property()],t.prototype,"viewpoint",void 0),i.__decorate([s.property()],t.prototype,"navigation",void 0),i.__decorate([s.subclass("esri.views.2d.actions.Rotate")],t)}(a)}).apply(null,r))||(e.exports=n)},W14q:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("qsST"),i("LxLY"),i("DJpR"),i("Nwkb")],void 0===(n=(function(e,t,i,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testSamplerPrecision=t.testWebGLDriver=void 0;var s=i.getLogger("esri.views.2d.engine.webgl.WebGLDriverTest"),o=function(){function e(e){this._ignoresSamplerPrecision=null,this._context=e}return Object.defineProperty(e.prototype,"ignoresSamplerPrecision",{get:function(){return r.isNone(this._ignoresSamplerPrecision)&&(this._ignoresSamplerPrecision=t.testSamplerPrecision(this._context)),this._ignoresSamplerPrecision},enumerable:!1,configurable:!0}),e}();t.testWebGLDriver=function(e){return new o(e)},t.testSamplerPrecision=function(e){var t=new n.FramebufferObject(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),i=new Uint8Array(4),r=new a(e,[0,0,1,0,0,1,1,1]),o=new n.Program(e,"\nprecision highp float;\n\nattribute vec2 a_pos;\n\nuniform highp sampler2D u_texture;\nvarying vec4 v_color;\n\nfloat getBit(in float bitset, in int bitIndex) {\n  float offset = pow(2.0, float(bitIndex));\n\n  return mod(floor(bitset / offset), 2.0);\n}\n\nvoid main() {\n  vec4 value = texture2D(u_texture, vec2(0.0));\n\n  float bit = getBit(value.x * 255.0, 1);\n\n  v_color = bit * vec4(1.0);\n\n  gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n}\n","\nprecision highp float;\n\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = v_color;\n}\n",{a_pos:0}),u=new n.Texture(e,{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([2,255,0,0]));o.setUniform1i("u_texture",0),e.bindTexture(u,0),e.bindFramebuffer(t),e.bindProgram(o);var h=e.getViewport(),l=h.x,c=h.y,d=h.width,p=h.height;e.setViewport(0,0,1,1),r.draw(),e.setViewport(l,c,d,p),t.readPixels(0,0,1,1,6408,5121,i),o.dispose(),r.dispose(),t.dispose();var f=255!==i[0]||255!==i[1]||255!==i[2]||255!==i[3];return f&&s.warn("A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. ["+i[0]+"."+i[1]+"."+i[2]+"."+i[3]+"]"),f}}).apply(null,r))||(e.exports=n)},W6K4:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("r7jh")],void 0===(n=(function(e,t,i){"use strict";return function(){function e(e,t){this._storage=new i.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t,i){this._storage.put(e,t,i,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e},enumerable:!1,configurable:!0}),e}()}).apply(null,r))||(e.exports=n)},XCks:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("qMld"),i("qMld"),i("qdig")],void 0===(n=(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.size=e;var t=document.createElement("canvas");t.width=t.height=e,this._context=t.getContext("2d"),this._gridOuter=new Float64Array(e*e),this._gridInner=new Float64Array(e*e),this._f=new Float64Array(e),this._d=new Float64Array(e),this._z=new Float64Array(e+1),this._v=new Int16Array(e)}return e.prototype.dispose=function(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg&&(document.body.removeChild(this._svg),this._svg=null)},e.prototype.draw=function(e,t,a){var s=this;void 0===a&&(a=31),this._initSVG();var o=this._createSVGString(e);return i.create((function(e,i){var u=new Image;u.src="data:image/svg+xml; charset=utf8, "+encodeURIComponent(o),u.onload=function(){u.onload=null,s._context.clearRect(0,0,s.size,s.size),s._context.drawImage(u,0,0,s.size,s.size);for(var t=s._context.getImageData(0,0,s.size,s.size),i=new Uint8Array(s.size*s.size*4),r=0;r<s.size*s.size;r++){var o=t.data[4*r+3]/255;s._gridOuter[r]=1===o?0:0===o?1e20:Math.pow(Math.max(0,.5-o),2),s._gridInner[r]=1===o?1e20:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(s._edt(s._gridOuter,s.size,s.size),s._edt(s._gridInner,s.size,s.size),r=0;r<s.size*s.size;r++)n.packFloatRGBA(.5-(s._gridOuter[r]-s._gridInner[r])/(2*a),i,4*r);e(i)};var h=t&&t.signal;h&&r.onAbort(h,(function(){return i(r.createAbortError())}))}))},e.prototype._initSVG=function(){if(!this._svg){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("style","position: absolute;"),e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),document.body.appendChild(e),this._svg=e}},e.prototype._createSVGString=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",e),this._svg.appendChild(t);var i,r,n,a,s=t.getBBox(),o=s.width/s.height,u=this.size/2;o>1?(r=i=u/s.width,n=this.size/4,a=u-u*(1/o)/2):(i=r=u/s.height,n=u-u*o/2,a=this.size/4),t.setAttribute("style","transform: matrix("+i+", 0, 0, "+r+", "+(-s.x*i+n)+", "+(-s.y*r+a)+")");var h='<svg style="fill:red;" height="'+this.size+'" width="'+this.size+'" xmlns="http://www.w3.org/2000/svg">'+this._svg.innerHTML+"</svg>";return this._svg.removeChild(t),h},e.prototype._edt=function(e,t,i){for(var r=this._f,n=this._d,a=this._v,s=this._z,o=0;o<t;o++){for(var u=0;u<i;u++)r[u]=e[u*t+o];for(this._edt1d(r,n,a,s,i),u=0;u<i;u++)e[u*t+o]=n[u]}for(u=0;u<i;u++){for(o=0;o<t;o++)r[o]=e[u*t+o];for(this._edt1d(r,n,a,s,t),o=0;o<t;o++)e[u*t+o]=Math.sqrt(n[o])}},e.prototype._edt1d=function(e,t,i,r,n){i[0]=0,r[0]=-1e20,r[1]=1e20;for(var a=1,s=0;a<n;a++){for(var o=(e[a]+a*a-(e[i[s]]+i[s]*i[s]))/(2*a-2*i[s]);o<=r[s];)s--,o=(e[a]+a*a-(e[i[s]]+i[s]*i[s]))/(2*a-2*i[s]);i[++s]=a,r[s]=o,r[s+1]=1e20}for(a=0,s=0;a<n;a++){for(;r[s+1]<a;)s++;t[a]=(a-i[s])*(a-i[s])+e[i[s]]}},e}();t.default=a}).apply(null,r))||(e.exports=n)},Y6jg:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("TMur"),i("Ebn8"),i("Gtr7"),i("Vx27"),i("W9tT"),i("DIqE"),i("xI7m"),i("f7cP"),i("6N7s")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l,c){"use strict";return function(e){function t(t){var i=e.call(this,t)||this;return i._animationTime=0,i._momentumFinished=!1,i._rotationMomentumEstimator=new l.RotationMomentumEstimator(.6,.15,.95),i._rotationDirection=1,i._zoomDirection=1,i._zoomMomentumEstimator=new c.ZoomMomentumEstimator,i._zoomOnly=null,i.zoomMomentum=null,i.rotateMomentum=null,i.viewpoint=new n({targetGeometry:new r.Point,scale:0,rotation:0}),i.watch("_momentumFinished",(function(e){e&&i.navigation.stop()})),i}return i.__extends(t,e),t.prototype.begin=function(e,t){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=t.angle,this._previousRadius=this._startRadius=t.radius,this._previousCenter=t.center,this._updateTimestamp=null,e.constraints.rotationEnabled&&this.addToRotateEstimator(0,t.timestamp),this.addToZoomEstimator(t,1)},t.prototype.update=function(e,t){null===this._updateTimestamp&&(this._updateTimestamp=t.timestamp);var i=t.angle,r=t.radius,n=t.center,a=Math.abs(180*(i-this._startAngle)/Math.PI),s=Math.abs(r-this._startRadius),o=this._startRadius/r;if(this._previousRadius){var u=r/this._previousRadius,h=180*(i-this._previousAngle)/Math.PI;this._rotationDirection=h>=0?1:-1,this._zoomDirection=u>=1?1:-1,e.constraints.rotationEnabled?(null===this._zoomOnly&&t.timestamp-this._updateTimestamp>200&&(this._zoomOnly=s-a>0),null===this._zoomOnly||this._zoomOnly?h=0:this.addToRotateEstimator(i-this._startAngle,t.timestamp)):h=0,this.addToZoomEstimator(t,o),this.navigation.setViewpoint([n.x,n.y],1/u,h,[this._previousCenter.x-n.x,n.y-this._previousCenter.y])}this._previousAngle=i,this._previousRadius=r,this._previousCenter=n},t.prototype.end=function(e){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(e),this.navigation.end()},t.prototype.addToRotateEstimator=function(e,t){this._rotationMomentumEstimator.add(e,.001*t)},t.prototype.addToZoomEstimator=function(e,t){this._zoomMomentumEstimator.add(t,.001*e.timestamp)},t.prototype.canZoomIn=function(e){var t=e.constraints.effectiveMaxScale;return 0===t||e.scale>t},t.prototype.canZoomOut=function(e){var t=e.constraints.effectiveMinScale;return 0===t||e.scale<t},t.prototype.onAnimationUpdate=function(e){var t=this;this.navigation.animationManager.animateContinous(e.viewpoint,(function(i,r){var n=!t.canZoomIn(e)&&t._zoomDirection>1||!t.canZoomOut(e)&&t._zoomDirection<1,a=!t.rotateMomentum||t.rotateMomentum.isFinished(t._animationTime),s=n||!t.zoomMomentum||t.zoomMomentum.isFinished(t._animationTime),l=.001*r;if(t._momentumFinished=a&&s,!t._momentumFinished){var c=t.rotateMomentum?Math.abs(t.rotateMomentum.valueDelta(t._animationTime,l))*t._rotationDirection*180/Math.PI:0,d=t.zoomMomentum?Math.abs(t.zoomMomentum.valueDelta(t._animationTime,l)):1,p=u.vec2f64.create(),f=u.vec2f64.create();if(t._previousCenter){o.vec2.set(p,t._previousCenter.x,t._previousCenter.y),h.getPaddingScreenTranslation(f,e.size,e.padding),o.vec2.add(p,p,f);var g=e.constraints,m=e.scale,_=m*d;d<1&&!g.canZoomInTo(_)?(d=m/g.effectiveMaxScale,t.zoomMomentum=null,t.rotateMomentum=null):d>1&&!g.canZoomOutTo(_)&&(d=m/g.effectiveMinScale,t.zoomMomentum=null,t.rotateMomentum=null),h.scaleAndRotateBy(i,e.viewpoint,d,c,p,e.size),e.constraints.constrainByGeometry(i)}}t._animationTime+=l}))},t.prototype.stopMomentumNavigation=function(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())},i.__decorate([s.property()],t.prototype,"_momentumFinished",void 0),i.__decorate([s.property()],t.prototype,"viewpoint",void 0),i.__decorate([s.property()],t.prototype,"navigation",void 0),i.__decorate([s.subclass("esri.views.2d.navigation.actions.Pinch")],t)}(a)}).apply(null,r))||(e.exports=n)},YIDE:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("DJpR"),i("hPTP")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMagnifierProgram=t.magnifierProgramTemplate=void 0,t.magnifierProgramTemplate={name:"magnifier",shaders:{vertexShader:r.resolveIncludes("magnifier/magnifier.vert"),fragmentShader:r.resolveIncludes("magnifier/magnifier.frag")},attributes:{a_pos:0}},t.createMagnifierProgram=function(e){return i.createProgram(e,t.magnifierProgramTemplate)}}).apply(null,r))||(e.exports=n)},ajSa:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("2Kdy")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EffectManager=void 0;var n={colorize:function(){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){i.e(171).then((function(){var t=[i("Z6mQ")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return[2,new(e.sent().Colorize)]}}))}))},blur:function(){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){i.e(170).then((function(){var t=[i("nzZL")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return[2,new(e.sent().Blur)]}}))}))},bloom:function(){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){i.e(169).then((function(){var t=[i("xiHi")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return[2,new(e.sent().Bloom)]}}))}))},opacity:function(){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){i.e(173).then((function(){var t=[i("cLuO")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return[2,new(e.sent().Opacity)]}}))}))},"drop-shadow":function(){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){i.e(172).then((function(){var t=[i("Vu5b")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return[2,new(e.sent().DropShadow)]}}))}))}},a=function(){function e(e){this._requestRender=e,this._effectMap=new Map,this._effectPromiseMap=new Map}return e.prototype.dispose=function(){this._requestRender&&(this._requestRender=null),this._effectMap.forEach((function(e){return e.dispose()})),this._effectMap.clear(),this._effectPromiseMap.clear()},e.prototype.getPostProcessingEffects=function(e){if(!e||0===e.length)return[];for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i],a=this._getPostProcessingEffectName(n),s=this._effectMap.get(a);s?t.push({postProcessingEffect:s,effect:n}):this._enablePostProcessingEffect(a)}return t},e.prototype._getPostProcessingEffectName=function(e){return"colorMatrix"in e?"colorize":"radial-blur"===e.type?"blur":e.type},e.prototype._enablePostProcessingEffect=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(i){switch(i.label){case 0:return[4,this._loadPostProcessingEffect(e)];case 1:return t=i.sent(),this._requestRender?(this._effectMap.set(e,t),this._requestRender.requestRender(),[2]):[2]}}))}))},e.prototype._loadPostProcessingEffect=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._effectPromiseMap.has(e)||this._effectPromiseMap.set(e,n[e]()),[2,this._effectPromiseMap.get(e)]}))}))},e}();t.EffectManager=a}).apply(null,r))||(e.exports=n)},"dEz+":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("ma1f"),i("qMld")],void 0===(n=(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnimatedPNG=t.getPNGSize=t.isPNG=void 0;for(var a=new Uint32Array(256),s=0;s<256;s++){for(var o=s,u=0;u<8;u++)o=0!=(1&o)?3988292384^o>>>1:o>>>1;a[s]=o}var h=new r("Not a PNG"),l=new r("Not an animated PNG"),c=new Uint8Array([137,80,78,71,13,10,26,10]);function d(e){var t=e.constructor===Uint8Array?e:new Uint8Array(e);return!c.some((function(e,i){return e!==t[i]}))}t.isPNG=d,t.getPNGSize=function(e){var t,i;return g(new Uint8Array(e),(function(e,r,n){var a=new DataView(r.buffer);"IHDR"===e&&(t=a.getUint32(n+8),i=a.getUint32(n+12))})),[t,i]},t.isAnimatedPNG=function(e){var t=new Uint8Array(e);if(!d(t))return!1;var i=!1;return g(t,(function(e){return!(i="acTL"===e)})),i};var p=function(){function e(){this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[],this.paused=!1,this.playing=!1,this.playSpeed=1,this.currentFrameNumber=0,this._lastUsedFrame=-1}return e.create=function(t,a){return i.__awaiter(this,void 0,void 0,(function(){var s,o;return i.__generator(this,(function(i){switch(i.label){case 0:s=new e,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s._load(t,a)];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),n.isAbortError(o)?[3,4]:[2,new r("invalid-resource","Could not load PNG: "+o.message)];case 4:return[2,s]}}))}))},e.prototype.play=function(){this.playing||(this.paused=!1,this.playing=!0,this._play())},e.prototype.pause=function(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)},e.prototype.togglePlay=function(){this.paused||!this.playing?this.play():this.pause()},e.prototype.bindFrame=function(e,t,i){e.bindTexture(t,i);var r=this.frameChanged();if(!r)return!1;var n=this.currentFrame,a=n.frameData,s=t.descriptor;return(n.left||n.top||n.width!==s.width||n.height!==s.height)&&t.setData(null),t.updateData(0,n.left,n.top,n.width,n.height,a),this.updateUsedFrame(),r},e.prototype.frameChanged=function(){return this._lastUsedFrame!==this.currentFrameNumber},e.prototype.updateUsedFrame=function(){this._lastUsedFrame=this.currentFrameNumber},e.prototype._load=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var t,a,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),(t=function(e,t){var i=new Uint8Array(t);if(c.some((function(e,t){return e!==i[t]})))return h;var r=!1;if(g(i,(function(e){return!(r="acTL"===e)})),!r)return l;var n=[],a=[],s=null,o=null,u=0;if(g(i,(function(t,i,r,h){var l=new DataView(i.buffer);switch(t){case"IHDR":s=i.subarray(r+8,r+8+h),e.width=l.getUint32(r+8),e.height=l.getUint32(r+12);break;case"acTL":e.numPlays=l.getUint32(r+8+4);break;case"fcTL":o&&(e.frames.push(o),u++),(o=new f).width=l.getUint32(r+8+4),o.height=l.getUint32(r+8+8),o.left=l.getUint32(r+8+12),o.top=l.getUint32(r+8+16);var c=l.getUint16(r+8+20),d=l.getUint16(r+8+22);0===d&&(d=100),o.delay=1e3*c/d,o.delay<=10&&(o.delay=100),e.playTime+=o.delay,o.disposeOp=l.getUint8(r+8+24),o.blendOp=l.getUint8(r+8+25),o.dataParts=[],0===u&&2===o.disposeOp&&(o.disposeOp=1);break;case"fdAT":o&&o.dataParts.push(i.subarray(r+8+4,r+8+h));break;case"IDAT":o&&o.dataParts.push(i.subarray(r+8,r+8+h));break;case"IEND":a.push(_(i,r,12+h));break;default:n.push(_(i,r,12+h))}})),0===e.frames.length)return l;e.frameCount=e.frames.length;var d=new Blob(n),p=new Blob(a);return e.frames.forEach((function(e){var t=[];t.push(c),s.set(y(e.width),0),s.set(y(e.height),4),t.push(v("IHDR",s)),t.push(d),e.dataParts.forEach((function(e){return t.push(v("IDAT",e))})),t.push(p),e.data=new Blob(t,{type:"image/png"}),delete e.dataParts,t=null})),e}(this,e))!==this?[2,t]:(this._resizeCanvas=document.createElement("canvas"),this._resizeCanvas.width=this.width,this._resizeCanvas.height=this.height,[4,n.all(this.frames.map((function(e){return e.createImage(s._resizeCanvas)})))]);case 1:return i.sent(),[3,3];case 2:return a=i.sent(),n.isAbortError(a)?[3,3]:[2,new r("invalid-resource","Could not parse PNG")];case 3:return this.play(),[2]}}))}))},e.prototype._play=function(){var e,t,i=this;if(0!==this.playSpeed){this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),t=this.currentFrameNumber,(t-=1)<0&&(t=this.frames.length-1),e=1*-this.frames[t].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,e=1*this.frames[this.currentFrameNumber].delay/this.playSpeed);var r=this.frames[this.currentFrameNumber];this.currentFrame={frameData:r.imageData,top:r.top,left:r.left,width:r.width,height:r.height},this.timerID=window.setTimeout((function(){return i._play()}),e)}else this.pause()},e}();t.default=p;var f=function(){function e(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.data=null,this.imageData=null}return e.prototype.createImage=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(i){return null!==this.imageData?[2]:[2,n.create((function(i,r){var n=URL.createObjectURL(t.data),a=document.createElement("img");a.onload=function(){URL.revokeObjectURL(n),t.imageData=function(e,t){t.width=e.width,t.height=e.height;var i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);for(var r,n=i.getImageData(0,0,e.width,e.height),a=new Uint8Array(n.data),s=0;s<a.length;s+=4)a[s]=a[s]*(r=a[s+3]/255),a[s+1]=a[s+1]*r,a[s+2]=a[s+2]*r;return new ImageData(new Uint8ClampedArray(a.buffer),e.width,e.height)}(a,e),i()},a.onerror=function(){URL.revokeObjectURL(n),t.imageData=null,r(new Error("Image creation error"))},a.src=n}))]}))}))},e}();function g(e,t){var i,r,n,a=new DataView(e.buffer),s=8;do{r=a.getUint32(s),n=t(i=m(e,s+4,4),e,s,r),s+=12+r}while(!1!==n&&"IEND"!==i&&s<e.length)}function m(e,t,i){var r=Array.prototype.slice.call(e.subarray(t,t+i));return String.fromCharCode.apply(String,r)}function _(e,t,i){var r=new Uint8Array(i);return r.set(e.subarray(t,t+i)),r}function v(e,t){var i=e.length+t.length,r=new Uint8Array(i+8),n=new DataView(r.buffer);n.setUint32(0,t.length),r.set(function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(e),4),r.set(t,8);var s=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=e.length-t);for(var r=-1,n=t,s=t+i;n<s;n++)r=r>>>8^a[255&(r^e[n])];return-1^r}(r,4,i);return n.setUint32(i+4,s),r}function y(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}}).apply(null,r))||(e.exports=n)},dtJe:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyFromSymbol=void 0,t.keyFromSymbol=function(e){switch(e.type){case"esriSMS":return e.style+"."+e.path;case"esriSLS":return e.style+"."+e.cap;case"esriSFS":return""+e.style;case"esriPFS":case"esriPMS":return e.imageData?e.imageData:""+e.url+e.width+e.height;default:return e.mosaicHash?e.mosaicHash:JSON.stringify(e)}}}).apply(null,r))||(e.exports=n)},eFQu:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("ma1f"),i("qsST")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerViewSorter=void 0;var n=r.getLogger("esri.views.2d.engine.collisions.LayerViewSorter");function a(e){return"esri.views.2d.layers.FeatureLayerView2D"===e.declaredClass||"esri.views.2d.layers.StreamLayerView2D"===e.declaredClass}function s(e){if(!e.layer||!e.layer.renderer)return!1;switch(e.layer.renderer.type){case"class-breaks":case"simple":case"unique-value":case"dictionary":case"dot-density":return!0;default:return n.error(new i("mapview-labeling","Renderer of type "+e.layer.renderer.type+" does not currently support labeling")),!1}}var o=function(){function e(e,t){this.registerLayer=e,this.unregisterLayer=t,this._layerViewState=new Map}return e.prototype.findIndex=function(e){return e.view.allLayerViews.findIndex((function(t){return t.uid===e.uid}))},e.prototype.update=function(e){for(var t=e.added,i=0,r=e.removed;i<r.length;i++)a(u=r[i])&&this._layerViewState.has(u)&&this._deleteState(u);for(var n=0,o=t;n<o.length;n++){var u;a(u=o[n])&&s(u)&&!this._layerViewState.has(u)&&this._createState(u)}this._recomputeOrder()},e.prototype.destroy=function(){this._layerViewState.forEach((function(e){return e.handles.forEach((function(e){return e.remove()}))}))},e.prototype._createState=function(e){var t={priority:-1,handles:null};return t.handles=[e.layer.watch("visible",this._recomputeOrder.bind(this)),e.layer.watch("labelsVisible",this._recomputeOrder.bind(this)),e.layer.watch("labelingInfo",this._recomputeOrder.bind(this)),e.layer.watch("featureReduction",this._recomputeOrder.bind(this))],this._layerViewState.set(e,t),t},e.prototype._deleteState=function(e){if(this._layerViewState.has(e)){var t=this._layerViewState.get(e);t.handles.forEach((function(e){return e.remove()})),-1!==t.priority&&this.unregisterLayer(e),this._layerViewState.delete(e)}},e.prototype._recomputeOrder=function(){var e=this;this._layerViewState.forEach((function(t,i){var r=i.view.map.allLayers.findIndex((function(e){return e.uid===i.layer.uid})),n=i.layer,a=n.featureReduction,s=n.visible&&(n.labelsVisible&&n.labelingInfo&&n.labelingInfo.length||a&&"cluster"===a.type&&a.labelsVisible&&a.labelingInfo&&a.labelingInfo.length)?4294967295-r:-1;s!==t.priority&&(t.priority=s,e.unregisterLayer(i),-1!==s&&e.registerLayer(i,s))}))},e}();t.LayerViewSorter=o}).apply(null,r))||(e.exports=n)},eprR:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("0J3i"),i("zp6E"),i("ma1f"),i("qsST"),i("LxLY"),i("qMld"),i("jBNx"),i("W9tT"),i("ab6c"),i("C+up"),i("tI6k"),i("JNkf"),i("0XPR"),i("3pdx"),i("Hoc/"),i("XCks"),i("1ZJt"),i("dEz+"),i("MUu6"),i("2Gaw"),i("PlK1"),i("dtJe")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l,c,d,p,f,g,m,_,v,y,b,w,x,T,S){"use strict";var P=c.vec2f32.create(),M=s.getLogger("esri.views.2d.engine.webgl.TextureManager");function I(e){switch(e.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":case"CIMVectorMarker":case"CIMPictureMarker":case"CIMCharacterMarker":return!1;default:return!0}}function C(e){return i.__awaiter(this,void 0,void 0,(function(){var t,r;return i.__generator(this,(function(i){switch(i.label){case 0:t=window.URL.createObjectURL(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n(t,{responseType:"image"})];case 2:return r=i.sent().data,window.URL.revokeObjectURL(t),[2,r];case 3:return i.sent(),window.URL.revokeObjectURL(t),[2,new a("mapview-invalid-resource","Could not fetch requested resource at "+t)];case 4:return[2]}}))}))}function O(e,t){return i.__awaiter(this,void 0,void 0,(function(){var r,s,o,h,l,c,d,p,f;return i.__generator(this,(function(g){switch(g.label){case 0:if(-1===(r=e.imageData?"data:"+e.contentType+";base64,"+e.imageData:e.url).indexOf(";base64,"))return[3,1];for(o=r.indexOf(";base64,")+";base64,".length,h=r.substring(o),l=atob(h),c=new Uint8Array(l.length),d=0;d<l.length;d++)c[d]=l.charCodeAt(d);return s=c.buffer,[3,4];case 1:return g.trys.push([1,3,,4]),[4,n(r,i.__assign({responseType:"array-buffer"},t))];case 2:return p=g.sent().data,s=p,[3,4];case 3:return f=g.sent(),u.isAbortError(f)?[3,4]:[2,new a("mapview-invalid-resource","Could not fetch requested resource at "+r)];case 4:return[2,s]}}))}))}var E=function(e,t,i){return M.error(new a(e,t,i))},R=function(){function e(e,t,i){this.mosaicType=e,this.page=t,this.sdf=i}return e.fromMosaic=function(t,i){return new e(t,i.page,i.sdf)},e}();return function(){function e(e){this._invalidFontsMap=new Map,this._sdfConverter=new v.default(126),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._rasterizer=new d.default,this._spriteMosaic=new y(e,2048,2048,500),this._glyphSource=new _(r.fontsUrl+"/{fontstack}/{range}.pbf"),this._glyphMosaic=new m(1024,1024,this._glyphSource)}return e.prototype.dispose=function(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._rasterizer=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null},Object.defineProperty(e.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!1,configurable:!0}),e.prototype.rasterizeItem=function(e,t,r,n){return i.__awaiter(this,void 0,void 0,(function(){var a,s,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:if(o.isNone(e))return E("mapview-null-resource","Unable to rasterize null resource"),[2,null];switch(e.type){case"CIMTextSymbol":case"esriTS":return[3,1];case"esriSMS":case"esriPMS":case"esriSFS":case"esriPFS":case"esriSLS":return[3,3]}return[3,3];case 1:return[4,this._rasterizeText(e,r,n)];case 2:return(a=i.sent()).forEach((function(e){return u._setTextureBinding(f.MosaicType.GLYPH,e)})),[2,{glyphMosaicItems:a}];case 3:return(h=e).type&&-1!==h.type.toLowerCase().indexOf("3d")?(E("mapview-invalid-type","MapView does not support symbol type: "+e.type,e),[2,null]):[4,this._rasterizeSpriteSymbol(e,t,n)];case 4:return s=i.sent(),T.ok(s)&&s&&this._setTextureBinding(f.MosaicType.SPRITE,s),[2,{spriteMosaicItem:s}]}var h}))}))},e.prototype.bindTextures=function(e,t,i){if(0!==i.textureBinding){var r=this._bindingInfos[i.textureBinding-1],n=r.page;switch(r.mosaicType){case f.MosaicType.SPRITE:var a=this.sprites.getWidth(n),s=this.sprites.getHeight(n),o=l.vec2.set(P,a,s);return this._spriteMosaic.bind(e,9729,n,p.TEXTURE_BINDING_SPRITE_ATLAS),t.setUniform1i("u_texture",p.TEXTURE_BINDING_SPRITE_ATLAS),void t.setUniform2fv("u_mosaicSize",o);case f.MosaicType.GLYPH:return o=l.vec2.set(P,a=this.glyphs.width,s=this.glyphs.height),this._glyphMosaic.bind(e,9729,n,p.TEXTURE_BINDING_GLYPH_ATLAS),t.setUniform1i("u_texture",p.TEXTURE_BINDING_GLYPH_ATLAS),void t.setUniform2fv("u_mosaicSize",o);default:M.error("mapview-texture-manager","Cannot handle unknown type "+r.mosaicType)}}},e.prototype._hashMosaic=function(e,t){return 1|e<<1|(t.sdf?1:0)<<2|t.page<<3},e.prototype._setTextureBinding=function(e,t){var i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){var r=R.fromMosaic(e,t);this._hashToBindingIndex.set(i,this._bindingInfos.length+1),this._bindingInfos.push(r)}t.textureBinding=this._hashToBindingIndex.get(i)},e.prototype._rasterizeText=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var n,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:n=g.getFullyQualifiedFontName(e.font),a=this._invalidFontsMap.has(n),s=t||function(e){for(var t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));return t}(x.bidiText(e.text)[0]),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._glyphMosaic.getGlyphItems(a?"arial-unicode-ms-regular":n,s,r)];case 2:return[2,i.sent()];case 3:return i.sent(),E("mapview-invalid-resource","Couldn't find font "+n+". Falling back to Arial Unicode MS Regular"),this._invalidFontsMap.set(n,!0),[2,this._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",s,r)];case 4:return[2]}}))}))},e.prototype._rasterizeSpriteSymbol=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var n,s,o,u;return i.__generator(this,(function(i){return function(e){switch(e.type){case"CIMSolidStroke":case"CIMSolidFill":return!0;case"esriSFS":return"esriSFSSolid"===e.style||"esriSFSNull"===e.style;case"esriSLS":return"esriSLSSolid"===e.style||"esriSLSNull"===e.style;default:return!1}}(e)?[2,null]:(n=S.keyFromSymbol(e),this._spriteMosaic.has(n)?[2,this._spriteMosaic.getSpriteItem(n)]:function(e){return"esriSMS"===e.type&&e.path}(e)?[2,this._handleSVG(e,n,r)]:function(e){return e.url||e.imageData}(e)?[2,this._handleImage(e,n,r)]:(s=this._rasterizer.rasterizeJSONResource(e,t))?(o=s.sdf,u=s.simplePattern,[2,this._addItemToMosaic(n,s.size,{type:"static",data:s.image},I(e),o,u)]):[2,new a("TextureManager","unrecognized or null rasterized image")])}))}))},e.prototype._handleSVG=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var n,a;return i.__generator(this,(function(i){switch(i.label){case 0:return n=[126,126],[4,this._sdfConverter.draw(e.path,r)];case 1:return a=i.sent(),[2,this._addItemToMosaic(t,n,{type:"static",data:new Uint32Array(a.buffer)},!1,!0,!0)]}}))}))},e.prototype._handleGIFOrPNG=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var n,s,o,h,l,c,d,p;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,O(e,r)];case 1:if(n=i.sent(),!T.ok(n))return[3,10];if(s=w.isGIF(n),o=b.isPNG(n),!s&&!o)return[2,new a("mapview-invalid-resource","Image data is neither GIF nor PNG!")];h=void 0,i.label=2;case 2:return i.trys.push([2,7,,8]),s&&w.isAnimatedGIF(n)?[4,w.default.create(n,r)]:[3,4];case 3:return h=i.sent(),[3,6];case 4:return o&&b.isAnimatedPNG(n)?[4,b.default.create(n,r)]:[3,6];case 5:h=i.sent(),i.label=6;case 6:return[3,8];case 7:return l=i.sent(),u.isAbortError(l)?[3,8]:[2,new a("mapview-invalid-resource","Could not fetch requested resource!")];case 8:return h&&T.ok(h)?[2,this._addItemToMosaic(t,[h.width,h.height],{type:"animated",data:h},I(e),!1,!1)]:[4,C(new Blob([n],{type:s?"image/gif":"image/png"}))];case 9:if((c=i.sent())&&c instanceof HTMLImageElement)return d=this._rasterizer.rasterizeImageResource(c,e.colorSubstitutions),p=d.sdf,[2,this._addItemToMosaic(t,d.size,{type:"static",data:d.image},I(e),p,!1)];i.label=10;case 10:return[2,new a("mapview-invalid-resource","Could not handle resource!")]}}))}))},e.prototype._handleImage=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var s,o,l,c,d;return i.__generator(this,(function(p){switch(p.label){case 0:if(function(e){return e.url&&-1!==e.url.indexOf(".gif")||e.contentType&&"image/gif"===e.contentType||e.imageData&&-1!==e.imageData.indexOf("data:image/gif")}(e)||function(e){return e.url&&-1!==e.url.indexOf(".png")||e.contentType&&"image/png"===e.contentType||e.imageData&&-1!==e.imageData.indexOf("data:image/png")}(e))return[2,this._handleGIFOrPNG(e,t,r)];s=e.imageData?"data:"+e.contentType+";base64,"+e.imageData:e.url,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,n(s,i.__assign({responseType:"image"},r))];case 2:return o=p.sent().data,-1!==s.indexOf("data:image/svg+xml")&&(o.width=h.pt2px(e.width),o.height=h.pt2px(e.height)),l=this._rasterizer.rasterizeImageResource(o,e.colorSubstitutions),c=l.sdf,[2,this._addItemToMosaic(t,l.size,{type:"static",data:l.image},I(e),c,!1)];case 3:return d=p.sent(),u.isAbortError(d)?[3,4]:[2,new a("mapview-invalid-resource","Could not fetch requested resource at "+s)];case 4:return[2,void 0]}}))}))},e.prototype._addItemToMosaic=function(e,t,i,r,n,a){return this._spriteMosaic.addSpriteItem(e,t,i,r,n,a)},e}()}).apply(null,r))||(e.exports=n)},f7cP:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("F3FF")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RotationMomentumEstimator=void 0;var n=function(e){function t(t,i,r,n){return void 0===t&&(t=3),void 0===i&&(i=.01),void 0===r&&(r=.95),void 0===n&&(n=12),e.call(this,t,i,r,n)||this}return i.__extends(t,e),t.prototype.add=function(t,i){if(this.value.hasLastValue){for(var r=this.value.lastValue,n=t-r;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;t=r+n}e.prototype.add.call(this,t,i)},t}(r.MomentumEstimator);t.RotationMomentumEstimator=n}).apply(null,r))||(e.exports=n)},gm1X:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("ma1f"),i("qsST"),i("R2Zq"),i("xoE+"),i("tI6k"),i("TF9k"),i("S0eh")],void 0===(n=(function(e,t,i,r,n,a,s,o,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollisionEngine=void 0;var h=s.TILE_SIZE/s.COLLISION_BUCKET_SIZE,l=h,c=r.getLogger("esri.views.2d.engine.webgl.collisions.CollisionEngine"),d=function(){function e(e){this._layers=new Map,this._collisionBuckets=new Map,this._didError=!1,this._tilingScheme=e}return Object.defineProperty(e.prototype,"collisionInfos",{get:function(){return n.valuesOfMap(this._layers)},enumerable:!1,configurable:!0}),e.prototype.registerLayerView=function(e,t){if(!this._layers.has(e)){var i=u.default.create(e,t,this.collisionInfos,this._tilingScheme);this._layers.set(e,i),this._collisionBuckets.forEach((function(e){return e.onRegisterLayer(i.index)}))}},e.prototype.unregisterLayerView=function(e){var t=this;if(this._layers.has(e)){var i=this._layers.get(e);u.default.delete(i.index,this.collisionInfos),this._layers.delete(e),this._collisionBuckets.forEach((function(e,r){var n=e.getTile(i.index);n&&(e.onUnregisterLayer(i.index),e.canDelete()&&t._collisionBuckets.delete(r),n.reference&&(n.reference.isDirty=!1))}))}},e.prototype.addTile=function(e,t){var i=t.key.id;if(this._layers.has(e)){this._collisionBuckets.has(i)||this._collisionBuckets.set(i,new o.default(t.key,this._layers.size));var r=this._getIndex(e);this._collisionBuckets.get(i).getTile(r).reference=t}},e.prototype.removeTile=function(e,t){if(this._layers.has(e)&&this._collisionBuckets.has(t)){var i=this._getIndex(e),r=this._collisionBuckets.get(t).getTile(i);r.dirty=!1,r.reference=null}},e.prototype.run=function(e,t){var r=n.valuesOfMap(this._collisionBuckets).sort((function(e,t){return e.key.compareRowMajor(t.key)})),a=!0,s=e.renderingOptions.labelCollisionsEnabled&&!this._didError,o=this.collisionInfos;try{for(var h=0,l=r;h<l.length;h++){var d=l[h];a=a||d.isDirty,d.computeNeighbors(this._collisionBuckets);for(var p=0;p<this._layers.size;p++){var f=u.default.find(p,o);d.reset(e,a,f)}}for(var g=0;g<this._layers.size;g++){f=u.default.find(g,o);for(var m=0,_=r;m<_.length;m++)this._run(s,d=_[m],f,t)}}catch(e){c.error(new i("mapview-labeling","Encountered an error during decluttering. Disabling collisions",e)),this._didError=!0}for(var v=0,y=r;v<y.length;v++)(d=y[v]).ready()},e.prototype._run=function(e,t,i,r){var n=t.getReference(i.index);n&&n.hasData&&(n.key.level!==r?this._resetLabelsMinZoom(t,i):this._runVisibility(e,t,n,i,r))},e.prototype._resetLabelsMinZoom=function(e,t){if(e&&"polyline"!==t.geometryType){var i=e.getReference(t.index);if(i&&i.hasData)for(var r=t.layerView.tileRenderer.featuresView.attributeView,n=0,a=i.displayObjects;n<a.length;n++)r.setLabelMinZoom(a[n].id,255)}},e.prototype._checkLabelsVisible=function(e,t){return(!t.filter||!!(e&s.FILTER_FLAG_0))&&(!t.effect||t.effect.excludedLabelsVisible||!!(e&s.EFFECT_FLAG_0))},e.prototype._runVisibility=function(e,t,i,r,n){for(var a=r.layerView.tileRenderer.featuresView.attributeView,s=i.displayObjects.sort((function(e,t){return a.getLabelMinZoom(e.id)-a.getLabelMinZoom(t.id)})),o=r.zoomRanges.some((function(e){return"none"===e.deconflictionStrategy})),u=0,h=s;u<h.length;u++){var l=h[u];if(l.metrics.length){var c="polyline"===r.geometryType?0:10*(n-1),d=a.getFilterFlags(l.id),p=this._checkLabelsVisible(d,r.layerView);if(e&&!o)for(var f=0;f<l.metrics.length;f++){var g=l.metrics[f],m=p?-1!==g.minZoom?g.minZoom:this._computeLabelVisibility(l,g,r.index,t,g.baseZoom,n):255;c=Math.max(m,c)}c=Math.max(c,0),a.setLabelMinZoom(l.id,c);for(var _=0,v=l.metrics;_<v.length;_++)(g=v[_]).minZoom=c}}},e.prototype._computeLabelVisibility=function(e,t,i,r,n,a){for(var s=n,o=t.xBucket,u=t.yBucket,c=t.xOverflow,d=t.yOverflow,p=o-c,f=o+c+1,g=u+d+1,m=u-d;m<g;m++)for(var _=p;_<f;_++)if(!(_<-h||m<-l||_>h||m>l))for(var v=0;v<=i;v++){var y=this._getRelativeSubBucket(v,r,_,m);if(y)for(var b=0,w=y;b<w.length;b++){var x=w[b];if(v!==i||x.id!==e.id){var T=this._compareLabels(t,x,s,a);s=Math.max(T,s)}}}return s},e.prototype._compareLabels=function(e,t,i,r){if(-1===t.minZoom||t.minZoom>10*(r+1))return i;var n=e.findCollisionDelta(t),s=a.clamp(Math.ceil(10*(n+r)),0,255);return t.minZoom>=s?i:Math.max(i,s)},e.prototype._getNeighboringTile=function(e,t,i,r){var n=t.neighbors[3*(1+r)+(1+i)];return n&&n.getTile(e)},e.prototype._getRelativeSubBucket=function(e,t,i,r){var n=a.sign(Math.floor(i/4)),s=a.sign(Math.floor(r/4)),o=this._getNeighboringTile(e,t,n,s);return o&&o.reference&&o.index&&o.reference.hasData?o.index[r-4*s][i-4*n]:null},e.prototype._getIndex=function(e){return this._layers.get(e).index},e}();t.CollisionEngine=d}).apply(null,r))||(e.exports=n)},hAHX:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("hf04"),i("H1tY"),i("LxLY"),i("JNkf")],void 0===(n=(function(e,t,i,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.brushes=e,this.name=t.name,this.drawPhase=t.drawPhase||a.WGLDrawPhase.MAP,this._targetFn=t.target,this.effects=t.effects||[],this.has=t.has}return e.prototype.render=function(e){var t=e.context,i=e.profiler,n=this._targetFn(),a=this.drawPhase&e.drawPhase;if(i.recordPassStart(this.name),a&&(!this.has||r(this.has))){this._doRender(e,n),i.recordPassEnd();for(var s=0,o=this.effects;s<o.length;s++){var u=o[s];if(u.enable()){var h=u.apply;i.recordPassStart(this.name+"."+h.name),i.recordBrushStart(h.name);var l=u.args&&u.args(),c=t.getViewport(),d=c.x,p=c.y,f=c.width,g=c.height,m=t.getBoundFramebufferObject();h.bind(e,l),this._doRender(e,n,h.defines),h.draw(e,l),h.unbind(e,l),t.bindFramebuffer(m),t.setViewport(d,p,f,g),i.recordBrushEnd(),i.recordPassEnd()}}}},e.prototype._doRender=function(e,t,r){if(!n.isNone(t))if(i.isArrayLike(t))for(var a=0,s=t;a<s.length;a++){var o=s[a];if(o.visible)for(var u=0,h=this.brushes;u<h.length;u++){var l=h[u];e.profiler.recordBrushStart(l.name),l.prepareState(e,o,r),l.draw(e,o,r),e.profiler.recordBrushEnd()}}else for(var c=0,d=this.brushes;c<d.length;c++)e.profiler.recordBrushStart((l=d[c]).name),l.prepareState(e,t,r),l.draw(e,t,r),e.profiler.recordBrushEnd()},e}();t.default=s}).apply(null,r))||(e.exports=n)},kLlh:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("0LE5"),i("Rdxj"),i("E9c0"),i("2JMt")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PanPlanarMomentumEstimator=t.PanPlanarMomentum=void 0;var o=function(e){function t(t,i,r,n,a){var s=e.call(this,t,i,r)||this;return s.sceneVelocity=n,s.direction=a,s}return i.__extends(t,e),t.prototype.value=function(t){return e.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,t)},t}(s.Momentum);t.PanPlanarMomentum=o;var u=function(){function e(e,t,i){void 0===e&&(e=300),void 0===t&&(t=12),void 0===i&&(i=.84),this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=i,this.enabled=!0,this.time=new a.FilteredFiniteDifference(.6),this.screen=[new a.FilteredFiniteDifference(.4),new a.FilteredFiniteDifference(.4)],this.scene=[new a.FilteredFiniteDifference(.6),new a.FilteredFiniteDifference(.6),new a.FilteredFiniteDifference(.6)],this.tmpDirection=n.vec3f64.create()}return e.prototype.add=function(e,t,i){if(this.enabled){if(this.time.hasLastValue&&this.time.computeDelta(i)<.015)return;this.screen[0].update(e[0]),this.screen[1].update(e[1]),this.scene[0].update(t[0]),this.scene[1].update(t[1]),this.scene[2].update(t[2]),this.time.update(i)}},e.prototype.reset=function(){this.screen[0].reset(),this.screen[1].reset(),this.scene[0].reset(),this.scene[1].reset(),this.scene[2].reset(),this.time.reset()},e.prototype.evaluateMomentum=function(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;var e=this.screen[0].filteredDelta,t=this.screen[1].filteredDelta,i=Math.sqrt(e*e+t*t)/this.time.filteredDelta;return Math.abs(i)<this.minimumInitialVelocity?null:this.createMomentum(i,this.stopVelocity,this.friction)},e.prototype.createMomentum=function(e,t,i){r.vec3.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);var n=r.vec3.length(this.tmpDirection);return n>0&&r.vec3.scale(this.tmpDirection,this.tmpDirection,1/n),new o(e,t,i,n/this.time.filteredDelta,this.tmpDirection)},e}();t.PanPlanarMomentumEstimator=u}).apply(null,r))||(e.exports=n)},kUhT:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("Gtr7"),i("ma1f"),i("7MDj"),i("qsST"),i("rMND"),i("Vx27"),i("gm1X"),i("eFQu")],void 0===(n=(function(e,t,i,r,n,a,s,o,u,h,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=s.getLogger("esri.views.2d.layers.labels.LabelManager"),d=function(e){function t(t){var i=e.call(this,t)||this;return i._applyVisibilityPassThrottled=o.throttle(i._applyVisibilityPass,64,i),i.lastUpdateId=-1,i.updateRequested=!1,i.view=null,i}return i.__extends(t,e),t.prototype.initialize=function(){var e=this;this.collisionEngine=new h.CollisionEngine(this.view.featuresTilingScheme),this._layerViewSorter=new l.LayerViewSorter((function(t,i){e.collisionEngine.registerLayerView(t,i);var r=t.tileRenderer;r&&r.forEachTile((function(i){i.isDirty=!0,e.addTile(t,i)})),e.requestUpdate()}),(function(t){e.collisionEngine.unregisterLayerView(t),e.requestUpdate()})),this.handles.add(this.view.allLayerViews.on("change",(function(t){e._layerViewSorter.update(t)})))},t.prototype.destroy=function(){this._layerViewSorter.destroy(),this._layerViewSorter=null,this.collisionEngine=null,this._applyVisibilityPassThrottled.remove(),this._applyVisibilityPassThrottled=null},Object.defineProperty(t.prototype,"updating",{get:function(){return this.updateRequested},enumerable:!1,configurable:!0}),t.prototype.update=function(e){this._applyVisibilityPassThrottled(e)},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())},t.prototype.processUpdate=function(e){this._set("updateParameters",e),this.updateRequested&&(this.updateRequested=!1,this.update(e))},t.prototype.addTile=function(e,t){this.collisionEngine.addTile(e,t)},t.prototype.removeTile=function(e,t){this.collisionEngine.removeTile(e,t)},t.prototype._applyVisibilityPass=function(e){try{var t=this.view.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;this.collisionEngine.run(e,t)}catch(e){c.error(new n("mapview-labeling","Encountered an error during label decluttering",e))}},i.__decorate([u.property()],t.prototype,"updateRequested",void 0),i.__decorate([u.property({readOnly:!0})],t.prototype,"updateParameters",void 0),i.__decorate([u.property({dependsOn:["updateRequested"]})],t.prototype,"updating",null),i.__decorate([u.property()],t.prototype,"view",void 0),i.__decorate([u.subclass("esri.views.2d.layers.labels.LabelManager")],t)}(a.HandleOwnerMixin(r));t.default=d}).apply(null,r))||(e.exports=n)},mvc2:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("qsST"),i("DJpR"),i("tI6k"),i("n4XV")],void 0===(n=(function(e,t,i,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),o=[0,0,0,0],u=function(){function e(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:a.HIGHLIGHT_SIZING.outlinePosition,outlineWidth:a.HIGHLIGHT_SIZING.outlineWidth,innerHaloWidth:a.HIGHLIGHT_SIZING.innerHaloWidth,outerHaloWidth:a.HIGHLIGHT_SIZING.outerHaloWidth},this.shadeTexChanged=!0,this.texelData=new Uint8Array(4*a.SHADE_TEXTURE_SIZE),this.minMaxDistance=[0,0]}return e.prototype.setHighlightOptions=function(e){var t,i,r,n,u=this._convertedHighlightOptions;(n=u).fillColor[0]=(r=e).color.r/255,n.fillColor[1]=r.color.g/255,n.fillColor[2]=r.color.b/255,n.fillColor[3]=r.color.a,r.haloColor?(n.outlineColor[0]=r.haloColor.r/255,n.outlineColor[1]=r.haloColor.g/255,n.outlineColor[2]=r.haloColor.b/255,n.outlineColor[3]=r.haloColor.a):(n.outlineColor[0]=n.fillColor[0],n.outlineColor[1]=n.fillColor[1],n.outlineColor[2]=n.fillColor[2],n.outlineColor[3]=n.fillColor[3]),n.fillColor[3]*=r.fillOpacity,n.outlineColor[3]*=r.haloOpacity,n.fillColor[0]*=n.fillColor[3],n.fillColor[1]*=n.fillColor[3],n.fillColor[2]*=n.fillColor[3],n.outlineColor[0]*=n.outlineColor[3],n.outlineColor[1]*=n.outlineColor[3],n.outlineColor[2]*=n.outlineColor[3],n.outlineWidth=a.HIGHLIGHT_SIZING.outlineWidth,n.outerHaloWidth=a.HIGHLIGHT_SIZING.outerHaloWidth,n.innerHaloWidth=a.HIGHLIGHT_SIZING.innerHaloWidth,n.outlinePosition=a.HIGHLIGHT_SIZING.outlinePosition;var h,l=u.outlinePosition-u.outlineWidth/2-u.outerHaloWidth,c=u.outlinePosition-u.outlineWidth/2,d=u.outlinePosition+u.outlineWidth/2,p=u.outlinePosition+u.outlineWidth/2+u.innerHaloWidth,f=Math.sqrt(Math.PI/2)*a.SIGMAS[3],g=Math.abs(l)>f?Math.round(10*(Math.abs(l)-f))/10:0,m=Math.abs(p)>f?Math.round(10*(Math.abs(p)-f))/10:0;g&&!m?s.error("The outer rim of the highlight is "+g+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!g&&m?s.error("The inner rim of the highlight is "+m+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):g&&m&&s.error("The highlight is "+Math.max(g,m)+"px away from the edge of the feature; consider reducing some width values.");var _=[void 0,void 0,void 0,void 0];function v(e,t,i){_[0]=(1-i)*e[0]+i*t[0],_[1]=(1-i)*e[1]+i*t[1],_[2]=(1-i)*e[2]+i*t[2],_[3]=(1-i)*e[3]+i*t[3]}for(var y=this.texelData,b=0;b<a.SHADE_TEXTURE_SIZE;++b)(h=l+b/(a.SHADE_TEXTURE_SIZE-1)*(p-l))<l?(_[4*b+0]=0,_[4*b+1]=0,_[4*b+2]=0,_[4*b+3]=0):h<c?v(o,u.outlineColor,(h-l)/(c-l)):h<d?(_[0]=(t=u.outlineColor)[0],_[1]=t[1],_[2]=t[2],_[3]=t[3]):h<p?v(u.outlineColor,u.fillColor,(h-d)/(p-d)):(_[4*b+0]=(i=u.fillColor)[0],_[4*b+1]=i[1],_[4*b+2]=i[2],_[4*b+3]=i[3]),y[4*b+0]=255*_[0],y[4*b+1]=255*_[1],y[4*b+2]=255*_[2],y[4*b+3]=255*_[3];this.minMaxDistance[0]=l,this.minMaxDistance[1]=p,this.shadeTexChanged=!0},e.prototype.applyHighlightOptions=function(e,t){this.shadeTex||(this.shadeTex=new r.Texture(e,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:a.SHADE_TEXTURE_SIZE,height:1,samplingMode:9729})),this.shadeTexChanged&&(this.shadeTex.updateData(0,0,0,a.SHADE_TEXTURE_SIZE,1,this.texelData),this.shadeTexChanged=!1),e.bindTexture(this.shadeTex,n.TEXTURE_BINDING_HIGHLIGHT_1),t.setUniform2fv("u_minMaxDistance",this.minMaxDistance)},e.prototype.destroy=function(){this.shadeTex&&(this.shadeTex.dispose(),this.shadeTex=null)},e}();t.default=u}).apply(null,r))||(e.exports=n)},n4XV:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIGHLIGHT_SIZING=t.SHADE_TEXTURE_SIZE=t.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=t.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=t.SIGMAS=void 0,t.SIGMAS=[void 0,void 0,void 0,1],t.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],t.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.SHADE_TEXTURE_SIZE=256,t.HIGHLIGHT_SIZING={outlineWidth:.7,outerHaloWidth:.7,innerHaloWidth:.7,outlinePosition:0}}).apply(null,r))||(e.exports=n)},nOTS:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("H1tY"),i("+P5t"),i("3ikD"),i("mvc2"),i("RyYO"),i("3o6C")],void 0===(n=(function(e,t,i,r,n,a,s,o,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defines=["highlight"],t._hlRenderer=new o.default,t._hlGradient=new s.default,t._width=void 0,t._height=void 0,t._hlSurfaces=new u.default,t._adjustedWidth=void 0,t._adjustedHeight=void 0,t._blitRenderer=new n.BitBlitRenderer,t}return i.__extends(t,e),t.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose(),this._hlRenderer&&this._hlRenderer.dispose(),this._hlGradient&&this._hlGradient.destroy(),this._boundFBO=null},t.prototype.bind=function(e){var t=e.context,i=e.painter,r=t.getViewport(),n=r.width,a=r.height,s=i.getFbos(n,a).effect0;this.setup(e,n,a),t.bindFramebuffer(s),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)},t.prototype.unbind=function(){},t.prototype.setup=function(e,t,i){var r=e.context;this._width=t,this._height=i;var n=t%4,a=i%4;i+=a<2?-a:4-a,this._adjustedWidth=t+=n<2?-n:4-n,this._adjustedHeight=i,this._boundFBO=r.getBoundFramebufferObject();var s=Math.round(.75*t),o=Math.round(.75*i);this._hlRenderer.setup(r,s,o),this._hlSurfaces.setup(r,s,o)},t.prototype.draw=function(e){var t=e.context,i=t.getBoundFramebufferObject();t.setViewport(0,0,.75*this._adjustedWidth,.75*this._adjustedHeight),t.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),t.setStencilTestEnabled(!1),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT),this._blitRenderer.render(t,i.colorTexture,9728,1),t.setStencilTestEnabled(!1),t.setBlendingEnabled(!1),t.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT),this._hlRenderer.preBlur(t,this._hlSurfaces.sharedBlur1Tex),r("esri-feature-highlight-debug")?(t.bindFramebuffer(null),t.clear(t.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(t,this._hlSurfaces.sharedBlur2Tex)):(t.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(t,this._hlSurfaces.sharedBlur2Tex),t.bindFramebuffer(this._boundFBO),t.setBlendingEnabled(!0),t.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(t,this._hlSurfaces.sharedBlur1Tex,this._hlGradient),this._boundFBO=null)},t.prototype.setHighlightOptions=function(e){this._hlGradient.setHighlightOptions(e)},t}(a.Effect);t.default=h}).apply(null,r))||(e.exports=n)},nzKn:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("ma1f"),i("qsST"),i("LxLY"),i("DJpR"),i("JNkf"),i("Nwkb"),i("ORRN")],void 0===(n=(function(e,t,i,r,n,a,s,o,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlendEffect=void 0;var h=r.getLogger("esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect"),l=function(){function e(){this._size=[0,0]}return e.prototype.dispose=function(e){this._backBufferTexture&&(this._backBufferTexture.dispose(),this._backBufferTexture=null),this._programCache&&(this._programCache.dispose(),this._programCache=null),this._quad&&(this._quad.dispose(),this._quad=null)},e.prototype.draw=function(e,t,r,n,a){var o=e.context,l=e.drawPhase;if(this._setupShader(o),n&&"normal"!==n&&l!==s.WGLDrawPhase.LABEL)this._drawBlended(e,t,r,n,a);else{var c=this._programCache.getProgram(u.blend,"normal");if(c){o.bindProgram(c),t.setSamplingMode(r),o.bindTexture(t,0),c.setUniform1i("u_layerTexture",0),c.setUniform1f("u_opacity",a),o.setBlendingEnabled(!0),o.setBlendFunction(1,771);var d=this._quad;d.draw(),d.unbind()}else h.error(new i("mapview-BlendEffect",'Error creating shader program for blend mode "normal"'))}},e.prototype._drawBlended=function(e,t,r,a,s){var o,l,c=e.context,d=e.pixelRatio,p=e.inFadeTransition,f=e.state.size,g=c.getBoundFramebufferObject();if(n.isSome(g)){var m=g.descriptor;o=m.width,l=m.height}else o=Math.round(d*f[0]),l=Math.round(d*f[1]);this._createOrResizeTexture(e,o,l);var _=this._backBufferTexture;g.copyToTexture(0,0,o,l,0,0,_),c.setStencilTestEnabled(!1),c.setStencilWriteMask(0),c.setBlendingEnabled(!0),c.setDepthTestEnabled(!1),c.setDepthWriteEnabled(!1);var v=this._programCache.getProgram(u.blend,a);if(v){c.bindProgram(v),_.setSamplingMode(r),c.bindTexture(_,0),v.setUniform1i("u_backbufferTexture",0),t.setSamplingMode(r),c.bindTexture(t,1),v.setUniform1i("u_layerTexture",1),v.setUniform1f("u_opacity",s),v.setUniform1f("u_inFadeOpacity",p?1:0),c.setBlendFunction(1,0);var y=this._quad;y.draw(),y.unbind(),c.setBlendFunction(1,771)}else h.error(new i("mapview-BlendEffect","Error creating shader program for blend mode "+a))},e.prototype._setupShader=function(e){this._programCache||(this._programCache=new a.ProgramCache(e),this._quad||(this._quad=new o(e,[-1,-1,1,-1,-1,1,1,1])))},e.prototype._createOrResizeTexture=function(e,t,i){var r=e.context;null!==this._backBufferTexture&&t===this._size[0]&&i===this._size[1]||(this._backBufferTexture?this._backBufferTexture.resize(t,i):this._backBufferTexture=new a.Texture(r,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:t,height:i}),this._size[0]=t,this._size[1]=i)},e}();t.BlendEffect=l}).apply(null,r))||(e.exports=n)},pvXx:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("LxLY"),i("DJpR"),i("JNkf"),i("wdp+")],void 0===(n=(function(e,t,i,r,n,a,s){"use strict";var o=function(e){return e===a.WGLDrawPhase.HITTEST||e===a.WGLDrawPhase.LABEL_ALPHA};return function(){function e(e){this._programByKey=new Map,this._programCache=new n.ProgramCache(e)}return e.prototype.dispose=function(){this._programCache&&this._programCache.dispose()},e.prototype.getProgram=function(e,t,r,n){void 0===r&&(r=[]),void 0===n&&(n=[]);var a=t.vsPath+"."+t.fsPath+JSON.stringify(r)+n.join(".");if(this._programByKey.has(a))return this._programByKey.get(a);var o=n.reduce((function(t,r){var n;return i.__assign(i.__assign({},t),((n={})[r]=e.driverTestResult[r],n))}),{}),u=i.__assign(i.__assign({},r.map((function(e){return"string"==typeof e?{name:e,value:!0}:e})).reduce((function(e,t){var r;return i.__assign(i.__assign({},e),((r={})[t.name]=t.value,r))}),{})),o),h=this._programCache.getProgram(s.createProgramTemplate(t.vsPath,t.fsPath,t.attributes),u);if(!h)throw new Error("Unable to get program for key: ${key}");return this._programByKey.set(a,h),h},e.prototype.getMaterialProgram=function(e,t,n,u,h,l){void 0===l&&(l=["ignoresSamplerPrecision"]);var c=function(e,t,i,n){var s=e.rendererInfo,u=e.drawPhase;return t.getVariationHash()+"-"+n.join(".")+"-"+function(e){return(o(e)?1:0)|(e===a.WGLDrawPhase.HIGHLIGHT?2:0)}(u)+"-"+s.getVariationHash()+"-"+(r.isSome(i)&&i.join("."))}(e,t,h,l);if(this._programByKey.has(c))return this._programByKey.get(c);var d=function(e,t,n,s){var u=s.reduce((function(t,r){var n;return i.__assign(i.__assign({},t),((n={})[r]=e.driverTestResult[r],n))}),{}),h=i.__assign(i.__assign(i.__assign(i.__assign({},t.getVariation()),e.rendererInfo.getVariation()),{highlight:e.drawPhase===a.WGLDrawPhase.HIGHLIGHT,id:o(e.drawPhase)}),u);if(r.isSome(n))for(var l=0,c=n;l<c.length;l++)h[c[l]]=!0;return h}(e,t,h,l),p=this._programCache.getProgram(s.createProgramTemplate(n,n,u),d);if(!p)throw new Error("Unable to get program for key: ${key}");return this._programByKey.set(c,p),p},e}()}).apply(null,r))||(e.exports=n)},q4Xm:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("zOht"),i("Gtr7"),i("jBNx"),i("Vx27")],void 0===(n=(function(e,t,i,r,n,a){"use strict";var s="Shift";return function(e){function t(t){var i=e.call(this,t)||this;return i._container=null,i._overlay=null,i._backgroundShape=null,i._boxShape=null,i._box={x:0,y:0,width:0,height:0},i._redraw=i._redraw.bind(i),i}return i.__extends(t,e),t.prototype.destroy=function(){this.view=null},Object.defineProperty(t.prototype,"view",{set:function(e){var t=this;this._handles&&this._handles.forEach((function(e){e.remove()})),this._handles=null,this._destroyOverlay(),this._set("view",e),e&&(e.on("drag",[s],(function(e){return t._handleDrag(e,1)})),e.on("drag",[s,"Ctrl"],(function(e){return t._handleDrag(e,-1)})))},enumerable:!1,configurable:!0}),t.prototype._start=function(){this._createContainer(),this._createOverlay(),this.navigation.begin()},t.prototype._update=function(e,t,i,r){this._box.x=e,this._box.y=t,this._box.width=i,this._box.height=r,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))},t.prototype._end=function(e,t,i,r,a){var s=this.view,o=s.toMap(n.createScreenPoint(e+.5*i,t+.5*r)),u=Math.max(i/s.width,r/s.height);-1===a&&(u=1/u),this._destroyOverlay(),this.navigation.end(),s.goTo({center:o,scale:s.scale*u})},t.prototype._updateBox=function(e,t,i,r){var n=this._boxShape;n.setAttributeNS(null,"x",""+e),n.setAttributeNS(null,"y",""+t),n.setAttributeNS(null,"width",""+i),n.setAttributeNS(null,"height",""+r),n.setAttributeNS(null,"class","esri-zoom-box__outline")},t.prototype._updateBackground=function(e,t,i,r){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(e,t,i,r,this.view.width,this.view.height))},t.prototype._createContainer=function(){var e=document.createElement("div");e.className="esri-zoom-box__container",this.view.root.appendChild(e),this._container=e},t.prototype._createOverlay=function(){var e=this.view.width,t=this.view.height,i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M 0 0 L "+e+" 0 L "+e+" "+t+" L 0 "+t+" Z"),i.setAttributeNS(null,"class","esri-zoom-box__overlay-background");var r=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttributeNS(null,"class","esri-zoom-box__overlay"),n.appendChild(i),n.appendChild(r),this._container.appendChild(n),this._backgroundShape=i,this._boxShape=r,this._overlay=n},t.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null},t.prototype._toSVGPath=function(e,t,i,r,n,a){var s=e+i,o=t+r;return"M 0 0 L "+n+" 0 L "+n+" "+a+" L 0 "+a+" ZM "+e+" "+t+" L "+e+" "+o+" L "+s+" "+o+" L "+s+" "+t+" Z"},t.prototype._handleDrag=function(e,t){var i,r,n,a,s=e.x,o=e.y,u=e.origin.x,h=e.origin.y;switch(s>u?(i=u,n=s-u):(i=s,n=u-s),o>h?(r=h,a=o-h):(r=o,a=h-o),e.action){case"start":this._start();break;case"update":this._update(i,r,n,a);break;case"end":this._end(i,r,n,a,t)}e.stopPropagation()},t.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var e=this._box,t=e.x,i=e.y,r=e.width,n=e.height;this._updateBox(t,i,r,n),this._updateBackground(t,i,r,n),this._rafId=requestAnimationFrame(this._redraw)}},i.__decorate([a.property()],t.prototype,"navigation",void 0),i.__decorate([a.property()],t.prototype,"view",null),i.__decorate([a.subclass("esri.views.2d.navigation.ZoomBox")],t)}(r)}).apply(null,r))||(e.exports=n)},qdig:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packFloatRGBA=void 0;var i=[1,256,65536,16777216],r=[1/256,1/65536,1/16777216,1/4294967296],n=function(e,t){void 0===t&&(t=0);for(var i=0,n=0;n<4;n++)i+=e[t+n]*r[n];return i}(new Uint8ClampedArray([255,255,255,255]));t.packFloatRGBA=function(e,t,r){void 0===r&&(r=0);for(var a,s=function(e,t,i){return e<0?0:e>i?i:e}(e,0,n),o=0;o<4;o++)t[r+o]=Math.floor(256*((a=s*i[o])-Math.floor(a)))}}).apply(null,r))||(e.exports=n)},"wdp+":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("DJpR"),i("hPTP")],void 0===(n=(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProgramTemplate=void 0;var n=function(e){var t="";t+=e[0].toUpperCase();for(var i=1;i<e.length;i++){var r=e[i];r===r.toUpperCase()?(t+="_",t+=r):t+=r.toUpperCase()}return t},a=function(e){var t={};for(var r in e)t[n(r)]=e[r];return i.glslifyDefineMap(t)};t.createProgramTemplate=function(e,t,i){var n=e+e.substring(e.lastIndexOf("/")),s=t+t.substring(t.lastIndexOf("/"));return{name:name,attributes:i,shaders:function(e){return{vertexShader:a(e)+r.resolveIncludes(n+".vert"),fragmentShader:a(e)+r.resolveIncludes(s+".frag")}}}}}).apply(null,r))||(e.exports=n)}}]);