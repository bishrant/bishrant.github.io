(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/sources/geojson/geojson":"9K5t","esri/core/tsSupport/valuesHelper":"ghSy","esri/layers/graphics/sources/geojson/GeoJSONSourceWorker":"vXbj"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{"9K5t":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("ghSy"),r("ma1f"),r("/COu"),r("Jvs9")],void 0===(i=(function(e,t,r,n,i,s,o,u){Object.defineProperty(t,"__esModule",{value:!0});var a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){var t,n,i;return r(this,(function(r){switch(r.label){case 0:switch(e.type){case"Feature":return[3,1];case"FeatureCollection":return[3,3]}return[3,7];case 1:return[4,e];case 2:return r.sent(),[3,7];case 3:t=0,n=e.features,r.label=4;case 4:return t<n.length?(i=n[t])?[4,i]:[3,6]:[3,7];case 5:r.sent(),r.label=6;case 6:return t++,[3,4];case 7:return[2]}}))}function d(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=e[(r+1)%e.length];t+=n[0]*i[1]-i[0]*n[1]}return t<=0}function c(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function p(e,t,r){var n=c(t);d(n)?y(e,n,r):h(e,n,r)}function f(e,t,r){var n=c(t);d(n)?h(e,n,r):y(e,n,r)}function y(e,t,r){for(var n=0,i=t;n<i.length;n++)g(e,i[n],r);e.lengths.push(t.length)}function h(e,t,r){for(var n=t.length-1;n>=0;n--)g(e,t[n],r);e.lengths.push(t.length)}function g(e,t,r){var n=t[2];e.coords.push(t[0],t[1]),r.hasZ&&e.coords.push(n||0)}function m(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}t.validateGeoJSON=function(e){if(!e)throw new s("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new s("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});if(e.crs){var t=e.crs;if("link"===t.type||!["crs84","4326"].some((function(e){return-1!==t.properties.name.toLowerCase().indexOf(e)})))throw new s("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}},t.inferLayerProperties=function(e,t){void 0===t&&(t={});for(var n=l(e),s=[],o=new Set,u=new Set,d=!1,c=Number.NEGATIVE_INFINITY,p=null,f=!1,y=void 0,h=t.geometryType,g=void 0===h?null:h,v=!1,b=function(){var e,t,l=n.next(),h=l.value;if(l.done){var b=p&&1===p.length&&p[0]||null;if(b)for(var F=0,I=s;F<I.length;F++){var j=I[F];j.name===b&&(j.type="esriFieldTypeOID")}return{value:{fields:s,geometryType:g,hasZ:d,maxObjectId:Math.max(0,c),objectIdFieldName:b,objectIdFieldType:y,unknownFields:(e=u,t=[],e.forEach((function(e){return t.push(e)})),t)}}}var E=h.geometry,_=h.properties,w=h.id;if(E&&(g||(g=a[E.type]),a[E.type]!==g))return"continue";if(!d){var T=function(e){var t,n,s,o,u,a;return r(this,(function(r){switch(r.label){case 0:if(!e)return[2,null];switch(e.type){case"Point":return[3,1];case"LineString":case"MultiPoint":return[3,3];case"MultiLineString":case"Polygon":return[3,5];case"MultiPolygon":return[3,10]}return[3,17];case 1:return[4,e.coordinates];case 2:return r.sent(),[3,17];case 3:return[5,i(e.coordinates)];case 4:return r.sent(),[3,17];case 5:t=0,n=e.coordinates,r.label=6;case 6:return t<n.length?[5,i(n[t])]:[3,9];case 7:r.sent(),r.label=8;case 8:return t++,[3,6];case 9:return[3,17];case 10:s=0,o=e.coordinates,r.label=11;case 11:if(!(s<o.length))return[3,16];u=0,a=o[s],r.label=12;case 12:return u<a.length?[5,i(a[u])]:[3,15];case 13:r.sent(),r.label=14;case 14:return u++,[3,12];case 15:return s++,[3,11];case 16:return[3,17];case 17:return[2]}}))}(E);d=function(e){for(;;){var t=e.next();if(t.done)return!1;if(t.value.length>2)return!0}}(T)}if(f||(f=null!=w)&&"number"==(y=typeof w)&&(p=Object.keys(_).filter((function(e){return _[e]===w}))),f&&"number"===y&&null!=w&&(c=Math.max(c,w),p.length>1?p=p.filter((function(e){return _[e]===w})):1===p.length&&(p=_[p[0]]===w?p:[])),!v&&_){var x=!0;for(var S in _)if(!o.has(S)){var q=_[S];if(null!=q){var O=m(q);"unknown"!==O?(u.delete(S),o.add(S),s.push({name:S,alias:S,type:O})):u.add(S)}else x=!1,u.add(S)}v=x}};;){var F=b();if("object"==typeof F)return F.value}},t.createOptimizedFeatures=function(e,t){return function(e){for(var t=[];;){var r=e.next();if(r.done)return t;t.push(r.value)}}(function(e,t){var n,i,s,l,d,c,h,m;return void 0===t&&(t={}),r(this,(function(r){switch(r.label){case 0:n=t.geometryType,i=t.objectIdFieldName,r.label=1;case 1:return s=e.next(),l=s.value,s.done?[2]:(c=l.properties,h=l.id,(d=l.geometry)&&a[d.type]!==n?[3,1]:(m=c||{},i&&null!=h&&(m[i]=h),[4,new o.default(d?function(e,t,r){switch(t.type){case"LineString":return function(e,t,r){return y(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){for(var n=0,i=t.coordinates;n<i.length;n++)y(e,i[n],r);return e}(e,t,r);case"MultiPoint":return function(e,t,r){return y(e,t.coordinates,r),e}(e,t,r);case"MultiPolygon":return function(e,t,r){for(var n=0,i=t.coordinates;n<i.length;n++){var s=i[n];p(e,s[0],r);for(var o=1;o<s.length;o++)f(e,s[o],r)}return e}(e,t,r);case"Point":return function(e,t,r){return g(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){var n=t.coordinates;p(e,n[0],r);for(var i=1;i<n.length;i++)f(e,n[i],r);return e}(e,t,r)}}(new u.default,d,t):null,m)]));case 2:return r.sent(),[3,1];case 3:return[2]}}))}(l(e),t))}}).apply(null,n))||(e.exports=i)},ghSy:function(e,t,r){var n;void 0===(n=(function(){return function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}}).apply(null,[]))||(e.exports=n)},vXbj:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Q2wQ"),r("2Atf"),r("HZ3d"),r("zp6E"),r("ma1f"),r("qMld"),r("Lzvl"),r("nrlZ"),r("+6sX"),r("rfv1"),r("Q2Em"),r("ZooB"),r("9K5t"),r("DaHD"),r("jJpZ"),r("I90O"),r("Q3lp"),r("k7g7")],void 0===(i=(function(e,t,r,n,i,s,o,u,a,l,d,c,p,f,y,h,g,m,v,b){Object.defineProperty(t,"__esModule",{value:!0});var F={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},I=function(){function e(){this._queryEngine=null}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null},e.prototype.load=function(e){return i(this,void 0,void 0,(function(){var t,i,u,a,g,I,j,E,_,w,T,x,S,q,O,D,P,R,k,G,M,Q,Z,A,J,N;return r(this,(function(r){switch(r.label){case 0:return t=[],[4,this._checkProjection(e.spatialReference)];case 1:return r.sent(),i=null,e.url?[4,s(e.url,{responseType:"json"})]:[3,4];case 2:return u=r.sent(),[4,y.validateGeoJSON(i=u.data)];case 3:r.sent(),r.label=4;case 4:if(a=y.inferLayerProperties(i,{geometryType:e.geometryType}),g=e.fields||a.fields||[],I=null!=e.hasZ?e.hasZ:a.hasZ,E=e.objectIdField||("number"===a.objectIdFieldType?a.objectIdFieldName:"OBJECTID")||"OBJECTID",_=e.spatialReference||l.WGS84,w=e.timeInfo,!(j=a.geometryType))throw new o("geojson-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");for("string"===a.objectIdFieldType&&t.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."}),g===a.fields&&a.unknownFields.length>0&&t.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:a.unknownFields}}),E&&(T=null,g.some((function(e){return e.name===E&&(T=e,!0)}))?(T.type="esriFieldTypeOID",T.editable=!1,T.nullable=!1):g.unshift({alias:E,name:E,type:"esriFieldTypeOID",editable:!1,nullable:!1})),x=0,S=g;x<S.length;x++){if(null==(P=S[x]).name&&(P.name=P.alias),null==P.alias&&(P.alias=P.name),!P.name)throw new o("geojson-layer:invalid-field-name","field name is missing",{field:P});if(P.name===E&&(P.type="esriFieldTypeOID"),-1===v.kebabDict.jsonValues.indexOf(P.type))throw new o("geojson-layer:invalid-field-type",'invalid type for field "'+P.name+'"',{field:P})}for(q={},this._requiredFields=[],O=0,D=g;O<D.length;O++)"esriFieldTypeOID"!==(P=D[O]).type&&"esriFieldTypeGlobalID"!==P.type&&(P.editable=null==P.editable||!!P.editable,P.nullable=null==P.nullable||!!P.nullable,R=b.getFieldDefaultValue(P),P.nullable||void 0!==R?q[P.name]=R:this._requiredFields.push(P));if(this._fieldsIndex=new m(g),w&&(w.startTimeField&&((k=this._fieldsIndex.get(w.startTimeField))?(w.startTimeField=k.name,k.type="esriFieldTypeDate"):w.startTimeField=null),w.endTimeField&&((G=this._fieldsIndex.get(w.endTimeField))?(w.endTimeField=G.name,G.type="esriFieldTypeDate"):w.endTimeField=null),w.trackIdField&&((M=this._fieldsIndex.get(w.trackIdField))?w.trackIdField=M.name:(w.trackIdField=null,t.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:w}}))),w.startTimeField||w.endTimeField||(t.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:w}}),w=null)),Q={warnings:t,featureErrors:[],layerDefinition:n({},F,{drawingInfo:h.createDrawingInfo(j),templates:h.createDefaultTemplate(q),extent:null,geometryType:j,objectIdField:E,fields:g,hasZ:!!I,timeInfo:w})},this._queryEngine=new f.default({fields:g,geometryType:j,hasM:!1,hasZ:I,objectIdField:E,spatialReference:_,timeInfo:w,featureStore:new c.default({geometryType:j,hasM:!1,hasZ:I})}),this._createDefaultAttributes=h.createDefaultAttributesFunction(q,E),this._nextObjectId=a.maxObjectId+1,Z=y.createOptimizedFeatures(i,{geometryType:j,hasZ:I,objectIdFieldName:"number"===a.objectIdFieldType?E:null}),!l.equals(_,l.WGS84))for(A=0,J=Z;A<J.length;A++)(N=J[A]).geometry&&(N.geometry=d.convertFromGeometry(p.project(d.convertToGeometry(N.geometry,j,I,!1),l.WGS84,_)));return this._loadInitialFeatures(Q,Z),[2,Q]}}))}))},e.prototype.applyEdits=function(e){return i(this,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return n=(t=this._queryEngine).spatialReference,[4,u.all([g.loadGeometryEngineForSimplify(t.geometryType),p.checkProjectionSupport(e.adds,n),p.checkProjectionSupport(e.updates,n)])];case 1:return r.sent(),[2,this._applyEdits(e)]}}))}))},e.prototype.queryFeatures=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQuery(e,t.signal)]}))}))},e.prototype.queryFeatureCount=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForCount(e,t.signal)]}))}))},e.prototype.queryObjectIds=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForIds(e,t.signal)]}))}))},e.prototype.queryExtent=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForExtent(e,t.signal)]}))}))},e.prototype._loadInitialFeatures=function(e,t){for(var r=this._queryEngine,n=r.featureStore,i=r.objectIdField,s=[],o=0,u=t;o<u.length;o++){var a=u[o],l=this._createDefaultAttributes(),d=g.mixAttributes(this._fieldsIndex,this._requiredFields,l,a.attributes,!0,e.warnings);d?e.featureErrors.push(d):(this._assignObjectId(l,a.attributes,!0),a.attributes=l,a.objectId=l[i],s.push(a))}if(n.addMany(s),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){var c=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[c.start,c.end]}return e},e.prototype._applyEdits=function(e){var t=e.adds,r=e.updates,n=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),r&&r.length&&this._applyUpdateEdits(i,r),n&&n.length){for(var s=0,o=n;s<o.length;s++)i.deleteResults.push(g.createFeatureEditSuccessResult(o[s]));this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:i}},e.prototype._applyAddEdits=function(e,t){for(var r=e.addResults,n=this._queryEngine,i=n.geometryType,s=n.hasM,o=n.hasZ,u=n.objectIdField,l=n.spatialReference,c=n.featureStore,f=[],y=0,h=t;y<h.length;y++){var m=h[y];if(m.geometry&&i!==a.getJsonType(m.geometry))r.push(g.createFeatureEditErrorResult("Incorrect geometry type."));else{var v=this._createDefaultAttributes(),b=g.mixAttributes(this._fieldsIndex,this._requiredFields,v,m.attributes);b?r.push(b):(this._assignObjectId(v,m.attributes),m.attributes=v,null!=m.uid&&(e.uidToObjectId[m.uid]=m.attributes[u]),m.geometry&&(m.geometry=p.project(g.simplify(m.geometry,l),m.geometry.spatialReference,l)),f.push(m),r.push(g.createFeatureEditSuccessResult(m.attributes[u])))}}c.addMany(d.convertFromFeatures([],f,i,o,s,u))},e.prototype._applyUpdateEdits=function(e,t){for(var r=e.updateResults,n=this._queryEngine,i=n.geometryType,s=n.hasM,o=n.hasZ,u=n.objectIdField,l=n.spatialReference,c=n.featureStore,f=0,y=t;f<y.length;f++){var h=y[f],m=h.attributes,v=h.geometry,b=m&&m[u];if(null!=b)if(c.has(b)){var F=d.convertToFeature(c.getFeature(b),i,o,s);if(v){if(i!==a.getJsonType(v)){r.push(g.createFeatureEditErrorResult("Incorrect geometry type."));continue}F.geometry=p.project(g.simplify(v,l),v.spatialReference,l)}if(m){var I=g.mixAttributes(this._fieldsIndex,this._requiredFields,F.attributes,m);if(I){r.push(I);continue}}c.add(d.convertFromFeature(F,i,o,s,u)),r.push(g.createFeatureEditSuccessResult(b))}else r.push(g.createFeatureEditErrorResult("Feature with object id "+b+" missing"));else r.push(g.createFeatureEditErrorResult("Identifier field "+u+" missing"))}},e.prototype._assignObjectId=function(e,t,r){void 0===r&&(r=!1);var n=this._queryEngine.objectIdField;e[n]=r&&isFinite(t[n])?t[n]:this._nextObjectId++},e.prototype._checkProjection=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,p.checkProjectionSupport(l.WGS84,e)];case 1:return t.sent(),[3,3];case 2:throw t.sent(),new o("geojson-layer","Projection not supported");case 3:return[2]}}))}))},e}();t.default=I}).apply(null,n))||(e.exports=i)}}]);