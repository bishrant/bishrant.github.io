(function(){(this||window).webpackJsonp.registerAbsMids({"arcgis-js-api/core/libs/gl-matrix-2/vec4":"2fXB","arcgis-js-api/views/2d/layers/features/processors/BaseProcessor":"68TM","arcgis-js-api/layers/OpenStreetMapLayer":"793k","arcgis-js-api/layers/BaseTileLayer":"8rsy","arcgis-js-api/views/2d/layers/BitmapTileLayerView2D":"APHm","arcgis-js-api/core/number":"AcGV","arcgis-js-api/tasks/support/GPMessage":"EEGM","arcgis-js-api/core/MultiOriginJSONSupport":"EUqE","arcgis-js-api/layers/support/commonProperties":"EtsK","arcgis-js-api/layers/mixins/OperationalLayer":"FEX1","arcgis-js-api/layers/support/lazyLayerLoader":"FayN","arcgis-js-api/layers/ElevationLayer":"GAgw","arcgis-js-api/views/2d/layers/BitmapLayerView2D":"H2Y5","arcgis-js-api/layers/GeoRSSLayer":"Hpgp","arcgis-js-api/layers/support/kmlUtils":"N3Jt","arcgis-js-api/views/2d/viewStateUtils":"OQ/g","arcgis-js-api/views/2d/layers/features/tileRenderers/BaseTileRenderer":"Rt18","arcgis-js-api/layers/support/LercWorker":"S+mV","arcgis-js-api/tasks/mixins/NAServiceDescription":"SA66","esri/views/draw/support/input/GraphicMoverEvents":"TD84","arcgis-js-api/layers/BingMapsLayer":"V7mb","arcgis-js-api/tasks/support/NAMessage":"VIp5","arcgis-js-api/layers/support/ExportImageParameters":"VTDq","arcgis-js-api/portal/support/portalItemUtils":"WYOF","arcgis-js-api/layers/TileLayer":"WiXY","arcgis-js-api/layers/support/rasterDatasets/RawBlockCache":"XOvD","arcgis-js-api/layers/WebTileLayer":"a2fw","arcgis-js-api/core/queryUtils":"a4MF","arcgis-js-api/layers/support/KMLSublayer":"bIi9","arcgis-js-api/layers/MapImageLayer":"d+WR","arcgis-js-api/layers/KMLLayer":"hPxN","esri/views/draw/support/GraphicMover":"i6zL","arcgis-js-api/layers/graphics/sources/support/sourceUtils":"jJpZ","arcgis-js-api/layers/GroupLayer":"lAGb","arcgis-js-api/tasks/support/DirectionsFeatureSet":"mEoI","arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper":"mnow","arcgis-js-api/core/accessorSupport/MultiOriginStore":"rU+N","esri/views/draw/support/drawUtils":"tJCi","arcgis-js-api/portal/support/portalLayers":"uLAD","arcgis-js-api/views/2d/layers/support/ExportStrategy":"wke2","arcgis-js-api/layers/support/WMTSLayerInfo":"zBTX"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2fXB":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("bH65")],void 0===(n=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=r}).apply(null,i))||(e.exports=n)},"33yf":function(e,t){function r(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}t.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:process.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o.charAt(0))}return(t?"/":"")+(e=r(i(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===n(e,-1);return(e=r(i(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=i(e.split("/")),o=i(r.split("/")),a=Math.min(n.length,o.length),s=a,l=0;l<a;l++)if(n[l]!==o[l]){s=l;break}var p=[];for(l=s;l<n.length;l++)p.push("..");return(p=p.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,n=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!n){i=o;break}}else n=!1;return-1===i?r?"/":".":r&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,i=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){r=t+1;break}}else-1===i&&(n=!1,i=t+1);return-1===i?"":e.slice(r,i)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,i=-1,n=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===i&&(n=!1,i=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!n){r=a+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===r+1?"":e.slice(t,i)};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}},"68TM":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("7MDj"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initialize=function(){},t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null},enumerable:!0,configurable:!0}),i([s.property({readOnly:!0})],t.prototype,"supportsTileUpdates",null),i([s.property({constructOnly:!0})],t.prototype,"remoteClient",void 0),i([s.property({constructOnly:!0})],t.prototype,"service",void 0),i([s.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],t.prototype,"spatialReference",null),i([s.property({constructOnly:!0})],t.prototype,"tileInfo",void 0),i([s.property({constructOnly:!0})],t.prototype,"tileStore",void 0),i([s.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],t)}(s.declared(a.HandleOwner));t.default=l}).apply(null,i))||(e.exports=n)},"793k":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("TMur"),r("Vx27"),r("a2fw"),r("pMLx"),r("QmTF")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p){return function(e){function t(){var t=e.call(this)||this;return t.portalItem=null,t.isReference=null,t.subDomains=["a","b","c"],t.fullExtent=new o.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,o.SpatialReference.WebMercator),t.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",t.operationalLayerType="OpenStreetMap",t.type="open-street-map",t.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA",t}return i(t,e),Object.defineProperty(t.prototype,"refreshInterval",{get:function(){return 0},enumerable:!0,configurable:!0}),n([a.property({type:p,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"portalItem",void 0),n([a.property({type:Boolean,json:{read:!1,write:!1}})],t.prototype,"isReference",void 0),n([a.property({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"refreshInterval",null),n([a.property({type:l,json:{write:!1}})],t.prototype,"tileInfo",void 0),n([a.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n([a.property({readOnly:!0,json:{read:!1,write:!1}})],t.prototype,"subDomains",void 0),n([a.property({readOnly:!0,json:{read:!1,write:!1}})],t.prototype,"fullExtent",void 0),n([a.property({readOnly:!0,json:{read:!1,write:!1}})],t.prototype,"urlTemplate",void 0),n([a.property({type:["OpenStreetMap"]})],t.prototype,"operationalLayerType",void 0),n([a.property({json:{read:!1}})],t.prototype,"type",void 0),n([a.property({json:{read:!1,write:!1}})],t.prototype,"copyright",void 0),n([a.property({json:{read:!1,write:!1}})],t.prototype,"wmtsInfo",void 0),n([a.subclass("esri.layers.OpenStreetMapLayer")],t)}(a.declared(s))}).apply(null,i))||(e.exports=n)},"8rsy":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("zp6E"),r("ma1f"),r("Vx27"),r("N7S/"),r("Z4y+"),r("lRq4"),r("0RER"),r("WaJo"),r("OXmT"),r("pMLx")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v){var g={id:"0/0/0",level:0,row:0,col:0,extent:null};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileInfo=v.create({spatialReference:c.WebMercator,size:256}),t.type="base-tile",t.fullExtent=new u(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,c.WebMercator),t.spatialReference=c.WebMercator,t}return i(t,e),t.prototype.getTileBounds=function(e,t,r,i){var n=i||y.create();return g.level=e,g.row=t,g.col=r,g.extent=n,this.tileInfo.updateTileInfo(g),g.extent=null,n},t.prototype.fetchTile=function(e,t,r,i){void 0===i&&(i={});var n=i.signal,o=i.timestamp,a=this.getTileUrl(e,t,r),l={responseType:"image",signal:n};return null!=o&&(l.query={_ts:i.timestamp}),s(a,l).then((function(e){return e.data}))},t.prototype.getTileUrl=function(){throw new l("basetilelayer:gettileurl-not-implemented","getTileUrl() is not implemented")},n([p.property({type:v})],t.prototype,"tileInfo",void 0),n([p.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n([p.property({readOnly:!0,value:"base-tile"})],t.prototype,"type",void 0),n([p.property()],t.prototype,"fullExtent",void 0),n([p.property()],t.prototype,"spatialReference",void 0),n([p.subclass("esri.layers.BaseTileLayer")],t)}(p.declared(h.ScaleRangeLayer(f.RefreshableLayer(d))))}).apply(null,i))||(e.exports=n)},APHm:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("Vx27"),r("DvfX"),r("1Mg+")],void 0===(n=(function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.BitmapTileLayerView2D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=new a.Container,t}return i(t,e),t.prototype.attach=function(){var e=this;this.view.timeline.record(this.layer.title+" (BitmapTileLayer) Attach"),this._bitmapView=new o.BitmapTileContainer(this._tileInfoView,this.clips),this.handles.add(this.clips.on("change",(function(){return e._bitmapView.setClips(e.clips)})),"watchClips"),this.container.addChild(this._bitmapView)},t.prototype.detach=function(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren(),this.handles.remove("watchClips")},r([n.subclass("esri.views.2d.layers.BitmapTileLayerView2D")],t)}(n.declared(e))}}).apply(null,i))||(e.exports=n)},AcGV:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("nRUF"),r("+PwV")],void 0===(n=(function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function a(e){e||(e=n.getLocale());var t=e in o;if(!t){var r=e.split("-");r.length>1&&r[0]in o&&(e=r[0],t=!0),t||(e="en")}var i=o[e],a=i[2];return{decimal:i[0],group:i[1],pattern:void 0===a?"#,##0.###":a}}t.getCustoms=a,t.format=function(e,t){var n=a((t=r({},t)).locale);t.customs=n;var o=t.pattern||n.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){var n=(r=r||{}).customs.group,o=r.customs.decimal,a=t.split(";"),l=a[0];if(-1!==(t=a[e<0?1:0]||"-"+l).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}var p=s,u=l.match(p);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(p,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);var n=t.split("."),o="string"==typeof r.places&&r.places.indexOf(","),a=r.places;o?a=r.places.substring(o+1):a>=0||(a=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(a))));var s=String(Math.abs(e)).split("."),l=s[1]||"";if(n[1]||r.places){o&&(r.places=r.places.substring(0,o));var p=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;p>l.length&&(s[1]=i.padEnd(l,Number(p),"0")),a<l.length&&(s[1]=l.substr(0,Number(a)))}else s[1]&&s.pop();var u=n[0].replace(",",""),c=u.indexOf("0");-1!==c&&((c=u.length-c)>s[0].length&&(s[0]=i.padStart(s[0],c,"0")),-1===u.indexOf("#")&&(s[0]=s[0].substr(s[0].length-c)));var y,d,f=n[0].lastIndexOf(",");if(-1!==f){y=n[0].length-f-1;var h=n[0].substr(0,f);-1!==(f=h.lastIndexOf(","))&&(d=h.length-f-1)}for(var v=[],g=s[0];g;){var m=g.length-y;v.push(m>0?g.substr(m):g),g=m>0?g.slice(0,m):"",d&&(y=d,d=void 0)}return s[0]=v.reverse().join(r.group||","),s.join(r.decimal||".")}(e,u[0],{decimal:o,group:n,places:r.places,round:r.round}))}(e,o,t)};var s=/[#0,]*[#0](?:\.0*#*)?/;function l(e){var t=a((e=e||{}).locale),r=e.pattern||t.pattern,n=t.group,o=t.decimal,l=1;if(-1!==r.indexOf("%"))l/=100;else if(-1!==r.indexOf("\u2030"))l/=1e3;else if(-1!==r.indexOf("\xa4"))throw new Error("currency notation not supported");var c=r.split(";");return 1===c.length&&c.push("-"+c[0]),{regexp:u(c,(function(t){return(t="(?:"+i.escapeRegExpString(t,".")+")").replace(s,(function(t){var r={signed:!1,separator:e.strict?n:[n,""],fractional:e.fractional,decimal:o,exponent:!1},i=t.split("."),a=e.places;1===i.length&&1!==l&&(i[1]="###"),1===i.length||0===a?r.fractional=!1:(void 0===a&&(a=e.pattern?i[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(r.fractional=!0),!e.places&&a<i[1].length&&(a+=","+i[1].length),r.places=a);var s=i[0].split(",");return s.length>1&&(r.groupSize=s.pop().length,s.length>1&&(r.groupSize2=s.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=p(e),r=u(e.fractional,(function(t){var r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r}),!0),i=t+r;return r&&(i="(?:(?:"+i+")|(?:"+r+"))"),i+u(e.exponent,(function(t){return t?"([eE]"+p({signed:e.eSigned})+")":""}))}(r)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:o,factor:l}}function p(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",u(e.signed,(function(e){return e?"[-+]":""}),!0)+u(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=i.escapeRegExpString(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");var r=e.groupSize,n=e.groupSize2;if(n){var o="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+r+"})";return r-n>0?"(?:"+o+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":o}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"}),!0)}t.regexp=function(e){return l(e).regexp},t._parseInfo=l,t.parse=function(e,t){var r=l(t),i=new RegExp("^"+r.regexp+"$").exec(e);if(!i)return NaN;var n=i[1];if(!i[1]){if(!i[2])return NaN;n=i[2],r.factor*=-1}return n=n.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(n)*r.factor};var u=function(e,t,r){if(!(e instanceof Array))return t(e);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n]));return c(i.join("|"),r)},c=function(e,t){return"("+(t?"?:":"")+e+")"}}).apply(null,i))||(e.exports=n)},EEGM:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ImIS"),r("ycL1"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o,a){var s=new n.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return function(e){function t(t){var r=e.call(this,t)||this;return r.description=null,r.type=null,r}return r(t,e),i([a.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([a.property({type:String,json:{read:s.read,write:s.write}})],t.prototype,"type",void 0),i([a.subclass("esri.tasks.support.GPMessage")],t)}(a.declared(o.JSONSupport))}).apply(null,i))||(e.exports=n)},EUqE:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("Vx27"),r("rU+N"),r("ZEeX"),r("Ab+N"),r("o2T8"),r("Kg8D")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u){function c(e){return p.getProperties(e).store}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiOriginJSONMixin=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this,n=p.getProperties(i),o=n.metadatas,s=n.store,l=new a.default;return n.store=l,s.keys().forEach((function(e){l.set(e,s.get(e),0)})),Object.keys(o).forEach((function(e){n.internalGet(e)&&l.set(e,n.internalGet(e),0)})),i}return r(t,e),t.prototype.clear=function(e,t){return void 0===t&&(t="user"),c(this).delete(e,s.nameToId(t))},t.prototype.read=function(e,t){l.default(this,e,t)},t.prototype.write=function(e,t){return u.default(this,e=e||{},t),e},t.prototype.getAtOrigin=function(e,t){var r=c(this),i=s.nameToId(t);if("string"==typeof e)return r.get(e,i);var n={};return e.forEach((function(e){n[e]=r.get(e,i)})),n},t.prototype.originOf=function(e){return s.idToName(this.originIdOf(e))},t.prototype.originIdOf=function(e){return c(this).originOf(e)},t.prototype.revert=function(e,t){var r=c(this),i=s.nameToId(t),n=p.getProperties(this);("string"==typeof e?"*"===e?r.keys(i):[e]:e).forEach((function(e){n.propertyInvalidated(e),r.revert(e,i),n.propertyCommitted(e)}))},t.prototype.removeOrigin=function(e){for(var t=c(this),r=s.nameToId(e),i=0,n=t.keys(r);i<n.length;i++){var o=n[i];t.originOf(o)===r&&t.set(o,t.get(o,r),6)}},t.prototype.updateOrigin=function(e,t){var r=c(this),i=s.nameToId(t),n=this.get(e);r.delete(e),r.set(e,n,i)},i([o.subclass("esri.core.MultiOriginJSONSupport")],t)}(o.declared(e))};var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([o.subclass("esri.core.MultiOriginJSONSupport")],t)}(o.declared(t.MultiOriginJSONMixin(n)));t.MultiOriginJSONSupport=y,t.isMultiOriginJSONMixin=function(e){return e&&"getAtOrigin"in e&&"originOf"in e}}).apply(null,i))||(e.exports=n)},EtsK:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("jfWY"),r("o2T8"),r("Kg8D"),r("5ldw"),r("3fUp")],void 0===(n=(function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;n.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,i){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||o.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},i))&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,value:!0,json:{read:{source:"showLabels"},write:{target:"showLabels"}}},t.url={type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writer:i.write}}},t.legendEnabled={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}},t.elevationInfo={value:null,type:a,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}},t.readOnlyService=function(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}},t.opacity={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0}}}},t.opacityDrawingInfo=r({},t.opacity,{json:r({},t.opacity.json,{origins:{"web-document":r({},t.opacity.json.origins["web-document"],{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,r){return r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?s.transparencyToOpacity(t.layerDefinition.drawingInfo.transparency):void 0:s.transparencyToOpacity(t.drawingInfo.transparency)}}})})}).apply(null,i))||(e.exports=n)},FEX1:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ma1f"),r("qMld"),r("Vx27"),r("Ab+N"),r("Kg8D"),r("EtsK")],void 0===(n=(function(e,t,i,n,o,a,s,l,p,u){Object.defineProperty(t,"__esModule",{value:!0}),t.OperationalLayer=function(e){return function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.title="Layer",t}return i(r,e),r.prototype.writeListMode=function(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&p.willPropertyWrite(this,r,{},i))&&(t[r]=e)},r.prototype.writeTitle=function(e,t){t.title=e||"Layer"},r.prototype.writeOperationalLayerType=function(e,t){e&&(t.layerType=e)},r.prototype.read=function(e,t){var r=this,i=arguments;t&&(t.layer=this),l.readLoadable(this,e,(function(t){return r.inherited(i,[e,t])}),t)},r.prototype.write=function(e,r){if(r&&r.origin){var i=r.origin+"/"+(r.layerContainerType||"operational-layers"),n=t.supportedTypes[i],a=n&&n[this.operationalLayerType];if("write"!==a&&"readwrite"!==a)return r.messages&&r.messages.push(new o("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+i+"'",{layer:this})),null}var s=this.inherited(arguments,[e,r]),l=!!r&&!!r.messages&&!!r.messages.filter((function(e){return e instanceof o&&"web-document-write:property-required"===e.name})).length;return!this.url&&l?null:s},n([s.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],r.prototype,"id",void 0),n([s.property({json:{write:{ignoreOrigin:!0}}})],r.prototype,"listMode",void 0),n([s.writer("listMode")],r.prototype,"writeListMode",null),n([s.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],r.prototype,"title",void 0),n([s.writer("title")],r.prototype,"writeTitle",null),n([s.property({type:String,readOnly:!0,json:{write:{target:"layerType",ignoreOrigin:!0}}})],r.prototype,"operationalLayerType",void 0),n([s.writer("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),n([s.property(u.opacity)],r.prototype,"opacity",void 0),n([s.property({type:Boolean,json:{read:{source:"visibility"},write:{target:"visibility"},origins:{"web-document":{read:{source:"visibility"},write:{target:"visibility"},default:!0}}}})],r.prototype,"visible",void 0),n([s.subclass("esri.layers.mixins.OperationalLayer")],r)}(s.declared(e))},t.typeModuleMap={ArcGISFeatureLayer:function(){return a.create((function(e){return Promise.all([r.e(5),r.e(61)]).then((function(){var t=[r("Zvuv")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISImageServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(12),r.e(23)]).then((function(){var t=[r("G5N4")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISImageServiceVectorLayer:function(){return a.resolve(null)},ArcGISMapServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(8),r.e(0),r.e(83)]).then((function(){var t=[r("d+WR")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISSceneServiceLayer:function(){return a.create((function(e){return r.e(37).then((function(){var t=[r("yf9t")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISStreamLayer:function(){return a.create((function(e){return r.e(21).then((function(){var t=[r("QiYT")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISTiledElevationServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(80)]).then((function(){var t=[r("GAgw")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISTiledImageServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(8),r.e(0),r.e(30)]).then((function(){var t=[r("WiXY")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ArcGISTiledMapServiceLayer:function(){return a.create((function(e){return Promise.all([r.e(8),r.e(0),r.e(30)]).then((function(){var t=[r("WiXY")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},BingMapsAerial:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(16)]).then((function(){var t=[r("V7mb")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},BingMapsRoad:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(16)]).then((function(){var t=[r("V7mb")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},BingMapsHybrid:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(16)]).then((function(){var t=[r("V7mb")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},BuildingSceneLayer:function(){return a.create((function(e){return r.e(20).then((function(){var t=[r("gRqF")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},CSV:function(){return a.create((function(e){return Promise.all([r.e(5),r.e(24)]).then((function(){var t=[r("zwOT")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},GeoRSS:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(97)]).then((function(){var t=[r("Hpgp")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},GroupLayer:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(110)]).then((function(){var t=[r("lAGb")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},IntegratedMeshLayer:function(){return a.create((function(e){return r.e(35).then((function(){var t=[r("wehw")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},KML:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(98)]).then((function(){var t=[r("hPxN")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},OpenStreetMap:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(99)]).then((function(){var t=[r("793k")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},PointCloudLayer:function(){return a.create((function(e){return r.e(36).then((function(){var t=[r("wvIq")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},VectorTileLayer:function(){return a.create((function(e){return r.e(22).then((function(){var t=[r("UW67")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},WebTiledLayer:function(){return a.create((function(e){return Promise.all([r.e(0),r.e(100)]).then((function(){var t=[r("a2fw")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},WFS:function(){return a.resolve(null)},WMS:function(){return a.create((function(e){return r.e(26).then((function(){var t=[r("dWJG")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},RasterDataLayer:function(){return a.resolve(null)},RasterDataElevationLayer:function(){return a.resolve(null)}},t.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",BuildingSceneLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",KML:"readwrite",RasterDataLayer:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite",RasterDataElevationLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WFS:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}}).apply(null,i))||(e.exports=n)},FayN:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld")],void 0===(n=(function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={BingMapsLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(111)]).then((function(){var t=[r("V7mb")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},BuildingSceneLayer:function(){return i.create((function(e){return Promise.all([r.e(20),r.e(0)]).then((function(){var t=[r("gRqF")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},CSVLayer:function(){return i.create((function(e){return Promise.all([r.e(5),r.e(24),r.e(0)]).then((function(){var t=[r("zwOT")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ElevationLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(27)]).then((function(){var t=[r("GAgw")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},FeatureLayer:function(){return i.create((function(e){return Promise.all([r.e(5),r.e(0),r.e(60)]).then((function(){var t=[r("Zvuv")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},GroupLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(34)]).then((function(){var t=[r("lAGb")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},GeoRSSLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(93)]).then((function(){var t=[r("Hpgp")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},ImageryLayer:function(){return i.create((function(e){return Promise.all([r.e(12),r.e(23),r.e(0)]).then((function(){var t=[r("G5N4")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},IntegratedMeshLayer:function(){return i.create((function(e){return r.e(35).then((function(){var t=[r("wehw")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},KMLLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(94)]).then((function(){var t=[r("hPxN")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},MapImageLayer:function(){return i.create((function(e){return Promise.all([r.e(8),r.e(0),r.e(29)]).then((function(){var t=[r("d+WR")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},MapNotesLayer:function(){return i.create((function(e){return Promise.all([r.e(5),r.e(0),r.e(56)]).then((function(){var t=[r("2OQv")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},OpenStreetMapLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(95)]).then((function(){var t=[r("793k")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},PointCloudLayer:function(){return i.create((function(e){return r.e(36).then((function(){var t=[r("wvIq")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},RouteLayer:function(){return i.create((function(e){return Promise.all([r.e(5),r.e(0),r.e(57)]).then((function(){var t=[r("BdvN")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},SceneLayer:function(){return i.create((function(e){return r.e(37).then((function(){var t=[r("yf9t")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},StreamLayer:function(){return i.create((function(e){return Promise.all([r.e(21),r.e(0)]).then((function(){var t=[r("QiYT")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},TileImageryLayer:function(){return i.create((function(e){return Promise.all([r.e(12),r.e(0),r.e(51)]).then((function(){var t=[r("oKUA")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},TileLayer:function(){return i.create((function(e){return Promise.all([r.e(8),r.e(0),r.e(84)]).then((function(){var t=[r("WiXY")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},UnknownLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(90)]).then((function(){var t=[r("N1SI")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},UnsupportedLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(91)]).then((function(){var t=[r("9ZiH")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},VectorTileLayer:function(){return i.create((function(e){return Promise.all([r.e(22),r.e(0)]).then((function(){var t=[r("UW67")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},WebTileLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(96)]).then((function(){var t=[r("a2fw")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},WMSLayer:function(){return i.create((function(e){return Promise.all([r.e(26),r.e(0)]).then((function(){var t=[r("dWJG")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},WMTSLayer:function(){return i.create((function(e){return Promise.all([r.e(0),r.e(69)]).then((function(){var t=[r("AgRT")];e.apply(null,t)}).bind(this)).catch(r.oe)}))}}}).apply(null,i))||(e.exports=n)},GAgw:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("zp6E"),r("7bfM"),r("ma1f"),r("qsST"),r("LxLY"),r("EUqE"),r("qMld"),r("jfWY"),r("Vx27"),r("MFVu"),r("0RER"),r("WhPF"),r("2fnV"),r("FEX1"),r("QJ8R"),r("EtsK"),r("S+mV")],void 0===(n=(function(e,t,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g,m,b,w,S,x,M,O){var T=c.getLogger("esri.layers.ElevationLayer");return function(e){function t(t){var r=e.call(this,t)||this;return r.copyright=null,r.heightModelInfo=null,r.path=null,r.opacity=1,r.operationalLayerType="ArcGISTiledElevationServiceLayer",r.sourceJSON=null,r.type="elevation",r.url=null,r.version=null,r._lercWorker=O.acquireInstance(),r}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.destroy=function(){O.releaseInstance(this._lercWorker),this._lercWorker=null},Object.defineProperty(t.prototype,"minScale",{get:function(){},set:function(e){this.constructed&&T.warn(this.declaredClass+".minScale support has been removed (since 4.5)")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScale",{get:function(){},set:function(e){this.constructed&&T.warn(this.declaredClass+".maxScale support has been removed (since 4.5)")},enumerable:!0,configurable:!0}),t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=9.3),r},t.prototype.load=function(e){var t=this,r=y.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new u("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).then((function(){return t._fetchImageService(r)}),(function(){return t._fetchImageService(r)}))),f.resolve(this)},t.prototype.fetchTile=function(e,t,r,i){var n=this;void 0===i&&(i={}),null!=i&&"number"==typeof i&&(p.deprecated(T,"Passing 'noDataValue' directly as a parameter",{replacement:"use { noDataValue } options object instead",version:"4.12"}),i={noDataValue:i});var o={responseType:"array-buffer",signal:i.signal},a={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then((function(){return n._fetchTileAvailability(e,t,r,i)})).then((function(){return l(n.getTileUrl(e,t,r),o)})).then((function(e){return n._lercWorker.decode(e.data,a,i.signal)})).then((function(e){return{values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue}}))},t.prototype.getTileUrl=function(e,t,r){var n=h.objectToQuery(i({},this.parsedUrl.query,{blankTile:!(!this.tilemapCache&&this.supportsBlankTile)&&null}));return this.parsedUrl.path+"/tile/"+e+"/"+t+"/"+r+(n?"?"+n:"")},t.prototype.queryElevation=function(e,t){var r=this;return this._importElevationQuery().then((function(i){return(new i.ElevationQuery).query(r,e,t)}))},t.prototype.createElevationSampler=function(e,t){var r=this;return this._importElevationQuery().then((function(i){return(new i.ElevationQuery).createSampler(r,e,t)}))},t.prototype._fetchTileAvailability=function(e,t,r,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r,i):f.resolve("unknown")},t.prototype._fetchImageService=function(e){return s(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:return this.sourceJSON?[2,this.sourceJSON]:(t={query:i({f:"json"},this.parsedUrl.query),responseType:"json",signal:e},[4,l(this.parsedUrl.path,t)]);case 1:return(r=n.sent()).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r.data,this.read(r.data,{origin:"service",url:this.parsedUrl}),[2]}}))}))},t.prototype._importElevationQuery=function(){return f.create((function(e){r.e(32).then((function(){var t=[r("T16p")];e.apply(null,t)}).bind(this)).catch(r.oe)}))},o([v.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),o([v.property({readOnly:!0,type:g})],t.prototype,"heightModelInfo",void 0),o([v.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),o([v.property({type:["show","hide"]})],t.prototype,"listMode",void 0),o([v.property({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"minScale",null),o([v.property({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"maxScale",null),o([v.property({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),o([v.property({type:["ArcGISTiledElevationServiceLayer"]})],t.prototype,"operationalLayerType",void 0),o([v.property()],t.prototype,"sourceJSON",void 0),o([v.property({json:{read:!1},value:"elevation",readOnly:!0})],t.prototype,"type",void 0),o([v.property(M.url)],t.prototype,"url",void 0),o([v.property()],t.prototype,"version",void 0),o([v.reader("version",["currentVersion"])],t.prototype,"readVersion",null),o([v.subclass("esri.layers.ElevationLayer")],t)}(v.declared(b.ArcGISCachedService(w.ArcGISService(S.OperationalLayer(x.PortalLayer(d.MultiOriginJSONMixin(m)))))))}).apply(null,i))||(e.exports=n)},H2Y5:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("Vx27"),r("bOAX")],void 0===(n=(function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.BitmapLayerView2D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=new o.BitmapContainer(t.clips),t}return i(t,e),t.prototype.initialize=function(){var e=this;this.handles.add(this.clips.on("change",(function(){return e.container.setClips(e.clips)})))},r([n.subclass("esri.views.2d.layers.BitmapLayerView2D")],t)}(n.declared(e))}}).apply(null,i))||(e.exports=n)},Hpgp:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("0J3i"),r("zp6E"),r("+AWJ"),r("LxLY"),r("EUqE"),r("qMld"),r("Vx27"),r("0RER"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("EtsK"),r("x7Wq"),r("CF4u"),r("HqJa")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g,m,b,w,S,x){return function(e){function t(t,r){var i=e.call(this,t)||this;return i.description=null,i.title=null,i.lineSymbol=null,i.pointSymbol=null,i.polygonSymbol=null,i.outSpatialReference=null,i.url=null,i.type="geo-rss",i}return i(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},t.prototype.readFeatureCollections=function(e,t){return t.featureCollection.layers.forEach((function(e){var t=e.layerDefinition.drawingInfo.renderer.symbol;t&&"esriSFS"===t.type&&t.outline&&-1!==t.outline.style.indexOf("esriSFS")&&(t.outline.style="esriSLSSolid")})),t.featureCollection.layers},t.prototype.load=function(e){var t=this,r=u.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),y.resolve(this)},t.prototype._fetchService=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,l(s.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:this.outSpatialReference?JSON.stringify(this.outSpatialReference.toJSON()):void 0},signal:e})];case 1:return t=r.sent().data,this.read(t,{origin:"service"}),[2]}}))}))},n([d.property()],t.prototype,"description",void 0),n([d.property()],t.prototype,"title",void 0),n([d.property()],t.prototype,"featureCollections",void 0),n([d.reader("service","featureCollections",["featureCollection.layers"])],t.prototype,"readFeatureCollections",null),n([d.property({type:S})],t.prototype,"lineSymbol",void 0),n([d.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n([d.property({types:p.symbolTypes,json:{read:x.read}})],t.prototype,"pointSymbol",void 0),n([d.property({type:w})],t.prototype,"polygonSymbol",void 0),n([d.property()],t.prototype,"outSpatialReference",void 0),n([d.property(b.url)],t.prototype,"url",void 0),n([d.property({readOnly:!0,json:{read:!1},value:"geo-rss"})],t.prototype,"type",void 0),n([d.subclass("esri.layers.GeoRSSLayer")],t)}(d.declared(g.RefreshableLayer(h.OperationalLayer(v.PortalLayer(m.ScaleRangeLayer(c.MultiOriginJSONMixin(f)))))))}).apply(null,i))||(e.exports=n)},N3Jt:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("2Atf"),r("0J3i"),r("ifLZ"),r("zp6E"),r("rg9i"),r("Z4y+"),r("WRgd"),r("hBh5"),r("hz/Y"),r("w1v0")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d){Object.defineProperty(t,"__esModule",{value:!0});var f={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function h(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function v(e){for(var t=u.create(),r=u.create(u.NEGATIVE_INFINITY),i=0,n=e;i<n.length;i++){var o=n[i];if(o.polygons&&o.polygons.featureSet&&o.polygons.featureSet.features)for(var a=0,s=o.polygons.featureSet.features;a<s.length;a++){var l=s[a];c.getBoundsXYZ(t,l.geometry),u.expand(r,t,r)}if(o.polylines&&o.polylines.featureSet&&o.polylines.featureSet.features)for(var y=0,d=o.polylines.featureSet.features;y<d.length;y++)c.getBoundsXYZ(t,(l=d[y]).geometry),u.expand(r,t,r);if(o.points&&o.points.featureSet&&o.points.featureSet.features)for(var f=0,h=o.points.featureSet.features;f<h.length;f++)c.getBoundsXYZ(t,(l=h[f]).geometry),u.expand(r,t,r);if(o.mapImages)for(var v=0,g=o.mapImages;v<g.length;v++)c.getBoundsXYZ(t,(l=g[v]).extent),u.expand(r,t,r)}return u.equals(r,u.NEGATIVE_INFINITY)?null:{xmin:r[0],ymin:r[1],zmin:r[2],xmax:r[3],ymax:r[4],zmax:r[5],spatialReference:p.WGS84}}t.parseKML=function(e){var t=e.folders||[],r=t.slice(),i=new Map,n=new Map,o=new Map,a=new Map,s=new Map,p={esriGeometryPoint:n,esriGeometryPolyline:o,esriGeometryPolygon:a};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=l.clone(e);t.featureSet.features=[];var r=e.featureSet.geometryType;i.set(r,t);var s=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?h(n,s,e.featureSet.features):"esriGeometryPolyline"===r?h(o,s,e.featureSet.features):"esriGeometryPolygon"===r&&h(a,s,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){s.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(i){var n=function(e,t,r){var i=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return i&&(i.parentFolderId=t,i.networkLink=i),i}(i,t.id,e.networkLinks);n&&r.push(n)}))})),r.forEach((function(e){e.featureInfos&&(e.points=l.clone(i.get("esriGeometryPoint")),e.polylines=l.clone(i.get("esriGeometryPolyline")),e.polygons=l.clone(i.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map((function(t){switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var r=p[t.type].get(t.id);r&&e[f[t.type]].featureSet.features.push(r);break;case"GroundOverlay":var i=s.get(t.id);i&&e.mapImages.push(i)}})),e.fullExtent=v([e]))}));var u=v(r);return{folders:t,sublayers:r,extent:u}},t.fetchService=function(e,t,r,i){return s(o.kmlServiceUrl,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:i})},t.sublayersFromJSON=function(e,t,r,i){void 0===r&&(r=null),void 0===i&&(i=[]);var n=[],o={},a=t.sublayers,s=t.folders.map((function(e){return e.id}));return a.forEach((function(t){var a=new e;if(r?a.read(t,r):a.read(t),i.length&&s.indexOf(a.id)>-1&&(a.visible=-1!==i.indexOf(a.id)),o[t.id]=a,null!=t.parentFolderId&&-1!==t.parentFolderId){var l=o[t.parentFolderId];l.sublayers||(l.sublayers=[]),l.sublayers.unshift(a)}else n.unshift(a)})),n},t.getGraphics=function(e){return i(this,void 0,void 0,(function(){var t,i,n,o,s,l,p,u,c;return r(this,(function(r){switch(r.label){case 0:t=d.fromJSON(e.featureSet),i=t.features,n=y.fromJSON(e.layerDefinition.drawingInfo.renderer),o=a.fromJSON(e.popupInfo),s=[],l=0,p=i,r.label=1;case 1:return l<p.length?[4,n.getSymbolAsync(u=p[l])]:[3,4];case 2:c=r.sent(),u.symbol=c,u.popupTemplate=o,u.visible=!!u.attributes.visibility,s.push(u),r.label=3;case 3:return l++,[3,1];case 4:return[2,s]}}))}))},t.computeExtent=v}).apply(null,i))||(e.exports=n)},"OQ/g":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Math.PI/180;t.snapToPixel=function(e,t,r){var i=r.resolution,n=r.size;return e[0]=i*(Math.round(t[0]/i)+n[0]%2*.5),e[1]=i*(Math.round(t[1]/i)+n[1]%2*.5),e},t.getOuterSize=function(e,t){var i=t.rotation*r,n=Math.abs(Math.cos(i)),o=Math.abs(Math.sin(i)),a=t.size,s=a[0],l=a[1];return e[0]=Math.round(l*o+s*n),e[1]=Math.round(l*n+s*o),e},t.getBBox=function(e,t,r,i){var n=t[0],o=t[1],a=i[0],s=i[1],l=.5*r;return e[0]=n-l*a,e[1]=o-l*s,e[2]=n+l*a,e[3]=o+l*s,e},t.bboxIntersects=function(e,t){return!(e[0]>t[2]||e[2]<t[0]||e[1]>t[3]||e[3]<t[1])}}).apply(null,i))||(e.exports=n)},Po9p:function(e,t){},Rt18:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("7MDj"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this,t)||this;return r.tiles=new Map,r}return r(t,e),t.prototype.destroy=function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null},Object.defineProperty(t.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0}),t.prototype.acquireTile=function(e){var t=this,r=this.createTile(e);return r.once("isReady",(function(){return t.notifyChange("updating")})),this.tiles.set(e.id,r),r},t.prototype.lockAttributeTextureUpload=function(){},t.prototype.unlockAttributeTextureUpload=function(){},t.prototype.forceAttributeTextureUpload=function(){},t.prototype.forEachTile=function(e){this.tiles.forEach(e)},t.prototype.releaseTile=function(e){this.tiles.delete(e.key.id),this.disposeTile(e)},t.prototype.isUpdating=function(){var e=!0;return this.tiles.forEach((function(t){e=e&&t.isReady})),!e},t.prototype.setHighlight=function(){},t.prototype.invalidateLabels=function(){},t.prototype.requestUpdate=function(){this.layerView.requestUpdate()},i([o.property()],t.prototype,"layer",void 0),i([o.property()],t.prototype,"layerView",void 0),i([o.property()],t.prototype,"tileInfoView",void 0),i([o.property()],t.prototype,"updating",null),i([o.subclass("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],t)}(o.declared(n.HandleOwner));t.default=a}).apply(null,i))||(e.exports=n)},"S+mV":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("xhoE"),r("qMld"),r("8V7H")],void 0===(n=(function(e,t,i,n,o,a){function s(){return o.create((function(e){return r.e(114).then((function(){var t=[r("Rc7o")];e.apply(null,t)}).bind(this)).catch(r.oe)}))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){}return e.prototype._decode=function(e){return s().then((function(t){var r=(0,t.decode)(e.buffer,e.options);return{result:r,transferList:[r.pixelData.buffer]}}))},e}(),p=function(e){function t(t){var r=e.call(this)||this;return r.scheduler=t,r._threadInitialized=o.create((function(e){a.open("LercWorker",{strategy:"dedicated",scheduler:t}).then((function(t){void 0===r._thread?(r._thread=t,e()):(t.close(),e())}),(function(){return e()}))})),r}return n(t,e),t.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},Object.defineProperty(t.prototype,"test",{get:function(){return{threadInitialized:this._threadInitialized}},enumerable:!0,configurable:!0}),t.prototype.decode=function(e,t,r){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_decode",{buffer:e,options:t},{transferList:[e],signal:r}):s().then((function(i){var n=i.decode;return o.throwIfAborted(r),n(e,t)})):o.resolve(null)},t}(l);t.LercWorkerMaster=p;var u=new Map;t.acquireInstance=function(e){var t=u.get(e);return t||(t={instance:new p(e),ref:0},u.set(e,t)),++t.ref,t.instance},t.releaseInstance=function(e){if(null!=e){var t=e.scheduler,r=u.get(t);r&&--r.ref<=0&&(r.instance.destroy(),u.delete(t))}},t.default=function(){return new l}}).apply(null,i))||(e.exports=n)},SA66:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("Q2wQ"),r("HZ3d"),r("zp6E"),r("ma1f"),r("LxLY"),r("TTKK"),r("jfWY"),r("Vx27"),r("FPqO")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y){Object.defineProperty(t,"__esModule",{value:!0}),t.NAServiceDescriptionMixin=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getServiceDescription=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),[2,this._serviceDescriptionPromise]}))}))},t.prototype._fetchServiceDescription=function(){return o(this,void 0,void 0,(function(){var e,t,r,i,l;return n(this,(function(c){switch(c.label){case 0:if(!this.url||!this.parsedUrl)throw new s("network-service:missing-url","Url to Network service is missing");return[4,a(e=this.url,{query:{f:"json"}})];case 1:for((t=c.sent().data).supportedTravelModes||(t.supportedTravelModes=[]),r=0;r<t.supportedTravelModes.length;r++)t.supportedTravelModes[r].id||(t.supportedTravelModes[r].id=t.supportedTravelModes[r].itemId);return[4,t.currentVersion>=10.4?function(e){return o(this,void 0,void 0,(function(){var t,r;return n(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}})];case 1:return[2,{supportedTravelModes:(t=i.sent().data).supportedTravelModes,defaultTravelMode:t.defaultTravelMode}];case 2:throw r=i.sent(),new s("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:r});case 3:return[2]}}))}))}(e):function(e){return o(this,void 0,void 0,(function(){var t,r,i,o,s,l,c,y,d,f,h,v,g,m,b;return n(this,(function(n){switch(n.label){case 0:return[4,a(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json"}})];case 1:return(t=n.sent().data)&&t.owningSystemUrl?[4,a((e=t.owningSystemUrl)+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}})]:[2,{supportedTravelModes:[],defaultTravelMode:null}];case 2:return r=n.sent().data,(i=p.getDeepValue("helperServices.routingUtilities.url",r))?(o=u.urlToObject(e),s=/\/solveClosestFacility$/.test(o.path)?"Route":/\/solveClosestFacility$/.test(o.path)?"ClosestFacility":"ServiceAreas",[4,a(i+("/"===i[i.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:s}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 3:if(l=n.sent(),c=[],y=null,l&&l.data&&l.data.results&&l.data.results.length)for(d=0,f=l.data.results;d<f.length;d++)if("supportedTravelModes"===(h=f[d]).paramName){if(h.value&&h.value.features)for(v=0,g=h.value.features;v<g.length;v++)(m=g[v].attributes)&&(b=JSON.parse(m.TravelMode),c.push(b))}else"defaultTravelMode"===h.paramName&&(y=h.value);return[2,{supportedTravelModes:c,defaultTravelMode:y}]}}))}))}(e)];case 2:return i=c.sent(),l=i.supportedTravelModes,t.defaultTravelMode=i.defaultTravelMode,t.supportedTravelModes=l,[2,t]}}))}))},t.prototype._isInputGeometryZAware=function(e,t){for(var r=0;r<t.length;r++){var i=e[t[r]];if(i&&i.length)for(var n=0,o=i;n<o.length;n++){var a=o[n];if(l.isSome(a)&&a.hasZ)return!0}}return!1},t.prototype._dropZValuesOffInputGeometry=function(e,t){for(var r=0;r<t.length;r++){var i=e[t[r]];if(i&&i.length)for(var n=0,o=i;n<o.length;n++)o[n].z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")},r([c.subclass("esri.tasks.mixins.NAServiceDescription")],t)}(c.declared(e))};var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([c.subclass("esri.tasks.mixins.NAServiceDescription")],t)}(c.declared(t.NAServiceDescriptionMixin(y)));t.NAServiceDescription=d}).apply(null,i))||(e.exports=n)},TD84:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicClickEvent=function(e,t,r,i,n){this.graphic=e,this.index=t,this.x=r,this.y=i,this.viewEvent=n,this.type="graphic-click"},t.GraphicDoubleClickEvent=function(e,t,r,i,n){this.graphic=e,this.index=t,this.x=r,this.y=i,this.viewEvent=n,this.type="graphic-double-click"};var r=function(){function e(e,t,r,i,n,o,a,s,l,p){this.graphic=e,this.allGraphics=t,this.index=r,this.x=i,this.y=n,this.dx=o,this.dy=a,this.totalDx=s,this.totalDy=l,this.viewEvent=p,this.defaultPrevented=!1,this.type="graphic-move-start"}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e}();t.GraphicMoveStartEvent=r;var i=function(){function e(e,t,r,i,n,o,a,s,l,p){this.graphic=e,this.allGraphics=t,this.index=r,this.x=i,this.y=n,this.dx=o,this.dy=a,this.totalDx=s,this.totalDy=l,this.viewEvent=p,this.defaultPrevented=!1,this.type="graphic-move"}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e}();t.GraphicMoveEvent=i;var n=function(){function e(e,t,r,i,n,o,a,s,l,p){this.graphic=e,this.allGraphics=t,this.index=r,this.x=i,this.y=n,this.dx=o,this.dy=a,this.totalDx=s,this.totalDy=l,this.viewEvent=p,this.defaultPrevented=!1,this.type="graphic-move-stop"}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e}();t.GraphicMoveStopEvent=n,t.GraphicPointerOverEvent=function(e,t,r,i,n){this.graphic=e,this.index=t,this.x=r,this.y=i,this.viewEvent=n,this.type="graphic-pointer-over"},t.GraphicPointerOutEvent=function(e,t,r,i,n){this.graphic=e,this.index=t,this.x=r,this.y=i,this.viewEvent=n,this.type="graphic-pointer-out"},t.GraphicPointerDownEvent=function(e,t,r,i,n){this.graphic=e,this.index=t,this.x=r,this.y=i,this.viewEvent=n,this.type="graphic-pointer-down"},t.GraphicPointerUpEvent=function(e,t,r,i,n){this.graphic=e,this.index=t,this.x=r,this.y=i,this.viewEvent=n,this.type="graphic-pointer-up"}}).apply(null,i))||(e.exports=n)},V7mb:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("zp6E"),r("ma1f"),r("ImIS"),r("LxLY"),r("EUqE"),r("qMld"),r("Vx27"),r("Z4y+"),r("8rsy"),r("FEX1"),r("pMLx")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v){var g=new l.default({BingMapsAerial:"aerial",BingMapsRoad:"road",BingMapsHybrid:"hybrid"});return function(e){function t(t){var r=e.call(this,t)||this;return r.type="bing-maps",r.tileInfo=new v({size:[256,256],dpi:96,origin:{x:-20037508.342787,y:20037508.342787,spatialReference:d.WebMercator},spatialReference:d.WebMercator,lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.1492910708238085,scale:564.248588}]}),r.key=null,r.style="road",r.culture="en-US",r.region=null,r.portalUrl=null,r.hasAttributionData=!0,r}return r(t,e),Object.defineProperty(t.prototype,"bingMetadata",{get:function(){return this._get("bingMetadata")},set:function(e){this._set("bingMetadata",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyright",{get:function(){return p.isSome(this.bingMetadata)?this.bingMetadata.copyright:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bingLogo",{get:function(){return p.isSome(this.bingMetadata)?this.bingMetadata.brandLogoUri:null},enumerable:!0,configurable:!0}),t.prototype.load=function(e){var t=this;return this.addResolvingPromise(this.key?this._getMetadata():this.portalUrl?this._getPortalBingKey().then((function(){return t._getMetadata()})):c.reject(new s("bingmapslayer:load","Bing layer must have bing key."))),c.resolve(this)},t.prototype.getTileUrl=function(e,t,r){if(!this.loaded||p.isNone(this.bingMetadata))return null;var i=this.bingMetadata.resourceSets[0].resources[0],n=i.imageUrlSubdomains[t%i.imageUrlSubdomains.length],o=this._getQuadKey(e,t,r);return i.imageUrl.replace("{subdomain}",n).replace("{quadkey}",o)},t.prototype.fetchAttributionData=function(){return o(this,void 0,void 0,(function(){var e=this;return n(this,(function(t){return[2,this.load().then((function(){return p.isNone(e.bingMetadata)?null:{contributors:e.bingMetadata.resourceSets[0].resources[0].imageryProviders.map((function(e){return{attribution:e.attribution,coverageAreas:e.coverageAreas.map((function(e){return{zoomMin:e.zoomMin,zoomMax:e.zoomMax,score:1,bbox:[e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]]}}))}}))}}))]}))}))},t.prototype._getMetadata=function(){var e=this;return a("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+{road:"roadOnDemand",aerial:"aerial",hybrid:"aerialWithLabelsOnDemand"}[this.style],{responseType:"json",query:{include:"ImageryProviders",uriScheme:"https",key:this.key,suppressStatus:!0,output:"json",culture:this.culture,userRegion:this.region}}).then((function(t){var r=t.data;if(200!==r.statusCode)throw new s("bingmapslayer:getmetadata",r.statusDescription);if(e.bingMetadata=r,0===e.bingMetadata.resourceSets.length)throw new s("bingmapslayer:getmetadata","no bing resourcesets");if(0===e.bingMetadata.resourceSets[0].resources.length)throw new s("bingmapslayer:getmetadata","no bing resources")})).catch((function(e){throw new s("bingmapslayer:getmetadata",e.message)}))},t.prototype._getPortalBingKey=function(){var e=this;return a(this.portalUrl,{responseType:"json",authMode:"no-prompt",query:{f:"json"}}).then((function(t){if(!t.data.bingKey)throw new s("bingmapslayer:getportalbingkey","The referenced Portal does not contain a valid bing key");e.key=t.data.bingKey})).catch((function(e){throw new s("bingmapslayer:getportalbingkey",e.message)}))},t.prototype._getQuadKey=function(e,t,r){for(var i="",n=e;n>0;n--){var o=0,a=1<<n-1;0!=(r&a)&&(o+=1),0!=(t&a)&&(o+=2),i+=o.toString()}return i},i([y.property({json:{read:!1,write:!1},value:null})],t.prototype,"bingMetadata",null),i([y.property({json:{read:!1,write:!1},value:"bing-maps",readOnly:!0})],t.prototype,"type",void 0),i([y.property({type:v})],t.prototype,"tileInfo",void 0),i([y.property({type:String,readOnly:!0,dependsOn:["bingMetadata"],json:{read:!1,write:!1}})],t.prototype,"copyright",null),i([y.property({type:String,json:{write:!1,read:!1}})],t.prototype,"key",void 0),i([y.property({type:String,json:{write:{target:"layerType",writer:g.write},read:{source:"layerType",reader:g.read}}})],t.prototype,"style",void 0),i([y.property({type:["BingMapsAerial","BingMapsHybrid","BingMapsRoad"],readOnly:!0,json:{read:{source:"layerType"}}})],t.prototype,"operationalLayerType",void 0),i([y.property({type:String,json:{write:!1,read:!1}})],t.prototype,"culture",void 0),i([y.property({type:String,json:{write:!1,read:!1}})],t.prototype,"region",void 0),i([y.property({type:String,json:{write:!0,read:!0}})],t.prototype,"portalUrl",void 0),i([y.property({type:Boolean,json:{write:!1,read:!1}})],t.prototype,"hasAttributionData",void 0),i([y.property({type:String,readOnly:!0,dependsOn:["bingMetadata"]})],t.prototype,"bingLogo",null),i([y.subclass("esri.layers.BingMapsLayer")],t)}(y.declared(h.OperationalLayer(u.MultiOriginJSONMixin(f))))}).apply(null,i))||(e.exports=n)},VIp5:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ImIS"),r("Vx27"),r("EEGM")],void 0===(n=(function(e,t,r,i,n,o,a){var s=new n.default({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});return function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}return r(t,e),i([o.property({type:String,json:{read:s.read,write:s.write}})],t.prototype,"type",void 0),i([o.subclass("esri.tasks.support.NAMessage")],t)}(o.declared(a))}).apply(null,i))||(e.exports=n)},VTDq:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Gtr7"),r("Vx27"),r("IlDW"),r("ml7j"),r("b8d8")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p){Object.defineProperty(t,"__esModule",{value:!0});var u={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._scale=null,t.view=null,t}return i(t,e),Object.defineProperty(t.prototype,"dynamicLayers",{get:function(){if(!this.hasDynamicLayers)return null;var e=this.visibleSublayers.map((function(e){return e.toExportImageJSON()}));return e.length?JSON.stringify(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasDynamicLayers",{get:function(){return this.layer&&s.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layer",{set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this._layerHandles&&(this._layerHandles.forEach((function(e){return e.remove()})),this._layerHandles.length=0),e&&(this._layerHandles=[e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(u[e.propertyName])}))]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers",{get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerDefs",{get:function(){var e=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression}));return e.length?JSON.stringify(e.reduce((function(e,t){return e[t.id]=t.definitionExpression,e}),{})):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return null!=this._scale?this._scale:this.view&&this.view.scale||0},set:function(e){this.view||(this._scale=e,this.notifyChange("scale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},set:function(e){this._set("version",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleSublayers",{get:function(){var e=this,t=[];if(!this.layer)return t;var r=this.layer.sublayers,i=function(r){var n=e.scale;r.visible&&(0===n||(0===r.minScale||n<=r.minScale)&&(0===r.maxScale||n>=r.maxScale))&&(r.sublayers?r.sublayers.forEach(i):t.unshift(r))};r&&r.forEach(i);var n=this._get("visibleSublayers");return!n||n.length!==t.length||n.some((function(e,r){return t[r]!==e}))?t:n},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=r({},t,{layers:this.layers,layerDefs:this.layerDefs}),t},n([a.property({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],t.prototype,"dynamicLayers",null),n([a.property({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],t.prototype,"hasDynamicLayers",null),n([a.property()],t.prototype,"layer",null),n([a.property({readOnly:!0,dependsOn:["visibleSublayers"]})],t.prototype,"layers",null),n([a.property({readOnly:!0,dependsOn:["visibleSublayers"]})],t.prototype,"layerDefs",null),n([a.property({type:Number,dependsOn:["view.scale"]})],t.prototype,"scale",null),n([a.property(l.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),n([a.property({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],t.prototype,"version",null),n([a.property({type:p})],t.prototype,"view",void 0),n([a.property({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],t.prototype,"visibleSublayers",null),n([a.subclass("esri.layers.mixins.ExportImageParameters")],t)}(a.declared(o));t.ExportImageParameters=c}).apply(null,i))||(e.exports=n)},WYOF:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){function r(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.addTypeKeyword=function(e,t){if(!r(e,t)){var i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}},t.hasTypeKeyword=r,t.removeTypeKeyword=function(e,t){var r=e.typeKeywords;if(r){var i=r.indexOf(t);i>-1&&r.splice(i,1)}}}).apply(null,i))||(e.exports=n)},WiXY:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("TMur"),r("zp6E"),r("ma1f"),r("7MDj"),r("LxLY"),r("EUqE"),r("qMld"),r("jfWY"),r("Vx27"),r("0RER"),r("WhPF"),r("G/Nd"),r("2fnV"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("Blfj"),r("8CIp"),r("8CIp"),r("EtsK"),r("wIfq")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g,m,b,w,S,x,M,O,T,L,_,j){var E=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];return function(e){function t(t,r){var i=e.call(this,t)||this;return i.listMode="show",i.isReference=null,i.resampling=!0,i.sourceJSON=null,i.spatialReference=null,i.path=null,i.sublayers=null,i.type="tile",i.url=null,i}return i(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},t.prototype.load=function(e){var t=this,r=c.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),d.resolve(this)},Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operationalLayerType",{get:function(){if(this.capabilities&&this.capabilities.operations)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var e=this.url||this.portalItem&&this.portalItem.url;return e&&/\/ImageServer(\/|\/?$)/i.test(e)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0}),t.prototype.readSpatialReference=function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&s.SpatialReference.fromJSON(e)},t.prototype.writeSublayers=function(e,t,i,n){if(this.loaded&&e){var o=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),a=[],s=r({writeSublayerStructure:!1},n);o.forEach((function(e){var t=e.write({},s);a.push(t)})),a.some((function(e){return Object.keys(e).length>1}))&&(t.layers=a)}},Object.defineProperty(t.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0}),t.prototype.castTileServers=function(e){return Array.isArray(e)?e.map((function(e){return f.urlToObject(e).path})):null},t.prototype.fetchTile=function(e,t,r,i){void 0===i&&(i={});var n=i.signal,o=i.timestamp,a=this.getTileUrl(e,t,r),s={responseType:"image",signal:n};return null!=o&&(s.query={_ts:i.timestamp}),l(a,s).then((function(e){return e.data}))},t.prototype.getTileUrl=function(e,t,i){var n=f.objectToQuery(r({},this.parsedUrl.query,{blankTile:!(!this.tilemapCache&&this.supportsBlankTile)&&null})),o=this.tileServers;return(o&&o.length?o[t%o.length]:this.parsedUrl.path)+"/tile/"+e+"/"+t+"/"+i+(n?"?"+n:"")},t.prototype._fetchService=function(e){var t=this;return d.create((function(i,n){if(t.sourceJSON)i({data:t.sourceJSON});else{if(!t.parsedUrl)throw new p("tile-layer:undefined-url","layer's url is not defined");l(t.parsedUrl.path,{query:r({f:"json"},t.parsedUrl.query),responseType:"json",signal:e}).then(i,n)}})).then((function(r){if(r.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=r.data,t.read(r.data,{origin:"service",url:t.parsedUrl}),10.1===t.version&&!L.isHostedAgolService(t.url))return t._fetchServerVersion(t.url,e).then((function(e){t.read({currentVersion:e})})).catch((function(){}))}))},t.prototype._fetchServerVersion=function(e,t){if(!T.isArcGISUrl(e))return d.reject();var r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return l(r,{query:{f:"json"},responseType:"json",signal:t}).then((function(e){if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new p("tile-layer:version-not-available")}))},t.prototype._getMapName=function(e){var t=e.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]},t.prototype._getDefaultAttribution=function(e){if(e){var t;e=e.toLowerCase();for(var r=0,i=E.length;r<i;r++)if((t=E[r]).toLowerCase().indexOf(e)>-1)return f.makeAbsolute("//static.arcgis.com/attribution/"+t)}},t.prototype._getDefaultTileServers=function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]},n([h.property({readOnly:!0,dependsOn:["parsedUrl"]})],t.prototype,"attributionDataUrl",null),n([h.property({type:["show","hide","hide-children"]})],t.prototype,"listMode",void 0),n([h.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),n([h.property({readOnly:!0})],t.prototype,"operationalLayerType",null),n([h.property()],t.prototype,"popupTemplates",void 0),n([h.property({type:Boolean})],t.prototype,"resampling",void 0),n([h.property()],t.prototype,"sourceJSON",void 0),n([h.property({type:s.SpatialReference})],t.prototype,"spatialReference",void 0),n([h.reader("spatialReference",["spatialReference","tileInfo"])],t.prototype,"readSpatialReference",null),n([h.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),n([h.property({readOnly:!0})],t.prototype,"sublayers",void 0),n([h.writer("sublayers",{layers:{type:[j]}})],t.prototype,"writeSublayers",null),n([h.property({json:{read:!1,write:!1}})],t.prototype,"popupEnabled",void 0),n([h.property({dependsOn:["parsedUrl"]})],t.prototype,"tileServers",null),n([h.cast("tileServers")],t.prototype,"castTileServers",null),n([h.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),n([h.property(_.url)],t.prototype,"url",void 0),n([h.subclass("esri.layers.TileLayer")],t)}(h.declared(O.SublayersOwner(M.ScaleRangeLayer(x.RefreshableLayer(w.OperationalLayer(S.PortalLayer(g.ArcGISCachedService(m.ArcGISMapService(b.ArcGISService(y.MultiOriginJSONMixin(u.HandleOwnerMixin(v))))))))))))}).apply(null,i))||(e.exports=n)},XOvD:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("TMur"),r("mnow")],void 0===(n=(function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.register=function(e,t){var r={extent:null,rasterInfo:t,cache:new Map};if(n.has(e)){var i=n.get(e);return i.push(r),i.length-1}return n.set(e,[r]),0},t.unregister=function(e,t){n.has(e)&&(n.get(e)[t]=null)},t.deleteRaster=function(e){n.delete(e)},t.getBlock=function(e,t,r){if(!n.has(e))return null;var i=n.get(e);if(null==i[t]){for(var o=0;o<i.length;o++)if(i[o].cache.has(r))return i[o].cache.get(r);return null}var a=i[t].cache;if(a.has(r))return a.get(r);for(o=0;o<i.length;o++)if(o!==t&&i[o]&&i[o].cache.has(r)){var s=i[o].cache.get(r);return a.set(r,s),s}return null},t.putBlock=function(e,t,r,i){if(!n.has(e))return null;var o=n.get(e);if(null==o[t])return null;o[t].cache.set(r,i)},t.update=function(e,t,o,a,s,l,p){void 0===p&&(p=null);var u=function(e,t){if(!n.has(e))return null;var r=n.get(e);return null==r[t]?null:r[t]}(e,t),c=u.extent,y=u.cache,d=u.rasterInfo,f=o.clone().normalize();if(o=f[0],!c||c.xmin!==o.xmin||c.xmax!==o.xmax||c.ymin!==o.ymin||c.ymax!==o.ymax){var h=d.spatialReference,v=i.projectExtent(o,h,p),g=new r.Point({x:a,y:a,spatialReference:o.spatialReference});if(null!==s||(s=i.projectResolution(g,h,o,p))){var m=i.snapPyramid(s,d,l||"closest"),b=m.pyramidLevel,w=m.pyramidResolution;if(!m.excessiveReading){for(var S=Math.floor((v.xmin-d.storageInfo.origin.x)/w.x),x=Math.floor((d.storageInfo.origin.y-v.ymax)/w.y),M=Math.ceil((v.xmax-v.xmin)/w.x-.1),O=Math.ceil((v.ymax-v.ymin)/w.y-.1),T=b>0?d.storageInfo.pyramidBlockWidth:d.storageInfo.blockWidth,L=b>0?d.storageInfo.pyramidBlockHeight:d.storageInfo.blockHeight,_=Math.floor(S/T),j=Math.floor(x/L),E=Math.floor((S+M-1)/T),P=Math.floor((x+O-1)/L),I=new Set,R=j-1;R<=P+1;R++)for(var G=_-1;G<=E+1;G++)I.add(b+"/"+R+"/"+G);y.forEach((function(e,t){I.has(t)||y.delete(t)})),u.extent={xmin:o.xmin,ymin:o.ymin,xmax:o.xmax,ymax:o.ymax}}}}}}).apply(null,i))||(e.exports=n)},a2fw:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("TMur"),r("zp6E"),r("ma1f"),r("rg9i"),r("EUqE"),r("qMld"),r("nRUF"),r("jfWY"),r("jfWY"),r("Vx27"),r("0RER"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("r2fF"),r("pMLx"),r("zBTX")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g,m,b,w,S,x,M,O){return function(e){function t(t,r){var i=e.call(this,t)||this;return i.copyright="",i.fullExtent=new s.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,s.SpatialReference.WebMercator),i.legendEnabled=!1,i.isReference=null,i.popupEnabled=!1,i.spatialReference=s.SpatialReference.WebMercator,i.subDomains=null,i.tileInfo=new M({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new s.Point({x:-20037508.342787,y:20037508.342787,spatialReference:s.SpatialReference.WebMercator}),spatialReference:s.SpatialReference.WebMercator,lods:[new x({level:0,scale:591657527.591555,resolution:156543.033928}),new x({level:1,scale:295828763.795777,resolution:78271.5169639999}),new x({level:2,scale:147914381.897889,resolution:39135.7584820001}),new x({level:3,scale:73957190.948944,resolution:19567.8792409999}),new x({level:4,scale:36978595.474472,resolution:9783.93962049996}),new x({level:5,scale:18489297.737236,resolution:4891.96981024998}),new x({level:6,scale:9244648.868618,resolution:2445.98490512499}),new x({level:7,scale:4622324.434309,resolution:1222.99245256249}),new x({level:8,scale:2311162.217155,resolution:611.49622628138}),new x({level:9,scale:1155581.108577,resolution:305.748113140558}),new x({level:10,scale:577790.554289,resolution:152.874056570411}),new x({level:11,scale:288895.277144,resolution:76.4370282850732}),new x({level:12,scale:144447.638572,resolution:38.2185141425366}),new x({level:13,scale:72223.819286,resolution:19.1092570712683}),new x({level:14,scale:36111.909643,resolution:9.55462853563415}),new x({level:15,scale:18055.954822,resolution:4.77731426794937}),new x({level:16,scale:9027.977411,resolution:2.38865713397468}),new x({level:17,scale:4513.988705,resolution:1.19432856685505}),new x({level:18,scale:2256.994353,resolution:.597164283559817}),new x({level:19,scale:1128.497176,resolution:.298582141647617})]}),i.type="web-tile",i.urlTemplate=null,i.wmtsInfo=null,i}return i(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?u.mixin({urlTemplate:e},t||{}):e},t.prototype.load=function(e){var t=this,r=this.loadFromPortal({supportedTypes:["WMTS"]},e).then((function(){var e="";if(t.urlTemplate)if(t.spatialReference.equals(t.tileInfo.spatialReference)){var r=new f.Url(t.urlTemplate);t.subDomains&&t.subDomains.length>0||-1===r.authority.indexOf("{subDomain}")||(e="is missing 'subDomains' property")}else e="spatialReference must match tileInfo.spatialReference";else e="is missing the required 'urlTemplate' property value";if(e)throw new p("web-tile-layer:load","WebTileLayer (title: '"+t.title+"', id: '"+t.id+"') "+e)}));return this.addResolvingPromise(r),y.resolve(this)},Object.defineProperty(t.prototype,"levelValues",{get:function(){var e=[];if(!this.tileInfo)return null;for(var t=0,r=this.tileInfo.lods;t<r.length;t++){var i=r[t];e[i.level]=i.levelValue||i.level}return e},enumerable:!0,configurable:!0}),t.prototype.readSpatialReference=function(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&s.SpatialReference.fromJSON(t.fullExtent.spatialReference)},Object.defineProperty(t.prototype,"tileServers",{get:function(){if(!this.urlTemplate)return null;var e=[],t=this.subDomains,r=new f.Url(this.urlTemplate),i=r.scheme?r.scheme+"://":"//",n=i+r.authority+"/";if(-1===r.authority.indexOf("{subDomain}"))e.push(n);else if(t&&t.length>0&&r.authority.split(".").length>1)for(var o=0,a=t;o<a.length;o++)e.push(i+r.authority.replace(/\{subDomain\}/gi,a[o])+"/");return e.map((function(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlPath",{get:function(){if(!this.urlTemplate)return null;var e=this.urlTemplate,t=new f.Url(e);return e.substring(((t.scheme?t.scheme+"://":"//")+t.authority+"/").length)},enumerable:!0,configurable:!0}),t.prototype.readUrlTemplate=function(e,t){return e||t.templateUrl},t.prototype.writeUrlTemplate=function(e,t){e&&h.isProtocolRelative(e)&&(e="https:"+e),t.templateUrl=e?h.normalize(e):e},t.prototype.fetchTile=function(e,t,r,i){void 0===i&&(i={});var n=i.signal,o=i.timestamp,a=this.getTileUrl(e,t,r),s={responseType:"image",signal:n};return null!=o&&(s.query={_ts:i.timestamp}),l(a,s).then((function(e){return e.data}))},t.prototype.getTileUrl=function(e,t,r){var i=this.levelValues[e];return(this.tileServers[t%this.tileServers.length]+d.replace(this.urlPath,{level:i,col:r,row:t})).replace(/\{level\}/gi,""+i).replace(/\{row\}/gi,""+t).replace(/\{col\}/gi,""+r)},n([v.property({type:String,value:"",json:{write:!0}})],t.prototype,"copyright",void 0),n([v.property({type:s.Extent,json:{write:!0}})],t.prototype,"fullExtent",void 0),n([v.property({readOnly:!0,json:{read:!1,write:!1}})],t.prototype,"legendEnabled",void 0),n([v.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n([v.property({dependsOn:["tileInfo"]})],t.prototype,"levelValues",null),n([v.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),n([v.property({type:["WebTiledLayer"],value:"WebTiledLayer"})],t.prototype,"operationalLayerType",void 0),n([v.property({readOnly:!0,json:{read:!1,write:!1}})],t.prototype,"popupEnabled",void 0),n([v.property({type:s.SpatialReference})],t.prototype,"spatialReference",void 0),n([v.reader("spatialReference",["spatialReference","fullExtent.spatialReference"])],t.prototype,"readSpatialReference",null),n([v.property({type:[String],json:{write:!0}})],t.prototype,"subDomains",void 0),n([v.property({type:M,json:{write:!0}})],t.prototype,"tileInfo",void 0),n([v.property({readOnly:!0,dependsOn:["urlTemplate","subDomains"]})],t.prototype,"tileServers",null),n([v.property({json:{read:!1}})],t.prototype,"type",void 0),n([v.property({dependsOn:["urlTemplate"]})],t.prototype,"urlPath",null),n([v.property({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],t.prototype,"urlTemplate",void 0),n([v.reader("urlTemplate",["urlTemplate","templateUrl"])],t.prototype,"readUrlTemplate",null),n([v.writer("urlTemplate",{templateUrl:{type:String}})],t.prototype,"writeUrlTemplate",null),n([v.property({type:O.default,json:{write:!0}})],t.prototype,"wmtsInfo",void 0),n([v.subclass("esri.layers.WebTileLayer")],t)}(v.declared(w.RefreshableLayer(S.ScaleRangeLayer(m.OperationalLayer(b.PortalLayer(c.MultiOriginJSONMixin(g)))))))}).apply(null,i))||(e.exports=n)},a4MF:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e={}),this._options=e}return e.prototype.toQueryParams=function(e){var t=this;if(!e)return null;var r=e.toJSON(),i={};return Object.keys(r).forEach((function(e){var n=t._options[e];if(n){var o="boolean"!=typeof n&&n.name?n.name:e,a="boolean"!=typeof n&&n.getter?n.getter(r):r[e];null!=a&&(i[o]=function(e){if(!Array.isArray(e))return!1;var t=e[0];return"number"==typeof t||"string"==typeof t}(a)?a.join(","):"object"==typeof a?JSON.stringify(a):a)}else i[e]=r[e]}),this),i},e}();t.createQueryParamsHelper=function(e){return new r(e)}}).apply(null,i))||(e.exports=n)},bIi9:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("dxjN"),r("TMur"),r("y4WC"),r("BcWh"),r("ycL1"),r("R7Ts"),r("LxLY"),r("qMld"),r("8MXS"),r("Vx27"),r("1dvD"),r("N3Jt")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sublayersHandles=null,t.description=null,t.id=null,t.networkLink=null,t.title=null,t.sourceJSON=null,t.fullExtent=null,t}var n;return r(t,e),n=t,t.prototype.initialize=function(){var e=this;y.whenOnce(this,"networkLink").then((function(){return y.whenTrueOnce(e,"visible")})).then((function(){return e.load()}))},t.prototype.load=function(e){var t=this;if(this.networkLink){var r=u.isSome(e)?e.signal:null,i=this._fetchService(this._get("networkLink").href,r).then((function(e){var r=h.computeExtent(e.sublayers);t.fullExtent=o.Extent.fromJSON(r),t.sourceJSON=e;var i=f.default(a.ofType(n),h.sublayersFromJSON(n,e));t.sublayers?t.sublayers.addMany(i):t.sublayers=i,t.layer.emit("sublayer-update"),t.layer&&t.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(i),c.resolve(this)}},Object.defineProperty(t.prototype,"sublayers",{set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this._sublayersHandles.forEach((function(e){return e.remove()})),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles=[e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))]),this._set("sublayers",e)},enumerable:!0,configurable:!0}),t.prototype.castSublayers=function(e){return f.default(a.ofType(n),e)},Object.defineProperty(t.prototype,"visible",{get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))},enumerable:!0,configurable:!0}),t.prototype.readVisible=function(e,t){return!!t.visibility},Object.defineProperty(t.prototype,"layer",{set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))},enumerable:!0,configurable:!0}),t.prototype._fetchService=function(e,t){return h.fetchService(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return h.parseKML(e.data)}))},i([d.property()],t.prototype,"description",void 0),i([d.property()],t.prototype,"id",void 0),i([d.property({readOnly:!0,value:null})],t.prototype,"networkLink",void 0),i([d.property({json:{write:{allowNull:!0}}})],t.prototype,"parent",void 0),i([d.property({value:null,json:{write:{allowNull:!0}}})],t.prototype,"sublayers",null),i([d.cast("sublayers")],t.prototype,"castSublayers",null),i([d.property({value:null,json:{read:{source:"name"}}})],t.prototype,"title",void 0),i([d.property({value:!0})],t.prototype,"visible",null),i([d.reader("visible",["visibility"])],t.prototype,"readVisible",null),i([d.property()],t.prototype,"sourceJSON",void 0),i([d.property({value:null})],t.prototype,"layer",null),i([d.property({type:o.Extent})],t.prototype,"fullExtent",void 0),n=i([d.subclass("esri.layers.support.KMLSublayer")],t)}(d.declared(s.EventedMixin(l.JSONSupportMixin(p))))}).apply(null,i))||(e.exports=n)},"d+WR":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("dxjN"),r("Q2wQ"),r("HZ3d"),r("zp6E"),r("ma1f"),r("7MDj"),r("sS22"),r("LxLY"),r("EUqE"),r("qMld"),r("Vx27"),r("1dvD"),r("ZEeX"),r("qDpW"),r("0RER"),r("G/Nd"),r("2fnV"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("Blfj"),r("c/mu"),r("EtsK"),r("VTDq"),r("wIfq"),r("IlDW")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g,m,b,w,S,x,M,O,T,L,_,j,E,P,I){return function(e){function t(t,r){var i=e.call(this,t)||this;return i.alwaysRefetch=!1,i.dpi=96,i.gdbVersion=null,i.imageFormat="png24",i.imageMaxHeight=2048,i.imageMaxWidth=2048,i.imageTransparency=!0,i.labelsVisible=!1,i.isReference=null,i.operationalLayerType="ArcGISMapServiceLayer",i.sourceJSON=null,i.sublayers=null,i.type="map-image",i.url=null,i}return i(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},t.prototype.load=function(e){var t=this,r=y.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),f.resolve(this)},t.prototype.readImageFormat=function(e,t){var r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"},t.prototype.writeSublayers=function(e,t,i,n){if(this.loaded&&e){var o=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),a=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){var s=g.nameToId(n.origin);if(3===s){var l=this.createSublayersForOrigin("service").sublayers;a=I.shouldWriteSublayerStructure(o,l,2)}else if(s>3){var p=this.createSublayersForOrigin("portal-item");a=I.shouldWriteSublayerStructure(o,p.sublayers,g.nameToId(p.origin))}}var u=[],c=r({writeSublayerStructure:a},n),y=a;o.forEach((function(e){var t=e.write({},c);u.push(t),y=y||"user"===e.originOf("visible")})),u.some((function(e){return Object.keys(e).length>1}))&&(t.layers=u),y&&(t.visibleLayers=o.filter((function(e){return e.visible})).map((function(e){return e.id})))}},t.prototype.createExportImageParameters=function(e,t,i,n){var o=n&&n.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var a=new E.ExportImageParameters({layer:this,scale:m.getScale({extent:e,width:t})*o}),s=a.toJSON();a.layer=null,a.destroy();var l=!n||!n.rotation||this.version<10.3?{}:{rotation:-n.rotation},p=e&&e.spatialReference,u=p.wkid||JSON.stringify(p.toJSON());s.dpi*=o;var c={};if(n&&n.timeExtent){var y=n.timeExtent.toJSON(),d=y.start,f=y.end;d&&f&&d===f?c.time=""+d:null==d&&null==f||(c.time=(null==d?"null":d)+","+(null==f?"null":f))}return r({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+i},s,l,c)},t.prototype.fetchImage=function(e,t,i,n){var o={responseType:"image"};n&&n.timestamp&&(o.query={_ts:n.timestamp}),n&&n.signal&&(o.signal=n.signal);var a=this.parsedUrl.path+"/export",s=r({},this.parsedUrl.query,this.createExportImageParameters(e,t,i,n),{f:"image",_ts:this.alwaysRefetch?Date.now():null});return null==s.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(o.query=o.query?r({},s,o.query):s,l(a,o).then((function(e){return e.data})).catch((function(e){if(f.isAbortError(e))throw e;throw new p("mapimagelayer:image-fetch-error","Unable to load image: "+a,{error:e})}))):f.reject(new p("mapimagelayer:dynamiclayer-not-supported","service "+this.url+" doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.",{query:s}))},t.prototype.loadAll=function(){var e=this;return c.default(this,(function(t){t(e.allSublayers)}))},t.prototype._fetchService=function(e){return s(this,void 0,void 0,(function(){var t,i;return a(this,(function(n){switch(n.label){case 0:return this.sourceJSON?(this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),[2]):[4,l(this.parsedUrl.path,{query:r({f:"json"},this.parsedUrl.query),signal:e})];case 1:return t=n.sent(),i=t.data,t.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl}),[2]}}))}))},n([h.property()],t.prototype,"alwaysRefetch",void 0),n([h.property()],t.prototype,"dpi",void 0),n([h.property()],t.prototype,"gdbVersion",void 0),n([h.property({json:{read:!1,write:!1}})],t.prototype,"popupEnabled",void 0),n([h.property()],t.prototype,"imageFormat",void 0),n([h.reader("imageFormat",["supportedImageFormatTypes"])],t.prototype,"readImageFormat",null),n([h.property({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],t.prototype,"imageMaxHeight",void 0),n([h.property({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],t.prototype,"imageMaxWidth",void 0),n([h.property()],t.prototype,"imageTransparency",void 0),n([h.property({json:{read:!1,write:!1}})],t.prototype,"labelsVisible",void 0),n([h.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),n([h.property({type:["ArcGISMapServiceLayer"]})],t.prototype,"operationalLayerType",void 0),n([h.property()],t.prototype,"sourceJSON",void 0),n([h.property({json:{write:{ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),n([h.writer("sublayers",{layers:{type:[P]},visibleLayers:{type:[v.Integer]}})],t.prototype,"writeSublayers",null),n([h.property({type:["show","hide","hide-children"]})],t.prototype,"listMode",void 0),n([h.property({json:{read:!1},readOnly:!0,value:"map-image"})],t.prototype,"type",void 0),n([h.property(j.url)],t.prototype,"url",void 0),n([h.subclass("esri.layers.MapImageLayer")],t)}(h.declared(_.TemporalLayer(T.ScaleRangeLayer(O.RefreshableLayer(L.SublayersOwner(w.ArcGISMapService(S.ArcGISService(x.OperationalLayer(M.PortalLayer(d.MultiOriginJSONMixin(u.HandleOwnerMixin(b))))))))))))}).apply(null,i))||(e.exports=n)},hPxN:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("TMur"),r("y4WC"),r("6Ej+"),r("LxLY"),r("EUqE"),r("qMld"),r("Vx27"),r("Z4y+"),r("0RER"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("bIi9"),r("N3Jt")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g,m,b,w,S){return function(e){function t(t,r){var i=e.call(this,t,r)||this;return i._visibleFolders=[],i.allSublayers=new p({root:i,rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),i.outSpatialReference=f.WGS84,i.path=null,i.operationalLayerType="KML",i.sublayers=null,i.type="kml",i.url=null,i}return i(t,e),t.prototype.initialize=function(){var e=this;this.watch("sublayers",(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),!0),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))},t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},t.prototype.readSublayersFromItemOrWebMap=function(e,t){this._visibleFolders=t.visibleFolders},t.prototype.readSublayers=function(e,t,r){return S.sublayersFromJSON(w,t,r,this._visibleFolders)},t.prototype.writeSublayers=function(e,t){for(var r=[],i=e.toArray();i.length;){var n=i[0];n.networkLink||(n.visible&&r.push(n.id),n.sublayers&&i.push.apply(i,n.sublayers.toArray())),i.shift()}t.visibleFolders=r},Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=this.url.substring(this.url.lastIndexOf("/")+1,this.parsedUrl.path.lastIndexOf("."));return 0===e.length&&(e="KML"),e}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleSublayers",{get:function(){var e=this.sublayers,t=[],r=function(e){e.visible&&(t.push(e),e.sublayers&&e.sublayers.forEach(r))};return e&&e.forEach(r),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullExtent",{get:function(){return this._recomputeFullExtent()},enumerable:!0,configurable:!0}),t.prototype.load=function(e){var t=this,r=u.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).then((function(){return t._fetchService(r)}))),y.resolve(this)},t.prototype._fetchService=function(e){return a(this,void 0,void 0,(function(){var t,r,i=this;return o(this,(function(n){switch(n.label){case 0:return[4,y.resolve().then((function(){return i.resourceInfo?{ssl:!1,data:i.resourceInfo}:S.fetchService(i.url,i.outSpatialReference,i.refreshInterval,e)}))];case 1:return t=n.sent(),(r=S.parseKML(t.data))&&this.read(r,{origin:"service"}),[2]}}))}))},t.prototype._recomputeFullExtent=function(){var e=null;this.extent&&(e=this.extent.clone());var t=function(r){if(r.sublayers)for(var i=0,n=r.sublayers.items;i<n.length;i++){var o=n[i];t(o),o.visible&&o.fullExtent&&(e?e.union(o.fullExtent):e=o.fullExtent.clone())}};return t(this),e},n([d.property({readOnly:!0})],t.prototype,"allSublayers",void 0),n([d.property({type:f})],t.prototype,"outSpatialReference",void 0),n([d.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),n([d.property({type:["show","hide","hide-children"]})],t.prototype,"listMode",void 0),n([d.property({type:["KML"]})],t.prototype,"operationalLayerType",void 0),n([d.property({type:l.ofType(w),json:{write:{ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),n([d.reader(["web-map","portal-item"],"sublayers",["visibleFolders"])],t.prototype,"readSublayersFromItemOrWebMap",null),n([d.reader("service","sublayers",["sublayers"])],t.prototype,"readSublayers",null),n([d.writer("sublayers")],t.prototype,"writeSublayers",null),n([d.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),n([d.property({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}},dependsOn:["url","parsedUrl"]})],t.prototype,"title",null),n([d.property()],t.prototype,"url",void 0),n([d.property({readOnly:!0,dependsOn:["sublayers"]})],t.prototype,"visibleSublayers",null),n([d.property({type:s.Extent})],t.prototype,"extent",void 0),n([d.property({dependsOn:["extent"]})],t.prototype,"fullExtent",null),n([d.subclass("esri.layers.KMLLayer")],t)}(d.declared(m.RefreshableLayer(b.ScaleRangeLayer(v.OperationalLayer(g.PortalLayer(c.MultiOriginJSONMixin(h)))))))}).apply(null,i))||(e.exports=n)},i6zL:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("KY0m"),r("BcWh"),r("eIBl"),r("rg9i"),r("jBNx"),r("8MXS"),r("Vx27"),r("tJCi"),r("TD84"),r("txZC")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d){return function(e){function t(t){var r=e.call(this,t)||this;return r._activeGraphic=null,r._dragEvent=null,r._handles=new a,r._hoverGraphic=null,r._initialDragGeometry=null,r._pointerDownEvent=null,r._viewHandles=new a,r.type="graphic-mover",r.callbacks={onGraphicClick:function(){},onGraphicDoubleClick:function(){},onGraphicMoveStart:function(){},onGraphicMove:function(){},onGraphicMoveStop:function(){},onGraphicPointerOver:function(){},onGraphicPointerOut:function(){},onGraphicPointerDown:function(){},onGraphicPointerUp:function(){}},r.enableMoveAllGraphics=!1,r.graphics=[],r.view=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([p.whenOnce(this,"view.ready",(function(){e._viewHandles.add([e.view.on("immediate-click",(function(t){return e._clickHandler(t)}),d.ViewEventPriorities.TOOL),e.view.on("double-click",(function(t){return e._doubleClickHandler(t)}),d.ViewEventPriorities.TOOL),e.view.on("pointer-down",(function(t){return e._pointerDownHandler(t)}),d.ViewEventPriorities.TOOL),e.view.on("pointer-move",(function(t){return e._pointerMoveHandler(t)}),d.ViewEventPriorities.TOOL),e.view.on("pointer-up",(function(t){return e._pointerUpHandler(t)}),d.ViewEventPriorities.TOOL),e.view.on("drag",(function(t){return e._dragHandler(t)}),d.ViewEventPriorities.TOOL),e.view.on("key-down",(function(t){return e._keyDownHandler(t)}),d.ViewEventPriorities.TOOL)])}))])},t.prototype.destroy=function(){this.reset(),this._viewHandles.removeAll(),this._handles.removeAll()},Object.defineProperty(t.prototype,"state",{get:function(){var e=!!this.get("view.ready"),t=!!this.get("graphics.length");return e&&t?this._activeGraphic?"moving":"active":e?"ready":"disabled"},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null},t.prototype.updateGeometry=function(e,t){var r=this.graphics[e];r&&r.set("geometry",t)},t.prototype._clickHandler=function(e){var t=this;this.view.hitTest(l.createScreenPointFromEvent(e)).then((function(r){var i=r.results;if(i.length&&i[0].graphic){var n=i[0].graphic;if(t.graphics.indexOf(n)>-1){var o=new y.GraphicClickEvent(n,t.graphics.indexOf(n),e.x,e.y,e);t.emit("graphic-click",o),t.callbacks.onGraphicClick&&t.callbacks.onGraphicClick(o)}}}))},t.prototype._doubleClickHandler=function(e){var t=this;this.view.hitTest(l.createScreenPointFromEvent(e)).then((function(r){var i=r.results;if(i.length&&i[0].graphic){var n=i[0].graphic;if(t.graphics.indexOf(n)>-1){var o=new y.GraphicDoubleClickEvent(n,t.graphics.indexOf(n),e.x,e.y,e);t.emit("graphic-double-click",o),t.callbacks.onGraphicDoubleClick&&t.callbacks.onGraphicDoubleClick(o)}}}))},t.prototype._pointerDownHandler=function(e){var t=this;this._pointerDownEvent=e,this.view.hitTest(l.createScreenPointFromEvent(e)).then((function(r){var i=n.find(r.results,(function(e){return-1!==t.graphics.indexOf(e.graphic)}));if(i){var o=i.graphic;if(t.graphics.indexOf(o)>-1){t._activeGraphic=o;var a=e.x,s=e.y,l=new y.GraphicPointerDownEvent(o,t.graphics.indexOf(o),a,s,e);t.emit("graphic-pointer-down",l),t.callbacks.onGraphicPointerDown&&t.callbacks.onGraphicPointerDown(l)}else o!==t._activeGraphic&&(t._pointerDownEvent=null,t._activeGraphic=null)}else t._pointerDownEvent=null,t._activeGraphic=null}))},t.prototype._pointerUpHandler=function(e){if(this._pointerDownEvent=null,this._activeGraphic){var t=e.x,r=e.y,i=this.graphics.indexOf(this._activeGraphic),n=new y.GraphicPointerUpEvent(this._activeGraphic,i,t,r,e);this._activeGraphic=null,this.emit("graphic-pointer-up",n),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(n)}},t.prototype._pointerMoveHandler=function(e){var t=this;this._dragEvent||this.view.hitTest(l.createScreenPointFromEvent(e)).then((function(r){var i=r.results;if(i.length&&i[0].graphic){var n=i[0].graphic;if(n===t._hoverGraphic)return;if(t.graphics.indexOf(n)>-1){var o=e.x,a=e.y;if(t._hoverGraphic){var s=t.graphics.indexOf(t._hoverGraphic),l=new y.GraphicPointerOutEvent(t.graphics[s],s,o,a,e);t._hoverGraphic=null,t.emit("graphic-pointer-out",l),t.callbacks.onGraphicPointerOut&&t.callbacks.onGraphicPointerOut(l)}var p=t.graphics.indexOf(n),u=new y.GraphicPointerOverEvent(n,p,o,a,e);return t._hoverGraphic=n,t.emit("graphic-pointer-over",u),void(t.callbacks.onGraphicPointerOver&&t.callbacks.onGraphicPointerOver(u))}}t._hoverGraphic&&(o=e.x,a=e.y,s=t.graphics.indexOf(t._hoverGraphic),u=new y.GraphicPointerOutEvent(t.graphics[s],s,o,a,e),t._hoverGraphic=null,t.emit("graphic-pointer-out",u),t.callbacks.onGraphicPointerOut&&t.callbacks.onGraphicPointerOut(u))}))},t.prototype._dragHandler=function(e){var t=this;if(this._pointerDownEvent){if("start"!==e.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;e.stopPropagation();var r=e.x,i=e.y,n=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,a=this._dragEvent?r-this._dragEvent.x:0,l=this._dragEvent?i-this._dragEvent.y:0,p=r-e.origin.x,u=i-e.origin.y;if(this._activeGraphic.geometry=c.cloneMove(o,a,l,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((function(e){e!==t._activeGraphic&&(e.geometry=c.cloneMove(e.geometry,a,l,t.view))})),this._dragEvent=e,"start"===e.action){this._initialDragGeometry=s.clone(o);var d=new y.GraphicMoveStartEvent(this._activeGraphic,this.graphics,n,r,i,a,l,p,u,e);this.emit("graphic-move-start",d),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(d),d.defaultPrevented&&this._activeGraphic.set("geometry",o)}else"update"===e.action?(d=new y.GraphicMoveEvent(this._activeGraphic,this.graphics,n,r,i,a,l,p,u,e),this.emit("graphic-move",d),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(d),d.defaultPrevented&&this._activeGraphic.set("geometry",o)):(this._dragEvent=null,d=new y.GraphicMoveStopEvent(this._activeGraphic,this.graphics,n,r,i,a,l,p,u,e),this.emit("graphic-move-stop",d),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(d),d.defaultPrevented&&this.graphics[n].set("geometry",this._initialDragGeometry),this._initialDragGeometry=null)}},t.prototype._keyDownHandler=function(e){"a"!==e.key&&"d"!==e.key&&"n"!==e.key||"moving"!==this.state||e.stopPropagation()},i([u.property()],t.prototype,"_activeGraphic",void 0),i([u.property({readOnly:!0})],t.prototype,"type",void 0),i([u.property()],t.prototype,"callbacks",void 0),i([u.property()],t.prototype,"enableMoveAllGraphics",void 0),i([u.property()],t.prototype,"graphics",void 0),i([u.property({dependsOn:["view.ready","graphics.length","_activeGraphic"],readOnly:!0})],t.prototype,"state",null),i([u.property()],t.prototype,"view",void 0),i([u.subclass("esri.views.draw.support.GraphicMover")],t)}(u.declared(o.EventedAccessor))}).apply(null,i))||(e.exports=n)},jJpZ:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("k7g7"),r("2Kdy")],void 0===(n=(function(e,t,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){this.code=null,this.description=null},s=function(e){this.error=new a,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e};function l(e){return new s(e)}t.createFeatureEditErrorResult=l;var p=function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e};t.createFeatureEditSuccessResult=function(e){return new p(e)};var u,c=new Set;function y(e,t){var r=t;return"string"==typeof t&&o.isNumericField(e)?r=parseFloat(t):null!=t&&o.isStringField(e)&&"string"!=typeof t&&(r=String(t)),o.sanitizeNullFieldValue(r)}function d(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return u?[2,u]:[4,new Promise((function(e,t){Promise.resolve().then((function(){var t=[r("21p4")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return[2,u=e.sent()]}}))}))}t.mixAttributes=function(e,t,r,i,n,a){for(var s in void 0===n&&(n=!1),c.clear(),i){var p=e.get(s);if(p){var u=i[s],d=y(p,u);if(d!==u&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:p,originalValue:u,sanitizedValue:d}}),c.add(p.name),p&&(n||p.editable)){var f=o.validateFieldValue(p,d);if(f)return l(o.validationErrorToString(f,p,d));r[p.name]=d}}}for(var h=0,v=t;h<v.length;h++){var g=v[h];if(!c.has(g.name))return l('missing required field "'+g.name+'"')}return null},t.simplify=function(e,t){if(!e)return e;if("rings"in e||"paths"in e){if(!u)throw new TypeError("geometry engine not loaded");e.spatialReference||(e.spatialReference=t);var r=u.simplify(e);return r?r.toJSON():null}return e},t.loadGeometryEngine=d,t.loadGeometryEngineForSimplify=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e?[3,2]:[4,d()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}}).apply(null,i))||(e.exports=n)},jmRc:function(e,t){},lAGb:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("sS22"),r("EUqE"),r("qMld"),r("Vx27"),r("o2T8"),r("0RER"),r("FEX1"),r("QJ8R"),r("jr4D"),r("2Kdy")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f){return function(e){function t(t){var r=e.call(this,t)||this;return r._visibilityHandles={},r.fullExtent=void 0,r.operationalLayerType="GroupLayer",r.spatialReference=void 0,r.type="group",r._visibilityWatcher=r._visibilityWatcher.bind(r),r}return r(t,e),t.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)},t.prototype._writeLayers=function(e,t,r,i){var n=[];if(!e)return n;e.forEach((function(e){if("write"in e&&e.write){var t=e.write(null,i);t&&t.layerType&&n.push(t)}})),t.layers=n},Object.defineProperty(t.prototype,"portalItem",{set:function(e){this._set("portalItem",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibilityMode",{set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)},enumerable:!0,configurable:!0}),t.prototype.load=function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),l.resolve(this)},t.prototype.loadAll=function(){var e=this;return a.loadAll(this,(function(t){t(e.layers)}))},t.prototype.layerAdded=function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)},t.prototype.layerRemoved=function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)},t.prototype._turnOffOtherLayers=function(e){this.layers.forEach((function(t){t!==e&&(t.visible=!1)}))},t.prototype._enforceVisibility=function(e,t){if(u.getProperties(this).initialized){var r=this.layers,i=r.find((function(e){return e.visible}));switch(e){case"exclusive":r.length&&!i&&((i=r.getItemAt(0)).visible=!0),this._turnOffOtherLayers(i);break;case"inherited":r.forEach((function(e){e.visible=t}))}}},t.prototype._visibleWatcher=function(e){"inherited"===this.visibilityMode&&this.layers.forEach((function(t){t.visible=e}))},t.prototype._visibilityWatcher=function(e,t,r,i){var n=i;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(n):this._isAnyLayerVisible()||(n.visible=!0);break;case"inherited":n.visible=this.visible}},t.prototype._isAnyLayerVisible=function(){return this.layers.some((function(e){return e.visible}))},i([p.property()],t.prototype,"fullExtent",void 0),i([p.property({json:{read:!1,write:{ignoreOrigin:!0}}})],t.prototype,"layers",void 0),i([p.writer("layers")],t.prototype,"_writeLayers",null),i([p.property({type:["GroupLayer"]})],t.prototype,"operationalLayerType",void 0),i([p.property({json:{origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"portalItem",null),i([p.property()],t.prototype,"spatialReference",void 0),i([p.property({json:{read:!1},readOnly:!0,value:"group"})],t.prototype,"type",void 0),i([p.property({type:String,value:"independent",json:{write:!0}})],t.prototype,"visibilityMode",null),i([p.subclass("esri.layers.GroupLayer")],t)}(p.declared(y.OperationalLayer(d.PortalLayer(f.LayersMixin(s.MultiOriginJSONMixin(c))))))}).apply(null,i))||(e.exports=n)},mEoI:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("TMur"),r("jZlN"),r("LxLY"),r("Vx27"),r("w1v0")],void 0===(n=(function(e,t,r,i,n,o,a,s,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.extent=null,r.features=null,r.geometryType="polyline",r.routeId=null,r.routeName=null,r.totalDriveTime=null,r.totalLength=null,r.totalTime=null,r}return r(t,e),t.prototype.readFeatures=function(e,t){var r=this;(e||[]).forEach((function(e){r._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)}));var i=n.SpatialReference.fromJSON(t.spatialReference);return e.map((function(e){var t=o.fromJSON(e);return t.geometry&&!(e.geometry&&e.geometry.spatialReference)&&(a.unwrap(t.geometry).spatialReference=i),t.strings=e.strings,t.events=(e.events||[]).map((function(t){var r=new o({geometry:new n.Point({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),t}))},Object.defineProperty(t.prototype,"mergedGeometry",{get:function(){if(!this.features)return null;var e=this.features.map((function(e){return a.unwrap(e.geometry)})),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strings",{get:function(){return this.features.map((function(e){return e.strings}))},enumerable:!0,configurable:!0}),t.prototype._decompressFeatureGeometry=function(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)},t.prototype._decompressGeometry=function(e,t){var r,i,n,o,a,s,l,p,u=0,c=0,y=0,d=0,f=[],h=0,v=0,g=0;if((a=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(a=[]),0===parseInt(a[h],32)){h=2;var m=parseInt(a[h],32);h++,s=parseInt(a[h],32),h++,1&m&&(v=a.indexOf("|")+1,l=parseInt(a[v],32),v++),2&m&&(g=a.indexOf("|",v)+1,p=parseInt(a[g],32),g++)}else s=parseInt(a[h],32),h++;for(;h<a.length&&"|"!==a[h];){r=parseInt(a[h],32)+u,h++,u=r,i=parseInt(a[h],32)+c,h++,c=i;var b=[r/s,i/s];v&&(o=parseInt(a[v],32)+y,v++,y=o,b.push(o/l)),g&&(n=parseInt(a[g],32)+d,g++,d=n,b.push(n/p)),f.push(b)}return{paths:[f],hasZ:v>0,hasM:g>0,spatialReference:t}},t.prototype._mergePolylinesToSinglePath=function(e,t){var r=[];(e||[]).forEach((function(e){e.paths.forEach((function(e){r=r.concat(e)}))}));var i=[],o=[0,0];return r.forEach((function(e){e[0]===o[0]&&e[1]===o[1]||(i.push(e),o=e)})),new n.Polyline({paths:[i]},t)},i([s.property({type:n.Extent,json:{read:{source:"summary.envelope"}}})],t.prototype,"extent",void 0),i([s.property()],t.prototype,"features",void 0),i([s.reader("features")],t.prototype,"readFeatures",null),i([s.property()],t.prototype,"geometryType",void 0),i([s.property({readOnly:!0,dependsOn:["features","extent.spatialReference"]})],t.prototype,"mergedGeometry",null),i([s.property()],t.prototype,"routeId",void 0),i([s.property()],t.prototype,"routeName",void 0),i([s.property({value:null,readOnly:!0,dependsOn:["features"]})],t.prototype,"strings",null),i([s.property({json:{read:{source:"summary.totalDriveTime"}}})],t.prototype,"totalDriveTime",void 0),i([s.property({json:{read:{source:"summary.totalLength"}}})],t.prototype,"totalLength",void 0),i([s.property({json:{read:{source:"summary.totalTime"}}})],t.prototype,"totalTime",void 0),i([s.subclass("esri.tasks.support.DirectionsFeatureSet")],t)}(s.declared(l))}).apply(null,i))||(e.exports=n)},mnow:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("2Atf"),r("TMur"),r("ma1f"),r("wIC5"),r("nrlZ"),r("vtMp")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c){Object.defineProperty(t,"__esModule",{value:!0});var y=function(e,t){var r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};t.defaultGridSpacing=32,t.load=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return p.isLoaded()||!p.isSupported()?[2,null]:[4,p.load()];case 1:return e.sent(),[2]}}))}))},t.projectResolution=function(e,t,r,i){if(void 0===i&&(i=null),e.spatialReference.equals(t))return e;var n=y(e.spatialReference,t);if(n&&!p.isLoaded())throw new l("rasterprojectionhelper-projectResolution","projection engine is not loaded");var o=r.center,a=new s.Extent({xmin:o.x-e.x/2,xmax:o.x+e.x/2,ymin:o.y-e.y/2,ymax:o.y+e.y/2,spatialReference:e.spatialReference}),u=n?p.project(a,t,i):c.project(a,t);return null==u?null:new s.Point(u.xmax-u.xmin,u.ymax-u.ymin,t)},t.projectPoint=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var i=y(e.spatialReference,t);if(i&&!p.isLoaded())throw new l("rasterprojectionhelper-projectResolution","projection engine is not loaded");return i?p.project(e,t,r):c.project(e,t)},t.projectExtent=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var i=y(e.spatialReference,t);if(i&&!p.isLoaded())throw new l("rasterprojectionhelper-projectExtent","projection engine is not loaded");return i?p.project(e,t,r):c.project(e,t)},t.getProjectionOffsetGrid=function(e,r,i,n,o,a){void 0===n&&(n=null),void 0===o&&(o=!1),void 0===a&&(a=[t.defaultGridSpacing,t.defaultGridSpacing]);var d=r.spatialReference.equals(e.spatialReference),f=y(e.spatialReference,r.spatialReference);if(f&&!p.isLoaded())throw new l("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&r&&i))return null;for(var h,v,g,m=e.xmin,b=e.ymin,w=e.xmax,S=e.ymax,x=e.spatialReference,M=r.spatialReference,O=u.getInfo(x),T=O&&O.valid[0],L=O&&O.valid[1],_={x:a[0]*i.x,y:a[1]*i.y},j={cols:Math.ceil((w-m)/_.x-.1)+1,rows:Math.ceil((S-b)/_.y-.1)+1},E=_.x,P=_.y,I=[],R=!1,G=0;G<j.cols;G++){for(var A=[],N=0;N<j.rows;N++)h=new s.Point({x:m+E*G,y:S-P*N,spatialReference:x}),v=d?h:f?p.project(h,M,n):c.project(h,M),A.push(v),G>0&&o&&v&&g[N]&&O&&v.x<g[N].x&&(v.x+=L-T),v?(I.push((v.x-r.xmin)/(r.xmax-r.xmin)),I.push((r.ymax-v.y)/(r.ymax-r.ymin))):(I.push(NaN),I.push(NaN),R=!0);g=A}var D=function(e,t){var r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs((e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4-e[2*t.rows+2]),Math.abs(r-e[2*t.rows+3])]}(I,j),k=new Float32Array((j.cols-1)*(j.rows-1)*2*6),V=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),W=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(G=0;G<j.cols-1;G++){for(N=0;N<j.rows-1;N++){for(var q=G*j.rows*2+2*N,C=I[q],F=I[q+1],U=I[q+2],J=I[q+3],B=I[q+=2*j.rows],z=I[q+1],K=I[q+2],H=I[q+3],Q=0,Z=12*(N*(j.cols-1)+G),X=0;X<3;X++)k[Z++]=V[Q++]*C+V[Q++]*U+V[Q++]*K;for(Q=0,X=0;X<3;X++)k[Z++]=V[Q++]*F+V[Q++]*J+V[Q++]*H;for(Q=0,X=0;X<3;X++)k[Z++]=W[Q++]*C+W[Q++]*B+W[Q++]*K;for(Q=0,X=0;X<3;X++)k[Z++]=W[Q++]*F+W[Q++]*z+W[Q++]*H}if(R)for(var Y=0;Y<k.length;Y++)isNaN(k[Y])&&(k[Y]=-1)}return{offsets:I,error:D,coefficients:k,spacing:a,size:[j.cols-1,j.rows-1]}},t.snapPyramid=function(e,t,r){var i=Math.log(e.x/t.pixelSize.x)/Math.LN2,n=Math.log(e.y/t.pixelSize.y)/Math.LN2,o=t.storageInfo.maximumPyramidLevel||0,a="down"===r?Math.floor(Math.min(i,n)):"up"===r?Math.ceil(Math.max(i,n)):Math.round((i+n)/2),l=!1;a<0?a=0:a>o&&(l=a>o+3,a=o);var p=Math.pow(2,a);return{pyramidLevel:a,pyramidResolution:new s.Point({x:p*t.pixelSize.x,y:p*t.pixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}}).apply(null,i))||(e.exports=n)},"rU+N":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("KY0m"),r("rg9i")],void 0===(n=(function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._propertyOriginMap=new Map,this._originStores=new Array(7),this._values=new Map}return e.prototype.clone=function(t){for(var r=new e,n=function(e){var n=o._originStores[e];n&&n.forEach((function(n,o){t&&t.has(o)||r.set(o,i.clone(n),e)}))},o=this,a=2;a<7;a++)n(a);return r},e.prototype.get=function(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0},e.prototype.keys=function(e){var t=null==e?this._values:this._originStores[e];return t?r.keysOfMap(t):[]},e.prototype.set=function(e,t,r){void 0===r&&(r=6);var i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){var n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1},e.prototype.delete=function(e,t){void 0===t&&(t=6);var r=this._originStores[t];if(r){var i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var n=t-1;n>=0;n--){var o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return i}},e.prototype.has=function(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)},e.prototype.revert=function(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],i=r&&r.get(e),n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),n!==i},e.prototype.originOf=function(e){return this._propertyOriginMap.get(e)||0},e.prototype.forEach=function(e){this._values.forEach(e)},e}();t.default=n}).apply(null,i))||(e.exports=n)},tJCi:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("lRq4"),r("hBh5"),r("ZPQp")],void 0===(n=(function(e,t,r,i,n){function o(e,t,r,i){if(null==i||e.hasZ||(i=void 0),"point"===e.type)return e.x+=t,e.y+=r,e.hasZ&&null!=i&&(e.z+=i),e;if("multipoint"===e.type){for(var o=e.points,s=0;s<o.length;s++)o[s]=a(o[s],t,r,i);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=r,e.ymax+=r,null!=i&&(e.zmin+=i,e.zmax+=i),e;for(var l=n.geometryToCoordinates(e),p="polyline"===e.type?e.paths:e.rings,u=0;u<l.length;u++){var c=l[u];for(s=0;s<c.length;s++)c[s]=a(c[s],t,r,i)}return"paths"in e?e.paths=p:e.rings=p,e}function a(e,t,r,i){return s(e,e[0]+t,e[1]+r,null!=e[2]&&null!=i?e[2]+i:void 0)}function s(e,t,r,i){var n=[t,r];return e.length>2&&n.push(null!=i?i:e[2]),e.length>3&&n.push(e[3]),n}Object.defineProperty(t,"__esModule",{value:!0}),t.move=o,t.cloneMove=function(e,t,r,i,a){var l=e.clone(),p=i.resolution;if("point"===l.type){if(a)o(l,t*p,-r*p);else{var u=i.state.transform,c=i.state.inverseTransform,y=u[0]*l.x+u[2]*l.y+u[4],d=u[1]*l.x+u[3]*l.y+u[5];l.x=c[0]*(y+t)+c[2]*(d+r)+c[4],l.y=c[1]*(y+t)+c[3]*(d+r)+c[5]}return l}if("multipoint"===l.type){if(a)o(l,t*p,-r*p);else for(var f=l.points,h=(u=i.state.transform,c=i.state.inverseTransform,0);h<f.length;h++){var v=f[h],g=u[0]*v[0]+u[2]*v[1]+u[4],m=u[1]*v[0]+u[3]*v[1]+u[5];f[h]=s(v,y=c[0]*(g+t)+c[2]*(m+r)+c[4],d=c[1]*(g+t)+c[3]*(m+r)+c[5],void 0)}return l}if("extent"===l.type){if(a)o(l,t*p,-r*p);else{var b=(u=i.state.transform)[0]*l.xmin+u[2]*l.ymin+u[4],w=u[1]*l.xmin+u[3]*l.ymin+u[5],S=u[0]*l.xmax+u[2]*l.ymax+u[4],x=u[1]*l.xmax+u[3]*l.ymax+u[5];l.xmin=(c=i.state.inverseTransform)[0]*(b+t)+c[2]*(w+r)+c[4],l.ymin=c[1]*(b+t)+c[3]*(w+r)+c[5],l.xmax=c[0]*(S+t)+c[2]*(x+r)+c[4],l.ymax=c[1]*(S+t)+c[3]*(x+r)+c[5]}return l}if(a)o(l,t*p,-r*p);else{for(var M=n.geometryToCoordinates(l),O=(f="polyline"===l.type?l.paths:l.rings,u=i.state.transform,c=i.state.inverseTransform,0);O<M.length;O++){var T=M[O];for(h=0;h<T.length;h++)T[h]=s(v=T[h],y=c[0]*((g=u[0]*v[0]+u[2]*v[1]+u[4])+t)+c[2]*((m=u[1]*v[0]+u[3]*v[1]+u[5])+r)+c[4],d=c[1]*(g+t)+c[3]*(m+r)+c[5],void 0)}"paths"in l?l.paths=f:l.rings=f}return l},t.scale=function(e,t,o,a){if("point"===e.type){var l=e.x,p=e.y,u=a?a[0]:l,c=a?a[1]:p,y=e.clone(),d=(l-u)*t+u,f=(p-c)*o+c;return y.x=d,y.y=f,y}if("multipoint"===e.type){for(var h=n.geometryToCoordinates(e),v=r.create(),g=i.getRingsOrPathsBounds(v,[h]),m=a?a[0]:(g[0]+g[2])/2,b=a?a[1]:(g[3]+g[1])/2,w=e.clone(),S=w.points,x=0;x<S.length;x++)d=((l=(C=S[x])[0])-m)*t+m,f=((p=C[1])-b)*o+b,S[x]=s(C,d,f,void 0);return w}if("extent"===e.type){var M=e.xmin,O=e.xmax,T=e.ymin,L=e.ymax,_=a?a[0]:(M+O)/2,j=a?a[1]:(L+T)/2,E=e.clone();if(E.xmin=(M-_)*t+_,E.ymax=(L-j)*o+j,E.xmax=(O-_)*t+_,E.ymin=(T-j)*o+j,E.xmin>E.xmax){var P=E.xmin;E.xmin=E.xmax,E.xmax=P}if(E.ymin>E.ymax){var I=E.ymin;E.ymin=E.ymax,E.ymax=I}return E}for(var R=n.geometryToCoordinates(e),G=r.create(),A=i.getRingsOrPathsBounds(G,R),N=a?a[0]:(A[0]+A[2])/2,D=a?a[1]:(A[3]+A[1])/2,k=e.clone(),V="polyline"===k.type?k.paths:k.rings,W=0;W<R.length;W++){var q=R[W];for(x=0;x<q.length;x++){var C;d=((l=(C=q[x])[0])-N)*t+N,f=((p=C[1])-D)*o+D,V[W][x]=s(C,d,f,void 0)}}return"paths"in k?k.paths=V:k.rings=V,k},t.getScaleRatio=function(e,t,r,i,n,o){var a=Math.sqrt((r-e)*(r-e)+(i-t)*(i-t));return Math.sqrt((n-e)*(n-e)+(o-t)*(o-t))/a},t.getRotationAngle=function(e,t,r,i,n,o){var a=180*Math.atan2(t-i,e-r)/Math.PI;return 180*Math.atan2(t-o,e-n)/Math.PI-a}}).apply(null,i))||(e.exports=n)},uLAD:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("Q2wQ"),r("HZ3d"),r("zp6E"),r("y4WC"),r("ma1f"),r("qMld"),r("FayN"),r("QmTF"),r("WYOF")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c){function y(e){switch(e.type){case"Map Service":return function(e){return f(e).then((function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}}))}(e);case"Feature Service":return function(e){return h(e).then((function(e){if("object"==typeof e){var t={};return null!=e.id&&(t.layerId=e.id),{className:"FeatureLayer",properties:t}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,e.load()];case 1:return r.sent(),c.hasTypeKeyword(e,"Map Notes")?[2,{className:"MapNotesLayer"}]:c.hasTypeKeyword(e,"Route Layer")?[2,{className:"RouteLayer"}]:[4,e.fetchData()];case 2:return(t=r.sent())&&Array.isArray(t.layers)&&1===t.layers.length?[2,{className:"FeatureLayer"}]:[2,{className:"GroupLayer"}]}}))}))}(e);case"Scene Service":return function(e){return h(e).then((function(t){if("object"==typeof t){var r={},i=void 0;if(null!=t.id?(r.layerId=t.id,i=e.url+"/layers/"+t.id):i=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var n={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];if(-1!==e.typeKeywords.indexOf(s))return{className:n[s]}}return v(i).then((function(e){var t="SceneLayer",i={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&i[e.layerType]&&(t=i[e.layerType]),{className:t,properties:r}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){return f(e).then((function(t){var r=new a(e.typeKeywords);return t?r.find((function(e){return"elevation 3d layer"===e.toLowerCase()}))?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}}))}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return l.reject(new s("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function d(e){return(0,p.layerLookupMap[e.className])().then((function(t){return{constructor:t,properties:e.properties}}))}function f(e){return v(e.url).then((function(e){return e.tileInfo}))}function h(e){return!e.url||e.url.match(/\/\d+$/)?l.resolve({}):e.load().then((function(){return e.fetchData()})).then((function(t){return t&&Array.isArray(t.layers)?1===t.layers.length&&{id:t.layers[0].id}:v(e.url).then((function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}}))}))}function v(e){return o(e,{responseType:"json",query:{f:"json"}}).then((function(e){return e.data}))}Object.defineProperty(t,"__esModule",{value:!0}),t.fromItem=function(e){return!e.portalItem||e.portalItem instanceof u||e.portalItem.constructor&&e.portalItem.constructor._meta||(e=r({},e,{portalItem:new u(e.portalItem)})),(t=e.portalItem,t.load().then(y).then(d)).then((function(t){var i=r({portalItem:e.portalItem},t.properties);return l.resolve(new(0,t.constructor)(i))}));var t},t.selectLayerClassPath=y}).apply(null,i))||(e.exports=n)},wke2:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("Q2wQ"),r("HZ3d"),r("9opi"),r("qKT0"),r("Gtr7"),r("qMld"),r("Vx27"),r("N7S/"),r("lRq4"),r("nrlZ"),r("pMLx"),r("YaB4"),r("OQ/g"),r("M3W5"),r("f3JK")],void 0===(n=(function(e,t,r,i,n,o,a,s,l,p,u,c,y,d,f,h,v,g){var m=c.create(),b=[0,0],w=new g(0,0,0,0);return function(e){function t(t){var r=e.call(this,t)||this;return r._imagePromise=null,r.hidpi=!1,r.imageMaxWidth=2048,r.imageMaxHeight=2048,r.imageRotationSupported=!1,r.imageNormalizationSupported=!1,r.update=l.debounce((function(e,t){return n(r,void 0,void 0,(function(){var r,n,o,a,s,l,p,u,c=this;return i(this,(function(i){return n=y.getInfo((r=e.state).spatialReference),o=this.hidpi?e.pixelRatio:1,!e.stationary||this.destroyed?[2]:(this.imageRotationSupported?(b[0]=r.size[0],b[1]=r.size[1]):h.getOuterSize(b,r),a=Math.floor(b[0]*o)>this.imageMaxWidth||Math.floor(b[1]*o)>this.imageMaxHeight,s=n&&(r.extent.xmin<n.valid[0]||r.extent.xmax>n.valid[1]),l=!this.imageNormalizationSupported&&s,p=this.imageRotationSupported?r.rotation:0,a||l?(u=Math.min(this.imageMaxWidth,this.imageMaxHeight),l&&(u=Math.min(r.worldScreenWidth,u)),this._imagePromise=this._tiledExport(r,u,p,o,t)):this._imagePromise=this._singleExport(r,b,p,o,t),[2,this._imagePromise.then((function(e){c._imagePromise=null;var t=c.container.children.slice();c.container.removeAllChildren(),e.forEach(c.container.addChild,c.container),c.disposeSource&&t.forEach((function(e){c.disposeSource(e.source)}),c)})).catch((function(e){throw c._imagePromise=null,e}))])}))}))}),5e3),r}return o(t,e),t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"updating",{get:function(){return null!==this._imagePromise},enumerable:!0,configurable:!0}),t.prototype.updateExports=function(e){for(var t=0,r=this.container.children;t<r.length;t++){var i=r[t];if(!i.visible||!i.attached)return;e(i)?console.error("ExportStrategy.updateExports doesn't support promise yet"):(i.invalidateTexture(),i.requestRender())}},t.prototype._export=function(e,t,r,i,n,o){var a=this;return l.resolve().then((function(){return a.fetchSource(e,Math.floor(t*n),Math.floor(r*n),{rotation:i,pixelRatio:n,signal:o})})).then((function(r){var o=new f.Bitmap(r);return o.x=e.xmin,o.y=e.ymax,o.resolution=e.width/t,o.rotation=i,o.pixelRatio=n,o}))},t.prototype._singleExport=function(e,t,r,i,n){h.getBBox(m,e.center,e.resolution,t);var o=new u(m[0],m[1],m[2],m[3],e.spatialReference);return this._export(o,t[0],t[1],r,i,n).then((function(e){return[e]}))},t.prototype._tiledExport=function(e,t,r,i,n){var o=this,a=d.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),s=new v(a),p=s.getTileCoverage(e);if(!p)return null;var c=[];return p.forEach((function(a,l,p,y){w.set(a,l,p,y),s.getTileBounds(m,w);var d=new u(m[0],m[1],m[2],m[3],e.spatialReference);c.push(o._export(d,t,t,r,i,n))})),l.all(c)},a([p.property()],t.prototype,"_imagePromise",void 0),a([p.property()],t.prototype,"container",void 0),a([p.property()],t.prototype,"disposeSource",void 0),a([p.property()],t.prototype,"fetchSource",void 0),a([p.property()],t.prototype,"hidpi",void 0),a([p.property()],t.prototype,"imageMaxWidth",void 0),a([p.property()],t.prototype,"imageMaxHeight",void 0),a([p.property()],t.prototype,"imageRotationSupported",void 0),a([p.property()],t.prototype,"imageNormalizationSupported",void 0),a([p.property()],t.prototype,"requestUpdate",void 0),a([p.property({dependsOn:["_imagePromise"]})],t.prototype,"updating",null),a([p.subclass("esri.views.2d.layers.support.ExportStrategy")],t)}(p.declared(s))}).apply(null,i))||(e.exports=n)},zBTX:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("rg9i"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){return e.call(this,t)||this}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({customLayerParameters:o.clone(this.customLayerParameters),customParameters:o.clone(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})},i([a.property({json:{type:Object,write:!0}})],t.prototype,"customLayerParameters",void 0),i([a.property({json:{type:Object,write:!0}})],t.prototype,"customParameters",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"layerIdentifier",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"tileMatrixSet",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"url",void 0),n=i([a.subclass("esri.layer.support.WMTSLayerInfo")],t)}(a.declared(n.JSONSupport));t.WMTSLayerInfo=s,t.default=s}).apply(null,i))||(e.exports=n)}}]);