(function(){(this||window).webpackJsonp.registerAbsMids({"arcgis-js-api/views/2d/engine/vectorTiles/style/StyleDefinition":"+6dI","arcgis-js-api/views/2d/engine/vectorTiles/tileInfoUtils":"0btR","arcgis-js-api/layers/mixins/ArcGISService":"2fnV","esri/views/2d/engine/vectorTiles/style/StyleRepository":"Am75","arcgis-js-api/views/2d/engine/vectorTiles/style/StyleRepository":"Am75","arcgis-js-api/layers/support/TilemapCache":"Cobz","arcgis-js-api/views/2d/engine/vectorTiles/style/Filter":"Ismy","arcgis-js-api/views/2d/engine/vectorTiles/style/StyleProperty":"KXmM","arcgis-js-api/portal/support/jsonContext":"OECU","arcgis-js-api/views/2d/engine/vectorTiles/style/VectorTileSource":"OpTb","arcgis-js-api/layers/mixins/PortalLayer":"QJ8R","arcgis-js-api/layers/VectorTileLayer":"UW67","esri/views/2d/engine/vectorTiles/style/StyleLayer":"UXHw","arcgis-js-api/views/2d/engine/vectorTiles/style/StyleLayer":"UXHw","arcgis-js-api/core/LRUCache":"W6K4","arcgis-js-api/layers/mixins/ArcGISCachedService":"WhPF","esri/views/2d/engine/vectorTiles/GeometryUtils":"c9QS","arcgis-js-api/views/2d/engine/vectorTiles/GeometryUtils":"c9QS","arcgis-js-api/layers/support/serviceTileInfoProperty":"ddAr","arcgis-js-api/layers/support/SpriteSource":"iS0c","arcgis-js-api/layers/support/vectorTileLayerLoader":"qBbE","esri/core/MemCache":"r7jh","arcgis-js-api/core/MemCache":"r7jh","arcgis-js-api/views/2d/engine/vectorTiles/SchemaHelper":"rN/e","arcgis-js-api/views/2d/engine/vectorTiles/TileIndex":"soIt","esri/views/2d/engine/webgl/definitions":"tI6k","arcgis-js-api/views/2d/engine/webgl/definitions":"tI6k","arcgis-js-api/layers/support/Tilemap":"xojL"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[31,44,115],{"+6dI":function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}},e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}},e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}},e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}},e}();t.StyleDefinition=i}).apply(null,r))||(e.exports=n)},"0btR":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("pMLx")],void 0===(n=(function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=1e-6;t.areSchemasOverlapping=function(e,t){if(e===t)return!0;if(!e&&null!=t)return!1;if(null!=e&&!t)return!1;if(!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;var i,n,a=e.origin,o=t.origin;if(Math.abs(a.x-o.x)>=r||Math.abs(a.y-o.y)>=r)return!1;e.lods[0].scale>t.lods[0].scale?(i=e,n=t):(n=e,i=t);for(var l=i.lods[0].scale;l>=n.lods[n.lods.length-1].scale-r;l/=2)if(Math.abs(l-n.lods[0].scale)<r)return!0;return!1},t.unionTileInfos=function(e,t){if(e===t)return e;if(!e&&null!=t)return t;if(null!=e&&!t)return e;for(var r=e.size[0],n=e.format,a=e.dpi,o={x:e.origin.x,y:e.origin.y},l=e.spatialReference.toJSON(),s=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],u=(e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1]).scale,p=[],c=s.scale,y=s.resolution,f=0;c>u;)p.push({level:f,resolution:y,scale:c}),f++,c/=2,y/=2;return new i({size:[r,r],dpi:a,format:n||"pbf",origin:o,lods:p,spatialReference:l})}}).apply(null,r))||(e.exports=n)},"2fnV":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("qsST"),i("Vx27"),i("8CIp")],void 0===(n=(function(e,t,i,r,n,a,o){Object.defineProperty(t,"__esModule",{value:!0});var l=n.getLogger("esri.layers.mixins.ArcGISService");t.ArcGISService=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=o.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",o.sanitizeUrl(e,l))},enumerable:!0,configurable:!0}),r([a.property({dependsOn:["url"]})],t.prototype,"title",null),r([a.property({type:String})],t.prototype,"url",null),r([a.subclass("esri.layers.mixins.ArcGISService")],t)}(a.declared(e))}}).apply(null,r))||(e.exports=n)},Am75:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("H1tY"),i("UXHw")],void 0===(n=(function(e,t,i,r){return function(){function e(t,r){if(this.backgroundBucketIds=[],this._layerByName={},this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=r?r.spriteUrl:t.sprite,this.glyphs=r?r.glyphsUrl:t.glyphs,i("stable-symbol-rendering")){var n=(t.layers||[]).filter((function(e){return e.layout&&e.layout["text-font"]}))[0];n&&(t.layers||[]).forEach((function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=n.layout["text-font"])}))}if(this.layers=(t.layers||[]).map(e._create),this.layers)for(var a=void 0,o=0;o<this.layers.length;o++)this._layerByName[(a=this.layers[o]).id.toLowerCase()]=a,0===a.type&&this.backgroundBucketIds.push(o);this._identifyRefLayers()}return e.prototype.isPainterDataDriven=function(e){var t=this._layerByName[e.toLowerCase()];return!!t&&t.isPainterDataDriven()},e.prototype.getStyleLayerId=function(e){return e>=this.layers.length?null:this.layers[e].id},e.prototype.getLayoutProperties=function(e){var t=this._layerByName[e.toLowerCase()];return t?t.layout:null},e.prototype.getPaintProperties=function(e){var t=this._layerByName[e.toLowerCase()];return t?t.paint:null},e.prototype.setPaintProperties=function(t,i){var r=this._layerByName[t.toLowerCase()];if(!r)return"";var n=this.layers.indexOf(r);this.styleJSON.layers[n].paint=i;var a=e._recreateLayer({id:r.id,type:r.typeName,source:r.source,sourceLayer:r["source-layer"],minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:i},r);return this.layers[n]=a,this._layerByName[r.id.toLowerCase()]=a,r.id},e.prototype.setLayoutProperties=function(t,i){var r=this._layerByName[t.toLowerCase()];if(!r)return"";var n=this.layers.indexOf(r);this.styleJSON.layers[n].layout=i;var a=e._recreateLayer({id:r.id,type:r.typeName,source:r.source,sourceLayer:r["source-layer"],minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},r);return this.layers[n]=a,this._layerByName[r.id.toLowerCase()]=a,r.id},e.prototype._identifyRefLayers=function(){for(var e=[],t=[],i=0,r=0,n=this.layers;r<n.length;r++){var a=n[r];if(1===a.type){var o=a,l=a.source+"|"+a.sourceLayer;l+="|"+JSON.stringify(a.layout&&a.layout.visibility),l+="|"+JSON.stringify(a.minzoom),l+="|"+JSON.stringify(a.maxzoom),l+="|"+JSON.stringify(a.filter),(o.hasDataDrivenFill||o.hasDataDrivenOutline)&&(l+="|"+JSON.stringify(i)),e.push({key:l,layer:a})}if(2===a.type){var s=a;l=a.source+"|"+a.sourceLayer,l+="|"+JSON.stringify(a.layout&&a.layout.visibility),l+="|"+JSON.stringify(a.minzoom),l+="|"+JSON.stringify(a.maxzoom),l+="|"+JSON.stringify(a.filter),l+="|"+JSON.stringify(a.layout&&a.layout["line-cap"]),l+="|"+JSON.stringify(a.layout&&a.layout["line-join"]),s.hasDataDrivenLine&&(l+="|"+JSON.stringify(i)),t.push({key:l,layer:a})}++i}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}));for(var t,i,r=e.length,n=0;n<r;n++){var a=e[n];if(a.key===t)a.layer.refLayerId=i;else if(t=a.key,i=a.layer.id,1===a.layer.type&&!a.layer.getPaintProperty("fill-outline-color"))for(var o=n+1;o<r;o++){var l=e[o];if(l.key!==t)break;if(l.layer.getPaintProperty("fill-outline-color")){e[n]=l,e[o]=a,i=l.layer.id;break}}}},e._create=function(e,t,i){var n=1-(1+t)*(1/(i.length+1));switch(e.type){case"background":return new r.BackgroundStyleLayer(0,e,n);case"fill":return new r.FillStyleLayer(1,e,n);case"line":return new r.LineStyleLayer(2,e,n);case"symbol":return new r.SymbolStyleLayer(3,e,n);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new r.CircleStyleLayer(4,e,n)}throw new Error("Unknown vector tile layer")},e._recreateLayer=function(e,t){switch(e.type){case"background":return new r.BackgroundStyleLayer(0,e,t.z);case"fill":return new r.FillStyleLayer(1,e,t.z);case"line":return new r.LineStyleLayer(2,e,t.z);case"symbol":return new r.SymbolStyleLayer(3,e,t.z);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new r.CircleStyleLayer(4,e,t.z)}},e}()}).apply(null,r))||(e.exports=n)},Cobz:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("9opi"),i("qKT0"),i("Q2wQ"),i("HZ3d"),i("zp6E"),i("Gtr7"),i("ma1f"),i("eIBl"),i("qsST"),i("W6K4"),i("KBgh"),i("qMld"),i("afW+"),i("jfWY"),i("8MXS"),i("Vx27"),i("xojL")],void 0===(n=(function(e,t,i,r,n,a,o,l,s,u,p,c,y,f,h,d,m,v,_,g){Object.defineProperty(t,"__esModule",{value:!0}),t.TILEMAP_SIZE_EXP=5;var b=c.getLogger("esri.layers.support.TilemapCache"),S=function(e){function s(t){var i=e.call(this,t)||this;return i._handles=new p,i._pendingTilemapRequests={},i._availableLevels={},i.levels=5,i.cacheByteSize=2097152,i.request=l,i._prefetchingEnabled=!0,i}var c;return r(s,e),c=s,s.prototype.initialize=function(){var e=this;this._tilemapCache=new y(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),v.init(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()},s.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},s.prototype.castLevels=function(e){return e<=2?(b.error("Minimum levels for Tilemap is 3, but got ",e),3):e},Object.defineProperty(s.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0}),s.prototype.fetchTilemap=function(e,t,r,n){var a=this;if(!this._availableLevels[e])return h.reject(new u("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"));var o=this._tmpTilemapDefinition,l=this._tilemapFromCache(e,t,r,o);if(l)return h.resolve(l);var s=n&&n.signal;return n=i({},n,{signal:null}),h.create((function(e,t){h.onAbort(s,(function(){return t(h.createAbortError())}));var i=g.tilemapDefinitionId(o),r=a._pendingTilemapRequests[i];if(!r){r=g.Tilemap.fromDefinition(o,n).then((function(e){return a._tilemapCache.put(i,e,e.byteSize),e}));var l=function(){return delete a._pendingTilemapRequests[i]};a._pendingTilemapRequests[i]=r,r.then(l,l)}r.then(e,t)}))},s.prototype.getAvailability=function(e,t,i){if(!this._availableLevels[e])return"unavailable";var r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"},s.prototype.getAvailabilityUpsample=function(e,t,i,r){r.level=e,r.row=t,r.col=i;var n=this.layer.tileInfo;for(n.updateTileInfo(r);;){var a=this.getAvailability(r.level,r.row,r.col);if("unavailable"!==a)return a;if(!n.upsampleTile(r))return"unavailable"}},s.prototype.fetchAvailability=function(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch((function(e){return e})).then((function(r){if(r instanceof g.Tilemap){var n=r.getAvailability(t,i);return"unavailable"===n?h.reject(new u("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i})):n}if(h.isAbortError(r))throw r;return"unknown"})):h.reject(new u("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"))},s.prototype.fetchAvailabilityUpsample=function(e,t,i,r,n){var a=this;r.level=e,r.row=t,r.col=i;var o=this.layer.tileInfo;o.updateTileInfo(r);var l=this.fetchAvailability(e,t,i,n).catch((function(e){if(h.isAbortError(e))throw e;if(o.upsampleTile(r))return a.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,l),l},s.prototype._fetchAvailabilityUpsamplePrefetch=function(e,t,r,n,l,s){return o(this,void 0,void 0,(function(){var o,u,p,y,f,m,v,_,g;return a(this,(function(a){switch(a.label){case 0:if(!this._prefetchingEnabled)return[2];if(this._handles.has(o="prefetch-"+e))return[2];u=h.createAbortController(),s.then((function(){return u.abort()}),(function(){return u.abort()})),p=!1,this._handles.add({remove:function(){p||(p=!0,u.abort())}},o),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d.waitTicks(10,u.signal)];case 2:case 3:return a.sent(),[3,4];case 4:if(p||(p=!0,this._handles.remove(o)),h.isAborted(u))return[2];for(y={id:e,level:t,row:r,col:n},f=i({},l,{signal:u.signal}),m=this.layer.tileInfo,v=function(e){var t=_.fetchAvailability(y.level,y.row,y.col,f);c._prefetches.push(t);var i=function(){c._prefetches.removeUnordered(t)};t.then(i,i)},_=this,g=0;c._prefetches.length<c._maxPrefetch&&m.upsampleTile(y);++g)v();return[2]}}))}))},s.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?m.objectToQuery(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}},s.prototype._tilemapFromCache=function(e,t,i,r){var n=this._getTilemapDefinition(e,t,i,r),a=g.tilemapDefinitionId(n);return this._tilemapCache.get(a)},s.prototype._getTilemapDefinition=function(e,i,r,n){n.level=e;var a=e>t.TILEMAP_SIZE_EXP;return n.row=a?i-i%this.size:i,n.col=a?r-r%this.size:r,n},s.prototype._initializeAvailableLevels=function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))},Object.defineProperty(s.prototype,"test",{get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,i,r){return!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}},enumerable:!0,configurable:!0}),s._maxPrefetch=4,s._prefetches=new f({initialSize:c._maxPrefetch}),n([_.property({constructOnly:!0,type:Number})],s.prototype,"levels",void 0),n([_.cast("levels")],s.prototype,"castLevels",null),n([_.property({readOnly:!0,dependsOn:["levels"],type:Number})],s.prototype,"size",null),n([_.property({constructOnly:!0,type:Number})],s.prototype,"cacheByteSize",void 0),n([_.property({constructOnly:!0})],s.prototype,"layer",void 0),n([_.property({constructOnly:!0})],s.prototype,"request",void 0),c=n([_.subclass("esri.layers.support.TilemapCache")],s)}(_.declared(s));t.TilemapCache=S}).apply(null,r))||(e.exports=n)},Ismy:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){return function(){function e(t,i,r){this._op=t,"$type"===i?(this._val=r instanceof Array?r.map((function(t){return e._types.indexOf(t)})):e._types.indexOf(r),this._op+=11):(this._key=i,this._val=r)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,i=this._val;t<i.length;t++)if(i[t].filter(e))return!0;return!1;case 10:for(var r=0,n=this._val;r<n.length;r++)if(!n[r].filter(e))return!1;return!0;case 11:for(var a=0,o=this._val;a<o.length;a++)if(o[a].filter(e))return!1;return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type);case 20:return void 0!==e.values[this._key];case 21:return void 0===e.values[this._key]}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var i=t[0];if(t.length<=1)return new e(0,void 0,"any"!==i);switch(i){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));case"has":return new e(20,t[1],void 0);case"!has":return new e(21,t[1],void 0);default:throw new Error("invalid operator: "+i)}},e._types=["Unknown","Point","LineString","Polygon"],e}()}).apply(null,r))||(e.exports=n)},KXmM:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("QDcU"),i("c9QS")],void 0===(n=(function(e,t,i,r){return function(){function e(t,i){var r;switch(this.isDataDriven=!1,t.type){case"number":r=!0;break;case"color":r=!0,i=e._parseColor(i);break;case"array":r="number"===t.value;break;default:r=!1}null==i&&(i=t.default),r&&"interval"===i.type&&(r=!1);var n=i&&i.stops&&i.stops.length>0;if(n)for(var a=0,o=i.stops;a<o.length;a++){var l=o[a];l[1]=this._validate(l[1],t)}if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(void 0!==i.default&&(i.default=this._validate(i.default,t)),n)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,t);break;case"categorical":this.getValue=this._buildCategorical(i,t);break;default:this.getValue=r?this._buildInterpolate(i,t):this._buildInterval(i,t)}else this.getValue=this._buildIdentity(i,t);else n?this.getValue=r?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,t),this.getValue=this._buildSimple(i))}return e.prototype._validate=function(e,t){if("number"===t.type){if(e<t.minimum)return t.minimum;if(e>t.maximum)return t.maximum}return e},e.prototype._buildSimple=function(e){return function(){return e}},e.prototype._buildIdentity=function(t,i){var r=this;return function(n,a){var o;return a&&(o=a.values[t.property],"color"===i.type&&(o=e._parseColor(o))),void 0===o&&(o=t.default),void 0!==o?r._validate(o,i):i.default}},e.prototype._buildCategorical=function(e,t){var i=this;return function(r,n){var a;return n&&(a=n.values[e.property]),void 0!==(a=i._categorical(a,e.stops))?a:void 0!==e.default?e.default:t.default}},e.prototype._buildInterval=function(e,t){var i=this;return function(r,n){var a;return n&&(a=n.values[e.property]),"number"==typeof a?i._interval(a,e.stops):void 0!==e.default?e.default:t.default}},e.prototype._buildInterpolate=function(e,t){var i=this;return function(r,n){var a;return n&&(a=n.values[e.property]),"number"==typeof a?i._interpolate(a,e.stops,e.base||1):void 0!==e.default?e.default:t.default}},e.prototype._buildZoomInterpolate=function(e){var t=this;return function(i){return t._interpolate(i,e.stops,e.base||1)}},e.prototype._buildZoomInterval=function(e){var t=this;return function(i){return t._interval(i,e.stops)}},e.prototype._categorical=function(e,t){for(var i=t.length,r=0;r<i;r++)if(t[r][0]===e)return t[r][1]},e.prototype._interval=function(e,t){for(var i=t.length,r=0,n=0;n<i&&t[n][0]<=e;n++)r=n;return t[r][1]},e.prototype._interpolate=function(e,t,i){for(var n,a,o=t.length,l=0;l<o;l++){var s=t[l];if(!(s[0]<=e)){a=s;break}n=s}if(n&&a){var u=a[0]-n[0],p=e-n[0],c=1===i?p/u:(Math.pow(i,p)-1)/(Math.pow(i,u)-1);if(Array.isArray(n[1])){var y=n[1],f=a[1],h=[];for(l=0;l<y.length;l++)h.push(r.interpolate(y[l],f[l],c));return h}return r.interpolate(n[1],a[1],c)}return n?n[1]:a?a[1]:void 0},e._isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"!=typeof t)return t&&t.default&&(t.default=e._parseColor(t.default)),t&&t.stops&&(t.stops=t.stops.map((function(t){return[t[0],e._parseColor(t[1])]}))),t;var r=new i(t);return this._isEmpty(r)?void 0:i.toUnitRGBA(r)},e}()}).apply(null,r))||(e.exports=n)},OECU:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("jfWY"),i("Qwus")],void 0===(n=(function(e,t,i,r){Object.defineProperty(t,"__esModule",{value:!0}),t.createForItem=function(e){return{origin:"portal-item",url:i.urlToObject(e.itemUrl),portal:e.portal||r.getDefault()}}}).apply(null,r))||(e.exports=n)},OpTb:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("Q2wQ"),i("HZ3d"),i("rg9i"),i("jfWY"),i("N7S/"),i("ddAr"),i("Cobz"),i("soIt")],void 0===(n=(function(e,t,i,r,n,a,o,l,s,u){return function(){function e(e,t,i){this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=e,this.sourceUrl=t,t&&(this.parsedUrl=a.urlToObject(this.sourceUrl));var r=n.clone(i),p=r.tiles;t&&p.forEach((function(e,i){a.isAbsolute(e)||(p[i]=a.join(t,e))})),this.tileServers=p,i.tileMap&&(this.tileMapURL=a.join(t,i.tileMap));var c=i.capabilities&&i.capabilities.split(",").map((function(e){return e.toLowerCase().trim()})),y=!!i.exportTilesAllowed,f=!!c&&-1!==c.indexOf("tilemap"),h=y&&i.hasOwnProperty("maxExportTilesCount")?i.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:y,supportsTileMap:f},exportTiles:y?{maxExportTilesCount:+h}:null},this.tileInfo=l.readServiceTileInfo(r.tileInfo,r,null,{ignoreMinMaxLOD:!0}),f&&(this.type="vector-tile",this.tilemapCache=new s.TilemapCache({layer:this}),this.tilemapCache&&(this.tileIndex=new u(this.tilemapCache))),this.fullExtent=o.fromJSON(i.fullExtent)}return e.prototype.getRefKey=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(i){return this.tileIndex?[2,this.tileIndex.dataKey(e,t)]:[2,e]}))}))},e.prototype.getSourceTileUrl=function(e,t,i){return this.tileServers[t%this.tileServers.length].replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,i.toString())},e.prototype.isCompatibleWith=function(e){var t=this.tileInfo,i=e.tileInfo;if(!t.spatialReference.equals(i.spatialReference))return!1;if(!t.origin.equals(i.origin))return!1;if(Math.round(t.dpi)!==Math.round(i.dpi))return!1;for(var r=t.lods,n=i.lods,a=Math.min(r.length,n.length),o=0;o<a;o++){var l=r[o],s=n[o];if(l.level!==s.level||Math.round(l.scale)!==Math.round(s.scale))return!1}return!0},e}()}).apply(null,r))||(e.exports=n)},QJ8R:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("Q2wQ"),i("HZ3d"),i("ma1f"),i("qsST"),i("qMld"),i("jfWY"),i("Vx27"),i("Qwus"),i("QmTF")],void 0===(n=(function(e,t,r,n,a,o,l,s,u,p,c,y,f){Object.defineProperty(t,"__esModule",{value:!0});var h=s.getLogger("esri.layers.mixins.PortalLayer");t.PortalLayer=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"portalItem",{set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))},enumerable:!0,configurable:!0}),t.prototype.readPortalItem=function(e,t,i){if(t.itemId)return new f({id:t.itemId,portal:i&&i.portal})},t.prototype.writePortalItem=function(e,t){e&&e.id&&(t.itemId=e.id)},t.prototype.loadFromPortal=function(e,t){return o(this,void 0,void 0,(function(){var r,n;return a(this,(function(a){switch(a.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.create((function(e){return Promise.all([i.e(0),i.e(98)]).then((function(){var t=[i("6hwa")];e.apply(null,t)}).bind(this)).catch(i.oe)}))];case 2:return r=a.sent(),u.throwIfAborted(t),[4,r.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)];case 3:return[2,a.sent()];case 4:throw n=a.sent(),h.warn("Failed to load layer ("+this.title+", "+this.id+") portal item ("+this.portalItem.id+")\n  "+n),n;case 5:return[2]}}))}))},t.prototype.read=function(e,t){var i=arguments;t&&(t.layer=this),this.inherited(i)},t.prototype.write=function(e,t){var i=t&&t.portal,r=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||y.getDefault());return i&&r&&!p.hasSamePortal(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new l("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)},n([c.property({type:f})],t.prototype,"portalItem",null),n([c.reader("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),n([c.writer("portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),n([c.subclass("esri.layers.mixins.PortalLayer")],t)}(c.declared(e))}}).apply(null,r))||(e.exports=n)},UW67:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("9opi"),i("qKT0"),i("Q2wQ"),i("HZ3d"),i("zp6E"),i("ma1f"),i("J3YA"),i("EUqE"),i("qMld"),i("jfWY"),i("jfWY"),i("Vx27"),i("N7S/"),i("Z4y+"),i("0RER"),i("WhPF"),i("2fnV"),i("FEX1"),i("QJ8R"),i("OXmT"),i("iS0c"),i("pMLx"),i("Cobz"),i("qBbE"),i("OECU"),i("rN/e"),i("0btR"),i("Am75")],void 0===(n=(function(e,t,i,r,n,a,o,l,s,u,p,c,y,f,h,d,m,v,_,g,b,S,T,I,D,w,x,L,O,P,E){return function(e){function t(t,i){var r=e.call(this,t)||this;return r._spriteSourceMap=new Map,r.currentStyleInfo=null,r.style=null,r.isReference=null,r.operationalLayerType="VectorTileLayer",r.type="vector-tile",r.url=null,r}return r(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.prefetchResources=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.loadSpriteSource(u.devicePixelRatio||1,e)];case 1:return t.sent(),[2]}}))}))},t.prototype.load=function(e){var t=this,r=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).then((function(){return o(t,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return this.portalItem&&this.portalItem.id?[4,l(t=this.portalItem.itemUrl+"/resources/styles/root.json",i({},e,{query:{f:"json"}}))]:[2];case 1:return r.sent().data&&this.read({url:t},L.createForItem(this.portalItem)),[2]}}))}))})).then((function(){return t._loadStyle(e)}),(function(){return t._loadStyle(e)}));return this.addResolvingPromise(r),this.when()},Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){var e=this.currentStyleInfo,t=e&&e.serviceUrl&&f.urlToObject(e.serviceUrl);return t?this._getDefaultAttribution(t.path):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"capabilities",{get:function(){var e=this._getPrimarySource();return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullExtent",{get:function(){var e=this._getPrimarySource();return e?e.fullExtent:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this.serviceUrl?y.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0}),t.prototype.writeStyleUrl=function(e,t){e&&f.isProtocolRelative(e)&&(e="https:"+e),t.styleUrl=e},Object.defineProperty(t.prototype,"tileIndexType",{get:function(){var e=this._getPrimarySource();return e?e.type:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileIndexUrl",{get:function(){var e=this._getPrimarySource();return e?e.tileMapURL:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileInfo",{get:function(){var e=[];for(var t in this.sourceNameToSource)e.push(this.sourceNameToSource[t]);var i=this._getPrimarySource().tileInfo;if(e.length>1)for(var r=0;r<e.length;r++)P.areSchemasOverlapping(i,e[r].tileInfo)&&(i=P.unionTileInfos(i,e[r].tileInfo));return i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilemapCache",{get:function(){var e=this._getPrimarySource();return e&&e.capabilities.operations.supportsTileMap?e.tilemapCache:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileServers",{get:function(){var e=this._getPrimarySource();return e?e.tileServers:[]},enumerable:!0,configurable:!0}),t.prototype.readVersion=function(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)},Object.defineProperty(t.prototype,"compatibleTileInfo256",{get:function(){return O.create256x256CompatibleTileInfo(this.tileInfo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compatibleTileInfo512",{get:function(){return O.create512x512CompatibleTileInfo(this.tileInfo)},enumerable:!0,configurable:!0}),t.prototype.loadSpriteSource=function(e,t){return void 0===e&&(e=1),o(this,void 0,void 0,(function(){var i,r;return a(this,(function(n){return this._spriteSourceMap.has(e)||(i=new I.default(this.styleRepository.sprite,e),this._spriteSourceMap.set(e,i.load())),r=this._spriteSourceMap.get(e),[2,c.create((function(e,i){r.then(e,i),c.onAbortOrThrow(t,i)}))]}))}))},t.prototype.loadStyle=function(e,t){return o(this,void 0,void 0,(function(){var i,r,n,o=this;return a(this,(function(a){return i=e||this.style||this.url,this._loadingPromise&&"string"==typeof i&&this.url===i&&!c.isAborted(this._abortController)?[2,this._loadingPromise]:((r=this._abortController)&&r.abort(),n=c.createAbortController(),this._loadingPromise=c.create((function(e,r){var a={signal:n.signal};o._spriteSourceMap.clear(),o._getSourceAndStyle(i,a).then(e,r),c.onAbort(t,(function(){n.abort()}))})),this._abortController=n,[2,this._loadingPromise])}))}))},t.prototype.getStyleLayerId=function(e){return this.styleRepository.getStyleLayerId(e)},t.prototype.getPaintProperties=function(e){return this.styleRepository.getPaintProperties(e)},t.prototype.setPaintProperties=function(e,t){var i=this.styleRepository.isPainterDataDriven(e),r=this.styleRepository.setPaintProperties(e,t),n=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layer:r,paint:t}),(i||n)&&this.emit("layout-change",{layer:r,layout:this.styleRepository.getLayoutProperties(e)})},t.prototype.getLayoutProperties=function(e){return this.styleRepository.getLayoutProperties(e)},t.prototype.setLayoutProperties=function(e,t){var i=this.styleRepository.setLayoutProperties(e,t);this.emit("layout-change",{layer:i,layout:t})},t.prototype.getTileUrl=function(e,t,i){return this.tileServers[t%this.tileServers.length].replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,i.toString())},t.prototype.write=function(e,t){return t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new s("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[e,t])},t.prototype._getSourceAndStyle=function(e,t){return o(this,void 0,void 0,(function(){var i;return a(this,(function(r){switch(r.label){case 0:if(!e)throw new Error("invalid style!");return[4,x.loadMetadata(e,t)];case 1:return i=r.sent(),this._set("currentStyleInfo",{serviceUrl:i.serviceUrl,styleUrl:i.styleUrl,spriteUrl:i.spriteUrl,glyphsUrl:i.glyphsUrl,style:i.style,layerDefinition:i.layerDefinition}),"string"==typeof e?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set("sourceNameToSource",i.sourceNameToSource),this._set("primarySourceName",i.primarySourceName),this._set("styleRepository",new E(i.style,i)),this.read(i.layerDefinition,{origin:"service"}),[2]}}))}))},t.prototype._getDefaultAttribution=function(e){var t=e.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(t){var i=t[3]&&t[3].toLowerCase();if(i)for(var r=t[2]||"",n=0,a=["OpenStreetMap_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"];n<a.length;n++){var o=a[n];if(o.toLowerCase().indexOf(i)>-1)return f.normalize("//static.arcgis.com/attribution/Vector"+r+"/"+o)}}},t.prototype._getPrimarySource=function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null},t.prototype._loadStyle=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return this._loadingPromise?[2,this._loadingPromise]:[2,this.loadStyle(null,e)]}))}))},n([h.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],t.prototype,"attributionDataUrl",null),n([h.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n([h.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"capabilities",null),n([h.property({readOnly:!0})],t.prototype,"currentStyleInfo",void 0),n([h.property({json:{read:!1},readOnly:!0,type:d,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"fullExtent",null),n([h.property()],t.prototype,"style",void 0),n([h.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),n([h.property({type:["VectorTileLayer"]})],t.prototype,"operationalLayerType",void 0),n([h.property({readOnly:!0,dependsOn:["serviceUrl"]})],t.prototype,"parsedUrl",null),n([h.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],t.prototype,"serviceUrl",null),n([h.property({type:m,dependsOn:["tileInfo"],readOnly:!0})],t.prototype,"spatialReference",null),n([h.property({readOnly:!0})],t.prototype,"styleRepository",void 0),n([h.property({readOnly:!0})],t.prototype,"sourceNameToSource",void 0),n([h.property({readOnly:!0})],t.prototype,"primarySourceName",void 0),n([h.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],t.prototype,"styleUrl",null),n([h.writer(["portal-item","web-document"],"styleUrl")],t.prototype,"writeStyleUrl",null),n([h.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"tileIndexType",null),n([h.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"tileIndexUrl",null),n([h.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:D,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"tileInfo",null),n([h.property({json:{read:!1},readOnly:!0,type:w.TilemapCache,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"tilemapCache",null),n([h.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],t.prototype,"tileServers",null),n([h.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],t.prototype,"type",void 0),n([h.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],t.prototype,"url",void 0),n([h.property({readOnly:!0})],t.prototype,"version",void 0),n([h.reader("version",["version","currentVersion"])],t.prototype,"readVersion",null),n([h.property({readOnly:!0,dependsOn:["tileInfo"]})],t.prototype,"compatibleTileInfo256",null),n([h.property({readOnly:!0,dependsOn:["tileInfo"]})],t.prototype,"compatibleTileInfo512",null),n([h.subclass("esri.layers.VectorTileLayer")],t)}(h.declared(T.ScaleRangeLayer(_.ArcGISCachedService(g.ArcGISService(b.OperationalLayer(S.PortalLayer(p.MultiOriginJSONMixin(v))))))))}).apply(null,r))||(e.exports=n)},UXHw:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xhoE"),i("Ismy"),i("+6dI"),i("KXmM"),i("tI6k")],void 0===(n=(function(e,t,i,r,n,a,o){Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t,i){switch(this.type=e,this.typeName=t.type,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=i,e){case 0:this._layoutDefinition=n.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=n.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=n.StyleDefinition.fillLayoutDefinition,this._paintDefinition=n.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=n.StyleDefinition.lineLayoutDefinition,this._paintDefinition=n.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=n.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=n.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=n.StyleDefinition.circleLayoutDefinition,this._paintDefinition=n.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=r.createFilter(this.filter)},e.prototype.getLayoutProperty=function(e){var t=this._layoutProperties;if(t)return t[e]},e.prototype.getPaintProperty=function(e){var t=this._paintProperties;if(t)return t[e]},e.prototype.getLayoutValue=function(e,t,i){var r,n=this._layoutProperties;if(n){var a=n[e];a&&(r=a.getValue(t,i))}var o=this._layoutDefinition[e];return void 0===r&&(r=o.default),"enum"===o.type&&(r=o.values.indexOf(r)),r},e.prototype.getPaintValue=function(e,t,i){var r,n=this._paintProperties;if(n){var a=n[e];a&&(r=a.getValue(t,i))}var o=this._paintDefinition[e];return void 0===r&&(r=o.default),"enum"===o.type&&(r=o.values.indexOf(r)),r},e.prototype.isPainterDataDriven=function(){var e=this._paintProperties;if(e)for(var t in e)if(e[t].isDataDriven)return!0;return!1},e.prototype._parseLayout=function(e){var t={};for(var i in e){var r=this._layoutDefinition[i];r&&(t[i]=new a(r,e[i]))}return t},e.prototype._parsePaint=function(e){var t={};for(var i in e){var r=this._paintDefinition[i];r&&(t[i]=new a(r,e[i]))}return t},e}();t.StyleLayer=l;var s=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return i(t,e),t}(l);t.BackgroundStyleLayer=s;var u=function(e){function t(t,i,r){var n=e.call(this,t,i,r)||this,a=n.getPaintProperty("fill-color");n.hasDataDrivenColor=!!a&&a.isDataDriven;var o=n.getPaintProperty("fill-opacity");n.hasDataDrivenOpacity=!!o&&o.isDataDriven,n.hasDataDrivenFill=n.hasDataDrivenColor||n.hasDataDrivenOpacity;var l=n.getPaintProperty("fill-outline-color");return n.outlineUsesFillColor=!l,n.hasDataDrivenOutlineColor=!!l&&l.isDataDriven,n.hasDataDrivenOutline=(l?n.hasDataDrivenOutlineColor:n.hasDataDrivenColor)||n.hasDataDrivenOpacity,n}return i(t,e),t}(l);t.FillStyleLayer=u;var p=function(e){function t(t,i,r){var a=e.call(this,t,i,r)||this,l=a.getPaintProperty("line-color");a.hasDataDrivenColor=!!l&&l.isDataDriven;var s=a.getPaintProperty("line-opacity");a.hasDataDrivenOpacity=!!s&&s.isDataDriven;var u=a.getPaintProperty("line-width");a.hasDataDrivenWidth=!!u&&u.isDataDriven,a.hasDataDrivenLine=a.hasDataDrivenColor||a.hasDataDrivenOpacity||a.hasDataDrivenWidth;var p=i.paint["line-width"];return p||(p=n.StyleDefinition.linePaintDefinition["line-width"].default),a.isThinLine=!a.hasDataDrivenWidth&&"number"==typeof p&&p<o.THIN_LINE_THRESHOLD,a}return i(t,e),t}(l);t.LineStyleLayer=p;var c=function(e){function t(t,i,r){var n=e.call(this,t,i,r)||this,a=n.getPaintProperty("icon-color");n.hasDataDrivenIconColor=!!a&&a.isDataDriven;var o=n.getPaintProperty("icon-opacity");n.hasDataDrivenIconOpacity=!!o&&o.isDataDriven;var l=n.getLayoutProperty("icon-size");n.hasDataDrivenIconSize=!!l&&l.isDataDriven,n.hasDataDrivenIcon=n.hasDataDrivenIconColor||n.hasDataDrivenIconOpacity||n.hasDataDrivenIconSize;var s=n.getPaintProperty("text-color");n.hasDataDrivenTextColor=!!s&&s.isDataDriven;var u=n.getPaintProperty("text-opacity");n.hasDataDrivenTextOpacity=!!u&&u.isDataDriven;var p=n.getLayoutProperty("text-size");return n.hasDataDrivenTextSize=!!p&&p.isDataDriven,n.hasDataDrivenText=n.hasDataDrivenTextColor||n.hasDataDrivenTextOpacity||n.hasDataDrivenTextSize,n}return i(t,e),t}(l);t.SymbolStyleLayer=c;var y=function(e){function t(t,i,r){var n=e.call(this,t,i,r)||this,a=n.getPaintProperty("circle-radius");n.hasDataDrivenRadius=!!a&&a.isDataDriven;var o=n.getPaintProperty("circle-color");n.hasDataDrivenColor=!!o&&o.isDataDriven;var l=n.getPaintProperty("circle-opacity");n.hasDataDrivenOpacity=!!l&&l.isDataDriven;var s=n.getPaintProperty("circle-stroke-width");n.hasDataDrivenStrokeWidth=!!s&&s.isDataDriven;var u=n.getPaintProperty("circle-stroke-color");n.hasDataDrivenStrokeColor=!!u&&u.isDataDriven;var p=n.getPaintProperty("circle-stroke-opacity");n.hasDataDrivenStrokeOpacity=!!p&&p.isDataDriven;var c=n.getPaintProperty("circle-blur");return n.hasDataDrivenBlur=!!c&&c.isDataDriven,n}return i(t,e),t}(l);t.CircleStyleLayer=y,t.LineLayout=function(e,t,i){this.cap=e.getLayoutValue("line-cap",t,i),this.join=e.getLayoutValue("line-join",t,i),this.miterLimit=e.getLayoutValue("line-miter-limit",t,i),this.roundLimit=e.getLayoutValue("line-round-limit",t,i)},t.IconLayout=function(e,t,i,r){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t,r),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t,r),this.optional=e.getLayoutValue("icon-optional",t,r),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t,r),this.size=e.getLayoutValue("icon-size",t,r),this.rotate=e.getLayoutValue("icon-rotate",t,r),this.padding=e.getLayoutValue("icon-padding",t,r),this.keepUpright=e.getLayoutValue("icon-keep-upright",t,r),this.offset=e.getLayoutValue("icon-offset",t,r),2===this.rotationAlignment&&(this.rotationAlignment=i?0:1)},t.TextLayout=function(e,t,i,r){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t,r),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t,r),this.optional=e.getLayoutValue("text-optional",t,r),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t,r),this.fontArray=e.getLayoutValue("text-font",t,r),this.maxWidth=e.getLayoutValue("text-max-width",t,r),this.lineHeight=e.getLayoutValue("text-line-height",t,r),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t,r),this.justify=e.getLayoutValue("text-justify",t,r),this.anchor=e.getLayoutValue("text-anchor",t,r),this.maxAngle=e.getLayoutValue("text-max-angle",t,r),this.size=e.getLayoutValue("text-size",t,r),this.rotate=e.getLayoutValue("text-rotate",t,r),this.padding=e.getLayoutValue("text-padding",t,r),this.keepUpright=e.getLayoutValue("text-keep-upright",t,r),this.transform=e.getLayoutValue("text-transform",t,r),this.offset=e.getLayoutValue("text-offset",t,r),2===this.rotationAlignment&&(this.rotationAlignment=i?0:1)}}).apply(null,r))||(e.exports=n)},W6K4:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("r7jh")],void 0===(n=(function(e,t,i){return function(){function e(e,t){this._storage=new i.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t,i){this._storage.put(e,t,i,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e},enumerable:!0,configurable:!0}),e}()}).apply(null,r))||(e.exports=n)},WhPF:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("9opi"),i("qKT0"),i("TMur"),i("Vx27"),i("ddAr"),i("Cobz")],void 0===(n=(function(e,t,i,r,n,a,o,l,s){Object.defineProperty(t,"__esModule",{value:!0}),t.ArcGISCachedService=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyright=null,t.minScale=0,t.maxScale=0,t.spatialReference=null,t.tileInfo=null,t.tilemapCache=null,t}return r(t,e),t.prototype.readMinScale=function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0},t.prototype.readMaxScale=function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0},Object.defineProperty(t.prototype,"supportsBlankTile",{get:function(){return this.version>=10.2},enumerable:!0,configurable:!0}),t.prototype.readTilemapCache=function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new s.TilemapCache({layer:this}):null},n([o.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),n([o.property()],t.prototype,"minScale",void 0),n([o.reader("service","minScale")],t.prototype,"readMinScale",null),n([o.property()],t.prototype,"maxScale",void 0),n([o.reader("service","maxScale")],t.prototype,"readMaxScale",null),n([o.property({type:a.SpatialReference})],t.prototype,"spatialReference",void 0),n([o.property({readOnly:!0,dependsOn:["version"]})],t.prototype,"supportsBlankTile",null),n([o.property(l.serviceTileInfoProperty)],t.prototype,"tileInfo",void 0),n([o.property()],t.prototype,"tilemapCache",void 0),n([o.reader("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),n([o.property()],t.prototype,"version",void 0),n([o.subclass("esri.layers.mixins.ArcGISCachedService")],t)}(o.declared(e))}}).apply(null,r))||(e.exports=n)},c9QS:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){function i(e,t){return(e%=t)>=0?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var r=1/Math.LN2;t.positiveMod=i,t.radToByte=function(e){return i(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return i(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*r},t.sqr=function(e){return e*e},t.interpolate=function(e,t,i){return e*(1-i)+t*i},t.between=function(e,t,i){return e>=t&&e<=i||e>=i&&e<=t}}).apply(null,r))||(e.exports=n)},ddAr:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("pMLx")],void 0===(n=(function(e,t,i,r){function n(e,t,n,a){if(!e)return null;var o=t.minScale,l=t.maxScale,s=t.minLOD,u=t.maxLOD;if(null!=s&&null!=u)return r.fromJSON(a&&a.ignoreMinMaxLOD?e:i({},e,{lods:e.lods.filter((function(e){var t=e.level;return null!=t&&t>=s&&t<=u}))}));if(0!==o&&0!==l){var p=function(e){return Math.round(1e4*e)/1e4},c=o?p(o):1/0,y=l?p(l):-1/0;return r.fromJSON(i({},e,{lods:e.lods.filter((function(e){var t=p(e.scale);return t<=c&&t>=y}))}))}return r.fromJSON(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.serviceTileInfoProperty={type:r,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:n}}}}},t.readServiceTileInfo=n}).apply(null,r))||(e.exports=n)},iS0c:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xhoE"),i("qKT0"),i("2Atf"),i("Q2wQ"),i("HZ3d"),i("zp6E"),i("ma1f"),i("H1tY"),i("qsST"),i("qMld")],void 0===(n=(function(e,t,i,r,n,a,o,l,s,u,p,c){Object.defineProperty(t,"__esModule",{value:!0});var y=p.getLogger("esri.layers.support.SpriteSource"),f=function(){function e(e,t){this.baseURL=e,this.devicePixelRatio=t,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}return Object.defineProperty(e.prototype,"spriteNames",{get:function(){var e=[];for(var t in this._spritesData)e.push(t);return e.sort(),e},enumerable:!0,configurable:!0}),e.prototype.getSpriteInfo=function(e){return this._spritesData[e]},e.prototype.load=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:if(c.throwIfAborted(e),this.loadStatus="loading",!this.baseURL)return[2,c.resolve(this)];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._loadSprites(e)];case 2:return t.sent(),this.loadStatus="loaded",[3,4];case 3:return t.sent(),this.loadStatus="failed",[3,4];case 4:return[2,this]}}))}))},e.prototype._loadSprites=function(e){var t=this;this._isRetina=this.devicePixelRatio>1.15;var i=this.baseURL,r=this._isRetina?"@2x":"",a=""+i+r+".png";return c.all([l(i+r+".json",e),l(a,n({responseType:"image"},e))]).then((function(e){var r=e[0],n=e[1],a=Object.keys(r.data);if(!a||0===a.length||1===a.length&&"_ssl"===a[0]||!n||!n.data)return t._spritesData=t.image=null,t.width=t.height=0,c.resolve(null);t._spritesData=r.data;var o=n.data,l=Math.max(u("esri-webgl-max-texture-size"),4096);if(o.width>l||o.height>l){var p="Sprite resource for style "+i+" is bigger than the maximum allowed of "+l+" pixels}";throw y.error(p),new s("SpriteSource",p)}t.width=o.width,t.height=o.height;var f=document.createElement("canvas"),h=f.getContext("2d");f.width=o.width,f.height=o.height,h.drawImage(o,0,0,o.width,o.height);for(var d,m=h.getImageData(0,0,o.width,o.height),v=new Uint8Array(m.data),_=0;_<v.length;_+=4)v[_]=v[_]*(d=v[_+3]/255),v[_+1]=v[_+1]*d,v[_+2]=v[_+2]*d;t.image=v}))},e}();t.default=f}).apply(null,r))||(e.exports=n)},qBbE:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("Q2wQ"),i("HZ3d"),i("0J3i"),i("zp6E"),i("qMld"),i("jfWY"),i("OpTb")],void 0===(n=(function(e,t,i,r,n,a,o,l,s,u){function p(e){if(e){var t=s.getOrigin(e);m&&-1===m.indexOf(t)&&m.push(t)}}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=void 0,r=0;r<e.length;++r)if(s.isProtocolRelative(e[r])){if(i){var n=i.split("://")[0];i=n+":"+e[r].trim()}}else i=s.isAbsolute(e[r])?e[r]:s.join(i,e[r]);return s.removeTrailingSlash(i)}function y(e,t,a,u,c){return n(this,void 0,void 0,(function(){var n,y,m,v,_,g;return r(this,(function(r){switch(r.label){case 0:return l.throwIfAborted(c),"string"!=typeof a?[3,2]:(p(v=s.normalize(a)),_=s.urlToObject(v),[4,o(_.path,i({query:{f:"json"},responseType:"json"},c))]);case 1:return m=r.sent(),n=v,y=v,[3,3];case 2:m={data:a},n=a.jsonUrl||null,y=u,r.label=3;case 3:return g=m.data,m.ssl&&(n&&(n=n.replace(/^http:/i,"https:")),y&&(y=y.replace(/^http:/i,"https:"))),f(g)?(e.styleUrl=n||null,[2,h(e,g,y,c)]):function(e){return!f(e)}(g)?e.sourceUrl?[2,d(e,g,y,!1,t,c)]:(e.sourceUrl=n||null,[2,d(e,g,y,!0,t,c)]):[2,l.reject("You must specify the URL or the JSON for a service or for a style.")]}}))}))}function f(e){return!!e.sources}function h(e,t,i,a){return n(this,void 0,void 0,(function(){var n,o,u,f,h,d;return r(this,(function(r){switch(r.label){case 0:return n=i?s.removeFile(i):s.appBaseUrl,e.styleBase=n,e.style=t,e.styleUrl&&p(e.styleUrl),o=[],t.sources&&t.sources.esri?(u=t.sources.esri).url?[4,y(e,"esri",c(n,u.url),void 0,a)]:[3,2]:[3,3];case 1:return r.sent(),[3,3];case 2:o.push(y(e,"esri",u,n,a)),r.label=3;case 3:for(f=0,h=Object.keys(t.sources);f<h.length;f++)"esri"!==(d=h[f])&&"vector"===t.sources[d].type&&o.push(t.sources[d].url?y(e,d,c(n,t.sources[d].url),void 0,a):y(e,d,t.sources[d],n,a));return[4,l.all(o)];case 4:return r.sent(),[2]}}))}))}function d(e,t,i,a,o,f){return n(this,void 0,void 0,(function(){var n,h,d,m;return r(this,(function(r){if(n=i?s.removeTrailingSlash(i)+"/":s.appBaseUrl,h=function(e,t){if(e.hasOwnProperty("tileInfo"))return e;for(var i={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},r=78271.51696400007,n=295828763.7957775,a=[],o=e.hasOwnProperty("minzoom")?parseFloat(e.minzoom):0,l=e.hasOwnProperty("maxzoom")?parseFloat(e.maxzoom):16,s=0;s<=l;s++)s>=o&&a.push({level:s,scale:n,resolution:r}),r/=2,n/=2;for(var u=0,y=e.tiles;u<y.length;u++)p(c(t,y[u]));return{capabilities:"TilesOnly",initialExtent:i,fullExtent:i,minScale:a[0].scale,maxScale:a[a.length-1].scale,tiles:e.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:a,spatialReference:{wkid:102100}}}}(t,n),d=new u(o,n,h),!a&&e.primarySourceName in e.sourceNameToSource){if(!(m=e.sourceNameToSource[e.primarySourceName]).isCompatibleWith(d))return[2,l.resolve()];null!=d.fullExtent&&(null!=m.fullExtent?m.fullExtent.union(d.fullExtent):m.fullExtent=d.fullExtent.clone()),m.tileInfo.lods.length<d.tileInfo.lods.length&&(m.tileInfo=d.tileInfo)}return a?(e.sourceBase=n,e.source=t,e.validatedSource=h,e.primarySourceName=o,e.sourceUrl&&p(e.sourceUrl)):p(n),e.sourceNameToSource[o]=d,e.style?[2]:null==t.defaultStyles?[2,l.reject()]:"string"==typeof t.defaultStyles?[2,y(e,"",c(n,t.defaultStyles,"root.json"),void 0,f)]:[2,y(e,"",t.defaultStyles,c(n,"root.json"),f)]}))}))}Object.defineProperty(t,"__esModule",{value:!0});var m=a.defaults&&a.defaults.io.corsEnabledServers;t.loadMetadata=function(e,t){return n(this,void 0,void 0,(function(){var i,n,a,o,l,u;return r(this,(function(r){switch(r.label){case 0:return i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:""},o=(n="string"==typeof e?[e,null]:[null,e.jsonUrl])[1],l=(a=n[0])?s.urlToObject(a):null,[4,y(i,"esri",e,o,t)];case 1:return r.sent(),p((u={layerDefinition:i.validatedSource,url:a,parsedUrl:l,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style.sprite&&c(i.styleBase,i.style.sprite),glyphsUrl:i.style.glyphs&&c(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName}).spriteUrl),p(u.glyphsUrl),[2,u]}}))}))}}).apply(null,r))||(e.exports=n)},r7jh:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9sIV"),i("KBgh"),i("nRUF")],void 0===(n=(function(e,t,i,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_PRIORITY=-3;var a=function(){function e(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0}),e.prototype.resetHitRate=function(){this._hit=this._miss=0},e.prototype.destroy=function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)},e.prototype.put=function(e,t,i,r){void 0===r&&(r=0),this._storage.put(this._namespace+e,t,i,r)},e.prototype.get=function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t},e.prototype.pop=function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t},e.prototype.updateSize=function(e,t,i){this._storage.updateSize(this._namespace+e,t,i)},e.prototype.clear=function(){this._storage.clear(this._namespace)},e.prototype.clearAll=function(){this._storage.clearAll()},e.prototype.getStats=function(){return this._storage.getStats()},e.prototype.resetStats=function(){this._storage.resetStats()},e}();t.MemCache=a;var o=function(){function e(e){void 0===e&&(e=10485760),this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new r}return e.prototype.register=function(e){this._users.push(e)},e.prototype.deregister=function(e){this._users.removeUnordered(e)},e.prototype.registerRemoveFunc=function(e,t){this._removeFuncs.push([e,t])},e.prototype.deregisterRemoveFunc=function(e){this._removeFuncs=this._removeFuncs.filter((function(t){return t[0]!==e}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,i,r,n){var a=this._db.get(e);if(a&&(this._size-=a.size,this._db.delete(e),a.entry!==i&&this._notifyRemoved(e,a.entry)),r>this._maxSize)this._notifyRemoved(e,i);else if(void 0!==i)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var o=1+Math.max(n,t.MIN_PRIORITY)-t.MIN_PRIORITY;this._db.set(e,{entry:i,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")},e.prototype.updateSize=function(e,t,i){var r=this._db.get(e);if(r&&r.entry===t){if(this._size-=r.size,i>this._maxSize)return void this._notifyRemoved(e,t);r.size=i,this._size+=i,this._checkSizeLimit()}},e.prototype.pop=function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss},e.prototype.get=function(e){var t=this._db.get(e);return void 0===t?void++this._miss:(this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry)},e.prototype.getStats=function(){var e=this,i={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},a=new Array;this._db.forEach((function(t,i){var o=t.lifetime;a[o]=(a[o]||0)+t.size,e._users.forEach((function(e){var a=e.namespace;n.startsWith(i,a)&&(r[a]=(r[a]||0)+t.size)}))}));var o={};this._users.forEach((function(e){var t=e.namespace;!isNaN(e.hitRate)&&e.hitRate>0?(r[t]=r[t]||0,o[t]=Math.round(100*e.hitRate)+"%"):o[t]="0%"}));var l=Object.keys(r);l.forEach((function(t){return r[t]=r[t]/e._size*100})),l.sort((function(e,t){return r[t]-r[e]})),l.forEach((function(e){return i[e]=Math.round(r[e])+"% / "+o[e]}));for(var s=a.length-1;s>=0;--s){var u=a[s];u&&(i["Priority "+(s+t.MIN_PRIORITY-1)]=Math.round(u/this.size*100)+"%")}return i},e.prototype.resetStats=function(){this._hit=this._miss=0,this._users.forEach((function(e){return e.resetHitRate()}))},e.prototype.clear=function(e){var t=this;this._db.forEach((function(i,r){n.startsWith(r,e)&&(t._size-=i.size,t._db.delete(r),t._notifyRemoved(r,i.entry))}))},e.prototype.clearAll=function(){var e=this;this._db.forEach((function(t,i){e._notifyRemoved(i,t.entry)})),this._size=0,this._db.clear()},e.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)},e.prototype._notifyRemoved=function(e,t){this._removeFuncs.forEach((function(i){n.startsWith(e,i[0])&&i[1](t)}))},e.prototype._checkSizeLimit=function(){var e=this;this._size<=this._maxSize||i.someMap(this._db,(function(t,i){return e._db.delete(i),t.lives<=1?(e._size-=t.size,e._notifyRemoved(i,t.entry)):(--t.lives,e._db.set(i,t)),e._size<=.9*e.maxSize}))},e}();t.MemCacheStorage=o}).apply(null,r))||(e.exports=n)},"rN/e":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("r2fF"),i("pMLx")],void 0===(n=(function(e,t,i,r){return function(){function e(e,t){this.lockedSchemaPixelSize=e,this.isGCS=t}return e.prototype.getLevelRowColumn=function(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e},e.prototype.adjustLevel=function(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e},e.prototype.getShift=function(e,t){var i=0,r=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(i=t),e[1]%2&&(r=t)),[i,r]},e.prototype.getScale=function(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2},e.create256x256CompatibleTileInfo=function(e){if(!e)return null;if(256===e.size[0]&&256===e.size[1])return e;for(var t=e.spatialReference.isGeographic,n=[],a=e.lods.length,o=0;o<a;o++){var l=e.lods[o];n.push(new i({level:l.level,scale:l.scale,resolution:t?l.resolution:2*l.resolution}))}return new r({size:[256,256],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:n})},e.create512x512CompatibleTileInfo=function(e){if(!e)return null;if(256===e.size[0]||256===e.size[1])return null;for(var t=[],n=e.lods.length,a=0;a<n;a++){var o=e.lods[a];t.push(new i({level:o.level,scale:o.scale,resolution:.5*o.resolution}))}return new r({size:[512,512],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:t})},e}()}).apply(null,r))||(e.exports=n)},soIt:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("qMld"),i("Cobz"),i("f3JK")],void 0===(n=(function(e,t,i,r,n){return function(){function e(e){if(e instanceof r.TilemapCache)this._tilemapCache=e;else{if(!(e&&"index"in e))throw new Error("Invalid tilemap!");this._tilemap=e.index}}return e.prototype.dataKey=function(e,t){if(this._tilemapCache){var r=e.level,a=e.row,o=e.col,l=new n(e);return this._tilemapCache.fetchAvailabilityUpsample(r,a,o,l,t).then((function(){return l})).catch((function(e){if(i.isAbortError(e))throw e;return l.level=r,l.row=a,l.col=o,l}))}return this._getIndexedDataKey(e)},e.prototype.forEach=function(e,t,i,r,n){this._callback=n,this._maxLevel=t+e,this._forEach(this._tilemap,t,i,r)},e.prototype._forEach=function(e,t,i,r){0!==e&&(this._callback(t,i,r),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*i,2*r),this._forEach(e[1],t+1,2*i,2*r+1),this._forEach(e[2],t+1,2*i+1,2*r),this._forEach(e[3],t+1,2*i+1,2*r+1)))},e.prototype._getIndexedDataKey=function(e){var t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return i.resolve(null);for(var r=e;0!==r.level;)r=new n(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);var a,o,l=this._tilemap,s=t.pop();if(1===l)return i.resolve(s);for(;t.length;)if(o=(1&(a=t.pop()).col)+((1&a.row)<<1),l){if(0===l[o]){s=null;break}if(1===l[o]){s=a;break}s=a,l=l[o]}return i.resolve(s)},e}()}).apply(null,r))||(e.exports=n)},tI6k:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGL_MAX_STOPS=8,t.WEBGL_MAX_INNER_STOPS=t.WEBGL_MAX_STOPS-2,t.NAN_MAGIC_NUMBER=1e-30,t.EXTRUDE_SCALE=64,t.PICTURE_FILL_COLOR=4294967295,t.TILE_SIZE=512,t.RASTER_TILE_SIZE=256,t.ANGLE_FACTOR_256=256/360,t.DEBUG_LABELS=!1,t.COLLISION_BUCKET_SIZE=128,t.DOT_DENSITY_MAX_FIELDS=8,t.COLLISION_MAX_ZOOM_DELTA=3,t.COLLISION_EARLY_REJECT_BUCKET_SIZE=16,t.COLLISION_BOX_PADDING=16,t.COLLISION_TILE_BOX_SIZE=t.TILE_SIZE/t.COLLISION_BUCKET_SIZE,t.COLLISION_PLACEMENT_PADDING=8,t.HEURISTIC_GLYPHS_PER_LINE=50,t.HEURISTIC_GLYPHS_PER_FEATURE=10,t.GLYPH_SIZE=24,t.TEXT_LINE_HEIGHT=1.2*t.GLYPH_SIZE,t.TEXT_MAX_WIDTH=10*t.GLYPH_SIZE,t.TEXT_SPACING=0,t.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}},t.ATTRIBUTE_STORE_TEXTURE_SIZE=1024,t.TEXTURE_BINDING_SPRITE_ATLAS=0,t.TEXTURE_BINDING_GLYPH_ATLAS=0,t.TEXTURE_BINDING_BITMAP=0,t.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1,t.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2,t.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3,t.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4,t.TEXTURE_BINDING_HIGHLIGHT_0=5,t.TEXTURE_BINDING_HIGHLIGHT_1=6,t.TEXTURE_BINDING_RENDERER_0=5,t.TEXTURE_BINDING_RENDERER_1=6,t.ATTRIBUTE_DATA_FILTER_FLAGS=0,t.ATTRIBUTE_DATA_ANIMATION=1,t.ATTRIBUTE_DATA_VV=2,t.ATTRIBUTE_DATA_DD0=3,t.ATTRIBUTE_DATA_DD1=3,t.MAX_FILTERS=2,t.HIGHLIGHT_FLAG=1,t.FILTER_FLAG_0=2,t.EFFECT_FLAG_0=4,t.THIN_LINE_THRESHOLD=2.5,t.HITTEST_SEARCH_SIZE=24,t.MAX_ANIMATION_TIME_MS=2e3,t.VTL_TEXTURE_BINDING_UNIT_SPRITES=5,t.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6,t.VTL_HIGH_RES_CUTOFF=1.15,t.MAX_GPU_UPLOADS_PER_FRAME=2}).apply(null,r))||(e.exports=n)},xojL:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("zp6E"),i("KY0m"),i("ma1f"),i("rg9i")],void 0===(n=(function(e,t,i,r,n,a,o){function l(e){var t;if("vector-tile"===e.service.type)t=e.service.url+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height;else{var i=e.service.tileServers;t=(i&&i.length?i[e.row%i.length]:e.service.url)+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height}var r=e.service.query;return r&&(t=t+"?"+r),t}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return e.prototype.getAvailability=function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var i=(e-this.location.top)*this.location.width+(t-this.location.left),r=i>>3,n=this._tileAvailabilityBitSet;return r<0||r>n.length?"unknown":n[r]&1<<i%8?"available":"unavailable"},e.prototype._updateFromData=function(e){for(var t=!0,i=!0,r=Math.ceil(this.location.width*this.location.height/8),n=new Uint8Array(r),a=0,o=0;o<e.length;o++){var l=o%8;e[o]?(i=!1,n[a]|=1<<l):t=!1,7===l&&++a}i?this._allAvailability="unavailable":t?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=n,this.byteSize+=n.length)},e.fromDefinition=function(t,o){var s=t.service.request||r,u=t.row,p=t.col,c=t.width,y=t.height,f={query:{f:"json"}};return o=o?i({},f,o):f,s(l(t),o).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:u,left:p,width:c,height:y},valid:!0,data:n.constant(c*y,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==u||t.location.left!==p||t.location.width!==c||t.location.height!==y))throw new a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:u,left:p,width:c,height:y}});return e.fromJSON(t)}))},e.fromJSON=function(t){e.validateJSON(t);var i=new e;return i.location=Object.freeze(o.clone(t.location)),i._updateFromData(t.data),Object.freeze(i)},e.validateJSON=function(e){if(!e||!e.location)throw new a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")},e}();t.Tilemap=s,t.tilemapDefinitionId=function(e){return e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height},t.tilemapDefinitionUrl=l,t.default=s}).apply(null,r))||(e.exports=n)}}]);