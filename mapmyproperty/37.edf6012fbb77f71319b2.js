(function(){var e={"arcgis-js-api/renderers/visualVariables/support/SizeStop":"/3kq","arcgis-js-api/views/2d/layers/FeatureLayerView2D":"/Ck8","arcgis-js-api/renderers/support/clickToleranceUtils":"/E+R","arcgis-js-api/views/layers/support/Path":"20TT","arcgis-js-api/views/2d/layers/LayerView2D":"6i4F","arcgis-js-api/views/layers/support/ClipRect":"7MXx","arcgis-js-api/views/layers/FeatureLayerView":"8iBb","arcgis-js-api/layers/support/commonProperties":"EtsK","esri/layers/support/commonProperties":"EtsK","arcgis-js-api/renderers/visualVariables/support/VisualVariableLegendOptions":"Flzk","arcgis-js-api/views/2d/engine/webgl/visualVariablesUtils":"G59t","esri/views/2d/engine/webgl/visualVariablesUtils":"G59t","esri/geometry/geometryAdapters/json":"H9Hv","arcgis-js-api/views/layers/support/popupUtils":"I6zq","arcgis-js-api/views/support/drapedUtils":"NbdF","arcgis-js-api/layers/graphics/data/projectionSupport":"Q2Em","esri/layers/graphics/data/projectionSupport":"Q2Em","arcgis-js-api/renderers/visualVariables/support/SizeVariableLegendOptions":"RpYp","arcgis-js-api/views/2d/layers/support/FeatureLayerProxy":"WbzV","arcgis-js-api/renderers/visualVariables/VisualVariable":"WecP","arcgis-js-api/views/layers/LayerView":"WsO6","arcgis-js-api/views/layers/support/ClipArea":"ZMIQ","arcgis-js-api/views/layers/support/FeatureEffect":"dDbr","arcgis-js-api/views/layers/support/FeatureFilter":"e4th","arcgis-js-api/views/layers/support/Transition":"gd70","arcgis-js-api/views/layers/support/ParsedFeatureEffect":"iO/m","arcgis-js-api/AggregateGraphic":"jci6","arcgis-js-api/views/2d/tiling/TileManager":"kkaA","esri/renderers/visualVariables/SizeVariable":"n7H0","arcgis-js-api/renderers/visualVariables/SizeVariable":"n7H0","arcgis-js-api/views/2d/layers/features/support/pixelBuffering":"oWCy","arcgis-js-api/renderers/support/LegendOptions":"sHoj","arcgis-js-api/views/2d/layers/features/tileRenderers":"sQ+t","arcgis-js-api/views/layers/support/Geometry":"ts8o","arcgis-js-api/views/2d/layers/graphics/graphicsUtils":"wjMf"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"/3kq":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("jBNx"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o){"use strict";return function(e){function t(t){var r=e.call(this,t)||this;return r.label=null,r.size=null,r.value=null,r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({label:this.label,size:this.size,value:this.value})},r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),r.__decorate([o.property({type:Number,cast:n.toPt,json:{write:!0}})],t.prototype,"size",void 0),r.__decorate([o.property({type:Number,json:{write:!0}})],t.prototype,"value",void 0),i=r.__decorate([o.subclass("esri.renderers.visualVariables.support.SizeStop")],t)}(i.JSONSupport)}).apply(null,i))||(e.exports=n)},"/Ck8":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("jci6"),r("TMur"),r("jZlN"),r("KY0m"),r("y4WC"),r("ma1f"),r("H1tY"),r("rg9i"),r("qsST"),r("R2Zq"),r("LxLY"),r("qMld"),r("8MXS"),r("Vx27"),r("Q2Em"),r("/E+R"),r("w1v0"),r("IpeC"),r("tI6k"),r("6i4F"),r("493N"),r("sQ+t"),r("oWCy"),r("w0Ef"),r("WbzV"),r("+MAT"),r("kkaA"),r("8iBb"),r("WsO6"),r("7XLS"),r("e4th"),r("dDbr"),r("NbdF")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p,c,d,h,f,y,v,_,m,g,b,x,w,S,E,O,R,j,M,P,V,F,z,I,T,q){"use strict";var L=c.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!0,t._updatingPipelineConfig=!1,t._onGoingEdits=0,t._isRefreshing=!1,t._viewStateId=-1,t._visibilityOverrides=new Set,t._effect=null,t._highlightIds=new Map,t._lastPixelBuffer=0,t.filter=null,t.doRefresh=f.debounce((function(){return r.__awaiter(t,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this._onGoingEdits=0,this.isUpdating()?[4,y.whenFalseOnce(this,"updating")]:[3,2];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),this._set("_isRefreshing",!0),this._lockGPUUploads(),[4,this._proxy.refresh()];case 3:return t.sent(),this._unlockGPUUploads(),this._set("_isRefreshing",!1),[3,5];case 4:return e=t.sent(),f.isAbortError(e)||L.error(e),[3,5];case 5:return[2]}}))}))})),t._doUpdate=f.debounce((function(){return r.__awaiter(t,void 0,void 0,(function(){var e,t,i,n,o,s,a,l,u,p,c,v,_,m;return r.__generator(this,(function(g){switch(g.label){case 0:return this.destroyed||!this._hasRequiredSupport(this.layer)?[2]:(this._set("_updatingPipelineConfig",!0),[4,y.whenFalseOnce(this,"_isRefreshing")]);case 1:return g.sent(),t=(e=this).effect,i=e.filter,[4,this._updateRequiredFields()];case 2:return g.sent(),this.destroyed?[2]:(n=this._getEffectiveRenderer().renderer,this._set("_effectiveRenderer",n),o=M.toJSONGeometryType(this.layer.geometryType),[4,O.computePxBuffer(n,o,this.layer.featureReduction)]);case 3:return s=g.sent(),a=this._createConfiguration(i,t),this._lastPixelBuffer=0===s?0:Math.max(s,this._lastPixelBuffer),a.schema.source.pixelBuffer=this._lastPixelBuffer,l=this._createTileRendererHash(n),this.destroyed?[2]:l===this._tileRendererHash?[3,11]:[4,this._initTileRenderer(n)];case 4:return g.sent(),this.destroyed?[2]:[4,this._createServiceOptions()];case 5:return u=g.sent(),this.destroyed?[2]:(this.effects.forEach((function(e){return h.isSome(e)&&h.isSome(e.filter)&&e.filter.enable()})),this.tileRenderer.onConfigUpdate(n),[4,this._proxy.startup(this.view.featuresTilingScheme,a,u)]);case 6:return g.sent(),[4,this._proxy.updateTiles({added:this._tileStrategy.tileKeys(),removed:[]})];case 7:return g.sent(),this.destroyed?[2]:this.hasHighlight()?[4,this._proxy.setHighlight(d.keysOfMap(this._highlightIds))]:[3,9];case 8:g.sent(),g.label=9;case 9:return this.destroyed?[2]:[4,this._onceTilesUpdated()];case 10:return g.sent(),this.destroyed?[2]:(this.tileRenderer.onConfigUpdate(n),[3,26]);case 11:return[4,this._proxy.update(a,!0)];case 12:if(p=g.sent(),this.destroyed)return[2];if(!p.queryFilter)return[3,17];this._lockGPUUploads(),g.label=13;case 13:return g.trys.push([13,15,,16]),[4,this._proxy.invalidate(p)];case 14:return g.sent(),[3,16];case 15:return c=g.sent(),f.isAbortError(c)||L.error(c),[3,16];case 16:return this.destroyed?[2]:(this._unlockGPUUploads(),[3,25]);case 17:return g.trys.push([17,19,,20]),[4,this._proxy.invalidate(r.__assign(r.__assign({},p),{mesh:!1}))];case 18:return g.sent(),[3,20];case 19:return v=g.sent(),f.isAbortError(v)||L.error(v),[3,20];case 20:if(this.destroyed)return[2];if(!p.mesh)return[3,25];this._lockGPUUploads(),g.label=21;case 21:return g.trys.push([21,23,,24]),[4,this._proxy.invalidate({mesh:!0,targets:{aggregate:null===(m=p.targets)||void 0===m?void 0:m.aggregate}})];case 22:return g.sent(),[3,24];case 23:return _=g.sent(),f.isAbortError(_)||L.error(_),[3,24];case 24:this._unlockGPUUploads(),g.label=25;case 25:if(this.destroyed)return[2];this._proxy.resume(),this.effects.forEach((function(e){return h.isSome(e)&&h.isSome(e.filter)&&e.filter.enable()})),this.tileRenderer.onConfigUpdate(n),this._forceAttributeTextureUpload(),g.label=26;case 26:return this._tileRendererHash=l,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}}))}))})),t._updateHighlight=f.debounce((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this._proxy.setHighlight(d.keysOfMap(this._highlightIds))]}))}))})),t}return r.__extends(t,e),t.prototype.destroy=function(){var e,t;null===(e=this._proxy)||void 0===e||e.destroy(),h.andThen(this._updateClusterSizeTask,(function(e){return e.remove()})),null===(t=this.tileRenderer)||void 0===t||t.destroy()},t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this._initProxy()),this.handles.add([this.on("valueRangesChanged",(function(t){e._set("_aggregateValueRanges",t.valueRanges)}))])},t.prototype._initProxy=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,i;return r.__generator(this,(function(r){if("stream"!==this.layer.type&&"ogc-feature"!==this.layer.type&&this.layer.isTable)throw new l("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});if(e=this.layer.spatialReference,t=n.SpatialReference.WGS84,this.layer.featureReduction&&!_.doesBrowserSupportProjection(e,t))throw new l("featurelayerview:featureReduction-not-supported","cannot project feature layer to WGS84",{inSpatialReference:e,outSpatialReference:t});return this._proxy&&this._proxy.destroy(),i=this._createClientOptions(),this._set("_proxy",new j.default({client:i})),[2,this._proxy.when()]}))}))},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return h.unwrapOr(this._effect,null)},set:function(e){var t=this._effect;h.isSome(t)&&h.isSome(t.filter)&&t.filter.enabled&&h.isSome(e)&&h.isSome(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange("effect")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.availableFields,t=this.layer,r=t.definitionExpression,i=t.renderer,n=t.labelingInfo,o="feature"===t.type?t.gdbVersion:void 0,s="feature"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,a=this.timeExtent,l="stream"===t.type?""+JSON.stringify(t.geometryDefinition)+t.definitionExpression:null,u=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:h.isSome(this.filter)&&this.filter.toJSON(),effectHash:h.isSome(this.effect)&&this.effect.toJSON(),streamFilter:l,gdbVersion:o,definitionExpression:r,historicMoment:s,availableFields:e,renderer:i,labelingInfo:t.labelsVisible&&n,timeExtent:a,clipsHash:u,featureReduction:p})},enumerable:!1,configurable:!0}),t.prototype.highlight=function(e){var t,r=this;return e instanceof o?t=[e.getObjectId()]:"number"==typeof e?t=[e]:a.isCollection(e)?t=e.map((function(e){return e&&e.getAttribute(r.layer.objectIdField)})).toArray():Array.isArray(e)&&e.length>0&&(t="number"==typeof e[0]?e:e.map((function(e){return e&&e.getAttribute(r.layer.objectIdField)}))),t&&t.length?(t=t.filter((function(e){return null!=e})),this._addHighlight(t),{remove:function(){return r._removeHighlight(t)},pause:function(){return r._removeHighlight(t)},resume:function(){return r._addHighlight(t)}}):{remove:function(){},pause:function(){},resume:function(){}}},t.prototype.hasHighlight=function(){return!!this._highlightIds.size},t.prototype.hitTest=function(e,t){return this._hitTest(e,t)},t.prototype.queryStatistics=function(){return this._proxy.queryStatistics()},t.prototype.queryFeatures=function(e,t){var r=this;return this.queryFeaturesJSON(e,t).then((function(e){var t=g.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))},t.prototype.queryFeaturesJSON=function(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)},t.prototype.queryObjectIds=function(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)},t.prototype.queryFeatureCount=function(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)},t.prototype.queryExtent=function(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((function(e){return{count:e.count,extent:n.Extent.fromJSON(e.extent)}}))},t.prototype.setVisibility=function(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()},t.prototype.update=function(e){if(this._tileStrategy&&this.tileRenderer){var t=this._tileStrategy.update(e),r=t.hasMissingTiles,i=t.added,n=t.removed;(i.length||n.length)&&this._proxy.updateTiles({added:i,removed:n}),r&&this.requestUpdate();var o=e.state;this._viewStateId!==o.id&&(this._proxy.setViewState(o),this._viewStateId=o.id),this.notifyChange("updating")}},t.prototype.attach=function(){var e=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach"),this._tileStrategy=new P.TileManager({acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(y.init(this,"renderingConfigHash",(function(){return e._update()})),"attach"),"stream"!==this.layer.type&&this.handles.add(this.layer.on("edits",(function(t){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._set("_onGoingEdits",this._onGoingEdits+1),[4,this._proxy.onEdits(t)];case 1:return e.sent(),this._set("_onGoingEdits",Math.max(0,this._onGoingEdits-1)),[2]}}))}))})),"attach")},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove("attach"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.fetchPopupFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o,a,l;return r.__generator(this,(function(r){return h.isSome(t)&&t.clientGraphics.length&&(n=t.clientGraphics[0])instanceof i?[2,[n]]:(o=this.validateFetchPopupFeatures(t))?[2,f.reject(o)]:h.isSome(t)&&0===t.clientGraphics.length?[2,f.resolve([])]:(a=this.fetchClientPopupFeatures(t),e?(l=this._fetchServicePopupFeatures(e,t),[2,f.eachAlwaysValues([a,l]).then(s.flatten)]):[2,a])}))}))},t.prototype._fetchServicePopupFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,n,o,s,a,l,u,p,c,d;return r.__generator(this,(function(r){switch(r.label){case 0:return"stream"===this.layer.type?[2,[]]:[4,this.createPopupQuery(t)];case 1:if(i=r.sent(),o=(n=this.layer).renderer,s=h.isSome(t)?t.event:null,a=m.calculateTolerance({renderer:o,event:s}),i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,a),l=new Set,u=n.objectIdField,p=h.isSome(t)?t.clientGraphics:null)for(c=0,d=p;c<d.length;c++)l.add(d[c].attributes[u]);return[2,n.queryFeatures(i).then((function(e){return e.features.filter((function(e){return!l.has(e.attributes[u])}))}))]}}))}))},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return q.createQueryGeometry(e,t,this.view)},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)},t.prototype._createClientOptions=function(){var e=this;return{setUpdating:function(t){e._set("_pipelineIsUpdating",t)},emitEvent:function(t){e.emit(t.name,t.event)}}},t.prototype._createServiceOptions=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,i,n,o,s,a,l,u;return r.__generator(this,(function(r){switch(r.label){case 0:return"stream"===(e=this.layer).type?[2,null]:(t=e.capabilities,i=e.objectIdField,n=e.fields.map((function(e){return e.toJSON()})),o=e.fullExtent&&e.fullExtent.toJSON(),s=M.toJSONGeometryType(e.geometryType),a=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,"ogc-feature"!==e.type?[3,1]:(u=function(e){return{capabilities:e.capabilities,collectionId:e.collectionId,url:e.url,layerDefinition:e.source.layerDefinition}}(e),[3,4]));case 1:return function(e){return e&&"openPorts"in e}(e.source)?[4,e.source.openPorts()]:[3,3];case 2:return u=r.sent(),[3,4];case 3:e.parsedUrl&&(u=p.clone(e.parsedUrl),"dynamicDataSource"in e&&e.dynamicDataSource&&(u.query={layer:JSON.stringify({source:e.dynamicDataSource})})),r.label=4;case 4:return[2,{type:"on-demand",maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:n,fullExtent:o,geometryType:s,objectIdField:i,source:u,timeInfo:a,spatialReference:l}]}}))}))},t.prototype._createMemoryServiceOptions=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(i){switch(i.label){case 0:return[4,e.openPorts()];case 1:return t=i.sent(),[2,r.__assign(r.__assign({},this._createServiceOptions()),{type:"memory",source:t})]}}))}))},t.prototype._cleanUpQuery=function(e){var t=b.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._createUpdateClusterSizeTask=function(e,t){var i=this;return this.watch("_aggregateValueRanges",(function(n){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(r){return this._updateClusterEffectiveRendererSizeVariable(e,t,n),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer),[2]}))}))}))},t.prototype._updateClusterEffectiveRendererSizeVariable=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function(){var n,o,s;return r.__generator(this,(function(r){return e.dynamicClusterSize&&"visualVariables"in e&&e.visualVariables&&(n=R.findSizeVV(e.visualVariables),h.isSome(n)&&"cluster_count"===n.field&&(o=e.visualVariables.indexOf(n),e.visualVariables[o]=R.createClusterCountSizeVariable(t,i),(s=e.clone()).dynamicClusterSize=!0,this._set("_effectiveRenderer",s))),[2]}))}))},t.prototype._getEffectiveRenderer=function(){var e=this.layer.renderer,t=this.layer.featureReduction;if(h.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&"cluster"===t.type&&R.isClusterCompatibleRenderer(e)){var r=t,i=[],n=R.createClusterRenderer(i,e,r,this._aggregateValueRanges);return h.andThen(this._updateClusterSizeTask,(function(e){return e.remove()})),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(n,r),{renderer:n,aggregateFields:i,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",(function(){t.requestUpdate()})),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},t.prototype._initTileRenderer=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,E.createOrReuseTileRenderer(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return t=r.sent(),this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?[2,null]:(this._proxy.tileRenderer=t,this._set("tileRenderer",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),[2,this.tileRenderer])}}))}))},t.prototype._createTileRendererHash=function(e){return("heatmap"===e.type?"heatmap":"symbol")+"."+("dot-density"===e.type)},t.prototype._createFeatureDataHash=function(e,t,r){var i=e.getAttributeHash(),n=JSON.stringify(t),o=h.isSome(r)&&JSON.stringify(r.filter),s=JSON.stringify(this.timeExtent),a="";return this._visibilityOverrides.forEach((function(e){return a+=e})),i+"."+n+"."+o+"."+s+"."+a},t.prototype._injectOverrides=function(e){var t=h.isSome(e)?e.timeExtent:null,r=this.timeExtent&&t?this.timeExtent.intersection(t):this.timeExtent||t;if(!this._visibilityOverrides.size&&!r)return e;var i=h.isSome(e)&&e.clone()||new I;return i.hiddenIds=this._visibilityOverrides,i.timeExtent=r,i},t.prototype._createConfiguration=function(e,t){var r="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,i="feature"===this.layer.type?this.layer.gdbVersion:void 0,n=new Array(x.MAX_FILTERS),o=this._injectOverrides(e);return n[0]=h.isSome(o)?o.toJSON():null,n[1]=h.isSome(t)&&t.filter?t.filter.toJSON():null,{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:i,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:n,schema:h.unwrap(S.createSchema(this,0))}},t.prototype._hasRequiredSupport=function(e){var t;return!("dot-density"===(null===(t=e.renderer)||void 0===t?void 0:t.type)&&!u("esri-webgl-texture-float")&&(L.error(new l("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),1))},t.prototype._onceTilesUpdated=function(){return this.requestUpdate(),y.whenFalseOnce(this,"_pipelineIsUpdating",!1)},t.prototype._lockGPUUploads=function(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()},t.prototype._unlockGPUUploads=function(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()},t.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()},t.prototype._update=function(){var e=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var t=this._doUpdate();this._updatingPromise=t;var r=function(){t===e._updatingPromise&&e._set("_updatingPipelineConfig",!1),e.view&&e.view.timeline.end(e.layer.title+" (FeatureLayer) Initial Pipeline Config")};t.then(r).catch((function(e){f.isAbortError(e)||L.error(e),r()}))},t.prototype._addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var n=this._highlightIds.get(i);this._highlightIds.set(i,n+1)}else this._highlightIds.set(i,1)}this._updateHighlight().catch((function(e){f.isAbortError(e)||L.error(e)}))},t.prototype._removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var n=this._highlightIds.get(i)-1;0===n?this._highlightIds.delete(i):this._highlightIds.set(i,n)}}this._updateHighlight().catch((function(e){f.isAbortError(e)||L.error(e)}))},t.prototype._createHittestResult=function(e){return e.layer=this.layer,e.sourceLayer=this.layer,h.isSome(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e},t.prototype._hitTest=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,s,a,l,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(e,t)];case 1:return 0!==(n=r.sent()).length?[3,3]:[4,f.after(1)];case 2:return r.sent(),[2,null];case 3:return function(e){return(2147483648&e)>>>31==1}(s=n[0])?[3,5]:[4,this._proxy.getFeature(s)];case 4:return l=r.sent(),[2,h.andThen(l,(function(e){return u._createHittestResult(o.fromJSON(e))}))];case 5:return[4,this._proxy.getAggregate(s)];case 6:return a=r.sent(),h.isNone(a)?[2,null]:h.isSome(a.referenceId)?[4,this._proxy.getFeature(a.referenceId)]:[3,8];case 7:return l=r.sent(),[2,h.andThen(l,(function(e){return u._createHittestResult(o.fromJSON(e))}))];case 8:return[2,this._createHittestResult(i.fromJSON(a))]}}))}))},r.__decorate([v.property()],t.prototype,"_proxy",void 0),r.__decorate([v.property()],t.prototype,"_pipelineIsUpdating",void 0),r.__decorate([v.property()],t.prototype,"_updatingPipelineConfig",void 0),r.__decorate([v.property()],t.prototype,"_effectiveRenderer",void 0),r.__decorate([v.property()],t.prototype,"_aggregateValueRanges",void 0),r.__decorate([v.property()],t.prototype,"_onGoingEdits",void 0),r.__decorate([v.property()],t.prototype,"_isRefreshing",void 0),r.__decorate([v.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),r.__decorate([v.property({type:I})],t.prototype,"filter",void 0),r.__decorate([v.property({type:T})],t.prototype,"effect",null),r.__decorate([v.property({readOnly:!0,dependsOn:["effect"]})],t.prototype,"effects",null),r.__decorate([v.property({dependsOn:["layer.renderer","layer.outFields","layer.definitionExpression","layer.gdbVersion?","layer.geometryDefinition?","layer.historicMoment?","layer.labelingInfo","layer.labelsVisible","layer.featureReduction","filter","effect","timeExtent","clips"]})],t.prototype,"renderingConfigHash",null),r.__decorate([v.property()],t.prototype,"tileRenderer",void 0),r.__decorate([v.property({dependsOn:["layer.renderer","tileRenderer","tileRenderer.updating","_updatingPipelineConfig","_pipelineIsUpdating","_updatingRequiredFieldsPromise","_proxy","_proxy.isReady?","_onGoingEdits"]})],t.prototype,"updating",void 0),r.__decorate([v.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(V.FeatureLayerView(z.RefreshableLayerView(w.LayerView2DMixin(F))))}).apply(null,i))||(e.exports=n)},"/E+R":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,i=0;i<e.length;i++){var n=e[i].size;"number"==typeof n&&(t+=n,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=void 0,t.calculateTolerance=function(e){var t=e&&e.renderer,n="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return n;var o="visualVariables"in t?function(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.minSize;return(i(t.maxSize,e)+i(r,e))/2})),n=0,o=r.length;if(0===o)return e;for(var s=0;s<o;s++)n+=r[s];var a=Math.floor(n/o);return Math.max(a,e)}(n,t.visualVariables):n;if("simple"===t.type)return r(o,t.symbol);if("unique-value"===t.type){var s=o;return t.uniqueValueInfos.forEach((function(e){s=r(s,e.symbol)})),s}if("class-breaks"===t.type){var a=o;return t.classBreakInfos.forEach((function(e){a=r(a,e.symbol)})),a}return o}}).apply(null,i))||(e.exports=n)},"20TT":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("ZMIQ")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return r.__extends(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0}),r.__decorate([i.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),r.__decorate([i.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),r.__decorate([i.subclass("esri.views.layers.support.Path")],t)}(n)}).apply(null,i))||(e.exports=n)},"6i4F":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("y4WC"),r("K2Kz"),r("8MXS"),r("Vx27"),r("1Mg+"),r("ZMIQ"),r("7MXx"),r("ts8o"),r("20TT")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerView2DMixin=void 0;var d=i.ofType({key:"type",base:l,typeMap:{rect:u,path:c,geometry:p}});t.LayerView2DMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new d,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return r.__extends(t,e),t.prototype.initialize=function(){var e,t=this;this.container||(this.container=new a.Container),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o.init(this,"suspended",(function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestUpdate()}),!0),o.init(this,["layer.opacity","container"],(function(){var e,r;t.container&&(t.container.opacity=null!==(r=null===(e=t.layer)||void 0===e?void 0:e.opacity)&&void 0!==r?r:1)}),!0),o.init(this,["layer.blendMode"],(function(e){t.container&&(t.container.blendMode=e)}),!0),o.init(this,["layer.effect"],(function(e){t.container&&(t.container.effect=e)}),!0),this.clips.on("change",(function(){t.container.clips=t.clips,t.notifyChange("clips")}))]),(null===(e=this.view)||void 0===e?void 0:e.whenLayerView)?this.view.whenLayerView(this.layer).then((function(e){e!==t||t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){})):this.when().then((function(){t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){}))},t.prototype.destroy=function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1},Object.defineProperty(t.prototype,"updating",{get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())},enumerable:!1,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,i=r.minScale,n=r.maxScale;if(null!=i&&null!=n){var o=!i,s=!n;!o&&e<=i&&(o=!0),!s&&e>=n&&(s=!0),t=o&&s}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){return!!e.prototype.canResume.call(this)&&this.isVisibleAtScale(this.view.scale)},r.__decorate([s.property({type:d,set:function(e){var t=n.referenceSetter(e,this._get("clips"),d);this._set("clips",t)}})],t.prototype,"clips",void 0),r.__decorate([s.property()],t.prototype,"moving",void 0),r.__decorate([s.property()],t.prototype,"attached",void 0),r.__decorate([s.property()],t.prototype,"container",void 0),r.__decorate([s.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r.__decorate([s.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r.__decorate([s.property()],t.prototype,"updateRequested",void 0),r.__decorate([s.property({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),r.__decorate([s.property()],t.prototype,"view",void 0),r.__decorate([s.subclass("esri.views.2d.layers.LayerView2D")],t)}(e)}}).apply(null,i))||(e.exports=n)},"7MXx":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("ZMIQ")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0}),r.__decorate([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),r.__decorate([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),r.__decorate([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),r.__decorate([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),r.__decorate([i.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),n=r.__decorate([i.subclass("esri.views.layers.support.ClipRect")],t)}(n)}).apply(null,i))||(e.exports=n)},"8iBb":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("ULaq"),r("8MXS"),r("Vx27"),r("EtsK"),r("k7g7"),r("sCbS"),r("IpeC"),r("dDbr"),r("e4th"),r("I6zq")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p,c,d,h,f,y,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureLayerView=void 0;var _=n.getLogger("esri.views.layers.FeatureLayerView");t.FeatureLayerView=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i._updatingRequiredFieldsPromise=null,i.effect=null,i.filter=null,i.layer=null,i.requiredFields=[],i.view=null,i}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;l.init(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","layer.displayField","filter","effect","layer.timeInfo","timeExtent"],(function(){return e._handleRequiredFieldsChange()}),!0)},Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this.layer,t=this.layer.fields,i=this.requiredFields;return c.fixFields(t,"outFields"in e&&e.outFields?r.__spreadArrays(c.unpackFieldNames(t,e.outFields),i):i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){_.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.highlight=function(e,t){throw void 0===t&&(t={}),new Error("missing implementation")},t.prototype.createQuery=function(){var e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=o.isSome(this.filter)?this.filter.createQuery(e):new h(e);return this.timeExtent&&(t.timeExtent=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t},t.prototype.queryFeatures=function(e,t){throw new Error("missing implementation")},t.prototype.queryObjectIds=function(e,t){throw new Error("missing implementation")},t.prototype.queryFeatureCount=function(e,t){throw new Error("missing implementation")},t.prototype.queryExtent=function(e,t){throw new Error("missing implementation")},t.prototype._loadArcadeModules=function(e){if(e.get("expressionInfos.length"))return d.loadArcade()},t.prototype._handleRequiredFieldsChange=function(){var e=this,t=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",t),t.then((function(){e._updatingRequiredFieldsPromise===t&&e._set("_updatingRequiredFieldsPromise",null)}))},t.prototype._updateRequiredFields=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,i,n,l,u,p,d,h,f,y,v,m,g,b;return r.__generator(this,(function(r){switch(r.label){case 0:return this.layer&&this.view?(e="3d"===this.view.type,i=(t=this).layer,l=(n=t.layer).fields,u=n.objectIdField,p=n.renderer,d=n.displayField,h=i.featureReduction,f=new Set,[4,s.eachAlways([p?p.collectRequiredFields(f,l):null,c.collectLabelingFields(f,i),e?c.collectElevationFields(f,i):null,o.isSome(this.filter)?c.collectFilterFields(f,i,this.filter):null,this.effect?c.collectFilterFields(f,i,this.effect.filter):null,h?c.collectFeatureReductionFields(f,i,h):null])]):[2];case 1:for(y=r.sent(),i.timeInfo&&this.timeExtent&&c.collectFields(f,i.fields,[i.timeInfo.startField,i.timeInfo.endField]),v=0,m=y;v<m.length;v++)(g=m[v]).error&&_.error(g.error);return c.collectField(f,l,u),e&&d&&c.collectField(f,l,d),b=a.valuesOfSet(f).sort(),this._set("requiredFields",b),[2]}}))}))},t.prototype.validateFetchPopupFeatures=function(e){var t=this.layer;return this.layer.popupEnabled?v.getFetchPopupTemplate(this.layer,e)?void 0:new i("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new i("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.fetchClientPopupFeatures=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n,a,l,u,p,d,h,f,y,_;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=o.isSome(e)?e.clientGraphics:null)&&0!==t.length?(i=[],n=[],l=v.getFetchPopupTemplate(a=this.layer,e),o.isSome(l)?[4,this._loadArcadeModules(l)]:[2,s.resolve([])]):[2,s.resolve([])];case 1:return u=r.sent(),p=u&&u.arcadeUtils.hasGeometryOperations(l),[4,this.createPopupQuery(e)];case 2:for(d=r.sent(),h=c.unpackFieldNames(a.fields,d.outFields),f=0,y=t;f<y.length;f++)_=y[f],p||!c.featureHasFields(h,_)?n.push(_):i.push(_);return"stream"===a.type||0===n.length?[2,s.resolve(i)]:(d.objectIds=n.map((function(e){return e.attributes[a.objectIdField]})),[2,a.queryFeatures(d).then((function(e){return i.concat(e.features)})).catch((function(){return n}))])}}))}))},t.prototype.createPopupQuery=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n,s,a,l,u,p;return r.__generator(this,(function(r){switch(r.label){case 0:return i=(t=this.layer).createQuery(),n=v.getFetchPopupTemplate(t,e),(a=o.isSome(n))?[4,this._loadArcadeModules(n)]:[3,2];case 1:a=r.sent(),r.label=2;case 2:return s=a,l=o.isSome(n)&&s&&s.arcadeUtils.hasGeometryOperations(n),i.returnGeometry=u=!("point"!==t.geometryType&&!l),i.returnZ=u,i.returnM=u,p=i,[4,v.getRequiredFields(this.layer,n)];case 3:return p.outFields=r.sent(),i.outSpatialReference=this.view.spatialReference,[2,i]}}))}))},t.prototype.canResume=function(){var t;return!(!e.prototype.canResume.call(this)||null!==(t=this.timeExtent)&&void 0!==t&&t.isEmpty)},r.__decorate([u.property()],t.prototype,"_updatingRequiredFieldsPromise",void 0),r.__decorate([u.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],t.prototype,"availableFields",null),r.__decorate([u.property({type:f})],t.prototype,"effect",void 0),r.__decorate([u.property({type:y})],t.prototype,"filter",void 0),r.__decorate([u.property(p.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),r.__decorate([u.property()],t.prototype,"layer",void 0),r.__decorate([u.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),r.__decorate([u.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),r.__decorate([u.property({readOnly:!0})],t.prototype,"requiredFields",void 0),r.__decorate([u.property({dependsOn:["timeExtent"]})],t.prototype,"suspended",void 0),r.__decorate([u.property()],t.prototype,"view",void 0),r.__decorate([u.subclass("esri.views.layers.FeatureLayerView")],t)}(e)}}).apply(null,i))||(e.exports=n)},EtsK:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("9gfz"),r("o2T8"),r("Kg8D"),r("ojLd"),r("5ldw"),r("3fUp")],void 0===(n=(function(e,t,r,i,n,o,s,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combinedViewLayerTimeExtentProperty=t.opacityDrawingInfo=t.opacity=t.readOnlyService=t.elevationInfo=t.legendEnabled=t.url=t.labelsVisible=t.popupEnabled=t.screenSizePerspectiveEnabled=void 0,t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;n.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,i){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||o.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},i))&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:function(e,t){return!t.disablePopup}},write:{enabled:!0,writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},t.url={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.write}}},t.legendEnabled={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},t.elevationInfo={value:null,type:a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}},t.readOnlyService=function(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}},t.opacity={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},t.opacityDrawingInfo=r.__assign(r.__assign({},t.opacity),{json:r.__assign(r.__assign({},t.opacity.json),{origins:{"web-document":r.__assign(r.__assign({},t.opacity.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,r){return r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?l.transparencyToOpacity(t.layerDefinition.drawingInfo.transparency):void 0:l.transparencyToOpacity(t.drawingInfo.transparency)}}})}),t.combinedViewLayerTimeExtentProperty={type:i,dependsOn:["view.timeExtent","layer.timeExtent","layer.timeInfo","layer.timeOffset","layer.timeOffset.value","layer.timeOffset.unit","layer.useViewTime"],readOnly:!0,get:function(){var e,t;if(!(null===(e=this.layer)||void 0===e?void 0:e.timeInfo))return null;var r=null===(t=this.view)||void 0===t?void 0:t.timeExtent,i=this.layer.timeExtent,n=this.layer.useViewTime?r&&i?r.intersection(i):r||i:i;if(!n||n.isEmpty)return n;var o=this.layer.timeOffset,s=o?n.offset(-o.value,o.unit):n,a=this._get("timeExtent");return s.equals(a)?a:s}}}).apply(null,i))||(e.exports=n)},Flzk:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("sHoj")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showLegend=null,t}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({title:this.title,showLegend:this.showLegend})},r.__decorate([i.property({type:Boolean,json:{write:!0}})],t.prototype,"showLegend",void 0),n=r.__decorate([i.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],t)}(n.default)}).apply(null,i))||(e.exports=n)},G59t:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ma1f"),r("qsST"),r("JNkf"),r("apbF")],void 0===(n=(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeOfSizeVisualVariable=void 0;var s=i.getLogger("esri.views.2d.engine.webgl");t.getTypeOfSizeVisualVariable=function(e){return o.isNumber(e.minDataValue)&&o.isNumber(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?n.WGLVVFlag.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?n.WGLVVFlag.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&(Array.isArray(e.stops)||"levels"in e&&e.levels)?n.WGLVVFlag.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?n.WGLVVFlag.SIZE_UNIT_VALUE:(s.error(new r("mapview-bad-type","Found invalid size VisualVariable",e)),n.WGLVVFlag.NONE)}}).apply(null,i))||(e.exports=n)},H9Hv:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonAdapter=void 0,t.jsonAdapter={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,i){var n=new r(e.getPointX(t),e.getPointY(t),i),o=e.hasZ(t),s=e.hasM(t);return o&&(n.z=e.getPointZ(t)),s&&(n.m=e.getPointM(t)),n},exportPolygon:function(e,t,r){return new i(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,r){return new n(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,r){return new o(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,r){var i=e.hasZ(t),n=e.hasM(t),o=new s(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(i){var a=e.getZExtent(t);o.zmin=a.vmin,o.zmax=a.vmax}if(n){var l=e.getMExtent(t);o.mmin=l.vmin,o.mmax=l.vmax}return o}};var r=function(e,t,r){this.x=e,this.y=t,this.spatialReference=r,this.z=void 0,this.m=void 0},i=function(e,t,r,i){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),i&&(this.hasM=i)},n=function(e,t,r,i){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),i&&(this.hasM=i)},o=function(e,t,r,i){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),i&&(this.hasM=i)},s=function(e,t,r,i,n){this.xmin=e,this.ymin=t,this.xmax=r,this.ymax=i,this.spatialReference=n,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}).apply(null,i))||(e.exports=n)},I6zq:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ll/V"),r("LxLY"),r("k7g7")],void 0===(n=(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFetchPopupTemplate=t.getRequiredFields=void 0,t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),r.__awaiter(this,void 0,void 0,(function(){var s,a,l,u,p,c,d,h;return r.__generator(this,(function(f){switch(f.label){case 0:return n.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return s=f.sent(),a=t.lastEditInfoEnabled,l=e.objectIdField,u=e.typeIdField,p=e.globalIdField,c=e.relationships,i.includes(s,"*")?[2,["*"]]:a?[4,o.getFeatureEditFields(e)]:[3,3];case 2:return d=f.sent(),[3,4];case 3:d=[],f.label=4;case 4:return h=o.fixFields(e.fields,r.__spreadArrays(s,d)),u&&h.push(u),h&&l&&o.hasField(e.fields,l)&&-1===h.indexOf(l)&&h.push(l),h&&p&&o.hasField(e.fields,p)&&-1===h.indexOf(p)&&h.push(p),c&&c.forEach((function(t){var r=t.keyField;h&&r&&o.hasField(e.fields,r)&&-1===h.indexOf(r)&&h.push(r)})),[2,h]}}))}))},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:n.isSome(t)&&t.defaultPopupTemplateEnabled&&n.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}).apply(null,i))||(e.exports=n)},NbdF:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("TMur"),r("LxLY"),r("8uEs"),r("/E+R")],void 0===(n=(function(e,t,r,i,n,o){"use strict";function s(e,t,i,o){var s;if(void 0===o&&(o=new r.Extent),"2d"===i.type)s=t*i.resolution;else if("3d"===i.type){var a=i.basemapTerrain,l=a.overlayManager,u=l?l.overlayPixelSizeInMapUnits(e):1;s=a&&!a.spatialReference.equals(i.spatialReference)?n.getMetersPerUnitForSR(a.spatialReference)/n.getMetersPerUnitForSR(i.spatialReference):t*u}var p=e.x-s,c=e.y-s,d=e.x+s,h=e.y+s,f=i.spatialReference;return o.xmin=Math.min(p,d),o.ymin=Math.min(c,h),o.xmax=Math.max(p,d),o.ymax=Math.max(c,h),o.spatialReference=f,o}Object.defineProperty(t,"__esModule",{value:!0}),t.intersectsDrapedGeometry=t.createQueryGeometry=void 0,t.createQueryGeometry=s,t.intersectsDrapedGeometry=function(e,t,r){var n=r.toMap(e);return i.isNone(n)?null:s(n,o.calculateTolerance(),r,a).intersects(t)?n:null};var a=new r.Extent}).apply(null,i))||(e.exports=n)},Q2Em:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qMld"),r("wIC5"),r("H9Hv"),r("nrlZ"),r("vtMp")],void 0===(n=(function(e,t,r,i,n,o,s,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectMany=t.project=t.checkProjectionSupport=t.doesBrowserSupportProjection=void 0;var u=[0,0];function p(e,t){var r,i,n;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,u),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}return"xmin"in t?(o={xmin:0,ymin:0,xmax:0,ymax:0},i=e(t.xmin,t.ymin,u),o.xmin=i[0],o.ymin=i[1],n=e(t.xmax,t.ymax,u),o.xmax=n[0],o.ymax=n[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o):"rings"in t?{rings:c(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:c(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:d(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function c(e,t){for(var r=[],i=0,n=e;i<n.length;i++)r.push(d(n[i],t));return r}function d(e,t){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i],s=t(o[0],o[1],[0,0]);r.push(s),o.length>2&&s.push(o[2]),o.length>3&&s.push(o[3])}return r}function h(e,t){return!(!a.isValid(e)||!a.isValid(t)||a.equals(e,t)||l.canProject(e,t))}t.doesBrowserSupportProjection=function(e,t){return!h(e,t)||o.isSupported()},t.checkProjectionSupport=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,s,a;return r.__generator(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(n=0,s=e;n<s.length;n++)if(h((a=s[n]).geometry&&a.geometry.spatialReference,t)){if(o.isSupported())return[2,o.load()];throw new i("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!h(e,t))return[2];if(o.isSupported())return[2,o.load()];throw new i("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var f=p.bind(null,l.lngLatToXY),y=p.bind(null,l.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),a.isValid(t)&&a.isValid(r)&&!a.equals(t,r)?l.canProject(t,r)?a.isWebMercator(r)?f(e):y(e):o.projectMany(s.jsonAdapter,[e],t,r,null)[0]:e):e};var v=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s=this;return r.__generator(this,(function(r){return e&&e.length&&t&&i&&!a.equals(t,i)||n.resolve(e),this._jobs.push(o={geometries:e,inSpatialReference:t,outSpatialReference:i,resolve:null}),[2,n.create((function(e){o.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,i=e.outSpatialReference,n=e.resolve;l.canProject(r,i)?a.isWebMercator(i)?n(t.map(f)):n(t.map(y)):n(o.projectMany(s.jsonAdapter,t,r,i,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,v.push(e,t,i)]}))}))}}).apply(null,i))||(e.exports=n)},RpYp:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("Flzk")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customValues=null,t}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})},r.__decorate([i.property({type:[Number],json:{write:!0}})],t.prototype,"customValues",void 0),n=r.__decorate([i.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],t)}(n)}).apply(null,i))||(e.exports=n)},WbzV:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("SZNs"),r("qMld"),r("8V7H"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this,t)||this;return r._startupResolver=n.createResolver(),r.isReady=!1,r}return r.__extends(t,e),t.prototype.initialize=function(){this._controller=n.createAbortController(),this.addResolvingPromise(this._startWorker(this._controller.signal))},t.prototype.destroy=function(){this._controller.abort(),this._connection&&this._connection.close()},Object.defineProperty(t.prototype,"tileRenderer",{set:function(e){this.client.tileRenderer=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"closed",{get:function(){return this._connection.closed},enumerable:!1,configurable:!0}),t.prototype.startup=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function(){var n,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.when()];case 1:return r.sent(),n=this._controller.signal,o=Array.isArray(i.source)?{transferList:i.source,signal:n}:void 0,s=e.tileInfo.toJSON(),[4,this._connection.invoke("startup",{service:i,config:t,tileInfo:s},o)];case 2:return r.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}}))}))},t.prototype.updateTiles=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("updateTiles",e))]}}))}))},t.prototype.update=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return i={config:e,pause:t},[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("update",i)]}}))}))},t.prototype.invalidate=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("invalidate",e)]}}))}))},t.prototype.resume=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("controller.resume"))]}}))}))},t.prototype.setHighlight=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("controller.setHighlight",e))]}}))}))},t.prototype.refresh=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("controller.refresh"))]}}))}))},t.prototype.setViewState=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("setViewState",e.toJSON()))]}}))}))},t.prototype.queryFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatures",e.toJSON(),t)]}}))}))},t.prototype.queryObjectIds=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryObjectIds",e.toJSON(),t)]}}))}))},t.prototype.queryFeatureCount=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatureCount",e.toJSON(),t)]}}))}))},t.prototype.queryExtent=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,this._connection.invoke("controller.queryExtent",e.toJSON(),t)]}))}))},t.prototype.queryLatestObservations=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryLatestObservations",e.toJSON(),t)]}}))}))},t.prototype.queryStatistics=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.queryStatistics",e)]}}))}))},t.prototype.getObjectId=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getObjectId",e)]}}))}))},t.prototype.getDisplayId=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getDisplayId",e)]}}))}))},t.prototype.getFeature=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getFeature",e)]}}))}))},t.prototype.getAggregate=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getAggregate",e)]}}))}))},t.prototype.getAggregateValueRanges=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getAggregateValueRanges")]}}))}))},t.prototype.mapValidDisplayIds=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.mapValidDisplayIds",e)]}}))}))},t.prototype.onEdits=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("controller.onEdits",{addedFeatures:e.addedFeatures,deletedFeatures:e.deletedFeatures,updatedFeatures:e.updatedFeatures}))]}}))}))},t.prototype.enableEvent=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,n.ignoreAbortErrors(this._connection.invoke("controller.enableEvent",{name:e,value:t}))]}}))}))},t.prototype._startWorker=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,o.open("Pipeline",{client:this.client,strategy:"dedicated",signal:e})];case 1:return t._connection=r.sent(),[3,3];case 2:return i=r.sent(),n.throwIfNotAbortError(i),[3,3];case 3:return[2]}}))}))},r.__decorate([s.property()],t.prototype,"isReady",void 0),r.__decorate([s.property()],t.prototype,"client",void 0),r.__decorate([s.property()],t.prototype,"tileRenderer",null),r.__decorate([s.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],t)}(i.EsriPromise);t.default=a}).apply(null,i))||(e.exports=n)},WecP:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ImIS"),r("ycL1"),r("qsST"),r("Vx27"),r("1dvD"),r("Flzk")],void 0===(n=(function(e,t,r,i,n,o,s,a,l){"use strict";var u=o.getLogger("esri.renderers.visualVariables.VisualVariable"),p=new i.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});return function(e){function t(t){var r=e.call(this,t)||this;return r.index=null,r.type=null,r.field=null,r.valueExpression=null,r.valueExpressionTitle=null,r.legendOptions=null,r}return r.__extends(t,e),t.prototype.castField=function(e){return null==e?e:"function"==typeof e?(u.error(".field: field must be a string value"),null):a.ensureString(e)},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return!!this.valueExpression},enumerable:!1,configurable:!0}),t.prototype.clone=function(){},t.prototype.getAttributeHash=function(){return this.type+"-"+this.field+"-"+this.valueExpression},r.__decorate([s.property()],t.prototype,"index",void 0),r.__decorate([s.property({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],t.prototype,"type",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),r.__decorate([s.cast("field")],t.prototype,"castField",null),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),r.__decorate([s.property({readOnly:!0,dependsOn:["valueExpression"]})],t.prototype,"arcadeRequired",null),r.__decorate([s.property({type:l,json:{write:!0}})],t.prototype,"legendOptions",void 0),r.__decorate([s.subclass("esri.renderers.visualVariables.VisualVariable")],t)}(n.JSONSupport)}).apply(null,i))||(e.exports=n)},WsO6:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Gtr7"),r("BcWh"),r("7MDj"),r("NfRO"),r("qsST"),r("SZNs"),r("Vx27")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u){"use strict";return function(e){function t(t){var r=e.call(this,t)||this;return r.layer=null,r.parent=null,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";throw a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+i+"', id: '"+r+"')",t),t}}))},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suspendInfo",{get:function(){return this.getSuspendInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"legendEnabled",{get:function(){return!this.suspended&&!0===this.layer.legendEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!1,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.getSuspendInfo=function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},t.prototype.isUpdating=function(){return!1},r.__decorate([u.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r.__decorate([u.property()],t.prototype,"layer",void 0),r.__decorate([u.property()],t.prototype,"parent",void 0),r.__decorate([u.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspended",null),r.__decorate([u.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspendInfo",null),r.__decorate([u.property({readOnly:!0,dependsOn:["suspended","layer.legendEnabled?"]})],t.prototype,"legendEnabled",null),r.__decorate([u.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),r.__decorate([u.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r.__decorate([u.subclass("esri.views.layers.LayerView")],t)}(o.HandleOwnerMixin(s.IdentifiableMixin(l.EsriPromiseMixin(n.EventedMixin(i)))))}).apply(null,i))||(e.exports=n)},ZMIQ:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),r.__decorate([n.subclass("esri.views.layers.support.ClipArea")],t)}(i.JSONSupport)}).apply(null,i))||(e.exports=n)},dDbr:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("qsST"),r("LxLY"),r("Vx27"),r("e4th"),r("iO/m"),r("gd70")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u){"use strict";var p=n.getLogger("esri.views.layers.support.FeatureEffect");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filter=null,t.includedEffect=null,t.excludedEffect=null,t.excludedLabelsVisible=!1,t}var i;return r.__extends(t,e),i=t,Object.defineProperty(t.prototype,"insideEffect",{get:function(){return p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect},set:function(e){p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outsideEffect",{get:function(){return p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect},set:function(e){p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parsedIncludedEffect",{get:function(){return o.isSome(this.includedEffect)?"string"==typeof this.includedEffect?l.ParsedFeatureEffect.fromString(this.includedEffect):new u({from:l.ParsedFeatureEffect.fromString(this.includedEffect.from),to:l.ParsedFeatureEffect.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parsedExcludedEffect",{get:function(){return o.isSome(this.excludedEffect)?"string"==typeof this.excludedEffect?l.ParsedFeatureEffect.fromString(this.excludedEffect):new u({from:l.ParsedFeatureEffect.fromString(this.excludedEffect.from),to:l.ParsedFeatureEffect.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return(!o.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!o.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})},r.__decorate([s.property({type:a,json:{write:!0}})],t.prototype,"filter",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"includedEffect",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"excludedEffect",void 0),r.__decorate([s.property({type:Boolean,json:{write:!0}})],t.prototype,"excludedLabelsVisible",void 0),r.__decorate([s.property({dependsOn:["includedEffect"]})],t.prototype,"parsedIncludedEffect",null),r.__decorate([s.property({dependsOn:["excludedEffect"]})],t.prototype,"parsedExcludedEffect",null),r.__decorate([s.property({dependsOn:["includedEffect","excludedEffect"]})],t.prototype,"renderingHash",null),i=r.__decorate([s.subclass("esri.views.layers.support.FeatureEffect")],t)}(i.JSONSupport)}).apply(null,i))||(e.exports=n)},e4th:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("9gfz"),r("ImIS"),r("ycL1"),r("rg9i"),r("ULaq"),r("Vx27"),r("Lzvl"),r("IpeC")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p,c){"use strict";var d=new o.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h=new o.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){var r=e.call(this,t)||this;return r.where=null,r.geometry=null,r.spatialRelationship="intersects",r.hiddenIds=new Set,r.distance=void 0,r.objectIds=null,r.units=null,r.timeExtent=null,r.enabled=!1,r}var o;return r.__extends(t,e),o=t,t.prototype.writeWhere=function(e,t){t.where=e||"1=1"},t.prototype.enable=function(){this._set("enabled",!0)},t.prototype.createQuery=function(e){void 0===e&&(e={});var t=this,i=t.where,n=t.spatialRelationship,o=t.timeExtent,s=t.objectIds,l=t.units,u=t.distance;return new c(r.__assign({geometry:a.clone(t.geometry),objectIds:a.clone(s),spatialRelationship:n,timeExtent:a.clone(o),where:i,units:l,distance:u},e))},t.prototype.clone=function(){var e=this,t=e.where,r=e.geometry,i=e.spatialRelationship,n=e.hiddenIds,s=e.timeExtent,l=e.objectIds,u=e.units,p=e.distance,c=new Set;return n.forEach((function(e){return c.add(e)})),new o({geometry:a.clone(r),hiddenIds:c,objectIds:a.clone(l),spatialRelationship:i,timeExtent:a.clone(s),where:t,units:u,distance:p})},r.__decorate([u.property({type:String})],t.prototype,"where",void 0),r.__decorate([u.writer("where")],t.prototype,"writeWhere",null),r.__decorate([u.property({types:i.geometryTypes,json:{read:p.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r.__decorate([u.property({type:String,json:{read:{source:"spatialRel",reader:d.read},write:{target:"spatialRel",writer:d.write}}})],t.prototype,"spatialRelationship",void 0),r.__decorate([u.property({json:{write:function(e,t,r){return t[r]=l.valuesOfSet(e)},read:function(e){return l.SetFromValues(e)}}})],t.prototype,"hiddenIds",void 0),r.__decorate([u.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],t.prototype,"distance",void 0),r.__decorate([u.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r.__decorate([u.property({type:String,json:{read:h.read,write:{writer:h.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],t.prototype,"units",void 0),r.__decorate([u.property({type:n,json:{write:!0}})],t.prototype,"timeExtent",void 0),r.__decorate([u.property({readOnly:!0})],t.prototype,"enabled",void 0),o=r.__decorate([u.subclass("esri.views.layers.support.FeatureFilter")],t)}(s.JSONSupport)}).apply(null,i))||(e.exports=n)},gd70:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Gtr7"),r("Vx27"),r("FXVB")],void 0===(n=(function(e,t,r,i,n,o){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=null,t.to=null,t.duration=4e3,t.repeat=!0,t.done=!1,t}var i;return r.__extends(t,e),i=t,t.prototype.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var e=this._lastTime,t=Date.now();this._currentStep=this._currentStep+(t-e),this._currentStep>=2147483647&&(this._currentStep=0),this._lastTime=t}var r=this._currentStep%this.duration/(this.duration/2),i=r<=1?r:2-r,n=this.from.getColorMatrix(),s=this.to.getColorMatrix();return o.mat4.multiplyScalar(n,n,1-i),o.mat4.multiplyScalar(s,s,i),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),o.mat4.add(n,n,s)},t.prototype.getOpacity=function(){throw new Error("No getOpacity definition for Transition")},t.prototype.clone=function(){var e=new i({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return e._lastTime=this._lastTime,e._currentStep=this._currentStep,e},r.__decorate([n.property()],t.prototype,"from",void 0),r.__decorate([n.property()],t.prototype,"to",void 0),r.__decorate([n.property({type:Number})],t.prototype,"duration",void 0),r.__decorate([n.property({type:Boolean})],t.prototype,"repeat",void 0),i=r.__decorate([n.subclass("esri.views.layers.support.Transition")],t)}(i)}).apply(null,i))||(e.exports=n)},"iO/m":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("ycL1"),r("qsST"),r("LxLY"),r("Vx27"),r("FXVB"),r("oZZu"),r("lCqp")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsedFeatureEffect=void 0;var c=o.getLogger("esri.views.layers.support.ParsedFeatureEffect"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.done=!0,t}var n;return r.__extends(t,e),n=t,t.fromString=function(e){var t=[],r=null,o=p.parse(e);if(o.error)c.error(new i("invalid-type","Encountered an error when parsing css",o.error));else for(var s=0,a=o.effects;s<a.length;s++){var l=a[s];"opacity"===l.type?r=l:"colorMatrix"in l&&t.push(l)}return new n({transforms:t,opacity:r})},t.prototype.getOpacity=function(){return s.isSome(this.opacity)?this.opacity.amount:1},t.prototype.getColorMatrix=function(){return(this.transforms||[]).map((function(e){return{colorMatrix:u.mat4f32.clone(e.colorMatrix)}})).reverse().reduce((function(e,t){return l.mat4.multiply(e,e,t.colorMatrix)}),u.mat4f32.create())},t.prototype.clone=function(){return new n({transforms:this.transforms&&this.transforms.map((function(e){return r.__assign({},e)}))})},r.__decorate([a.property()],t.prototype,"opacity",void 0),r.__decorate([a.property()],t.prototype,"transforms",void 0),n=r.__decorate([a.subclass("esri.views.layers.support.ParsedFeatureEffect")],t)}(n.JSONSupport);t.ParsedFeatureEffect=d}).apply(null,i))||(e.exports=n)},jci6:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("jZlN"),r("Vx27")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return r.__extends(t,e),i=t,t.prototype.getEffectivePopupTemplate=function(e){if(void 0===e&&(e=!1),this.popupTemplate)return this.popupTemplate;var t=this.sourceLayer&&this.sourceLayer.featureReduction;return t&&"popupTemplate"in t&&t.popupEnabled?t.popupTemplate:null},t.prototype.getObjectId=function(){return this.objectId},t.prototype.clone=function(){return new i(r.__assign({objectId:this.objectId},this.cloneProperties()))},r.__decorate([n.property({type:Number,json:{read:!0}})],t.prototype,"objectId",void 0),i=r.__decorate([n.subclass("esri.AggregateGraphic")],t)}(i)}).apply(null,i))||(e.exports=n)},kkaA:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("LxLY"),r("7Lgj"),r("f3JK")],void 0===(n=(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileManager=void 0;var o=function(){function e(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}return e.prototype.destroy=function(){},e.prototype.clear=function(){var e=this;this._tiles.forEach((function(t){return e._releaseTile(t)}))},e.prototype.tileKeys=function(){var e=[];return this._tiles.forEach((function(t,r){return e.push(r)})),e},e.prototype.update=function(e){for(var t=this,r=this.tileInfoView.getTileCoverage(e.state,this.buffer,"closest"),o=r.spans,s=r.lodInfo,a=s.level,l=[],u=[],p=new Set,c=new Set,d=0,h=o;d<h.length;d++)for(var f=h[d],y=f.row,v=f.colTo,_=f.colFrom;_<=v;_++){var m=n.getId(a,y,s.normalizeCol(_),s.getWorldForColumn(_)),g=this._getOrAcquireTile(l,m);p.add(m),g.isReady?g.visible=!0:c.add(g.key)}return c.forEach((function(e){return t._addPlaceholders(p,e)})),this._tiles.forEach((function(e){p.has(e.key.id)||(u.push(e.key.id),t._releaseTile(e))})),i.pool.release(r),{hasMissingTiles:c.size>0,added:l,removed:u}},e.prototype._getOrAcquireTile=function(e,t){if(!this._tiles.has(t)){var r=this.acquireTile(new n(t));e.push(t),this._tiles.set(t,r),r.visible=!1}return this._tiles.get(t)},e.prototype._getTile=function(e){return this._tiles.get(e)},e.prototype._releaseTile=function(e){this._tiles.delete(e.key.id),this.releaseTile(e)},e.prototype._addPlaceholders=function(e,t){var r=this._addPlaceholderChildren(e,t);Math.abs(1-r)<1e-6||this._addPlaceholderParent(e,t)||(this._getTile(t.id).visible=!0)},e.prototype._addPlaceholderChildren=function(e,t){var r=this,i=0;return this._tiles.forEach((function(n){i+=r._addPlaceholderChild(e,n,t)})),i},e.prototype._addPlaceholderChild=function(e,t,r){return t.key.level<=r.level||!t.hasData||!r.contains(t.key)?0:(t.visible=!0,e.add(t.key.id),1/(1<<2*(t.key.level-r.level)))},e.prototype._addPlaceholderParent=function(e,t){for(var i=t.getParentKey(),n=0,o=null;r.isSome(i);){if(e.has(i.id))return!0;var s=this._getTile(i.id);if(null==s?void 0:s.isReady)return s.visible=!0,e.add(s.key.id),!0;(null==s?void 0:s.hasData)&&s.patchCount>n&&(n=s.patchCount,o=s),i=i.getParentKey()}return!!o&&(o.visible=!0,e.add(o.key.id),!0)},e}();t.TileManager=o}).apply(null,i))||(e.exports=n)},n7H0:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("ImIS"),r("qsST"),r("jBNx"),r("Vx27"),r("WecP"),r("/3kq"),r("RpYp"),r("o5TS"),r("AbCR")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p,c,d){"use strict";var h=o.getLogger("esri.renderers.visualVariables.SizeVariable"),f=new n.default({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),y=new n.default({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function v(e){if(null!=e)return"string"==typeof e||"number"==typeof e?s.toPt(e):"size"===e.type?c.isSizeVariable(e)?e:(delete(e=r.__assign({},e)).type,new m(e)):void 0}function _(e,t,r){if("object"!=typeof e)return e;var i=new m;return i.read(e,r),i}var m=function(e){function t(t){var r=e.call(this,t)||this;return r.axis=null,r.legendOptions=null,r.normalizationField=null,r.scaleBy=null,r.target=null,r.type="size",r.useSymbolValue=null,r.valueExpression=null,r.valueRepresentation=null,r.valueUnit=null,r}var n;return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:d.viewScaleRE.test(this.valueExpression)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{set:function(e){h.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{set:function(e){c.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+e+"].maxSize"),c.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+e+"].minSize"),this._set("index",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputValueType",{get:function(){return c.getInputValueType(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxDataValue",{set:function(e){e&&this.stops&&(h.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{set:function(e){e&&this.stops&&(h.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)},enumerable:!1,configurable:!0}),t.prototype.castMaxSize=function(e){return v(e)},t.prototype.readMaxSize=function(e,t,r){return _(e,0,r)},Object.defineProperty(t.prototype,"minDataValue",{set:function(e){e&&this.stops&&(h.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{set:function(e){e&&this.stops&&(h.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)},enumerable:!1,configurable:!0}),t.prototype.castMinSize=function(e){return v(e)},t.prototype.readMinSize=function(e,t,r){return _(e,0,r)},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stops",{set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})):e&&(h.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationType",{get:function(){return c.getTransformationType(this,this.inputValueType)},enumerable:!1,configurable:!0}),t.prototype.readValueExpression=function(e,t){return e||t.expression&&"$view.scale"},t.prototype.writeValueExpressionWebScene=function(e,t,r,n){if("$view.scale"===e){if(n&&n.messages){var o=this.index;n.messages.push(new i("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof o?o:"visualVariables["+o+"]")+".valueExpression",context:n}))}}else t[r]=e},t.prototype.readValueUnit=function(e){return e?y.read(e):null},t.prototype.clone=function(){return new n({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:c.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:c.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(e){return e.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})},t.prototype.flipSizes=function(){if("clamped-linear"===this.transformationType){var e=this.minSize;return this.minSize=this.maxSize,this.maxSize=e,this}if("stops"===this.transformationType){for(var t=this.stops,r=t.map((function(e){return e.size})).reverse(),i=t.length,n=0;n<i;n++)t[n].size=r[n];return this}return this},t.prototype.getAttributeHash=function(){return e.prototype.getAttributeHash.call(this)+"-"+this.target+"-"+this.normalizationField},t.prototype._interpolateData=function(){return this.stops&&this.stops.map((function(e){return e.value||0}))},r.__decorate([a.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],t.prototype,"cache",null),r.__decorate([a.property({type:f.apiValues,json:{type:f.jsonValues,origins:{"web-map":{read:!1}},read:f.read,write:f.write}})],t.prototype,"axis",void 0),r.__decorate([a.property({type:String,value:null,json:{read:!1}})],t.prototype,"expression",null),r.__decorate([a.property()],t.prototype,"index",null),r.__decorate([a.property({type:String,readOnly:!0,dependsOn:["field","valueExpression"]})],t.prototype,"inputValueType",null),r.__decorate([a.property({type:p,json:{write:!0}})],t.prototype,"legendOptions",void 0),r.__decorate([a.property({type:Number,value:null,json:{write:!0}})],t.prototype,"maxDataValue",null),r.__decorate([a.property({type:Number,value:null,json:{write:!0}})],t.prototype,"maxSize",null),r.__decorate([a.cast("maxSize")],t.prototype,"castMaxSize",null),r.__decorate([a.reader("maxSize")],t.prototype,"readMaxSize",null),r.__decorate([a.property({type:Number,value:null,json:{write:!0}})],t.prototype,"minDataValue",null),r.__decorate([a.property({type:Number,value:null,json:{write:!0}})],t.prototype,"minSize",null),r.__decorate([a.cast("minSize")],t.prototype,"castMinSize",null),r.__decorate([a.reader("minSize")],t.prototype,"readMinSize",null),r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"normalizationField",void 0),r.__decorate([a.property({readOnly:!0,dependsOn:["valueExpression","minSize.arcadeRequired","maxSize.arcadeRequired"]})],t.prototype,"arcadeRequired",null),r.__decorate([a.property({type:String})],t.prototype,"scaleBy",void 0),r.__decorate([a.property({type:[u],value:null,json:{write:!0}})],t.prototype,"stops",null),r.__decorate([a.property({type:["outline"],json:{write:!0}})],t.prototype,"target",void 0),r.__decorate([a.property({type:String,readOnly:!0,dependsOn:["minDataValue","maxDataValue","minSize","maxSize","valueUnit","inputValueType","stops"]})],t.prototype,"transformationType",null),r.__decorate([a.property({type:["size"],json:{type:["sizeInfo"]}})],t.prototype,"type",void 0),r.__decorate([a.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],t.prototype,"useSymbolValue",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),r.__decorate([a.reader("valueExpression",["valueExpression","expression"])],t.prototype,"readValueExpression",null),r.__decorate([a.writer("web-scene","valueExpression")],t.prototype,"writeValueExpressionWebScene",null),r.__decorate([a.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],t.prototype,"valueRepresentation",void 0),r.__decorate([a.property({type:y.apiValues,json:{write:y.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],t.prototype,"valueUnit",void 0),r.__decorate([a.reader("valueUnit")],t.prototype,"readValueUnit",null),n=r.__decorate([a.subclass("esri.renderers.visualVariables.SizeVariable")],t)}(l);return m}).apply(null,i))||(e.exports=n)},oWCy:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("qMld"),r("jBNx"),r("Ahpp"),r("fb50"),r("tI6k"),r("wjMf")],void 0===(n=(function(e,t,r,i,n,o,s,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computePxBuffer=void 0;var u={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1};t.computePxBuffer=function(e,t,o){return r.__awaiter(this,void 0,void 0,(function(){var s,a,l,u,p,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(!e||o&&"cluster"===o.type)return[2,0];if("heatmap"===e.type)return[2,Math.round(3*e.blurRadius)];if("dot-density"===e.type)return[2,0];if("dictionary"===e.type)return"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?[2,100]:[2,200];for(s=e.getSymbols(),a=function(e){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var t=e.getVisualVariablesForType("size");if(!t[0])return 0;var r=t[0];return"stops"===r.transformationType?r.stops.map((function(e){return e.size})).reduce(_,0):"clamped-linear"===r.transformationType?"number"==typeof r.maxSize?r.maxSize:r.maxSize.stops.map((function(e){return e.size})).reduce(_,0):"real-world-size"===r.transformationType?30:void 0}(e),l=[],u=0,p=s;u<p.length;u++)l.push(y(p[u],a));return[4,i.all(l)];case 1:return c=r.sent(),[2,n.pt2px(c.reduce(_,0))]}}))}))};var p=[0,0,0,0];function c(e,t){return null==e?t:e}function d(e,t){return null==e.outline?t:c(e.outline.width,t)}var h={sdf:!0,code:99,metrics:a.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new s.default(0,0,24,24),page:0,textureBinding:2};function f(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,n,s,a,u,y,_,m,g,b,x,w,S,E;return r.__generator(this,(function(O){switch(O.label){case 0:return"simple-marker"===e.type?(i=Math.max(c(e.size,12),t),[2,v(e)+.707*i]):"picture-marker"===e.type?(n=Math.max(c(e.height,12),t),s=c(e.width,12)*(n/c(e.height,12)),a=s/2,u=n/2,[2,v(e)+Math.sqrt(a*a+u*u)]):"text"===e.type?(y=function(e){var t=e.text&&e.text.length;if(!t)return{glyphMosaicItems:[h]};for(var i=[],n=0;n<t;n++)i.push(r.__assign(r.__assign({},h),{code:e.text.charCodeAt(n)}));return{glyphMosaicItems:i}}(e),l.getTextSymbolSize(p,e.toJSON(),y),_=Math.abs(p[0]),m=Math.abs(p[1]),g=p[2],b=p[3],[2,Math.max(_,m)+Math.max(g,b)]):"simple-line"===e.type?(x=e,w=Math.max(c(x.width,.75),t)/2,x.marker?[2,Math.max(6*x.width,2*t)]:[2,w]):"simple-fill"===e.type||"picture-fill"===e.type?[2,Math.max(d(e,0),t)/2]:"cim"===e.type?(S=o.CIMSymbolHelper.getEnvelope(e.data))?[2,Math.sqrt(S.width*S.width+S.height*S.height)]:[2,0]:"web-style"!==e.type?[3,2]:(E=f,[4,e.fetchCIMSymbol()]);case 1:return[2,E.apply(void 0,[O.sent(),t])];case 2:return[2,0]}}))}))}function y(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,n;return r.__generator(this,(function(r){switch(r.label){case 0:return function(e){return e.type in u}(e)?(n=(i=Math).min,[4,f(e,t)]):[2,0];case 1:return[2,n.apply(i,[r.sent(),75])]}}))}))}function v(e){var t=c(e.xoffset,0),r=c(e.yoffset,0);return Math.sqrt(t*t+r*r)}function _(e,t){return Math.max(e,t)}}).apply(null,i))||(e.exports=n)},sHoj:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(n=(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegendOptions=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title})},r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),i=r.__decorate([n.subclass("esri.renderers.support.LegendOptions")],t)}(i.JSONSupport);t.LegendOptions=o,t.default=o}).apply(null,i))||(e.exports=n)},"sQ+t":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("2Kdy")],void 0===(n=(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=void 0,t.createOrReuseTileRenderer=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(i){switch(i.label){case 0:if(!e)return[2,null];switch(e.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":return[3,1];case"heatmap":return[3,3]}return[3,5];case 1:return[4,new Promise((function(e,t){Promise.all([r.e(5),r.e(15),r.e(18),r.e(1),r.e(68)]).then((function(){var t=[r("IBem")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 2:return[2,new(i.sent().default)(t)];case 3:return[4,new Promise((function(e,t){Promise.all([r.e(5),r.e(1),r.e(75)]).then((function(){var t=[r("GCYV")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 4:return[2,new(i.sent().default)(t)];case 5:return[2]}}))}))}}).apply(null,i))||(e.exports=n)},ts8o:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("Vx27"),r("YADd"),r("Lzvl"),r("ZMIQ")],void 0===(n=(function(e,t,r,i,n,o,s,a){"use strict";var l={base:o,key:"type",typeMap:{extent:i.Extent,polygon:i.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var i;return r.__extends(t,e),i=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new i({geometry:this.geometry.clone()})},r.__decorate([n.property({types:l,json:{read:s.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r.__decorate([n.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),i=r.__decorate([n.subclass("esri.views.layers.support.Geometry")],t)}(a)}).apply(null,i))||(e.exports=n)},wjMf:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("H1tY"),r("LxLY"),r("jBNx"),r("aMdW"),r("Zx0K"),r("W9tT"),r("ab6c"),r("Z4y+"),r("lRq4"),r("hBh5"),r("Thzy"),r("Lzvl"),r("fw2w"),r("nrlZ"),r("nrlZ"),r("Ahpp"),r("B+Jm"),r("vsbv"),r("2Gaw")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,p,c,d,h,f,y,v,_,m,g,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextSymbolSize=t.normalizeCentralMeridian=t.getTextSymbolBounds=t.getCIMMarkerBounds=t.getMarkerSymbolBounds=t.isPointOnPolyline=t.graphicGeometryToNumber=t.isMarkerSymbol=t.getBounds=void 0;var x=Math.PI/180,w=s.mat2df32.create(),S=l.vec2f32.create(),E=p.create();t.getBounds=function(e,t,i,n,o,s,a){if(!n||!i.symbol)return e[0]=e[1]=e[2]=e[3]=0,t[0]=t[1]=t[2]=t[3]=0,e;var l=n;if(!h.isPoint(l)){c.getBoundsXY(e,l);var u=t[0];0===u&&(u=function e(t){switch(t.symbol.type){case"esriSFS":case"esriPFS":var i=t.symbol.outline;return i?i.width:0;case"esriSLS":return t.symbol.width;case"esriSMS":return t.symbol.size;case"esriPMS":return Math.max(t.symbol.width,t.symbol.height);case"esriTS":var n=[0,0,0,0];q(n,t.symbol,t.mosaicItem);var o=Math.max(Math.abs(n[0]),Math.abs(n[1]));return Math.max(n[2],n[3])+o;case"expanded-cim":var s=_.CIMSymbolHelper.getEnvelope(t.symbol.data);return Math.sqrt(s.width*s.width+s.height*s.height);case"composite-symbol":return t.symbol.layers.length?e({symbol:t.symbol.layers[t.symbol.layers.length-1],mosaicItem:null}):0;case"label":default:return r("esri-2d-debug")&&console.debug("Resource of type "+t.symbol.type+" not valid for graphics"),0}}(i),t[0]=u);var p=o*u/2;return e[0]-=p,e[1]-=p,e[2]+=p,e[3]+=p,e}var d=l.x,y=l.y;return"esriTS"===i.symbol.type&&0===t[2]&&0===t[3]&&q(t,i.symbol,i.mosaicItem),function(e,t,r,i,n,o,s,a){var l;switch(i.type){case"esriSMS":case"esriPMS":l=z(t,r,i,o,s,0);break;case"esriTS":l=T(t,r,i,n,o,0);break;case"cim":case"CIMSymbolReference":case"expanded-cim":l=I(t,r,i,o,s,0)}for(var u,p=0,c=0;c<l.rings[0].length-1;c++)u=l.rings[0][c],p=Math.max(p,(t-u[0])*(t-u[0])+(r-u[1])*(r-u[1]));p=Math.sqrt(p);var d=f.normalizeMapX(t-p,a),h=f.normalizeMapX(t+p,a);if(d>h){var y=v.getInfo(a);if(y){var _=y.valid;d=_[0],h=_[1]}}e[0]=d,e[1]=r-p,e[2]=h,e[3]=r+p}(e,d,y,i.symbol,t,o,s,a),e},t.isMarkerSymbol=function(e){return"simple-marker"===e||"picture-marker"===e||"text"===e},t.graphicGeometryToNumber=function(e){switch(i.unwrap(e.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0};var O=l.vec2f32.create(),R=l.vec2f32.create(),j=l.vec2f32.create(),M=l.vec2f32.create(),P=l.vec2f32.create(),V=l.vec2f32.create(),F=l.vec2f32.create();function z(e,t,r,i,s,l){var u,p,c=n.pt2px(r.xoffset),d=n.pt2px(r.yoffset),h=x*r.angle,f=x*l;switch(r.type){case"esriSMS":u=p=n.pt2px(r.size);break;case"esriPMS":u=n.pt2px(r.width),p=n.pt2px(r.height)}s<.04&&(i=.04*i/s);var y=o.mat2d.identity(w);o.mat2d.translate(y,y,a.vec2.set(S,e,t)),o.mat2d.rotate(y,y,f-h),o.mat2d.scale(y,y,a.vec2.set(S,i,-i)),o.mat2d.translate(y,y,a.vec2.set(S,c,-d));var v=[0,0];a.vec2.transformMat2d(v,a.vec2.set(S,-.5*u,-.5*p),y);var _=[0,0];a.vec2.transformMat2d(_,a.vec2.set(S,-.5*u,.5*p),y);var m=[0,0];a.vec2.transformMat2d(m,a.vec2.set(S,.5*u,-.5*p),y);var g=[0,0];return a.vec2.transformMat2d(g,a.vec2.set(S,.5*u,.5*p),y),{rings:[[v,m,g,_,v]]}}function I(e,t,r,i,s,l){var u=_.CIMSymbolHelper.getEnvelope(r.data);if(!u)return null;s<.04&&(i=.04*i/s);var p=n.pt2px(u.width),c=n.pt2px(u.height),d=n.pt2px(u.x),h=n.pt2px(u.y),f=0*x,y=x*l,v=o.mat2d.identity(w);o.mat2d.translate(v,v,a.vec2.set(S,e,t)),o.mat2d.rotate(v,v,y-f),o.mat2d.scale(v,v,a.vec2.set(S,i,i));var m=[0,0];a.vec2.transformMat2d(m,a.vec2.set(S,d,h+c),v);var g=[0,0];a.vec2.transformMat2d(g,a.vec2.set(S,d,h),v);var b=[0,0];a.vec2.transformMat2d(b,a.vec2.set(S,d+p,h+c),v);var E=[0,0];return a.vec2.transformMat2d(E,a.vec2.set(S,d+p,h),v),{rings:[[m,b,E,g,m]]}}function T(e,t,r,i,s,l){var u=n.pt2px(r.xoffset),p=n.pt2px(r.yoffset),c=x*r.angle,d=x*l,h=o.mat2d.identity(w);o.mat2d.translate(h,h,a.vec2.set(S,e,t)),o.mat2d.rotate(h,h,d),o.mat2d.scale(h,h,a.vec2.set(S,s,-s));var f=i[0]+i[2]/2,y=i[1]+i[3]/2;o.mat2d.translate(h,h,a.vec2.set(S,u,-p)),o.mat2d.translate(h,h,a.vec2.set(S,f,y)),o.mat2d.rotate(h,h,c),o.mat2d.translate(h,h,a.vec2.set(S,-f,-y));var v=[0,0];a.vec2.transformMat2d(v,a.vec2.set(S,i[0],i[1]),h);var _=[0,0];a.vec2.transformMat2d(_,a.vec2.set(S,i[0],i[1]+i[3]),h);var m=[0,0];a.vec2.transformMat2d(m,a.vec2.set(S,i[0]+i[2],i[1]),h);var g=[0,0];return a.vec2.transformMat2d(g,a.vec2.set(S,i[0]+i[2],i[1]+i[3]),h),{rings:[[v,m,g,_,v]]}}function q(e,t,r){if(!r||0===r.glyphMosaicItems.length)return e;var i=b.bidiText(t.text)[1],o=g.shapeGlyphs(r.glyphMosaicItems,i,{scale:n.pt2px(t.font.size)/24,angle:t.angle,xOffset:t.xoffset,yOffset:t.yoffset,hAlign:m.getXAnchorDirection(t.horizontalAlignment||"center"),vAlign:m.getYAnchorDirection(t.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(t.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(t.lineHeight||1,4)),decoration:t.font.decoration||"none",isCIM:!1}).bounds;return e[0]=o.x-o.halfWidth,e[1]=o.y-o.halfHeight,e[2]=o.width,e[3]=o.height,e}t.isPointOnPolyline=function(e,t,r,i){a.vec2.set(j,t,r);for(var n,o,s,l,u,p,c,d,h,f=e.paths,y=1/0,v=0;v<f.length;v++){var _=f[v];if(!(_.length<2))for(var m=1;m<_.length;m++)n=_[m-1][0],s=_[m-1][1],o=_[m][0],l=_[m][1],u=Math.min(n,o)-i,p=Math.min(s,l)-i,c=Math.max(n,o)+i,d=Math.max(s,l)+i,t<u||t>c||r<p||r>d||(a.vec2.set(O,n,s),a.vec2.set(R,o,l),a.vec2.subtract(M,R,O),a.vec2.subtract(P,O,j),a.vec2.scale(V,M,a.vec2.dot(M,P)/a.vec2.dot(M,M)),a.vec2.subtract(F,P,V),y>(h=a.vec2.dot(F,F))&&(y=h))}return Math.sqrt(y)<=i},t.getMarkerSymbolBounds=z,t.getCIMMarkerBounds=I,t.getTextSymbolBounds=T,t.normalizeCentralMeridian=function(e){var t,r,i,n,o,s,a,l,u=null;if(!e)return null;if("mesh"===e.type)return e.toJSON();if(!(r=y.getInfo(t=e.spatialReference)))return e.toJSON();i=L[o=t.isWebMercator?102100:4326].maxX,n=L[o].minX,s=L[o].plus180Line,a=L[o].minus180Line;var p=e.toJSON();if(h.isPoint(p))l=A(p,i,n);else if(h.isMultipoint(p))p.points=p.points.map((function(e){return A(e,i,n)})),l=p;else if(h.isExtent(p))l=function(e,t){if(!t)return e;var r=function(e,t){var r,i=[],n=e.ymin,o=e.ymax,s=e.xmax-e.xmin,a=e.xmin,l=e.xmax,u=t.valid,p=u[0],c=u[1],d=(r=C(e.xmin,t)).x,h=r.frameId,f=(r=C(e.xmax,t)).x,y=r.frameId,v=d===f&&s>0;if(s>2*c){var _={xmin:a<l?d:f,ymin:n,xmax:c,ymax:o},m={xmin:p,ymin:n,xmax:a<l?f:d,ymax:o},g={xmin:0,ymin:n,xmax:c,ymax:o},b={xmin:p,ymin:n,xmax:0,ymax:o},x=[],w=[];U(_,g)&&x.push(h),U(_,b)&&w.push(h),U(m,g)&&x.push(y),U(m,b)&&w.push(y);for(var S=h+1;S<y;S++)x.push(S),w.push(S);i.push({extent:_,frameIds:[h]},{extent:m,frameIds:[y]},{extent:g,frameIds:x},{extent:b,frameIds:w})}else d>f||v?i.push({extent:{xmin:d,ymin:n,xmax:c,ymax:o},frameIds:[h]},{extent:{xmin:p,ymin:n,xmax:f,ymax:o},frameIds:[y]}):i.push({extent:{xmin:d,ymin:n,xmax:f,ymax:o},frameIds:[h]});return i}(e,t).map((function(e){return e.extent}));return r.length<2?r[0]||e:r.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:r.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}(p,r);else if(h.isPolygon(p)||h.isPolyline(p)){var f=E;c.getBoundsXY(f,p);var v={xmin:f[0],ymin:f[1],xmax:f[2],ymax:f[3]},_=k(v.xmin,n)*(2*i),m=0===_?p:function(e,t){for(var r=0,i=function(e){return h.isPolygon(e)?e.rings:e.paths}(e);r<i.length;r++)for(var n=0,o=i[r];n<o.length;n++)o[n][0]+=t;return e}(p,_);v.xmin+=_,v.xmax+=_,d.extentIntersectsPolyline(v,s)&&v.xmax!==i||d.extentIntersectsPolyline(v,a)&&v.xmin!==n?u=m:l=m}else l=e.clone();return null!==u?(new D).cut(u,i):l},t.getTextSymbolSize=q;var L={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:{paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator},minus180Line:{paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:u.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:u.WGS84}}};function k(e,t){return Math.ceil((e-t)/(2*t))}function C(e,t){var r,i=t.valid,n=i[0],o=i[1],s=2*o,a=0;return e>o?(e-=(r=Math.ceil(Math.abs(e-o)/s))*s,a=r):e<n&&(e+=(r=Math.ceil(Math.abs(e-n)/s))*s,a=-r),{x:e,frameId:a}}function U(e,t){var r=t.xmin,i=t.ymin,n=t.xmax,o=t.ymax;return N(e,r,i)&&N(e,r,o)&&N(e,n,o)&&N(e,n,i)}function N(e,t,r){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax}function A(e,t,r){var i;if(Array.isArray(e))if((i=e[0])>t){var n=k(i,t);e[0]=i+n*(-2*t)}else i<r&&(n=k(i,r),e[0]=i+n*(-2*r));else(i=e.x)>t?(n=k(i,t),e.x+=n*(-2*t)):i<r&&(n=k(i,r),e.x+=n*(-2*r));return e}var D=function(){function e(){}return e.prototype.cut=function(e,t){var r;if(e.rings)this.closed=!0,r=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,r=e.paths,this.minPts=2}for(var i=r.length,n=-2*t,o=0;o<i;o++){var s=r[o];if(s&&s.length>=this.minPts){for(var a=[],l=0,u=s;l<u.length;l++){var p=u[l];a.push([p[0]+n,p[1]])}r.push(a)}}return this.closed?e.rings=r:e.paths=r,e},e}()}).apply(null,i))||(e.exports=n)}}]);