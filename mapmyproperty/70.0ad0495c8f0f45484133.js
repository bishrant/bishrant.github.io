(function(){var e={"arcgis-js-api/renderers/support/clickToleranceUtils":"/E+R","esri/renderers/support/clickToleranceUtils":"/E+R","esri/widgets/DistanceMeasurement2D/DistanceMeasurement2DViewModel":"9K80","esri/widgets/support/InteractiveToolViewModel":"JcNK","arcgis-js-api/views/support/drapedUtils":"NbdF","esri/views/support/drapedUtils":"NbdF","esri/widgets/DistanceMeasurement2D":"O2d9","esri/widgets/DistanceMeasurement2D/DistanceMeasurement2DTool":"eXfu"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{"/E+R":function(e,t,r){var i,o;i=[r.dj.c(e.i),t],void 0===(o=(function(e,t){"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,i=0;i<e.length;i++){var o=e[i].size;"number"==typeof o&&(t+=o,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=void 0,t.calculateTolerance=function(e){var t=e&&e.renderer,o="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return o;var n="visualVariables"in t?function(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.minSize;return(i(t.maxSize,e)+i(r,e))/2})),o=0,n=r.length;if(0===n)return e;for(var s=0;s<n;s++)o+=r[s];var a=Math.floor(o/n);return Math.max(a,e)}(o,t.visualVariables):o;if("simple"===t.type)return r(n,t.symbol);if("unique-value"===t.type){var s=n;return t.uniqueValueInfos.forEach((function(e){s=r(s,e.symbol)})),s}if("class-breaks"===t.type){var a=n;return t.classBreakInfos.forEach((function(e){a=r(a,e.symbol)})),a}return n}}).apply(null,i))||(e.exports=o)},"9K80":function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("zOht"),r("eIBl"),r("qsST"),r("qMld"),r("8uEs"),r("8MXS"),r("Vx27"),r("eXfu"),r("SFmM"),r("JcNK")],void 0===(o=(function(e,t,r,i,o,n,s,a,l,u,c,p){"use strict";var d={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,1],pathSecondaryColor:[255,255,255,1]},h=o.getLogger("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel");return function(e){function t(t){var r=e.call(this,t)||this;return r.supportedViewType="2d",r._handles=new i,r.geodesicDistanceThreshold=1e5,r.measurement=null,r.measurementLabel=null,r.palette=d,r.tool=null,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([a.init(this,["unit","palette","geodesicDistanceThreshold"],(function(t,r,i){e.tool&&(e.tool[i]=t)}))])},t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},Object.defineProperty(t.prototype,"state",{get:function(){var e;return this.isDisabled?"disabled":u.isSupported(null===(e=this.view)||void 0===e?void 0:e.spatialReference)?this.tool&&this.measurement?this.tool.active?"measuring":"measured":"ready":"disabled"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this._validateUnit(this.defaultUnit)},set:function(e){void 0!==e?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unitOptions",{get:function(){return s.measurementLengthUnits},set:function(e){void 0!==e?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")},enumerable:!1,configurable:!0}),t.prototype.start=function(){return this.createTool()},t.prototype.clear=function(){this.removeTool()},t.prototype.newMeasurement=function(){n.ignoreAbortErrors(this.start())},t.prototype.clearMeasurement=function(){this.clear()},t.prototype.createToolParams=function(){var e=this;return{toolConstructor:u.default,constructorArguments:function(){return{geodesicDistanceThreshold:e.geodesicDistanceThreshold,palette:e.palette,unit:e.unit}}}},t.prototype.logUnsupportedError=function(){h.error("DistanceMeasurement2D widget is not implemented for SceneView")},t.prototype.logError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];h.error.apply(h,e)},t.prototype._validateUnit=function(e){return-1!==this.unitOptions.indexOf(e)?e:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]},t.prototype._validateUnits=function(e){void 0===e&&(e=[]);var t=e.filter((function(e){return-1!==s.measurementLengthUnits.indexOf(e)}));return 0===t.length?s.measurementLengthUnits.slice():t},r.__decorate([l.property(c.defaultUnitPropertyMetadata)],t.prototype,"defaultUnit",void 0),r.__decorate([l.property({type:Number})],t.prototype,"geodesicDistanceThreshold",void 0),r.__decorate([l.property({readOnly:!0,aliasOf:"tool.measurement"})],t.prototype,"measurement",void 0),r.__decorate([l.property({readOnly:!0,aliasOf:"tool.measurementLabel"})],t.prototype,"measurementLabel",void 0),r.__decorate([l.property()],t.prototype,"palette",void 0),r.__decorate([l.property({dependsOn:["isDisabled","measurement","tool.active","view.spatialReference"],readOnly:!0})],t.prototype,"state",null),r.__decorate([l.property({constructOnly:!0,readOnly:!0})],t.prototype,"tool",void 0),r.__decorate([l.property({type:String,dependsOn:["unitOptions","defaultUnit"]})],t.prototype,"unit",null),r.__decorate([l.property({type:[String]})],t.prototype,"unitOptions",null),r.__decorate([l.subclass("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],t)}(p.InteractiveToolViewModel)}).apply(null,i))||(e.exports=o)},JcNK:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("zOht"),r("Gtr7"),r("ma1f"),r("eIBl"),r("qMld"),r("8MXS"),r("Vx27"),r("KdBr")],void 0===(o=(function(e,t,r,i,o,n,s,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveToolViewModel=void 0;var c=function(e){function t(t){var r=e.call(this,t)||this;return r.tool=null,r._baseHandles=new n,r._loggedUnsupportedErrorOnce=!1,r._creationAbortController=null,t&&null!=t.visible&&(r.visible=t.visible),r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._baseHandles.add(a.init(this,["view.ready","isSupported"],(function(){e.view&&e.view.ready&&!e.isSupported?e._loggedUnsupportedErrorOnce||(e.logUnsupportedError(),e._loggedUnsupportedErrorOnce=!0):e._loggedUnsupportedErrorOnce=!1})))},t.prototype.destroy=function(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null},Object.defineProperty(t.prototype,"isSupported",{get:function(){return!this.view||this.view.type===this.supportedViewType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._get("view")},set:function(e){var t=this;e!==this.view&&(this.removeTool(),this._set("view",e),this._baseHandles.remove("tools"),e&&this._baseHandles.add(e.tools.on("change",(function(e){if(t.tool)for(var r=0,i=e.removed;r<i.length;r++){var o=i[r];if(t.tool===o){o.destroyed||o.destroy(),t._set("tool",null);break}}})),"tools"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this._set("visible",e),this.tool&&(this.tool.visible=e),!e&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return!this.view||!this.view.ready||!this.isSupported},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creatingTool",{get:function(){return!!this._creationAbortController},enumerable:!1,configurable:!0}),t.prototype.createTool=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,i,n,a,l,c,p=this;return r.__generator(this,(function(d){switch(d.label){case 0:if(this.removeTool(),!this.isSupported)return[2,s.reject(new o("tool:create","The view does not support the tool"))];e=this.createToolParams(),t=function(){var t=u.evaluateToolConstructorArguments(e.constructorArguments);return r.__assign({visible:p.visible},t)},i=new AbortController,n=i.signal,this._creationAbortController=i,a=function(){i===p._creationAbortController&&(p._creationAbortController=null)},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.view.createTool(e.toolConstructor,t,{signal:n})];case 2:return l=d.sent(),this._set("tool",l),a(),[3,4];case 3:throw c=d.sent(),a(),c;case 4:return[2]}}))}))},t.prototype.removeTool=function(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;var e=this.tool;e&&(this.view&&this.view.tools&&this.view.tools.remove(e),e.destroyed||e.destroy(),this._set("tool",null))},r.__decorate([l.property({constructOnly:!0})],t.prototype,"tool",void 0),r.__decorate([l.property({dependsOn:["view.type"]})],t.prototype,"isSupported",null),r.__decorate([l.property({value:null})],t.prototype,"view",null),r.__decorate([l.property({type:Boolean,value:!0})],t.prototype,"visible",null),r.__decorate([l.property({dependsOn:["_creationAbortController","tool.active"]})],t.prototype,"active",null),r.__decorate([l.property({dependsOn:["view","view.ready","isSupported"]})],t.prototype,"isDisabled",null),r.__decorate([l.property()],t.prototype,"_creationAbortController",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["_creationAbortController"]})],t.prototype,"creatingTool",null),r.__decorate([l.subclass("esri.widgets.support.InteractiveToolViewModel")],t)}(i);t.InteractiveToolViewModel=c}).apply(null,i))||(e.exports=o)},NbdF:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("TMur"),r("LxLY"),r("8uEs"),r("/E+R")],void 0===(o=(function(e,t,r,i,o,n){"use strict";function s(e,t,i,n){var s;if(void 0===n&&(n=new r.Extent),"2d"===i.type)s=t*i.resolution;else if("3d"===i.type){var a=i.basemapTerrain,l=a.overlayManager,u=l?l.overlayPixelSizeInMapUnits(e):1;s=a&&!a.spatialReference.equals(i.spatialReference)?o.getMetersPerUnitForSR(a.spatialReference)/o.getMetersPerUnitForSR(i.spatialReference):t*u}var c=e.x-s,p=e.y-s,d=e.x+s,h=e.y+s,y=i.spatialReference;return n.xmin=Math.min(c,d),n.ymin=Math.min(p,h),n.xmax=Math.max(c,d),n.ymax=Math.max(p,h),n.spatialReference=y,n}Object.defineProperty(t,"__esModule",{value:!0}),t.intersectsDrapedGeometry=t.createQueryGeometry=void 0,t.createQueryGeometry=s,t.intersectsDrapedGeometry=function(e,t,r){var o=r.toMap(e);return i.isNone(o)?null:s(o,n.calculateTolerance(),r,a).intersects(t)?o:null};var a=new r.Extent}).apply(null,i))||(e.exports=o)},O2d9:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("zOht"),r("qMld"),r("Vx27"),r("RHxK"),r("9K80"),r("bC3G")],void 0===(o=(function(e,t,r,i,o,n,s,a){"use strict";var l="esri-distance-measurement-2d__measurement-item",u="esri-distance-measurement-2d__measurement-item-title";return function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.iconClass="esri-icon-measure-line",i.label=void 0,i.messages=null,i.unit=null,i.unitOptions=null,i.view=null,i.viewModel=new s,i}return r.__extends(t,e),t.prototype.render=function(){var e,t,r,i=this.id,o=this.messages,n=this.viewModel,s=this.visible,c=n.active,p=n.isSupported,d=n.measurementLabel,h=n.state,y=n.unit,v=n.unitOptions,m="disabled"===h,_="measuring"===h||"measured"===h,f=c&&"ready"===h?a.tsx("section",{key:"hint",class:"esri-distance-measurement-2d__hint"},a.tsx("p",{class:"esri-distance-measurement-2d__hint-text"},o.hint)):null,b=p?null:a.tsx("section",{key:"unsupported",class:"esri-distance-measurement-2d__panel--error"},a.tsx("p",null,o.unsupported)),g=_?a.tsx("section",{key:"measurement",class:"esri-distance-measurement-2d__measurement"},(e=o.distance,r="distance",(t=d)?a.tsx("div",{key:r+"-enabled",class:l},a.tsx("span",{class:u},e),a.tsx("span",{class:"esri-distance-measurement-2d__measurement-item-value"},t)):a.tsx("div",{key:r+"-disabled",class:this.classes(l,"esri-distance-measurement-2d__measurement-item--disabled"),"aria-disabled":"true"},a.tsx("span",{class:u},e)))):null,w=i+"-units",M=_?a.tsx("section",{key:"units",class:"esri-distance-measurement-2d__units"},a.tsx("label",{class:"esri-distance-measurement-2d__units-label",for:w},o.unit),a.tsx("div",{class:"esri-distance-measurement-2d__units-select-wrapper"},a.tsx("select",{class:"esri-distance-measurement-2d__units-select esri-select",id:w,onchange:this._changeUnit,bind:this,value:y},v.map((function(e){return a.tsx("option",{key:e,value:e},o.units[e])}))))):null,x=_?a.tsx("div",{key:"settings",class:"esri-distance-measurement-2d__settings"},M):null,O=!p||c&&!_?null:a.tsx("div",{class:"esri-distance-measurement-2d__actions"},a.tsx("button",{disabled:m,class:this.classes("esri-button esri-button--secondary","esri-distance-measurement-2d__clear-button",m&&"esri-button--disabled"),bind:this,onclick:this._newMeasurement,title:o.newMeasurement,"aria-label":o.newMeasurement,type:"button"},o.newMeasurement)),D=s?a.tsx("div",{class:"esri-distance-measurement-2d__container"},b,f,x,g,O):null;return a.tsx("div",{class:this.classes("esri-distance-measurement-2d","esri-widget","esri-widget--panel")},D)},t.prototype._newMeasurement=function(){i.ignoreAbortErrors(this.viewModel.start())},t.prototype._changeUnit=function(e){var t=e.target,r=t.options[t.selectedIndex];r&&(this.viewModel.unit=r.value)},r.__decorate([o.aliasOf("viewModel.active"),a.renderable()],t.prototype,"active",void 0),r.__decorate([o.property()],t.prototype,"iconClass",void 0),r.__decorate([o.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),r.__decorate([o.property(),a.renderable(),a.messageBundle("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],t.prototype,"messages",void 0),r.__decorate([o.aliasOf("viewModel.unit")],t.prototype,"unit",void 0),r.__decorate([o.aliasOf("viewModel.unitOptions")],t.prototype,"unitOptions",void 0),r.__decorate([o.aliasOf("viewModel.view")],t.prototype,"view",void 0),r.__decorate([o.property({type:s}),a.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurementLabel"])],t.prototype,"viewModel",void 0),r.__decorate([o.aliasOf("viewModel.visible"),a.renderable()],t.prototype,"visible",void 0),r.__decorate([a.accessibleHandler()],t.prototype,"_newMeasurement",null),r.__decorate([a.accessibleHandler()],t.prototype,"_changeUnit",null),r.__decorate([o.subclass("esri.widgets.DistanceMeasurement2D")],t)}(n)}).apply(null,i))||(e.exports=o)},eXfu:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("jZlN"),r("cTAJ"),r("+AWJ"),r("eIBl"),r("s37w"),r("8uEs"),r("8MXS"),r("Vx27"),r("21p4"),r("wIC5"),r("vsLP"),r("RYqx"),r("lAGb"),r("i1w2"),r("bz+r"),r("N78w"),r("X7Ps")],void 0===(o=(function(e,t,r,i,o,n,s,a,l,u,c,p,d,h,y,v,m,_,f,b,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDistanceMeasurementLabel=t.isSupported=t.createDistanceMeasurementInfo2D=void 0;var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._drawActive=!1,t._handles=new a,t._polylineLayer=new v,t._manipulatorLayer=new v,t._groupLayer=new m({layers:[t._polylineLayer,t._manipulatorLayer],listMode:"hide",visible:!1}),t._vertices=[],t.deferCreation=!0,t.geodesicDistanceThreshold=1e5,t.measurement=null,t.measurementLabel=null,t}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;n.loadMessageBundle("esri/core/t9n/Units").then((function(t){e.messages=t})),this._handles.add(n.onLocaleChange((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=this,[4,n.loadMessageBundle("esri/core/t9n/Units")];case 1:return e.messages=t.sent(),[2]}}))}))})))},t.prototype.destroy=function(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._polylineLayer&&(this._polylineLayer.destroy(),this._polylineLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)},Object.defineProperty(t.prototype,"editable",{set:function(e){this._set("editable",e),e||this._draw.reset()},enumerable:!1,configurable:!0}),t.prototype.activate=function(){this._drawActive||0!==this._vertices.length||this._startSketch()},t.prototype.onAttach=function(){var e=this,t=this.view;this._draw=new _({view:t}),t.map.add(this._groupLayer),t.focus(),this._handles.add([c.init(this,["unit","geodesicDistanceThreshold","palette","messages"],(function(){e._vertices.length>0&&e._updatePolylines()})),c.init(this,"view.spatialReference",(function(e){x(e)&&!h.isLoaded()&&h.load()}))]),this.create()},t.prototype.onDetach=function(){var e=this.view.map;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._polylineLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null)},t.prototype.onShow=function(){this._groupLayer.visible=!0},t.prototype.onHide=function(){this._groupLayer.visible=!1},t.prototype.reset=function(){this._vertices=[],this._polylineLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])},t.prototype.onInputEvent=function(e){"pointer-move"===e.type&&this._updateCursor()},t.prototype._startSketch=function(){var e=this;this._drawActive=!0;var t=this._draw.create("polyline",{mode:"click"});t.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(function(t){return e._updateSketch(t.vertices)})),t.on("draw-complete",(function(){e._stopSketch()}))},t.prototype._stopSketch=function(){this.manipulators.forEach((function(e){e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()},t.prototype._updateSketch=function(e){var t=this;if(!x(this.view.spatialReference)||h.isLoaded()){if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._polylineLayer.removeAll();this.create();for(var r=this.view.spatialReference;this._vertices.length>e.length;){var n=this._vertices.pop().manipulatorId;this.manipulators.remove(n)}for(var a=function(n){var a=e[n],u=a[0],c=a[1],p=function(e,t,r,i){var n=new s.SimpleMarkerSymbol({style:"circle",color:i.handleColor,size:i.handleWidth,outline:{type:"simple-line",width:0}}),a=new s.SimpleMarkerSymbol({style:"circle",color:i.handleColor,size:1.5*i.handleWidth,outline:{type:"simple-line",width:0}}),l=new o({geometry:e,symbol:n});return new b.GraphicManipulator({view:t,layer:r,graphic:l,focusedSymbol:a})}(new i.Point({x:u,y:c,spatialReference:r}),l.view,l._manipulatorLayer,l.palette),d=l.manipulators.add(p);f.createManipulatorDragEventPipeline(p,(function(e,r){r.next(f.screenToMap(t.view)).next(f.dragGraphic(e.graphic)).next((function(){var r=e.graphic.geometry;t._vertices[n].coord=[r.x,r.y],t._updatePolylines()}))})),l._vertices.push({manipulatorId:d,coord:[u,c]})},l=this,u=this._vertices.length;u<e.length;u++)a(u);var c=this._vertices.length-1,p=this._vertices[c],d=e[c],y=d[0],v=d[1];if(p.coord[0]!==y||p.coord[1]!==v){p.coord=[y,v];var m=new i.Point({x:y,y:v,spatialReference:r});this.manipulators.findById(p.manipulatorId).graphic.geometry=m}var _=this._drawActive?this._vertices[c].manipulatorId:null;this.manipulators.forEach((function(e){e.manipulator.interactive=null==_||e.id!==_})),this._updatePolylines()}},t.prototype._updateCursor=function(){this.cursor=this._drawActive?"crosshair":null},t.prototype._updatePolylines=function(){this._polylineLayer.removeAll();var e=M(this._vertices.map((function(e){return e.coord})),this.view.spatialReference,this.geodesicDistanceThreshold),t=e.measurement,r=e.drawing,i=e.original;this._set("measurement",t);var n=O(this.messages,t,this.unit);this._set("measurementLabel",n);var s=this.palette,a=s.pathSecondaryColor,l=s.pathWidth,u=[];u.push(new o({geometry:r,symbol:{type:"simple-line",cap:"butt",join:"round",color:s.pathPrimaryColor,width:l}})),u.push(new o({geometry:r,symbol:{type:"simple-line",style:"dash",cap:"butt",join:"round",color:a,width:l-2}})),u.push(new o({geometry:i.extent.center,symbol:{type:"text",color:[255,255,255,1],haloColor:[0,0,0,.5],haloSize:2,text:n,font:{size:14,family:"sans-serif"}}})),this._polylineLayer.addMany(u)},r.__decorate([p.property()],t.prototype,"cursor",void 0),r.__decorate([p.property({value:!0})],t.prototype,"editable",null),r.__decorate([p.property({type:Number})],t.prototype,"geodesicDistanceThreshold",void 0),r.__decorate([p.property({readOnly:!0})],t.prototype,"measurement",void 0),r.__decorate([p.property({readOnly:!0})],t.prototype,"measurementLabel",void 0),r.__decorate([p.property()],t.prototype,"messages",void 0),r.__decorate([p.property()],t.prototype,"palette",void 0),r.__decorate([p.property()],t.prototype,"unit",void 0),r.__decorate([p.property({constructOnly:!0})],t.prototype,"view",void 0),r.__decorate([p.subclass("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool")],t)}(g.InteractiveToolBase);function M(e,t,r){var o,n,s=new i.Polyline({paths:[e],spatialReference:t});if(t.isGeographic)if(y.isSupported(t))o=y.geodesicLengths([s],"meters")[0],n=y.geodesicDensify(s,1e5);else{var a=h.project(s,i.SpatialReference.WGS84),l=y.geodesicDensify(a,1e5);o=y.geodesicLengths([a],"meters")[0],n=h.project(l,t)}else if(t.isWebMercator)o=d.geodesicLength(s,"meters"),n=d.geodesicDensify(s,1e5,"meters");else{var u=d.planarLength(s,"meters");u>=r?(a=h.project(s,i.SpatialReference.WGS84),l=y.geodesicDensify(a,1e5),o=y.geodesicLengths([a],"meters")[0],n=h.project(l,t)):(o=u,n=s)}return{measurement:{geometry:n,length:o},original:s,drawing:n}}function x(e){if(!e)return!1;var t=e.isGeographic,r=e.isWebMercator;return t&&!e.isWGS84&&!y.isSupported(e)||!t&&!r}function O(e,t,r){if(!t||!e)return null;switch(r){case"metric":return l.formatMetricLength(e,t.length,"meters");case"imperial":return l.formatImperialLength(e,t.length,"meters");default:return l.formatDecimal(e,u.convertUnit(t.length,"meters",r),r)}}t.createDistanceMeasurementInfo2D=M,t.isSupported=function(e){return null!=e&&(!x(e)||h.isSupported())},t.createDistanceMeasurementLabel=O,t.default=w}).apply(null,i))||(e.exports=o)}}]);