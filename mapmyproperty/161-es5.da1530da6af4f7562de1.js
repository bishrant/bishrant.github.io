!function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{P3Vg:function(t,r,i){"use strict";i.r(r),i.d(r,"Colorize",function(){return s}),i("wSAH"),i("n4uK"),i("GVa1");var n=i("of9L"),a=(i("0meK"),i("gjrC")),s=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._size=[0,0],this._programDesc={vsPath:"post-processing/pp",fsPath:"post-processing/filterEffect",attributes:{a_position:0}}}var r,i,s;return r=t,(i=[{key:"dispose",value:function(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}},{key:"draw",value:function(e,t,r){var i=t.width,n=t.height;this._createOrResizeResources(e,i,n);var a=e.context,s=e.painter.materialManager,o=this._programDesc,u=this._quad,l=r.colorMatrix;u.bind();var c=this._layerFBOTexture;a.bindFramebuffer(t),t.copyToTexture(0,0,i,n,0,0,c),a.setBlendingEnabled(!1),a.setStencilTestEnabled(!1);var h=s.getProgram(e,o);a.bindProgram(h),a.bindTexture(c,2),h.setUniformMatrix4fv("u_coefficients",l),h.setUniform1i("u_colorTexture",2),u.draw(),a.setBlendingEnabled(!0),a.setBlendFunction(1,771),a.setStencilTestEnabled(!0),u.unbind()}},{key:"_createOrResizeResources",value:function(e,t,r){var i=e.context;this._layerFBOTexture&&this._size[0]===t&&this._size[1]===r||(this._size[0]=t,this._size[1]=r,this._layerFBOTexture?this._layerFBOTexture.resize(t,r):this._layerFBOTexture=new n.a(i,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:t,height:r}),this._quad||(this._quad=new a.a(i,[-1,-1,1,-1,-1,1,1,1])))}}])&&e(r.prototype,i),s&&e(r,s),t}()}}])}();