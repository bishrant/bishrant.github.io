(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"179/":function(t,e,n){"use strict";const r=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xab","\xbb"],["\xbb","\xab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],i=["\u0622","\u0623","\u0625","\u0627"],s=["\ufef5","\ufef7","\ufef9","\ufefb"],a=["\ufef6","\ufef8","\ufefa","\ufefc"],o=["\u0627","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u06cc","\u0626","\u0624"],l=["\ufe8d","\ufe8f","\ufe95","\ufe99","\ufe9d","\ufea1","\ufea5","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb1","\ufeb5","\ufeb9","\ufebd","\ufec1","\ufec5","\ufec9","\ufecd","\ufed1","\ufed5","\ufed9","\ufedd","\ufee1","\ufee5","\ufee9","\ufeed","\ufef1","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfc","\ufe89","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe89","\ufe85"],c=["\ufe8e","\ufe90","\ufe96","\ufe9a","\ufe9e","\ufea2","\ufea6","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb2","\ufeb6","\ufeba","\ufebe","\ufec2","\ufec6","\ufeca","\ufece","\ufed2","\ufed6","\ufeda","\ufede","\ufee2","\ufee6","\ufeea","\ufeee","\ufef2","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbfd","\ufe8a","\ufe86","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8a","\ufe86"],u=["\ufe8e","\ufe92","\ufe98","\ufe9c","\ufea0","\ufea4","\ufea8","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb4","\ufeb8","\ufebc","\ufec0","\ufec4","\ufec8","\ufecc","\ufed0","\ufed4","\ufed8","\ufedc","\ufee0","\ufee4","\ufee8","\ufeec","\ufeee","\ufef4","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbff","\ufe8c","\ufe86","\ufe71","\ufe72","\ufe74","\ufe77","\ufe79","\ufe7b","\ufe7d","\ufe7f","\ufe80","\ufe8c","\ufe86"],h=["\ufe8d","\ufe91","\ufe97","\ufe9b","\ufe9f","\ufea3","\ufea7","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb3","\ufeb7","\ufebb","\ufebf","\ufec3","\ufec7","\ufecb","\ufecf","\ufed3","\ufed7","\ufedb","\ufedf","\ufee3","\ufee7","\ufeeb","\ufeed","\ufef3","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfe","\ufe8b","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8b","\ufe85"],f=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062f","\u0630","\u0631","\u0632","\u0648","\u0649"],d=["\u064b","\u064b","\u064c","\u061f","\u064d","\u061f","\u064e","\u064e","\u064f","\u064f","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062a","\u062a","\u062a","\u062a","\u062b","\u062b","\u062b","\u062b","\u062c","\u062c","\u062c","\u062c","\u062d","\u062d","\u062d","\u062d","\u062e","\u062e","\u062e","\u062e","\u062f","\u062f","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063a","\u063a","\u063a","\u063a","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064a","\u064a","\u064a","\u064a","\ufef5","\ufef6","\ufef7","\ufef8","\ufef9","\ufefa","\ufefb","\ufefc","\u061f","\u061f","\u061f"],m=["\u0621","\u0641"],b=["\u063a","\u064a"],p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y=10,x=12,O=18,j=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],v=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],w=[[O,O,O,O,O,O,O,O,O,6,5,6,8,5,O,O,O,O,O,O,O,O,O,O,O,O,O,O,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,y,9,y,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,O,O,O,O,O,O,5,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,9,4,11,11,11,11,4,4,4,4,0,4,4,O,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,1,x,1,x,x,1,x,x,1,x,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,11,11,7,9,7,4,4,x,x,x,x,x,x,x,x,x,x,x,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,3,3,3,3,3,3,3,3,3,3,11,3,3,7,7,7,x,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,3,4,x,x,x,x,x,x,7,7,x,x,4,x,x,x,x,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,x,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,x,x,x,x,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,x,x,x,x,x,x,x,x,x,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,O,O,O,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,O,O,O,O,O,4,4,4,4,4,O,O,O,O,O,O,2,0,4,4,2,2,2,2,2,2,y,y,4,4,4,0,2,2,2,2,2,2,2,2,2,2,y,y,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,x,1,1,1,1,1,1,1,1,1,1,y,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,11,4,4,y,y,4,4,4,4,4,11,11,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,O],[4,4,4,11,11,11,4,4,4,4,4,y,9,y,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,11,11,4,4,4,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];function T(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function S(t,e){const n=t.split(""),r=[];return _(n,r,e),function(t,e,n){if(0!==n.hiLevel&&n.swap.substr(0,1)!==n.swap.substr(1,2))for(let r=0;r<t.length;r++)1===e[r]&&(t[r]=V(t[r]))}(n,r,e),B(2,n,r,e),B(1,n,r,e),H=r,n.join("")}function _(t,e,n){const r=t.length,i=n.dir?g:p;let s=0,a=-1;const o=[],l=[];n.hiLevel=n.dir,n.lastArabic=!1,n.hasUbatAl=!1,n.hasUbatB=!1,n.hasUbatS=!1;for(let c=0;c<r;c++)o[c]=L(t[c]);for(let c=0;c<r;c++){const r=s,u=E(t,o,l,c,n);l[c]=u,s=i[r][u];const h=240&s;s&=15;const f=i[s][K];if(e[c]=f,h>0)if(16===h){for(let t=a;t<c;t++)e[t]=1;a=-1}else a=-1;if(i[s][Y])-1===a&&(a=c);else if(a>-1){for(let t=a;t<c;t++)e[t]=f;a=-1}5===o[c]&&(e[c]=0),n.hiLevel|=f}n.hasUbatS&&function(t,e,n,r){for(let i=0;i<n;i++)if(6===t[i]){e[i]=r.dir;for(let n=i-1;n>=0&&8===t[n];n--)e[n]=r.dir}}(o,e,r,n)}function L(t){const e=t.charCodeAt(0),n=v[e>>8];return n<100?n:w[n-100][255&e]}function M(t,e){const n=t.split("");if(e){const t=[];_(n,t,e),H=t}return n.reverse(),G.reverse(),n.join("")}function A(t,e,n){for(let r=0;r<e;r++)if(t[r]===n)return r;return-1}function F(t){for(let e=0;e<m.length;e++)if(t>=m[e]&&t<=b[e])return!0;return!1}function R(t,e,n,r){for(;e*n<r&&U(t[e]);)e+=n;return!!(e*n<r&&F(t[e]))}function z(t,e,n,r){for(;e*n<r&&U(t[e]);)e+=n;let s=" ";if(!(e*n<r))return!1;s=t[e];for(let a=0;a<i.length;a++)if(i[a]===s)return!0;return!1}function B(t,e,n,r){if(r.hiLevel<t)return;if(1===t&&r.dir===X&&!r.hasUbatB)return e.reverse(),void G.reverse();const i=e.length;let s,a,o,l,c,u=0;for(;u<i;){if(n[u]>=t){for(s=u+1;s<i&&n[s]>=t;)s++;for(a=u,o=s-1;a<o;a++,o--)l=e[a],e[a]=e[o],e[o]=l,c=G[a],G[a]=G[o],G[o]=c;u=s}u++}}function E(t,e,n,r,i){return{UBAT_L:()=>(i.lastArabic=!1,0),UBAT_R:()=>(i.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>i.lastArabic?3:2,UBAT_AL:()=>(i.lastArabic=!0,i.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{let t,s;return r<1||r+1>=e.length||2!==(t=n[r-1])&&3!==t||2!==(s=e[r+1])&&3!==s?4:(i.lastArabic&&(s=3),s===t?s:4)},UBAT_ES:()=>2===(r>0?n[r-1]:5)&&r+1<e.length&&2===e[r+1]?2:4,UBAT_ET:()=>{if(r>0&&2===n[r-1])return 2;if(i.lastArabic)return 4;let t=r+1;const s=e.length;for(;t<s&&11===e[t];)t++;return t<s&&2===e[t]?2:4},UBAT_NSM:()=>{if("VLTR"===i.inFormat){const n=e.length;let i=r+1;for(;i<n&&e[i]===x;)i++;if(i<n){const n=t[r].charCodeAt[0],s=e[i];if((n>=1425&&n<=2303||64286===n)&&(1===s||7===s))return 1}}return r<1||5===e[r-1]?4:n[r-1]},UBAT_B:()=>(i.lastArabic=!0,i.hasUbatB=!0,i.dir),UBAT_S:()=>(i.hasUbatS=!0,4),UBAT_LRE:()=>(i.lastArabic=!1,4),UBAT_RLE:()=>(i.lastArabic=!1,4),UBAT_LRO:()=>(i.lastArabic=!1,4),UBAT_RLO:()=>(i.lastArabic=!1,4),UBAT_PDF:()=>(i.lastArabic=!1,4),UBAT_BN:()=>4}[j[e[r]]]()}function V(t){let e,n=0,i=r.length-1;for(;n<=i;)if(e=Math.floor((n+i)/2),t<r[e][0])i=e-1;else{if(!(t>r[e][0]))return r[e][1];n=e+1}return t}function C(t){for(let e=0;e<f.length;e++)if(f[e]===t)return!0;return!1}function I(t){for(let e=0;e<o.length;e++)if(t===o[e])return u[e];return t}function N(t,e){for(let n=0;n<o.length;n++)if(t===o[n])return e[n];return t}function U(t){return t>="\u064b"&&t<="\u0655"}function k(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function D(t,e,n,r){for(;e*n<r&&U(t[e]);)e+=n;return e*n<r&&(t[e]=" ",!0)}function q(t,e){for(let n=0;n<i.length;n++)if(t===i[n])return e[n];return t}function P(t,e,n,r){for(let i=0;i<t.length;i++)(t[i]>e||!n&&t[i]===e)&&(t[i]+=r)}let G=[],W=[],H=[];const J={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},K=5,Y=6,X=1,Z=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,$=/[\u0591-\u06ff\ufb1d-\ufefc]/;e.a=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(t,e,n){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,n){G=[],H=[];for(let r=0;r<n;r++)t[r]=r,e[r]=r,G[r]=r}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,n))return t;n=this.outputFormat;let r=t;const o=J,u=k((e=this.inputFormat).charAt(1)),f=k(n.charAt(1)),m=("I"===e.charAt(0)?"L":e.charAt(0))+u,b=("I"===n.charAt(0)?"L":n.charAt(0))+f,p=e.charAt(2)+n.charAt(2);o.defInFormat=m,o.defOutFormat=b,o.defSwap=p;const g=function t(e,n,r,i,s){const a=function(t,e,n){if(void 0===e.inFormat&&(e.inFormat=n.defInFormat),void 0===e.outFormat&&(e.outFormat=n.defOutFormat),void 0===e.swap&&(e.swap=n.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.substring(0,1),i=e.outFormat.substring(0,1);let s,a=e.inFormat.substring(1,4),o=e.outFormat.substring(1,4);return"C"===a.charAt(0)&&(s=T(t),a="ltr"===s||"rtl"===s?s.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=r+a),"C"===o.charAt(0)&&(s=T(t),"rtl"===s?o="RTL":"ltr"===s?(s=function(t){const e=t.split("");return e.reverse(),T(e.join(""))}(t),o=s.toUpperCase()):o="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=i+o),e}(e,{inFormat:n,outFormat:r,swap:i},s);if(a.inFormat===a.outFormat)return e;r=a.outFormat,i=a.swap;const o=(n=a.inFormat).substring(0,1),l=n.substring(1,4),c=r.substring(0,1),u=r.substring(1,4);if(s.inFormat=n,s.outFormat=r,s.swap=i,"L"===o&&"VLTR"===r){if("LTR"===l)return s.dir=0,S(e,s);if("RTL"===l)return s.dir=X,S(e,s)}if("V"===o&&"V"===c)return s.dir="RTL"===l?X:0,M(e,s);if("L"===o&&"VRTL"===r)return"LTR"===l?(s.dir=0,e=S(e,s)):(s.dir=X,e=S(e,s)),M(e);if("VLTR"===n&&"LLTR"===r)return s.dir=0,S(e,s);if("V"===o&&"L"===c&&l!==u)return e=M(e),"RTL"===l?t(e,"LLTR","VLTR",i,s):t(e,"LRTL","VRTL",i,s);if("VRTL"===n&&"LRTL"===r)return t(e,"LRTL","VRTL",i,s);if("L"===o&&"L"===c){const n=s.swap;return s.swap=n.substr(0,1)+"N","RTL"===l?(s.dir=X,e=S(e,s),s.swap="N"+n.substr(1,2),s.dir=0,e=S(e,s)):(s.dir=0,e=S(e,s),s.swap="N"+n.substr(1,2),e=t(e,"VLTR","LRTL",s.swap,s)),e}return e}(t,m,b,p,o);let y=!1;return"R"===n.charAt(1)?y=!0:"C"!==n.charAt(1)&&"D"!==n.charAt(1)||(y="rtl"===this.checkContextual(g)),this.sourceToTarget=G,this.targetToSource=function(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[t[n]]=n;return e}(this.sourceToTarget),W=this.targetToSource,r=e.charAt(3)===n.charAt(3)?g:"S"===n.charAt(3)?function(t,e,n){if(0===e.length)return"";void 0===t&&(t=!0),void 0===n&&(n=!0);const r=(e=String(e)).split("");let i=0,o=1,u=r.length;t||(i=r.length-1,o=-1,u=1);const f=function(t,e,n,r,i){let o=0;const u=[];let f=0;for(let d=e;d*n<r;d+=n)if(F(t[d])||U(t[d])){if("\u0644"===t[d]&&z(t,d+n,n,r)){t[d]=q(t[d+n],0===o?s:a),d+=n,D(t,d,n,r),i&&(u[f]=d,f++),o=0;continue}const e=t[d];t[d]=1===o?R(t,d+n,n,r)?I(t[d]):N(t[d],c):!0===R(t,d+n,n,r)?N(t[d],h):N(t[d],l),U(e)||(o=1),!0===C(e)&&(o=0)}else o=0;return u}(r,i,o,u,n);let d="";for(let s=0;s<r.length;s++)n&&A(f,f.length,s)>-1?(P(W,s,!t,-1),G.splice(s,1)):d+=r[s];return d}(y,g,!0):function(t,e,n){if(0===t.length)return"";void 0===n&&(n=!0),void 0===e&&(e=!0);let r="";const s=(t=String(t)).split("");for(let a=0;a<t.length;a++){let o=!1;if(s[a]>="\ufe70"&&s[a]<"\ufeff"){const l=t.charCodeAt(a);s[a]>="\ufef5"&&s[a]<="\ufefc"?(e?(a>0&&n&&" "===s[a-1]?r=r.substring(0,r.length-1)+"\u0644":(r+="\u0644",o=!0),r+=i[(l-65269)/2]):(r+=i[(l-65269)/2],r+="\u0644",a+1<t.length&&n&&" "===s[a+1]?a++:o=!0),o&&(P(W,a,!0,1),G.splice(a,0,G[a]))):r+=d[l-65136]}else r+=s[a]}return r}(g,y,!0),this.sourceToTarget=G,this.targetToSource=W,this.levels=H,r}_inputFormatSetter(t){if(!Z.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}_outputFormatSetter(t){if(!Z.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}checkParameters(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}checkContextual(t){let e=T(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(n){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}hasBidiChar(t){return $.test(t)}}},"G0q+":function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n("M0lq"),i=n("opr1"),s=n("LGNZ"),a=n("c46T"),o=n("Mt1D"),l=n("0RS7"),c=n("qcDN"),u=n("OKTS");class h{constructor(t,e,n,r){this.center=Object(a.b)(t,e),this.centerT=Object(a.a)(),this.halfWidth=n/2,this.halfHeight=r/2,this.width=n,this.height=r}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new h(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,e=4){const n=Math.abs(t.centerT[0]-this.centerT[0]),r=Math.abs(t.centerT[1]-this.centerT[1]),i=Math.min((t.halfWidth+this.halfWidth+e)/n,(t.halfHeight+this.halfHeight+e)/r);return Object(u.j)(i)}extend(t){const e=Math.min(this.xmin,t.xmin),n=Math.min(this.ymin,t.ymin),r=Math.max(this.xmax,t.xmax)-e,i=Math.max(this.ymax,t.ymax)-n,s=e+r/2,a=n+i/2;this.width=r,this.height=i,this.halfWidth=r/2,this.halfHeight=i/2,this.x=s,this.y=a}static deserialize(t){const e=t.readF32(),n=t.readF32(),r=t.readInt32(),i=t.readInt32();return new h(e,n,r,i)}}var f=h;const d=Math.PI/180;class m{constructor(t,e,n,r){this._rotationT=Object(s.a)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const i=n.rect,a=new Float32Array(8);e*=r;const o=n.code?i.width*r:n.metrics.width,l=n.code?i.height*r:n.metrics.height;a[0]=t*=r,a[1]=e,a[2]=t+o,a[3]=e,a[4]=t,a[5]=e+l,a[6]=t+o,a[7]=e+l,this._data=a,this._setTextureCoords(i),this._scale=r,this._mosaic=n,this.x=t,this.y=e,this.maxOffset=Math.max(t+o,e+l)}get width(){return this._mosaic.metrics.width*this._scale}get mosaic(){return this._mosaic}set angle(t){this._angle=t,Object(i.d)(this._rotationT),Object(i.f)(this._rotationT,this._rotationT,-t),this._setOffsets(this._data)}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(this._data),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:t,width:e}=this._mosaic.metrics,n=e*this._scale,r=Math.abs(t)*this._scale,a=new Float32Array(8);a[0]=this.x,a[1]=this.y,a[2]=this.x+n,a[3]=this.y,a[4]=this.x,a[5]=this.y+r,a[6]=this.x+n,a[7]=this.y+r;const o=Object(i.e)(Object(s.a)(),this._rotationT,this._T);Object(s.b)(a,a,o);let l=1/0,c=1/0,u=0,h=0;for(let i=0;i<4;i++){const t=a[2*i],e=a[2*i+1];l=Math.min(l,t),c=Math.min(c,e),u=Math.max(u,t),h=Math.max(h,e)}const d=u-l,m=h-c;this._bounds=new f(l+d/2,c+m/2,d,m)}return this._bounds}setTransform(t){this._T=t,this._offsets=null}_setOffsets(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const e=this._offsets,n=new Float32Array(8),r=Object(i.e)(Object(s.a)(),this._rotationT,this._T);Object(s.b)(n,t,r),e.upperLeft=Object(l.a)(8*n[0],8*n[1]),e.upperRight=Object(l.a)(8*n[2],8*n[3]),e.lowerLeft=Object(l.a)(8*n[4],8*n[5]),e.lowerRight=Object(l.a)(8*n[6],8*n[7])}_setTextureCoords({x:t,y:e,width:n,height:r}){this._texcoords={upperLeft:Object(l.a)(t,e),upperRight:Object(l.a)(t+n,e),lowerLeft:Object(l.a)(t,e+r),lowerRight:Object(l.a)(t+n,e+r)}}}const b=(t,e)=>({code:0,page:0,sdf:!0,rect:new c.a(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});class p{constructor(t,e,n){this._rotation=0,this._decorate(t,e,n),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=e.length>1,this._hasRotation=0!==n.angle,this._T=this._createGlyphTransform(this.bounds,n);for(const r of t)r.setTransform(this._T)}setRotation(t){if(0===t&&0===this._rotation)return;this._rotation=t;const e=this._T,n=Object(i.b)(Object(s.a)(),t);Object(i.e)(e,n,e);for(const r of this.glyphs)r.setTransform(this._T)}_decorate(t,e,n){if(!n.decoration||"none"===n.decoration||!t.length)return;const r=n.scale,i="underline"===n.decoration?30:20,s=t[0].textureBinding;for(const a of e)t.push(new m(a.startX*r,a.startY*r+i*r,b((a.width+a.glyphWidthEnd)*r,s),1))}get boundsT(){const t=this.bounds,e=Object(r.r)(Object(a.a)(),t.x,t.y);if(Object(r.s)(e,e,this._T),this._hasRotation){const n=Math.max(t.width,t.height);return new f(e[0],e[1],n,n)}return new f(e[0],e[1],t.width,t.height)}_createBounds(t){let e=1/0,n=1/0,r=0,i=0;for(const o of t)e=Math.min(e,o.xTopLeft),n=Math.min(n,o.yTopLeft),r=Math.max(r,o.xTopLeft+o.width),i=Math.max(i,o.yBottomRight);const s=r-e,a=i-n;return new f(e+s/2,n+a/2,s,a)}_createGlyphTransform(t,e){const n=d*e.angle,o=Object(s.a)(),l=Object(a.a)();return Object(i.h)(o,o,Object(r.r)(l,e.xOffset,-e.yOffset)),e.isCIM?Object(i.f)(o,o,n):(Object(i.h)(o,o,Object(r.r)(l,t.x,t.y)),Object(i.f)(o,o,n),Object(i.h)(o,o,Object(r.r)(l,-t.x,-t.y))),o}}class g{constructor(t,e,n,r,i,s){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(e,n)),this.end=Math.max(0,Math.max(e,n)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=r,this.yMin=i,this.yMax=s}}const y=t=>10===t,x=t=>32===t;function O(t,e,n){const r=n.scale,i=new Array,s=function(t,e,n){const r=new Array,i=n.maxLineWidth*(1/n.scale),s=e?t.length-1:0,a=e?-1:t.length,o=e?-1:1;let l=s,c=0,u=0,h=l,f=h,d=0,m=1/0,b=0;for(;l!==a;){const{code:e,metrics:n}=t[l],a=Math.abs(n.top);y(e)||x(e)||(m=Math.min(m,a),b=Math.max(b,a+n.height)),y(e)?(l!==s&&(r.push(new g(t,h,l-o,c,m,b)),m=1/0,b=0),c=0,h=l+o,f=l+o,u=0):x(e)?(f=l+o,u=0,d=n.advance,c+=n.advance):c>i?(f!==h?(c-=d,r.push(new g(t,h,f-2*o,c-u,m,b)),m=1/0,b=0,h=f,c=u):(r.push(new g(t,h,l-o,c,m,b)),m=1/0,b=0,h=l,f=l,c=0),c+=n.advance,u+=n.advance):(c+=n.advance,u+=n.advance),l+=o}const p=new g(t,h,l-o,c,m,b);return p.start>=0&&p.end<t.length&&r.push(p),r}(t,e,n),a=function(t,e){let n=0;for(let i=0;i<t.length;i++){const{width:e}=t[i];n=Math.max(e,n)}const r=t[0].yMin;return{x:0,y:r,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+("underline"===e.decoration?4:0)-r,width:n}}(s,n),{vAlign:l,hAlign:c}=n,u=l===o.a.Baseline?1:0,h=(1-u)*-a.y+a.height/2*(u?0:l-1)+-26*(u?1:0);for(let o=0;o<s.length;o++){const{start:e,end:a,width:l}=s[o];let u=-1*(c+1)*(l/2)-3;const f=o*n.lineHeight+h-3;s[o].startX=u,s[o].startY=f;for(let n=e;n<=a;n++){const e=t[n];if(y(e.code))continue;const s=new m(u+e.metrics.left,f-e.metrics.top,e,r);u+=e.metrics.advance,i.push(s)}}return new p(i,s,n)}},M08Z:function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return N})),n.d(e,"f",(function(){return k})),n.d(e,"g",(function(){return D})),n.d(e,"h",(function(){return A})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return I})),n.d(e,"l",(function(){return L})),n("wSAH");var r=n("srIe"),i=n("f4Nx"),s=n("KLE9"),a=n("qatw"),o=n("qRWG"),l=n("kYAx"),c=n("9w8m"),u=n("qNUd"),h=n("M0lq"),f=n("opr1"),d=n("LGNZ"),m=n("c46T"),b=n("Mt1D"),p=n("G0q+"),g=n("t7mB"),y=n("eT81");const x=Math.PI/180,O=.04,j=Object(d.a)(),v=Object(m.a)(),w=512,T=50;function S(t,e){if(!e.isWrappable)return null;const[n,r]=Object(c.c)(e);return t[2]>r?[Object(l.g)([t[0],t[1],r,t[3]]),Object(l.g)([n,t[1],n+t[2]-r,t[3]])]:t[0]<n?[Object(l.g)([n,t[1],t[2],t[3]]),Object(l.g)([r-(n-t[0]),t[1],r,t[3]])]:null}function _(t,e,n,r,l,c,h){if(!r||!n.symbol)return t[0]=t[1]=t[2]=t[3]=0,e[0]=e[1]=e[2]=e[3]=0,t;const f=r;if(!Object(a.f)(f)){Object(s.a)(t,f);let r=e[0];0===r&&(r=function t(e){switch(e.symbol.type){case"esriSFS":case"esriPFS":{const t=e.symbol.outline;return t?t.width:0}case"esriSLS":return Object(o.h)(e.symbol.width);case"esriSMS":return Object(o.h)(e.symbol.size);case"esriPMS":return Object(o.h)(Math.max(e.symbol.width,e.symbol.height));case"esriTS":{const t=[0,0,0,0];D(t,e.symbol,e.mosaicItem);const n=Math.max(Math.abs(t[0]),Math.abs(t[1]));return Math.max(t[2],t[3])+n}case"expanded-cim":{const t=y.a.getEnvelope(e.symbol.data);return t.width!==-1/0&&t.height!==-1/0||(t.width=10,t.height=10,t.x=0,t.y=0),Object(o.h)(Math.sqrt(t.width*t.width+t.height*t.height))}case"composite-symbol":return e.symbol.layers.length?t({symbol:e.symbol.layers[e.symbol.layers.length-1],mosaicItem:null}):0;case"label":default:return 0}}(n),e[0]=r);const i=l*r/2;return t[0]-=i,t[1]-=i,t[2]+=i,t[3]+=i,t}{const r=f.x,s=f.y;"esriTS"===n.symbol.type&&0===e[2]&&0===e[3]&&D(e,n.symbol,n.mosaicItem),function(t,e,n,r,s,a,o,l){let c;switch(r.type){case"esriSMS":case"esriPMS":c=N(e,n,r,a,o,0);break;case"esriTS":c=k(e,n,r,s,a,0);break;case"cim":case"CIMSymbolReference":case"expanded-cim":c=U(e,n,r,a,o,0)}let h,f,d=0;for(let i=0;i<c.rings[0].length-1;i++)f=c.rings[0][i],h=(e-f[0])*(e-f[0])+(n-f[1])*(n-f[1]),d=Math.max(d,h);d=Math.sqrt(d);let m=Object(u.b)(e-d,l),b=Object(u.b)(e+d,l);if(m>b){const t=Object(i.d)(l);if(t){const[e,n]=t.valid;m=e,b=n}}t[0]=m,t[1]=n-d,t[2]=b,t[3]=n+d}(t,r,s,n.symbol,e,l,c,h)}return t}function L(t){return"text"===t||"esriTS"===t}function M(t){return"simple-marker"===t||"picture-marker"===t||"esriSMS"===t||"esriPMS"===t}function A(t){switch(Object(r.q)(t.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}const F=Object(m.a)(),R=Object(m.a)(),z=Object(m.a)(),B=Object(m.a)(),E=Object(m.a)(),V=Object(m.a)(),C=Object(m.a)();function I(t,e,n,r){Object(h.r)(z,e,n);const i=t.paths;let s,a,o,l,c,u,f,d,m,b=1/0;for(let p=0;p<i.length;p++){const t=i[p];if(!(t.length<2))for(let i=1;i<t.length;i++)s=t[i-1][0],o=t[i-1][1],a=t[i][0],l=t[i][1],c=Math.min(s,a)-r,u=Math.min(o,l)-r,f=Math.max(s,a)+r,d=Math.max(o,l)+r,e<c||e>f||n<u||n>d||(Object(h.r)(F,s,o),Object(h.r)(R,a,l),Object(h.d)(B,R,F),Object(h.d)(E,F,z),Object(h.a)(V,B,Object(h.g)(B,E)/Object(h.g)(B,B)),Object(h.d)(C,E,V),m=Object(h.g)(C,C),b>m&&(b=m))}return Math.sqrt(b)<=r}function N(t,e,n,r,i,s){let a,l;const c=Object(o.h)(n.xoffset),u=Object(o.h)(n.yoffset),d=x*n.angle,m=x*s;switch(n.type){case"esriSMS":a=l=Object(o.h)(n.size);break;case"esriPMS":a=Object(o.h)(n.width),l=Object(o.h)(n.height)}i<O&&(r=O*r/i);const b=Object(f.d)(j);Object(f.h)(b,b,Object(h.r)(v,t,e)),Object(f.f)(b,b,m-d),Object(f.g)(b,b,Object(h.r)(v,r,-r)),Object(f.h)(b,b,Object(h.r)(v,c,-u));const p=[0,0];Object(h.s)(p,Object(h.r)(v,-.5*a,-.5*l),b);const g=[0,0];Object(h.s)(g,Object(h.r)(v,-.5*a,.5*l),b);const y=[0,0];Object(h.s)(y,Object(h.r)(v,.5*a,-.5*l),b);const w=[0,0];return Object(h.s)(w,Object(h.r)(v,.5*a,.5*l),b),{rings:[[p,y,w,g,p]]}}function U(t,e,n,r,i,s){const a=y.a.getEnvelope(n.data);if(!a)return null;i<O&&(r=O*r/i);const l=Object(o.h)(a.width),c=Object(o.h)(a.height),u=Object(o.h)(a.x),d=Object(o.h)(a.y),m=0*x,b=x*s,p=Object(f.d)(j);Object(f.h)(p,p,Object(h.r)(v,t,e)),Object(f.f)(p,p,b-m),Object(f.g)(p,p,Object(h.r)(v,r,r));const g=[0,0];Object(h.s)(g,Object(h.r)(v,u,d+c),p);const w=[0,0];Object(h.s)(w,Object(h.r)(v,u,d),p);const T=[0,0];Object(h.s)(T,Object(h.r)(v,u+l,d+c),p);const S=[0,0];return Object(h.s)(S,Object(h.r)(v,u+l,d),p),{rings:[[g,T,S,w,g]]}}function k(t,e,n,r,i,s){const a=Object(o.h)(n.xoffset),l=Object(o.h)(n.yoffset),c=x*n.angle,u=x*s,d=Object(f.d)(j);Object(f.h)(d,d,Object(h.r)(v,t,e)),Object(f.f)(d,d,u),Object(f.g)(d,d,Object(h.r)(v,i,-i));const m=r[0]+r[2]/2,b=r[1]+r[3]/2;Object(f.h)(d,d,Object(h.r)(v,a,-l)),Object(f.h)(d,d,Object(h.r)(v,m,b)),Object(f.f)(d,d,c),Object(f.h)(d,d,Object(h.r)(v,-m,-b));const p=[0,0];Object(h.s)(p,Object(h.r)(v,r[0],r[1]),d);const g=[0,0];Object(h.s)(g,Object(h.r)(v,r[0],r[1]+r[3]),d);const y=[0,0];Object(h.s)(y,Object(h.r)(v,r[0]+r[2],r[1]),d);const O=[0,0];return Object(h.s)(O,Object(h.r)(v,r[0]+r[2],r[1]+r[3]),d),{rings:[[p,y,O,g,p]]}}function D(t,e,n){if(!n||0===n.glyphMosaicItems.length)return t;const r=Object(g.a)(e.text)[1],i=n.glyphMosaicItems,s=Object(p.a)(i,r,{scale:Object(o.h)(e.font.size)/24,angle:e.angle,xOffset:e.xoffset,yOffset:e.yoffset,hAlign:Object(b.d)(e.horizontalAlignment||"center"),vAlign:Object(b.f)(e.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(e.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(e.lineHeight||1,4)),decoration:e.font.decoration||"none",isCIM:!1}).bounds;return t[0]=Object(o.h)(s.x-s.halfWidth),t[1]=Object(o.h)(s.y-s.halfHeight),t[2]=Object(o.h)(s.width),t[3]=Object(o.h)(s.height),t}},Mt1D:function(t,e,n){"use strict";var r,i;function s(t){switch(t){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function a(t){switch(t){case"top":return i.Top;case"middle":return i.Center;case"baseline":return i.Baseline;case"bottom":return i.Bottom}}function o(t){switch(t){case"above-left":return[r.Right,i.Bottom];case"above-center":case"above-along":return[r.Center,i.Bottom];case"above-right":return[r.Left,i.Bottom];case"center-left":return[r.Right,i.Center];case"center-center":case"center-along":return[r.Center,i.Center];case"center-right":return[r.Left,i.Center];case"below-left":return[r.Right,i.Top];case"below-center":case"below-along":return[r.Center,i.Top];case"below-right":return[r.Left,i.Top];case"always-horizontal":return[r.Center,i.Baseline];default:return console.debug("Found invalid placement type "+t),[r.Center,i.Center]}}function l(t){switch(t){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug("Found invalid horizontal alignment "+t),0}}function c(t){switch(t){case i.Top:return 1;case i.Center:return 0;case i.Bottom:case i.Baseline:return-1;default:return console.debug("Found invalid vertical alignment "+t),0}}function u(t){switch(t){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return c})),function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"}(r||(r={})),function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(i||(i={}))},RaXU:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const r=new(n("+opI").a)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function i(t){return r.toJSON(t)}},bzbK:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n("qRWG"),i=n("jIHu"),s=n("Du6U"),a=n("eT81"),o=n("M08Z");const l={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1};function c(t){if(!("visualVariables"in t))return 0;if(!t.hasVisualVariables("size"))return 0;const e=t.getVisualVariablesForType("size");if(!e[0])return 0;const n=e[0];if("stops"===n.transformationType)return n.stops.map(t=>t.size).reduce(p,0);if("clamped-linear"===n.transformationType){let t=-1/0,e=-1/0;return t="number"==typeof n.maxSize?n.maxSize:n.maxSize.stops.map(t=>t.size).reduce(p,0),e="number"==typeof n.minSize?n.minSize:n.minSize.stops.map(t=>t.size).reduce(p,0),Math.max(t,e)}return"real-world-size"===n.transformationType?30:void 0}async function u(t,e,n){if(!t||n&&"cluster"===n.type)return 0;if("heatmap"===t.type)return Math.round(3*t.blurRadius);if("dot-density"===t.type)return 0;if("dictionary"===t.type)return"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?100:200;const i=t.getSymbols(),s=c(t),a=[];for(const r of i)a.push(m(r,s));const o=await Promise.all(a);return Object(r.h)(o.reduce(p,0))}const h=[0,0,0,0];function f(t,e){return null==t?e:t}const d={sdf:!0,code:99,metrics:i.c.metrics,rect:new s.a(0,0,24,24),page:0,textureBinding:2};async function m(t,e){return function(t){return t.type in l}(t)?Math.min(await async function t(e,n){if("simple-marker"===e.type){const t=Math.max(f(e.size,12),n);return b(e)+.707*t}if("picture-marker"===e.type){const t=Math.max(f(e.height,12),n),r=f(e.width,12)*(t/f(e.height,12))/2,i=t/2;return b(e)+Math.sqrt(r*r+i*i)}if("text"===e.type){const t=function(t){const e=t.text&&t.text.length;if(!e)return{glyphMosaicItems:[d]};const n=[];for(let r=0;r<e;r++)n.push({...d,code:t.text.charCodeAt(r)});return{glyphMosaicItems:n}}(e);Object(o.g)(h,e.toJSON(),t);const n=Math.abs(h[0]),r=Math.abs(h[1]),i=h[2],s=h[3];return Math.max(n,r)+Math.max(i,s)}if("simple-line"===e.type){const t=e,r=Math.max(f(t.width,.75),n)/2;return t.marker?Math.max(6*t.width,2*n):r}if("simple-fill"===e.type||"picture-fill"===e.type)return Math.max(function(t,e){return null==t.outline?0:f(t.outline.width,0)}(e),n)/2;if("cim"===e.type){const t=a.a.getEnvelope(e.data);return t?Math.sqrt(t.width*t.width+t.height*t.height):0}return"web-style"===e.type?t(await e.fetchCIMSymbol(),n):0}(t,e),75):0}function b(t){const e=f(t.xoffset,0),n=f(t.yoffset,0);return Math.sqrt(e*e+n*n)}function p(t,e){return Math.max(t,e)}},fvq6:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return r}));const r={Base64:0,Hex:1,String:2,Raw:3};function i(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function s(t,e,n,r,s,a){return i(function(t,e){return t<<e|t>>>32-e}(i(i(e,t),i(r,a)),s),n)}function a(t,e,n,r,i,a,o){return s(e&n|~e&r,t,e,i,a,o)}function o(t,e,n,r,i,a,o){return s(e&r|n&~r,t,e,i,a,o)}function l(t,e,n,r,i,a,o){return s(e^n^r,t,e,i,a,o)}function c(t,e,n,r,i,a,o){return s(n^(e|~r),t,e,i,a,o)}function u(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let n=1732584193,r=-271733879,s=-1732584194,u=271733878;for(let h=0;h<t.length;h+=16){const e=n,f=r,d=s,m=u;n=a(n,r,s,u,t[h+0],7,-680876936),u=a(u,n,r,s,t[h+1],12,-389564586),s=a(s,u,n,r,t[h+2],17,606105819),r=a(r,s,u,n,t[h+3],22,-1044525330),n=a(n,r,s,u,t[h+4],7,-176418897),u=a(u,n,r,s,t[h+5],12,1200080426),s=a(s,u,n,r,t[h+6],17,-1473231341),r=a(r,s,u,n,t[h+7],22,-45705983),n=a(n,r,s,u,t[h+8],7,1770035416),u=a(u,n,r,s,t[h+9],12,-1958414417),s=a(s,u,n,r,t[h+10],17,-42063),r=a(r,s,u,n,t[h+11],22,-1990404162),n=a(n,r,s,u,t[h+12],7,1804603682),u=a(u,n,r,s,t[h+13],12,-40341101),s=a(s,u,n,r,t[h+14],17,-1502002290),r=a(r,s,u,n,t[h+15],22,1236535329),n=o(n,r,s,u,t[h+1],5,-165796510),u=o(u,n,r,s,t[h+6],9,-1069501632),s=o(s,u,n,r,t[h+11],14,643717713),r=o(r,s,u,n,t[h+0],20,-373897302),n=o(n,r,s,u,t[h+5],5,-701558691),u=o(u,n,r,s,t[h+10],9,38016083),s=o(s,u,n,r,t[h+15],14,-660478335),r=o(r,s,u,n,t[h+4],20,-405537848),n=o(n,r,s,u,t[h+9],5,568446438),u=o(u,n,r,s,t[h+14],9,-1019803690),s=o(s,u,n,r,t[h+3],14,-187363961),r=o(r,s,u,n,t[h+8],20,1163531501),n=o(n,r,s,u,t[h+13],5,-1444681467),u=o(u,n,r,s,t[h+2],9,-51403784),s=o(s,u,n,r,t[h+7],14,1735328473),r=o(r,s,u,n,t[h+12],20,-1926607734),n=l(n,r,s,u,t[h+5],4,-378558),u=l(u,n,r,s,t[h+8],11,-2022574463),s=l(s,u,n,r,t[h+11],16,1839030562),r=l(r,s,u,n,t[h+14],23,-35309556),n=l(n,r,s,u,t[h+1],4,-1530992060),u=l(u,n,r,s,t[h+4],11,1272893353),s=l(s,u,n,r,t[h+7],16,-155497632),r=l(r,s,u,n,t[h+10],23,-1094730640),n=l(n,r,s,u,t[h+13],4,681279174),u=l(u,n,r,s,t[h+0],11,-358537222),s=l(s,u,n,r,t[h+3],16,-722521979),r=l(r,s,u,n,t[h+6],23,76029189),n=l(n,r,s,u,t[h+9],4,-640364487),u=l(u,n,r,s,t[h+12],11,-421815835),s=l(s,u,n,r,t[h+15],16,530742520),r=l(r,s,u,n,t[h+2],23,-995338651),n=c(n,r,s,u,t[h+0],6,-198630844),u=c(u,n,r,s,t[h+7],10,1126891415),s=c(s,u,n,r,t[h+14],15,-1416354905),r=c(r,s,u,n,t[h+5],21,-57434055),n=c(n,r,s,u,t[h+12],6,1700485571),u=c(u,n,r,s,t[h+3],10,-1894986606),s=c(s,u,n,r,t[h+10],15,-1051523),r=c(r,s,u,n,t[h+1],21,-2054922799),n=c(n,r,s,u,t[h+8],6,1873313359),u=c(u,n,r,s,t[h+15],10,-30611744),s=c(s,u,n,r,t[h+6],15,-1560198380),r=c(r,s,u,n,t[h+13],21,1309151649),n=c(n,r,s,u,t[h+4],6,-145523070),u=c(u,n,r,s,t[h+11],10,-1120210379),s=c(s,u,n,r,t[h+2],15,718787259),r=c(r,s,u,n,t[h+9],21,-343485551),n=i(n,e),r=i(r,f),s=i(s,d),u=i(u,m)}return[n,r,s,u]}function h(t,e=r.Hex){const n=e||r.Base64,i=u(function(t){const e=[];for(let n=0,r=8*t.length;n<r;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}(t),8*t.length);switch(n){case r.Raw:return i;case r.Hex:return function(t){const e="0123456789abcdef",n=[];for(let r=0,i=4*t.length;r<i;r++)n.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return n.join("")}(i);case r.String:return function(t){const e=[];for(let n=0,r=32*t.length;n<r;n+=8)e.push(String.fromCharCode(t[n>>5]>>>n%32&255));return e.join("")}(i);case r.Base64:return function(t){const e=[];for(let n=0,r=4*t.length;n<r;n+=3){const r=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let i=0;i<4;i++)e.push(8*n+6*i>32*t.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-i)&63))}return e.join("")}(i)}}},m662:function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return T}));var r,i=n("wSAH"),s=n("srIe"),a=n("6S2I"),o=n("zlDU"),l=n("moES"),c=n("w/y1"),u=n("fvq6"),h=n("pO5D"),f=n("f/qv"),d=(n("zqDF"),n("WbKI")),m=n("04ZG"),b=n("Cduq"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("hvLT"));let g=r=class extends c.a{writeLevels(t,e,n){for(const r in t)return void(e.stops=this.levels[r])}clone(){return new r({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Object(p.c)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Object(p.c)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:Object(f.a)(this.levels)})}};Object(h.a)([Object(d.b)()],g.prototype,"levels",void 0),Object(h.a)([Object(b.a)("levels")],g.prototype,"writeLevels",null),g=r=Object(h.a)([Object(m.a)("esri.views.2d.engine.LevelDependentSizeVariable")],g);const y=a.a.getLogger("esri.views.2d.layers.support.clusterUtils");i.a.add("esri-cluster-arcade-enabled",1);const x=Object(i.a)("esri-cluster-arcade-enabled"),O=(t,e,n,r)=>{const i=e.clone();if(!T(i))return i;if(n.fields)for(const s of n.fields)S(t,s);if("visualVariables"in i){const e=(i.visualVariables||[]).filter(t=>"$view.scale"!==t.valueExpression),a=j(e);e.forEach(e=>{"rotation"===e.type?e.field?e.field=L(t,e.field,"avg_angle"):e.valueExpression&&(e.field=_(t,e.valueExpression,"avg_angle"),e.valueExpression=null):e.normalizationField?(e.field=L(t,e.field,"norm",e.normalizationField),e.normalizationField=null):e.field?e.field=L(t,e.field,"avg"):(e.field=_(t,e.valueExpression,"avg"),e.valueExpression=null)}),Object(s.j)(a)&&!v(e)&&(e.push(w(n,r)),i.dynamicClusterSize=!0),i.visualVariables=e}switch(i.type){case"simple":break;case"unique-value":i.field?i.field=L(t,i.field,"mode"):i.valueExpression&&(i.field=_(t,i.valueExpression,"mode"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=L(t,i.field,"norm",i.normalizationField),i.normalizationField=null):i.field?i.field=L(t,i.field,"avg"):(i.field=_(t,i.valueExpression,"avg"),i.valueExpression=null)}return i},j=t=>{for(const e of t)if("size"===e.type)return e;return null},v=t=>{for(const e of t)if("cluster_count"===e.field)return!0;return!1},w=(t,e)=>{const n=[new l.a({value:0,size:0}),new l.a({value:1})];if(Object(s.j)(e))return new c.a({field:"cluster_count",stops:[...n,new l.a({value:2,size:0})]});const r=Object.keys(e).reduce((r,i)=>({...r,[i]:[...n,new l.a({value:Math.max(2,e[i].minValue),size:t.clusterMinSize}),new l.a({value:Math.max(3,e[i].maxValue),size:t.clusterMaxSize})]}),{});return new g({field:"cluster_count",levels:r})},T=t=>{const e=e=>y.error(new o.a("Unsupported-renderer",e,{renderer:t}));if("unique-value"===t.type){if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===t.type){if(t.normalizationField){const n=t.normalizationType;if("field"!==n)return e("FeatureReductionCluster does not support a normalizationType of "+n),!1}}else if("simple"!==t.type)return e("FeatureReductionCluster does not support renderers of type "+t.type),!1;if(!x){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(t=>!(!("valueExpression"in t)||!t.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function S(t,e){const{name:n,outStatistic:r}=e,{onStatisticField:i,onStatisticValueExpression:s,statisticType:a}=r;if(s){const e=Object(u.a)(s.toLowerCase());t.push({name:n,outStatistic:{onStatisticField:e,onStatisticValueExpression:s,statisticType:a}})}else i?t.push({name:n,outStatistic:{onStatisticField:i,statisticType:a}}):y.error(new o.a("mapview-unsupported-field","Unable to handle field",{field:e}))}function _(t,e,n){const r=Object(u.a)(e),i="mode"===n?"cluster_type_"+r:"cluster_avg_"+r;return t.some(t=>t.name===i)||t.push({name:i,outStatistic:{onStatisticField:r,onStatisticValueExpression:e,statisticType:n}}),i}function L(t,e,n,r){if("cluster_count"===e||t.some(t=>t.name===e))return e;const i=function(t,e,n){switch(t){case"avg":case"avg_angle":return"cluster_avg_"+e;case"mode":return"cluster_type_"+e;case"norm":{const t=n,r="field",i=e.toLowerCase()+",norm:"+r+","+t.toLowerCase();return"cluster_avg_"+Object(u.a)(i)}}}(n,e,r);return t.some(t=>t.name===i)||t.push("norm"===n?{name:i,outStatistic:{onStatisticField:e,onStatisticNormalizationField:r,statisticType:n}}:{name:i,outStatistic:{onStatisticField:e,statisticType:n}}),i}},owVx:function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return T}));var r=n("wSAH"),i=n("f/qv"),s=n("srIe"),a=n("6S2I"),o=n("zlDU"),l=n("qRWG"),c=(n("ZnuT"),n("YXST")),u=(n("tCO6"),n("2gBT"),n("JhoD"),n("tI3Y"),n("R4xK"),n("/1dM")),h=(n("+Xal"),n("m662")),f=n("yE7X"),d=n("GMaR"),m=n("yN2G"),b=n("NIRN"),p=n("bzbK"),g=n("tDOP"),y=n("RaXU");const x=a.a.getLogger("esri.views.2d.layers.features.schemaUtils"),O="ValidationError",j={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function v(t){return Object(d.h)(t)}function w(t){switch(t.type){case"line-marker":var e;return{type:"line-marker",color:null==(e=t.color)?void 0:e.toJSON(),placement:t.placement,style:t.style};default:return Object(c.a)(t.toJSON()).toJSON()}}function T(t,e,n){if(!t)return null;let r=0,i=!1,a=0;switch(Object(s.k)(e)&&(a=Object(p.b)(e),"visualVariables"in e&&(r=function(t){if(!t)return f.e.NONE;let e=0;for(const n of t)if("size"===n.type){const t=Object(b.a)(n);e|=t,"outline"===n.target&&(e|=t<<4)}else"color"===n.type?e|=f.e.COLOR:"opacity"===n.type?e|=f.e.OPACITY:"rotation"===n.type&&(e|=f.e.ROTATION);return e}(e.visualVariables||[]),i="dot-density"===e.type)),t.type){case"simple-fill":case"picture-fill":return function(t,e,n,r){const i=Object(d.g)(f.d.FILL,e,!1,n),s=r?v(i):i,a=t.clone(),o=a.outline;a.outline=null;const l=[],c={materialKey:s,hash:a.hash(),...w(a)};if(l.push(c),o){const t=Object(d.g)(f.d.LINE,e,!0,!1),n={materialKey:r?v(t):t,hash:o.hash(),...w(o)};l.push(n)}return{type:"composite-symbol",layers:l,hash:l.reduce((t,e)=>e.hash+t,"")}}(t,r,i,n);case"simple-marker":case"picture-marker":return function(t,e,n,r){const i=Object(d.g)(f.d.MARKER,e,!1,!1),s=r?v(i):i,a=w(t);return{materialKey:s,hash:t.hash(),...a,angle:t.angle,maxVVSize:n}}(t,r,a,n);case"simple-line":return function(t,e,n){const r=Object(d.g)(f.d.LINE,e,!1,!1),i=n?v(r):r,s=t.clone(),a=s.marker;s.marker=null;const o=[];if(o.push({materialKey:i,hash:s.hash(),...w(s)}),a){var l;const t=Object(d.g)(f.d.MARKER,e,!1,!1),r=n?v(t):t;a.color=null!=(l=a.color)?l:s.color,o.push({materialKey:r,hash:a.hash(),lineWidth:s.width,...w(a)})}return{type:"composite-symbol",layers:o,hash:o.reduce((t,e)=>e.hash+t,"")}}(t,r,n);case"text":return function(t,e,n,r){const i=Object(d.g)(f.d.TEXT,e,!1,!1),s=r?v(i):i,a=w(t);return{materialKey:s,hash:t.hash(),...a,angle:t.angle,maxVVSize:n}}(t,r,a,n);case"label":return function(t,e,n){const r=Object(d.g)(f.d.LABEL,e,!1,!1,t.labelPlacement);return{materialKey:n?v(r):r,hash:t.hash(),...t.toJSON(),labelPlacement:t.labelPlacement}}(t,r,n);case"cim":return{type:"cim",rendererKey:r,data:t.data,maxVVSize:a};case"web-style":return{...w(t),type:"web-style",hash:t.hash(),rendererKey:r,maxVVSize:a};default:throw new Error("symbol not supported "+t.type)}}function S(t,e){const n=Object(i.a)(t);return n.some(t=>function(t,e){const n=t.labelPlacement,r=j[e];if(!t.symbol)return x.warn("No LabelClass symbol specified."),!0;if(!r)return x.error(new o.a("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${e} is not supported`)),!0;if(!r.some(t=>t===n)){const i=r[0];n&&x.warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${i}`),t.labelPlacement=i}return!1}(t,e))?[]:n}function _(t){return Object(r.a)("esri-2d-update-debug")&&console.debug("Created new schema",L(t,!0)),L(t)}function L(t,e=!1){try{var n,r;const i=function(t,e=!1){const n=new Array;return n.push(function(t,e,n=!1){const r={indexCount:0,fields:{}},i="featureReduction"in t&&t.featureReduction,s=i?"aggregate":"feature";switch(t.renderer.type){case"heatmap":{const{blurRadius:e,fieldOffset:n,field:i}=t.renderer;return{type:"heatmap",aggregateFields:[],attributes:r,target:s,storage:null,mesh:{blurRadius:e,fieldOffset:n,field:R(r,{target:s,field:i,resultType:"numeric"}).field}}}default:{const e=[],a="aggregate"===s?Object(h.b)(e,t.renderer,i,null):t.renderer;!function(t,e){const n={mesh:!0,storage:!0};for(const r of e){const{name:e,outStatistic:i}=r,{statisticType:s,onStatisticField:a}=i;let o=null,l=null,c=null;const u="numeric",h="feature";"onStatisticValueExpression"in i?l=z(t,{type:"expression",target:h,valueExpression:i.onStatisticValueExpression,resultType:u}).fieldIndex:"onStatisticNormalizationField"in i?(o=z(t,{type:"field",target:h,field:a,resultType:u}).field,c=i.onStatisticNormalizationField):o=z(t,{type:"field",target:h,field:a,resultType:u}).field,z(t,{type:"statistic",target:"aggregate",name:e,context:n,inField:o,inNormalizationField:c,inFieldIndex:l,statisticType:s})}}(r,e);const l=E(r,s,a,n);let c=null;const f=function(t,e,n){switch(n.type){case"dot-density":return function(t,e,n){return n&&n.length?{type:"dot-density",mapping:n.map((n,r)=>{const{field:i,fieldIndex:s}=R(t,{valueExpression:n.valueExpression,field:n.field,resultType:"numeric",target:e});return{binding:r,field:i,fieldIndex:s}}),target:e}:{type:"dot-density",mapping:[],target:e}}(t,e,n.attributes);case"simple":case"class-breaks":case"unique-value":return function(t,e,n){if(!n||!n.length)return{type:"visual-variable",mapping:[],target:e};const r={storage:!0},i="numeric";return{type:"visual-variable",mapping:Object(g.b)(n).map(n=>{var s;const a=Object(m.m)(n.type),{field:o,fieldIndex:l}=R(t,{target:e,valueExpression:n.valueExpression,field:n.field,context:r,resultType:i});switch(n.type){case"size":return"$view.scale"===n.valueExpression?null:{type:"size",binding:a,field:o,fieldIndex:l,normalizationField:R(t,{target:e,field:n.normalizationField,context:r,resultType:i}).field,valueRepresentation:null!=(s=n.valueRepresentation)?s:null};case"color":return{type:"color",binding:a,field:o,fieldIndex:l,normalizationField:R(t,{target:e,field:n.normalizationField,context:r,resultType:i}).field};case"opacity":return{type:"opacity",binding:a,field:o,fieldIndex:l,normalizationField:R(t,{target:e,field:n.normalizationField,context:r,resultType:i}).field};case"rotation":return{type:"rotation",binding:a,field:o,fieldIndex:l}}}).filter(t=>t),target:e}}(t,e,n.visualVariables);case"heatmap":case"dictionary":return null}}(r,s,a),d=Object(y.a)(t.geometryType);let b=t.labelsVisible&&t.labelingInfo||[],p=[];if(i){if("selection"===i.type)throw new o.a(O,"Mapview does not support `selection` reduction type",i);if(i.symbol){const t=new u.a({symbol:i.symbol,visualVariables:"visualVariables"in a?a.visualVariables:null});c=E(r,s,t,n)}p=i&&i.labelsVisible&&i.labelingInfo||[]}b=S(b,d),p=S(p,d);let x=0;const j=[...b.map(t=>B(a,r,t,"feature",x++,n)),...p.map(t=>B(a,r,t,"aggregate",x++,n))];return{type:"symbol",target:s,attributes:r,aggregateFields:e,storage:f,mesh:{matcher:l,labels:j,aggregateMatcher:c}}}}}(t)),n}(t,e),s={};return i.map(e=>function(t,e,n){switch(n.target){case"feature":return void F(t,A(e),n);case"aggregate":{const r=e.featureReduction;if("selection"===r.type)throw new o.a(O,"Mapview does not support `selection` reduction type",r);return F(t,A(e),n),void function(t,e,n){t.aggregate||(t.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:Object(l.h)(e.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(Object(l.h)(e.clusterMaxSize)/64),fields:n.aggregateFields}}),M(t.aggregate,n.attributes.fields)}(t,r,n)}}}(s,t,e)),{source:{definitionExpression:t.definitionExpression,fields:t.fields.map(t=>t.toJSON()),gdbVersion:t.gdbVersion,historicMoment:null==(n=t.historicMoment)?void 0:n.getTime(),outFields:t.availableFields,pixelBuffer:t.pixelBuffer,spatialReference:t.spatialReference.toJSON(),timeExtent:null==(r=t.timeExtent)?void 0:r.toJSON()},attributes:{fields:{},indexCount:0},processors:i,targets:s}}catch(i){if(i.fieldName===O)return x.error(i),null;throw i}}function M(t,e){for(const n in e){const r=e[n];if(r.target!==t.name)continue;const i=t.attributes[n];i?(i.context.mesh=i.context.mesh||r.context.mesh,i.context.storage=i.context.storage||r.context.storage):t.attributes[n]=r}return t}function A(t){var e,n,r,i,s;return[null!=(e=null==(n=t.filter)?void 0:n.toJSON())?e:null,null!=(r=null==(i=t.effect)||null==(s=i.filter)?void 0:s.toJSON())?r:null]}function F(t,e,n){return t.feature||(t.feature={name:"feature",input:"source",filters:e,attributes:{}}),M(t.feature,n.attributes.fields),t}function R(t,e){return e.field?z(t,{...e,type:"field",field:e.field}):e.valueExpression?z(t,{...e,type:"expression",valueExpression:e.valueExpression}):{field:null,fieldIndex:null}}function z(t,e){switch(e.type){case"expression":{const n=e.valueExpression;if(!t.fields[n]){const r=t.indexCount++;t.fields[n]={...e,name:n,fieldIndex:r}}return{fieldIndex:t.fields[n].fieldIndex}}case"label-expression":{const n=JSON.stringify(e.label);if(!t.fields[n]){const r=t.indexCount++;t.fields[n]={...e,name:n,fieldIndex:r}}return{fieldIndex:t.fields[n].fieldIndex}}case"field":{const n=e.field;return"aggregate"===e.target&&t.fields[n]||(t.fields[n]={...e,name:n}),{field:n}}case"statistic":return t.fields[e.name]={...e},{field:e.name}}}function B(t,e,n,r,i,s=!1){const a=z(e,{type:"label-expression",target:r,context:{mesh:!0},resultType:"string",label:{labelExpression:n.labelExpression,labelExpressionInfo:n.labelExpressionInfo?{expression:n.labelExpressionInfo.expression}:null,symbol:!!n.symbol,where:n.where}}),{fieldIndex:o}=a;return{...T(n,t,s),fieldIndex:o,target:r,index:i}}function E(t,e,n,r=!1){const i=Object(s.r)(t,{indexCount:0,fields:{}});switch(n.type){case"simple":case"dot-density":return function(t,e,n,r=!1){const i=e.getSymbols();return{type:"simple",symbol:T(i.length?i[0]:null,e,r),isDotDensity:n}}(0,n,"dot-density"===n.type,r);case"class-breaks":return function(t,e,n,r=!1){const i=n.backgroundFillSymbol,{field:s,fieldIndex:a}=R(t,{target:e,field:n.field,valueExpression:n.valueExpression,resultType:"numeric",context:{mesh:!0,use:"renderer.field"}}),o=n.normalizationType,l="log"===o?"esriNormalizeByLog":"percent-of-total"===o?"esriNormalizeByPercentOfTotal":"field"===o?"esriNormalizeByField":null,c=n.classBreakInfos.map(t=>({symbol:T(t.symbol,n,r),min:t.minValue,max:t.maxValue})).sort((t,e)=>t.min-e.min);return{type:"interval",attributes:t.fields,field:s,fieldIndex:a,backgroundFillSymbol:T(i,n,r),defaultSymbol:T(n.defaultSymbol,n,r),intervals:c,normalizationField:n.normalizationField,normalizationTotal:n.normalizationTotal,normalizationType:l,isMaxInclusive:n.isMaxInclusive}}(i,e,n,r);case"unique-value":return function(t,e,n,r=!1){const i=[],s=n.backgroundFillSymbol,a={target:e,context:{mesh:!0},resultType:"string"};if(n.field&&"string"!=typeof n.field)throw new o.a(O,"Expected renderer.field to be a string",n);const{field:l,fieldIndex:c}=R(t,{...a,field:n.field,valueExpression:n.valueExpression});for(const o of n.uniqueValueInfos)i.push({value:""+o.value,symbol:T(o.symbol,n,r)});return{type:"map",attributes:t.fields,field:l,fieldIndex:c,field2:R(t,{...a,field:n.field2}).field,field3:R(t,{...a,field:n.field3}).field,fieldDelimiter:n.fieldDelimiter,backgroundFillSymbol:T(s,n),defaultSymbol:T(n.defaultSymbol,n),map:i}}(i,e,n,r);case"dictionary":return function(t,e,n=!1){return{type:"dictionary",renderer:e.toJSON()}}(0,n,r)}}},qcDN:function(t,e,n){"use strict";e.a=class{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.width=n,this.height=r}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}},t7mB:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const r=new(n("179/").a);function i(t){if(!r.hasBidiChar(t))return[t,!1];let e;return e="rtl"===r.checkContextual(t)?"IDNNN":"ICNNN",[r.bidiTransform(t,e,"VLYSN"),!0]}},tDOP:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n("6S2I"),i=n("qRWG");const s=r.a.getLogger("esri.renderers.visualVariables.support.utils"),a=t=>{if(!("visualVariables"in t)||!t.visualVariables||!t.visualVariables.length)return t;const e=t.clone(),n=e.visualVariables.map(t=>l(t)?c(t):t);return e.visualVariables=n,e};function o(t){return t.map(t=>l(t)?c(t.clone()):t)}function l(t){return("size"===t.type||"color"===t.type||"opacity"===t.type)&&null!=t.stops}function c(t){return t.stops=function(t,e){return e.length<=8?e:(s.warn(`Found ${e.length} Visual Variable stops, but MapView only supports 8. Displayed stops will be simplified.`),e.length>16?function(t,e){const[n,...r]=e,s=r.pop(),a=r[0].value,o=r[r.length-1].value,l=(o-a)/6,c=[];for(let h=a;h<o;h+=l){let n=0;for(;h>=r[n].value;)n++;const s=r[n],a=e[n-1],o=h-a.value,l=s.value===a.value?1:o/(s.value-a.value);if("color"===t){const t=r[n],i=e[n-1],s=t.color.clone();s.r=u(i.color.r,s.r,l),s.g=u(i.color.g,s.g,l),s.b=u(i.color.b,s.b,l),s.a=u(i.color.a,s.a,l),c.push({value:h,color:s,label:t.label})}else if("size"===t){const t=r[n],s=e[n-1],a=Object(i.k)(t.size),o=u(Object(i.k)(s.size),a,l);c.push({value:h,size:o,label:t.label})}else{const t=r[n],i=u(e[n-1].opacity,t.opacity,l);c.push({value:h,opacity:i,label:t.label})}}return[n,...c,s]}(t,e):function(t){const[e,...n]=t,r=n.pop();for(;n.length>6;){let t=0,e=0;for(let r=1;r<n.length;r++){const i=Math.abs(n[r].value-n[r-1].value);i>e&&(e=i,t=r)}n.splice(t,1)}return[e,...n,r]}(e))}(t.type,t.stops),t}function u(t,e,n){return(1-n)*t+n*e}}}]);