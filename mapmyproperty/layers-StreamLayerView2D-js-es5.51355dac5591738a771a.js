!function(){function e(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,o)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{"+haL":function(t,n,s){"use strict";s.r(n);var f=s("pO5D"),p=(s("wSAH"),s("srIe")),y=(s("6S2I"),s("zqDF"),s("WbKI")),h=s("04ZG"),d=s("zlDU"),v=(s("4EHJ"),s("ju1D"),s("9AIY"),s("8prj")),b=s("RaXU");function O(e,t){if(Object(p.j)(e)&&Object(p.j)(t))return null;var r={};return Object(p.k)(t)&&(r.geometry=t.toJSON()),Object(p.k)(e)&&(r.where=e),r}var j=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(j,t);var n,s,f,p,y,h=u(j);function j(){var e;return o(this,j),(e=h.apply(this,arguments))._enabledDataReceived=!1,e.errorString=null,e.connectionStatus="disconnected",e}return n=j,(s=[{key:"initialize",value:function(){var e=this;this.handles.add([this.layer.watch("purgeOptions",(function(){return e._update()}))])}},{key:"destroy",value:function(){this.connectionStatus="disconnected"}},{key:"connectionError",get:function(){if(this.errorString)return new d.a("stream-controller",this.errorString)}},{key:"on",value:function(e,t){"data-received"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent("data-received",!0));var r=a(l(j.prototype),"on",this).call(this,e,t),n=this;return{remove:function(){r.remove(),"data-received"===e&&(n._proxy.closed||n.hasEventListener("data-received")||n._proxy.enableEvent("data-received",!1))}}}},{key:"queryLatestObservations",value:function(e,t){var r=this;if(!this.layer.timeInfo.endField&&!this.layer.timeInfo.startField)throw new d.a("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((function(e){var t=v.default.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))}},{key:"_createClientOptions",value:function(){var e=this;return r(r({},a(l(j.prototype),"_createClientOptions",this).call(this)),{},{setProperty:function(t){e.set(t.propertyName,t.value)}})}},{key:"_createTileRendererHash",value:function(e){var t="".concat(JSON.stringify(this.layer.purgeOptions),".").concat(JSON.stringify(O(this.layer.definitionExpression,this.layer.geometryDefinition)),")");return a(l(j.prototype),"_createTileRendererHash",this).call(this,e)+t}},{key:"_createServiceOptions",value:(p=regeneratorRuntime.mark((function e(){var t,r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.layer,r=t.objectIdField,n=t.fields.map((function(e){return e.toJSON()})),o=Object(b.a)(t.geometryType),i=t.timeInfo&&t.timeInfo.toJSON()||null,a=t.spatialReference?t.spatialReference.toJSON():null,e.abrupt("return",{type:"stream",fields:n,geometryType:o,objectIdField:r,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:O(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:a,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval});case 2:case"end":return e.stop()}}),e,this)})),y=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=p.apply(t,r);function a(t){e(i,n,o,a,c,"next",t)}function c(t){e(i,n,o,a,c,"throw",t)}a(void 0)}))},function(){return y.apply(this,arguments)})}])&&i(n.prototype,s),f&&i(n,f),j}(s("GJxj").default);Object(f.a)([Object(y.b)()],j.prototype,"errorString",void 0),Object(f.a)([Object(y.b)({readOnly:!0})],j.prototype,"connectionError",null),Object(f.a)([Object(y.b)()],j.prototype,"connectionStatus",void 0),j=Object(f.a)([Object(h.a)("esri.views.2d.layers.StreamLayerView2D")],j),n.default=j}}])}();