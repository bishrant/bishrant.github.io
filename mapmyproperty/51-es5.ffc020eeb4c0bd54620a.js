!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function t(t){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?e(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r,a,i,n,o){try{var l=e[n](o),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,n){var o=e.apply(t,r);function l(e){a(o,i,n,l,c,"next",e)}function c(e){a(o,i,n,l,c,"throw",e)}l(void 0)})}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var a,i,n=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(c){l=!0,i=c}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw n}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"/Lnp":function(e,t,r){"use strict";r.r(t),r.d(t,"previewCIMSymbol",function(){return P});for(var a,l,c=r("qRWG"),f=r("1EXT"),h=r("s7YA"),m=r("9MzC"),y=r("qatw"),v=r("SFo0"),d=r("Lqtk"),g=r("NrhG"),p=r("T8sT"),b=r("e4KH"),O=function(){function e(){s(this,e)}return u(e,[{key:"rasterizeText",value:function(e,t){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var r=this._textRasterizationCanvas,a=r.getContext("2d");this.setFontProperties(a,t),this.parameters=t,this.textLines=e.split(/\r?\n/),this.lineHeight=this.computeLineHeight();var i=this.computeTextWidth(a,t),n=this.lineHeight*this.textLines.length;r.width=i,r.height=n,this.renderedLineHeight=Math.round(this.lineHeight*t.pixelRatio),this.renderedHaloSize=t.halo.size*t.pixelRatio,this.renderedWidth=i*t.pixelRatio,this.renderedHeight=n*t.pixelRatio,this.fillStyle=function(e){return"rgba(".concat(e.slice(0,3).toString(),",").concat(e[3],")")}(t.color),this.haloStyle=function(e){return"rgb(".concat(e.slice(0,3).toString(),")")}(t.halo.color);var l=this.renderedLineHeight,c=this.renderedHaloSize;this.setFontProperties(a,t);var s=function(e,t){return"center"===e?.5*t:"right"===e?t:0}(a.textAlign,this.renderedWidth)+c,f=c,u=0,h=0;c>0&&this.renderHalo(a,s,f,u,h,t),h+=f,u+=s;var m,y=o(this.textLines);try{for(y.s();!(m=y.n()).done;){var v=m.value;a.globalCompositeOperation="destination-out",a.fillStyle="rgb(0, 0, 0)",a.fillText(v,u,h),a.globalCompositeOperation="source-over",a.fillStyle=this.fillStyle,a.fillText(v,u,h),h+=l}}catch(O){y.e(O)}finally{y.f()}var d=a.getImageData(0,0,this.renderedWidth,this.renderedHeight),g=new Uint8Array(d.data);if(t.premultiplyColors)for(var p,b=0;b<g.length;b+=4)p=g[b+3]/255,g[b]=g[b]*p,g[b+1]=g[b+1]*p,g[b+2]=g[b+2]*p;return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(g.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"renderHalo",value:function(e,t,r,a,i,n){var o=this.renderedWidth,l=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=o,this._haloRasterizationCanvas.height=l;var c=this._haloRasterizationCanvas,s=c.getContext("2d");s.clearRect(0,0,o,l),this.setFontProperties(s,n),s.fillStyle=this.haloStyle,s.strokeStyle=this.haloStyle;var f=this.renderedHaloSize<3;s.lineJoin=f?"miter":"round",f?this.renderHaloEmulated(s,t,r):this.renderHaloNative(s,t,r),e.globalAlpha=this.parameters.halo.color[3],e.drawImage(c,0,0,o,l,a,i,o,l),e.globalAlpha=1}},{key:"renderHaloEmulated",value:function(e,t,r){var a,i=this.renderedLineHeight,l=this.renderedHaloSize,c=o(this.textLines);try{for(c.s();!(a=c.n()).done;){var s,f=a.value,u=o(S);try{for(u.s();!(s=u.n()).done;){var h=n(s.value,2),m=h[0],y=h[1];e.fillText(f,t+l*m,r+l*y)}}catch(v){u.e(v)}finally{u.f()}r+=i}}catch(v){c.e(v)}finally{c.f()}}},{key:"renderHaloNative",value:function(e,t,r){var a,i=this.renderedLineHeight,n=this.renderedHaloSize,l=o(this.textLines);try{for(l.s();!(a=l.n()).done;){for(var c=a.value,s=2*n,f=0;f<5;f++)e.lineWidth=(.6+.1*f)*s,e.strokeText(c,t,r);r+=i}}catch(u){l.e(u)}finally{l.f()}}},{key:"setFontProperties",value:function(e,t){var r,a=t.font,i="".concat(a.style," ").concat(a.weight," ").concat(Object(c.h)(t.size*t.pixelRatio),"px ").concat(a.family,", sans-serif");switch(e.font=i,e.textBaseline="top",t.horizontalAlignment){case"left":r="left";break;case"right":r="right";break;case"center":r="center";break;default:r="left"}e.textAlign=r}},{key:"computeTextWidth",value:function(e,t){var r,a=0,i=o(this.textLines);try{for(i.s();!(r=i.n()).done;){var n=r.value;a=Math.max(a,e.measureText(n).width)}}catch(c){i.e(c)}finally{i.f()}var l=t.font;return("italic"===l.style||"oblique"===l.style||"string"==typeof l.weight&&("bold"===l.weight||"bolder"===l.weight)||"number"==typeof l.weight&&l.weight>600)&&(a+=.3*e.measureText("A").width),a+=2*this.parameters.halo.size,Math.round(a)}},{key:"computeLineHeight",value:function(){return Math.round(1.275*this.parameters.size+2*this.parameters.halo.size)}}]),e}(),S=[],x=0;x<360;x+=22.5)S.push([Math.cos(Math.PI*x/180),Math.sin(Math.PI*x/180)]);(l=a||(a={})).Legend="legend",l.Preview="preview";var k=function(e,t,r){if(e&&e.targetSize){var a;if(r){var i=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/Object(c.h)(i)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},C={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};function M(e,t,r,a){var i,n;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,r,a),n=Object(p.a)(e.cim,e.materialOverrides)):(i=e.materialHash,n=e.cim),{analyzedCIM:n,hash:i}}var w=new(function(){function e(t,r){s(this,e),this._spatialReference=t,this._avoidSDF=r,this._resourceCache=new Map,this._rasterizer=new b.a,this._textRasterizer=new O,this._pictureMarkerCache=new Map}var t,r,n;return u(e,[{key:"rasterizeCIMSymbolAsync",value:(n=i(regeneratorRuntime.mark(function e(t,r,a,i,n,o,l,c){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=i||(r?null!=r.centroid?"esriGeometryPolygon":Object(y.c)(r.geometry):null)||function(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}(t),e.next=3,this.analyzeCIMSymbol(t,r?function(e){return(e?Object.keys(e):[]).map(function(t){return{name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}})}(r.attributes):null,a,i,c);case 3:return s=e.sent,e.abrupt("return",this.rasterizeCIMSymbol(s,r,i,n,o,l));case 5:case"end":return e.stop()}},e,this)})),function(e,t,r,a,i,o,l,c){return n.apply(this,arguments)})},{key:"analyzeCIMSymbol",value:(r=i(regeneratorRuntime.mark(function e(t,r,a,i,n){var o,l,c,s,f,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],l=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null,e.next=3,Object(p.b)(t.data,l,o,this._avoidSDF);case 3:for(Object(m.u)(n),s=0,f=o;s<f.length;s++)"CIMPictureMarker"!==(u=f[s]).cim.type&&"CIMPictureFill"!==u.cim.type&&"CIMPictureStroke"!==u.cim.type||(c||(c=[]),c.push(this.fetchPictureMarkerResource(u,n))),a&&"text"===u.type&&"string"==typeof u.text&&u.text.indexOf("[")>-1&&(u.text=Object(g.c)(a,u.text,u.cim.textCase));if(e.t0=c,!e.t0){e.next=9;break}return e.next=9,Promise.all(c);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)})),function(e,t,a,i,n){return r.apply(this,arguments)})},{key:"fetchPictureMarkerResource",value:(t=i(regeneratorRuntime.mark(function e(t,r){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.materialHash,this._pictureMarkerCache.get(a)){e.next=6;break}return e.next=4,Object(d.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:i=e.sent.data,this._pictureMarkerCache.set(a,i);case 6:case"end":return e.stop()}},e,this)})),function(e,r){return t.apply(this,arguments)})},{key:"rasterizeCIMSymbol",value:function(e,t,r,a,i,n){var l,c=[],s=o(e);try{for(s.s();!(l=s.n()).done;){var f=l.value;a&&"function"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,n));var u=this._getRasterizedResource(f,t,r,a,i,n);if(u){var h=0,m=u.anchorX||0,y=u.anchorY||0,v=!1,d=0,p=0;if("esriGeometryPoint"===r){var b=k(a,f,null);if(d=Object(g.d)(f.offsetX,t,i,n)*b||0,p=Object(g.d)(f.offsetY,t,i,n)*b||0,"marker"===f.type)h=Object(g.d)(f.rotation,t,i,n)||0,v=!!f.rotateClockwise&&f.rotateClockwise;else if("text"===f.type){if(h=Object(g.d)(f.angle,t,i,n)||0,void 0!==f.horizontalAlignment)switch(f.horizontalAlignment){case"left":m=-.5;break;case"right":m=.5;break;default:m=0}if(void 0!==f.verticalAlignment)switch(f.verticalAlignment){case"top":y=.5;break;case"bottom":y=-.5;break;case"baseline":y=-.25;break;default:y=0}}}null!=u&&c.push({angle:h,rotateClockWise:v,anchorX:m,anchorY:y,offsetX:d,offsetY:p,rasterizedResource:u})}}}catch(O){s.e(O)}finally{s.f()}return this.getSymbolImage(c)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=t.getContext("2d"),a=0,i=0,n=0,o=0,l=[],s=0;s<e.length;s++){var f=e[s],u=f.rasterizedResource;if(u){var h=u.size,m=f.offsetX,y=f.offsetY,d=f.anchorX,g=f.anchorY,p=f.rotateClockWise||!1,b=f.angle,O=Object(c.h)(m)-h[0]*(.5+d),S=Object(c.h)(y)-h[1]*(.5+g),x=O+h[0],k=S+h[1];if(b){p&&(b=-b);var C=Math.sin(b*Math.PI/180),M=Math.cos(b*Math.PI/180),w=O*M-S*C,P=O*C+S*M,j=O*M-k*C,I=O*C+k*M,z=x*M-k*C,N=x*C+k*M,R=x*M-S*C,L=x*C+S*M;O=Math.min(w,j,z,R),S=Math.min(P,I,N,L),x=Math.max(w,j,z,R),k=Math.max(P,I,N,L)}a=O<a?O:a,i=S<i?S:i,n=x>n?x:n,o=k>o?k:o;var H=r.createImageData(u.size[0],u.size[1]);H.data.set(new Uint8ClampedArray(u.image.buffer)),l.push({offsetX:m,offsetY:y,rotateClockwise:p,angle:b,rasterizedImage:H,anchorX:d,anchorY:g})}}t.width=n-a,t.height=o-i;for(var A=-a,X=o,_=0;_<l.length;_++){var Y=l[_],F=this._imageDataToCanvas(Y.rasterizedImage),T=A-Y.rasterizedImage.width*(.5+Y.anchorX),D=X-Y.rasterizedImage.height*(.5-Y.anchorY);if(Y.angle){var J=(360-Y.angle)*Math.PI/180;r.save(),r.translate(Object(c.h)(Y.offsetX),-Object(c.h)(Y.offsetY)),r.translate(A,X),r.rotate(J),r.translate(-A,-X),r.drawImage(F,T,D),r.restore()}else r.drawImage(F,T+Object(c.h)(Y.offsetX),D-Object(c.h)(Y.offsetY))}var W=new v.b({x:A/t.width-.5,y:X/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:W}}},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var a=this._imageDataCanvas,i=a.getContext("2d");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,i,n,o){var l,c,s,u;if("esriGeometryPolyline"===r||"esriGeometryPolygon"===r){var m=i&&i.style?i.style:a.Legend,y="esriGeometryPolyline"===r?C.stroke[m]:C.fill[m];if("line"===e.type){var v;if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){var d=Object(g.d)(e.width,t,n,o),p=this._getPictureResource(e,d),b=p.image,O=p.width,S=p.height;return this._rasterizePictureResource(e,b,O,S,y,d)}return null}l=(v=M(e,t,n,o)).analyzedCIM,s=v.hash,c=this._embedCIMLayerInVectorMarker(l,y)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type)return null;if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=Object(g.d)(e.offsetX,t,n,o),e.cim.offsetY=Object(g.d)(e.offsetY,t,n,o),e.cim.rotation=Object(g.d)(e.rotation,t,n,o),e.cim.markerPlacement=e.markerPlacement,l=M(e,t,n,o).analyzedCIM,s=Object(h.b)(JSON.stringify(l)).toString(),c=this._embedCIMLayerInVectorMarker(l,y)}else{if("text"===e.type)return null;if("fill"===e.type){var x;if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var w,P,j,I=e.cim.size||e.cim.height;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var z=this._getPictureResource(e,I);w=z.image,P=z.width,j=z.height}else{var N=M(e,t,n,o);l=N.analyzedCIM,s=N.hash;var R=this._rasterizer.rasterizeJSONResource(l,1,this._avoidSDF);w=R.image,P=R.size[0],j=R.size[1]}return this._rasterizePictureResource(e,w,P,j,y,null)}if("CIMSolidFill"!==e.cim.type)return null;l=(x=M(e,t,n,o)).analyzedCIM,s=x.hash,c=this._embedCIMLayerInVectorMarker(l,y)}}}else{if("text"===e.type)return u=this._rasterizeTextResource(e,t,i,n,o);var L=M(e,t,n,o);l=L.analyzedCIM,s=L.hash;var H=k(i,e,null);if("CIMPictureMarker"===e.cim.type){var A=Object(g.d)(e.size,t,n,o)*H,X=this._getPictureResource(e,A);return u={image:X.image,size:[X.width,X.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}Object(f.c)(l,H,{preserveOutlineWidth:!1}),c=l}s+=r,i&&(s+=JSON.stringify(i));var _=this._resourceCache;return _.has(s)?_.get(s):(u=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),_.set(s,u),u)}},{key:"_rasterizeTextResource",value:function(e,t,r,a,i){var n=k(r,e,null),o=Object(g.d)(e.text,t,a,i);if(!o||0===o.length)return null;var l=Object(g.d)(e.fontName,t,a,i),c=Object(g.d)(e.style,t,a,i),s=Object(g.d)(e.weight,t,a,i),f=Object(g.d)(e.decoration,t,a,i),u=Object(g.d)(e.size,t,a,i)*n,h=Object(g.d)(e.horizontalAlignment,t,a,i),m=Object(g.d)(e.verticalAlignment,t,a,i),y=Object(g.b)(Object(g.d)(e.color,t,a,i)),v=Object(g.b)(Object(g.d)(e.outlineColor,t,a,i)),d={color:y,size:u,horizontalAlignment:h,verticalAlignment:m,font:{family:l,style:c,weight:s,decoration:f},halo:{size:Object(g.d)(e.outlineSize,t,a,i)||0,color:v,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,d)}},{key:"_rasterizePictureResource",value:function(e,t,r,a,i,n){var l=document.createElement("canvas"),s=l.getContext("2d");l.height=Object(c.h)(Math.max(Math.abs(i.frame.ymax-i.frame.ymin),n)),l.width=Object(c.h)(Math.abs(i.frame.xmax-i.frame.xmin));var f=s.createImageData(r,a);f.data.set(new Uint8ClampedArray(t.buffer));var u=this._imageDataToCanvas(f),h=s.createPattern(u,"repeat"),m=Math.cos((-e.cim.rotation||0)*Math.PI/180),v=Math.sin((-e.cim.rotation||0)*Math.PI/180);h.setTransform({m11:m,m12:v,m21:-v,m22:m,m41:Object(c.h)(e.cim.offsetX)||0,m42:Object(c.h)(e.cim.offsetY)||0});var d,g,p,b=i.canvasPaths;Object(y.g)(b)?(d=b.rings,s.fillStyle=h,g=s.fill,p=["evenodd"]):Object(y.h)(b)&&(d=b.paths,s.strokeStyle=h,s.lineWidth=n,g=s.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),s.beginPath();var O,S=o(d);try{for(S.s();!(O=S.n()).done;){var x=O.value,k=x?x.length:0;if(k>1){var C=x[0];s.moveTo(Object(c.h)(C[0]),Object(c.h)(C[1]));for(var M=1;M<k;++M)C=x[M],s.lineTo(Object(c.h)(C[0]),Object(c.h)(C[1]));s.closePath()}}}catch(j){S.e(j)}finally{S.f()}g.apply(s,p);var w=s.getImageData(0,0,l.width,l.height),P=new Uint8Array(w.data);return{size:[l.width,l.height],image:new Uint32Array(P.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_getPictureResource",value:function(e,t){var r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;var a=r.height/r.width,i=t?a>1?Object(c.h)(t):Object(c.h)(t)/a:r.width,n=t?a>1?Object(c.h)(t)*a:Object(c.h)(t):r.height;return{image:this._imageTo32Array(r,i,n),width:i,height:n}}},{key:"_embedCIMLayerInVectorMarker",value:function(e,t){var r=Object(y.g)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol";return{type:"CIMVectorMarker",frame:t.frame,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}]),e}())(null,!0);function P(e){return j.apply(this,arguments)}function j(){return(j=i(regeneratorRuntime.mark(function e(t){var r,a,i,n,o,l,s,u,h,m,y,v,d,g,p,b,O,S,x,k=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=k.length>1&&void 0!==k[1]?k[1]:{},a=r.size,i=r.maxSize,n=r.node,o=r.opacity,l=r.cimOptions||r,s=l.feature,u=l.fieldMap,h=l.geometryType,m=l.style,y=Object(f.b)(t),(v=Math.min(null!=a?a:y,null!=i?i:Object(c.i)(120)))!==y&&(t=t.clone(),Object(f.d)(t,v,{preserveOutlineWidth:!0})),d=3,t&&t.data&&t.data.symbol&&"CIMPointSymbol"!==t.data.symbol.type&&(d=1),e.next=7,w.rasterizeCIMSymbolAsync(t,s,u,h,{scaleFactor:d,style:m});case 7:return g=e.sent,(p=document.createElement("canvas")).width=g.imageData.width,p.height=g.imageData.height,p.getContext("2d").putImageData(g.imageData,0,0),b=p.width/d,O=p.height/d,null==a||null!=(null==r?void 0:r.scale)&&!(null==r?void 0:r.scale)||(b=(S=b/O)<=1?Math.ceil(v*S):v,O=S<=1?v:Math.ceil(v/S)),x=new Image(b,O),e.abrupt("return",(x.src=p.toDataURL(),null!=o&&(x.style.opacity="".concat(o)),n&&n.appendChild(x),x));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}},QFw1:function(e,t,r){"use strict";r.d(t,"a",function(){return h}),r.d(t,"b",function(){return f}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return u});var a=r("qatw"),i=r("Du6U"),l=r("X4zr");function c(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?c(t[0]):null;case"CIMVectorMarker":var r=e.markerGraphics;if(!r||1!==r.length)return null;var a=r[0];if(!a)return null;var i=a.geometry;if(!i)return null;var n=a.symbol;return!n||"CIMPolygonSymbol"!==n.type&&"CIMLineSymbol"!==n.type?null:{geom:i,asFill:"CIMPolygonSymbol"===n.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function s(e){var t,r=1/0,a=-1/0,i=1/0,n=-1/0,l=o(e);try{for(l.s();!(t=l.n()).done;){var c,s=o(t.value);try{for(s.s();!(c=s.n()).done;){var f=c.value;f[0]<r&&(r=f[0]),f[0]>a&&(a=f[0]),f[1]<i&&(i=f[1]),f[1]>n&&(n=f[1])}}catch(u){s.e(u)}finally{s.f()}}}catch(u){l.e(u)}finally{l.f()}return[r,i,a,n]}function f(e){return e?e.rings?s(e.rings):e.paths?s(e.paths):Object(a.d)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function u(e,t,r,a,i){var o=n(e,4),l=o[0],c=o[1],s=o[2],f=o[3];if(s<l||f<c)return[0,0,0];var u=s-l,h=f-c,m=Math.floor(31.5),y=(128-2*(m+1))/Math.max(u,h),v=Math.round(u*y)+2*m,d=Math.round(h*y)+2*m,g=1;t&&(g=d/y/(t.ymax-t.ymin));var p=0,b=0;return a&&(i?t&&r&&t.ymax-t.ymin>0&&(p=a.x/(r*((t.xmax-t.xmin)/(t.ymax-t.ymin))),b=a.y/r):(p=a.x,b=a.y)),p=.5*(t.xmax+t.xmin)+p*(t.xmax-t.xmin),b=.5*(t.ymax+t.ymin)+b*(t.ymax-t.ymin),p-=l,b-=c,p*=y,b*=y,[g,(p+=m)/v-.5,-((b+=m)/d-.5)]}function h(e){var t,r=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),a=function(e){var t,r=1/0,a=-1/0,n=1/0,l=-1/0,c=o(e);try{for(c.s();!(t=c.n()).done;){var s,f=o(t.value);try{for(f.s();!(s=f.n()).done;){var u=s.value;u[0]<r&&(r=u[0]),u[0]>a&&(a=u[0]),u[1]<n&&(n=u[1]),u[1]>l&&(l=u[1])}}catch(h){f.e(h)}finally{f.f()}}}catch(h){c.e(h)}finally{c.f()}return new i.a(r,n,a-r,l-n)}(r),l=Math.floor(31.5),c=(128-2*(l+1))/Math.max(a.width,a.height),s=Math.round(a.width*c)+2*l,f=Math.round(a.height*c)+2*l,u=[],h=o(r);try{for(h.s();!(t=h.n()).done;){var y=t.value;if(y&&y.length>1){var v,d=[],g=o(y);try{for(g.s();!(v=g.n()).done;){var p=n(v.value,2),b=p[0],O=p[1];b-=a.x,O-=a.y,b*=c,O*=c,b+=l-.5,O+=l-.5,d.push([b,O])}}catch(k){g.e(k)}finally{g.f()}if(e.asFill){var S=d.length-1;d[0][0]===d[S][0]&&d[0][1]===d[S][1]||d.push(d[0])}u.push(d)}}}catch(k){h.e(k)}finally{h.f()}var x=function(e,t,r,a){for(var i=t*r,n=new Array(i),l=a*a+1,c=0;c<i;++c)n[c]=l;var s,f=o(e);try{for(f.s();!(s=f.n()).done;)for(var u=s.value,h=u.length,m=1;m<h;++m){var y=u[m-1],v=u[m],d=void 0,g=void 0,p=void 0,b=void 0;y[0]<v[0]?(d=y[0],g=v[0]):(d=v[0],g=y[0]),y[1]<v[1]?(p=y[1],b=v[1]):(p=v[1],b=y[1]);var O=Math.floor(d)-a,S=Math.floor(g)+a,x=Math.floor(p)-a,C=Math.floor(b)+a;O<0&&(O=0),S>t&&(S=t),x<0&&(x=0),C>r&&(C=r);for(var M=v[0]-y[0],w=v[1]-y[1],P=M*M+w*w,j=O;j<S;j++)for(var I=x;I<C;I++){var z=void 0,N=void 0,R=(j-y[0])*M+(I-y[1])*w;R<0?(z=y[0],N=y[1]):R>P?(z=v[0],N=v[1]):(R/=P,z=y[0]+R*M,N=y[1]+R*w);var L=(j-z)*(j-z)+(I-N)*(I-N),H=(r-I-1)*t+j;L<n[H]&&(n[H]=L)}}}catch(k){f.e(k)}finally{f.f()}for(var A=0;A<i;++A)n[A]=Math.sqrt(n[A]);return n}(u,s,f,l);return e.asFill&&function(e,t,r,a,i){var n,l=o(e);try{for(l.s();!(n=l.n()).done;)for(var c=n.value,s=c.length,f=1;f<s;++f){var u=c[f-1],h=c[f],m=void 0,y=void 0,v=void 0,d=void 0;u[0]<h[0]?(m=u[0],y=h[0]):(m=h[0],y=u[0]),u[1]<h[1]?(v=u[1],d=h[1]):(v=h[1],d=u[1]);var g=Math.floor(m),p=Math.floor(y)+1,b=Math.floor(v),O=Math.floor(d)+1;g<a&&(g=a),p>t-a&&(p=t-a),b<a&&(b=a),O>r-a&&(O=r-a);for(var S=b;S<O;++S)if(u[1]>S!=h[1]>S){for(var x=(r-S-1)*t,C=g;C<p;++C)C<(h[0]-u[0])*(S-u[1])/(h[1]-u[1])+u[0]&&(i[x+C]=-i[x+C]);for(var M=a;M<g;++M)i[x+M]=-i[x+M]}}}catch(k){l.e(k)}finally{l.f()}}(u,s,f,l,x),[m(x,l),s,f]}function m(e,t){for(var r=2*t,a=e.length,i=new Uint8Array(4*a),n=0;n<a;++n){var o=.5-e[n]/r;Object(l.a)(o,i,4*n)}return i}},T8sT:function(e,r,a){"use strict";a.d(r,"a",function(){return J}),a.d(r,"b",function(){return k});var l=a("s7YA"),c=a("6S2I"),s=a("gvqN"),f=a("nvBr"),u=a("qRWG"),h=a("NrhG"),m=a("ictz"),y=a("eT81"),v=a("QFw1"),d=c.a.getLogger("esri.symbols.cim.cimAnalyzer");function g(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function p(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function b(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function O(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function S(e,t,r,a){var i;e[t]?i=e[t]:(i={},e[t]=i),i[r]=a}function x(e){var t=e.markerPlacement;return t&&t.angleToLine?1:0}function k(e,t,r,a){return C.apply(this,arguments)}function C(){return(C=i(regeneratorRuntime.mark(function e(t,r,a,i){var n,l,c,f,u,h,m,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a||[],t){e.next=3;break}return e.abrupt("return",n);case 3:if(f={},"CIMSymbolReference"===t.type){e.next=6;break}return e.abrupt("return",(d.error("Expect cim type to be 'CIMSymbolReference'"),n));case 6:if(l=t.symbol,!(c=t.primitiveOverrides)){e.next=12;break}u=[],h=o(c);try{for(v=function(){var e=m.value,t=e.valueExpressionInfo;if(t&&r){var a=t.expression,i=Object(s.d)(a,r.spatialReference,r.fields).then(function(t){t&&S(f,e.primitiveName,e.propertyName,t)});u.push(i)}else null!=e.value&&S(f,e.primitiveName,e.propertyName,e.value)},h.s();!(m=h.n()).done;)v()}catch(g){h.e(g)}finally{h.f()}return e.next=12,Promise.all(u);case 12:switch(l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":!function(e,t,r,a,i,n){if(e){var o=e.symbolLayers;if(o){var l,c=y.a.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(l=1);for(var s=o.length;s--;){var f=o[s];if(f&&!1!==f.enable){var u=[];switch(y.b.findApplicableOverrides(f,t,u),f.type){case"CIMSolidFill":M(f,r,u,a,i);break;case"CIMPictureFill":w(f,r,u,a,i);break;case"CIMHatchFill":P(f,r,u,a,i);break;case"CIMGradientFill":j(f,r,u,a,i);break;case"CIMSolidStroke":I(f,r,u,a,i,"CIMPolygonSymbol"===e.type,c);break;case"CIMPictureStroke":z(f,r,u,a,i,"CIMPolygonSymbol"===e.type,c);break;case"CIMGradientStroke":N(f,r,u,a,i,"CIMPolygonSymbol"===e.type,c);break;case"CIMCharacterMarker":if(R(f,r,u,a,i))break;break;case"CIMPictureMarker":if(R(f,r,u,a,i))break;"CIMLineSymbol"===e.type&&(l=x(f)),L(f,r,u,a,i,l,c);break;case"CIMVectorMarker":if(R(f,r,u,a,i))break;"CIMLineSymbol"===e.type&&(l=x(f)),H(f,r,u,a,i,l,c,n);break;default:d.error("Cannot analyze CIM layer",f.type)}}}}}}(l,c,f,r,n,i)}return e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t,r,a,i){var n=e.primitiveName,o=Object(h.e)(e.color),c=Object(l.b)(JSON.stringify(e)).toString();i.push({type:"fill",templateHash:c,materialHash:0===r.length?c:function(){return c},cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:T(n,t,"Color",a,o,F),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function w(e,t,r,a,i){var n=e.primitiveName,o=e.tintColor?Object(h.e)(e.tintColor):{r:255,g:255,b:255,a:1},c=Object(l.b)(JSON.stringify(e)).toString(),s=Object(l.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString();i.push({type:"fill",templateHash:c,materialHash:0===r.length?s:function(){return s},cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:T(n,t,"TintColor",a,o,F),height:T(n,t,"Height",a,e.height),scaleX:T(n,t,"ScaleX",a,e.scaleX),angle:T(n,t,"Rotation",a,e.rotation),offsetX:T(n,t,"OffsetX",a,e.offsetX),offsetY:T(n,t,"OffsetY",a,e.offsetY)})}function P(e,t,r,a,i){var n=["Rotation","OffsetX","OffsetY"],o=r.filter(function(t){return t.primitiveName!==e.primitiveName&&-1===n.indexOf(t.propertyName)}),c=e.primitiveName,s=Object(l.b)(JSON.stringify(e)).toString(),f=Object(l.b)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();i.push({type:"fill",templateHash:s,materialHash:0===r.length?f:D(f,t,o,a),cim:e,materialOverrides:o,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:T(c,t,"Separation",a,e.separation),scaleX:1,angle:T(c,t,"Rotation",a,e.rotation),offsetX:T(c,t,"OffsetX",a,e.offsetX),offsetY:T(c,t,"OffsetY",a,e.offsetY)})}function j(e,t,r,a,i){var n=Object(l.b)(JSON.stringify(e)).toString();i.push({type:"fill",templateHash:n,materialHash:0===r.length?n:D(n,t,r,a),cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function I(e,t,r,a,i,n,o){var c=Object(l.b)(JSON.stringify(e)).toString(),s=e.primitiveName,f=Object(h.e)(e.color),u=void 0!==e.width?e.width:4,m=g(e.capStyle),y=p(e.joinStyle),v=e.miterLimit;i.push({type:"line",templateHash:c,materialHash:0===r.length?c:function(){return c},cim:e,materialOverrides:null,isOutline:n,colorLocked:e.colorLocked,effects:e.effects,color:T(s,t,"Color",a,f,F),width:T(s,t,"Width",a,u),cap:T(s,t,"CapStyle",a,m),join:T(s,t,"JoinStyle",a,y),miterLimit:T(s,t,"MiterLimit",a,v),referenceWidth:o,zOrder:Y(e.name),isDashed:!1})}function z(e,t,r,a,i,n,o){var c=Object(l.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),s=e.primitiveName,f=Object(h.e)(e.tintColor),u=void 0!==e.width?e.width:4,m=g(e.capStyle),y=p(e.joinStyle),v=e.miterLimit,d=Object(l.b)(JSON.stringify(e)).toString();i.push({type:"line",templateHash:d,materialHash:0===r.length?c:function(){return c},cim:e,materialOverrides:null,isOutline:n,colorLocked:e.colorLocked,effects:e.effects,color:T(s,t,"TintColor",a,f,F),width:T(s,t,"Width",a,u),cap:T(s,t,"CapStyle",a,m),join:T(s,t,"JoinStyle",a,y),miterLimit:T(s,t,"MiterLimit",a,v),referenceWidth:o,zOrder:Y(e.name),isDashed:!1})}function N(e,t,r,a,i,n,o){var c=e.primitiveName,s=void 0!==e.width?e.width:4,f=g(e.capStyle),u=p(e.joinStyle),h=e.miterLimit,m=Object(l.b)(JSON.stringify(e)).toString();i.push({type:"line",templateHash:m,materialHash:0===r.length?m:D(m,t,r,a),cim:e,materialOverrides:null,isOutline:n,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:T(c,t,"Width",a,s),cap:T(c,t,"CapStyle",a,f),join:T(c,t,"JoinStyle",a,u),miterLimit:T(c,t,"MiterLimit",a,h),referenceWidth:o,zOrder:Y(e.name),isDashed:!1})}function R(e,t,r,a,i){var n=e.markerPlacement;if(!n||"CIMMarkerPlacementInsidePolygon"!==n.type)return!1;var o=n,c=["Rotation","OffsetX","OffsetY"],s=r.filter(function(t){return t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName)}),f=Object(l.b)(JSON.stringify(e)).toString();return i.push({type:"fill",templateHash:f,materialHash:0===r.length?f:D(f,t,s,a),cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:T(o.primitiveName,t,"StepY",a,o.stepY),scaleX:1,angle:T(o.primitiveName,t,"GridAngle",a,o.gridAngle),offsetX:T(o.primitiveName,t,"OffsetX",a,o.offsetX),offsetY:T(o.primitiveName,t,"OffsetY",a,o.offsetY)}),!0}function L(e,t,r,a,i,n,c){var s,f=e.primitiveName,u=e.size,m=e.scaleX,y=e.rotation,v=e.offsetX,d=e.offsetY,g=Object(h.e)(e.tintColor),p=Object(l.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),b=!1,O="",S=o(r);try{for(S.s();!(s=S.n()).done;){var x=s.value;x.primitiveName===f&&(void 0!==x.value?O+="-".concat(x.primitiveName,"-").concat(x.propertyName,"-").concat(JSON.stringify(x.value)):x.valueExpressionInfo&&(b=!0))}}catch(k){S.e(k)}finally{S.f()}i.push({type:"marker",templateHash:Object(l.b)(JSON.stringify(e)+O).toString(),materialHash:b?function(){return p}:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:n,size:T(f,t,"Size",a,u),scaleX:T(f,t,"ScaleX",a,m),rotation:T(f,t,"Rotation",a,y),offsetX:T(f,t,"OffsetX",a,v),offsetY:T(f,t,"OffsetY",a,d),color:T(f,t,"TintColor",a,g,F),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:c,sizeRatio:1,markerPlacement:e.markerPlacement})}function H(e,t,r,a,i,n,l,c){var s=e.markerGraphics;if(s){var f=0;if(e.scaleSymbolsProportionally){var u=e.frame;u&&(f=u.ymax-u.ymin)}var h,m=o(s);try{for(m.s();!(h=m.n()).done;){var y=h.value;if(y){var v=y.symbol;if(!v)continue;switch(v.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":X(e,y,r,t,a,i,n,l,f,c);break;case"CIMTextSymbol":A(e,y,t,r,a,i,n,l,f)}}}}catch(d){m.e(d)}finally{m.f()}}}function A(e,r,a,i,n,c,s,f,u){y.b.findApplicableOverrides(r,i,[]);var m=r.geometry;if("x"in m&&"y"in m){var v,d=r.symbol,g=(v=d).underline?"underline":v.strikethrough?"line-through":"none",p=function(e){var t="normal",r="normal";if(e){var a=e.toLowerCase();-1!==a.indexOf("italic")?t="italic":-1!==a.indexOf("oblique")&&(t="oblique"),-1!==a.indexOf("bold")?r="bold":-1!==a.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}(d.fontStyleName);d.font=t({family:d.fontFamilyName,decoration:g},p);var S=e.frame,x=e.size/u,k=e.primitiveName,C=(d.height||0)*x,M=d.angle||0,w=((d.offsetX||0)+(m.x-.5*(S.xmin+S.xmax)))*x,P=((d.offsetY||0)+(m.y-.5*(S.ymin+S.ymax)))*x,j=Object(h.e)(y.a.getFillColor(d)),I=Object(h.e)(y.a.getStrokeColor(d)),z=y.a.getStrokeWidth(d);z||(I=Object(h.e)(y.a.getFillColor(d.haloSymbol)),z=d.haloSize*x);var N,R="",L=o(i);try{for(L.s();!(N=L.n()).done;){var H=N.value;H.primitiveName===k&&void 0!==H.value&&(R+="-".concat(H.primitiveName,"-").concat(H.propertyName,"-").concat(JSON.stringify(H.value)))}}catch(_){L.e(_)}finally{L.f()}var A=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),X=Object(l.b)(JSON.stringify(r)+A+R).toString();c.push({type:"text",templateHash:X,materialHash:function(){return Object(l.b)(JSON.stringify(d.font)).toString()},cim:d,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:s,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:d.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:T(k,a,"Size",n,C),angle:T(k,a,"Rotation",n,M),offsetX:T(k,a,"OffsetX",n,w),offsetY:T(k,a,"OffsetY",n,P),horizontalAlignment:b(d.horizontalAlignment),verticalAlignment:O(d.verticalAlignment),text:T(r.primitiveName,a,"TextString",n,r.textString,h.a,d.textCase),color:j,outlineColor:I,outlineSize:z,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement})}}function X(e,r,a,i,c,s,f,u,m,d){var g=r.geometry;if(g){var p=r.symbol.symbolLayers;if(p)if(d)_(e,r,i,a,c,s,f,u,m);else for(var b=p.length;b--;){var O=p[b];if(O&&!1!==O.enable)switch(O.type){case"CIMSolidFill":case"CIMSolidStroke":var S=function(){var d=Object(v.b)(g);if(!d)return"continue";var p=n(Object(v.d)(d,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),3),b=p[0],S=p[1],x=p[2],k="CIMSolidFill"===O.type,C={type:"sdf",geom:g,asFill:k},M=e.primitiveName,w=e.size,P=e.rotation||0,j=e.offsetX,I=e.offsetY,z=O.primitiveName,N=Object(h.e)(k?y.a.getFillColor(O):y.a.getStrokeColor(O)),R=k?{r:0,g:0,b:0,a:0}:Object(h.e)(y.a.getStrokeColor(O)),L=y.a.getStrokeWidth(O);if(!k&&!L)return"break";var H,A=!1,X="",_=o(a);try{for(_.s();!(H=_.n()).done;){var Y=H.value;Y.primitiveName!==z&&Y.primitiveName!==M||(void 0!==Y.value?X+="-".concat(Y.primitiveName,"-").concat(Y.propertyName,"-").concat(JSON.stringify(Y.value)):Y.valueExpressionInfo&&(A=!0))}}catch(G){_.e(G)}finally{_.f()}var D=JSON.stringify(t(t({},e),{},{markerGraphics:null})),J=Object(l.b)(JSON.stringify(C)).toString(),W={type:"marker",templateHash:Object(l.b)(JSON.stringify(r)+JSON.stringify(O)+D+X).toString(),materialHash:A?function(){return J}:J,cim:C,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:f,anchorPoint:{x:S,y:x},isAbsoluteAnchorPoint:!1,size:T(e.primitiveName,i,"Size",c,w),rotation:T(e.primitiveName,i,"Rotation",c,P),offsetX:T(e.primitiveName,i,"OffsetX",c,j),offsetY:T(e.primitiveName,i,"OffsetY",c,I),scaleX:1,frameHeight:m,rotateClockwise:e.rotateClockwise,referenceSize:u,sizeRatio:b,color:T(z,i,"Color",c,N,F),outlineColor:T(z,i,"Color",c,R,F),outlineWidth:T(z,i,"Width",c,L),markerPlacement:e.markerPlacement};return s.push(W),"break"}();if("continue"===S)continue;if("break"===S)break;default:_(e,r,i,a,c,s,f,u,m)}}}}function _(e,t,r,a,i,c,s,f,h){var m,v=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(e,t),d=["Rotation","OffsetX","OffsetY"];m=a.filter(function(t){return t.primitiveName!==e.primitiveName||-1===d.indexOf(t.propertyName)});var g,p="",b=o(a);try{for(b.s();!(g=b.n()).done;){var O=g.value;void 0!==O.value&&(p+="-".concat(O.primitiveName,"-").concat(O.propertyName,"-").concat(JSON.stringify(O.value)))}}catch(N){b.e(N)}finally{b.f()}var S=n(y.a.getTextureAnchor(v),3),x=S[0],k=S[1],C=S[2],M=e.primitiveName,w=e.rotation||0,P=e.offsetX||0,j=e.offsetY||0,I=Object(l.b)(JSON.stringify(v)+p).toString(),z={type:"marker",templateHash:I,materialHash:0===m.length?I:D(I,r,m,i),cim:v,materialOverrides:m,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:x,y:k},isAbsoluteAnchorPoint:!1,size:e.size,rotation:T(M,r,"Rotation",i,w),offsetX:T(M,r,"OffsetX",i,P),offsetY:T(M,r,"OffsetY",i,j),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:C/Object(u.h)(e.size),markerPlacement:e.markerPlacement};c.push(z)}function Y(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function F(e){if(!e||0===e.length)return null;var t=new f.a(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function T(e,t,r,a,i,n,o){var l=t[e];if(l){var c=l[r];if("string"==typeof c||"number"==typeof c||c instanceof Array)return n?n.call(null,c,o):c;if(null!=c&&c instanceof s.a)return function(e,t,r){var l=Object(m.a)(c,e,{$view:r},a.geometryType,t);return null!==l&&n&&(l=n.call(null,l,o)),null!==l?l:i}}return i}function D(e,t,r,a){var i,n=o(r);try{for(n.s();!(i=n.n()).done;){var c=i.value;c.valueExpressionInfo&&function(){var e=t[c.primitiveName]&&t[c.primitiveName][c.propertyName];e instanceof s.a&&(c.fn=function(t,r,i){return Object(m.a)(e,t,{$view:i},a.geometryType,r)})}()}}catch(f){n.e(f)}finally{n.f()}return function(t,a,i){var n,c=o(r);try{for(c.s();!(n=c.n()).done;){var s=n.value;s.fn&&(s.value=s.fn(t,a,i))}}catch(f){c.e(f)}finally{c.f()}return Object(l.b)(e+y.b.buildOverrideKey(r)).toString()}}function J(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return y.b.applyOverrides(r,t),r}},ictz:function(e,r,a){"use strict";var i=a("6S2I"),n=a("zlDU"),o=a("AIxD"),l=new Map;function c(e,r,a){var c=a.transform,s=a.hasZ,f=a.hasM;l.has(r)||l.set(r,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,a,i){return Object(o.e)(r,t,e,a,i)};case"esriGeometryPolygon":return function(e,r,a,i){return Object(o.f)(r,t,e,a,i)};case"esriGeometryPolyline":return function(e,r,a,i){return Object(o.g)(r,t,e,a,i)};case"esriGeometryMultipoint":return function(e,r,a,i){return Object(o.d)(r,t,e,a,i)};default:return i.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.a("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(r));var u=l.get(r)(e.geometry,c,s,f);return t(t({},e),{},{geometry:u})}r.a=function(e,r,a,n,o){var l=e.referencesGeometry()&&o?c(r,n,o):r,s=e.repurposeFeature(l);try{return e.evaluate(t(t({},a),{},{$feature:s}))}catch(f){return i.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",f),null}}}}])}();