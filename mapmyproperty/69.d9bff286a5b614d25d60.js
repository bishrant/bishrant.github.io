(function(){var e={"esri/layers/support/TilemapCache":"Cobz","esri/layers/mixins/ArcGISCachedService":"WhPF","arcgis-js-api/layers/mixins/ArcGISCachedService":"WhPF","esri/layers/TileLayer":"WiXY","esri/layers/support/serviceTileInfoProperty":"ddAr","esri/layers/support/Tilemap":"xojL"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{Cobz:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r("zOht"),r("zp6E"),r("Gtr7"),r("ma1f"),r("eIBl"),r("qsST"),r("W6K4"),r("KBgh"),r("qMld"),r("afW+"),r("jfWY"),r("8MXS"),r("Vx27"),r("xojL")],void 0===(a=(function(e,t,r,i,a,n,o,l,s,p,c,u,h,d,f,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TilemapCache=void 0;var y=l.getLogger("esri.layers.support.TilemapCache"),_=function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new o,r._pendingTilemapRequests={},r._availableLevels={},r.levels=5,r.cacheByteSize=2097152,r.request=i,r._prefetchingEnabled=!0,r}var a;return r.__extends(t,e),a=t,t.prototype.initialize=function(){var e=this;this._tilemapCache=new s(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),d.init(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()},t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},t.prototype.castLevels=function(e){return e<=2?(y.error("Minimum levels for Tilemap is 3, but got ",e),3):e},Object.defineProperty(t.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!1,configurable:!0}),t.prototype.fetchTilemap=function(e,t,i,a){var o=this;if(!this._availableLevels[e])return c.reject(new n("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"));var l=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,i,l);if(s)return c.resolve(s);var p=a&&a.signal;return a=r.__assign(r.__assign({},a),{signal:null}),c.create((function(e,t){c.onAbort(p,(function(){return t(c.createAbortError())}));var r=v.tilemapDefinitionId(l),i=o._pendingTilemapRequests[r];if(!i){i=v.Tilemap.fromDefinition(l,a).then((function(e){return o._tilemapCache.put(r,e,e.byteSize),e}));var n=function(){return delete o._pendingTilemapRequests[r]};o._pendingTilemapRequests[r]=i,i.then(n,n)}i.then(e,t)}))},t.prototype.getAvailability=function(e,t,r){if(!this._availableLevels[e])return"unavailable";var i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"},t.prototype.getAvailabilityUpsample=function(e,t,r,i){i.level=e,i.row=t,i.col=r;var a=this.layer.tileInfo;for(a.updateTileInfo(i);;){var n=this.getAvailability(i.level,i.row,i.col);if("unavailable"!==n)return n;if(!a.upsampleTile(i))return"unavailable"}},t.prototype.fetchAvailability=function(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).catch((function(e){return e})).then((function(i){if(i instanceof v.Tilemap){var a=i.getAvailability(t,r);return"unavailable"===a?c.reject(new n("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):a}if(c.isAbortError(i))throw i;return"unknown"})):c.reject(new n("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"))},t.prototype.fetchAvailabilityUpsample=function(e,t,r,i,a){var n=this;i.level=e,i.row=t,i.col=r;var o=this.layer.tileInfo;o.updateTileInfo(i);var l=this.fetchAvailability(e,t,r,a).catch((function(e){if(c.isAbortError(e))throw e;if(o.upsampleTile(i))return n.fetchAvailabilityUpsample(i.level,i.row,i.col,i);throw e}));return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,a,l),l},t.prototype._fetchAvailabilityUpsamplePrefetch=function(e,t,i,n,o,l){return r.__awaiter(this,void 0,void 0,(function(){var s,p,h,d,f,v,y,_,m;return r.__generator(this,(function(g){switch(g.label){case 0:if(!this._prefetchingEnabled)return[2];if(this._handles.has(s="prefetch-"+e))return[2];p=c.createAbortController(),l.then((function(){return p.abort()}),(function(){return p.abort()})),h=!1,this._handles.add({remove:function(){h||(h=!0,p.abort())}},s),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,u.waitTicks(10,p.signal)];case 2:case 3:return g.sent(),[3,4];case 4:if(h||(h=!0,this._handles.remove(s)),c.isAborted(p))return[2];for(d={id:e,level:t,row:i,col:n},f=r.__assign(r.__assign({},o),{signal:p.signal}),v=this.layer.tileInfo,y=function(e){var t=_.fetchAvailability(d.level,d.row,d.col,f);a._prefetches.push(t);var r=function(){a._prefetches.removeUnordered(t)};t.then(r,r)},_=this,m=0;a._prefetches.length<a._maxPrefetch&&v.upsampleTile(d);++m)y();return[2]}}))}))},t.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?h.objectToQuery(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}},t.prototype._tilemapFromCache=function(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;var a=v.tilemapDefinitionId(i);return this._tilemapCache.get(a)},t.prototype._initializeAvailableLevels=function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))},Object.defineProperty(t.prototype,"test",{get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,r,i){return!!e._tilemapFromCache(t,r,i,e._tmpTilemapDefinition)}}},enumerable:!1,configurable:!0}),t._maxPrefetch=4,t._prefetches=new p({initialSize:a._maxPrefetch}),r.__decorate([f.property({constructOnly:!0,type:Number})],t.prototype,"levels",void 0),r.__decorate([f.cast("levels")],t.prototype,"castLevels",null),r.__decorate([f.property({readOnly:!0,dependsOn:["levels"],type:Number})],t.prototype,"size",null),r.__decorate([f.property({constructOnly:!0,type:Number})],t.prototype,"cacheByteSize",void 0),r.__decorate([f.property({constructOnly:!0})],t.prototype,"layer",void 0),r.__decorate([f.property({constructOnly:!0})],t.prototype,"request",void 0),a=r.__decorate([f.subclass("esri.layers.support.TilemapCache")],t)}(a);t.TilemapCache=_}).apply(null,i))||(e.exports=a)},WhPF:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("Vx27"),r("ddAr"),r("Cobz")],void 0===(a=(function(e,t,r,i,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArcGISCachedService=void 0,t.ArcGISCachedService=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyright=null,t.minScale=0,t.maxScale=0,t.spatialReference=null,t.tileInfo=null,t.tilemapCache=null,t}return r.__extends(t,e),t.prototype.readMinScale=function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0},t.prototype.readMaxScale=function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0},Object.defineProperty(t.prototype,"supportsBlankTile",{get:function(){return this.version>=10.2},enumerable:!1,configurable:!0}),t.prototype.readTilemapCache=function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new o.TilemapCache({layer:this}):null},r.__decorate([a.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),r.__decorate([a.property()],t.prototype,"minScale",void 0),r.__decorate([a.reader("service","minScale")],t.prototype,"readMinScale",null),r.__decorate([a.property()],t.prototype,"maxScale",void 0),r.__decorate([a.reader("service","maxScale")],t.prototype,"readMaxScale",null),r.__decorate([a.property({type:i.SpatialReference})],t.prototype,"spatialReference",void 0),r.__decorate([a.property({readOnly:!0,dependsOn:["version"]})],t.prototype,"supportsBlankTile",null),r.__decorate([a.property(n.serviceTileInfoProperty)],t.prototype,"tileInfo",void 0),r.__decorate([a.property()],t.prototype,"tilemapCache",void 0),r.__decorate([a.reader("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),r.__decorate([a.property()],t.prototype,"version",void 0),r.__decorate([a.subclass("esri.layers.mixins.ArcGISCachedService")],t)}(e)}}).apply(null,i))||(e.exports=a)},WiXY:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("zp6E"),r("ma1f"),r("7MDj"),r("LxLY"),r("EUqE"),r("qMld"),r("jfWY"),r("Vx27"),r("0RER"),r("WhPF"),r("G/Nd"),r("2fnV"),r("Pnm5"),r("DF4M"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("Blfj"),r("8CIp"),r("8CIp"),r("EtsK"),r("wIfq")],void 0===(a=(function(e,t,r,i,a,n,o,l,s,p,c,u,h,d,f,v,y,_,m,g,b,S,w,T,O,A,L){"use strict";var j=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i.listMode="show",i.isReference=null,i.operationalLayerType="ArcGISTiledMapServiceLayer",i.resampling=!0,i.sourceJSON=null,i.spatialReference=null,i.path=null,i.sublayers=null,i.type="tile",i.url=null,i}return r.__extends(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r.__assign({url:e},t):e},t.prototype.load=function(e){var t=this,r=l.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),p.resolve(this)},Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},enumerable:!1,configurable:!0}),t.prototype.readSpatialReference=function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&i.SpatialReference.fromJSON(e)},t.prototype.writeSublayers=function(e,t,i,a){if(this.loaded&&e){var n=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),o=[],l=r.__assign({writeSublayerStructure:!1},a);n.forEach((function(e){var t=e.write({},l);o.push(t)})),o.some((function(e){return Object.keys(e).length>1}))&&(t.layers=o)}},Object.defineProperty(t.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!1,configurable:!0}),t.prototype.castTileServers=function(e){return Array.isArray(e)?e.map((function(e){return c.urlToObject(e).path})):null},t.prototype.fetchTile=function(e,t,r,i){void 0===i&&(i={});var n=i.signal,o=i.timestamp,l=this.getTileUrl(e,t,r),s={responseType:"image",signal:n};return null!=o&&(s.query={_ts:i.timestamp}),a(l,s).then((function(e){return e.data}))},t.prototype.getTileUrl=function(e,t,i){var a=!this.tilemapCache&&this.supportsBlankTile,n=c.objectToQuery(r.__assign(r.__assign(r.__assign({},this.parsedUrl.query),{blankTile:!a&&null}),this.customParameters)),o=this.tileServers;return(o&&o.length?o[t%o.length]:this.parsedUrl.path)+"/tile/"+e+"/"+t+"/"+i+(n?"?"+n:"")},t.prototype._fetchService=function(e){var t=this;return p.create((function(i,o){if(t.sourceJSON){if(null!=t.sourceJSON.bandCount&&null!=t.sourceJSON.pixelSizeX)throw new n("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");i({data:t.sourceJSON})}else{if(!t.parsedUrl)throw new n("tile-layer:undefined-url","layer's url is not defined");var l=O.parse(t.parsedUrl.path);if(l&&"ImageServer"===l.serverType)throw new n("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");a(t.parsedUrl.path,{query:r.__assign(r.__assign({f:"json"},t.parsedUrl.query),t.customParameters),responseType:"json",signal:e}).then(i,o)}})).then((function(r){if(r.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=r.data,t.read(r.data,{origin:"service",url:t.parsedUrl}),10.1===t.version&&!O.isHostedAgolService(t.url))return t._fetchServerVersion(t.url,e).then((function(e){t.read({currentVersion:e})})).catch((function(){}))}))},t.prototype._fetchServerVersion=function(e,t){if(!T.isArcGISUrl(e))return p.reject();var i=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return a(i,{query:r.__assign({f:"json"},this.customParameters),responseType:"json",signal:t}).then((function(e){if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new n("tile-layer:version-not-available")}))},t.prototype._getMapName=function(e){var t=e.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]},t.prototype._getDefaultAttribution=function(e){if(e){var t;e=e.toLowerCase();for(var r=0,i=j.length;r<i;r++)if((t=j[r]).toLowerCase().indexOf(e)>-1)return c.makeAbsolute("//static.arcgis.com/attribution/"+t)}},t.prototype._getDefaultTileServers=function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]},r.__decorate([u.property({readOnly:!0,dependsOn:["parsedUrl"]})],t.prototype,"attributionDataUrl",null),r.__decorate([u.property({type:["show","hide","hide-children"]})],t.prototype,"listMode",void 0),r.__decorate([u.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),r.__decorate([u.property({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],t.prototype,"operationalLayerType",void 0),r.__decorate([u.property({type:Boolean})],t.prototype,"resampling",void 0),r.__decorate([u.property()],t.prototype,"sourceJSON",void 0),r.__decorate([u.property({type:i.SpatialReference})],t.prototype,"spatialReference",void 0),r.__decorate([u.reader("spatialReference",["spatialReference","tileInfo"])],t.prototype,"readSpatialReference",null),r.__decorate([u.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),r.__decorate([u.property({readOnly:!0})],t.prototype,"sublayers",void 0),r.__decorate([u.writer("sublayers",{layers:{type:[L]}})],t.prototype,"writeSublayers",null),r.__decorate([u.property({json:{read:!1,write:!1}})],t.prototype,"popupEnabled",void 0),r.__decorate([u.property({dependsOn:["parsedUrl"]})],t.prototype,"tileServers",null),r.__decorate([u.cast("tileServers")],t.prototype,"castTileServers",null),r.__decorate([u.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),r.__decorate([u.property(A.url)],t.prototype,"url",void 0),r.__decorate([u.subclass("esri.layers.TileLayer")],t)}(y.BlendLayer(w.SublayersOwner(S.ScaleRangeLayer(b.RefreshableLayer(m.OperationalLayer(g.PortalLayer(d.ArcGISCachedService(f.ArcGISMapService(v.ArcGISService(s.MultiOriginJSONMixin(o.HandleOwnerMixin(_.CustomParametersMixin(h)))))))))))))}).apply(null,i))||(e.exports=a)},ddAr:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r("zOht"),r("pMLx")],void 0===(a=(function(e,t,r,i){"use strict";function a(e,t,a,n){if(!e)return null;var o=t.minScale,l=t.maxScale,s=t.minLOD,p=t.maxLOD;if(null!=s&&null!=p)return i.fromJSON(n&&n.ignoreMinMaxLOD?e:r.__assign(r.__assign({},e),{lods:e.lods.filter((function(e){var t=e.level;return null!=t&&t>=s&&t<=p}))}));if(0!==o&&0!==l){var c=function(e){return Math.round(1e4*e)/1e4},u=o?c(o):1/0,h=l?c(l):-1/0;return i.fromJSON(r.__assign(r.__assign({},e),{lods:e.lods.filter((function(e){var t=c(e.scale);return t<=u&&t>=h}))}))}return i.fromJSON(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.readServiceTileInfo=t.serviceTileInfoProperty=void 0,t.serviceTileInfoProperty={type:i,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:a}}}}},t.readServiceTileInfo=a}).apply(null,i))||(e.exports=a)},xojL:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r("zOht"),r("zp6E"),r("KY0m"),r("ma1f"),r("rg9i")],void 0===(a=(function(e,t,r,i,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tilemapDefinitionUrl=t.tilemapDefinitionId=t.Tilemap=void 0;var l=function(){function e(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return e.prototype.getAvailability=function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var r=(e-this.location.top)*this.location.width+(t-this.location.left),i=r>>3,a=this._tileAvailabilityBitSet;return i<0||i>a.length?"unknown":a[i]&1<<r%8?"available":"unavailable"},e.prototype._updateFromData=function(e){for(var t=!0,r=!0,i=Math.ceil(this.location.width*this.location.height/8),a=new Uint8Array(i),n=0,o=0;o<e.length;o++){var l=o%8;e[o]?(r=!1,a[n]|=1<<l):t=!1,7===l&&++n}r?this._allAvailability="unavailable":t?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)},e.fromDefinition=function(t,o){var l=t.service.request||i,p=t.row,c=t.col,u=t.width,h=t.height,d={query:{f:"json"}};return o=o?r.__assign(r.__assign({},d),o):d,l(s(t),o).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:p,left:c,width:u,height:h},valid:!0,data:a.constant(u*h,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==p||t.location.left!==c||t.location.width!==u||t.location.height!==h))throw new n("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:p,left:c,width:u,height:h}});return e.fromJSON(t)}))},e.fromJSON=function(t){e.validateJSON(t);var r=new e;return r.location=Object.freeze(o.clone(t.location)),r._updateFromData(t.data),Object.freeze(r)},e.validateJSON=function(e){if(!e||!e.location)throw new n("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new n("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new n("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new n("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new n("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")},e}();function s(e){var t;if("vector-tile"===e.service.type)t=e.service.url+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height;else{var r=e.service.tileServers;t=(r&&r.length?r[e.row%r.length]:e.service.url)+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height}var i=e.service.query;return i&&(t=t+"?"+i),t}t.Tilemap=l,t.tilemapDefinitionId=function(e){return e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height},t.tilemapDefinitionUrl=s,t.default=l}).apply(null,i))||(e.exports=a)}}]);