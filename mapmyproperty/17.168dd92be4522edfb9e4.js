(function(){(this||window).webpackJsonp.registerAbsMids({"arcgis-js-api/views/3d/webgl-engine/lib/geometryDataUtils":"+nCE","esri/views/3d/webgl-engine/lib/geometryDataUtils":"+nCE","arcgis-js-api/views/3d/support/geometryUtils/sphere":"/dtL","esri/views/3d/support/geometryUtils/sphere":"/dtL","arcgis-js-api/views/3d/support/geometryUtils/vector":"18xY","esri/views/3d/support/geometryUtils/vector":"18xY","esri/core/libs/gl-matrix-2/mat4f64":"1m5D","arcgis-js-api/core/libs/gl-matrix-2/mat4f64":"1m5D","arcgis-js-api/views/3d/support/geometryUtils/boundedPlane":"2eYJ","esri/views/3d/support/geometryUtils/boundedPlane":"2eYJ","arcgis-js-api/core/libs/gl-matrix-2/vec4":"2fXB","esri/core/libs/gl-matrix-2/vec4":"2fXB","arcgis-js-api/views/3d/support/geometryUtils/ray":"4p4v","esri/views/3d/support/geometryUtils/ray":"4p4v","esri/core/libs/gl-matrix-2/mat3f64":"51bw","arcgis-js-api/core/libs/gl-matrix-2/mat3f64":"51bw","arcgis-js-api/views/3d/webgl-engine/lib/Util":"CIy2","esri/views/3d/webgl-engine/lib/Util":"CIy2","arcgis-js-api/core/libs/gl-matrix-2/factories/mat4f64":"CIzB","arcgis-js-api/views/3d/support/geometryUtils/plane":"GG08","esri/views/3d/support/geometryUtils/plane":"GG08","esri/views/3d/support/geometryUtils/axisAngle":"GyfB","arcgis-js-api/views/3d/support/stack":"JjCO","esri/views/3d/support/stack":"JjCO","esri/views/3d/support/geometryUtils/lineSegment":"N5NQ","arcgis-js-api/core/libs/gl-matrix-2/vec4f64":"O7NG","esri/core/libs/gl-matrix-2/vec4f64":"O7NG","esri/core/ObjectStack":"PHan","esri/core/libs/gl-matrix-2/factories/vec4f64":"TPlk","esri/views/3d/support/geometryUtils/triangle":"ZjcA","arcgis-js-api/views/3d/support/geometryUtils":"aWgr","esri/views/3d/support/geometryUtils":"aWgr","esri/views/3d/support/geometryUtils/frustum":"cpxo","esri/views/3d/support/geometryUtils/clipRay":"fXZm","arcgis-js-api/views/3d/webgl-engine/lib/ComponentUtils":"rjU6","esri/views/3d/webgl-engine/lib/ComponentUtils":"rjU6","esri/core/VectorStack":"wSO/"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"+nCE":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("0LE5"),r("Rdxj"),r("ZjcA")],void 0===(i=(function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var c=1,o=null,a=new Uint32Array([0]);t.generateDefaultIndexArray=function(e){if(1===e)return a;if(e>c||null==o){for(;e>c;)c*=2;o=new Uint32Array(c);for(var t=0;t<c;t++)o[t]=t}return new Uint32Array(o.buffer,0,e)},t.computeAttachmentOriginTriangles=function(e,t,n){if(!e)return!1;var c=e.strideIdx,o=e.offsetIdx,a=e.data;r.vec3.set(n,0,0,0),r.vec3.set(l,0,0,0);for(var s=0,d=0,p=0;p<t.length-2;p+=3){var g=t[p+0]*c+o,h=t[p+1]*c+o,m=t[p+2]*c+o;r.vec3.set(u,a[g+0],a[g+1],a[g+2]),r.vec3.set(v,a[h+0],a[h+1],a[h+2]),r.vec3.set(f,a[m+0],a[m+1],a[m+2]);var b=i.areaPoints3d(u,v,f);b?(r.vec3.add(u,u,v),r.vec3.add(u,u,f),r.vec3.scale(u,u,1/3*b),r.vec3.add(n,n,u),s+=b):(r.vec3.add(l,l,u),r.vec3.add(l,l,v),r.vec3.add(l,l,f),d+=3)}return!(0===d&&0===s||(0!==s?(r.vec3.scale(n,n,1/s),0):0===d||(r.vec3.scale(n,l,1/d),0)))},t.computeAttachmentOriginPoints=function(e,t,n){if(!e||!t)return!1;var i=e.strideIdx,c=e.offsetIdx,o=e.data;r.vec3.set(n,0,0,0);for(var a=-1,s=0,u=0;u<t.length;u++){var v=t[u]*i+c;a!==v&&(n[0]+=o[v+0],n[1]+=o[v+1],n[2]+=o[v+2],s++),a=v}return s>1&&r.vec3.scale(n,n,1/s),s>0},t.computeAttachmentOriginLines=function(e,t,n){if(!e)return!1;var i=e.strideIdx,c=e.offsetIdx,o=e.data;r.vec3.set(n,0,0,0),r.vec3.set(l,0,0,0);for(var a=0,s=0,f=t?t.length-1:o.length/i-1,d=0;d<f;d+=2){var p=(t?t[d+0]:d+0)*i+c,g=(t?t[d+1]:d+1)*i+c;u[0]=o[p+0],u[1]=o[p+1],u[2]=o[p+2],v[0]=o[g+0],v[1]=o[g+1],v[2]=o[g+2],r.vec3.scale(u,r.vec3.add(u,u,v),.5);var h=r.vec3.dist(u,v);h>0?(r.vec3.add(n,n,r.vec3.scale(u,u,h)),a+=h):(r.vec3.add(l,l,u),s++)}return 0!==a?(r.vec3.scale(n,n,1/a),!0):0!==s&&(r.vec3.scale(n,l,1/s),!0)};var s=0;t.getNewId=function(){return s++};var u=n.vec3f64.create(),v=n.vec3f64.create(),f=n.vec3f64.create(),l=n.vec3f64.create()}).apply(null,n))||(e.exports=i)},"/dtL":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("pcDC"),r("qsST"),r("xoE+"),r("PHan"),r("FXVB"),r("0LE5"),r("Rdxj"),r("aWgr"),r("AzkI"),r("JjCO"),r("4p4v")],void 0===(i=(function(e,t,r,n,i,c,o,a,s,u,v,f,l){function d(e){return e?{radius:e.radius,center:s.vec3f64.clone(e.center)}:{radius:1,center:s.vec3f64.create()}}function p(e,t){return void 0===t&&(t=d()),g(e.radius,e.center,t)}function g(e,t,r){return void 0===r&&(r=d()),a.vec3.copy(r.center,t),r.radius=e,r}function h(e,t,r){var n=a.vec3.subtract(f.sv3d.get(),t.origin,e.center),i=a.vec3.dot(t.direction,t.direction),c=2*a.vec3.dot(t.direction,n),o=c*c-4*i*(a.vec3.dot(n,n)-e.radius*e.radius);if(o<0)return!1;var s=Math.sqrt(o),u=(-c-s)/(2*i),v=(-c+s)/(2*i);return(u<0||v<u&&v>0)&&(u=v),!(u<0||(r&&a.vec3.add(r,t.origin,a.vec3.scale(f.sv3d.get(),t.direction,u)),0))}function m(e,t,r){var n=f.sv3d.get(),i=f.sm4d.get();a.vec3.cross(n,t.origin,t.direction),a.vec3.cross(r,n,t.origin),a.vec3.scale(r,r,1/a.vec3.length(r)*e.radius);var c=y(e,t.origin),s=u.vector.angle(t.origin,r);return o.mat4.identity(i),o.mat4.rotate(i,i,s+c,n),a.vec3.transformMat4(r,r,i),r}function b(e,t,r){var n=a.vec3.subtract(f.sv3d.get(),t,e.center),i=a.vec3.scale(f.sv3d.get(),n,e.radius/a.vec3.length(n));return a.vec3.add(r,i,e.center)}function y(e,t){var r=a.vec3.subtract(f.sv3d.get(),t,e.center),n=a.vec3.length(r),c=e.radius+Math.abs(e.radius-n);return i.acosClamped(e.radius/c)}function P(e,t,n,i){var c=a.vec3.subtract(w,t,e.center);switch(n){case 0:var o=(s=v.cartesianToSpherical(c,w))[2];return a.vec3.set(i,-Math.sin(o),Math.cos(o),0);case 1:var s,u=(s=v.cartesianToSpherical(c,w))[1],f=(o=s[2],Math.sin(u));return a.vec3.set(i,-f*Math.cos(o),-f*Math.sin(o),Math.cos(u));case 2:return a.vec3.normalize(i,c);default:return void r.neverReached(n)}}function M(e,t){var r=a.vec3.subtract(S,t,e.center);return a.vec3.length(r)-e.radius}Object.defineProperty(t,"__esModule",{value:!0});var j=n.getLogger("esri.views.3d.support.geometryUtils.sphere");t.create=d,t.wrap=function(e,t){var r=x.get();return r.radius=e,r.center=t||A,r},t.copy=p,t.fromValues=g,t.elevate=function(e,t,r){return e!==r&&a.vec3.copy(r.center,e.center),r.radius=e.radius+t,r},t.setExtent=function(e,t,r){return j.error("sphere.setExtent is not yet supported"),e===r?r:p(e,r)},t.intersectRay=h,t.intersectScreen=function(e,t,r,n){return h(e,l.fromScreenAtEye(t,r,O),n)},t.intersectsRay=function(e,t){return h(e,t,null)},t.intersectRayClosestSilhouette=function(e,t,r){if(h(e,t,r))return r;var n=m(e,t,f.sv3d.get());return a.vec3.add(r,t.origin,a.vec3.scale(f.sv3d.get(),t.direction,a.vec3.distance(t.origin,n)/a.vec3.length(t.direction))),r},t.closestPointOnSilhouette=m,t.closestPoint=function(e,t,r){return h(e,t,r)?r:(l.closestPoint(t,e.center,r),b(e,r,r))},t.projectPoint=b,t.distanceToSilhouette=function(e,t){var r=a.vec3.subtract(f.sv3d.get(),t,e.center),n=a.vec3.squaredLength(r);return Math.sqrt(Math.abs(n-e.radius*e.radius))},t.angleToSilhouette=y;var w=s.vec3f64.create();t.axisAt=P,t.altitudeAt=M,t.setAltitudeAt=function(e,t,r,n){var i=M(e,t),c=P(e,t,2,S),o=a.vec3.scale(S,c,r-i);return a.vec3.add(n,t,o),n};var x=new c.ObjectStack((function(){return{center:null,radius:0}})),O=l.create(),A=s.vec3f64.create(),S=s.vec3f64.create();Object.freeze(A)}).apply(null,n))||(e.exports=i)},"18xY":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xoE+"),r("0LE5")],void 0===(i=(function(e,t,r,n){function i(e,t){return n.vec3.dot(e,t)/n.vec3.length(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.projectPoint=function(e,t,r){var c=i(e,t);return n.vec3.scale(r,e,c)},t.projectPointSignedLength=i,t.angle=function(e,t){var i=n.vec3.dot(e,t)/(n.vec3.length(e)*n.vec3.length(t));return-r.acosClamped(i)}}).apply(null,n))||(e.exports=i)},"1m5D":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("CIzB")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4f64=r}).apply(null,n))||(e.exports=i)},"2eYJ":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("pcDC"),r("qsST"),r("xoE+"),r("PHan"),r("FXVB"),r("1m5D"),r("0LE5"),r("Rdxj"),r("AzkI"),r("JjCO"),r("N5NQ"),r("GG08"),r("4p4v"),r("18xY")],void 0===(i=(function(e,t,r,n,i,c,o,a,s,u,v,f,l,d,p,g){function h(e){return void 0===e&&(e=t.UP),{plane:d.create(e.plane),origin:u.vec3f64.clone(e.origin),basis1:u.vec3f64.clone(e.basis1),basis2:u.vec3f64.clone(e.basis2)}}function m(e,t){return void 0===t&&(t=h()),b(e.origin,e.basis1,e.basis2,t)}function b(e,t,r,n){return void 0===n&&(n=h()),s.vec3.copy(n.origin,e),s.vec3.copy(n.basis1,t),s.vec3.copy(n.basis2,r),d.fromVectorsAndPoint(r,t,e,n.plane),function(e,t){Math.abs(s.vec3.dot(e.basis1,e.basis2)/(s.vec3.length(e.basis1)*s.vec3.length(e.basis2)))>1e-6&&E.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(s.vec3.dot(e.basis1,e.plane))>1e-6&&E.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-s.vec3.dot(e.plane,e.origin)-e.plane[3])>1e-6&&E.warn(t,"Plane offset is not consistent with plane origin")}(n,"fromValues()"),n}function y(e,t,r){e!==r&&m(e,r);var n=s.vec3.scale(f.sv3d.get(),e.plane,t);return s.vec3.add(r.origin,r.origin,n),r.plane[3]-=t,r}function P(e,t){void 0===t&&(t=h());var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return s.vec3.set(t.origin,e[0]+r,e[1]+n,0),s.vec3.set(t.basis1,r,0,0),s.vec3.set(t.basis2,0,n,0),d.fromValues(0,0,1,0,t.plane),t}function M(e,t,r){return!!d.intersectRay(e.plane,t,r)&&V(e,r)}function j(e,t,r){var n=N.get();_(e,t,n,N.get());for(var c=Number.POSITIVE_INFINITY,o=0,a=R;o<a.length;o++){var u=B(e,a[o],C.get()),l=f.sv3d.get();if(d.intersectLineSegment(n,u,l)){var p=v.directionFromTo(f.sv3d.get(),t.origin,l),g=Math.abs(i.acosClamped(s.vec3.dot(t.direction,p)));g<c&&(c=g,s.vec3.copy(r,l))}}return c===Number.POSITIVE_INFINITY?w(e,t,r):r}function w(e,t,r){if(M(e,t,r))return r;var n=N.get(),i=N.get();_(e,t,n,i);for(var c=Number.POSITIVE_INFINITY,o=0,a=R;o<a.length;o++){var u=B(e,a[o],C.get()),v=f.sv3d.get();if(d.intersectLineSegmentClamp(n,u,v)){var l=p.distance2(t,v);if(!d.isPointInside(i,v))continue;l<c&&(c=l,s.vec3.copy(r,v))}}return O(e,t.origin)<c&&s.vec3.copy(r,t.origin),r}function x(e,t,r){var n=e.origin,i=e.basis1,c=e.basis2,o=s.vec3.subtract(f.sv3d.get(),t,n),a=g.projectPointSignedLength(i,o)/s.vec3.length(i),u=g.projectPointSignedLength(c,o)/s.vec3.length(c),v=g.projectPointSignedLength(e.plane,o);return s.vec3.set(r,a,u,v)}function O(e,t){var r=x(e,t,f.sv3d.get()),n=e.basis2,i=s.vec3.length(e.basis1),c=s.vec3.length(n),o=Math.max(Math.abs(r[0])-i,0),a=Math.max(Math.abs(r[1])-c,0),u=r[2];return o*o+a*a+u*u}function A(e,t){var r=-e.plane[3];return g.projectPointSignedLength(e.plane,t)-r}function S(e,t,n){switch(t){case 0:s.vec3.copy(n,e.basis1),s.vec3.normalize(n,n);break;case 1:s.vec3.copy(n,e.basis2),s.vec3.normalize(n,n);break;case 2:s.vec3.copy(n,e.plane);break;default:r.neverReached(t)}return n}function V(e,t){var r=s.vec3.subtract(f.sv3d.get(),t,e.origin),n=s.vec3.squaredLength(e.basis1),i=s.vec3.squaredLength(e.basis2),c=s.vec3.dot(e.basis1,r),o=s.vec3.dot(e.basis2,r);return-c-n<0&&c-n<0&&-o-i<0&&o-i<0}function I(e,t){var r=C.get();return s.vec3.copy(r.origin,e.origin),s.vec3.copy(r.vector,t),r}function B(e,t,r){var n=e.basis1,i=e.basis2,c=e.origin,o=s.vec3.scale(f.sv3d.get(),n,t.origin[0]),a=s.vec3.scale(f.sv3d.get(),i,t.origin[1]);s.vec3.add(r.origin,o,a),s.vec3.add(r.origin,r.origin,c);var u=s.vec3.scale(f.sv3d.get(),n,t.direction[0]),v=s.vec3.scale(f.sv3d.get(),i,t.direction[1]);return s.vec3.scale(r.vector,s.vec3.add(u,u,v),2),r}function _(e,t,r,n){var i=e.plane;d.fromVectorsAndPoint(i,t.direction,t.origin,r),d.fromVectorsAndPoint(r,i,t.origin,n)}Object.defineProperty(t,"__esModule",{value:!0});var E=n.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");t.BoundedPlaneClass=function(){this.plane=d.create(),this.origin=u.vec3f64.create(),this.basis1=u.vec3f64.create(),this.basis2=u.vec3f64.create()},t.create=h,t.wrap=function(e,t,r){var n=L.get();return n.origin=e,n.basis1=t,n.basis2=r,n.plane=d.fromVectorsAndPoint(r,t,e,d.wrap(0,0,0,0)),n},t.copy=m,t.fromValues=b,t.elevate=y,t.setExtent=function(e,t,r){return P(t,r),y(r,A(e,e.origin),r),r},t.fromAABoundingRect=P,t.intersectRay=M,t.intersectRayClosestSilhouette=function(e,t,r){if(M(e,t,r))return r;var n=j(e,t,f.sv3d.get());return s.vec3.add(r,t.origin,s.vec3.scale(f.sv3d.get(),t.direction,s.vec3.distance(t.origin,n)/s.vec3.length(t.direction))),r},t.closestPointOnSilhouette=j,t.closestPoint=w,t.projectPoint=function(e,t,r){var n=d.projectPoint(e.plane,t,f.sv3d.get()),i=l.projectPointClamp(I(e,e.basis1),n,-1,1,f.sv3d.get()),c=l.projectPointClamp(I(e,e.basis2),n,-1,1,f.sv3d.get());return s.vec3.subtract(r,s.vec3.add(f.sv3d.get(),i,c),e.origin),r},t.projectPointLocal=x,t.distance2=O,t.distance=function(e,t){return Math.sqrt(O(e,t))},t.distanceToSilhouette=function(e,t){for(var r=Number.NEGATIVE_INFINITY,n=0,i=R;n<i.length;n++){var c=B(e,i[n],C.get()),o=l.distance2(c,t);o>r&&(r=o)}return Math.sqrt(r)},t.extrusionContainsPoint=function(e,t){return d.isPointInside(e.plane,t)&&V(e,t)},t.axisAt=function(e,t,r,n){return S(e,r,n)},t.altitudeAt=A,t.setAltitudeAt=function(e,t,r,n){var i=A(e,t),c=s.vec3.scale(U,e.plane,r-i);return s.vec3.add(n,t,c),n},t.transform=function(e,t,r){return e!==r&&m(e,r),o.mat4.invert(k,t),o.mat4.transpose(k,k),s.vec3.transformMat4(r.basis1,e.basis1,k),s.vec3.transformMat4(r.basis2,e.basis2,k),s.vec3.transformMat4(r.plane,e.plane,k),s.vec3.transformMat4(r.origin,e.origin,t),d.setOffsetFromPoint(r.plane,r.origin,r.plane),r},t.UP={plane:d.create(),origin:u.vec3f64.fromValues(0,0,0),basis1:u.vec3f64.fromValues(1,0,0),basis2:u.vec3f64.fromValues(0,1,0)};var N=new c.ObjectStack(d.create),C=new c.ObjectStack(l.create),U=u.vec3f64.create(),L=new c.ObjectStack((function(){return{origin:null,basis1:null,basis2:null,plane:null}})),R=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],k=a.mat4f64.create()}).apply(null,n))||(e.exports=i)},"2fXB":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("bH65")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=r}).apply(null,n))||(e.exports=i)},"4p4v":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("PHan"),r("jBNx"),r("W9tT"),r("0LE5"),r("Rdxj"),r("JjCO")],void 0===(i=(function(e,t,r,n,i,c,o,a){function s(e){return e?{origin:o.vec3f64.clone(e.origin),direction:o.vec3f64.clone(e.direction)}:{origin:o.vec3f64.create(),direction:o.vec3f64.create()}}function u(e,t,r){return void 0===r&&(r=s()),c.vec3.copy(r.origin,e),c.vec3.copy(r.direction,t),r}function v(e,t,r){void 0===r&&(r=s());var o=n.castRenderScreenPointArray3(i.vec2.copy(a.sv3d.get(),t));o[2]=0,e.unprojectPoint(o,r.origin);var u=n.castRenderScreenPointArray3(i.vec2.copy(a.sv3d.get(),t));u[2]=1;var v=e.unprojectPoint(u,a.sv3d.get());return c.vec3.subtract(r.direction,v,r.origin),r}function f(e,t,r){void 0===r&&(r=s()),c.vec3.copy(r.origin,e.eye);var n=c.vec3.set(a.sv3d.get(),t[0],t[1],1),i=e.unprojectPoint(n,a.sv3d.get());return c.vec3.subtract(r.direction,i,r.origin),r}function l(e,t){var r=c.vec3.cross(a.sv3d.get(),c.vec3.normalize(a.sv3d.get(),e.direction),c.vec3.subtract(a.sv3d.get(),t,e.origin));return c.vec3.dot(r,r)}function d(){return{origin:null,direction:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=s,t.wrap=function(e,t){var r=p.get();return r.origin=e,r.direction=t,r},t.copy=function(e,t){return void 0===t&&(t=s()),u(e.origin,e.direction,t)},t.fromPoints=function(e,t,r){return void 0===r&&(r=s()),c.vec3.copy(r.origin,e),c.vec3.subtract(r.direction,t,e),r},t.fromValues=u,t.fromScreen=function(e,t,r){return void 0===r&&(r=s()),v(e,e.screenToRender(t,n.castRenderScreenPointArray3(a.sv3d.get())),r)},t.fromRender=v,t.fromScreenAtEye=function(e,t,r){return void 0===r&&(r=s()),f(e,e.screenToRender(t,n.castRenderScreenPointArray3(a.sv3d.get())),r)},t.fromRenderAtEye=f,t.distance2=l,t.distance=function(e,t){return Math.sqrt(l(e,t))},t.closestPoint=function(e,t,r){var n=c.vec3.dot(e.direction,c.vec3.subtract(r,t,e.origin));return c.vec3.add(r,e.origin,c.vec3.scale(r,e.direction,n)),r},t.createWrapper=d;var p=new r.ObjectStack(d)}).apply(null,n))||(e.exports=i)},"51bw":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xf8T")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat3f64=r}).apply(null,n))||(e.exports=i)},CIy2:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xoE+"),r("FXVB"),r("W9tT"),r("DIqE"),r("Rdxj"),r("2fXB"),r("O7NG")],void 0===(i=(function(e,t,r,n,i,c,o,a,s){function u(e,t){if(!e){t=t||"assert";var r=new Error(t);throw r.stack&&console.log(r.stack),new g(t)}}function v(e){for(var t in e)return t}function f(e,t){e[12]=t[0],e[13]=t[1],e[14]=t[2]}function l(e,t){void 0===t&&(t=0);for(var r=0,n=0;n<4;n++)r+=e[t+n]*m[n];return r}function d(e){return e-Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0});var p=s.vec4f64.create(),g=function(){function e(e){this.message=e}return e.prototype.toString=function(){return"AssertException: "+this.message},e}();t.AssertException=g,t.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex",TANGENT:"tangent"},t.assert=u,t.verify=function(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))},t.encodeInt16=function(e){return r.clamp(Math.round(32767*e),-32767,32767)},t.encodeNormal=function(e,t){var r=Math.abs(e[0]),n=Math.abs(e[1]),i=1/(r+n+Math.abs(e[2])),c=r*i,o=n*i,a=Math.min(e[2]*i,0);t[0]=(e[0]<0?-1:1)*(c-a),t[1]=(e[1]<0?-1:1)*(o-a)},t.fallbackIfUndefined=function(e,t){return void 0===e?t:e},t.hex2rgb=function(e){return[((e=Math.floor(e))>>16&255)/255,(e>>8&255)/255,(255&e)/255]},t.rgb2hex=function(e){return"0x"+((r.clamp(Math.round(255*e[0]),0,255)<<16)+(r.clamp(Math.round(255*e[1]),0,255)<<8)+r.clamp(Math.round(255*e[2]),0,255)).toString(16)},t.dec2hex=function(e){var t=e.toString(16);return"00000000".substr(0,8-t.length)+t},t.rayTriangle3D=function(e,t,r,n,i,c,a,s,u){void 0===u&&(u=o.vec3f64.create());var v=n[a]-r[c],f=n[a+1]-r[c+1],l=n[a+2]-r[c+2],d=i[s]-r[c],p=i[s+1]-r[c+1],g=i[s+2]-r[c+2],h=t[1]*g-p*t[2],m=t[2]*d-g*t[0],b=t[0]*p-d*t[1],y=v*h+f*m+l*b;if(y>-1e-5&&y<1e-5)return!1;var P=1/y,M=e[0]-r[c],j=e[1]-r[c+1],w=e[2]-r[c+2];if(u[1]=P*(M*h+j*m+w*b),u[1]<0||u[1]>1)return!1;var x=j*l-f*w,O=w*v-l*M,A=M*f-v*j;return u[2]=P*(t[0]*x+t[1]*O+t[2]*A),!(u[2]<0||u[1]+u[2]>1||(u[0]=P*(d*x+p*O+g*A),0))},t.rayBoxTest=function(e,t,r,n){var i,c=(r[0]-e[0])/t[0],o=(n[0]-e[0])/t[0];c>o&&(i=c,c=o,o=i);var a=(r[1]-e[1])/t[1],s=(n[1]-e[1])/t[1];if(a>s&&(i=a,a=s,s=i),c>s||a>o)return!1;a>c&&(c=a),s<o&&(o=s);var u=(r[2]-e[2])/t[2],v=(n[2]-e[2])/t[2];return u>v&&(i=u,u=v,v=i),!(c>v||u>o||(v<o&&(o=v),o<0))},t.rayRay2D=function(e,t,r,n,i,o){void 0===o&&(o=c.vec2f64.create());var a=(n[i]-r[i])*(t[0]-e[0])-(n[0]-r[0])*(t[i]-e[i]);if(0===a)return!1;var s=((n[0]-r[0])*(e[i]-r[i])-(n[i]-r[i])*(e[0]-r[0]))/a;return o[0]=e[0]+s*(t[0]-e[0]),o[1]=e[i]+s*(t[i]-e[i]),!0},t.project=function(e,t,r,n,i){i||(i=e),p[0]=e[0],p[1]=e[1],p[2]=e[2],p[3]=1,a.vec4.transformMat4(p,p,t),i.length>2&&(i[2]=-p[2]),a.vec4.transformMat4(p,p,r),u(0!==p[3]),i[0]=p[0]/p[3],i[1]=p[1]/p[3],i[2]=p[2]/p[3],i[0]=(.5*i[0]+.5)*n[2]+n[0],i[1]=(.5*i[1]+.5)*n[3]+n[1]},t.getFirstObjectKey=v,t.getFirstObjectValue=function(e){return e[v(e)]},t.objectEmpty=function(e){for(var t in e)return!1;return!0},t.logWithBase=function(e,t){return Math.log(e)/Math.log(t)},t.setMatrixTranslation=f,t.setMatrixTranslation3=function(e,t,r,n){e[12]=t,e[13]=r,e[14]=n},t.getMatrixTranslation=function(e,t){return void 0===t&&(t=o.vec3f64.create()),t[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.createTranslationMatrix=function(e,t){return f(e=n.mat4.identity(e),t),e},t.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]},t.fovx2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/t)},t.fovy2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/r)},t.fovx2fovd=function(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/t)},t.fovy2fovd=function(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/r)},t.fovd2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+r*r))},t.fovd2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/Math.sqrt(t*t+r*r))},t.packFloatRGBA=function(e,t,n){void 0===n&&(n=0);for(var i=r.clamp(e,0,b),c=0;c<4;c++)t[n+c]=Math.floor(256*d(i*h[c]))},t.unpackFloatRGBA=l;var h=[1,256,65536,16777216],m=[1/256,1/65536,1/16777216,1/4294967296],b=l(new Uint8ClampedArray([255,255,255,255]));t.inverseProjectionInfo=function(e,t,r,n,c){var o=e;0===e[11]?(n[0]=2/(t*o[0]),n[1]=2/(r*o[5]),n[2]=(1+o[12])/o[0],n[3]=(1+o[13])/o[5],i.vec2.set(c,0,1)):(n[0]=-2/(t*o[0]),n[1]=-2/(r*o[5]),n[2]=(1-o[8])/o[0],n[3]=(1-o[9])/o[5],i.vec2.set(c,1,0))}}).apply(null,n))||(e.exports=i)},CIzB:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},t.fromValues=function(e,t,r,n,i,c,o,a,s,u,v,f,l,d,p,g){return[e,t,r,n,i,c,o,a,s,u,v,f,l,d,p,g]},t.createView=function(e,t){return new Float64Array(e,t,16)},t.IDENTITY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}).apply(null,n))||(e.exports=i)},GG08:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xoE+"),r("0LE5"),r("JjCO")],void 0===(i=(function(e,t,r,n,i){function c(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function o(e,t){return void 0===t&&(t=c()),a(e[0],e[1],e[2],e[3],t)}function a(e,t,r,n,i){return void 0===i&&(i=c()),i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function s(e,t,r){void 0===r&&(r=c()),n.vec3.copy(r,t);var i=n.vec3.dot(t,t);return Math.abs(i-1)>1e-5&&i>1e-12&&n.vec3.scale(r,r,1/Math.sqrt(i)),u(r,e,r),r}function u(e,t,r){return e!==r&&o(e,r),r[3]=-n.vec3.dot(r,t),r}function v(e,t,r,o){return void 0===o&&(o=c()),s(r,n.vec3.cross(i.sv3d.get(),t,e),o)}function f(e,t,r){var c=n.vec3.scale(i.sv3d.get(),e,n.vec3.dot(e,t));return n.vec3.subtract(r,t,c),r}function l(e,t){return n.vec3.dot(e,t)+e[3]}function d(e,t,i,c,o,a){var s=n.vec3.dot(e,i);if(0===s)return!1;var u=-(n.vec3.dot(e,t)+e[3])/s;return o&&(u=c?Math.max(0,u):r.clamp(u,0,1)),!(u<0||!c&&u>1||(n.vec3.add(a,t,n.vec3.scale(a,i,u)),0))}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.wrap=function(e,t,r,n){return a(e,t,r,n,i.sv4d.get())},t.copy=o,t.fromValues=a,t.fromNormalAndOffset=function(e,t,r){return void 0===r&&(r=c()),n.vec3.copy(r,e),r[3]=t,r},t.fromPositionAndNormal=s,t.fromPoints=function(e,t,r,o){return void 0===o&&(o=c()),v(n.vec3.subtract(i.sv3d.get(),e,t),n.vec3.subtract(i.sv3d.get(),r,t),e,o)},t.setOffsetFromPoint=u,t.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},t.fromVectorsAndPoint=v,t.intersectRay=function(e,t,r){return d(e,t.origin,t.direction,!0,!1,r)},t.intersectLineSegment=function(e,t,r){return d(e,t.origin,t.vector,!1,!1,r)},t.intersectLineSegmentClamp=function(e,t,r){return d(e,t.origin,t.vector,!1,!0,r)},t.isSphereFullyInside=function(e,t){var r=t.radius;return l(e,t.center)-r>=0},t.isSphereFullyOutside=function(e,t){var r=t.radius;return l(e,t.center)+r<0},t.isPointInside=function(e,t){return l(e,t)>=0},t.isPointOutside=function(e,t){return l(e,t)<0},t.isAABBFullyInside=function(e,t){return e[0]*(e[0]>0?t[0]:t[3])+e[1]*(e[1]>0?t[1]:t[4])+e[2]*(e[2]>0?t[2]:t[5])+e[3]>=0},t.clip=function(e,t){var r=n.vec3.dot(e,t.ray.direction),i=-l(e,t.ray.origin);if(i<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return i>0;if((i<0||r<0)&&!(i<0&&r<0))return!0;var c=i/r;return r>0?c<t.c1&&(t.c1=c):c>t.c0&&(t.c0=c),t.c0<=t.c1},t.projectPoint=function(e,t,r){var c=n.vec3.scale(i.sv3d.get(),e,-e[3]),o=f(e,n.vec3.subtract(i.sv3d.get(),t,c),i.sv3d.get());return n.vec3.add(r,o,c),r},t.projectVector=f,t.distance=function(e,t){return Math.abs(l(e,t))},t.signedDistance=l,t.UP=[0,0,1,0]}).apply(null,n))||(e.exports=i)},GyfB:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("0LE5"),r("JjCO"),r("18xY")],void 0===(i=(function(e,t,r,n,i){function c(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function o(e,t,r,n,i){return void 0===i&&(i=c()),i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.wrap=function(e,t,r,i){return o(e,t,r,i,n.sv4d.get())},t.wrapAxisAngle=function(e,t){return o(e[0],e[1],e[2],t,n.sv4d.get())},t.copy=function(e,t){return void 0===t&&(t=c()),o(e[0],e[1],e[2],e[3],t)},t.fromValues=o,t.fromAxisAndAngle=function(e,t,n){return void 0===n&&(n=c()),r.vec3.copy(n,e),n[3]=t,n},t.fromPoints=function(e,t,n){return void 0===n&&(n=c()),r.vec3.cross(n,e,t),r.vec3.normalize(n,n),n[3]=i.angle(e,t),n},t.UP=[0,0,1,0]}).apply(null,n))||(e.exports=i)},JjCO:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("wSO/")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sv2d=r.VectorStack.createVec2f64(),t.sv3d=r.VectorStack.createVec3f64(),t.sv4d=r.VectorStack.createVec4f64(),t.sm3d=r.VectorStack.createMat3f64(),t.sm4d=r.VectorStack.createMat4f64(),t.sq4d=r.VectorStack.createQuatf64()}).apply(null,n))||(e.exports=i)},N5NQ:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xoE+"),r("PHan"),r("0LE5"),r("Rdxj"),r("JjCO")],void 0===(i=(function(e,t,r,n,i,c,o){function a(e){return e?{origin:c.vec3f64.clone(e.origin),vector:c.vec3f64.clone(e.vector)}:{origin:c.vec3f64.create(),vector:c.vec3f64.create()}}function s(e,t){var r=p.get();return r.origin=e,r.vector=t,r}function u(e,t,r){return void 0===r&&(r=a()),i.vec3.copy(r.origin,e),i.vec3.copy(r.vector,t),r}function v(e,t){var n=i.vec3.subtract(o.sv3d.get(),t,e.origin),c=i.vec3.dot(e.vector,n),a=i.vec3.dot(e.vector,e.vector),s=r.clamp(c/a,0,1),u=i.vec3.subtract(o.sv3d.get(),i.vec3.scale(o.sv3d.get(),e.vector,s),n);return i.vec3.dot(u,u)}function f(e,t,n,c,a){var s=e.vector,u=e.origin,v=i.vec3.subtract(o.sv3d.get(),t,u),f=i.vec3.length(s),l=i.vec3.dot(s,v)/f;return i.vec3.scale(a,s,r.clamp(l,n,c)),i.vec3.add(a,a,e.origin)}function l(e,t,n,c){var a=e.origin,s=i.vec3.add(o.sv3d.get(),a,e.vector),u=t.origin,v=i.vec3.add(o.sv3d.get(),u,t.vector),f=o.sv3d.get(),l=o.sv3d.get();if(f[0]=a[0]-u[0],f[1]=a[1]-u[1],f[2]=a[2]-u[2],l[0]=v[0]-u[0],l[1]=v[1]-u[1],l[2]=v[2]-u[2],Math.abs(l[0])<1e-6&&Math.abs(l[1])<1e-6&&Math.abs(l[2])<1e-6)return!1;var d=o.sv3d.get();if(d[0]=s[0]-a[0],d[1]=s[1]-a[1],d[2]=s[2]-a[2],Math.abs(d[0])<1e-6&&Math.abs(d[1])<1e-6&&Math.abs(d[2])<1e-6)return!1;var p=f[0]*l[0]+f[1]*l[1]+f[2]*l[2],g=l[0]*d[0]+l[1]*d[1]+l[2]*d[2],h=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],m=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],b=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*m-g*g;if(Math.abs(b)<1e-6)return!1;var y=(p*g-h*m)/b,P=(p+g*y)/m;n&&(y=r.clamp(y,0,1),P=r.clamp(P,0,1));var M=o.sv3d.get(),j=o.sv3d.get();return M[0]=a[0]+y*d[0],M[1]=a[1]+y*d[1],M[2]=a[2]+y*d[2],j[0]=u[0]+P*l[0],j[1]=u[1]+P*l[1],j[2]=u[2]+P*l[2],c.tA=y,c.tB=P,c.pA=M,c.pB=j,c.distance2=i.vec3.squaredDistance(M,j),!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=a,t.wrap=s,t.copy=function(e,t){return void 0===t&&(t=a()),u(e.origin,e.vector,t)},t.fromValues=u,t.fromPoints=function(e,t,r){return void 0===r&&(r=a()),i.vec3.copy(r.origin,e),i.vec3.subtract(r.vector,t,e),r},t.distance2=v,t.distance=function(e,t){return Math.sqrt(v(e,t))},t.projectPoint=function(e,t,r){return f(e,t,0,1,r)},t.projectPointClamp=f,t.closestRayDistance2=function(e,t){if(l(e,s(t.origin,t.direction),!1,d)){var r=d.tA,n=d.pB;if(r>=0&&r<=1)return d.distance2;if(r<0)return i.vec3.squaredDistance(e.origin,n);if(r>1)return i.vec3.squaredDistance(i.vec3.add(o.sv3d.get(),e.origin,e.vector),n)}return null},t.closestLineSegmentPoint=function(e,t,r){return!!l(e,t,!0,d)&&(i.vec3.copy(r,d.pA),!0)},t.closestLineSegmentDistance2=function(e,t){return l(e,t,!0,d)?d.distance2:null};var d={tA:0,tB:0,pA:c.vec3f64.create(),pB:c.vec3f64.create(),distance2:0},p=new n.ObjectStack((function(){return{origin:null,vector:null}}))}).apply(null,n))||(e.exports=i)},O7NG:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("TPlk")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4f64=r}).apply(null,n))||(e.exports=i)},PHan:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("6DRN")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=r.before((function(){return t.reset()})),this.grow()}return e.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null),this.items=null},e.prototype.get=function(){return 0===this.itemsPtr&&r((function(){})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]},e.prototype.reset=function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*i);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0},e.prototype.grow=function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,i));e++)this.items.push(this.allocator())},e}();t.ObjectStack=n;var i=1024;t.default=n}).apply(null,n))||(e.exports=i)},TPlk:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){function r(e,t,r,n){return[e,t,r,n]}function n(){return r(1,1,1,1)}function i(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function o(){return r(0,0,1,0)}function a(){return r(0,0,0,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[0,0,0,0]},t.clone=function(e){return[e[0],e[1],e[2],e[3]]},t.fromValues=r,t.fromArray=function(e){for(var t=[0,0,0,0],r=Math.min(4,e.length),n=0;n<r;++n)t[n]=e[n];return t},t.createView=function(e,t){return new Float64Array(e,t,4)},t.zeros=function(){return[0,0,0,0]},t.ones=n,t.unitX=i,t.unitY=c,t.unitZ=o,t.unitW=a,t.ZEROS=[0,0,0,0],t.ONES=n(),t.UNIT_X=i(),t.UNIT_Y=c(),t.UNIT_Z=o(),t.UNIT_W=a()}).apply(null,n))||(e.exports=i)},ZjcA:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("PHan"),r("W9tT"),r("0LE5"),r("Rdxj"),r("JjCO"),r("N5NQ")],void 0===(i=(function(e,t,r,n,i,c,o,a){function s(e){return e?{p0:c.vec3f64.clone(e.p0),p1:c.vec3f64.clone(e.p1),p2:c.vec3f64.clone(e.p2)}:{p0:c.vec3f64.create(),p1:c.vec3f64.create(),p2:c.vec3f64.create()}}function u(e,t,r,n){return void 0===n&&(n=s()),i.vec3.copy(n.p0,e),i.vec3.copy(n.p1,t),i.vec3.copy(n.p2,r),n}function v(e,t,r){var i=n.vec2.distance(e,t),c=n.vec2.distance(t,r),o=n.vec2.distance(r,e),a=(i+c+o)/2,s=a*(a-i)*(a-c)*(a-o);return s<=0?0:Math.sqrt(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=s,t.wrap=function(e,t,r){var n=l.get();return n.p0=e,n.p1=t,n.p2=r,n},t.copy=function(e,t){return void 0===t&&(t=s()),u(e.p0,e.p1,e.p2,t)},t.fromValues=u,t.distance2=function(e,t){var r=e.p0,n=e.p1,c=e.p2,s=i.vec3.subtract(o.sv3d.get(),n,r),u=i.vec3.subtract(o.sv3d.get(),c,n),v=i.vec3.subtract(o.sv3d.get(),r,c),l=i.vec3.subtract(o.sv3d.get(),t,r),d=i.vec3.subtract(o.sv3d.get(),t,n),p=i.vec3.subtract(o.sv3d.get(),t,c),g=i.vec3.cross(s,s,v),h=i.vec3.dot(i.vec3.cross(o.sv3d.get(),s,g),l),m=i.vec3.dot(i.vec3.cross(o.sv3d.get(),u,g),d),b=i.vec3.dot(i.vec3.cross(o.sv3d.get(),v,g),p);if(h>0&&m>0&&b>0){var y=i.vec3.dot(g,l);return y*y/i.vec3.dot(g,g)}var P=a.distance2(a.fromValues(r,s,f.get()),t),M=a.distance2(a.fromValues(n,u,f.get()),t),j=a.distance2(a.fromValues(c,v,f.get()),t);return Math.min(P,M,j)},t.intersectRay=function(e,t,r){var n=t.direction,c=t.origin,o=e.p0,a=e.p1,s=e.p2,u=a[0]-o[0],v=a[1]-o[1],f=a[2]-o[2],l=s[0]-o[0],d=s[1]-o[1],p=s[2]-o[2],g=n[1]*p-d*n[2],h=n[2]*l-p*n[0],m=n[0]*d-l*n[1],b=u*g+v*h+f*m;if(b>-1e-5&&b<1e-5)return!1;var y=1/b,P=c[0]-o[0],M=c[1]-o[1],j=c[2]-o[2],w=y*(P*g+M*h+j*m);if(w<0||w>1)return!1;var x=M*f-v*j,O=j*u-f*P,A=P*v-u*M,S=y*(n[0]*x+n[1]*O+n[2]*A);return!(S<0||w+S>1||(r&&(i.vec3.scale(r,n,y*(l*x+d*O+p*A)),i.vec3.add(r,c,r)),0))},t.areaPoints2d=v,t.area2d=function(e){return v(e.p0,e.p1,e.p2)},t.areaPoints3d=function(e,t,r){return i.vec3.subtract(d,t,e),i.vec3.subtract(p,r,e),i.vec3.length(i.vec3.cross(d,d,p))/2};var f=new r.ObjectStack(a.create),l=new r.ObjectStack((function(){return{p0:null,p1:null,p2:null}})),d=c.vec3f64.create(),p=c.vec3f64.create()}).apply(null,n))||(e.exports=i)},aWgr:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("GyfB"),r("2eYJ"),r("cpxo"),r("N5NQ"),r("GG08"),r("4p4v"),r("/dtL"),r("ZjcA"),r("18xY")],void 0===(i=(function(e,t,r,n,i,c,o,a,s,u,v){Object.defineProperty(t,"__esModule",{value:!0}),t.plane=o,t.boundedPlane=n,t.triangle=u,t.lineSegment=c,t.ray=a,t.sphere=s,t.frustum=i,t.vector=v,t.axisAngle=r}).apply(null,n))||(e.exports=i)},cpxo:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("PHan"),r("FXVB"),r("0LE5"),r("Rdxj"),r("2fXB"),r("O7NG"),r("JjCO"),r("fXZm"),r("GG08")],void 0===(i=(function(e,t,r,n,i,c,o,a,s,u,v){function f(e){if(e){var t=e.planes,r=e.points;return{planes:[v.create(t[0]),v.create(t[1]),v.create(t[2]),v.create(t[3]),v.create(t[4]),v.create(t[5])],points:[c.vec3f64.clone(r[0]),c.vec3f64.clone(r[1]),c.vec3f64.clone(r[2]),c.vec3f64.clone(r[3]),c.vec3f64.clone(r[4]),c.vec3f64.clone(r[5]),c.vec3f64.clone(r[6]),c.vec3f64.clone(r[7])]}}return{planes:[v.create(),v.create(),v.create(),v.create(),v.create(),v.create()],points:[c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create()]}}function l(e,t,r){void 0===r&&(r=f());for(var n=0;n<6;n++)v.copy(e[n],r.planes[n]);for(n=0;n<8;n++)i.vec3.copy(r.points[n],t[n]);return r}function d(e){var t=e.planes,r=e.points;v.fromPoints(r[4],r[0],r[3],t[0]),v.fromPoints(r[1],r[5],r[6],t[1]),v.fromPoints(r[4],r[5],r[1],t[2]),v.fromPoints(r[3],r[2],r[6],t[3]),v.fromPoints(r[0],r[1],r[2],t[4]),v.fromPoints(r[5],r[4],r[7],t[5])}function p(e,t){for(var r=0;r<6;r++)if(!v.clip(e[r],t))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=f,t.copy=function(e,t){return void 0===t&&(t=f()),l(e.planes,e.points,t)},t.fromValues=l,t.fromMatrix=function(e,t,r){void 0===r&&(r=f());var c=r.points,a=n.mat4.multiply(s.sm4d.get(),t,e);n.mat4.invert(a,a);for(var u=0;u<8;++u){var v=o.vec4.transformMat4(s.sv4d.get(),g[u],a);i.vec3.set(c[u],v[0]/v[3],v[1]/v[3],v[2]/v[3])}return d(r),r},t.recomputePlanes=d,t.intersectsSphere=function(e,t){for(var r=0;r<6;r++)if(v.isSphereFullyInside(e[r],t))return!1;return!0},t.intersectsRay=function(e,t){return p(e,u.fromRay(t,h.get()))},t.intersectsLineSegment=function(e,t,r){return p(e,u.fromLineSegmentAndDirection(t,r,h.get()))},t.intersectsPoint=function(e,t){for(var r=0;r<6;r++)if(v.signedDistance(e[r],t)>0)return!1;return!0},t.intersectsAABB=function(e,t){for(var r=0;r<6;r++)if(v.isAABBFullyInside(e[r],t))return!1;return!0},t.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var g=[a.vec4f64.fromValues(-1,-1,-1,1),a.vec4f64.fromValues(1,-1,-1,1),a.vec4f64.fromValues(1,1,-1,1),a.vec4f64.fromValues(-1,1,-1,1),a.vec4f64.fromValues(-1,-1,1,1),a.vec4f64.fromValues(1,-1,1,1),a.vec4f64.fromValues(1,1,1,1),a.vec4f64.fromValues(-1,1,1,1)],h=new r.ObjectStack(u.create)}).apply(null,n))||(e.exports=i)},fXZm:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("PHan"),r("0LE5"),r("JjCO"),r("4p4v")],void 0===(i=(function(e,t,r,n,i,c){function o(e){return e?{ray:c.create(e.ray),c0:e.c0,c1:e.c1}:{ray:c.create(),c0:0,c1:Number.MAX_VALUE}}function a(e,t,r,n){return void 0===n&&(n=o()),c.copy(e,n.ray),n.c0=t,n.c1=r,n}function s(e,t,r){void 0===r&&(r=o());var i=n.vec3.length(e.vector);return c.fromValues(e.origin,t,r.ray),r.c0=0,r.c1=i,r}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,r){var n=u.get();return n.ray=e,n.c0=t,n.c1=r,n},t.copy=function(e,t){return void 0===t&&(t=o()),a(e.ray,e.c0,e.c1,t)},t.fromValues=a,t.fromRay=function(e,t){return void 0===t&&(t=o()),c.copy(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t},t.fromLineSegment=function(e,t){return void 0===t&&(t=o()),s(e,n.vec3.normalize(i.sv3d.get(),e.vector),t)},t.fromLineSegmentAndDirection=s;var u=new r.ObjectStack((function(){return{c0:0,c1:0,ray:null}}))}).apply(null,n))||(e.exports=i)},rjU6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("KY0m"),r("LxLY")],void 0===(i=(function(e,t,r,n){function i(e,t){if(null!=e){var r=e.isVisibleBit,n=e.data,i=m(n);return t<n.length*i?h(r,n,t,i):g(e)}return!0}function c(e){return n.isSome(e.component)?e.component:-1}function o(e,t,r,n,c){i(t,n)&&a(e,r[n],P(r[n+1]),c)}function a(e,t,r,n){var i=e.length>0?e[e.length-1]:null,c=i?i.range[1]:-1;c>=t||(c+1===t&&(i?i.options:null)===n?i.range[1]=r:e.push({range:[t,r],options:n}))}function s(e){return void 0===e&&(e=!0),{isVisibleBit:!e,data:new Uint32Array(0)}}function u(e,t){return!f(e,t)}function v(e,t){return l(e,t,!0)}function f(e,t){return l(e,t,!1)}function l(e,t,r){var n=!1,i=(e=e||j).isVisibleBit,c=e.data,o=M(t),a=m(c),s=r===i;if(0===c.length||0===o)n=!s;else if(c.length*a<o&&!s)n=!0;else{for(var u=y(a),v=y(0),f=0;f<c.length-1;f++)if(n=!s&&c[f]!==u||s&&c[f]!==v)return n;var l=c.length-1,d=y((o-1)%a+1);n=!s&&(c[l]&d)!==d||s&&(c[l]&d)!==v}return n}function d(e,t){return t<M(e)}function p(e){return e.length>0}function g(e){return!e.isVisibleBit}function h(e,t,r,n){var i=r/n|0;return function(e,t){return 0!=(e&1<<t)}(t[i],r-i*n)===e}function m(e){return 8*e.BYTES_PER_ELEMENT}function b(e,t,r){return e&~(1<<t)|(r?1:0)<<t}function y(e){return w[e]}function P(e){return e-1}function M(e){return Math.max(0,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateVisibility=function(e,t,r,n){if(d(t,r)){null==e&&(e=s());var i=e.isVisibleBit,c=e.data,o=m(c),a=r/o|0,u=r-o*a,v=(M(t)-1)/o|0,f=c,l=n===i;if(!(r<f.length*o)&&l){var p=a+1,g=Math.ceil(1.5*f.length),h=v+1,y=Math.max(p,g);y=Math.min(y,h),(c=new Uint32Array(y)).set(f)}a<c.length&&(c[a]=b(c[a],u,l)),e.data=c}return e},t.updateVisibilityWithCount=function(e,t,r,n){if(r<t){null==e&&(e=s());var i=e.isVisibleBit,c=e.data,o=m(c),a=r/o|0,u=r-o*a,v=(t-1)/o|0,f=c,l=n===i;if(!(r<f.length*o)&&l){var d=a+1,p=Math.ceil(1.5*f.length),g=v+1,h=Math.max(d,p);h=Math.min(h,g),(c=new Uint32Array(h)).set(f)}a<c.length&&(c[a]=b(c[a],u,l)),e.data=c}return e},t.getVisibility=i,t.hideAllComponents=function(e){var t;if(null==e)t=s(!1);else{(t=e).isVisibleBit=!0;for(var r=0;r<t.data.length;r++)t.data[r]=0}return t},t.unhideAllComponents=function(e){var t;if(null==e);else{(t=e).isVisibleBit=!1;for(var r=0;r<t.data.length;r++)t.data[r]=0}return t},t.generateVisibleIndexRanges=function(e,t){var r;if(e)if(p(t))if(0===e.data.length){var n=[],i=[[t[0],P(t[t.length-1])]];r=g(e)?i:n}else{r=[];for(var c=e.isVisibleBit,o=e.data,a=m(o),s=o.length*a,u=M(t),v=!1,f=0;f<s&&f<u;f++){var l=h(c,o,f,a);if(l!==v){var d=t[f];l?r.push([d,0]):(y=r[r.length-1])[1]=P(d),v=l}}var b=g(e);if(u>s&&b&&!v)r.push([t[s],P(t[u])]);else if(v){var y=r[r.length-1],j=b?u:Math.min(u,s);y[1]=P(t[j])}}else n=[],i=null,r=g(e)?i:n;else r=null;return r},t.addHighlight=function(e,t,r,n){var i,o={component:t,options:r,id:n};(e=e||[]).push(o);for(var a=c(o),s=e.length-1;s>0&&a<c(e[s-1]);)e[s-1]=(i=[e[s],e[s-1]])[0],e[s]=i[1],--s;return e},t.removeHighlight=function(e,t){if(!e)return e;var r=e.filter((function(e){return e.id!==t}));return 0===r.length?null:r},t.generateHighlightedIndexRanges=function(e,t,r){if(!t)return null;if(!p(r))return!e||g(e)?t.map((function(e){return{range:null,options:e.options}})):null;for(var i=r[0],c=P(r[r.length-1]),s=[],v=u(e,r),f=0;f<t.length;++f){var l=t[f].options,d=t[f].component;if(n.isSome(d))o(s,e,r,d,l);else if(v)a(s,i,c,l);else for(var h=0;h<M(r);++h)o(s,e,r,h,l)}return s.length>0?s:null},t.hasHighlights=function(e,t,r){if(!t)return!1;if(!p(r))return!(e&&!g(e))&&t.length>0;for(var i=u(e,r),c=0,o=t;c<o.length;c++){if(n.isSome(o[c].component))return!0;if(i)return!0;if(M(r)>0)return!0}return!1},t.defaultVisibilities=s,t.isAllVisible=u,t.isAllHidden=function(e,t){return!v(e,t)},t.hasVisible=v,t.hasHidden=f;var j=s();t.createOffsets=function(e){return e instanceof Uint32Array?e:new Uint32Array(e)},t.hasComponent=d,t.hasComponents=p;for(var w=[],x=0;x<65;x++)w.push(Math.pow(2,x)-1);t.componentCount=M,t.componentFind=function(e,t){var n=r.binaryIndexOf(e,t,!0);return n>=0?n:null}}).apply(null,n))||(e.exports=i)},"wSO/":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("6DRN"),r("51bw"),r("1m5D"),r("lLWD"),r("DIqE"),r("Rdxj"),r("O7NG")],void 0===(i=(function(e,t,r,n,i,c,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t,n){var i=this;this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(n/this.itemByteSize),this.tickHandle=r.before((function(){return i.reset()}))}return e.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null),this.itemsPtr=0,this.items=null,this.buffers=null},e.prototype.get=function(){0===this.itemsPtr&&r((function(){}));for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),n=0;n<this.itemsPerBuffer;++n)this.items.push(this.itemCreate(t,n*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]},e.prototype.reset=function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0},e.createVec2f64=function(t){return void 0===t&&(t=v),new e(16,o.vec2f64.createView,t)},e.createVec3f64=function(t){return void 0===t&&(t=v),new e(24,a.vec3f64.createView,t)},e.createVec4f64=function(t){return void 0===t&&(t=v),new e(32,s.vec4f64.createView,t)},e.createMat3f64=function(t){return void 0===t&&(t=v),new e(72,n.mat3f64.createView,t)},e.createMat4f64=function(t){return void 0===t&&(t=v),new e(128,i.mat4f64.createView,t)},e.createQuatf64=function(t){return void 0===t&&(t=v),new e(32,c.quatf64.createView,t)},Object.defineProperty(e.prototype,"test",{get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}},enumerable:!0,configurable:!0}),e}();t.VectorStack=u;var v=4096}).apply(null,n))||(e.exports=i)}}]);