(function(){(this||window).webpackJsonp.registerAbsMids({"arcgis-js-api/layers/support/LabelClass":"5WBt","esri/layers/support/LabelClass":"5WBt","esri/layers/support/FieldsIndex":"I90O","arcgis-js-api/layers/support/FieldsIndex":"I90O","arcgis-js-api/layers/support/labelUtils":"L924","esri/layers/support/labelUtils":"L924","esri/views/2d/layers/features/processors/SymbolProcessor":"dh9Z","esri/core/MapPool":"loiZ","arcgis-js-api/core/MapPool":"loiZ","arcgis-js-api/layers/support/LabelExpressionInfo":"nsnX","esri/layers/support/labelFormatUtils":"y/j/"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"5WBt":function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("qKT0"),t("9opi"),t("Q2wQ"),t("HZ3d"),t("+AWJ"),t("ImIS"),t("ycL1"),t("rg9i"),t("Vx27"),t("nsnX"),t("L924"),t("5Lc7"),t("dXKx"),t("HqJa")],void 0===(i=(function(e,r,t,n,i,o,a,s,l,u,p,c,f,d,y,h){function v(e){return!e||"service"!==e.origin&&(!e.layer||!d.isOfType(e.layer,"map-image"))}function b(e){if(!e)return null;var r=w.exec(e);return r&&(r[1]||r[3])||null}var g=new s.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),m=/^\s*\{([^}]+)\}\s*$/i,w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]))\s*$/i;return function(e){function r(r){var t=e.call(this,r)||this;return t.name=null,t.labelExpression=null,t.labelExpressionInfo=null,t.labelPlacement=null,t.maxScale=0,t.minScale=0,t.symbol=y.defaultTextSymbol2D,t.useCodedValues=void 0,t.where=null,t}var i;return n(r,e),i=r,r.evaluateWhere=function(e,r){var t=function(e,r,t){switch(r){case"=":return e==t;case"<>":return e!=t;case">":return e>t;case">=":return e>=t;case"<":return e<t;case"<=":return e<=t}return!1};try{if(null==e)return!0;var n=e.split(" ");if(3===n.length)return t(r[n[0]],n[1],n[2]);if(7===n.length){var i=t(r[n[0]],n[1],n[2]),o=n[3],a=t(r[n[4]],n[5],n[6]);switch(o){case"AND":return i&&a;case"OR":return i||a}}return!1}catch(r){console.log("Error.: can't parse = "+e)}},r.prototype.readLabelExpression=function(e,r){var t=r.labelExpressionInfo;if(!t||!t.value&&!t.expression)return e},r.prototype.writeLabelExpression=function(e,r,t,n){if(this.labelExpressionInfo&&v(n))if(null!=this.labelExpressionInfo.value)e=function(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var i=b(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}null!=e&&(r[t]=e)},r.prototype.writeLabelExpressionInfo=function(e,r,t,n){if(null==e&&null!=this.labelExpression&&v(n))e=new c({expression:this.getLabelExpressionArcade()});else if(!e)return;var i=e.toJSON(n);i.expression&&(r[t]=i)},r.prototype.writeMaxScale=function(e,r){(e||this.minScale)&&(r.maxScale=e)},r.prototype.writeMinScale=function(e,r){(e||this.maxScale)&&(r.minScale=e)},r.prototype.getLabelExpression=function(){var e={expression:"",type:"none"};return this.labelExpressionInfo?this.labelExpressionInfo.value?(e.expression=this.labelExpressionInfo.value,e.type="conventional"):this.labelExpressionInfo.expression&&(e.expression=this.labelExpressionInfo.expression,e.type="arcade"):null!=this.labelExpression&&(e.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(this.labelExpression),e.type="conventional"),e},r.prototype.getLabelExpressionArcade=function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return f.convertTemplatedStringToArcade(e.expression);case"arcade":return e.expression}return null},r.prototype.getLabelExpressionSingleField=function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return function(e){var r=e.match(m);return r&&r[1].trim()||null}(e.expression);case"arcade":return b(e.expression)}return null},r.prototype.clone=function(){return new i({labelExpression:this.labelExpression,labelExpressionInfo:u.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:u.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})},t([p.property({type:String,json:{write:!0}})],r.prototype,"name",void 0),t([p.property({type:String,json:{write:{allowNull:!0}}})],r.prototype,"labelExpression",void 0),t([p.reader("labelExpression")],r.prototype,"readLabelExpression",null),t([p.writer("labelExpression")],r.prototype,"writeLabelExpression",null),t([p.property({type:c,json:{write:{overridePolicy:function(e,r,t){return v(t)?{allowNull:!0}:{enabled:!1}}}}})],r.prototype,"labelExpressionInfo",void 0),t([p.writer("labelExpressionInfo")],r.prototype,"writeLabelExpressionInfo",null),t([p.property({type:g.apiValues,json:{type:g.jsonValues,read:g.read,write:g.write}})],r.prototype,"labelPlacement",void 0),t([p.property({type:Number})],r.prototype,"maxScale",void 0),t([p.writer("maxScale")],r.prototype,"writeMaxScale",null),t([p.property({type:Number})],r.prototype,"minScale",void 0),t([p.writer("minScale")],r.prototype,"writeMinScale",null),t([p.property({types:a.symbolTypesLabel,json:{origins:{"web-scene":{types:a.symbolTypesLabel3D,read:h.read,write:h.writeTarget,default:null}},read:h.read,write:h.writeTarget,default:null}})],r.prototype,"symbol",void 0),t([p.property({type:Boolean,json:{write:!0}})],r.prototype,"useCodedValues",void 0),t([p.property({type:String,json:{write:!0}})],r.prototype,"where",void 0),i=t([p.subclass("esri.layers.support.LabelClass")],r)}(p.declared(l.JSONSupport))}).apply(null,n))||(e.exports=i)},I90O:function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("xhoE")],void 0===(i=(function(e,r,t){function n(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function i(e){return e.toLowerCase().trim()}return function(){function e(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],e){for(var r=[],t=0,o=e;t<o.length;t++){var a=o[t],s=a&&a.name;if(s){var l=i(s);this._fieldsMap.set(s,a),this._fieldsMap.set(l,a),r.push(l),n(a)&&(this.dateFields.push(a),this._dateFieldsSet.add(a))}}r.sort(),this.uid=r.join(",")}}return e.prototype.destroy=function(){this._fieldsMap.clear()},e.prototype.has=function(e){return null!=this.get(e)},e.prototype.get=function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(i(e)):void 0},e.prototype.isDateField=function(e){return this._dateFieldsSet.has(this.get(e))},e.prototype.normalizeFieldName=function(e){var r=this.get(e);if(r)return r.name},e}()}).apply(null,n))||(e.exports=i)},L924:function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("nRUF")],void 0===(i=(function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0});var n="__begin__",i="__end__",o=new RegExp(n,"ig"),a=new RegExp(i,"ig"),s=new RegExp("^"+n,"i"),l=new RegExp(i+"$","i");r.convertTemplatedStringToArcade=function(e){var r;return e?(r=t.replace(e,(function(e){return n+'$feature["'+e+'"]'+i})),r=s.test(r)?r.replace(s,""):'"'+r,r=(r=l.test(r)?r.replace(l,""):r+'"').replace(o,'" + ').replace(a,' + "')):r='""',r}}).apply(null,n))||(e.exports=i)},dh9Z:function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("9opi"),t("qKT0"),t("2Atf"),t("Q2wQ"),t("HZ3d"),t("ma1f"),t("H1tY"),t("qsST"),t("loiZ"),t("LxLY"),t("qMld"),t("Vx27"),t("Z4y+"),t("5WBt"),t("y/j/"),t("hz/Y"),t("YaB4"),t("WEAo"),t("dtJe"),t("MtZC"),t("68TM")],void 0===(i=(function(e,r,t,n,i,o,a,s,l,u,p,c,f,d,y,h,v,b,g,m,w,x,S){function L(e,r,t){t.has(e)||t.set(e,new Set);for(var n=t.get(e),i=r.length,o=0;o<i;o++){var a=r.charCodeAt(o);n.add(a)}}Object.defineProperty(r,"__esModule",{value:!0});var E=u.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor"),_=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r._symbolToMosaicItemMap=new Map,r._visualSetPromises=new Map,r.type="symbol",r}return t(r,e),r.prototype.initialize=function(){this._factory=this._createFactory()},r.prototype.destroy=function(){this._visualSetPromises.clear(),this._symbolToMosaicItemMap.clear(),this.notifyChange("updating")},Object.defineProperty(r.prototype,"supportsTileUpdates",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"labelingInfo",{get:function(){return!this.config||c.isNone(this.config.labelingInfo)?null:this.config.labelingInfo.map((function(e){return h.fromJSON(e)}))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"labelClassInfos",{get:function(){var e=this;return this.labelingInfo?f.all(this.labelingInfo.map((function(r,t){return a(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e={index:t,minScale:r.minScale,maxScale:r.maxScale},[4,v.createLabelFunction(r,this.service.fields,this.spatialReference)];case 1:return[2,(e.builder=n.sent(),e.symbol=r.symbol,e)]}}))}))}))):f.resolve()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hydrate",{get:function(){return m.createHydrateFactory(this.service.geometryType)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"renderer",{get:function(){return this.config?b.fromJSON(this.config.renderer):(l("esri-2d-debug")&&console.debug("Unable to create renderer for undefined configuration"),null)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"updating",{get:function(){return this._visualSetPromises.size>0},enumerable:!0,configurable:!0}),r.prototype.update=function(e){return a(this,void 0,void 0,(function(){var r;return o(this,(function(t){return r=this._getMeshHash(),this._set("config",e),r!==this._getMeshHash()?this._factory=this._createFactory():this._factory.update(this.labelingInfo,this.renderer,this.tileStore.tileScheme.tileInfo),[2]}))}))},r.prototype.onTileData=function(e,r,t){var n,i=this,o=r.addOrUpdate,a=r.remove,s=r.clear;n=o&&o.length?this._processFeatures(e,o,r.transformParams):f.resolve();var l=t.signal,u=n.then((function(r){return i.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:{addOrUpdate:r&&r.message||null,remove:a,clear:s}},{transferList:r&&r.transferList||null,signal:l})})).catch((function(r){return i._handleError(e,r,t)}));return this._visualSetPromises.set(e,u),f.always(u,(function(){return i._cleanPromise(e)})),this.notifyChange("updating"),u},r.prototype.onTileError=function(e,r,t){var n=this,i=this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:r},{signal:t.signal});return this._visualSetPromises.set(e,i),f.always(i,(function(){return n._cleanPromise(e)})),this.notifyChange("updating"),i},r.prototype._getMeshHash=function(){var e=x.getVVFlags("visualVariables"in this.renderer&&this.renderer.visualVariables||[]);return this.renderer.getMeshHash()+"."+e},r.prototype._createFactory=function(){var e=this,r=this.service,t=r.geometryType,n=r.objectIdField,i={geometryType:t,fields:r.fields,spatialReference:y.fromJSON(this.spatialReference)},o=new g.WGLTemplateStore((function(r,t){return e.remoteClient.invoke("tileRenderer.getMaterialItems",r,t)}),!1),a=this.tileStore.tileScheme.tileInfo;return this._matcher=g.createMatcher(this.renderer,o,i),new g.WGLMeshFactory(t,n,this.renderer,o,this.labelingInfo,a)},r.prototype._cleanPromise=function(e){this._visualSetPromises.delete(e),this.notifyChange("updating")},r.prototype._processFeatures=function(e,r,t){var n=this;if(!r||!r.length)return f.resolve(null);var i=this._factory,o={viewingMode:"",scale:e.scale};return this._matcher.then((function(e){return i.analyze(r,!1,e,t,o)})).then((function(r){return n._getLabelMosaicItems(e,r,t).then((function(o){return n._writeFeatures(e,r,t,o,i)}))}))},r.prototype._writeFeatures=function(e,r,t,n,i){for(var o=i.createMeshData(r.length),a={viewingMode:"",scale:e.scale},u=this._symbolToMosaicItemMap,p=0,c=r;p<c.length;p++){var f=c[p];try{i.write(o,f,t,a,e.level,n,u)}catch(e){l("esri-2d-debug")&&E.error(new s("mapview-mesh-factory","Failed to write feature",{feature:f}))}}return this._encodeDisplayData(o)},r.prototype._encodeDisplayData=function(e){var r={},t=new Array;return e.encode(r,t),{message:r,transferList:t}},r.prototype._handleError=function(e,r,t){var n=t.signal;if(!f.isAbortError(r))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:r.message},{signal:n})},r.prototype._getLabelMosaicItems=function(e,r,t){return a(this,void 0,void 0,(function(){var n,i,a,s,l,u;return o(this,(function(o){switch(o.label){case 0:return n=p.acquire(),[4,this._createLabelFeatures(e.scale,r,n,t)];case 1:return i=o.sent(),a=this._symbolToMosaicItemMap,s=p.acquire(),l=[],u=0,n.forEach((function(e,r){if(a.has(r.id)){var t=a.get(r.id).glyphMosaicItems,n=[];e.forEach((function(e){(t&&t.length<e||!t[e])&&(n[e]=e)})),n.length>0&&(s.set(u,r),l.push({symbol:r.toJSON(),id:u,glyphIds:n}),u++)}else{s.set(u,r);var i=[];e.forEach((function(e){return i.push(e)})),l.push({symbol:r.toJSON(),id:u,glyphIds:i}),u++}})),l.length>0?[2,this.remoteClient.invoke("tileRenderer.getMaterialItems",l).then((function(e){for(var r=0,t=e;r<t.length;r++){var n=t[r],o=s.get(n.id);if(o)if(w.isTextSymbol(o))if(a.has(o.id)){var l=a.get(o.id).glyphMosaicItems,u=n.mosaicItem.glyphMosaicItems;if(u)for(var c=0;c<u.length;c++)null!=u[c]&&(l[c]=u[c])}else a.set(o.id,n.mosaicItem);else a.set(o.id,n.mosaicItem)}return p.release(s),i}))]:(p.release(n),[2,f.resolve(i)])}}))}))},r.prototype._getLabelClassInfosForScale=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.labelClassInfos];case 1:return[2,r.sent().filter((function(r){var t=r.minScale,n=r.maxScale;return(!t||t>=e||0===t)&&(!n||n<=e||0===n)}))]}}))}))},r.prototype._createLabelFeatures=function(e,r,t,n){return a(this,void 0,void 0,(function(){var a,s,l,u,f,d,h,v,b,m,w,x,S,_,I,P,M,C,T,F,O,j,A,R;return o(this,(function(o){switch(o.label){case 0:return this.labelingInfo&&r&&0!==r.length?[4,this._getLabelClassInfosForScale(e)]:[2,null];case 1:if(0===(a=o.sent()).length)return[2,null];for(s=p.acquire(),l=new g.CollisionGrid(g.definitions.COLLISION_EARLY_REJECT_BUCKET_SIZE),u=0,f=r;u<f.length;u++)if(d=f[u],v=0,b=0,"esriGeometryPoint"!==(h=this.service.geometryType)&&"esriGeometryPolygon"!==h||("esriGeometryPoint"===h?(v=(m=d.geometry).x,b=m.y):(v=d.centroid.x,b=d.centroid.y),!l.checkOverlap(v,b))){for(w=d.localId,x=new Array,S=0;S<a.length;S++){if(I=(_=a[S]).index,P=_.builder,M=_.symbol,!n)return E.error("mapview-labeling","Tried to evaluate geometry expression but no transformation found"),[2,void 0];C=this.hydrate(d.geometry,n.transform,n.hasZ,n.hasM),T=i({},d,{geometry:C}),C.spatialReference=y.fromJSON(this.spatialReference),F=P.evaluate(T),c.isNone(F)||""===F||(g.definitions.DEBUG_LABELS&&(F=F.substring(0,F.length-(O="-"+w).length)+O),j=g.bidiText(F),R=j[1],L(M,A=j[0],t),x.push({text:A,rtl:R,id:I}))}s.set(w,x)}return[2,s]}}))}))},n([d.property({readOnly:!0})],r.prototype,"supportsTileUpdates",null),n([d.property()],r.prototype,"config",void 0),n([d.property({dependsOn:["config"]})],r.prototype,"labelingInfo",null),n([d.property({dependsOn:["labelingInfo","service","spatialReference"]})],r.prototype,"labelClassInfos",null),n([d.property({dependsOn:["service"]})],r.prototype,"hydrate",null),n([d.property({dependsOn:["config"],readOnly:!0})],r.prototype,"renderer",null),n([d.property({readOnly:!0})],r.prototype,"updating",null),n([d.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],r)}(d.declared(S.default));r.default=_}).apply(null,n))||(e.exports=i)},loiZ:function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("SyoC")],void 0===(i=(function(e,r,t){var n=function(){function e(e,r){void 0===e&&(e=50),void 0===r&&(r=50),this._pool=new t(Map,!1,(function(e){return e.clear()}),r,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.release=function(e){this._pool.release(e)},e.acquire=function(){return i.acquire()},e.release=function(e){return i.release(e)},e}(),i=new n(100);return n}).apply(null,n))||(e.exports=i)},nsnX:function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("9opi"),t("qKT0"),t("ycL1"),t("Vx27"),t("L924")],void 0===(i=(function(e,r,t,n,i,o,a){return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.value=null,r.expression=null,r}var i;return t(r,e),i=r,r.prototype.readExpression=function(e,r){return r.value?a.convertTemplatedStringToArcade(r.value):e},r.prototype.writeExpression=function(e,r,t){null!=this.value&&(e=a.convertTemplatedStringToArcade(this.value)),r[t]=e},r.prototype.clone=function(){return new i({value:this.value,expression:this.expression})},n([o.property({json:{read:!1,write:!1}})],r.prototype,"value",void 0),n([o.property({type:String,json:{write:{allowNull:!0}}})],r.prototype,"expression",void 0),n([o.reader("expression",["expression","value"])],r.prototype,"readExpression",null),n([o.writer("expression")],r.prototype,"writeExpression",null),i=n([o.subclass("esri.layers.support.LabelExpressionInfo")],r)}(o.declared(i.JSONSupport))}).apply(null,n))||(e.exports=i)},"y/j/":function(e,r,t){var n,i;n=[t.dj.c(e.i),r,t("qKT0"),t("9opi"),t("Q2wQ"),t("HZ3d"),t("ma1f"),t("qsST"),t("qMld"),t("hCwm"),t("ICCr"),t("I90O"),t("k7g7"),t("sCbS")],void 0===(i=(function(e,r,n,i,o,a,s,l,u,p,c,f,d,y){function h(){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2,u.create((function(e){t.e(8).then((function(){var r=[t("1eyA")];e.apply(null,r)}).bind(this)).catch(t.oe)}))]}))}))}function v(e,r,t,n){var i=d.getField(n,e);if(!i)return r;if(null==t[i.name])return"";var o=i.domain;if(o)if("codedValue"===o.type||"coded-value"===o.type)for(var a=t[i.name],s=0,l=o.codedValues;s<l.length;s++){var u=l[s];if(u.code===a)return u.name}else if("range"===o.type){var f=+t[i.name];if(("range"in o?o.range[0]:o.minValue)<=f&&f<=("range"in o?o.range[1]:o.maxValue))return o.name}var y=t[i.name];return"date"===i.type||"esriFieldTypeDate"===i.type?y=p.formatDate(y,p.convertDateFormatToIntlOptions("short-date")):d.isNumericField(i)&&(y=c.formatNumber(+y)),y||""}Object.defineProperty(r,"__esModule",{value:!0});var b=l.getLogger("esri.layers.support.labelFormatUtils"),g={type:"simple",evaluate:function(){return null}};r.createLabelFunction=function(e,r,t){return a(this,void 0,void 0,(function(){var n,i,a,l,u,p,c,d;return o(this,(function(o){switch(o.label){case 0:return e&&e.symbol?(n=e.where,i=e.getLabelExpression(),n?[4,h()]:[3,2]):[2,g];case 1:return l=o.sent(),[3,3];case 2:l=null,o.label=3;case 3:return a=l,"arcade"!==i.type?[3,5]:[4,y.createLabelExpression(i.expression,t,r)];case 4:return p=o.sent(),u={type:"arcade",evaluate:function(e){try{var r=p.evaluate({$feature:p.repurposeFeature(e)});if(null!=r)return r.toString()}catch(r){return b.error(new s("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:e,expression:i})),null}return null}},[3,6];case 5:u={type:"simple",evaluate:function(e){var t=e&&e.attributes;return t?i.expression.replace(/{[^}]*}/g,(function(e){return v(e.slice(1,-1),e,t,r)})):null}},o.label=6;case 6:if(n){try{c=a.WhereClause.create(n,new f(r))}catch(e){return[2,g]}d=u.evaluate,u.evaluate=function(e){return c.testFeature(e)?d(e):null}}return[2,u]}}))}))},r.formatField=v}).apply(null,n))||(e.exports=i)}}]);