!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(u){return void r(u)}l.done?t(c):Promise.resolve(c).then(n,a)}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var a=O(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{Wvof:function(e,r,i){"use strict";i.r(r);var c=i("pO5D"),s=(i("wSAH"),i("f/qv")),f=i("nR38"),d=i("srIe"),m=(i("6S2I"),i("zqDF"),i("WbKI")),v=i("r88o"),j=i("ACjl"),g=i("04ZG"),h=i("Cduq"),S=i("zlDU"),w=(i("4EHJ"),i("ju1D"),i("9AIY"),i("f4Nx")),N=i("WZb1"),k=i("OvF4"),x=(i("4GrV"),i("LE9a")),J=i("21Ip"),L=i("DXYb"),T=i("Tcmu"),C=i("Ibpv"),I=(i("H9eC"),i("jWBI")),P=i("pqNC"),R=i("5pQd"),D=i("gYg2"),M=i("uRH/"),E=i("qNUd"),_=i("ofM5"),G=i("mXvl"),F=i("DbUH"),A=i("WmKv"),W=i("W9Wu"),z=i("zgsL"),B=i("p0UO");function q(e){return e.layers.some(function(e){return null!=e.layerDefinition.visibilityField})}var H=new _.a({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),U=new _.a({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),Y=function(e){y(r,e);var t=p(r);function r(){var e;return l(this,r),(e=t.apply(this,arguments)).visibilityMode="inherited",e}return u(r,[{key:"initialize",value:function(){var e,t=this,r=o(this.graphics);try{for(r.s();!(e=r.n()).done;){e.value.sourceLayer=this.layer}}catch(n){r.e(n)}finally{r.f()}this.graphics.on("after-add",function(e){e.item.sourceLayer=t.layer}),this.graphics.on("after-remove",function(e){e.item.sourceLayer=null})}},{key:"sublayers",get:function(){return this.graphics}}]),r}(z.a);Object(c.a)([Object(m.b)({readOnly:!0})],Y.prototype,"sublayers",null),Object(c.a)([Object(m.b)()],Y.prototype,"layer",void 0),Object(c.a)([Object(m.b)({readOnly:!0})],Y.prototype,"visibilityMode",void 0),Y=Object(c.a)([Object(g.a)("esri.layers.MapNotesLayer.MapNotesSublayer")],Y);var K=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",layerId:"polygonLayer",title:"Polygons",identifyingSymbol:(new L.a).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",layerId:"polylineLayer",title:"Polylines",identifyingSymbol:(new J.a).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",layerId:"multipointLayer",title:"Multipoints",identifyingSymbol:(new T.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"pointLayer",title:"Points",identifyingSymbol:(new T.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"textLayer",title:"Text",identifyingSymbol:(new C.a).toJSON()}],X=function(e){y(m,e);var r,i,c=p(m);function m(e){var t;return l(this,m),(t=c.call(this,e)).capabilities={operations:{supportsMapNotesEditing:!0}},t.featureCollections=null,t.featureCollectionJSON=null,t.featureCollectionType="notes",t.legendEnabled=!1,t.minScale=0,t.maxScale=0,t.spatialReference=N.a.WGS84,t.sublayers=new x.a(K.map(function(e){return new Y({id:e.layerId,title:e.title,layer:b(t)})})),t.title="Map Notes",t.type="map-notes",t.visibilityMode="inherited",t}return u(m,[{key:"readCapabilities",value:function(e,t,r){return{operations:{supportsMapNotesEditing:!q(t)&&"portal-item"!==(null==r?void 0:r.origin)}}}},{key:"readFeatureCollections",value:function(e,t,r){if(!q(t))return null;var n=t.layers.map(function(e){var t=new W.default;return t.read(e,r),t});return new x.a({items:n})}},{key:"readLegacyfeatureCollectionJSON",value:function(e,t){return q(t)?Object(s.a)(t.featureCollection):null}},{key:"readFullExtent",value:function(e,t){if(!t.layers.length)return new k.a({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:N.a.WGS84});var r=N.a.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(function(e,t){var r=t.layerDefinition.extent;return r?k.a.fromJSON(r).union(e):e},new k.a({spatialReference:r}))}},{key:"readMinScale",value:function(e,t){var r,n=o(t.layers);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(null!=a.layerDefinition.minScale)return a.layerDefinition.minScale}}catch(i){n.e(i)}finally{n.f()}return 0}},{key:"readMaxScale",value:function(e,t){var r,n=o(t.layers);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(null!=a.layerDefinition.maxScale)return a.layerDefinition.maxScale}}catch(i){n.e(i)}finally{n.f()}return 0}},{key:"multipointLayer",get:function(){return this._findSublayer("multipointLayer")}},{key:"pointLayer",get:function(){return this._findSublayer("pointLayer")}},{key:"polygonLayer",get:function(){return this._findSublayer("polygonLayer")}},{key:"polylineLayer",get:function(){return this._findSublayer("polylineLayer")}},{key:"readSpatialReference",value:function(e,t){return t.layers.length?N.a.fromJSON(t.layers[0].layerDefinition.spatialReference):N.a.WGS84}},{key:"readSublayers",value:function(e,t,r){var n=this;if(q(t))return null;for(var a=[],o=function(e){var r=t.layers[e],o=r.layerDefinition,i=r.featureSet,c=null!=(l=o.geometryType)?l:i.geometryType,u=K.find(function(e){var t,r,n;return c===e.geometryTypeJSON&&(null==(t=o.drawingInfo)||null==(r=t.renderer)||null==(n=r.symbol)?void 0:n.type)===e.identifyingSymbol.type});if(u){var y=new Y({id:u.layerId,title:o.name,layer:n,graphics:i.features.map(function(e){var t=e.geometry,r=e.symbol,n=e.attributes,a=e.popupInfo;return I.a.fromJSON({attributes:n,geometry:t,symbol:r,popupTemplate:a})})});a.push(y)}},i=0;i<t.layers.length;i++){var l;o(i)}return new x.a(a)}},{key:"writeSublayers",value:function(e,t,r,n){var a=this,i=this.minScale,l=this.maxScale;if(!Object(d.j)(e)){var c,u=e.some(function(e){return e.graphics.length>0});if(this.capabilities.operations.supportsMapNotesEditing){var y,s=[],p=this.spatialReference.toJSON(),b=o(e);try{e:for(b.s();!(y=b.n()).done;){var O,m=o(y.value.graphics);try{for(m.s();!(O=m.n()).done;){var v=O.value;if(Object(d.k)(v.geometry)){p=v.geometry.spatialReference.toJSON();break e}}}catch(w){m.e(w)}finally{m.f()}}}catch(w){b.e(w)}finally{b.f()}var j,g=o(K);try{var h=function(){var t=j.value,r=e.find(function(e){return t.layerId===e.id});a._writeMapNoteSublayer(s,r,t,i,l,p,n)};for(g.s();!(j=g.n()).done;)h()}catch(w){g.e(w)}finally{g.f()}Object(f.c)("featureCollection.layers",s,t)}else u&&(null==n||null==(c=n.messages)||c.push(new S.a("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}},{key:"textLayer",get:function(){return this._findSublayer("textLayer")}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"read",value:function(e,t){"featureCollection"in e&&(e=Object(s.a)(e),Object.assign(e,e.featureCollection)),a(O(m.prototype),"read",this).call(this,e,t)}},{key:"beforeSave",value:(r=regeneratorRuntime.mark(function e(){var t,r,n,a,i,l,c,u,y,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(d.j)(this.sublayers)){e.next=2;break}return e.abrupt("return");case 2:t=null,r=[],n=o(this.sublayers),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=40;break}i=a.value,l=o(i.graphics),e.prev=10,l.s();case 12:if((c=l.n()).done){e.next=30;break}if(u=c.value,!Object(d.k)(u.geometry)){e.next=28;break}if(y=u.geometry,!t){e.next=26;break}if(e.t0=Object(w.c)(y.spatialReference,t),e.t0){e.next=24;break}if(e.t1=Object(D.b)(y.spatialReference,t)||Object(D.g)(),e.t1){e.next=23;break}return e.next=23,Object(D.i)();case 23:u.geometry=Object(D.j)(y,t);case 24:e.next=27;break;case 26:t=y.spatialReference;case 27:r.push(u);case 28:e.next=12;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(10),l.e(e.t2);case 35:return e.prev=35,l.f(),e.finish(35);case 38:e.next=7;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(5),n.e(e.t3);case 45:return e.prev=45,n.f(),e.finish(45);case 48:return e.next=50,Object(E.a)(r.map(function(e){return e.geometry}));case 50:s=e.sent,r.forEach(function(e,t){return e.geometry=s[t]});case 52:case"end":return e.stop()}},e,this,[[5,42,45,48],[10,32,35,38]])}),i=function(){var e=this,t=arguments;return new Promise(function(a,o){var i=r.apply(e,t);function l(e){n(i,a,o,l,c,"next",e)}function c(e){n(i,a,o,l,c,"throw",e)}l(void 0)})},function(){return i.apply(this,arguments)})},{key:"_findSublayer",value:function(e){var t,r;return Object(d.j)(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find(function(t){return t.id===e}))?t:null}},{key:"_writeMapNoteSublayer",value:function(e,t,r,n,a,i,l){var c=[];if(!Object(d.j)(t)){var u,y=o(t.graphics);try{for(y.s();!(u=y.n()).done;){var p=u.value;this._writeMapNote(c,p,r.geometryType,l)}}catch(f){y.e(f)}finally{y.f()}this._normalizeObjectIds(c,H),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:Object(s.a)(r.identifyingSymbol)}},geometryType:r.geometryTypeJSON,minScale:n,maxScale:a,objectIdField:"OBJECTID",fields:[H.toJSON(),U.toJSON()],spatialReference:i},featureSet:{features:c,geometryType:r.geometryTypeJSON}})}}},{key:"_writeMapNote",value:function(e,r,n,a){if(!Object(d.j)(r)){var o,i,l=r.geometry,c=r.symbol,u=r.popupTemplate;if(!Object(d.j)(l))if(l.type===n)if(Object(d.j)(c))null==a||null==(i=a.messages)||i.push(new j.a("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:r}));else{var y={attributes:t({},r.attributes),geometry:l.toJSON(),symbol:c.toJSON()};Object(d.k)(u)&&(y.popupInfo=u.toJSON()),e.push(y)}else null==a||null==(o=a.messages)||o.push(new j.a("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(l.type,'" cannot be saved in "').concat(n,'" layer'),{graphic:r}))}}},{key:"_normalizeObjectIds",value:function(e,t){var r,n=t.name,a=Object(B.a)(n,e)+1,i=new Set,l=o(e);try{for(l.s();!(r=l.n()).done;){var c=r.value;c.attributes||(c.attributes={});var u=c.attributes;(null==u[n]||i.has(u[n]))&&(u[n]=a++),i.add(u[n])}}catch(y){l.e(y)}finally{l.f()}}}]),m}(Object(G.a)(Object(A.a)(Object(M.a)(Object(F.a)(Object(R.a)(P.a))))));Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"capabilities",void 0),Object(c.a)([Object(v.a)(["portal-item","web-map"],"capabilities",["layers"])],X.prototype,"readCapabilities",null),Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"featureCollections",void 0),Object(c.a)([Object(v.a)(["web-map","portal-item"],"featureCollections",["layers"])],X.prototype,"readFeatureCollections",null),Object(c.a)([Object(m.b)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],X.prototype,"featureCollectionJSON",void 0),Object(c.a)([Object(v.a)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],X.prototype,"readLegacyfeatureCollectionJSON",null),Object(c.a)([Object(m.b)({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],X.prototype,"featureCollectionType",void 0),Object(c.a)([Object(m.b)({json:{write:!1}})],X.prototype,"fullExtent",void 0),Object(c.a)([Object(v.a)(["web-map","portal-item"],"fullExtent",["layers"])],X.prototype,"readFullExtent",null),Object(c.a)([Object(m.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy:function(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],X.prototype,"legendEnabled",void 0),Object(c.a)([Object(m.b)({type:["show","hide"]})],X.prototype,"listMode",void 0),Object(c.a)([Object(m.b)({type:Number,nonNullable:!0,json:{write:!1}})],X.prototype,"minScale",void 0),Object(c.a)([Object(v.a)(["web-map","portal-item"],"minScale",["layers"])],X.prototype,"readMinScale",null),Object(c.a)([Object(m.b)({type:Number,nonNullable:!0,json:{write:!1}})],X.prototype,"maxScale",void 0),Object(c.a)([Object(v.a)(["web-map","portal-item"],"maxScale",["layers"])],X.prototype,"readMaxScale",null),Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"multipointLayer",null),Object(c.a)([Object(m.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],X.prototype,"operationalLayerType",void 0),Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"pointLayer",null),Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"polygonLayer",null),Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"polylineLayer",null),Object(c.a)([Object(m.b)({type:N.a})],X.prototype,"spatialReference",void 0),Object(c.a)([Object(v.a)(["web-map","portal-item"],"spatialReference",["layers"])],X.prototype,"readSpatialReference",null),Object(c.a)([Object(m.b)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],X.prototype,"sublayers",void 0),Object(c.a)([Object(v.a)("web-map","sublayers",["layers"])],X.prototype,"readSublayers",null),Object(c.a)([Object(h.a)("web-map","sublayers")],X.prototype,"writeSublayers",null),Object(c.a)([Object(m.b)({readOnly:!0})],X.prototype,"textLayer",null),Object(c.a)([Object(m.b)()],X.prototype,"title",void 0),Object(c.a)([Object(m.b)({readOnly:!0,json:{read:!1}})],X.prototype,"type",void 0),X=Object(c.a)([Object(g.a)("esri.layers.MapNotesLayer")],X),r.default=X}}])}();