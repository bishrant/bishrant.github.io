(function(){var e={"esri/layers/StreamLayer":"QiYT","esri/layers/support/PurgeOptions":"X9V+"},r=this||window,t=r.webpackJsonp=r.webpackJsonp||[];t.registerAbsMids?t.registerAbsMids(e):(t.absMidsWaiting=t.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{QiYT:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t("zOht"),t("TMur"),t("ifLZ"),t("OXG3"),t("zp6E"),t("+AWJ"),t("ma1f"),t("J3YA"),t("ImIS"),t("qsST"),t("LxLY"),t("EUqE"),t("qMld"),t("Vx27"),t("1dvD"),t("dHMY"),t("0RER"),t("2fnV"),t("Pnm5"),t("FEX1"),t("QJ8R"),t("WaJo"),t("OXmT"),t("c/mu"),t("EtsK"),t("Zb3b"),t("KQcO"),t("I90O"),t("k7g7"),t("k7g7"),t("5WBt"),t("UN5d"),t("X9V+"),t("hz/Y"),t("PhdM"),t("begh"),t("5ldw"),t("IpeC")],void 0===(i=(function(e,r,t,o,i,n,p,a,d,l,s,y,u,c,f,m,_,g,b,v,h,w,S,I,R,T,O,x,F,j,P,L,E,D,J,k,N,M,W,A){"use strict";var G=y.getLogger("esri.layers.StreamLayer"),V=new s.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),U=function(e){function r(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var i=e.apply(this,r)||this;return i.copyright=null,i.definitionExpression=null,i.displayField=null,i.elevationInfo=null,i.featureReduction=null,i.fields=null,i.geometryDefinition=null,i.geometryType=null,i.labelsVisible=!0,i.labelingInfo=null,i.legendEnabled=!0,i.maxReconnectionAttempts=0,i.maxReconnectionInterval=20,i.objectIdField=null,i.operationalLayerType="ArcGISStreamLayer",i.popupEnabled=!0,i.popupTemplate=null,i.purgeOptions=new J,i.screenSizePerspectiveEnabled=!0,i.sourceJSON=null,i.spatialReference=o.SpatialReference.WGS84,i.type="stream",i.url=null,i.webSocketUrl=null,i}return t.__extends(r,e),r.prototype.normalizeCtorArgs=function(e,r){return"string"==typeof e?t.__assign({url:e},r):e},r.prototype.load=function(e){var r=this;"WebSocket"in l||f.reject(new d("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."));var t=u.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service"]},e).catch((function(e){return e})).then((function(){return r._fetchService(t)}))),f.resolve(this)},Object.defineProperty(r.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!1,configurable:!0}),r.prototype.readFeatureReduction=function(e,r){return x.read(e,r)},r.prototype.writeWebSceneFeatureReduction=function(e,r,t,o){x.writeTarget(e,r,"layerDefinition.featureReduction",o)},Object.defineProperty(r.prototype,"fieldsIndex",{get:function(){return new j(this.fields)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderer",{set:function(e){P.fixRendererFields(e,this.fields),this._set("renderer",e)},enumerable:!1,configurable:!0}),r.prototype.readRenderer=function(e,r,t){var o=(r=r.layerDefinition||r).drawingInfo&&r.drawingInfo.renderer||void 0;if(o){var i=k.read(o,r,t)||void 0;return i||G.error("Failed to create renderer",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:t}),i}if(r.defaultSymbol)return r.types&&r.types.length?new n.UniqueValueRenderer({defaultSymbol:z(r.defaultSymbol,r,t),field:r.typeIdField,uniqueValueInfos:r.types.map((function(e){return{id:e.id,symbol:z(e.symbol,e,t)}}))}):new n.SimpleRenderer({symbol:z(r.defaultSymbol,r,t)})},r.prototype.writeRenderer=function(e,r,t,o){k.write(e,r,t,o)},r.prototype.writeWebSceneRenderer=function(e,r,t,o){k.write(e,r,"layerDefinition.drawingInfo.renderer",o)},r.prototype.createPopupTemplate=function(e){return M.createPopupTemplate(this,e)},r.prototype.createQuery=function(){var e=new A;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e},r.prototype.getFieldDomain=function(e,r){if(!this.fields)return null;var t=null;return this.fields.some((function(r){return r.name===e&&(t=r.domain),!!t})),t},r.prototype.getField=function(e){return this.fieldsIndex.get(e)},r.prototype._fetchService=function(e){var r,o;return t.__awaiter(this,void 0,void 0,(function(){var i;return t.__generator(this,(function(n){switch(n.label){case 0:return this.webSocketUrl?[3,3]:this.sourceJSON?[3,2]:[4,p(this.parsedUrl.path,{query:t.__assign({f:"json"},this.parsedUrl.query),responseType:"json",signal:e})];case 1:i=n.sent().data,this.sourceJSON=i,n.label=2;case 2:return[3,4];case 3:if(!(null===(r=this.timeInfo)||void 0===r?void 0:r.trackIdField))throw new d("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!this.objectIdField)throw new d("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");if(!this.fields)throw new d("stream-layer:missing-metadata","The stream layer fields must be specified.");if(!this.geometryType)throw new d("stream-layer:missing-metadata","The stream layer geometryType must be specified.");this.url=this.webSocketUrl,n.label=4;case 4:return this.sourceJSON=t.__assign(t.__assign({},null!==(o=this.sourceJSON)&&void 0!==o?o:{}),{objectIdField:"__esri_stream_id__"}),this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),L.fixRendererFields(this.renderer,this.fields),L.fixTimeInfoFields(this.timeInfo,this.fields),[2,N.loadStyleRenderer(this,{origin:"service"})]}}))}))},t.__decorate([m.property({type:String})],r.prototype,"copyright",void 0),t.__decorate([m.property({readOnly:!0,dependsOn:["fields","title"]})],r.prototype,"defaultPopupTemplate",null),t.__decorate([m.property({type:String})],r.prototype,"definitionExpression",void 0),t.__decorate([m.property({type:String})],r.prototype,"displayField",void 0),t.__decorate([m.property({type:W})],r.prototype,"elevationInfo",void 0),t.__decorate([m.reader("featureReduction",["layerDefinition.featureReduction"])],r.prototype,"readFeatureReduction",null),t.__decorate([m.writer("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:x.webSceneFeatureReductionTypes}})],r.prototype,"writeWebSceneFeatureReduction",null),t.__decorate([m.property({type:[F]})],r.prototype,"fields",void 0),t.__decorate([m.property({readOnly:!0,dependsOn:["fields"]})],r.prototype,"fieldsIndex",null),t.__decorate([m.property({type:o.Extent})],r.prototype,"geometryDefinition",void 0),t.__decorate([m.property({type:["point","polygon","polyline","multipoint"],json:{read:{reader:V.read}}})],r.prototype,"geometryType",void 0),t.__decorate([m.property(O.labelsVisible)],r.prototype,"labelsVisible",void 0),t.__decorate([m.property({type:[E],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:D.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],r.prototype,"labelingInfo",void 0),t.__decorate([m.property(O.legendEnabled)],r.prototype,"legendEnabled",void 0),t.__decorate([m.property({type:["show","hide"]})],r.prototype,"listMode",void 0),t.__decorate([m.property({type:_.Integer})],r.prototype,"maxReconnectionAttempts",void 0),t.__decorate([m.property({type:_.Integer})],r.prototype,"maxReconnectionInterval",void 0),t.__decorate([m.property({type:String})],r.prototype,"objectIdField",void 0),t.__decorate([m.property({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],r.prototype,"operationalLayerType",void 0),t.__decorate([m.property(O.popupEnabled)],r.prototype,"popupEnabled",void 0),t.__decorate([m.property({type:i,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],r.prototype,"popupTemplate",void 0),t.__decorate([m.property({type:J})],r.prototype,"purgeOptions",void 0),t.__decorate([m.property({types:n.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],r.prototype,"renderer",null),t.__decorate([m.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),m.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],r.prototype,"readRenderer",null),t.__decorate([m.writer("renderer")],r.prototype,"writeRenderer",null),t.__decorate([m.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:n.webSceneRendererTypes}})],r.prototype,"writeWebSceneRenderer",null),t.__decorate([m.property(O.screenSizePerspectiveEnabled)],r.prototype,"screenSizePerspectiveEnabled",void 0),t.__decorate([m.property({type:o.SpatialReference,json:{origins:{service:{read:{source:"spatialReference"}}}}})],r.prototype,"spatialReference",void 0),t.__decorate([m.property({json:{read:!1}})],r.prototype,"type",void 0),t.__decorate([m.property(O.url)],r.prototype,"url",void 0),t.__decorate([m.property({type:String})],r.prototype,"webSocketUrl",void 0),t.__decorate([m.subclass("esri.layers.StreamLayer")],r)}(h.BlendLayer(T.TemporalLayer(R.ScaleRangeLayer(I.RefreshableLayer(v.ArcGISService(w.OperationalLayer(S.PortalLayer(c.MultiOriginJSONMixin(b))))))))),z=g.createTypeReader({types:a.symbolTypesRenderer});return U}).apply(null,o))||(e.exports=i)},"X9V+":function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t("zOht"),t("ycL1"),t("Vx27")],void 0===(i=(function(e,r,t,o,i){"use strict";return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.age=null,r.ageReceived=null,r.displayCount=null,r.maxObservations=1,r}var o;return t.__extends(r,e),o=r,r.prototype.clone=function(){return new o({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})},t.__decorate([i.property({type:Number,json:{write:!0}})],r.prototype,"age",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],r.prototype,"ageReceived",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],r.prototype,"displayCount",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],r.prototype,"maxObservations",void 0),o=t.__decorate([i.subclass("esri.layers.support.PurgeOptions")],r)}(o.JSONSupport)}).apply(null,o))||(e.exports=i)}}]);