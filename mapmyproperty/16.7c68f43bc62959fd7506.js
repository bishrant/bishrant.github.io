(function(){var e={"arcgis-js-api/symbols/cim/effects/CIMEffectHelper":"0zc9","arcgis-js-api/symbols/cim/placements/CIMMarkerPlacementHelper":"3KXq","arcgis-js-api/views/2d/engine/webgl/util/Writer":"3vQA","arcgis-js-api/symbols/cim/cimAnalyzer":"4DEr","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":"65my","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":"8rHD","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":"AKDC","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":"BU48","arcgis-js-api/views/2d/engine/webgl/mesh/templates/segmentUtils":"Bp7l","arcgis-js-api/views/2d/engine/webgl/util/Matcher":"CX95","arcgis-js-api/symbols/cim/ExpandedCIM":"DWZn","arcgis-js-api/views/2d/engine/webgl/util/Reader":"Ed/z","arcgis-js-api/views/2d/engine/webgl/mesh/VertexVector":"FDNA","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":"Fo2y","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":"Hcrl","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":"IWfl","arcgis-js-api/views/2d/engine/webgl/util/Lock":"KAqe","esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":"LCdb","arcgis-js-api/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":"LCdb","esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":"MGRT","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":"MGRT","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":"MzWl","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":"O6Ih","arcgis-js-api/views/2d/engine/webgl/util/Result":"PlK1","arcgis-js-api/views/2d/arcade/callExpressionWithFeature":"TQDP","esri/symbols/cim/utils":"UUqC","arcgis-js-api/symbols/cim/utils":"UUqC","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":"ZOLT","arcgis-js-api/symbols/cim/cimSymbolUtils":"aqXi","arcgis-js-api/views/2d/engine/webgl/WGLDisplayObject":"azm3","esri/views/2d/engine/webgl/mesh/factories/matcherUtils":"bLBh","arcgis-js-api/views/2d/engine/webgl/mesh/factories/matcherUtils":"bLBh","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":"bePc","arcgis-js-api/views/2d/engine/webgl/mesh/MeshData":"cF6f","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":"cjzh","arcgis-js-api/views/2d/engine/webgl/collisions/Metric":"fVTS","arcgis-js-api/views/2d/engine/webgl/util/serializationUtils":"flWe","arcgis-js-api/views/2d/engine/webgl/WGLDisplayRecord":"hNI9","arcgis-js-api/views/2d/engine/webgl/mesh/bufcut":"ivPt","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":"kNAO","arcgis-js-api/core/libs/libtess/libtess":"lnyn","arcgis-js-api/views/2d/engine/webgl/mesh/templates/templateUtils":"nbTX","arcgis-js-api/symbols/cim/SDFHelper":"pJp3","arcgis-js-api/views/2d/engine/webgl/mesh/VertexBuffer":"ph8t","esri/views/2d/layers/features/textUtils":"rAGl","arcgis-js-api/views/2d/layers/features/textUtils":"rAGl","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":"t1uL","arcgis-js-api/views/2d/engine/webgl/mesh/Tesselator":"v3M4","arcgis-js-api/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":"yVlQ","arcgis-js-api/views/2d/engine/webgl/MeshData":"yai7"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"0zc9":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("hf/7"),r("++A9"),r("AKcB")],void 0===(n=(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CIMEffectHelper=void 0;var o=function(){function e(){}return e.executeEffects=function(e,t){for(var o=r.cloneAndDecodeGeometry(t),s=new i.SimpleGeometryCursor(o),a=0,l=e;a<l.length;a++){var u=l[a],c=n.getEffectOperator(u);c&&(s=c.execute(s,u,96/72))}return s},e.next=function(e){var t=e.next();return r.deltaEncodeGeometry(t),t},e}();t.CIMEffectHelper=o}).apply(null,i))||(e.exports=n)},"3KXq":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("hf/7"),r("AKcB")],void 0===(n=(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CIMMarkerPlacementHelper=void 0;var n=function(){function e(){}return e.getPlacement=function(e,t,n){var o=i.getPlacementOperator(t);if(!o)return null;var s=r.cloneAndDecodeGeometry(e);return o.execute(s,t,n)},e}();t.CIMMarkerPlacementHelper=n}).apply(null,i))||(e.exports=n)},"3vQA":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._pos=0;var r=t?this._roundToNearest(t,e.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r),this._buffer=new e(this._array),this._ctor=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._pos},enumerable:!1,configurable:!0}),e.prototype._roundToNearest=function(e,t){var r=Math.round(e);return r+(t-r%t)},e.prototype._ensureSize=function(e){if(this._pos+e>=this._buffer.length){var t=this._roundToNearest(1.5*(this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(t),i=new this._ctor(r);i.set(this._buffer,0),this._array=r,this._buffer=i}},e.prototype.writeF32=function(e){this._ensureSize(1);var t=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=e,this._pos++,t},e.prototype.push=function(e){this._ensureSize(1);var t=this._pos;return this._buffer[this._pos++]=e,t},e.prototype.writeFixed=function(e){this._buffer[this._pos++]=e},e.prototype.setValue=function(e,t){this._buffer[e]=t},e.prototype.getValue=function(e){return this._buffer[e]},e.prototype.incr=function(e){this._buffer[e]++},e.prototype.decr=function(e){this._buffer[e]--},e.prototype.writeRegion=function(e){this._ensureSize(e.length);var t=this._pos;return this._buffer.set(e,this._pos),this._pos+=e.length,t},e.prototype.buffer=function(){var e=this._array.slice(0,4*this._pos);return this.destroy(),e},e.prototype.toArray=function(){for(var e=this._array,t=[],r=0;r<e.byteLength/4;r++)t.push(e[r]);return t},e.prototype.seek=function(e){this._pos=e},e.prototype.destroy=function(){this._array=null,this._buffer=null},e}();t.default=r}).apply(null,i))||(e.exports=n)},"4DEr":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("QDcU"),r("qsST"),r("qMld"),r("jBNx"),r("nRUF"),r("sCbS"),r("Ahpp"),r("pJp3"),r("UUqC"),r("TQDP")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analyzeCIMResource=t.analyzeCIMSymbol=void 0;var p=n.getLogger("esri.symbols.cim.cimAnalyzer");function d(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function m(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function _(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function g(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function y(e,t,r,i){var n;e[t]?n=e[t]:e[t]=n={},n[r]=i}function v(e){var t=e.markerPlacement;return t&&t.angleToLine?1:0}function x(e,t,r,i,n){var o=e.primitiveName,s=h.fromCIMColor(e.color),l=a.numericHash(JSON.stringify(e)).toString();n.push({type:"fill",templateHash:l,materialHash:0===r.length?l:function(){return l},cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:k(o,t,"Color",i,s,D),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function b(e,t,r,i,n){var o=e.primitiveName,s=e.tintColor?h.fromCIMColor(e.tintColor):{r:255,g:255,b:255,a:1},l=a.numericHash(JSON.stringify(e)).toString(),u=a.numericHash(""+e.url+JSON.stringify(e.colorSubstitutions)).toString();n.push({type:"fill",templateHash:l,materialHash:0===r.length?u:function(){return u},cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:k(o,t,"TintColor",i,s,D),height:k(o,t,"Height",i,e.height),scaleX:k(o,t,"ScaleX",i,e.scaleX),angle:k(o,t,"Rotation",i,e.rotation),offsetX:k(o,t,"OffsetX",i,e.offsetX),offsetY:k(o,t,"OffsetY",i,e.offsetY)})}function M(e,t,r,i,n){var o=["Rotation","OffsetX","OffsetY"],s=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===o.indexOf(t.propertyName)})),l=e.primitiveName,u=a.numericHash(JSON.stringify(e)).toString(),c=a.numericHash(""+e.separation+JSON.stringify(e.lineSymbol)).toString();n.push({type:"fill",templateHash:u,materialHash:0===r.length?c:R(c,t,s,i),cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:k(l,t,"Separation",i,e.separation),scaleX:1,angle:k(l,t,"Rotation",i,e.rotation),offsetX:k(l,t,"OffsetX",i,e.offsetX),offsetY:k(l,t,"OffsetY",i,e.offsetY)})}function w(e,t,r,i,n){var o=a.numericHash(JSON.stringify(e)).toString();n.push({type:"fill",templateHash:o,materialHash:0===r.length?o:R(o,t,r,i),cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function S(e,t,r,i,n,o,s){var l=a.numericHash(JSON.stringify(e)).toString(),u=e.primitiveName,c=h.fromCIMColor(e.color),f=void 0!==e.width?e.width:4,p=d(e.capStyle),_=m(e.joinStyle),g=e.miterLimit;n.push({type:"line",templateHash:l,materialHash:0===r.length?l:function(){return l},cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:k(u,t,"Color",i,c,D),width:k(u,t,"Width",i,f),cap:k(u,t,"CapStyle",i,p),join:k(u,t,"JoinStyle",i,_),miterLimit:k(u,t,"MiterLimit",i,g),referenceWidth:s,zOrder:G(e.name),isDashed:!1})}function L(e,t,r,i,n,o,s){var l=a.numericHash(""+e.url+JSON.stringify(e.colorSubstitutions)).toString(),u=e.primitiveName,c=h.fromCIMColor(e.tintColor),f=void 0!==e.width?e.width:4,p=d(e.capStyle),_=m(e.joinStyle),g=e.miterLimit,y=a.numericHash(JSON.stringify(e)).toString();n.push({type:"line",templateHash:y,materialHash:0===r.length?l:function(){return l},cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:k(u,t,"TintColor",i,c,D),width:k(u,t,"Width",i,f),cap:k(u,t,"CapStyle",i,p),join:k(u,t,"JoinStyle",i,_),miterLimit:k(u,t,"MiterLimit",i,g),referenceWidth:s,zOrder:G(e.name),isDashed:!1})}function T(e,t,r,i,n,o,s){var l=e.primitiveName,u=void 0!==e.width?e.width:4,c=d(e.capStyle),h=m(e.joinStyle),f=e.miterLimit,p=a.numericHash(JSON.stringify(e)).toString();n.push({type:"line",templateHash:p,materialHash:0===r.length?p:R(p,t,r,i),cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:k(l,t,"Width",i,u),cap:k(l,t,"CapStyle",i,c),join:k(l,t,"JoinStyle",i,h),miterLimit:k(l,t,"MiterLimit",i,f),referenceWidth:s,zOrder:G(e.name),isDashed:!1})}function E(e,t,r,i,n){var o=e.markerPlacement;if(!o||"CIMMarkerPlacementInsidePolygon"!==o.type)return!1;var s=o,l=["Rotation","OffsetX","OffsetY"],u=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===l.indexOf(t.propertyName)})),c=a.numericHash(JSON.stringify(e)).toString();return n.push({type:"fill",templateHash:c,materialHash:0===r.length?c:R(c,t,u,i),cim:e,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:k(s.primitiveName,t,"StepY",i,s.stepY),scaleX:1,angle:k(s.primitiveName,t,"GridAngle",i,s.gridAngle),offsetX:k(s.primitiveName,t,"OffsetX",i,s.offsetX),offsetY:k(s.primitiveName,t,"OffsetY",i,s.offsetY)}),!0}function I(e,t,r,i,n,o,s){for(var l=e.primitiveName,u=e.size,c=e.scaleX,f=e.rotation,p=e.offsetX,d=e.offsetY,m=h.fromCIMColor(e.tintColor),_=a.numericHash(""+e.url+JSON.stringify(e.colorSubstitutions)).toString(),g=!1,y="",v=0,x=r;v<x.length;v++){var b=x[v];b.primitiveName===l&&(void 0!==b.value?y+="-"+b.primitiveName+"-"+b.propertyName+"-"+JSON.stringify(b.value):b.valueExpressionInfo&&(g=!0))}n.push({type:"marker",templateHash:a.numericHash(JSON.stringify(e)+y).toString(),materialHash:g?function(){return _}:_,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:o,size:k(l,t,"Size",i,u),scaleX:k(l,t,"ScaleX",i,c),rotation:k(l,t,"Rotation",i,f),offsetX:k(l,t,"OffsetX",i,p),offsetY:k(l,t,"OffsetY",i,d),color:k(l,t,"TintColor",i,m,D),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:1,markerPlacement:e.markerPlacement})}function C(e,t,r,i,n,o,s,a){var l=e.markerGraphics;if(l){var u=0;if(e.scaleSymbolsProportionally){var c=e.frame;c&&(u=c.ymax-c.ymin)}for(var h=0,f=l;h<f.length;h++){var p=f[h];if(p){var d=p.symbol;if(!d)continue;switch(d.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":P(e,p,r,t,i,n,o,s,u,a);break;case"CIMTextSymbol":O(e,p,t,r,i,n,o,s,u)}}}}}function O(e,t,i,n,o,s,l,c,f){u.OverrideHelper.findApplicableOverrides(t,n,[]);var p=t.geometry;if("x"in p&&"y"in p){var d,m=t.symbol,y=(d=m).underline?"underline":d.strikethrough?"line-through":"none",v=function(e){var t="normal",r="normal";if(e){var i=e.toLowerCase();-1!==i.indexOf("italic")?t="italic":-1!==i.indexOf("oblique")&&(t="oblique"),-1!==i.indexOf("bold")?r="bold":-1!==i.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}(m.fontStyleName);m.font=r.__assign({family:m.fontFamilyName,decoration:y},v);var x=e.frame,b=e.size/f,M=e.primitiveName,w=(m.height||0)*b,S=m.angle||0,L=((m.offsetX||0)+(p.x-.5*(x.xmin+x.xmax)))*b,T=((m.offsetY||0)+(p.y-.5*(x.ymin+x.ymax)))*b,E=h.fromCIMColor(u.CIMSymbolHelper.getFillColor(m)),I=h.fromCIMColor(u.CIMSymbolHelper.getStrokeColor(m)),C=u.CIMSymbolHelper.getStrokeWidth(m);C||(I=h.fromCIMColor(u.CIMSymbolHelper.getFillColor(m.haloSymbol)),C=m.haloSize*b);for(var O="",P=0,N=n;P<N.length;P++){var G=N[P];G.primitiveName===M&&void 0!==G.value&&(O+="-"+G.primitiveName+"-"+G.propertyName+"-"+JSON.stringify(G.value))}var D=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),R=a.numericHash(JSON.stringify(t)+D+O).toString();s.push({type:"text",templateHash:R,materialHash:function(){return a.numericHash(JSON.stringify(m.font)).toString()},cim:m,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:l,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:m.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:k(M,i,"Size",o,w),angle:k(M,i,"Rotation",o,S),offsetX:k(M,i,"OffsetX",o,L),offsetY:k(M,i,"OffsetY",o,T),horizontalAlignment:_(m.horizontalAlignment),verticalAlignment:g(m.verticalAlignment),text:k(t.primitiveName,i,"TextString",o,t.textString,h._adjustTextCase,m.textCase),color:E,outlineColor:I,outlineSize:C,referenceSize:c,sizeRatio:1,markerPlacement:e.markerPlacement})}}function P(e,t,i,n,o,s,l,f,p,d){var m=t.geometry;if(m){var _=t.symbol.symbolLayers;if(_)if(d)N(e,t,n,i,o,s,l,f,p);else for(var g=_.length,y=function(){var d=_[g];if(!d||!1===d.enable)return"continue";switch(d.type){case"CIMSolidFill":case"CIMSolidStroke":var y=c.getExtent(m);if(!y)return"continue";var v=c.getSDFMetrics(y,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),x=v[0],b=v[1],M=v[2],w="CIMSolidFill"===d.type,S={type:"sdf",geom:m,asFill:w},L=e.primitiveName,T=e.size,E=e.rotation||0,I=e.offsetX,C=e.offsetY,O=d.primitiveName,P=h.fromCIMColor(w?u.CIMSymbolHelper.getFillColor(d):u.CIMSymbolHelper.getStrokeColor(d)),G=w?{r:0,g:0,b:0,a:0}:h.fromCIMColor(u.CIMSymbolHelper.getStrokeColor(d)),R=u.CIMSymbolHelper.getStrokeWidth(d);if(!w&&!R)break;for(var A=!1,F="",z=0,U=i;z<U.length;z++){var B=U[z];B.primitiveName!==O&&B.primitiveName!==L||(void 0!==B.value?F+="-"+B.primitiveName+"-"+B.propertyName+"-"+JSON.stringify(B.value):B.valueExpressionInfo&&(A=!0))}var j=JSON.stringify(r.__assign(r.__assign({},e),{markerGraphics:null})),V=a.numericHash(JSON.stringify(S)).toString(),H={type:"marker",templateHash:a.numericHash(JSON.stringify(t)+JSON.stringify(d)+j+F).toString(),materialHash:A?function(){return V}:V,cim:S,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:b,y:M},isAbsoluteAnchorPoint:!1,size:k(e.primitiveName,n,"Size",o,T),rotation:k(e.primitiveName,n,"Rotation",o,E),offsetX:k(e.primitiveName,n,"OffsetX",o,I),offsetY:k(e.primitiveName,n,"OffsetY",o,C),scaleX:1,frameHeight:p,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:x,color:k(O,n,"Color",o,P,D),outlineColor:k(O,n,"Color",o,G,D),outlineWidth:k(O,n,"Width",o,R),markerPlacement:e.markerPlacement};s.push(H);break;default:N(e,t,n,i,o,s,l,f,p)}};g--;)y()}}function N(e,t,r,i,n,o,l,c,h){var f,p=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(e,t),d=["Rotation","OffsetX","OffsetY"];f=i.filter((function(t){return t.primitiveName!==e.primitiveName||-1===d.indexOf(t.propertyName)}));for(var m="",_=0,g=i;_<g.length;_++){var y=g[_];void 0!==y.value&&(m+="-"+y.primitiveName+"-"+y.propertyName+"-"+JSON.stringify(y.value))}var v=u.CIMSymbolHelper.getTextureAnchor(p),x=v[0],b=v[1],M=v[2],w=e.primitiveName,S=e.rotation||0,L=e.offsetX||0,T=e.offsetY||0,E=a.numericHash(JSON.stringify(p)+m).toString(),I={type:"marker",templateHash:E,materialHash:0===f.length?E:R(E,r,f,n),cim:p,materialOverrides:f,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:x,y:b},isAbsoluteAnchorPoint:!1,size:e.size,rotation:k(w,r,"Rotation",n,S),offsetX:k(w,r,"OffsetX",n,L),offsetY:k(w,r,"OffsetY",n,T),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:c,sizeRatio:M/s.pt2px(e.size),markerPlacement:e.markerPlacement};o.push(I)}function G(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function D(e){if(!e||0===e.length)return null;var t=new i(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function k(e,t,r,i,n,o,s){var a=t[e];if(a){var u=a[r];if("string"==typeof u||"number"==typeof u||u instanceof Array)return o?o.call(null,u,s):u;if(null!=u&&u instanceof l.default)return function(e,t,r){var a=f.default(u,e,{$view:r},i.geometryType,t);return null!==a&&o&&(a=o.call(null,a,s)),null!==a?a:n}}return n}function R(e,t,r,i){for(var n=function(e){if(e.valueExpressionInfo){var r=t[e.primitiveName]&&t[e.primitiveName][e.propertyName];r instanceof l.default&&(e.fn=function(e,t,n){return f.default(r,e,{$view:n},i.geometryType,t)})}},o=0,s=r;o<s.length;o++)n(s[o]);return function(t,i,n){for(var o=0,s=r;o<s.length;o++){var l=s[o];l.fn&&(l.value=l.fn(t,i,n))}return a.numericHash(e+u.OverrideHelper.buildOverrideKey(r)).toString()}}t.analyzeCIMSymbol=function(e,t,i,n){return r.__awaiter(this,void 0,void 0,(function(){var s,a,c,h,f,d,m,_;return r.__generator(this,(function(r){switch(r.label){case 0:if(s=i||[],!e)return[2,s];if(h={},"CIMSymbolReference"!==e.type)return[3,3];if(a=e.symbol,!(c=e.primitiveOverrides))return[3,2];for(f=[],d=function(e){var r=e.valueExpressionInfo;if(r&&t){var i=l.createRendererExpression(r.expression,t.spatialReference,t.fields).then((function(t){t&&y(h,e.primitiveName,e.propertyName,t)}));f.push(i)}else null!=e.value&&y(h,e.primitiveName,e.propertyName,e.value)},m=0,_=c;m<_.length;m++)d(_[m]);return[4,o.all(f)];case 1:r.sent(),r.label=2;case 2:return[3,4];case 3:return p.error("Expect cim type to be 'CIMSymbolReference'"),[2,s];case 4:switch(a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":!function(e,t,r,i,n,o){if(e){var s,a=e.symbolLayers;if(a){var l=u.CIMSymbolHelper.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(s=1);for(var c=a.length;c--;){var h=a[c];if(h&&!1!==h.enable){var f=[];switch(u.OverrideHelper.findApplicableOverrides(h,t,f),h.type){case"CIMSolidFill":x(h,r,f,i,n);break;case"CIMPictureFill":b(h,r,f,i,n);break;case"CIMHatchFill":M(h,r,f,i,n);break;case"CIMGradientFill":w(h,r,f,i,n);break;case"CIMSolidStroke":S(h,r,f,i,n,"CIMPolygonSymbol"===e.type,l);break;case"CIMPictureStroke":L(h,r,f,i,n,"CIMPolygonSymbol"===e.type,l);break;case"CIMGradientStroke":T(h,r,f,i,n,"CIMPolygonSymbol"===e.type,l);break;case"CIMCharacterMarker":if(E(h,r,f,i,n))break;break;case"CIMPictureMarker":if(E(h,r,f,i,n))break;"CIMLineSymbol"===e.type&&(s=v(h)),I(h,r,f,i,n,s,l);break;case"CIMVectorMarker":if(E(h,r,f,i,n))break;"CIMLineSymbol"===e.type&&(s=v(h)),C(h,r,f,i,n,s,l,o);break;default:p.error("Cannot analyze CIM layer",h.type)}}}}}}(a,c,h,t,s,n)}return[2,s]}}))}))},t.analyzeCIMResource=function(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return u.OverrideHelper.applyOverrides(r,t),r}}).apply(null,i))||(e.exports=n)},"65my":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("qsST"),r("jBNx"),r("4F/P"),r("tI6k"),r("Dos2"),r("apbF"),r("m87x"),r("8Lwu"),r("O6Ih"),r("MzWl")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=i.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),d=function(e){function t(t,r,i,n,o,s,a,l,h,f,p,d,m,_,g,y){var v=e.call(this)||this,x=u.LineMaterialKey.load(t);return r&&(x.sdf=r.sdf,x.pattern=!0,x.textureBinding=r.textureBinding),v._capType=n,v._joinType=o,v._miterLimitCosine=c.getLimitCosine(s),v.tessellationProperties._fillColor=a,v.tessellationProperties._tl=l,v.tessellationProperties._br=h,v._hasPattern=f,v._isDashed=p,v._joinOnUTurn=g,v._isColorLocked=d,v._zOrder=_,v.effects=y,v._materialKey=x.data,v.tessellationProperties._bitset=d?1:0,v.tessellationProperties._halfWidth=.5*i,v.tessellationProperties._halfReferenceWidth=.5*m,v._initializeTessellator(!1),v}return r.__extends(t,e),t.fromCIMLine=function(e,r,i){var l=e.color,u=e.scaleFactor||1,c=e.isDashed,h=e.cap;c&&1===h&&(h=2);var f=e.join,p=n.pt2px(e.width)*u,d=n.pt2px(e.referenceWidth),m=n.pt2px(e.miterLimit),_=l&&o.premultiplyAlphaRGBA(l)||0;if(!r)return new t(e.materialKey,r,p,h,f,m,_,0,0,!1,c,e.colorLocked,d,e.zOrder,i,e.effects);var g=r.rect,y=g.x+s.SPRITE_PADDING,v=g.y+s.SPRITE_PADDING,x=y+r.width,b=v+r.height,M=a.i1616to32(y,v),w=a.i1616to32(x,b);return new t(e.materialKey,r,p,h,f,m,_,M,w,!0,c,e.colorLocked,d,e.zOrder,i,e.effects)},t.fromSimpleLine=function(e,r,i){var u=e.color,c="esriSLSSolid"!==e.style&&"esriSLSNull"!==e.style,h=l.getCapType(e.cap||"round",c),f=l.getJoinType(e.join||"round"),p=u&&"esriSLSNull"!==e.style&&o.premultiplyAlphaRGBAArray(u)||0;"esriSLSNull"===e.style&&(p=0);var d=n.pt2px(e.width),m=e.miterLimit;if(!r)return new t(e.materialKey,r,d,h,f,m,p,0,0,!1,c,!1,d,0,i,null);var _=r.rect,g=_.x+s.SPRITE_PADDING,y=_.y+s.SPRITE_PADDING,v=g+r.width,x=y+r.height,b=a.i1616to32(g,y),M=a.i1616to32(v,x);return new t(e.materialKey,r,d,h,f,m,p,b,M,!0,c,!1,d,0,i,null)},t.fromPictureLineSymbol=function(e,t,r,i){return p.error("PictureLineSymbol support does not exist!"),null},t}(h.default(f.default));t.default=d}).apply(null,i))||(e.exports=n)},"8rHD":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("jBNx"),r("B+Jm"),r("4F/P"),r("m87x"),r("8Lwu"),r("IWfl"),r("yVlQ"),r("rAGl")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){function t(t){var r=e.call(this,t)||this;r._horizontalAlignment="center",r._verticalAlignment="middle",r._textToGlyphs=new Map;var n,l,u,c=t.scaleFactor||1;r._cimTextLayer=t,a.isFunction(t.color)?r._dynamicPropertyMap.set("_color",(function(e,r,i){return o.premultiplyAlphaRGBA(t.color(e,r,i))})):r._color=o.premultiplyAlphaRGBA(t.color),a.isFunction(t.color)?r._dynamicPropertyMap.set("_haloColor",(function(e,r,i){return o.premultiplyAlphaRGBA(t.outlineColor(e,r,i))})):r._haloColor=o.premultiplyAlphaRGBA(t.outlineColor),a.isFunction(t.size)||(n=Math.min(Math.round(i.pt2px(t.size*t.sizeRatio)),127)),r._dynamicPropertyMap.set("_size",(function(e,r,o){return a.isFunction(t.size)?Math.min(Math.round(i.pt2px(t.size(e,r,o)*t.sizeRatio)),127):n})),a.isFunction(t.outlineSize)?r._dynamicPropertyMap.set("_haloSize",(function(e,r,n){return Math.min(Math.floor(5*i.pt2px(t.outlineSize(e,r,n)*t.sizeRatio)),127)})):r._haloSize=Math.min(Math.floor(5*i.pt2px(t.outlineSize*t.sizeRatio)),127),a.isFunction(t.offsetX)||(l=Math.round(i.pt2px(t.offsetX*t.sizeRatio))),r._dynamicPropertyMap.set("_xOffset",(function(e,r,n){return a.isFunction(t.offsetX)?Math.round(i.pt2px(t.offsetX(e,r,n)*t.sizeRatio)):l})),a.isFunction(t.offsetY)||(u=Math.round(i.pt2px(t.offsetY*t.sizeRatio))),r._dynamicPropertyMap.set("_yOffset",(function(e,r,n){return a.isFunction(t.offsetY)?Math.round(i.pt2px(t.offsetY(e,r,n)*t.sizeRatio)):u})),a.isFunction(t.angle)?r._dynamicPropertyMap.set("_angle",t.angle):r._angle=t.angle,a.isFunction(t.horizontalAlignment)?r._dynamicPropertyMap.set("_horizontalAlignment",t.horizontalAlignment):r._horizontalAlignment=t.horizontalAlignment,a.isFunction(t.verticalAlignment)?r._dynamicPropertyMap.set("_verticalAlignment",t.verticalAlignment):r._verticalAlignment=t.verticalAlignment,r._scaleFactor=c,a.isFunction(t.text)?r._dynamicPropertyMap.set("_text",t.text):r._text=t.text;var h=Math.min(Math.round(i.pt2px(t.referenceSize*t.sizeRatio)),127);r._referenceSize=Math.round(Math.sqrt(256*h)),r._materialKey=t.materialKey;var f=s.TextMaterialKey.load(r._materialKey);return f.sdf=!0,r._bitset=(1===t.alignment?1:0)|(t.colorLocked?1:0)<<1,r._materialKey=f.data,r._decoration="none",r._lineHeight=1,r._lineWidth=512,r._textPlacement=t.markerPlacement,r.effects=t.effects,r._isCIM=!0,r}return r.__extends(t,e),t.fromCIMText=function(e){return new t(e)},t.prototype.analyze=function(e,t,i,n){return r.__awaiter(this,void 0,void 0,(function(){var o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return o=t.readLegacyFeature(),s=function(e,t,r,i){return"string"==typeof e.text?e.text:"function"==typeof e.text?e.text(t,r,i):""}(this._cimTextLayer,o,i,n),[4,e.getMosaicItem(this._cimTextLayer.cim,c.codepoints(s))];case 1:return a=r.sent(),this._textToGlyphs.set(s,a.glyphMosaicItems),[2,a]}}))}))},t.prototype.bindFeature=function(e,t,r){var i=this,o=e.readLegacyFeature();if(this._dynamicPropertyMap.forEach((function(e,n){i[n]=e(o,t,r)})),this._text&&0!==this._text.length){this._size*=this._scaleFactor,this._scale=this._size/24,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=n.getXAnchorDirection(this._horizontalAlignment||"center"),this._yAlignD=n.getYAnchorDirection(this._verticalAlignment||"baseline");var s=this._textToGlyphs.get(this._text);this.bindTextInfo(s,!1)}else this._shapingInfo=null},t}(l.default(u.default));t.default=h}).apply(null,i))||(e.exports=n)},AKDC:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("xoE+"),r("xoE+"),r("LxLY"),r("jBNx"),r("B+Jm"),r("4F/P"),r("tI6k"),r("JNkf"),r("Dos2"),r("fVTS"),r("m87x"),r("OfLC"),r("Bp7l"),r("t1uL")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f,p,d,m,_,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v,x,b=n.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),M=(v=function(e){var t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t},x=new Map,function(e){return x.has(e)||x.set(e,v(e)),x.get(e)}),w=function(e){return Math.floor(127*e+127)},S=function(e){return Math.floor(10*e)},L=function(e){return Math.round(e*(254/360))},T=function(e,t){return p.i1616to32(Math.round(8*e),Math.round(8*t))},E=function(e){function t(t,r,i,n){var s=e.call(this,t,i.font.size,i.haloSize||0,i.color&&c.premultiplyAlphaRGBAArray(i.color)||0,i.haloColor&&c.premultiplyAlphaRGBAArray(i.haloColor)||0,i.horizontalAlignment,i.verticalAlignment,_.isMapAligned(r.labelPlacement)?1:0,i.font.decoration,!1,i.angle||0,i.xoffset,i.yoffset,i.lineWidth,i.lineHeight,null,null)||this;s._outLineLabelAngle=0,s._refPlacementPadding=0,s._refPlacementDirX=0,s._refPlacementDirY=0,s._refOffsetX=0,s._refOffsetY=0,s.geometryType=f.WGLGeometryType.LABEL;var a=function(e,t){var r=!!e.minScale&&t.scaleToZoom(e.minScale)||0;return o.clamp(r,0,25.5)}(r,n),p=function(e,t){var r=!!e.maxScale&&t.scaleToZoom(e.maxScale)||255;return o.clamp(r,0,25.5)}(r,n),d=u.getAlignmentFromPlacement(r.labelPlacement),g=d[1];s._xAlignD=d[0],s._yAlignD=g,s._minZoom=a,s._maxZoom=p,s._refPlacementPadding=l.pt2px(i.haloSize)+h.TEXT_PLACEMENT_PADDING;var y=m.LabelMaterialKey.load(t);return y.sdf=!0,s._materialKey=y.data,s}return r.__extends(t,e),t.fromLabelClass=function(e,r){if("center-along"===e.labelPlacement){var i=e.symbol;i.xoffset=0,i.yoffset=0,i.angle=0,i.font.decoration="none"}return new t(e.materialKey,e,e.symbol,r)},Object.defineProperty(t.prototype,"_shapedBox",{get:function(){return a.unwrap(this._shapingInfo).bounds},enumerable:!1,configurable:!0}),t.prototype.bindReferenceTemplate=function(e){var t=u.getXDirection(this._xAlignD),r=u.getYDirection(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,a.isNone(e))this._refSymbolAndPlacementOffset=p.i8888to32(0,0,w(t),w(r));else{if("circle"===e.boundsType&&(t||r)){var i=Math.sqrt(t*t+r*r);t/=i,r/=i}var n=Math.max(e.height,e.width);this._refSymbolAndPlacementOffset=p.i8888to32(4*this._refPlacementPadding,n,w(t),w(r)),this._referenceSize=n,this._refPlacementDirX=t,this._refPlacementDirY=r,this._refOffsetX=e.xOffset,this._refOffsetY=e.yOffset}},t.prototype.writeMesh=function(e,t,r,n,o,s){if(!a.isNone(this._shapingInfo)){var l=new Array,u=this._shapingInfo,c="esriGeometryPolygon"===r.geometryType?r.readLegacyCentroid():r.readLegacyGeometry();if(c){switch(this.current={out:e,outVecs:t,outMetrics:l,inId:o,inShaping:u,zoomLevel:s},n){case"esriGeometryPolyline":this._placeLineLabels(c);break;case"esriGeometryPoint":case"esriGeometryPolygon":this._placePointLabels(c);break;default:void 0===(h="Geometry of type "+n+" is not supported")&&(h="mapview-labeling"),b.error(new i(h,"mapview-labeling"))}var h;e.writeMetrics(this.current.outMetrics)}}},t.prototype._isVisible=function(e,t){var r=S(this.current.zoomLevel);return S(e)<=r&&r<=S(t)},t.prototype._placePointLabels=function(e){var t=this.current;this._writeGlyphs(t.out,t.outVecs,t.inId,e,t.outMetrics)},t.prototype._placeLineLabels=function(e){for(var t=g.smoothPaths(e.paths,this.current.inShaping.bounds.width),r=this._placeSubdivGlyphs.bind(this),i=(this._shapedBox.width+128)/4,n=0,o=t;n<o.length;n++)g.pathDivide(o[n],i,r)},t.prototype._placeSubdivGlyphs=function(e,t,r,i){var n=M(t),o=this._shapedBox.width/4,a=Math.min(r,i-r),l=s.log2(a/(4+o/2)),u=0===t?l:Math.min(n,l),c=Math.max(this._minZoom,this.current.zoomLevel+2-u),h=this._shapedBox.width/2*Math.pow(2,this.current.zoomLevel-c);this.current.inShaping.isMultiline?0===t&&this._placeStraight(e,c):this._placeCurved(e,c,h)},t.prototype._placeStraight=function(e,t){var r=this.current;this._writeGlyphs(r.out,r.outVecs,r.inId,e,r.outMetrics,t)},t.prototype._placeCurved=function(e,t,r){var i={from:this.current.out.currentDisplayRecordCount(),count:-1},n=new d.default(this.current.inId,i,e.x,e.y,t),o=e.clone(),s=e.angle*(180/Math.PI)%360,a=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=L(s),this._placeFirst(o,n,t,1),this._placeBack(e,o,n,t,r,1),this._placeForward(e,o,n,t,r,1),this._outLineLabelAngle=L(a),this._placeFirst(o,n,t,0),this._placeBack(e,o,n,t,r,0),this._placeForward(e,o,n,t,r,0),n.range.count=this.current.out.currentDisplayRecordCount()-n.range.from,n.bounds&&this.current.outMetrics.push(n)},t.prototype._placeBack=function(e,t,r,i,n,o){for(var s=e.clone(),a=e.backwardLength+0;s.prev()&&!(a>=n);)this._placeOnSegment(s,t,r,a,i,-1,o),a+=s.length+0},t.prototype._placeForward=function(e,t,r,i,n,o){for(var s=e.clone(),a=e.remainingLength+0;s.next()&&!(a>=n);)this._placeOnSegment(s,t,r,a,i,1,o),a+=s.length+0},t.prototype._placeFirst=function(e,t,r,i){for(var n=this.current.inShaping,o=n.glyphs,a=this.current.zoomLevel,l=this.current,u=l.out,c=l.outVecs,h=l.inId,f=T(e.x,e.y),p=0,d=o;p<d.length;p++){var m=d[p],_=m.x>n.bounds.x?i:1-i,g=_*e.remainingLength+(1-_)*e.backwardLength,y=Math.abs(m.x+m.width/2-n.bounds.x),v=Math.max(0,a+s.log2(y/(g+0))),x=Math.max(r,v);m.maxZoom=25,m.angle=e.angle+(1-i)*Math.PI,m.minZoom=x,this._writeGlyph(u,c,m,h,f),i&&this._isVisible(m.minZoom,m.maxZoom)&&t.add(m.bounds,0,0)}},t.prototype._placeOnSegment=function(e,t,r,i,n,o,a){for(var l=this.current.inShaping.glyphs,u=this.current,c=u.out,h=u.outVecs,f=u.inId,p=this.current.inShaping,d=this.current.zoomLevel,m={x:e.x+i*-o*(e.dx/e.length),y:e.y+i*-o*(e.dy/e.length)},_=T(m.x,m.y),g=0,y=l;g<y.length;g++){var v=y[g],x=v.x>p.bounds.x?a:1-a;if(x&&1===o||!x&&-1===o){var b=Math.abs(v.x+v.width/2-p.bounds.x),M=Math.max(0,d+s.log2(b/i)-.1),w=Math.max(n,d+s.log2(b/(i+e.length+0)));0!==M&&(v.angle=e.angle+(1-a)*Math.PI,v.minZoom=w,v.maxZoom=M,this._writeGlyph(c,h,v,f,_),a&&this._isVisible(v.minZoom,v.maxZoom)&&r.add(v.bounds,e.x-t.x,e.y-t.y))}}},t.prototype._writeGlyphs=function(e,t,r,i,n,o){void 0===o&&(o=this._minZoom);var s=this._shapingInfo;if(!a.isNone(s)&&!(i.x<0||i.x>=512||i.y<0||i.y>=512)){for(var l=e.currentDisplayRecordCount(),u=T(i.x+this._refOffsetX,i.y-this._refOffsetY),c=new d.default(r,{from:l,count:-1},i.x+this._refOffsetX,i.y-this._refOffsetY,o),h=0,f=s.glyphs;h<f.length;h++){var p=f[h];p.minZoom=o,p.maxZoom=this._maxZoom,this._writeGlyph(e,t,p,r,u)}c.range.count=e.currentDisplayRecordCount()-c.range.from,c.bounds=s.boundsT;var _=m.LabelMaterialKey.load(this._materialKey);c.setPlacementOffset(_.vvSizeFieldStops||_.vvSizeMinMaxValue||_.vvSizeScaleStops||_.vvSizeUnitValue,this._referenceSize,this._refPlacementPadding,this._refPlacementDirX,this._refPlacementDirY),n.push(c)}},t.prototype._writeGlyph=function(e,t,r,i,n){var o=m.MaterialKeyBase.load(this._materialKey);o.textureBinding=r.textureBinding;var s=t.indexVector.length,a=t.getVector("geometry").vertexCount,l=this._writeIndices(t),u=this._writeVertex(t,i,n,r);e.writeDisplayRecord(this.geometryType,o.data,a,u,s,l)},t.prototype._writeVertexCommon=function(e,t,r,i){var n=this._color,o=this._haloColor,s=p.i8888to32(0,0,this._size,this._haloSize),a=Math.max(i.minZoom,this._minZoom),l=Math.min(i.maxZoom,this._maxZoom),u=p.i8888to32(S(a),S(l),this._outLineLabelAngle,0);e.push(r),e.push(t),e.push(n),e.push(o),e.push(s),e.push(this._refSymbolAndPlacementOffset),e.push(u)},t}(y.default);t.default=E}).apply(null,i))||(e.exports=n)},BU48:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("xoE+"),r("jBNx"),r("4F/P"),r("tI6k"),r("VY6u"),r("Dos2"),r("m87x"),r("kNAO"),r("MzWl")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e){function t(t,r,i,n,o,s,a,l,c){var h=e.call(this)||this;h.effects=c;var f=u.FillMaterialKey.load(t);return r&&(f.sdf=r.sdf,f.pattern=!0,f.textureBinding=r.textureBinding),h.fillColor=i,h.tl=n,h.br=o,h.aux1=s,h.aux2=a,h.aux3=l,h._materialKey=f.data,h}return r.__extends(t,e),t.fromCIMFill=function(e,r){var u=e.color,c=u&&o.premultiplyAlphaRGBA(u)||0,h=e.materialKey;if(!r)return new t(h,null,c,0,0,0,0,l.i8888to32(0,0,0,e.colorLocked?1:0),e.effects);var f=r.rect,p=r.width,d=r.height,m=f.x+s.SPRITE_PADDING,_=f.y+s.SPRITE_PADDING,g=m+p,y=_+d,v=i.nextHighestPowerOfTwo(n.pt2px(e.height||0));v>255?v=255:v<=0&&(v=i.nextHighestPowerOfTwo(y-_));var x=i.nextHighestPowerOfTwo(n.pt2px(e.height/d*p||0));x>255?x=255:x<=0&&(x=i.nextHighestPowerOfTwo(g-m));var b=n.pt2px(e.offsetX||0)+128;b>255&&(b=255);var M=n.pt2px(-e.offsetY||0)+128;M>255&&(M=255);var w=e.scaleX||1;return new t(h,r,c,l.i1616to32(m,_),l.i1616to32(g,y),l.i8888to32(x,v,b,M),l.i1616to32(128*w,128),l.i8888to32(0,0,a.degToByte(e.angle),e.colorLocked?1:0),e.effects)},t.fromSimpleFill=function(e,r,n){void 0===n&&(n=!1);var a=e.color,u=a&&"esriSFSNull"!==e.style&&o.premultiplyAlphaRGBAArray(a)||0,c=l.i8888to32(0,0,0,n?255:0),h=e.materialKey;if(!r)return new t(h,null,u,0,0,0,0,c,null);var f=r.rect,p=f.x+s.SPRITE_PADDING,d=f.y+s.SPRITE_PADDING,m=p+r.width,_=d+r.height;return new t(h,r,u,l.i1616to32(p,d),l.i1616to32(m,_),l.i8888to32(i.nextHighestPowerOfTwo(m-p),i.nextHighestPowerOfTwo(_-d),0,0),l.i1616to32(128,128),c,null)},t.fromPictureFill=function(e,r,o){void 0===o&&(o=!1);var a=s.PICTURE_FILL_COLOR,u=r.rect,c=u.x+s.SPRITE_PADDING,h=u.y+s.SPRITE_PADDING,f=c+r.width,p=h+r.height,d=l.i1616to32(c,h),m=l.i1616to32(f,p),_=i.nextHighestPowerOfTwo(n.pt2px(e.width));_>255&&(_=255);var g=i.nextHighestPowerOfTwo(n.pt2px(e.height));g>255&&(g=255);var y=n.pt2px(e.xoffset)+128;y>255&&(y=255);var v=n.pt2px(-e.yoffset)+128;v>255&&(v=255);var x=l.i8888to32(_,g,y,v),b=l.i1616to32(128*e.xscale,128*e.yscale),M=l.i8888to32(0,0,0,o?255:0);return new t(e.materialKey,r,a,d,m,x,b,M,null)},t}(c.default(h.default));t.default=f}).apply(null,i))||(e.exports=n)},Bp7l:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("LxLY"),r("8Lwu")],void 0===(n=(function(e,t,r,i){"use strict";function n(e,t){return e[t+1]}function o(e){return e.length-1}function s(e){for(var t=0,r=0;r<o(e);r++)t+=a(e,r);return t}function a(e,t,r){void 0===r&&(r=1);var i=n(e,t),o=i[0],s=i[1];return Math.sqrt(o*o+s*s)*r}Object.defineProperty(t,"__esModule",{value:!0}),t.smoothPaths=t.pathSubdivide=t.pathDivide=t.SegmentCursor=t.segmentLength=t.pathLength=t.segmentCount=t.segmentAt=void 0,t.segmentAt=n,t.segmentCount=o,t.pathLength=s,t.segmentLength=a;var l=function(){function e(e,t,r,i,n){this._segments=e,this._index=t,this._distance=r,this._xStart=i,this._yStart=n,this._done=!1}return e.create=function(t){return new e(t,0,0,t[0][0],t[0][1])},e.prototype.clone=function(){return new e(this._segments,this._index,this._distance,this.xStart,this.yStart)},e.prototype.equals=function(e){return this._index===e._index||e._index===this._index-1&&(0===this._distance||1===e._distance)||e._index===this._index+1&&(1===this._distance||0===e._distance)},e.prototype.leq=function(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance},e.prototype.geq=function(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance},Object.defineProperty(e.prototype,"_segment",{get:function(){return this._segments[this._index+1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){var e=this.dy,t=Math.acos((0*e+-1*-this.dx)/(1*this.length));return e>0&&(t=2*Math.PI-t),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xStart",{get:function(){return this._xStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yStart",{get:function(){return this._yStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.xStart+this.distance*this.dx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.yStart+this.distance*this.dy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this._segment[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this._segment[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMidpoint",{get:function(){return this.xStart+.5*this.dx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMidpoint",{get:function(){return this.yStart+.5*this.dy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xEnd",{get:function(){return this.xStart+this.dx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yEnd",{get:function(){return this.yStart+this.dy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){var e=this.dx,t=this.dy;return Math.sqrt(e*e+t*t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remainingLength",{get:function(){return this.length*(1-this._distance)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backwardLength",{get:function(){return this.length*this._distance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"done",{get:function(){return this._done},enumerable:!1,configurable:!0}),e.prototype.hasPrev=function(){return this._index-1>=0},e.prototype.hasNext=function(){return this._index+1<o(this._segments)},e.prototype.next=function(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null},e.prototype.prev=function(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)},e.prototype._seekBackwards=function(e,t){var r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;for(var i=this.backwardLength;this.prev();){if(i+this.length>e)return this._seekBackwards(e-i);i+=this.length}return this._distance=0,t?this:null},e.prototype.seek=function(e,t){if(void 0===t&&(t=!1),e<0)return this._seekBackwards(Math.abs(e),t);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;for(var r=this.remainingLength;this.next();){if(r+this.length>e)return this.seek(e-r,t);r+=this.length}return this._distance=1,t?this:null},e}();function u(e,t){if(!(t<=0)){var r=e.length;if(!(r<3)){var n=[],o=0;n.push(0);for(var s=1;s<r;s++)o+=i.dist(e[s],e[s-1]),n.push(o);t=Math.min(t,.2*o);var a=[];a.push(e[0][0]),a.push(e[0][1]);var l=e[r-1][0],u=e[r-1][1],c=i.sub([0,0],e[0],e[1]);for(i.normalize(c),e[0][0]+=t*c[0],e[0][1]+=t*c[1],i.sub(c,e[r-1],e[r-2]),i.normalize(c),e[r-1][0]+=t*c[0],e[r-1][1]+=t*c[1],s=1;s<r;s++)n[s]+=t;n[r-1]+=t;var h=.5*t;for(s=1;s<r-1;s++){for(var f=0,p=0,d=0,m=s-1;m>=0&&!(n[m+1]<n[s]-h);m--){var _=h+n[m+1]-n[s],g=n[m+1]-n[m],y=n[s]-n[m]<h?1:_/g;if(Math.abs(y)<1e-6)break;var v=y*_-.5*(S=y*y)*g,x=y*g/t,b=e[m+1],M=e[m][0]-b[0],w=e[m][1]-b[1];f+=x/v*(b[0]*y*_+.5*S*(_*M-g*b[0])-S*y*g*M/3),p+=x/v*(b[1]*y*_+.5*S*(_*w-g*b[1])-S*y*g*w/3),d+=x}for(m=s+1;m<r&&!(n[m-1]>n[s]+h)&&(_=h-n[m-1]+n[s],g=n[m]-n[m-1],y=n[m]-n[s]<h?1:_/g,!(Math.abs(y)<1e-6));m++){var S;f+=(x=y*g/t)/(v=y*_-.5*(S=y*y)*g)*((b=e[m-1])[0]*y*_+.5*S*(_*(M=e[m][0]-b[0])-g*b[0])-S*y*g*M/3),p+=x/v*(b[1]*y*_+.5*S*(_*(w=e[m][1]-b[1])-g*b[1])-S*y*g*w/3),d+=x}a.push(f/d),a.push(p/d)}for(a.push(l),a.push(u),s=0,m=0;s<r;s++)e[s][0]=a[m++],e[s][1]=a[m++]}}}t.SegmentCursor=l,t.pathDivide=function(e,t,r){var i=s(e),n=l.create(e),o=i/2,a=Math.floor((i-t)/2/t);n.seek(o-a*t);for(var u=-a;u<=a;u++)n.x<512&&n.x>=0&&n.y<512&&n.y>=0&&r(n.clone(),u,o+u*t,i),n.seek(t)},t.pathSubdivide=function(e,t,i){!function e(t,i,n,o,s){if(!(n<i)){var a=o.clone().seek(n/2);if(!r.isNone(a)){t(a.clone(),n,s),n=(n-i)/2;var l=r.unwrap(a.seek(i/2));e(t,i,n,o,s+1),e(t,i,n,l,s+1)}}}(i,t,s(e),l.create(e),0)},t.smoothPaths=function(e,t){for(var r=t,i=0;i<e.length;i++){var n=e[i],o=[];o.push(n[0]);for(var s=1;s<n.length;s++){var a=o[s-1],l=a[0],c=a[1];o.push([l+=n[s][0],c+=n[s][1]])}u(o,r);var h=[];h.push(o[0]);for(var f=1;f<o.length;f++){var p=o[f-1],d=p[1],m=o[f],_=(l=m[0],c=m[1],Math.round(l-p[0])),g=Math.round(c-d);h.push([_,g])}e[i]=h,n=h}return e}}).apply(null,i))||(e.exports=n)},CX95:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("W6K4"),r("qMld"),r("sCbS"),r("aqXi"),r("UUqC"),r("TQDP"),r("493N"),r("2Kdy")],void 0===(n=(function(e,t,i,n,o,s,a,l,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DictionaryMatcher=t.MapMatcher=t.IntervalMatcher=t.FeatureMatcher=void 0;var p=o.getLogger("esri/views/2d/engine/webgl/util/Matcher"),d=function(){function e(){this.type="feature",this._defaultResult=null}return e.fromBasicRenderer=function(t,r,n){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:return o=new e,t.symbol?[4,u.expandSymbol(t.symbol,n)]:[3,2];case 1:s=i.sent(),a=r.createTemplateGroup(s,null),o.setDefault(a),i.label=2;case 2:return[2,o]}}))}))},e.prototype.size=function(){return 1},e.prototype.getDefault=function(){return this._defaultResult},e.prototype.setDefault=function(e){this._defaultResult=e},e.prototype.match=function(e,t,r,i,n){return this.getDefault()},e.prototype.analyze=function(e,t,r,n,o){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,null]}))}))},e}();t.FeatureMatcher=d;var m=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o.type="interval",o._intervals=[],o._isMaxInclusive=r,o._fieldIndex=n,o._field=t,o._normalizationInfo=i,o}return i.__extends(t,e),t.fromCBRenderer=function(e,r,n){return i.__awaiter(this,void 0,void 0,(function(){var o,s,l,c,h=this;return i.__generator(this,(function(f){switch(f.label){case 0:return o=new t(e.field,e.isMaxInclusive,{normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,normalizationType:e.normalizationType},e.fieldIndex),[4,u.expandSymbol(e.backgroundFillSymbol,n)];case 1:return s=f.sent(),[4,a.all(e.intervals.map((function(e){return i.__awaiter(h,void 0,void 0,(function(){var t,a;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,u.expandSymbol(e.symbol,n)];case 1:return t=i.sent(),[4,r.createTemplateGroup(t,s)];case 2:return a=i.sent(),o.add({min:e.min,max:e.max},a),[2]}}))}))})))];case 2:return f.sent(),[4,u.expandSymbol(e.defaultSymbol,n)];case 3:return(l=f.sent())?[4,r.createTemplateGroup(l,s)]:[3,5];case 4:c=f.sent(),o.setDefault(c),f.label=5;case 5:return[2,o]}}))}))},t.prototype.add=function(e,t){this._intervals.push({interval:e,result:t}),this._intervals.sort((function(e,t){return e.interval.min-t.interval.min}))},t.prototype.size=function(){return e.prototype.size.call(this)+this._intervals.length},t.prototype.match=function(e,t,r,i,n){if(null==this._fieldIndex&&!this._field)return this.getDefault();var o=null!=this._fieldIndex?t.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(t);if(!o&&(null==o||isNaN(o)))return this.getDefault();for(var s=0;s<this._intervals.length;s++){var a=this._intervals[s],l=a.interval;if(o>=l.min&&(this._isMaxInclusive?o<=l.max:o<l.max))return a.result}return this.getDefault()},t.prototype._needsNormalization=function(){var e=this._normalizationInfo;return e&&(e.normalizationField||e.normalizationTotal||e.normalizationType)},t.prototype._getValueFromField=function(e){var t=e.readAttribute(this._field);if(!this._needsNormalization())return t;var r=this._normalizationInfo,i=r.normalizationField,n=r.normalizationTotal,o=r.normalizationType,s=!!i&&e.readAttribute(i);if(o)switch(o){case"esriNormalizeByField":return s?t/s:void 0;case"esriNormalizeByLog":return Math.log(t)*Math.LOG10E;case"esriNormalizeByPercentOfTotal":return t/n*100;default:return void p.error("Found unknown normalization type: "+o)}else p.error("Normalization is required, but no type was set!")},t}(d);t.IntervalMatcher=m;var _=function(e){function t(t,r,i){var n=e.call(this)||this;return n.type="map",n._nullResult=null,n._resultsMap=new Map,n._fieldsIndex=i,n._fields=t,n._seperator=r||"",n}return i.__extends(t,e),t.fromUVRenderer=function(e,r,n){return i.__awaiter(this,void 0,void 0,(function(){var o,s,l,c,h,f,p=this;return i.__generator(this,(function(d){switch(d.label){case 0:return o=e.fieldDelimiter,s=[e.field],e.field2&&s.push(e.field2),e.field3&&s.push(e.field3),[4,u.expandSymbol(e.backgroundFillSymbol,n)];case 1:return l=d.sent(),c=new t(s,o,e.fieldIndex),[4,a.all(e.map.map((function(e){return i.__awaiter(p,void 0,void 0,(function(){var t,o;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,u.expandSymbol(e.symbol,n)];case 1:return t=i.sent(),[4,r.createTemplateGroup(t,l)];case 2:return o=i.sent(),"<Null>"===e.value?c.setNullResult(o):c.add(e.value,o),[2]}}))}))})))];case 2:return d.sent(),[4,u.expandSymbol(e.defaultSymbol,n)];case 3:return(h=d.sent())?[4,r.createTemplateGroup(h,l)]:[3,5];case 4:f=d.sent(),c.setDefault(f),d.label=5;case 5:return[2,c]}}))}))},t.prototype.setNullResult=function(e){this._nullResult=e},t.prototype.add=function(e,t){this._resultsMap.set(e.toString(),t)},t.prototype.size=function(){return e.prototype.size.call(this)+this._resultsMap.size},t.prototype.match=function(e,t,r,i,n){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();var o=null!=this._fieldsIndex?t.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(t);if(null!==this._nullResult&&(null==o||""===o||"<Null>"===o))return this._nullResult;if(!o&&null==o)return this.getDefault();var s=o.toString();return this._resultsMap.has(s)?this._resultsMap.get(s):this.getDefault()},t.prototype._getValueFromFields=function(e){for(var t=[],r=0,i=this._fields;r<i.length;r++){var n=e.readAttribute(i[r]);t.push(n)}return t.join(this._seperator)},t}(d);function g(e,t){return i.__awaiter(this,void 0,void 0,(function(){var r,n;return i.__generator(this,(function(i){switch(i.label){case 0:return"number"==typeof(r=e||1)?[2,function(e,t,i){return r}]:[4,l.createRendererExpression(r,t.spatialReference,t.fields)];case 1:return n=i.sent(),[2,function(e,r,i){return h.default(n,e,{$view:i},t.geometryType,r)||1}]}}))}))}t.MapMatcher=_;var y=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o.type="dictionary",o._groupIdCache=new s(100),o._renderer=t,o._fieldMap=t.fieldMap,o._symbolFields=t.getSymbolFields(),o._templates=r,o._info=i,o._scaleFn=n,o}return i.__extends(t,e),t.fromDictionaryRenderer=function(e,n,o){return i.__awaiter(this,void 0,void 0,(function(){var s,a,l;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(e,t){Promise.all([r.e(6),r.e(166)]).then((function(){var t=[r("Vtuk")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))];case 1:return s=i.sent(),[4,(a=s.fromJSON(e.renderer)).fetchResources({spatialReference:o.spatialReference,fields:o.fields})];case 2:return i.sent(),[4,g(a.scaleExpression,o)];case 3:return l=i.sent(),[2,new t(a,n,o,l)]}}))}))},t.prototype._analyzeFeature=function(e,t,r,o){return i.__awaiter(this,void 0,void 0,(function(){var s,a,l,h,d,m,_,g,y=this;return i.__generator(this,(function(v){switch(v.label){case 0:return s=e.readLegacyFeature(),a=this._scaleFn(s,t,r),l=this._attributeHash(s)+"-"+a,(h=this._groupIdCache.get(l))?[2,h]:(d=i.__assign(i.__assign({},r),{spatialReference:this._info.spatialReference,abortOptions:o,fields:this._info.fields}),[4,this._renderer.getSymbolAsync(s,d)]);case 1:return m=v.sent(),_=f.createSymbolSchema(m,this._renderer),g=u.expandSymbol(_,this._info,o).then((function(e){if("expanded-cim"!==e.type)return p.error(new n("mapview-bad-type","Found unexpected type "+e.type+" in dictionary response")),null;e.hash+="-"+a;for(var t=0,r=e.layers;t<r.length;t++){var i=r[t];i.scaleFactor=a,i.templateHash+="-"+a,"text"===i.type&&"string"==typeof i.text&&i.text.indexOf("[")>-1&&(i.text=c.createLabelOverrideFunction(y._fieldMap,i.text,i.cim.textCase))}return y._templates.createTemplateGroup(e,null)})),this._groupIdCache.put(l,g,1),[2,g]}}))}))},t.prototype.analyze=function(e,t,r,n,o){return i.__awaiter(this,void 0,void 0,(function(){var e,s;return i.__generator(this,(function(i){for(e=t.getCursor(),s=[];e.next();)s.push(this._analyzeFeature(e,r,n,o));return[2,a.all(s)]}))}))},t.prototype.match=function(e,t,r,i,n){return null},t.prototype._attributeHash=function(e){for(var t="",r=0,i=this._symbolFields;r<i.length;r++){var n=this._fieldMap[i[r]];n&&(t+=e.attributes[n]+"-")}return t},t}(d);t.DictionaryMatcher=y}).apply(null,i))||(e.exports=n)},DWZn:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("JNkf"),r("m87x")],void 0===(n=(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandedCIM=void 0;var n={marker:r.WGLGeometryType.MARKER,fill:r.WGLGeometryType.FILL,line:r.WGLGeometryType.LINE,text:r.WGLGeometryType.TEXT},o=function(){function e(e,t,r){this.layers=e,this.data=t,this.hash=this._createHash(),this.rendererKey=r;for(var o=0,s=e;o<s.length;o++){var a=s[o];a.materialKey=i.createMaterialKey(n[a.type],this.rendererKey,!1,!1)}}return Object.defineProperty(e.prototype,"type",{get:function(){return"expanded-cim"},enumerable:!1,configurable:!0}),e.prototype._createHash=function(){for(var e="",t=0,r=this.layers;t<r.length;t++)e+=r[t].templateHash;return e},e}();t.ExpandedCIM=o}).apply(null,i))||(e.exports=n)},"Ed/z":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._pos=0,this._buffer=e,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}return e.prototype.readInt32=function(){return this._i32View[this._pos++]},e.prototype.readF32=function(){return this._f32View[this._pos++]},e}();t.default=r}).apply(null,i))||(e.exports=n)},FDNA:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("apbF"),r("ph8t"),r("3vQA")],void 0===(n=(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexVectors=void 0;var o=function(){function e(e,t){this.data=e,this.stride=t}return Object.defineProperty(e.prototype,"vertexCount",{get:function(){var e=this.data.length/(this.stride/4);return e!==(0|e)&&console.debug("Corrupted stride"),e},enumerable:!1,configurable:!0}),e.prototype.transfer=function(e,t){var r=this.data.buffer();e.vertexCount=this.vertexCount,e.data=r,e.stride=this.stride,t.push(r)},e}();t.default=o;var s=function(){function e(e,t,i){void 0===i&&(i=!1),this.geometryType=e,this.indexVector=new n.default(Uint32Array,6*t),this.namedVectors={};var s=r.getStrides(e,i);for(var a in s){var l=s[a],u=void 0;switch(l%4){case 0:case 2:u=new n.default(Uint32Array,l*t);break;case 1:case 3:u=new n.default(Uint8Array,l*t)}this.namedVectors[a]=new o(u,l)}}return e.prototype.get=function(e){return this.namedVectors[e].data},e.prototype.getVector=function(e){return this.namedVectors[e]},e.prototype.transfer=function(e,t){var r=this.indexVector.buffer(),i={};for(var n in t.push(r),this.namedVectors){var o=this.namedVectors[n];i[n]={},o.transfer(i[n],t)}e.geometryType=this.geometryType,e.indexBuffer=r,e.namedBuffers=i,this.destroy()},e.prototype.intoBuffers=function(){var e=i.VertexBuffers.fromVertexVectors(this);return this.destroy(),e},e.prototype.destroy=function(){this.indexVector=null,this.namedVectors=null},e}();t.VertexVectors=s}).apply(null,i))||(e.exports=n)},Fo2y:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("xoE+"),r("jBNx"),r("4F/P"),r("tI6k"),r("VY6u"),r("Dos2"),r("m87x"),r("8Lwu"),r("kNAO"),r("yVlQ"),r("PlK1")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){function t(t){var r=e.call(this,t)||this;if(c.isFunction(t.color))r._dynamicPropertyMap.set("_fillColor",(function(e,r,i){var n=t.color(e,r,i);return n&&o.premultiplyAlphaRGBA(n)||0}));else{var i=t.color;r.fillColor=i&&o.premultiplyAlphaRGBA(i)||0}var s=0;c.isFunction(t.height)||(s=t.height||0),r._dynamicPropertyMap.set("_height",(function(e,r,i){return c.isFunction(t.height)?t.height(e,r,i):s}));var l=0;c.isFunction(t.offsetX)||(l=n.pt2px(t.offsetX||0)+128)>255&&(l=255),r._dynamicPropertyMap.set("_offsetX",(function(e,r,i){if(c.isFunction(t.offsetX)){var o=n.pt2px(t.offsetX(e,r,i))+128;return o>255&&(o=255),o}return l}));var h=1;c.isFunction(t.scaleX)||(h=t.scaleX||1),r._dynamicPropertyMap.set("_scaleX",(function(e,r,i){return c.isFunction(t.scaleX)?t.scaleX(e,r,i):h}));var f=0;c.isFunction(t.offsetY)||(f=n.pt2px(-t.offsetY||0)+128)>255&&(f=255),r._dynamicPropertyMap.set("_offsetY",(function(e,r,i){if(c.isFunction(t.offsetY)){var o=n.pt2px(-t.offsetY(e,r,i))+128;return o>255&&(o=255),o}return f}));var p=0;return c.isFunction(t.angle)||(p=a.radToByte(t.angle)||0),r._dynamicPropertyMap.set("_angle",(function(e,r,i){return c.isFunction(t.angle)?a.radToByte(t.angle(e,r,i)):p})),r.effects=t.effects,r._cimFillLayer=t,r._fillMaterialKey=u.FillMaterialKey.load(t.materialKey),r}return r.__extends(t,e),t.fromCIMFill=function(e){return new t(e)},t.prototype.bindFeature=function(e,t,r){var o=this,a=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,i){o[i]=e(a,t,r)}));var u=this._fillMaterialKey,c=this._materialCache,h=this._cimFillLayer;this.aux3=l.i8888to32(0,0,this._angle,h.colorLocked?1:0);var f=(0,h.materialHash)(a,t,r),d=c.get(f),m=null;if(d&&p.ok(d.spriteMosaicItem)&&(m=d.spriteMosaicItem),m){var _=m.rect,g=m.width,y=m.height,v=_.x+s.SPRITE_PADDING,x=_.y+s.SPRITE_PADDING,b=v+g,M=x+y,w=i.nextHighestPowerOfTwo(n.pt2px(this._height));w>255?w=255:w<=0&&(w=i.nextHighestPowerOfTwo(M-x));var S=i.nextHighestPowerOfTwo(n.pt2px(this._height/y*g||0));S>255?S=255:S<=0&&(S=i.nextHighestPowerOfTwo(b-v));var L=this._scaleX;this.tl=l.i1616to32(v,x),this.br=l.i1616to32(b,M),this.aux1=l.i8888to32(S,w,this._offsetX,this._offsetY),this.aux2=l.i1616to32(128*L,128),u.sdf=m.sdf,u.pattern=!0,u.textureBinding=m.textureBinding}else this.tl=0,this.br=0,this.aux1=0,this.aux2=0,u.sdf=!1,u.pattern=!1,u.textureBinding=0;this._materialKey=u.data},t}(h.default(f.default));t.default=d}).apply(null,i))||(e.exports=n)},Hcrl:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("LxLY"),r("jBNx"),r("Zx0K"),r("ab6c"),r("4F/P"),r("tI6k"),r("Dos2"),r("m87x"),r("8Lwu"),r("ZOLT"),r("yVlQ"),r("PlK1")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f,p,d,m,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=l.vec2f32.create(),y=a.mat2df32.create(),v=n.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate"),x=function(e){function t(t){var r=e.call(this,t)||this;return r._cimMarkerLayer=t,p.isFunction(t.color)?r._dynamicPropertyMap.set("_fillColor",(function(e,r,i){return u.premultiplyAlphaRGBA(t.color(e,r,i))})):r._fillColor=u.premultiplyAlphaRGBA(t.color),p.isFunction(t.outlineColor)?r._dynamicPropertyMap.set("_outlineColor",(function(e,r,i){return u.premultiplyAlphaRGBA(t.outlineColor(e,r,i))})):r._outlineColor=u.premultiplyAlphaRGBA(t.outlineColor),p.isFunction(t.size)?r._dynamicPropertyMap.set("_size",(function(e,r,i){return s.pt2px(t.size(e,r,i))})):r._size=s.pt2px(t.size),p.isFunction(t.scaleX)?r._dynamicPropertyMap.set("_scaleX",t.scaleX):r._scaleX=t.scaleX,p.isFunction(t.offsetX)?r._dynamicPropertyMap.set("xOffset",(function(e,r,i){return s.pt2px(t.offsetX(e,r,i))})):r.xOffset=s.pt2px(t.offsetX),p.isFunction(t.offsetY)?r._dynamicPropertyMap.set("yOffset",(function(e,r,i){return s.pt2px(t.offsetY(e,r,i))})):r.yOffset=s.pt2px(t.offsetY),p.isFunction(t.outlineWidth)?r._dynamicPropertyMap.set("_outlineWidth",(function(e,r,i){return s.pt2px(t.outlineWidth(e,r,i))})):r._outlineWidth=s.pt2px(t.outlineWidth),p.isFunction(t.rotation)?r._dynamicPropertyMap.set("_angle",t.rotation):r._angle=t.rotation,r._scaleFactor=o.unwrapOr(t.scaleFactor,1),r._markerPlacement=t.markerPlacement,r.effects=t.effects,r._bitSet=(1===t.alignment?1:0)|(t.colorLocked?1:0)<<1|(t.scaleSymbolsProportionally?1:0)<<3,r._materialKey=t.materialKey,r}return r.__extends(t,e),t.fromCIMMarker=function(e){return new t(e)},t.prototype.bindFeature=function(e,t,r){var n=this,o=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,i){n[i]=e(o,t,r)}));var a=this._cimMarkerLayer.materialHash,l="function"==typeof a?a(o,t,r):a,u=this._materialCache.get(l);if(u&&_.ok(u.spriteMosaicItem)&&u.spriteMosaicItem){var p=u.spriteMosaicItem,d=this._cimMarkerLayer.sizeRatio,m=p.width/p.height*this._scaleX,x=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,b=this._size,M=b*m,w=this.xOffset,S=this.yOffset;this.xOffset*=this._scaleFactor,this.yOffset*=this._scaleFactor;var L=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/s.pt2px(this._cimMarkerLayer.frameHeight):1,T=this._outlineWidth*L,E=s.pt2px(this._cimMarkerLayer.referenceSize),I=0,C=0,O=this._cimMarkerLayer.anchorPoint;O&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(I=-O.x/(this._size*m),C=O.y/this._size):(I=O.x,C=O.y)),this._sizeOutlineWidth=h.i8888to32(Math.round(Math.min(Math.sqrt(128*M),255)),Math.round(Math.min(Math.sqrt(128*b),255)),Math.round(Math.min(Math.sqrt(128*T),255)),Math.round(Math.min(Math.sqrt(128*E),255))),this.angle=x;var P=Math.round(Math.min(64*d,255));this._bitestAndDistRatio=h.i8888to32(0,0,this._bitSet,P);var N=p.rect.x+c.SPRITE_PADDING,G=p.rect.y+c.SPRITE_PADDING,D=N+p.width,k=G+p.height;this._texUpperLeft=h.i1616to32(N,G),this._texUpperRight=h.i1616to32(D,G),this._texBottomLeft=h.i1616to32(N,k),this._texBottomRight=h.i1616to32(D,k);var R=f.MarkerMaterialKey.load(this._materialKey);R.sdf=p.sdf,R.pattern=!0,R.textureBinding=p.textureBinding,this._materialKey=R.data,this._anchorX=.5-(.5+I)*p.width/p.width,this._anchorY=.5-(.5+C)*p.height/p.height,M*=d,b*=d,M*=this._scaleFactor,b*=this._scaleFactor,b*=p.rect.height/p.height,this._computedWidth=M*=p.rect.width/p.width,this._computedHeight=b,this._applyTransformation(y,g),this.xOffset=w,this.yOffset=S}else v.error(new i("mapview-cim","Encountered an error when binding feature"))},t}(d.default(m.default));t.default=x}).apply(null,i))||(e.exports=n)},IWfl:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("LxLY"),r("jBNx"),r("+6sX"),r("3KXq"),r("tI6k"),r("JNkf"),r("Dos2"),r("m87x"),r("vsbv")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i._isCIM=!1,i.geometryType=l.WGLGeometryType.TEXT,i._aux=u.i8888to32(0,0,i._referenceSize,i._bitset),i}return r.__extends(t,e),t.prototype.bindTextInfo=function(e,t){var r=this;this._shapingInfo=e&&e.length?i.andThen(e,(function(e){return h.shapeGlyphs(e,t,{scale:r._scale,angle:r._angle,xOffset:r._xOffset,yOffset:r._yOffset,hAlign:r._xAlignD,vAlign:r._yAlignD,maxLineWidth:Math.max(32,Math.min(r._lineWidth,512)),lineHeight:a.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(r._lineHeight,4)),decoration:r._decoration,isCIM:r._isCIM})})):null},t.prototype.writeMeshWithGeometry=function(e,t,r,n,s,a){var l=this;if(i.isSome(this._textPlacement)){var u=null!=a?a:r.readLegacyGeometry();return this._writePlacedText(e,t,s,u)}var c=a?o.deltaDecodeGeometry(o.convertFromGeometry(a),2):"esriGeometryPolygon"===n?r.readCentroid():r.readUnquantizedGeometry();if(c){if(c.isPoint){var h=c.coords;return this._writeGlyphs(e,t,s,{x:h[0],y:h[1]})}c.forEachVertex((function(r,i){return l._writeGlyphs(e,t,s,{x:r,y:i})}))}},t.prototype._writePlacedText=function(e,t,r,o){var a=this._shapingInfo;if(!i.isNone(a)){var l=c.MaterialKeyBase.load(this._materialKey),h=i.unwrap(this._textPlacement),f=s.CIMMarkerPlacementHelper.getPlacement(o,h,n.pt2px(1));if(f)for(var p,d,m=f.next();null!=m;){d=u.i1616to32(Math.round(8*m.tx),Math.round(8*m.ty)),p=m.getAngle(),a.setRotation(p);for(var _=0,g=a.glyphs;_<g.length;_++){var y=g[_];l.textureBinding=y.textureBinding;var v=t.getVector("geometry").vertexCount,x=t.indexVector.length,b=this._writeIndices(t),M=this._writeVertex(t,r,d,y);e.writeDisplayRecord(this.geometryType,l.data,v,M,x,b)}a.setRotation(-p),m=f.next()}}},t.prototype._writeGlyphs=function(e,t,r,n){var o=this._shapingInfo;if(!i.isNone(o))for(var s=c.MaterialKeyBase.load(this._materialKey),a=u.i1616to32(Math.round(8*n.x),Math.round(8*n.y)),l=0,h=o.glyphs;l<h.length;l++){var f=h[l];s.textureBinding=f.textureBinding;var p=t.getVector("geometry").vertexCount,d=t.indexVector.length,m=this._writeIndices(t),_=this._writeVertex(t,r,a,f);e.writeDisplayRecord(this.geometryType,s.data,p,_,d,m)}},t.prototype._writeVertexCommon=function(e,t,r,i){var n=this._color,o=this._haloColor,s=u.i8888to32(0,0,this._referenceSize,this._bitset),a=u.i8888to32(0,0,this._size,this._haloSize);e.push(r),e.push(t),e.push(n),e.push(o),e.push(a),e.push(s)},t.prototype._writeVertex=function(e,t,r,i){var n=e.get("geometry");return this._writeVertexCommon(n,t,r,i),n.push(i.offsets.upperLeft),n.push(i.texcoords.upperLeft),this._writeVertexCommon(n,t,r,i),n.push(i.offsets.upperRight),n.push(i.texcoords.upperRight),this._writeVertexCommon(n,t,r,i),n.push(i.offsets.lowerLeft),n.push(i.texcoords.lowerLeft),this._writeVertexCommon(n,t,r,i),n.push(i.offsets.lowerRight),n.push(i.texcoords.lowerRight),4},t.prototype._writeIndices=function(e){var t=e.getVector("geometry").vertexCount,r=e.indexVector;return r.push(t+0),r.push(t+1),r.push(t+2),r.push(t+1),r.push(t+3),r.push(t+2),6},t}(e)}}).apply(null,i))||(e.exports=n)},KAqe:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withLock=void 0;var i=function(){function e(){this._resolver=null}return e.prototype.isHeld=function(){return!!this._resolver},e.prototype.acquire=function(){var e=this;return this._resolver?this._resolver.promise.then((function(){return e.acquire()})):(this._resolver=r.createResolver(),r.resolve())},e.prototype.release=function(){var e=this._resolver;this._resolver=null,e.resolve()},e}();t.default=i,t.withLock=function(e,t,r){return e.acquire().then((function(){return t(r)})).then((function(){return e.release()})).catch((function(t){throw e.release(),t}))}}).apply(null,i))||(e.exports=n)},LCdb:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("H1tY"),r("LxLY"),r("qMld"),r("tI6k"),r("JNkf"),r("cF6f"),r("FDNA"),r("AKDC"),r("cjzh"),r("MGRT")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WGLMeshFactory=void 0;var p=function(){function e(e,t,r){this._isDD=!1,this._geometryType=e,this._idField=t,this._templateStore=r}return e.prototype.update=function(e,t){this._isDD="simple"===e.mesh.matcher.type&&e.mesh.matcher.isDotDensity,n.isSome(e.mesh.labels)&&this._setLabelTemplates(e.mesh.labels,t)},e.prototype._setLabelTemplates=function(e,t){this._labelTemplates=e.map((function(e){return c.default.fromLabelClass(e,t)}))},Object.defineProperty(e.prototype,"templates",{get:function(){return this._templateStore},enumerable:!1,configurable:!0}),e.prototype.createMeshData=function(e){var t=new Array(5),r=this._labelTemplates&&this._labelTemplates.length>0,i="esriGeometryPolyline"===this._geometryType?s.HEURISTIC_GLYPHS_PER_LINE:s.HEURISTIC_GLYPHS_PER_FEATURE;return t[a.WGLGeometryType.MARKER]=new u.VertexVectors(a.WGLGeometryType.MARKER,4*e),t[a.WGLGeometryType.FILL]=new u.VertexVectors(a.WGLGeometryType.FILL,e,this._isDD),t[a.WGLGeometryType.LINE]=new u.VertexVectors(a.WGLGeometryType.LINE,e),t[a.WGLGeometryType.TEXT]=new u.VertexVectors(a.WGLGeometryType.TEXT,4*e),t[a.WGLGeometryType.LABEL]=new u.VertexVectors(a.WGLGeometryType.LABEL,r?4*i:0),new l.MeshData(t,{features:e,records:e,metrics:0})},e.prototype.analyze=function(e,t,i,n,s){return r.__awaiter(this,void 0,void 0,(function(){var a,l,u,c,h,p,d;return r.__generator(this,(function(r){switch(r.label){case 0:return o.isAborted(s)?[2]:"dictionary"!==t.type?[3,2]:[4,t.analyze(this._idField,e.copy(),i,n,s)];case 1:a=r.sent(),r.label=2;case 2:for(l=0;e.next();)if(u=a?a[l++]:t.match(this._idField,e,this._geometryType,i,n),e.setGroupId(u),f.isDynamicId(u))for(c=this._templateStore.getDynamicTemplateGroup(u),h=0,p=c;h<p.length;h++)(d=p[h])&&d.analyze&&d.analyze(this._templateStore,e,i,n);return[2,this._templateStore.finalize(s)]}}))}))},e.prototype.analyzeGraphics=function(e,t,i,n,s){return r.__awaiter(this,void 0,void 0,(function(){var a,l,u,c,h,p;return r.__generator(this,(function(r){switch(r.label){case 0:return o.isAborted(s)?[2]:(a=e.getCursor(),t?[4,t.analyze(this._idField,a.copy(),i,n,s)]:[3,2]);case 1:r.sent(),r.label=2;case 2:for(;a.next();){if(null!=(l=a.getGroupId())&&-1!==l||(l=t.match(this._idField,a,a.geometryType,i,n),a.setGroupId(l)),f.isDynamicId(l))for(u=this._templateStore.getDynamicTemplateGroup(l),c=0,h=u;c<h.length;c++)(p=h[c])&&p.analyze&&p.analyze(this._templateStore,a,i,n);a.setGroupId(l)}return[2,this._templateStore.finalize(s)]}}))}))},e.prototype.writeGraphic=function(e,t){var r=t.getGroupId(),n=t.getDisplayId(),o=this._templateStore.getTemplateGroup(r),s=t.geometryType;if(null!=n){if(f.isDynamicId(r))for(var a=0,l=o;a<l.length;a++)(h=l[a]).bindFeature(t,null,null);if(o){e.writeDisplayObject(n,t.readGraphic().insertAfter);for(var u=0,c=o;u<c.length;u++){var h;if(h=c[u]){var p=e.get(h.geometryType);h.writeMesh(e,p,t,s,n)}}}}else i("esri-2d-debug")&&console.debug("Got null id for feature")},e.prototype.writeCursor=function(e,t,r,o,s,a){var l=t.getGroupId(),u=t.getDisplayId(),c=this._templateStore.getTemplateGroup(l);if(null!=u){if(c){if(e.writeDisplayObject(u,0),f.isDynamicId(l))for(var h=0,p=c;h<p.length;h++)(_=p[h]).bindFeature(t,r,o);for(var d=0,m=c;d<m.length;d++){var _=m[d],g=e.get(_.geometryType);!_.needsPixelBuffer&&t.hasFilter()||_.writeMesh(e,g,t,this._geometryType,u)}var y=e.hasDisplayRecords();if(n.isSome(a)&&y){var v=a&&this._findLabelRef(c);this._writeLabels(e,t,u,a,v,s)}e.endDisplayObject()}}else i("esri-2d-debug")&&console.debug("Got null id for feature")},e.prototype._findLabelRef=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(i instanceof h.default)return i}return null},e.prototype._writeLabels=function(e,t,r,i,o,s){for(var a=0,l=i;a<l.length;a++){var u=l[a];if(n.isSome(u)&&u){var c=u.glyphs,h=u.rtl,f=this._labelTemplates[u.index],p=e.get(f.geometryType);f.bindReferenceTemplate(o),f.bindTextInfo(c,h),f.writeMesh(e,p,t,this._geometryType,r,s)}}},e}();t.WGLMeshFactory=p}).apply(null,i))||(e.exports=n)},MGRT:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("qMld"),r("dXKx"),r("Fo2y"),r("bePc"),r("Hcrl"),r("8rHD"),r("BU48"),r("65my"),r("cjzh"),r("t1uL"),r("KAqe"),r("PlK1"),r("493N"),r("rAGl")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f,p,d,m,_,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WGLTemplateStore=t.isDynamicId=void 0;var v=n.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),x=new Array;function b(e,t){var r=e.length;return e.push(null),t.then((function(t){return e[r]=t})),e}function M(e){return!!(1&e)}t.isDynamicId=M;var w=function(){function e(e,t){this._idCounter=1,this._templateIdCounter=1,this._idToTemplateGroup=new Map,this._symbolToTemplate=new Map,this._fetchQueue=[],this._idToResolver=new Map,this._cimTemplateCache=new Map,this._cimAnalyses=[],this._lock=new m.default,this._fetchResource=e,this._joinOnUTurn=t}return Object.defineProperty(e.prototype,"_markerError",{get:function(){return this._errorTemplates.marker[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_fillError",{get:function(){return this._errorTemplates.fill[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_lineError",{get:function(){return this._errorTemplates.line[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_textError",{get:function(){return this._errorTemplates.line[0]},enumerable:!1,configurable:!0}),e.prototype.createTemplateGroup=function(e,t){this._initErrorTemplates();var r=e.hash;if(this._symbolToTemplate.has(r))return this._symbolToTemplate.get(r);var i=new Array;t&&this._createMeshTemplates(i,t,!0),this._createMeshTemplates(i,e,!1);var n=this._createGroupId("expanded-cim"===e.type);return this._idToTemplateGroup.set(n,i),this._symbolToTemplate.set(r,n),n},e.prototype.getTemplateGroup=function(e){return this._idToTemplateGroup.has(e)?this._idToTemplateGroup.get(e):x},e.prototype.getDynamicTemplateGroup=function(e){return this._idToTemplateGroup.has(e)?(M(e)||v.error("mapview-template-store","Id "+e+" does not refer to a dynamic template"),this._idToTemplateGroup.get(e)):x},e.prototype.getMosaicItem=function(e,t){var r=this,i=this._createTemplateId(),n=o.create((function(e){return r._idToResolver.set(i,e)}));return this._fetchQueue.push({symbol:e,id:i,glyphIds:t}),n},e.prototype.finalize=function(e){return this._fetchQueue.length||this._lock.isHeld()?m.withLock(this._lock,this._fetchAllQueuedResources.bind(this),e):o.resolve()},e.prototype._initErrorTemplates=function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],g.createSymbolSchema(s.errorPolygonSymbol2D),!1),marker:this._createMeshTemplates([],g.createSymbolSchema(s.errorPointSymbol2D),!1),line:this._createMeshTemplates([],g.createSymbolSchema(s.errorPolylineSymbol2D),!1)})},e.prototype._fetchAllQueuedResources=function(e){var t=this;if(!this._fetchQueue.length)return o.resolve();var r=this._fetchQueue,n=this._cimAnalyses;return this._fetchQueue=[],this._cimAnalyses=[],o.all(n).then((function(){return t._fetchResource(r,e).then((function(e){for(var r=0,i=e;r<i.length;r++){var n=i[r],o=n.id,s=n.mosaicItem;t._idToResolver.get(o)(s),t._idToResolver.delete(o)}}))})).catch((function(e){o.isAbortError(e)?t._fetchQueue=t._fetchQueue.concat(r):function(e){return"worker:port-closed"===e.name}(e)||v.error(new i("mapview-template-store","Unable to fetch requested texture resources",e))}))},e.prototype._createGroupId=function(e){return this._idCounter++<<1|(e?1:0)},e.prototype._createTemplateId=function(){return this._templateIdCounter++},e.prototype._createSMS=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,p.default.fromSimpleMarker(e,t)]:[2,this._markerError]}}))}))},e.prototype._createPMS=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,p.default.fromPictureMarker(e,t)]:[2,this._markerError]}}))}))},e.prototype._createSFS=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return i=r.sent().spriteMosaicItem,_.ok(i,v)?[2,h.default.fromSimpleFill(e,i,t)]:[2,this._fillError]}}))}))},e.prototype._createPFS=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return i=r.sent().spriteMosaicItem,_.ok(i,v)?[2,h.default.fromPictureFill(e,i,t)]:[2,this._fillError]}}))}))},e.prototype._createSLS=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,f.default.fromSimpleLine(e,t,this._joinOnUTurn)]:[2,this._lineError]}}))}))},e.prototype._createLMS=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,p.default.fromLineSymbolMarker(e,t)]:[2,this._markerError]}}))}))},e.prototype._createTS=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e)];case 1:return t=r.sent().glyphMosaicItems,[2,d.default.fromText(e,t)]}}))}))},e.prototype._createCIMText=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.getMosaicItem(e.cim,y.codepoints(e.text))];case 1:return t=r.sent().glyphMosaicItems,e.cim.mosaicHash=e.materialHash,_.ok(t,v)?[2,d.default.fromCIMText(e,t)]:[2,this._textError]}}))}))},e.prototype._createCIMFill=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return e.cim.mosaicHash=e.materialHash,[4,this.getMosaicItem(e.cim)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,h.default.fromCIMFill(e,t)]:[2,this._fillError]}}))}))},e.prototype._createCIMLine=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return e.cim.mosaicHash=e.materialHash,[4,this.getMosaicItem(e.cim)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,f.default.fromCIMLine(e,t,this._joinOnUTurn)]:[2,this._lineError]}}))}))},e.prototype._createCIMMarker=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return e.cim.mosaicHash=e.materialHash,[4,this.getMosaicItem(e.cim)];case 1:return t=r.sent().spriteMosaicItem,_.ok(t,v)?[2,p.default.fromCIMMarker(e,t)]:[2,this._markerError]}}))}))},e.prototype._createCIM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n=this;return r.__generator(this,(function(r){if(this._cimTemplateCache.has(t=e.templateHash))return[2,this._cimTemplateCache.get(t)];switch(e.type){case"marker":i=this._createCIMMarker(e);break;case"line":i=this._createCIMLine(e);break;case"fill":i=this._createCIMFill(e);break;case"text":i=this._createCIMText(e)}return i.then((function(e){return n._cimTemplateCache.set(t,e)})),[2,i]}))}))},e.prototype._createDynamicCIM=function(e){var t,r=e.templateHash;if(this._cimTemplateCache.has(r))return this._cimTemplateCache.get(r);switch(e.type){case"marker":t=u.default.fromCIMMarker(e);break;case"line":t=l.default.fromCIMLine(e);break;case"fill":t=a.default.fromCIMFill(e);break;case"text":t=c.default.fromCIMText(e)}return this._cimTemplateCache.set(r,t),t},e.prototype._createPrimitiveMeshTemplates=function(e,t,r){switch(t.type){case"esriSMS":return b(e,this._createSMS(t));case"esriPMS":return b(e,this._createPMS(t));case"esriSFS":return b(e,this._createSFS(t,r));case"line-marker":return b(e,this._createLMS(t));case"esriPFS":return b(e,this._createPFS(t,r));case"esriSLS":return b(e,this._createSLS(t,!1));case"esriTS":return b(e,this._createTS(t));default:return v.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),e}},e.prototype._createMeshTemplates=function(e,t,r){if(-1!==t.type.indexOf("3d"))return v.error("3D symbols are not supported with MapView"),e;if("expanded-cim"===t.type){for(var i=0,n=t.layers;i<n.length;i++)"function"==typeof(a=n[i]).materialHash?e.push(this._createDynamicCIM(a)):b(e,this._createCIM(a));return e}if("composite-symbol"===t.type){for(var o=0,s=t.layers;o<s.length;o++){var a=s[o];this._createPrimitiveMeshTemplates(e,a,r)}return e}return"cim"===t.type||"label"===t.type||"web-style"===t.type?e:this._createPrimitiveMeshTemplates(e,t,r)},e}();t.WGLTemplateStore=w}).apply(null,i))||(e.exports=n)},MzWl:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("LxLY"),r("Lzvl"),r("0zc9"),r("JNkf")],void 0===(n=(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return Object.defineProperty(e.prototype,"needsPixelBuffer",{get:function(){return!!this.effects||this.geometryType===o.WGLGeometryType.MARKER||this.geometryType===o.WGLGeometryType.TEXT||this.geometryType===o.WGLGeometryType.LABEL},enumerable:!1,configurable:!0}),e.prototype.writeMesh=function(e,t,o,s,a){if(r.isNone(this.effects))return this.writeMeshWithGeometry(e,t,o,s,a);for(var l=n.CIMEffectHelper.executeEffects(this.effects,o.readLegacyGeometry()),u=n.CIMEffectHelper.next(l);u;)this.writeMeshWithGeometry(e,t,o,i.getJsonType(u),a,u),u=n.CIMEffectHelper.next(l)},e.prototype.writeMeshWithGeometry=function(e,t,r,i,n,o){},e.prototype.bindFeature=function(e,t,r){},e}();t.default=s}).apply(null,i))||(e.exports=n)},O6Ih:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("H1tY"),r("tI6k"),r("JNkf"),r("Dos2"),r("GDRe"),r("tBzM"),r("m87x")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n.TILE_SIZE+16,h=new a.TileClipper(0,0,0,1,16);h.setExtent(n.TILE_SIZE);var f=0,p=0;i("esri-tiles-performance")&&setInterval((function(){console.log("New (FL)","feat="+p,"secs="+f,"tris=0","tris/sec="+Math.round(0/f))}),1e4);var d=new Uint32Array(9),m=new Uint32Array(36),_=new Uint32Array(3),g=new Uint32Array(6),y=function(e){return function(t){var r=Math.ceil(1024*e._halfWidth),i=Math.ceil(1024*e._halfReferenceWidth);t.entry0=e.offset+e.vertexCount++;var n=s.i1616to32(t.distance,r),o=s.i8888to32(Math.round(31*t.prevNormal.x),Math.round(31*t.prevNormal.y),Math.round(0),Math.round(-31)),a=s.i8888to32(0,0,0,e._bitset);m[0]=s.i1616to32(8*t.currentVertex.x,8*t.currentVertex.y),m[1]=e.id,m[2]=e._fillColor,m[3]=o,m[4]=n,m[5]=e._tl,m[6]=e._br,m[7]=a,m[8]=s.i1616to32(i,0),t.entry2=e.offset+e.vertexCount++,n=s.i1616to32(t.distance,r),o=s.i8888to32(Math.round(31*-t.prevNormal.x),Math.round(31*-t.prevNormal.y),Math.round(0),Math.round(31)),a=s.i8888to32(0,0,0,e._bitset),m[9]=s.i1616to32(8*t.currentVertex.x,8*t.currentVertex.y),m[10]=e.id,m[11]=e._fillColor,m[12]=o,m[13]=n,m[14]=e._tl,m[15]=e._br,m[16]=a,m[17]=s.i1616to32(i,0),t.exit0=e.offset+e.vertexCount++,n=s.i1616to32(t.distance,r),o=s.i8888to32(Math.round(31*t.nextNormal.x),Math.round(31*t.nextNormal.y),Math.round(0),Math.round(-31)),a=s.i8888to32(0,0,0,e._bitset),m[18]=s.i1616to32(8*t.currentVertex.x,8*t.currentVertex.y),m[19]=e.id,m[20]=e._fillColor,m[21]=o,m[22]=n,m[23]=e._tl,m[24]=e._br,m[25]=a,m[26]=s.i1616to32(i,0),t.exit2=e.offset+e.vertexCount++,n=s.i1616to32(t.distance,r),o=s.i8888to32(Math.round(31*-t.nextNormal.x),Math.round(31*-t.nextNormal.y),Math.round(0),Math.round(31)),a=s.i8888to32(0,0,0,e._bitset),m[27]=s.i1616to32(8*t.currentVertex.x,8*t.currentVertex.y),m[28]=e.id,m[29]=e._fillColor,m[30]=o,m[31]=n,m[32]=e._tl,m[33]=e._br,m[34]=a,m[35]=s.i1616to32(i,0),e.geometryBuf.writeRegion(m)}},v=function(e){return function(t){g[0]=t.leftExit0,g[1]=t.rightEntry0,g[2]=t.leftExit2,g[3]=t.rightEntry0,g[4]=t.rightEntry2,g[5]=t.leftExit2,e.indexCount+=6,e.indexBuf.writeRegion(g)}};t.default=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i.tessellationProperties={_fillColor:null,_tl:null,_br:null,_halfWidth:null,_bitset:null,_halfReferenceWidth:null,id:null,indexBuf:null,indexCount:null,geometryBuf:null,vertexCount:null,offset:null},i._tessellationOptions={},i.geometryType=o.WGLGeometryType.LINE,i}return r.__extends(t,e),t.prototype.writeMeshWithGeometry=function(e,t,r,i,n,o){var s=t.indexVector,a=t.get("geometry"),l=t.getVector("geometry").vertexCount,u=s.length,c=null!=o?o:r.readLegacyGeometry();if(c){switch(i){case"esriGeometryPolyline":if(0===(h=this._clipLines(c.paths)).length)return;this._write(s,a,l,n,h);break;case"esriGeometryPolygon":var h;if(0===(h=this._clipLines(c.rings)).length)return;this._write(s,a,l,n,h)}e.writeDisplayRecord(this.geometryType,this._materialKey,l,this.tessellationProperties.vertexCount,u,this.tessellationProperties.indexCount)}},t.prototype._clipLines=function(e){for(var t=[],r=!1,i=0;i<e.length;){var n=[],o=e[i];h.reset(2);var s=o[0],a=s[0],l=s[1];if(r)h.moveTo(a,l);else{if(a<-16||a>c||l<-16||l>c){r=!0;continue}n.push({x:a,y:l})}for(var u=!1,f=o.length,p=1;p<f;++p)if(a+=o[p][0],l+=o[p][1],r)h.lineTo(a,l);else{if(a<-16||a>c||l<-16||l>c){u=!0;break}n.push({x:a,y:l})}if(u)r=!0;else{if(r){var d=h.resultWithStarts();if(d)for(var m=0,_=d;m<_.length;m++)t.push(_[m])}else t.push({line:n,start:0});i++,r=!1}}return t},t.prototype._write=function(e,t,r,n,o){var s;i("esri-tiles-performance")&&(s=performance.now()),this.tessellationProperties.id=n,this.tessellationProperties.indexBuf=e,this.tessellationProperties.indexCount=0,this.tessellationProperties.geometryBuf=t,this.tessellationProperties.vertexCount=0,this.tessellationProperties.offset=r;for(var a=0,u=o;a<u.length;a++){var c=u[a],h=c.line;h.length<2||(this._tessellationOptions.initialDistance=c.start%65535,this._tessellationCallbacks instanceof l.StandardTessellationCallbacks&&(this._tessellationCallbacks.capType=this._capType,this._tessellationCallbacks.joinType=this._joinType),l.tessellate(h,this._tessellationOptions,this._tessellationCallbacks),l.cleanup(),i("esri-tiles-performance")&&p++)}i("esri-tiles-performance")&&(f+=(performance.now()-s)/1e3)},t.prototype._initializeTessellator=function(e){var t=u.LineMaterialKey.load(this._materialKey);if(this._tessellationOptions.trackDistance=this._isDashed||this._hasPattern,this._tessellationOptions.thin=!e&&this.tessellationProperties._halfWidth<n.THIN_LINE_THRESHOLD/2&&!(t.vvSizeFieldStops||t.vvSizeMinMaxValue||t.vvSizeScaleStops||t.vvSizeUnitValue),this._tessellationOptions.wrapDistance=65535,this._tessellationOptions.outerBisectorAutoSplitThreshold=1/3.8,this._tessellationOptions.enableOuterBisectorSplit=this._isDashed||this._hasPattern,this._tessellationOptions.innerBisectorAutoSplitThreshold=1/3.8,this._tessellationOptions.enableInnerBisectorSplit=this._isDashed||this._hasPattern,this._tessellationOptions.thin)this._tessellationCallbacks={vertex:y(this.tessellationProperties),bridge:v(this.tessellationProperties)};else{var r=new l.StandardTessellationCallbacks(function(e){return function(t,r,i,n,o,a,l,u,c){var h=s.i1616to32(c,Math.ceil(1024*e._halfWidth)),f=s.i8888to32(Math.round(31*o),Math.round(31*a),Math.round(31*l),Math.round(31*u)),p=s.i8888to32(31*i,31*n,0,e._bitset);return d[0]=s.i1616to32(8*t,8*r),d[1]=e.id,d[2]=e._fillColor,d[3]=f,d[4]=h,d[5]=e._tl,d[6]=e._br,d[7]=p,d[8]=s.i1616to32(Math.ceil(1024*e._halfReferenceWidth),0),e.geometryBuf.writeRegion(d),e.offset+e.vertexCount++}}(this.tessellationProperties),function(e){return function(t,r,i){_[0]=t,_[1]=r,_[2]=i,e.indexCount+=3,e.indexBuf.writeRegion(_)}}(this.tessellationProperties));r.miterLimitCosine=this._miterLimitCosine,r.textured=this._isDashed||this._hasPattern,r.joinOnUTurn=this._joinOnUTurn,this._tessellationCallbacks=r}},t}(e)}}).apply(null,i))||(e.exports=n)},PlK1:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ma1f")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ok=void 0,t.ok=function(e,t){return!e||!("name"in e)||(t&&t.error(new r(e.name,e.message,e.details)),!1)}}).apply(null,i))||(e.exports=n)},TQDP:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("u90+")],void 0===(n=(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,l,u){var c=e.referencesGeometry()&&u?function(e,t,a){var l=a.transform,u=a.hasZ,c=a.hasM;s.has(t)||s.set(t,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,i,n){return o.unquantizePoint(r,t,e,i,n)};case"esriGeometryPolygon":return function(e,r,i,n){return o.unquantizePolygon(r,t,e,i,n)};case"esriGeometryPolyline":return function(e,r,i,n){return o.unquantizePolyline(r,t,e,i,n)};case"esriGeometryMultipoint":return function(e,r,i,n){return o.unquantizeMultipoint(r,t,e,i,n)};default:return n.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i("mapview-arcade","Unable to handle geometryType: "+e)),function(e){return e}}}(t));var h=s.get(t)(e.geometry,l,u,c);return r.__assign(r.__assign({},e),{geometry:h})}(t,l,u):t,h=e.repurposeFeature(c);try{return e.evaluate(r.__assign(r.__assign({},a),{$feature:h}))}catch(e){return n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}};var s=new Map}).apply(null,i))||(e.exports=n)},UUqC:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";function r(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isCIMMarkerStrokePlacement=t.isCIMFill=t.isCIMStroke=t.isCIMMarker=t.toCIMSymbolJSON=t.fromCIMColor=t.resampleHermite=t._adjustTextCase=t.createLabelOverrideFunction=t.colorToArray=t.evaluateValueOrFunction=void 0,t.evaluateValueOrFunction=function(e,t,r,i){return function(e){return"function"==typeof e}(e)?e(t,r,i):e},t.colorToArray=function(e){return[e.r,e.g,e.b,e.a]},t.createLabelOverrideFunction=function(e,t,i){var n=function(e){for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},o=[],s=0,a=-1;do{if((a=t.indexOf("[",s))>=s){if(a>s){var l=t.substr(s,a-s);o.push([l,null,n(l)])}if((a=t.indexOf("]",s=a+1))>=s){if(a>s){var u=e[t.substr(s,a-s)];u&&o.push([null,u,!1])}s=a+1}}}while(-1!==a);return s<t.length-1&&(l=t.substr(s),o.push([l,null,n(l)])),function(e){for(var t="",n=null,s=0,a=o;s<a.length;s++){var l=a[s],u=l[0];if(u)l[2]?n=u:(n&&(t+=n,n=null),t+=u);else{var c=e.attributes[l[1]];c&&(n&&(t+=n,n=null),t+=c)}}return r(t,i)}},t._adjustTextCase=r,t.resampleHermite=function(e,t,r,i,n,o,s){void 0===s&&(s=!0);for(var a=t/n,l=r/o,u=Math.ceil(a/2),c=Math.ceil(l/2),h=0;h<o;h++)for(var f=0;f<n;f++){for(var p=4*(f+(s?o-h-1:h)*n),d=0,m=0,_=0,g=0,y=0,v=0,x=0,b=(h+.5)*l,M=Math.floor(h*l);M<(h+1)*l;M++)for(var w=Math.abs(b-(M+.5))/c,S=(f+.5)*a,L=w*w,T=Math.floor(f*a);T<(f+1)*a;T++){var E=Math.abs(S-(T+.5))/u,I=Math.sqrt(L+E*E);I>=-1&&I<=1&&(d=2*I*I*I-3*I*I+1)>0&&(x+=d*e[3+(E=4*(T+M*t))],_+=d,e[E+3]<255&&(d=d*e[E+3]/250),g+=d*e[E],y+=d*e[E+1],v+=d*e[E+2],m+=d)}i[p]=g/m,i[p+1]=y/m,i[p+2]=v/m,i[p+3]=x/_}},t.fromCIMColor=function(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}},t.toCIMSymbolJSON=function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.symbol},t.isCIMMarker=function(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type},t.isCIMStroke=function(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type},t.isCIMFill=function(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type},t.isCIMMarkerStrokePlacement=function(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}}).apply(null,i))||(e.exports=n)},ZOLT:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("LxLY"),r("jBNx"),r("aMdW"),r("Zx0K"),r("W9tT"),r("ab6c"),r("+6sX"),r("3KXq"),r("JNkf"),r("Dos2")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i.angle=0,i.xOffset=0,i.yOffset=0,i.width=0,i.height=0,i.boundsType="square",i._anchorX=0,i._anchorY=0,i._computedWidth=0,i._computedHeight=0,i.geometryType=h.WGLGeometryType.MARKER,i}return r.__extends(t,e),t.prototype.writeMeshWithGeometry=function(e,t,r,n,o,s){var a=this,l=t.indexVector,c=t.get("geometry"),h=t.getVector("geometry"),f=h.vertexCount,p=f,d=l.length;if(i.isSome(this._markerPlacement)){var m=null!=s?s:r.readLegacyGeometry();this._writePlacedMarkers(c,l,f,o,m)}else{if(!(m=s?u.deltaDecodeGeometry(u.convertFromGeometry(s),2):"esriGeometryPolygon"===n?r.readCentroid():r.readUnquantizedGeometry()))return;if(m.isPoint){var _=m.coords;this._writeVertices(c,o,this._getPos(_[0],_[1])),this._writeIndices(l,f)}else m.forEachVertex((function(e,t){var r=h.vertexCount;a._writeVertices(c,o,a._getPos(e,t)),a._writeIndices(l,r)}))}var g=t.getVector("geometry").vertexCount-p;e.writeDisplayRecord(this.geometryType,this._materialKey,p,g,d,l.length-d)},t.prototype._applyTransformation=function(e,t,r){void 0===r&&(r=0),o.mat2d.identity(e),o.mat2d.translate(e,e,l.vec2f32.fromValues(this.xOffset,-this.yOffset)),this.angle+r!==0&&o.mat2d.rotate(e,e,3.14159265359/180*(this.angle+r));var i=this._computedWidth,n=this._computedHeight,s=(this._anchorX-.5)*i,u=(this._anchorY-.5)*n;a.vec2.set(t,s,u),a.vec2.transformMat2d(t,t,e),this._offsetUpperLeft=f.i1616to32(16*t[0],16*t[1]),a.vec2.set(t,s+i,u),a.vec2.transformMat2d(t,t,e),this._offsetUpperRight=f.i1616to32(16*t[0],16*t[1]),a.vec2.set(t,s,u+n),a.vec2.transformMat2d(t,t,e),this._offsetBottomLeft=f.i1616to32(16*t[0],16*t[1]),a.vec2.set(t,s+i,u+n),a.vec2.transformMat2d(t,t,e),this._offsetBottomRight=f.i1616to32(16*t[0],16*t[1])},t.prototype._writePlacedMarkers=function(e,t,r,o,a){var u=c.CIMMarkerPlacementHelper.getPlacement(a,i.unwrap(this._markerPlacement),n.pt2px(1));if(u)for(var h=l.vec2f32.create(),f=s.mat2df32.create(),p=0,d=u.next();null!=d;)d.tx>=-128&&d.tx<=640&&d.ty>=-128&&d.ty<=640&&(this._applyTransformation(f,h,d.getAngle()/(3.14159265359/180)),this._writeVertices(e,o,this._getPos(d.tx,d.ty)),this._writeIndices(t,r+p),p+=4),d=u.next()},t.prototype._getPos=function(e,t){return f.i1616to32(Math.round(8*e),Math.round(8*t))},t.prototype._writeVertices=function(e,t,r){e.push(r),e.push(this._offsetUpperLeft),e.push(this._texUpperLeft),e.push(this._bitestAndDistRatio),e.push(t),e.push(this._fillColor),e.push(this._outlineColor),e.push(this._sizeOutlineWidth),e.push(r),e.push(this._offsetUpperRight),e.push(this._texUpperRight),e.push(this._bitestAndDistRatio),e.push(t),e.push(this._fillColor),e.push(this._outlineColor),e.push(this._sizeOutlineWidth),e.push(r),e.push(this._offsetBottomLeft),e.push(this._texBottomLeft),e.push(this._bitestAndDistRatio),e.push(t),e.push(this._fillColor),e.push(this._outlineColor),e.push(this._sizeOutlineWidth),e.push(r),e.push(this._offsetBottomRight),e.push(this._texBottomRight),e.push(this._bitestAndDistRatio),e.push(t),e.push(this._fillColor),e.push(this._outlineColor),e.push(this._sizeOutlineWidth)},t.prototype._writeIndices=function(e,t){var r=t;e.push(r+0),e.push(r+1),e.push(r+2),e.push(r+1),e.push(r+3),e.push(r+2)},t}(e)}}).apply(null,i))||(e.exports=n)},aqXi:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("+AWJ"),r("qMld"),r("4DEr"),r("DWZn")],void 0===(n=(function(e,t,r,i,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expandSymbol=t.expandSymbols=void 0,t.expandSymbols=function(e,i,o){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,n.all(e.map((function(e){return t.expandSymbol(e,i,o)})))]}))}))};var a=function(e,t){return r.__awaiter(void 0,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return i=s.ExpandedCIM.bind,[4,o.analyzeCIMSymbol(e.data,t)];case 1:return[2,new(i.apply(s.ExpandedCIM,[void 0,r.sent(),e.data,e.rendererKey]))]}}))}))};t.expandSymbol=function(e,t,n){return r.__awaiter(void 0,void 0,void 0,(function(){var o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return e?"cim"===e.type?[2,a(e,t)]:"web-style"!==e.type?[3,2]:(o=i.WebStyleSymbol.fromJSON(e),s={type:"cim"},[4,o.fetchCIMSymbol(n)]):[2,null];case 1:return s.data=r.sent().data,s.rendererKey=e.rendererKey,[2,a(s,t)];case 2:return[2,e]}}))}))}}).apply(null,i))||(e.exports=n)},azm3:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("hNI9"),r("fVTS"),r("flWe")],void 0===(n=(function(e,t,r,i,n){"use strict";return function(){function e(e){this.insertAfter=null,this.id=e,this.displayRecords=[],this.metrics=[]}return e.prototype.copy=function(){var t=new e(this.id);return t.set(this),t},e.prototype.clone=function(){var t=new e(this.id);return t.displayRecords=this.displayRecords.map((function(e){return e.clone()})),t.metrics=this.metrics.map((function(e){return e.clone()})),t.insertAfter=this.insertAfter,t},e.prototype.set=function(e){this.id=e.id,this.displayRecords=e.displayRecords,this.metrics=e.metrics,this.insertAfter=e.insertAfter},e.prototype.serialize=function(e){return e.push(this.id),n.serializeList(e,this.metrics),n.serializeList(e,this.displayRecords),e},e.deserialize=function(t){var o=t.readInt32(),s=new e(o),a={id:o},l=n.deserializeList(t,i.default);return l.length&&(s.metrics=l),s.displayRecords=n.deserializeList(t,r,a),s},e}()}).apply(null,i))||(e.exports=n)},bLBh:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("CX95")],void 0===(n=(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMatcher=void 0;var s=n.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");t.createMatcher=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(e.type){case"simple":return[2,o.FeatureMatcher.fromBasicRenderer(e,t,n)];case"map":return[2,o.MapMatcher.fromUVRenderer(e,t,n)];case"interval":return[2,o.IntervalMatcher.fromCBRenderer(e,t,n)];case"dictionary":return[2,o.DictionaryMatcher.fromDictionaryRenderer(e,t,n)];default:return s.error(new i("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),[2,null]}return[2]}))}))}}).apply(null,i))||(e.exports=n)},bePc:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("jBNx"),r("4F/P"),r("tI6k"),r("Dos2"),r("m87x"),r("8Lwu"),r("O6Ih"),r("yVlQ"),r("PlK1")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e){function t(t){var r=e.call(this,t)||this;r._cimLineLayer=t;var o=0;if(l.isFunction(t.width)||(o=.5*i.pt2px(t.width)),r._dynamicPropertyMap.set("_halfWidth",(function(e,r,n){return l.isFunction(t.width)?.5*i.pt2px(t.width(e,r,n)):o})),l.isFunction(t.cap)?r._dynamicPropertyMap.set("_capType",t.cap):r._capType=t.cap,l.isFunction(t.join)?r._dynamicPropertyMap.set("_joinType",t.join):r._joinType=t.join,l.isFunction(t.color))r._dynamicPropertyMap.set("_fillColor",(function(e,r,i){var o=t.color(e,r,i);return o&&n.premultiplyAlphaRGBA(o)||0}));else{var s=t.color;r._fillColor=s&&n.premultiplyAlphaRGBA(s)||0}return l.isFunction(t.miterLimit)?r._dynamicPropertyMap.set("_miterLimitCosine",(function(e,r,i){return l.getLimitCosine(t.miterLimit(e,r,i))})):r._miterLimitCosine=l.getLimitCosine(t.miterLimit),r._scaleFactor=t.scaleFactor||1,r._isDashed=t.isDashed,r.effects=t.effects,r.tessellationProperties._bitset=t.colorLocked?1:0,r._materialKey=t.materialKey,r._initializeTessellator(!0),r}return r.__extends(t,e),t.fromCIMLine=function(e){return new t(e)},t.prototype.bindFeature=function(e,t,r){var i=this,n=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,o){i[o]=e(n,t,r)})),this._halfWidth*=this._scaleFactor;var l=this._materialCache,u=(0,this._cimLineLayer.materialHash)(n,t,r),c=l.get(u),f=null;if(c&&h.ok(c.spriteMosaicItem)&&(f=c.spriteMosaicItem),f){this._hasPattern=!0;var p=f.rect,d=p.x+o.SPRITE_PADDING,m=p.y+o.SPRITE_PADDING,_=d+f.width,g=m+f.height;this.tessellationProperties._tl=s.i1616to32(d,m),this.tessellationProperties._br=s.i1616to32(_,g)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor,this.tessellationProperties._halfWidth=this._halfWidth,this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;var y=a.LineMaterialKey.load(this._materialKey);f&&(y.sdf=f.sdf,y.pattern=!0,y.textureBinding=f.textureBinding),this._materialKey=y.data},t}(u.default(c.default));t.default=f}).apply(null,i))||(e.exports=n)},cF6f:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("azm3"),r("hNI9"),r("fVTS"),r("Ed/z"),r("flWe"),r("3vQA")],void 0===(n=(function(e,t,r,i,n,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeshData=void 0;var l=function(){function e(e,t){this.vertexVectorsMap=e,this._currentIndex=-1,this._currentRecordOffset=0,this._currentMetricOffset=0;var r=4*(8*t.records+1),i=4*(20*t.metrics+1);this._bufDisplayObjects=new a.default(Uint32Array,4*(4*t.features+1)+4),this._bufDisplayRecords=new a.default(Uint32Array,r+4),this._bufMetrics=new a.default(Uint32Array,i+4),this._bufDisplayObjects.push(0),this._bufDisplayRecords.push(0),this._bufMetrics.push(0)}return Object.defineProperty(e.prototype,"vertexBuffersMap",{get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(var e=0;e<this.vertexVectorsMap.length;e++)this._vertexBuffersMap[e]=this.vertexVectorsMap[e].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this.vertexVectorsMap[e]},e.prototype.currentDisplayRecordCount=function(){return this._bufDisplayRecords[this._currentRecordOffset]},e.prototype.writeDisplayObject=function(e,t){this._bufDisplayObjects.incr(0),this._currentIndex=this._bufDisplayObjects.push(e),this._bufDisplayObjects.push(t),this._bufDisplayObjects.push(0),this._bufDisplayObjects.push(0),this._currentRecordOffset=0,this._currentMetricOffset=0},e.prototype.hasDisplayRecords=function(){return!(0===this._currentRecordOffset)},e.prototype.endDisplayObject=function(){this.hasDisplayRecords()||this._rollbackDisplayObject()},e.prototype.writeDisplayRecord=function(e,t,r,i,n,o,s,a){void 0===s&&(s=0),void 0===a&&(a=0),0===this._currentRecordOffset&&(this._currentRecordOffset=this._bufDisplayRecords.push(0),this._bufDisplayObjects.setValue(this._currentIndex+2,this._currentRecordOffset)),this._bufDisplayRecords.incr(this._currentRecordOffset),this._bufDisplayRecords.push(e),this._bufDisplayRecords.push(t),this._bufDisplayRecords.push(r),this._bufDisplayRecords.push(i),this._bufDisplayRecords.push(n),this._bufDisplayRecords.push(o),this._bufDisplayRecords.push(s),this._bufDisplayRecords.push(a)},e.prototype.writeMetrics=function(e){0===this._currentMetricOffset&&(this._bufDisplayObjects.setValue(this._currentIndex+3,this._bufMetrics.length),this._currentMetricOffset=this._bufMetrics.length),s.serializeList(this._bufMetrics,e)},e.deserializeDisplayObjects=function(e){var t=e.bufMetrics,a=e.bufRecords,l=new o.default(e.bufDisplayObjects),u=new o.default(a),c=new o.default(t),h=[],f=l.readInt32();for(u.readInt32(),c.readInt32();f--;){var p=l.readInt32(),d=l.readInt32(),m=l.readInt32(),_=l.readInt32(),g=new r(p);0!==d&&(g.insertAfter=d),0!==m&&(g.displayRecords=s.deserializeList(u,i,{id:p})),0!==_&&(g.metrics=s.deserializeList(c,n.default)),h.push(g)}return h},e.prototype.encode=function(e,t){for(var r={},i=0;i<this.vertexVectorsMap.length;i++){var n=this.vertexVectorsMap[i];r[i]={},n.transfer(r[i],t)}e.bufDisplayObjects=this._bufDisplayObjects.buffer(),e.bufRecords=this._bufDisplayRecords.buffer(),e.bufMetrics=this._bufMetrics.buffer(),t.push(e.bufDisplayObjects),t.push(e.bufMetrics),t.push(e.bufRecords),e.vertexBuffersMap=r,this.destroy()},e.prototype.destroy=function(){this.vertexVectorsMap=null,this._bufDisplayObjects=null,this._bufDisplayRecords=null,this._bufMetrics=null},e.prototype._rollbackDisplayObject=function(){this._bufDisplayObjects.decr(0),this._bufDisplayObjects.seek(this._bufDisplayObjects.length-4),this._currentIndex=this._bufDisplayObjects.length},e}();t.MeshData=l}).apply(null,i))||(e.exports=n)},cjzh:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("LxLY"),r("jBNx"),r("Zx0K"),r("ab6c"),r("4F/P"),r("tI6k"),r("tI6k"),r("Dos2"),r("m87x"),r("ZOLT"),r("MzWl")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u,c,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){function t(t,r,i,n,a,l,f,p,d,m,_,g,y,v,x,b,M,w,S,L,T){var E=e.call(this)||this;E.angle=n,E.height=f,E.width=l,E.xOffset=r*S,E.yOffset=i*S,E._markerPlacement=L,E.effects=T,E._anchorX=.5-(.5+b)*x.width/x.width,E._anchorY=.5-(.5+M)*x.height/x.height;var I=(1===v?1:0)|(_?1:0)<<1|(y?1:0)<<2|(g?1:0)<<3,C=x&&x.sdf,O=h.MarkerMaterialKey.load(t);O.sdf=C,O.pattern=!0,O.textureBinding=x.textureBinding,E._materialKey=O.data,E._fillColor=a,E._outlineColor=d,E._sizeOutlineWidth=c.i8888to32(Math.round(Math.min(Math.sqrt(128*l),255)),Math.round(Math.min(Math.sqrt(128*f),255)),Math.round(Math.min(Math.sqrt(128*m),255)),Math.round(Math.min(Math.sqrt(128*p),255)));var P=x.rect.x+u.SPRITE_PADDING,N=x.rect.y+u.SPRITE_PADDING,G=P+x.width,D=N+x.height;E._texUpperLeft=c.i1616to32(P,N),E._texUpperRight=c.i1616to32(G,N),E._texBottomLeft=c.i1616to32(P,D),E._texBottomRight=c.i1616to32(G,D),l*=w,f*=w,l*=S,f*=S;var k=Math.round(Math.min(64*w,255));E._bitestAndDistRatio=c.i8888to32(0,0,I,k),E._computedWidth=l,E._computedHeight=f;var R=s.vec2f32.create(),A=o.mat2df32.create();return E._applyTransformation(A,R),E}return r.__extends(t,e),t.fromCIMMarker=function(e,r){var o=e.size,s=(r&&r.width||1)/(r&&r.height||1)*e.scaleX,l=e.scaleSymbolsProportionally&&e.frameHeight?o/e.frameHeight:1,u=a.premultiplyAlphaRGBA(e.color),c=a.premultiplyAlphaRGBA(e.outlineColor),h=n.pt2px(o),f=h*s,p=n.pt2px(e.offsetX||0),d=n.pt2px(e.offsetY||0),m=n.pt2px(e.outlineWidth||0)*l,_=e.alignment||0,g=n.pt2px(e.referenceSize),y=e.rotation||0;e.rotateClockwise||(y=-y);var v=0,x=0,b=e.anchorPoint;return b&&(e.isAbsoluteAnchorPoint?o&&(v=-b.x/(o*s),x=b.y/o):(v=b.x,x=b.y)),new t(e.materialKey,p,d,y,u,f,h,g,c,m,e.colorLocked,e.scaleSymbolsProportionally,!1,_,r,v,x,e.sizeRatio,i.unwrapOr(e.scaleFactor,1),e.markerPlacement,e.effects)},t.fromPictureMarker=function(e,r){var i=Math.round(n.pt2px(e.width)),o=Math.round(n.pt2px(e.height)),s=l.PICTURE_FILL_COLOR,a=Math.round(n.pt2px(e.xoffset||0)),u=Math.round(n.pt2px(e.yoffset||0));return new t(e.materialKey,a,u,e.angle,s,i,o,o,0,0,!1,!1,!1,0,r,0,0,1,1,null,null)},t.fromSimpleMarker=function(e,r){var i=a.premultiplyAlphaRGBAArray(e.color),o=Math.round(n.pt2px(e.size)),s=o,l=Math.round(n.pt2px(e.xoffset||0)),u=Math.round(n.pt2px(e.yoffset||0)),c=e.style,h=e.outline,f=0|(h&&h.color&&a.premultiplyAlphaRGBAArray(h.color)),p=0|(h&&h.width&&Math.round(n.pt2px(h.width))),d=new t(e.materialKey,l,u,e.angle,i,o,s,s,f,p,!1,!1,"esriSMSCross"===c||"esriSMSX"===c,0,r,0,0,126/64,1,null,null);return d.boundsType="esriSMSCircle"===c?"circle":"square",d},t.fromLineSymbolMarker=function(e,r){var i,o=a.premultiplyAlphaRGBAArray(e.color),s=Math.round(n.pt2px(6*e.lineWidth)),l=s,u="cross"===e.style||"x"===e.style;switch(e.placement){case"begin-end":i="Both";break;case"begin":i="JustBegin";break;case"end":i="JustEnd";break;default:i="None"}var c={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:i,offsetAlongLine:0},h=new t(e.materialKey,0,0,0,o,s,l,l/6,o,u?Math.round(n.pt2px(e.lineWidth)):0,!1,!1,u,1,r,0,0,126/64,1,c,null);return h.boundsType="circle"===e.style?"circle":"square",h},t}(f.default(p.default));t.default=d}).apply(null,i))||(e.exports=n)},fVTS:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qsST"),r("ab6c"),r("tI6k"),r("x84Q"),r("flWe")],void 0===(n=(function(e,t,r,i,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.getLogger("esri/views/2d/engine/webgl/collisions/Metric"),l=function(){function e(e,t,r,n,o){this.id=e,this.range=t,this.boxes=null,this.minZoom=-1,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.placementPadding=0,this.anchor=i.vec2f32.fromValues(r,n),this.baseZoom=o}return e.prototype.add=function(e,t,r){e.x=e.x+t,e.y=e.y+r,this.bounds?this.boxes?(this.boxes.push(e),this.bounds.extend(e)):(this.boxes=[this.bounds,e],this.bounds=this.bounds.clone(),this.bounds.extend(e)):this.bounds=e},e.prototype.computeIndex=function(){var e=this.anchor[1],t=Math.floor(this.anchor[0]/n.COLLISION_BUCKET_SIZE),r=Math.floor(e/n.COLLISION_BUCKET_SIZE);this.xBucket=t,this.yBucket=r;var i=n.TILE_SIZE/n.COLLISION_BUCKET_SIZE;if(this.hasVV)return this.xOverflow=i,void(this.yOverflow=i);this.xOverflow=Math.min(i,Math.ceil(2*this.bounds.width/n.COLLISION_BUCKET_SIZE)),this.yOverflow=Math.min(i,Math.ceil(2*this.bounds.height/n.COLLISION_BUCKET_SIZE))},e.prototype.findCollisionDelta=function(e){var t=this.bounds.findCollisionDelta(e.bounds),r=this.boxes&&this.boxes.length,i=e.boxes&&e.boxes.length;return Math.abs(t)>n.COLLISION_MAX_ZOOM_DELTA||!r&&!i?t:r&&i?this._boxesToBoxes(e):r?this._boxesToBox(e):this._boxToBoxes(e)},e.prototype.computeVVOffset=function(e,t){t||a.error("mapview-labeling","Unable to compute label offset. Expected an evaluator function but found "+t);var r=this.size;if(this.hasVV){var i=t(e);r=isNaN(i)||null==i||i===1/0?this.size:i}this._computeOffset(r)},e.prototype.setPlacementOffset=function(e,t,r,i,n){this.hasVV=e,this.size=t,this.placementPadding=Math.round(r),this.directionX=i,this.directionY=n},e.prototype.clone=function(){var t=new e(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return t.minZoom=this.minZoom,this.bounds&&(t.bounds=this.bounds.clone()),this.boxes&&(t.boxes=this.boxes.map((function(e){return e.clone()}))),t.xBucket=this.xBucket,t.yBucket=this.yBucket,t.xOverflow=this.xOverflow,t.yOverflow=this.yOverflow,t.hasVV=this.hasVV,t.size=this.size,t.directionX=this.directionX,t.directionY=this.directionY,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},e.prototype._boxToBoxes=function(e){for(var t=-1/0,r=0,i=e.boxes;r<i.length;r++){var n=this.bounds.findCollisionDelta(i[r]);t=Math.max(n,t)}return t},e.prototype._boxesToBox=function(e){for(var t=this.boxes[0].findCollisionDelta(e.bounds),r=1;r<this.boxes.length;r++){var i=this.boxes[r].findCollisionDelta(e.bounds);t=Math.max(i,t)}return t},e.prototype._boxesToBoxes=function(e){for(var t=-1/0,r=0;r<this.boxes.length;r++)for(var i=this.boxes[r],n=0,o=e.boxes;n<o.length;n++){var s=i.findCollisionDelta(o[n]);t=Math.max(s,t)}return t},e.prototype._computeOffset=function(e){this.offsetX=this.directionX*(e/2+this.placementPadding),this.offsetY=this.directionY*(e/2+this.placementPadding)},e.prototype.serialize=function(e){return e.push(this.id),this.bounds.serialize(e),e.push(this.range.from),e.push(this.range.count),e.push(this.anchor[0]),e.push(this.anchor[1]),e.push(this.baseZoom),e.push(this.hasVV?1:0),e.push(this.size),e.writeF32(this.directionX),e.writeF32(this.directionY),e.push(this.offsetX),e.push(this.offsetY),e.push(this.placementPadding),s.serializeList(e,this.boxes),e},e.deserialize=function(t){var r=t.readInt32(),i=o.default.deserialize(t),n={from:t.readInt32(),count:t.readInt32()},a=t.readInt32(),l=t.readInt32(),u=t.readInt32(),c=t.readInt32(),h=t.readInt32(),f=t.readF32(),p=t.readF32(),d=t.readInt32(),m=t.readInt32(),_=t.readInt32(),g=s.deserializeList(t,o.default),y=new e(r,n,a,l,u);return y.bounds=i,y.boxes=g,y.setPlacementOffset(!!c,h,_,f,p),y.offsetX=d,y.offsetY=m,y.computeIndex(),c||y._computeOffset(h),y},e}();t.default=l}).apply(null,i))||(e.exports=n)},flWe:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeList=t.serializeList=void 0,t.serializeList=function(e,t){if(null!==t){e.push(t.length);for(var r=0,i=t;r<i.length;r++)i[r].serialize(e);return e}e.push(0)},t.deserializeList=function(e,t,r){for(var i=e.readInt32(),n=new Array(i),o=0;o<n.length;o++)n[o]=t.deserialize(e,r);return n}}).apply(null,i))||(e.exports=n)},hNI9:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("yai7"),r("apbF")],void 0===(n=(function(e,t,r,i){"use strict";return function(){function e(e,t,r,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.id=e,this.geometryType=t,this.materialKey=r,this.minZoom=i,this.maxZoom=n,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}return Object.defineProperty(e.prototype,"sortKey",{get:function(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.copy()},e.prototype.copy=function(){var t=new e(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t},e.prototype.setMeshDataFromBuffers=function(e,t,n){var o=new r;for(var s in t){for(var a=t[s].stride,l=t[s].data,u=[],c=i.strideToPackingFactor(a),h=0;h<a*e.vertexCount/c;++h)u[h]=l[h+a*e.vertexFrom/c];o.vertexData.set(s,u)}for(o.indexData.length=0,h=0;h<e.indexCount;++h)o.indexData[h]=n[h+e.indexFrom]-e.vertexFrom;o.vertexCount=e.vertexCount,this.meshData=o},e.prototype.readMeshDataFromBuffers=function(e,t){for(var n in this.meshData?this.meshData.clear():this.meshData=new r,e){for(var o=e[n].stride,s=e[n].data,a=[],l=i.strideToPackingFactor(o),u=0;u<o*this.vertexCount/l;++u)a[u]=s[u+o*this.vertexFrom/l];this.meshData.vertexData.set(n,a)}for(this.meshData.indexData.length=0,u=0;u<this.indexCount;++u)this.meshData.indexData[u]=t[u+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount},e.prototype.writeMeshDataToBuffers=function(e,t,r,n){for(var o in t)for(var s=t[o].stride,a=this.meshData.vertexData.get(o),l=t[o].data,u=i.strideToPackingFactor(s),c=0;c<s*this.meshData.vertexCount/u;++c)l[c+s*e/u]=a[c];for(c=0;c<this.meshData.indexData.length;++c)n[c+r]=this.meshData.indexData[c]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=r,this.indexCount=this.meshData.indexData.length},e.writeAllMeshDataToBuffers=function(e,t,r){for(var i=0,n=0,o=0,s=e;o<s.length;o++){var a=s[o];a.writeMeshDataToBuffers(i,t,n,r),i+=a.vertexCount,n+=a.indexCount}},e.prototype._computeSortKey=function(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType},e.prototype.serialize=function(e){return e.push(this.geometryType),e.push(this.materialKey),e.push(this.vertexFrom),e.push(this.vertexCount),e.push(this.indexFrom),e.push(this.indexCount),e.push(this.minZoom),e.push(this.maxZoom),e},e.deserialize=function(t,r){var i=t.readInt32(),n=t.readInt32(),o=new e(r.id,i,n);return o.vertexFrom=t.readInt32(),o.vertexCount=t.readInt32(),o.indexFrom=t.readInt32(),o.indexCount=t.readInt32(),o.minZoom=t.readInt32(),o.maxZoom=t.readInt32(),o},e}()}).apply(null,i))||(e.exports=n)},ivPt:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";function r(e,t,r,i,n,o,s){var u;if(s===function(e,t,r,i,n,o){for(var s=0,a=i,l=n-o;a<n;a+=o)s+=(e[l+t*o]-e[a+t*o])*(e[a+1+t*o]+e[l+1+t*o]),l=a;return s}(e,t,0,i,n,o)>0)for(var c=i;c<n;c+=o)u=a(c+t*o,e[c+t*o],e[c+1+t*o],u);else for(c=n-o;c>=i;c-=o)u=a(c+t*o,e[c+t*o],e[c+1+t*o],u);return u&&_(u,u.next)&&(l(u),u=u.next),u}function i(e,t){if(void 0===t&&(t=e),!e)return e;var r,i=e;do{if(r=!1,i.steiner||!_(i,i.next)&&0!==h(i.prev,i,i.next))i=i.next;else{if(l(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function n(e,t,r,a,u,c,h,f){if(e){!f&&c&&(e=function e(t,r,i,n){for(var o=void 0;o!==t;o=o.next){if(null===(o=o||t).z&&(o.z=m(o.x,o.y,r,i,n)),o.prev.next!==o||o.next.prev!==o)return o.prev.next=o,o.next.prev=o,e(t,r,i,n);o.prevZ=o.prev,o.nextZ=o.next}return t.prevZ.nextZ=null,t.prevZ=null,function(e){for(var t,r=1;;){var i=e,n=void 0;e=null,t=null;for(var o=0;i;){o++,n=i;for(var s=0;s<r&&n;s++)n=n.nextZ;for(var a=r;s>0||a>0&&n;){var l=void 0;0===s?(l=n,n=n.nextZ,a--):0!==a&&n?i.z<=n.z?(l=i,i=i.nextZ,s--):(l=n,n=n.nextZ,a--):(l=i,i=i.nextZ,s--),t?t.nextZ=l:e=l,l.prevZ=t,t=l}i=n}if(t.nextZ=null,r*=2,o<2)return e}}(t)}(e,a,u,c));for(var p=e;e.prev!==e.next;){var d=e.prev,_=e.next;if(c?s(e,a,u,c):o(e))t.push(d.index/r+h),t.push(e.index/r+h),t.push(_.index/r+h),l(e),e=_.next,p=_.next;else if((e=_)===p){f?1===f?n(e=y(e,t,r,h),t,r,a,u,c,h,2):2===f&&v(e,t,r,a,u,c,h):n(i(e),t,r,a,u,c,h,1);break}}}}function o(e){var t=e.prev,r=e,i=e.next;if(h(t,r,i)>=0)return!1;for(var n=e.next.next,o=n,s=0;n!==e.prev&&(0===s||n!==o);){if(s++,p(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&h(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function s(e,t,r,i){var n=e.prev,o=e,s=e.next;if(h(n,o,s)>=0)return!1;for(var a=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,l=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,u=m(n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,t,r,i),c=m(a,l,t,r,i),f=e.prevZ,d=e.nextZ;f&&f.z>=u&&d&&d.z<=c;){if(f!==e.prev&&f!==e.next&&p(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&h(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&p(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&h(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=u;){if(f!==e.prev&&f!==e.next&&p(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&h(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=c;){if(d!==e.prev&&d!==e.next&&p(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&h(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function a(e,t,r,i){var n=M.create(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function l(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function u(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function c(e,t){if(t=function(e,t){var r,i=t,n=e.x,o=e.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s){if(s=a,a===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===s)return r.prev;var l,u=r,c=r.x,h=r.y,f=1/0;for(i=r.next;i!==u;)n>=i.x&&i.x>=c&&n!==i.x&&p(o<h?n:s,o,c,h,o<h?s:n,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(n-i.x))<f||l===f&&i.x>r.x)&&d(i,e)&&(r=i,f=l),i=i.next;return r}(e,t)){var r=b(t,e);i(r,r.next)}}function h(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function f(e,t,r,i){return!!(_(e,t)&&_(r,i)||_(e,i)&&_(r,t))||h(e,t,r)>0!=h(e,t,i)>0&&h(r,i,e)>0!=h(r,i,t)>0}function p(e,t,r,i,n,o,s,a){return(n-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(i-a)-(r-s)*(t-a)>=0&&(r-s)*(o-a)-(n-s)*(i-a)>=0}function d(e,t){return h(e.prev,e,e.next)<0?h(e,t,e.next)>=0&&h(e,e.prev,t)>=0:h(e,t,e.prev)<0||h(e,e.next,t)<0}function m(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function _(e,t){return e.x===t.x&&e.y===t.y}function g(e,t){return e.x-t.x}function y(e,t,r,i){var n=e;do{var o=n.prev,s=n.next.next;!_(o,s)&&f(o,n,n.next,s)&&d(o,s)&&d(s,o)&&(t.push(o.index/r+i),t.push(n.index/r+i),t.push(s.index/r+i),l(n),l(n.next),n=e=s),n=n.next}while(n!==e);return n}function v(e,t,r,o,s,a,l){var u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.index!==c.index&&x(u,c)){var h=b(u,c);return u=i(u,u.next),h=i(h,h.next),n(u,t,r,o,s,a,l,0),void n(h,t,r,o,s,a,l,0)}c=c.next}u=u.next}while(u!==e)}function x(e,t){return e.next.index!==t.index&&e.prev.index!==t.index&&!function(e,t){var r=e;do{if(r.index!==e.index&&r.next.index!==e.index&&r.index!==t.index&&r.next.index!==t.index&&f(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&d(e,t)&&d(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)}function b(e,t){var r=M.create(e.index,e.x,e.y),i=M.create(t.index,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}Object.defineProperty(t,"__esModule",{value:!0}),t.bufcut=void 0,t.bufcut=function(e,t,o,s,a,l,h){S=0;var f=(s-o)*l,p=a&&a.length,d=p?(a[0]-o)*l:f,m=r(t,o,0,0,d,l,!0);if(m&&m.next!==m.prev){var _,y,v,x,b;if(p&&(m=function(e,t,n,o,s,a){for(var l=new Array,h=0,f=o.length;h<f;h++){var p=r(e,t,0,o[h]*a,h<f-1?o[h+1]*a:n*a,a,!1);p===p.next&&(p.steiner=!0),l.push(u(p))}l.sort(g);for(var d=0,m=l;d<m.length;d++)c(m[d],s),s=i(s,s.next);return s}(t,o,s,a,m,l)),f>80*l){_=v=t[0+o*l],y=x=t[1+o*l];for(var M=l;M<d;M+=l){var w=t[M+o*l],L=t[M+1+o*l];_=Math.min(_,w),y=Math.min(y,L),v=Math.max(v,w),x=Math.max(x,L)}b=0!==(b=Math.max(v-_,x-y))?1/b:0}n(m,e,l,_,y,b,h,0)}};for(var M=function(){function e(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return e.create=function(e,t,r){var i=w[S++];return i.index=e,i.x=t,i.y=r,i.prev=null,i.next=null,i.z=null,i.prevZ=null,i.nextZ=null,i.steiner=!1,i},e}(),w=new Array,S=0,L=0;L<8096;L++)w.push(new M)}).apply(null,i))||(e.exports=n)},kNAO:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("+6sX"),r("JNkf"),r("Dos2"),r("m87x"),r("nbTX")],void 0===(n=(function(e,t,r,i,n,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i.forceLibtess=!1,i.geometryType=n.WGLGeometryType.FILL,i}return r.__extends(t,e),t.prototype.writeMeshWithGeometry=function(e,t,r,n,o,l){var u=s.FillMaterialKey.load(this._materialKey),c=t.indexVector,h=t.getVector("geometry"),f=h.vertexCount,p=c.length,d=l?i.deltaDecodeGeometry(i.convertFromGeometry(l),2):r.readUnquantizedGeometry();if(d&&(d=a.clipMarshall(d))){var m=d.coords;!this.forceLibtess&&a.triangulate(c,d,f)||a.triangulateLibtess(m=[],c,d,f),this._write(h,r,o,m,u),e.writeDisplayRecord(this.geometryType,this._materialKey,f,h.vertexCount-f,p,c.length-p)}},t.prototype._write=function(e,t,r,i,n){for(var s=0;s<i.length;s+=2){var a=o.i1616to32(1*i[s],1*i[s+1]);e.data.push(a),e.data.push(r),n.dotDensity?e.data.writeF32(1/Math.abs(t.readGeometryArea())):(e.data.push(this.fillColor),e.data.push(this.tl),e.data.push(this.br),e.data.push(this.aux1),e.data.push(this.aux2),e.data.push(this.aux3))}},t}(e)}}).apply(null,i))||(e.exports=n)},lnyn:function(e,t,r){var i;void 0===(i=(function(){"use strict";
/**
     * @license
     * Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
     * Copyright 2015, Google Inc. All Rights Reserved.
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to
     * deal in the Software without restriction, including without limitation the
     * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
     * sell copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice including the dates of first publication and
     * either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
     * shall be included in all copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
     * SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
     * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
     * IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
     *
     * Original Code. The Original Code is: OpenGL Sample Implementation,
     * Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
     * Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
     * Copyright in any portions created by third parties is as indicated
     * elsewhere herein. All Rights Reserved.
     */var e={DEBUG:!1,assert:function(t,r){if(e.DEBUG&&!t)throw new Error("Assertion failed"+(r?": "+r:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};return e.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.geom.edgeEval=function(t,r,i){e.assert(e.geom.vertLeq(t,r)&&e.geom.vertLeq(r,i));var n=r.s-t.s,o=i.s-r.s;return n+o>0?n<o?r.t-t.t+n/(n+o)*(t.t-i.t):r.t-i.t+o/(n+o)*(i.t-t.t):0},e.geom.edgeSign=function(t,r,i){e.assert(e.geom.vertLeq(t,r)&&e.geom.vertLeq(r,i));var n=r.s-t.s,o=i.s-r.s;return n+o>0?(r.t-i.t)*n+(r.t-t.t)*o:0},e.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.geom.transEval=function(t,r,i){e.assert(e.geom.transLeq(t,r)&&e.geom.transLeq(r,i));var n=r.t-t.t,o=i.t-r.t;return n+o>0?n<o?r.s-t.s+n/(n+o)*(t.s-i.s):r.s-i.s+o/(n+o)*(i.s-t.s):0},e.geom.transSign=function(t,r,i){e.assert(e.geom.transLeq(t,r)&&e.geom.transLeq(r,i));var n=r.t-t.t,o=i.t-r.t;return n+o>0?(r.s-i.s)*n+(r.s-t.s)*o:0},e.geom.edgeGoesLeft=function(t){return e.geom.vertLeq(t.dst(),t.org)},e.geom.edgeGoesRight=function(t){return e.geom.vertLeq(t.org,t.dst())},e.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.geom.vertCCW=function(e,t,r){return e.s*(t.t-r.t)+t.s*(r.t-e.t)+r.s*(e.t-t.t)>=0},e.geom.interpolate_=function(e,t,r,i){return(e=e<0?0:e)<=(r=r<0?0:r)?0===r?(t+i)/2:t+e/(e+r)*(i-t):i+r/(e+r)*(t-i)},e.geom.edgeIntersect=function(t,r,i,n,o){var s,a,l;e.geom.vertLeq(t,r)||(l=t,t=r,r=l),e.geom.vertLeq(i,n)||(l=i,i=n,n=l),e.geom.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.geom.vertLeq(i,r)?e.geom.vertLeq(r,n)?((s=e.geom.edgeEval(t,i,r))+(a=e.geom.edgeEval(i,r,n))<0&&(s=-s,a=-a),o.s=e.geom.interpolate_(s,i.s,a,r.s)):((s=e.geom.edgeSign(t,i,r))+(a=-e.geom.edgeSign(t,n,r))<0&&(s=-s,a=-a),o.s=e.geom.interpolate_(s,i.s,a,n.s)):o.s=(i.s+r.s)/2,e.geom.transLeq(t,r)||(l=t,t=r,r=l),e.geom.transLeq(i,n)||(l=i,i=n,n=l),e.geom.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.geom.transLeq(i,r)?e.geom.transLeq(r,n)?((s=e.geom.transEval(t,i,r))+(a=e.geom.transEval(i,r,n))<0&&(s=-s,a=-a),o.t=e.geom.interpolate_(s,i.t,a,r.t)):((s=e.geom.transSign(t,i,r))+(a=-e.geom.transSign(t,n,r))<0&&(s=-s,a=-a),o.t=e.geom.interpolate_(s,i.t,a,n.t)):o.t=(i.t+r.t)/2},e.mesh={},e.mesh.makeEdge=function(t){var r=e.mesh.makeEdgePair_(t.eHead);return e.mesh.makeVertex_(r,t.vHead),e.mesh.makeVertex_(r.sym,t.vHead),e.mesh.makeFace_(r,t.fHead),r},e.mesh.meshSplice=function(t,r){var i=!1,n=!1;t!==r&&(r.org!==t.org&&(n=!0,e.mesh.killVertex_(r.org,t.org)),r.lFace!==t.lFace&&(i=!0,e.mesh.killFace_(r.lFace,t.lFace)),e.mesh.splice_(r,t),n||(e.mesh.makeVertex_(r,t.org),t.org.anEdge=t),i||(e.mesh.makeFace_(r,t.lFace),t.lFace.anEdge=t))},e.mesh.deleteEdge=function(t){var r=t.sym,i=!1;t.lFace!==t.rFace()&&(i=!0,e.mesh.killFace_(t.lFace,t.rFace())),t.oNext===t?e.mesh.killVertex_(t.org,null):(t.rFace().anEdge=t.oPrev(),t.org.anEdge=t.oNext,e.mesh.splice_(t,t.oPrev()),i||e.mesh.makeFace_(t,t.lFace)),r.oNext===r?(e.mesh.killVertex_(r.org,null),e.mesh.killFace_(r.lFace,null)):(t.lFace.anEdge=r.oPrev(),r.org.anEdge=r.oNext,e.mesh.splice_(r,r.oPrev())),e.mesh.killEdge_(t)},e.mesh.addEdgeVertex=function(t){var r=e.mesh.makeEdgePair_(t),i=r.sym;return e.mesh.splice_(r,t.lNext),r.org=t.dst(),e.mesh.makeVertex_(i,r.org),r.lFace=i.lFace=t.lFace,r},e.mesh.splitEdge=function(t){var r=e.mesh.addEdgeVertex(t).sym;return e.mesh.splice_(t.sym,t.sym.oPrev()),e.mesh.splice_(t.sym,r),t.sym.org=r.org,r.dst().anEdge=r.sym,r.sym.lFace=t.rFace(),r.winding=t.winding,r.sym.winding=t.sym.winding,r},e.mesh.connect=function(t,r){var i=!1,n=e.mesh.makeEdgePair_(t),o=n.sym;return r.lFace!==t.lFace&&(i=!0,e.mesh.killFace_(r.lFace,t.lFace)),e.mesh.splice_(n,t.lNext),e.mesh.splice_(o,r),n.org=t.dst(),o.org=r.org,n.lFace=o.lFace=t.lFace,t.lFace.anEdge=o,i||e.mesh.makeFace_(n,t.lFace),n},e.mesh.zapFace=function(t){var r,i=t.anEdge,n=i.lNext;do{if(n=(r=n).lNext,r.lFace=null,null===r.rFace()){r.oNext===r?e.mesh.killVertex_(r.org,null):(r.org.anEdge=r.oNext,e.mesh.splice_(r,r.oPrev()));var o=r.sym;o.oNext===o?e.mesh.killVertex_(o.org,null):(o.org.anEdge=o.oNext,e.mesh.splice_(o,o.oPrev())),e.mesh.killEdge_(r)}}while(r!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.mesh.meshUnion=function(e,t){var r=e.fHead,i=e.vHead,n=e.eHead,o=t.fHead,s=t.vHead,a=t.eHead;return o.next!==o&&(r.prev.next=o.next,o.next.prev=r.prev,o.prev.next=r,r.prev=o.prev),s.next!==s&&(i.prev.next=s.next,s.next.prev=i.prev,s.prev.next=i,i.prev=s.prev),a.next!==a&&(n.sym.next.sym.next=a.next,a.next.sym.next=n.sym.next,a.sym.next.sym.next=n,n.sym.next=a.sym.next),e},e.mesh.deleteMesh=function(e){},e.mesh.makeEdgePair_=function(t){var r=new e.GluHalfEdge,i=new e.GluHalfEdge,n=t.sym.next;return i.next=n,n.sym.next=r,r.next=t,t.sym.next=i,r.sym=i,r.oNext=r,r.lNext=i,i.sym=r,i.oNext=i,i.lNext=r,r},e.mesh.splice_=function(e,t){var r=e.oNext,i=t.oNext;r.sym.lNext=t,i.sym.lNext=e,e.oNext=i,t.oNext=r},e.mesh.makeVertex_=function(t,r){var i=r.prev,n=new e.GluVertex(r,i);i.next=n,r.prev=n,n.anEdge=t;var o=t;do{o.org=n,o=o.oNext}while(o!==t)},e.mesh.makeFace_=function(t,r){var i=r.prev,n=new e.GluFace(r,i);i.next=n,r.prev=n,n.anEdge=t,n.inside=r.inside;var o=t;do{o.lFace=n,o=o.lNext}while(o!==t)},e.mesh.killEdge_=function(e){var t=e.next,r=e.sym.next;t.sym.next=r,r.sym.next=t},e.mesh.killVertex_=function(e,t){var r=e.anEdge,i=r;do{i.org=t,i=i.oNext}while(i!==r);var n=e.prev,o=e.next;o.prev=n,n.next=o},e.mesh.killFace_=function(e,t){var r=e.anEdge,i=r;do{i.lFace=t,i=i.lNext}while(i!==r);var n=e.prev,o=e.next;o.prev=n,n.next=o},e.normal={},e.normal.S_UNIT_X_=1,e.normal.S_UNIT_Y_=0,e.normal.projectPolygon=function(t,r,i,n){var o=!1,s=[r,i,n];0===r&&0===i&&0===n&&(e.normal.computeNormal_(t,s),o=!0);var a,l=e.normal.longAxis_(s),u=t.mesh.vHead;if(e.TRUE_PROJECT){e.normal.normalize_(s);var c=[0,0,0],h=[0,0,0];c[l]=0,c[(l+1)%3]=e.normal.S_UNIT_X_,c[(l+2)%3]=e.normal.S_UNIT_Y_;var f=e.normal.dot_(c,s);for(c[0]-=f*s[0],c[1]-=f*s[1],c[2]-=f*s[2],e.normal.normalize_(c),h[0]=s[1]*c[2]-s[2]*c[1],h[1]=s[2]*c[0]-s[0]*c[2],h[2]=s[0]*c[1]-s[1]*c[0],e.normal.normalize_(h),a=u.next;a!==u;a=a.next)a.s=e.normal.dot_(a.coords,c),a.t=e.normal.dot_(a.coords,h)}else{var p=(l+1)%3,d=(l+2)%3,m=s[l]>0?1:-1;for(a=u.next;a!==u;a=a.next)a.s=a.coords[p],a.t=m*a.coords[d]}o&&e.normal.checkOrientation_(t)},e.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.normal.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];e.assert(r>0),r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.normal.computeNormal_=function(t,r){var i,n=[-2*e.GLU_TESS_MAX_COORD,-2*e.GLU_TESS_MAX_COORD,-2*e.GLU_TESS_MAX_COORD],o=[2*e.GLU_TESS_MAX_COORD,2*e.GLU_TESS_MAX_COORD,2*e.GLU_TESS_MAX_COORD],s=[],a=[],l=t.mesh.vHead;for(i=l.next;i!==l;i=i.next)for(var u=0;u<3;++u){var c=i.coords[u];c<o[u]&&(o[u]=c,a[u]=i),c>n[u]&&(n[u]=c,s[u]=i)}var h=0;if(n[1]-o[1]>n[0]-o[0]&&(h=1),n[2]-o[2]>n[h]-o[h]&&(h=2),o[h]>=n[h])return r[0]=0,r[1]=0,void(r[2]=1);var f=0,p=a[h],d=s[h],m=[0,0,0],_=[p.coords[0]-d.coords[0],p.coords[1]-d.coords[1],p.coords[2]-d.coords[2]],g=[0,0,0];for(i=l.next;i!==l;i=i.next){g[0]=i.coords[0]-d.coords[0],g[1]=i.coords[1]-d.coords[1],g[2]=i.coords[2]-d.coords[2],m[0]=_[1]*g[2]-_[2]*g[1],m[1]=_[2]*g[0]-_[0]*g[2],m[2]=_[0]*g[1]-_[1]*g[0];var y=m[0]*m[0]+m[1]*m[1]+m[2]*m[2];y>f&&(f=y,r[0]=m[0],r[1]=m[1],r[2]=m[2])}f<=0&&(r[0]=r[1]=r[2]=0,r[e.normal.longAxis_(_)]=1)},e.normal.checkOrientation_=function(e){for(var t=0,r=e.mesh.fHead,i=r.next;i!==r;i=i.next){var n=i.anEdge;if(!(n.winding<=0))do{t+=(n.org.s-n.dst().s)*(n.org.t+n.dst().t),n=n.lNext}while(n!==i.anEdge)}if(t<0)for(var o=e.mesh.vHead,s=o.next;s!==o;s=s.next)s.t=-s.t},e.render={},e.render.renderMesh=function(t,r,i){for(var n=!1,o=-1,s=r.fHead.prev;s!==r.fHead;s=s.prev)if(s.inside){n||(t.callBeginCallback(e.primitiveType.GL_TRIANGLES),n=!0);var a=s.anEdge;e.assert(a.lNext.lNext.lNext===a,"renderMesh called with non-triangulated mesh");do{if(i){var l=a.rFace().inside?0:1;o!==l&&t.callEdgeFlagCallback(!!(o=l))}t.callVertexCallback(a.org.data),a=a.lNext}while(a!==s.anEdge)}n&&t.callEndCallback()},e.render.renderBoundary=function(t,r){for(var i=r.fHead.next;i!==r.fHead;i=i.next)if(i.inside){t.callBeginCallback(e.primitiveType.GL_LINE_LOOP);var n=i.anEdge;do{t.callVertexCallback(n.org.data),n=n.lNext}while(n!==i.anEdge);t.callEndCallback()}},e.sweep={},e.sweep.SENTINEL_COORD_=4*e.GLU_TESS_MAX_COORD,e.sweep.TOLERANCE_NONZERO_=!1,e.sweep.computeInterior=function(t){var r;for(t.fatalError=!1,e.sweep.removeDegenerateEdges_(t),e.sweep.initPriorityQ_(t),e.sweep.initEdgeDict_(t);null!==(r=t.pq.extractMin());){for(;;){var i=t.pq.minimum();if(null===i||!e.geom.vertEq(i,r))break;i=t.pq.extractMin(),e.sweep.spliceMergeVertices_(t,r.anEdge,i.anEdge)}e.sweep.sweepEvent_(t,r)}var n=t.dict.getMin().getKey();t.event=n.eUp.org,e.sweep.doneEdgeDict_(t),e.sweep.donePriorityQ_(t),e.sweep.removeDegenerateFaces_(t.mesh),t.mesh.checkMesh()},e.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},e.sweep.edgeLeq_=function(t,r,i){var n=t.event,o=r.eUp,s=i.eUp;return o.dst()===n?s.dst()===n?e.geom.vertLeq(o.org,s.org)?e.geom.edgeSign(s.dst(),o.org,s.org)<=0:e.geom.edgeSign(o.dst(),s.org,o.org)>=0:e.geom.edgeSign(s.dst(),n,s.org)<=0:s.dst()===n?e.geom.edgeSign(o.dst(),n,o.org)>=0:e.geom.edgeEval(o.dst(),n,o.org)>=e.geom.edgeEval(s.dst(),n,s.org)},e.sweep.deleteRegion_=function(t,r){r.fixUpperEdge&&e.assert(0===r.eUp.winding),r.eUp.activeRegion=null,t.dict.deleteNode(r.nodeUp),r.nodeUp=null},e.sweep.fixUpperEdge_=function(t,r){e.assert(t.fixUpperEdge),e.mesh.deleteEdge(t.eUp),t.fixUpperEdge=!1,t.eUp=r,r.activeRegion=t},e.sweep.topLeftRegion_=function(t){var r=t.eUp.org;do{t=t.regionAbove()}while(t.eUp.org===r);if(t.fixUpperEdge){var i=e.mesh.connect(t.regionBelow().eUp.sym,t.eUp.lNext);e.sweep.fixUpperEdge_(t,i),t=t.regionAbove()}return t},e.sweep.topRightRegion_=function(e){var t=e.eUp.dst();do{e=e.regionAbove()}while(e.eUp.dst()===t);return e},e.sweep.addRegionBelow_=function(t,r,i){var n=new e.ActiveRegion;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),i.activeRegion=n,n},e.sweep.isWindingInside_=function(t,r){switch(t.windingRule){case e.windingRule.GLU_TESS_WINDING_ODD:return 0!=(1&r);case e.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==r;case e.windingRule.GLU_TESS_WINDING_POSITIVE:return r>0;case e.windingRule.GLU_TESS_WINDING_NEGATIVE:return r<0;case e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return r>=2||r<=-2}return e.assert(!1),!1},e.sweep.computeWinding_=function(t,r){r.windingNumber=r.regionAbove().windingNumber+r.eUp.winding,r.inside=e.sweep.isWindingInside_(t,r.windingNumber)},e.sweep.finishRegion_=function(t,r){var i=r.eUp,n=i.lFace;n.inside=r.inside,n.anEdge=i,e.sweep.deleteRegion_(t,r)},e.sweep.finishLeftRegions_=function(t,r,i){for(var n=r,o=r.eUp;n!==i;){n.fixUpperEdge=!1;var s=n.regionBelow(),a=s.eUp;if(a.org!==o.org){if(!s.fixUpperEdge){e.sweep.finishRegion_(t,n);break}a=e.mesh.connect(o.lPrev(),a.sym),e.sweep.fixUpperEdge_(s,a)}o.oNext!==a&&(e.mesh.meshSplice(a.oPrev(),a),e.mesh.meshSplice(o,a)),e.sweep.finishRegion_(t,n),o=s.eUp,n=s}return o},e.sweep.addRightEdges_=function(t,r,i,n,o,s){var a=!0,l=i;do{e.assert(e.geom.vertLeq(l.org,l.dst())),e.sweep.addRegionBelow_(t,r,l.sym),l=l.oNext}while(l!==n);null===o&&(o=r.regionBelow().eUp.rPrev());for(var u,c=r,h=o;(l=(u=c.regionBelow()).eUp.sym).org===h.org;)l.oNext!==h&&(e.mesh.meshSplice(l.oPrev(),l),e.mesh.meshSplice(h.oPrev(),l)),u.windingNumber=c.windingNumber-l.winding,u.inside=e.sweep.isWindingInside_(t,u.windingNumber),c.dirty=!0,!a&&e.sweep.checkForRightSplice_(t,c)&&(e.sweep.addWinding_(l,h),e.sweep.deleteRegion_(t,c),e.mesh.deleteEdge(h)),a=!1,c=u,h=l;c.dirty=!0,e.assert(c.windingNumber-l.winding===u.windingNumber),s&&e.sweep.walkDirtyRegions_(t,c)},e.sweep.callCombine_=function(t,r,i,n,o){var s=[r.coords[0],r.coords[1],r.coords[2]];r.data=null,r.data=t.callCombineCallback(s,i,n),null===r.data&&(o?t.fatalError||(t.callErrorCallback(e.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),t.fatalError=!0):r.data=i[0])},e.sweep.spliceMergeVertices_=function(t,r,i){var n=[null,null,null,null];n[0]=r.org.data,n[1]=i.org.data,e.sweep.callCombine_(t,r.org,n,[.5,.5,0,0],!1),e.mesh.meshSplice(r,i)},e.sweep.vertexWeights_=function(t,r,i,n,o){var s=e.geom.vertL1dist(r,t),a=e.geom.vertL1dist(i,t),l=o,u=o+1;n[l]=.5*a/(s+a),n[u]=.5*s/(s+a),t.coords[0]+=n[l]*r.coords[0]+n[u]*i.coords[0],t.coords[1]+=n[l]*r.coords[1]+n[u]*i.coords[1],t.coords[2]+=n[l]*r.coords[2]+n[u]*i.coords[2]},e.sweep.getIntersectData_=function(t,r,i,n,o,s){var a=[0,0,0,0],l=[i.data,n.data,o.data,s.data];r.coords[0]=r.coords[1]=r.coords[2]=0,e.sweep.vertexWeights_(r,i,n,a,0),e.sweep.vertexWeights_(r,o,s,a,2),e.sweep.callCombine_(t,r,l,a,!0)},e.sweep.checkForRightSplice_=function(t,r){var i=r.regionBelow(),n=r.eUp,o=i.eUp;if(e.geom.vertLeq(n.org,o.org)){if(e.geom.edgeSign(o.dst(),n.org,o.org)>0)return!1;e.geom.vertEq(n.org,o.org)?n.org!==o.org&&(t.pq.remove(n.org.pqHandle),e.sweep.spliceMergeVertices_(t,o.oPrev(),n)):(e.mesh.splitEdge(o.sym),e.mesh.meshSplice(n,o.oPrev()),r.dirty=i.dirty=!0)}else{if(e.geom.edgeSign(n.dst(),o.org,n.org)<0)return!1;r.regionAbove().dirty=r.dirty=!0,e.mesh.splitEdge(n.sym),e.mesh.meshSplice(o.oPrev(),n)}return!0},e.sweep.checkForLeftSplice_=function(t,r){var i,n=r.regionBelow(),o=r.eUp,s=n.eUp;if(e.assert(!e.geom.vertEq(o.dst(),s.dst())),e.geom.vertLeq(o.dst(),s.dst())){if(e.geom.edgeSign(o.dst(),s.dst(),o.org)<0)return!1;r.regionAbove().dirty=r.dirty=!0,i=e.mesh.splitEdge(o),e.mesh.meshSplice(s.sym,i),i.lFace.inside=r.inside}else{if(e.geom.edgeSign(s.dst(),o.dst(),s.org)>0)return!1;r.dirty=n.dirty=!0,i=e.mesh.splitEdge(s),e.mesh.meshSplice(o.lNext,s.sym),i.rFace().inside=r.inside}return!0},e.sweep.checkForIntersect_=function(t,r){var i=r.regionBelow(),n=r.eUp,o=i.eUp,s=n.org,a=o.org,l=n.dst(),u=o.dst(),c=new e.GluVertex;if(e.assert(!e.geom.vertEq(u,l)),e.assert(e.geom.edgeSign(l,t.event,s)<=0),e.assert(e.geom.edgeSign(u,t.event,a)>=0),e.assert(s!==t.event&&a!==t.event),e.assert(!r.fixUpperEdge&&!i.fixUpperEdge),s===a)return!1;if(Math.min(s.t,l.t)>Math.max(a.t,u.t))return!1;if(e.geom.vertLeq(s,a)){if(e.geom.edgeSign(u,s,a)>0)return!1}else if(e.geom.edgeSign(l,a,s)<0)return!1;e.geom.edgeIntersect(l,s,u,a,c),e.assert(Math.min(s.t,l.t)<=c.t),e.assert(c.t<=Math.max(a.t,u.t)),e.assert(Math.min(u.s,l.s)<=c.s),e.assert(c.s<=Math.max(a.s,s.s)),e.geom.vertLeq(c,t.event)&&(c.s=t.event.s,c.t=t.event.t);var h=e.geom.vertLeq(s,a)?s:a;if(e.geom.vertLeq(h,c)&&(c.s=h.s,c.t=h.t),e.geom.vertEq(c,s)||e.geom.vertEq(c,a))return e.sweep.checkForRightSplice_(t,r),!1;if(!e.geom.vertEq(l,t.event)&&e.geom.edgeSign(l,t.event,c)>=0||!e.geom.vertEq(u,t.event)&&e.geom.edgeSign(u,t.event,c)<=0){if(u===t.event)return e.mesh.splitEdge(n.sym),e.mesh.meshSplice(o.sym,n),n=(r=e.sweep.topLeftRegion_(r)).regionBelow().eUp,e.sweep.finishLeftRegions_(t,r.regionBelow(),i),e.sweep.addRightEdges_(t,r,n.oPrev(),n,n,!0),!0;if(l===t.event){e.mesh.splitEdge(o.sym),e.mesh.meshSplice(n.lNext,o.oPrev()),i=r;var f=(r=e.sweep.topRightRegion_(r)).regionBelow().eUp.rPrev();return i.eUp=o.oPrev(),o=e.sweep.finishLeftRegions_(t,i,null),e.sweep.addRightEdges_(t,r,o.oNext,n.rPrev(),f,!0),!0}return e.geom.edgeSign(l,t.event,c)>=0&&(r.regionAbove().dirty=r.dirty=!0,e.mesh.splitEdge(n.sym),n.org.s=t.event.s,n.org.t=t.event.t),e.geom.edgeSign(u,t.event,c)<=0&&(r.dirty=i.dirty=!0,e.mesh.splitEdge(o.sym),o.org.s=t.event.s,o.org.t=t.event.t),!1}return e.mesh.splitEdge(n.sym),e.mesh.splitEdge(o.sym),e.mesh.meshSplice(o.oPrev(),n),n.org.s=c.s,n.org.t=c.t,n.org.pqHandle=t.pq.insert(n.org),e.sweep.getIntersectData_(t,n.org,s,l,a,u),r.regionAbove().dirty=r.dirty=i.dirty=!0,!1},e.sweep.walkDirtyRegions_=function(t,r){for(var i=r.regionBelow();;){for(;i.dirty;)r=i,i=i.regionBelow();if(!r.dirty&&(i=r,null===(r=r.regionAbove())||!r.dirty))return;r.dirty=!1;var n=r.eUp,o=i.eUp;if(n.dst()!==o.dst()&&e.sweep.checkForLeftSplice_(t,r)&&(i.fixUpperEdge?(e.sweep.deleteRegion_(t,i),e.mesh.deleteEdge(o),o=(i=r.regionBelow()).eUp):r.fixUpperEdge&&(e.sweep.deleteRegion_(t,r),e.mesh.deleteEdge(n),n=(r=i.regionAbove()).eUp)),n.org!==o.org)if(n.dst()===o.dst()||r.fixUpperEdge||i.fixUpperEdge||n.dst()!==t.event&&o.dst()!==t.event)e.sweep.checkForRightSplice_(t,r);else if(e.sweep.checkForIntersect_(t,r))return;n.org===o.org&&n.dst()===o.dst()&&(e.sweep.addWinding_(o,n),e.sweep.deleteRegion_(t,r),e.mesh.deleteEdge(n),r=i.regionAbove())}},e.sweep.connectRightVertex_=function(t,r,i){var n,o=i.oNext,s=r.regionBelow(),a=r.eUp,l=s.eUp,u=!1;a.dst()!==l.dst()&&e.sweep.checkForIntersect_(t,r),e.geom.vertEq(a.org,t.event)&&(e.mesh.meshSplice(o.oPrev(),a),o=(r=e.sweep.topLeftRegion_(r)).regionBelow().eUp,e.sweep.finishLeftRegions_(t,r.regionBelow(),s),u=!0),e.geom.vertEq(l.org,t.event)&&(e.mesh.meshSplice(i,l.oPrev()),i=e.sweep.finishLeftRegions_(t,s,null),u=!0),u?e.sweep.addRightEdges_(t,r,i.oNext,o,o,!0):(n=e.geom.vertLeq(l.org,a.org)?l.oPrev():a,n=e.mesh.connect(i.lPrev(),n),e.sweep.addRightEdges_(t,r,n,n.oNext,n.oNext,!1),n.sym.activeRegion.fixUpperEdge=!0,e.sweep.walkDirtyRegions_(t,r))},e.sweep.connectLeftDegenerate_=function(t,r,i){var n=r.eUp;if(e.geom.vertEq(n.org,i))return e.assert(e.sweep.TOLERANCE_NONZERO_),void(e.sweep.TOLERANCE_NONZERO_&&e.sweep.spliceMergeVertices_(t,n,i.anEdge));if(!e.geom.vertEq(n.dst(),i))return e.mesh.splitEdge(n.sym),r.fixUpperEdge&&(e.mesh.deleteEdge(n.oNext),r.fixUpperEdge=!1),e.mesh.meshSplice(i.anEdge,n),void e.sweep.sweepEvent_(t,i);if(e.assert(e.sweep.TOLERANCE_NONZERO_),e.sweep.TOLERANCE_NONZERO_){var o=(r=e.sweep.topRightRegion_(r)).regionBelow(),s=o.eUp.sym,a=s.oNext,l=a;o.fixUpperEdge&&(e.assert(a!==s),e.sweep.deleteRegion_(t,o),e.mesh.deleteEdge(s),s=a.oPrev()),e.mesh.meshSplice(i.anEdge,s),e.geom.edgeGoesLeft(a)||(a=null),e.sweep.addRightEdges_(t,r,s.oNext,l,a,!0)}},e.sweep.connectLeftVertex_=function(t,r){var i=new e.ActiveRegion;i.eUp=r.anEdge.sym;var n=t.dict.search(i).getKey(),o=n.regionBelow(),s=n.eUp,a=o.eUp;if(0!==e.geom.edgeSign(s.dst(),r,s.org)){var l,u=e.geom.vertLeq(a.dst(),s.dst())?n:o;n.inside||u.fixUpperEdge?(l=u===n?e.mesh.connect(r.anEdge.sym,s.lNext):e.mesh.connect(a.dNext(),r.anEdge).sym,u.fixUpperEdge?e.sweep.fixUpperEdge_(u,l):e.sweep.computeWinding_(t,e.sweep.addRegionBelow_(t,n,l)),e.sweep.sweepEvent_(t,r)):e.sweep.addRightEdges_(t,n,r.anEdge,r.anEdge,null,!0)}else e.sweep.connectLeftDegenerate_(t,n,r)},e.sweep.sweepEvent_=function(t,r){t.event=r;for(var i=r.anEdge;null===i.activeRegion;)if((i=i.oNext)===r.anEdge)return void e.sweep.connectLeftVertex_(t,r);var n=e.sweep.topLeftRegion_(i.activeRegion),o=n.regionBelow(),s=o.eUp,a=e.sweep.finishLeftRegions_(t,o,null);a.oNext===s?e.sweep.connectRightVertex_(t,n,a):e.sweep.addRightEdges_(t,n,a.oNext,s,s,!0)},e.sweep.addSentinel_=function(t,r){var i=new e.ActiveRegion,n=e.mesh.makeEdge(t.mesh);n.org.s=e.sweep.SENTINEL_COORD_,n.org.t=r,n.dst().s=-e.sweep.SENTINEL_COORD_,n.dst().t=r,t.event=n.dst(),i.eUp=n,i.windingNumber=0,i.inside=!1,i.fixUpperEdge=!1,i.sentinel=!0,i.dirty=!1,i.nodeUp=t.dict.insert(i)},e.sweep.initEdgeDict_=function(t){t.dict=new e.Dict(t,e.sweep.edgeLeq_),e.sweep.addSentinel_(t,-e.sweep.SENTINEL_COORD_),e.sweep.addSentinel_(t,e.sweep.SENTINEL_COORD_)},e.sweep.doneEdgeDict_=function(t){for(var r,i=0;null!==(r=t.dict.getMin().getKey());)r.sentinel||(e.assert(r.fixUpperEdge),e.assert(1==++i)),e.assert(0===r.windingNumber),e.sweep.deleteRegion_(t,r);t.dict=null},e.sweep.removeDegenerateEdges_=function(t){for(var r,i=t.mesh.eHead,n=i.next;n!==i;n=r){r=n.next;var o=n.lNext;e.geom.vertEq(n.org,n.dst())&&n.lNext.lNext!==n&&(e.sweep.spliceMergeVertices_(t,o,n),e.mesh.deleteEdge(n),o=(n=o).lNext),o.lNext===n&&(o!==n&&(o!==r&&o!==r.sym||(r=r.next),e.mesh.deleteEdge(o)),n!==r&&n!==r.sym||(r=r.next),e.mesh.deleteEdge(n))}},e.sweep.initPriorityQ_=function(t){var r=new e.PriorityQ;t.pq=r;var i,n=t.mesh.vHead;for(i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);r.init()},e.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},e.sweep.removeDegenerateFaces_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r){r=i.next;var n=i.anEdge;e.assert(n.lNext!==n),n.lNext.lNext===n&&(e.sweep.addWinding_(n.oNext,n),e.mesh.deleteEdge(n))}},e.tessmono={},e.tessmono.tessellateMonoRegion_=function(t){var r=t.anEdge;for(e.assert(r.lNext!==r&&r.lNext.lNext!==r);e.geom.vertLeq(r.dst(),r.org);r=r.lPrev());for(;e.geom.vertLeq(r.org,r.dst());r=r.lNext);for(var i,n=r.lPrev();r.lNext!==n;)if(e.geom.vertLeq(r.dst(),n.org)){for(;n.lNext!==r&&(e.geom.edgeGoesLeft(n.lNext)||e.geom.edgeSign(n.org,n.dst(),n.lNext.dst())<=0);)n=(i=e.mesh.connect(n.lNext,n)).sym;n=n.lPrev()}else{for(;n.lNext!==r&&(e.geom.edgeGoesRight(r.lPrev())||e.geom.edgeSign(r.dst(),r.org,r.lPrev().org)>=0);)i=e.mesh.connect(r,r.lPrev()),r=i.sym;r=r.lNext}for(e.assert(n.lNext!==r);n.lNext.lNext!==r;)n=(i=e.mesh.connect(n.lNext,n)).sym},e.tessmono.tessellateInterior=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside&&e.tessmono.tessellateMonoRegion_(i)},e.tessmono.discardExterior=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||e.mesh.zapFace(i)},e.tessmono.setWindingNumber=function(t,r,i){for(var n,o=t.eHead.next;o!==t.eHead;o=n)n=o.next,o.rFace().inside!==o.lFace.inside?o.winding=o.lFace.inside?r:-r:i?e.mesh.deleteEdge(o):o.winding=0},e.Dict=function(t,r){this.head_=new e.DictNode,this.frame_=t,this.leq_=r},e.Dict.prototype.deleteDict_=function(){},e.Dict.prototype.insertBefore=function(t,r){do{t=t.prev}while(null!==t.key&&!this.leq_(this.frame_,t.key,r));var i=new e.DictNode(r,t.next,t);return t.next.prev=i,t.next=i,i},e.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},e.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},e.Dict.prototype.search=function(e){var t=this.head_;do{t=t.next}while(null!==t.key&&!this.leq_(this.frame_,e,t.key));return t},e.Dict.prototype.getMin=function(){return this.head_.next},e.Dict.prototype.getMax=function(){return this.head_.prev},e.DictNode=function(e,t,r){this.key=e||null,this.next=t||this,this.prev=r||this},e.DictNode.prototype.getKey=function(){return this.key},e.DictNode.prototype.getSuccessor=function(){return this.next},e.DictNode.prototype.getPredecessor=function(){return this.prev},e.GluTesselator=function(){this.state_=e.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.errorCallback_=null,this.normal_=[0,0,0],this.windingRule=e.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.combineCallback_=null,this.boundaryOnly_=!1,this.beginCallback_=null,this.edgeFlagCallback_=null,this.vertexCallback_=null,this.endCallback_=null,this.meshCallback_=null,this.polygonData_=null},e.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},e.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(e.GluTesselator.tessState_.T_DORMANT)},e.GluTesselator.prototype.gluTessProperty=function(t,r){switch(t){case e.gluEnum.GLU_TESS_TOLERANCE:return;case e.gluEnum.GLU_TESS_WINDING_RULE:var i=r;switch(i){case e.windingRule.GLU_TESS_WINDING_ODD:case e.windingRule.GLU_TESS_WINDING_NONZERO:case e.windingRule.GLU_TESS_WINDING_POSITIVE:case e.windingRule.GLU_TESS_WINDING_NEGATIVE:case e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=i)}break;case e.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly_=!!r);default:return void this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}this.callErrorCallback(e.gluEnum.GLU_INVALID_VALUE)},e.GluTesselator.prototype.gluGetTessProperty=function(t){switch(t){case e.gluEnum.GLU_TESS_TOLERANCE:return 0;case e.gluEnum.GLU_TESS_WINDING_RULE:var r=this.windingRule;return e.assert(r===e.windingRule.GLU_TESS_WINDING_ODD||r===e.windingRule.GLU_TESS_WINDING_NONZERO||r===e.windingRule.GLU_TESS_WINDING_POSITIVE||r===e.windingRule.GLU_TESS_WINDING_NEGATIVE||r===e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),r;case e.gluEnum.GLU_TESS_BOUNDARY_ONLY:return e.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}return!1},e.GluTesselator.prototype.gluTessNormal=function(e,t,r){this.normal_[0]=e,this.normal_[1]=t,this.normal_[2]=r},e.GluTesselator.prototype.gluTessCallback=function(t,r){var i=r||null;switch(t){case e.gluEnum.GLU_TESS_BEGIN:case e.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.beginCallback_=i);case e.gluEnum.GLU_TESS_EDGE_FLAG:case e.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.edgeFlagCallback_=i);case e.gluEnum.GLU_TESS_VERTEX:case e.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.vertexCallback_=i);case e.gluEnum.GLU_TESS_END:case e.gluEnum.GLU_TESS_END_DATA:return void(this.endCallback_=i);case e.gluEnum.GLU_TESS_ERROR:case e.gluEnum.GLU_TESS_ERROR_DATA:return void(this.errorCallback_=i);case e.gluEnum.GLU_TESS_COMBINE:case e.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.combineCallback_=i);case e.gluEnum.GLU_TESS_MESH:return void(this.meshCallback_=i);default:return void this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}},e.GluTesselator.prototype.gluTessVertex=function(t,r){var i=!1,n=[0,0,0];this.requireState_(e.GluTesselator.tessState_.T_IN_CONTOUR);for(var o=0;o<3;++o){var s=t[o];s<-e.GLU_TESS_MAX_COORD&&(s=-e.GLU_TESS_MAX_COORD,i=!0),s>e.GLU_TESS_MAX_COORD&&(s=e.GLU_TESS_MAX_COORD,i=!0),n[o]=s}i&&this.callErrorCallback(e.errorType.GLU_TESS_COORD_TOO_LARGE),this.addVertex_(n,r)},e.GluTesselator.prototype.gluTessBeginPolygon=function(t){this.requireState_(e.GluTesselator.tessState_.T_DORMANT),this.state_=e.GluTesselator.tessState_.T_IN_POLYGON,this.mesh=new e.GluMesh,this.polygonData_=t},e.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(e.GluTesselator.tessState_.T_IN_POLYGON),this.state_=e.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null},e.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(e.GluTesselator.tessState_.T_IN_CONTOUR),this.state_=e.GluTesselator.tessState_.T_IN_POLYGON},e.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(e.GluTesselator.tessState_.T_IN_POLYGON),this.state_=e.GluTesselator.tessState_.T_DORMANT,e.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]),e.sweep.computeInterior(this),!this.fatalError){var t=this.mesh;if(this.boundaryOnly_?e.tessmono.setWindingNumber(t,1,!0):e.tessmono.tessellateInterior(t),this.mesh.checkMesh(),(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)&&(this.boundaryOnly_?e.render.renderBoundary(this,this.mesh):e.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_)),this.meshCallback_)return e.tessmono.discardExterior(this.mesh),this.meshCallback_(this.mesh),this.mesh=null,void(this.polygonData_=null)}e.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},e.GluTesselator.prototype.requireState_=function(e){this.state_!==e&&this.gotoState_(e)},e.GluTesselator.prototype.gotoState_=function(t){for(;this.state_!==t;)if(this.state_<t)switch(this.state_){case e.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case e.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case e.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case e.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}},e.GluTesselator.prototype.addVertex_=function(t,r){var i=this.lastEdge_;null===i?(i=e.mesh.makeEdge(this.mesh),e.mesh.meshSplice(i,i.sym)):(e.mesh.splitEdge(i),i=i.lNext),i.org.data=r,i.org.coords[0]=t[0],i.org.coords[1]=t[1],i.org.coords[2]=t[2],i.winding=1,i.sym.winding=-1,this.lastEdge_=i},e.GluTesselator.prototype.callBeginCallback=function(e){this.beginCallback_&&this.beginCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callVertexCallback=function(e){this.vertexCallback_&&this.vertexCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callEdgeFlagCallback=function(e){this.edgeFlagCallback_&&this.edgeFlagCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)},e.GluTesselator.prototype.callCombineCallback=function(e,t,r){return this.combineCallback_&&this.combineCallback_(e,t,r,this.polygonData_)||null},e.GluTesselator.prototype.callErrorCallback=function(e){this.errorCallback_&&this.errorCallback_(e,this.polygonData_)},e.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.inside=!1},e.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},e.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},e.GluHalfEdge.prototype.dst=function(){return this.sym.org},e.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},e.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},e.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},e.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},e.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},e.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},e.GluMesh=function(){this.vHead=new e.GluVertex,this.fHead=new e.GluFace,this.eHead=new e.GluHalfEdge,this.eHeadSym=new e.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},e.GluMesh.prototype.checkMesh=function(){if(e.DEBUG){var t,r,i,n=this.fHead,o=this.vHead,s=this.eHead,a=n;for(a=n;(r=a.next)!==n;a=r){e.assert(r.prev===a),t=r.anEdge;do{e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t),e.assert(t.lFace===r),t=t.lNext}while(t!==r.anEdge)}e.assert(r.prev===a&&null===r.anEdge);var l=o;for(l=o;(i=l.next)!==o;l=i){e.assert(i.prev===l),t=i.anEdge;do{e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t),e.assert(t.org===i),t=t.oNext}while(t!==i.anEdge)}e.assert(i.prev===l&&null===i.anEdge&&null===i.data);var u=s;for(u=s;(t=u.next)!==s;u=t)e.assert(t.sym.next===u.sym),e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(null!==t.org),e.assert(null!==t.dst()),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t);e.assert(t.sym.next===u.sym&&t.sym===this.eHeadSym&&t.sym.sym===t&&null===t.org&&null===t.dst()&&null===t.lFace&&null===t.rFace())}},e.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0},e.PriorityQ=function(){this.verts_=[],this.order_=null,this.size_=0,this.initialized_=!1,this.heap_=new e.PriorityQHeap},e.PriorityQ.prototype.deleteQ=function(){this.heap_=null,this.order_=null,this.verts_=null},e.PriorityQ.prototype.init=function(){this.order_=[];for(var t=0;t<this.size_;t++)this.order_[t]=t;var r,i=(r=this.verts_,function(t,i){return e.geom.vertLeq(r[t],r[i])?1:-1});if(this.order_.sort(i),this.initialized_=!0,this.heap_.init(),e.DEBUG){var n=0+this.size_-1;for(t=0;t<n;++t)e.assert(e.geom.vertLeq(this.verts_[this.order_[t+1]],this.verts_[this.order_[t]]))}},e.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_++;return this.verts_[t]=e,-(t+1)},e.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var t=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var r=this.heap_.minimum();if(e.geom.vertLeq(r,t))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.verts_[this.order_[this.size_-1]]);return t},e.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var t=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var r=this.heap_.minimum();if(e.geom.vertLeq(r,t))return r}return t},e.PriorityQ.prototype.remove=function(t){if(t>=0)this.heap_.remove(t);else for(e.assert((t=-(t+1))<this.verts_.length&&null!==this.verts_[t]),this.verts_[t]=null;this.size_>0&&null===this.verts_[this.order_[this.size_-1]];)--this.size_},e.PriorityQHeap=function(){this.heap_=e.PriorityQHeap.reallocNumeric_([0],e.PriorityQHeap.INIT_SIZE_+1),this.verts_=[null,null],this.handles_=[0,0],this.size_=0,this.max_=e.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.heap_[1]=1},e.PriorityQHeap.INIT_SIZE_=32,e.PriorityQHeap.reallocNumeric_=function(e,t){for(var r=new Array(t),i=0;i<e.length;i++)r[i]=e[i];for(;i<t;i++)r[i]=0;return r},e.PriorityQHeap.prototype.init=function(){for(var e=this.size_;e>=1;--e)this.floatDown_(e);this.initialized_=!0},e.PriorityQHeap.prototype.insert=function(t){var r,i=++this.size_;return 2*i>this.max_&&(this.max_*=2,this.handles_=e.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1)),0===this.freeList_?r=i:(r=this.freeList_,this.freeList_=this.handles_[this.freeList_]),this.verts_[r]=t,this.handles_[r]=i,this.heap_[i]=r,this.initialized_&&this.floatUp_(i),r},e.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},e.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]},e.PriorityQHeap.prototype.extractMin=function(){var e=this.heap_,t=this.verts_,r=this.handles_,i=e[1],n=t[i];return this.size_>0&&(e[1]=e[this.size_],r[e[1]]=1,t[i]=null,r[i]=this.freeList_,this.freeList_=i,--this.size_>0&&this.floatDown_(1)),n},e.PriorityQHeap.prototype.remove=function(t){var r=this.heap_,i=this.verts_,n=this.handles_;e.assert(t>=1&&t<=this.max_&&null!==i[t]);var o=n[t];r[o]=r[this.size_],n[r[o]]=o,o<=--this.size_&&(o<=1||e.geom.vertLeq(i[r[o>>1]],i[r[o]])?this.floatDown_(o):this.floatUp_(o)),i[t]=null,n[t]=this.freeList_,this.freeList_=t},e.PriorityQHeap.prototype.floatDown_=function(t){for(var r=this.heap_,i=this.verts_,n=this.handles_,o=t,s=r[o];;){var a=o<<1;a<this.size_&&e.geom.vertLeq(i[r[a+1]],i[r[a]])&&(a+=1),e.assert(a<=this.max_);var l=r[a];if(a>this.size_||e.geom.vertLeq(i[s],i[l]))return r[o]=s,void(n[s]=o);r[o]=l,n[l]=o,o=a}},e.PriorityQHeap.prototype.floatUp_=function(t){for(var r=this.heap_,i=this.verts_,n=this.handles_,o=t,s=r[o];;){var a=o>>1,l=r[a];if(0===a||e.geom.vertLeq(i[l],i[s]))return r[o]=s,void(n[s]=o);r[o]=l,n[l]=o,o=a}},e.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},e.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},e.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()},e}).apply(null,[]))||(e.exports=i)},nbTX:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("1E+e"),r("Jvs9"),r("tI6k"),r("GDRe"),r("ivPt"),r("v3M4")],void 0===(n=(function(e,t,r,i,n,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clip=t.clipMarshall=t.triangulateLibtess=t.triangulateEarcut=t.triangulate=t.triangleArea=t.area=void 0;var l=new a.default,u=new o.TileClipper(0,0,0,1,128);function c(e,t,r){for(var i=0,n=1;n<r;n++)i+=(e[2*(t+n)]-e[2*(t+n-1)])*(e[2*(t+n)+1]+e[2*(t+n-1)+1]);return i}function h(e,t,r,i,n){for(var o=0,s=r;s<i;s+=3){var a=2*(e.getValue(s)-n),l=2*(e.getValue(s+1)-n),u=2*(e.getValue(s+2)-n);o+=Math.abs((t[a]-t[u])*(t[l+1]-t[a+1])-(t[a]-t[l])*(t[u+1]-t[a+1]))}return o}function f(e,t,r,i,n,o,s,a){var l=((e-n)*(o-a)-(t-a)*(n-s))/((e-r)*(o-a)-(t-i)*(n-s));return l<0||l>1?null:{x:Math.round(e+l*(r-e)),y:Math.round(t+l*(i-t))}}u.setExtent(n.TILE_SIZE),t.area=c,t.triangleArea=h,t.triangulate=function(e,t,r){var i=t.coords,n=t.lengths;if(t.hasIndeterminateRingOrder)return!1;for(var o=e.length,a=0,l=0;l<n.length;){for(var u=l,f=n[l],p=c(i,a,f),d=[];++u<n.length;){var m=n[u],_=c(i,a+f,m);if(!(_>0))break;p+=_,d.push(a+f),f+=m}var g=e.length;s.bufcut(e,i,a,a+f,d,2,r);var y=h(e,i,g,e.length,r),v=Math.abs(p);if(Math.abs((y-v)/Math.max(1e-7,v))>1e-5)return e.seek(o),!1;l=u,a+=f}return!0},t.triangulateEarcut=function(e,t,i){var n=t.coords,o=t.lengths;if(t.hasIndeterminateRingOrder)return!1;for(var s=0,a=0;a<o.length;){for(var l=a,u=o[a],h=[];++l<o.length;){var f=o[l];if(!(c(n,s+u,f)>0))break;h.push(s+u-s),u+=f}for(var p=t.coords.slice(2*s,2*(s+u)),d=0,m=r.earcut(p,h,2);d<m.length;d++)e.push(m[d]+i+s);a=l,s+=u}return!0},t.triangulateLibtess=function(e,t,r,i){var n=[],o=r.coords,s=r.lengths;l.beginPolygon(e,n);for(var a=0,u=0;u<s.length;u++){var c=r.lengths[u];l.beginContour();for(var h=0;h<c;h++){var f=[o[2*(a+h)],o[2*(a+h)+1],0];l.addVertex(f,f)}l.endContour(),a+=c}for(l.endPolygon(),h=0;h<n.length;h++)t.push(n[h]+i)},t.clipMarshall=function(e){if(!function(e,t,r){for(var i=0,n=0;n<e.lengths.length;n++){for(var o=e.lengths[n],s=0;s<o;s++){var a=e.coords[2*(s+i)],l=e.coords[2*(s+i)+1];if(a<-128||a>r||l<-128||l>r)return!0}i+=o}return!1}(e,0,n.TILE_SIZE+128))return e;u.reset(3);for(var t=0,r=0;r<e.lengths.length;r++){var o=e.lengths[r],s=e.coords[2*(0+t)],a=e.coords[2*(0+t)+1];u.moveTo(s,a);for(var l=1;l<o;l++)u.lineTo(s=e.coords[2*(l+t)],a=e.coords[2*(l+t)+1]);u.close(),t+=o}var c=u.result(!1);if(!c)return null;for(var h=[],f=[],p=0,d=c;p<d.length;p++){for(var m=0,_=0,g=r=d[p];_<g.length;_++){var y=g[_];f.push(y.x),f.push(y.y),m++}h.push(m)}return new i.default(h,f)},t.clip=function(e,t,r){void 0===r&&(r=0);for(var i=-r,n=t+r,o=0,s=0,a=0,l=0;l<e.lengths.length;l++){for(var u=e.lengths[l],c=a+u,h=0,p=null;o!==c;){for(var d=e.coords[2*o],m=e.coords[2*o+++1],_=d<i||d>=n||m<i||m>=n,g=_;o!==c&&_===g;)_||(e.coords[2*s]=d,e.coords[2*s+++1]=m,h++),d=e.coords[2*o],m=e.coords[2*o+++1],_=d<i||d>=n||m<i||m>=n;if(o!==c){var y=e.coords[2*(o-2)],v=e.coords[2*(o-2)+1],x=f(y,v,d,m,i,i,n,i)||f(y,v,d,m,n,i,n,n)||f(y,v,d,m,n,n,i,n)||f(y,v,d,m,i,i,i,n);x&&(e.coords[2*s]=x.x,e.coords[2*s+++1]=x.y,h++,p||(p=x)),_||(e.coords[2*s]=d,e.coords[2*s+++1]=m,h++)}else _?p&&(e.coords[2*s]=p.x,e.coords[2*s+++1]=p.y,h++):(e.coords[2*s]=d,e.coords[2*s+++1]=m,h++)}e.lengths[l]=h,a+=u}}}).apply(null,i))||(e.exports=n)},pJp3:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Lzvl"),r("Wn64"),r("fb50")],void 0===(n=(function(e,t,r,i,n){"use strict";function o(e){for(var t=1/0,r=-1/0,i=1/0,n=-1/0,o=0,s=e;o<s.length;o++)for(var a=0,l=s[o];a<l.length;a++){var u=l[a];u[0]<t&&(t=u[0]),u[0]>r&&(r=u[0]),u[1]<i&&(i=u[1]),u[1]>n&&(n=u[1])}return[t,i,r,n]}function s(e,t){for(var r=2*t,n=e.length,o=new Uint8Array(4*n),s=0;s<n;++s)i.packFloatRGBA(.5-e[s]/r,o,4*s);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.buildSDF=t.getSDFMetrics=t.getExtent=t.getSDFSymbol=t.getSDFInfo=void 0,t.getSDFInfo=function e(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":var r=t.symbolLayers;return r&&1===r.length?e(r[0]):null;case"CIMVectorMarker":var i=t.markerGraphics;if(!i||1!==i.length)return null;var n=i[0];if(!n)return null;var o=n.geometry;if(!o)return null;var s=n.symbol;return!s||"CIMPolygonSymbol"!==s.type&&"CIMLineSymbol"!==s.type?null:{geom:o,asFill:"CIMPolygonSymbol"===s.type};case"sdf":return{geom:t.geom,asFill:t.asFill}}return null},t.getSDFSymbol=function(e){var t=e.markerGraphics;if(!t||1!==t.length)return null;var r=t[0];if(!r)return null;var i=r.symbol;return!i||"CIMPolygonSymbol"!==i.type&&"CIMLineSymbol"!==i.type?null:i},t.getExtent=function(e){return e?e.rings?o(e.rings):e.paths?o(e.paths):r.isExtent(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null},t.getSDFMetrics=function(e,t,r,i,n){var o=e[0],s=e[1],a=e[2],l=e[3];if(a<o||l<s)return[0,0,0];var u=a-o,c=l-s,h=Math.floor(31.5),f=(128-2*(h+1))/Math.max(u,c),p=Math.round(u*f)+2*h,d=Math.round(c*f)+2*h,m=1;t&&(m=d/f/(t.ymax-t.ymin));var _=0,g=0;return i&&(n?t&&r&&t.ymax-t.ymin>0&&(_=i.x/(r*((t.xmax-t.xmin)/(t.ymax-t.ymin))),g=i.y/r):(_=i.x,g=i.y)),_=.5*(t.xmax+t.xmin)+_*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin),_-=o,g-=s,_*=f,g*=f,[m,(_+=h)/p-.5,-((g+=h)/d-.5)]},t.buildSDF=function(e){for(var t,r=(t=e.geom)?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null,i=function(e){for(var t=1/0,r=-1/0,i=1/0,o=-1/0,s=0,a=e;s<a.length;s++)for(var l=0,u=a[s];l<u.length;l++){var c=u[l];c[0]<t&&(t=c[0]),c[0]>r&&(r=c[0]),c[1]<i&&(i=c[1]),c[1]>o&&(o=c[1])}return new n.default(t,i,r-t,o-i)}(r),o=Math.floor(31.5),a=(128-2*(o+1))/Math.max(i.width,i.height),l=Math.round(i.width*a)+2*o,u=Math.round(i.height*a)+2*o,c=[],h=0,f=r;h<f.length;h++){var p=f[h];if(p&&p.length>1){for(var d=[],m=0,_=p;m<_.length;m++){var g=_[m],y=g[0],v=g[1];y-=i.x,v-=i.y,y*=a,v*=a,d.push([y+=o-.5,v+=o-.5])}if(e.asFill){var x=d.length-1;d[0][0]===d[x][0]&&d[0][1]===d[x][1]||d.push(d[0])}c.push(d)}}var b=function(e,t,r,i){for(var n=t*r,o=new Array(n),s=i*i+1,a=0;a<n;++a)o[a]=s;for(var l=0,u=e;l<u.length;l++){var c=u[l],h=c.length;for(a=1;a<h;++a){var f=c[a-1],p=c[a],d=void 0,m=void 0;f[0]<p[0]?(d=f[0],m=p[0]):(d=p[0],m=f[0]);var _=void 0,g=void 0;f[1]<p[1]?(_=f[1],g=p[1]):(_=p[1],g=f[1]);var y=Math.floor(d)-i,v=Math.floor(m)+i,x=Math.floor(_)-i,b=Math.floor(g)+i;y<0&&(y=0),v>t&&(v=t),x<0&&(x=0),b>r&&(b=r);for(var M=p[0]-f[0],w=p[1]-f[1],S=M*M+w*w,L=y;L<v;L++)for(var T=x;T<b;T++){var E=(L-f[0])*M+(T-f[1])*w,I=void 0,C=void 0;E<0?(I=f[0],C=f[1]):E>S?(I=p[0],C=p[1]):(I=f[0]+(E/=S)*M,C=f[1]+E*w);var O=(L-I)*(L-I)+(T-C)*(T-C),P=(r-T-1)*t+L;O<o[P]&&(o[P]=O)}}}for(a=0;a<n;++a)o[a]=Math.sqrt(o[a]);return o}(c,l,u,o);return e.asFill&&function(e,t,r,i,n){for(var o=0,s=e;o<s.length;o++)for(var a=s[o],l=a.length,u=1;u<l;++u){var c=a[u-1],h=a[u],f=void 0,p=void 0;c[0]<h[0]?(f=c[0],p=h[0]):(f=h[0],p=c[0]);var d=void 0,m=void 0;c[1]<h[1]?(d=c[1],m=h[1]):(d=h[1],m=c[1]);var _=Math.floor(f),g=Math.floor(p)+1,y=Math.floor(d),v=Math.floor(m)+1;_<i&&(_=i),g>t-i&&(g=t-i),y<i&&(y=i),v>r-i&&(v=r-i);for(var x=y;x<v;++x)if(c[1]>x!=h[1]>x){for(var b=(r-x-1)*t,M=_;M<g;++M)M<(h[0]-c[0])*(x-c[1])/(h[1]-c[1])+c[0]&&(n[b+M]=-n[b+M]);for(M=i;M<_;++M)n[b+M]=-n[b+M]}}}(c,l,u,o,b),[s(b,o),l,u]}}).apply(null,i))||(e.exports=n)},ph8t:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("apbF")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexBuffers=void 0;var i=function(){function e(e,t,r){this.data=e,this.stride=t,this.vertexCount=r}return e.decode=function(t){return new e(r.allocateTypedArrayBufferwithData(t.data,t.stride),t.stride,t.vertexCount)},e.fromVertexVector=function(t){return new e(r.allocateTypedArrayBufferwithData(t.data.buffer(),t.stride),t.stride,t.vertexCount)},e}();t.default=i;var n=function(){function e(e,t,r){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=r}return e.decode=function(t){var r=t.geometryType,n=t.indexBuffer,o={};for(var s in t.namedBuffers)o[s]=i.decode(t.namedBuffers[s]);return new e(r,n,o)},e.fromVertexVectors=function(t){var r=t.geometryType,n=t.indexVector.buffer(),o={};for(var s in t.namedVectors)o[s]=i.fromVertexVector(t.namedVectors[s]);return new e(r,n,o)},e}();t.VertexBuffers=n}).apply(null,i))||(e.exports=n)},rAGl:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codepoints=void 0,t.codepoints=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}}).apply(null,i))||(e.exports=n)},t1uL:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("jBNx"),r("B+Jm"),r("4F/P"),r("m87x"),r("IWfl"),r("MzWl"),r("2Gaw")],void 0===(n=(function(e,t,r,i,n,o,s,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(t,r,o,a,l,u,c,h,f,p,d,m,_,g,y,v,x,b){void 0===b&&(b=!1);var M=e.call(this)||this;M._xOffset=i.pt2px(m),M._yOffset=i.pt2px(_),M._decoration=f||"none",M._color=a,M._haloColor=l,M._haloSize=Math.min(Math.floor(5*i.pt2px(i.toPt(o))),127),M._size=Math.min(Math.round(i.pt2px(r)),127);var w=Math.min(Math.round(i.pt2px(r)),127);M._referenceSize=Math.round(Math.sqrt(256*w)),M._scale=M._size/24,M._angle=d,M._justify=n.getJustification(u||"center"),M._xAlignD=n.getXAnchorDirection(u||"center"),M._yAlignD=n.getYAnchorDirection(c||"baseline"),M._baseline="baseline"===(c||"baseline"),M._bitset=(1===h?1:0)|(p?1:0)<<1;var S=s.MaterialKeyBase.load(t);return S.sdf=!0,M._materialKey=S.data,M._lineWidth=i.pt2px(g)||512,M._lineHeight=y||1,M._textPlacement=v,M.effects=x,M._isCIM=b,M}return r.__extends(t,e),t.fromText=function(e,r){var i=new t(e.materialKey,e.font.size,e.haloSize||0,e.color&&o.premultiplyAlphaRGBAArray(e.color)||0,e.haloColor&&o.premultiplyAlphaRGBAArray(e.haloColor)||0,e.horizontalAlignment,e.verticalAlignment,0,e.font.decoration,!1,e.angle||0,e.xoffset,e.yoffset,e.lineWidth,e.lineHeight,null,null,!1),n=u.bidiText(e.text)[1];return i.bindTextInfo(r,n),i},t.fromCIMText=function(e,r){var i=e.scaleFactor||1,n=new t(e.materialKey,e.size*e.sizeRatio*i,e.outlineSize*e.sizeRatio,o.premultiplyAlphaRGBA(e.color),o.premultiplyAlphaRGBA(e.outlineColor),e.horizontalAlignment,e.verticalAlignment,e.alignment,e.decoration,e.colorLocked,e.angle,e.offsetX*e.sizeRatio*i,e.offsetY*e.sizeRatio*i,512,1,e.markerPlacement,e.effects,!0),s=u.bidiText(e.text)[1];return n.bindTextInfo(r,s),n},t}(a.default(l.default));t.default=c}).apply(null,i))||(e.exports=n)},v3M4:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qsST"),r("lnyn")],void 0===(n=(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator"),o=function(){function e(){this._currentVertexIndex=0,this._indexCounter=0,this._triangleIndices=[-1,-1,-1],this.glu=new i.GluTesselator,this.glu.gluTessCallback(i.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_END,this._endcallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this)),this.glu.gluTessCallback(i.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this)),this.glu.gluTessProperty(i.gluEnum.GLU_TESS_WINDING_RULE,i.windingRule.GLU_TESS_WINDING_ODD)}return e.prototype.beginPolygon=function(e,t){this._triangleIndices[0]=-1,this._triangleIndices[1]=-1,this._triangleIndices[2]=-1,this._currentVertexIndex=0,this._indexCounter=0,this.glu.gluTessBeginPolygon(e),this._indices=t},e.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()},e.prototype.beginContour=function(){this.glu.gluTessBeginContour()},e.prototype.endContour=function(){this.glu.gluTessEndContour()},e.prototype.addVertex=function(e,t){this.glu.gluTessVertex(e,t)},e.prototype._vertexCallback=function(e,t){if(t[t.length]=e[0],t[t.length]=e[1],this._triangleIndices[this._currentVertexIndex]=-1,this._currentVertexIndex>=2){for(var r=0;r<3;r++)-1===this._triangleIndices[r]&&(this._triangleIndices[r]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[r];this._currentVertexIndex=0}else this._currentVertexIndex++},e.prototype._begincallback=function(){this._triangleIndices[0]=-1,this._triangleIndices[1]=-1,this._triangleIndices[2]=-1,this._currentVertexIndex=0},e.prototype._endcallback=function(){this._currentVertexIndex=0},e.prototype._errorcallback=function(e){n.error("Encountered error during tesselation: "+e)},e.prototype._combinecallback=function(e){return[e[0],e[1],e[2]]},e.prototype._edgeCallback=function(){},e}();t.default=o}).apply(null,i))||(e.exports=n)},yVlQ:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("qsST"),r("qMld"),r("4DEr"),r("MzWl")],void 0===(n=(function(e,t,r,i,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate"),l=function(e){function t(t){var r=e.call(this)||this;return r._ongoingMaterialRequestMap=new Map,r._materialCache=new Map,r._dynamicPropertyMap=new Map,r._cimLayer=t,r}return r.__extends(t,e),t.prototype.analyze=function(e,t,r,i){var s=this,l=t.readLegacyFeature(),u=this._materialCache,c=this._cimLayer.materialHash;if(!c)return a.error("A Dynamic mesh template must have a material hash value or function!"),n.reject(null);var h="function"==typeof c?c(l,r,i):c;if(u.has(h)){var f=u.get(h);return n.resolve(f)}if(this._ongoingMaterialRequestMap.has(h))return this._ongoingMaterialRequestMap.get(h);var p=o.analyzeCIMResource(this._cimLayer.cim,this._cimLayer.materialOverrides);p.mosaicHash=h;var d=e.getMosaicItem(p).then((function(e){return s._ongoingMaterialRequestMap.delete(h),u.set(h,e),e})).catch((function(e){return s._ongoingMaterialRequestMap.delete(h),a.error(".analyze()",e.message),null}));return this._ongoingMaterialRequestMap.set(h,d),d},t}(s.default);t.default=l}).apply(null,i))||(e.exports=n)},yai7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";return function(){function e(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}return e.prototype.clear=function(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]},e.prototype.update=function(e,t,r){for(var i in e)this.vertexData.set(i,e[i]);for(var i in this.vertexData)null===e[i]&&this.vertexData.delete(i);this.vertexCount=t,this.indexData=r},e}()}).apply(null,i))||(e.exports=n)}}]);