(function(){(this||window).webpackJsonp.registerAbsMids({"arcgis-js-api/core/libs/gl-matrix-2/vec4":"2fXB","esri/core/libs/gl-matrix-2/vec4":"2fXB","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":"8fHt","esri/views/3d/support/meshProcessing":"BIt0","esri/views/3d/support/buffer/workerHelper":"Fsr7","esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":"HSGS","esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":"W7eI","esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":"kfwU"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"2fXB":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("bH65")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=r}).apply(null,n))||(e.exports=i)},"8fHt":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("HZ3d"),r("Q2wQ"),r("rusB"),r("jmRc"),r("BIt0"),r("Fsr7"),r("W7eI"),r("HSGS"),r("kfwU")],void 0===(i=(function(e,t,r,n,i,o,a,u,f,c,s){return function(){function e(){this.regularWriter=new c.RegularEdgeBufferWriter,this.silhouetteWriter=new c.SilhouetteEdgeBufferWriter}return e.prototype.process=function(e,t){return r(this,void 0,void 0,(function(){var r,i,o;return n(this,(function(n){switch(n.label){case 0:return t?(r=new Array,i=this.packInput(e,r),[4,t.invoke("wrappedWork",i,{transferList:r})]):[3,2];case 1:return o=n.sent(),[2,this.unpackOutput(o)];case 2:return[2,this.work(e)]}}))}))},e.prototype.wrappedWork=function(e){return r(this,void 0,void 0,(function(){var t,r,i;return n(this,(function(n){return t=this.unpackInput(e),r=this.work(t),i=new Array,this.packInputTransferables(t,i),[2,{result:this.packOutput(r,i),transferList:i}]}))}))},e.prototype.work=function(e){var t=this.extractEdgeInformation(e.data,e.skipDeduplicate,e.originalIndices);return this.regularWriter.updateSettings(e.writerSettings),this.silhouetteWriter.updateSettings(e.writerSettings),s.extractEdges(t,this.regularWriter,this.silhouetteWriter)},e.prototype.packInputTransferables=function(e,t){t.push(e.data.buffer)},e.prototype.packInput=function(e,t){this.packInputTransferables(e,t);var r={dataBuffer:e.data.buffer,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate};return e.originalIndices&&(r.originalIndicesBuffer=e.originalIndices.buffer,r.originalIndicesType=i.isUint32Array(e.originalIndices)?"Uint32Array":"Uint16Array"),r},e.prototype.unpackInput=function(e){return{data:f.EdgeInputBufferLayout.createView(e.dataBuffer),originalIndices:"Uint32Array"===e.originalIndicesType?new Uint32Array(e.originalIndicesBuffer):"Uint16Array"===e.originalIndicesType?new Uint16Array(e.originalIndicesBuffer):void 0,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}},e.prototype.packOutput=function(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:u.packInterleavedBuffer(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:u.packInterleavedBuffer(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}},e.prototype.unpackOutput=function(e){return{regular:{instancesData:u.unpackInterleavedBuffer(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:u.unpackInterleavedBuffer(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}},e.prototype.extractEdgeInformation=function(e,t,r){if(t&&r)return{faces:r,neighbors:i=a.computeNeighbors(r,e.count),vertices:e};var n=o.default(e.buffer,e.stride/4,{originalIndices:r}),i=a.computeNeighbors(n.indices,n.uniqueCount);return{faces:n.indices,neighbors:i,vertices:f.EdgeInputBufferLayout.createView(n.buffer)}},e}()}).apply(null,n))||(e.exports=i)},BIt0:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.computeNeighbors=function(e,t){for(var r=e.length/3,n=new Uint32Array(t+1),i=new Uint32Array(t+1),o=function(e,t){e<t?n[e+1]++:i[t+1]++},a=0;a<r;a++){var u=e[3*a+2];o(v=e[3*a],w=e[3*a+1]),o(w,u),o(u,v)}var f=0,c=0;for(a=0;a<t;a++){var s=n[a+1],l=i[a+1];n[a+1]=f,i[a+1]=c,f+=s,c+=l}var d=new Uint32Array(6*r),p=n[t],g=function(e,t,r){if(e<t){var o=n[e+1]++;d[2*o]=t,d[2*o+1]=r}else o=i[t+1]++,d[2*p+2*o]=e,d[2*p+2*o+1]=r};for(a=0;a<r;a++){var v,w;u=e[3*a+2],g(v=e[3*a],w=e[3*a+1],a),g(w,u,a),g(u,v,a)}var h=function(e,t){for(var r=2*e,n=t-e,i=1;i<n;i++){for(var o=d[r+2*i],a=d[r+2*i+1],u=i-1;u>=0&&d[r+2*u]>o;u--)d[r+2*u+2]=d[r+2*u],d[r+2*u+3]=d[r+2*u+1];d[r+2*u+2]=o,d[r+2*u+3]=a}};for(a=0;a<t;a++)h(n[a],n[a+1]),h(p+i[a],p+i[a+1]);var y=new Int32Array(3*r),m=function(t,r){return t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1},V=function(e,t){var r=m(e,t);y[3*t+r]=-1};for(a=0;a<t;a++){for(var I=n[a],B=n[a+1],b=i[a],k=i[a+1];I<B&&b<k;){var A=d[2*I];A===(E=d[2*p+2*b])?(function(e,t,r,n){var i=m(e,t);y[3*t+i]=n;var o=m(r,n);y[3*n+o]=t}(a,d[2*I+1],E,d[2*p+2*b+1]),I++,b++):A<E?(V(a,d[2*I+1]),I++):(V(E,d[2*p+2*b+1]),b++)}for(;I<B;)V(a,d[2*I+1]),I++;for(;b<k;){var E;V(E=d[2*p+2*b],d[2*p+2*b+1]),b++}}return y}}).apply(null,n))||(e.exports=i)},Fsr7:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("2Atf"),r("VfPl"),r("2B1V")],void 0===(i=(function(e,t,r,n,i){function o(e){var t=new Array;return e.fields.forEach((function(e,n){var i=r({},e,{constructor:u(e.constructor)});t.push([n,i])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}function a(e){var t=i.newLayout();return t.stride=e.stride,t.fieldNames=e.fieldNames,e.fields.forEach((function(e){return t.fields.set(e[0],r({},e[1],{constructor:f(e[1].constructor)}))})),t}function u(e){return e.ElementType+"_"+e.ElementCount}function f(e){return s.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.packInterleavedBuffer=function(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:o(e.layout)}},t.unpackInterleavedBuffer=function(e){return a(e.layout).createView(e.buffer)},t.packLayout=o,t.unpackLayout=a;var c=[n.BufferViewFloat,n.BufferViewVec2f,n.BufferViewVec3f,n.BufferViewVec4f,n.BufferViewMat3f,n.BufferViewMat4f,n.BufferViewFloat64,n.BufferViewVec2f64,n.BufferViewVec3f64,n.BufferViewVec4f64,n.BufferViewMat3f64,n.BufferViewMat4f64,n.BufferViewUint8,n.BufferViewVec2u8,n.BufferViewVec3u8,n.BufferViewVec4u8,n.BufferViewUint16,n.BufferViewVec2u16,n.BufferViewVec3u16,n.BufferViewVec4u16,n.BufferViewUint32,n.BufferViewVec2u32,n.BufferViewVec3u32,n.BufferViewVec4u32,n.BufferViewInt8,n.BufferViewVec2i8,n.BufferViewVec3i8,n.BufferViewVec4i8,n.BufferViewInt16,n.BufferViewVec2i16,n.BufferViewVec3i16,n.BufferViewVec4i16,n.BufferViewInt32,n.BufferViewVec2i32,n.BufferViewVec3i32,n.BufferViewVec4i32],s=new Map;c.forEach((function(e){return s.set(u(e),e)}))}).apply(null,n))||(e.exports=i)},HSGS:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("2Atf"),r("xhoE"),r("4w2c"),r("0LE5"),r("Rdxj"),r("MzcX"),r("W7eI")],void 0===(i=(function(e,t,r,n,i,o,a,u,f){function c(e){var t=l;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],p[0]=5381;for(var r=0;r<d.length;r++)p[0]=31*p[0]+d[r];return p[0]}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){}return e.prototype.updateSettings=function(e){this.settings=e},e.prototype.write=function(e,t,r){var n=c(r);g.seed=n;var i=g.getIntRange(0,255),o=g.getIntRange(0,this.settings.variants-1),a=g.getFloat(),u=255*(.5*function(e,t){var r=e<0?-1:1;return Math.pow(Math.abs(e),1.2)*r}(-(1-Math.min(a/.7,1))+Math.max(0,a-.7)/(1-.7))+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,o),e.variantExtension.set(t,u)},e.prototype.trim=function(e,t){return e.slice(0,t)},e}();t.CommonBufferWriter=s;var l=new Float32Array(6),d=new Uint32Array(l.buffer),p=new Uint32Array(1),g=new i,v=function(){function e(){this.commonWriter=new s}return e.prototype.updateSettings=function(e){this.commonWriter.updateSettings(e)},e.prototype.allocate=function(e){return f.RegularEdgeInstancesLayout.createBuffer(e)},e.prototype.write=function(e,t,r){this.commonWriter.write(e,t,r),o.vec3.add(h,r.faceNormal0,r.faceNormal1),o.vec3.normalize(h,h),e.normal.setVec(t,h)},e.prototype.trim=function(e,t){return this.commonWriter.trim(e,t)},e.Layout=f.RegularEdgeInstancesLayout,e.glLayout=u.glLayout(f.RegularEdgeInstancesLayout,{divisor:1}),e}();t.RegularEdgeBufferWriter=v;var w=function(){function e(){this.commonWriter=new s}return e.prototype.updateSettings=function(e){this.commonWriter.updateSettings(e)},e.prototype.allocate=function(e){return f.SilhouetteEdgeInstancesLayout.createBuffer(e)},e.prototype.write=function(e,t,r){this.commonWriter.write(e,t,r),e.normalA.setVec(t,r.faceNormal0),e.normalB.setVec(t,r.faceNormal1)},e.prototype.trim=function(e,t){return this.commonWriter.trim(e,t)},e.Layout=f.SilhouetteEdgeInstancesLayout,e.glLayout=u.glLayout(f.SilhouetteEdgeInstancesLayout,{divisor:1}),e}();t.SilhouetteEdgeBufferWriter=w;var h=a.vec3f64.create()}).apply(null,n))||(e.exports=i)},W7eI:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("MzcX"),r("2B1V")],void 0===(i=(function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeInputBufferLayout=n.newLayout().vec3f("position").u16("componentIndex").u16("_padding"),t.VertexLayout=n.newLayout().vec2u8("sideness"),t.glVertexLayout=r.glLayout(t.VertexLayout),t.CommonInstancesLayout=n.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0}).u16("_padding2",{glPadding:!0}),t.RegularEdgeInstancesLayout=t.CommonInstancesLayout.clone().vec3f("normal"),t.SilhouetteEdgeInstancesLayout=t.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB"),t.EdgeShaderAttributeLocations={position0:0,position1:1,componentIndex:2,variantOffset:4,variantStroke:5,variantExtension:6,normal:7,normalA:7,normalB:8,sideness:9}}).apply(null,n))||(e.exports=i)},kfwU:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("KY0m"),r("xoE+"),r("rusB"),r("0LE5"),r("Rdxj"),r("AzkI")],void 0===(i=(function(e,t,r,n,i,o,a,u){function f(e,t){return e.cosAngle<t}function c(e,t){return e.cosAngle>t}function s(e,t){var r=n.acosClamped(e.cosAngle),i=p.fwd,a=p.ortho;return u.directionFromTo(i,e.position1,e.position0),r*(o.vec3.dot(o.vec3.cross(a,e.faceNormal0,e.faceNormal1),i)>0?-1:1)>t}function l(e){for(var t=e.faces.length/3,r=e.vertices.position,n=e.faces,i=g.v0,a=g.v1,u=g.v2,f=new Float32Array(3*t),c=0;c<t;c++){var s=n[3*c+1],l=n[3*c+2];r.getVec(n[3*c+0],i),r.getVec(s,a),r.getVec(l,u),o.vec3.subtract(a,a,i),o.vec3.subtract(u,u,i),o.vec3.cross(i,a,u),o.vec3.normalize(i,i),f[3*c+0]=i[0],f[3*c+1]=i[1],f[3*c+2]=i[2]}return f}Object.defineProperty(t,"__esModule",{value:!0});var d=-1;t.extractEdges=function(e,t,a,u){void 0===u&&(u=v);var g=e.vertices.position,w=e.vertices.componentIndex,h=n.deg2rad(u.anglePlanar),y=n.deg2rad(u.angleSignificantEdge),m=Math.cos(y),V=Math.cos(h),I=p.edge,B=I.position0,b=I.position1,k=I.faceNormal0,A=I.faceNormal1,E=l(e),L=function(e){for(var t=e.faces.length/3,r=e.faces,n=e.neighbors,i=0,o=0;o<t;o++){var a=r[3*o+0],u=r[3*o+1],f=r[3*o+2];i+=(l=n[3*o+0])===d||a<u?1:0,i+=(p=n[3*o+1])===d||u<f?1:0,i+=(g=n[3*o+2])===d||f<a?1:0}var c=new Int32Array(4*i),s=0;for(o=0;o<t;o++){var l,p=n[3*o+1],g=n[3*o+2];a=r[3*o+0],u=r[3*o+1],f=r[3*o+2],((l=n[3*o+0])===d||a<u)&&(c[s++]=a,c[s++]=u,c[s++]=o,c[s++]=l),(p===d||u<f)&&(c[s++]=u,c[s++]=f,c[s++]=o,c[s++]=p),(g===d||f<a)&&(c[s++]=f,c[s++]=a,c[s++]=o,c[s++]=g)}return c}(e),x=L.length/4,S=t.allocate(x),W=0,M=a.allocate(x),N=0,U=0,j=0,_=r.range(0,x),D=new Float32Array(x);i.forEach(D,(function(e,t,r){g.getVec(L[4*t+0],B),g.getVec(L[4*t+1],b),r[t]=o.vec3.distance(B,b)})),_.sort((function(e,t){return D[t]-D[e]}));for(var R=new Array,F=new Array,P=0;P<x;P++){var O=_[P],H=D[O],T=L[4*O+0],z=L[4*O+1],C=L[4*O+2],X=L[4*O+3],G=X===d;if(g.getVec(T,B),g.getVec(z,b),G)o.vec3.set(k,E[3*C+0],E[3*C+1],E[3*C+2]),o.vec3.copy(A,k),I.componentIndex=w.get(T),I.cosAngle=o.vec3.dot(k,A);else{if(o.vec3.set(k,E[3*C+0],E[3*C+1],E[3*C+2]),o.vec3.set(A,E[3*X+0],E[3*X+1],E[3*X+2]),I.componentIndex=w.get(T),I.cosAngle=o.vec3.dot(k,A),c(I,V))continue;I.cosAngle<-.9999&&o.vec3.copy(A,k)}U+=H,j++,G||f(I,m)?(t.write(S,W++,I),R.push(H)):s(I,h)&&(a.write(M,N++,I),F.push(H))}var J=new Float32Array(R.reverse()),Q=new Float32Array(F.reverse());return{regular:{instancesData:t.trim(S,W),lodInfo:{lengths:J}},silhouette:{instancesData:a.trim(M,N),lodInfo:{lengths:Q}},averageEdgeLength:U/j}};var p={edge:{position0:a.vec3f64.create(),position1:a.vec3f64.create(),faceNormal0:a.vec3f64.create(),faceNormal1:a.vec3f64.create(),componentIndex:0,cosAngle:0},ortho:a.vec3f64.create(),fwd:a.vec3f64.create()},g={v0:a.vec3f64.create(),v1:a.vec3f64.create(),v2:a.vec3f64.create()},v={anglePlanar:4,angleSignificantEdge:35}}).apply(null,n))||(e.exports=i)}}]);