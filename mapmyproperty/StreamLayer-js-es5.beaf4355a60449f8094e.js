!function(){function e(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(u){return void r(u)}c.done?t(l):Promise.resolve(l).then(n,o)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{u6iX:function(t,n,i){"use strict";i.r(n);var l,s=i("pO5D"),p=i("3r0u"),b=(i("wSAH"),i("srIe")),d=i("6S2I"),y=i("zqDF"),f=i("WbKI"),O=i("+opI"),j=i("r88o"),v=i("C4aV"),m=i("04ZG"),h=i("Cduq"),g=i("zlDU"),w=(i("4EHJ"),i("ju1D"),i("9AIY"),i("WZb1")),S=i("OvF4"),I=(i("4GrV"),i("wdpY")),k=i("SFah"),R=i("Lqtk"),P=i("H9eC"),x=i("pqNC"),D=i("5pQd"),T=i("/RTN"),F=i("IvSi"),E=i("uRH/"),_=(i("ZnuT"),i("tCO6"),i("2gBT")),N=(i("JhoD"),i("tI3Y"),i("R4xK"),i("/1dM")),G=i("XNvV"),C=i("+Xal"),L=i("ofM5"),J=i("gLc9"),W=i("PVlI"),A=i("mXvl"),U=i("DbUH"),V=i("jhcG"),q=i("WmKv"),Y=i("YBpl"),z=i("wkZP"),B=i("Bbcg"),H=i("EOvV"),M=i("YOx9"),X=i("9Ruv"),Z=i("xk++"),K=i("ag7Y"),Q=l=function(e){c(r,e);var t=u(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).age=null,e.ageReceived=null,e.displayCount=null,e.maxObservations=1,e}return a(r,[{key:"clone",value:function(){return new l({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}}]),r}(K.a);Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],Q.prototype,"age",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],Q.prototype,"ageReceived",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],Q.prototype,"displayCount",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],Q.prototype,"maxObservations",void 0);var $=Q=l=Object(s.a)([Object(m.a)("esri.layers.support.PurgeOptions")],Q),ee=d.a.getLogger("esri.layers.StreamLayer"),te=new O.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),re=function(t){c(s,t);var n,i,l=u(s);function s(){var e;o(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=l.call.apply(l,[this].concat(r))).copyright=null,e.definitionExpression=null,e.displayField=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.geometryDefinition=null,e.geometryType=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.maxReconnectionAttempts=0,e.maxReconnectionInterval=20,e.maxScale=0,e.minScale=0,e.objectIdField=null,e.operationalLayerType="ArcGISStreamLayer",e.popupEnabled=!0,e.popupTemplate=null,e.purgeOptions=new $,e.screenSizePerspectiveEnabled=!0,e.sourceJSON=null,e.spatialReference=w.a.WGS84,e.type="stream",e.url=null,e.updateInterval=300,e.webSocketUrl=null,e}return a(s,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?r({url:e},t):e}},{key:"load",value:function(e){var t=this;if(!("WebSocket"in p.a))return this.addResolvingPromise(Promise.reject(new g.a("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);var r=Object(b.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service"]},e).catch((function(e){return e})).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"readFeatureReduction",value:function(e,t){return Object(B.a)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,n){Object(B.c)(e,t,"layerDefinition.featureReduction",n)}},{key:"fieldsIndex",get:function(){return new J.a(this.fields)}},{key:"renderer",set:function(e){Object(I.j)(e,this.fields),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){var o=Object(C.b)(n,t,r)||void 0;return o||ee.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),o}if(t.defaultSymbol)return t.types&&t.types.length?new _.a({defaultSymbol:ne(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:ne(e.symbol,e,r)}}))}):new N.a({symbol:ne(t.defaultSymbol,t,r)})}},{key:"writeRenderer",value:function(e,t,r,n){Object(C.c)(e,t,r,n)}},{key:"writeWebSceneRenderer",value:function(e,t,r,n){Object(C.c)(e,t,"layerDefinition.drawingInfo.renderer",n)}},{key:"createPopupTemplate",value:function(e){return Object(X.a)(this,e)}},{key:"createQuery",value:function(){var e=new Z.a;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}},{key:"getFieldDomain",value:function(e,t){if(!this.fields)return null;var r=null;return this.fields.some((function(t){return t.name===e&&(r=t.domain),!!r})),r}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"_fetchService",value:(n=regeneratorRuntime.mark((function e(t){var n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webSocketUrl){e.next=12;break}if(null!=(o=this.timeInfo)&&o.trackIdField){e.next=3;break}throw new g.a("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");case 3:if(this.objectIdField){e.next=5;break}throw new g.a("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");case 5:if(this.fields){e.next=7;break}throw new g.a("stream-layer:missing-metadata","The stream layer fields must be specified.");case 7:if(this.geometryType){e.next=9;break}throw new g.a("stream-layer:missing-metadata","The stream layer geometryType must be specified.");case 9:this.url=this.webSocketUrl,e.next=18;break;case 12:if(this.sourceJSON){e.next=18;break}return e.next=15,Object(R.default)(this.parsedUrl.path,{query:r({f:"json"},this.parsedUrl.query),responseType:"json",signal:t});case 15:i=e.sent,a=i.data,this.sourceJSON=a;case 18:return e.abrupt("return",(this.sourceJSON=r(r({},null!=(n=this.sourceJSON)?n:{}),{},{objectIdField:"__esri_stream_id__"}),this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),Object(I.j)(this.renderer,this.fields),Object(I.k)(this.timeInfo,this.fields),Object(M.a)(this,{origin:"service"})));case 19:case"end":return e.stop()}}),e,this)})),i=function(){var t=this,r=arguments;return new Promise((function(o,i){var a=n.apply(t,r);function c(t){e(a,o,i,c,l,"next",t)}function l(t){e(a,o,i,c,l,"throw",t)}c(void 0)}))},function(e){return i.apply(this,arguments)})}]),s}(Object(A.a)(Object(Y.a)(Object(q.a)(Object(V.a)(Object(W.a)(Object(E.a)(Object(U.a)(Object(D.a)(x.a)))))))));Object(s.a)([Object(f.b)({type:String})],re.prototype,"copyright",void 0),Object(s.a)([Object(f.b)({readOnly:!0})],re.prototype,"defaultPopupTemplate",null),Object(s.a)([Object(f.b)({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],re.prototype,"definitionExpression",void 0),Object(s.a)([Object(f.b)({type:String})],re.prototype,"displayField",void 0),Object(s.a)([Object(f.b)({type:T.a})],re.prototype,"elevationInfo",void 0),Object(s.a)([Object(j.a)("featureReduction",["layerDefinition.featureReduction"])],re.prototype,"readFeatureReduction",null),Object(s.a)([Object(h.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:B.b}})],re.prototype,"writeWebSceneFeatureReduction",null),Object(s.a)([Object(f.b)({type:[L.a]})],re.prototype,"fields",void 0),Object(s.a)([Object(f.b)({readOnly:!0})],re.prototype,"fieldsIndex",null),Object(s.a)([Object(f.b)({type:S.a})],re.prototype,"geometryDefinition",void 0),Object(s.a)([Object(f.b)({type:["point","polygon","polyline","multipoint"],json:{read:{reader:te.read}}})],re.prototype,"geometryType",void 0),Object(s.a)([Object(f.b)(F.d)],re.prototype,"labelsVisible",void 0),Object(s.a)([Object(f.b)({type:[z.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:H.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],re.prototype,"labelingInfo",void 0),Object(s.a)([Object(f.b)(F.e)],re.prototype,"legendEnabled",void 0),Object(s.a)([Object(f.b)({type:["show","hide"]})],re.prototype,"listMode",void 0),Object(s.a)([Object(f.b)({type:y.a})],re.prototype,"maxReconnectionAttempts",void 0),Object(s.a)([Object(f.b)({type:y.a})],re.prototype,"maxReconnectionInterval",void 0),Object(s.a)([Object(f.b)(F.f)],re.prototype,"maxScale",void 0),Object(s.a)([Object(f.b)(F.g)],re.prototype,"minScale",void 0),Object(s.a)([Object(f.b)({type:String})],re.prototype,"objectIdField",void 0),Object(s.a)([Object(f.b)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],re.prototype,"operationalLayerType",void 0),Object(s.a)([Object(f.b)(F.j)],re.prototype,"popupEnabled",void 0),Object(s.a)([Object(f.b)({type:k.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],re.prototype,"popupTemplate",void 0),Object(s.a)([Object(f.b)({type:$})],re.prototype,"purgeOptions",void 0),Object(s.a)([Object(f.b)({types:G.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],re.prototype,"renderer",null),Object(s.a)([Object(j.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(j.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],re.prototype,"readRenderer",null),Object(s.a)([Object(h.a)("renderer")],re.prototype,"writeRenderer",null),Object(s.a)([Object(h.a)("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:G.b}})],re.prototype,"writeWebSceneRenderer",null),Object(s.a)([Object(f.b)(F.m)],re.prototype,"screenSizePerspectiveEnabled",void 0),Object(s.a)([Object(f.b)({type:w.a,json:{origins:{service:{read:{source:"spatialReference"}}}}})],re.prototype,"spatialReference",void 0),Object(s.a)([Object(f.b)({json:{read:!1}})],re.prototype,"type",void 0),Object(s.a)([Object(f.b)(F.n)],re.prototype,"url",void 0),Object(s.a)([Object(f.b)({type:Number})],re.prototype,"updateInterval",void 0),Object(s.a)([Object(f.b)({type:String})],re.prototype,"webSocketUrl",void 0),re=Object(s.a)([Object(m.a)("esri.layers.StreamLayer")],re);var ne=Object(v.b)({types:P.k});n.default=re}}])}();