(function(){var e={"arcgis-js-api/views/3d/layers/i3s/LEPCC":"1RVI","esri/views/3d/webgl-engine/lib/BufferVectorMath":"83/a","arcgis-js-api/views/3d/webgl-engine/lib/BufferVectorMath":"83/a","esri/core/libs/gl-matrix-2/mat4":"FXVB","arcgis-js-api/core/libs/gl-matrix-2/mat4":"FXVB","arcgis-js-api/core/libs/gl-matrix-2/math/mat4":"Jl7l","arcgis-js-api/views/3d/layers/i3s/PointCloudWorkerUtil":"NNdt","arcgis-js-api/views/3d/layers/i3s/I3SBinaryReader":"W2ph","arcgis-js-api/core/libs/gl-matrix-2/quatf32":"fdzS","arcgis-js-api/core/libs/gl-matrix-2/factories/quatf32":"gKSc","arcgis-js-api/core/libs/gl-matrix-2/factories/vec3f32":"iHt0","esri/views/3d/support/projectionUtils":"mmEe","arcgis-js-api/views/3d/support/projectionUtils":"mmEe","esri/core/libs/gl-matrix-2/vec3f32":"vlC2","arcgis-js-api/core/libs/gl-matrix-2/vec3f32":"vlC2","arcgis-js-api/views/3d/layers/PointCloudWorker":"wCvz"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{"1RVI":function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("ma1f")],void 0===(n=(function(e,t,r){"use strict";function a(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+0,10)),version:t.getUint16(r+10,!0),checksum:t.getUint32(r+12,!0)}}function n(e,t,r){var a=[];t=o(e,t,a);for(var n=[],i=0;i<a.length;i++){n.length=0,t=o(e,t,n);for(var u=0;u<n.length;u++)r.push(n[u]+a[i])}return t}function o(e,t,a){var n=new DataView(e,t),o=n.getUint8(0),i=31&o,u=!!(32&o),c=(192&o)>>6,s=0;if(0===c)s=n.getUint32(1,!0),t+=5;else if(1===c)s=n.getUint16(1,!0),t+=3;else{if(2!==c)throw new r("lepcc-decode-error","Bad count type");s=n.getUint8(1),t+=2}if(u)throw new r("lepcc-decode-error","LUT not implemented");for(var l=Math.ceil(s*i/8),f=new Uint8Array(e,t,l),d=0,h=0,v=0,p=-1>>>32-i,b=0;b<s;b++){for(;h<i;)d|=f[v]<<h,h+=8,v+=1;a[b]=d&p,d>>>=i,(h-=i)+i>32&&(d|=f[v-1]>>8-h)}return t+v}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeIntensity=t.decodeRGB=t.decodeXYZ=void 0,t.decodeXYZ=function(e){var t=new DataView(e,0),o=0,i=a(e,t,o),u=i.version;if(o+=16,"LEPCC     "!==i.identifier)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var c=function(e,t){return{sizeLo:e.getUint32(t+0,!0),sizeHi:e.getUint32(t+4,!0),minX:e.getFloat64(t+8,!0),minY:e.getFloat64(t+16,!0),minZ:e.getFloat64(t+24,!0),maxX:e.getFloat64(t+32,!0),maxY:e.getFloat64(t+40,!0),maxZ:e.getFloat64(t+48,!0),errorX:e.getFloat64(t+56,!0),errorY:e.getFloat64(t+64,!0),errorZ:e.getFloat64(t+72,!0),count:e.getUint32(t+80,!0),reserved:e.getUint32(t+84,!0)}}(t,o);if(o+=88,c.sizeHi*Math.pow(2,32)+c.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var s=new Float64Array(3*c.count),l=[],f=[],d=[],h=[];if(o=n(e,o,l),o=n(e,o,f),o=n(e,o,d),(o=n(e,o,h))!==e.byteLength)throw new r("lepcc-decode-error","Bad length");for(var v=0,p=0,b=0;b<l.length;b++){p+=l[b];for(var M=0,g=0;g<f[b];g++){var y=h[v];s[3*v]=Math.min(c.maxX,c.minX+2*c.errorX*(M+=d[v])),s[3*v+1]=Math.min(c.maxY,c.minY+2*c.errorY*p),s[3*v+2]=Math.min(c.maxZ,c.minZ+2*c.errorZ*y),v++}}return{errorX:c.errorX,errorY:c.errorY,errorZ:c.errorZ,result:s}},t.decodeRGB=function(e){var t=new DataView(e,0),n=0,o=a(e,t,n),i=o.version;if(n+=16,"ClusterRGB"!==o.identifier)throw new r("lepcc-decode-error","Bad identifier");if(i>1)throw new r("lepcc-decode-error","Unknown version");var u=function(e,t){return{sizeLo:e.getUint32(t+0,!0),sizeHi:e.getUint32(t+4,!0),count:e.getUint32(t+8,!0),colorMapCount:e.getUint16(t+12,!0),lookupMethod:e.getUint8(t+14),compressionMethod:e.getUint8(t+15)}}(t,n);if(n+=16,u.sizeHi*Math.pow(2,32)+u.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");if((2===u.lookupMethod||1===u.lookupMethod)&&0===u.compressionMethod){if(3*u.colorMapCount+u.count+n!==e.byteLength||u.colorMapCount>256)throw new r("lepcc-decode-error","Bad count");for(var c=new Uint8Array(e,n,3*u.colorMapCount),s=new Uint8Array(e,n+3*u.colorMapCount,u.count),l=new Uint8Array(3*u.count),f=0;f<u.count;f++){var d=s[f];l[3*f]=c[3*d],l[3*f+1]=c[3*d+1],l[3*f+2]=c[3*d+2]}return l}if(0===u.lookupMethod&&0===u.compressionMethod){if(3*u.count+n!==e.byteLength||0!==u.colorMapCount)throw new r("lepcc-decode-error","Bad count");return new Uint8Array(e,n).slice()}if(u.lookupMethod<=2&&1===u.compressionMethod){if(n+3!==e.byteLength||1!==u.colorMapCount)throw new r("lepcc-decode-error","Bad count");var h=t.getUint8(n),v=t.getUint8(n+1),p=t.getUint8(n+2);for(l=new Uint8Array(3*u.count),f=0;f<u.count;f++)l[3*f]=h,l[3*f+1]=v,l[3*f+2]=p;return l}throw new r("lepcc-decode-error","Bad method "+u.lookupMethod+","+u.compressionMethod)},t.decodeIntensity=function(e){var t=new DataView(e,0),n=0,i=a(e,t,n),u=i.version;if(n+=16,"Intensity "!==i.identifier)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var c=function(e,t){return{sizeLo:e.getUint32(t+0,!0),sizeHi:e.getUint32(t+4,!0),count:e.getUint32(t+8,!0),scaleFactor:e.getUint16(t+12,!0),bitsPerPoint:e.getUint8(t+14),reserved:e.getUint8(t+15)}}(t,n);if(n+=16,c.sizeHi*Math.pow(2,32)+c.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var s=new Uint16Array(c.count);if(8===c.bitsPerPoint){if(c.count+n!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(var l=new Uint8Array(e,n,c.count),f=0;f<c.count;f++)s[f]=l[f]*c.scaleFactor}else if(16===c.bitsPerPoint){if(2*c.count+n!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(l=new Uint16Array(e,n,c.count),f=0;f<c.count;f++)s[f]=l[f]*c.scaleFactor}else{if(o(e,n,l=[])!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(f=0;f<c.count;f++)s[f]=l[f]*c.scaleFactor}return s}}).apply(null,a))||(e.exports=n)},"83/a":function(e,t,r){var a,n;a=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vec3Compact=void 0,function(e){e.length=function(e,t){var r=e[t],a=e[t+1],n=e[t+2];return Math.sqrt(r*r+a*a+n*n)},e.normalize=function(e,t){var r=e[t],a=e[t+1],n=e[t+2],o=1/Math.sqrt(r*r+a*a+n*n);e[t]*=o,e[t+1]*=o,e[t+2]*=o},e.scale=function(e,t,r){e[t]*=r,e[t+1]*=r,e[t+2]*=r},e.add=function(e,t,r,a,n,o){void 0===o&&(o=t),(n=n||e)[o]=e[t]+r[a],n[o+1]=e[t+1]+r[a+1],n[o+2]=e[t+2]+r[a+2]},e.subtract=function(e,t,r,a,n,o){void 0===o&&(o=t),(n=n||e)[o]=e[t]-r[a],n[o+1]=e[t+1]-r[a+1],n[o+2]=e[t+2]-r[a+2]}}(t.Vec3Compact||(t.Vec3Compact={}))}).apply(null,a))||(e.exports=n)},FXVB:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("Jl7l")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=void 0,t.mat4=r}).apply(null,a))||(e.exports=n)},Jl7l:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("jaBu"),r("qysZ")],void 0===(n=(function(e,t,r,a){"use strict";function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var a=t[0],n=t[1],o=t[2],i=t[3],u=t[4],c=t[5],s=t[6],l=t[7],f=t[8],d=t[9],h=t[10],v=t[11],p=t[12],b=t[13],M=t[14],g=t[15],y=r[0],m=r[1],w=r[2],S=r[3];return e[0]=y*a+m*u+w*f+S*p,e[1]=y*n+m*c+w*d+S*b,e[2]=y*o+m*s+w*h+S*M,e[3]=y*i+m*l+w*v+S*g,e[4]=(y=r[4])*a+(m=r[5])*u+(w=r[6])*f+(S=r[7])*p,e[5]=y*n+m*c+w*d+S*b,e[6]=y*o+m*s+w*h+S*M,e[7]=y*i+m*l+w*v+S*g,e[8]=(y=r[8])*a+(m=r[9])*u+(w=r[10])*f+(S=r[11])*p,e[9]=y*n+m*c+w*d+S*b,e[10]=y*o+m*s+w*h+S*M,e[11]=y*i+m*l+w*v+S*g,e[12]=(y=r[12])*a+(m=r[13])*u+(w=r[14])*f+(S=r[15])*p,e[13]=y*n+m*c+w*d+S*b,e[14]=y*o+m*s+w*h+S*M,e[15]=y*i+m*l+w*v+S*g,e}function i(e,t,r){var a=t[0],n=t[1],o=t[2],i=t[3],u=a+a,c=n+n,s=o+o,l=a*u,f=a*c,d=a*s,h=n*c,v=n*s,p=o*s,b=i*u,M=i*c,g=i*s;return e[0]=1-(h+p),e[1]=f+g,e[2]=d-M,e[3]=0,e[4]=f-g,e[5]=1-(l+p),e[6]=v+b,e[7]=0,e[8]=d+M,e[9]=v-b,e[10]=1-(l+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=t.equals=t.exactEquals=t.multiplyScalarAndAdd=t.multiplyScalar=t.subtract=t.add=t.frob=t.str=t.targetTo=t.lookAt=t.ortho=t.perspectiveFromFieldOfView=t.perspective=t.frustum=t.fromQuat=t.fromRotationTranslationScaleOrigin=t.fromRotationTranslationScale=t.getRotation=t.getScaling=t.getTranslation=t.fromQuat2=t.fromRotationTranslation=t.fromZRotation=t.fromYRotation=t.fromXRotation=t.fromRotation=t.fromScaling=t.fromTranslation=t.rotateZ=t.rotateY=t.rotateX=t.rotate=t.scale=t.translate=t.multiply=t.determinant=t.adjoint=t.invert=t.transpose=t.identity=t.set=t.copy=void 0,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,a,n,o,i,u,c,s,l,f,d,h,v,p,b){return e[0]=t,e[1]=r,e[2]=a,e[3]=n,e[4]=o,e[5]=i,e[6]=u,e[7]=c,e[8]=s,e[9]=l,e[10]=f,e[11]=d,e[12]=h,e[13]=v,e[14]=p,e[15]=b,e},t.identity=n,t.transpose=function(e,t){if(e===t){var r=t[1],a=t[2],n=t[3],o=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=o,e[11]=t[14],e[12]=n,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],a=t[1],n=t[2],o=t[3],i=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=t[9],d=t[10],h=t[11],v=t[12],p=t[13],b=t[14],M=t[15],g=r*u-a*i,y=r*c-n*i,m=r*s-o*i,w=a*c-n*u,S=a*s-o*u,I=n*s-o*c,T=l*p-f*v,E=l*b-d*v,A=l*M-h*v,C=f*b-d*p,R=f*M-h*p,P=d*M-h*b,U=g*P-y*R+m*C+w*A-S*E+I*T;return U?(e[0]=(u*P-c*R+s*C)*(U=1/U),e[1]=(n*R-a*P-o*C)*U,e[2]=(p*I-b*S+M*w)*U,e[3]=(d*S-f*I-h*w)*U,e[4]=(c*A-i*P-s*E)*U,e[5]=(r*P-n*A+o*E)*U,e[6]=(b*m-v*I-M*y)*U,e[7]=(l*I-d*m+h*y)*U,e[8]=(i*R-u*A+s*T)*U,e[9]=(a*A-r*R-o*T)*U,e[10]=(v*S-p*m+M*g)*U,e[11]=(f*m-l*S-h*g)*U,e[12]=(u*E-i*C-c*T)*U,e[13]=(r*C-a*E+n*T)*U,e[14]=(p*y-v*w-b*g)*U,e[15]=(l*w-f*y+d*g)*U,e):null},t.adjoint=function(e,t){var r=t[0],a=t[1],n=t[2],o=t[3],i=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=t[9],d=t[10],h=t[11],v=t[12],p=t[13],b=t[14],M=t[15];return e[0]=u*(d*M-h*b)-f*(c*M-s*b)+p*(c*h-s*d),e[1]=-(a*(d*M-h*b)-f*(n*M-o*b)+p*(n*h-o*d)),e[2]=a*(c*M-s*b)-u*(n*M-o*b)+p*(n*s-o*c),e[3]=-(a*(c*h-s*d)-u*(n*h-o*d)+f*(n*s-o*c)),e[4]=-(i*(d*M-h*b)-l*(c*M-s*b)+v*(c*h-s*d)),e[5]=r*(d*M-h*b)-l*(n*M-o*b)+v*(n*h-o*d),e[6]=-(r*(c*M-s*b)-i*(n*M-o*b)+v*(n*s-o*c)),e[7]=r*(c*h-s*d)-i*(n*h-o*d)+l*(n*s-o*c),e[8]=i*(f*M-h*p)-l*(u*M-s*p)+v*(u*h-s*f),e[9]=-(r*(f*M-h*p)-l*(a*M-o*p)+v*(a*h-o*f)),e[10]=r*(u*M-s*p)-i*(a*M-o*p)+v*(a*s-o*u),e[11]=-(r*(u*h-s*f)-i*(a*h-o*f)+l*(a*s-o*u)),e[12]=-(i*(f*b-d*p)-l*(u*b-c*p)+v*(u*d-c*f)),e[13]=r*(f*b-d*p)-l*(a*b-n*p)+v*(a*d-n*f),e[14]=-(r*(u*b-c*p)-i*(a*b-n*p)+v*(a*c-n*u)),e[15]=r*(u*d-c*f)-i*(a*d-n*f)+l*(a*c-n*u),e},t.determinant=function(e){var t=e[0],r=e[1],a=e[2],n=e[3],o=e[4],i=e[5],u=e[6],c=e[7],s=e[8],l=e[9],f=e[10],d=e[11],h=e[12],v=e[13],p=e[14],b=e[15];return(t*i-r*o)*(f*b-d*p)-(t*u-a*o)*(l*b-d*v)+(t*c-n*o)*(l*p-f*v)+(r*u-a*i)*(s*b-d*h)-(r*c-n*i)*(s*p-f*h)+(a*c-n*u)*(s*v-l*h)},t.multiply=o,t.translate=function(e,t,r){var a=r[0],n=r[1],o=r[2],i=void 0,u=void 0,c=void 0,s=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,b=void 0,M=void 0;return t===e?(e[12]=t[0]*a+t[4]*n+t[8]*o+t[12],e[13]=t[1]*a+t[5]*n+t[9]*o+t[13],e[14]=t[2]*a+t[6]*n+t[10]*o+t[14],e[15]=t[3]*a+t[7]*n+t[11]*o+t[15]):(u=t[1],c=t[2],s=t[3],l=t[4],f=t[5],d=t[6],h=t[7],v=t[8],p=t[9],b=t[10],M=t[11],e[0]=i=t[0],e[1]=u,e[2]=c,e[3]=s,e[4]=l,e[5]=f,e[6]=d,e[7]=h,e[8]=v,e[9]=p,e[10]=b,e[11]=M,e[12]=i*a+l*n+v*o+t[12],e[13]=u*a+f*n+p*o+t[13],e[14]=c*a+d*n+b*o+t[14],e[15]=s*a+h*n+M*o+t[15]),e},t.scale=function(e,t,r){var a=r[0],n=r[1],o=r[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,n){var o,i,u,c,s,l,f,d,h,v,p,b,M,g,y,m,w,S,I,T,E,A,C,R,P=n[0],U=n[1],O=n[2],x=Math.sqrt(P*P+U*U+O*O);return x<a.EPSILON?null:(P*=x=1/x,U*=x,O*=x,o=Math.sin(r),u=1-(i=Math.cos(r)),s=t[1],l=t[2],f=t[3],h=t[5],v=t[6],p=t[7],M=t[9],g=t[10],y=t[11],I=P*U*u-O*o,T=U*U*u+i,E=O*U*u+P*o,A=P*O*u+U*o,C=U*O*u-P*o,R=O*O*u+i,e[0]=(c=t[0])*(m=P*P*u+i)+(d=t[4])*(w=U*P*u+O*o)+(b=t[8])*(S=O*P*u-U*o),e[1]=s*m+h*w+M*S,e[2]=l*m+v*w+g*S,e[3]=f*m+p*w+y*S,e[4]=c*I+d*T+b*E,e[5]=s*I+h*T+M*E,e[6]=l*I+v*T+g*E,e[7]=f*I+p*T+y*E,e[8]=c*A+d*C+b*R,e[9]=s*A+h*C+M*R,e[10]=l*A+v*C+g*R,e[11]=f*A+p*C+y*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var a=Math.sin(r),n=Math.cos(r),o=t[4],i=t[5],u=t[6],c=t[7],s=t[8],l=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+s*a,e[5]=i*n+l*a,e[6]=u*n+f*a,e[7]=c*n+d*a,e[8]=s*n-o*a,e[9]=l*n-i*a,e[10]=f*n-u*a,e[11]=d*n-c*a,e},t.rotateY=function(e,t,r){var a=Math.sin(r),n=Math.cos(r),o=t[0],i=t[1],u=t[2],c=t[3],s=t[8],l=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-s*a,e[1]=i*n-l*a,e[2]=u*n-f*a,e[3]=c*n-d*a,e[8]=o*a+s*n,e[9]=i*a+l*n,e[10]=u*a+f*n,e[11]=c*a+d*n,e},t.rotateZ=function(e,t,r){var a=Math.sin(r),n=Math.cos(r),o=t[0],i=t[1],u=t[2],c=t[3],s=t[4],l=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+s*a,e[1]=i*n+l*a,e[2]=u*n+f*a,e[3]=c*n+d*a,e[4]=s*n-o*a,e[5]=l*n-i*a,e[6]=f*n-u*a,e[7]=d*n-c*a,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var n,o,i,u=r[0],c=r[1],s=r[2],l=Math.sqrt(u*u+c*c+s*s);return l<a.EPSILON?null:(u*=l=1/l,c*=l,s*=l,n=Math.sin(t),i=1-(o=Math.cos(t)),e[0]=u*u*i+o,e[1]=c*u*i+s*n,e[2]=s*u*i-c*n,e[3]=0,e[4]=u*c*i-s*n,e[5]=c*c*i+o,e[6]=s*c*i+u*n,e[7]=0,e[8]=u*s*i+c*n,e[9]=c*s*i-u*n,e[10]=s*s*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=i,t.fromQuat2=function(e,t){var r=u,a=-t[0],n=-t[1],o=-t[2],c=t[3],s=t[4],l=t[5],f=t[6],d=t[7],h=a*a+n*n+o*o+c*c;return h>0?(r[0]=2*(s*c+d*a+l*o-f*n)/h,r[1]=2*(l*c+d*n+f*a-s*o)/h,r[2]=2*(f*c+d*o+s*n-l*a)/h):(r[0]=2*(s*c+d*a+l*o-f*n),r[1]=2*(l*c+d*n+f*a-s*o),r[2]=2*(f*c+d*o+s*n-l*a)),i(e,t,r),e};var u=r.create();function c(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],a=t[1],n=t[2],o=t[4],i=t[5],u=t[6],c=t[8],s=t[9],l=t[10];return e[0]=Math.sqrt(r*r+a*a+n*n),e[1]=Math.sqrt(o*o+i*i+u*u),e[2]=Math.sqrt(c*c+s*s+l*l),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],a=0;return r>0?(a=2*Math.sqrt(r+1),e[3]=.25*a,e[0]=(t[6]-t[9])/a,e[1]=(t[8]-t[2])/a,e[2]=(t[1]-t[4])/a):t[0]>t[5]&&t[0]>t[10]?(a=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/a,e[0]=.25*a,e[1]=(t[1]+t[4])/a,e[2]=(t[8]+t[2])/a):t[5]>t[10]?(a=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/a,e[0]=(t[1]+t[4])/a,e[1]=.25*a,e[2]=(t[6]+t[9])/a):(a=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/a,e[0]=(t[8]+t[2])/a,e[1]=(t[6]+t[9])/a,e[2]=.25*a),e},t.fromRotationTranslationScale=function(e,t,r,a){var n=t[0],o=t[1],i=t[2],u=t[3],c=n+n,s=o+o,l=i+i,f=n*c,d=n*s,h=n*l,v=o*s,p=o*l,b=i*l,M=u*c,g=u*s,y=u*l,m=a[0],w=a[1],S=a[2];return e[0]=(1-(v+b))*m,e[1]=(d+y)*m,e[2]=(h-g)*m,e[3]=0,e[4]=(d-y)*w,e[5]=(1-(f+b))*w,e[6]=(p+M)*w,e[7]=0,e[8]=(h+g)*S,e[9]=(p-M)*S,e[10]=(1-(f+v))*S,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,a,n){var o=t[0],i=t[1],u=t[2],c=t[3],s=o+o,l=i+i,f=u+u,d=o*s,h=o*l,v=o*f,p=i*l,b=i*f,M=u*f,g=c*s,y=c*l,m=c*f,w=a[0],S=a[1],I=a[2],T=n[0],E=n[1],A=n[2],C=(1-(p+M))*w,R=(h+m)*w,P=(v-y)*w,U=(h-m)*S,O=(1-(d+M))*S,x=(b+g)*S,F=(v+y)*I,L=(b-g)*I,j=(1-(d+p))*I;return e[0]=C,e[1]=R,e[2]=P,e[3]=0,e[4]=U,e[5]=O,e[6]=x,e[7]=0,e[8]=F,e[9]=L,e[10]=j,e[11]=0,e[12]=r[0]+T-(C*T+U*E+F*A),e[13]=r[1]+E-(R*T+O*E+L*A),e[14]=r[2]+A-(P*T+x*E+j*A),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],a=t[1],n=t[2],o=t[3],i=r+r,u=a+a,c=n+n,s=r*i,l=a*i,f=a*u,d=n*i,h=n*u,v=n*c,p=o*i,b=o*u,M=o*c;return e[0]=1-f-v,e[1]=l+M,e[2]=d-b,e[3]=0,e[4]=l-M,e[5]=1-s-v,e[6]=h+p,e[7]=0,e[8]=d+b,e[9]=h-p,e[10]=1-s-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,a,n,o,i){var u=1/(r-t),c=1/(n-a),s=1/(o-i);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*c,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(n+a)*c,e[10]=(i+o)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*s,e[15]=0,e},t.perspective=function(e,t,r,a,n){var o=1/Math.tan(t/2),i=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+a)*(i=1/(a-n)),e[14]=2*n*a*i):(e[10]=-1,e[14]=-2*a),e},t.perspectiveFromFieldOfView=function(e,t,r,a){var n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(n+o);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=-(i-u)*c*.5,e[9]=(n-o)*s*.5,e[10]=a/(r-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r/(r-a),e[15]=0,e},t.ortho=function(e,t,r,a,n,o,i){var u=1/(t-r),c=1/(a-n),s=1/(o-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(t+r)*u,e[13]=(n+a)*c,e[14]=(i+o)*s,e[15]=1,e},t.lookAt=function(e,t,r,o){var i=void 0,u=void 0,c=void 0,s=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,b=t[0],M=t[1],g=t[2],y=o[0],m=o[1],w=o[2],S=r[0],I=r[1],T=r[2];return Math.abs(b-S)<a.EPSILON&&Math.abs(M-I)<a.EPSILON&&Math.abs(g-T)<a.EPSILON?n(e):(d=b-S,h=M-I,v=g-T,i=m*(v*=p=1/Math.sqrt(d*d+h*h+v*v))-w*(h*=p),u=w*(d*=p)-y*v,c=y*h-m*d,(p=Math.sqrt(i*i+u*u+c*c))?(i*=p=1/p,u*=p,c*=p):(i=0,u=0,c=0),s=h*c-v*u,l=v*i-d*c,f=d*u-h*i,(p=Math.sqrt(s*s+l*l+f*f))?(s*=p=1/p,l*=p,f*=p):(s=0,l=0,f=0),e[0]=i,e[1]=s,e[2]=d,e[3]=0,e[4]=u,e[5]=l,e[6]=h,e[7]=0,e[8]=c,e[9]=f,e[10]=v,e[11]=0,e[12]=-(i*b+u*M+c*g),e[13]=-(s*b+l*M+f*g),e[14]=-(d*b+h*M+v*g),e[15]=1,e)},t.targetTo=function(e,t,r,a){var n=t[0],o=t[1],i=t[2],u=a[0],c=a[1],s=a[2],l=n-r[0],f=o-r[1],d=i-r[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);var v=c*d-s*f,p=s*l-u*d,b=u*f-c*l;return(h=v*v+p*p+b*b)>0&&(v*=h=1/Math.sqrt(h),p*=h,b*=h),e[0]=v,e[1]=p,e[2]=b,e[3]=0,e[4]=f*b-d*p,e[5]=d*v-l*b,e[6]=l*p-f*v,e[7]=0,e[8]=l,e[9]=f,e[10]=d,e[11]=0,e[12]=n,e[13]=o,e[14]=i,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=c,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e[6]=t[6]+r[6]*a,e[7]=t[7]+r[7]*a,e[8]=t[8]+r[8]*a,e[9]=t[9]+r[9]*a,e[10]=t[10]+r[10]*a,e[11]=t[11]+r[11]*a,e[12]=t[12]+r[12]*a,e[13]=t[13]+r[13]*a,e[14]=t[14]+r[14]*a,e[15]=t[15]+r[15]*a,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],u=e[4],c=e[5],s=e[6],l=e[7],f=e[8],d=e[9],h=e[10],v=e[11],p=e[12],b=e[13],M=e[14],g=e[15],y=t[0],m=t[1],w=t[2],S=t[3],I=t[4],T=t[5],E=t[6],A=t[7],C=t[8],R=t[9],P=t[10],U=t[11],O=t[12],x=t[13],F=t[14],L=t[15];return Math.abs(r-y)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-m)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-w)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-S)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(u-I)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-T)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(s-E)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-A)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(f-C)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-R)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(h-P)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(v-U)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(p-O)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(b-x)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(x))&&Math.abs(M-F)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(F))&&Math.abs(g-L)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))},t.mul=o,t.sub=c}).apply(null,a))||(e.exports=n)},NNdt:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("LxLY"),r("O0KB"),r("qasq"),r("mkxQ"),r("W2ph"),r("1RVI")],void 0===(n=(function(e,t,r,a,n,o,i,u){"use strict";function c(e,t){for(var r=new Float64Array(t),a=0;a<t;a++)r[a]=e[3*a+2];return r}function s(e){return null==e||"none"===e?null:"low-four-bit"===e?function(e){return 15&e}:"high-four-bit"===e?function(e){return(240&e)>>4}:"absolute-value"===e?function(e){return Math.abs(e)}:"modulo-ten"===e?function(e){return e%10}:null}function l(e){for(var t=0,r=0,a=e||[];r<a.length;r++)t|=1<<a[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.filterInPlace=t.elevationFromPositions=t.getAttributeValues=t.readGeometry=t.evaluateRenderer=void 0,t.evaluateRenderer=function(e,t,r,i){var u=e.rendererJSON,c=null,l=null;if(t&&e.isRGBRenderer)c=t;else if(t&&"pointCloudUniqueValueRenderer"===u.type){var f=(l=o.fromJSON(u)).colorUniqueValueInfos;c=new Uint8Array(3*i);for(var d=s(l.fieldTransformType),h=0;h<i;h++)for(var v=(M=d?d(t[h]):t[h])+"",p=0;p<f.length;p++)if(f[p].values.indexOf(v)>=0){c[3*h]=f[p].color.r,c[3*h+1]=f[p].color.g,c[3*h+2]=f[p].color.b;break}}else if(t&&"pointCloudStretchRenderer"===u.type){var b=(l=n.fromJSON(u)).stops;for(c=new Uint8Array(3*i),d=s(l.fieldTransformType),h=0;h<i;h++){var M=d?d(t[h]):t[h],g=b.length-1;if(M<b[0].value)c[3*h]=b[0].color.r,c[3*h+1]=b[0].color.g,c[3*h+2]=b[0].color.b;else if(M>=b[g].value)c[3*h]=b[g].color.r,c[3*h+1]=b[g].color.g,c[3*h+2]=b[g].color.b;else for(p=1;p<b.length;p++)if(M<b[p].value){var y=(M-b[p-1].value)/(b[p].value-b[p-1].value);c[3*h]=b[p].color.r*y+b[p-1].color.r*(1-y),c[3*h+1]=b[p].color.g*y+b[p-1].color.g*(1-y),c[3*h+2]=b[p].color.b*y+b[p-1].color.b*(1-y);break}}}else if(t&&"pointCloudClassBreaksRenderer"===u.type){var m=(l=a.fromJSON(u)).colorClassBreakInfos;for(c=new Uint8Array(3*i),d=s(l.fieldTransformType),h=0;h<i;h++)for(M=d?d(t[h]):t[h],p=0;p<m.length;p++)if(M>=m[p].minValue&&M<=m[p].maxValue){c[3*h]=m[p].color.r,c[3*h+1]=m[p].color.g,c[3*h+2]=m[p].color.b;break}}else for(c=new Uint8Array(3*i),h=0;h<c.length;h++)c[h]=255;if(r&&l&&l.colorModulation){var w=l.colorModulation.minValue,S=l.colorModulation.maxValue;for(h=0;h<i;h++){var I=(M=r[h])>=S?1:M<=w?.3:.3+.7*(M-w)/(S-w);c[3*h]=I*c[3*h],c[3*h+1]=I*c[3*h+1],c[3*h+2]=I*c[3*h+2]}}return c},t.readGeometry=function(e,t){if(null==e.encoding||""===e.encoding){var a=i.createGeometryIndexFromSchema(t,e);if(r.isNone(a.vertexAttributes.position))return;for(var n=i.createTypedView(t,a.vertexAttributes.position),o=a.header.fields,c=[o.offsetX,o.offsetY,o.offsetZ],s=[o.scaleX,o.scaleY,o.scaleZ],l=n.length/3,f=new Float64Array(3*l),d=0;d<l;d++)f[3*d]=n[3*d]*s[0]+c[0],f[3*d+1]=n[3*d+1]*s[1]+c[1],f[3*d+2]=n[3*d+2]*s[2]+c[2];return f}if("lepcc-xyz"===e.encoding)return u.decodeXYZ(t).result},t.getAttributeValues=function(e,t,a){return r.isSome(e)&&e.attributeInfo.useElevation?c(t,a):r.isSome(e)?i.readBinaryAttribute(e.attributeInfo.storageInfo,e.buffer,a):null},t.elevationFromPositions=c,t.filterInPlace=function(e,t,r,a,n){for(var o=e.length/3,i=0,u=0;u<o;u++){for(var c=!0,s=0;s<a.length&&c;s++){var f=a[s].filterJSON,d=n[s].values[u];switch(f.type){case"pointCloudValueFilter":var h="exclude"===f.mode;-1!==f.values.indexOf(d)===h&&(c=!1);break;case"pointCloudBitfieldFilter":var v=l(f.requiredSetBits),p=l(f.requiredClearBits);(d&v)===v&&0==(d&p)||(c=!1);break;case"pointCloudReturnFilter":for(var b=15&d,M=d>>>4&15,g=M>1,y=1===b,m=b===M,w=!1,S=0,I=f.includedReturns;S<I.length;S++){var T=I[S];if("last"===T&&m||"firstOfMany"===T&&y&&g||"lastOfMany"===T&&m&&g||"single"===T&&!g){w=!0;break}}w||(c=!1)}}c&&(r[i]=u,e[3*i]=e[3*u],e[3*i+1]=e[3*u+1],e[3*i+2]=e[3*u+2],t[3*i]=t[3*u],t[3*i+1]=t[3*u+1],t[3*i+2]=t[3*u+2],i++)}return i}}).apply(null,a))||(e.exports=n)},W2ph:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("rg9i"),r("qsST"),r("1RVI")],void 0===(n=(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBytesPerValue=t.isValueType=t.valueType2ArrayBufferReader=t.valueType2TypedArrayClassMap=t.readBinaryAttribute=t.createGeometryDescriptorForDraco=t.createGeometryDescriptorFromSchema=t.createGeometryDescriptor=t.createGeometryIndexFromSchema=t.createGeometryDescriptorFromDefinition=t.createAttributeDataIndex=t.createRawView=t.createTypedView=t.readStringArray=t.readHeader=void 0;var u=o.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function c(e,t,r){for(var n="",o=0;o<r;){var i=e[t+o];if(i<128)n+=String.fromCharCode(i),o++;else if(i>=192&&i<224){if(o+1>=r)throw new a("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var u=(31&i)<<6|63&e[t+o+1];n+=String.fromCharCode(u),o+=2}else if(i>=224&&i<240){if(o+2>=r)throw new a("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");u=(15&i)<<12|(63&e[t+o+1])<<6|63&e[t+o+2],n+=String.fromCharCode(u),o+=3}else{if(!(i>=240&&i<248))throw new a("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=r)throw new a("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");(u=(7&i)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3])>=65536?n+=String.fromCharCode(55296+(u-65536>>10),56320+(1023&u)):n+=String.fromCharCode(u),o+=4}}return n}function s(e,r){for(var a={byteOffset:0,byteCount:0,fields:Object.create(null)},n=0,o=0;o<r.length;o++){var i=r[o],u=i.valueType||i.type;a.fields[i.property]=(0,t.valueType2ArrayBufferReader[u])(e,n),n+=t.valueType2TypedArrayClassMap[u].BYTES_PER_ELEMENT}return a.byteCount=n,a}function l(e,t,r){var n,o,i=[],u=0;for(o=0;o<e;o+=1){if((n=t[o])>0){if(i.push(c(r,u,n-1)),0!==r[u+n-1])throw new a("string-array-error","Invalid string array: missing null termination.")}else i.push(null);u+=n}return i}function f(e,r){return new(0,t.valueType2TypedArrayClassMap[r.valueType])(e,r.byteOffset,r.count*r.valuesPerElement)}function d(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}function h(e,t,r){for(var o=null!=t.header?s(e,t.header):{byteOffset:0,byteCount:0,fields:{count:r}},i={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},u=o.byteCount,c=0;c<t.ordering.length;c++){var l=t.ordering[c],f=n.clone(t[l]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=u,f.byteCount=o.fields[l+"ByteCount"],"UTF-8"!==f.encoding)throw new a("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!y(f.valueType))throw new a("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var d=m(f.valueType);f.byteOffset=u+=u%d!=0?d-u%d:0,f.byteCount=d*f.valuesPerElement*f.count}u+=f.byteCount,i.entries[l]=f}return i.byteCount=u-i.byteOffset,i}function v(e,t,r){if(t!==e&&u.error("Invalid "+r+" buffer size\n expected: "+e+", actual: "+t+")"),t<e)throw new a("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function p(e){return{isDraco:!1,isLegacy:!1,color:null!=e.color,normal:null!=e.normal,uv0:null!=e.uv0,uvRegion:null!=e.uvRegion,featureIndex:null!=e.faceRange&&null!=e.featureId}}function b(e){for(var t={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1},r=0,a=e.ordering;r<a.length;r++){var n=a[r];if(e.vertexAttributes[n])switch(n){case"position":break;case"normal":t.normal=!0;break;case"color":t.color=!0;break;case"uv0":t.uv0=!0;break;case"region":t.uvRegion=!0}}return e.featureAttributes&&e.featureAttributeOrder&&(t.featureIndex=!0),t}function M(e){for(var t={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1},r=0,a=e;r<a.length;r++)switch(a[r]){case"position":break;case"normal":t.normal=!0;break;case"uv0":t.uv0=!0;break;case"color":t.color=!0;break;case"uv-region":t.uvRegion=!0;break;case"feature-index":t.featureIndex=!0}return t}t.readHeader=s,t.readStringArray=l,t.createTypedView=f,t.createRawView=d,t.createAttributeDataIndex=h,t.createGeometryDescriptorFromDefinition=p,t.createGeometryIndexFromSchema=function(e,t){for(var a=s(e,t&&t.header),n=a.byteCount,o={isDraco:!1,header:a,byteOffset:a.byteCount,byteCount:0,vertexAttributes:{}},i=a.fields,u=null!=i.vertexCount?i.vertexCount:i.count,c=0,l=t.ordering;c<l.length;c++){var f=l[c];if(t.vertexAttributes[f]){var d=r.__assign(r.__assign({},t.vertexAttributes[f]),{byteOffset:n,count:u});o.vertexAttributes[g[f]?g[f]:"_"+f]=d,n+=m(d.valueType)*d.valuesPerElement*u}}var h=i.faceCount;if(t.faces&&h){o.faces={};for(var p=0,b=t.ordering;p<b.length;p++){var M=b[p];t.faces[M]&&(d=r.__assign(r.__assign({},t.faces[M]),{byteOffset:n,count:h}),o.faces[M]=d,n+=m(d.valueType)*d.valuesPerElement*h)}}var y=i.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&y){o.featureAttributes={};for(var w=0,S=t.featureAttributeOrder;w<S.length;w++){var I=S[w];t.featureAttributes[I]&&(d=r.__assign(r.__assign({},t.featureAttributes[I]),{byteOffset:n,count:y}),o.featureAttributes[I]=d,n+=("UInt64"===d.valueType?8:m(d.valueType))*d.valuesPerElement*y)}}return v(n,e.byteLength,"geometry"),o.byteCount=n-o.byteOffset,o},t.createGeometryDescriptor=function(e,t){return e&&e.compressedAttributes&&"draco"===e.compressedAttributes.encoding?M(e.compressedAttributes.attributes):e?p(e):b(t)},t.createGeometryDescriptorFromSchema=b,t.createGeometryDescriptorForDraco=M;var g={position:"position",normal:"normal",color:"color",uv0:"uv0",region:"uvRegion"};function y(e){return t.valueType2TypedArrayClassMap.hasOwnProperty(e)}function m(e){return y(e)?t.valueType2TypedArrayClassMap[e].BYTES_PER_ELEMENT:0}t.readBinaryAttribute=function(e,t,r){if("lepcc-rgb"===e.encoding)return i.decodeRGB(t);if("lepcc-intensity"===e.encoding)return i.decodeIntensity(t);if(null!=e.encoding&&""!==e.encoding)throw new a("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(u.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(u.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var n=h(t,e,r);v(n.byteOffset+n.byteCount,t.byteLength,"attribute");var o=n.entries.attributeValues||n.entries.objectIds;if(o){if("String"===o.valueType){var c=n.entries.attributeByteCounts,s=f(t,c),p=d(t,o);return l(c.count,s,p)}return f(t,o)}throw new a("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},t.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},t.valueType2ArrayBufferReader={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}},t.isValueType=y,t.getBytesPerValue=m}).apply(null,a))||(e.exports=n)},fdzS:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("gKSc")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quatf32=void 0,t.quatf32=r}).apply(null,a))||(e.exports=n)},gKSc:function(e,t,r){var a,n;a=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createView=t.fromValues=t.clone=t.create=void 0,t.create=function(){var e=new Float32Array(4);return e[3]=1,e},t.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,r,a){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=a,n},t.createView=function(e,t){return new Float32Array(e,t,4)}}).apply(null,a))||(e.exports=n)},iHt0:function(e,t,r){var a,n;a=[r.dj.c(e.i),t],void 0===(n=(function(e,t){"use strict";function r(){return new Float32Array(3)}function a(e,t,r){var a=new Float32Array(3);return a[0]=e,a[1]=t,a[2]=r,a}function n(){return r()}function o(){return a(1,1,1)}function i(){return a(1,0,0)}function u(){return a(0,1,0)}function c(){return a(0,0,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.UNIT_Z=t.UNIT_Y=t.UNIT_X=t.ONES=t.ZEROS=t.unitZ=t.unitY=t.unitX=t.ones=t.zeros=t.createView=t.fromValues=t.clone=t.create=void 0,t.create=r,t.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.fromValues=a,t.createView=function(e,t){return new Float32Array(e,t,3)},t.zeros=n,t.ones=o,t.unitX=i,t.unitY=u,t.unitZ=c,t.ZEROS=n(),t.ONES=o(),t.UNIT_X=i(),t.UNIT_Y=u(),t.UNIT_Z=c()}).apply(null,a))||(e.exports=n)},mmEe:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("xoE+"),r("LxLY"),r("8uEs"),r("FXVB"),r("0LE5"),r("Rdxj"),r("Z4y+"),r("lRq4"),r("KDna"),r("83/a")],void 0===(n=(function(e,t,r,a,n,o,i,u,c,s,l,f){"use strict";var d,h,v,p,b,M,g,y;function m(e,t,r,a){return!(e.length<2)&&(2===e.length&&(Y[0]=e[0],Y[1]=e[1],Y[2]=0,e=Y),w(e,t,0,r,a,0,1))}function w(e,t,r,n,o,i,u){void 0===u&&(u=1);var c=B(t,o,q);if(a.isNone(c))return!1;if(c===I){if(e===n&&r===i)return!0;for(var s=r+3*u,l=r,f=i;l<s;l++,f++)n[f]=e[l];return!0}var d=r+3*u;for(l=r,f=i;l<d;l+=3,f+=3)c(e,l,n,f);return!0}function S(e,r){return r.spatialReference===e?r.spatialReferenceId:(r.spatialReference=e,"metersPerUnit"in r&&(r.metersPerUnit=n.getMetersPerUnitForSR(e,1)),r.spatialReferenceId=e.wkt===t.SphericalECEFSpatialReference.wkt?1:e.isWGS84?2:e.isWebMercator?3:e.wkt===t.WGS84ECEFSpatialReference.wkt?4:4490===e.wkid?5:0)}function I(e,t,r,a){e!==r&&(r[a++]=e[t++],r[a++]=e[t++],r[a]=e[t])}function T(e,t,r,a){r[a++]=X*(e[t++]/l.earthRadius),r[a++]=X*(Math.PI/2-2*Math.atan(Math.exp(-1*e[t++]/l.earthRadius))),r[a]=e[t]}function E(e,t,r,a){T(e,t,r,a),R(r,a,r,a)}function A(e,t,r,a){T(e,t,r,a),x(r,a,r,a)}function C(e,t,a,n){var o=.4999999*Math.PI,i=r.clamp(z*e[t+1],-o,o),u=Math.sin(i);a[n++]=z*e[t]*l.earthRadius,a[n++]=l.halfEarthRadius*Math.log((1+u)/(1-u)),a[n]=e[t+2]}function R(e,t,r,a){var n=l.earthRadius+e[t+2],o=z*e[t+1],i=z*e[t],u=Math.cos(o);r[a++]=Math.cos(i)*u*n,r[a++]=Math.sin(i)*u*n,r[a]=Math.sin(o)*n}function P(e,t,a,n){var o=f.Vec3Compact.length(e,t),i=r.asinClamped(e[t+2]/(0===o?1:o)),u=Math.atan2(e[t+1],e[t]);a[n++]=X*u,a[n++]=X*i,a[n]=o-l.earthRadius}function U(e,t,r,a){P(e,t,r,a),C(r,a,r,a)}function O(e,t,r,a){P(e,t,r,a),x(r,a,r,a)}function x(e,t,r,a){var n=l.earthEllipsoidConstants,o=z*e[t],i=z*e[t+1],u=e[t+2],c=Math.sin(i),s=Math.cos(i),f=n.a/Math.sqrt(1-n.e2*c*c);r[a++]=(f+u)*s*Math.cos(o),r[a++]=(f+u)*s*Math.sin(o),r[a++]=(f*(1-n.e2)+u)*c}function F(e,t,r,a){var n,o,i,u,c,s,f,d,h,v,p,b,M,g,y,m,w,S,I,T,E,A=l.earthEllipsoidConstants,C=e[t],R=e[t+1],P=e[t+2];n=Math.abs(P),o=C*C+R*R,i=Math.sqrt(o),u=o+P*P,c=Math.sqrt(u),T=Math.atan2(R,C),s=P*P/u,g=A.a2/c,y=A.a3-A.a4/c,(f=o/u)>.3?(d=n/c*(1+f*(A.a1+g+s*y)/c),I=Math.asin(d),v=d*d,h=Math.sqrt(1-v)):(h=i/c*(1-s*(A.a5-g-f*y)/c),I=Math.acos(h),v=1-h*h,d=Math.sqrt(v)),p=1-A.e2*v,b=A.a/Math.sqrt(p),I+=S=(m=h*(y=n-(M=A.a6*b)*d)-d*(g=i-b*h))/(M/p+(w=h*g+d*y)),E=w+m*S/2,P<0&&(I=-I),r[a++]=X*T,r[a++]=X*I,r[a]=E}function L(e,t,r,a){F(e,t,r,a),R(r,a,r,a)}function j(e,t,r,a){F(e,t,r,a),C(r,a,r,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getProjector=t.wgs84ComparableLonLatToECEF=t.vectorToWGS84ComparableLonLat=t.canProjectToWGS84ComparableLonLat=t.webMercator=t.boundingRectToBoundingRect=t.mbsToMbs=t.transformDirection=t.computeLinearTransformation=t.localLinearScaleFactors=t.bufferToBuffer=t.xyzToVector=t.pathsToPaths=t.vectorToVector=t.getProjectorName=t.canProject=t.WGS84ECEFSpatialReference=t.SphericalECEFSpatialReference=void 0,t.SphericalECEFSpatialReference=new c({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",'+l.earthRadius+',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'}),t.WGS84ECEFSpatialReference=new c({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'}),t.canProject=function(e,t){return!!B(e,t,q)},t.getProjectorName=function(e,t){var r=B(e,t,q);return r===I?"copy3":r===R?"wgs84ToSphericalECEF":r===C?"wgs84ToWebMercator":r===x?"wgs84ToWGS84ECEF":r===T?"webMercatorToWGS84":r===E?"webMercatorToSphericalECEF":r===A?"webMercatorToWGS84ECEF":r===F?"wgs84ECEFToWGS84":r===L?"wgs84ECEFToSphericalECEF":r===j?"wgs84ECEFToWebMercator":r===P?"sphericalECEFToWGS84":r===U?"sphericalECEFToWebMercator":r===O?"sphericalECEFToWGS84ECEF":null},t.vectorToVector=m,t.pathsToPaths=function(e,t,r,a,n,o,i){void 0===i&&(i=0);for(var u=new Array,c=0,s=e;c<s.length;c++)for(var l=0,f=b=s[c];l<f.length;l++){var d=f[l];u.push(d[0],d[1],t?d[2]:i)}if(!w(u,a,0,u,o,0,u.length/3))return!1;var h=0;n.length=0;for(var v=0,p=e;v<p.length;v++){for(var b=p[v],M=new Array,g=0,y=b;g<y.length;g++)d=y[g],t&&r?M.push([u[h++],u[h++],u[h++],d[3]]):t?M.push([u[h++],u[h++],u[h++]]):r?(M.push([u[h++],u[h++],d[2]]),h++):(M.push([u[h++],u[h++]]),h++);n.push(M)}return!0},t.xyzToVector=function(e,t,r,a,n,o){return Y[0]=e,Y[1]=t,Y[2]=r,w(Y,a,0,n,o,0,1)},t.bufferToBuffer=w,t.localLinearScaleFactors=function(e,t,r,a){var n=S(t,D),o=S(a,G);if(n===o&&0!==n||t.equals(a))return r[0]=1,r[1]=1,r[2]=1,!0;if(1===n){var u=i.vec3.length(e),c=u/Math.sqrt(e[0]*e[0]+e[1]*e[1]),s=u/l.earthRadius;if(3===o)return r[0]=c*s,r[1]=c*s,r[2]=1,!0;if(2===o||5===o){var f=180/(l.earthRadius*Math.PI);return r[0]=f*c*s,r[1]=f*s,r[2]=1,!0}}return!1},t.computeLinearTransformation=function(e,t,r,n){var i=S(e,D),u=S(n,G);if(i===u&&1!==u&&(0!==i||e.equals(n)))return o.mat4.identity(r),o.mat4.translate(r,r,t),!0;if(1===u){var c=V[i][6],s=V[6][u];if(a.isNone(c)||a.isNone(s))return!1;c(t,0,W,0),s(W,0,Z,0);var l=z*W[0],f=z*W[1],d=Math.sin(l),h=Math.cos(l),v=Math.sin(f),p=Math.cos(f),b=r;return b[0]=-d,b[4]=-v*h,b[8]=p*h,b[12]=Z[0],b[1]=h,b[5]=-v*d,b[9]=p*d,b[13]=Z[1],b[2]=0,b[6]=p,b[10]=v,b[14]=Z[2],b[3]=0,b[7]=0,b[11]=0,b[15]=1,!0}if(3===u&&(2===i||1===i)){if(a.isNone(c=V[i][6]))return!1;c(t,0,W,0);var M=z*W[1];C(W,0,Z,0),o.mat4.identity(r),o.mat4.translate(r,r,Z);var g=1/Math.cos(M);return o.mat4.scale(r,r,[g,g,1]),!0}return!1},t.transformDirection=function(e,t,r,a,n){i.vec3.copy(H,e),i.vec3.add(J,e,t),m(H,r,H,n),m(J,r,J,n),i.vec3.subtract(a,J,H),i.vec3.normalize(a,a)},t.mbsToMbs=function(e,t,r,n){var o=N(t,n,k);if(o.projector===I)return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],!0;if(a.isNone(o.projector))return!1;var i=o.source,u=o.dest;if(3===u.spatialReferenceId){var c=V[i.spatialReferenceId][2];if(a.isNone(c))return!1;c(e,0,W,0);var s=Math.abs(z*W[1])+Math.asin(e[3]/(l.earthRadius+e[2]));if(C(W,0,r,0),s>.9999*Math.PI)r[3]=Number.MAX_VALUE;else{var f=1/Math.cos(s);r[3]=f*e[3]}return!0}return o.projector(e,0,r,0),r[3]=e[3]*i.metersPerUnit/u.metersPerUnit,!0},t.boundingRectToBoundingRect=function(e,t,r,a){return!(null==e||(t.equals(a)?(s.set(r,e),0):(Y[0]=e[0],Y[1]=e[1],Y[2]=0,!w(Y,t,0,Y,a,0,1)||(r[0]=Y[0],r[1]=Y[1],Y[0]=e[2],Y[1]=e[3],Y[2]=0,!w(Y,t,0,Y,a,0,1)||(r[2]=Y[0],r[3]=Y[1],0)))))},function(e){e.x2lon=function(e){return e/l.earthRadius},e.y2lat=function(e){return Math.PI/2-2*Math.atan(Math.exp(-1*e/l.earthRadius))},e.lon2x=function(e){return e*l.earthRadius},e.lat2y=function(e){var t=Math.sin(e);return l.earthRadius/2*Math.log((1+t)/(1-t))}}(t.webMercator||(t.webMercator={})),t.canProjectToWGS84ComparableLonLat=function(e){var t=S(e,D);return!!V[t][6]},t.vectorToWGS84ComparableLonLat=function(e,t,r){var n=S(t,D),o=V[n][6];return!a.isNone(o)&&(o(e,0,Y,0),r!==Y&&(r[0]=Y[0],r[1]=Y[1],r.length>2&&(r[2]=Y[2])),!0)},t.wgs84ComparableLonLatToECEF=function(e,t,r,a){void 0===a&&(a=0);var n=l.earthRadius+a,o=Math.cos(r);e[0]=Math.cos(t)*o*n,e[1]=Math.sin(t)*o*n,e[2]=Math.sin(r)*n};var V=((d={})[2]=((h={})[5]=null,h[6]=I,h[1]=R,h[0]=null,h[3]=C,h[2]=I,h[4]=x,h),d[5]=((v={})[5]=I,v[6]=I,v[1]=R,v[0]=null,v[3]=null,v[2]=null,v[4]=x,v),d[3]=((p={})[5]=null,p[6]=T,p[1]=E,p[0]=null,p[3]=I,p[2]=T,p[4]=A,p),d[4]=((b={})[5]=F,b[6]=F,b[1]=L,b[0]=null,b[3]=j,b[2]=F,b[4]=I,b),d[1]=((M={})[5]=P,M[6]=P,M[1]=I,M[0]=null,M[3]=U,M[2]=P,M[4]=O,M),d[0]=((g={})[5]=null,g[6]=null,g[1]=null,g[0]=I,g[3]=null,g[2]=null,g[4]=null,g),d[6]=((y={})[5]=null,y[6]=I,y[1]=R,y[0]=null,y[3]=null,y[2]=I,y[4]=x,y),d);function B(e,t,r){return void 0===r&&(r=_()),N(e,t,r).projector}function N(e,t,r){if(r.source.spatialReference===e&&r.dest.spatialReference===t)return r;var a=S(e,r.source),n=S(t,r.dest);return r.projector=0===a&&0===n?e.equals(t)?I:null:V[a][n],r}function _(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:I}}t.getProjector=B;var D={spatialReference:null,spatialReferenceId:0},G={spatialReference:null,spatialReferenceId:0},q=_(),k=_(),z=r.deg2rad(1),X=r.rad2deg(1),Y=u.vec3f64.create(),W=u.vec3f64.create(),Z=u.vec3f64.create(),H=u.vec3f64.create(),J=u.vec3f64.create()}).apply(null,a))||(e.exports=n)},vlC2:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("iHt0")],void 0===(n=(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3f32=void 0,t.vec3f32=r}).apply(null,a))||(e.exports=n)},wCvz:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("LxLY"),r("qMld"),r("rusB"),r("EuvN"),r("fdzS"),r("0LE5"),r("vlC2"),r("Z4y+"),r("NNdt"),r("mmEe")],void 0===(n=(function(e,t,r,a,n,o,i,u,c,s,l,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(){}return e.prototype.transform=function(e){var t=this._transform(e),o=[t.points.buffer,t.rgb.buffer];r.isSome(t.pointIdFilterMap)&&o.push(t.pointIdFilterMap.buffer);for(var i=0,u=t.attributes;i<u.length;i++){var c=u[i];"buffer"in c.values&&n.isArrayBuffer(c.values.buffer)&&c.values.buffer!==t.rgb.buffer&&o.push(c.values.buffer)}return a.resolve({result:t,transferList:o})},e.prototype._transform=function(e){var t=l.readGeometry(e.schema,e.geometryBuffer),a=t.length/3,n=null,o=[],i=l.getAttributeValues(e.primaryAttributeData,t,a);r.isSome(e.primaryAttributeData)&&i&&o.push({attributeInfo:e.primaryAttributeData.attributeInfo,values:i});var u=l.getAttributeValues(e.modulationAttributeData,t,a);r.isSome(e.modulationAttributeData)&&u&&o.push({attributeInfo:e.modulationAttributeData.attributeInfo,values:u});var c=l.evaluateRenderer(e.rendererInfo,i,u,a);if(e.filterInfo&&e.filterInfo.length>0&&r.isSome(e.filterAttributesData)){var f=e.filterAttributesData.map((function(e){var r=l.getAttributeValues(e,t,a),n={attributeInfo:e.attributeInfo,values:r};return o.push(n),n}));n=new Uint32Array(a),a=l.filterInPlace(t,c,n,e.filterInfo,f)}for(var d=0,h=e.userAttributesData;d<h.length;d++){var v=h[d],p=l.getAttributeValues(v,t,a);o.push({attributeInfo:v.attributeInfo,values:p})}3*a<c.length&&(c=new Uint8Array(c.buffer.slice(0,3*a))),this._applyElevationOffsetInPlace(t,a,e.elevationOffset);var b=this._transformCoordinates(t,a,e.obb,s.fromJSON(e.inSR),s.fromJSON(e.outSR));return{obb:e.obb,points:b,rgb:c,attributes:o,pointIdFilterMap:n}},e.prototype._transformCoordinates=function(e,t,r,a,n){if(!f.bufferToBuffer(e,a,0,e,n,0,t))throw Error("Can't reproject");var i=c.vec3f32.fromValues(r.center[0],r.center[1],r.center[2]),s=c.vec3f32.create(),l=c.vec3f32.create();o.quat.conjugate(h,r.quaternion);for(var d=new Float32Array(3*t),v=0;v<t;v++)s[0]=e[3*v]-i[0],s[1]=e[3*v+1]-i[1],s[2]=e[3*v+2]-i[2],u.vec3.transformQuat(l,s,h),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(l[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(l[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(l[2])),d[3*v]=s[0],d[3*v+1]=s[1],d[3*v+2]=s[2];return d},e.prototype._applyElevationOffsetInPlace=function(e,t,r){if(0!==r)for(var a=0;a<t;a++)e[3*a+2]+=r},e}(),h=i.quatf32.create();t.default=function(){return new d}}).apply(null,a))||(e.exports=n)}}]);