(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1agI":function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return o});var n=r("OKTS"),i=r("feGD"),s=r("jIHu");const a=0,o=1,l=2;class c{constructor(e,t){this.width=e,this.height=t;const r=Math.ceil(e/1),n=Math.ceil(t/1);this._cols=r,this._rows=n,this._cells=i.a.create(r*n)}insertMetrics(e){const t=this._hasCollision(e);return t===a&&this._markMetrics(e),t}getCellId(e,t){return e+t*this._cols}has(e){return this._cells.has(e)}hasRange(e,t){return this._cells.hasRange(e,t)}set(e){this._cells.set(e)}setRange(e,t){this._cells.setRange(e,t)}_hasCollision(e){const t=e.id;let r=0,n=0;e.save();do{const t=e.boundsCount;r+=t;for(let r=0;r<t;r++){const t=e.boundsComputedAnchorX(r),i=e.boundsComputedAnchorY(r),s=e.boundsWidth(r)+2,a=e.boundsHeight(r)+2;switch(this._collide(t,i,s,a)){case l:return l;case o:n++}}}while(e.peekId()===t&&e.next());return e.restore(),r===n?o:a}_collide(e,t,r,i){const s=e-r/2,c=e+r/2,u=t-i/2,h=t+i/2;if(c<0||h<0||s>this.width||u>this.height)return o;const d=Object(n.c)(Math.floor(s/1),0,this._cols),p=Object(n.c)(Math.floor(u/1),0,this._rows),f=Object(n.c)(Math.ceil(c/1),0,this._cols),b=Object(n.c)(Math.ceil(h/1),0,this._rows);for(let n=p;n<=b;n++)for(let e=d;e<=f;e++){const t=this.getCellId(e,n);if(this.has(t))return l}return a}_mark(e,t,r,i){const s=e-r/2,a=e+r/2,o=t-i/2,l=t+i/2,c=Object(n.c)(Math.floor(s/1),0,this._cols),u=Object(n.c)(Math.floor(o/1),0,this._rows),h=Object(n.c)(Math.ceil(a/1),0,this._cols),d=Object(n.c)(Math.ceil(l/1),0,this._rows);for(let n=u;n<=d;n++)for(let e=c;e<=h;e++){const t=this.getCellId(e,n);this.set(t)}return!1}_markMetrics(e){const t=e.id;do{const t=e.boundsCount;for(let r=0;r<t;r++){const t=e.boundsComputedAnchorX(r),n=e.boundsComputedAnchorY(r),i=e.boundsWidth(r)+2,s=e.boundsHeight(r)+2;this._mark(t,n,i,s)}}while(e.peekId()===t&&e.next())}}class u{constructor(e,t=2){this._bucketSize=e,this._rowsLength=s.E/e,this._colsLength=s.E/e,this._elementsPerBucket=t,this._grid=this._initGrid()}checkOverlap(e,t){const r=Math.floor(e/this._bucketSize),n=Math.floor(t/this._bucketSize);return r<0||r>=this._rowsLength||n<0||n>=this._colsLength||this._grid[n*this._colsLength+r]>=this._elementsPerBucket}markUsed(e,t){const r=Math.floor(e/this._bucketSize),n=Math.floor(t/this._bucketSize);this._grid[n*this._colsLength+r]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}},"39Rk":function(e,t,r){"use strict";r.r(t),r.d(t,"createCircle",function(){return x}),r.d(t,"createEllipse",function(){return w}),r.d(t,"createMultipoint",function(){return g}),r.d(t,"createPoint",function(){return y}),r.d(t,"createPolygon",function(){return j}),r.d(t,"createPolyline",function(){return O}),r.d(t,"createRectangle",function(){return v}),r.d(t,"createSquare",function(){return _}),r.d(t,"makeMapPoint",function(){return m});var n=r("f/qv"),i=r("srIe"),s=r("tQ+6"),a=r("f4Nx"),o=r("SuVq"),l=r("V9wi"),c=r("Mu3I"),u=r("Ehki"),h=r("UhwK"),d=(r("4GrV"),r("gEht")),p=r("tI4m"),f=r("6lH3"),b=r("pUVe");function m(e,t,r=null){return Object(i.k)(r)?[e,t,r]:[e,t]}function y(e,t){const r=new o.a({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(r.z=e[2]),r}function g(e,t){return new l.a({points:e,spatialReference:t})}function O(e,t,r){const n=new h.a({paths:e,spatialReference:t});return r&&Object(c.i)(n),n}function j(e,t,r,i=!0){const o=Object(n.a)(e);o.forEach(e=>{const t=e[0],r=e[e.length-1];Object(s.c)(t,r)&&1!==e.length||e.push(e[0])});let l=new u.a({rings:o,spatialReference:t});return l.rings.forEach(e=>{Object(c.g)(e,!1,!1)||e.reverse()}),r&&Object(c.i)(l),i&&l.isSelfIntersecting&&Object(a.i)(t)&&(l=Object(f.simplify)(l)),l}function _(e,t,r){const n=t.mapToLocalMultiple(e),s=[],a={x:n[0].x,y:n[0].y},o=n[1].y,l=Math.round(n[1].x-a.x),c=Math.round(o-a.y),u=Math.max(Math.abs(l),Math.abs(c));if(r){const e={x:a.x+u,y:a.y+u},t={x:a.x-u,y:a.y-u};s.push(Object(b.b)(e.x,t.y),Object(b.b)(t.x,t.y),Object(b.b)(t.x,e.y),Object(b.b)(e.x,e.y))}else{const e={x:l>0?a.x+u:a.x-u,y:c>0?a.y+u:a.y-u};s.push(Object(b.b)(a.x,a.y),Object(b.b)(e.x,a.y),Object(b.b)(e.x,e.y),Object(b.b)(a.x,e.y))}return j([Object(i.g)(s.map(e=>t.localToMap(e)))],t.spatialReference,t.doUnnormalization,!0)}function v(e,t,r){let n=t.mapToLocalMultiple(e);if(1===n.length){const e=48,t=n[0];n=[Object(b.b)(t.x-e,t.y+e),Object(b.b)(t.x+e,t.y-e),Object(b.b)(t.x+e,t.y-e),Object(b.b)(t.x-e,t.y+e)]}const s=[],a={x:n[0].x,y:n[0].y},o={x:n[1].x,y:n[1].y};if(r){const e=Math.round(o.x-a.x),t=Math.round(o.y-a.y);s.push(Object(b.b)(a.x-e,a.y-t),Object(b.b)(o.x,a.y-t),Object(b.b)(o.x,o.y),Object(b.b)(a.x-e,o.y))}else s.push(Object(b.b)(a.x,a.y),Object(b.b)(o.x,a.y),Object(b.b)(o.x,o.y),Object(b.b)(a.x,o.y));return j([Object(i.g)(s.map(e=>t.localToMap(e)))],t.spatialReference,t.doUnnormalization,!0)}function x(e,t,r,n){const s=t.mapToLocalMultiple(e);let o=null,l=null;if(r)o=s[0],l=s[1];else{const e=s[0],t=s[1],r=Math.round(t.x-e.x),n=Math.round(t.y-e.y),i=Math.max(Math.abs(r),Math.abs(n));o=Object(b.b)(r>0?e.x+i/2:e.x-i/2,n>0?e.y+i/2:e.y-i/2),l=Object(b.b)(Math.abs(r)>Math.abs(n)?o.x-i/2:o.x,Math.abs(r)>Math.abs(n)?o.y:o.y-i/2)}const u=t.localToMap(o),h=t.localToMap(l);if(Object(i.j)(u)||Object(i.j)(h))return null;t.doUnnormalization&&Object(c.j)([[u,h]],t.spatialReference);const m=y(u,t.spatialReference),g=y(h,t.spatialReference),O=Object(d.f)(t.spatialReference);let _=0;if(Object(a.i)(t.spatialReference))_=O*Object(f.distance)(m,g,null);else{const e=o.x-l.x,t=o.y-l.y;_=O*Math.sqrt(e*e+t*t)*(n||1)}const v=new p.a({center:m,radius:_,radiusUnit:"meters",spatialReference:t.spatialReference});return j(v.rings,v.spatialReference,!1)}function w(e,t,r){const n=t.mapToLocalMultiple(e),s=n[0],a=n[1],o=Math.round(a.x-s.x),l=Math.round(a.y-s.y),c=Object(b.b)(r?s.x:s.x+o/2,r?s.y:s.y+l/2),u=r?o:o/2,h=r?l:l/2,d=[],p=2*Math.PI/60;for(let i=0;i<60;i++){const e=Math.cos(i*p),t=Math.sin(i*p),r=Object(b.b)(u*e+c.x,h*t+c.y);d.push(r)}return d.push(d[0]),j([Object(i.g)(d.map(e=>t.localToMap(e)))],t.spatialReference,t.doUnnormalization,!1)}},4:function(e,t){},"46M0":function(e,t,r){"use strict";r.d(t,"a",function(){return v}),r.d(t,"b",function(){return _}),r.d(t,"c",function(){return j});var n=r("zlDU"),i=r("k5I3"),s=r("gVKr");function a(e){const t=[];return e.forEach(e=>t.push(e)),t}const o={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function*l(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function u(e){for(;;){const{value:t,done:r}=e.next();if(r)return!1;if(t.length>2)return!0}}function h(e){let t=0;for(let r=0;r<e.length;r++){const n=e[r],i=e[(r+1)%e.length];t+=n[0]*i[1]-i[0]*n[1]}return t<=0}function d(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function p(e,t,r){switch(t.type){case"LineString":return function(e,t,r){return m(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){for(const n of t.coordinates)m(e,n,r);return e}(e,t,r);case"MultiPoint":return function(e,t,r){return m(e,t.coordinates,r),e}(e,t,r);case"MultiPolygon":return function(e,t,r){for(const n of t.coordinates){f(e,n[0],r);for(let t=1;t<n.length;t++)b(e,n[t],r)}return e}(e,t,r);case"Point":return function(e,t,r){return g(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){const n=t.coordinates;f(e,n[0],r);for(let i=1;i<n.length;i++)b(e,n[i],r);return e}(e,t,r)}}function f(e,t,r){const n=d(t);!function(e){return!h(e)}(n)?m(e,n,r):y(e,n,r)}function b(e,t,r){const n=d(t);!function(e){return h(e)}(n)?m(e,n,r):y(e,n,r)}function m(e,t,r){for(const n of t)g(e,n,r);e.lengths.push(t.length)}function y(e,t,r){for(let n=t.length-1;n>=0;n--)g(e,t[n],r);e.lengths.push(t.length)}function g(e,t,r){const[n,i,s]=t;e.coords.push(n,i),r.hasZ&&e.coords.push(s||0)}function O(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function j(e){if(!e)throw new n.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new n.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const r="string"==typeof t?t:"name"===t.type?t.properties.name:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!i.test(r))throw new n.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function _(e,t={}){const r=l(e),n=[],i=new Set,s=new Set;let h,d=!1,p=Number.NEGATIVE_INFINITY,f=null,b=!1,{geometryType:m=null}=t,y=!1;for(;;){const{value:e,done:t}=r.next();if(t){const e=f&&1===f.length&&f[0]||null;if(e)for(const t of n)t.name===e&&(t.type="esriFieldTypeOID");return{fields:n,geometryType:m,hasZ:d,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:h,unknownFields:a(s)}}const{geometry:l,properties:g,id:j}=e;if((!l||(m||(m=o[l.type]),o[l.type]===m))&&(d||(d=u(c(l))),b||(b=null!=j,b&&(h=typeof j,"number"===h&&(f=Object.keys(g).filter(e=>g[e]===j)))),b&&"number"===h&&null!=j&&(p=Math.max(p,j),f.length>1?f=f.filter(e=>g[e]===j):1===f.length&&(f=g[f[0]]===j?f:[])),!y&&g)){let e=!0;for(const t in g){if(i.has(t))continue;const r=g[t];if(null==r){e=!1,s.add(t);continue}const a=O(r);"unknown"!==a?(s.delete(t),i.add(t),n.push({name:t,alias:t,type:a})):s.add(t)}y=e}}}function v(e,t){return function(e){const t=[];for(;;){const{value:r,done:n}=e.next();if(n)return t;t.push(r)}}(function*(e,t={}){const{geometryType:r,objectIdFieldName:n}=t;for(;;){const{value:a,done:l}=e.next();if(l)return;const{geometry:c,properties:u,id:h}=a;if(c&&o[c.type]!==r)continue;const d=u||{};n&&null!=h&&!d[n]&&(d[n]=h);const f=new i.a(c?p(new s.a,c,t):null,d);yield f}}(l(e),t))}},"4xTw":function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("kJYu"));let o=class extends a.a{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach(t=>{e=e&&t.isReady}),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};Object(n.a)([Object(i.b)()],o.prototype,"layer",void 0),Object(n.a)([Object(i.b)()],o.prototype,"layerView",void 0),Object(n.a)([Object(i.b)()],o.prototype,"tileInfoView",void 0),Object(n.a)([Object(i.b)()],o.prototype,"updating",null),o=Object(n.a)([Object(s.a)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],o),t.a=o},5:function(e,t){},"54nt":function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("+opI"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("DKHk"));const l=new s.a({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let c=class extends o.a{constructor(e){super(e),this.type=null}};Object(n.a)([Object(i.b)({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0),c=Object(n.a)([Object(a.a)("esri.tasks.support.NAMessage")],c),t.a=c},"5qYV":function(e,t,r){"use strict";r.r(t),r.d(t,"addOrUpdateResource",function(){return l}),r.d(t,"contentToBlob",function(){return p}),r.d(t,"fetchResources",function(){return o}),r.d(t,"getSiblingOfSameType",function(){return f}),r.d(t,"getSiblingOfSameTypeI",function(){return b}),r.d(t,"removeAllResources",function(){return u}),r.d(t,"removeResource",function(){return c}),r.d(t,"splitPrefixFileNameAndExtension",function(){return d});var n=r("srIe"),i=r("zlDU"),s=r("4EHJ"),a=r("Lqtk");async function o(e,t={},r){await e.load(r);const i=Object(s.y)(e.itemUrl,"resources"),{start:a=1,num:o=10,sortOrder:l="asc",sortField:c="created"}=t,u={query:{start:a,num:o,sortOrder:l,sortField:c},signal:Object(n.i)(r,"signal")},h=await e.portal._request(i,u);return{total:h.total,nextStart:h.nextStart,resources:h.resources.map(({created:t,size:r,resource:n})=>({created:new Date(t),size:r,resource:e.resourceFromPath(n)}))}}async function l(e,t,r,a){if(!e.hasPath())throw new i.a(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");await e.portalItem.load(a);const o=Object(s.y)(e.portalItem.userItemUrl,"add"===t?"addResources":"updateResources"),[l,c]=h(e.path),u=await p(r),d=new FormData;return l&&"."!==l&&d.append("resourcesPrefix",l),d.append("fileName",c),d.append("file",u,c),d.append("f","json"),Object(n.k)(a)&&a.access&&d.append("access",a.access),await e.portalItem.portal._request(o,{method:"post",body:d,signal:Object(n.i)(a,"signal")}),e}async function c(e,t,r){if(!t.hasPath())throw new i.a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(r);const a=Object(s.y)(e.userItemUrl,"removeResources");await e.portal._request(a,{method:"post",query:{resource:t.path},signal:Object(n.i)(r,"signal")}),t.portalItem=null}async function u(e,t){await e.load(t);const r=Object(s.y)(e.userItemUrl,"removeResources");return e.portal._request(r,{method:"post",query:{deleteAll:!0},signal:Object(n.i)(t,"signal")})}function h(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,r]=function(e){const t=Object(s.n)(e);return Object(n.j)(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[i,a]=h(t);return[i,a,r]}async function p(e){return e instanceof Blob?e:(await Object(a.default)(e.url,{responseType:"blob"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,n]=d(e.path);return e.portalItem.resourceFromPath(Object(s.y)(r,t+n))}function b(e,t){if(!e.hasPath())return null;const[r,,n]=d(e.path);return e.portalItem.resourceFromPath(Object(s.y)(r,t+n))}},"6Az7":function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("kYAx"),i=r("yE7X"),s=r("Oxob"),a=r("ZyIX"),o=r("5LEI"),l=r("xzrc");class c extends o.a{constructor(e,t,r,n=null){super(e,t,r,r),this.bitmap=new l.a(n,"standard",!1),this.bitmap.coordScale=r,this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}class u extends a.a{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.bitmap.blendFunction)}createTile(e){const t=this._tileInfoView.getTileBounds(Object(n.g)(),e);return new c(e,t,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap (tile)",brushes:[s.a.bitmap],target:()=>this.children.map(e=>e.bitmap),drawPhase:i.c.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===i.c.MAP&&super.doRender(e)}}},"8gnY":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("8NDJ");class i extends n.a{constructor(e,t){super(n.a.createInstance()),this._currentIndex=-1,this._reader=e,this._indices=t}static from(e,t){return new i(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getApproximateSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new i(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._passesFilter()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,t){return this._reader.setComputedNumericAtIndex(t,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,t){return this._reader.setComputedStringAtIndex(0,t)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,t){this._reader.setComputedNumericAtIndex(e,t)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,t){return this._reader.setComputedStringAtIndex(e,t)}transform(e,t,r,n){const i=this.copy();return i._reader=this._reader.transform(e,t,r,n),i}extent(e,t,r,n){const i=this.copy();return i._reader=this._reader.extent(e,t,r,n),i}hasFilter(){return this._reader.hasFilter()}readAttribute(e,t=!1){return this._reader.readAttribute(e,t)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,t){return this._reader.setField(e,t)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrate(){return this._reader.getXHydrate()}getYHydrate(){return this._reader.getYHydrate()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_passesFilter(){return this._reader._passesFilter()}_readAttribute(e,t){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},"9lO2":function(e,t,r){"use strict";var n=r("gEht");t.a=class{constructor(e=null){this.spatialReference=e}get spatialReference(){return this._spatialReference}set spatialReference(e){e!==this._spatialReference&&(this._spatialReference=e,this._updateNormalizationFactors())}normalizeDistance(e){return e*this._metersPerDistanceUnit}normalizeElevation(e){return e*this._metersPerElevationUnit}normalizeArea(e){return e*this._squareMetersPerAreaUnit}_updateNormalizationFactors(){this._metersPerDistanceUnit=Object(n.f)(this._spatialReference,1),this._metersPerElevationUnit=Object(n.f)(this._spatialReference,1),this._squareMetersPerAreaUnit=this._metersPerDistanceUnit*this._metersPerDistanceUnit}}},AfLA:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return s});var n=r("3r0u"),i=r("OKTS");const s=(()=>{if(!("document"in n.a))return()=>null;const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,r=>{t.clearRect(0,0,1,e.height);const n=t.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:t}of r.colorStops)n.addColorStop(Math.max(e,.001),`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`);return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}})();function a(e,t,r,n){const{blurRadius:i,fieldOffset:s,field:a}=t,o=new Float64Array(r*n),l=function(e){const t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1);for(let i=0;i<=n.length;i++)n[i]=Math.exp(-((i-t)**2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}(i),c=Math.round(3*i);let u,h=Number.NEGATIVE_INFINITY;const d=function(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):r=>+r.readAttribute(e)+t:e=>1}(a,s),p=new Set;for(const f of e){const e=f.getCursor();for(;e.next();){const t=e.getObjectId();if(p.has(t))continue;p.add(t);const i=e.readLegacyPointGeometry(),s=128;if(i.x<-s||i.x>=r+s||i.y<-s||i.y>n+s)continue;const a=+d(e),f=Math.round(i.x)-c,b=Math.round(i.y)-c,m=Math.max(0,f),y=Math.max(0,b),g=Math.min(n,Math.round(i.y)+c),O=Math.min(r,Math.round(i.x)+c);for(let e=y;e<g;e++){const t=l[e-b];for(let n=m;n<O;n++)u=o[e*r+n]+=t*l[n-f]*a,u>h&&(h=u)}}}return{matrix:o.buffer,max:h}}function o(e,t,r,n,s,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);r&&n&&o.data.set(new Uint8ClampedArray(function(e,t,r,n,s){const a=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),l="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),c=l.length/(s-n);for(let u=0;u<o.length;u++){const e=Math.floor((o[u]-n)*c);a[u]=l[Object(i.c)(e,0,l.length-1)]}return a.buffer}(t,r,n,s,a))),e.putImageData(o,0,0)}},B3Fv:function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return p}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return h});var n=r("f/qv"),i=r("qRWG"),s=r("Cy1f"),a=r("5DEt"),o=(r("15Hh"),r("M0lq"));function l(e,t){return{...e,...Object(n.a)(t)}}function c(e,t,r,n){for(;e.length<t;)e.push(r());if(n)for(;e.length>t;)n(e.pop());else e.length=t}function u(e,t){if(Object(a.v)(t,0,0,0),e.length>0){for(let r=0;r<e.length;++r)Object(a.e)(t,t,e[r]);Object(a.d)(t,t,1/e.length)}}function h(e,t,r,n){n.projectToRenderScreen(e,m),n.projectToRenderScreen(t,g),Object(o.d)(r,O,y),Object(o.e)(r,r)}function d(e,t,r){const n=r.state.camera;r.renderCoordsHelper.toRenderCoords(e,f),n.projectToRenderScreen(f,b),r.state.camera.renderToScreen(b,t)}function p(e,t,r){return d(e,j,r),d(t,_,r),Object(o.i)(j,_)}Object(s.e)();const f=Object(s.e)(),b=Object(i.e)(),m=Object(i.e)(),y=m,g=Object(i.e)(),O=g,j=(Object(i.g)(),Object(i.g)()),_=Object(i.g)()},BGvB:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return m}),r.d(t,"c",function(){return O}),r.d(t,"d",function(){return b}),r.d(t,"e",function(){return y});var n=r("f/qv"),i=r("EyXx"),s=r("4EHJ"),a=r("WZb1"),o=r("KLE9"),l=r("SFah"),c=r("975N"),u=r("Lqtk"),h=r("+Xal"),d=r("8prj"),p=r("QmHG");const f={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function b(e){const t=e.folders||[],r=t.slice(),i=new Map,s=new Map,a=new Map,o=new Map,l=new Map,c={esriGeometryPoint:s,esriGeometryPolyline:a,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach(e=>{const t=Object(n.a)(e);t.featureSet.features=[];const r=e.featureSet.geometryType;i.set(r,t);const l=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?g(s,l,e.featureSet.features):"esriGeometryPolyline"===r?g(a,l,e.featureSet.features):"esriGeometryPolygon"===r&&g(o,l,e.featureSet.features)}),e.groundOverlays&&e.groundOverlays.forEach(e=>{l.set(e.id,e)}),t.forEach(t=>{t.networkLinkIds.forEach(n=>{const i=function(e,t,r){const n=function(e,t){let r;return t.some(t=>t.id===e&&(r=t,!0)),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);i&&r.push(i)})}),r.forEach(e=>{e.featureInfos&&(e.points=Object(n.a)(i.get("esriGeometryPoint")),e.polylines=Object(n.a)(i.get("esriGeometryPolyline")),e.polygons=Object(n.a)(i.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map(t=>{switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const r=c[t.type].get(t.id);r&&e[f[t.type]].featureSet.features.push(r);break}case"GroundOverlay":{const r=l.get(t.id);r&&e.mapImages.push(r);break}}}),e.fullExtent=j([e]))});const u=j(r);return{folders:t,sublayers:r,extent:u}}function m(e,t,r,n){const a=c.b&&c.b.findCredential(e);e=Object(s.e)(e,{token:a&&a.token});const o=i.a.kmlServiceUrl;return Object(u.default)(o,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function y(e,t,r=null,n=[]){const i=[],s={},a=t.sublayers,o=t.folders.map(e=>e.id);return a.forEach(t=>{const a=new e;if(r?a.read(t,r):a.read(t),n.length&&o.indexOf(a.id)>-1&&(a.visible=-1!==n.indexOf(a.id)),s[t.id]=a,null!=t.parentFolderId&&-1!==t.parentFolderId){const e=s[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(a)}else i.unshift(a)}),i}function g(e,t,r){r.forEach(r=>{e.set(r.attributes[t],r)})}async function O(e){const t=d.default.fromJSON(e.featureSet).features,r=e.layerDefinition,n=Object(h.a)(r.drawingInfo.renderer),i=l.a.fromJSON(e.popupInfo),s=[];for(const a of t){const e=await n.getSymbolAsync(a);a.symbol=e,a.popupTemplate=i,a.visible=!0,s.push(a)}return s}function j(e){const t=Object(p.d)(),r=Object(p.d)(p.a);for(const n of e){if(n.polygons&&n.polygons.featureSet&&n.polygons.featureSet.features)for(const e of n.polygons.featureSet.features)Object(o.b)(t,e.geometry),Object(p.g)(r,t);if(n.polylines&&n.polylines.featureSet&&n.polylines.featureSet.features)for(const e of n.polylines.featureSet.features)Object(o.b)(t,e.geometry),Object(p.g)(r,t);if(n.points&&n.points.featureSet&&n.points.featureSet.features)for(const e of n.points.featureSet.features)Object(o.b)(t,e.geometry),Object(p.g)(r,t);if(n.mapImages)for(const e of n.mapImages)Object(o.b)(t,e.extent),Object(p.g)(r,t)}return Object(p.f)(r,p.a)?null:{xmin:r[0],ymin:r[1],zmin:r[2],xmax:r[3],ymax:r[4],zmax:r[5],spatialReference:a.a.WGS84}}},BMSW:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("wSAH"),i=r("zna6");const s={minX:0,minY:0,maxX:0,maxY:0};class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.a(9,Object(n.a)("csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((r,n)=>{e[t++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(e=>this._idByBounds.has(e))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),function(e,t,r){s.minX=t[0],s.minY=t[1],s.maxX=t[2],s.maxY=t[3],e.search(s,r)}(this._index,e,e=>t(this._idByBounds.get(e)))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},DJok:function(e,t,r){"use strict";r.d(t,"a",function(){return f}),r.d(t,"b",function(){return p}),r("wSAH");var n=r("srIe"),i=r("zm0L"),s=r("lx5q"),a=r("QmHG"),o=r("kB+0"),l=r("hIOP"),c=r("8gnY");function u(e,t){return e<<16|t}function h(e){return(4294901760&e)>>>16}function d(e){return 65535&e}const p={getObjectId:e=>e.getObjectId(),getAttributes:e=>e.readAttributes(),getAttribute:(e,t)=>e.readAttribute(t),cloneWithGeometry:(e,t)=>e,getGeometry:e=>e.readHydratedGeometry(),getCentroid:(e,t)=>e.readCentroid()};class f extends l.a{constructor(e,t,r){super(e,t),this.featureAdapter=p,this.events=new i.a,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new s.a(50),this._index=Object(o.a)(9,e=>({minX:this._storage.getXMin(e),minY:this._storage.getYMin(e),maxX:this._storage.getXMax(e),maxY:this._storage.getYMax(e)})),this._storage=t,this.mode=r}get storage(){return this._storage}get storeStatistics(){return{featureCount:0,vertexCount:0}}hasInstance(e){return this._featureSetsByInstance.has(e)}onTileData(e,t){if(Object(n.j)(t.addOrUpdate))return t;if(t.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const r=t.addOrUpdate.getCursor();for(;r.next();){const t=r.getDisplayId();this.setComputedAttributes(this._storage,r,t,e.scale)}return t}this._featureSetsByInstance.set(t.addOrUpdate.instance,t.addOrUpdate);const r=t.addOrUpdate.getCursor();for(;r.next();)this._insertFeature(r,e.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),t}search(e){this._rebuildIndex();const t=e.id,r=this._indexSearchCache.find(e=>e.tileId===t);if(Object(n.k)(r))return r.readers;const i=new Map,s=this._searchIndex(e.bounds),a=[];for(const n of s){const e=this._storage.getInstanceId(n),t=h(e),r=d(e);i.has(t)||i.set(t,[]),i.get(t).push(r)}return i.forEach((e,t)=>{const r=this._featureSetsByInstance.get(t);a.push(c.a.from(r,e))}),this._indexSearchCache.enqueue({tileId:t,readers:a}),a}insert(e){const t=e.getCursor(),r=this._storage;for(;t.next();){var n;const e=u(t.instance,t.getIndex()),i=t.getObjectId(),s=null!=(n=this._objectIdToDisplayId.get(i))?n:this._storage.createDisplayId();t.setDisplayId(s),r.setInstanceId(s,e),this._objectIdToDisplayId.set(i,s)}this._featureSetsByInstance.set(e.instance,e),this._spatialIndexInvalid=!0}remove(e){const t=this._objectIdToDisplayId.get(e);if(!t)return;const r=this._storage.getInstanceId(t),n=d(r),i=h(r),s=this._featureSetsByInstance.get(i);this._objectIdToDisplayId.delete(e),this._storage.releaseDisplayId(t),s.removeAtIndex(n),s.isEmpty&&this._featureSetsByInstance.delete(i),this._spatialIndexInvalid=!0}forEach(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=this._lookupFeature(r);e(n)})}forEachUnsafe(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=h(r),i=d(r),s=this._getFeatureSet(n);s.setIndex(i),e(s)})}forEachInBounds(e,t){const r=this._searchIndex(e);for(const i of r){const e=this.lookupFeatureByDisplayId(i,this._storage);t(Object(n.q)(e))}}forEachBounds(e,t,r){this._rebuildIndex();const n=[0,0,0,0];for(const i of e){if(!i.readGeometry())continue;const e=i.getDisplayId();n[0]=this._storage.getXMin(e),n[1]=this._storage.getYMin(e),n[2]=this._storage.getXMax(e),n[3]=this._storage.getYMax(e),t(Object(a.k)(r,n))}}sweepFeatures(e,t,r){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((n,i)=>{e.has(n)||(t.releaseDisplayId(n),r&&r.unsetAttributeData(n),this._objectIdToDisplayId.delete(i))}),this.events.emit("changed")}sweepFeatureSets(e){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((t,r)=>{e.has(r)||this._featureSetsByInstance.delete(r)})}lookupObjectId(e,t){const r=this.lookupFeatureByDisplayId(e,t);return Object(n.j)(r)?null:r.getObjectId()}lookupDisplayId(e){return this._objectIdToDisplayId.get(e)}lookupFeatureByDisplayId(e,t){const r=t.getInstanceId(e);return this._lookupFeature(r)}lookupByDisplayIdUnsafe(e){const t=this._storage.getInstanceId(e),r=h(t),n=d(t),i=this._getFeatureSet(r);return i?(i.setIndex(n),i):null}_insertFeature(e,t){const r=this._storage,n=e.getObjectId(),i=u(e.instance,e.getIndex());r.getInstanceId(e.getDisplayId());let s=this._objectIdToDisplayId.get(n);s||(s=r.createDisplayId(),this._objectIdToDisplayId.set(n,s),this._spatialIndexInvalid=!0),e.setDisplayId(s),r.setInstanceId(s,i),this.setComputedAttributes(r,e,s,t)}_searchIndex(e){return this._rebuildIndex(),this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const e=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(t=>{const r=t.getCursor();for(;r.next();){const t=r.getDisplayId();this._storage.setBounds(t,r)&&e.push(t)}}):this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t);this._storage.setBounds(t,this._lookupFeature(r))&&e.push(t)}),this._index.clear(),this._index.load(e),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(e){const t=h(e),r=d(e),n=this._getFeatureSet(t);if(!n)return null;const i=n.getCursor();return i.setIndex(r),i}_getFeatureSet(e){return this._featureSetsByInstance.get(e)}}},Dfpg:function(e,t,r){"use strict";function n(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}r.d(t,"a",function(){return n})},Fkrg:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI"),r("04ZG")),s=(r("4EHJ"),r("ju1D"),r("9AIY"),r("6Az7"));const a=e=>{let t=class extends e{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new s.a(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}};return t=Object(n.a)([Object(i.a)("esri.views.2d.layers.BitmapTileLayerView2D")],t),t}},GprA:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("xRQN");class i{constructor(e,t,r,n,i,s,a,o){this.createQuery=e,this.resultAvailable=t,this.getResult=r,this.disjoint=n,this.beginTimeElapsed=i,this.endTimeElapsed=s,this.createTimestamp=a,this.timestampBits=o}}function s(e,t){if(t.disjointTimerQuery)return null;let r=e.getExtension("EXT_disjoint_timer_query_webgl2");return r&&Object(n.a)(e)?new i(()=>e.createQuery(),t=>e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE),t=>e.getQueryParameter(t,e.QUERY_RESULT),()=>e.getParameter(r.GPU_DISJOINT_EXT),t=>e.beginQuery(r.TIME_ELAPSED_EXT,t),()=>e.endQuery(r.TIME_ELAPSED_EXT),e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT),()=>e.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT)):(r=e.getExtension("EXT_disjoint_timer_query"),r?new i(()=>r.createQueryEXT(),e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT),()=>e.getParameter(r.GPU_DISJOINT_EXT),e=>r.beginQueryEXT(r.TIME_ELAPSED_EXT,e),()=>r.endQueryEXT(r.TIME_ELAPSED_EXT),e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT),()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT)):null)}},IAPW:function(e,t,r){"use strict";r.d(t,"a",function(){return b}),r.d(t,"b",function(){return f}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return c}),r.d(t,"f",function(){return d}),r.d(t,"g",function(){return a}),r.d(t,"h",function(){return h}),r.d(t,"i",function(){return s}),r.d(t,"j",function(){return p}),r.d(t,"k",function(){return o}),r.d(t,"l",function(){return i});var n=r("nvBr");const i={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function s(e,t,r){let n=22,i=22;e<1?n*=.75:e>1&&(i*=1.25);let s=22,a=22;return t&&r&&(n=i=s=a=0),[{type:"path",path:[{command:"M",values:[s,0]},{command:"L",values:[r?s:.875*s,0]},{command:"L",values:[r?n-.5*s:0,i-.5*a]},{command:"L",values:[n-.5*s,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,0]},{command:"L",values:[s,t?0:.125*a]},{command:"L",values:[n-.5*s,t?i-.5*a:a]},{command:"L",values:[n-.5*s,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*s,i-.5*a]},{command:"L",values:[r?n-.5*s:0,i-.5*a]},{command:"L",values:[r?n-.5*s:0,t?i-.5*a:a]},{command:"L",values:[n-.5*s,t?i-.5*a:a]},{command:"Z",values:[]}]}]}function a(e){const t=22,r=.5*e;return[{type:"path",path:[{command:"M",values:[0,.7*t*.5]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+r]},{command:"L",values:[0,.7*t+r-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+r]},{command:"L",values:[t,r]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[t,0]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[0,.7*t*.5]},{command:"Z",values:[]}]}]}function o(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function l(e,t){let r=t?20:e;const n=t?4:6;r-=r<=22?.5*n:n;const i=t?.35*r:.5*r;return[{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[0,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[0,e-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[r,e-.5*i]},{command:"L",values:[r,.5*i]},{command:"Z",values:[]}]}]}function c(e,t){let r=t?20:e;const n=t?4:6;r-=r<=22?.5*n:n;const i=.5*r,s=.15*r,a=e-s;return[{type:"ellipse",cx:.5*r,cy:a,rx:i,ry:s},{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,a]},{command:"L",values:[r,a]},{command:"L",values:[r,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:s,rx:i,ry:s}]}function u(e,t){let r=t?20:e;const n=t?4:6;r-=r<=22?.5*n:n;const i=.15*r,s=e-i;return[{type:"ellipse",cx:.5*r,cy:s,rx:.5*r,ry:i},{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function h(e){let t=e;t-=t<22?3:6;const r=.15*t;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,e-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:r}]}function d(e){let t=e;const r=e;t-=t<22?2:4;const n=t,i=r,s=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[n,.5*i-s]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"L",values:[0,.5*i-s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i-s]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"L",values:[.45*n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,r]},{command:"L",values:[n,.5*i-s]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"Z",values:[]}]}]}function p(e){let t=e;return t-=t<22?1:2,[{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[e,t]},{command:"L",values:[.45*e,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[e,t]},{command:"Z",values:[]}]}]}function f(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function b(e,t){if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;const r=new n.a(e);return new n.a([f(r.r,t),f(r.g,t),f(r.b,t),r.a])}},IYxN:function(e,t,r){"use strict";r.d(t,"a",function(){return h}),r.d(t,"b",function(){return f}),r.d(t,"c",function(){return d}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return p}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"h",function(){return b});var n=r("srIe"),i=r("SuVq");r("4GrV");var s=r("tODX");const a=new Map,o=new class{constructor(e=15e3,t=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=e,this._interval=Math.min(e,t)}decreaseRefCount(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.refCount--,e.refCount<=0&&(n.delete(r),e.controller&&e.controller.abort()),e.refCount}return 0}getBlock(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.ts=Date.now(),e.refCount++,n.delete(r),n.set(r,e),e.block}return null}putBlock(e,t,r,n=null){const i=this._cachedBlocks,s=e+"/"+t;if(i.has(s)){const e=i.get(s);e.ts=Date.now(),e.refCount++}else i.set(s,{block:r,ts:Date.now(),refCount:1,controller:n});this.trim(),this.updateTimer()}deleteBlock(e,t){const r=this._cachedBlocks,n=e+"/"+t;r.has(n)&&r.delete(n)}updateMaxSize(e){this._size=e,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const e=this._cachedBlocks;this._timer=setInterval(()=>{const t=Array.from(e),r=Date.now();for(let n=0;n<t.length&&t[n][1].ts<=r-this._duration;n++)e.delete(t[n][0]);0===e.size&&this.clearTimer()},this._interval)}trim(){const e=this._cachedBlocks;if(-1===this._size||this._size>=e.size)return;const t=Array.from(e);for(let r=0;r<t.length-this._size;r++)e.delete(t[r][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function l(e,t){return null==t?e:`${e}?sliceId=${t}`}function c(e,t){const r={extent:null,rasterInfo:t,cache:new Map};if(a.has(e)){const t=a.get(e);return t.push(r),t.length-1}return a.set(e,[r]),0}function u(e,t){if(a.has(e)){const r=a.get(e);r[t]=null,r.some(e=>null!=e)||a.delete(e)}}function h(e,t,r){if(!a.has(e))return null==t?o.decreaseRefCount(e,r):0;const n=a.get(e);if(null==n[t])return o.decreaseRefCount(e,r);const i=n[t].cache;if(i.has(r)){const e=i.get(r);if(e.refCount--,0===e.refCount){i.delete(r);for(let e=0;e<n.length;e++)n[e]&&n[e].cache.has(r)&&n[e].cache.delete(r);e.controller&&e.controller.abort()}return e.refCount}return 0}function d(e,t,r){if(!a.has(e))return null==t?o.getBlock(e,r):null;const n=a.get(e);if(null==n[t]){for(let e=0;e<n.length;e++)if(n[e]&&n[e].cache.has(r)){const t=n[e].cache.get(r);return t.refCount++,t.block}return o.getBlock(e,r)}const i=n[t].cache;if(i.has(r)){const e=i.get(r);return e.refCount++,e.block}for(let s=0;s<n.length;s++)if(s!==t&&n[s]&&n[s]&&n[s].cache.has(r)){const e=n[s].cache.get(r);return e.refCount++,i.set(r,e),e.block}return null}function p(e,t,r,n,i=null){if(!a.has(e))return void(null==t&&o.putBlock(e,r,n,i));const s=a.get(e);if(null==s[t])return void o.putBlock(e,r,n,i);const l={refCount:1,block:n,isResolved:!1,isRejected:!1,controller:i};n.then(()=>l.isResolved=!0).catch(()=>l.isRejected=!0),s[t].cache.set(r,l)}function f(e,t,r){if(!a.has(e))return void(null==t&&o.deleteBlock(e,r));const n=a.get(e);null!=n[t]?n[t].cache.delete(r):o.deleteBlock(e,r)}function b(e,t,r,o,l,c,u=null){const h=function(e,t){if(!a.has(e))return null;const r=a.get(e);return null==r[t]?null:r[t]}(e,t),d=h.extent,{cache:p,rasterInfo:f}=h;if(d&&d.xmin===r.xmin&&d.xmax===r.xmax&&d.ymin===r.ymin&&d.ymax===r.ymax)return;const b=r.clone().normalize(),{spatialReference:m,transform:y}=f,g=new Set;for(let a=0;a<b.length;a++){const e=b[a];if(e.xmax-e.xmin<=o||e.ymax-e.ymin<=o)continue;let t=Object(s.e)(e,m,u);Object(n.k)(y)&&(t=y.inverseTransform(t));const r=new i.a({x:o,y:o,spatialReference:e.spatialReference});if(null==l&&!(l=Object(s.g)(r,m,e,u)))return;const{pyramidLevel:h,pyramidResolution:d,excessiveReading:p}=Object(s.h)(l,f,c||"closest");if(p)return;const{storageInfo:O}=f,{origin:j}=O,_={x:Math.max(0,Math.floor((t.xmin-j.x)/d.x)),y:Math.max(0,Math.floor((j.y-t.ymax)/d.y))},v=Math.ceil((t.xmax-t.xmin)/d.x-.1),x=Math.ceil((t.ymax-t.ymin)/d.y-.1),w=h>0?O.pyramidBlockWidth:O.blockWidth,S=h>0?O.pyramidBlockHeight:O.blockHeight,I=1,T=Math.max(0,Math.floor(_.x/w)-I),E=Math.max(0,Math.floor(_.y/S)-I),M=Math.floor((_.x+v-1)/w)+I,A=Math.floor((_.y+x-1)/S)+I;for(let n=E;n<=A;n++)for(let e=T;e<=M;e++)g.add(`${h}/${n}/${e}`)}p.forEach((e,t)=>{if(!g.has(t)){const e=p.get(t);(null==e||e.isResolved||e.isRejected)&&p.delete(t)}}),h.extent={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax}}},IcpP:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return b}),r.d(t,"d",function(){return h}),r.d(t,"e",function(){return f});var n=r("f4Nx"),i=r("wdpY");class s{constructor(){this.code=null,this.description=null}}class a{constructor(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function o(e){return new a(e)}class l{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new l(e)}const u=new Set;function h(e,t,r,n,s=!1,a){u.clear();for(const l in n){const t=e.get(l);if(!t)continue;const c=n[l],h=d(t,c);if(h!==c&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:t,originalValue:c,sanitizedValue:h}}),u.add(t.name),t&&(s||t.editable)){const e=Object(i.u)(t,h);if(e)return o(Object(i.v)(e,t,h));r[t.name]=h}}for(const i of t)if(!u.has(i.name))return o(`missing required field "${i.name}"`);return null}function d(e,t){let r=t;return"string"==typeof t&&Object(i.q)(e)?r=parseFloat(t):null!=t&&Object(i.r)(e)&&"string"!=typeof t&&(r=String(t)),Object(i.s)(r)}let p;function f(e,t){if(!e||!Object(n.i)(t))return e;if("rings"in e||"paths"in e){if(!p)throw new TypeError("geometry engine not loaded");return p.simplify(t,e)}return e}async function b(e,t){!Object(n.i)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await async function(){return p||(p=await Promise.all([r.e(0),r.e(20)]).then(r.bind(null,"AKzY")),p)}()}},"J+o3":function(e,t,r){"use strict";r.d(t,"a",function(){return S}),r.d(t,"b",function(){return T});var n=r("srIe"),i=r("qRWG"),s=r("Cy1f"),a=r("5DEt"),o=r("r0DZ"),l=r("M0lq"),c=r("9ToJ"),u=r("B3Fv"),h=r("pO5D"),d=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),p=r("04ZG"),f=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD"));r("5sKF");let b=(e,t,r)=>{for(let n=0,i=t.length;n<i;n++){let i=t[n];Array.isArray(i)?b(e,i,r):null!=i&&!1!==i&&("string"==typeof i&&(i={vnodeSelector:"",properties:void 0,children:void 0,text:i.toString(),domNode:null}),r.push(i))}};function m(e,t,r){if(Array.isArray(t))r=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||r&&("string"==typeof r||r.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let n,i;return r&&1===r.length&&"string"==typeof r[0]?n=r[0]:r&&(i=[],b(e,r,i),0===i.length&&(i=void 0)),{vnodeSelector:e,properties:t,children:i,text:""===n?void 0:n,domNode:null}}r("aelY");let y=class extends f.a{constructor(e){super(e),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(e){this._set("startX",e[0]),this._set("startY",e[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(e){this._set("endX",e[0]),this._set("endY",e[1])}get strokeStyle(){const e=this.color;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get lineCap(){return"round"}render(){const{height:e,left:t,top:r,width:n,x1:i,x2:s,y1:a,y2:o}=this.calculateCoordinates(g);return m("div",{classes:{"esri-line-overlay-item":!0},styles:{left:t+"px",top:r+"px",width:n+"px",height:e+"px",visibility:this.visible?"visible":"hidden"}},[m("svg",{width:n,height:e},[m("line",{x1:i,y1:a,x2:s,y2:o,style:`stroke: ${this.strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this.lineCap};`})])])}renderCanvas(e){if(!this.visible)return;e.strokeStyle=this.strokeStyle,e.lineWidth=this.width,e.lineCap=this.lineCap;const t=this.calculateCoordinates(g);e.beginPath(),e.moveTo(t.left+t.x1,t.top+t.y1),e.lineTo(t.left+t.x2,t.top+t.y2),e.stroke()}calculateCoordinates(e){const t=Math.min(this.startX,this.endX),r=Math.max(this.startX,this.endX),n=Math.min(this.startY,this.endY),i=Math.max(this.startY,this.endY),s=this.width;return e.left=t-s,e.top=n-s,e.width=r-t+2*s,e.height=Math.max(20,i-n+2*s),e.x1=this.startX-t+s,e.y1=this.startY-n+s,e.x2=this.endX-t+s,e.y2=this.endY-n+s,e}};Object(h.a)([Object(d.b)()],y.prototype,"startX",void 0),Object(h.a)([Object(d.b)()],y.prototype,"startY",void 0),Object(h.a)([Object(d.b)()],y.prototype,"endX",void 0),Object(h.a)([Object(d.b)()],y.prototype,"endY",void 0),Object(h.a)([Object(d.b)()],y.prototype,"startPosition",null),Object(h.a)([Object(d.b)()],y.prototype,"endPosition",null),Object(h.a)([Object(d.b)()],y.prototype,"width",void 0),Object(h.a)([Object(d.b)()],y.prototype,"color",void 0),Object(h.a)([Object(d.b)()],y.prototype,"visible",void 0),Object(h.a)([Object(d.b)({readOnly:!0})],y.prototype,"strokeStyle",null),y=Object(h.a)([Object(p.a)("esri.views.overlay.LineOverlayItem")],y);const g={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0};var O=y;const j={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let _=class extends f.a{constructor(e){super(e),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.backgroundColor="rgba(0, 0, 0, 0.6)",this.textColor="white",this.textShadowColor=[0,0,0],this.textShadowSize=1}get position(){return[this.x,this.y]}set position(e){this._set("x",e[0]),this._set("y",e[1])}get padding(){return.5*this.fontSize}render(){return m("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",backgroundColor:this.backgroundColor,color:this.textColor,padding:this.padding+"px",borderRadius:this.padding+"px",textShadow:`0 0 ${this.textShadowSize}px rgb(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]})`}},[this.text])}renderCanvas(e){if(!this.visible)return;const t=e.font.replace(/^(.*?)px/,"");e.font=`${this.fontSize}px ${t}`;const r=this.padding,n=this.padding,i=e.measureText(this.text).width,s=this.fontSize,a=v[this.anchor];e.textAlign="center",e.textBaseline="middle";const o=i+2*r,l=s+2*r;this.roundedRect(e,this.x+a.x*o,this.y+a.y*l,o,l,n),e.fillStyle=this.backgroundColor,e.fill();const c=this.x+(a.x+.5)*o,u=this.y+(a.y+.5)*l;this._renderTextShadow(e,this.text,c,u),e.fillStyle=this.textColor,e.fillText(this.text,c,u)}_renderTextShadow(e,t,r,n){e.lineJoin="miter",e.fillStyle=`rgba(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]}, ${1/x.length})`;const i=this.textShadowSize;for(const[s,a]of x)e.fillText(t,r+i*s,n+i*a)}roundedRect(e,t,r,n,i,s){e.beginPath(),e.moveTo(t,r+s),e.arcTo(t,r,t+s,r,s),e.lineTo(t+n-s,r),e.arcTo(t+n,r,t+n,r+s,s),e.lineTo(t+n,r+i-s),e.arcTo(t+n,r+i,t+n-s,r+i,s),e.lineTo(t+s,r+i),e.arcTo(t,r+i,t,r+i-s,s),e.closePath()}_cssClasses(){const e={"esri-text-overlay-item":!0};for(const t in j)e[j[t]]=this.anchor===t;return e}};Object(h.a)([Object(d.b)()],_.prototype,"x",void 0),Object(h.a)([Object(d.b)()],_.prototype,"y",void 0),Object(h.a)([Object(d.b)()],_.prototype,"position",null),Object(h.a)([Object(d.b)()],_.prototype,"text",void 0),Object(h.a)([Object(d.b)()],_.prototype,"fontSize",void 0),Object(h.a)([Object(d.b)()],_.prototype,"anchor",void 0),Object(h.a)([Object(d.b)()],_.prototype,"visible",void 0),Object(h.a)([Object(d.b)()],_.prototype,"padding",null),_=Object(h.a)([Object(p.a)("esri.views.overlay.TextOverlayItem")],_);const v={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},x=[];{const e=16;for(let t=0;t<360;t+=360/e)x.push([Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)])}var w=_;class S extends c.a{constructor(e){super(e.view),this._handles=new o.a,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text=null,this._fontSize=14,this._distance=25,this._anchor="right",this.applyProps(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(e){this._text=e,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e,this.attached&&(this._textItem.fontSize=this._fontSize)}get distance(){return this._distance}set distance(e){this._distance!==e&&(this._distance=e,this._updateLabelPosition())}get anchor(){return this._anchor}set anchor(e){this._anchor!==e&&(this._anchor=e,this._updateLabelPosition())}overlaps(e){return this.textItem.visible&&e.textItem.visible&&this.view.overlay.overlaps(this._textItem,e.textItem)}_updateLabelPosition(){if(this.attached){if(this._showText=!1,this._showCallout=!1,Object(n.k)(this.geometry)&&this.view._stage)switch(this.geometry.type){case"point":this._computeLabelPositionFromPoint(this.geometry,k)&&(this._textItem.position=[k[0],k[1]],this._textItem.anchor="center",this._showText=!0);break;case"corner":this._computeLabelPositionFromCorner(this.geometry,this._distance,k,B)&&(this._showCallout=this._updatePosition(k,B),this._showText=!0);break;case"segment":this._computeLabelPositionFromSegment(this.geometry,this._distance,this._anchor,k,B)&&(this._showText=!0,this._showCallout=this._updatePosition(k,B))}this.updateVisibility(this.visible)}}_computeLabelPositionFromPoint(e,t){this.view.renderCoordsHelper.toRenderCoords(e,L);const r=this.view._stage.camera;return r.projectToRenderScreen(L,P),!(P[2]<0||P[2]>1||(r.renderToScreen(P,t),0))}_computeLabelPositionFromCorner(e,t,r,n){if(!e)return!1;const i=this.view._stage.camera;return I(e.left,1,i,R),Object(l.n)(R,R),I(e.right,0,i,C),Object(l.h)(F,R,C),Object(l.n)(F,F),Object(l.e)(F,F),i.projectToRenderScreen(e.left.endRenderSpace,P),!(P[2]<0||P[2]>1||(i.renderToScreen(P,r),Object(l.a)(F,F,t*i.pixelRatio),Object(l.h)(F,F,P),i.renderToScreen(F,n),0))}_computeLabelPositionFromSegment(e,t,r,n,i){if(!e)return!1;const s=e.segment,a=this.view._stage.camera;Object(u.e)(s.startRenderSpace,s.endRenderSpace,R,a),Object(l.r)(F,-R[1],R[0]);let o=!1;switch(r){case"top":o=F[1]<0;break;case"bottom":o=F[1]>0;break;case"left":o=F[0]>0;break;case"right":o=F[0]<0}if(o&&Object(l.n)(F,F),0===Object(l.l)(F))switch(r){case"top":F[1]=1;break;case"bottom":F[1]=-1;break;case"left":F[0]=-1;break;case"right":F[0]=1}return s.eval(U[e.sampleLocation],L),a.projectToRenderScreen(L,P),!(P[2]<0||P[2]>1||(a.renderToScreen(P,n),Object(l.a)(F,F,t*a.pixelRatio),Object(l.h)(F,F,P),a.renderToScreen(F,i),0))}_updatePosition(e,t){if(t){const r=t[0]-e[0],n=t[1]-e[1];return this._textItem.position=[t[0],t[1]],this._textItem.anchor=Math.abs(r)>Math.abs(n)?r>0?"left":"right":n>0?"top":"bottom",this._calloutItem.startPosition=[e[0],e[1]],this._calloutItem.endPosition=[t[0],t[1]],!0}return this._textItem.position=[e[0],e[1]],this._textItem.anchor="center",!1}createResources(){this._textItem=new w({visible:!0}),this._textItem.text=Object(n.q)(this._text),this._textItem.fontSize=this._fontSize,this._calloutItem=new O({visible:!0,width:2}),this._updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this._handles.add(this.view.state.watch("camera",()=>{this._updateLabelPosition()}))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(e){this._textItem.visible=this._showText&&e,this._calloutItem.visible=this._showCallout&&e}}function I(e,t,r,n){e.eval(t,E,A),Object(a.e)(M,E,A),r.projectToRenderScreen(E,D),r.projectToRenderScreen(M,N),Object(l.d)(n,z,G),Object(l.e)(n,n)}function T(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right"}}const E=Object(s.e)(),M=Object(s.e)(),A=Object(s.e)(),R=Object(i.d)(),C=Object(i.d)(),F=Object(i.d)(),L=Object(s.e)(),P=Object(i.e)(),k=Object(i.g)(),B=Object(i.g)(),D=Object(i.e)(),G=D,N=Object(i.e)(),z=N,U={start:0,center:.5,end:1}},JL5j:function(e,t,r){"use strict";r.r(t);var n=r("pO5D"),i=(r("wSAH"),r("f/qv")),s=r("srIe"),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("zm0L")),c=r("r0DZ"),u=r("N5XI"),h=r("JYnY"),d=r("QS+a"),p=r("zcE2"),f=r("PN7H");class b{constructor(e,t,r,n,i){this.graphic=e,this.index=t,this.x=r,this.y=n,this.viewEvent=i,this.type="graphic-click"}}class m{constructor(e,t,r,n,i){this.graphic=e,this.index=t,this.x=r,this.y=n,this.viewEvent=i,this.type="graphic-double-click"}}class y{constructor(e,t,r,n,i,s,a,o,l,c){this.graphic=e,this.allGraphics=t,this.index=r,this.x=n,this.y=i,this.dx=s,this.dy=a,this.totalDx=o,this.totalDy=l,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class g{constructor(e,t,r,n,i,s,a,o,l,c){this.graphic=e,this.allGraphics=t,this.index=r,this.x=n,this.y=i,this.dx=s,this.dy=a,this.totalDx=o,this.totalDy=l,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class O{constructor(e,t,r,n,i,s,a,o,l,c){this.graphic=e,this.allGraphics=t,this.index=r,this.x=n,this.y=i,this.dx=s,this.dy=a,this.totalDx=o,this.totalDy=l,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class j{constructor(e,t,r,n,i){this.graphic=e,this.index=t,this.x=r,this.y=n,this.viewEvent=i,this.type="graphic-pointer-over"}}class _{constructor(e,t,r,n,i){this.graphic=e,this.index=t,this.x=r,this.y=n,this.viewEvent=i,this.type="graphic-pointer-out"}}class v{constructor(e,t,r,n,i){this.graphic=e,this.index=t,this.x=r,this.y=n,this.viewEvent=i,this.type="graphic-pointer-down"}}class x{constructor(e,t,r,n,i){this.graphic=e,this.index=t,this.x=r,this.y=n,this.viewEvent=i,this.type="graphic-pointer-up"}}let w=class extends l.a.EventedAccessor{constructor(e){super(e),this._activeGraphic=null,this._dragEvent=null,this._handles=new c.a,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new c.a,this._manipulators=[],this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([Object(u.watch)(this,["graphics","graphics.length"],()=>{this._setUpManipulators()}),Object(u.whenOnce)(this,"view.ready",()=>{this._viewHandles.add([this.view.on("immediate-click",e=>this._clickHandler(e),h.b.TOOL),this.view.on("double-click",e=>this._doubleClickHandler(e),h.b.TOOL),this.view.on("pointer-down",e=>this._pointerDownHandler(e),h.b.TOOL),this.view.on("pointer-move",e=>this._pointerMoveHandler(e),h.b.TOOL),this.view.on("pointer-up",e=>this._pointerUpHandler(e),h.b.TOOL),this.view.on("drag",e=>this._dragHandler(e),h.b.TOOL),this.view.on("key-down",e=>this._keyDownHandler(e),h.b.TOOL)])})])}destroy(){this.reset(),this._manipulators.forEach(e=>e.destroy()),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const e=!!this.get("view.ready"),t=!!this.get("graphics.length");return e&&t?this._activeGraphic?"moving":"active":e?"ready":"disabled"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(e,t){const r=this.graphics[e];r&&r.set("geometry",t)}_clickHandler(e){const t=this._findTargetGraphic(Object(d.a)(e));if(t){const r=new b(t,this.graphics.indexOf(t),e.x,e.y,e);this.emit("graphic-click",r),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(r)}}_doubleClickHandler(e){const t=this._findTargetGraphic(Object(d.a)(e));if(t){const r=new m(t,this.graphics.indexOf(t),e.x,e.y,e);this.emit("graphic-double-click",r),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(r)}}_pointerDownHandler(e){const t=this._findTargetGraphic(Object(d.a)(e));if(t){this._activeGraphic=t;const{x:r,y:n}=e,i=new v(t,this.graphics.indexOf(t),r,n,e);this.emit("graphic-pointer-down",i),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(i)}else this._activeGraphic=null}_pointerUpHandler(e){if(this._activeGraphic){const{x:t,y:r}=e,n=this.graphics.indexOf(this._activeGraphic),i=new x(this._activeGraphic,n,t,r,e);this.emit("graphic-pointer-up",i),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(i)}}_pointerMoveHandler(e){if(this._dragEvent)return;const t=this._findTargetGraphic(Object(d.a)(e));if(t){const{x:r,y:n}=e;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const i=this.graphics.indexOf(this._hoverGraphic),s=new _(this.graphics[i],i,r,n,e);this._hoverGraphic=null,this.emit("graphic-pointer-out",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}const i=this.graphics.indexOf(t),s=new j(t,i,r,n,e);return this._hoverGraphic=t,this.emit("graphic-pointer-over",s),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(s))}if(this._hoverGraphic){const{x:t,y:r}=e,n=this.graphics.indexOf(this._hoverGraphic),i=new _(this.graphics[n],n,t,r,e);this._hoverGraphic=null,this.emit("graphic-pointer-out",i),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(i)}}_dragHandler(e){if("start"!==e.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;e.stopPropagation();const{action:t,x:r,y:n}=e,s=this.graphics.indexOf(this._activeGraphic),a=this._activeGraphic.geometry,o=this._dragEvent?r-this._dragEvent.x:0,l=this._dragEvent?n-this._dragEvent.y:0,c=r-e.origin.x,u=n-e.origin.y;if(this._activeGraphic.geometry=Object(p.a)(a,o,l,this.view),this.enableMoveAllGraphics&&this.graphics.forEach(e=>{e!==this._activeGraphic&&(e.geometry=Object(p.a)(e.geometry,o,l,this.view))}),this._dragEvent=e,"start"===t){this._initialDragGeometry=Object(i.a)(a);const t=new y(this._activeGraphic,this.graphics,s,r,n,o,l,c,u,e);this.emit("graphic-move-start",t),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(t),t.defaultPrevented&&this._activeGraphic.set("geometry",a)}else if("update"===t){const t=new g(this._activeGraphic,this.graphics,s,r,n,o,l,c,u,e);this.emit("graphic-move",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set("geometry",a)}else{const t=new O(this._activeGraphic,this.graphics,s,r,n,o,l,c,u,e);this._dragEvent=null,this._activeGraphic=null,this.emit("graphic-move-stop",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[s].set("geometry",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(e){"a"!==e.key&&"d"!==e.key&&"n"!==e.key||"moving"!==this.state||e.stopPropagation()}_findTargetGraphic(e){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach(n=>{const i=n.intersectionDistance(e);Object(s.k)(i)&&i<r&&(r=i,t=n.graphic)}),t}_setUpManipulators(){const{graphics:e,view:t}=this;this._manipulators.forEach(e=>e.destroy()),this._manipulators=null!=e&&e.length?e.map(e=>new f.a({graphic:e,view:t})):[]}};Object(n.a)([Object(a.b)()],w.prototype,"_activeGraphic",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],w.prototype,"type",void 0),Object(n.a)([Object(a.b)()],w.prototype,"callbacks",void 0),Object(n.a)([Object(a.b)()],w.prototype,"enableMoveAllGraphics",void 0),Object(n.a)([Object(a.b)()],w.prototype,"graphics",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],w.prototype,"state",null),Object(n.a)([Object(a.b)()],w.prototype,"view",void 0),w=Object(n.a)([Object(o.a)("esri.views.draw.support.GraphicMover")],w),t.default=w},LTnl:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("yE7X"),i=r("Oxob"),s=r("mgI5");class a extends s.a{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.blendFunction)}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap",brushes:[i.a.bitmap],target:()=>this.children,drawPhase:n.c.MAP});return[...super.prepareRenderPasses(e),t]}}},N3sV:function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r("wSAH");var n=r("jjdI"),i=r("fOQB"),s=r("of9L"),a=r("D6bk"),o=r("0meK");async function l(e){const t=new Image;if(t.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",t.width=5,t.height=5,await t.decode(),!e.gl)return!0;const r=new o.a(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),l=i.a.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),c=new a.a(e,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:l}),u=new n.a(e,"\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",{a_pos:0});e.bindProgram(u);const h=new s.a(e,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},t);e.bindTexture(h,0),u.setUniform1i("u_texture",0);const d=e.getBoundFramebufferObject(),{x:p,y:f,width:b,height:m}=e.getViewport();e.bindFramebuffer(r),e.setViewport(0,0,1,1),e.bindVAO(c),e.drawArrays(5,0,4);const y=new Uint8Array(4);return r.readPixels(0,0,1,1,6408,5121,y),u.dispose(),c.dispose(!1),l.dispose(),r.dispose(),h.dispose(),e.setViewport(p,f,b,m),e.bindFramebuffer(d),t.src="",255===y[0]}},NOfn:function(e,t,r){"use strict";r.r(t),r.d(t,"registerFunctions",function(){return y});var n=r("N2DF"),i=r("SuVq"),s=r("OvF4"),a=r("V9wi"),o=r("Ehki"),l=r("UhwK"),c=r("qatw"),u=r("975N"),h=r("idrm"),d=r("3xY4"),p=r("hUmP"),f=r("u1HQ");function b(e){return 0===u.d.indexOf("4.")?o.a.fromExtent(e):new o.a({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function m(e){if(Object(h.J)(e,2,2),e[0]instanceof n.a&&e[1]instanceof n.a);else if(e[0]instanceof n.a&&null===e[1]);else if(e[1]instanceof n.a&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function y(e){"async"===e.mode&&(e.functions.disjoint=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null===r[0]||null===r[1]||Object(f.h)(r[0],r[1])})},e.functions.intersects=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.q)(r[0],r[1])})},e.functions.touches=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.A)(r[0],r[1])})},e.functions.crosses=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.d)(r[0],r[1])})},e.functions.within=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.C)(r[0],r[1])})},e.functions.contains=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.c)(r[0],r[1])})},e.functions.overlaps=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.t)(r[0],r[1])})},e.functions.equals=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return Object(h.J)(r,2,2),r[0]===r[1]||(r[0]instanceof n.a&&r[1]instanceof n.a?Object(f.j)(r[0],r[1]):!(!Object(h.z)(r[0])||!Object(h.z)(r[1]))&&r[0].getTime()===r[1].getTime())})},e.functions.relate=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,3,3),r[0]instanceof n.a&&r[1]instanceof n.a)return Object(f.w)(r[0],r[1],Object(h.y)(r[2]));if(r[0]instanceof n.a&&null===r[1])return!1;if(r[1]instanceof n.a&&null===r[0])return!1;if(null===r[0]&&null===r[1])return!1;throw new Error("Illegal Argument")})},e.functions.intersection=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null===r[0]||null===r[1]?null:Object(f.p)(r[0],r[1])})},e.functions.union=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){const s=[];if(0===(i=Object(h.j)(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(Object(h.B)(i[0])){const e=Object(h.j)(i[0]);for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof n.a))throw new Error("Illegal Argument");s.push(e[t])}}else{if(!Object(h.I)(i[0])){if(i[0]instanceof n.a)return Object(h.L)(Object(p.a)(i[0]),t.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const e=Object(h.j)(i[0].toArray());for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof n.a))throw new Error("Illegal Argument");s.push(e[t])}}}else for(let t=0;t<i.length;t++)if(null!==i[t]){if(!(i[t]instanceof n.a))throw new Error("Illegal Argument");s.push(i[t])}return 0===s.length?null:Object(f.B)(s)})},e.functions.difference=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null!==r[0]&&null===r[1]?Object(p.a)(r[0]):null===r[0]?null:Object(f.g)(r[0],r[1])})},e.functions.symmetricdifference=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return m(r=Object(h.j)(r)),null===r[0]&&null===r[1]?null:null===r[0]?Object(p.a)(r[1]):null===r[1]?Object(p.a)(r[0]):Object(f.z)(r[0],r[1])})},e.functions.clip=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,2),!(r[1]instanceof s.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return null===r[1]?null:Object(f.b)(r[0],r[1])})},e.functions.cut=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,2),!(r[1]instanceof l.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return null===r[1]?[Object(p.a)(r[0])]:Object(f.e)(r[0],r[1])})},e.functions.area=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(h.J)(i,1,2),null===(i=Object(h.j)(i))[0])return 0;if(Object(h.T)(i[0]))return i[0].sumArea(Object(p.c)(Object(h.c)(i[1],-1)),!1,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(h.B)(i[0])||Object(h.I)(i[0])){const e=Object(h.l)(i[0],t.spatialReference);return null===e?0:Object(f.u)(e,Object(p.c)(Object(h.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.u)(i[0],Object(p.c)(Object(h.c)(i[1],-1)))})},e.functions.areageodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(h.J)(i,1,2),null===(i=Object(h.j)(i))[0])return 0;if(Object(h.T)(i[0]))return i[0].sumArea(Object(p.c)(Object(h.c)(i[1],-1)),!0,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(h.B)(i[0])||Object(h.I)(i[0])){const e=Object(h.l)(i[0],t.spatialReference);return null===e?0:Object(f.l)(e,Object(p.c)(Object(h.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.l)(i[0],Object(p.c)(Object(h.c)(i[1],-1)))})},e.functions.length=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(h.J)(i,1,2),null===(i=Object(h.j)(i))[0])return 0;if(Object(h.T)(i[0]))return i[0].sumLength(Object(p.b)(Object(h.c)(i[1],-1)),!1,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(h.B)(i[0])||Object(h.I)(i[0])){const e=Object(h.k)(i[0],t.spatialReference);return null===e?0:Object(f.v)(e,Object(p.b)(Object(h.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.v)(i[0],Object(p.b)(Object(h.c)(i[1],-1)))})},e.functions.lengthgeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(h.J)(i,1,2),null===(i=Object(h.j)(i))[0])return 0;if(Object(h.T)(i[0]))return i[0].sumLength(Object(p.b)(Object(h.c)(i[1],-1)),!0,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(h.B)(i[0])||Object(h.I)(i[0])){const e=Object(h.k)(i[0],t.spatialReference);return null===e?0:Object(f.o)(e,Object(p.b)(Object(h.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.o)(i[0],Object(p.b)(Object(h.c)(i[1],-1)))})},e.functions.distance=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){i=Object(h.j)(i),Object(h.J)(i,2,3);let s=i[0];(Object(h.B)(i[0])||Object(h.I)(i[0]))&&(s=Object(h.o)(i[0],t.spatialReference));let a=i[1];if((Object(h.B)(i[1])||Object(h.I)(i[1]))&&(a=Object(h.o)(i[1],t.spatialReference)),!(s instanceof n.a))throw new Error("Illegal Argument");if(!(a instanceof n.a))throw new Error("Illegal Argument");return Object(f.i)(s,a,Object(p.b)(Object(h.c)(i[2],-1)))})},e.functions.distancegeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){r=Object(h.j)(r),Object(h.J)(r,2,3);const n=r[0],s=r[1];if(!(n instanceof i.a))throw new Error("Illegal Argument");if(!(s instanceof i.a))throw new Error("Illegal Argument");const a=new l.a({paths:[],spatialReference:n.spatialReference});return a.addPath([n,s]),Object(f.o)(a,Object(p.b)(Object(h.c)(r[2],-1)))})},e.functions.densify=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(h.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");if(i<=0)throw new Error("Illegal Argument");return r[0]instanceof o.a||r[0]instanceof l.a?Object(f.f)(r[0],i,Object(p.b)(Object(h.c)(r[2],-1))):r[0]instanceof s.a?Object(f.f)(b(r[0]),i,Object(p.b)(Object(h.c)(r[2],-1))):r[0]})},e.functions.densifygeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(h.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");if(i<=0)throw new Error("Illegal Argument");return r[0]instanceof o.a||r[0]instanceof l.a?Object(f.n)(r[0],i,Object(p.b)(Object(h.c)(r[2],-1))):r[0]instanceof s.a?Object(f.n)(b(r[0]),i,Object(p.b)(Object(h.c)(r[2],-1))):r[0]})},e.functions.generalize=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,4),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(h.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return Object(f.k)(r[0],i,Object(h.x)(Object(h.c)(r[2],!0)),Object(p.b)(Object(h.c)(r[3],-1)))})},e.functions.buffer=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(h.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?Object(p.a)(r[0]):Object(f.a)(r[0],i,Object(p.b)(Object(h.c)(r[2],-1)))})},e.functions.buffergeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(h.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?Object(p.a)(r[0]):Object(f.m)(r[0],i,Object(p.b)(Object(h.c)(r[2],-1)))})},e.functions.offset=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,2,6),null===r[0])return null;if(!(r[0]instanceof o.a||r[0]instanceof l.a))throw new Error("Illegal Argument");const n=Object(h.w)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");const i=Object(h.w)(Object(h.c)(r[4],10));if(isNaN(i))throw new Error("Illegal Argument");const s=Object(h.w)(Object(h.c)(r[5],0));if(isNaN(s))throw new Error("Illegal Argument");return Object(f.s)(r[0],n,Object(p.b)(Object(h.c)(r[2],-1)),Object(h.y)(Object(h.c)(r[3],"round")).toLowerCase(),i,s)})},e.functions.rotate=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){r=Object(h.j)(r),Object(h.J)(r,2,3);let a=r[0];if(null===a)return null;if(!(a instanceof n.a))throw new Error("Illegal Argument");a instanceof s.a&&(a=o.a.fromExtent(a));const l=Object(h.w)(r[1]);if(isNaN(l))throw new Error("Illegal Argument");const c=Object(h.c)(r[2],null);if(null===c)return Object(f.x)(a,l);if(c instanceof i.a)return Object(f.x)(a,l,c);throw new Error("Illegal Argument")})},e.functions.centroid=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,c){if(c=Object(h.j)(c),Object(h.J)(c,1,1),null===c[0])return null;let u=c[0];if((Object(h.B)(c[0])||Object(h.I)(c[0]))&&(u=Object(h.o)(c[0],t.spatialReference)),null===u)return null;if(!(u instanceof n.a))throw new Error("Illegal Argument");return u instanceof i.a?Object(h.L)(Object(p.a)(c[0]),t.spatialReference):u instanceof o.a?u.centroid:u instanceof l.a?Object(d.f)(u):u instanceof a.a?Object(d.e)(u):u instanceof s.a?u.center:null})},e.functions.multiparttosinglepart=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,u){u=Object(h.j)(u),Object(h.J)(u,1,1);const d=[];if(null===u[0])return null;if(!(u[0]instanceof n.a))throw new Error("Illegal Argument");return u[0]instanceof i.a||u[0]instanceof s.a?[Object(h.L)(Object(p.a)(u[0]),t.spatialReference)]:Object(f.y)(u[0]).then(e=>{if(e instanceof o.a){const t=[],r=[];for(let n=0;n<e.rings.length;n++)if(e.isClockwise(e.rings[n])){const r=Object(c.a)({rings:[e.rings[n]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});t.push(r)}else r.push({ring:e.rings[n],pt:e.getPoint(n,0)});for(let e=0;e<r.length;e++)for(let n=0;n<t.length;n++)if(t[n].contains(r[e].pt)){t[n].addRing(r[e].ring);break}return t}if(e instanceof l.a){const t=[];for(let r=0;r<e.paths.length;r++){const n=Object(c.a)({paths:[e.paths[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});t.push(n)}return t}if(u[0]instanceof a.a){const e=Object(h.L)(Object(p.a)(u[0]),t.spatialReference);for(let t=0;t<e.points.length;t++)d.push(e.getPoint(t));return d}return null})})},e.functions.issimple=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,1,1),null===r[0])return!0;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.r)(r[0])})},e.functions.simplify=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(h.j)(r),Object(h.J)(r,1,1),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.y)(r[0])})})}},OYGz:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let c=n=class extends l.a{constructor(e){super(e)}clone(){return new n({customLayerParameters:Object(s.a)(this.customLayerParameters),customParameters:Object(s.a)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};Object(i.a)([Object(a.b)({json:{type:Object,write:!0}})],c.prototype,"customLayerParameters",void 0),Object(i.a)([Object(a.b)({json:{type:Object,write:!0}})],c.prototype,"customParameters",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"layerIdentifier",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"tileMatrixSet",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"url",void 0),c=n=Object(i.a)([Object(o.a)("esri.layer.support.WMTSLayerInfo")],c),t.a=c},OvWd:function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r("pO5D"),i=(r("wSAH"),r("nR38")),s=r("srIe"),a=(r("6S2I"),r("zqDF"),r("WbKI"),r("04ZG")),o=r("zlDU"),l=r("4EHJ"),c=(r("ju1D"),r("9AIY"),r("Lqtk")),u=r("kglp");const h=e=>{let t=class extends e{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o.a("network-service:missing-url","Url to Network service is missing");const t=this.url,{data:r}=await Object(c.default)(t,{query:{f:"json",token:e}});r.supportedTravelModes||(r.supportedTravelModes=[]);for(let i=0;i<r.supportedTravelModes.length;i++)r.supportedTravelModes[i].id||(r.supportedTravelModes[i].id=r.supportedTravelModes[i].itemId);const n=r.currentVersion>=10.4?async function(e,t){try{const{data:{supportedTravelModes:r,defaultTravelMode:n}}=await Object(c.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json",token:t}});return{supportedTravelModes:r,defaultTravelMode:n}}catch(r){throw new o.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:r})}}(t,e):async function(e,t){const{data:r}=await Object(c.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json",token:t}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=r.owningSystemUrl;const{data:n}=await Object(c.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json",token:t}}),s=Object(i.b)("helperServices.routingUtilities.url",n);if(!s)return{supportedTravelModes:[],defaultTravelMode:null};const a=Object(l.J)(e),o=/\/solveClosestFacility$/.test(a.path)?"Route":/\/solveClosestFacility$/.test(a.path)?"ClosestFacility":"ServiceAreas",u=await Object(c.default)(s+("/"===s[s.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:o,token:t}}),h=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);h.push(t)}}else"defaultTravelMode"===t.paramName&&(d=t.value)}return{supportedTravelModes:h,defaultTravelMode:d}}(t,e),{defaultTravelMode:s,supportedTravelModes:a}=await n;return r.defaultTravelMode=s,r.supportedTravelModes=a,r}_isInputGeometryZAware(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)if(Object(s.k)(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}};return t=Object(n.a)([Object(a.a)("esri.tasks.mixins.NAServiceDescription")],t),t};let d=class extends(h(u.a)){};d=Object(n.a)([Object(a.a)("esri.tasks.mixins.NAServiceDescription")],d)},PN7H:function(e,t,r){"use strict";r.d(t,"a",function(){return j});var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=r("6S2I"),a=(r("zqDF"),r("WbKI")),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD")),c=r("zm0L"),u=r("qRWG"),h=r("Cy1f"),d=r("5DEt"),p=r("gYg2"),f=r("/RTN"),b=r("psH3"),m=r("M0lq"),y=r("9AiD"),g=r("6UvW");const O=s.a.getLogger("esri.views.interactive.GraphicManipulator");let j=class extends l.a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new c.a.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){"mesh"!==Object(i.i)(e.geometry,"type")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()):O.error("Mesh geometries are not supported")}get elevationInfo(){const e="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=Object(y.e)(this.graphic);return new f.a({mode:t,offset:e?e.offset:0})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const r=t.geometry;if(Object(i.j)(r))return null;const n=this._get("focusedSymbol"),s=Object(i.k)(n)?n:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,r,s):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),Object(i.k)(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),Object(i.k)(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch("symbol",e=>{Object(i.k)(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&Object(i.k)(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))},!0)}detachSymbolChanged(){Object(i.k)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&Object(i.k)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,r,n){if(n=n||Object(b.e)(r),Object(i.j)(n))return null;let s=this._circleCollisionCache;if("point"!==r.type||"simple-marker"!==n.type)return Object(g.b)(t,r,e)?1:null;if(Object(i.j)(s)||!s.originalPoint.equals(r)){const t=r,i=e.spatialReference;if(Object(p.b)(t.spatialReference,i)){const e=Object(p.j)(t,i);s={originalPoint:t.clone(),mapPoint:e,radiusPx:Object(u.h)(n.size)},this._circleCollisionCache=s}}if(Object(i.k)(s)){const r=Object(u.j)(t,v),i=e.toScreen(s.mapPoint),a=s.radiusPx,o=i.x+Object(u.h)(n.xoffset),l=i.y-Object(u.h)(n.yoffset);return Object(m.j)(r,[o,l])<a*a?1:null}return null}_intersectDistance3D(e,t,r){const n=e.toMap(t,{include:[r]});return n&&Object(p.o)(n,_,e.renderSpatialReference)?Object(d.n)(_,e.state.camera.eye):null}};Object(n.a)([Object(a.b)({constructOnly:!0,nonNullable:!0})],j.prototype,"graphic",null),Object(n.a)([Object(a.b)({readOnly:!0})],j.prototype,"elevationInfo",null),Object(n.a)([Object(a.b)({constructOnly:!0,nonNullable:!0})],j.prototype,"view",void 0),Object(n.a)([Object(a.b)({value:null})],j.prototype,"focusedSymbol",null),Object(n.a)([Object(a.b)({constructOnly:!0})],j.prototype,"layer",void 0),Object(n.a)([Object(a.b)()],j.prototype,"interactive",void 0),Object(n.a)([Object(a.b)()],j.prototype,"selectable",void 0),Object(n.a)([Object(a.b)()],j.prototype,"grabbable",void 0),Object(n.a)([Object(a.b)({value:!1})],j.prototype,"grabbing",null),Object(n.a)([Object(a.b)()],j.prototype,"dragging",void 0),Object(n.a)([Object(a.b)()],j.prototype,"hovering",null),Object(n.a)([Object(a.b)({value:!1})],j.prototype,"selected",null),Object(n.a)([Object(a.b)()],j.prototype,"cursor",void 0),j=Object(n.a)([Object(o.a)("esri.views.interactive.GraphicManipulator")],j);const _=Object(h.e)(),v=Object(u.g)()},S60b:function(e,t,r){"use strict";r.d(t,"a",function(){return N}),r.d(t,"b",function(){return U});var n=r("wSAH"),i=r("zlDU"),s=r("975N"),a=r("Lqtk"),o=r("0ynT"),l=(r("5sKF"),r("aelY")),c=(r("6S2I"),r("nvBr")),u=(r("cCpn"),r("Jv1m")),h=r("opr1"),d=r("LGNZ");let p=0,f=0;const b=Object(n.a)("android"),m=Object(n.a)("chrome")||b&&b>=4?"auto":"optimizeLegibility",y={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},g=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let O={},j={};const _={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},v=Math.PI;function x(e,t){const r=e*(v/180);return Math.abs(t*Math.sin(r))+Math.abs(t*Math.cos(r))}function w(e){return e.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function S(e,t,r,n){if(e){if("circle"===e.type)return Object(u.a)("circle",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return Object(u.a)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return Object(u.a)("rect",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return Object(u.a)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){const n="string"!=typeof e.path?w(e.path):e.path;return Object(u.a)("path",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:n})}if("text"===e.type)return Object(u.a)("text",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":m,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:e.x,y:e.y},e.text)}return null}function I(e){const t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const r="patternId-"+ ++p;t.fill=`url(#${r})`,t.pattern={id:r,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const r="linearGradientId-"+ ++f;t.fill=`url(#${r})`,t.linearGradient={id:r,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(e=>({offset:e.offset,color:e.color&&new c.a(e.color).toString()}))}}else if(e){const r=new c.a(e);t.fill=r.toString()}return t}function T(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new c.a(e.color).toString()),e.style)){let r=null;if(e.style in _&&(r=_[e.style]),Array.isArray(r)){r=r.slice(0);for(let t=0;t<r.length;++t)r[t]*=e.width;if("butt"!==e.cap){for(let t=0;t<r.length;t+=2)r[t]-=e.width,r[t]<1&&(r[t]=1);for(let t=1;t<r.length;t+=2)r[t]+=e.width}r=r.join(",")}t.dashArray=r}return t}function E(e,t){const r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(r.align=e.align,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"),r}function M(e){const{pattern:t,linearGradient:r}=e;if(t)return Object(u.a)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},Object(u.a)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(r){const e=r.stops.map((e,t)=>Object(u.a)("stop",{key:`${t}-stop`,offset:e.offset,"stop-color":e.color}));return Object(u.a)("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},e)}return null}function A(e,t,r){return Object(h.h)(e,Object(h.d)(e),[t,r])}function R(e,t,r,n,i){return Object(h.g)(e,Object(h.d)(e),[t,r]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*r-i*r+i,e}function C(e,t){O&&"left"in O?(O.left>e&&(O.left=e),O.right<e&&(O.right=e),O.top>t&&(O.top=t),O.bottom<t&&(O.bottom=t)):O={left:e,bottom:t,right:e,top:t}}function F(e){const t=e.args,r=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<r;n+=2)C(t[n],t[n+1]);j.x=t[r-2],j.y=t[r-1];break;case"H":for(n=0;n<r;++n)C(t[n],j.y);j.x=t[r-1];break;case"V":for(n=0;n<r;++n)C(j.x,t[n]);j.y=t[r-1];break;case"m":{let e=0;"x"in j||(C(j.x=t[0],j.y=t[1]),e=2);for(n=e;n<r;n+=2)C(j.x+=t[n],j.y+=t[n+1]);break}case"l":case"t":for(n=0;n<r;n+=2)C(j.x+=t[n],j.y+=t[n+1]);break;case"h":for(n=0;n<r;++n)C(j.x+=t[n],j.y);break;case"v":for(n=0;n<r;++n)C(j.x,j.y+=t[n]);break;case"c":for(n=0;n<r;n+=6)C(j.x+t[n],j.y+t[n+1]),C(j.x+t[n+2],j.y+t[n+3]),C(j.x+=t[n+4],j.y+=t[n+5]);break;case"s":case"q":for(n=0;n<r;n+=4)C(j.x+t[n],j.y+t[n+1]),C(j.x+=t[n+2],j.y+=t[n+3]);break;case"A":for(n=0;n<r;n+=7)C(t[n+5],t[n+6]);j.x=t[r-2],j.y=t[r-1];break;case"a":for(n=0;n<r;n+=7)C(j.x+=t[n+5],j.y+=t[n+6])}}function L(e,t,r){const n=y[e.toLowerCase()];let i;"number"==typeof n&&(n?t.length>=n&&(i={action:e,args:t.slice(0,t.length-t.length%n)},r.push(i),F(i)):(i={action:e,args:[]},r.push(i),F(i)))}function P(e){const t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){const r=function(e){const t=("string"!=typeof e.path?w(e.path):e.path).match(g),r=[];if(O={},j={},!t)return null;let n="",i=[];const s=t.length;for(let o=0;o<s;++o){const e=t[o],s=parseFloat(e);isNaN(s)?(n&&L(n,i,r),i=[],n=e):i.push(s)}L(n,i,r);const a={x:0,y:0,width:0,height:0};return O&&"left"in O&&(a.x=O.left,a.y=O.top,a.width=O.right-O.left,a.height=O.bottom-O.top),a}(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function k(e){const t={x:0,y:0,width:0,height:0};let r=null,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const s of e)r?(r.x=Math.min(r.x,s.x),r.y=Math.min(r.y,s.y),n=Math.max(n,s.x+s.width),i=Math.max(i,s.y+s.height)):(r=t,r.x=s.x,r.y=s.y,n=s.x+s.width,i=s.y+s.height);return r&&(r.width=n-r.x,r.height=i-r.y),r}function B(e,t,r,n,i,s,a,o){const l=(a&&s?x(s,t):t)/2,c=(a&&s?x(s,r):r)/2,u=e.width+n,p=e.height+n,f=Object(d.a)(),b=Object(d.a)();let m=!1;if(i&&0!==u&&0!==p){const e=u/p,n=t>r?t:r;let i=1,s=1;isNaN(n)||(e>1?(i=n/u,s=n/e/p):(s=n/p,i=n*e/u)),Object(h.e)(b,b,R(f,i,s,l,c)),m=!0}const y=e.x+(u-n)/2,g=e.y+(p-n)/2;if(Object(h.e)(b,b,A(f,l-y,c-g)),!m&&(u>t||p>r)){const e=u/t>p/r,n=(e?t:r)/(e?u:p);Object(h.e)(b,b,R(f,n,n,y,g))}return s&&Object(h.e)(b,b,function(e,t,r,n){const i=t%360*Math.PI/180;Object(h.f)(e,Object(h.d)(e),i);const s=Math.cos(i),a=Math.sin(i),o=e[4],l=e[5];return e[4]=o*s-l*a+n*a-r*s+r,e[5]=l*s+o*a-r*a-n*s+n,e}(f,s,y,g)),o&&Object(h.e)(b,b,A(f,o[0],o[1])),`matrix(${b[0]},${b[1]},${b[2]},${b[3]},${b[4]},${b[5]})`}function D(e,t,r,n){const i=[],s=[];for(const a of e){const e=[],o=[];let l=0,c=0,h=0;for(const t of a){const{shape:r,fill:n,stroke:s,font:a,offset:u}=t;l+=s&&s.width||0;const d=I(n),p=T(s),f="text"===r.type?E(r,a):null;i.push(M(d)),e.push(S(r,d.fill,p,f)),o.push(P(r)),u&&(c+=u[0],h+=u[1])}const d=B(k(o),t,r,l,null==n?void 0:n.scale,null==n?void 0:n.rotation,null==n?void 0:n.useRotationSize,[c,h]);s.push(Object(u.a)("g",{transform:d},e))}return null!=n&&n.useRotationSize&&null!=n&&n.rotation&&(t=x(null==n?void 0:n.rotation,t),r=x(null==n?void 0:n.rotation,r)),Object(u.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r},Object(u.a)("defs",null,i),s)}const G=Object(l.a)();function N(e,t,r){const n=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some(e=>!!e.length))return null;const s=r&&r.node||document.createElement("div");return null!=r.opacity&&(s.style.opacity=r.opacity.toString()),G.append(s,D.bind(null,e,n,i,r)),s}function z(e,t,r,n,i){switch(i){case"multiply":e[t+0]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];break;default:{const i=Object(o.b)({r:e[t+0],g:e[t+1],b:e[t+2]});i.h=n.h,i.s=n.s,i.v=i.v/100*n.v;const s=Object(o.e)(i);e[t+0]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=r[3];break}}}function U(e,t,r,l,c){return(u=e,h=t,d=c,u?Object(a.default)(u,{responseType:"image"}).then(e=>{const t=e.data,r=t.width,n=t.height,i=r/n;let s=h;if(d){const e=Math.max(r,n);s=Math.min(s,e)}return{image:t,width:i<=1?Math.ceil(s*i):s,height:i<=1?s:Math.ceil(s/i)}}):Promise.reject(new i.a("renderUtils: imageDataSize","href not provided."))).then(i=>{const a=i.width?i.width:t,c=i.height?i.height:t;if(i.image&&function(e,t){return!(!e||"ignore"===t||"multiply"===t&&255===e.r&&255===e.g&&255===e.b&&1===e.a)}(r,l)){let t=i.image.width,s=i.image.height;(Object(n.a)("edge")||Object(n.a)("ie"))&&/\.svg$/i.test(e)&&(t-=1,s-=1);const u=function(e,t){e=Math.ceil(e),t=Math.ceil(t);const r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";const n=r.getContext("2d");return n.clearRect(0,0,e,t),n}(a,c);u.drawImage(i.image,0,0,t,s,0,0,a,c);const h=u.getImageData(0,0,a,c),d=[r.r/255,r.g/255,r.b/255,r.a],p=Object(o.b)(r);for(let e=0;e<h.data.length;e+=4)z(h.data,e,d,p,l);u.putImageData(h,0,0),e=u.canvas.toDataURL("image/png")}else{const t=s.b&&s.b.findCredential(e);if(t&&t.token){const r=-1===e.indexOf("?")?"?":"&";e=`${e}${r}token=${t.token}`}}return{url:e,width:a,height:c}}).catch(function(){return{url:e,width:t,height:t}});var u,h,d}},Tg0p:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),h=r("1hFN"),d=r("ag7Y"),p=r("nvBr");let f=n=class extends d.a{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],f.prototype,"minValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],f.prototype,"maxValue",void 0),Object(i.a)([Object(o.b)({type:p.a,json:{type:[a.a],write:!0}})],f.prototype,"color",void 0),f=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],f);var b,m=f;let y=b=class extends u.a{constructor(e){super(e),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new b({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:Object(s.a)(this.colorClassBreakInfos),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],y.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],y.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],y.prototype,"legendOptions",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],y.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[m],json:{write:!0}})],y.prototype,"colorClassBreakInfos",void 0),y=b=Object(i.a)([Object(c.a)("esri.renderers.PointCloudClassBreaksRenderer")],y),t.a=y},V4u7:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("RI0u"),l=r("04ZG"),c=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),u=r("1hFN"),h=r("P2CQ");let d=n=class extends c.a{constructor(e){super(e),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new n({...this.cloneProperties(),field:Object(s.a)(this.field),fieldTransformType:Object(s.a)(this.fieldTransformType),stops:Object(s.a)(this.stops),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(o.a)({pointCloudStretchRenderer:"point-cloud-stretch"})],d.prototype,"type",void 0),Object(i.a)([Object(a.b)({json:{write:!0},type:String})],d.prototype,"field",void 0),Object(i.a)([Object(a.b)({type:u.a,json:{write:!0}})],d.prototype,"legendOptions",void 0),Object(i.a)([Object(a.b)({type:c.a.fieldTransformTypeKebabDict.apiValues,json:{type:c.a.fieldTransformTypeKebabDict.jsonValues,read:c.a.fieldTransformTypeKebabDict.read,write:c.a.fieldTransformTypeKebabDict.write}})],d.prototype,"fieldTransformType",void 0),Object(i.a)([Object(a.b)({type:[h.a],json:{write:!0}})],d.prototype,"stops",void 0),d=n=Object(i.a)([Object(l.a)("esri.renderers.PointCloudStretchRenderer")],d),t.a=d},VPx4:function(e,t,r){"use strict";r.r(t);var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=(r("6S2I"),r("zqDF"),r("TDcG")),a=r("WbKI"),o=r("04ZG"),l=r("Cduq"),c=(r("4EHJ"),r("ju1D"),r("9AIY"),r("GFPt")),u=r("N2Uj"),h=r("pqNC"),d=r("pPEy"),p=r("5ljs"),f=r("5pQd"),b=r("uRH/"),m=r("mXvl"),y=r("DbUH"),g=r("WmKv");let O=class extends(Object(m.a)(Object(g.a)(Object(b.a)(Object(y.a)(Object(p.a)(Object(d.a)(Object(f.a)(h.a)))))))){constructor(e){super(e),this._visibilityHandles={},this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._visibilityWatcher=this._visibilityWatcher.bind(this)}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)}_writeLayers(e,t,r,n){const s=[];if(!e)return s;e.forEach(e=>{const t=Object(u.a)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);Object(i.k)(t)&&t.layerType&&s.push(t)}),t.layers=s}set portalItem(e){this._set("portalItem",e)}set visibilityMode(e){const t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),Promise.resolve(this)}loadAll(){return Object(c.a)(this,e=>{e(this.layers)})}layerAdded(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)}layerRemoved(e){const t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach(t=>{t!==e&&(t.visible=!1)})}_enforceVisibility(e,t){if(!Object(s.a)(this).initialized)return;const r=this.layers;let n=r.find(e=>e.visible);switch(e){case"exclusive":r.length&&!n&&(n=r.getItemAt(0),n.visible=!0),this._turnOffOtherLayers(n);break;case"inherited":r.forEach(e=>{e.visible=t})}}_visibleWatcher(e){"inherited"===this.visibilityMode&&this.layers.forEach(t=>{t.visible=e})}_visibilityWatcher(e,t,r,n){const i=n;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(i):this._isAnyLayerVisible()||(i.visible=!0);break;case"inherited":i.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(e=>e.visible)}};Object(n.a)([Object(a.b)()],O.prototype,"fullExtent",void 0),Object(n.a)([Object(a.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],O.prototype,"layers",void 0),Object(n.a)([Object(l.a)("layers")],O.prototype,"_writeLayers",null),Object(n.a)([Object(a.b)({type:["GroupLayer"]})],O.prototype,"operationalLayerType",void 0),Object(n.a)([Object(a.b)({json:{origins:{"web-document":{read:!1,write:!1}}}})],O.prototype,"portalItem",null),Object(n.a)([Object(a.b)()],O.prototype,"spatialReference",void 0),Object(n.a)([Object(a.b)({json:{read:!1},readOnly:!0,value:"group"})],O.prototype,"type",void 0),Object(n.a)([Object(a.b)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],O.prototype,"visibilityMode",null),O=Object(n.a)([Object(o.a)("esri.layers.GroupLayer")],O),t.default=O},Wf2p:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("5rU3"),i=r("kq/K"),s=r("Q+DB");class a extends i.a{constructor(e){super({...e,constraint:new s.b(e.coordinateHelper,e.edgeStart,e.edgeEnd)})}get hints(){return[new n.a(1,this.constraint.start,this.constraint.end)]}}var o=r("tjz2");class l extends i.a{constructor(e){super({...e,constraint:new s.d(e.coordinateHelper,e.targetPoint)})}get hints(){return[new o.a(this.targetPoint)]}}function c(e,t){switch(e.type){case"edge":return new a({coordinateHelper:t,edgeStart:t.fromPoint(e.start),edgeEnd:t.fromPoint(e.end),targetPoint:t.fromPoint(e.target),objectId:e.objectId});case"vertex":return new l({coordinateHelper:t,targetPoint:t.fromPoint(e.target),objectId:e.objectId})}}},XBzj:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u});var n=r("Cy1f"),i=r("5DEt"),s=r("aAs6"),a=r("9pTf"),o=r("gYg2"),l=r("8JEK");class c{constructor(e=Object(n.e)(),t=Object(n.e)()){this.startRenderSpace=e,this.endRenderSpace=t,this.type="euclidean"}eval(e,t,r){return Object(i.h)(t,this.startRenderSpace,this.endRenderSpace,e),r&&(Object(i.i)(r,this.endRenderSpace,this.startRenderSpace),Object(i.q)(r,r)),t}createRenderGeometry(e,t){const r=[],n=[],s=(t,s)=>{const a=d;Object(i.i)(a,t,e),r.push([a[0],a[1],a[2]]),n.push([s[0],s[1],s[2]])},a=t.worldUpAtPosition(this.eval(.5,h),l.d.get());return s(this.startRenderSpace,a),s(this.endRenderSpace,a),{points:r,normals:n}}}class u{constructor(e,t,r){this.startRenderSpace=e,this.endRenderSpace=t,this.renderSpatialReference=r,this.type="geodesic",this._start=Object(n.e)(),this._end=Object(n.e)(),this._pcpf=Object(a.g)(r),this._project=Object(o.b)(r,this._pcpf),this._projectIn(e,this._start),this._projectIn(t,this._end)}_projectIn(e,t){this._project?Object(o.r)(e,this.renderSpatialReference,t,this._pcpf):Object(i.j)(t,e)}eval(e,t,r){if(this._project)if(r){const n=d;Object(s.i)(this._start,this._end,e,t,n),Object(i.e)(p,t,n),Object(o.r)(t,this._pcpf,t,this.renderSpatialReference),Object(o.r)(p,this._pcpf,p,this.renderSpatialReference),Object(i.i)(r,p,t),Object(i.q)(r,r)}else Object(s.h)(this._start,this._end,e,t),Object(o.r)(t,this._pcpf,t,this.renderSpatialReference);else Object(i.h)(t,this._start,this._end,e),r&&(Object(i.i)(r,this._end,this._start),Object(i.q)(r,r));return t}createRenderGeometry(e,t){const r=[],n=[],s=(t,s)=>{const a=p;Object(i.i)(a,t,e),r.push([a[0],a[1],a[2]]),n.push([s[0],s[1],s[2]])};for(let i=0;i<128;++i){const e=h,r=d;this.eval(i/127,e),t.worldUpAtPosition(e,r),s(e,r)}return{points:r,normals:n}}}const h=Object(n.e)(),d=Object(n.e)(),p=Object(n.e)()},XJLX:function(e,t,r){"use strict";r.r(t),r.d(t,"fromItem",function(){return c}),r.d(t,"selectLayerClassPath",function(){return u});var n=r("srIe"),i=r("zlDU"),s=r("Lqtk"),a=r("p+Gi"),o=r("Dfpg"),l=r("oLSx");function c(e){return!e.portalItem||e.portalItem instanceof a.default||(e={...e,portalItem:new a.default(e.portalItem)}),function(e){return e.load().then(u).then(h)}(e.portalItem).then(t=>{const r={portalItem:e.portalItem,...t.properties};return Promise.resolve(new(0,t.constructor)(r))})}function u(e){switch(e.type){case"Map Service":return function(e){return function(e){return m(e.url).then(e=>e.tileInfo)}(e).then(e=>e?{className:"TileLayer"}:{className:"MapImageLayer"})}(e);case"Feature Service":return function(e){return d(e).then(e=>{if("object"==typeof e){const t={};return null!=e.id&&(t.layerId=e.id),{className:"FeatureLayer",properties:t}}return{className:"GroupLayer"}})}(e);case"Feature Collection":return async function(e){return await e.load(),Object(o.a)(e,"Map Notes")?{className:"MapNotesLayer"}:Object(o.a)(e,"Route Layer")?{className:"RouteLayer"}:1===b(await e.fetchData())?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Scene Service":return function(e){return d(e).then(t=>{if("object"==typeof t){const r={};let n;if(null!=t.id?(r.layerId=t.id,n=`${e.url}/layers/${t.id}`):n=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0){const t={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const r of Object.keys(t))if(-1!==e.typeKeywords.indexOf(r))return{className:t[r]}}return m(n).then(e=>{let t="SceneLayer";const n={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&n[e.layerType]&&(t=n[e.layerType]),{className:t,properties:r}})}return{className:"GroupLayer"}})}(e);case"Image Service":return async function(e){var t,r,n;await e.load();const i=null!=(t=null==(r=e.typeKeywords)?void 0:r.map(e=>e.toLowerCase()))?t:[];if(i.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(i.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};const s=await e.fetchData(),a=null==s?void 0:s.layerType;return"ArcGISTiledImageServiceLayer"===a?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===a?{className:"ImageryLayer"}:"map"===(null==(n=(await m(e.url)).cacheType)?void 0:n.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new i.a("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function h(e){return(0,l.a[e.className])().then(t=>({constructor:t,properties:e.properties}))}function d(e){return!e.url||e.url.match(/\/\d+$/)?Promise.resolve({}):e.load().then(()=>e.fetchData()).then(t=>b(t)>0?p(t):m(e.url).then(p))}function p(e){return 1===b(e)&&{id:Object(n.q)(f(e))}}function f(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;return r&&r.length?r[0].id:null}function b(e){var t,r,n,i;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(i=e.tables)?void 0:i.length)?n:0)}function m(e){return Object(s.default)(e,{responseType:"json",query:{f:"json"}}).then(e=>e.data)}},XTTP:function(e,t,r){"use strict";r.d(t,"a",function(){return y}),r.d(t,"b",function(){return h}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return p});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("RI0u"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let l=class extends o.a{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};Object(n.a)([Object(i.b)({type:Number})],l.prototype,"nodesPerPage",void 0),Object(n.a)([Object(i.b)({type:Number})],l.prototype,"rootIndex",void 0),Object(n.a)([Object(i.b)({type:String})],l.prototype,"lodSelectionMetricType",void 0),l=Object(n.a)([Object(a.a)("esri.layer.support.I3SNodePageDefinition")],l);let c=class extends o.a{constructor(){super(...arguments),this.factor=1}};Object(n.a)([Object(i.b)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],c.prototype,"id",void 0),Object(n.a)([Object(i.b)({type:Number})],c.prototype,"factor",void 0),c=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialTexture")],c);let u=class extends o.a{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};Object(n.a)([Object(i.b)({type:[Number]})],u.prototype,"baseColorFactor",void 0),Object(n.a)([Object(i.b)({type:c})],u.prototype,"baseColorTexture",void 0),Object(n.a)([Object(i.b)({type:c})],u.prototype,"metallicRoughnessTexture",void 0),Object(n.a)([Object(i.b)({type:Number})],u.prototype,"metallicFactor",void 0),Object(n.a)([Object(i.b)({type:Number})],u.prototype,"roughnessFactor",void 0),u=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],u);let h=class extends o.a{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};Object(n.a)([Object(s.a)({opaque:"opaque",mask:"mask",blend:"blend"})],h.prototype,"alphaMode",void 0),Object(n.a)([Object(i.b)({type:Number})],h.prototype,"alphaCutoff",void 0),Object(n.a)([Object(i.b)({type:Boolean})],h.prototype,"doubleSided",void 0),Object(n.a)([Object(s.a)({none:"none",back:"back",front:"front"})],h.prototype,"cullFace",void 0),Object(n.a)([Object(i.b)({type:c})],h.prototype,"normalTexture",void 0),Object(n.a)([Object(i.b)({type:c})],h.prototype,"occlusionTexture",void 0),Object(n.a)([Object(i.b)({type:c})],h.prototype,"emissiveTexture",void 0),Object(n.a)([Object(i.b)({type:[Number]})],h.prototype,"emissiveFactor",void 0),Object(n.a)([Object(i.b)({type:u})],h.prototype,"pbrMetallicRoughness",void 0),h=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialDefinition")],h);let d=class extends o.a{};Object(n.a)([Object(i.b)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],d.prototype,"name",void 0),Object(n.a)([Object(s.a)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",basis:"basis"})],d.prototype,"format",void 0),d=Object(n.a)([Object(a.a)("esri.layer.support.I3STextureFormat")],d);let p=class extends o.a{constructor(){super(...arguments),this.atlas=!1}};Object(n.a)([Object(i.b)({type:[d]})],p.prototype,"formats",void 0),Object(n.a)([Object(i.b)({type:Boolean})],p.prototype,"atlas",void 0),p=Object(n.a)([Object(a.a)("esri.layer.support.I3STextureSetDefinition")],p);let f=class extends o.a{};Object(n.a)([Object(s.a)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],f.prototype,"type",void 0),Object(n.a)([Object(i.b)({type:Number})],f.prototype,"component",void 0),f=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryAttribute")],f);let b=class extends o.a{};Object(n.a)([Object(s.a)({draco:"draco"})],b.prototype,"encoding",void 0),Object(n.a)([Object(i.b)({type:[String]})],b.prototype,"attributes",void 0),b=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryCompressedAttributes")],b);let m=class extends o.a{constructor(){super(...arguments),this.offset=0}};Object(n.a)([Object(i.b)({type:Number})],m.prototype,"offset",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"position",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"normal",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"uv0",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"color",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"uvRegion",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"featureId",void 0),Object(n.a)([Object(i.b)({type:f})],m.prototype,"faceRange",void 0),Object(n.a)([Object(i.b)({type:b})],m.prototype,"compressedAttributes",void 0),m=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryBuffer")],m);let y=class extends o.a{};Object(n.a)([Object(s.a)({triangle:"triangle"})],y.prototype,"topology",void 0),Object(n.a)([Object(i.b)()],y.prototype,"geometryBuffers",void 0),y=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryDefinition")],y)},ZKYY:function(e,t,r){"use strict";r.d(t,"a",function(){return v}),r.d(t,"b",function(){return x}),r.d(t,"c",function(){return I}),r.d(t,"d",function(){return w}),r.d(t,"e",function(){return S});var n=r("nR38"),i=r("srIe"),s=r("zlDU"),a=r("Lqtk"),o=r("u3Ia"),l=r("pO5D"),c=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),u=r("r88o"),h=r("04ZG"),d=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y")),p=r("jWBI"),f=r("8prj"),b=r("54nt"),m=r("eKLr");let y=class extends d.a{constructor(e){super(e),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};Object(l.a)([Object(c.b)({type:m.a,json:{write:!0}})],y.prototype,"directions",void 0),Object(l.a)([Object(c.b)({type:p.a,json:{write:!0}})],y.prototype,"route",void 0),Object(l.a)([Object(c.b)({type:String,json:{write:!0}})],y.prototype,"routeName",void 0),Object(l.a)([Object(c.b)({type:[p.a],json:{write:!0}})],y.prototype,"stops",void 0),y=Object(l.a)([Object(h.a)("esri.tasks.support.RouteResult")],y);var g=y;function O(e){return e&&f.default.fromJSON(e).features.map(e=>e)}let j=class extends d.a{constructor(e){super(e),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return O(t.barriers||t.pointBarriers)}readPolylineBarriers(e){return O(e)}readPolygonBarriers(e){return O(e)}};Object(l.a)([Object(c.b)({aliasOf:"pointBarriers"})],j.prototype,"barriers",void 0),Object(l.a)([Object(c.b)({type:[b.a]})],j.prototype,"messages",void 0),Object(l.a)([Object(c.b)({type:[p.a]})],j.prototype,"pointBarriers",void 0),Object(l.a)([Object(u.a)("pointBarriers",["barriers","pointBarriers"])],j.prototype,"readPointBarriers",null),Object(l.a)([Object(c.b)({type:[p.a]})],j.prototype,"polylineBarriers",void 0),Object(l.a)([Object(u.a)("polylineBarriers")],j.prototype,"readPolylineBarriers",null),Object(l.a)([Object(c.b)({type:[p.a]})],j.prototype,"polygonBarriers",void 0),Object(l.a)([Object(u.a)("polygonBarriers")],j.prototype,"readPolygonBarriers",null),Object(l.a)([Object(c.b)({type:[g]})],j.prototype,"routeResults",void 0),j=Object(l.a)([Object(h.a)("esri.tasks.support.RouteResultsContainer")],j);var _=j;function v(e,t,r,n){n[r]=[t.length,t.length+e.length],e.forEach(e=>{t.push(e.geometry)})}function x(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function w(e){const t=[],r=[],{directions:n=[],routes:{features:i=[],spatialReference:s=null}={},stops:{features:a=[],spatialReference:o=null}={},barriers:l,polygonBarriers:c,polylineBarriers:u,messages:h}=e.data,d="esri.tasks.RouteTask.NULL_ROUTE_NAME";let p,f,b=!0;const m=i&&s||a&&o||l&&l.spatialReference||c&&c.spatialReference||u&&u.spatialReference;n.forEach(e=>{t.push(p=e.routeName),r[p]={directions:e}}),i.forEach(e=>{-1===t.indexOf(p=e.attributes.Name)&&(t.push(p),r[p]={}),e.geometry&&(e.geometry.spatialReference=m),r[p].route=e}),a.forEach(e=>{f=e.attributes,-1===t.indexOf(p=f.RouteName||d)&&(t.push(p),r[p]={}),p!==d&&(b=!1),e.geometry&&(e.geometry.spatialReference=m),null==r[p].stops&&(r[p].stops=[]),r[p].stops.push(e)}),a.length>0&&!0===b&&(r[t[0]].stops=r[d].stops,delete r[d],t.splice(t.indexOf(d),1));const y=t.map(e=>(r[e].routeName=e===d?null:e,r[e]));return _.fromJSON({routeResults:y,pointBarriers:l,polygonBarriers:c,polylineBarriers:u,messages:h})}function S(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)if(Object(i.k)(e)&&e.hasZ)return!0}return!1}async function I(e){if(!e)throw new s.a("network-service:missing-url","Url to Network service is missing");const{data:t}=await Object(a.default)(e,{query:{f:"json"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let n=0;n<t.supportedTravelModes.length;n++)t.supportedTravelModes[n].id||(t.supportedTravelModes[n].id=t.supportedTravelModes[n].itemId);const r=t.currentVersion>=10.4?async function(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await Object(a.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new s.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:t})}}(e):async function(e){const{data:t}=await Object(a.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json"}});if(!t||!t.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=t.owningSystemUrl;const{data:r}=await Object(a.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}}),i=Object(n.b)("helperServices.routingUtilities.url",r);if(!i)return{supportedTravelModes:[],defaultTravelMode:null};const s=Object(o.c)(e),l=/\/solve$/.test(s.path)?"Route":/\/solveClosestFacility$/.test(s.path)?"ClosestFacility":"ServiceAreas",c=await Object(a.default)(i+("/"===i[i.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:l}}),u=[];let h=null;if(c&&c.data&&c.data.results&&c.data.results.length){const e=c.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);u.push(t)}}else"defaultTravelMode"===t.paramName&&(h=t.value)}return{supportedTravelModes:u,defaultTravelMode:h}}(e),{defaultTravelMode:i,supportedTravelModes:l}=await r;return t.defaultTravelMode=i,t.supportedTravelModes=l,t}},ZRfE:function(e,t,r){"use strict";var n=r("srIe"),i=r("6S2I"),s=r("zlDU"),a=r("zm0L"),o=r("kYAx"),l=r("ZlUD"),c=r("QmHG"),u=r("BMSW"),h=r("k5I3"),d=r("gVKr"),p=r("2X7Z");const f={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new h.a(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>(e.centroid||(e.centroid=Object(p.a)(new d.a,e.geometry,t.hasZ,t.hasM)),e.centroid)};t.a=class{constructor(e){this.geometryInfo=e,this._boundsStore=new u.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new a.a,this.featureAdapter=f}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=Object(o.g)(o.a);return this._featuresById.forEach(t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))}),e}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t(Object(c.k)(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))}),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void i.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.a("featurestore:invalid-feature","feature id is missing",{feature:e}));const r=this._featuresById.get(t);let a;if(this._markedIds.add(t),r?(e.displayId=r.displayId,a=this._boundsStore.get(t),this._boundsStore.delete(t)):Object(n.k)(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);a=Object(l.r)(a||Object(o.g)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,a),this._featuresById.set(t,e)}_remove(e){return Object(n.k)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}},bfJE:function(e,t,r){"use strict";r("wSAH");var n=r("srIe"),i=r("GJyJ"),s=r("xRQN");class a{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new Map;this._current.length<6;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(e,t){const r=++this._current[e];this._max[e]=Math.max(r,this._max[e])}decrement(e,t){--this._current[e]}get max(){return this._max}get current(){return this._current}printResourceCount(){if(console.log("Live objects:"),console.log(`Textures: ${this._current[0]}`),console.log(`Buffers: ${this._current[1]}`),console.log(`VAOs: ${this._current[2]}`),console.log(`Programs: ${this._current[3]}`),console.log(`Framebuffers: ${this._current[4]}`),console.log(`Renderbuffers: ${this._current[5]}`),this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const e=new Map;this._allocations.forEach(t=>{var r;e.set(t,(null!=(r=e.get(t))?r:0)+1)}),e.forEach((e,t)=>console.log(e," : ",t))}}}var o=r("GprA");function l(e,t,r,n,i){if(n&&Object(s.a)(e))return!0;if(t[r])return!1;for(const s of i)if(e.getExtension(s))return!0;return!1}function c(e,t,r,n){return t?n!==t&&e.bindBuffer(r,t.glName):e.bindBuffer(r,null),t}t.a=class{constructor(e,t){this.gl=null,this.instanceCounter=new a,this._blendEnabled=!1,this._blendColorState={r:0,g:0,b:0,a:0},this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0},this._blendEquationState={mode:32774,modeAlpha:32774},this._colorMaskState={r:!0,g:!0,b:!0,a:!0},this._polygonCullingEnabled=!1,this._cullFace=1029,this._frontFace=2305,this._scissorTestEnabled=!1,this._scissorRect={x:0,y:0,width:0,height:0},this._depthTestEnabled=!1,this._depthFunction=513,this._clearDepth=1,this._depthWriteEnabled=!0,this._depthRange={zNear:0,zFar:1},this._viewport=null,this._stencilTestEnabled=!1,this._polygonOffsetFillEnabled=!1,this._polygonOffset=[0,0],this._stencilFunction={face:1032,func:519,ref:0,mask:1},this._clearStencil=0,this._stencilWriteMask=1,this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680},this._clearColor={r:0,g:0,b:0,a:0},this._activeShaderProgram=null,this._activeVertexBuffer=null,this._activeIndexBuffer=null,this._activeFramebuffer=null,this._activeRenderbuffer=null,this._activeTextureUnit=0,this._textureUnitMap=[],this._numOfDrawCalls=0,this._numOfTriangles=0,this.contextVersion=Object(s.a)(e)?"webgl2":"webgl",this.gl=e,e instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint"),this._capabilities=function(e,t){const r=t&&t.disabledExtensions||{},n=t&&t.debugWebGLExtensions||{};let i,a,c,u,h,d,p,f,b,m,y,g=null,O=null,j=null,_=null;return{get drawBuffers(){return y||(y=function(e,t){if(t.disjointTimerQuery)return null;if(Object(s.a)(e))return{drawBuffers:e.drawBuffers.bind(e),MAX_DRAW_BUFFERS:e.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:e.MAX_COLOR_ATTACHMENTS};if(t.drawBuffers)return null;const r=e.getExtension("WEBGL_draw_buffers");return r?{drawBuffers:r.drawBuffersWEBGL.bind(r),MAX_DRAW_BUFFERS:r.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:r.MAX_COLOR_ATTACHMENTS_WEBGL}:null}(e,r)),y},get instancing(){return i||(i=function(e){if(Object(s.a)(e))return{drawArraysInstanced:e.drawArraysInstanced.bind(e),drawElementsInstanced:e.drawElementsInstanced.bind(e),vertexAttribDivisor:e.vertexAttribDivisor.bind(e)};const t=e.getExtension("ANGLE_instanced_arrays");return t?{drawArraysInstanced:t.drawArraysInstancedANGLE.bind(t),drawElementsInstanced:t.drawElementsInstancedANGLE.bind(t),vertexAttribDivisor:t.vertexAttribDivisorANGLE.bind(t)}:null}(e)),i},get vao(){return a||(a=function(e,t){if(Object(s.a)(e))return{createVertexArray:e.createVertexArray.bind(e),deleteVertexArray:e.deleteVertexArray.bind(e),bindVertexArray:e.bindVertexArray.bind(e)};if(t.vao)return null;const r=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object");return r?{createVertexArray:r.createVertexArrayOES.bind(r),deleteVertexArray:r.deleteVertexArrayOES.bind(r),bindVertexArray:r.bindVertexArrayOES.bind(r)}:null}(e,r)),a},get compressedTextureETC(){return c||(c=function(e,t){if(t.compressedTextureETC)return null;const r=e.getExtension("WEBGL_compressed_texture_etc");return r?{COMPRESSED_R11_EAC:r.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:r.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:r.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:r.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:r.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:r.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}(e,r)),c},get compressedTextureS3TC(){return u||(u=function(e,t){if(t.compressedTextureS3TC)return null;const r=e.getExtension("WEBGL_compressed_texture_s3tc");return r?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}(e,r)),u},get textureFilterAnisotropic(){return h||(h=function(e,t){if(t.textureFilterAnisotropic)return null;const r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return r?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null}(e,r)),h},get disjointTimerQuery(){return d||(d=Object(o.a)(e,r)),d},get textureFloat(){return p||(p=function(e,t){if(Object(s.a)(e))return{textureFloat:!0,textureFloatLinear:!t.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!t.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:e.HALF_FLOAT};if(e instanceof WebGLRenderingContext){const r=!t.textureHalfFloat&&e.getExtension("OES_texture_half_float");return{textureFloat:!t.textureFloat&&!!e.getExtension("OES_texture_float"),textureFloatLinear:!t.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!!r,textureHalfFloatLinear:!t.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:r?r.HALF_FLOAT_OES:void 0}}return null}(e,r)),p},get colorBufferFloat(){return f||(f=function(e,t){if(Object(s.a)(e)){const r=!t.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),n=!t.colorBufferFloat&&e.getExtension("EXT_color_buffer_float"),i=!t.colorBufferFloat&&e.getExtension("EXT_float_blend");return r||n||i?{textureFloat:!!n,textureHalfFloat:!!r,R16F:e.R16F,RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F,RGB16F:e.RGB16F}:null}if(e instanceof WebGLRenderingContext){const r=!t.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),n=!t.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float"),i=!t.colorBufferFloat&&e.getExtension("EXT_float_blend");return r||n||i?{textureFloat:!!n,textureHalfFloat:!!r,RGBA16F:r?r.RGBA16F_EXT:void 0,RGB16F:r?r.RGB16F_EXT:void 0,RGBA32F:n?n.RGBA32F_EXT:void 0}:null}return null}(e,r)),f},get blendMinMax(){return b||(b=function(e,t){if(Object(s.a)(e))return{MIN:e.MIN,MAX:e.MAX};if(t.blendMinMax)return null;{const t=e.getExtension("EXT_blend_minmax");return t?{MIN:t.MIN_EXT,MAX:t.MAX_EXT}:null}}(e,r)),b},get depthTexture(){return null===g&&(g=l(e,r,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),g},get standardDerivatives(){return null===O&&(O=l(e,r,"standardDerivatives",!0,["OES_standard_derivatives"])),O},get shaderTextureLOD(){return null===j&&(j=l(e,r,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),j},get fragDepth(){return null===_&&(_=l(e,r,"fragDepth",!0,["EXT_frag_depth"])),_},get loseContext(){return m||(m=function(e,t){const r=t.loseContext&&e.getExtension("WEBGL_lose_context");return r?{loseRenderingContext:()=>r.loseContext()}:null}(e,n)),m},enable(e){return this[e]}}}(e,t);const r=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:r[0],y:r[1],width:r[2],height:r[3]},this._stateTracker=new i.a({setBlending:e=>{if(e){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(e.opRgb,e.opAlpha),this.setBlendFunctionSeparate(e.srcRgb,e.dstRgb,e.srcAlpha,e.dstAlpha);const t=e.color;this.setBlendColor(t.r,t.g,t.b,t.a)}else this.setBlendingEnabled(!1)},setCulling:e=>{e?(this.setFaceCullingEnabled(!0),this.setCullFace(e.face),this.setFrontFace(e.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:e=>{e?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(e.factor,e.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:e=>{e?(this.setDepthTestEnabled(!0),this.setDepthFunction(e.func)):this.setDepthTestEnabled(!1)},setStencilTest:e=>{if(e){this.setStencilTestEnabled(!0);const t=e.function;this.setStencilFunction(t.func,t.ref,t.mask);const r=e.operation;this.setStencilOp(r.fail,r.zFail,r.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:e=>{e?(this.setDepthWriteEnabled(!0),this.setDepthRange(e.zNear,e.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:e=>{e?this.setColorMask(e.r,e.g,e.b,e.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:e=>{this.setStencilWriteMask(e?e.mask:0)}}),this.enforceState()}isWebGL2Context(){return"webgl2"===this.contextVersion}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){if(!this._parameters){const e=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:e?this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}dispose(){this.bindVAO(null),this.unbindBuffer(34962),this.unbindBuffer(34963),this._textureUnitMap=[],this.gl=null,this._capabilities=null}setPipelineState(e){this._stateTracker.setPipeline(e)}setBlendingEnabled(e){this._blendEnabled!==e&&(!0===e?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=e,this._stateTracker.invalidateBlending())}setBlendColor(e,t,r,n){e===this._blendColorState.r&&t===this._blendColorState.g&&r===this._blendColorState.b&&n===this._blendColorState.a||(this.gl.blendColor(e,t,r,n),this._blendColorState.r=e,this._blendColorState.g=t,this._blendColorState.b=r,this._blendColorState.a=n,this._stateTracker.invalidateBlending())}setBlendFunction(e,t){e===this._blendFunctionState.srcRGB&&t===this._blendFunctionState.dstRGB||(this.gl.blendFunc(e,t),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=t,this._blendFunctionState.dstAlpha=t,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(e,t,r,n){this._blendFunctionState.srcRGB===e&&this._blendFunctionState.srcAlpha===r&&this._blendFunctionState.dstRGB===t&&this._blendFunctionState.dstAlpha===n||(this.gl.blendFuncSeparate(e,t,r,n),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=r,this._blendFunctionState.dstRGB=t,this._blendFunctionState.dstAlpha=n,this._stateTracker.invalidateBlending())}setBlendEquation(e){this._blendEquationState.mode!==e&&(this.gl.blendEquation(e),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(e,t){this._blendEquationState.mode===e&&this._blendEquationState.modeAlpha===t||(this.gl.blendEquationSeparate(e,t),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=t,this._stateTracker.invalidateBlending())}setColorMask(e,t,r,n){this._colorMaskState.r===e&&this._colorMaskState.g===t&&this._colorMaskState.b===r&&this._colorMaskState.a===n||(this.gl.colorMask(e,t,r,n),this._colorMaskState.r=e,this._colorMaskState.g=t,this._colorMaskState.b=r,this._colorMaskState.a=n,this._stateTracker.invalidateColorWrite())}setClearColor(e,t,r,n){this._clearColor.r===e&&this._clearColor.g===t&&this._clearColor.b===r&&this._clearColor.a===n||(this.gl.clearColor(e,t,r,n),this._clearColor.r=e,this._clearColor.g=t,this._clearColor.b=r,this._clearColor.a=n)}setFaceCullingEnabled(e){this._polygonCullingEnabled!==e&&(!0===e?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=e,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(e){this._polygonOffsetFillEnabled!==e&&(!0===e?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=e,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(e,t){this._polygonOffset[0]===e&&this._polygonOffset[1]===t||(this._polygonOffset[0]=e,this._polygonOffset[1]=t,this.gl.polygonOffset(e,t),this._stateTracker.invalidatePolygonOffset())}setCullFace(e){this._cullFace!==e&&(this.gl.cullFace(e),this._cullFace=e,this._stateTracker.invalidateCulling())}setFrontFace(e){this._frontFace!==e&&(this.gl.frontFace(e),this._frontFace=e,this._stateTracker.invalidateCulling())}setScissorTestEnabled(e){this._scissorTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=e)}setScissorRect(e,t,r,n){this._scissorRect.x===e&&this._scissorRect.y===t&&this._scissorRect.width===r&&this._scissorRect.height===n||(this.gl.scissor(e,t,r,n),this._scissorRect.x=e,this._scissorRect.y=t,this._scissorRect.width=r,this._scissorRect.height=n)}setDepthTestEnabled(e){this._depthTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=e,this._stateTracker.invalidateDepthTest())}setClearDepth(e){this._clearDepth!==e&&(this.gl.clearDepth(e),this._clearDepth=e)}setDepthFunction(e){this._depthFunction!==e&&(this.gl.depthFunc(e),this._depthFunction=e,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(e){this._depthWriteEnabled!==e&&(this.gl.depthMask(e),this._depthWriteEnabled=e,this._stateTracker.invalidateDepthWrite())}setDepthRange(e,t){this._depthRange.zNear===e&&this._depthRange.zFar===t||(this.gl.depthRange(e,t),this._depthRange.zNear=e,this._depthRange.zFar=t,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(e){this._stencilTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=e,this._stateTracker.invalidateStencilTest())}setClearStencil(e){e!==this._clearStencil&&(this.gl.clearStencil(e),this._clearStencil=e)}setStencilFunction(e,t,r){this._stencilFunction.func===e&&this._stencilFunction.ref===t&&this._stencilFunction.mask===r||(this.gl.stencilFunc(e,t,r),this._stencilFunction.face=1032,this._stencilFunction.func=e,this._stencilFunction.ref=t,this._stencilFunction.mask=r,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(e,t,r,n){this._stencilFunction.face===e&&this._stencilFunction.func===t&&this._stencilFunction.ref===r&&this._stencilFunction.mask===n||(this.gl.stencilFuncSeparate(e,t,r,n),this._stencilFunction.face=e,this._stencilFunction.func=t,this._stencilFunction.ref=r,this._stencilFunction.mask=n,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(e){this._stencilWriteMask!==e&&(this.gl.stencilMask(e),this._stencilWriteMask=e,this._stateTracker.invalidateStencilWrite())}setStencilOp(e,t,r){this._stencilOperation.fail===e&&this._stencilOperation.zFail===t&&this._stencilOperation.zPass===r||(this.gl.stencilOp(e,t,r),this._stencilOperation.face=1032,this._stencilOperation.fail=e,this._stencilOperation.zFail=t,this._stencilOperation.zPass=r,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(e,t,r,n){this._stencilOperation.face===e&&this._stencilOperation.fail===t&&this._stencilOperation.zFail===r&&this._stencilOperation.zPass===n||(this.gl.stencilOpSeparate(e,t,r,n),this._stencilOperation.face=e,this._stencilOperation.face=e,this._stencilOperation.fail=t,this._stencilOperation.zFail=r,this._stencilOperation.zPass=n,this._stateTracker.invalidateStencilTest())}setActiveTexture(e){const t=this._activeTextureUnit;return e>=0&&e!==this._activeTextureUnit&&(this.gl.activeTexture(33984+e),this._activeTextureUnit=e),t}clear(e){e&&this.gl.clear(e)}clearSafe(e,t=255){e&&(16384&e&&this.setColorMask(!0,!0,!0,!0),256&e&&this.setDepthWriteEnabled(!0),1024&e&&this.setStencilWriteMask(t),this.gl.clear(e))}drawArrays(e,t,r){this.gl.drawArrays(e,t,r)}drawElements(e,t,r,n){5123!==r?5125===r&&this.gl.drawElements(e,t,r,n):this.gl.drawElements(e,t,r,n)}logIno(){}get capabilities(){return this._capabilities}setViewport(e,t,r,n){const i=this._viewport;i.x===e&&i.y===t&&i.width===r&&i.height===n||(i.x=e,i.y=t,i.width=r,i.height=n,this.gl.viewport(e,t,r,n))}getViewport(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}}bindProgram(e){if(!e)return this.gl.useProgram(null),void(this._activeShaderProgram=null);this._activeShaderProgram!==e&&(e.initialize(),this.gl.useProgram(e.glName),this._activeShaderProgram=e)}bindTexture(e,t){(t>=this.parameters.maxTextureImageUnits||t<0)&&console.error("Input texture unit is out of range of available units!");const r=this._textureUnitMap[t];if(this.setActiveTexture(t),null==e||null==e.glName)return null!=r&&this.gl.bindTexture(r.descriptor.target,null),void(this._textureUnitMap[t]=null);r!==e?(this.gl.bindTexture(e.descriptor.target,e.glName),e.applyChanges(),this._textureUnitMap[t]=e):e.applyChanges()}unbindTextureAllUnits(e){for(let t=0;t<this.parameters.maxTextureImageUnits;t++)this._textureUnitMap[t]===e&&this.bindTexture(null,t)}bindFramebuffer(e){if(Object(n.j)(e))return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null);this._activeFramebuffer!==e&&(e.initializeAndBind(),this._activeFramebuffer=e)}bindBuffer(e){e&&(34962===e.bufferType?this._activeVertexBuffer=c(this.gl,e,e.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=c(this.gl,e,e.bufferType,this._activeIndexBuffer))}bindRenderbuffer(e){const t=this.gl;e||(t.bindRenderbuffer(t.RENDERBUFFER,null),this._activeRenderbuffer=null),this._activeRenderbuffer!==e&&(t.bindRenderbuffer(t.RENDERBUFFER,e.glName),this._activeRenderbuffer=e)}unbindBuffer(e){34962===e?this._activeVertexBuffer=c(this.gl,null,e,this._activeVertexBuffer):this._activeIndexBuffer=c(this.gl,null,e,this._activeIndexBuffer)}bindVAO(e){e?this._activeVertexArrayObject&&this._activeVertexArrayObject===e||(e.bind(),this._activeVertexArrayObject=e):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)}getBoundTexture(e){return this._textureUnitMap[e]}getBoundFramebufferObject(){return this._activeFramebuffer}getBoundVAO(){return this._activeVertexArrayObject}resetState(){this.bindProgram(null),this.bindVAO(null),this.bindFramebuffer(null),this.unbindBuffer(34962),this.unbindBuffer(34963);for(let e=0;e<this.parameters.maxTextureImageUnits;e++)this.bindTexture(null,e);this.setBlendingEnabled(!1),this.setBlendFunction(1,0),this.setBlendEquation(32774),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(1029),this.setFrontFace(2305),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(513),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(519,0,0),this.setStencilOp(7680,7680,7680),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){const e=this.gl,t=this.capabilities.vao;t&&t.bindVertexArray(null);for(let r=0;r<this.parameters.maxVertexAttributes;r++)e.disableVertexAttribArray(r);if(this._activeVertexBuffer?e.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):e.bindBuffer(34962,null),this._activeIndexBuffer?e.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):e.bindBuffer(34963,null),t&&this._activeVertexArrayObject){const e=this._activeVertexArrayObject;this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(e)}e.bindFramebuffer(e.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null),e.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null),e.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a),e.bindRenderbuffer(e.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null),!0===this._blendEnabled?e.enable(this.gl.BLEND):e.disable(this.gl.BLEND),e.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha),e.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha),e.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),e.clearDepth(this._clearDepth),e.clearStencil(this._clearStencil),e.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a),e.cullFace(this._cullFace),e.depthFunc(this._depthFunction),e.depthRange(this._depthRange.zNear,this._depthRange.zFar),!0===this._depthTestEnabled?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),e.depthMask(this._depthWriteEnabled),e.frontFace(this._frontFace),e.lineWidth(1),!0===this._polygonCullingEnabled?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),e.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]),!0===this._polygonOffsetFillEnabled?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL),e.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height),!0===this._scissorTestEnabled?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),e.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask),e.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass),!0===this._stencilTestEnabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),e.stencilMask(this._stencilWriteMask);for(let r=0;r<this.parameters.maxTextureImageUnits;r++){e.activeTexture(33984+r),e.bindTexture(3553,null);const t=this._textureUnitMap[r];t&&e.bindTexture(t.descriptor.target,t.glName)}e.activeTexture(33984+this._activeTextureUnit),e.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)}}},bjZF:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("srIe"),i=r("zlDU"),s=r("Lqtk");async function a(e,t,r,a,o){let l=null;if(Object(n.k)(r)){const t=`${e}/nodepages/`,i=t+Math.floor(r.rootIndex/r.nodesPerPage);try{return{type:"page",rootPage:(await Object(s.default)(i,{query:{f:"json"},responseType:"json",signal:o})).data,rootIndex:r.rootIndex,pageSize:r.nodesPerPage,lodMetric:r.lodSelectionMetricType,urlPrefix:t}}catch(h){Object(n.k)(a)&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",i,h),l=h}}if(!t)return null;const c=`${e}/nodes/`,u=c+(t&&t.split("/").pop());try{return{type:"node",rootNode:(await Object(s.default)(u,{query:{f:"json"},responseType:"json",signal:o})).data,urlPrefix:c}}catch(h){throw new i.a("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:h,url:u})}}},cBWO:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return u});var n=r("s7YA"),i=r("IDUf");const s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function a(e){e||(e=Object(i.b)());let t=e in s;if(!t){const r=e.split("-");r.length>1&&r[0]in s&&(e=r[0],t=!0),t||(e="en")}const[r,n,a="#,##0.###"]=s[e];return{decimal:r,group:n,pattern:a}}function o(e,t){const r=a((t={...t}).locale);t.customs=r;const n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){const n=(r=r||{}).customs.group,i=r.customs.decimal,s=t.split(";"),a=s[0];if(-1!==(t=s[e<0?1:0]||"-"+a).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const o=l,c=a.match(o);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(o,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);const n=t.split("."),i="string"==typeof r.places&&r.places.indexOf(",");let s=r.places;i?s=r.places.substring(i+1):s>=0||(s=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const a=String(Math.abs(e)).split("."),o=a[1]||"";if(n[1]||r.places){i&&(r.places=r.places.substring(0,i));const e=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;e>o.length&&(a[1]=o.padEnd(Number(e),"0")),s<o.length&&(a[1]=o.substr(0,Number(s)))}else a[1]&&a.pop();const l=n[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),-1===l.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));let u,h,d=n[0].lastIndexOf(",");if(-1!==d){u=n[0].length-d-1;const e=n[0].substr(0,d);d=e.lastIndexOf(","),-1!==d&&(h=e.length-d-1)}const p=[];for(let f=a[0];f;){const e=f.length-u;p.push(e>0?f.substr(e):f),f=e>0?f.slice(0,e):"",h&&(u=h,h=void 0)}return a[0]=p.reverse().join(r.group||","),a.join(r.decimal||".")}(e,c[0],{decimal:i,group:n,places:r.places,round:r.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=a((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,s=t.decimal;let o=1;if(-1!==r.indexOf("%"))o/=100;else if(-1!==r.indexOf("\u2030"))o/=1e3;else if(-1!==r.indexOf("\xa4"))throw new Error("currency notation not supported");const c=r.split(";");return 1===c.length&&c.push("-"+c[0]),{regexp:d(c,function(t){return(t="(?:"+Object(n.a)(t,".")+")").replace(l,function(t){const r={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:s,exponent:!1},n=t.split(".");let a=e.places;1===n.length&&1!==o&&(n[1]="###"),1===n.length||0===a?r.fractional=!1:(void 0===a&&(a=e.pattern?n[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(r.fractional=!0),!e.places&&a<n[1].length&&(a+=","+n[1].length),r.places=a);const l=n[0].split(",");return l.length>1&&(r.groupSize=l.pop().length,l.length>1&&(r.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=h(e),r=d(e.fractional,function(t){let r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r},!0);let n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+d(e.exponent,function(t){return t?"([eE]"+h({signed:e.eSigned})+")":""})}(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:o}}function u(e,t){const r=c(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return i=i.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(i)*r.factor}function h(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",d(e.signed,function(e){return e?"[-+]":""},!0)+d(e.separator,function(t){if(!t)return"(?:\\d+)";" "===(t=Object(n.a)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const d=function(e,t,r){if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return p(n.join("|"),r)},p=function(e,t){return"("+(t?"?:":"")+e+")"}},"dhe/":function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return s}),r.d(t,"f",function(){return a});var n=r("aql9");function i(e,t,r,i=2,s="abbr"){return Object(n.b)(e,t.toUnit(r).value,r,i,s)}function s(e,t,r=2,i="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(n.h)(e,t.value,t.unit,r,i)}function a(e,t,r=2,i="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(n.i)(e,t.value,t.unit,r,i)}function o(e,t,r=2,i="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(n.e)(e,t.value,t.unit,r,i)}function l(e,t,r=2,i="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(n.f)(e,t.value,t.unit,r,i)}function c(e){if("angle"!==e.measure)throw new Error("quantity is not an angle");return Object(n.a)(e.value,e.unit)}},dzHX:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("+opI"),l=r("04ZG"),c=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let u=n=class extends c.a{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"field",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"minValue",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"maxValue",void 0),u=n=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.ColorModulation")],u);var h=u;const d=new o.a({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let p=class extends c.a{};Object(i.a)([Object(a.b)({type:d.apiValues,readOnly:!0,nonNullable:!0,json:{type:d.jsonValues,read:!1,write:d.write}})],p.prototype,"type",void 0),p=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],p);var f,b=p,m=r("RI0u");let y=f=class extends b{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new f({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};Object(i.a)([Object(m.a)({pointCloudFixedSizeAlgorithm:"fixed-size"})],y.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],y.prototype,"size",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],y.prototype,"useRealWorldSymbolSizes",void 0),y=f=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],y);var g,O=y;let j=g=class extends b{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new g({scaleFactor:this.scaleFactor})}};Object(i.a)([Object(m.a)({pointCloudSplatAlgorithm:"splat"})],j.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],j.prototype,"scaleFactor",void 0),j=g=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],j);const _={key:"type",base:b,typeMap:{"fixed-size":O,splat:j}},v=Object(o.b)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let x=class extends c.a{constructor(e){super(e),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:Object(s.a)(this.pointSizeAlgorithm),colorModulation:Object(s.a)(this.colorModulation),pointsPerInch:Object(s.a)(this.pointsPerInch)}}};Object(i.a)([Object(a.b)({type:v.apiValues,readOnly:!0,nonNullable:!0,json:{type:v.jsonValues,read:!1,write:v.write}})],x.prototype,"type",void 0),Object(i.a)([Object(a.b)({types:_,json:{write:!0}})],x.prototype,"pointSizeAlgorithm",void 0),Object(i.a)([Object(a.b)({type:h,json:{write:!0}})],x.prototype,"colorModulation",void 0),Object(i.a)([Object(a.b)({json:{write:!0},nonNullable:!0,type:Number})],x.prototype,"pointsPerInch",void 0),x=Object(i.a)([Object(l.a)("esri.renderers.PointCloudRenderer")],x),(x||(x={})).fieldTransformTypeKebabDict=new o.a({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"}),t.a=x},e4KH:function(e,t,r){"use strict";var n=r("NrhG"),i=r("Du6U"),s=r("eT81"),a=r("QFw1");t.a=class{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[r,n,i]=s.c.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[n,i],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type){const[t,r,n]=s.c.rasterizeSimpleLine(e.style,e.cap);return{size:[r,n],image:new Uint32Array(t.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let n,o,l;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(n=s.a.fromSimpleMarker(e),l=Object(a.c)(n)):"CIMHatchFill"===e.type?(n=s.a.fromCIMHatchFill(e),o=new i.a(n.frame.xmin,-n.frame.ymax,n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin)):e.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type?(n=s.a.fromCIMInsidePolygon(e),o=new i.a(n.frame.xmin,-n.frame.ymax,n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin)):(n=e,l=Object(a.c)(n)),l&&!r){const[e,t,r]=Object(a.a)(l);return e?{size:[t,r],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,u,h,d,p]=s.a.rasterize(this._rasterizationCanvas,n,o,!r);return c?{size:[u,h],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:d,anchorY:p}:null}rasterizeImageResource(e,t,r,i){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const s=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?s.putImageData(r,0,0):(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`),s.drawImage(r,0,0,e,t));const a=s.getImageData(0,0,e,t),o=new Uint8Array(a.data);if(i)for(const n of i)if(n&&n.oldColor&&4===n.oldColor.length&&n.newColor&&4===n.newColor.length){const[e,t,r,i]=n.oldColor,[s,a,l,c]=n.newColor;if(e===s&&t===a&&r===l&&i===c)continue;for(let n=0;n<o.length;n+=4)e===o[n]&&t===o[n+1]&&r===o[n+2]&&i===o[n+3]&&(o[n]=s,o[n+1]=a,o[n+2]=l,o[n+3]=c)}let l;for(let n=0;n<o.length;n+=4)l=o[n+3]/255,o[n]=o[n]*l,o[n+1]=o[n+1]*l,o[n+2]=o[n+2]*l;let c=o,u=e,h=t;const d=512;if(u>=d||h>=d){const r=u/h;r>1?(u=d,h=Math.round(d/r)):(h=d,u=Math.round(d*r)),c=new Uint8Array(4*u*h);const i=new Uint8ClampedArray(c.buffer);Object(n.j)(o,e,t,i,u,h,!1)}return{size:[e,t],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},eKLr:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=(r("6S2I"),r("zqDF"),r("WbKI")),a=r("r88o"),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("WZb1")),c=r("SuVq"),u=r("OvF4"),h=r("UhwK"),d=(r("4GrV"),r("jWBI")),p=r("8prj");let f=class extends p.default{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){(e||[]).forEach(e=>{this._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)});const r=l.a.fromJSON(t.spatialReference);return e.map(e=>{const t=d.a.fromJSON(e);return t.geometry&&!(e.geometry&&e.geometry.spatialReference)&&(Object(i.q)(t.geometry).spatialReference=r),t.strings=e.strings,t.events=(e.events||[]).map(t=>{const r=new d.a({geometry:new c.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r}),t})}get mergedGeometry(){if(!this.features)return null;const e=this.features.map(({geometry:e})=>Object(i.q)(e)),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}get strings(){return this.features.map(({strings:e})=>e)}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,n=0,i=0,s=0;const a=[];let o,l,c,u,h,d,p,f,b=0,m=0,y=0;if(h=e.match(/((\+|\-)[^\+\-\|]+|\|)/g),h||(h=[]),0===parseInt(h[b],32)){b=2;const e=parseInt(h[b],32);b++,d=parseInt(h[b],32),b++,1&e&&(m=h.indexOf("|")+1,p=parseInt(h[m],32),m++),2&e&&(y=h.indexOf("|",m)+1,f=parseInt(h[y],32),y++)}else d=parseInt(h[b],32),b++;for(;b<h.length&&"|"!==h[b];){o=parseInt(h[b],32)+r,b++,r=o,l=parseInt(h[b],32)+n,b++,n=l;const e=[o/d,l/d];m&&(u=parseInt(h[m],32)+i,m++,i=u,e.push(u/p)),y&&(c=parseInt(h[y],32)+s,y++,s=c,e.push(c/f)),a.push(e)}return{paths:[a],hasZ:m>0,hasM:y>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach(e=>{e.paths.forEach(e=>{r=r.concat(e)})});const n=[];let i=[0,0];return r.forEach(e=>{e[0]===i[0]&&e[1]===i[1]||(n.push(e),i=e)}),new h.a({paths:[n]},t)}};Object(n.a)([Object(s.b)({type:u.a,json:{read:{source:"summary.envelope"}}})],f.prototype,"extent",void 0),Object(n.a)([Object(s.b)()],f.prototype,"features",void 0),Object(n.a)([Object(a.a)("features")],f.prototype,"readFeatures",null),Object(n.a)([Object(s.b)()],f.prototype,"geometryType",void 0),Object(n.a)([Object(s.b)({readOnly:!0})],f.prototype,"mergedGeometry",null),Object(n.a)([Object(s.b)()],f.prototype,"routeId",void 0),Object(n.a)([Object(s.b)()],f.prototype,"routeName",void 0),Object(n.a)([Object(s.b)({value:null,readOnly:!0})],f.prototype,"strings",null),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalDriveTime"}}})],f.prototype,"totalDriveTime",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalLength"}}})],f.prototype,"totalLength",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalTime"}}})],f.prototype,"totalTime",void 0),f=Object(n.a)([Object(o.a)("esri.tasks.support.DirectionsFeatureSet")],f),t.a=f},eLqb:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("srIe"),i=r("6S2I"),s=r("xkkJ"),a=r("tQ+6"),o=r("9MzC"),l=r("36Co");const c=i.a.getLogger("esri.core.workers.WorkerHandle");class u{constructor(e,t,r,n={}){this._mainMethod=t,this._listeners=[],this._promise=Object(l.b)(e,{...n,scheduler:r}).then(e=>{if(void 0===this._thread){this._thread=e,this._promise=null,n.hasInitialize&&this.broadcast({},"initialize");for(const e of this._listeners)this._connectListener(e)}else e.close()}),this._promise.catch(t=>c.error(`Failed to initialize ${e} worker: ${t}`))}on(e,t){const r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),Object(s.c)(()=>{r.removed=!0,Object(a.i)(this._listeners,r),this._thread&&Object(n.k)(r.threadHandle)&&r.threadHandle.remove()})}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const n=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:n,signal:r})}return this._promise?this._promise.then(()=>(Object(o.u)(r),this.invokeMethod(e,t,r))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast(e,t)):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then(t=>{e.removed||(e.threadHandle=t)})}}},"fqh+":function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=r("zlDU"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD")),l=r("r0DZ"),c=r("N5XI"),u=r("Tl51");let h=class extends o.a{constructor(e){super(e),this.tool=null,this._baseHandles=new l.a,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,e&&null!=e.visible&&(this.visible=e.visible)}initialize(){this._baseHandles.add(Object(c.init)(this,["view.ready","isSupported"],()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1}))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),e&&this._baseHandles.add(e.tools.on("change",e=>{if(this.tool)for(const t of e.removed)if(this.tool===t){t.destroyed||t.destroy(),this._set("tool",null);break}}),t)}set visible(e){this._set("visible",e),this.tool&&(this.tool.visible=e),!e&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return Promise.reject(new a.a("tool:create","The view does not support the tool"));const e=this.createToolParams(),t=()=>{const t=Object(u.b)(e.constructorArguments);return{visible:this.visible,...t}},r=new AbortController,n=r.signal;this._creationAbortController=r;const i=()=>{r===this._creationAbortController&&(this._creationAbortController=null)};try{const r=await this.view.createTool(e.toolConstructor,t,{signal:n});this._set("tool",r),i()}catch(s){throw i(),s}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const e=this.tool;e&&(this.view&&this.view.tools&&this.view.tools.remove(e),e.destroyed||e.destroy(),this._set("tool",null))}};Object(n.a)([Object(i.b)({constructOnly:!0})],h.prototype,"tool",void 0),Object(n.a)([Object(i.b)()],h.prototype,"isSupported",null),Object(n.a)([Object(i.b)({value:null})],h.prototype,"view",null),Object(n.a)([Object(i.b)({type:Boolean,value:!0})],h.prototype,"visible",null),Object(n.a)([Object(i.b)()],h.prototype,"active",null),Object(n.a)([Object(i.b)()],h.prototype,"isDisabled",null),Object(n.a)([Object(i.b)()],h.prototype,"_creationAbortController",void 0),Object(n.a)([Object(i.b)({readOnly:!0})],h.prototype,"creatingTool",null),h=Object(n.a)([Object(s.a)("esri.widgets.support.InteractiveToolViewModel")],h)},fqtG:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},hIOP:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("wSAH"),i=r("srIe"),s=r("gvqN"),a=r("DxxZ"),o=r("6S2I");const l=r.e(148).then(r.bind(null,"zKxS"));class c{constructor(e,t){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:t.getBitset(t.createBitset())}}invalidate(){this._bitsets.computed.clear()}async updateSchema(e,t){const r=Object(a.a)(this._schema,t);if(this._schema=t,!t||Object(i.j)(r)||!Object(a.b)(r,"attributes"))return;Object(n.a)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",r),this._bitsets.computed.clear(),e.targets[t.name]=!0;const s=t.attributes,o=[],l=[];for(const n in s){const e=s[n];switch(e.type){case"field":break;case"expression":o.push(this._createArcadeComputedField(e));break;case"label-expression":o.push(this._createLabelArcadeComputedField(e));break;case"statistic":l.push(e)}}this._computedFields=await Promise.all(o),this._canCacheExpressionValue=!this._computedFields.some(e=>"expression"===e.type&&e.expression.referencesScale()),this._statisticFields=l}setComputedAttributes(e,t,r,n){const i=this._bitsets.computed;if(!this._canCacheExpressionValue||!i.has(r)){i.set(r);for(const i of this._computedFields){const s=this._evaluateField(t,i,n);switch(i.resultType){case"numeric":e.setComputedNumericAtIndex(r,i.fieldIndex,s);break;case"string":e.setComputedStringAtIndex(r,i.fieldIndex,s)}}}}async _createArcadeComputedField(e){const t=this._sourceInfo.spatialReference,r=this._sourceInfo.fieldsIndex;return{...e,expression:await Object(s.d)(e.valueExpression,t,r)}}async _createLabelArcadeComputedField(e){const t=this._sourceInfo.spatialReference,r=this._sourceInfo.fields,{createLabelFunction:n}=await l,i=await n(e.label,r,t);return{...e,builder:i}}_evaluateField(e,t,r){switch(t.type){case"label-expression":{const r=e.readArcadeFeature();return t.builder.evaluate(r)||""}case"expression":{const{expression:n}=t;return function(e,t,r){e.referencesGeometry();const n=t.readArcadeFeature();try{return e.evaluate({...r,$feature:n})}catch(i){return o.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",i),null}}(n,e,{$view:{scale:r}})}}}}},iNG6:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return l}),r.d(t,"c",function(){return a});var n=r("wSAH"),i=r("f/qv"),s=r("gkbi");function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.a:"esriGeometryPolyline"===e?s.c:s.b}}}function o(e,t){if(Object(n.a)("csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this.${t} = null;`;for(const t in e)r+=`this${t.indexOf(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const n=new Function(r);return()=>new n}catch(r){return()=>({[t]:null,...e})}}function l(e={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(i.a)(e)}}]}},iUxC:function(e,t,r){"use strict";t.a=class{constructor(e,t,r){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=r}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const r=this.filter({pixelBlock:t}),n=r.pixelBlock.getAsRGBA(),i=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);i.data.set(n),e.putImageData(i,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}},kGdt:function(e,t,r){"use strict";var n=r("1F90");t.a=class{constructor(e){this._programCacheByTemplate=new Map,this._rctx=e}dispose(){this._programCacheByTemplate.forEach(e=>{e.programs.forEach(e=>{e.dispose()})}),this._programCacheByTemplate=null}getProgram(e,t){return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,t=>Object(n.a)(this._rctx,e,t)),this.getProgramTemplateInstance(e,t)}addProgramTemplate(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})}getProgramTemplateInstance(e,t){const r=this._programCacheByTemplate.get(e);if(r){const e=t?JSON.stringify(t):"default";if(!r.programs.has(e)){const n=r.constructor(t);r.programs.set(e,n)}return r.programs.get(e)}return null}}},l5Tg:function(e,t,r){"use strict";r.d(t,"a",function(){return A}),r.d(t,"b",function(){return R}),r.d(t,"c",function(){return C}),r.d(t,"d",function(){return F}),r.d(t,"e",function(){return L}),r.d(t,"f",function(){return P}),r.d(t,"g",function(){return k}),r.d(t,"h",function(){return B}),r.d(t,"i",function(){return D}),r.d(t,"j",function(){return G}),r.d(t,"k",function(){return N}),r.d(t,"l",function(){return o}),r.d(t,"m",function(){return l}),r.d(t,"n",function(){return a}),r.d(t,"o",function(){return c}),r.d(t,"p",function(){return s}),r.d(t,"q",function(){return u}),r.d(t,"r",function(){return z}),r.d(t,"s",function(){return h}),r.d(t,"t",function(){return d}),r.d(t,"u",function(){return b}),r.d(t,"v",function(){return g}),r.d(t,"w",function(){return j}),r.d(t,"x",function(){return _}),r.d(t,"y",function(){return v}),r.d(t,"z",function(){return m}),r.d(t,"A",function(){return x}),r.d(t,"B",function(){return S}),r.d(t,"C",function(){return y}),r.d(t,"D",function(){return O}),r.d(t,"E",function(){return p}),r.d(t,"F",function(){return w}),r.d(t,"G",function(){return I}),r.d(t,"H",function(){return f}),r.d(t,"I",function(){return T}),r.d(t,"J",function(){return E}),r.d(t,"K",function(){return M});var n=r("9gar"),i=r("1kEK");function s(e){return n.a.extendedSpatialReferenceInfo(e)}function a(e,t,r){return n.a.clip(i.a,e,t,r)}function o(e,t,r){return n.a.cut(i.a,e,t,r)}function l(e,t,r){return n.a.contains(i.a,e,t,r)}function c(e,t,r){return n.a.crosses(i.a,e,t,r)}function u(e,t,r,s){return n.a.distance(i.a,e,t,r,s)}function h(e,t,r){return n.a.equals(i.a,e,t,r)}function d(e,t,r){return n.a.intersects(i.a,e,t,r)}function p(e,t,r){return n.a.touches(i.a,e,t,r)}function f(e,t,r){return n.a.within(i.a,e,t,r)}function b(e,t,r){return n.a.disjoint(i.a,e,t,r)}function m(e,t,r){return n.a.overlaps(i.a,e,t,r)}function y(e,t,r,s){return n.a.relate(i.a,e,t,r,s)}function g(e,t){return n.a.isSimple(i.a,e,t)}function O(e,t){return n.a.simplify(i.a,e,t)}function j(e,t,r=!1){return n.a.convexHull(i.a,e,t,r)}function _(e,t,r){return n.a.difference(i.a,e,t,r)}function v(e,t,r){return n.a.symmetricDifference(i.a,e,t,r)}function x(e,t,r){return n.a.intersect(i.a,e,t,r)}function w(e,t,r=null){return n.a.union(i.a,e,t,r)}function S(e,t,r,s,a,o,l){return n.a.offset(i.a,e,t,r,s,a,o,l)}function I(e,t,r,s,a=!1){return n.a.buffer(i.a,e,t,r,s,a)}function T(e,t,r,s,a,o,l){return n.a.geodesicBuffer(i.a,e,t,r,s,a,o,l)}function E(e,t,r,s=!0){return n.a.nearestCoordinate(i.a,e,t,r,s)}function M(e,t,r){return n.a.nearestVertex(i.a,e,t,r)}function A(e,t,r,s,a){return n.a.nearestVertices(i.a,e,t,r,s,a)}function R(e,t,r,i){if(null==t||null==i)throw new Error("Illegal Argument Exception");const s=n.a.rotate(t,r,i);return s.spatialReference=e,s}function C(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.a.flipHorizontal(t,r);return i.spatialReference=e,i}function F(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.a.flipVertical(t,r);return i.spatialReference=e,i}function L(e,t,r,s,a){return n.a.generalize(i.a,e,t,r,s,a)}function P(e,t,r,s){return n.a.densify(i.a,e,t,r,s)}function k(e,t,r,s,a=0){return n.a.geodesicDensify(i.a,e,t,r,s,a)}function B(e,t,r){return n.a.planarArea(i.a,e,t,r)}function D(e,t,r){return n.a.planarLength(i.a,e,t,r)}function G(e,t,r,s){return n.a.geodesicArea(i.a,e,t,r,s)}function N(e,t,r,s){return n.a.geodesicLength(i.a,e,t,r,s)}var z=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:s,clip:a,cut:o,contains:l,crosses:c,distance:u,equals:h,intersects:d,touches:p,within:f,disjoint:b,overlaps:m,relate:y,isSimple:g,simplify:O,convexHull:j,difference:_,symmetricDifference:v,intersect:x,union:w,offset:S,buffer:I,geodesicBuffer:T,nearestCoordinate:E,nearestVertex:M,nearestVertices:A,rotate:R,flipHorizontal:C,flipVertical:F,generalize:L,densify:P,geodesicDensify:k,planarArea:B,planarLength:D,geodesicArea:G,geodesicLength:N})},lq5k:function(e,t,r){"use strict";r.d(t,"a",function(){return R});var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=r("6S2I"),a=(r("zqDF"),r("WbKI")),o=r("r88o"),l=r("04ZG"),c=r("Cduq"),u=r("zlDU"),h=r("4EHJ"),d=r("ju1D"),p=(r("9AIY"),r("9MzC")),f=r("WZb1"),b=r("OvF4"),m=r("Lqtk"),y=r("AiS/"),g=r("p+Gi"),O=r("Jpjp");function j(e){e&&e.writtenProperties&&e.writtenProperties.forEach(e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(O.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)})}var _=r("VLTf"),v=r("5k2a"),x=r("eSsm"),w=r("5qYV");async function S(e,t,r){if(!t||!t.resources)return;const n=t.portalItem===e.portalItem?new Set(e.paths):new Set;e.paths.length=0,e.portalItem=t.portalItem;const i=new Set(t.resources.toKeep.map(e=>e.resource.path)),s=new Set,a=[];i.forEach(t=>{n.delete(t),e.paths.push(t)});for(const c of t.resources.toUpdate)if(n.delete(c.resource.path),i.has(c.resource.path)||s.has(c.resource.path)){const{resource:t,content:n,finish:i,error:s}=c,o=Object(w.getSiblingOfSameTypeI)(t,Object(d.a)());e.paths.push(o.path),a.push(I({resource:o,content:n,finish:i,error:s},r))}else e.paths.push(c.resource.path),a.push(T(c,r)),s.add(c.resource.path);for(const c of t.resources.toAdd)a.push(I(c,r)),e.paths.push(c.resource.path);if(n.forEach(e=>{const r=t.portalItem.resourceFromPath(e);a.push(r.portalItem.removeResource(r).catch(()=>{}))}),0===a.length)return;const o=await Object(p.j)(a);Object(p.u)(r);const l=o.filter(e=>"error"in e).map(e=>e.error);if(l.length>0)throw new u.a("save:resources","Failed to save one or more resources",{errors:l})}async function I(e,t){const r=await Object(x.c)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==r.ok)throw e.error&&e.error(r.error),r.error;e.finish&&e.finish(e.resource)}async function T(e,t){const r=await Object(x.c)(e.resource.update(e.content,t));if(!0!==r.ok)throw e.error(r.error),r.error;e.finish(e.resource)}var E=r("IvSi"),M=r("bjZF");const A=s.a.getLogger("esri.layers.mixins.SceneService"),R=e=>{let t=class extends e{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=Object(p.i)(async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}})}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return f.a.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,n=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=n?new f.a(n):null}}readFullExtent(e,t,r){if(null!=e&&"object"==typeof e)return b.a.fromJSON(e,r);const n=t.store,i=this._readSpatialReference(t);return null==i||null==n||null==n.extent||!Array.isArray(n.extent)||n.extent.some(e=>e<C)?null:new b.a({xmin:n.extent[0],ymin:n.extent[1],xmax:n.extent[2],ymax:n.extent[3],spatialReference:i})}readVersion(e,t){const r=t.store,n=null!=r.version?r.version.toString():"",i={major:Number.NaN,minor:Number.NaN,versionString:n},s=n.split(".");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(_.i)(this.url,t.name);let n=t.name;if(!n&&this.url){const e=Object(_.e)(this.url);Object(i.k)(e)&&(n=e.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(n=r+" - "+n),Object(_.a)(n)}set url(e){const t=Object(_.h)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:A});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,n){Object(_.j)(this,e,"layers",t,n)}get parsedUrl(){const e=this._get("url");if(!e)return null;const t=Object(h.J)(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=Object(M.a)(this.parsedUrl.path,this.rootNode,e,A,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if("page"===(null==e?void 0:e.type)){var t,r;const n=e.rootIndex%e.pageSize,i=null==(t=e.rootPage)||null==(r=t.nodes)?void 0:r[n];if(null==i||null==i.obb||null==i.obb.center||null==i.obb.halfSize)throw new u.a("sceneservice:invalid-node-page","Invalid node page.");if(i.obb.center[0]<C||null==this.fullExtent||this.fullExtent.hasZ)return;const s=i.obb.halfSize,a=i.obb.center[2],o=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);this.fullExtent.zmin=a-o,this.fullExtent.zmax=a+o}else if("node"===(null==e?void 0:e.type)){var n;const t=null==(n=e.rootNode)?void 0:n.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<C)return;const r=t[2],i=t[3];this.fullExtent.zmin=r-i,this.fullExtent.zmax=r+i}}async _fetchService(e){if(null==this.url)throw new u.a("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const t=await Object(m.default)(this.url,{query:{f:"json"},responseType:"json",signal:e});if(t.data&&Array.isArray(t.data.layers)&&t.data.layers.length>0)return t.data.layers[0].id}async _fetchServiceLayer(e){const t=await Object(m.default)(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:e});t.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const r=t.data;this.read(r,{origin:"service",url:this.parsedUrl}),this.validateLayer(r)}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const n=t.getTypeKeywords();for(const i of n)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((e,t,r)=>r.indexOf(e)===t),1===r&&(e.typeKeywords=e.typeKeywords.filter(e=>"Hosted Service"!==e)))}async _saveAs(e,t){const r={...P,...t};let n=g.default.from(e);n||(A.error("_saveAs(): requires a portal item parameter"),await Promise.reject(new u.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),n.id&&(n=n.clone(),n.id=null);const i=n.portal||y.a.getDefault();await this._ensureLoadBeforeSave(),n.type=L,n.portal=i;const s={origin:"portal-item",url:null,messages:[],portal:i,portalItem:n,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},a={layers:[this.write(null,s)]};return await Promise.all(s.resources.pendingOperations),await this._validateAgainstJSONSchema(a,s,r),n.url=this.url,n.title||(n.title=this.title),this._updateTypeKeywords(n,r,1),await i._signIn(),await i.user.addItem({item:n,folder:r&&r.folder,data:a}),await S(this.resourceReferences,s,null),this.portalItem=n,j(s),s.portalItem=n,n}async _save(e){const t={...P,...e};this.portalItem||(A.error("_save(): requires the .portalItem property to be set"),await Promise.reject(new u.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"))),this.portalItem.type!==L&&(A.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+L),await Promise.reject(new u.a("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${L}"`))),await this._ensureLoadBeforeSave();const r={origin:"portal-item",url:this.portalItem.itemUrl&&Object(h.J)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||y.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write(null,r)]};return await Promise.all(r.resources.pendingOperations),await this._validateAgainstJSONSchema(n,r,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:n}),await S(this.resourceReferences,r,null),j(r),this.portalItem}async _validateAgainstJSONSchema(e,t,n){let i=t.messages.filter(e=>"error"===e.type).map(e=>new u.a(e.name,e.message,e.details));if(n&&n.validationOptions.ignoreUnsupported&&(i=i.filter(e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name)),n.validationOptions.enabled||F){const t=(await r.e(149).then(r.bind(null,"p+sB"))).validate(e,n.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\n${t.join("\n")}`;if(A.error(`_validateAgainstJSONSchema(): ${e}`),"throw"===n.validationOptions.failPolicy){const e=t.map(e=>new u.a("sceneservice:schema-validation",e)).concat(i);throw new u.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(i.length>0)throw new u.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}};return Object(n.a)([Object(a.b)(E.c)],t.prototype,"id",void 0),Object(n.a)([Object(a.b)({type:f.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(o.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(n.a)([Object(a.b)({type:b.a})],t.prototype,"fullExtent",void 0),Object(n.a)([Object(o.a)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(n.a)([Object(a.b)({readOnly:!0,type:v.a})],t.prototype,"heightModelInfo",void 0),Object(n.a)([Object(a.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(n.a)([Object(a.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"version",void 0),Object(n.a)([Object(o.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(n.a)([Object(a.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(a.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(n.a)([Object(a.b)({type:String})],t.prototype,"title",void 0),Object(n.a)([Object(o.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(n.a)([Object(o.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(n.a)([Object(a.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(n.a)([Object(a.b)(E.n)],t.prototype,"url",null),Object(n.a)([Object(c.a)("url")],t.prototype,"writeUrl",null),Object(n.a)([Object(a.b)()],t.prototype,"parsedUrl",null),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"store",void 0),Object(n.a)([Object(a.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(n.a)([Object(l.a)("esri.layers.mixins.SceneService")],t),t},C=-1e38,F=!1,L="Scene Service",P={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}}},lx5q:function(e,t,r){"use strict";var n=r("srIe");t.a=class{constructor(e=Number.POSITIVE_INFINITY){this.size=0,this._start=0,this.maxSize=e,this._buffer=isFinite(e)?new Array(e):[]}get entries(){return this._buffer}enqueue(e){if(this.size===this.maxSize){const t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=e:this._buffer[this._start+this.size++]=e,null}dequeue(){if(0===this.size)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}peek(){return 0===this.size?null:this._buffer[this._start]}find(e){if(0===this.size)return null;for(const t of this._buffer)if(Object(n.k)(t)&&e(t))return t;return null}clear(e){let t=this.dequeue();for(;Object(n.k)(t);)e&&e(t),t=this.dequeue()}}},mYC1:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("srIe"),i=r("9MzC"),s=r("975N"),a=r("Lqtk"),o=r("AiS/"),l=r("p+Gi"),c=r("W9Wu");class u{constructor(e,t,r){this.parsedUrl=e,this.portalItem=t,this.signal=r,this.rootDocument=null;const n=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);n&&(this.urlParts={root:n[1],layerId:parseInt(n[2],10)})}async fetch(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();if(Object(n.j)(t))return this.loadFromUrl();const r=await this.findAndLoadRelatedPortalItem(t);return Object(n.j)(r)?null:this.loadFeatureLayerFromPortalItem(r)}async fetchPortalItem(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();return Object(n.j)(t)?null:this.findAndLoadRelatedPortalItem(t)}async fetchRootDocument(){if(Object(n.k)(this.rootDocument))return this.rootDocument;if(Object(n.j)(this.urlParts))return this.rootDocument={},{};const e={query:{f:"json"},responseType:"json",signal:this.signal},t=`${this.urlParts.root}/SceneServer`;try{const r=await Object(a.default)(t,e);this.rootDocument=r.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var e;const t=null==(e=s.b)?void 0:e.findServerInfo(this.parsedUrl.path);if(null!=t&&t.owningSystemUrl)return t.owningSystemUrl;const r=this.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const e=(await Object(a.default)(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(e)return e}catch(n){Object(i.t)(n)}return null}async findAndLoadRelatedPortalItem(e){try{return(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find(e=>"Feature Service"===e.type)||null}catch(t){return Object(i.t)(t),null}}async loadFeatureLayerFromPortalItem(e){await e.load({signal:this.signal});const t=await this.findMatchingAssociatedSublayerUrl(e.url);return new c.default({url:t,portalItem:e}).load({signal:this.signal})}async loadFromUrl(){const e=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new c.default({url:e}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(e){const t=e.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},n=this.urlParts.layerId,i=this.fetchRootDocument(),s=Object(a.default)(t,r),[o,l]=await Promise.all([s,i]),c=l&&l.layers,u=o.data&&o.data.layers;if(!Array.isArray(u))throw new Error("expected layers array");if(Array.isArray(c)){for(let e=0;e<Math.min(c.length,u.length);e++)if(c[e].id===n)return`${t}/${u[e].id}`}else if(n<u.length)return`${t}/${u[n].id}`;throw new Error("could not find matching associated sublayer")}async portalItemFromServiceItemId(){const e=(await this.fetchRootDocument()).serviceItemId;if(!e)return null;const t=new l.default({id:e}),r=await this.fetchServiceOwningPortalUrl();Object(n.k)(r)&&(t.portal=new o.a({url:r}));try{return t.load({signal:this.signal})}catch(s){return Object(i.t)(s),null}}}},n4FQ:function(e,t,r){"use strict";var n=r("gEht");class i{constructor(e,t){this.measure=Object(n.o)(t),this.value=e,this.unit=t}get isBaseUnit(){return Object(n.k)(this.unit)}toUnit(e){return new i(Object(n.c)(this.value,this.unit,e),e)}toBaseUnit(){return this.toUnit(Object(n.b)(this.unit))}}t.a=i},ncPp:function(e,t,r){"use strict";r.r(t);var n=r("pO5D"),i=(r("wSAH"),r("s7YA")),s=(r("6S2I"),r("zqDF"),r("WbKI")),a=r("r88o"),o=r("04ZG"),l=r("Cduq"),c=r("zlDU"),u=r("4EHJ"),h=(r("ju1D"),r("9AIY"),r("WZb1")),d=r("SuVq"),p=r("OvF4"),f=(r("4GrV"),r("Lqtk")),b=r("pqNC"),m=r("5pQd"),y=r("uRH/"),g=r("mXvl"),O=r("DbUH"),j=r("jhcG"),_=r("WmKv"),v=r("UOZ4"),x=r("3/ME"),w=r("OYGz");let S=class extends(Object(g.a)(Object(j.a)(Object(_.a)(Object(y.a)(Object(O.a)(Object(m.a)(b.a))))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new p.a(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,h.a.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=h.a.WebMercator,this.subDomains=null,this.tileInfo=new x.a({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new d.a({x:-20037508.342787,y:20037508.342787,spatialReference:h.a.WebMercator}),spatialReference:h.a.WebMercator,lods:[new v.a({level:0,scale:591657527.591555,resolution:156543.033928}),new v.a({level:1,scale:295828763.795777,resolution:78271.5169639999}),new v.a({level:2,scale:147914381.897889,resolution:39135.7584820001}),new v.a({level:3,scale:73957190.948944,resolution:19567.8792409999}),new v.a({level:4,scale:36978595.474472,resolution:9783.93962049996}),new v.a({level:5,scale:18489297.737236,resolution:4891.96981024998}),new v.a({level:6,scale:9244648.868618,resolution:2445.98490512499}),new v.a({level:7,scale:4622324.434309,resolution:1222.99245256249}),new v.a({level:8,scale:2311162.217155,resolution:611.49622628138}),new v.a({level:9,scale:1155581.108577,resolution:305.748113140558}),new v.a({level:10,scale:577790.554289,resolution:152.874056570411}),new v.a({level:11,scale:288895.277144,resolution:76.4370282850732}),new v.a({level:12,scale:144447.638572,resolution:38.2185141425366}),new v.a({level:13,scale:72223.819286,resolution:19.1092570712683}),new v.a({level:14,scale:36111.909643,resolution:9.55462853563415}),new v.a({level:15,scale:18055.954822,resolution:4.77731426794937}),new v.a({level:16,scale:9027.977411,resolution:2.38865713397468}),new v.a({level:17,scale:4513.988705,resolution:1.19432856685505}),new v.a({level:18,scale:2256.994353,resolution:.597164283559817}),new v.a({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return"string"==typeof e?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let e="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new u.a(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===t.authority.indexOf("{subDomain}")||(e="is missing 'subDomains' property")}else e="spatialReference must match tileInfo.spatialReference";else e="is missing the required 'urlTemplate' property value";if(e)throw new c.a("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&h.a.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,n=new u.a(t),i=n.scheme?n.scheme+"://":"//",s=i+n.authority+"/";if(-1===n.authority.indexOf("{subDomain}"))e.push(s);else if(r&&r.length>0&&n.authority.split(".").length>1)for(const a of r)e.push(i+n.authority.replace(/\{subDomain\}/gi,a)+"/");return e.map(e=>("/"!==e.charAt(e.length-1)&&(e+="/"),e))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new u.a(e);return e.substring(((t.scheme?t.scheme+"://":"//")+t.authority+"/").length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&Object(u.v)(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=Object(u.C)(e)),t.templateUrl=e}fetchTile(e,t,r,n={}){const{signal:i,timestamp:s}=n,a=this.getTileUrl(e,t,r),o={responseType:"image",signal:i};return null!=s&&(o.query={_ts:n.timestamp}),Object(f.default)(a,o).then(e=>e.data)}getTileUrl(e,t,r){const n=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+Object(i.c)(this.urlPath,{level:n,z:n,col:r,x:r,row:t,y:t})}};Object(n.a)([Object(s.b)({type:String,value:"",json:{write:!0}})],S.prototype,"copyright",void 0),Object(n.a)([Object(s.b)({type:p.a,json:{write:!0}})],S.prototype,"fullExtent",void 0),Object(n.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!1}})],S.prototype,"legendEnabled",void 0),Object(n.a)([Object(s.b)({type:["show","hide"]})],S.prototype,"listMode",void 0),Object(n.a)([Object(s.b)()],S.prototype,"levelValues",null),Object(n.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],S.prototype,"isReference",void 0),Object(n.a)([Object(s.b)({type:["WebTiledLayer"],value:"WebTiledLayer"})],S.prototype,"operationalLayerType",void 0),Object(n.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!1}})],S.prototype,"popupEnabled",void 0),Object(n.a)([Object(s.b)({type:h.a})],S.prototype,"spatialReference",void 0),Object(n.a)([Object(a.a)("spatialReference",["spatialReference","fullExtent.spatialReference"])],S.prototype,"readSpatialReference",null),Object(n.a)([Object(s.b)({type:[String],json:{write:!0}})],S.prototype,"subDomains",void 0),Object(n.a)([Object(s.b)({type:x.a,json:{write:!0}})],S.prototype,"tileInfo",void 0),Object(n.a)([Object(s.b)({readOnly:!0})],S.prototype,"tileServers",null),Object(n.a)([Object(s.b)({json:{read:!1}})],S.prototype,"type",void 0),Object(n.a)([Object(s.b)()],S.prototype,"urlPath",null),Object(n.a)([Object(s.b)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],S.prototype,"urlTemplate",void 0),Object(n.a)([Object(a.a)("urlTemplate",["urlTemplate","templateUrl"])],S.prototype,"readUrlTemplate",null),Object(n.a)([Object(l.a)("urlTemplate",{templateUrl:{type:String}})],S.prototype,"writeUrlTemplate",null),Object(n.a)([Object(s.b)({type:w.a,json:{write:!0}})],S.prototype,"wmtsInfo",void 0),S=Object(n.a)([Object(o.a)("esri.layers.WebTileLayer")],S),t.default=S},o6Le:function(e,t,r){"use strict";r.d(t,"a",function(){return i});class n{constructor(e={}){this._options=e}toQueryParams(e){if(!e)return null;const t=e.toJSON(),r={};return Object.keys(t).forEach(e=>{const n=this._options[e];if(n){const i="boolean"!=typeof n&&n.name?n.name:e,s="boolean"!=typeof n&&n.getter?n.getter(t):t[e];null!=s&&(r[i]=(e=>{if(!Array.isArray(e))return!1;const[t]=e;return"number"==typeof t||"string"==typeof t})(s)?s.join(","):"object"==typeof s?JSON.stringify(s):s)}else r[e]=t[e]},this),r}}function i(e){return new n(e)}},oLSx:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={BingMapsLayer:async()=>(await Promise.resolve().then(r.bind(null,"CR/Q"))).default,BuildingSceneLayer:async()=>(await Promise.all([r.e(0),r.e(129)]).then(r.bind(null,"TWTt"))).default,CSVLayer:async()=>(await r.e(73).then(r.bind(null,"Kn0e"))).default,ElevationLayer:async()=>(await Promise.all([r.e(0),r.e(27)]).then(r.bind(null,"8g7C"))).default,FeatureLayer:async()=>(await Promise.resolve().then(r.bind(null,"W9Wu"))).default,GroupLayer:async()=>(await r.e(0).then(r.bind(null,"VPx4"))).default,GeoRSSLayer:async()=>(await r.e(130).then(r.bind(null,"AP+b"))).default,ImageryLayer:async()=>(await Promise.resolve().then(r.bind(null,"/GVf"))).default,ImageryTileLayer:async()=>(await Promise.all([r.e(0),r.e(131)]).then(r.bind(null,"mRf7"))).default,IntegratedMeshLayer:async()=>(await Promise.all([r.e(0),r.e(132)]).then(r.bind(null,"yvy3"))).default,KMLLayer:async()=>(await Promise.all([r.e(0),r.e(133)]).then(r.bind(null,"9fxc"))).default,MapImageLayer:async()=>(await Promise.resolve().then(r.bind(null,"U/i9"))).default,MapNotesLayer:async()=>(await Promise.all([r.e(0),r.e(134)]).then(r.bind(null,"Wvof"))).default,OpenStreetMapLayer:async()=>(await Promise.all([r.e(0),r.e(135)]).then(r.bind(null,"jFi3"))).default,PointCloudLayer:async()=>(await Promise.all([r.e(0),r.e(136)]).then(r.bind(null,"RLtZ"))).default,RouteLayer:async()=>(await r.e(137).then(r.bind(null,"soW6"))).default,SceneLayer:async()=>(await Promise.all([r.e(0),r.e(138)]).then(r.bind(null,"0yFX"))).default,StreamLayer:async()=>(await r.e(139).then(r.bind(null,"u6iX"))).default,TileLayer:async()=>(await r.e(140).then(r.bind(null,"JlDE"))).default,UnknownLayer:async()=>(await r.e(141).then(r.bind(null,"qcqe"))).default,UnsupportedLayer:async()=>(await r.e(142).then(r.bind(null,"GN2T"))).default,VectorTileLayer:async()=>(await Promise.resolve().then(r.bind(null,"FzwJ"))).default,WebTileLayer:async()=>(await r.e(0).then(r.bind(null,"ncPp"))).default,WMSLayer:async()=>(await Promise.resolve().then(r.bind(null,"h2Da"))).default,WMTSLayer:async()=>(await Promise.all([r.e(0),r.e(143)]).then(r.bind(null,"sDlQ"))).default}},ofcG:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),h=r("1hFN"),d=r("ag7Y"),p=r("nvBr");let f=n=class extends d.a{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new n({description:this.description,label:this.label,values:Object(s.a)(this.values),color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:[String],json:{write:!0}})],f.prototype,"values",void 0),Object(i.a)([Object(o.b)({type:p.a,json:{type:[a.a],write:!0}})],f.prototype,"color",void 0),f=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],f);var b,m=f;let y=b=class extends u.a{constructor(e){super(e),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new b({...this.cloneProperties(),field:Object(s.a)(this.field),fieldTransformType:Object(s.a)(this.fieldTransformType),colorUniqueValueInfos:Object(s.a)(this.colorUniqueValueInfos),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],y.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],y.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],y.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[m],json:{write:!0}})],y.prototype,"colorUniqueValueInfos",void 0),Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],y.prototype,"legendOptions",void 0),y=b=Object(i.a)([Object(c.a)("esri.renderers.PointCloudUniqueValueRenderer")],y),t.a=y},p0UO:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return n});const n=1;function i(e,t){let r=0;for(const i of t){var n;const t=null==(n=i.attributes)?void 0:n[e];"number"==typeof t&&isFinite(t)&&(r=Math.max(r,t))}return r}},q03O:function(e,t,r){"use strict";var n=r("yE7X"),i=r("kvL/");t.a=class extends i.a{renderChildren(e){this.attributeView.bindTextures(e.context),this.children.some(e=>e.hasData)&&(super.renderChildren(e),e.drawPhase===n.c.MAP&&this._renderChildren(e),e.drawPhase===n.c.HIGHLIGHT&&this._renderHighlight(e))}_renderHighlight(e){const{painter:t}=e,r=t.effects.highlight;r.bind(e),this._renderChildren(e,r.defines),r.draw(e),r.unbind()}}},tODX:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return g}),r.d(t,"d",function(){return d}),r.d(t,"e",function(){return y}),r.d(t,"f",function(){return m}),r.d(t,"g",function(){return f}),r.d(t,"h",function(){return O});var n=r("zlDU"),i=r("f4Nx"),s=r("l4ZG"),a=r("SuVq"),o=r("OvF4"),l=(r("4GrV"),r("gEht")),c=r("gYg2");const u=5e-4,h=function(e,t){const r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};async function d(){if(Object(c.g)()||!Object(c.h)())return null;await Object(c.i)()}function p(e,t,r){if(!h(e.spatialReference,t))return null;if(!Object(c.g)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");return r?Object(c.e)(t,e.spatialReference,e):Object(c.e)(e.spatialReference,t,e)}function f(e,t,r,i=null){if(e.spatialReference.equals(t))return e;const a=h(e.spatialReference,t);if(a&&!Object(c.g)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const l=r.center,u=new o.a({xmin:l.x-e.x/2,xmax:l.x+e.x/2,ymin:l.y-e.y/2,ymax:l.y+e.y/2,spatialReference:e.spatialReference}),d=a?Object(c.j)(u,t,i):Object(s.d)(u,t);return null==d?null:{x:d.xmax-d.xmin,y:d.ymax-d.ymin}}function b(e,t=.01){return Object(l.f)(e)?t/Object(l.f)(e):0}function m(e,t,r=null,a=!0){const o=e.spatialReference;if(o.equals(t))return e;const l=h(o,t);if(l&&!Object(c.g)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const d=l?Object(c.j)(e,t,r):Object(s.d)(e,t);if(d&&a&&t.isGeographic){var p,f;const[t,r]=o.isWebMercator?Object(i.d)(o).origin:null!=(p=null==(f=Object(i.d)(o))?void 0:f.valid)?p:[],n=b(o);n&&null!=t&&null!=r&&(Math.abs(e.x-t)<n&&Math.abs(180-d.x)<u?d.x-=360:Math.abs(e.x-r)<n&&Math.abs(180+d.x)<u&&(d.x+=360))}return d}function y(e,t,r=null,o=!0){var l,d,p,f;const y=e.spatialReference;if(y.equals(t))return e;const g=h(y,t);if(g&&!Object(c.g)())throw new n.a("rasterprojectionhelper-projectExtent","projection engine is not loaded");const O=g?Object(c.j)(e,t,r):Object(s.d)(e,t);let[j,_]=null!=(l=null==(d=Object(i.d)(y))?void 0:d.origin)?l:[];if(O&&o&&y.isWebMercator&&t.isGeographic&&null!=j&&null!=_){const n=.001,i=1e3;if(Math.abs(e.xmin-j)<n&&Math.abs(_-e.xmax)>i&&Math.abs(180-O.xmax)<u){O.xmin=-180;const n=[];n.push(new a.a(e.xmax,e.ymin,y)),n.push(new a.a(e.xmax,(e.ymin+e.ymax)/2,y)),n.push(new a.a(e.xmax,e.ymax,y));const i=n.map(e=>m(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);O.xmax=Math.max.apply(null,i)}if(Math.abs(e.xmax-_)<n&&Math.abs(j-e.xmin)>i&&Math.abs(180+O.xmin)<u){O.xmax=180;const n=[];n.push(new a.a(e.xmin,e.ymin,y)),n.push(new a.a(e.xmin,(e.ymin+e.ymax)/2,y)),n.push(new a.a(e.xmin,e.ymax,y));const i=n.map(e=>m(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);O.xmin=Math.min.apply(null,i)}}[j,_]=t.isWebMercator?Object(i.d)(t).origin:null!=(p=null==(f=Object(i.d)(t))?void 0:f.valid)?p:[];const v=b(t);return v&&null!=j&&null!=_&&(Math.abs(O.xmin-j)<v&&(O.xmin=j),Math.abs(O.xmax-_)<v&&(O.xmax=_)),O}function g(e,t,r,s=null,o=null,l=!1,u=[32,32]){var d,p;if(h(e.spatialReference,t.spatialReference)&&!Object(c.g)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&r))return null;const{xmin:f,ymin:b,xmax:y,ymax:g}=e,O=e.spatialReference,j=t.spatialReference,[_,v]=null!=(d=null==(p=Object(i.d)(O))?void 0:p.valid)?d:[],x={x:u[0]*r.x,y:u[1]*r.y},w={cols:Math.ceil((y-f)/x.x-.1)+1,rows:Math.ceil((g-b)/x.y-.1)+1},S=x.x,I=x.y,T=[];let E,M=!1;for(let n=0;n<w.cols;n++){const e=[];for(let r=0;r<w.rows;r++){let i=m(new a.a({x:f+S*n,y:g-I*r,spatialReference:O}),j,s);o&&(i=o.inverseTransform(i)),e.push(i),n>0&&l&&i&&E[r]&&null!=_&&i.x<E[r].x&&(i.x+=v-_),i?(T.push((i.x-t.xmin)/(t.xmax-t.xmin)),T.push((t.ymax-i.y)/(t.ymax-t.ymin))):(T.push(NaN),T.push(NaN),M=!0)}E=e}const A=function(e,t){const r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs((e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4-e[2*t.rows+2]),Math.abs(r-e[2*t.rows+3])]}(T,w),R=new Float32Array((w.cols-1)*(w.rows-1)*2*6),C=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),F=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let n=0;n<w.cols-1;n++){for(let e=0;e<w.rows-1;e++){let t=n*w.rows*2+2*e;const r=T[t],i=T[t+1],s=T[t+2],a=T[t+3];t+=2*w.rows;const o=T[t],l=T[t+1],c=T[t+2],u=T[t+3];let h=0,d=12*(e*(w.cols-1)+n);for(let e=0;e<3;e++)R[d++]=C[h++]*r+C[h++]*s+C[h++]*c;h=0;for(let e=0;e<3;e++)R[d++]=C[h++]*i+C[h++]*a+C[h++]*u;h=0;for(let e=0;e<3;e++)R[d++]=F[h++]*r+F[h++]*o+F[h++]*c;h=0;for(let e=0;e<3;e++)R[d++]=F[h++]*i+F[h++]*l+F[h++]*u}if(M)for(let e=0;e<R.length;e++)isNaN(R[e])&&(R[e]=-1)}return{offsets:T,error:A,coefficients:R,spacing:u,size:[w.cols-1,w.rows-1]}}function O(e,t,r){const n=Math.log(e.x/t.pixelSize.x)/Math.LN2,i=Math.log(e.y/t.pixelSize.y)/Math.LN2,s=t.storageInfo.maximumPyramidLevel||0;let o="down"===r?Math.floor(Math.min(n,i)):"up"===r?Math.ceil(Math.max(n,i)):Math.round((n+i)/2),l=!1;o<0?o=0:o>s&&(l=o>s+3,o=s);const c=2**o;return{pyramidLevel:o,pyramidResolution:new a.a({x:c*t.nativePixelSize.x,y:c*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}function j(e,t,r=512,n=!0){const{extent:i,spatialReference:s,pixelSize:o}=e,c=f(new a.a({x:o.x,y:o.y,spatialReference:s}),t,i);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const u=(c.x+c.y)/2,h=Object(l.f)(t),d=u*h*96*39.37,p=t.isGeographic?512/r*295828763.7958547:512/r*591657527.591555;let b=!1;const m=y(i,t);n&&(t.isGeographic||t.isWebMercator)&&(b=m.xmin*m.xmax<0);let g,O=d;const j=1.001;if(b){O=p;const e=.29858214164761665,t=e*(96*h*39.37);g=f(new a.a({x:e,y:e,spatialReference:{wkid:3857}}),s,m),g.x*=O/t,g.y*=O/t}else{g={x:o.x,y:o.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let r=0;for(;O<p*(j/2)&&r<t;)r++,O*=2,g.x*=2,g.y*=2;Math.max(O,p)/Math.min(O,p)<=j&&(O=p)}const _=[O],v=[{x:g.x,y:g.y}],x=Math.min(70.5310735,d)/j;for(;O>=x;)O/=2,g.x/=2,g.y/=2,_.push(O),v.push({x:g.x,y:g.y});return{projectedPixelSize:c,scales:_,srcResolutions:v,isCustomTilingScheme:!b}}},ukaK:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("kJYu"));let o=class extends a.a{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};Object(n.a)([Object(i.b)({readOnly:!0})],o.prototype,"supportsTileUpdates",null),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"remoteClient",void 0),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"service",void 0),Object(n.a)([Object(i.b)()],o.prototype,"spatialReference",null),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"tileInfo",void 0),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"tileStore",void 0),o=Object(n.a)([Object(s.a)("esri.views.2d.layers.features.processors.BaseProcessor")],o),t.a=o},vbiG:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("9MzC")),o=r("/CmD"),l=r("f4Nx"),c=r("OvF4"),u=r("kYAx"),h=r("3/ME"),d=r("rlSK"),p=r("AY31");const f=Math.PI/180;var b=r("xzrc");const m=Object(u.g)(),y=[0,0],g=new d.a(0,0,0,0);let O=class extends o.a{constructor(e){super(e),this._imagePromise=null,this.hidpi=!1,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=!1,this.imageNormalizationSupported=!1,this.update=Object(a.i)(async(e,t)=>{const r=e.state,n=Object(l.d)(r.spatialReference),i=this.hidpi?e.pixelRatio:1;if(!e.stationary||this.destroyed)return null;this.imageRotationSupported?(y[0]=r.size[0],y[1]=r.size[1]):function(e,t){const r=t.rotation*f,n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),[s,a]=t.size;e[0]=Math.round(a*i+s*n),e[1]=Math.round(a*n+s*i)}(y,r);const s=Math.floor(y[0]*i)>this.imageMaxWidth||Math.floor(y[1]*i)>this.imageMaxHeight,a=!this.imageNormalizationSupported&&n&&(r.extent.xmin<n.valid[0]||r.extent.xmax>n.valid[1]),o=this.imageRotationSupported?r.rotation:0;if(s||a){let e=Math.min(this.imageMaxWidth,this.imageMaxHeight);a&&(e=Math.min(r.worldScreenWidth,e)),this._imagePromise=this._tiledExport(r,e,o,i,t)}else this._imagePromise=this._singleExport(r,y,o,i,t);return this._imagePromise.then(async e=>{if(this._imagePromise=null,!this.destroyed){for(const t of this.container.children)e.includes(t)||t.fadeOut().then(()=>{t.remove()});for(const t of e)this.container.addChild(t),t.fadeIn()}}).catch(e=>{throw this._imagePromise=null,e})},5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t)?console.error("ExportStrategy.updateExports doesn't support promise yet"):(t.invalidateTexture(),t.requestRender())}}_export(e,t,r,n,i,s){return Promise.resolve().then(()=>this.fetchSource(e,Math.floor(t*i),Math.floor(r*i),{rotation:n,pixelRatio:i,signal:s})).then(r=>{const s=new b.a(r,"additive");return s.x=e.xmin,s.y=e.ymax,s.resolution=e.width/t,s.rotation=n,s.pixelRatio=i,s})}_singleExport(e,t,r,n,i){!function(e,t,r,n){const[i,s]=t,[a,o]=n,l=.5*r;e[0]=i-l*a,e[1]=s-l*o,e[2]=i+l*a,e[3]=s+l*o}(m,e.center,e.resolution,t);const s=new c.a(m[0],m[1],m[2],m[3],e.spatialReference);return this._export(s,t[0],t[1],r,n,i).then(e=>[e])}_tiledExport(e,t,r,n,i){const s=h.a.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),a=new p.a(s),o=a.getTileCoverage(e);if(!o)return null;const l=[];return o.forEach((s,o,u,h)=>{g.set(s,o,u,h),a.getTileBounds(m,g);const d=new c.a(m[0],m[1],m[2],m[3],e.spatialReference);l.push(this._export(d,t,t,r,n,i))}),Promise.all(l)}};Object(n.a)([Object(i.b)()],O.prototype,"_imagePromise",void 0),Object(n.a)([Object(i.b)()],O.prototype,"container",void 0),Object(n.a)([Object(i.b)()],O.prototype,"fetchSource",void 0),Object(n.a)([Object(i.b)()],O.prototype,"hidpi",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageMaxWidth",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageMaxHeight",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageRotationSupported",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageNormalizationSupported",void 0),Object(n.a)([Object(i.b)()],O.prototype,"requestUpdate",void 0),Object(n.a)([Object(i.b)()],O.prototype,"updating",null),O=Object(n.a)([Object(s.a)("esri.views.2d.layers.support.ExportStrategy")],O),t.a=O},xzrc:function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r("wSAH");var n=r("HJJS"),i=r("jHF5"),s=r("c46T"),a=(r("n4uK"),r("GVa1"),r("of9L")),o=(r("0meK"),r("fEsP")),l=r("iUxC");function c(e,t,r){const n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&r&&(n.width=t,n.height=r),new a.a(e,n)}class u extends o.a{constructor(e=null,t,r=!0){super(),this.requestRenderOnSourceChangedEnabled=r,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:Object(i.b)()},this.blendFunction=t,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(e){const t=Object(n.e)(this.transforms.dvs),[r,i]=e.toScreenNoRotation([0,0],this.x,this.y),a=this.resolution/this.pixelRatio/e.resolution,o=a*this.width,l=a*this.height,c=Math.PI*this.rotation/180;Object(n.a)(t,t,Object(s.b)(r,i)),Object(n.a)(t,t,Object(s.b)(o/2,l/2)),Object(n.i)(t,t,-c),Object(n.a)(t,t,Object(s.b)(-o/2,-l/2)),Object(n.f)(t,t,Object(s.b)(o,l)),Object(n.g)(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind({context:e},t){this._texture&&e.bindTexture(this._texture,t)}updateTexture({context:e}){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?c(e,this.sourceWidth,this.sourceHeight):c(e));const r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(r))if(r instanceof l.a){const e=r.getRenderedRasterPixels();this._texture.setData(e.renderedRasterPixels)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(function(e){return e&&!("render"in e)})(r)&&this._texture.setData(r);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},zna6:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("srIe"),i=r("tQ+6"),s=r("ikTR"),a=r("RjdO");class o{constructor(e=9,t){this.compareMinX=h,this.compareMinY=d,this.toBBox=function(e){return e},this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),j.prune(),_.prune(),v.prune(),x.prune()}all(e){this._all(this.data,e)}search(e,t){let r=this.data;const n=this.toBBox;if(g(e,r))for(j.clear();r;){for(let i=0,s=r.children.length;i<s;i++){const s=r.children[i],a=r.leaf?n(s):s;g(e,a)&&(r.leaf?t(s):y(e,a)?this._all(s,t):j.push(s))}r=j.pop()}}collides(e){let t=this.data;const r=this.toBBox;if(!g(e,t))return!1;for(j.clear();t;){for(let n=0,i=t.children.length;n<i;n++){const i=t.children[n],s=t.leaf?r(i):i;if(g(e,s)){if(t.leaf||y(e,s))return!0;j.push(i)}}t=j.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=new S([]),this}remove(e){if(!e)return this;let t,r=this.data,s=null,a=0,o=!1;const l=this.toBBox(e);for(v.clear(),x.clear();r||v.length>0;){var c;if(r||(r=Object(n.d)(v.pop()),s=v.data[v.length-1],a=null!=(c=x.pop())?c:0,o=!0),r.leaf&&(t=Object(i.e)(r.children,e,r.children.length,r.indexHint),-1!==t))return r.children.splice(t,1),v.push(r),this._condense(v),this;o||r.leaf||!y(r,l)?s?(a++,r=s.children[a],o=!1):r=null:(v.push(r),x.push(a),a=0,s=r,r=r.children[0])}return this}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let r=e;for(_.clear();r;){var n;if(!0===r.leaf)for(const e of r.children)t(e);else _.pushArray(r.children);r=null!=(n=_.pop())?n:null}}_build(e,t,r,n){const i=r-t+1;let s=this._maxEntries;if(i<=s){const n=new S(e.slice(t,r+1));return l(n,this.toBBox),n}n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(n-1)));const a=new I([]);a.height=n;const o=Math.ceil(i/s),c=o*Math.ceil(Math.sqrt(s));O(e,t,r,c,this.compareMinX);for(let l=t;l<=r;l+=c){const t=Math.min(l+c-1,r);O(e,l,t,o,this.compareMinY);for(let r=l;r<=t;r+=o){const i=Math.min(r+o-1,t);a.children.push(this._build(e,r,i,n-1))}}return l(a,this.toBBox),a}_chooseSubtree(e,t,r,n){for(;n.push(t),!0!==t.leaf&&n.length-1!==r;){let r,n=1/0,i=1/0;for(let s=0,a=t.children.length;s<a;s++){const a=t.children[s],o=p(a),l=b(e,a)-o;l<i?(i=l,n=o<n?o:n,r=a):l===i&&o<n&&(n=o,r=a)}t=r||t.children[0]}return t}_insert(e,t,r){const n=r?e:(0,this.toBBox)(e);v.clear();const i=this._chooseSubtree(n,this.data,t,v);for(i.children.push(e),u(i,n);t>=0&&v.data[t].children.length>this._maxEntries;)this._split(v,t),t--;this._adjustParentBBoxes(n,v,t)}_split(e,t){const r=e.data[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);const s=this._chooseSplitIndex(r,i,n);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const a=r.children.splice(s,r.children.length-s),o=r.leaf?new S(a):new I(a);o.height=r.height,l(r,this.toBBox),l(o,this.toBBox),t?e.data[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=new I([e,t]),this.data.height=e.height+1,l(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let n,i,s;n=i=1/0;for(let a=t;a<=r-t;a++){const t=c(e,0,a,this.toBBox),o=c(e,a,r,this.toBBox),l=m(t,o),u=p(t)+p(o);l<n?(n=l,s=a,i=u<i?u:i):l===n&&u<i&&(i=u,s=a)}return s}_chooseSplitAxis(e,t,r){const n=e.leaf?this.compareMinX:h,i=e.leaf?this.compareMinY:d;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)}_allDistMargin(e,t,r,n){e.children.sort(n);const i=this.toBBox,s=c(e,0,t,i),a=c(e,r-t,r,i);let o=f(s)+f(a);for(let l=t;l<r-t;l++){const t=e.children[l];u(s,e.leaf?i(t):t),o+=f(s)}for(let l=r-t-1;l>=t;l--){const t=e.children[l];u(a,e.leaf?i(t):t),o+=f(a)}return o}_adjustParentBBoxes(e,t,r){for(let n=r;n>=0;n--)u(t.data[n],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const r=e.data[t];if(0===r.children.length)if(t>0){const n=e.data[t-1],s=n.children;s.splice(Object(i.e)(s,r,s.length,n.indexHint),1)}else this.clear();else l(r,this.toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){c(e,0,e.children.length,t,e)}function c(e,t,r,n,i){i||(i=new S([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,a=t;a<r;a++)s=e.children[a],u(i,e.leaf?n(s):s);return i}function u(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function h(e,t){return e.minX-t.minX}function d(e,t){return e.minY-t.minY}function p(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function b(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function m(e,t){const r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,s-n)}function y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function O(e,t,r,i,s){const o=[t,r];for(;o.length;){const t=Object(n.d)(o.pop()),r=Object(n.d)(o.pop());if(t-r<=i)continue;const l=r+Math.ceil((t-r)/i/2)*i;Object(a.a)(e,l,r,t,s),o.push(r,l,l,t)}}const j=new s.a,_=new s.a,v=new s.a,x=new s.a({deallocator:void 0});class w extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new i.a}}class S extends w{constructor(e){super(),this.children=e,this.leaf=!0}}class I extends w{constructor(e){super(),this.children=e,this.leaf=!1}}}}]);