(function(){var e={"esri/views/3d/webgl-engine/materials/CheckerBoardMaterial":"+VdG","arcgis-js-api/core/libs/earcut/earcut":"1E+e","esri/core/libs/earcut/earcut":"1E+e","esri/views/3d/interactive/measurementTools/areaMeasurement3D/PathChanges":"1Z6g","esri/views/3d/interactive/measurementTools/areaMeasurement3D/MeasurementData":"DQU7","esri/widgets/AreaMeasurement3D":"KBew","esri/views/3d/interactive/measurementTools/support/setUtils":"P7eF","esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DController":"Q51V","esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DView":"ar2R","esri/views/3d/interactive/measurementTools/support/measurementUtils":"dXVO","esri/widgets/AreaMeasurement3D/AreaMeasurement3DViewModel":"e/p1","esri/views/3d/interactive/measurementTools/support/Path":"lVYI","esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DModel":"mxT5","esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DTool":"t8Uz","esri/views/3d/webgl-engine/shaders/CheckerBoardTechnique":"z9Z5","esri/views/3d/webgl-engine/shaders/CheckerBoard.glsl":"zmRx"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{"+VdG":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("tUyH"),r("FNtW"),r("LZD4"),r("s6rJ"),r("s6rJ"),r("z9Z5")],void 0===(i=(function(e,t,r,n,i,a,o,s,l){"use strict";var d=function(e){function t(t,r){var n=e.call(this,r)||this;return n.techniqueConfig=new l.CheckerBoardTechniqueConfiguration,n.params=o.copyParameters(t,h),n}return r.__extends(t,e),t.prototype.dispose=function(){},t.prototype.getPassParameters=function(){return this.params},t.prototype.getTechniqueConfig=function(){return this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig},t.prototype.setParameterValues=function(e){o.updateParameters(this.params,e)&&this.parametersChanged()},t.prototype.intersect=function(e,t,r,n,i,a,o){return s.intersectTriangleGeometry(e,t,n,i,a,void 0,o)},t.prototype.getGLMaterial=function(e){return 0===e.output?new c(e):void 0},t.prototype.createBufferWriter=function(){return new a.DefaultBufferWriter(a.PositionUVLayout)},t}(i.Material),c=function(e){function t(t){var r=e.call(this,t)||this;return r.updateParameters(),r}return r.__extends(t,e),t.prototype.updateParameters=function(){this.technique=this.techniqueRep.acquireAndReleaseExisting(l.CheckerBoardTechnique,this.material.getTechniqueConfig(),this.technique)},t.prototype.beginSlot=function(e){var t=3;return this.technique.configuration.transparent&&(t=this.technique.configuration.writeDepth?5:8),e===t},t.prototype.bind=function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)},t}(n.GLMaterial),h={size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1};return d}).apply(null,n))||(e.exports=i)},"1E+e":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";function r(e,t,r,n,i){var a;if(i===u(e,t,r,n)>0)for(var o=t;o<r;o+=n)a=s(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=s(o,e[o],e[o+1],a);return a&&v(a,a.next)&&(l(a),a=a.next),a}function n(e,t){if(void 0===t&&(t=e),!e)return e;var r,n=e;do{if(r=!1,n.steiner||!v(n,n.next)&&0!==h(n.prev,n,n.next))n=n.next;else{if(l(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function i(e,t,r,s,d,c,h){if(void 0===h&&(h=0),e){!h&&c&&(e=function e(t,r,n,i){for(var a=void 0;a!==t;a=a.next){if(null===(a=a||t).z&&(a.z=_(a.x,a.y,r,n,i)),a.prev.next!==a||a.next.prev!==a)return a.prev.next=a,a.next.prev=a,e(t,r,n,i);a.prevZ=a.prev,a.nextZ=a.next}return t.prevZ.nextZ=null,t.prevZ=null,function(e){for(var t,r=1;;){var n=e,i=void 0;e=null,t=null;for(var a=0;n;){a++,i=n;for(var o=0;o<r&&i;o++)i=i.nextZ;for(var s=r;o>0||s>0&&i;){var l=void 0;0===o?(l=i,i=i.nextZ,s--):0!==s&&i?n.z<=i.z?(l=n,n=n.nextZ,o--):(l=i,i=i.nextZ,s--):(l=n,n=n.nextZ,o--),t?t.nextZ=l:e=l,l.prevZ=t,t=l}n=i}if(t.nextZ=null,r*=2,a<2)return e}}(t)}(e,s,d,c));for(var p=e;e.prev!==e.next;){var u=e.prev,m=e.next;if(c?o(e,s,d,c):a(e))t.push(u.index/r),t.push(e.index/r),t.push(m.index/r),l(e),e=m.next,p=m.next;else if((e=m)===p){h?1===h?i(e=y(e,t,r),t,r,s,d,c,2):2===h&&b(e,t,r,s,d,c):i(n(e),t,r,s,d,c,1);break}}}}function a(e){var t=e.prev,r=e,n=e.next;if(h(t,r,n)>=0)return!1;for(var i=e.next.next,a=i,o=0;i!==e.prev&&(0===o||i!==a);){if(o++,m(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&h(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function o(e,t,r,n){var i=e.prev,a=e,o=e.next;if(h(i,a,o)>=0)return!1;for(var s=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=_(i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,t,r,n),c=_(s,l,t,r,n),p=e.prevZ,u=e.nextZ;p&&p.z>=d&&u&&u.z<=c;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&h(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,u!==e.prev&&u!==e.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,u.x,u.y)&&h(u.prev,u,u.next)>=0)return!1;u=u.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&h(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;u&&u.z<=c;){if(u!==e.prev&&u!==e.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,u.x,u.y)&&h(u.prev,u,u.next)>=0)return!1;u=u.nextZ}return!0}function s(e,t,r,n){var i=new w(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function l(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function d(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function c(e,t){if(t=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var l,d=r,c=r.x,h=r.y,p=1/0;for(n=r.next;n!==d;)i>=n.x&&n.x>=c&&i!==n.x&&m(a<h?i:o,a,c,h,a<h?o:i,a,n.x,n.y)&&((l=Math.abs(a-n.y)/(i-n.x))<p||l===p&&n.x>r.x)&&g(n,e)&&(r=n,p=l),n=n.next;return r}(e,t)){var r=L(t,e);n(r,r.next)}}function h(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function p(e,t,r,n){return!!(v(e,t)&&v(r,n)||v(e,n)&&v(r,t))||h(e,t,r)>0!=h(e,t,n)>0&&h(r,n,e)>0!=h(r,n,t)>0}function u(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function m(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function g(e,t){return h(e.prev,e,e.next)<0?h(e,t,e.next)>=0&&h(e,e.prev,t)>=0:h(e,t,e.prev)<0||h(e,e.next,t)<0}function _(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v(e,t){return e.x===t.x&&e.y===t.y}function f(e,t){return e.x-t.x}function y(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!v(i,a)&&p(i,n,n.next,a)&&g(i,a)&&g(a,i)&&(t.push(i.index/r),t.push(n.index/r),t.push(a.index/r),l(n),l(n.next),n=e=a),n=n.next}while(n!==e);return n}function b(e,t,r,a,o,s){var l=e;do{for(var d=l.next.next;d!==l.prev;){if(l.index!==d.index&&x(l,d)){var c=L(l,d);return l=n(l,l.next),c=n(c,c.next),i(l,t,r,a,o,s),void i(c,t,r,a,o,s)}d=d.next}l=l.next}while(l!==e)}function x(e,t){return e.next.index!==t.index&&e.prev.index!==t.index&&!function(e,t){var r=e;do{if(r.index!==e.index&&r.next.index!==e.index&&r.index!==t.index&&r.next.index!==t.index&&p(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&g(e,t)&&g(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function L(e,t){var r=new w(e.index,e.x,e.y),n=new w(t.index,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}Object.defineProperty(t,"__esModule",{value:!0}),t.deviation=t.earcut=void 0,t.earcut=function(e,t,a){var o,s,l,h,p,u=t&&t.length,m=u?t[0]*a:e.length,g=r(e,0,m,a,!0),_=new Array;if(!g||g.next===g.prev)return _;if(u&&(g=function(e,t,i,a){for(var o=new Array,s=0,l=t.length;s<l;s++){var h=r(e,t[s]*a,s<l-1?t[s+1]*a:e.length,a,!1);h===h.next&&(h.steiner=!0),o.push(d(h))}o.sort(f);for(var p=0,u=o;p<u.length;p++)c(u[p],i),i=n(i,i.next);return i}(e,t,g,a)),e.length>80*a){o=l=e[0],s=h=e[1];for(var v=a;v<m;v+=a){var y=e[v],b=e[v+1];o=Math.min(o,y),s=Math.min(s,b),l=Math.max(l,y),h=Math.max(h,b)}p=0!==(p=Math.max(l-o,h-s))?1/p:0}return i(g,_,a,o,s,p),_},t.deviation=function(e,t,r,n){var i=t&&t.length,a=Math.abs(u(e,0,i?t[0]*r:e.length,r));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(u(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r));var l=0;for(o=0;o<n.length;o+=3){var d=n[o]*r,c=n[o+1]*r,h=n[o+2]*r;l+=Math.abs((e[d]-e[h])*(e[c+1]-e[d+1])-(e[d]-e[c])*(e[h+1]-e[d+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)};var w=function(e,t,r){this.index=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}).apply(null,n))||(e.exports=i)},"1Z6g":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("P7eF")],void 0===(i=(function(e,t,r){"use strict";return function(){function e(){this.change="none",this.updatedVertices=new Set}return e.prototype.fullChange=function(){this.change="full"},e.prototype.incrementalChange=function(e){"none"===this.change&&(this.change="incremental"),this.updatedVertices.add(e)},e.prototype.clear=function(){this.change="none",this.updatedVertices.clear()},e.prototype.assign=function(e){this.change=e.change,this.updatedVertices=r.clone(e.updatedVertices)},e.prototype.merge=function(e){var t=this;switch(this.change){case"none":this.assign(e);break;case"full":break;case"incremental":"incremental"===e.change?e.updatedVertices.forEach((function(e){t.updatedVertices.add(e)})):"full"===e.change&&(this.change="full")}},e}()}).apply(null,n))||(e.exports=i)},DQU7:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xoE+"),r("GZXg"),r("1E+e"),r("W9tT"),r("DIqE"),r("0LE5"),r("Rdxj"),r("O7NG"),r("Z4y+"),r("KDna"),r("Thzy"),r("dXVO"),r("XHwE"),r("AzkI"),r("UidR"),r("mmEe")],void 0===(i=(function(e,t,r,n,i,a,o,s,l,d,c,h,p,u,m,g,_,v){"use strict";function f(e,t){for(var r=new Float64Array(e.length*t),n=0;n<e.length;++n)for(var i=e[n],a=0;a<t;++a)r[n*t+a]=i[a];return r}return function(){function e(){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=l.vec3f64.create(),this.areaCentroidRenderCoords=l.vec3f64.create(),this.geodesicAreaCentroidRenderCoords=l.vec3f64.create(),this._length=0,this._centroidRenderCoords=l.vec3f64.create(),this._planeWorldCoords=d.vec4f64.create(),this._worldUp=l.vec3f64.create(),this._worldTangent=l.vec3f64.create(),this._frame=[l.vec3f64.create(),l.vec3f64.create(),l.vec3f64.create()],this._tempU=l.vec3f64.create(),this._tempV=l.vec3f64.create(),this._tempVec3=l.vec3f64.create(),this._tempSphere={center:l.vec3f64.create(),radius:0}}return e.prototype.update=function(e,t,r,i,a,o,l,d){t.clear(),this._resize(e.length);for(var c=v.canProject(r.spatialReference,v.SphericalECEFSpatialReference)&&v.canProjectToWGS84ComparableLonLat(r.spatialReference),h=this.positionsGeographic,p=this.positionsWorldCoords,u=this.positionsRenderCoords,m=this.positionsSpherical,g=0;g<e.length;++g){var f=e.vertex(g);_.pointToVector(f,p[g],l),_.pointToVector(f,u[g],o),c&&(_.pointToWGS84ComparableLonLat(f,h[g]),_.pointToVector(f,m[g],v.SphericalECEFSpatialReference),s.vec3.normalize(m[g],m[g]))}var y=this._updatePathLengths(a);if(this.pathLength=this._length>0?new n(i.normalizeDistance(y),"meters"):null,c){var b=this._updateGeodesicPathLengths(a);this.geodesicPathLength=this._length>0?new n(b,"meters"):null}else this.geodesicPathLength=null;if(!a)return this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),void this.geodesicIntersectingSegments.clear();this._updateArea(r,i,o,l,d),c&&this._updateGeodesicArea(r)},e.prototype._resize=function(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(l.vec3f64.create()),this.positionsRenderCoords.push(l.vec3f64.create()),this.positionsProjectedWorldCoords.push(o.vec2f64.create()),this.positionsFittedRenderCoords.push(l.vec3f64.create()),this.positionsGeographic.push(l.vec3f64.create()),this.positionsSpherical.push(l.vec3f64.create()),this.positionsStereographic.push(o.vec2f64.create()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length},e.prototype._updatePathLengths=function(e){for(var t=this.positionsWorldCoords,r=this.pathSegmentLengths,n=0,i=0;i<this._length;++i){var a=r[i]=s.vec3.distance(t[i],t[(i+1)%this._length]);(i<this._length-1||e)&&(n+=a)}return n},e.prototype._updateGeodesicPathLengths=function(e){for(var t=this.positionsGeographic,r=this.geodesicPathSegmentLengths,n=0,i=0;i<this._length;++i){var a=r[i]=u.segmentLengthGeodesicVector(t[i],t[(i+1)%this._length]);(i<this._length-1||e)&&(n+=a)}return n},e.prototype._updateArea=function(e,t,r,i,o){var l=e.renderCoordsHelper,d=this.positionsWorldCoords,c=this.positionsRenderCoords,h=this.positionsProjectedWorldCoords,p=this.positionsFittedRenderCoords,_=this._planeWorldCoords,f=this._centroidRenderCoords;m.midpoint(c,f),l.worldUpAtPosition(f,this._worldUp),l.worldBasisAtPosition(f,0,this._worldTangent),v.transformDirection(f,this._worldUp,r,this._worldUp,i),v.transformDirection(f,this._worldTangent,r,this._worldTangent,i),u.bestFitPlane(d,_),this.fittingMode=this._selectFittingMode(_,d,this._worldUp,o);var y=0;if("horizontal"===this.fittingMode){var b=-1/0;c.forEach((function(e,t){var r=l.getAltitude(c[t]);r>b&&(b=r,y=t)}))}var x=d[y],L=_,w=this._worldTangent;"horizontal"===this.fittingMode?L=this._worldUp:"vertical"===this.fittingMode&&(w=this._worldUp,g.makeOrthonormal(_,this._worldUp,L=this._tempVec3)),s.vec3.copy(this._frame[2],L),g.makeOrthonormal(w,L,this._frame[0]),s.vec3.cross(this._frame[1],this._frame[0],this._frame[2]),s.vec3.negate(this._frame[1],this._frame[1]);for(var M=this._tempVec3,S=this._tempU,P=this._tempV,O=0;O<this._length;++O){var C=h[O],D=p[O];s.vec3.subtract(M,d[O],x),a.vec2.set(C,s.vec3.dot(this._frame[0],M),s.vec3.dot(this._frame[1],M)),s.vec3.scale(S,this._frame[0],C[0]),s.vec3.scale(P,this._frame[1],C[1]),s.vec3.add(M,S,P),s.vec3.add(M,M,x),v.vectorToVector(M,i,D,r)}this.perimeterLength=this._length>0?new n(t.normalizeDistance(this._updatePerimeterLengths()),"meters"):null,m.midpoint(p,this.areaCentroidRenderCoords),v.vectorToVector(this.areaCentroidRenderCoords,r,this.areaCentroidWorldCoords,i),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new n(t.normalizeArea(this._computeArea()),"square-meters"):null},e.prototype._updateGeodesicArea=function(e){var t=e.renderCoordsHelper,r=this.positionsSpherical,i=this.positionsStereographic,o=this._tempVec3,l=u.fitHemisphere(r,o);if(l){var d=this._tempU,c=this._tempV;g.tangentFrame(o,d,c);for(var p=0;p<this._length;++p){var m=s.vec3.dot(r[p],d),_=s.vec3.dot(r[p],c),f=s.vec3.dot(r[p],o);a.vec2.set(i[p],m/f,_/f)}s.vec3.scale(o,o,h.earthRadius),t.toRenderCoords(o,v.SphericalECEFSpatialReference,this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=l&&0===this.geodesicIntersectingSegments.size?new n(this._computeGeodesicArea(),"square-meters"):null}else this.geodesicArea=null},e.prototype._updatePerimeterLengths=function(){for(var e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths,r=0,n=0;n<this._length;++n)r+=t[n]=a.vec2.distance(e[n],e[(n+1)%this._length]);return r},e.prototype._updateIntersectingSegments=function(){var e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(var r=0;r<this._length;++r)for(var n=r+2;n<this._length;++n)(n+1)%this._length!==r&&p.segmentIntersects(e[r],e[(r+1)%this._length],e[n],e[(n+1)%this._length])&&(t.add(r),t.add(n))},e.prototype._computeArea=function(){for(var e=this.positionsProjectedWorldCoords,t=f(e,2),r=this.triangleIndices=new Uint32Array(i.earcut(t,[],2)),n=0,a=0;a<r.length;a+=3)n+=u.triangleAreaEuclidean(e[r[a]],e[r[a+1]],e[r[a+2]]);return n},e.prototype._updateGeodesicIntersectingSegments=function(){var e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(var r=0;r<this._length;++r)for(var n=r+2;n<this._length;++n)(n+1)%this._length!==r&&p.segmentIntersects(e[r],e[(r+1)%this._length],e[n],e[(n+1)%this._length])&&(t.add(r),t.add(n))},e.prototype._computeGeodesicArea=function(){for(var e=this.positionsGeographic,t=f(this.positionsStereographic,2),r=this.geodesicTriangleIndices=new Uint32Array(i.earcut(t,[],2)),n=0,a=0;a<r.length;a+=3)n+=u.triangleAreaGeodesic(e[r[a]],e[r[a+1]],e[r[a+2]],c.WGS84);return n},e.prototype._selectFittingMode=function(e,t,n,i){var a=t.map((function(t){return Math.abs(u.planePointDistance(e,t))})).reduce((function(e,t){return Math.max(e,t)}),0);u.boundingSphere(t,this._tempSphere);var o=a/(2*this._tempSphere.radius),l="horizontal";return o<i.maxRelativeErrorCoplanar?l="oblique":o<i.maxRelativeErrorAlmostCoplanar&&(l=Math.abs(s.vec3.dot(n,e))>Math.cos(r.deg2rad(i.verticalAngleThreshold))?"horizontal":"vertical"),l},e}()}).apply(null,n))||(e.exports=i)},KBew:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("qMld"),r("Vx27"),r("RHxK"),r("e/p1"),r("bC3G")],void 0===(i=(function(e,t,r,n,i,a,o,s){"use strict";var l="esri-area-measurement-3d__measurement-item",d="esri-area-measurement-3d__measurement-item-title",c="esri-area-measurement-3d__measurement-item-value";return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.view=null,n.visible=null,n.iconClass="esri-icon-measure-area",n.label=void 0,n.messages=null,n.viewModel=new o,n.unitOptions=null,n.unit=null,n}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.viewModel.isSupported,r=this.viewModel.active,n="disabled"===this.viewModel.state,i="measuring"===this.viewModel.state||"measured"===this.viewModel.state,a=this.viewModel.measurement,o=this.messages,h=r&&"ready"===this.viewModel.state?s.tsx("section",{key:"esri-area-measurement-3d__hint",class:"esri-area-measurement-3d__hint"},s.tsx("p",{class:"esri-area-measurement-3d__hint-text"},o.hint)):null,p=t?null:s.tsx("section",{key:"esri-area-measurement-3d__unsupported",class:"esri-area-measurement-3d__panel--error"},s.tsx("p",null,o.unsupported)),u=function(t,r,n){switch(r.state){case"available":return s.tsx("div",{key:n+"-enabled",class:l},s.tsx("span",{class:d},t),s.tsx("span",{class:c},r.text));case"unavailable":return s.tsx("div",{key:n+"-disabled",class:e.classes(l,"esri-area-measurement-3d__measurement-item--disabled")},s.tsx("span",{class:d},t));case"invalid":return s.tsx("div",{key:n+"-enabled",class:l},s.tsx("span",{class:d},t),s.tsx("span",{class:c},o.notApplicable))}},m=i?s.tsx("section",{key:"esri-area-measurement-3d__measurement",class:"esri-area-measurement-3d__measurement"},u(o.area,a.area,"area"),u(o.perimeterLength,a.perimeterLength,"perimeter-length")):null,g=this.id+"__units",_=s.tsx("label",{class:"esri-area-measurement-3d__units-label",for:g},o.unit),v=s.tsx("div",{class:"esri-area-measurement-3d__units-select-wrapper"},s.tsx("select",{class:"esri-area-measurement-3d__units-select esri-select",id:g,onchange:this._changeUnit,bind:this},this.viewModel.unitOptions.map((function(t){return s.tsx("option",t===e.viewModel.unit?{key:t,value:t,selected:!0}:{key:t,value:t},o.units[t])})))),f=i?s.tsx("section",{key:"esri-area-measurement-3d__units",class:"esri-area-measurement-3d__units"},_,v):null,y=i?s.tsx("div",{key:"settings",class:"esri-area-measurement-3d__settings"},f):null,b=!t||r&&!i?null:s.tsx("div",{class:"esri-area-measurement-3d__actions"},s.tsx("button",{disabled:n,class:this.classes("esri-button esri-button--secondary","esri-area-measurement-3d__clear-button",n&&"esri-button--disabled"),bind:this,onclick:this._newMeasurement,type:"button"},o.newMeasurement)),x=this.visible?s.tsx("div",{class:"esri-area-measurement-3d__container"},p,h,y,m,b):null;return s.tsx("div",{key:"",class:this.classes("esri-area-measurement-3d","esri-widget","esri-widget--panel"),role:"presentation"},x)},t.prototype._newMeasurement=function(){n.ignoreAbortErrors(this.viewModel.start())},t.prototype._changeUnit=function(e){var t=e.target,r=t.options[t.selectedIndex];r&&(this.unit=r.value)},r.__decorate([i.aliasOf("viewModel.view")],t.prototype,"view",void 0),r.__decorate([i.aliasOf("viewModel.visible"),s.renderable()],t.prototype,"visible",void 0),r.__decorate([i.aliasOf("viewModel.active"),s.renderable()],t.prototype,"active",void 0),r.__decorate([i.property()],t.prototype,"iconClass",void 0),r.__decorate([i.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),r.__decorate([i.property(),s.renderable(),s.messageBundle("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],t.prototype,"messages",void 0),r.__decorate([i.property({type:o}),s.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurement"])],t.prototype,"viewModel",void 0),r.__decorate([i.aliasOf("viewModel.unitOptions")],t.prototype,"unitOptions",void 0),r.__decorate([i.aliasOf("viewModel.unit")],t.prototype,"unit",void 0),r.__decorate([s.accessibleHandler()],t.prototype,"_newMeasurement",null),r.__decorate([s.accessibleHandler()],t.prototype,"_changeUnit",null),r.__decorate([i.subclass("esri.widgets.AreaMeasurement3D")],t)}(a)}).apply(null,n))||(e.exports=i)},P7eF:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function(e){var t=new Set;return e.forEach((function(e){t.add(e)})),t}}).apply(null,n))||(e.exports=i)},Q51V:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("eIBl"),r("LxLY"),r("jBNx"),r("xdO3"),r("B3XD"),r("ar2R"),r("bz+r")],void 0===(i=(function(e,t,r,n,i,a,o,s,l){"use strict";function d(e){return"mouse"!==e.pointerType||0===e.button}return function(){function e(e,t,n){this._manipulators=n,this._handles=new r,this._tempPickRequest=new s.PickRequest,this.model=e,this.view=t,this.model.reset(),this._setupManipulators()}return e.prototype.destroy=function(){this._handles.destroy(),this._handles=null},e.prototype.handleInputEvent=function(e){switch(e.type){case"immediate-click":this._handleImmediateClick(e);break;case"pointer-move":this._handlePointerMove(e);break;case"drag":this._handleDrag(e);break;case"key-down":this._handleKeyDown(e)}},e.prototype._setupManipulators=function(){var e=this,t=function(e){return"manipulator-"+e},r=0,i=function(i,s){e._handles.add([l.createManipulatorDragEventPipeline(s,(function(t,s,l){var d=o.hideManipulatorWhileDragging(t),c=n.unwrap(e.view.manipulatorIdToVertexId(i));s.next(function(t){return function(i){return"start"===i.action&&(r++,e.model.lastDraggedVertex=n.unwrap(e.view.manipulatorIdToVertexId(t)),"measured"===e.model.state&&(e.model.state="editing")),i}}(i)).next(d).next((function(t){return"end"===t.action?(0==--r&&"editing"===e.model.state&&(e.model.state="measured"),null):t})).next(e.view.screenToMap3D()).next((function(r){t.location=r.mapEnd,e.model.path.update(c,a.clonePoint(r.mapEnd))}));var h=a.clonePoint(e.model.path.vertex(c));l.next(d).next((function(){e.model.path.update(c,h),t.location=h}))})),s.events.on("double-click",(function(t){d(t)&&("drawing"===e.model.state&&e.model.finishMeasurement(),t.stopPropagation())}))],t(i))};this._manipulators.forEach((function(e){i(e.id,e.manipulator)})),this._handles.add([this._manipulators.on("after-add",(function(e){var t=e.item;i(t.id,t.manipulator)})),this._manipulators.on("after-remove",(function(r){!function(r){e._handles.remove(t(r))}(r.item.id)}))])},e.prototype._handleDrag=function(e){"editing"===this.model.state&&e.stopPropagation()},e.prototype._handleImmediateClick=function(e){if(d(e)){var t=i.createScreenPointFromEvent(e);if(this.model.active)switch(this.model.state){case"initial":this._addVertexAt(t)&&(this.model.state="drawing",e.stopPropagation());break;case"drawing":var r=this.view.vertexHandleAt(t,e.pointerType);if(n.isNone(r)){if(this._addVertexAt(t))return}else 0===r&&(this.model.finishMeasurement(),e.stopPropagation())}"mouse"===e.pointerType&&this._hoverAt(t)}},e.prototype._handlePointerMove=function(e){if("mouse"===e.pointerType){var t=i.createScreenPointFromEvent(e);this._hoverAt(t)}},e.prototype._handleKeyDown=function(e){"Enter"===e.key&&"drawing"===this.model.state&&(this.model.finishMeasurement(),e.stopPropagation())},e.prototype._hoverAt=function(e){if(this.view.requiresCursorPoint){var t=this._pick(e);t.mapPoint&&(this.model.cursorPoint=t.mapPoint)}else this.model.cursorPoint=null},e.prototype._addVertexAt=function(e){var t=this._pick(e);return!!t.mapPoint&&(this.model.path.add(t.mapPoint),!0)},e.prototype._pick=function(e){var t=this._tempPickRequest;return t.screenPoint=e,this.view.pick(t)},e}()}).apply(null,n))||(e.exports=i)},ar2R:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("eIBl"),r("LxLY"),r("jBNx"),r("FXVB"),r("1m5D"),r("0LE5"),r("Rdxj"),r("5T2R"),r("B3XD"),r("QRfi"),r("xFSb"),r("vt78"),r("C7wT"),r("XHwE"),r("hX2R"),r("mmEe"),r("JjCO"),r("ys4y"),r("AgDx"),r("4ziW"),r("m4lJ"),r("ZO6V"),r("ZJC8"),r("+VdG"),r("FbvD"),r("RC9r"),r("X0Jx")],void 0===(i=(function(e,t,r,n,i,a,o,s,l,d,c,h,p,u,m,g,_,v,f,y,b,x,L,w,M,S,P,O,C){"use strict";var D={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},A=function(){function e(e,t,r){void 0===t&&(t=new C.ManipulatorCollection),void 0===r&&(r={}),this._model=e,this._manipulators=t,this.vertexManipulators=[],this._visible=!1,this._laserLineRenderer=null,this._cursorManipulator=null,this._pathSegmentObjects=[],this._perimeterSegmentObjects=[],this._projectionLineObjects=[],this._areaLabel=new h(16),this._pathLengthLabel=new h(12),this._cursorSegmentLengthLabel=new h(12),this._perimeterLengthLabel=new h(12),this._pathLabelSegments=[],this._perimeterLabelSegments=[],this._cursorSegmentLengthLabelSegment=new p,this._listenerHandles=null,this._origin=l.vec3f64.create(),this._originTransform=o.mat4f64.create(),this._tempStartPosition=l.vec3f64.create(),this._tempEndPosition=l.vec3f64.create(),this._tempHandlePosition=l.vec3f64.create(),this._sceneView=this._model.sceneView,this._params=g.copyParameter(D,r),this._layer=new w("path-measurement-tool",{isPickable:!1}),this._createMaterials(),this._createObjects(),this._intersector=new L.Intersector(this._sceneView.state.mode),this._intersector.options.store=0;var n=d.createSphereManipulator(this._sceneView,this._params.handleColor,this._params.handleOpacity);n.available=!1,n.radius=this._params.handleRadius,n.interactive=!1,this._manipulators.add(n),this._cursorManipulator=n}return e.prototype.destroy=function(){this.hide()},Object.defineProperty(e.prototype,"requiresCursorPoint",{get:function(){return("initial"===this._model.state||"drawing"===this._model.state)&&this._model.active},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){e?this.show():this.hide()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"testData",{get:function(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel},laserLineRenderer:this._laserLineRenderer}},enumerable:!1,configurable:!0}),e.prototype.show=function(){if(!this._visible){this._visible=!0;var e=this._sceneView._stage;this._laserLineRenderer=new _.LaserLineRenderer(this._sceneView.renderCoordsHelper,{glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,globalAlpha:this._params.laserLineGlobalAlpha}),e.addRenderPlugin(this._laserLineRenderer.renderSlots,this._laserLineRenderer),this._addToStage(e),this._areaLabel.addToView(this._sceneView),this._pathLengthLabel.addToView(this._sceneView),this._cursorSegmentLengthLabel.addToView(this._sceneView),this._perimeterLengthLabel.addToView(this._sceneView),this._initializeListeners(),this._updateAll(this._model.viewData)}},e.prototype.hide=function(){if(this._visible){this._visible=!1;var e=this._sceneView._stage;e.removeRenderPlugin(this._laserLineRenderer),this._laserLineRenderer=null,this._destroyListeners(),this._updatePathLength(0),this._removeFromStage(e),this._areaLabel.removeFromView(this._sceneView),this._pathLengthLabel.removeFromView(this._sceneView),this._cursorSegmentLengthLabel.removeFromView(this._sceneView),this._perimeterLengthLabel.removeFromView(this._sceneView),this._sceneView.cursor=null}},e.prototype.vertexHandleAt=function(e,t){var r=this._manipulators.intersect(e,t);return n.isSome(r)?this.manipulatorIdToVertexId(r):null},e.prototype.manipulatorIdToVertexId=function(e){for(var t=0;t<this.vertexManipulators.length;t++)if(e===this.vertexManipulators[t].id)return t;return null},e.prototype.pick=function(t){var r=this._sceneView.spatialReference,n=i.screenPointObjectToArray(t.screenPoint);this._sceneView.sceneIntersectionHelper.intersectToolIntersectorScreen(n,this._intersector);var a=this._intersector.results.min,o=l.vec3f64.create();if(!a.getIntersectionPoint(o))return new e.PickResult;var s=this._sceneView.renderCoordsHelper.fromRenderCoords(o,r);return new e.PickResult("TerrainRenderer"===a.intersector?"surface":"feature",o,s)},e.prototype.overlappingHandles=function(e,t){return g.pointToPointScreenDistance(e,t,this._sceneView)<=this._params.handleRadius},e.prototype.screenToMap3D=function(){return c.screenToMap3D(this._sceneView)},e.prototype._createMaterials=function(){this._pathLineMaterial=new O({width:this._params.pathLineWidth,color:this._params.pathLineColor,polygonOffset:!0},"path-line"),this._pathLineMaterial.renderOccluded=4,this._intersectingPathLineMaterial=new O({width:this._params.pathLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0},"intersecting-path-line"),this._intersectingPathLineMaterial.renderOccluded=4,this._perimeterLineMaterial=new O({width:this._params.perimeterLineWidth,color:this._params.perimeterLineColor,polygonOffset:!0},"perimeter-line"),this._perimeterLineMaterial.renderOccluded=4,this._intersectingPerimeterLineMaterial=new O({width:this._params.perimeterLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0},"intersecting-perimeter-line"),this._intersectingPerimeterLineMaterial.renderOccluded=4,this._projectionLineMaterial=new O({width:this._params.projectionLineWidth,color:this._params.projectionLineColor,polygonOffset:!0,stipplePattern:P.createStipplePatternSimple(this._params.projectionLineStippleSize),stippleIntegerRepeats:!1},"projection-line"),this._projectionLineMaterial.renderOccluded=4,this._checkerBoardMaterial=new S({color1:this._params.areaColor1,color2:this._params.areaColor2,transparent:!0,writeDepth:!1,polygonOffset:!0},"checker-board"),this._checkerBoardMaterial.renderOccluded=4},e.prototype._createObjects=function(){this._cursorSegmentObject=new M,this._areaObject=new M},e.prototype._addToStage=function(e){e.add(0,this._layer),e.add(3,this._pathLineMaterial),e.add(3,this._intersectingPathLineMaterial),e.add(3,this._perimeterLineMaterial),e.add(3,this._intersectingPerimeterLineMaterial),e.add(3,this._projectionLineMaterial),e.add(3,this._checkerBoardMaterial),e.addToViewContent([this._layer.id])},e.prototype._removeFromStage=function(e){e.removeFromViewContent([this._layer.id]),e.remove(0,this._layer.id),e.remove(3,this._pathLineMaterial.id),e.remove(3,this._intersectingPathLineMaterial.id),e.remove(3,this._perimeterLineMaterial.id),e.remove(3,this._intersectingPerimeterLineMaterial.id),e.remove(3,this._projectionLineMaterial.id),e.remove(3,this._checkerBoardMaterial.id)},e.prototype._syncViewData=function(e){var t=this;if(!this._visible)return"none";var r=e.pathChanges;"full"===r.change?this._updateAll(e):"incremental"===r.change&&(r.updatedVertices.forEach((function(r){var n=(r-1+t._model.path.length)%t._model.path.length;t._updatePathSegment(e,r),t._updatePathSegment(e,n),t._updateVertexHandle(e,r),t._updateArea(e),t._updatePerimeterSegments(e),t._updateProjectionLines(e),t._updateLaserLine(),t._updateLabels(e)})),r.updatedVertices.has(this._model.path.length-1)&&this._updateCursorSegment());var n=r.change;return r.clear(),n},e.prototype._updateAfterSyncViewData=function(e){var t=this._model.viewData;"full"!==this._syncViewData(t)&&e&&e(t)},e.prototype._updateOrigin=function(e){g.midpoint(e.positionsRenderCoords,this._origin),a.mat4.identity(this._originTransform),a.mat4.translate(this._originTransform,this._originTransform,this._origin)},e.prototype._updateAll=function(e){this._updateOrigin(e),this._updatePathLength(e.path.length),this._updatePathSegments(e),this._updatePerimeterSegments(e),this._updateHandles(e),this._updateArea(e),this._updateProjectionLines(e),this._updateLabels(e),this._updateLaserLine()},e.prototype._updateCameraDependent=function(e){this._updateHandles(e),this._updateProjectionLines(e),this._updateLabels(e)},e.prototype._updatePathLength=function(e){this._resizeObject3DArray(this._pathSegmentObjects,e),this._resizeObject3DArray(this._perimeterSegmentObjects,e),this._resizeManipulatorArray(this.vertexManipulators,e),g.resizeArray(this._pathLabelSegments,e,(function(){return new p})),g.resizeArray(this._perimeterLabelSegments,e,(function(){return new p}))},e.prototype._updatePathSegments=function(e){for(var t=0;t<this._pathSegmentObjects.length;++t)this._updatePathSegment(e,t);this._updateCursorSegment()},e.prototype._updatePathSegment=function(e,t){var r=e.path,n=this._pathSegmentObjects[t];e.validMeasurement||t<r.length-1?(this._createInterpolatedLineGeometry(n,e.intersectingSegments.has(t)?this._intersectingPathLineMaterial:this._pathLineMaterial,"path-segment",e.positionsRenderCoords[t],e.positionsRenderCoords[(t+1)%r.length],this._origin,this._originTransform,this._model.measurementMode,this._pathLabelSegments[t],e.validMeasurement?"center":"end"),this._addObject3D(n)):(n.removeAllGeometries(),this._removeObject3D(n))},e.prototype._updateCursorSegment=function(){var e=this._sceneView.renderCoordsHelper,t=this._model.path,r=this._cursorSegmentObject;t.length>0&&"drawing"===this._model.state&&this._model.cursorPoint?(e.toRenderCoords(t.back,this._tempStartPosition),e.toRenderCoords(this._model.cursorPoint,this._tempEndPosition),this._createInterpolatedLineGeometry(r,this._pathLineMaterial,"path-segment",this._tempStartPosition,this._tempEndPosition,this._origin,this._originTransform,this._model.measurementMode,this._cursorSegmentLengthLabelSegment,"end"),this._addObject3D(r)):(r.removeAllGeometries(),this._removeObject3D(r))},e.prototype._updatePerimeterSegments=function(e){for(var t=0;t<this._perimeterSegmentObjects.length;++t)this._updatePerimeterSegment(e,t)},e.prototype._updatePerimeterSegment=function(e,t){var r=this._perimeterSegmentObjects[t];e.validMeasurement&&"geodesic"!==this._model.measurementMode?(this._updatePerimeterSegmentObject(r,e.positionsFittedRenderCoords[t],e.positionsFittedRenderCoords[(t+1)%e.path.length],this._origin,this._originTransform,e.intersectingSegments.has(t),this._perimeterLabelSegments[t]),this._addObject3D(r)):(r.removeAllGeometries(),this._removeObject3D(r))},e.prototype._updatePerimeterSegmentObject=function(e,t,r,n,i,a,o){this._createInterpolatedLineGeometry(e,a?this._intersectingPerimeterLineMaterial:this._perimeterLineMaterial,"perimeter-segment",t,r,n,i,this._model.measurementMode,o)},e.prototype._updateHandles=function(e){for(var t=0;t<this.vertexManipulators.length;++t)this._updateVertexHandle(e,t);this._updateCursorHandle()},e.prototype._updateVertexHandle=function(e,t){this.vertexManipulators[t].manipulator.renderLocation=e.positionsRenderCoords[t]},e.prototype._updateCursorHandle=function(){var e=this._cursorManipulator;"drawing"===this._model.state&&this._model.cursorPoint?(e.available=!0,e.location=this._model.cursorPoint):e.available=!1},e.prototype._updateArea=function(e){switch(this._model.measurementMode){case"euclidean":this._updateAreaEuclidean(e);break;case"geodesic":this._updateAreaGeodesic()}},e.prototype._updateAreaEuclidean=function(e){var t=this,r=this._areaObject;if(e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices){var n=[],i=l.vec3f64.create();e.positionsFittedRenderCoords.forEach((function(e){s.vec3.subtract(i,e,t._origin),n.push(i[0],i[1],i[2])}));var a=[];e.positionsProjected.forEach((function(e){a.push(e[0],e[1])}));var o=new b.GeometryData({position:{size:3,data:n},uv0:{size:2,data:a}},{position:e.triangleIndices,uv0:e.triangleIndices}),d=new y(o,"area");r.removeAllGeometries(),r.addGeometry(d,this._checkerBoardMaterial,this._originTransform),this._addObject3D(r),this._checkerBoardMaterial.setParameterValues({size:[e.checkerSize,e.checkerSize]})}else r.removeAllGeometries(),this._removeObject3D(r)},e.prototype._updateAreaGeodesic=function(){var e=this._areaObject;e.removeAllGeometries(),this._removeObject3D(e)},e.prototype._updateProjectionLines=function(e){var t=e.path;this._resizeObject3DArray(this._projectionLineObjects,t.length);for(var r=0;r<t.length;++r)this._updateProjectionLine(e,r)},e.prototype._updateProjectionLine=function(e,t){var r=this._projectionLineObjects[t];if(r.removeAllGeometries(),e.validMeasurement&&"euclidean"===this._model.measurementMode){var n=l.vec3f64.create();s.vec3.subtract(n,this._model.viewData.positionsRenderCoords[t],this._origin);var i=l.vec3f64.create();s.vec3.subtract(i,this._model.viewData.positionsFittedRenderCoords[t],this._origin);var a=new y(x.createPolylineGeometry([n,i]),"projected-line");r.addGeometry(a,this._projectionLineMaterial,this._originTransform),this._addObject3D(r)}else this._removeObject3D(r)},e.prototype._updateLabels=function(e){var t=this,r=this._sceneView._stage.getCamera(),n=this._params.labelDistance,i=this._model,a="geodesic"===i.measurementMode,o="drawing"===i.state,s=function(e,r){return e.visible&&r.visible&&t._sceneView.overlay.overlaps(e.textItem,r.textItem)},l=this._areaLabel,d=u.positionLabelOnPoint(l,e.areaCentroid,r);l.text=i.areaLabel,l.visible=d&&e.validMeasurement&&0===e.intersectingSegments.size&&null!=i.areaLabel,d=u.positionLabelOnCorner(l=this._pathLengthLabel,this._pathLabelSegments[e.pathLengthLabelSegmentIndex],this._cursorSegmentLengthLabelSegment,n,r),l.text=i.pathLengthLabel,l.visible=d&&o&&i.path.length>0;var c=this._cursorSegmentLengthLabelSegment;if(d=u.positionLabelOnSegment(l=this._cursorSegmentLengthLabel,c,n,"bottom",r),l.text=i.cursorSegmentLengthLabel,l.visible=d&&o&&i.cursorSegmentLength&&0!==i.cursorSegmentLength.value,s(this._cursorSegmentLengthLabel,this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),s(this._pathLengthLabel,this._areaLabel)&&(this._pathLengthLabel.visible=!1),l=this._perimeterLengthLabel,i.validMeasurement&&0===e.intersectingSegments.size)for(var h=0;h<e.path.length;++h){var p=(e.perimeterLengthLabelSegmentIndex+h)%e.path.length;if(d=u.positionLabelOnSegment(l,c=a?this._pathLabelSegments[p]:this._perimeterLabelSegments[p],n,"top",r),l.text=i.perimeterLengthLabel,l.visible=d,!s(l,this._areaLabel))break;l.visible=!1}else l.visible=!1},e.prototype._getFocusPoint=function(){var e=this._model,t=this._model.lastDraggedVertex;switch(e.state){case"drawing":return e.cursorPoint?e.cursorPoint:e.path.vertex(n.isSome(t)?t:e.path.length-1);case"editing":return n.isSome(t)?e.path.vertex(t):null;default:return e.cursorPoint}},e.prototype._updateLaserLine=function(){var e=this._model,t=this._params.laserLineEnabled&&"measured"!==e.state&&e.active;this._laserLineRenderer.pointDistanceEnabled=!1,this._laserLineRenderer.lineVerticalPlaneEnabled=!1;var r=this._getFocusPoint();if(t&&r){var n=this._tempHandlePosition;this._sceneView.renderCoordsHelper.toRenderCoords(r,n),this._laserLineRenderer.heightManifoldTarget=n,this._laserLineRenderer.heightManifoldEnabled=!0}else this._laserLineRenderer.heightManifoldEnabled=!1},e.prototype._addObject3D=function(e){e.parentLayer||(this._layer.addObject(e),this._sceneView._stage.add(1,e))},e.prototype._removeObject3D=function(e){e.parentLayer&&(this._layer.removeObject(e),this._sceneView._stage.remove(1,e.id))},e.prototype._resizeObject3DArray=function(e,t){var r=this;g.resizeArray(e,t,(function(){return new M}),(function(e){r._removeObject3D(e)}))},e.prototype._resizeManipulatorArray=function(e,t){var r=this;g.resizeArray(e,t,(function(){var e=d.createSphereManipulator(r._sceneView,r._params.handleColor,r._params.handleOpacity);return e.radius=r._params.handleRadius,{id:r._manipulators.add(e),manipulator:e}}),(function(e){r._manipulators.remove(e.manipulator)}))},e.prototype._createInterpolatedLineGeometry=function(e,t,r,n,i,a,o,l,d,c){var h=this._sceneView.renderCoordsHelper,p=[],u=[],m=function(e,t){var r=f.sv3d.get();s.vec3.subtract(r,e,a),p.push(r),u.push(t)};if("euclidean"===l){var _=f.sv3d.get();g.midpoint([n,i],_);var v=f.sv3d.get();h.worldUpAtPosition(_,v),m(n,v),m(i,v),d&&d.update(n,i,c)}else{var b=this._getSegmentInterpolator(n,i),L=this._params.lineSubdivisions+1&-2,w=null,M=null,S=L/2-1,P=L/2;"start"===c?(S=0,P=1):"end"===c&&(S=L-2,P=L-1);for(var O=0;O<L;++O){var C=O/(L-1),D=f.sv3d.get();v=f.sv3d.get(),b.eval(C,D),h.worldUpAtPosition(D,v),O===S&&(w=D),O===P&&(M=D),m(D,v)}d&&d.update(w,M,c)}var A=new y(x.createPolylineGeometry(p,u),r);e.removeAllGeometries(),e.addGeometry(A,t,o)},e.prototype._getSegmentInterpolator=function(e,t){if(v.canProject(this._sceneView.spatialReference,v.SphericalECEFSpatialReference)){var r=this._sceneView.renderCoordsHelper.spatialReference;return new m.Spherical(e,t,r,r)}return new m.Linear(e,t)},e.prototype._initializeListeners=function(){var e=this;this._listenerHandles=new r,this._listenerHandles.add([this._model.watch(["state","lastDraggedVertex"],(function(){return e._updateLaserLine()})),this._model.watch("cursorPoint",(function(){return e._updateAfterSyncViewData((function(t){e._updateCursorSegment(),e._updateCursorHandle(),"drawing"===e._model.state&&e._updateLabels(t),e._updateLaserLine()}))})),this._sceneView.state.watch("camera",(function(){return e._updateAfterSyncViewData((function(){return e._updateCameraDependent(e._model.viewData)}))})),this._model.watch(["unit","measurementMode"],(function(){return e._updateAll(e._model.viewData)})),this._model.watch(["areaLabel","cursorSegmentLengthLabel","pathLengthLabel","perimeterLengthLabel"],(function(){e._updateLabels(e._model.viewData)})),this._model.watch(["active"],(function(){e._updateLaserLine(),e._syncViewData(e._model.viewData)})),this._model.watch("viewData",(function(t){return e._syncViewData(t)}))])},e.prototype._destroyListeners=function(){this._listenerHandles.destroy(),this._listenerHandles=null},e._handleGeometry=new y(x.createSphereGeometry(1,32,32),"handle"),e}();return function(e){e.PickRequest=function(){},e.PickResult=function(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),this.type=e,this.scenePoint=t,this.mapPoint=r}}(A||(A={})),A}).apply(null,n))||(e.exports=i)},dXVO:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("0LE5"),r("Rdxj"),r("21p4"),r("Vt+U"),r("Z4y+"),r("vsLP"),r("AzkI"),r("UidR"),r("mmEe")],void 0===(i=(function(e,t,r,n,i,a,o,s,l,d,c){"use strict";var h;!function(e){e.boundingSphere=function(e,t){var n=t.center;r.vec3.set(n,0,0,0);for(var i=0;i<e.length;++i)r.vec3.add(n,n,e[i]);r.vec3.scale(n,n,1/e.length);var a=0;for(i=0;i<e.length;++i)a=Math.max(a,r.vec3.squaredDistance(n,e[i]));t.radius=Math.sqrt(a)},e.bestFitPlane=function(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");l.planeFromPoints(e[0],e[1],e[2],t)},e.planePointDistance=function(e,t){return r.vec3.dot(e,t)+e[3]},e.segmentLengthEuclidean=function(e,t,n){return d.pointToVector(e,p,n)&&d.pointToVector(t,u,n)?r.vec3.distance(p,u):0},e.segmentLengthGeodesic=function(e,t){if(!d.pointToWGS84ComparableLonLat(e,p)||!d.pointToWGS84ComparableLonLat(t,u))return 0;var r={distance:null};return s.inverseGeodeticSolver(r,[p[0],p[1]],[u[0],u[1]]),r.distance},e.segmentLengthGeodesicVector=function(e,t){var r={distance:null};return s.inverseGeodeticSolver(r,[e[0],e[1]],[t[0],t[1]]),r.distance},e.triangleAreaEuclidean=function(e,t,r){return.5*Math.abs((t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0]))},e.triangleAreaGeodesic=function(e,t,r,n){var a=g;return c.vectorToWGS84ComparableLonLat(e,n,p)&&c.vectorToWGS84ComparableLonLat(t,n,u)&&c.vectorToWGS84ComparableLonLat(r,n,m)?(a.setPoint(0,0,p),a.setPoint(0,1,u),a.setPoint(0,2,m),Math.abs(i.geodesicArea(a,"square-meters"))):0},e.tangentFrame=function(e,t,n){Math.abs(e[0])>Math.abs(e[1])?r.vec3.set(t,0,1,0):r.vec3.set(t,1,0,0),r.vec3.cross(n,e,t),r.vec3.normalize(t,t),r.vec3.cross(t,n,e),r.vec3.normalize(n,n)},e.fitHemisphere=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!0);var i=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var n=0;n<e.length;++n)if(r.vec3.dot(t,e[n])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&r.vec3.copy(t,e[0]),!0;r.vec3.set(_,0,0,0);for(var a=0;a<e.length;++a)r.vec3.add(_,_,e[a]);if(r.vec3.normalize(_,_),i(e,_))return t&&r.vec3.copy(t,_),!0;if(!n)return!1;for(a=0;a<e.length;++a)for(var o=0;o<e.length;++o)if(a!==o&&(r.vec3.cross(_,e[a],e[o]),r.vec3.normalize(_,_),i(e,_)))return t&&r.vec3.copy(t,_),!0;return!1},e.compareSets=function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(var r=0;r<e.size;++r)if(!t.has(e[r]))return!1;return!0}}(h||(h={}));var p=n.vec3f64.create(),u=n.vec3f64.create(),m=n.vec3f64.create(),g=new a({rings:[[p,u,m]],spatialReference:o.WGS84}),_=n.vec3f64.create();return h}).apply(null,n))||(e.exports=i)},"e/p1":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("eIBl"),r("qsST"),r("qMld"),r("8uEs"),r("8MXS"),r("Vx27"),r("t8Uz"),r("SFmM"),r("JcNK")],void 0===(i=(function(e,t,r,n,i,a,o,s,l,d,c,h){"use strict";var p=i.getLogger("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel");return function(e){function t(t){var r=e.call(this,t)||this;return r.supportedViewType="3d",r._handles=new n,r._userUnitOptions=null,r._userUnit=null,r.tool=null,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([s.init(this,"unit",(function(t){e.tool&&(e.tool.model.unit=t)}))])},t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},Object.defineProperty(t.prototype,"state",{get:function(){return this.isDisabled?"disabled":this.tool?this.tool.state:"ready"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"measurement",{get:function(){if(!this.tool||this.isDisabled)return null;var e=this.tool.model,t=e.measurementMode,r=e.measurementData,n=e.validMeasurement,i=0===("euclidean"===t?r.intersectingSegments:r.geodesicIntersectingSegments).size,a=i?n?"available":"unavailable":"invalid";return{mode:t,area:{text:i&&n?e.areaLabel:null,state:a},perimeterLength:{text:i&&n?e.perimeterLengthLabel:null,state:a}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unitOptions",{get:function(){return this._filteredOrAllUnits(this._userUnitOptions)},set:function(e){this._userUnitOptions=e,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)},set:function(e){this._userUnit=e?this._findSelectableUnit(e,this._userUnit):null,this.notifyChange("unit")},enumerable:!1,configurable:!0}),t.prototype.start=function(){return this.createTool()},t.prototype.clear=function(){this.removeTool()},t.prototype.newMeasurement=function(){a.ignoreAbortErrors(this.start())},t.prototype.clearMeasurement=function(){this.clear()},t.prototype.createToolParams=function(){var e=this;return{toolConstructor:d,constructorArguments:function(){return{unit:e.unit}}}},t.prototype.logUnsupportedError=function(){p.error("AreaMeasurement3D widget is not implemented for MapView")},t.prototype.logError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];p.error.apply(p,e)},t.prototype._findSelectableUnit=function(e,t){var r=this.unitOptions;return-1!==r.indexOf(e)?e:t?this._findSelectableUnit(t):r[0]},t.prototype._filteredOrAllUnits=function(e){if(!e)return o.measurementAreaUnits.slice();var t=e.filter((function(e){return-1!==o.measurementAreaUnits.indexOf(e)}));return 0===t.length?o.measurementAreaUnits.slice():t},r.__decorate([l.property({dependsOn:["isDisabled","tool.state"],readOnly:!0})],t.prototype,"state",null),r.__decorate([l.property({dependsOn:["view.ready","tool.model.area","tool.model.geodesicArea","tool.model.areaLabel","tool.model.perimeterLength","tool.model.geodesicPerimeterLength","tool.model.perimeterLengthLabel","tool.model.measurementMode","tool.model.measurementData"],readOnly:!0})],t.prototype,"measurement",null),r.__decorate([l.property({constructOnly:!0})],t.prototype,"tool",void 0),r.__decorate([l.property(c.defaultUnitPropertyMetadata)],t.prototype,"defaultUnit",void 0),r.__decorate([l.property({dependsOn:["view.spatialReference"]})],t.prototype,"unitOptions",null),r.__decorate([l.property({dependsOn:["unitOptions","defaultUnit"]})],t.prototype,"unit",null),r.__decorate([l.property()],t.prototype,"clearMeasurement",null),r.__decorate([l.subclass("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")],t)}(h.InteractiveToolViewModel)}).apply(null,n))||(e.exports=i)},lVYI:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Gtr7"),r("y4WC"),r("BcWh"),r("Vx27")],void 0===(i=(function(e,t,r,n,i,a,o){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.vertices=new i,t}return r.__extends(t,e),Object.defineProperty(t.prototype,"front",{get:function(){return this.vertices.items[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"back",{get:function(){return this.vertices.items[this.vertices.length-1]||null},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.vertices.removeAll(),this.emit("cleared",{}),this._notifyFrontBack()},t.prototype.vertex=function(e){return this.vertices.items[e]},t.prototype.add=function(e){this.vertices.add(e);var t=this.vertices.length-1;return this._notifyFrontBack(),this.emit("vertex-added",{index:t}),t},t.prototype.insert=function(e,t){return this.vertices.splice(e,0,t),this._notifyFrontBack(),this.emit("vertex-inserted",{index:e}),e},t.prototype.remove=function(e){this.vertices.removeAt(e),this._notifyFrontBack(),this.emit("vertex-removed",{index:e})},t.prototype.update=function(e,t){null!=t&&(this.vertices.splice(e,1,t),this._notifyFrontBack()),this.emit("vertex-updated",{index:e})},t.prototype._notifyFrontBack=function(){this.notifyChange("front"),this.notifyChange("back")},r.__decorate([o.property({readOnly:!0})],t.prototype,"vertices",void 0),r.__decorate([o.property({aliasOf:"vertices.length"})],t.prototype,"length",void 0),r.__decorate([o.property({readOnly:!0})],t.prototype,"front",null),r.__decorate([o.property({readOnly:!0})],t.prototype,"back",null),r.__decorate([o.subclass("esri.views.3d.interactive.measurementTools.support.Path")],t)}(a.EventedMixin(n))}).apply(null,n))||(e.exports=i)},mxT5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("cTAJ"),r("Gtr7"),r("pcDC"),r("eIBl"),r("xoE+"),r("GZXg"),r("fYGb"),r("8uEs"),r("8MXS"),r("Vx27"),r("DQU7"),r("1Z6g"),r("dXVO"),r("lVYI"),r("P7eF"),r("6IZ0"),r("mmEe")],void 0===(i=(function(e,t,r,n,i,a,o,s,l,d,c,h,p,u,m,g,_,v,f,y){"use strict";return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unitNormalizer=new f,t._measurementData=new u,t._measurementDataChanges=new m,t._viewDataChanges=new m,t._handles=new o,t.path=new _,t.pathVersion=0,t.cursorPoint=null,t.state="initial",t.lastDraggedVertex=null,t.mode="auto",t.unit="metric",t.active=!1,t.maxRelativeErrorCoplanar=.005,t.maxRelativeErrorAlmostCoplanar=.01,t.verticalAngleThreshold=80,t.geodesicMeasurementDistanceThreshold=1e5,t}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;n.loadMessageBundle("esri/core/t9n/Units").then((function(t){e.messages=t})),this._handles.add(n.onLocaleChange((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=this,[4,n.loadMessageBundle("esri/core/t9n/Units")];case 1:return e.messages=t.sent(),[2]}}))}))}))),this._handles.add(h.whenTrue(this.sceneView,"ready",(function(){var t=e.sceneView.spatialReference;e._worldSpatialReference=!t||y.canProject(t,y.WGS84ECEFSpatialReference)?y.WGS84ECEFSpatialReference:t,e._unitNormalizer.spatialReference=t})),"scene-view"),this.reset();var t=function(){e._set("pathVersion",e.pathVersion+1)};this._handles.add(this.path.on("cleared",(function(){e._measurementDataChanges.fullChange(),e._set("pathVersion",0)}))),this._handles.add(this.path.on("vertex-added",(function(){e._measurementDataChanges.fullChange(),t()}))),this._handles.add(this.path.on("vertex-inserted",(function(){e._measurementDataChanges.fullChange(),t()}))),this._handles.add(this.path.on("vertex-removed",(function(){e._measurementDataChanges.fullChange(),t()}))),this._handles.add(this.path.on("vertex-updated",(function(r){e._measurementDataChanges.incrementalChange(r.index),t()})))},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"validMeasurement",{get:function(){return this.path.length>=3&&"measured"===this.state||"editing"===this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMeasuring",{get:function(){return this.path.length>=1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"measurementData",{get:function(){this._viewDataChanges.merge(this._measurementDataChanges);var e=v.clone(this._measurementData.intersectingSegments),t=v.clone(this._measurementData.geodesicIntersectingSegments);return this._measurementData.update(this.path,this._measurementDataChanges,this.sceneView,this._unitNormalizer,this.validMeasurement,this.sceneView.renderSpatialReference,this._worldSpatialReference,{maxRelativeErrorCoplanar:this.maxRelativeErrorCoplanar,maxRelativeErrorAlmostCoplanar:this.maxRelativeErrorAlmostCoplanar,verticalAngleThreshold:this.verticalAngleThreshold}),g.compareSets(this._measurementData.intersectingSegments,e)||this._viewDataChanges.fullChange(),g.compareSets(this._measurementData.geodesicIntersectingSegments,t)||this._viewDataChanges.fullChange(),this._measurementData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.measurementData.area},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geodesicArea",{get:function(){return this.measurementData.geodesicArea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areaLabel",{get:function(){return this._formatAreaLabel(this.messages,"geodesic"===this.measurementMode?this.measurementData.geodesicArea:this.measurementData.area,this.unit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathLength",{get:function(){return this.measurementData.pathLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geodesicPathLength",{get:function(){return this.measurementData.geodesicPathLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathLengthLabel",{get:function(){return this._formatLengthLabel(this.messages,"geodesic"===this.measurementMode?this.measurementData.geodesicPathLength:this.measurementData.pathLength,this.unit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"perimeterLength",{get:function(){return this.measurementData.perimeterLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geodesicPerimeterLength",{get:function(){return this.measurementData.geodesicPathLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"perimeterLengthLabel",{get:function(){return this.measurementData.perimeterLength&&this._formatLengthLabel(this.messages,"geodesic"===this.measurementMode?this.measurementData.geodesicPathLength:this.measurementData.perimeterLength,this.unit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursorSegmentLength",{get:function(){return this.path.back&&this.cursorPoint&&new l(this._unitNormalizer.normalizeDistance(g.segmentLengthEuclidean(this.path.back,this.cursorPoint,this._worldSpatialReference)),"meters")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geodesicCursorSegmentLength",{get:function(){return this.path.back&&this.cursorPoint&&new l(g.segmentLengthGeodesic(this.path.back,this.cursorPoint),"meters")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursorSegmentLengthLabel",{get:function(){return this._formatLengthLabel(this.messages,"geodesic"===this.measurementMode?this.geodesicCursorSegmentLength:this.cursorSegmentLength,this.unit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewData",{get:function(){var e=this.measurementData,t="geodesic"===this.measurementMode,r=t?this.geodesicArea:this.area,n=1;if(r){var i=this._toPreferredAreaUnit(r,this.unit);n=s.nextHighestPowerOfTen(Math.sqrt(i.value)/Math.sqrt(300)),n*=Math.sqrt(c.convertUnit(1,i.unit,"square-meters")),n/=this._unitNormalizer.normalizeDistance(1)}return{validMeasurement:this.validMeasurement,path:this.path,pathChanges:this._viewDataChanges,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:t?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:t?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:t?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:this.validMeasurement?0:this.path.length-2,perimeterLengthLabelSegmentIndex:0,checkerSize:n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"measurementMode",{get:function(){var e=this.mode;return"auto"===e&&(e="euclidean",(this.geodesicPathLength?this.geodesicPathLength.value:0)+(!this.validMeasurement&&this.geodesicCursorSegmentLength?this.geodesicCursorSegmentLength.value:0)>this.geodesicMeasurementDistanceThreshold&&(e="geodesic")),null==this.geodesicPathLength&&(e="euclidean"),e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.clearMeasurement()},t.prototype.clearMeasurement=function(){this.path.clear(),this.state="initial",this.cursorPoint=null},t.prototype.finishMeasurement=function(){this.path.length<3?this.clearMeasurement():(this._measurementDataChanges.fullChange(),this.state="measured")},t.prototype._preferredAreaUnit=function(e,t){switch(t){case"metric":return c.preferredMetricAreaUnit(e.value,e.unit);case"imperial":return c.preferredImperialAreaUnit(e.value,e.unit);default:return t}},t.prototype._preferredLengthUnit=function(e,t){var r=this._deriveLengthUnitFromAreaUnit(t);switch(r){case"metric":return c.preferredMetricLengthUnit(e.value,e.unit);case"imperial":return c.preferredImperialLengthUnit(e.value,e.unit);default:return r}},t.prototype._toPreferredAreaUnit=function(e,t){return e.toUnit(this._preferredAreaUnit(e,t))},t.prototype._toPreferredLengthUnit=function(e,t){return e.toUnit(this._preferredLengthUnit(e,t))},t.prototype._formatAreaLabel=function(e,t,r){return e&&t&&d.formatDecimal(e,t,this._preferredAreaUnit(t,r))},t.prototype._formatLengthLabel=function(e,t,r){return e&&t&&d.formatDecimal(e,t,this._preferredLengthUnit(t,r))},t.prototype._deriveLengthUnitFromAreaUnit=function(e){switch(e){case"metric":return"metric";case"imperial":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";case"square-meters":return"meters";case"square-kilometers":return"kilometers";case"acres":return"imperial";case"ares":case"hectares":return"metric";default:a.neverReached(e)}throw new Error("unhandled area unit")},r.__decorate([p.property()],t.prototype,"messages",void 0),r.__decorate([p.property({constructOnly:!0})],t.prototype,"sceneView",void 0),r.__decorate([p.property({readOnly:!0})],t.prototype,"path",void 0),r.__decorate([p.property({readOnly:!0})],t.prototype,"pathVersion",void 0),r.__decorate([p.property()],t.prototype,"cursorPoint",void 0),r.__decorate([p.property()],t.prototype,"state",void 0),r.__decorate([p.property()],t.prototype,"lastDraggedVertex",void 0),r.__decorate([p.property()],t.prototype,"mode",void 0),r.__decorate([p.property()],t.prototype,"unit",void 0),r.__decorate([p.property()],t.prototype,"active",void 0),r.__decorate([p.property({readOnly:!0,dependsOn:["path.length","state"]})],t.prototype,"validMeasurement",null),r.__decorate([p.property({readOnly:!0,dependsOn:["path.length"]})],t.prototype,"isMeasuring",null),r.__decorate([p.property({readOnly:!0,dependsOn:["pathVersion","validMeasurement","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","verticalAngleThreshold"]})],t.prototype,"measurementData",null),r.__decorate([p.property({readOnly:!0,dependsOn:["measurementData"]})],t.prototype,"area",null),r.__decorate([p.property({readOnly:!0,dependsOn:["measurementData"]})],t.prototype,"geodesicArea",null),r.__decorate([p.property({readOnly:!0,dependsOn:["messages","measurementData","unit","measurementMode"]})],t.prototype,"areaLabel",null),r.__decorate([p.property({readOnly:!0,dependsOn:["measurementData"]})],t.prototype,"pathLength",null),r.__decorate([p.property({readOnly:!0,dependsOn:["measurementData"]})],t.prototype,"geodesicPathLength",null),r.__decorate([p.property({readOnly:!0,dependsOn:["messages","measurementData","unit","measurementMode"]})],t.prototype,"pathLengthLabel",null),r.__decorate([p.property({readOnly:!0,dependsOn:["measurementData"]})],t.prototype,"perimeterLength",null),r.__decorate([p.property({readOnly:!0,dependsOn:["measurementData"]})],t.prototype,"geodesicPerimeterLength",null),r.__decorate([p.property({readOnly:!0,dependsOn:["messages","measurementData","unit","measurementMode"]})],t.prototype,"perimeterLengthLabel",null),r.__decorate([p.property({readOnly:!0,dependsOn:["path.back","cursorPoint"]})],t.prototype,"cursorSegmentLength",null),r.__decorate([p.property({readOnly:!0,dependsOn:["path.back","cursorPoint"]})],t.prototype,"geodesicCursorSegmentLength",null),r.__decorate([p.property({readOnly:!0,dependsOn:["messages","unit","measurementMode","cursorSegmentLength","geodesicCursorSegmentLength"]})],t.prototype,"cursorSegmentLengthLabel",null),r.__decorate([p.property({readOnly:!0,dependsOn:["unit","measurementMode","measurementData"]})],t.prototype,"viewData",null),r.__decorate([p.property()],t.prototype,"maxRelativeErrorCoplanar",void 0),r.__decorate([p.property()],t.prototype,"maxRelativeErrorAlmostCoplanar",void 0),r.__decorate([p.property()],t.prototype,"verticalAngleThreshold",void 0),r.__decorate([p.property()],t.prototype,"geodesicMeasurementDistanceThreshold",void 0),r.__decorate([p.property({readOnly:!0,dependsOn:["mode","validMeasurement","geodesicPathLength","geodesicCursorSegmentLength","geodesicMeasurementDistanceThreshold"]})],t.prototype,"measurementMode",null),r.__decorate([p.subclass("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DModel")],t)}(i)}).apply(null,n))||(e.exports=i)},t8Uz:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("eIBl"),r("8MXS"),r("Vx27"),r("Q51V"),r("mxT5"),r("ar2R"),r("X7Ps")],void 0===(i=(function(e,t,r,n,i,a,o,s,l,d){"use strict";return function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new n,r.deferCreation=!0,r.model=new s({sceneView:t.view}),r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._view=new l(this.model,this.manipulators),this._controller=new o(this.model,this._view,this.manipulators),this._handles.add(i.init(this,"state",(function(t){switch(t){case"measured":return e.complete();case"ready":return;default:return e.create()}}),!0))},t.prototype.destroy=function(){this.detach(),this._view.destroy(),this._view=null,this._controller.destroy(),this._controller=null,this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"state",{get:function(){return this.model.isMeasuring?"measured"===this.model.state?"measured":"measuring":"ready"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupported",{get:function(){return"3d"===this.get("view.type")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{get:function(){return!this.model.active||"initial"!==this.model.state&&"drawing"!==this.model.state?null:"crosshair"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){this.model.active=!0},t.prototype.deactivate=function(){this.model.active=!1},t.prototype.onShow=function(){this._view.show()},t.prototype.onHide=function(){this._view.hide()},t.prototype.onDetach=function(){this.model.reset()},t.prototype.onInputEvent=function(e){this._controller.handleInputEvent(e)},r.__decorate([a.property({dependsOn:["model.isMeasuring","model.state"],readOnly:!0})],t.prototype,"state",null),r.__decorate([a.property({dependsOn:["view.type"],readOnly:!0})],t.prototype,"isSupported",null),r.__decorate([a.property({dependsOn:["model.active","state"],readOnly:!0})],t.prototype,"cursor",null),r.__decorate([a.property({constructOnly:!0})],t.prototype,"model",void 0),r.__decorate([a.aliasOf("model.mode")],t.prototype,"mode",void 0),r.__decorate([a.aliasOf("model.unit")],t.prototype,"unit",void 0),r.__decorate([a.aliasOf("model.areaLabel")],t.prototype,"areaLabel",void 0),r.__decorate([a.aliasOf("model.area")],t.prototype,"area",void 0),r.__decorate([a.aliasOf("model.geodesicArea")],t.prototype,"geodesicArea",void 0),r.__decorate([a.aliasOf("model.pathLengthLabel")],t.prototype,"pathLengthLabel",void 0),r.__decorate([a.aliasOf("model.pathLength")],t.prototype,"pathLength",void 0),r.__decorate([a.aliasOf("model.geodesicPathLength")],t.prototype,"geodesicPathLength",void 0),r.__decorate([a.aliasOf("model.perimeterLengthLabel")],t.prototype,"perimeterLengthLabel",void 0),r.__decorate([a.aliasOf("model.perimeterLength")],t.prototype,"perimeterLength",void 0),r.__decorate([a.aliasOf("model.geodesicPerimeterLength")],t.prototype,"geodesicPerimeterLength",void 0),r.__decorate([a.aliasOf("model.validMeasurement")],t.prototype,"validMeasurement",void 0),r.__decorate([a.aliasOf("model.viewData")],t.prototype,"viewData",void 0),r.__decorate([a.subclass("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DTool")],t)}(d.InteractiveToolBase)}).apply(null,n))||(e.exports=i)},z9Z5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("2NOe"),r("W/V4"),r("FQ4r"),r("lBa0"),r("ff/U"),r("zmRx"),r("G0ER"),r("qbr3"),r("qbr3"),r("2Kdy")],void 0===(i=(function(e,t,n,i,a,o,s,l,d,c,h,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckerBoardTechniqueConfiguration=t.CheckerBoardTechnique=void 0;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.initializeProgram=function(e){var r=t.shader.get().build();return new c(e.rctx,r.generateSource("vertex"),r.generateSource("fragment"),l.Default3D)},t.prototype.bindPass=function(e,t,r){i.View.bindProjectionMatrix(this.program,r.camera.projectionMatrix),this.program.setUniform2fv("size",t.size),this.program.setUniform4fv("color1",t.color1),this.program.setUniform4fv("color2",t.color2)},t.prototype.bindDraw=function(e){i.View.bindView(this.program,e)},t.prototype.initializePipeline=function(){var e=this.configuration;return p.makePipelineState({blending:e.transparent&&h.separateBlendingParams(770,1,771,771),polygonOffset:e.polygonOffset&&{factor:0,units:-25},depthTest:{func:513},depthWrite:e.writeDepth&&p.defaultDepthWriteParams,colorWrite:p.defaultColorWriteParams})},t.shader=new a.ReloadableShaderModule(d,(function(){return new Promise((function(e,t){Promise.resolve().then((function(){var t=[r("zmRx")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))})),t}(o.ShaderTechnique);t.CheckerBoardTechnique=u;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transparent=!1,t.writeDepth=!0,t.polygonOffset=!1,t}return n.__extends(t,e),n.__decorate([s.parameter()],t.prototype,"transparent",void 0),n.__decorate([s.parameter()],t.prototype,"writeDepth",void 0),n.__decorate([s.parameter()],t.prototype,"polygonOffset",void 0),t}(s.ShaderTechniqueConfiguration);t.CheckerBoardTechniqueConfiguration=m}).apply(null,n))||(e.exports=i)},zmRx:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("7Aei"),r("aExC")],void 0===(i=(function(e,t,r,n,i){"use strict";var a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.build=void 0,t.build=function(){var e=new i.ShaderBuilder;return e.extensions.add("GL_OES_standard_derivatives"),e.attributes.add("position","vec3"),e.attributes.add("uv0","vec2"),e.vertex.uniforms.add("proj","mat4").add("view","mat4"),e.varyings.add("vUV","vec2"),e.vertex.code.add(n.glsl(a||(a=r.__makeTemplateObject(["\n    void main(void) {\n      vUV = uv0;\n      gl_Position = proj * view * vec4(position.xyz, 1.0);\n    }\n  "],["\n    void main(void) {\n      vUV = uv0;\n      gl_Position = proj * view * vec4(position.xyz, 1.0);\n    }\n  "])))),e.fragment.uniforms.add("size","vec2").add("color1","vec4").add("color2","vec4"),e.fragment.code.add(n.glsl(o||(o=r.__makeTemplateObject(["\n    void main() {\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n    }\n  "],["\n    void main() {\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n    }\n  "])))),e}}).apply(null,n))||(e.exports=i)}}]);