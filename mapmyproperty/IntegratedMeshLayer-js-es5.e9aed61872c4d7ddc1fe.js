!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function c(e){n(a,o,i,c,s,"next",e)}function s(e){n(a,o,i,c,s,"throw",e)}c(void 0)}))}}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{yvy3:function(e,r,n){"use strict";n.r(r);var a,s=n("pO5D"),p=(n("wSAH"),n("srIe")),y=(n("6S2I"),n("zqDF"),n("WbKI")),d=n("r88o"),b=n("04ZG"),v=n("zlDU"),h=n("/PL2"),O=n("xvdR"),m=n("9MzC"),j=n("r0DZ"),g=n("pqNC"),w=n("5pQd"),S=n("N5XI"),k=n("IvSi"),R=n("uRH/"),x=n("PVlI"),_=n("DbUH"),P=n("WmKv"),T=n("XTTP"),I=n("lq5k"),D=n("4EHJ"),A=(n("ju1D"),n("9AIY"),n("ag7Y")),L=n("LE9a"),M=n("Lqtk"),N=n("f/qv"),J=n("ACjl"),E=n("Cduq"),q=n("Ehki"),U=(n("4GrV"),n("gYg2")),C=a=function(e){l(r,e);var t=f(r);function r(e){var n;return c(this,r),(n=t.call(this,e)).geometry=null,n.type="clip",n}return u(r,[{key:"writeGeometry",value:function(e,t,r,n){if(n.layer&&n.layer.spatialReference&&!n.layer.spatialReference.equals(this.geometry.spatialReference)){if(!Object(U.b)(e.spatialReference,n.layer.spatialReference))return void(n&&n.messages&&n.messages.push(new J.a("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:n.layer.spatialReference,context:n})));var o=new q.a;Object(U.q)(e,o,n.layer.spatialReference),t[r]=o.toJSON(n)}else t[r]=e.toJSON(n);delete t[r].spatialReference}},{key:"clone",value:function(){return new a({geometry:Object(N.a)(this.geometry),type:this.type})}}]),r}(A.a);Object(s.a)([Object(y.b)({type:q.a}),Object(O.a)()],C.prototype,"geometry",void 0),Object(s.a)([Object(E.a)(["web-scene","portal-item"],"geometry")],C.prototype,"writeGeometry",null),Object(s.a)([Object(y.b)({type:["clip","mask","replace"],nonNullable:!0}),Object(O.a)()],C.prototype,"type",void 0);var K,V=C=a=Object(s.a)([Object(b.a)("esri.layers.support.SceneModification")],C),z=K=function(e){l(a,e);var r,n=f(a);function a(e){var t;return c(this,a),(t=n.call(this,e)).url=null,t}return u(a,[{key:"toJSON",value:function(e){return this.toArray().map((function(t){return t.toJSON(e)})).filter((function(e){return!!e.geometry}))}},{key:"clone",value:function(){return new K({url:this.url,items:this.items.map((function(e){return e.clone()}))})}},{key:"_readModifications",value:function(e,t){var r,n=i(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;this.add(V.fromJSON(o,t))}}catch(a){n.e(a)}finally{n.f()}}}],[{key:"fromJSON",value:function(e,t){var r=new K;return r._readModifications(e,t),r}},{key:"fromUrl",value:(r=o(regeneratorRuntime.mark((function e(r,n,o){var a,c,s,u,l,f,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:Object(D.J)(r),origin:"service"},e.next=3,Object(M.default)(r,{responseType:"json",signal:Object(p.i)(o,"signal")});case 3:c=e.sent,s=n.toJSON(),u=[],l=i(c.data);try{for(l.s();!(f=l.n()).done;)y=f.value,u.push(V.fromJSON(t(t({},y),{},{geometry:t(t({},y.geometry),{},{spatialReference:s})}),a))}catch(d){l.e(d)}finally{l.f()}return e.abrupt("return",new K({url:r,items:u}));case 9:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})}]),a}(Object(A.b)(L.a.ofType(V)));Object(s.a)([Object(y.b)({type:String})],z.prototype,"url",void 0);var G=z=K=Object(s.a)([Object(b.a)("esri.layers.support.SceneModifications")],z),H=function(e){l(y,e);var r,n,i,a,s=f(y);function y(){var e;c(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).handles=new j.a,e.geometryType="mesh",e.operationalLayerType="IntegratedMeshLayer",e.type="integrated-mesh",e.nodePages=null,e.materialDefinitions=null,e.textureSetDefinitions=null,e.geometryDefinitions=null,e.serviceUpdateTimeStamp=null,e.profile="mesh-pyramids",e.modifications=null,e._modificationsSource=null,e.elevationInfo=null,e.path=null,e}return u(y,[{key:"destroy",value:function(){this.handles.destroy()}},{key:"initialize",value:function(){var e=this;this.handles.add(Object(S.on)(this,"modifications","after-changes",(function(){return e.modifications=e.modifications}),null,null,!0))}},{key:"normalizeCtorArgs",value:function(e,r){return"string"==typeof e?t({url:e},r):e}},{key:"readModifications",value:function(e,t,r){this._modificationsSource={url:Object(h.a)(e,r),context:r}}},{key:"load",value:(a=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(this._doLoad(t)),this));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_doLoad",value:(i=o(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(p.i)(t,"signal"),e.prev=1,e.next=4,this.loadFromPortal({supportedTypes:["Scene Service"]},t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(m.t)(e.t0);case 9:return e.next=11,this._fetchService(r);case 11:if(!Object(p.k)(this._modificationsSource)){e.next=16;break}return e.next=14,G.fromUrl(this._modificationsSource.url,this.spatialReference,t);case 14:n=e.sent,this.setAtOrigin("modifications",n,this._modificationsSource.context.origin),this._modificationsSource=null;case 16:return e.next=18,this._fetchIndexAndUpdateExtent(this.nodePages,r);case 18:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return i.apply(this,arguments)})},{key:"beforeSave",value:function(){if(!Object(p.j)(this._modificationsSource))return this.load().then((function(){}),(function(){}))}},{key:"saveAs",value:(n=o(regeneratorRuntime.mark((function e(r,n){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(1,t(t({},n),{},{getTypeKeywords:function(){return o._getTypeKeywords()},portalItemLayerType:"integrated-mesh"}),r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"save",value:(r=o(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(0,{getTypeKeywords:function(){return t._getTypeKeywords()},portalItemLayerType:"integrated-mesh"}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"validateLayer",value:function(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new v.a("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new v.a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new v.a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}},{key:"_getTypeKeywords",value:function(){return["IntegratedMeshLayer"]}}]),y}(Object(I.a)(Object(x.a)(Object(R.a)(Object(_.a)(Object(P.a)(Object(w.a)(g.a)))))));Object(s.a)([Object(y.b)({type:String,readOnly:!0})],H.prototype,"geometryType",void 0),Object(s.a)([Object(y.b)({type:["show","hide"]})],H.prototype,"listMode",void 0),Object(s.a)([Object(y.b)({type:["IntegratedMeshLayer"]})],H.prototype,"operationalLayerType",void 0),Object(s.a)([Object(y.b)({json:{read:!1},readOnly:!0})],H.prototype,"type",void 0),Object(s.a)([Object(y.b)({type:T.c,readOnly:!0})],H.prototype,"nodePages",void 0),Object(s.a)([Object(y.b)({type:[T.b],readOnly:!0})],H.prototype,"materialDefinitions",void 0),Object(s.a)([Object(y.b)({type:[T.d],readOnly:!0})],H.prototype,"textureSetDefinitions",void 0),Object(s.a)([Object(y.b)({type:[T.a],readOnly:!0})],H.prototype,"geometryDefinitions",void 0),Object(s.a)([Object(y.b)({readOnly:!0})],H.prototype,"serviceUpdateTimeStamp",void 0),Object(s.a)([Object(y.b)({type:G}),Object(O.a)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],H.prototype,"modifications",void 0),Object(s.a)([Object(d.a)(["web-scene","portal-item"],"modifications")],H.prototype,"readModifications",null),Object(s.a)([Object(y.b)(k.b)],H.prototype,"elevationInfo",void 0),Object(s.a)([Object(y.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],H.prototype,"path",void 0),H=Object(s.a)([Object(b.a)("esri.layers.IntegratedMeshLayer")],H),r.default=H}}])}();