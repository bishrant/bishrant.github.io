!function(){var e,t;function i(e,t,i,n,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void i(c)}o.done?t(l):Promise.resolve(l).then(n,r)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var s=e.apply(t,n);function o(e){i(s,r,a,o,l,"next",e)}function l(e){i(s,r,a,o,l,"throw",e)}o(void 0)})}}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=p(e);if(t){var r=p(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d(this,i)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{etVg:function(i,n,r){"use strict";r.d(n,"a",function(){return u}),r.d(n,"b",function(){return h});var a=r("OIYi"),s=r("aQrP"),o=r("Q3fD"),l=r("0Ect"),c=r("xtdb");function h(i){var n=new s.a;return n.extensions.add("GL_OES_standard_derivatives"),n.attributes.add("position","vec3"),n.attributes.add("uv0","vec2"),n.vertex.uniforms.add("proj","mat4").add("view","mat4"),n.varyings.add("vUV","vec2"),i.multipassTerrainEnabled&&n.varyings.add("depth","float"),n.vertex.code.add(a.a(e||(e=m(["\n    void main(void) {\n      vUV = uv0;\n      ","\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  "])),i.multipassTerrainEnabled?"depth = (view * vec4(position, 1.0)).z;":"")),i.multipassTerrainEnabled&&(n.fragment.include(l.a),n.include(c.b,i)),n.fragment.uniforms.add("size","vec2").add("color1","vec4").add("color2","vec4"),n.fragment.include(o.a),n.fragment.code.add(a.a(t||(t=m(["\n    void main() {\n      ","\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ","\n    }\n  "])),i.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",i.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"")),n}var u=Object.freeze({__proto__:null,build:h})},nEdL:function(e,t,i){"use strict";i.r(t);var o=i("pO5D"),h=(i("wSAH"),i("6S2I")),d=(i("zqDF"),i("WbKI")),p=i("Stxv"),m=i("04ZG"),g=(i("4EHJ"),i("ju1D"),i("9AIY"),i("9MzC")),b=i("gEht"),v=(i("cCpn"),i("h1D1")),_=i("dV4Z"),f=i("Jv1m"),O=i("Ehpe"),y=i("r0DZ"),j=i("N5XI"),L=i("Pt/X"),w=i("fqh+"),k=i("R3Kl"),P=i("srIe"),S=i("qRWG"),M=i("Cy1f"),C=i("5DEt"),A=i("15Hh"),x=i("r+FG"),D=i("yvcr"),G=i("klA5"),V=i("NUQ5"),R=i("ZHv2"),E=i("4EdQ"),z=i("tKWm"),T=i("dK/y"),U=i("B3Fv"),q=i("J+o3"),I=i("lObl"),W=i("Ango"),F=i("X668"),H=i("1/dN"),B=i("fFEv"),N=i("NbNv"),J=i("hnWO"),K=i("w6Td"),Q=i("ypgp"),Z=i("2jVe"),Y=i("+h6m"),X=i("jjdI"),$=i("GJyJ"),ee=i("jpeq"),te=i("dDjh"),ie=i("xtdb"),ne=i("etVg"),re=function(e){c(i,e);var t=u(i);function i(){return s(this,i),t.apply(this,arguments)}return l(i,[{key:"initializeProgram",value:function(e){var t=i.shader.get(),n=this.configuration,r=t.build({OITEnabled:0===n.transparencyPassType,multipassTerrainEnabled:n.multipassTerrainEnabled,cullAboveGround:n.cullAboveGround});return new X.a(e.rctx,r.generateSource("vertex"),r.generateSource("fragment"),Y.a)}},{key:"bindPass",value:function(e,t,i){ee.a.bindProjectionMatrix(this.program,i.camera.projectionMatrix),this.program.setUniform2fv("size",t.size),this.program.setUniform4fv("color1",t.color1),this.program.setUniform4fv("color2",t.color2),i.multipassTerrainEnabled&&(this.program.setUniform2fv("cameraNearFar",i.camera.nearFar),this.program.setUniform2fv("inverseViewport",i.inverseViewport),Object(ie.a)(this.program,e,i))}},{key:"bindDraw",value:function(e){ee.a.bindView(this.program,e)}},{key:"setPipelineState",value:function(e){var t=this.configuration,i=3===e,n=2===e;return Object($.d)({blending:t.transparent?i?se:Object(te.a)(e):null,depthTest:{func:Object(te.b)(e)},depthWrite:i?t.writeDepth&&$.c:Object(te.c)(e),colorWrite:$.b,polygonOffset:i||n?t.polygonOffset&&ae:{factor:-1,units:-25}})}},{key:"initializePipeline",value:function(){return this.setPipelineState(this.configuration.transparencyPassType)}}]),i}(Q.a);re.shader=new K.a(ne.a,function(){return i.e(171).then(i.bind(null,"Pem8"))});var ae={factor:0,units:-25},se=Object($.e)(770,1,771,771),oe=function(e){c(i,e);var t=u(i);function i(){var e;return s(this,i),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.polygonOffset=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!0,e}return i}(Z.a);Object(o.a)([Object(Z.b)()],oe.prototype,"transparent",void 0),Object(o.a)([Object(Z.b)()],oe.prototype,"writeDepth",void 0),Object(o.a)([Object(Z.b)()],oe.prototype,"polygonOffset",void 0),Object(o.a)([Object(Z.b)({count:4})],oe.prototype,"transparencyPassType",void 0),Object(o.a)([Object(Z.b)()],oe.prototype,"multipassTerrainEnabled",void 0),Object(o.a)([Object(Z.b)()],oe.prototype,"cullAboveGround",void 0);var le=function(e){c(i,e);var t=u(i);function i(e){var n;return s(this,i),(n=t.call(this,e,he)).techniqueConfig=new oe,n}return l(i,[{key:"dispose",value:function(){}},{key:"getPassParameters",value:function(){return this.params}},{key:"getTechniqueConfig",value:function(e){return this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.transparencyPassType=e?e.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!e&&e.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!e||e.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,i,n,r,a,s){return Object(B.e)(e,t,n,r,a,void 0,s)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output?new ce(e):void 0}},{key:"createBufferWriter",value:function(){return new J.a(J.d)}}]),i}(N.a),ce=function(e){c(i,e);var t=u(i);function i(e){var n;return s(this,i),(n=t.call(this,e)).updateParameters(),n}return l(i,[{key:"updateParameters",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(re,this.material.getTechniqueConfig(e),this.technique)}},{key:"beginSlot",value:function(e){var t=3;return this.technique.configuration.transparent&&(t=this.technique.configuration.writeDepth?5:8),e===t}},{key:"ensureParameters",value:function(e){this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}]),i}(H.a),he=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1},N.b),ue=function(e){c(i,e);var t=u(i);function i(e){var n;return s(this,i),(n=t.call(this,e))._checkerBoardMaterial=null,n._renderOccluded=4,n._geometry=null,n._size=[1,1],n._color1=[1,.5,0,.5],n._color2=[1,1,1,.5],n.applyProps(e),n}return l(i,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.geometryChanged()}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this.updateMaterial()}},{key:"color1",get:function(){return this._color1},set:function(e){this._color1=e,this.updateMaterial()}},{key:"color2",get:function(){return this._color2},set:function(e){this._color2=e,this.updateMaterial()}},{key:"updateMaterial",value:function(){Object(P.k)(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameterValues({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}},{key:"createExternalResources",value:function(){this._checkerBoardMaterial=new le({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})}},{key:"destroyExternalResources",value:function(){this._checkerBoardMaterial=null}},{key:"forEachExternalMaterial",value:function(e){Object(P.k)(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)}},{key:"createGeometries",value:function(e){if(!Object(P.j)(this._geometry)&&!Object(P.j)(this._checkerBoardMaterial)){var t=de;Object(A.m)(t,this.transform);var i=this._geometry,n=[],r=Object(M.e)();i.position.forEach(function(e){Object(C.i)(r,e,t),n.push(r[0],r[1],r[2])});var a=[];i.uv.forEach(function(e){a.push(e[0],e[1])});var s=new W.a([["position",{size:3,data:n,exclusive:!0}],["uv0",{size:2,data:a,exclusive:!0}]],[["position",i.triangleIndices],["uv0",i.triangleIndices]]);e.addGeometry(s,this._checkerBoardMaterial)}}},{key:"geometryChanged",value:function(){this.recreateGeometry()}}]),i}(F.a),de=Object(M.e)(),pe=i("XBzj"),me={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},ge=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(this,e),this._model=t,this._manipulators=i,this.vertexManipulators=[],this._visible=!1,this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._laserLine=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._cursorManipulator=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._listenerHandles=null,this._origin=Object(M.e)(),this._originTransform=Object(x.b)(),this._tempHandlePosition=Object(M.e)(),this._cursorPositionRenderSpace=Object(M.e)(),this._view=this._model.sceneView,this._params=Object(U.a)(me,n),this._intersector=new G.a(this._view.state.mode),this._intersector.options.store=0;var r=Object(T.e)(this._view,this._params.handleColor,this._params.handleOpacity);r.available=!1,r.radius=this._params.handleRadius,r.interactive=!1,this._manipulators.add(r),this._cursorManipulator=r,this._path=new I.a({view:this._view,attached:!0,width:this._params.pathLineWidth,color:this._params.pathLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPath=new I.a({view:this._view,attached:!0,width:this._params.pathLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._perimeter=new I.a({view:this._view,attached:!0,width:this._params.perimeterLineWidth,color:this._params.perimeterLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPerimeter=new I.a({view:this._view,attached:!0,width:this._params.perimeterLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._projectionLines=new I.a({view:this._view,attached:!0,width:this._params.projectionLineWidth,color:this._params.projectionLineColor,stipplePattern:Object(V.c)(this._params.projectionLineStippleSize),stippleIntegerRepeats:!1,polygonOffset:!0,renderOccluded:4}),this._laserLine=new R.a({view:this._view,attached:!0,style:{glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,globalAlpha:this._params.laserLineGlobalAlpha}}),this._measurementArea=new ue({view:this._view,attached:!0,color1:this._params.areaColor1,color2:this._params.areaColor2}),this._areaLabel=new q.a({view:this._view,attached:!0,fontSize:16}),this._pathLengthLabel=new q.a({view:this._view,attached:!0,fontSize:12}),this._cursorSegmentLengthLabel=new q.a({view:this._view,attached:!0,fontSize:12}),this._perimeterLengthLabel=new q.a({view:this._view,attached:!0,fontSize:12})}return l(e,[{key:"destroy",value:function(){this.hide(),this._laserLine.destroy(),this._laserLine=null,this._measurementArea.destroy(),this._measurementArea=null,this._path.destroy(),this._path=null,this._intersectedPath.destroy(),this._intersectedPath=null,this._perimeter.destroy(),this._perimeter=null,this._intersectedPerimeter.destroy(),this._intersectedPerimeter=null,this._areaLabel.destroy(),this._areaLabel=null,this._pathLengthLabel.destroy(),this._pathLengthLabel=null,this._cursorSegmentLengthLabel.destroy(),this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel.destroy(),this._perimeterLengthLabel=null}},{key:"requiresCursorPoint",get:function(){return("initial"===this._model.state||"drawing"===this._model.state)&&this._model.active}},{key:"visible",get:function(){return this._visible},set:function(e){e?this.show():this.hide()}},{key:"testData",get:function(){var e=this._laserLine.testData;return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel},laserLineRenderer:Object(P.k)(e)?{heightManifoldEnabled:e.heightManifoldEnabled,heightManifoldTarget:e.heightManifoldTarget,pointDistanceEnabled:e.pointDistanceEnabled,pointDistanceOrigin:e.pointDistanceOrigin,pointDistanceTarget:e.pointDistanceTarget,lineVerticalPlaneEnabled:e.lineVerticalPlaneEnabled}:{heightManifoldEnabled:!1,heightManifoldTarget:null,pointDistanceEnabled:!1,pointDistanceOrigin:null,pointDistanceTarget:null,lineVerticalPlaneEnabled:!1}}}},{key:"show",value:function(){this._visible||(this._visible=!0,this._path.visible=!0,this._intersectedPath.visible=!0,this._perimeter.visible=!0,this._intersectedPerimeter.visible=!0,this._projectionLines.visible=!0,this._laserLine.visible=!0,this._measurementArea.visible=!0,this._areaLabel.visible=!0,this._pathLengthLabel.visible=!0,this._cursorSegmentLengthLabel.visible=!0,this._perimeterLengthLabel.visible=!0,this._initializeListeners(),this._updateAll(this._model.viewData))}},{key:"hide",value:function(){var e=this;this._visible&&(this._visible=!1,this._path.visible=!1,this._intersectedPath.visible=!1,this._perimeter.visible=!1,this._projectionLines.visible=!1,this._intersectedPerimeter.visible=!1,this._laserLine.visible=!1,this._measurementArea.visible=!1,this._areaLabel.visible=!1,this._pathLengthLabel.visible=!1,this._cursorSegmentLengthLabel.visible=!1,this._perimeterLengthLabel.visible=!1,this._destroyListeners(),this.vertexManipulators.forEach(function(t){e._removeVertexManipulator(t.manipulator)}),this.vertexManipulators=[],this._view.cursor=null)}},{key:"vertexHandleAt",value:function(e,t){var i=this._manipulators.intersect(e,t);return Object(P.k)(i)?i.manipulator.metadata:null}},{key:"manipulatorToVertex",value:function(e){return e.metadata}},{key:"pick",value:function(t){var i=this._view.spatialReference,n=Object(S.j)(t.screenPoint);this._view.sceneIntersectionHelper.intersectToolIntersectorScreen(n,this._intersector);var r=this._intersector.results.min,a=Object(M.e)();if(!r.getIntersectionPoint(a))return new e.PickResult;var s=this._view.renderCoordsHelper.fromRenderCoords(a,i);return Object(P.j)(s)?new e.PickResult:new e.PickResult("TerrainRenderer"===r.intersector?"surface":"feature",a,s)}},{key:"overlappingHandles",value:function(e,t){return Object(U.c)(e,t,this._view)<=this._params.handleRadius}},{key:"screenToMap3D",value:function(){return Object(z.b)(this._view)}},{key:"_updateOrigin",value:function(e){Object(U.b)(e.positionsRenderCoords,this._origin),Object(A.i)(this._originTransform),Object(A.s)(this._originTransform,this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}},{key:"_updateAll",value:function(e){this._visible&&(this._updateOrigin(e),this._updatePathSegments(e),this._updatePerimeterSegments(e),this._updateVertexManipulators(e),this._updateArea(e),this._updateProjectionLines(e),this._updateLabels(e),this._updateLaserLine())}},{key:"_createSegments",value:function(e,t){for(var i=e.path,n=this._view.renderCoordsHelper.spatialReference,r=this._model.measurementMode,a=[],s=[],o=[],l=e.validMeasurement?i.numVertices:i.numVertices-1,c=0;c<l;++c){var h=e[t][c],u=e[t][(c+1)%i.numVertices],d=null;switch(r){case"euclidean":d=new pe.a(h,u);break;case"geodesic":d=new pe.b(h,u,n)}e.intersectingSegments.has(c)?o.push(d):s.push(d),a.push(d)}return{all:a,nonIntersecting:s,intersecting:o}}},{key:"_updatePathSegments",value:function(e){var t=this._createSegments(e,"positionsRenderCoords"),i=e.path,n=this._view.renderCoordsHelper,r=n.spatialReference,a=this._model.measurementMode;if(this._cursorSegment=null,i.numVertices>0&&"drawing"===this._model.state&&Object(P.k)(this._model.cursorPoint)&&n.toRenderCoords(this._model.cursorPoint,this._cursorPositionRenderSpace)){var s=e.positionsRenderCoords[i.numVertices-1],o=this._cursorPositionRenderSpace,l=null;switch(a){case"euclidean":l=new pe.a(s,o);break;case"geodesic":l=new pe.b(s,o,r)}t.nonIntersecting.push(l),this._cursorSegment=l}this._path.setGeometryFromSegments(t.nonIntersecting,this._origin),this._intersectedPath.setGeometryFromSegments(t.intersecting,this._origin),this._pathSegments=t.all}},{key:"_updatePerimeterSegments",value:function(e){var t=this._createSegments(e,"positionsFittedRenderCoords");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._perimeterSegments=t.all}},{key:"_createVertexManipulator",value:function(){var e=Object(T.e)(this._view,this._params.handleColor,this._params.handleOpacity);return e.radius=this._params.handleRadius,{id:this._manipulators.add(e),manipulator:e}}},{key:"_removeVertexManipulator",value:function(e){this._manipulators.remove(e)}},{key:"_updateVertexManipulators",value:function(e){var t=this,i=this._model.path.vertices,n=this.vertexManipulators;Object(U.d)(n,i.length,function(){return t._createVertexManipulator()},function(e){return t._removeVertexManipulator(e.manipulator)}),n.forEach(function(t,n){t.manipulator.metadata=i[n],t.manipulator.renderLocation=e.positionsRenderCoords[n]}),"drawing"===this._model.state&&Object(P.k)(this._model.cursorPoint)?(this._cursorManipulator.available=!0,this._cursorManipulator.location=this._model.cursorPoint):this._cursorManipulator.available=!1}},{key:"_updateArea",value:function(e){switch(this._model.measurementMode){case"euclidean":this._updateAreaEuclidean(e);break;case"geodesic":this._updateAreaGeodesic()}}},{key:"_updateAreaEuclidean",value:function(e){e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=!0,this._perimeter.visible=!0,this._projectionLines.visible=!0):(this._measurementArea.visible=!1,this._perimeter.visible=!1,this._projectionLines.visible=!1)}},{key:"_updateAreaGeodesic",value:function(){this._measurementArea.visible=!1,this._perimeter.visible=!1,this._projectionLines.visible=!1}},{key:"_updateProjectionLines",value:function(e){var t=e.path;if(t.numVertices>0&&e.validMeasurement&&"euclidean"===this._model.measurementMode){for(var i=[],n=0;n<t.numVertices;++n){var r=Object(M.e)();Object(C.i)(r,this._model.viewData.positionsRenderCoords[n],this._origin);var a=Object(M.e)();Object(C.i)(a,this._model.viewData.positionsFittedRenderCoords[n],this._origin),i.push([r,a])}this._projectionLines.geometry=i}else this._projectionLines.geometry=null}},{key:"_updateLabels",value:function(e){if(this._visible){var t=this._model,i=this._view,n="drawing"===t.state;if(this._areaLabel.geometry=i.renderCoordsHelper.fromRenderCoords(e.areaCentroid,i.spatialReference),this._areaLabel.text=t.areaLabel,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&null!=t.areaLabel,e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){var r=this._pathSegments[e.pathLengthLabelSegmentIndex],a=Object(P.k)(this._cursorSegment)?this._cursorSegment:be;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:"corner",left:r,right:a},this._pathLengthLabel.text=t.pathLengthLabel,this._pathLengthLabel.visible=n&&t.path.numVertices>0}else this._pathLengthLabel.visible=!1;this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=Object(P.k)(this._cursorSegment)?{type:"segment",segment:this._cursorSegment,sampleLocation:"end"}:null,this._cursorSegmentLengthLabel.anchor="bottom",this._cursorSegmentLengthLabel.text=t.cursorSegmentLengthLabel,this._cursorSegmentLengthLabel.visible=n&&!!t.cursorSegmentLength&&0!==t.cursorSegmentLength.value,this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1),this._updatePerimeterLabel(this._model.viewData)}}},{key:"_updatePerimeterLabel",value:function(e){var t=this._model,i="geodesic"===t.measurementMode;if(t.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor="top",this._perimeterLengthLabel.text=t.perimeterLengthLabel,this._perimeterLengthLabel.visible=!0;for(var n=!0,r=0;r<e.path.numVertices;++r){var a=(e.perimeterLengthLabelSegmentIndex+r)%e.path.numVertices;if(n=!0,this._perimeterLengthLabel.geometry={type:"segment",segment:i?this._pathSegments[a]:this._perimeterSegments[a],sampleLocation:"center"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;n=!1}this._perimeterLengthLabel.visible=n}else this._perimeterLengthLabel.visible=!1}},{key:"_getFocusPoint",value:function(){var e=this._model,t=this._model.lastDraggedVertex;switch(e.state){case"drawing":return Object(P.k)(e.cursorPoint)?e.cursorPoint:Object(P.k)(t)?e.path.getVertexPositionAsPoint(t):Object(P.q)(e.path.lastPoint);case"editing":return Object(P.k)(t)?e.path.getVertexPositionAsPoint(t):null;default:return e.cursorPoint}}},{key:"_updateLaserLine",value:function(){var e=this._model,t=this._params.laserLineEnabled&&"measured"!==e.state&&e.active,i=this._getFocusPoint();if(t&&Object(P.k)(i)){var n=this._tempHandlePosition;this._view.renderCoordsHelper.toRenderCoords(i,n),this._laserLine.heightManifoldTarget=n}else this._laserLine.heightManifoldTarget=null}},{key:"_initializeListeners",value:function(){var e=this;this._listenerHandles=new y.a,this._listenerHandles.add([this._model.watch(["state","lastDraggedVertex"],function(){return e._updateLaserLine()}),this._model.watch(["cursorPoint","unit","measurementMode","active","viewData"],function(){return e._updateAll(e._model.viewData)}),this._model.watch(["areaLabel","cursorSegmentLengthLabel","pathLengthLabel","perimeterLengthLabel"],function(){e._updateAll(e._model.viewData)}),this._view.state.watch("camera",function(){return e._updatePerimeterLabel(e._model.viewData)})])}},{key:"_destroyListeners",value:function(){this._listenerHandles.destroy(),this._listenerHandles=null}}]),e}();ge._handleGeometry=D.a.createSphereGeometry(1,32,32),function(e){e.PickRequest=function(){return function e(){s(this,e)}}(),e.PickResult=function(){return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s(this,e),this.type=t,this.scenePoint=i,this.mapPoint=n}}()}(ge||(ge={}));var be=new pe.a(Object(M.e)(),Object(M.e)()),ve=ge,_e=i("QS+a"),fe=i("08/N"),Oe=i("wg3g");function ye(e){return"mouse"!==e.pointerType||0===e.button}var je=i("/CmD"),Le=i("IDUf"),we=i("OKTS"),ke=i("YyOG"),Pe=(i("G48n"),i("9pTf")),Se=i("gYg2"),Me=i("n4FQ"),Ce=i("dhe/"),Ae=function(e){c(i,e);var t=u(i);function i(){var e;return s(this,i),(e=t.apply(this,arguments)).result=null,e}return l(i,[{key:"destroy",value:function(){this.result=null}},{key:"geometry",set:function(e){this.result=null,this._set("geometry",Object(P.k)(e)?e.clone():null)}}]),i}(je.a);Object(o.a)([Object(d.b)({value:null})],Ae.prototype,"geometry",null),Object(o.a)([Object(d.b)()],Ae.prototype,"result",void 0),Ae=Object(o.a)([Object(m.a)("esri.views.3d.interactive.graphics.AreaMeasurement3D")],Ae);var xe,De,Ge=i("SuVq"),Ve=(i("4GrV"),i("zm0L")),Re=i("ixpo"),Ee=i("aunz"),ze=i("Z35e"),Te=function(){function e(t,i,n){s(this,e),this.editGeometry=t,this.vertex=i,this.pos=n}return l(e,[{key:"apply",value:function(){var e="redo";Object(P.j)(this.originalPosition)&&(e="apply",this.originalPosition=this.vertex.pos),this._apply(e)}},{key:"undo",value:function(){this.vertex.pos=Object(P.q)(this.originalPosition),this.editGeometry.emit("change",{updatedVertices:[this.vertex],operation:"undo"})}},{key:"accumulate",value:function(t){return t instanceof e&&t.vertex===this.vertex&&(this.pos=t.pos,this._apply("apply"),!0)}},{key:"_apply",value:function(e){this.vertex.pos=this.pos,this.editGeometry.components.forEach(function(e){return e.unnormalizeVertexPositions()}),this.editGeometry.emit("change",{updatedVertices:[this.vertex],operation:e})}}]),e}(),Ue=function(e){c(i,e);var t=u(i);function i(){var e;return s(this,i),(e=t.call(this))._handles=new y.a,e._dirty=!0,e._model=null,e._view=null,e._version=0,e._internalGeometryChange=!1,e}return l(i,[{key:"model",get:function(){return this._model},set:function(e){this._model=e,Object(P.k)(this._model)&&Object(P.k)(this._view)&&this._initialize(this._model,this._view)}},{key:"view",get:function(){return this._view},set:function(e){this._view=e,Object(P.k)(this._model)&&Object(P.k)(this._view)&&this._initialize(this._model,this._view)}},{key:"initialized",get:function(){return Object(P.k)(this._model)&&Object(P.k)(this._view)}},{key:"version",get:function(){return this._version}},{key:"_initialize",value:function(e,t){var i=this;this._handles.removeAll(),this._handles.add(Object(j.init)(e,"geometry",function(){return i._updateEditGeometryFromModelGeometry(e,t)},!0))}},{key:"_updateEditGeometryFromModelGeometry",value:function(e,t){var i=this;this._version++,this._internalGeometryChange||(this._handles.remove("EditGeometry"),this._editGeometry=Object(P.k)(e.geometry)?Ee.c.fromGeometry(e.geometry,t.viewingMode):new Ee.c(Object(Re.a)(!0,!1,t.spatialReference,t.viewingMode)),this.emit("clear",{type:"clear"}),this._handles.add(this._editGeometry.on("change",function(t){i._internalGeometryChange=!0,e.geometry=i.numVertices>0?i._editGeometry.toPolygon():null,i._internalGeometryChange=!1}),"EditGeometry"))}},{key:"vertices",get:function(){var e=[];return this.forEachVertex(function(t){e.push(t)}),e}},{key:"numVertices",get:function(){return this.initialized&&this._editGeometry.components.length>0?this._editGeometry.components[0].vertices.length:0}},{key:"lastPoint",get:function(){if(this.initialized&&this._editGeometry.components.length>0){var e=this._editGeometry.components[0].getLastVertex();if(Object(P.k)(e))return this._editGeometry.coordinateHelper.createPoint(e.pos)}return null}},{key:"getVertex",value:function(e){if(!this.initialized||0===this._editGeometry.components.length||0===this._editGeometry.components[0].vertices.length)return null;var t=this._editGeometry.components[0].vertices[0],i=t;do{if(i.index===e)return i;i=i.right.right}while(i!==t&&null!=i);return null}},{key:"getVertexPositionAsPoint",value:function(e){return this._editGeometry.coordinateHelper.createPoint(e.pos)}},{key:"getVertexPositionAsPointFromIndex",value:function(e){return this._editGeometry.coordinateHelper.createPoint(this.getVertex(e).pos)}},{key:"forEachVertex",value:function(e){this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].iterateVertices(e)}},{key:"forEachVertexPosition",value:function(e){var t=this._editGeometry.coordinateHelper;this.forEachVertex(function(i,n){t.toPoint(i.pos,qe),e(qe,n)})}},{key:"clear",value:function(){Object(P.k)(this.model)&&(this.model.geometry=null)}},{key:"add",value:function(e){if(!this.initialized)return null;0===this._editGeometry.components.length&&this._editGeometry.components.push(new Ee.a(this._editGeometry));var t=new ze.a(this._editGeometry,this._editGeometry.components[0],this._editGeometry.coordinateHelper.fromPoint(e));return this._editGeometry.apply(t),this.emit("vertex-update",{type:"vertex-update"}),t}},{key:"ensureContains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=!1;if(this._editGeometry.components.forEach(function(t){t.iterateVertices(function(t){t===e&&(i=!0)})}),!i)throw new Error("vertex doesnt exist ".concat(t));return i}},{key:"setVertexPosition",value:function(e,t){if(!this.initialized)return null;var i=new Te(this._editGeometry,e,this._editGeometry.coordinateHelper.fromPoint(t));return this._editGeometry.apply(i),this.emit("vertex-update",{type:"vertex-update"}),i}}]),i}(Ve.a),qe=new Ge.a,Ie=i("WZb1"),We=i("Ehki"),Fe=i("aAs6"),He=i("QLbw"),Be=i("6lH3");(De=xe||(xe={})).boundingSphere=function(e,t){var i=t.center;Object(C.v)(i,0,0,0);for(var n=0;n<e.length;++n)Object(C.e)(i,i,e[n]);Object(C.d)(i,i,1/e.length);for(var r=0,a=0;a<e.length;++a)r=Math.max(r,Object(C.k)(i,e[a]));t.radius=Math.sqrt(r)},De.bestFitPlane=function(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");Object(Fe.g)(e[0],e[1],e[2],t)},De.planePointDistance=function(e,t){return Object(C.g)(e,t)+e[3]},De.segmentLengthEuclidean=function(e,t,i){return Object(Se.o)(e,Ne,i)&&Object(Se.o)(t,Je,i)?Object(C.n)(Ne,Je):0},De.segmentLengthGeodesic=function(e,t){if(!Object(Se.p)(e,Ne)||!Object(Se.p)(t,Je))return 0;var i={distance:null};return Object(He.f)(i,[Ne[0],Ne[1]],[Je[0],Je[1]]),i.distance},De.segmentLengthGeodesicVector=function(e,t,i){var n={distance:null};return Object(He.f)(n,[e[0],e[1]],[t[0],t[1]],i),n.distance},De.triangleAreaEuclidean=function(e,t,i){return.5*Math.abs((t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0]))},De.triangleAreaGeodesic=function(e,t,i,n){var r=Qe;return Object(Se.s)(e,n,Ne)&&Object(Se.s)(t,n,Je)&&Object(Se.s)(i,n,Ke)?(r.setPoint(0,0,Ne),r.setPoint(0,1,Je),r.setPoint(0,2,Ke),Math.abs(Object(Be.geodesicArea)(r,"square-meters"))):0},De.tangentFrame=function(e,t,i){Math.abs(e[0])>Math.abs(e[1])?Object(C.v)(t,0,1,0):Object(C.v)(t,1,0,0),Object(C.f)(i,e,t),Object(C.q)(t,t),Object(C.f)(t,i,e),Object(C.q)(i,i)},De.fitHemisphere=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var i=0;i<e.length;++i)if(Object(C.g)(t,e[i])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&Object(C.j)(t,e[0]),!0;Object(C.v)(Ze,0,0,0);for(var r=0;r<e.length;++r)Object(C.e)(Ze,Ze,e[r]);if(Object(C.q)(Ze,Ze),n(e,Ze))return t&&Object(C.j)(t,Ze),!0;if(!i)return!1;for(var a=0;a<e.length;++a)for(var s=0;s<e.length;++s)if(a!==s&&(Object(C.f)(Ze,e[a],e[s]),Object(C.q)(Ze,Ze),n(e,Ze)))return t&&Object(C.j)(t,Ze),!0;return!1},De.compareSets=function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(var i=0;i<e.size;++i)if(!t.has(e[i]))return!1;return!0};var Ne=Object(M.e)(),Je=Object(M.e)(),Ke=Object(M.e)(),Qe=new We.a({rings:[[Ne,Je,Ke]],spatialReference:Ie.a.WGS84}),Ze=Object(M.e)(),Ye=xe,Xe=i("PNY3"),$e=i("AvGH"),et=i("D8Ta"),tt=i("+yyC"),it=i("M0lq");function nt(e,t){for(var i=new Float64Array(e.length*t),n=0;n<e.length;++n)for(var r=e[n],a=0;a<t;++a)i[n*t+a]=r[a];return i}var rt=i("9lO2"),at=function(e){c(i,e);var t=u(i);function i(){var e;return s(this,i),(e=t.apply(this,arguments))._unitNormalizer=new rt.a,e._measurementData=new(function(){function e(){s(this,e),this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=Object(M.e)(),this.areaCentroidRenderCoords=Object(M.e)(),this.geodesicAreaCentroidRenderCoords=Object(M.e)(),this._length=0,this._centroidRenderCoords=Object(M.e)(),this._planeWorldCoords=Object(et.c)(),this._worldUp=Object(M.e)(),this._worldTangent=Object(M.e)(),this._frame=[Object(M.e)(),Object(M.e)(),Object(M.e)()],this._pathVersion=-1,this._validMeasurement=!1,this._tempU=Object(M.e)(),this._tempV=Object(M.e)(),this._tempVec3=Object(M.e)(),this._tempSphere={center:Object(M.e)(),radius:0}}return l(e,[{key:"update",value:function(e,t,i,n,r,a,s){if(this._pathVersion!==e.version||this._validMeasurement!==n){this._pathVersion=e.version,this._validMeasurement=n,this._resize(e.numVertices);var o=Object(Pe.g)(t.spatialReference),l=Object(Se.b)(t.spatialReference,o)&&Object(Se.a)(t.spatialReference),c=this.positionsGeographic,h=this.positionsWorldCoords,u=this.positionsRenderCoords,d=this.positionsSpherical;e.forEachVertexPosition(function(e,t){Object(Se.o)(e,h[t],a),Object(Se.o)(e,u[t],r),l&&(Object(Se.p)(e,c[t]),Object(Se.o)(e,d[t],o),Object(C.q)(d[t],d[t]))});var p=this._updatePathLengths(n);if(this.pathLength=this._length>0?new Me.a(i.normalizeDistance(p),"meters"):null,l){var m=this._updateGeodesicPathLengths(n,a);this.geodesicPathLength=this._length>0?new Me.a(m,"meters"):null}else this.geodesicPathLength=null;if(!n)return this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),void this.geodesicIntersectingSegments.clear();this._updateArea(t,i,r,a,s),l&&this._updateGeodesicArea(t)}}},{key:"_resize",value:function(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(Object(M.e)()),this.positionsRenderCoords.push(Object(M.e)()),this.positionsProjectedWorldCoords.push(Object($e.a)()),this.positionsFittedRenderCoords.push(Object(M.e)()),this.positionsGeographic.push(Object(M.e)()),this.positionsSpherical.push(Object(M.e)()),this.positionsStereographic.push(Object($e.a)()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}},{key:"_updatePathLengths",value:function(e){for(var t=this.positionsWorldCoords,i=this.pathSegmentLengths,n=0,r=0;r<this._length;++r){var a=i[r]=Object(C.n)(t[r],t[(r+1)%this._length]);(r<this._length-1||e)&&(n+=a)}return n}},{key:"_updateGeodesicPathLengths",value:function(e,t){for(var i=this.positionsGeographic,n=this.geodesicPathSegmentLengths,r=0,a=0;a<this._length;++a){var s=n[a]=Ye.segmentLengthGeodesicVector(i[a],i[(a+1)%this._length],t);(a<this._length-1||e)&&(r+=s)}return r}},{key:"_updateArea",value:function(e,t,i,n,r){var a=e.renderCoordsHelper,s=this.positionsWorldCoords,o=this.positionsRenderCoords,l=this.positionsProjectedWorldCoords,c=this.positionsFittedRenderCoords,h=this._planeWorldCoords,u=this._centroidRenderCoords;Object(U.b)(o,u),a.worldUpAtPosition(u,this._worldUp),a.worldBasisAtPosition(u,0,this._worldTangent),Object(Se.l)(u,this._worldUp,i,this._worldUp,n),Object(Se.l)(u,this._worldTangent,i,this._worldTangent,n),s.length>2&&Ye.bestFitPlane(s,h),this.fittingMode=this._selectFittingMode(h,s,this._worldUp,r);var d=0;if("horizontal"===this.fittingMode){var p=-1/0;o.forEach(function(e,t){var i=a.getAltitude(o[t]);i>p&&(p=i,d=t)})}var m=s[d],g=h,b=this._worldTangent;"horizontal"===this.fittingMode?g=this._worldUp:"vertical"===this.fittingMode&&(g=this._tempVec3,b=this._worldUp,Object(Fe.e)(h,this._worldUp,g)),Object(C.j)(this._frame[2],g),Object(Fe.e)(b,g,this._frame[0]),Object(C.f)(this._frame[1],this._frame[0],this._frame[2]),Object(C.s)(this._frame[1],this._frame[1]);for(var v=this._tempVec3,_=this._tempU,f=this._tempV,O=0;O<this._length;++O){var y=l[O],j=c[O];Object(C.i)(v,s[O],m),Object(it.r)(y,Object(C.g)(this._frame[0],v),Object(C.g)(this._frame[1],v)),Object(C.d)(_,this._frame[0],y[0]),Object(C.d)(f,this._frame[1],y[1]),Object(C.e)(v,_,f),Object(C.e)(v,v,m),Object(Se.r)(v,n,j,i)}this.perimeterLength=this._length>0?new Me.a(t.normalizeDistance(this._updatePerimeterLengths()),"meters"):null,Object(U.b)(c,this.areaCentroidRenderCoords),Object(Se.r)(this.areaCentroidRenderCoords,i,this.areaCentroidWorldCoords,n),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new Me.a(t.normalizeArea(this._computeArea()),"square-meters"):null}},{key:"_updateGeodesicArea",value:function(e){var t=e.renderCoordsHelper,i=this.positionsSpherical,n=this.positionsStereographic,r=this._tempVec3,a=Ye.fitHemisphere(i,r);if(a){var s=this._tempU,o=this._tempV;Object(Fe.j)(r,s,o);for(var l=0;l<this._length;++l){var c=Object(C.g)(i[l],s),h=Object(C.g)(i[l],o),u=Object(C.g)(i[l],r);Object(it.r)(n[l],c/u,h/u)}Object(C.d)(r,r,Object(Pe.e)(e.spatialReference).radius),t.toRenderCoords(r,Object(Pe.g)(e.spatialReference),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=a&&0===this.geodesicIntersectingSegments.size?new Me.a(this._computeGeodesicArea(),"square-meters"):null}else this.geodesicArea=null}},{key:"_updatePerimeterLengths",value:function(){for(var e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths,i=0,n=0;n<this._length;++n)i+=t[n]=Object(it.i)(e[n],e[(n+1)%this._length]);return i}},{key:"_updateIntersectingSegments",value:function(){var e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(var i=0;i<this._length;++i)for(var n=i+2;n<this._length;++n)if((n+1)%this._length!==i){var r=e[i],a=e[(i+1)%this._length],s=e[n],o=e[(n+1)%this._length];Object(Xe.d)(r,a,s,o)&&(t.add(i),t.add(n))}}},{key:"_computeArea",value:function(){for(var e=this.positionsProjectedWorldCoords,t=nt(e,2),i=this.triangleIndices=new Uint32Array(Object(tt.b)(t,[],2)),n=0,r=0;r<i.length;r+=3)n+=Ye.triangleAreaEuclidean(e[i[r]],e[i[r+1]],e[i[r+2]]);return n}},{key:"_updateGeodesicIntersectingSegments",value:function(){var e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(var i=0;i<this._length;++i)for(var n=i+2;n<this._length;++n)if((n+1)%this._length!==i){var r=e[i],a=e[(i+1)%this._length],s=e[n],o=e[(n+1)%this._length];Object(Xe.d)(r,a,s,o)&&(t.add(i),t.add(n))}}},{key:"_computeGeodesicArea",value:function(){for(var e=this.positionsGeographic,t=nt(this.positionsStereographic,2),i=this.geodesicTriangleIndices=new Uint32Array(Object(tt.b)(t,[],2)),n=0,r=0;r<i.length;r+=3)n+=Ye.triangleAreaGeodesic(e[i[r]],e[i[r+1]],e[i[r+2]],Ie.a.WGS84);return n}},{key:"_selectFittingMode",value:function(e,t,i,n){var r=t.map(function(t){return Math.abs(Ye.planePointDistance(e,t))}).reduce(function(e,t){return Math.max(e,t)},0);Ye.boundingSphere(t,this._tempSphere);var a=r/(2*this._tempSphere.radius),s="horizontal";return a<n.maxRelativeErrorCoplanar?s="oblique":a<n.maxRelativeErrorAlmostCoplanar&&(s=Math.abs(Object(C.g)(i,e))>Math.cos(Object(we.d)(n.verticalAngleThreshold))?"horizontal":"vertical"),s}}]),e}()),e._handles=new y.a,e.dataObject=new Ae,e.path=new Ue,e.cursorPoint=null,e.state="initial",e.lastDraggedVertex=null,e.mode="auto",e.unit="metric",e.active=!1,e.fittingSettings={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80},e.geodesicMeasurementDistanceThreshold=1e5,e}return l(i,[{key:"initialize",value:function(){var e=this;this.path.model=this.dataObject,Object(ke.a)("esri/core/t9n/Units").then(function(t){e.messages=t}),this._handles.add(Object(Le.c)(n(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ke.a)("esri/core/t9n/Units");case 2:e.messages=t.sent;case 3:case"end":return t.stop()}},t)})))),this._handles.add(Object(j.whenTrue)(this.sceneView,"ready",function(){var t=e.sceneView.spatialReference,i=Object(Pe.g)(t),n=i===Pe.a?Pe.d:i,r=!t||Object(Se.b)(t,n)?n:t;e._worldSpatialReference=r,e._unitNormalizer.spatialReference=r,e.path.view=e.sceneView}),"scene-view"),this.reset(),this._handles.add(this.path.on("clear",function(){e.notifyChange("numVertices"),e._updateMeasurementData()})),this._handles.add(this.path.on("vertex-update",function(){e.notifyChange("numVertices"),e._updateMeasurementData()})),this._handles.add(this.watch("state",function(){return e._updateMeasurementData()},!0)),this._handles.add(this.watch("fittingSettings",function(){return e._updateMeasurementData()}))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null}},{key:"validMeasurement",get:function(){return this.numVertices>=3&&"measured"===this.state||"editing"===this.state}},{key:"numVertices",get:function(){return this.path.numVertices}},{key:"measurementData",get:function(){return this._measurementData}},{key:"_updateMeasurementData",value:function(){var e=this._measurementData;e.update(this.path,this.sceneView,this._unitNormalizer,this.validMeasurement,this.sceneView.renderSpatialReference,this._worldSpatialReference,this.fittingSettings),this.dataObject.result={area:e.area,geodesicArea:e.geodesicArea,pathLength:e.pathLength,geodesicPathLength:e.geodesicPathLength,perimeterLength:e.perimeterLength},this.notifyChange("measurementData")}},{key:"area",get:function(){return this.measurementData.area}},{key:"geodesicArea",get:function(){return this.measurementData.geodesicArea}},{key:"areaLabel",get:function(){return this._formatAreaLabel(this.messages,"geodesic"===this.measurementMode?this.measurementData.geodesicArea:this.measurementData.area,this.unit)}},{key:"pathLength",get:function(){return this.measurementData.pathLength}},{key:"geodesicPathLength",get:function(){return this.measurementData.geodesicPathLength}},{key:"pathLengthLabel",get:function(){return this._formatLengthLabel(this.messages,"geodesic"===this.measurementMode?this.measurementData.geodesicPathLength:this.measurementData.pathLength,this.unit)}},{key:"perimeterLength",get:function(){return this.measurementData.perimeterLength}},{key:"geodesicPerimeterLength",get:function(){return this.measurementData.geodesicPathLength}},{key:"perimeterLengthLabel",get:function(){return this.measurementData.perimeterLength&&this._formatLengthLabel(this.messages,"geodesic"===this.measurementMode?this.measurementData.geodesicPathLength:this.measurementData.perimeterLength,this.unit)}},{key:"cursorSegmentLength",get:function(){var e=this.path.lastPoint;return Object(P.k)(e)&&Object(P.k)(this.cursorPoint)?new Me.a(this._unitNormalizer.normalizeDistance(Ye.segmentLengthEuclidean(e,this.cursorPoint,this._worldSpatialReference)),"meters"):null}},{key:"geodesicCursorSegmentLength",get:function(){var e=this.path.lastPoint;return Object(P.k)(e)&&Object(P.k)(this.cursorPoint)?new Me.a(Ye.segmentLengthGeodesic(e,this.cursorPoint),"meters"):null}},{key:"cursorSegmentLengthLabel",get:function(){return this._formatLengthLabel(this.messages,"geodesic"===this.measurementMode?this.geodesicCursorSegmentLength:this.cursorSegmentLength,this.unit)}},{key:"viewData",get:function(){var e=this.measurementData,t="geodesic"===this.measurementMode,i=t?this.geodesicArea:this.area,n=1;if(i){var r=this._toPreferredAreaUnit(i,this.unit);n=Object(we.k)(Math.sqrt(r.value)/Math.sqrt(300)),n*=Math.sqrt(Object(b.c)(1,r.unit,"square-meters")),n/=this._unitNormalizer.normalizeDistance(1)}return{validMeasurement:this.validMeasurement,path:this.path,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:t?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:t?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:t?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:this.validMeasurement?0:this.path.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:n}}},{key:"measurementMode",get:function(){var e=this.mode;return"auto"===e&&(e="euclidean",(this.geodesicPathLength?this.geodesicPathLength.value:0)+(!this.validMeasurement&&this.geodesicCursorSegmentLength?this.geodesicCursorSegmentLength.value:0)>this.geodesicMeasurementDistanceThreshold&&(e="geodesic")),null==this.geodesicPathLength&&(e="euclidean"),e}},{key:"reset",value:function(){this.clearMeasurement(),this._updateMeasurementData()}},{key:"clearMeasurement",value:function(){this.path.clear(),this.state="initial",this.cursorPoint=null}},{key:"finishMeasurement",value:function(){this.path.numVertices<3?this.clearMeasurement():this.state="measured"}},{key:"_preferredAreaUnit",value:function(e,t){switch(t){case"metric":return Object(b.u)(e.value,e.unit);case"imperial":return Object(b.r)(e.value,e.unit);default:return t}}},{key:"_preferredLengthUnit",value:function(e,t){var i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case"metric":return Object(b.v)(e.value,e.unit);case"imperial":return Object(b.s)(e.value,e.unit);default:return i}}},{key:"_toPreferredAreaUnit",value:function(e,t){return e.toUnit(this._preferredAreaUnit(e,t))}},{key:"_toPreferredLengthUnit",value:function(e,t){return e.toUnit(this._preferredLengthUnit(e,t))}},{key:"_formatAreaLabel",value:function(e,t,i){return e&&t&&Object(Ce.b)(e,t,this._preferredAreaUnit(t,i))}},{key:"_formatLengthLabel",value:function(e,t,i){return e&&t&&Object(Ce.b)(e,t,this._preferredLengthUnit(t,i))}},{key:"_deriveLengthUnitFromAreaUnit",value:function(e){switch(e){case"metric":return"metric";case"imperial":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";case"square-meters":return"meters";case"square-kilometers":return"kilometers";case"acres":return"imperial";case"ares":case"hectares":return"metric"}throw new Error("unhandled area unit")}}]),i}(je.a);Object(o.a)([Object(d.b)()],at.prototype,"messages",void 0),Object(o.a)([Object(d.b)()],at.prototype,"dataObject",void 0),Object(o.a)([Object(d.b)({constructOnly:!0})],at.prototype,"sceneView",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"path",void 0),Object(o.a)([Object(d.b)()],at.prototype,"cursorPoint",void 0),Object(o.a)([Object(d.b)()],at.prototype,"state",void 0),Object(o.a)([Object(d.b)()],at.prototype,"lastDraggedVertex",void 0),Object(o.a)([Object(d.b)()],at.prototype,"mode",void 0),Object(o.a)([Object(d.b)()],at.prototype,"unit",void 0),Object(o.a)([Object(d.b)()],at.prototype,"active",void 0),Object(o.a)([Object(d.b)()],at.prototype,"fittingSettings",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"validMeasurement",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"numVertices",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"measurementData",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"area",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"geodesicArea",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"areaLabel",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"pathLength",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"geodesicPathLength",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"pathLengthLabel",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"perimeterLength",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"geodesicPerimeterLength",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"perimeterLengthLabel",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"cursorSegmentLength",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"geodesicCursorSegmentLength",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"cursorSegmentLengthLabel",null),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"viewData",null),Object(o.a)([Object(d.b)()],at.prototype,"geodesicMeasurementDistanceThreshold",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],at.prototype,"measurementMode",null);var st=at=Object(o.a)([Object(m.a)("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DModel")],at),ot=function(e){c(i,e);var t=u(i);function i(e){var n;return s(this,i),(n=t.call(this,e))._handles=new y.a,n.deferCreation=!0,n.model=new st({sceneView:e.view}),n}return l(i,[{key:"initialize",value:function(){var e=this;this._view=new ve(this.model,this.manipulators),this._controller=new(function(){function e(t,i,n){s(this,e),this._manipulators=n,this._handles=new y.a,this._tempPickRequest=new ve.PickRequest,this.model=t,this.view=i,this.model.reset(),this._setupManipulators()}return l(e,[{key:"destroy",value:function(){this._handles.destroy(),this._handles=null}},{key:"handleInputEvent",value:function(e){switch(e.type){case"immediate-click":this._handleImmediateClick(e);break;case"pointer-move":this._handlePointerMove(e);break;case"drag":this._handleDrag(e);break;case"key-down":this._handleKeyDown(e)}}},{key:"_setupManipulators",value:function(){var e=this,t=function(e){return"manipulator-".concat(e)},i=0,n=function(t){return function(n){return"start"===n.action&&(i++,e.model.lastDraggedVertex=Object(P.q)(e.view.manipulatorToVertex(t)),"measured"===e.model.state&&(e.model.state="editing")),n}},r=function(){return function(t){return"end"===t.action?(0===--i&&"editing"===e.model.state&&(e.model.state="measured"),null):t}},a=function(i,a){e._handles.add([Object(Oe.e)(a,function(t,i,a){var s=Object(z.a)(t),o=Object(P.q)(e.view.manipulatorToVertex(t));i.next(n(t)).next(s).next(r()).next(e.view.screenToMap3D()).next(function(i){t.location=i.mapEnd,e.model.path.setVertexPosition(o,Object(fe.a)(i.mapEnd))});var l=Object(fe.a)(e.model.path.getVertexPositionAsPoint(o));a.next(s).next(function(){e.model.path.setVertexPosition(o,l),t.location=l})}),a.events.on("double-click",function(t){ye(t)&&("drawing"===e.model.state&&e.model.finishMeasurement(),t.stopPropagation())})],t(i))},s=function(i){e._handles.remove(t(i))};this._manipulators.forEach(function(e){var t=e.id,i=e.manipulator;a(t,i)}),this._handles.add([this._manipulators.on("after-add",function(e){var t=e.item,i=t.id,n=t.manipulator;a(i,n)}),this._manipulators.on("after-remove",function(e){var t=e.item.id;s(t)})])}},{key:"_handleDrag",value:function(e){"editing"===this.model.state&&e.stopPropagation()}},{key:"_handleImmediateClick",value:function(e){if(ye(e)){var t=Object(_e.a)(e);if(this.model.active)switch(this.model.state){case"initial":this._addVertexAt(t)&&(this.model.state="drawing",e.stopPropagation());break;case"drawing":var i=this.view.vertexHandleAt(t,e.pointerType);if(Object(P.j)(i)){if(this._addVertexAt(t))return}else 0===i.index&&(this.model.finishMeasurement(),e.stopPropagation())}"mouse"===e.pointerType&&this._hoverAt(t)}}},{key:"_handlePointerMove",value:function(e){if("mouse"===e.pointerType){var t=Object(_e.a)(e);this._hoverAt(t)}}},{key:"_handleKeyDown",value:function(e){"Enter"===e.key&&"drawing"===this.model.state&&(this.model.finishMeasurement(),e.stopPropagation())}},{key:"_hoverAt",value:function(e){if(this.view.requiresCursorPoint){var t=this._pick(e);t.mapPoint&&(this.model.cursorPoint=t.mapPoint)}else this.model.cursorPoint=null}},{key:"_addVertexAt",value:function(e){var t=this._pick(e);return!!t.mapPoint&&(this.model.path.add(t.mapPoint),!0)}},{key:"_pick",value:function(e){var t=this._tempPickRequest;return t.screenPoint=e,this.view.pick(t)}}]),e}())(this.model,this._view,this.manipulators),this._handles.add(Object(j.init)(this,"state",function(t){switch(t){case"measured":return e.complete();case"ready":break;default:return e.create()}},!0))}},{key:"destroy",value:function(){this.detach(),this._view.destroy(),this._view=null,this._controller.destroy(),this._controller=null,this._handles.destroy(),this._handles=null}},{key:"state",get:function(){switch(this.model.state){case"initial":return this.model.numVertices>=1?"measuring":"ready";case"drawing":case"editing":return"measuring";case"measured":return"measured"}}},{key:"isSupported",get:function(){return"3d"===this.get("view.type")}},{key:"cursor",get:function(){return!this.model.active||"initial"!==this.model.state&&"drawing"!==this.model.state?null:"crosshair"}},{key:"activate",value:function(){this.model.active=!0}},{key:"deactivate",value:function(){this.model.active=!1}},{key:"onShow",value:function(){this._view.show()}},{key:"onHide",value:function(){this._view.hide()}},{key:"onDetach",value:function(){this.model.reset()}},{key:"onInputEvent",value:function(e){this._controller.handleInputEvent(e)}}]),i}(k.a);Object(o.a)([Object(d.b)({readOnly:!0})],ot.prototype,"state",null),Object(o.a)([Object(d.b)({readOnly:!0})],ot.prototype,"isSupported",null),Object(o.a)([Object(d.b)({readOnly:!0})],ot.prototype,"cursor",null),Object(o.a)([Object(d.b)({constructOnly:!0})],ot.prototype,"model",void 0),Object(o.a)([Object(p.a)("model.mode")],ot.prototype,"mode",void 0),Object(o.a)([Object(p.a)("model.unit")],ot.prototype,"unit",void 0),Object(o.a)([Object(p.a)("model.areaLabel")],ot.prototype,"areaLabel",void 0),Object(o.a)([Object(p.a)("model.area")],ot.prototype,"area",void 0),Object(o.a)([Object(p.a)("model.geodesicArea")],ot.prototype,"geodesicArea",void 0),Object(o.a)([Object(p.a)("model.pathLengthLabel")],ot.prototype,"pathLengthLabel",void 0),Object(o.a)([Object(p.a)("model.pathLength")],ot.prototype,"pathLength",void 0),Object(o.a)([Object(p.a)("model.geodesicPathLength")],ot.prototype,"geodesicPathLength",void 0),Object(o.a)([Object(p.a)("model.perimeterLengthLabel")],ot.prototype,"perimeterLengthLabel",void 0),Object(o.a)([Object(p.a)("model.perimeterLength")],ot.prototype,"perimeterLength",void 0),Object(o.a)([Object(p.a)("model.geodesicPerimeterLength")],ot.prototype,"geodesicPerimeterLength",void 0),Object(o.a)([Object(p.a)("model.validMeasurement")],ot.prototype,"validMeasurement",void 0),Object(o.a)([Object(p.a)("model.viewData")],ot.prototype,"viewData",void 0);var lt=ot=Object(o.a)([Object(m.a)("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DTool")],ot),ct=h.a.getLogger("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel"),ht=function(e){c(i,e);var t=u(i);function i(e){var n;return s(this,i),(n=t.call(this,e)).supportedViewType="3d",n._handles=new y.a,n._userUnitOptions=null,n._userUnit=null,n.tool=null,n}return l(i,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(j.init)(this,"unit",function(t){e.tool&&(e.tool.model.unit=t)})])}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"state",get:function(){return this.isDisabled?"disabled":this.tool?this.tool.state:"ready"}},{key:"measurement",get:function(){if(!this.tool||this.isDisabled)return null;var e=this.tool.model,t=e.measurementMode,i=e.measurementData,n=e.validMeasurement,r=0===("euclidean"===t?i.intersectingSegments:i.geodesicIntersectingSegments).size,a=r?n?"available":"unavailable":"invalid";return{mode:t,area:{text:r&&n?e.areaLabel:null,state:a},perimeterLength:{text:r&&n?e.perimeterLengthLabel:null,state:a}}}},{key:"unitOptions",get:function(){return this._filteredOrAllUnits(this._userUnitOptions)},set:function(e){this._userUnitOptions=e,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))}},{key:"unit",get:function(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)},set:function(e){this._userUnit=e?this._findSelectableUnit(e,this._userUnit):null,this.notifyChange("unit")}},{key:"start",value:function(){return this.createTool()}},{key:"clear",value:function(){this.removeTool()}},{key:"createToolParams",value:function(){var e=this;return{toolConstructor:lt,constructorArguments:function(){return{unit:e.unit}}}}},{key:"logUnsupportedError",value:function(){ct.error("AreaMeasurement3D widget is not implemented for MapView")}},{key:"logError",value:function(){ct.error.apply(ct,arguments)}},{key:"_findSelectableUnit",value:function(e,t){var i=this.unitOptions;return-1!==i.indexOf(e)?e:t?this._findSelectableUnit(t):i[0]}},{key:"_filteredOrAllUnits",value:function(e){if(!e)return b.p.slice();var t=e.filter(function(e){return-1!==b.p.indexOf(e)});return 0===t.length?b.p.slice():t}}]),i}(w.a);Object(o.a)([Object(d.b)({readOnly:!0})],ht.prototype,"state",null),Object(o.a)([Object(d.b)({readOnly:!0})],ht.prototype,"measurement",null),Object(o.a)([Object(d.b)({constructOnly:!0})],ht.prototype,"tool",void 0),Object(o.a)([Object(d.b)(L.a)],ht.prototype,"defaultUnit",void 0),Object(o.a)([Object(d.b)()],ht.prototype,"unitOptions",null),Object(o.a)([Object(d.b)()],ht.prototype,"unit",null);var ut=ht=Object(o.a)([Object(m.a)("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")],ht),dt=function(e){c(i,e);var t=u(i);function i(e,n){var r;return s(this,i),(r=t.call(this,e,n)).view=null,r.visible=null,r.iconClass="esri-icon-measure-area",r.label=void 0,r.messages=null,r.messagesUnits=null,r.viewModel=new ut,r.unitOptions=null,r.unit=null,r}return l(i,[{key:"render",value:function(){var e=this,t=this.viewModel,i=t.isSupported,n=t.active,r=t.measurement,a=t.state,s=t.unit,o="disabled"===a,l="ready"===a,c="measuring"===a||"measured"===a,h=this.messages,u=this.messagesUnits,d=n&&l?Object(f.a)("section",{key:"esri-area-measurement-3d__hint",class:"esri-area-measurement-3d__hint"},Object(f.a)("p",{class:"esri-area-measurement-3d__hint-text"},h.hint)):null,p=i?null:Object(f.a)("section",{key:"esri-area-measurement-3d__unsupported",class:"esri-area-measurement-3d__panel--error"},Object(f.a)("p",null,h.unsupported)),m=function(t,i,n){switch(i.state){case"available":return Object(f.a)("div",{key:"".concat(n,"-enabled"),class:"esri-area-measurement-3d__measurement-item"},Object(f.a)("span",{class:"esri-area-measurement-3d__measurement-item-title"},t),Object(f.a)("span",{class:"esri-area-measurement-3d__measurement-item-value"},i.text));case"unavailable":return Object(f.a)("div",{key:"".concat(n,"-disabled"),class:e.classes("esri-area-measurement-3d__measurement-item","esri-area-measurement-3d__measurement-item--disabled")},Object(f.a)("span",{class:"esri-area-measurement-3d__measurement-item-title"},t));case"invalid":return Object(f.a)("div",{key:"".concat(n,"-enabled"),class:"esri-area-measurement-3d__measurement-item"},Object(f.a)("span",{class:"esri-area-measurement-3d__measurement-item-title"},t),Object(f.a)("span",{class:"esri-area-measurement-3d__measurement-item-value"},h.notApplicable))}},g=c?Object(f.a)("section",{key:"esri-area-measurement-3d__measurement",class:"esri-area-measurement-3d__measurement"},m(h.area,r.area,"area"),m(h.perimeterLength,r.perimeterLength,"perimeter-length")):null,v="".concat(this.id,"__units"),_=Object(f.a)("label",{class:"esri-area-measurement-3d__units-label",for:v},h.unit),O=Object(f.a)("div",{class:"esri-area-measurement-3d__units-select-wrapper"},Object(f.a)("select",{class:"esri-area-measurement-3d__units-select esri-select",id:v,onchange:this._changeUnit,bind:this,value:s},this.viewModel.unitOptions.map(function(e){var t;return Object(f.a)("option",{key:e,value:e},Object(b.l)(e)?u.systems[e]:null==(t=u.units[e])?void 0:t.pluralCapitalized)}))),y=c?Object(f.a)("section",{key:"esri-area-measurement-3d__units",class:"esri-area-measurement-3d__units"},_,O):null,j=c?Object(f.a)("div",{key:"settings",class:"esri-area-measurement-3d__settings"},y):null,L=!i||n&&!c?null:Object(f.a)("div",{class:"esri-area-measurement-3d__actions"},Object(f.a)("button",{disabled:o,class:this.classes("esri-area-measurement-3d__clear-button esri-button esri-button--primary",o&&"esri-button--disabled"),bind:this,onclick:this._newMeasurement,type:"button"},h.newMeasurement)),w=this.visible?Object(f.a)("div",{class:"esri-area-measurement-3d__container"},p,d,j,g,L):null;return Object(f.a)("div",{key:this,class:"esri-area-measurement-3d esri-widget esri-widget--panel",role:"presentation"},w)}},{key:"_newMeasurement",value:function(){Object(g.l)(this.viewModel.start())}},{key:"_changeUnit",value:function(e){var t=e.target,i=t.options[t.selectedIndex];i&&(this.unit=i.value)}}]),i}(O.a);Object(o.a)([Object(p.a)("viewModel.view")],dt.prototype,"view",void 0),Object(o.a)([Object(p.a)("viewModel.visible")],dt.prototype,"visible",void 0),Object(o.a)([Object(p.a)("viewModel.active")],dt.prototype,"active",void 0),Object(o.a)([Object(d.b)()],dt.prototype,"iconClass",void 0),Object(o.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],dt.prototype,"label",void 0),Object(o.a)([Object(d.b)(),Object(_.a)("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],dt.prototype,"messages",void 0),Object(o.a)([Object(d.b)(),Object(_.a)("esri/core/t9n/Units")],dt.prototype,"messagesUnits",void 0),Object(o.a)([Object(d.b)({type:ut})],dt.prototype,"viewModel",void 0),Object(o.a)([Object(p.a)("viewModel.unitOptions")],dt.prototype,"unitOptions",void 0),Object(o.a)([Object(p.a)("viewModel.unit")],dt.prototype,"unit",void 0),Object(o.a)([Object(v.a)()],dt.prototype,"_newMeasurement",null),Object(o.a)([Object(v.a)()],dt.prototype,"_changeUnit",null),dt=Object(o.a)([Object(m.a)("esri.widgets.AreaMeasurement3D")],dt),t.default=dt}}])}();