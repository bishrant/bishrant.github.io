!function(){function e(e,t,r,n,o,i,a){try{var l=e[i](a),u=l.value}catch(c){return void r(c)}l.done?t(u):Promise.resolve(u).then(n,o)}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{"9fxc":function(n,u,b){"use strict";b.r(u);var f,O=b("pO5D"),h=(b("wSAH"),b("srIe")),d=(b("6S2I"),b("zqDF")),j=b("WbKI"),m=b("r88o"),w=b("04ZG"),g=b("Cduq"),k=b("4EHJ"),S=(b("ju1D"),b("9AIY"),b("WZb1")),E=b("OvF4"),_=(b("4GrV"),b("LE9a")),P=b("TRCY"),x=b("pqNC"),R=b("5pQd"),I=b("IvSi"),L=b("uRH/"),A=b("mXvl"),F=b("DbUH"),M=b("jhcG"),T=b("WmKv"),C=b("BGvB"),D=b("s7YA"),N=b("Gj5k"),H=b("ag7Y"),K=b("zm0L"),J=b("bV/r"),G=b("N5XI"),W=f=function(e){s(r,e);var t=y(r);function r(){var e;return l(this,r),(e=t.apply(this,arguments))._sublayersHandles=null,e.description=null,e.id=null,e.networkLink=null,e.title=null,e.sourceJSON=null,e.fullExtent=null,e}return c(r,[{key:"initialize",value:function(){var e=this;Object(G.whenOnce)(this,"networkLink").then(function(){return Object(G.whenTrueOnce)(e,"visible")}).then(function(){return e.load()})}},{key:"load",value:function(e){var t=this;if(this.networkLink&&!this.networkLink.viewFormat){var r=Object(h.k)(e)?e.signal:null,n=this._fetchService(this._get("networkLink").href,r).then(function(e){var r=Object(C.a)(e.sublayers);t.fullExtent=E.a.fromJSON(r),t.sourceJSON=e;var n=Object(d.m)(_.a.ofType(f),Object(C.e)(f,e));t.sublayers?t.sublayers.addMany(n):t.sublayers=n,t.layer.emit("sublayer-update"),t.layer&&t.layer.notifyChange("visibleSublayers")});return this.addResolvingPromise(n),Promise.resolve(this)}}},{key:"sublayers",set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach(function(e){e.parent=null,e.layer=null}),this._sublayersHandles.forEach(function(e){return e.remove()}),this._sublayersHandles=null),e&&(e.forEach(function(e){e.parent=t,e.layer=t.layer}),this._sublayersHandles=[e.on("after-add",function(e){var r=e.item;r.parent=t,r.layer=t.layer}),e.on("after-remove",function(e){var t=e.item;t.parent=null,t.layer=null})]),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(d.m)(_.a.ofType(f),e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(function(t){return t.layer=e})}},{key:"_fetchService",value:function(e,t){return Object(C.b)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then(function(e){return Object(C.d)(e.data)})}}]),r}(K.a.EventedMixin(Object(H.b)(J.a)));Object(O.a)([Object(j.b)()],W.prototype,"description",void 0),Object(O.a)([Object(j.b)()],W.prototype,"id",void 0),Object(O.a)([Object(j.b)({readOnly:!0,value:null})],W.prototype,"networkLink",void 0),Object(O.a)([Object(j.b)({json:{write:{allowNull:!0}}})],W.prototype,"parent",void 0),Object(O.a)([Object(j.b)({value:null,json:{write:{allowNull:!0}}})],W.prototype,"sublayers",null),Object(O.a)([Object(N.a)("sublayers")],W.prototype,"castSublayers",null),Object(O.a)([Object(j.b)({value:null,json:{read:{source:"name",reader:function(e){return Object(D.d)(e)}}}})],W.prototype,"title",void 0),Object(O.a)([Object(j.b)({value:!0})],W.prototype,"visible",null),Object(O.a)([Object(m.a)("visible",["visibility"])],W.prototype,"readVisible",null),Object(O.a)([Object(j.b)()],W.prototype,"sourceJSON",void 0),Object(O.a)([Object(j.b)({value:null})],W.prototype,"layer",null),Object(O.a)([Object(j.b)({type:E.a})],W.prototype,"fullExtent",void 0);var z=W=f=Object(O.a)([Object(w.a)("esri.layers.support.KMLSublayer")],W),B=["kml","xml"],V=function(n){s(O,n);var u,b,f=y(O);function O(){var e;l(this,O);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=f.call.apply(f,[this].concat(r)))._visibleFolders=[],e.allSublayers=new P.a({root:p(e),rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=S.a.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return c(O,[{key:"initialize",value:function(){var e=this;this.watch("sublayers",function(t,r){r&&r.forEach(function(e){e.parent=null,e.layer=null}),t&&t.forEach(function(t){t.parent=e,t.layer=e})},!0),this.on("sublayer-update",function(){return e.notifyChange("fullExtent")})}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return Object(C.e)(z,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,r){for(var n=[],o=e.toArray();o.length;){var i=o[0];i.networkLink||(i.visible&&n.push(i.id),i.sublayers&&o.push.apply(o,t(i.sublayers.toArray()))),o.shift()}r.visibleFolders=n}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?Object(k.k)(this.url,B)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach(function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))}),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=Object(h.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).then(function(){return t._fetchService(r)})),Promise.resolve(this)}},{key:"destroy",value:function(){a(v(O.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:(u=regeneratorRuntime.mark(function e(t){var r,n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(function(){return o.resourceInfo?{ssl:!1,data:o.resourceInfo}:Object(C.b)(o.url,o.outSpatialReference,o.refreshInterval,t)});case 2:r=e.sent,(n=Object(C.d)(r.data))&&this.read(n,{origin:"service"});case 5:case"end":return e.stop()}},e,this)}),b=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=u.apply(t,r);function a(t){e(i,n,o,a,l,"next",t)}function l(t){e(i,n,o,a,l,"throw",t)}a(void 0)})},function(e){return b.apply(this,arguments)})},{key:"_recomputeFullExtent",value:function(){var e=null;this.extent&&(e=this.extent.clone());return function t(n){if(n.sublayers){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw a}}}}(n.sublayers.items);try{for(i.s();!(o=i.n()).done;){var a=o.value;t(a),a.visible&&a.fullExtent&&(e?e.union(a.fullExtent):e=a.fullExtent.clone())}}catch(l){i.e(l)}finally{i.f()}}}(this),e}}]),O}(Object(A.a)(Object(M.a)(Object(T.a)(Object(L.a)(Object(F.a)(Object(R.a)(x.a)))))));Object(O.a)([Object(j.b)({readOnly:!0})],V.prototype,"allSublayers",void 0),Object(O.a)([Object(j.b)({type:S.a})],V.prototype,"outSpatialReference",void 0),Object(O.a)([Object(j.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],V.prototype,"path",void 0),Object(O.a)([Object(j.b)({readOnly:!0,json:{read:!1,write:!1}})],V.prototype,"legendEnabled",void 0),Object(O.a)([Object(j.b)({type:["show","hide","hide-children"]})],V.prototype,"listMode",void 0),Object(O.a)([Object(j.b)({type:["KML"]})],V.prototype,"operationalLayerType",void 0),Object(O.a)([Object(j.b)({})],V.prototype,"resourceInfo",void 0),Object(O.a)([Object(j.b)({type:_.a.ofType(z),json:{write:{ignoreOrigin:!0}}})],V.prototype,"sublayers",void 0),Object(O.a)([Object(m.a)(["web-map","portal-item"],"sublayers",["visibleFolders"])],V.prototype,"readSublayersFromItemOrWebMap",null),Object(O.a)([Object(m.a)("service","sublayers",["sublayers"])],V.prototype,"readSublayers",null),Object(O.a)([Object(g.a)("sublayers")],V.prototype,"writeSublayers",null),Object(O.a)([Object(j.b)({readOnly:!0,json:{read:!1}})],V.prototype,"type",void 0),Object(O.a)([Object(j.b)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],V.prototype,"title",null),Object(O.a)([Object(j.b)(I.n)],V.prototype,"url",void 0),Object(O.a)([Object(j.b)({readOnly:!0})],V.prototype,"visibleSublayers",null),Object(O.a)([Object(j.b)({type:E.a})],V.prototype,"extent",void 0),Object(O.a)([Object(j.b)()],V.prototype,"fullExtent",null),V=Object(O.a)([Object(w.a)("esri.layers.KMLLayer")],V),u.default=V}}])}();