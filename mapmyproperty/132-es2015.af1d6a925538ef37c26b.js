(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{yvy3:function(e,t,i){"use strict";i.r(t);var o,r=i("pO5D"),a=(i("wSAH"),i("srIe")),s=(i("6S2I"),i("zqDF"),i("WbKI")),n=i("r88o"),c=i("04ZG"),p=i("zlDU"),l=i("/PL2"),d=i("xvdR"),y=i("9MzC"),b=i("r0DZ"),h=i("pqNC"),O=i("5pQd"),u=i("N5XI"),f=i("IvSi"),m=i("uRH/"),j=i("PVlI"),v=i("DbUH"),g=i("WmKv"),w=i("XTTP"),S=i("lq5k"),T=i("4EHJ"),I=(i("ju1D"),i("9AIY"),i("ag7Y")),_=i("LE9a"),L=i("Lqtk"),N=i("f/qv"),x=i("ACjl"),M=i("Cduq"),R=i("Ehki"),D=(i("4GrV"),i("gYg2"));let J=o=class extends I.a{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,i,o){if(o.layer&&o.layer.spatialReference&&!o.layer.spatialReference.equals(this.geometry.spatialReference)){if(!Object(D.b)(e.spatialReference,o.layer.spatialReference))return void(o&&o.messages&&o.messages.push(new x.a("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:o.layer.spatialReference,context:o})));const r=new R.a;Object(D.q)(e,r,o.layer.spatialReference),t[i]=r.toJSON(o)}else t[i]=e.toJSON(o);delete t[i].spatialReference}clone(){return new o({geometry:Object(N.a)(this.geometry),type:this.type})}};Object(r.a)([Object(s.b)({type:R.a}),Object(d.a)()],J.prototype,"geometry",void 0),Object(r.a)([Object(M.a)(["web-scene","portal-item"],"geometry")],J.prototype,"writeGeometry",null),Object(r.a)([Object(s.b)({type:["clip","mask","replace"],nonNullable:!0}),Object(d.a)()],J.prototype,"type",void 0),J=o=Object(r.a)([Object(c.a)("esri.layers.support.SceneModification")],J);var q,A=J;let P=q=class extends(Object(I.b)(_.a.ofType(A))){constructor(e){super(e),this.url=null}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}clone(){return new q({url:this.url,items:this.items.map(e=>e.clone())})}_readModifications(e,t){for(const i of e)this.add(A.fromJSON(i,t))}static fromJSON(e,t){const i=new q;return i._readModifications(e,t),i}static async fromUrl(e,t,i){const o={url:Object(T.J)(e),origin:"service"},r=await Object(L.default)(e,{responseType:"json",signal:Object(a.i)(i,"signal")}),s=t.toJSON(),n=[];for(const a of r.data)n.push(A.fromJSON({...a,geometry:{...a.geometry,spatialReference:s}},o));return new q({url:e,items:n})}};Object(r.a)([Object(s.b)({type:String})],P.prototype,"url",void 0),P=q=Object(r.a)([Object(c.a)("esri.layers.support.SceneModifications")],P);var k=P;let K=class extends(Object(S.a)(Object(j.a)(Object(m.a)(Object(v.a)(Object(g.a)(Object(O.a)(h.a))))))){constructor(...e){super(...e),this.handles=new b.a,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add(Object(u.on)(this,"modifications","after-changes",()=>this.modifications=this.modifications,null,null,!0))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readModifications(e,t,i){this._modificationsSource={url:Object(l.a)(e,i),context:i}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=Object(a.i)(e,"signal");try{await this.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(i){Object(y.t)(i)}if(await this._fetchService(t),Object(a.k)(this._modificationsSource)){const t=await k.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._fetchIndexAndUpdateExtent(this.nodePages,t)}beforeSave(){if(!Object(a.j)(this._modificationsSource))return this.load().then(()=>{},()=>{})}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)}async save(){return this._debouncedSaveOperations(0,{getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"})}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new p.a("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new p.a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new p.a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};Object(r.a)([Object(s.b)({type:String,readOnly:!0})],K.prototype,"geometryType",void 0),Object(r.a)([Object(s.b)({type:["show","hide"]})],K.prototype,"listMode",void 0),Object(r.a)([Object(s.b)({type:["IntegratedMeshLayer"]})],K.prototype,"operationalLayerType",void 0),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0})],K.prototype,"type",void 0),Object(r.a)([Object(s.b)({type:w.c,readOnly:!0})],K.prototype,"nodePages",void 0),Object(r.a)([Object(s.b)({type:[w.b],readOnly:!0})],K.prototype,"materialDefinitions",void 0),Object(r.a)([Object(s.b)({type:[w.d],readOnly:!0})],K.prototype,"textureSetDefinitions",void 0),Object(r.a)([Object(s.b)({type:[w.a],readOnly:!0})],K.prototype,"geometryDefinitions",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],K.prototype,"serviceUpdateTimeStamp",void 0),Object(r.a)([Object(s.b)({type:k}),Object(d.a)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],K.prototype,"modifications",void 0),Object(r.a)([Object(n.a)(["web-scene","portal-item"],"modifications")],K.prototype,"readModifications",null),Object(r.a)([Object(s.b)(f.b)],K.prototype,"elevationInfo",void 0),Object(r.a)([Object(s.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],K.prototype,"path",void 0),K=Object(r.a)([Object(c.a)("esri.layers.IntegratedMeshLayer")],K),t.default=K}}]);