!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,n,i,r,a,s){try{var o=e[a](s),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(i,r)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(r,a){var s=e.apply(t,i);function o(e){n(s,r,a,o,u,"next",e)}function u(e){n(s,r,a,o,u,"throw",e)}o(void 0)}))}}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{NloG:function(e,t,n){"use strict";var i=n("pO5D"),r=(n("wSAH"),n("6S2I")),s=(n("zqDF"),n("WbKI")),c=n("04ZG"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),d=n("zm0L"),h=n("pdg3"),y=n("+rMe"),f=n("kJYu"),b=function(e){u(n,e);var t=l(n);function n(e){var i;return a(this,n),(i=t.call(this,e)).layer=null,i.parent=null,i}return o(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var n=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";throw r.a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(i,"', id: '").concat(n,"')"),t),t}}))}},{key:"fullOpacity",get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){return!this.suspended&&!0===this.layer.legendEnabled}},{key:"updating",get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}},{key:"visible",get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}},{key:"canResume",value:function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),n}(Object(f.b)(Object(h.a)(Object(y.b)(d.a.EventedMixin(p.a)))));Object(i.a)([Object(s.b)()],b.prototype,"fullOpacity",null),Object(i.a)([Object(s.b)()],b.prototype,"layer",void 0),Object(i.a)([Object(s.b)()],b.prototype,"parent",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"suspended",null),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"suspendInfo",null),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"legendEnabled",null),Object(i.a)([Object(s.b)({type:Boolean,readOnly:!0})],b.prototype,"updating",null),Object(i.a)([Object(s.b)()],b.prototype,"visible",null),b=Object(i.a)([Object(c.a)("esri.views.layers.LayerView")],b),t.a=b},Vm2Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i,s=n("pO5D"),c=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),p=n("04ZG"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),y=n("fX31"),f=n("N5XI"),b=n("ZuQG"),v=n("L1EH"),g=n("AMBt"),O=n("N2DF"),m=n("OvF4"),w=n("Ehki"),j=n("qatw");n("4GrV");var x={base:O.a,key:"type",typeMap:{extent:m.a,polygon:w.a}},k=i=function(e){u(n,e);var t=l(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).type="geometry",e.geometry=null,e}return o(n,[{key:"version",get:function(){return(this._get("version")||0)+1}},{key:"clone",value:function(){return new i({geometry:this.geometry.clone()})}}]),n}(b.a);Object(s.a)([Object(c.b)({types:x,json:{read:j.a,write:!0}})],k.prototype,"geometry",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],k.prototype,"version",null);var R=k=i=Object(s.a)([Object(p.a)("esri.views.layers.support.Geometry")],k),q=function(e){u(n,e);var t=l(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).type="path",e.path=[],e}return o(n,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),n}(b.a);Object(s.a)([Object(c.b)({type:[[[Number]]],json:{write:!0}})],q.prototype,"path",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],q.prototype,"version",null),q=Object(s.a)([Object(p.a)("esri.views.layers.support.Path")],q);var E=h.a.ofType({key:"type",base:b.a,typeMap:{rect:v.a,path:q,geometry:R}}),I=function(e){var t=function(e){u(n,e);var t=l(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).clips=new E,e.moving=!1,e.attached=!1,e.lastUpdateId=-1,e.updateRequested=!1,e}return o(n,[{key:"initialize",value:function(){var e,t=this;this.container||(this.container=new g.a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(f.init)(this,"suspended",(function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestUpdate()}),!0),Object(f.init)(this,["layer.opacity","container"],(function(){var e,n;t.container&&(t.container.opacity=null!=(e=null==(n=t.layer)?void 0:n.opacity)?e:1)}),!0),Object(f.init)(this,["layer.blendMode"],(function(e){t.container&&(t.container.blendMode=e)}),!0),Object(f.init)(this,["layer.effect"],(function(e){t.container&&(t.container.effect=e)}),!0),this.clips.on("change",(function(){t.container.clips=t.clips,t.notifyChange("clips")}))]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then((function(e){e!==t||t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){})):this.when().then((function(){t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){}))}},{key:"destroy",value:function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}},{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}},{key:"isVisibleAtScale",value:function(e){var t=!0,n=this.layer,i=n.minScale,r=n.maxScale;if(null!=i&&null!=r){var a=!i,s=!r;!a&&e<=i&&(a=!0),!s&&e>=r&&(s=!0),t=a&&s}return t}},{key:"requestUpdate",value:function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}},{key:"processUpdate",value:function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}},{key:"isUpdating",value:function(){return!1}},{key:"isRendering",value:function(){return!1}},{key:"canResume",value:function(){return!!r(d(n.prototype),"canResume",this).call(this)&&this.isVisibleAtScale(this.view.scale)}}]),n}(e);return Object(s.a)([Object(c.b)({type:E,set:function(e){var t=Object(y.b)(e,this._get("clips"),E);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(s.a)([Object(c.b)()],t.prototype,"moving",void 0),Object(s.a)([Object(c.b)()],t.prototype,"attached",void 0),Object(s.a)([Object(c.b)()],t.prototype,"container",void 0),Object(s.a)([Object(c.b)()],t.prototype,"suspended",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(s.a)([Object(c.b)()],t.prototype,"updateRequested",void 0),Object(s.a)([Object(c.b)()],t.prototype,"updating",null),Object(s.a)([Object(c.b)()],t.prototype,"view",void 0),t=Object(s.a)([Object(p.a)("esri.views.2d.layers.LayerView2D")],t)}},f1zk:function(e,t,n){"use strict";n.r(t);var s=n("pO5D"),c=(n("wSAH"),n("6S2I")),p=(n("zqDF"),n("WbKI")),h=n("04ZG"),y=(n("4EHJ"),n("ju1D"),n("9AIY"),n("N5XI")),f=n("bHqs"),b=n("NloG"),v=n("srIe"),g=n("zlDU"),O=n("SuVq"),m=n("IvSi"),w=n("xk++"),j=n("rXMu"),x=n("Vm2Q"),k=n("RI0u"),R=n("9MzC"),q=n("/CmD"),E=n("OvF4"),I=n("qRWG"),_=n("Lqtk"),V=n("jWBI"),D=n("Gdt4"),S=n("9iar"),P=n("tODX"),U=n("AMBt"),F=n("Vh9r"),T=n("q03O"),C=c.a.getLogger("esri.views.2d.layers.imagery.ImageryGraphicsView2D"),M=function(e){u(r,e);var t,n=l(r);function r(){var e;return a(this,r),(e=n.apply(this,arguments)).attached=!1,e.container=new U.a,e.updateRequested=!1,e._graphicsView=null,e._projectFullExtentPromise=null,e.type="Graphics",e._graphics=new S.b,e._updateGraphics=Object(R.i)(function(){var t=i(regeneratorRuntime.mark((function t(n,i){var r,a,s,o,u,c,l,p,d,h,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stationary){t.next=2;break}return t.abrupt("return");case 2:return r=n.state,a=new E.a({xmin:r.extent.xmin,ymin:r.extent.ymin,xmax:r.extent.xmax,ymax:r.extent.ymax,spatialReference:r.spatialReference}),s=n.state.size[0],o=n.state.size[1],(u={}).timeExtent=e.timeExtent,u.requestAsImageElement=!1,u.signal=i,null==e._projectFullExtentPromise&&(e._projectFullExtentPromise=e._getProjectedFullExtent(a.spatialReference)),c="vector-field"===e.layer.renderer.type?e.layer.renderer.symbolTileSize:50,t.next=7,e._projectFullExtentPromise;case 7:return l=t.sent,p=Object(D.d)(a,s,o,c,l),t.next=11,e.layer.fetchImage(p.extent,p.width,p.height,u);case 11:if(d=t.sent,"vector-field"!==(h=e.layer.renderer).type){t.next=21;break}return e._pixelData={extent:p.extent,pixelBlock:d.pixelData.pixelBlock},t.next=17,h.getGraphicsFromPixelData(d.pixelData,"vector-uv"===e.layer.rasterInfo.dataType);case 17:return y=t.sent,e._graphicsView.update(n),t.next=21,Object(R.a)(0).then((function(){e._graphics.set("items",y)}));case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),e}return o(r,[{key:"destroy",value:function(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}},{key:"updating",get:function(){return!this.attached||this.isUpdating()}},{key:"update",value:function(e){this._updateGraphics(e).catch((function(e){Object(R.m)(e)||C.error(e)}))}},{key:"hitTest",value:function(e,t){var n=this.view.toMap(Object(I.f)(e,t));return Promise.resolve(new V.a({attributes:{},geometry:n,layer:this.layer}))}},{key:"attach",value:function(){var e=this;this._graphicsView=new F.a({view:this.view,graphics:this._graphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new T.a(this.view.featuresTilingScheme)}),this.attached=!0}},{key:"detach",value:function(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){}},{key:"install",value:function(e){this.container.addChild(this._graphicsView.container),e.addChild(this.container)}},{key:"uninstall",value:function(e){this.container.removeChild(this._graphicsView.container),e.removeChild(this.container)}},{key:"isUpdating",value:function(){return this._graphicsView.updating||this.updateRequested}},{key:"getPixelData",value:function(){return this.updating?null:this._pixelData}},{key:"redraw",value:function(){}},{key:"requestUpdate",value:function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}},{key:"_getProjectedFullExtent",value:(t=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(P.e)(this.layer.fullExtent,t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.prev=8,e.next=11,Object(_.default)(this.layer.url,{query:{option:"footprints",outSR:t.wkid||JSON.stringify(t.toJSON()),f:"json"}});case 11:return n=e.sent.data.featureCollection.layers[0].layerDefinition.extent,e.abrupt("return",n?E.a.fromJSON(n):null);case 15:return e.prev=15,e.t1=e.catch(8),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[0,6],[8,15]])}))),function(e){return t.apply(this,arguments)})}]),r}(q.a);Object(s.a)([Object(p.b)()],M.prototype,"attached",void 0),Object(s.a)([Object(p.b)()],M.prototype,"container",void 0),Object(s.a)([Object(p.b)()],M.prototype,"layer",void 0),Object(s.a)([Object(p.b)()],M.prototype,"timeExtent",void 0),Object(s.a)([Object(p.b)()],M.prototype,"view",void 0),Object(s.a)([Object(p.b)()],M.prototype,"updateRequested",void 0),Object(s.a)([Object(p.b)()],M.prototype,"updating",null),Object(s.a)([Object(k.a)({graphics:"Graphics"})],M.prototype,"type",void 0);var A=M=Object(s.a)([Object(h.a)("esri.views.2d.layers.imagery.ImageryGraphicsView2D")],M),B=n("ne7T"),G=n("iUxC"),z=n("LTnl"),L=n("vbiG"),N=c.a.getLogger("esri.views.2d.layers.imagery.ImageryView2D"),H=function(e){u(n,e);var t=l(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).attached=!1,e.container=new U.a,e.updateRequested=!1,e.type="Imagery",e._bitmapView=null,e}return o(n,[{key:"destroy",value:function(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}},{key:"updating",get:function(){return!this.attached||this.isUpdating()}},{key:"update",value:function(e){this.strategy.update(e).catch((function(e){Object(R.m)(e)||N.error(e)}))}},{key:"detach",value:function(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}},{key:"hitTest",value:function(e,t){var n=this.view.toMap(Object(I.f)(e,t));return Promise.resolve(new V.a({attributes:{},geometry:n,layer:this.layer}))}},{key:"attach",value:function(){var e=this,t=this.layer.version>=10,n=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new z.a,this.strategy=new L.a({container:this._bitmapView,imageNormalizationSupported:t,imageMaxHeight:n,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:function(){return e.requestUpdate()}}),this.attached=!0}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){}},{key:"install",value:function(e){this.container.addChild(this._bitmapView),e.addChild(this.container)}},{key:"uninstall",value:function(e){this.container.removeChild(this._bitmapView),e.removeChild(this.container)}},{key:"redraw",value:function(){var e=this;this.strategy.updateExports((function(t){t.source instanceof HTMLImageElement?t.requestRender():e.layer.applyRenderer({pixelBlock:t.source.pixelBlock}).then((function(n){var i=t.source;i.pixelBlock=n.pixelBlock,i.filter=function(t){return e.layer.applyFilter(t)},e.container.requestRender()}))}))}},{key:"requestUpdate",value:function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"getPixelData",value:function(){if(this.updating)return null;var e=this.strategy.container.children;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){var t=this.view.extent,n=e.map((function(e){return e.source})).filter((function(e){return e.extent&&e.extent.intersects(t)})).map((function(e){return{extent:e.extent,pixelBlock:e.originalPixelBlock}})),i=Object(B.k)(n,t);return i?{extent:i.extent,pixelBlock:i.pixelBlock}:null}return null}},{key:"_fetchImage",value:function(e,t,n,i){var r=this;return(i=i||{}).timeExtent=this.timeExtent,i.requestAsImageElement=!0,this.layer.fetchImage(e,t,n,i).then((function(e){return e.imageElement?e.imageElement:r.layer.applyRenderer(e.pixelData,{signal:i.signal}).then((function(t){var n=new G.a(t.pixelBlock,t.extent.clone(),e.pixelData.pixelBlock);return n.filter=function(e){return r.layer.applyFilter(e)},n}))}))}}]),n}(q.a);Object(s.a)([Object(p.b)()],H.prototype,"attached",void 0),Object(s.a)([Object(p.b)()],H.prototype,"container",void 0),Object(s.a)([Object(p.b)()],H.prototype,"layer",void 0),Object(s.a)([Object(p.b)()],H.prototype,"strategy",void 0),Object(s.a)([Object(p.b)()],H.prototype,"timeExtent",void 0),Object(s.a)([Object(p.b)()],H.prototype,"view",void 0),Object(s.a)([Object(p.b)()],H.prototype,"updateRequested",void 0),Object(s.a)([Object(p.b)()],H.prototype,"updating",null),Object(s.a)([Object(k.a)({imagery:"Imagery"})],H.prototype,"type",void 0);var J,W,X=H=Object(s.a)([Object(h.a)("esri.views.2d.layers.imagery.ImageryView2D")],H),Y=function(e){u(r,e);var t,n=l(r);function r(){var e;return a(this,r),(e=n.apply(this,arguments))._exportImageVersion=-1,e}return o(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(y.init)(this,["layer.blendMode"],(function(t){e.subview&&(e.subview.container.blendMode=t)}),!0))}},{key:"pixelData",get:function(){return this.updating?null:this.subview.getPixelData()}},{key:"updating",get:function(){return!(this.subview&&!this.subview.updating)}},{key:"hitTest",value:function(e,t){return this.suspended||!this.subview?Promise.resolve(null):this.subview.hitTest(e,t)}},{key:"update",value:function(e){var t;null==(t=this.subview)||t.update(e)}},{key:"attach",value:function(){var e=this;this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([Object(y.init)(this,"layer.exportImageServiceParameters.version",(function(t){e._exportImageVersion!==t&&(e._exportImageVersion=t,e.requestUpdate())})),this.watch("timeExtent",(function(){e.subview.timeExtent=e.timeExtent,e.requestUpdate()})),this.layer.on("redraw",(function(){return e.subview.redraw()})),Object(y.watch)(this.layer,"renderer",(function(){return e._setSubView()}))],"imagerylayerview-update")}},{key:"detach",value:function(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove("imagerylayerview-update"),this._exportImageVersion=-1}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"doRefresh",value:(t=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isUpdating",value:function(){return!this.subview||!this.suspended&&this.subview.isUpdating()}},{key:"_setSubView",value:function(){var e,t,n,i="Imagery";"vector-field"===(null==(e=this.layer.renderer)?void 0:e.type)&&"lerc"===this.layer.format&&(i="Graphics"),this.subview&&this.subview.type===i||(null==(t=this.subview)||t.uninstall(this.container),null==(n=this.subview)||n.destroy(),this.subview="Imagery"===i?new X({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new A({layer:this.layer,view:this.view,timeExtent:this.timeExtent}),this.subview.attach(),this.subview.install(this.container),this.subview.container.blendMode=this.layer.blendMode),this.requestUpdate()}}]),r}((J=Object(f.a)(Object(x.a)(b.a)),W=function(e){u(s,e);var t,n=l(s);function s(){var e;return a(this,s),(e=n.apply(this,arguments)).view=null,e}return o(s,[{key:"fetchPopupFeatures",value:(t=i(regeneratorRuntime.mark((function e(t,n){var i,r,a,s,o,u,c,l,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.layer,t){e.next=3;break}throw new g.a("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:i});case 3:if(r=i.popupEnabled,a=Object(j.a)(i,n),r&&Object(v.k)(a)){e.next=6;break}throw new g.a("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:r,popupTemplate:a});case 6:return e.next=8,a.getRequiredFields();case 8:return s=e.sent,(o=new w.a).geometry=t,o.outFields=s,o.outSpatialReference=t.spatialReference,u=this.view.resolution,c="2d"===this.view.type?new O.a(u,u,this.view.spatialReference):new O.a(.5*u,.5*u,this.view.spatialReference),l=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},p=l.returnTopmostRaster,d=l.showNoDataRecords,e.abrupt("return",i.queryVisibleRasters(o,{returnDomainValues:!0,returnTopmostRaster:p,pixelSize:c,showNoDataRecords:d}).then((function(e){return e})));case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"canResume",value:function(){var e;return!(!r(d(s.prototype),"canResume",this).call(this)||null!=(e=this.timeExtent)&&e.isEmpty)}}]),s}(J),Object(s.a)([Object(p.b)()],W.prototype,"layer",void 0),Object(s.a)([Object(p.b)()],W.prototype,"suspended",void 0),Object(s.a)([Object(p.b)(m.a)],W.prototype,"timeExtent",void 0),Object(s.a)([Object(p.b)()],W.prototype,"view",void 0),W=Object(s.a)([Object(h.a)("esri.views.layers.ImageryLayerView")],W)));Object(s.a)([Object(p.b)()],Y.prototype,"pixelData",null),Object(s.a)([Object(p.b)({readOnly:!0})],Y.prototype,"updating",null),Object(s.a)([Object(p.b)()],Y.prototype,"subview",void 0),Y=Object(s.a)([Object(h.a)("esri.views.2d.layers.ImageryLayerView2D")],Y),t.default=Y},rXMu:function(t,n,r){"use strict";r.d(n,"a",(function(){return c})),r.d(n,"b",(function(){return o}));var a=r("srIe"),s=r("wdpY");function o(e){return u.apply(this,arguments)}function u(){return(u=i(regeneratorRuntime.mark((function t(n){var i,r,o,u,c,l,p,d,h,y=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>1&&void 0!==y[1]?y[1]:n.popupTemplate,Object(a.k)(i)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,i.getRequiredFields(n.fields);case 5:if(r=t.sent,o=i.lastEditInfoEnabled,u=n.objectIdField,c=n.typeIdField,l=n.globalIdField,p=n.relationships,!r.includes("*")){t.next=13;break}return t.abrupt("return",["*"]);case 13:if(!o){t.next=19;break}return t.next=16,Object(s.m)(n);case 16:t.t0=t.sent,t.next=20;break;case 19:t.t0=[];case 20:return d=t.t0,h=Object(s.i)(n.fields,[].concat(e(r),e(d))),t.abrupt("return",(c&&h.push(c),h&&u&&Object(s.p)(n.fields,u)&&-1===h.indexOf(u)&&h.push(u),h&&l&&Object(s.p)(n.fields,l)&&-1===h.indexOf(l)&&h.push(l),p&&p.forEach((function(e){var t=e.keyField;h&&t&&Object(s.p)(n.fields,t)&&-1===h.indexOf(t)&&h.push(t)})),h));case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(e,t){return e.popupTemplate?e.popupTemplate:Object(a.k)(t)&&t.defaultPopupTemplateEnabled&&Object(a.k)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}}])}();