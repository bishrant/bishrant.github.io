!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,a=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){o=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(r,a){var s=e.apply(t,i);function o(e){n(s,r,a,o,l,"next",e)}function l(e){n(s,r,a,o,l,"throw",e)}o(void 0)}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[37,187],{"6UvW":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n("srIe"),r=n("OvF4"),a=(n("4GrV"),n("gEht")),s=n("U282");function o(e,t,n){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.a;if("2d"===n.type)s=t*n.resolution;else if("3d"===n.type){var l=n.overlayPixelSizeInMapUnits(e),c=n.basemapSpatialReference;s=Object(i.k)(c)&&!c.equals(n.spatialReference)?Object(a.f)(c)/Object(a.f)(n.spatialReference):t*l}var u=e.x-s,d=e.y-s,h=e.x+s,p=e.y+s,b=n.spatialReference;return o.xmin=Math.min(u,h),o.ymin=Math.min(d,p),o.xmax=Math.max(u,h),o.ymax=Math.max(d,p),o.spatialReference=b,o}function l(e,t,n){var r=n.toMap(e);return!Object(i.j)(r)&&o(r,Object(s.a)(),n,c).intersects(t)}var c=new r.a},U282:function(e,t,n){"use strict";function i(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,n=0,i=0;i<e.length;i++){var r=e[i].size;"number"==typeof r&&(t+=r,n++)}return t/n}(e.stops):t}function a(e,t){if(!t)return e;var n=t.filter((function(e){return"size"===e.type})).map((function(t){var n=t.maxSize,i=t.minSize;return(r(n,e)+r(i,e))/2})),i=0,a=n.length;if(0===a)return e;for(var s=0;s<a;s++)i+=n[s];var o=Math.floor(i/a);return Math.max(o,e)}function s(e){var t=e&&e.renderer,n="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return n;var r="visualVariables"in t?a(n,t.visualVariables):n;if("simple"===t.type)return i(r,t.symbol);if("unique-value"===t.type){var s=r;return t.uniqueValueInfos.forEach((function(e){s=i(s,e.symbol)})),s}if("class-breaks"===t.type){var o=r;return t.classBreakInfos.forEach((function(e){o=i(o,e.symbol)})),o}return r}n.d(t,"a",(function(){return s}))},Yt8Z:function(t,n,a){"use strict";a.r(n);var l=a("pO5D"),u=(a("wSAH"),a("6S2I")),d=(a("zqDF"),a("WbKI")),h=a("Stxv"),p=a("04ZG"),b=(a("4EHJ"),a("ju1D"),a("9AIY"),a("9MzC")),m=a("gEht"),v=(a("cCpn"),a("h1D1")),f=a("dV4Z"),y=a("Jv1m"),O=a("Ehpe"),j=a("r0DZ"),_=a("N5XI"),w=a("Pt/X"),g=a("fqh+"),k=a("WZb1"),M=a("SuVq"),S=a("UhwK"),D=(a("4GrV"),a("IDUf")),x=a("TKwc"),L=a("l4eh"),I=a("YyOG"),C=(a("G48n"),a("Tcmu")),T=a("Ibpv"),U=(a("H9eC"),a("jWBI")),R=a("gYg2"),A=a("aql9"),E=a("QLbw"),P=a("6lH3"),W=a("zgsL"),z=a("VPx4"),V=a("wg3g"),G=a("R3Kl"),q=a("HE3w"),B=a("PN7H"),H=1e5,N=function(t){o(a,t);var n=c(a);function a(){var e;return r(this,a),(e=n.apply(this,arguments))._drawActive=!1,e._handles=new j.a,e._polylineLayer=new W.a,e._manipulatorLayer=new W.a,e._groupLayer=new z.default({layers:[e._polylineLayer,e._manipulatorLayer],listMode:"hide",visible:!1}),e._vertices=[],e.deferCreation=!0,e.geodesicDistanceThreshold=1e5,e.measurement=null,e.measurementLabel=null,e}return s(a,[{key:"initialize",value:function(){var e=this;Object(I.a)("esri/core/t9n/Units").then((function(t){e.messages=t})),this._handles.add(Object(D.c)(i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.a)("esri/core/t9n/Units");case 2:e.messages=t.sent;case 3:case"end":return t.stop()}}),t)})))))}},{key:"destroy",value:function(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._polylineLayer&&(this._polylineLayer.destroy(),this._polylineLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)}},{key:"editable",set:function(e){this._set("editable",e),e||this._draw.reset()}},{key:"activate",value:function(){this._drawActive||0!==this._vertices.length||this._startSketch()}},{key:"onAttach",value:function(){var e=this,t=this.view;this._draw=new q.a({view:t}),t.map.add(this._groupLayer),t.focus(),this._handles.add([Object(_.init)(this,["unit","geodesicDistanceThreshold","palette","messages"],(function(){e._vertices.length>0&&e._updatePolylines()})),Object(_.init)(this,"view.spatialReference",(function(e){Z(e)&&!Object(R.g)()&&Object(R.i)()}))]),this.create()}},{key:"onDetach",value:function(){var e=this.view.map;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._polylineLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null)}},{key:"onShow",value:function(){this._groupLayer.visible=!0}},{key:"onHide",value:function(){this._groupLayer.visible=!1}},{key:"reset",value:function(){this._vertices=[],this._polylineLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}},{key:"onInputEvent",value:function(e){"pointer-move"===e.type&&this._updateCursor()}},{key:"_startSketch",value:function(){var e=this;this._drawActive=!0;var t=this._draw.create("polyline",{mode:"click"});t.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(function(t){return e._updateSketch(t.vertices)})),t.on("draw-complete",(function(){e._stopSketch()}))}},{key:"_stopSketch",value:function(){this.manipulators.forEach((function(e){e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}},{key:"_updateSketch",value:function(t){var n=this;if(!Z(this.view.spatialReference)||Object(R.g)()){if(t.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._polylineLayer.removeAll();this.create();for(var i=this.view.spatialReference;this._vertices.length>t.length;){var r=this._vertices.pop().manipulatorId;this.manipulators.remove(r)}for(var a=function(r){var a=e(t[r],2),s=a[0],o=a[1],l=function(e,t,n,i){var r=new C.a({style:"circle",color:i.handleColor,size:i.handleWidth,outline:{type:"simple-line",width:0}}),a=new C.a({style:"circle",color:i.handleColor,size:1.5*i.handleWidth,outline:{type:"simple-line",width:0}}),s=new U.a({geometry:e,symbol:r});return new B.a({view:t,layer:n,graphic:s,focusedSymbol:a})}(new M.a({x:s,y:o,spatialReference:i}),n.view,n._manipulatorLayer,n.palette),c=n.manipulators.add(l);Object(V.e)(l,(function(e,t){t.next(Object(V.m)(n.view)).next(Object(V.g)(e.graphic)).next((function(){var t=e.graphic.geometry;n._vertices[r].coord=[t.x,t.y],n._updatePolylines()}))})),n._vertices.push({manipulatorId:c,coord:[s,o]})},s=this._vertices.length;s<t.length;s++)a(s);var o=this._vertices.length-1,l=this._vertices[o],c=e(t[o],2),u=c[0],d=c[1];if(l.coord[0]!==u||l.coord[1]!==d){l.coord=[u,d];var h=new M.a({x:u,y:d,spatialReference:i});this.manipulators.findById(l.manipulatorId).graphic.geometry=h}var p=this._drawActive?this._vertices[o].manipulatorId:null;this.manipulators.forEach((function(e){e.manipulator.interactive=null==p||e.id!==p})),this._updatePolylines()}}},{key:"_updateCursor",value:function(){this.cursor=this._drawActive?"crosshair":null}},{key:"_updatePolylines",value:function(){var e=function(e,t,n){var i,r,a=new S.a({paths:[e],spatialReference:t});if(t.isGeographic)if(Object(E.g)(t))i=Object(E.e)([a],"meters")[0],r=Object(E.c)(a,H);else{var s=Object(R.j)(a,k.a.WGS84),o=Object(E.c)(s,H);i=Object(E.e)([s],"meters")[0],r=Object(R.j)(o,t)}else if(t.isWebMercator)i=Object(P.geodesicLength)(a,"meters"),r=Object(P.geodesicDensify)(a,H,"meters");else{var l=Object(P.planarLength)(a,"meters");if(l>=n){var c=Object(R.j)(a,k.a.WGS84),u=Object(E.c)(c,H);i=Object(E.e)([c],"meters")[0],r=Object(R.j)(u,t)}else i=l,r=a}return{measurement:{geometry:r,length:i},original:a,drawing:r}}(this._vertices.map((function(e){return e.coord})),this.view.spatialReference,this.geodesicDistanceThreshold),t=e.measurement,n=e.drawing,i=e.original;this._set("measurement",t);var r=function(e,t,n){if(!t||!e)return null;switch(n){case"metric":return Object(A.h)(e,t.length,"meters");case"imperial":return Object(A.e)(e,t.length,"meters");default:return Object(A.b)(e,Object(m.c)(t.length,"meters",n),n)}}(this.messages,t,this.unit);this._set("measurementLabel",r);var a=this.palette,s=a.pathPrimaryColor,o=a.pathSecondaryColor,l=a.pathWidth;this._polylineLayer.removeAll(),this._polylineLayer.addMany([new U.a({geometry:n,symbol:new x.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[14,12],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:l-1.5,color:o},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:l,color:s}]}}})}),new U.a({geometry:i.extent.center,symbol:new T.a({color:[255,255,255,1],haloColor:[0,0,0,.5],haloSize:2,font:new L.a({size:14,family:"sans-serif"}),text:r})})])}}]),a}(G.a);function Z(e){if(!e)return!1;var t=e.isGeographic,n=e.isWebMercator,i=e.isWGS84;return t&&!i&&!Object(E.g)(e)||!t&&!n}Object(l.a)([Object(d.b)()],N.prototype,"cursor",void 0),Object(l.a)([Object(d.b)({value:!0})],N.prototype,"editable",null),Object(l.a)([Object(d.b)({type:Number})],N.prototype,"geodesicDistanceThreshold",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],N.prototype,"measurement",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],N.prototype,"measurementLabel",void 0),Object(l.a)([Object(d.b)()],N.prototype,"messages",void 0),Object(l.a)([Object(d.b)()],N.prototype,"palette",void 0),Object(l.a)([Object(d.b)()],N.prototype,"unit",void 0),Object(l.a)([Object(d.b)({constructOnly:!0})],N.prototype,"view",void 0);var J=N=Object(l.a)([Object(p.a)("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool")],N),K={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,255],pathSecondaryColor:[255,255,255,255]},Y=u.a.getLogger("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel"),F=function(e){o(n,e);var t=c(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).supportedViewType="2d",i._handles=new j.a,i.geodesicDistanceThreshold=1e5,i.measurement=null,i.measurementLabel=null,i.palette=K,i.tool=null,i}return s(n,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(_.init)(this,["unit","palette","geodesicDistanceThreshold"],(function(t,n,i){e.tool&&(e.tool[i]=t)}))])}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"state",get:function(){var e,t;return this.isDisabled||null==(t=null==(e=this.view)?void 0:e.spatialReference)||Z(t)&&!Object(R.h)()?"disabled":this.tool&&this.measurement?this.tool.active?"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(e){void 0!==e?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")}},{key:"unitOptions",get:function(){return m.q},set:function(e){void 0!==e?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")}},{key:"start",value:function(){return this.createTool()}},{key:"clear",value:function(){this.removeTool()}},{key:"createToolParams",value:function(){var e=this;return{toolConstructor:J,constructorArguments:function(){return{geodesicDistanceThreshold:e.geodesicDistanceThreshold,palette:e.palette,unit:e.unit}}}}},{key:"logUnsupportedError",value:function(){Y.error("DistanceMeasurement2D widget is not implemented for SceneView")}},{key:"logError",value:function(){Y.error.apply(Y,arguments)}},{key:"_validateUnit",value:function(e){return-1!==this.unitOptions.indexOf(e)?e:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}},{key:"_validateUnits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return-1!==m.q.indexOf(e)}));return 0===t.length?m.q.slice():t}}]),n}(g.a);Object(l.a)([Object(d.b)(w.a)],F.prototype,"defaultUnit",void 0),Object(l.a)([Object(d.b)({type:Number})],F.prototype,"geodesicDistanceThreshold",void 0),Object(l.a)([Object(d.b)({readOnly:!0,aliasOf:"tool.measurement"})],F.prototype,"measurement",void 0),Object(l.a)([Object(d.b)({readOnly:!0,aliasOf:"tool.measurementLabel"})],F.prototype,"measurementLabel",void 0),Object(l.a)([Object(d.b)()],F.prototype,"palette",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],F.prototype,"state",null),Object(l.a)([Object(d.b)({constructOnly:!0,readOnly:!0})],F.prototype,"tool",void 0),Object(l.a)([Object(d.b)({type:String})],F.prototype,"unit",null),Object(l.a)([Object(d.b)({type:[String]})],F.prototype,"unitOptions",null);var X=F=Object(l.a)([Object(p.a)("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],F),Q="esri-distance-measurement-2d",$={buttonDisabled:"esri-button--disabled",widgetIcon:"esri-icon-measure-line",base:Q+" esri-widget esri-widget--panel",container:Q+"__container",hint:Q+"__hint",hintText:Q+"__hint-text",panelError:Q+"__panel--error",measurement:Q+"__measurement",measurementItem:Q+"__measurement-item",measurementItemDisabled:Q+"__measurement-item--disabled",measurementItemTitle:Q+"__measurement-item-title",measurementItemValue:Q+"__measurement-item-value",settings:Q+"__settings",units:Q+"__units",unitsLabel:Q+"__units-label",unitsSelect:Q+"__units-select esri-select",unitsSelectWrapper:Q+"__units-select-wrapper",actionSection:Q+"__actions",newMeasurementButton:Q+"__clear-button esri-button esri-button--primary"},ee=function(e){o(n,e);var t=c(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).iconClass=$.widgetIcon,a.label=void 0,a.messages=null,a.messagesUnits=null,a.unit=null,a.unitOptions=null,a.view=null,a.viewModel=new X,a}return s(n,[{key:"render",value:function(){var e=this,t=this.id,n=this.messages,i=this.messagesUnits,r=this.viewModel,a=this.visible,s=r.active,o=r.isSupported,l=r.measurementLabel,c=r.state,u=r.unit,d=r.unitOptions,h="disabled"===c,p="measuring"===c||"measured"===c,b=s&&"ready"===c?Object(y.a)("section",{key:"hint",class:$.hint},Object(y.a)("p",{class:$.hintText},n.hint)):null,v=o?null:Object(y.a)("section",{key:"unsupported",class:$.panelError},Object(y.a)("p",null,n.unsupported)),f=p?Object(y.a)("section",{key:"measurement",class:$.measurement},function(t,n,i){return n?Object(y.a)("div",{key:i+"-enabled",class:$.measurementItem},Object(y.a)("span",{class:$.measurementItemTitle},t),Object(y.a)("span",{class:$.measurementItemValue},n)):Object(y.a)("div",{key:i+"-disabled",class:e.classes($.measurementItem,$.measurementItemDisabled),"aria-disabled":"true"},Object(y.a)("span",{class:$.measurementItemTitle},t))}(n.distance,l,"distance")):null,O=t+"-units",j=p?Object(y.a)("section",{key:"units",class:$.units},Object(y.a)("label",{class:$.unitsLabel,for:O},n.unit),Object(y.a)("div",{class:$.unitsSelectWrapper},Object(y.a)("select",{class:$.unitsSelect,id:O,onchange:this._changeUnit,bind:this,value:u},d.map((function(e){var t;return Object(y.a)("option",{key:e,value:e},Object(m.l)(e)?i.systems[e]:null==(t=i.units[e])?void 0:t.pluralCapitalized)}))))):null,_=p?Object(y.a)("div",{key:"settings",class:$.settings},j):null,w=!o||s&&!p?null:Object(y.a)("div",{class:$.actionSection},Object(y.a)("button",{disabled:h,class:this.classes($.newMeasurementButton,h&&$.buttonDisabled),bind:this,onclick:this._newMeasurement,title:n.newMeasurement,"aria-label":n.newMeasurement,type:"button"},n.newMeasurement)),g=a?Object(y.a)("div",{class:$.container},v,b,_,f,w):null;return Object(y.a)("div",{class:$.base},g)}},{key:"_newMeasurement",value:function(){Object(b.l)(this.viewModel.start())}},{key:"_changeUnit",value:function(e){var t=e.target,n=t.options[t.selectedIndex];n&&(this.viewModel.unit=n.value)}}]),n}(O.a);Object(l.a)([Object(h.a)("viewModel.active")],ee.prototype,"active",void 0),Object(l.a)([Object(d.b)()],ee.prototype,"iconClass",void 0),Object(l.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ee.prototype,"label",void 0),Object(l.a)([Object(d.b)(),Object(f.a)("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],ee.prototype,"messages",void 0),Object(l.a)([Object(d.b)(),Object(f.a)("esri/core/t9n/Units")],ee.prototype,"messagesUnits",void 0),Object(l.a)([Object(h.a)("viewModel.unit")],ee.prototype,"unit",void 0),Object(l.a)([Object(h.a)("viewModel.unitOptions")],ee.prototype,"unitOptions",void 0),Object(l.a)([Object(h.a)("viewModel.view")],ee.prototype,"view",void 0),Object(l.a)([Object(d.b)({type:X})],ee.prototype,"viewModel",void 0),Object(l.a)([Object(h.a)("viewModel.visible")],ee.prototype,"visible",void 0),Object(l.a)([Object(v.a)()],ee.prototype,"_newMeasurement",null),Object(l.a)([Object(v.a)()],ee.prototype,"_changeUnit",null),ee=Object(l.a)([Object(p.a)("esri.widgets.DistanceMeasurement2D")],ee),n.default=ee}}])}();