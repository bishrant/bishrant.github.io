!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function i(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+TxJ":function(e,t,r){"use strict";var n=r("srIe"),i=r("qRWG"),a=r("ZlUD"),o=r("M0lq"),c=r("opr1"),u=r("LGNZ"),h=r("c46T"),v=r("0RS7"),m=r("yE7X"),p=r("5Bb1"),_=3.14159265359/180;t.a=function(e){return function(e){d(r,e);var t=y(r);function r(){var e;l(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).angle=0,e.xOffset=0,e.yOffset=0,e.width=0,e.height=0,e.boundsType="square",e._anchorX=0,e._anchorY=0,e._computedWidth=0,e._computedHeight=0,e._vertexBoundsScaleX=1,e._vertexBoundsScaleY=1,e._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0},e.geometryType=m.d.MARKER,e}return f(r,[{key:"_write",value:function(e,t,r){var n=t.getDisplayId();e.recordStart(n,this._materialKey,this.geometryType,!1,!0),this._writeGeometry(e,t,n,r),e.recordEnd()}},{key:"_writeGeometry",value:function(e,t,r,i){var o=this;if(Object(n.k)(this._markerPlacement))return this._writePlacedMarkers(e,t,i);var c=i?Object(a.p)(Object(a.d)(i),2):"esriGeometryPolygon"===t.geometryType?t.readCentroid():t.readUnquantizedGeometry();if(c){if(c.isPoint){var u=s(c.coords,2),l=u[0],h=u[1];if(!e.hasAggregates&&e.hasPixelBufferEnabled&&(l<-1||l>=513||h<-1||h>=513))return;return this._writeVertices(e,r,this._getPos(l,h),l,h)}c.forEachVertex((function(t,n){return o._writeVertices(e,r,o._getPos(t,n),t,n)}))}}},{key:"_writePlacedMarkers",value:function(e,t,r){var a=null!=r?r:t.readLegacyGeometry(),o=p.a.getPlacement(a,Object(n.q)(this._markerPlacement),Object(i.h)(1));if(o)for(var s=t.getDisplayId(),c=Object(h.a)(),l=Object(u.a)(),f=o.next();null!=f;){var d=f,v=d.tx,y=d.ty;v>=-128&&v<=640&&y>=-128&&y<=640&&(this._applyTransformation(l,c,f.getAngle()/_),this._writeVertices(e,s,this._getPos(v,y),v,y)),f=o.next()}}},{key:"_writeVertices",value:function(e,t,r,n,i){var a=e.vertexCount();e.vertexBounds(n+this.xOffset,i-this.yOffset,this._computedWidth*this._vertexBoundsScaleX,this._computedHeight*this._vertexBoundsScaleY),e.vertexWrite(r),e.vertexWrite(this._offsetUpperLeft),e.vertexWrite(this._texUpperLeft),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexEnd(),e.vertexWrite(r),e.vertexWrite(this._offsetUpperRight),e.vertexWrite(this._texUpperRight),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexEnd(),e.vertexWrite(r),e.vertexWrite(this._offsetBottomLeft),e.vertexWrite(this._texBottomLeft),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexEnd(),e.vertexWrite(r),e.vertexWrite(this._offsetBottomRight),e.vertexWrite(this._texBottomRight),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexEnd(),e.indexWrite(a+0),e.indexWrite(a+1),e.indexWrite(a+2),e.indexWrite(a+1),e.indexWrite(a+3),e.indexWrite(a+2)}},{key:"_applyTransformation",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(c.d)(e),Object(c.h)(e,e,Object(h.b)(this.xOffset,-this.yOffset)),this.angle+r!==0&&Object(c.f)(e,e,_*(this.angle+r));var n=this._computedWidth,i=this._computedHeight,a=(this._anchorX-.5)*n,s=(this._anchorY-.5)*i;Object(o.r)(t,a,s),Object(o.s)(t,t,e),this._offsetUpperLeft=Object(v.a)(16*t[0],16*t[1]),this._offsets.xUpperLeft=t[0],this._offsets.yUpperLeft=t[1],Object(o.r)(t,a+n,s),Object(o.s)(t,t,e),this._offsetUpperRight=Object(v.a)(16*t[0],16*t[1]),this._offsets.xUpperRight=t[0],this._offsets.yUpperRight=t[1],Object(o.r)(t,a,s+i),Object(o.s)(t,t,e),this._offsetBottomLeft=Object(v.a)(16*t[0],16*t[1]),this._offsets.xBottomLeft=t[0],this._offsets.yBottomLeft=t[1],Object(o.r)(t,a+n,s+i),Object(o.s)(t,t,e),this._offsetBottomRight=Object(v.a)(16*t[0],16*t[1]),this._offsets.xBottomRight=t[0],this._offsets.yBottomRight=t[1]}},{key:"_getPos",value:function(e,t){return Object(v.a)(Math.round(8*e),Math.round(8*t))}}]),r}(e)}},"5Bb1":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("tqcG"),i=r("k0QX"),a=function(){function e(){l(this,e)}return f(e,null,[{key:"getPlacement",value:function(e,t,r){var a=Object(i.b)(t);if(!a)return null;var o=Object(n.c)(e);return a.execute(o,t,r)}}]),e}()},"916D":function(e,t,r){"use strict";var n=r("srIe"),i=r("tqcG"),a=r("/iQf"),s=r("k0QX"),c=function(){function e(){l(this,e)}return f(e,null,[{key:"executeEffects",value:function(e,t){var r,n=Object(i.c)(t),c=new a.a(n),u=o(e);try{for(u.s();!(r=u.n()).done;){var l=r.value,h=Object(s.a)(l);h&&(c=h.execute(c,l,1.3333333333333333))}}catch(f){u.e(f)}finally{u.f()}return c}},{key:"next",value:function(e){var t=e.next();return Object(i.d)(t),t}}]),e}();t.a=function(){function e(){l(this,e)}return f(e,[{key:"bindFeature",value:function(e,t,r){}},{key:"write",value:function(e,t){if(Object(n.j)(this._effects))return this._write(e,t);for(var r=c.executeEffects(this._effects,t.readLegacyGeometry()),i=c.next(r);i;)this._write(e,t,i),i=c.next(r)}},{key:"_write",value:function(e,t,r){}}]),e}()},Bcjy:function(e,r,i){"use strict";i.d(r,"a",(function(){return w}));var s=i("6S2I"),c=i("zlDU"),u=i("gvqN"),h=i("NrhG"),v=i("wk6I"),m=i("ictz"),_=i("ZxoT"),x=i("owVx"),b=s.a.getLogger("esri/views/2d/engine/webgl/util/Matcher"),g=function(){function e(){l(this,e),this.type="feature",this._defaultResult=null}var t,r;return f(e,[{key:"size",value:function(){return 1}},{key:"getDefault",value:function(){return this._defaultResult}},{key:"setDefault",value:function(e){this._defaultResult=e}},{key:"match",value:function(e,t,r,n,i){return this.getDefault()}},{key:"analyze",value:(r=a(regeneratorRuntime.mark((function e(t,r,n,i,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e,t,n,i,a){return r.apply(this,arguments)})}],[{key:"fromBasicRenderer",value:(t=a(regeneratorRuntime.mark((function t(r,n,i){var a,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new e,!r.symbol){t.next=7;break}return t.next=4,Object(_.a)(r.symbol,i);case 4:o=t.sent,s=n.createTemplateGroup(o,null),a.setDefault(s);case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),O=function(e){d(i,e);var t,r=y(i);function i(e,t,n,a){var o;return l(this,i),(o=r.call(this)).type="interval",o._intervals=[],o._isMaxInclusive=t,o._fieldIndex=a,o._field=e,o._normalizationInfo=n,o}return f(i,[{key:"add",value:function(e,t){this._intervals.push({interval:e,result:t}),this._intervals.sort((function(e,t){return e.interval.min-t.interval.min}))}},{key:"size",value:function(){return n(p(i.prototype),"size",this).call(this)+this._intervals.length}},{key:"match",value:function(e,t,r,n,i){if(null==this._fieldIndex&&!this._field)return this.getDefault();var a=null!=this._fieldIndex?t.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(t);if(!a&&(null==a||isNaN(a)))return this.getDefault();for(var o=0;o<this._intervals.length;o++){var s=this._intervals[o],c=s.interval,u=s.result,l=this._isMaxInclusive?a<=c.max:a<c.max;if(a>=c.min&&l)return u}return this.getDefault()}},{key:"_needsNormalization",value:function(){var e=this._normalizationInfo;return e&&(e.normalizationField||e.normalizationTotal||e.normalizationType)}},{key:"_getValueFromField",value:function(e){var t=e.readAttribute(this._field);if(!this._needsNormalization()||null==t)return t;var r=this._normalizationInfo,n=r.normalizationField,i=r.normalizationTotal,a=r.normalizationType,o=!!n&&e.readAttribute(n);if(a)switch(a){case"esriNormalizeByField":return o?t/o:void 0;case"esriNormalizeByLog":return Math.log(t)*Math.LOG10E;case"esriNormalizeByPercentOfTotal":return t/i*100;default:return void b.error("Found unknown normalization type: "+a)}else b.error("Normalization is required, but no type was set!")}}],[{key:"fromCBRenderer",value:(t=a(regeneratorRuntime.mark((function e(t,r,n){var o,s,c,u,l,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.isMaxInclusive,s=t.normalizationField,c=t.normalizationTotal,u=t.normalizationType,l=new i(t.field,o,{normalizationField:s,normalizationTotal:c,normalizationType:u},t.fieldIndex),e.next=7,Object(_.a)(t.backgroundFillSymbol,n);case 7:return h=e.sent,e.next=10,Promise.all(t.intervals.map(function(){var e=a(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)(t.symbol,n);case 2:return i=e.sent,e.next=5,r.createTemplateGroup(i,h);case 5:a=e.sent,l.add({min:t.min,max:t.max},a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:return e.next=12,Object(_.a)(t.defaultSymbol,n);case 12:if(!(f=e.sent)){e.next=18;break}return e.next=16,r.createTemplateGroup(f,h);case 16:d=e.sent,l.setDefault(d);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),i}(g),k=function(e){d(i,e);var t,r=y(i);function i(e,t,n){var a;return l(this,i),(a=r.call(this)).type="map",a._nullResult=null,a._resultsMap=new Map,a._fieldsIndex=n,a._fields=e,a._seperator=t||"",a}return f(i,[{key:"setNullResult",value:function(e){this._nullResult=e}},{key:"add",value:function(e,t){this._resultsMap.set(e.toString(),t)}},{key:"size",value:function(){return n(p(i.prototype),"size",this).call(this)+this._resultsMap.size}},{key:"match",value:function(e,t,r,n,i){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();var a=null!=this._fieldsIndex?t.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(t);if(null!==this._nullResult&&(null==a||""===a||"<Null>"===a))return this._nullResult;if(!a&&null==a)return this.getDefault();var o=a.toString();return this._resultsMap.has(o)?this._resultsMap.get(o):this.getDefault()}},{key:"_getValueFromFields",value:function(e){var t,r=[],n=o(this._fields);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=e.readAttribute(i);r.push(a)}}catch(s){n.e(s)}finally{n.f()}return r.join(this._seperator)}}],[{key:"fromUVRenderer",value:(t=a(regeneratorRuntime.mark((function e(t,r,n){var o,s,c,u,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.fieldDelimiter,s=[t.field],t.field2&&s.push(t.field2),t.field3&&s.push(t.field3),e.next=4,Object(_.a)(t.backgroundFillSymbol,n);case 4:return c=e.sent,u=new i(s,o,t.fieldIndex),e.next=8,Promise.all(t.map.map(function(){var e=a(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)(t.symbol,n);case 2:return i=e.sent,e.next=5,r.createTemplateGroup(i,c);case 5:a=e.sent,"<Null>"===t.value?u.setNullResult(a):u.add(t.value,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.next=10,Object(_.a)(t.defaultSymbol,n);case 10:if(!(l=e.sent)){e.next=16;break}return e.next=14,r.createTemplateGroup(l,c);case 14:h=e.sent,u.setDefault(h);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),i}(g),j=function(e){d(g,e);var r,n,s,p=y(g);function g(e,t,r,n){var i;return l(this,g),(i=p.call(this)).type="dictionary",i._groupIdCache=new v.a(100),i._renderer=e,i._fieldMap=e.fieldMap,i._symbolFields=e.getSymbolFields(),i._templates=t,i._info=r,i._scaleFn=n,i}return f(g,[{key:"_analyzeFeature",value:(s=a(regeneratorRuntime.mark((function e(r,n,i,a){var s,u,l,f,d,v,y,m,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.readLegacyFeature(),u=this._scaleFn(s,n,i),l=this._attributeHash(s)+"-"+u,!(f=this._groupIdCache.get(l))){e.next=3;break}return e.abrupt("return",f);case 3:return d=t(t({},i),{},{spatialReference:this._info.spatialReference,abortOptions:a,fields:this._info.fields}),e.next=6,this._renderer.getSymbolAsync(s,d);case 6:return v=e.sent,y=Object(x.c)(v,this._renderer),m=Object(_.a)(y,this._info,a).then((function(e){if("expanded-cim"!==e.type)return b.error(new c.a("mapview-bad-type","Found unexpected type ".concat(e.type," in dictionary response"))),null;e.hash+="-"+u;var t,r=o(e.layers);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.scaleFactor=u,n.templateHash+="-"+u,"text"===n.type&&"string"==typeof n.text&&n.text.indexOf("[")>-1&&(n.text=Object(h.c)(p._fieldMap,n.text,n.cim.textCase))}}catch(i){r.e(i)}finally{r.f()}return p._templates.createTemplateGroup(e,null)})),e.abrupt("return",(this._groupIdCache.put(l,m,1),m));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return s.apply(this,arguments)})},{key:"analyze",value:(n=a(regeneratorRuntime.mark((function e(t,r,n,i,a){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=r.getCursor(),s=[];o.next();)s.push(this._analyzeFeature(o,n,i,a));return e.abrupt("return",Promise.all(s));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i,a){return n.apply(this,arguments)})},{key:"match",value:function(e,t,r,n,i){return null}},{key:"_attributeHash",value:function(e){var t,r="",n=o(this._symbolFields);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this._fieldMap[i];a&&(r+=e.attributes[a]+"-")}}catch(s){n.e(s)}finally{n.f()}return r}}],[{key:"fromDictionaryRenderer",value:(r=a(regeneratorRuntime.mark((function e(t,r,n){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(i.bind(null,"JhoD"));case 2:return o=e.sent.default.fromJSON(t.renderer),e.next=5,o.fetchResources({spatialReference:n.spatialReference,fields:n.fields});case 5:return e.next=7,function(){var e=a(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("number"!=typeof(n=t||1)){e.next=3;break}return e.abrupt("return",(function(e,t,r){return n}));case 3:return e.next=5,Object(u.d)(n,r.spatialReference,r.fields);case 5:return i=e.sent,e.abrupt("return",(function(e,t,n){return Object(m.a)(i,e,{$view:n},r.geometryType,t)||1}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(o.scaleExpression,n);case 7:return s=e.sent,e.abrupt("return",new g(o,r,n,s));case 9:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})}]),g}(g),M=s.a.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");function w(e,t,r){return S.apply(this,arguments)}function S(){return(S=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="simple"===e.t0?3:"map"===e.t0?4:"interval"===e.t0?5:"dictionary"===e.t0?6:7;break;case 3:return e.abrupt("return",g.fromBasicRenderer(t,r,n));case 4:return e.abrupt("return",k.fromUVRenderer(t,r,n));case 5:return e.abrupt("return",O.fromCBRenderer(t,r,n));case 6:return e.abrupt("return",j.fromDictionaryRenderer(t,r,n));case 7:return e.abrupt("return",(M.error(new c.a("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},Dw8i:function(e,r,n){"use strict";n.d(r,"a",(function(){return De})),n.d(r,"b",(function(){return Ae}));var i=n("6S2I"),c=n("zlDU"),u=n("9MzC"),h=n("psH3"),v=n("GqaZ"),p=n("owVx"),_=n("iegs"),x=n("qLV0"),b=n("OKTS"),g=n("qRWG"),O=n("jIHu"),k=n("0RS7"),j=n("GMaR"),M=n("qaIE"),w=n("HQFP"),S=n("aixI"),R=n("srIe"),P=n("ZlUD"),L=n("yE7X"),C=n("gVKr"),E=(n("+yyC"),n("LaVW"));function T(e,t,r,n,i,a,o){re=0;var s,c,u,l,h,f=(n-r)*a,d=i&&i.length,v=d?(i[0]-r)*a:f,y=z(t,r,0,0,v,a,!0);if(y&&y.next!==y.prev){if(d&&(y=function(e,t,r,n,i,a){for(var o=new Array,s=0,c=n.length;s<c;s++){var u=z(e,t,0,n[s]*a,s<c-1?n[s+1]*a:r*a,a,!1);u===u.next&&(u.steiner=!0),o.push(F(u))}o.sort(Z);for(var l=0,h=o;l<h.length;l++){V(h[l],i),i=I(i,i.next)}return i}(t,r,n,i,y,a)),f>80*a){s=u=t[0+r*a],c=l=t[1+r*a];for(var m=a;m<v;m+=a){var p=t[m+r*a],_=t[m+1+r*a];s=Math.min(s,p),c=Math.min(c,_),u=Math.max(u,p),l=Math.max(l,_)}h=0!==(h=Math.max(u-s,l-c))?1/h:0}W(y,e,a,s,c,h,o,0)}}function z(e,t,r,n,i,a,o){var s;if(o===function(e,t,r,n,i,a){for(var o=0,s=n,c=i-a;s<i;s+=a)o+=(e[c+t*a]-e[s+t*a])*(e[s+1+t*a]+e[c+1+t*a]),c=s;return o}(e,t,0,n,i,a)>0)for(var c=n;c<i;c+=a)s=D(c+t*a,e[c+t*a],e[c+1+t*a],s);else for(var u=i-a;u>=n;u-=a)s=D(u+t*a,e[u+t*a],e[u+1+t*a],s);return s&&K(s,s.next)&&(B(s),s=s.next),s}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!e)return e;var r,n=e;do{if(r=!1,n.steiner||!K(n,n.next)&&0!==G(n.prev,n,n.next))n=n.next;else{if(B(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function W(e,t,r,n,i,a,o,s){if(e){!s&&a&&(e=function e(t,r,n,i){for(var a;a!==t;a=a.next){if(null===(a=a||t).z&&(a.z=H(a.x,a.y,r,n,i)),a.prev.next!==a||a.next.prev!==a)return a.prev.next=a,a.next.prev=a,e(t,r,n,i);a.prevZ=a.prev,a.nextZ=a.next}return t.prevZ.nextZ=null,t.prevZ=null,function(e){for(var t,r=1;;){var n=void 0,i=e;e=null,t=null;for(var a=0;i;){a++,n=i;for(var o=0;o<r&&n;o++)n=n.nextZ;for(var s=r;o>0||s>0&&n;){var c=void 0;0===o?(c=n,n=n.nextZ,s--):0!==s&&n?i.z<=n.z?(c=i,i=i.nextZ,o--):(c=n,n=n.nextZ,s--):(c=i,i=i.nextZ,o--),t?t.nextZ=c:e=c,c.prevZ=t,t=c}i=n}if(t.nextZ=null,r*=2,a<2)return e}}(t)}(e,n,i,a));for(var c=e;e.prev!==e.next;){var u=e.prev,l=e.next;if(a?A(e,n,i,a):N(e))t.push(u.index/r+o),t.push(e.index/r+o),t.push(l.index/r+o),B(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?W(e=U(e,t,r,o),t,r,n,i,a,o,2):2===s&&J(e,t,r,n,i,a,o):W(I(e),t,r,n,i,a,o,1);break}}}}function N(e){var t=e.prev,r=e,n=e.next;if(G(t,r,n)>=0)return!1;for(var i=e.next.next,a=i,o=0;i!==e.prev&&(0===o||i!==a);){if(o++,q(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&G(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function A(e,t,r,n){var i=e.prev,a=e,o=e.next;if(G(i,a,o)>=0)return!1;for(var s=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,u=H(i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,t,r,n),l=H(s,c,t,r,n),h=e.prevZ,f=e.nextZ;h&&h.z>=u&&f&&f.z<=l;){if(h!==e.prev&&h!==e.next&&q(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&G(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&q(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&G(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=u;){if(h!==e.prev&&h!==e.next&&q(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&G(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=l;){if(f!==e.prev&&f!==e.next&&q(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&G(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function D(e,t,r,n){var i=ee.create(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function F(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function V(e,t){if(t=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var c,u=r,l=r.x,h=r.y,f=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=l&&i!==n.x&&q(a<h?i:o,a,l,h,a<h?o:i,a,n.x,n.y)&&(((c=Math.abs(a-n.y)/(i-n.x))<f||c===f&&n.x>r.x)&&Y(n,e)&&(r=n,f=c)),n=n.next;return r}(e,t)){var r=$(t,e);I(r,r.next)}}function G(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function X(e,t,r,n){return!!(K(e,t)&&K(r,n)||K(e,n)&&K(r,t))||G(e,t,r)>0!=G(e,t,n)>0&&G(r,n,e)>0!=G(r,n,t)>0}function q(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function Y(e,t){return G(e.prev,e,e.next)<0?G(e,t,e.next)>=0&&G(e,e.prev,t)>=0:G(e,t,e.prev)<0||G(e,e.next,t)<0}function H(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function K(e,t){return e.x===t.x&&e.y===t.y}function Z(e,t){return e.x-t.x}function U(e,t,r,n){var i=e;do{var a=i.prev,o=i.next.next;!K(a,o)&&X(a,i,i.next,o)&&Y(a,o)&&Y(o,a)&&(t.push(a.index/r+n),t.push(i.index/r+n),t.push(o.index/r+n),B(i),B(i.next),i=e=o),i=i.next}while(i!==e);return i}function J(e,t,r,n,i,a,o){var s=e;do{for(var c=s.next.next;c!==s.prev;){if(s.index!==c.index&&Q(s,c)){var u=$(s,c);return s=I(s,s.next),u=I(u,u.next),W(s,t,r,n,i,a,o,0),void W(u,t,r,n,i,a,o,0)}c=c.next}s=s.next}while(s!==e)}function Q(e,t){return e.next.index!==t.index&&e.prev.index!==t.index&&!function(e,t){var r=e;do{if(r.index!==e.index&&r.next.index!==e.index&&r.index!==t.index&&r.next.index!==t.index&&X(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&Y(e,t)&&Y(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function $(e,t){var r=ee.create(e.index,e.x,e.y),n=ee.create(t.index,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}for(var ee=function(){function e(){l(this,e),this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return f(e,null,[{key:"create",value:function(t,r,n){var i=re<te.length?te[re++]:new e;return i.index=t,i.x=r,i.y=n,i.prev=null,i.next=null,i.z=null,i.prevZ=null,i.nextZ=null,i.steiner=!1,i}}]),e}(),te=new Array,re=0,ne=0;ne<8096;ne++)te.push(new ee);var ie=new(n("6NBT").a),ae=new E.b(0,0,0,1,0),oe=new E.b(0,0,0,1,0);function se(e,t,r){for(var n=0,i=1;i<r;i++)n+=(e[2*(t+i)]-e[2*(t+i-1)])*(e[2*(t+i)+1]+e[2*(t+i-1)+1]);return n}function ce(e,t,r,n,i){for(var a=0,o=r;o<n;o+=3){var s=2*(e.getValue(o)-i),c=2*(e.getValue(o+1)-i),u=2*(e.getValue(o+2)-i);a+=Math.abs((t[s]-t[u])*(t[c+1]-t[s+1])-(t[s]-t[c])*(t[u+1]-t[s+1]))}return a}ae.setExtent(O.E),oe.setExtent(O.E);var ue=function(e){return function(e){d(r,e);var t=y(r);function r(){var e;l(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).forceLibtess=!1,e.geometryType=L.d.FILL,e}return f(r,[{key:"_write",value:function(e,t,r){var n="esriGeometryPoint"===t.geometryType,i=j.a.load(this._materialKey);e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,i.dotDensity,n),this._writeGeometry(e,t,i,r,n),e.recordEnd()}},{key:"_writeGeometry",value:function(e,t,r,n,i){var a=this._getGeometry(t,n,i);if(!Object(R.j)(a)){var o=e.indexCount();if(a.lengths[0]>1e3||this.forceLibtess||!function(e,t){var r=t.coords,n=t.lengths,i=t.hasIndeterminateRingOrder,a=e.indexWriter(),o=e.vertexCount();if(i)return!1;for(var s=a.length,c=0,u=0;u<n.length;){for(var l=u,h=n[u],f=se(r,c,h),d=[];++l<n.length;){var v=n[l],y=se(r,c+h,v);if(!(y>0))break;f+=y,d.push(c+h),h+=v}var m=a.length;T(a,r,c,c+h,d,2,o);var p=ce(a,r,m,a.length,o),_=Math.abs(f);if(Math.abs((p-_)/Math.max(1e-7,_))>1e-5)return a.seek(s),!1;u=l,c+=h}return!0}(e,a)){var s=function(e,t){var r=[],n=[],i=e.indexWriter(),a=e.vertexCount(),o=t.coords,s=t.lengths;ie.beginPolygon(r,n);for(var c=0,u=0;u<s.length;u++){var l=t.lengths[u];ie.beginContour();for(var h=0;h<l;h++){var f=[o[2*(c+h)],o[2*(c+h)+1],0];ie.addVertex(f,f)}ie.endContour(),c+=l}ie.endPolygon();for(var d=0;d<n.length;d++)i.push(n[d]+a);return r}(e,a);o!==e.indexCount()&&this._writeVertices(e,t,s,[s.length/2],r)}else!(o===e.indexCount())&&this._writeVertices(e,t,a.coords,a.lengths,r)}}},{key:"_writeVertices",value:function(e,t,r,n,i){var a,s=t.getDisplayId(),c=0,u=o(n);try{for(u.s();!(a=u.n()).done;){for(var l=a.value,h=l+c,f=c;f<h;f++){var d=r[2*f],v=r[2*f+1],y=Object(k.a)(1*d,1*v);e.vertexBounds(d,v,0,0),e.vertexWrite(y),e.vertexWrite(s),i.dotDensity?e.vertexWriteF32(1/Math.abs(t.readGeometryArea())):(e.vertexWrite(this.fillColor),e.vertexWrite(this.tl),e.vertexWrite(this.br),e.vertexWrite(this.aux1),e.vertexWrite(this.aux2),e.vertexWrite(this.aux3))}c+=l}}catch(m){u.e(m)}finally{u.f()}}},{key:"_getGeometry",value:function(e,t,r){var n=t?Object(P.p)(Object(P.d)(t),2):e.readUnquantizedGeometry();return n?function(e,t){if(!function(e,t,r){for(var n=0,i=0;i<e.lengths.length;i++){for(var a=e.lengths[i],o=0;o<a;o++){var s=e.coords[2*(o+n)],c=e.coords[2*(o+n)+1];if(s<-128||s>r||c<-128||c>r)return!0}n+=a}return!1}(e,0,O.E+128))return e;ae.setPixelMargin(t),ae.reset(3);for(var r=0,n=0;n<e.lengths.length;n++){var i=e.lengths[n],a=e.coords[2*(0+r)],s=e.coords[2*(0+r)+1];ae.moveTo(a,s);for(var c=1;c<i;c++)a=e.coords[2*(c+r)],s=e.coords[2*(c+r)+1],ae.lineTo(a,s);ae.close(),r+=i}var u=ae.result(!1);if(!u)return null;var l,h=[],f=[],d=o(u);try{for(d.s();!(l=d.n()).done;){var v,y=l.value,m=0,p=o(y);try{for(p.s();!(v=p.n()).done;){var _=v.value;f.push(_.x),f.push(_.y),m++}}catch(x){p.e(x)}finally{p.f()}h.push(m)}}catch(x){d.e(x)}finally{d.f()}return new C.a(h,f)}(n,r?256:128):null}}]),r}(e)},le=n("T8sT"),he=n("916D"),fe=i.a.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate"),de=function(e){d(r,e);var t=y(r);function r(e){var n;return l(this,r),(n=t.call(this))._ongoingMaterialRequestMap=new Map,n._materialCache=new Map,n._dynamicPropertyMap=new Map,n._cimLayer=e,n}return f(r,[{key:"analyze",value:function(e,t,r,n){var i=this,a=t.readLegacyFeature(),o=this._materialCache,s=this._cimLayer.materialHash;if(!s)return fe.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);var c="function"==typeof s?s(a,r,n):s;if(o.has(c)){var u=o.get(c);return Promise.resolve(u)}if(this._ongoingMaterialRequestMap.has(c))return this._ongoingMaterialRequestMap.get(c);var l=Object(le.a)(this._cimLayer.cim,this._cimLayer.materialOverrides);l.mosaicHash=c;var h=e.getMosaicItem(l).then((function(e){return i._ongoingMaterialRequestMap.delete(c),o.set(c,e),e})).catch((function(e){return i._ongoingMaterialRequestMap.delete(c),fe.error(".analyze()",e.message),null}));return this._ongoingMaterialRequestMap.set(c,h),h}}]),r}(he.a),ve=function(e){d(r,e);var t=y(r);function r(e){var n,i;if(l(this,r),n=t.call(this,e),Object(S.c)(e.color))n._dynamicPropertyMap.set("_fillColor",(function(t,r,n){var i=e.color(t,r,n);return i&&Object(M.c)(i)||0}));else{var a=e.color;n.fillColor=a&&Object(M.c)(a)||0}var o=0;Object(S.c)(e.height)||(o=e.height||0);var s="CIMMarkerPlacementInsidePolygon"===(null==(i=e.cim.placement)?void 0:i.type)&&e.cim.placement.shiftOddRows?2:1;n._dynamicPropertyMap.set("_height",(function(t,r,n){return Object(S.c)(e.height)?e.height(t,r,n)*s:o*s}));var c=0;Object(S.c)(e.offsetX)||(c=Object(g.h)(e.offsetX||0)+128)>255&&(c=255),n._dynamicPropertyMap.set("_offsetX",(function(t,r,n){if(Object(S.c)(e.offsetX)){var i=Object(g.h)(e.offsetX(t,r,n))+128;return i>255&&(i=255),i}return c}));var u=1;Object(S.c)(e.scaleX)||(u=e.scaleX||1),n._dynamicPropertyMap.set("_scaleX",(function(t,r,n){return Object(S.c)(e.scaleX)?e.scaleX(t,r,n):u}));var h=0;Object(S.c)(e.offsetY)||(h=Object(g.h)(-e.offsetY||0)+128)>255&&(h=255),n._dynamicPropertyMap.set("_offsetY",(function(t,r,n){if(Object(S.c)(e.offsetY)){var i=Object(g.h)(-e.offsetY(t,r,n))+128;return i>255&&(i=255),i}return h}));var f=0;return Object(S.c)(e.angle)||(f=Object(w.d)(e.angle)||0),n._dynamicPropertyMap.set("_angle",(function(t,r,n){return Object(S.c)(e.angle)?Object(w.d)(e.angle(t,r,n)):f})),n._effects=e.effects,n._cimFillLayer=e,n._fillMaterialKey=j.a.load(e.materialKey),m(n)}return f(r,[{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)}));var a=this._fillMaterialKey,o=this._materialCache,s=this._cimFillLayer;this.aux3=Object(k.b)(0,0,this._angle,s.colorLocked?1:0);var c=(0,s.materialHash)(i,t,r),u=o.get(c),l=null;if(u&&Object(v.a)(u.spriteMosaicItem)&&(l=u.spriteMosaicItem),l){var h=l,f=h.rect,d=h.width,y=h.height,m=f.x+O.q,p=f.y+O.q,_=m+d,x=p+y,j=Object(b.l)(Object(g.h)(this._height));j>255?j=255:j<=0&&(j=Object(b.l)(x-p));var M=Object(b.l)(Object(g.h)(this._height/y*d||0));M>255?M=255:M<=0&&(M=Object(b.l)(_-m));var w=this._scaleX;this.tl=Object(k.a)(m,p),this.br=Object(k.a)(_,x),this.aux1=Object(k.b)(M,j,this._offsetX,this._offsetY),this.aux2=Object(k.a)(128*w,128),a.sdf=l.sdf,a.pattern=!0,a.textureBinding=l.textureBinding}else this.tl=0,this.br=0,this.aux1=0,this.aux2=0,a.sdf=!1,a.pattern=!1,a.textureBinding=0;this._materialKey=a.data}}],[{key:"fromCIMFill",value:function(e){return new r(e)}}]),r}(ue(de)),ye=n("Jimw"),me=function(e){return function(t){var r=e.out,n=Math.ceil(1024*e._halfWidth),i=Math.ceil(1024*e._halfReferenceWidth);t.entry0=e.offset+e.vertexCount++;var a=Object(k.a)(t.distance,n),o=Object(k.b)(Math.round(31*t.prevNormal.x),Math.round(31*t.prevNormal.y),Math.round(0),Math.round(-31)),s=Object(k.b)(0,0,0,e._bitset);r.vertexBounds(t.currentVertex.x,t.currentVertex.y,0,0),r.vertexWrite(Object(k.a)(8*t.currentVertex.x,8*t.currentVertex.y)),r.vertexWrite(e.id),r.vertexWrite(e._fillColor),r.vertexWrite(o),r.vertexWrite(a),r.vertexWrite(e._tl),r.vertexWrite(e._br),r.vertexWrite(s),r.vertexWrite(Object(k.a)(i,0)),r.vertexEnd(),t.entry2=e.offset+e.vertexCount++;var c=Object(k.a)(t.distance,n),u=Object(k.b)(Math.round(31*-t.prevNormal.x),Math.round(31*-t.prevNormal.y),Math.round(0),Math.round(31)),l=Object(k.b)(0,0,0,e._bitset);r.vertexBounds(t.currentVertex.x,t.currentVertex.y,0,0),r.vertexWrite(Object(k.a)(8*t.currentVertex.x,8*t.currentVertex.y)),r.vertexWrite(e.id),r.vertexWrite(e._fillColor),r.vertexWrite(u),r.vertexWrite(c),r.vertexWrite(e._tl),r.vertexWrite(e._br),r.vertexWrite(l),r.vertexWrite(Object(k.a)(i,0)),r.vertexEnd(),t.exit0=e.offset+e.vertexCount++;var h=Object(k.a)(t.distance,n),f=Object(k.b)(Math.round(31*t.nextNormal.x),Math.round(31*t.nextNormal.y),Math.round(0),Math.round(-31)),d=Object(k.b)(0,0,0,e._bitset);r.vertexBounds(t.currentVertex.x,t.currentVertex.y,0,0),r.vertexWrite(Object(k.a)(8*t.currentVertex.x,8*t.currentVertex.y)),r.vertexWrite(e.id),r.vertexWrite(e._fillColor),r.vertexWrite(f),r.vertexWrite(h),r.vertexWrite(e._tl),r.vertexWrite(e._br),r.vertexWrite(d),r.vertexWrite(Object(k.a)(i,0)),r.vertexEnd(),t.exit2=e.offset+e.vertexCount++;var v=Object(k.a)(t.distance,n),y=Object(k.b)(Math.round(31*-t.nextNormal.x),Math.round(31*-t.nextNormal.y),Math.round(0),Math.round(31)),m=Object(k.b)(0,0,0,e._bitset);r.vertexBounds(t.currentVertex.x,t.currentVertex.y,0,0),r.vertexWrite(Object(k.a)(8*t.currentVertex.x,8*t.currentVertex.y)),r.vertexWrite(e.id),r.vertexWrite(e._fillColor),r.vertexWrite(y),r.vertexWrite(v),r.vertexWrite(e._tl),r.vertexWrite(e._br),r.vertexWrite(m),r.vertexWrite(Object(k.a)(i,0)),r.vertexEnd()}},pe=function(e){return function(t){var r=e.out;r.indexWrite(t.leftExit0),r.indexWrite(t.rightEntry0),r.indexWrite(t.leftExit2),r.indexWrite(t.rightEntry0),r.indexWrite(t.rightEntry2),r.indexWrite(t.leftExit2),e.indexCount+=6}},_e=function(e){return function(e){d(r,e);var t=y(r);function r(){var e;l(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).tessellationProperties={},e._tessellationOptions={},e.geometryType=L.d.LINE,e}return f(r,[{key:"_initializeTessellator",value:function(e){var t=j.c.load(this._materialKey),r=this._tessellationOptions;if(r.thin=this.tessellationProperties._halfWidth<O.D/2&&!e&&!(t.vvSizeFieldStops||t.vvSizeMinMaxValue||t.vvSizeScaleStops||t.vvSizeUnitValue),r.trackDistance=this._isDashed||this._hasPattern,r.wrapDistance=65535,r.innerBisectorAutoSplitThreshold=.2631578947368421,r.outerBisectorAutoSplitThreshold=.2631578947368421,r.enableInnerBisectorSplit=this._isDashed||this._hasPattern,r.enableOuterBisectorSplit=this._isDashed||this._hasPattern,r.thin)this._tessellationCallbacks={vertex:me(this.tessellationProperties),bridge:pe(this.tessellationProperties)};else{var n=new ye.a(function(e){return function(t,r,n,i,a,o,s,c,u){var l=Object(k.a)(u,Math.ceil(1024*e._halfWidth)),h=Object(k.b)(Math.round(31*a),Math.round(31*o),Math.round(31*s),Math.round(31*c)),f=Object(k.b)(31*n,31*i,0,e._bitset),d=e.out;return d.vertexBounds(t,r,1,1),d.vertexWrite(Object(k.a)(8*t,8*r)),d.vertexWrite(e.id),d.vertexWrite(e._fillColor),d.vertexWrite(h),d.vertexWrite(l),d.vertexWrite(e._tl),d.vertexWrite(e._br),d.vertexWrite(f),d.vertexWrite(Object(k.a)(Math.ceil(1024*e._halfReferenceWidth),0)),d.vertexEnd(),e.offset+e.vertexCount++}}(this.tessellationProperties),function(e){return function(t,r,n){var i=e.out;i.indexWrite(t),i.indexWrite(r),i.indexWrite(n),e.indexCount+=3}}(this.tessellationProperties));n.miterLimitCosine=this._miterLimitCosine,n.textured=this._isDashed||this._hasPattern,n.joinOnUTurn=this._joinOnUTurn,this._tessellationCallbacks=n}}},{key:"_write",value:function(e,t,r){var n="esriGeometryPoint"===t.geometryType;e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,!1,n),this._writeGeometry(e,t,r,n),e.recordEnd()}},{key:"_writeGeometry",value:function(e,t,r,n){var i=null!=r?r:t.readLegacyGeometry(),a=this._getLines(i,n);Object(R.j)(a)||this._writeVertices(e,t,a)}},{key:"_getLines",value:function(e,t){if(Object(R.j)(e))return null;var r=e.paths||e.rings;return Object(R.j)(r)?null:function(e,t){oe.setPixelMargin(t);for(var r=oe,n=-t,i=O.E+t,a=[],c=!1,u=0;u<e.length;){var l=[],h=e[u];r.reset(2);var f=s(h[0],2),d=f[0],v=f[1];if(c)r.moveTo(d,v);else{if(d<n||d>i||v<n||v>i){c=!0;continue}l.push({x:d,y:v})}for(var y=!1,m=h.length,p=1;p<m;++p)if(d+=h[p][0],v+=h[p][1],c)r.lineTo(d,v);else{if(d<n||d>i||v<n||v>i){y=!0;break}l.push({x:d,y:v})}if(y)c=!0;else{if(c){var _=r.resultWithStarts();if(_){var x,b=o(_);try{for(b.s();!(x=b.n()).done;){var g=x.value;a.push(g)}}catch(k){b.e(k)}finally{b.f()}}}else a.push({line:l,start:0});u++,c=!1}}return 0===(a=a.filter((function(e){return e.line.length>1}))).length?null:a}(r,t?256:16)}},{key:"_writeVertices",value:function(e,t,r){var n=t.getDisplayId(),i=e.vertexCount(),a=this.tessellationProperties;a.out=e,a.id=n,a.indexCount=0,a.vertexCount=0,a.offset=i;var s,c=o(r);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=u.line,h=u.start;this._tessellationOptions.initialDistance=h%65535,this._tessellationCallbacks instanceof ye.a&&(this._tessellationCallbacks.capType=this._capType,this._tessellationCallbacks.joinType=this._joinType),Object(ye.d)(l,this._tessellationOptions,this._tessellationCallbacks),Object(ye.b)()}}catch(f){c.e(f)}finally{c.f()}}}]),r}(e)},xe=function(e){d(r,e);var t=y(r);function r(e){var n;l(this,r),(n=t.call(this,e))._cimLineLayer=e;var i=0;if(Object(S.c)(e.width)||(i=.5*Object(g.h)(e.width)),n._dynamicPropertyMap.set("_halfWidth",(function(t,r,n){return Object(S.c)(e.width)?.5*Object(g.h)(e.width(t,r,n)):i})),Object(S.c)(e.cap)?n._dynamicPropertyMap.set("_capType",e.cap):n._capType=e.cap,Object(S.c)(e.join)?n._dynamicPropertyMap.set("_joinType",e.join):n._joinType=e.join,Object(S.c)(e.color))n._dynamicPropertyMap.set("_fillColor",(function(t,r,n){var i=e.color(t,r,n);return i&&Object(M.c)(i)||0}));else{var a=e.color;n._fillColor=a&&Object(M.c)(a)||0}return Object(S.c)(e.miterLimit)?n._dynamicPropertyMap.set("_miterLimitCosine",(function(t,r,n){return Object(S.b)(e.miterLimit(t,r,n))})):n._miterLimitCosine=Object(S.b)(e.miterLimit),n._scaleFactor=e.scaleFactor||1,n._isDashed=e.isDashed,n._effects=e.effects,n.tessellationProperties._bitset=e.colorLocked?1:0,n._materialKey=e.materialKey,n._initializeTessellator(!0),n}return f(r,[{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)})),this._halfWidth*=this._scaleFactor;var a=this._materialCache,o=(0,this._cimLineLayer.materialHash)(i,t,r),s=a.get(o),c=null;if(s&&Object(v.a)(s.spriteMosaicItem)&&(c=s.spriteMosaicItem),c){this._hasPattern=!0;var u=c,l=u.rect,h=u.width,f=u.height,d=l.x+O.q,y=l.y+O.q,m=d+h,p=y+f;this.tessellationProperties._tl=Object(k.a)(d,y),this.tessellationProperties._br=Object(k.a)(m,p)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor,this.tessellationProperties._halfWidth=this._halfWidth,this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;var _=j.c.load(this._materialKey);c&&(_.sdf=c.sdf,_.pattern=!0,_.textureBinding=c.textureBinding),this._materialKey=_.data}}],[{key:"fromCIMLine",value:function(e){return new r(e)}}]),r}(_e(de)),be=n("LGNZ"),ge=n("c46T"),Oe=n("+TxJ"),ke=Object(ge.a)(),je=Object(be.a)(),Me=i.a.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate"),we=function(e){d(r,e);var t=y(r);function r(e){var n;return l(this,r),(n=t.call(this,e))._cimMarkerLayer=e,Object(S.c)(e.color)?n._dynamicPropertyMap.set("_fillColor",(function(t,r,n){return Object(M.c)(e.color(t,r,n))})):n._fillColor=Object(M.c)(e.color),Object(S.c)(e.outlineColor)?n._dynamicPropertyMap.set("_outlineColor",(function(t,r,n){return Object(M.c)(e.outlineColor(t,r,n))})):n._outlineColor=Object(M.c)(e.outlineColor),Object(S.c)(e.size)?n._dynamicPropertyMap.set("_size",(function(t,r,n){return Object(g.h)(e.size(t,r,n))})):n._size=Object(g.h)(e.size),Object(S.c)(e.scaleX)?n._dynamicPropertyMap.set("_scaleX",e.scaleX):n._scaleX=e.scaleX,Object(S.c)(e.offsetX)?n._dynamicPropertyMap.set("xOffset",(function(t,r,n){return Object(g.h)(e.offsetX(t,r,n))})):n.xOffset=Object(g.h)(e.offsetX),Object(S.c)(e.offsetY)?n._dynamicPropertyMap.set("yOffset",(function(t,r,n){return Object(g.h)(e.offsetY(t,r,n))})):n.yOffset=Object(g.h)(e.offsetY),Object(S.c)(e.outlineWidth)?n._dynamicPropertyMap.set("_outlineWidth",(function(t,r,n){return Object(g.h)(e.outlineWidth(t,r,n))})):n._outlineWidth=Object(g.h)(e.outlineWidth),Object(S.c)(e.rotation)?n._dynamicPropertyMap.set("_angle",e.rotation):n._angle=e.rotation,n._scaleFactor=Object(R.r)(e.scaleFactor,1),n._markerPlacement=e.markerPlacement,n._effects=e.effects,n._bitSet=(1===e.alignment?1:0)|(e.colorLocked?1:0)<<1|(e.scaleSymbolsProportionally?1:0)<<3,n._materialKey=e.materialKey,n}return f(r,[{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)}));var a=this._cimMarkerLayer.materialHash,o="function"==typeof a?a(i,t,r):a,s=this._materialCache.get(o);if(s&&Object(v.a)(s.spriteMosaicItem)&&s.spriteMosaicItem){var u=s.spriteMosaicItem,l=this._cimMarkerLayer.sizeRatio,h=u.width/u.height*this._scaleX,f=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,d=this._size,y=d*h,m=this.xOffset,p=this.yOffset;this.xOffset*=this._scaleFactor,this.yOffset*=this._scaleFactor;var _=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/Object(g.h)(this._cimMarkerLayer.frameHeight):1,x=this._outlineWidth*_,b=Object(g.h)(this._cimMarkerLayer.referenceSize),M=0,w=0,S=this._cimMarkerLayer.anchorPoint;S&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(M=-S.x/(this._size*h),w=S.y/this._size):(M=S.x,w=S.y)),this._sizeOutlineWidth=Object(k.b)(Math.round(Math.min(Math.sqrt(128*y),255)),Math.round(Math.min(Math.sqrt(128*d),255)),Math.round(Math.min(Math.sqrt(128*x),255)),Math.round(Math.min(Math.sqrt(128*b),255))),this.angle=f;var R=Math.round(64*l);this._bitestAndDistRatio=Object(k.a)(this._bitSet,R);var P=u.rect.x+O.q,L=u.rect.y+O.q,C=P+u.width,E=L+u.height;this._texUpperLeft=Object(k.a)(P,L),this._texUpperRight=Object(k.a)(C,L),this._texBottomLeft=Object(k.a)(P,E),this._texBottomRight=Object(k.a)(C,E);var T=j.d.load(this._materialKey);T.sdf=u.sdf,T.pattern=!0,T.textureBinding=u.textureBinding,this._materialKey=T.data,this._anchorX=.5-(.5+M)*u.width/u.width,this._anchorY=.5-(.5+w)*u.height/u.height,y*=l,d*=l,y*=this._scaleFactor,d*=this._scaleFactor,y*=u.rect.width/u.width,d*=u.rect.height/u.height,this._computedWidth=y,this._computedHeight=d,this._applyTransformation(je,ke),this.xOffset=m,this.yOffset=p}else Me.error(new c.a("mapview-cim","Encountered an error when binding feature"))}}],[{key:"fromCIMMarker",value:function(e){return new r(e)}}]),r}(Object(Oe.a)(de)),Se=n("MrbB"),Re=n("Mt1D"),Pe=n("RNFe"),Le=function(e){d(n,e);var t,r=y(n);function n(e){var t;l(this,n),(t=r.call(this,e))._horizontalAlignment="center",t._verticalAlignment="middle",t._textToGlyphs=new Map;var i,a,o,s=e.scaleFactor||1;t._cimTextLayer=e,Object(S.c)(e.color)?t._dynamicPropertyMap.set("_color",(function(t,r,n){return Object(M.c)(e.color(t,r,n))})):t._color=Object(M.c)(e.color),Object(S.c)(e.color)?t._dynamicPropertyMap.set("_haloColor",(function(t,r,n){return Object(M.c)(e.outlineColor(t,r,n))})):t._haloColor=Object(M.c)(e.outlineColor),Object(S.c)(e.size)||(i=Math.min(Math.round(Object(g.h)(e.size*e.sizeRatio)),127)),t._dynamicPropertyMap.set("_size",(function(t,r,n){return Object(S.c)(e.size)?Math.min(Math.round(Object(g.h)(e.size(t,r,n)*e.sizeRatio)),127):i})),Object(S.c)(e.outlineSize)?t._dynamicPropertyMap.set("_haloSize",(function(t,r,n){return Math.min(Math.floor(5*Object(g.h)(e.outlineSize(t,r,n)*e.sizeRatio)),127)})):t._haloSize=Math.min(Math.floor(5*Object(g.h)(e.outlineSize*e.sizeRatio)),127),Object(S.c)(e.offsetX)||(a=Math.round(Object(g.h)(e.offsetX*e.sizeRatio))),t._dynamicPropertyMap.set("_xOffset",(function(t,r,n){return Object(S.c)(e.offsetX)?Math.round(Object(g.h)(e.offsetX(t,r,n)*e.sizeRatio)):a})),Object(S.c)(e.offsetY)||(o=Math.round(Object(g.h)(e.offsetY*e.sizeRatio))),t._dynamicPropertyMap.set("_yOffset",(function(t,r,n){return Object(S.c)(e.offsetY)?Math.round(Object(g.h)(e.offsetY(t,r,n)*e.sizeRatio)):o})),Object(S.c)(e.angle)?t._dynamicPropertyMap.set("_angle",e.angle):t._angle=e.angle,Object(S.c)(e.horizontalAlignment)?t._dynamicPropertyMap.set("_horizontalAlignment",e.horizontalAlignment):t._horizontalAlignment=e.horizontalAlignment,Object(S.c)(e.verticalAlignment)?t._dynamicPropertyMap.set("_verticalAlignment",e.verticalAlignment):t._verticalAlignment=e.verticalAlignment,t._scaleFactor=s,Object(S.c)(e.text)?t._dynamicPropertyMap.set("_text",e.text):t._text=e.text;var c=Math.min(Math.round(Object(g.h)(e.referenceSize*e.sizeRatio)),127);t._referenceSize=Math.round(Math.sqrt(256*c)),t._materialKey=e.materialKey;var u=j.f.load(t._materialKey);return u.sdf=!0,t._bitset=(1===e.alignment?1:0)|(e.colorLocked?1:0)<<1,t._materialKey=u.data,t._decoration="none",t._lineHeight=1,t._lineWidth=512,t._textPlacement=e.markerPlacement,t._effects=e.effects,t._isCIM=!0,t}return f(n,[{key:"analyze",value:(t=a(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.readLegacyFeature(),o=function(e,t,r,n){return"string"==typeof e.text?e.text:"function"==typeof e.text?e.text(t,r,n):""}(this._cimTextLayer,a,n,i),e.next=4,t.getMosaicItem(this._cimTextLayer.cim,Object(Se.a)(o));case 4:return s=e.sent,e.abrupt("return",(this._textToGlyphs.set(o,s.glyphMosaicItems),s));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();if(this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)})),this._text&&0!==this._text.length){this._size*=this._scaleFactor,this._scale=this._size/24,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=Object(Re.d)(this._horizontalAlignment||"center"),this._yAlignD=Object(Re.f)(this._verticalAlignment||"baseline");var a=this._textToGlyphs.get(this._text);this.bindTextInfo(a,!1)}else this._shapingInfo=null}}],[{key:"fromCIMText",value:function(e){return new n(e)}}]),n}(Object(Pe.a)(de)),Ce=function(e){d(r,e);var t=y(r);function r(e,n,i,a,o,s,c,u,h){var f;l(this,r),(f=t.call(this))._effects=h;var d=j.a.load(e);return n&&(d.sdf=n.sdf,d.pattern=!0,d.textureBinding=n.textureBinding),f.fillColor=i,f.tl=a,f.br=o,f.aux1=s,f.aux2=c,f.aux3=u,f._materialKey=d.data,f}return f(r,null,[{key:"fromCIMFill",value:function(e,t){var n=e.color,i=n&&Object(M.c)(n)||0,a=e.materialKey;if(!t)return new r(a,null,i,0,0,0,0,Object(k.b)(0,0,0,e.colorLocked?1:0),e.effects);var o=t.rect,s=t.width,c=t.height,u=o.x+O.q,l=o.y+O.q,h=u+s,f=l+c,d=Object(b.l)(c);d>255?d=255:d<=0&&(d=Object(b.l)(f-l));var v=Object(b.l)(s||0);v>255?v=255:v<=0&&(v=Object(b.l)(h-u));var y=Object(g.h)(e.offsetX||0)+128;y>255&&(y=255);var m=Object(g.h)(-e.offsetY||0)+128;m>255&&(m=255);var p=e.scaleX||1;return new r(a,t,i,Object(k.a)(u,l),Object(k.a)(h,f),Object(k.b)(v,d,y,m),Object(k.a)(128*p,128),Object(k.b)(0,0,Object(w.b)(e.angle),e.colorLocked?1:0),e.effects)}},{key:"fromSimpleFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.color,a=i&&"esriSFSNull"!==e.style&&Object(M.d)(i)||0,o=Object(k.b)(0,0,0,n?255:0),s=e.materialKey;if(!t)return new r(s,null,a,0,0,0,0,o,null);var c=t.rect,u=t.width,l=t.height,h=c.x+O.q,f=c.y+O.q,d=h+u,v=f+l,y=Object(k.a)(h,f),m=Object(k.a)(d,v),p=Object(k.b)(Object(b.l)(d-h),Object(b.l)(v-f),0,0),_=Object(k.a)(128,128);return new r(s,t,a,y,m,p,_,o,null)}},{key:"fromPictureFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=O.p,a=t.rect,o=t.width,s=t.height,c=a.x+O.q,u=a.y+O.q,l=c+o,h=u+s,f=Object(k.a)(c,u),d=Object(k.a)(l,h),v=Object(b.l)(Object(g.h)(e.width));v>255&&(v=255);var y=Object(b.l)(Object(g.h)(e.height));y>255&&(y=255);var m=Object(g.h)(e.xoffset)+128;m>255&&(m=255);var p=Object(g.h)(-e.yoffset)+128;p>255&&(p=255);var _=Object(k.b)(v,y,m,p),x=Object(k.a)(128*e.xscale,128*e.yscale),j=Object(k.b)(0,0,0,n?255:0);return new r(e.materialKey,t,i,f,d,_,x,j,null)}}]),r}(ue(he.a)),Ee=n("yN2G"),Te=i.a.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),ze=function(e){d(r,e);var t=y(r);function r(e,n,i,a,o,s,c,u,h,f,d,v,y,m,p,_){var x;l(this,r),x=t.call(this);var b=j.c.load(e);return n&&(b.sdf=n.sdf,b.pattern=!0,b.textureBinding=n.textureBinding),x._capType=a,x._joinType=o,x._miterLimitCosine=Object(S.b)(s),x.tessellationProperties._fillColor=c,x.tessellationProperties._tl=u,x.tessellationProperties._br=h,x._hasPattern=f,x._isDashed=d,x._joinOnUTurn=p,x._isColorLocked=v,x._zOrder=m,x._effects=_,x._materialKey=b.data,x.tessellationProperties._bitset=v?1:0,x.tessellationProperties._halfWidth=.5*i,x.tessellationProperties._halfReferenceWidth=.5*y,x._initializeTessellator(!1),x}return f(r,null,[{key:"fromCIMLine",value:function(e,t,n){var i=e.color,a=e.scaleFactor||1,o=e.isDashed,s=e.cap;o&&1===s&&(s=2);var c=e.join,u=Object(g.h)(e.width)*a,l=Object(g.h)(e.referenceWidth),h=Object(g.h)(e.miterLimit),f=i&&Object(M.c)(i)||0;if(!t)return new r(e.materialKey,t,u,s,c,h,f,0,0,!1,o,e.colorLocked,l,e.zOrder,n,e.effects);var d=t.rect,v=t.width,y=t.height,m=d.x+O.q,p=d.y+O.q,_=m+v,x=p+y,b=Object(k.a)(m,p),j=Object(k.a)(_,x);return new r(e.materialKey,t,u,s,c,h,f,b,j,!0,o,e.colorLocked,l,e.zOrder,n,e.effects)}},{key:"fromSimpleLine",value:function(e,t,n){var i=e.color,a="esriSLSSolid"!==e.style&&"esriSLSNull"!==e.style,o=Object(Ee.h)(e.cap||"round",a),s=Object(Ee.i)(e.join||"round"),c=i&&"esriSLSNull"!==e.style&&Object(M.d)(i)||0;"esriSLSNull"===e.style&&(c=0);var u=Object(g.h)(e.width),l=e.miterLimit;if(!t)return new r(e.materialKey,t,u,o,s,l,c,0,0,!1,a,!1,u,0,n,null);var h=t.rect,f=t.width,d=t.height,v=h.x+O.q,y=h.y+O.q,m=v+f,p=y+d,_=Object(k.a)(v,y),x=Object(k.a)(m,p);return new r(e.materialKey,t,u,o,s,l,c,_,x,!0,a,!1,u,0,n,null)}},{key:"fromPictureLineSymbol",value:function(e,t,r,n){return Te.error("PictureLineSymbol support does not exist!"),null}}]),r}(_e(he.a)),Ie=i.a.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),We=new Array;function Ne(e,t){var r=e.length;return e.push(null),t.then((function(t){return e[r]=t})),e}function Ae(e){return!!(1&e)}var De=function(){function e(t,r){l(this,e),this._idCounter=1,this._templateIdCounter=1,this._idToTemplateGroup=new Map,this._symbolToTemplate=new Map,this._fetchQueue=[],this._idToResolver=new Map,this._cimTemplateCache=new Map,this._cimAnalyses=[],this._lock=new(function(){function e(){l(this,e),this._resolver=null}var t;return f(e,[{key:"isHeld",value:function(){return!!this._resolver}},{key:"acquire",value:(t=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._resolver){e.next=2;break}return e.abrupt("return",(this._resolver=Object(u.g)(),Promise.resolve()));case 2:return e.next=4,this._resolver.promise;case 4:return e.next=6,this.acquire();case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"release",value:function(){var e=this._resolver;this._resolver=null,e.resolve()}}]),e}()),this._fetchResource=t,this._joinOnUTurn=r}var r,n,i,s,d,y,m,b,g,O,k,j;return f(e,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}},{key:"createTemplateGroup",value:function(e,t){this._initErrorTemplates();var r=e.hash;if(this._symbolToTemplate.has(r))return this._symbolToTemplate.get(r);var n=new Array;t&&this._createMeshTemplates(n,t,!0),this._createMeshTemplates(n,e,!1);var i=this._createGroupId("expanded-cim"===e.type);return this._idToTemplateGroup.set(i,n),this._symbolToTemplate.set(r,i),i}},{key:"getTemplateGroup",value:function(e){return this._idToTemplateGroup.has(e)?this._idToTemplateGroup.get(e):We}},{key:"getDynamicTemplateGroup",value:function(e){return this._idToTemplateGroup.has(e)?(Ae(e)||Ie.error("mapview-template-store","Id ".concat(e," does not refer to a dynamic template")),this._idToTemplateGroup.get(e)):We}},{key:"getMosaicItem",value:function(e,t){var r=this,n=this._createTemplateId(),i=new Promise((function(e){return r._idToResolver.set(n,e)}));return this._fetchQueue.push({symbol:e,id:n,glyphIds:t}),i}},{key:"finalize",value:function(e){return this._fetchQueue.length||this._lock.isHeld()?(t=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.acquire();case 3:return e.next=5,r(n);case 5:t.release(),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),t.release(),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e,r,n){return t.apply(this,arguments)})(this._lock,this._fetchAllQueuedResources.bind(this),e):Promise.resolve();var t}},{key:"_initErrorTemplates",value:function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],Object(p.c)(h.c),!1),marker:this._createMeshTemplates([],Object(p.c)(h.b),!1),line:this._createMeshTemplates([],Object(p.c)(h.d),!1)})}},{key:"_fetchAllQueuedResources",value:function(e){var t=this;if(!this._fetchQueue.length)return Promise.resolve();var r=this._fetchQueue,n=this._cimAnalyses;return this._fetchQueue=[],this._cimAnalyses=[],Promise.all(n).then((function(){return t._fetchResource(r,e).then((function(e){var r,n=o(e);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.id,s=i.mosaicItem;t._idToResolver.get(a)(s),t._idToResolver.delete(a)}}catch(c){n.e(c)}finally{n.f()}}))})).catch((function(e){Object(u.m)(e)?t._fetchQueue=t._fetchQueue.concat(r):function(e){return"worker:port-closed"===e.name}(e)||Ie.error(new c.a("mapview-template-store","Unable to fetch requested texture resources",e))}))}},{key:"_createGroupId",value:function(e){return this._idCounter++<<1|(e?1:0)}},{key:"_createTemplateId",value:function(){return this._templateIdCounter++}},{key:"_createSMS",value:(j=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",Object(v.a)(n,Ie)?x.a.fromSimpleMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"_createPMS",value:(k=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",Object(v.a)(n,Ie)?x.a.fromPictureMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"_createSFS",value:(O=a(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return n=e.sent,i=n.spriteMosaicItem,e.abrupt("return",Object(v.a)(i,Ie)?Ce.fromSimpleFill(t,i,r):this._fillError);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return O.apply(this,arguments)})},{key:"_createPFS",value:(g=a(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return n=e.sent,i=n.spriteMosaicItem,e.abrupt("return",Object(v.a)(i,Ie)?Ce.fromPictureFill(t,i,r):this._fillError);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"_createSLS",value:(b=a(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return n=e.sent,i=n.spriteMosaicItem,e.abrupt("return",Object(v.a)(i,Ie)?ze.fromSimpleLine(t,i,this._joinOnUTurn):this._lineError);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"_createLMS",value:(m=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",Object(v.a)(n,Ie)?x.a.fromLineSymbolMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"_createTS",value:(y=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.glyphMosaicItems,e.abrupt("return",_.a.fromText(t,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"_createCIMText",value:(d=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t.cim,Object(Se.a)(t.text));case 2:return r=e.sent,n=r.glyphMosaicItems,e.abrupt("return",Object(v.a)(n,Ie)?_.a.fromCIMText(t,n):this._textError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"_createCIMFill",value:(s=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t.cim);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",Object(v.a)(n,Ie)?Ce.fromCIMFill(t,n):this._fillError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_createCIMLine",value:(i=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t.cim);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",Object(v.a)(n,Ie)?ze.fromCIMLine(t,n,this._joinOnUTurn):this._lineError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_createCIMMarker",value:(n=a(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t.cim);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",Object(v.a)(n,Ie)?x.a.fromCIMMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_createCIM",value:(r=a(regeneratorRuntime.mark((function e(r){var n,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.templateHash,!this._cimTemplateCache.has(n)){e.next=3;break}return e.abrupt("return",this._cimTemplateCache.get(n));case 3:i=t(t({},r),{},{cim:t(t({},r.cim),{},{mosaicHash:r.materialHash})}),e.t0=i.type,e.next="marker"===e.t0?7:"line"===e.t0?9:"fill"===e.t0?11:"text"===e.t0?13:14;break;case 7:return a=this._createCIMMarker(i),e.abrupt("break",14);case 9:return a=this._createCIMLine(i),e.abrupt("break",14);case 11:return a=this._createCIMFill(i),e.abrupt("break",14);case 13:a=this._createCIMText(i);case 14:return e.abrupt("return",(a.then((function(e){return o._cimTemplateCache.set(n,e)})),a));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_createDynamicCIM",value:function(e){var t,r=e.templateHash;if(this._cimTemplateCache.has(r))return this._cimTemplateCache.get(r);switch(e.type){case"marker":t=we.fromCIMMarker(e);break;case"line":t=xe.fromCIMLine(e);break;case"fill":t=ve.fromCIMFill(e);break;case"text":t=Le.fromCIMText(e)}return this._cimTemplateCache.set(r,t),t}},{key:"_createPrimitiveMeshTemplates",value:function(e,t,r){switch(t.type){case"esriSMS":return Ne(e,this._createSMS(t));case"esriPMS":return Ne(e,this._createPMS(t));case"esriSFS":return Ne(e,this._createSFS(t,r));case"line-marker":return Ne(e,this._createLMS(t));case"esriPFS":return Ne(e,this._createPFS(t,r));case"esriSLS":return Ne(e,this._createSLS(t,!1));case"esriTS":return Ne(e,this._createTS(t));default:return Ie.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),e}}},{key:"_createMeshTemplates",value:function(e,t,r){if(-1!==t.type.indexOf("3d"))return Ie.error("3D symbols are not supported with MapView"),e;if("expanded-cim"===t.type){var n,i=o(t.layers);try{for(i.s();!(n=i.n()).done;){var a=n.value;"function"==typeof a.materialHash?e.push(this._createDynamicCIM(a)):Ne(e,this._createCIM(a))}}catch(l){i.e(l)}finally{i.f()}return e}if("composite-symbol"===t.type){var s,c=o(t.layers);try{for(c.s();!(s=c.n()).done;){var u=s.value;this._createPrimitiveMeshTemplates(e,u,r)}}catch(l){c.e(l)}finally{c.f()}return e}return"cim"===t.type||"label"===t.type||"web-style"===t.type?e:this._createPrimitiveMeshTemplates(e,t,r)}}]),e}()},GqaZ:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("zlDU");function i(e,t){if(e&&"name"in e){var r=e;return t&&t.error(new n.a(r.name,r.message,r.details)),!1}return!0}},J3nV:function(e,t,r){"use strict";r.d(t,"a",(function(){return B})),r("wSAH");var n=r("srIe"),i=r("9MzC"),c=r("2AbE"),u=r("6S2I"),h=r("zlDU"),v=r("OKTS"),m=r("qRWG"),p=r("jIHu"),_=r("Mt1D"),x=r("0RS7"),b=r("yE7X"),g=r("m3fN"),O=r("GMaR"),k=r("qaIE"),j=r("aixI");function M(e){return e.length-1}function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=function(e,t){return e[t+1]}(e,t),i=s(n,2),a=i[0],o=i[1];return Math.sqrt(a*a+o*o)*r}var S=function(){function e(t,r,n,i,a){l(this,e),this._segments=t,this._index=r,this._distance=n,this._xStart=i,this._yStart=a,this._done=!1}return f(e,[{key:"clone",value:function(){return new e(this._segments,this._index,this._distance,this.xStart,this.yStart)}},{key:"equals",value:function(e){return this._index===e._index||e._index===this._index-1&&(0===this._distance||1===e._distance)||e._index===this._index+1&&(1===this._distance||0===e._distance)}},{key:"leq",value:function(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance}},{key:"geq",value:function(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance}},{key:"_segment",get:function(){return this._segments[this._index+1]}},{key:"angle",get:function(){var e=this.dy,t=Math.acos((0*e+-1*-this.dx)/(1*this.length));return e>0&&(t=2*Math.PI-t),t}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){var e=this.dx,t=this.dy;return Math.sqrt(e*e+t*t)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}},{key:"hasPrev",value:function(){return this._index-1>=0}},{key:"hasNext",value:function(){return this._index+1<M(this._segments)}},{key:"next",value:function(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}},{key:"prev",value:function(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}},{key:"_seekBackwards",value:function(e,t){var r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;for(var n=this.backwardLength;this.prev();){if(n+this.length>e)return this._seekBackwards(e-n);n+=this.length}return this._distance=0,t?this:null}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<0)return this._seekBackwards(Math.abs(e),t);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;for(var r=this.remainingLength;this.next();){if(r+this.length>e)return this.seek(e-r,t);r+=this.length}return this._distance=1,t?this:null}}],[{key:"create",value:function(t){return new e(t,0,0,t[0][0],t[0][1])}}]),e}();function R(e,t,r){var n=function(e){for(var t=0,r=0;r<M(e);r++)t+=w(e,r);return t}(e),i=S.create(e),a=n/2,o=Math.floor((n-t)/2/t);i.seek(a-o*t);for(var s=-o;s<=o;s++)i.x<512&&i.x>=0&&i.y<512&&i.y>=0&&r(i.clone(),s,a+s*t,n),i.seek(t)}function P(e,t){var r=1e-6;if(!(t<=0)){var n=e.length;if(!(n<3)){var i=[],a=0;i.push(0);for(var o=1;o<n;o++)a+=Object(j.a)(e[o],e[o-1]),i.push(a);t=Math.min(t,.2*a);var s=[];s.push(e[0][0]),s.push(e[0][1]);var c=e[n-1][0],u=e[n-1][1],l=Object(j.e)([0,0],e[0],e[1]);Object(j.d)(l),e[0][0]+=t*l[0],e[0][1]+=t*l[1],Object(j.e)(l,e[n-1],e[n-2]),Object(j.d)(l),e[n-1][0]+=t*l[0],e[n-1][1]+=t*l[1];for(var h=1;h<n;h++)i[h]+=t;i[n-1]+=t;for(var f=.5*t,d=1;d<n-1;d++){for(var v=0,y=0,m=0,p=d-1;p>=0&&!(i[p+1]<i[d]-f);p--){var _=f+i[p+1]-i[d],x=i[p+1]-i[p],b=i[d]-i[p]<f?1:_/x;if(Math.abs(b)<r)break;var g=b*b,O=b*_-.5*g*x,k=b*x/t,M=e[p+1],w=e[p][0]-M[0],S=e[p][1]-M[1];v+=k/O*(M[0]*b*_+.5*g*(_*w-x*M[0])-g*b*x*w/3),y+=k/O*(M[1]*b*_+.5*g*(_*S-x*M[1])-g*b*x*S/3),m+=k}for(var R=d+1;R<n&&!(i[R-1]>i[d]+f);R++){var P=f-i[R-1]+i[d],L=i[R]-i[R-1],C=i[R]-i[d]<f?1:P/L;if(Math.abs(C)<r)break;var E=C*C,T=C*P-.5*E*L,z=C*L/t,I=e[R-1],W=e[R][0]-I[0],N=e[R][1]-I[1];v+=z/T*(I[0]*C*P+.5*E*(P*W-L*I[0])-E*C*L*W/3),y+=z/T*(I[1]*C*P+.5*E*(P*N-L*I[1])-E*C*L*N/3),m+=z}s.push(v/m),s.push(y/m)}s.push(c),s.push(u);for(var A=0,D=0;A<n;A++)e[A][0]=s[D++],e[A][1]=s[D++]}}}var L,C=r("iegs"),E=u.a.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),T=(L=new Map,function(e){return L.has(e)||L.set(e,function(e){var t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t}(e)),L.get(e)}),z=function(e){return Math.floor(127*e+127)},I=function(e){return Math.floor(10*e)},W=function(e){return Math.round(e*(254/360))},N=function(e){d(r,e);var t=y(r);function r(e,n,i,a){var o;l(this,r),(o=t.call(this,e,i.font.size,i.haloSize||0,i.color&&Object(k.d)(i.color)||0,i.haloColor&&Object(k.d)(i.haloColor)||0,i.horizontalAlignment,i.verticalAlignment,Object(g.a)(n.labelPlacement)?1:0,i.font.decoration,!1,i.angle||0,i.xoffset,i.yoffset,i.lineWidth,i.lineHeight,null,null))._outLineLabelAngle=0,o._refPlacementPadding=0,o._refPlacementDirX=0,o._refPlacementDirY=0,o._refOffsetX=0,o._refOffsetY=0,o._zoomLevel=0,o.geometryType=b.d.LABEL;var c=function(e,t){var r=!!e.minScale&&t.scaleToZoom(e.minScale)||0;return Object(v.c)(r,0,25.5)}(n,a),u=function(e,t){var r=!!e.maxScale&&t.scaleToZoom(e.maxScale)||255;return Object(v.c)(r,0,25.5)}(n,a),h=n.labelPlacement,f=s(Object(_.b)(h),2),d=f[0],y=f[1];o._xAlignD=d,o._yAlignD=y,o._minZoom=c,o._maxZoom=u,o._refPlacementPadding=Object(m.h)(i.haloSize)+p.C;var x=O.b.load(e);return x.sdf=!0,o._materialKey=x.data,o}return f(r,[{key:"_shapedBox",get:function(){return Object(n.q)(this._shapingInfo).bounds}},{key:"setZoomLevel",value:function(e){this._zoomLevel=e}},{key:"bindReferenceTemplate",value:function(e){var t=Object(_.e)(this._xAlignD),r=Object(_.g)(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,Object(n.j)(e))this._refSymbolAndPlacementOffset=Object(x.b)(0,0,z(t),z(r));else{if("circle"===e.boundsType&&(t||r)){var i=Math.sqrt(t*t+r*r);t/=i,r/=i}var a=Math.max(e.height,e.width),o=4*this._refPlacementPadding;this._refSymbolAndPlacementOffset=Object(x.b)(o,a,z(t),z(r)),this._referenceSize=a,this._refPlacementDirX=t,this._refPlacementDirY=r,this._refOffsetX=e.xOffset,this._refOffsetY=e.yOffset}}},{key:"_write",value:function(e,t){if(!Object(n.j)(this._shapingInfo)){var r=this._shapingInfo,i=t.getDisplayId(),a="esriGeometryPolygon"===t.geometryType?t.readLegacyCentroid():t.readLegacyGeometry();if(a)switch(this.current={out:e,inId:i,inShaping:r,zoomLevel:this._zoomLevel},t.geometryType){case"esriGeometryPolyline":this._placeLineLabels(a);break;case"esriGeometryPoint":case"esriGeometryPolygon":this._placePointLabels(a);break;default:!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mapview-labeling";E.error(new h.a(t,"mapview-labeling"))}(0,"Geometry of type ".concat(t.geometryType," is not supported"))}}}},{key:"_isVisible",value:function(e,t){var r=I(this.current.zoomLevel);return I(e)<=r&&r<=I(t)}},{key:"_placePointLabels",value:function(e){var t=this.current,r=t.out,n=t.inId,i=t.inShaping;this._writeGlyphs(r,n,e,i)}},{key:"_placeLineLabels",value:function(e){var t,r=function(e,t){for(var r=t,n=0;n<e.length;n++){var i=e[n],a=[];a.push(i[0]);for(var o=1;o<i.length;o++){var c=s(a[o-1],2),u=c[0],l=c[1];u+=i[o][0],l+=i[o][1],a.push([u,l])}P(a,r);var h=[];h.push(a[0]);for(var f=1;f<a.length;f++){var d=s(a[f-1],2),v=d[0],y=d[1],m=s(a[f],2),p=m[0],_=m[1],x=Math.round(p-v),b=Math.round(_-y);h.push([x,b])}e[n]=h,i=h}return e}(e.paths,this.current.inShaping.bounds.width),n=this._placeSubdivGlyphs.bind(this),i=(this._shapedBox.width+128)/2,a=o(r);try{for(a.s();!(t=a.n()).done;){R(t.value,i,n)}}catch(c){a.e(c)}finally{a.f()}}},{key:"_placeSubdivGlyphs",value:function(e,t,r,n){var i=T(t),a=this._shapedBox.width/2,o=Math.min(r,n-r),s=Object(v.j)(o/(8+a/2)),c=0===t?s:Math.min(i,s),u=Math.max(this._minZoom,this.current.zoomLevel+1-c),l=this._shapedBox.width/2*Math.pow(2,this.current.zoomLevel-u);this.current.inShaping.isMultiline?0===t&&this._placeStraight(e,u):this._placeCurved(e,u,l)}},{key:"_placeStraight",value:function(e,t){var r=this.current,n=r.out,i=r.inId,a=r.inShaping;this._writeGlyphs(n,i,e,a,t)}},{key:"_placeCurved",value:function(e,t,r){var n=this.current,i=n.out,a=n.inId;i.metricStart(a,t,e.x,e.y,0,0,0,0);var o=e.clone(),s=e.angle*(180/Math.PI)%360,c=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=W(s),this._placeFirst(o,t,1),this._placeBack(e,o,t,r,1),this._placeForward(e,o,t,r,1),this._outLineLabelAngle=W(c),this._placeFirst(o,t,0),this._placeBack(e,o,t,r,0),this._placeForward(e,o,t,r,0),i.metricEnd()}},{key:"_placeBack",value:function(e,t,r,n,i){for(var a=e.clone(),o=e.backwardLength+0;a.prev()&&!(o>=n);)this._placeOnSegment(a,t,o,r,-1,i),o+=a.length+0}},{key:"_placeForward",value:function(e,t,r,n,i){for(var a=e.clone(),o=e.remainingLength+0;a.next()&&!(o>=n);)this._placeOnSegment(a,t,o,r,1,i),o+=a.length+0}},{key:"_placeFirst",value:function(e,t,r){var n,i=e,a=this.current.inShaping,s=a.glyphs,c=this.current.zoomLevel,u=this.current,l=u.out,h=u.inId,f=o(s);try{for(f.s();!(n=f.n()).done;){var d=n.value,y=d.x>a.bounds.x?r:1-r,m=y*e.remainingLength+(1-y)*e.backwardLength,p=Math.abs(d.x+d.width/2-a.bounds.x),_=Math.max(0,c+Object(v.j)(p/(m+0))),x=Math.max(t,_);if(d.maxZoom=25,d.angle=e.angle+(1-r)*Math.PI,d.minZoom=x,!(i.x<0||i.x>=512||i.y<0||i.y>=512)&&(this._writeGlyph(l,h,i.x,i.y,d),r&&this._isVisible(d.minZoom,d.maxZoom))){var b=d.bounds;l.metricBoxWrite(b.center[0],b.center[1],b.width,b.height)}}}catch(g){f.e(g)}finally{f.f()}}},{key:"_placeOnSegment",value:function(e,t,r,n,i,a){var s,c=this.current.inShaping.glyphs,u=this.current,l=u.out,h=u.inId,f=this.current.inShaping,d=this.current.zoomLevel,y={x:e.x+r*-i*(e.dx/e.length),y:e.y+r*-i*(e.dy/e.length)},m=o(c);try{for(m.s();!(s=m.n()).done;){var p=s.value,_=p.x>f.bounds.x?a:1-a;if(_&&1===i||!_&&-1===i){var x=Math.abs(p.x+p.width/2-f.bounds.x),b=Math.max(0,d+Object(v.j)(x/r)-.1),g=Math.max(n,d+Object(v.j)(x/(r+e.length+0)));if(0!==b&&(p.angle=e.angle+(1-a)*Math.PI,p.minZoom=g,p.maxZoom=b,!(y.x<0||y.x>=512||y.y<0||y.y>=512)&&(this._writeGlyph(l,h,y.x,y.y,p),a&&this._isVisible(p.minZoom,p.maxZoom)))){var O=p.bounds;l.metricBoxWrite(O.center[0]+(e.x-t.x),O.center[1]+(e.y-t.y),O.width,O.height)}}}}catch(k){m.e(k)}finally{m.f()}}},{key:"_writeGlyphs",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._minZoom;if(!(r.x<0||r.x>=512||r.y<0||r.y>=512)){var a,s=r.x+this._refOffsetX,c=r.y-this._refOffsetY,u=o(n.glyphs);try{for(u.s();!(a=u.n()).done;){var l=a.value;l.minZoom=i,l.maxZoom=this._maxZoom,this._writeGlyph(e,t,s,c,l)}}catch(d){u.e(d)}finally{u.f()}var h=O.b.load(this._materialKey),f=n.boundsT;e.metricStart(t,i,s,c,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,h.vvSizeFieldStops||h.vvSizeMinMaxValue||h.vvSizeScaleStops||h.vvSizeUnitValue?1:0),e.metricBoxWrite(f.center[0],f.center[1],f.width,f.height),e.metricEnd()}}},{key:"_writeVertexCommon",value:function(e,t,r,n){var i=this._color,a=this._haloColor,o=Object(x.b)(0,0,this._size,this._haloSize),s=Math.max(n.minZoom,this._minZoom),c=Math.min(n.maxZoom,this._maxZoom),u=Object(x.b)(I(s),I(c),this._outLineLabelAngle,0);e.vertexWrite(r),e.vertexWrite(t),e.vertexWrite(i),e.vertexWrite(a),e.vertexWrite(o),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(u)}}],[{key:"fromLabelClass",value:function(e,t){if("center-along"===e.labelPlacement){var n=e.symbol;n.xoffset=0,n.yoffset=0,n.angle=0,n.font.decoration="none"}return new r(e.materialKey,e,e.symbol,t)}}]),r}(C.a),A=r("qLV0"),D=r("Dw8i"),B=function(){function e(t,r,n){l(this,e),this._geometryType=t,this._idField=r,this._templateStore=n}var t,r;return f(e,[{key:"update",value:function(e,t){Object(n.k)(e.mesh.labels)&&this._setLabelTemplates(e.mesh.labels,t)}},{key:"_setLabelTemplates",value:function(e,t){this._labelTemplates=e.map((function(e){return N.fromLabelClass(e,t)}))}},{key:"templates",get:function(){return this._templateStore}},{key:"analyze",value:(r=a(regeneratorRuntime.mark((function e(t,r,a,s,u,l){var h,f,d,v,y,m,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(i.n)(l)){e.next=2;break}return e.abrupt("return");case 2:if(e.t0="dictionary"===r.type,!e.t0){e.next=7;break}return e.next=6,r.analyze(this._idField,t.copy(),s,u,l);case 6:h=e.sent;case 7:for(f=0;t.next();)if(d=h?h[f++]:Object(n.k)(a)&&Object(c.c)(t.getDisplayId())&&1!==t.readAttribute("cluster_count")?a.match(this._idField,t,this._geometryType,s,u):r.match(this._idField,t,this._geometryType,s,u),t.setGroupId(d),Object(D.b)(d)){v=this._templateStore.getDynamicTemplateGroup(d),y=o(v);try{for(y.s();!(m=y.n()).done;)(p=m.value)&&p.analyze&&p.analyze(this._templateStore,t,s,u)}catch(_){y.e(_)}finally{y.f()}}return e.abrupt("return",this._templateStore.finalize(l));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i,a,o){return r.apply(this,arguments)})},{key:"analyzeGraphics",value:(t=a(regeneratorRuntime.mark((function e(t,r,n,a,s){var c,u,l,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(i.n)(s)){e.next=2;break}return e.abrupt("return");case 2:if(c=t.getCursor(),e.t0=r,!e.t0){e.next=7;break}return e.next=7,r.analyze(this._idField,c.copy(),n,a,s);case 7:if(!c.next()){e.next=13;break}if(null!=(u=c.getGroupId())&&-1!==u||(u=r.match(this._idField,c,c.geometryType,n,a),c.setGroupId(u)),Object(D.b)(u)){l=this._templateStore.getDynamicTemplateGroup(u),h=o(l);try{for(h.s();!(f=h.n()).done;)(d=f.value)&&d.analyze&&d.analyze(this._templateStore,c,n,a)}catch(v){h.e(v)}finally{h.f()}}c.setGroupId(u);case 11:e.next=7;break;case 13:return e.abrupt("return",this._templateStore.finalize(s));case 14:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,a){return t.apply(this,arguments)})},{key:"writeGraphic",value:function(e,t){var r=t.getGroupId(),n=t.getDisplayId(),i=this._templateStore.getTemplateGroup(r);if(e.featureStart(t.insertAfter),null!=n){if(Object(D.b)(r)){var a,s=o(i);try{for(s.s();!(a=s.n()).done;){a.value.bindFeature(t,null,null)}}catch(h){s.e(h)}finally{s.f()}}if(i){var c,u=o(i);try{for(u.s();!(c=u.n()).done;){var l=c.value;l&&l.write(e,t)}}catch(h){u.e(h)}finally{u.f()}e.featureEnd()}}}},{key:"writeCursor",value:function(e,t,r,i,a,s){var c=t.getGroupId(),u=t.getDisplayId(),l=this._templateStore.getTemplateGroup(c);if(t.getObjectId(),null!=u&&l){if(Object(D.b)(c)){var h,f=o(l);try{for(f.s();!(h=f.n()).done;){h.value.bindFeature(t,r,i)}}catch(m){f.e(m)}finally{f.f()}}var d,v=o(l);try{for(v.s();!(d=v.n()).done;){d.value.write(e,t)}}catch(m){v.e(m)}finally{v.f()}if(Object(n.k)(s)&&e.hasRecords){var y=s&&this._findLabelRef(l);this._writeLabels(e,t,s,y,a)}}}},{key:"_findLabelRef",value:function(e){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n instanceof A.a)return n}}catch(i){r.e(i)}finally{r.f()}return null}},{key:"_writeLabels",value:function(e,t,r,i,a){var s,c=o(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(Object(n.k)(u)&&u){var l=u.glyphs,h=u.rtl,f=u.index,d=this._labelTemplates[f];d.setZoomLevel(a),d.bindReferenceTemplate(i),d.bindTextInfo(l,h),d.write(e,t)}}}catch(v){c.e(v)}finally{c.f()}}}]),e}()},MrbB:function(e,t,r){"use strict";function n(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}r.d(t,"a",(function(){return n}))},PeSW:function(e,t,r){"use strict";t.a=function(){function e(t,r){l(this,e),this._pos=0;var n=r?this._roundToNearest(r,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(n),this._buffer=new t(this._array),this._ctor=t,this._i16View=new Int16Array(this._array)}return f(e,[{key:"length",get:function(){return this._pos}},{key:"_roundToNearest",value:function(e,t){var r=Math.round(e);return r+(t-r%t)}},{key:"_ensureSize",value:function(e){if(this._pos+e>=this._buffer.length){var t=this._roundToNearest(1.5*(this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(t),n=new this._ctor(r);n.set(this._buffer,0),this._array=r,this._buffer=n,this._i16View=new Int16Array(this._array)}}},{key:"writeF32",value:function(e){this._ensureSize(1);var t=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=e,this._pos++,t}},{key:"push",value:function(e){this._ensureSize(1);var t=this._pos;return this._buffer[this._pos++]=e,t}},{key:"writeFixed",value:function(e){this._buffer[this._pos++]=e}},{key:"setValue",value:function(e,t){this._buffer[e]=t}},{key:"i1616Add",value:function(e,t,r){this._i16View[2*e]+=t,this._i16View[2*e+1]+=r}},{key:"getValue",value:function(e){return this._buffer[e]}},{key:"incr",value:function(e){if(this._buffer.length<e)throw new Error("Increment index overflows the target buffer");this._buffer[e]++}},{key:"decr",value:function(e){this._buffer[e]--}},{key:"writeRegion",value:function(e){this._ensureSize(e.length);var t=this._pos;return this._buffer.set(e,this._pos),this._pos+=e.length,t}},{key:"writeManyFrom",value:function(e,t,r){this._ensureSize(r-t);for(var n=t;n!==r;n++)this.writeFixed(e._buffer[n])}},{key:"buffer",value:function(){var e=this._array.slice(0,4*this._pos);return this.destroy(),e}},{key:"toArray",value:function(){for(var e=this._array,t=[],r=0;r<e.byteLength/4;r++)t.push(e[r]);return t}},{key:"seek",value:function(e){this._pos=e}},{key:"destroy",value:function(){this._array=null,this._buffer=null}}]),e}()},QFw1:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return h}));var n=r("qatw"),i=r("Du6U"),a=r("X4zr");function c(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?c(t[0]):null;case"CIMVectorMarker":var r=e.markerGraphics;if(!r||1!==r.length)return null;var n=r[0];if(!n)return null;var i=n.geometry;if(!i)return null;var a=n.symbol;return!a||"CIMPolygonSymbol"!==a.type&&"CIMLineSymbol"!==a.type?null:{geom:i,asFill:"CIMPolygonSymbol"===a.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function u(e){var t,r=1/0,n=-1/0,i=1/0,a=-1/0,s=o(e);try{for(s.s();!(t=s.n()).done;){var c,u=o(t.value);try{for(u.s();!(c=u.n()).done;){var l=c.value;l[0]<r&&(r=l[0]),l[0]>n&&(n=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1])}}catch(h){u.e(h)}finally{u.f()}}}catch(h){s.e(h)}finally{s.f()}return[r,i,n,a]}function l(e){return e?e.rings?u(e.rings):e.paths?u(e.paths):Object(n.d)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function h(e,t,r,n,i){var a=s(e,4),o=a[0],c=a[1],u=a[2],l=a[3];if(u<o||l<c)return[0,0,0];var h=u-o,f=l-c,d=Math.floor(31.5),v=(128-2*(d+1))/Math.max(h,f),y=Math.round(h*v)+2*d,m=Math.round(f*v)+2*d,p=1;t&&(p=m/v/(t.ymax-t.ymin));var _=0,x=0;return n&&(i?t&&r&&t.ymax-t.ymin>0&&(_=n.x/(r*((t.xmax-t.xmin)/(t.ymax-t.ymin))),x=n.y/r):(_=n.x,x=n.y)),_=.5*(t.xmax+t.xmin)+_*(t.xmax-t.xmin),x=.5*(t.ymax+t.ymin)+x*(t.ymax-t.ymin),_-=o,x-=c,_*=v,x*=v,[p,(_+=d)/y-.5,-((x+=d)/m-.5)]}function f(e){var t,r=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),n=function(e){var t,r=1/0,n=-1/0,a=1/0,s=-1/0,c=o(e);try{for(c.s();!(t=c.n()).done;){var u,l=o(t.value);try{for(l.s();!(u=l.n()).done;){var h=u.value;h[0]<r&&(r=h[0]),h[0]>n&&(n=h[0]),h[1]<a&&(a=h[1]),h[1]>s&&(s=h[1])}}catch(f){l.e(f)}finally{l.f()}}}catch(f){c.e(f)}finally{c.f()}return new i.a(r,a,n-r,s-a)}(r),a=Math.floor(31.5),c=(128-2*(a+1))/Math.max(n.width,n.height),u=Math.round(n.width*c)+2*a,l=Math.round(n.height*c)+2*a,h=[],f=o(r);try{for(f.s();!(t=f.n()).done;){var v=t.value;if(v&&v.length>1){var y,m=[],p=o(v);try{for(p.s();!(y=p.n()).done;){var _=s(y.value,2),x=_[0],b=_[1];x-=n.x,b-=n.y,x*=c,b*=c,x+=a-.5,b+=a-.5,m.push([x,b])}}catch(k){p.e(k)}finally{p.f()}if(e.asFill){var g=m.length-1;m[0][0]===m[g][0]&&m[0][1]===m[g][1]||m.push(m[0])}h.push(m)}}}catch(k){f.e(k)}finally{f.f()}var O=function(e,t,r,n){for(var i=t*r,a=new Array(i),s=n*n+1,c=0;c<i;++c)a[c]=s;var u,l=o(e);try{for(l.s();!(u=l.n()).done;)for(var h=u.value,f=h.length,d=1;d<f;++d){var v=h[d-1],y=h[d],m=void 0,p=void 0,_=void 0,x=void 0;v[0]<y[0]?(m=v[0],p=y[0]):(m=y[0],p=v[0]),v[1]<y[1]?(_=v[1],x=y[1]):(_=y[1],x=v[1]);var b=Math.floor(m)-n,g=Math.floor(p)+n,O=Math.floor(_)-n,j=Math.floor(x)+n;b<0&&(b=0),g>t&&(g=t),O<0&&(O=0),j>r&&(j=r);for(var M=y[0]-v[0],w=y[1]-v[1],S=M*M+w*w,R=b;R<g;R++)for(var P=O;P<j;P++){var L=void 0,C=void 0,E=(R-v[0])*M+(P-v[1])*w;E<0?(L=v[0],C=v[1]):E>S?(L=y[0],C=y[1]):(E/=S,L=v[0]+E*M,C=v[1]+E*w);var T=(R-L)*(R-L)+(P-C)*(P-C),z=(r-P-1)*t+R;T<a[z]&&(a[z]=T)}}}catch(k){l.e(k)}finally{l.f()}for(var I=0;I<i;++I)a[I]=Math.sqrt(a[I]);return a}(h,u,l,a);return e.asFill&&function(e,t,r,n,i){var a,s=o(e);try{for(s.s();!(a=s.n()).done;)for(var c=a.value,u=c.length,l=1;l<u;++l){var h=c[l-1],f=c[l],d=void 0,v=void 0,y=void 0,m=void 0;h[0]<f[0]?(d=h[0],v=f[0]):(d=f[0],v=h[0]),h[1]<f[1]?(y=h[1],m=f[1]):(y=f[1],m=h[1]);var p=Math.floor(d),_=Math.floor(v)+1,x=Math.floor(y),b=Math.floor(m)+1;p<n&&(p=n),_>t-n&&(_=t-n),x<n&&(x=n),b>r-n&&(b=r-n);for(var g=x;g<b;++g)if(h[1]>g!=f[1]>g){for(var O=(r-g-1)*t,j=p;j<_;++j)j<(f[0]-h[0])*(g-h[1])/(f[1]-h[1])+h[0]&&(i[O+j]=-i[O+j]);for(var M=n;M<p;++M)i[O+M]=-i[O+M]}}}catch(k){s.e(k)}finally{s.f()}}(h,u,l,a,O),[d(O,a),u,l]}function d(e,t){for(var r=2*t,n=e.length,i=new Uint8Array(4*n),o=0;o<n;++o){var s=.5-e[o]/r;Object(a.a)(s,i,4*o)}return i}},RNFe:function(e,t,r){"use strict";var n=r("srIe"),i=r("qRWG"),a=r("ZlUD"),c=r("jIHu"),u=r("0RS7"),h=r("G0q+"),v=r("yE7X"),m=r("GMaR"),p=r("5Bb1");t.a=function(e){return function(e){d(r,e);var t=y(r);function r(){var e;l(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._isCIM=!1,e._vertexBoundsScale=1,e.geometryType=v.d.TEXT,e._aux=Object(u.b)(0,0,e._referenceSize,e._bitset),e}return f(r,[{key:"bindTextInfo",value:function(e,t){var r=this;this._shapingInfo=e&&e.length?Object(n.b)(e,(function(e){return Object(h.a)(e,t,{scale:r._scale,angle:r._angle,xOffset:r._xOffset,yOffset:r._yOffset,hAlign:r._xAlignD,vAlign:r._yAlignD,maxLineWidth:Math.max(32,Math.min(r._lineWidth,512)),lineHeight:c.l*Math.max(.25,Math.min(r._lineHeight,4)),decoration:r._decoration,isCIM:r._isCIM})})):null}},{key:"_write",value:function(e,t,r){var n=t.getDisplayId();this._writeGeometry(e,t,n,r)}},{key:"_writeGeometry",value:function(e,t,r,i){var o=this,c=this._shapingInfo;if(!Object(n.j)(c)){if(Object(n.k)(this._textPlacement)){var u=null!=i?i:t.readLegacyGeometry();return this._writePlacedText(e,r,u,c)}var l=i?Object(a.p)(Object(a.d)(i),2):"esriGeometryPolygon"===t.geometryType?t.readCentroid():t.readUnquantizedGeometry();if(l){if(l.isPoint){var h=s(l.coords,2),f=h[0],d=h[1];return this._writeGlyphs(e,r,{x:f,y:d},c)}l.forEachVertex((function(t,n){return o._writeGlyphs(e,r,{x:t,y:n},c)}))}}}},{key:"_writePlacedText",value:function(e,t,r,a){var o=Object(n.q)(this._textPlacement),s=p.a.getPlacement(r,o,Object(i.h)(1));if(s)for(var c=s.next();null!=c;){var u=c.getAngle();a.setRotation(u),this._writeGlyphs(e,t,{x:c.tx,y:c.ty},a),a.setRotation(-u),c=s.next()}}},{key:"_writeGlyphs",value:function(e,t,r,n){var i,a=m.e.load(this._materialKey),s=Object(u.a)(Math.round(8*r.x),Math.round(8*r.y)),c=o(n.glyphs);try{for(c.s();!(i=c.n()).done;){var l=i.value;a.textureBinding=l.textureBinding,e.recordStart(t,a.data,this.geometryType,!1,!0);var h=l.bounds,f=this._vertexBoundsScale;e.vertexBounds(h.x*f,h.y*f,h.width*f,h.height*f),this._writeVertices(e,t,s,l),e.recordEnd()}}catch(d){c.e(d)}finally{c.f()}}},{key:"_writeGlyph",value:function(e,t,r,n,i){var a=m.e.load(this._materialKey),o=Object(u.a)(Math.round(8*r),Math.round(8*n));a.textureBinding=i.textureBinding,e.recordStart(t,a.data,this.geometryType,!1,!0);var s=i.bounds,c=this._vertexBoundsScale;e.vertexBounds(s.x*c,s.y*c,s.width*c,s.height*c),this._writeVertices(e,t,o,i),e.recordEnd()}},{key:"_writeVertices",value:function(e,t,r,n){var i=e.vertexCount();this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.upperLeft),e.vertexWrite(n.texcoords.upperLeft),e.vertexEnd(),this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.upperRight),e.vertexWrite(n.texcoords.upperRight),e.vertexEnd(),this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.lowerLeft),e.vertexWrite(n.texcoords.lowerLeft),e.vertexEnd(),this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.lowerRight),e.vertexWrite(n.texcoords.lowerRight),e.vertexEnd(),e.indexWrite(i+0),e.indexWrite(i+1),e.indexWrite(i+2),e.indexWrite(i+1),e.indexWrite(i+3),e.indexWrite(i+2)}},{key:"_writeVertexCommon",value:function(e,t,r,n){var i=this._color,a=this._haloColor,o=Object(u.b)(0,0,this._referenceSize,this._bitset),s=Object(u.b)(0,0,this._size,this._haloSize);e.vertexWrite(r),e.vertexWrite(t),e.vertexWrite(i),e.vertexWrite(a),e.vertexWrite(s),e.vertexWrite(o)}}]),r}(e)}},T8sT:function(e,r,n){"use strict";n.d(r,"a",(function(){return V})),n.d(r,"b",(function(){return k}));var i=n("s7YA"),c=n("6S2I"),u=n("gvqN"),l=n("nvBr"),h=n("qRWG"),f=n("NrhG"),d=n("ictz"),v=n("eT81"),y=n("QFw1"),m=c.a.getLogger("esri.symbols.cim.cimAnalyzer");function p(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function _(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function b(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function g(e,t,r,n){var i;e[t]?i=e[t]:(i={},e[t]=i),i[r]=n}function O(e){var t=e.markerPlacement;return t&&t.angleToLine?1:0}function k(e,t,r,n){return j.apply(this,arguments)}function j(){return(j=a(regeneratorRuntime.mark((function e(t,r,n,i){var a,s,c,l,h,f,d,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n||[],t){e.next=3;break}return e.abrupt("return",a);case 3:if(l={},"CIMSymbolReference"===t.type){e.next=6;break}return e.abrupt("return",(m.error("Expect cim type to be 'CIMSymbolReference'"),a));case 6:if(s=t.symbol,!(c=t.primitiveOverrides)){e.next=12;break}h=[],f=o(c);try{for(y=function(){var e=d.value,t=e.valueExpressionInfo;if(t&&r){var n=t.expression,i=Object(u.d)(n,r.spatialReference,r.fields).then((function(t){t&&g(l,e.primitiveName,e.propertyName,t)}));h.push(i)}else null!=e.value&&g(l,e.primitiveName,e.propertyName,e.value)},f.s();!(d=f.n()).done;)y()}catch(p){f.e(p)}finally{f.f()}return e.next=12,Promise.all(h);case 12:switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":!function(e,t,r,n,i,a){if(e){var o=e.symbolLayers;if(o){var s,c=v.a.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(s=1);for(var u=o.length;u--;){var l=o[u];if(l&&!1!==l.enable){var h=[];switch(v.b.findApplicableOverrides(l,t,h),l.type){case"CIMSolidFill":M(l,r,h,n,i);break;case"CIMPictureFill":w(l,r,h,n,i);break;case"CIMHatchFill":S(l,r,h,n,i);break;case"CIMGradientFill":R(l,r,h,n,i);break;case"CIMSolidStroke":P(l,r,h,n,i,"CIMPolygonSymbol"===e.type,c);break;case"CIMPictureStroke":L(l,r,h,n,i,"CIMPolygonSymbol"===e.type,c);break;case"CIMGradientStroke":C(l,r,h,n,i,"CIMPolygonSymbol"===e.type,c);break;case"CIMCharacterMarker":if(E(l,r,h,n,i))break;break;case"CIMPictureMarker":if(E(l,r,h,n,i))break;"CIMLineSymbol"===e.type&&(s=O(l)),T(l,r,h,n,i,s,c);break;case"CIMVectorMarker":if(E(l,r,h,n,i))break;"CIMLineSymbol"===e.type&&(s=O(l)),z(l,r,h,n,i,s,c,a);break;default:m.error("Cannot analyze CIM layer",l.type)}}}}}}(s,c,l,r,a,i)}return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,r,n,a){var o=e.primitiveName,s=Object(f.e)(e.color),c=Object(i.b)(JSON.stringify(e)).toString();a.push({type:"fill",templateHash:c,materialHash:0===r.length?c:function(){return c},cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:B(o,t,"Color",n,s,D),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function w(e,t,r,n,a){var o=e.primitiveName,s=e.tintColor?Object(f.e)(e.tintColor):{r:255,g:255,b:255,a:1},c=Object(i.b)(JSON.stringify(e)).toString(),u=Object(i.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString();a.push({type:"fill",templateHash:c,materialHash:0===r.length?u:function(){return u},cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:B(o,t,"TintColor",n,s,D),height:B(o,t,"Height",n,e.height),scaleX:B(o,t,"ScaleX",n,e.scaleX),angle:B(o,t,"Rotation",n,e.rotation),offsetX:B(o,t,"OffsetX",n,e.offsetX),offsetY:B(o,t,"OffsetY",n,e.offsetY)})}function S(e,t,r,n,a){var o=["Rotation","OffsetX","OffsetY"],s=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===o.indexOf(t.propertyName)})),c=e.primitiveName,u=Object(i.b)(JSON.stringify(e)).toString(),l=Object(i.b)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();a.push({type:"fill",templateHash:u,materialHash:0===r.length?l:F(l,t,s,n),cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:B(c,t,"Separation",n,e.separation),scaleX:1,angle:B(c,t,"Rotation",n,e.rotation),offsetX:B(c,t,"OffsetX",n,e.offsetX),offsetY:B(c,t,"OffsetY",n,e.offsetY)})}function R(e,t,r,n,a){var o=Object(i.b)(JSON.stringify(e)).toString();a.push({type:"fill",templateHash:o,materialHash:0===r.length?o:F(o,t,r,n),cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function P(e,t,r,n,a,o,s){var c=Object(i.b)(JSON.stringify(e)).toString(),u=e.primitiveName,l=Object(f.e)(e.color),h=void 0!==e.width?e.width:4,d=p(e.capStyle),v=_(e.joinStyle),y=e.miterLimit;a.push({type:"line",templateHash:c,materialHash:0===r.length?c:function(){return c},cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:B(u,t,"Color",n,l,D),width:B(u,t,"Width",n,h),cap:B(u,t,"CapStyle",n,d),join:B(u,t,"JoinStyle",n,v),miterLimit:B(u,t,"MiterLimit",n,y),referenceWidth:s,zOrder:A(e.name),isDashed:!1})}function L(e,t,r,n,a,o,s){var c=Object(i.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),u=e.primitiveName,l=Object(f.e)(e.tintColor),h=void 0!==e.width?e.width:4,d=p(e.capStyle),v=_(e.joinStyle),y=e.miterLimit,m=Object(i.b)(JSON.stringify(e)).toString();a.push({type:"line",templateHash:m,materialHash:0===r.length?c:function(){return c},cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:B(u,t,"TintColor",n,l,D),width:B(u,t,"Width",n,h),cap:B(u,t,"CapStyle",n,d),join:B(u,t,"JoinStyle",n,v),miterLimit:B(u,t,"MiterLimit",n,y),referenceWidth:s,zOrder:A(e.name),isDashed:!1})}function C(e,t,r,n,a,o,s){var c=e.primitiveName,u=void 0!==e.width?e.width:4,l=p(e.capStyle),h=_(e.joinStyle),f=e.miterLimit,d=Object(i.b)(JSON.stringify(e)).toString();a.push({type:"line",templateHash:d,materialHash:0===r.length?d:F(d,t,r,n),cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:B(c,t,"Width",n,u),cap:B(c,t,"CapStyle",n,l),join:B(c,t,"JoinStyle",n,h),miterLimit:B(c,t,"MiterLimit",n,f),referenceWidth:s,zOrder:A(e.name),isDashed:!1})}function E(e,t,r,n,a){var o=e.markerPlacement;if(!o||"CIMMarkerPlacementInsidePolygon"!==o.type)return!1;var s=o,c=["Rotation","OffsetX","OffsetY"],u=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName)})),l=Object(i.b)(JSON.stringify(e)).toString();return a.push({type:"fill",templateHash:l,materialHash:0===r.length?l:F(l,t,u,n),cim:e,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:B(s.primitiveName,t,"StepY",n,s.stepY),scaleX:1,angle:B(s.primitiveName,t,"GridAngle",n,s.gridAngle),offsetX:B(s.primitiveName,t,"OffsetX",n,s.offsetX),offsetY:B(s.primitiveName,t,"OffsetY",n,s.offsetY)}),!0}function T(e,t,r,n,a,s,c){var u,l=e.primitiveName,h=e.size,d=e.scaleX,v=e.rotation,y=e.offsetX,m=e.offsetY,p=Object(f.e)(e.tintColor),_=Object(i.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),x=!1,b="",g=o(r);try{for(g.s();!(u=g.n()).done;){var O=u.value;O.primitiveName===l&&(void 0!==O.value?b+="-".concat(O.primitiveName,"-").concat(O.propertyName,"-").concat(JSON.stringify(O.value)):O.valueExpressionInfo&&(x=!0))}}catch(k){g.e(k)}finally{g.f()}a.push({type:"marker",templateHash:Object(i.b)(JSON.stringify(e)+b).toString(),materialHash:x?function(){return _}:_,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:s,size:B(l,t,"Size",n,h),scaleX:B(l,t,"ScaleX",n,d),rotation:B(l,t,"Rotation",n,v),offsetX:B(l,t,"OffsetX",n,y),offsetY:B(l,t,"OffsetY",n,m),color:B(l,t,"TintColor",n,p,D),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:c,sizeRatio:1,markerPlacement:e.markerPlacement})}function z(e,t,r,n,i,a,s,c){var u=e.markerGraphics;if(u){var l=0;if(e.scaleSymbolsProportionally){var h=e.frame;h&&(l=h.ymax-h.ymin)}var f,d=o(u);try{for(d.s();!(f=d.n()).done;){var v=f.value;if(v){var y=v.symbol;if(!y)continue;switch(y.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":W(e,v,r,t,n,i,a,s,l,c);break;case"CIMTextSymbol":I(e,v,t,r,n,i,a,s,l)}}}}catch(m){d.e(m)}finally{d.f()}}}function I(e,r,n,a,s,c,u,l,h){v.b.findApplicableOverrides(r,a,[]);var d=r.geometry;if("x"in d&&"y"in d){var y,m=r.symbol,p=(y=m).underline?"underline":y.strikethrough?"line-through":"none",_=function(e){var t="normal",r="normal";if(e){var n=e.toLowerCase();-1!==n.indexOf("italic")?t="italic":-1!==n.indexOf("oblique")&&(t="oblique"),-1!==n.indexOf("bold")?r="bold":-1!==n.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}(m.fontStyleName);m.font=t({family:m.fontFamilyName,decoration:p},_);var g=e.frame,O=e.size/h,k=e.primitiveName,j=(m.height||0)*O,M=m.angle||0,w=((m.offsetX||0)+(d.x-.5*(g.xmin+g.xmax)))*O,S=((m.offsetY||0)+(d.y-.5*(g.ymin+g.ymax)))*O,R=Object(f.e)(v.a.getFillColor(m)),P=Object(f.e)(v.a.getStrokeColor(m)),L=v.a.getStrokeWidth(m);L||(P=Object(f.e)(v.a.getFillColor(m.haloSymbol)),L=m.haloSize*O);var C,E="",T=o(a);try{for(T.s();!(C=T.n()).done;){var z=C.value;z.primitiveName===k&&void 0!==z.value&&(E+="-".concat(z.primitiveName,"-").concat(z.propertyName,"-").concat(JSON.stringify(z.value)))}}catch(N){T.e(N)}finally{T.f()}var I=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),W=Object(i.b)(JSON.stringify(r)+I+E).toString();c.push({type:"text",templateHash:W,materialHash:function(){return Object(i.b)(JSON.stringify(m.font)).toString()},cim:m,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:u,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:m.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:B(k,n,"Size",s,j),angle:B(k,n,"Rotation",s,M),offsetX:B(k,n,"OffsetX",s,w),offsetY:B(k,n,"OffsetY",s,S),horizontalAlignment:x(m.horizontalAlignment),verticalAlignment:b(m.verticalAlignment),text:B(r.primitiveName,n,"TextString",s,r.textString,f.a,m.textCase),color:R,outlineColor:P,outlineSize:L,referenceSize:l,sizeRatio:1,markerPlacement:e.markerPlacement})}}function W(e,r,n,a,c,u,l,h,d,m){var p=r.geometry;if(p){var _=r.symbol.symbolLayers;if(_)if(m)N(e,r,a,n,c,u,l,h,d);else for(var x=_.length;x--;){var b=_[x];if(b&&!1!==b.enable)switch(b.type){case"CIMSolidFill":case"CIMSolidStroke":var g=function(){var m=Object(y.b)(p);if(!m)return"continue";var _=s(Object(y.d)(m,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),3),x=_[0],g=_[1],O=_[2],k="CIMSolidFill"===b.type,j={type:"sdf",geom:p,asFill:k},M=e.primitiveName,w=e.size,S=e.rotation||0,R=e.offsetX,P=e.offsetY,L=b.primitiveName,C=Object(f.e)(k?v.a.getFillColor(b):v.a.getStrokeColor(b)),E=k?{r:0,g:0,b:0,a:0}:Object(f.e)(v.a.getStrokeColor(b)),T=v.a.getStrokeWidth(b);if(!k&&!T)return"break";var z,I=!1,W="",N=o(n);try{for(N.s();!(z=N.n()).done;){var A=z.value;A.primitiveName!==L&&A.primitiveName!==M||(void 0!==A.value?W+="-".concat(A.primitiveName,"-").concat(A.propertyName,"-").concat(JSON.stringify(A.value)):A.valueExpressionInfo&&(I=!0))}}catch(X){N.e(X)}finally{N.f()}var F=JSON.stringify(t(t({},e),{},{markerGraphics:null})),V=Object(i.b)(JSON.stringify(j)).toString(),G={type:"marker",templateHash:Object(i.b)(JSON.stringify(r)+JSON.stringify(b)+F+W).toString(),materialHash:I?function(){return V}:V,cim:j,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:g,y:O},isAbsoluteAnchorPoint:!1,size:B(e.primitiveName,a,"Size",c,w),rotation:B(e.primitiveName,a,"Rotation",c,S),offsetX:B(e.primitiveName,a,"OffsetX",c,R),offsetY:B(e.primitiveName,a,"OffsetY",c,P),scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:x,color:B(L,a,"Color",c,C,D),outlineColor:B(L,a,"Color",c,E,D),outlineWidth:B(L,a,"Width",c,T),markerPlacement:e.markerPlacement};return u.push(G),"break"}();if("continue"===g)continue;if("break"===g)break;default:N(e,r,a,n,c,u,l,h,d)}}}}function N(e,t,r,n,a,c,u,l,f){var d,y=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(e,t),m=["Rotation","OffsetX","OffsetY"];d=n.filter((function(t){return t.primitiveName!==e.primitiveName||-1===m.indexOf(t.propertyName)}));var p,_="",x=o(n);try{for(x.s();!(p=x.n()).done;){var b=p.value;void 0!==b.value&&(_+="-".concat(b.primitiveName,"-").concat(b.propertyName,"-").concat(JSON.stringify(b.value)))}}catch(C){x.e(C)}finally{x.f()}var g=s(v.a.getTextureAnchor(y),3),O=g[0],k=g[1],j=g[2],M=e.primitiveName,w=e.rotation||0,S=e.offsetX||0,R=e.offsetY||0,P=Object(i.b)(JSON.stringify(y)+_).toString(),L={type:"marker",templateHash:P,materialHash:0===d.length?P:F(P,r,d,a),cim:y,materialOverrides:d,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:O,y:k},isAbsoluteAnchorPoint:!1,size:e.size,rotation:B(M,r,"Rotation",a,w),offsetX:B(M,r,"OffsetX",a,S),offsetY:B(M,r,"OffsetY",a,R),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:f,rotateClockwise:e.rotateClockwise,referenceSize:l,sizeRatio:j/Object(h.h)(e.size),markerPlacement:e.markerPlacement};c.push(L)}function A(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function D(e){if(!e||0===e.length)return null;var t=new l.a(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function B(e,t,r,n,i,a,o){var s=t[e];if(s){var c=s[r];if("string"==typeof c||"number"==typeof c||c instanceof Array)return a?a.call(null,c,o):c;if(null!=c&&c instanceof u.a)return function(e,t,r){var s=Object(d.a)(c,e,{$view:r},n.geometryType,t);return null!==s&&a&&(s=a.call(null,s,o)),null!==s?s:i}}return i}function F(e,t,r,n){var a,s=o(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.valueExpressionInfo&&function(){var e=t[c.primitiveName]&&t[c.primitiveName][c.propertyName];e instanceof u.a&&(c.fn=function(t,r,i){return Object(d.a)(e,t,{$view:i},n.geometryType,r)})}()}}catch(l){s.e(l)}finally{s.f()}return function(t,n,a){var s,c=o(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.fn&&(u.value=u.fn(t,n,a))}}catch(l){c.e(l)}finally{c.f()}return Object(i.b)(e+v.b.buildOverrideKey(r)).toString()}}function V(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return v.b.applyOverrides(r,t),r}},VIer:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var n=r("jIHu"),i=r("yE7X"),a=new Map;function o(e){return a.get(e)}function s(e,t,r){var i=a.get(e),o=i.indicesPerRecord,s=i.multiplier,c=i.verticesPerRecord;return{recordBytes:r*n.f*Uint32Array.BYTES_PER_ELEMENT,indexBytes:s*o*r*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:s*c*r*t}}a.set(i.d.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4}),a.set(i.d.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8}),a.set(i.d.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10}),a.set(i.d.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4}),a.set(i.d.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4})},ZxoT:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r("3cLA"),i=(r("H9eC"),r("T8sT")),s=r("yE7X"),c=r("GMaR"),u={marker:s.d.MARKER,fill:s.d.FILL,line:s.d.LINE,text:s.d.TEXT},h=function(){function e(t,r,n,i){l(this,e),this.layers=t,this.data=r,this.hash=this._createHash(),this.rendererKey=n;var a,s=o(t);try{for(s.s();!(a=s.n()).done;){var h=a.value,f=u[h.type];h.materialKey=Object(c.g)(f,this.rendererKey,!1,!1),h.maxVVSize=i}}catch(d){s.e(d)}finally{s.f()}}return f(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,t="",r=o(this.layers);try{for(r.s();!(e=r.n()).done;){t+=e.value.templateHash}}catch(n){r.e(n)}finally{r.f()}return t}}]),e}(),d=function(){var e=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,Object(i.b)(t.data,r);case 3:return e.t1=e.sent,e.t2=t.data,e.t3=t.rendererKey,e.t4=t.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=a(regeneratorRuntime.mark((function e(t,r,i){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==t.type){e.next=4;break}return e.abrupt("return",d(t,r));case 4:if("web-style"!==t.type){e.next=13;break}return a=n.a.fromJSON(t),e.next=8,a.fetchCIMSymbol(i);case 8:return e.t0=e.sent.data,e.t1=t.rendererKey,e.t2=t.maxVVSize,o={type:"cim",data:e.t0,rendererKey:e.t1,maxVVSize:e.t2},e.abrupt("return",d(o,r));case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},acOm:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("rlSK"),a=n("jIHu"),o=(n("Pns9"),n("AY31"),n("B81a"),n("0wLv"),n("yE7X")),s=n("yN2G"),c=n("VIer"),u=n("PeSW"),h=function(){function e(t,r,n){l(this,e),this._start={index:0,vertex:0};var i=Object(c.b)(t,r,n),a=r/4;this.geometryType=t,this._records=new u.a(Int32Array,i.recordBytes),this._indices=new u.a(Uint32Array,i.indexBytes),this._vertices=new u.a(Uint32Array,i.vertexBytes),this._metrics=new u.a(Float32Array,0),this._strideInt=a}return f(e,[{key:"serialize",value:function(e){var t=this._records.buffer(),r=this._indices.buffer(),n=this._vertices.buffer(),i=this._metrics.length?this._metrics.buffer():null,a=4*this._strideInt;return e.push(t,r,n),{stride:a,records:t,indices:r,vertices:n,metrics:i}}},{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/a.f}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}},{key:"recordStart",value:function(){this._start.index=this._indices.length,this._start.vertex=this._vertices.length}},{key:"recordEnd",value:function(e,t,r,n,i,a,o){this._records.push(e),this._records.push(t),this._records.push(r),this._records.push(n),this._records.push(i),this._records.push(a),this._records.push(o)}},{key:"writeIndex",value:function(e){this._indices.push(e)}},{key:"writeVertex",value:function(e){this._vertices.push(e)}},{key:"writeVertexF32",value:function(e){this._vertices.writeF32(e)}},{key:"copyLastFrom",value:function(e,t,r){for(var n=e._records.length-7,i=e._records.getValue(n),a=e._records.getValue(n+1),o=e._records.getValue(n+2),s=e._records.getValue(n+4),c=e._records.getValue(n+6),u=this._vertices.length,l=(e._start.vertex-this._vertices.length)/this._strideInt,h=this._indices.length,f=this.vertexCount,d=e._start.index;d!==e._indices.length;d++){var v=e._indices.getValue(d);this._indices.push(v-l)}for(var y=e._start.vertex;y!==e._vertices.length;y++){var m=e._vertices.getValue(y);this._vertices.push(m)}for(var p=u;p<=this._vertices.length;p+=this._strideInt)this._vertices.i1616Add(p,t,r);this._records.push(i),this._records.push(a),this._records.push(o),this._records.push(h),this._records.push(s),this._records.push(f),this._records.push(c)}}]),e}(),d=n("2AbE"),v=n("oBXe");function y(e){switch(e){case 1:case 8:case 32:return-1;case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function m(e){switch(e){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}var p=function(){function e(t,r,n,i,a){l(this,e),this._hasDotDensity=!1,this._hasAggregate=!1,this.hasRecords=!1,this._data={self:new Map,neighbors:new Array},this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,id:0,materialKey:0,indexStart:0,vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0},this.hint=r,this.tileKey=t,this._hasDotDensity=n,this._hasAggregate=i,this._pixelBufferEnabled=a}return f(e,[{key:"hasAggregates",get:function(){return this._hasAggregate}},{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}},{key:"serialize",value:function(e){var t=this,r=[];return r.push(this._serializeTileVertexData(this.tileKey,this._data.self)),this._data.neighbors.forEach((function(n,a){var o=1<<a,s=y(o),c=m(o),u=Object(v.a)(new i.a(t.tileKey),s,c,e);r.push(t._serializeTileVertexData(u.id,n))})),r}},{key:"_serializeTileVertexData",value:function(e,t){var n,i,a,s,c,u,l=new Array;return{message:{tileKey:e,data:(n={},r(n,o.d.MARKER,null==(i=t.get(o.d.MARKER))?void 0:i.serialize(l)),r(n,o.d.FILL,null==(a=t.get(o.d.FILL))?void 0:a.serialize(l)),r(n,o.d.LINE,null==(s=t.get(o.d.LINE))?void 0:s.serialize(l)),r(n,o.d.TEXT,null==(c=t.get(o.d.TEXT))?void 0:c.serialize(l)),r(n,o.d.LABEL,null==(u=t.get(o.d.LABEL))?void 0:u.serialize(l)),n)},transferList:l}}},{key:"featureStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._current.insertAfter=e}},{key:"featureEnd",value:function(){}},{key:"recordStart",value:function(e,t,r,n,i){this._current.writer=this._getVertexWriter(r,n),this._current.overlaps=0,this._current.indexStart=this._current.writer.indexCount,this._current.vertStart=this._current.writer.vertexCount,this._current.bufferingEnabled=i,this._current.id=e,this._current.materialKey=t,this._current.geometryType=r,this._current.isDotDensity=!1,this._current.writer.recordStart()}},{key:"recordCount",value:function(){return this._current.writer.recordCount}},{key:"vertexCount",value:function(){return this._current.writer.vertexCount}},{key:"indexCount",value:function(){return this._current.writer.indexCount}},{key:"vertexBounds",value:function(e,t,r,n){this._current.bufferingEnabled&&this._addOverlap(e,t,r,n)}},{key:"vertexWrite",value:function(e){this._current.writer.writeVertex(e)}},{key:"vertexWriteF32",value:function(e){this._current.writer.writeVertexF32(e)}},{key:"vertexEnd",value:function(){}},{key:"vertexWriter",value:function(){return this._current.writer.vertexWriter}},{key:"indexWrite",value:function(e){this._current.writer.writeIndex(e)}},{key:"indexWriter",value:function(){return this._current.writer.indexWriter}},{key:"metricWriter",value:function(){return this._current.writer.metricWriter}},{key:"metricStart",value:function(e,t,r,n,i,a,s,c){this._current.writer=this._getVertexWriter(o.d.LABEL,!1);var u=this._current.writer.metricWriter;u.push(Object(d.b)(e)),u.push(t),u.push(r),u.push(n),u.push(i),u.push(a),u.push(s),u.push(c),u.push(255),this._current.metricBoxLenPointer=u.push(0)}},{key:"metricEnd",value:function(){var e=this._current.writer.metricWriter;0===e.getValue(this._current.metricBoxLenPointer)&&e.seek(e.length-10)}},{key:"metricBoxWrite",value:function(e,t,r,n){var i=this._current.writer.metricWriter;i.incr(this._current.metricBoxLenPointer),i.push(0),i.push(0),i.push(e),i.push(t),i.push(r),i.push(n)}},{key:"recordEnd",value:function(){var e=this._current.indexStart,t=this._current.writer.indexCount;if(e===t)return!1;this.hasRecords=!0;var r=this._current.vertStart;if(this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,e,t-e,r,this._current.writer.vertexCount-r),!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===o.d.LABEL)return!0;for(var n=this._current.writer,i=0;i<8;i++){var c=1<<i;if(this._current.overlaps&c){if(!this._data.neighbors[i]){var u=new Map;this._data.neighbors[i]=u}var l=this._data.neighbors[i],f=this._current.geometryType;if(!l.has(f)){var d=Object(s.l)(f,this._current.isDotDensity).geometry;l.set(f,new h(f,d,a.o))}var v=l.get(this._current.geometryType),p=512*-y(c)*8,_=512*-m(c)*8;v.copyLastFrom(n,p,_)}}return!0}},{key:"_addOverlap",value:function(e,t,r,n){this._current.overlaps|=255^((e<0+r?148:e>=a.E-r?41:189)|(t<0+n?224:t>=a.E-n?7:231))}},{key:"_getVertexWriter",value:function(e,t){if(!this._data.self.has(e)){var r=this._data.self,n=Object(s.l)(e,this._hasDotDensity).geometry;r.set(e,new h(e,n,8e3))}return this._data.self.get(e)}}]),e}()},ictz:function(e,r,n){"use strict";var i=n("6S2I"),a=n("zlDU"),o=n("AIxD"),s=new Map;function c(e,r,n){var c=n.transform,u=n.hasZ,l=n.hasM;s.has(r)||s.set(r,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,n,i){return Object(o.e)(r,t,e,n,i)};case"esriGeometryPolygon":return function(e,r,n,i){return Object(o.f)(r,t,e,n,i)};case"esriGeometryPolyline":return function(e,r,n,i){return Object(o.g)(r,t,e,n,i)};case"esriGeometryMultipoint":return function(e,r,n,i){return Object(o.d)(r,t,e,n,i)};default:return i.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new a.a("mapview-arcade","Unable to handle geometryType: "+e)),function(e){return e}}}(r));var h=s.get(r)(e.geometry,c,u,l);return t(t({},e),{},{geometry:h})}r.a=function(e,r,n,a,o){var s=e.referencesGeometry()&&o?c(r,a,o):r,u=e.repurposeFeature(s);try{return e.evaluate(t(t({},n),{},{$feature:u}))}catch(l){return i.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}},iegs:function(e,t,r){"use strict";var n=r("qRWG"),i=r("Mt1D"),a=r("t7mB"),o=r("GMaR"),c=r("qaIE"),u=r("RNFe"),h=r("916D"),v=function(e){d(r,e);var t=y(r);function r(e,a,s,c,u,h,f,d,v,y,m,p,_,x,b,g,O){var k,j=arguments.length>17&&void 0!==arguments[17]&&arguments[17];l(this,r),(k=t.call(this))._xOffset=Object(n.h)(p),k._yOffset=Object(n.h)(_),k._decoration=v||"none",k._color=c,k._haloColor=u,k._haloSize=Math.min(Math.floor(5*Object(n.h)(Object(n.k)(s))),127),k._size=Math.min(Math.round(Object(n.h)(a)),127);var M=Math.min(Math.round(Object(n.h)(a)),127);k._referenceSize=Math.round(Math.sqrt(256*M)),k._scale=k._size/24,k._angle=m,k._justify=Object(i.c)(h||"center"),k._xAlignD=Object(i.d)(h||"center"),k._yAlignD=Object(i.f)(f||"baseline"),k._baseline="baseline"===(f||"baseline"),k._bitset=(1===d?1:0)|(y?1:0)<<1;var w=o.e.load(e);return w.sdf=!0,k._materialKey=w.data,k._lineWidth=Object(n.h)(x)||512,k._lineHeight=b||1,k._textPlacement=g,k._effects=O,k._isCIM=j,k}return f(r,null,[{key:"fromText",value:function(e,t){var n=new r(e.materialKey,e.font.size,e.haloSize||0,e.color&&Object(c.d)(e.color)||0,e.haloColor&&Object(c.d)(e.haloColor)||0,e.horizontalAlignment,e.verticalAlignment,0,e.font.decoration,!1,e.angle||0,e.xoffset,e.yoffset,e.lineWidth,e.lineHeight,null,null,!1),i=s(Object(a.a)(e.text),2)[1];return n.bindTextInfo(t,i),n._vertexBoundsScale=e.maxVVSize?e.maxVVSize/e.font.size:1,n}},{key:"fromCIMText",value:function(e,t){var n=e.scaleFactor||1,i=e.size*e.sizeRatio*n,o=new r(e.materialKey,i,e.outlineSize*e.sizeRatio,Object(c.c)(e.color),Object(c.c)(e.outlineColor),e.horizontalAlignment,e.verticalAlignment,e.alignment,e.decoration,e.colorLocked,e.angle,e.offsetX*e.sizeRatio*n,e.offsetY*e.sizeRatio*n,512,1,e.markerPlacement,e.effects,!0),u=s(Object(a.a)(e.text),2)[1];return o.bindTextInfo(t,u),o._vertexBoundsScale=e.maxVVSize?e.maxVVSize/i:1,o}}]),r}(Object(u.a)(h.a));t.a=v},n21L:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("srIe"),i=r("jIHu"),a=2147483647,o=function(){function e(t){l(this,e),this._head=t,this._cursor=t}return f(e,[{key:"size",value:function(){var e,t;return null!=(e=null==(t=this._cursor)?void 0:t.size())?e:0}},{key:"id",get:function(){return this._cursor.id},set:function(e){this._cursor.id=e}},{key:"materialKey",get:function(){return this._cursor.materialKey},set:function(e){this._cursor.materialKey=e}},{key:"insertAfter",get:function(){return this._cursor.insertAfter}},{key:"indexFrom",get:function(){return this._cursor.indexFrom},set:function(e){this._cursor.indexFrom=e}},{key:"indexCount",get:function(){return this._cursor.indexCount},set:function(e){this._cursor.indexCount=e}},{key:"vertexFrom",get:function(){return this._cursor.vertexFrom},set:function(e){this._cursor.vertexFrom=e}},{key:"vertexCount",get:function(){return this._cursor.vertexCount},set:function(e){this._cursor.vertexCount=e}},{key:"index",get:function(){return this._cursor._index}},{key:"link",value:function(e){if(this._head){for(var t=this._head;t._link;)t=t._link;t._link=e._head}else this._head=e._head}},{key:"getCursor",value:function(){return this.copy()}},{key:"lookup",value:function(e){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(e);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor}},{key:"copy",value:function(){var t,r=new e(null==(t=this._head)?void 0:t.copy());if(!r._head)return r;for(var n=r._head,i=r._head._link;i;)n._link=i.copy(),i=(n=i)._link;return r}},{key:"next",value:function(){return!!this._cursor&&(!!this._cursor.next()||!!this._cursor._link&&(this._cursor=this._cursor._link,this.next()))}},{key:"peekId",value:function(){var e;return null!=(e=this._cursor.peekId())?e:this._cursor._link.peekId()}},{key:"delete",value:function(e){for(var t=this._head,r=null;t;){if(t.delete(e))return t.isEmpty()&&(Object(n.k)(r)&&(r._link=t._link),t===this._head&&(this._head=t._link),t===this._cursor&&(this._cursor=t._link)),!0;r=t,t=t._link}return!1}}],[{key:"from",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength/s.BYTES_PER_RECORD-r,i=new s(new Int32Array(t,r*s.BYTES_PER_RECORD,n*s.ELEMENTS_PER_RECORD));return new e(i)}}]),e}();o.ELEMENTS_PER_RECORD=i.f,o.BYTES_PER_RECORD=o.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;var s=function(){function e(t){l(this,e),this._link=null,this._index=-1,this._deletedCount=0,this._offsets={instance:null},this._packedRecords=t}return f(e,[{key:"delete",value:function(e){var t=this._index,r=this.lookup(e);if(r)for(this.id=a,++this._deletedCount;this.next()&&this.id===e;)this.id=a,++this._deletedCount;return this._index=t,r}},{key:"isEmpty",value:function(){return this._deletedCount===this.size()}},{key:"link",value:function(e){this._link?this._link.link(e):this._link=e}},{key:"lookup",value:function(e){if(Object(n.j)(this._offsets.instance)){this._offsets.instance=new Map;var t=this.copy();t._index=-1;for(var r=0;t.next();)t.id!==r&&(this._offsets.instance.set(t.id,t._index),r=t.id)}if(!this._offsets.instance.has(e))return!1;var i=this._index;return this._index=this._offsets.instance.get(e),this.id!==a||(this._index=i,!1)}},{key:"id",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD]=t}},{key:"materialKey",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+1]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+1]=t}},{key:"insertAfter",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+2]}},{key:"indexFrom",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+3]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+3]=t}},{key:"indexCount",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+4]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+4]=t}},{key:"vertexFrom",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+5]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+5]=t}},{key:"vertexCount",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+6]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+6]=t}},{key:"index",get:function(){return this._index}},{key:"size",value:function(){return this._packedRecords.length/e.ELEMENTS_PER_RECORD}},{key:"next",value:function(){for(;++this._index<this.size()&&this.id===a;);return this._index<this.size()}},{key:"peekId",value:function(){var t=(this._index+1)*e.ELEMENTS_PER_RECORD;return t>=this._packedRecords.length?0:this._packedRecords[t]}},{key:"getCursor",value:function(){return this.copy()}},{key:"copy",value:function(){var t=new e(this._packedRecords);return t._link=this._link,t._index=this._index,t._offsets=this._offsets,t._deletedCount=this._deletedCount,t}}],[{key:"from",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength/this.BYTES_PER_RECORD-r;return new e(new Int32Array(t,r*this.BYTES_PER_RECORD,n*this.ELEMENTS_PER_RECORD))}}]),e}();s.ELEMENTS_PER_RECORD=i.f,s.BYTES_PER_RECORD=s.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT},oBXe:function(e,t,r){"use strict";function n(e,t,r,n){var i=e.clone(),a=1<<i.level,o=i.col+t,s=i.row+r;return n&&o<0?(i.col=o+a,i.world-=1):o>=a?(i.col=o-a,i.world+=1):i.col=o,i.row=s,i}r.d(t,"a",(function(){return n})),r("7g5W")},qLV0:function(e,t,r){"use strict";var n=r("srIe"),i=r("qRWG"),a=r("jIHu"),o=r("LGNZ"),s=r("c46T"),c=r("0RS7"),u=r("GMaR"),h=r("qaIE"),v=r("916D"),m=r("+TxJ"),p=function(e){d(r,e);var t=y(r);function r(e,n,i,h,f,d,v,y,m,p,_,x,b,g,O,k,j,M,w,S,R){var P;l(this,r),(P=t.call(this)).angle=h,P.height=v,P.width=d,P.xOffset=n*w,P.yOffset=i*w,P._markerPlacement=S,P._effects=R,P._anchorX=.5-(.5+k)*O.width/O.width,P._anchorY=.5-(.5+j)*O.height/O.height;var L=(1===g?1:0)|(_?1:0)<<1|(b?1:0)<<2|(x?1:0)<<3,C=O&&O.sdf,E=u.d.load(e);E.sdf=C,E.pattern=!0,E.textureBinding=O.textureBinding,P._materialKey=E.data,P._fillColor=f,P._outlineColor=m,P._sizeOutlineWidth=Object(c.b)(Math.round(Math.min(Math.sqrt(128*d),255)),Math.round(Math.min(Math.sqrt(128*v),255)),Math.round(Math.min(Math.sqrt(128*p),255)),Math.round(Math.min(Math.sqrt(128*y),255)));var T=O.rect.x+a.q,z=O.rect.y+a.q,I=T+O.width,W=z+O.height;P._offsets.xUpperLeft=T,P._offsets.yUpperLeft=z,P._offsets.xUpperRight=I,P._offsets.yUpperRight=z,P._offsets.xBottomLeft=T,P._offsets.yBottomLeft=W,P._offsets.xBottomRight=I,P._offsets.yBottomRight=W,P._texUpperLeft=Object(c.a)(T,z),P._texUpperRight=Object(c.a)(I,z),P._texBottomLeft=Object(c.a)(T,W),P._texBottomRight=Object(c.a)(I,W),d*=M,v*=M,d*=w,v*=w;var N=Math.round(64*M);P._bitestAndDistRatio=Object(c.a)(L,N),P._computedWidth=d,P._computedHeight=v;var A=Object(s.a)(),D=Object(o.a)();return P._applyTransformation(D,A),P}return f(r,null,[{key:"fromCIMMarker",value:function(e,t){var a=e.size,o=(t&&t.width||1)/(t&&t.height||1)*e.scaleX,s=e.scaleSymbolsProportionally&&e.frameHeight?a/e.frameHeight:1,c=Object(h.c)(e.color),u=Object(h.c)(e.outlineColor),l=Object(i.h)(a),f=l*o,d=Object(i.h)(e.offsetX||0),v=Object(i.h)(e.offsetY||0),y=Object(i.h)(e.outlineWidth||0)*s,m=e.alignment||0,p=Object(i.h)(e.referenceSize),_=e.rotation||0;e.rotateClockwise||(_=-_);var x=0,b=0,g=e.anchorPoint;g&&(e.isAbsoluteAnchorPoint?a&&(x=-g.x/(a*o),b=g.y/a):(x=g.x,b=g.y));var O=new r(e.materialKey,d,v,_,c,f,l,p,u,y,e.colorLocked,e.scaleSymbolsProportionally,!1,m,t,x,b,e.sizeRatio,Object(n.r)(e.scaleFactor,1),e.markerPlacement,e.effects);return O._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/f:1,O._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/l:1,O}},{key:"fromPictureMarker",value:function(e,t){var n=Math.round(Object(i.h)(e.width)),o=Math.round(Object(i.h)(e.height)),s=a.p,c=Math.round(Object(i.h)(e.xoffset||0)),u=Math.round(Object(i.h)(e.yoffset||0)),l=new r(e.materialKey,c,u,e.angle,s,n,o,o,0,0,!1,!1,!1,0,t,0,0,1,1,null,null);return l._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/e.width:1,l._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/e.height:1,l}},{key:"fromSimpleMarker",value:function(e,t){var n=Object(h.d)(e.color),a=Math.round(Object(i.h)(e.size)),o=a,s=Math.round(Object(i.h)(e.xoffset||0)),c=Math.round(Object(i.h)(e.yoffset||0)),u=e.style,l=e.outline,f=0|(l&&l.color&&Object(h.d)(l.color)),d=0|(l&&l.width&&Math.round(Object(i.h)(l.width))),v=new r(e.materialKey,s,c,e.angle,n,a,o,o,f,d,!1,!1,"esriSMSCross"===u||"esriSMSX"===u,0,t,0,0,126/64,1,null,null);return v.boundsType="esriSMSCircle"===u?"circle":"square",v._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/e.size:1,v._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/e.size:1,v}},{key:"fromLineSymbolMarker",value:function(e,t){var n,a=Object(h.d)(e.color),o=Math.round(Object(i.h)(6*e.lineWidth)),s=o,c="cross"===e.style||"x"===e.style;switch(e.placement){case"begin-end":n="Both";break;case"begin":n="JustBegin";break;case"end":n="JustEnd";break;default:n="None"}var u={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:n,offsetAlongLine:0},l=new r(e.materialKey,0,0,0,a,o,s,s/6,a,c?Math.round(Object(i.h)(e.lineWidth)):0,!1,!1,c,1,t,0,0,126/64,1,u,null);return l.boundsType="circle"===e.style?"circle":"square",l}}]),r}(Object(m.a)(v.a));t.a=p}}])}();