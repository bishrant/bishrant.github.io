!function(){function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){o=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(o)throw l}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{CBYW:function(t,n,r){"use strict";r.r(n),r.d(n,"registerFunctions",function(){return x});var a=r("9MzC"),i=r("idrm"),l=r("D5C5"),c=r("Xfxc"),o=r("ofM5"),s=r("hTzF"),u=r("Xrjs"),f=r("kqd7"),d=r("lNzE"),y=r("ZqIb"),b=r("B8fU"),m=r("nC36"),p=r("LK1Z"),h=r("lq8Q"),v=r("Xbkg"),g=r("GN9X"),O=r("YP08"),j=r("W9Wu"),F=r("OAJp"),I=r("4zW0");function w(e,t,n){var r=e.getVariables();if(r.length>0){for(var i=[],l=0;l<r.length;l++)i.push(t.evaluateIdentifier(n,{name:r[l]}));return Object(a.b)(i).then(function(t){for(var n={},a=0;a<r.length;a++)n[r[a]]=t[a];return e.parameters=n,e})}return Object(a.s)(e)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r in e)if(r.toLowerCase()===t.toLowerCase())return e[r];return n}function D(t){if(null===t)return null;var n={type:E(t,"type",""),name:E(t,"name","")};if("range"===n.type)n.range=E(t,"range",[]);else{n.codedValues=[];var r,a=e(E(t,"codedValues",[]));try{for(a.s();!(r=a.n()).done;){var i=r.value;n.codedValues.push({name:E(i,"name",""),code:E(i,"code",null)})}}catch(l){a.e(l)}finally{a.f()}}return n}function A(e){if(null===e)return null;var t={},n=E(e,"wkt",null);null!==n&&(t.wkt=n);var r=E(e,"wkid",null);return null!==r&&(t.wkid=r),t}function N(e){if(null===e)return null;var t={hasZ:E(e,"hasz",!1),hasM:E(e,"hasm",!1)},n=E(e,"spatialreference",null);n&&(t.spatialReference=A(n));var r=E(e,"x",null);if(null!==r)return t.x=r,t.y=E(e,"y",null),t;var a=E(e,"rings",null);if(null!==a)return t.rings=a,t;var i=E(e,"paths",null);if(null!==i)return t.paths=i,t;var l=E(e,"points",null);if(null!==l)return t.points=l,t;for(var c=0,o=["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"];c<o.length;c++){var s=o[c],u=E(e,s,null);null!==u&&(t[s]=u)}return t}function x(t){"async"===t.mode&&(t.functions.getuser=function(e,n){return t.standardFunctionAsync(e,n,function(t,n,r){Object(i.J)(r,1,2);var a=Object(i.c)(r[1],""),o=!0===a;if(a=!0===a||!1===a?"":Object(i.y)(a),r[0]instanceof c.a){var s=null;return e.services&&e.services.portal&&(s=e.services.portal),s=Object(I.getPortal)(r[0],s),Object(I.lookupUser)(s,a,o).then(function(e){if(e){for(var t=JSON.parse(JSON.stringify(e)),n=0,r=["lastLogin","created","modified"];n<r.length;n++){var a=r[n];null!=t[a]&&(t[a]=new Date(t[a]))}return l.a.convertObjectToArcadeDictionary(t)}return null})}var u=null;if(Object(i.T)(r[0])&&(u=r[0]),u)return o=!1,a?null:u.load().then(function(){return u.getOwningSystemUrl()}).then(function(t){if(!t)return a?null:u.getIdentityUser().then(function(e){return e?l.a.convertObjectToArcadeDictionary({username:e}):null});var n=null;return e.services&&e.services.portal&&(n=e.services.portal),n=Object(I.getPortal)(new c.a(t),n),Object(I.lookupUser)(n,a,o).then(function(e){if(e){for(var t=JSON.parse(JSON.stringify(e)),n=0,r=["lastLogin","created","modified"];n<r.length;n++){var a=r[n];null!=t[a]&&(t[a]=new Date(t[a]))}return l.a.convertObjectToArcadeDictionary(t)}return null})});throw new Error("Invalid Parameter")})},t.signatures.push({name:"getuser",min:"1",max:"2"}),t.functions.featuresetbyid=function(e,n){return t.standardFunctionAsync(e,n,function(e,t,n){if(Object(i.J)(n,2,4),n[0]instanceof d.a){var r=Object(i.y)(n[1]),a=Object(i.c)(n[2],null),l=Object(i.x)(Object(i.c)(n[3],!0));if(null===a&&(a=["*"]),!1===Object(i.B)(a))throw new Error("Invalid Parameter");return n[0].featureSetById(r,l,a)}throw new Error("Invalid Parameter")})},t.signatures.push({name:"featuresetbyid",min:"2",max:"4"}),t.functions.featuresetbyportalitem=function(e,n){return t.standardFunctionAsync(e,n,function(t,n,r){if(Object(i.J)(r,2,5),null===r[0])throw new Error("Portal is required");if(r[0]instanceof c.a){var a=Object(i.y)(r[1]),l=Object(i.y)(r[2]),o=Object(i.c)(r[3],null),s=Object(i.x)(Object(i.c)(r[4],!0));if(null===o&&(o=["*"]),!1===Object(i.B)(o))throw new Error("Invalid Parameter");var u=null;return e.services&&e.services.portal&&(u=e.services.portal),u=Object(I.getPortal)(r[0],u),Object(I.constructFeatureSetFromPortalItem)(a,l,e.spatialReference,o,s,u,e.lrucache,e.interceptor)}if(!1===Object(i.v)(r[0]))throw new Error("Portal is required");var f=Object(i.y)(r[0]),d=Object(i.y)(r[1]),y=Object(i.c)(r[2],null),b=Object(i.x)(Object(i.c)(r[3],!0));if(null===y&&(y=["*"]),!1===Object(i.B)(y))throw new Error("Invalid Parameter");if(e.services&&e.services.portal)return Object(I.constructFeatureSetFromPortalItem)(f,d,e.spatialReference,y,b,e.services.portal,e.lrucache,e.interceptor);throw new Error("Portal is required")})},t.signatures.push({name:"featuresetbyportalitem",min:"2",max:"5"}),t.functions.featuresetbyname=function(e,n){return t.standardFunctionAsync(e,n,function(e,t,n){if(Object(i.J)(n,2,4),n[0]instanceof d.a){var r=Object(i.y)(n[1]),a=Object(i.c)(n[2],null),l=Object(i.x)(Object(i.c)(n[3],!0));if(null===a&&(a=["*"]),!1===Object(i.B)(a))throw new Error("Invalid Parameter");return n[0].featureSetByName(r,l,a)}throw new Error("Invalid Parameter")})},t.signatures.push({name:"featuresetbyname",min:"2",max:"4"}),t.functions.featureset=function(n,r){return t.standardFunction(n,r,function(t,r,a){Object(i.J)(a,1,1);var c=a[0],o={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if(Object(i.v)(c))void 0!==(c=JSON.parse(c)).layerDefinition?(o.layerDefinition=c.layerDefinition,o.featureSet=c.featureSet,c.layerDefinition.spatialReference&&(o.layerDefinition.spatialReference=c.layerDefinition.spatialReference)):(o.featureSet.features=c.features,o.featureSet.geometryType=c.geometryType,o.layerDefinition.geometryType=o.featureSet.geometryType,o.layerDefinition.objectIdField=c.objectIdFieldName,o.layerDefinition.typeIdField=c.typeIdFieldName,o.layerDefinition.globalIdField=c.globalIdFieldName,o.layerDefinition.fields=c.fields,c.spatialReference&&(o.layerDefinition.spatialReference=c.spatialReference));else{if(!(a[0]instanceof l.a))throw new Error("Invalid Parameter");var s=E(c=JSON.parse(a[0].castToText()),"layerdefinition");if(null!==s){o.layerDefinition.geometryType=E(s,"geometrytype",""),o.featureSet.geometryType=o.layerDefinition.geometryType,o.layerDefinition.globalIdField=E(s,"globalidfield",""),o.layerDefinition.objectIdField=E(s,"objectidfield",""),o.layerDefinition.typeIdField=E(s,"typeidfield","");var u=E(s,"spatialreference",null);u&&(o.layerDefinition.spatialReference=A(u));var f,d=e(E(s,"fields",[]));try{for(d.s();!(f=d.n()).done;){var y=f.value,b={name:E(y,"name",""),alias:E(y,"alias",""),type:E(y,"type",""),nullable:E(y,"nullable",!0),editable:E(y,"editable",!0),length:E(y,"length",null),domain:D(E(y,"domain"))};o.layerDefinition.fields.push(b)}}catch(_){d.e(_)}finally{d.f()}var m=E(c,"featureset",null);if(m){var p,h={},v=e(o.layerDefinition.fields);try{for(v.s();!(p=v.n()).done;){var g=p.value;h[g.name.toLowerCase()]=g.name}}catch(_){v.e(_)}finally{v.f()}var O,j=e(E(m,"features",[]));try{for(j.s();!(O=j.n()).done;){var I=O.value,w={},x=E(I,"attributes",{});for(var S in x)w[h[S.toLowerCase()]]=x[S];o.featureSet.features.push({attributes:w,geometry:N(E(I,"geometry",null))})}}catch(_){j.e(_)}finally{j.f()}}}else{o.layerDefinition.geometryType=E(c,"geometrytype",""),o.featureSet.geometryType=o.layerDefinition.geometryType,o.layerDefinition.objectIdField=E(c,"objectidfieldname",""),o.layerDefinition.typeIdField=E(c,"typeidfieldname","");var T=E(c,"spatialreference",null);T&&(o.layerDefinition.spatialReference=A(T));var C,L=e(E(c,"fields",[]));try{for(L.s();!(C=L.n()).done;){var B=C.value,R={name:E(B,"name",""),alias:E(B,"alias",""),type:E(B,"type",""),nullable:E(B,"nullable",!0),editable:E(B,"editable",!0),length:E(B,"length",null),domain:D(E(B,"domain"))};o.layerDefinition.fields.push(R)}}catch(_){L.e(_)}finally{L.f()}var W,P={},k=e(o.layerDefinition.fields);try{for(k.s();!(W=k.n()).done;){var M=W.value;P[M.name.toLowerCase()]=M.name}}catch(_){k.e(_)}finally{k.f()}var J,G=e(E(c,"features",[]));try{for(G.s();!(J=G.n()).done;){var z=J.value,V={},H=E(z,"attributes",{});for(var U in H)V[P[U.toLowerCase()]]=H[U];o.featureSet.features.push({attributes:V,geometry:N(E(z,"geometry",null))})}}catch(_){G.e(_)}finally{G.f()}}}if(!1===function(e){return!!e.layerDefinition&&!!e.featureSet&&!1!==function(e,t){for(var n=0,r=["","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"];n<r.length;n++){if(r[n]===e)return!0}return!1}(e.layerDefinition.geometryType)&&null!==e.layerDefinition.objectIdField&&""!==e.layerDefinition.objectIdField&&!1!==Object(i.B)(e.layerDefinition.fields)&&!1!==Object(i.B)(e.featureSet.features)}(o))throw new Error("Invalid Parameter");return F.a.create(o,n.spatialReference)})},t.signatures.push({name:"featureset",min:"1",max:"1"}),t.functions.filter=function(e,n){return t.standardFunctionAsync(e,n,function(n,r,l){return Object(i.J)(l,2,2),Object(i.T)(l[0])?l[0].load().then(function(n){var r=y.WhereClause.create(l[1],n.getFieldsIndex()),i=r.getVariables();if(i.length>0){for(var c=[],o=0;o<i.length;o++)c.push(t.evaluateIdentifier(e,{name:i[o]}));return Object(a.b)(c).then(function(e){for(var t={},n=0;n<i.length;n++)t[i[n]]=e[n];return r.parameters=t,new m.a({parentfeatureset:l[0],whereclause:r})})}return Object(a.s)(new m.a({parentfeatureset:l[0],whereclause:r}))}):t.failDefferred("Filter cannot accept this parameter type")})},t.signatures.push({name:"filter",min:"2",max:"2"}),t.functions.orderby=function(e,n){return t.standardFunctionAsync(e,n,function(e,n,r){if(Object(i.J)(r,2,2),Object(i.T)(r[0])){var l=new h.a(r[1]);return Object(a.s)(new v.a({parentfeatureset:r[0],orderbyclause:l}))}return t.failDefferred("Order cannot accept this parameter type")})},t.signatures.push({name:"orderby",min:"2",max:"2"}),t.functions.top=function(e,n){return t.standardFunctionAsync(e,n,function(e,n,r){return Object(i.J)(r,2,2),Object(i.T)(r[0])?Object(a.s)(new O.a({parentfeatureset:r[0],topnum:r[1]})):Object(i.B)(r[0])?Object(i.w)(r[1])>=r[0].length?r[0].slice(0):r[0].slice(0,Object(i.w)(r[1])):Object(i.I)(r[0])?Object(i.w)(r[1])>=r[0].length()?r[0].slice(0):r[0].slice(0,Object(i.w)(r[1])):t.failDefferred("Top cannot accept this parameter type")})},t.signatures.push({name:"top",min:"2",max:"2"}),t.functions.first=function(e,n){return t.standardFunctionAsync(e,n,function(e,t,n){return Object(i.J)(n,1,1),Object(i.T)(n[0])?n[0].first(e.abortSignal).then(function(e){if(null!==e){var t=u.a.createFromGraphicLikeObject(e.geometry,e.attributes,n[0]);t._underlyingGraphic=e,e=t}return e}):Object(i.B)(n[0])?0===n[0].length?Object(a.s)(null):Object(a.s)(n[0][0]):Object(i.I)(n[0])?0===n[0].length()?Object(a.s)(null):Object(a.s)(n[0].get(0)):null})},t.signatures.push({name:"first",min:"1",max:"1"}),t.functions.attachments=function(e,n){return t.standardFunctionAsync(e,n,function(t,n,r){Object(i.J)(r,1,2);var a={minsize:-1,maxsize:-1,types:null};if(r.length>1)if(r[1]instanceof l.a){if(r[1].hasField("minsize")&&(a.minsize=Object(i.w)(r[1].field("minsize"))),r[1].hasField("maxsize")&&(a.maxsize=Object(i.w)(r[1].field("maxsize"))),r[1].hasField("types")){var c=Object(i.t)(r[1].field("types"),!1);c.length>0&&(a.types=c)}}else if(null!==r[1])throw new Error("Invalid Parameter");if(r[0]instanceof u.a){var o=r[0]._layer;return o instanceof j.default&&(o=Object(I.constructFeatureSet)(o,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===o||!1===Object(i.T)(o)?[]:o.load().then(function(){return o.queryAttachments(r[0].field(o.objectIdField),a.minsize,a.maxsize,a.types)})}if(null===r[0])return[];throw new Error("Invalid Parameter")})},t.signatures.push({name:"attachments",min:"1",max:"2"}),t.functions.featuresetbyrelationshipname=function(e,n){return t.standardFunctionAsync(e,n,function(t,n,r){Object(i.J)(r,2,4);var a=r[0],l=Object(i.y)(r[1]),c=Object(i.c)(r[2],null),o=Object(i.x)(Object(i.c)(r[3],!0));if(null===c&&(c=["*"]),!1===Object(i.B)(c))throw new Error("Invalid Parameter");if(null===r[0])return null;if(!(r[0]instanceof u.a))throw new Error("Invalid Parameter");var s=a._layer;return s instanceof j.default&&(s=Object(I.constructFeatureSet)(s,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===s||!1===Object(i.T)(s)?null:s.load().then(function(t){var n=t.relationshipMetaData().filter(function(e){return e.name===l});if(0===n.length)return null;if(null!=n[0].relationshipTableId&&n[0].relationshipTableId>-1)return Object(I.constructFeatureSetFromRelationship)(t,n[0],a.field(t.objectIdField),t.spatialReference,c,o,e.lrucache,e.interceptor);var r=t.serviceUrl();return r?(r="/"===r.charAt(r.length-1)?r+n[0].relatedTableId.toString():r+"/"+n[0].relatedTableId.toString(),Object(I.constructFeatureSetFromUrl)(r,t.spatialReference,c,o,e.lrucache,e.interceptor).then(function(e){return e.load().then(function(){return e.relationshipMetaData()}).then(function(r){if(r=r.filter(function(e){return e.id===n[0].id}),!1===a.hasField(n[0].keyField)||null===a.field(n[0].keyField))return t.getFeatureByObjectId(a.field(t.objectIdField),[n[0].keyField]).then(function(t){if(t){var a=y.WhereClause.create(r[0].keyField+"= @id",e.getFieldsIndex());return a.parameters={id:t.attributes[n[0].keyField]},e.filter(a)}return new g.a({parentfeatureset:e})});var i=y.WhereClause.create(r[0].keyField+"= @id",e.getFieldsIndex());return i.parameters={id:a.field(n[0].keyField)},e.filter(i)})})):null})})},t.signatures.push({name:"featuresetbyrelationshipname",min:"2",max:"4"}),t.functions.featuresetbyassociation=function(n,r){return t.standardFunctionAsync(n,r,function(t,r,a){Object(i.J)(a,2,3);var l=a[0],c=Object(i.y)(Object(i.c)(a[1],"")).toLowerCase(),f=Object(i.v)(a[2])?Object(i.y)(a[2]):null;if(null===a[0])return null;if(!(a[0]instanceof u.a))throw new Error("Invalid Parameter");var d=l._layer;return d instanceof j.default&&(d=Object(I.constructFeatureSet)(d,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null===d||!1===Object(i.T)(d)?null:d.load().then(function(){var e=d.serviceUrl();return Object(I.constructAssociationMetaDataFeatureSetFromUrl)(e,n.spatialReference)}).then(function(t){var n=null,r=null,a=!1;if(null!==f&&""!==f&&void 0!==f){var u,b=e(t.terminals);try{for(b.s();!(u=b.n()).done;){var m=u.value;m.terminalName===f&&(r=m.terminalId)}}catch(H){b.e(H)}finally{b.f()}null===r&&(a=!0)}var h,v=t.associations.getFieldsIndex(),g=v.get("TOGLOBALID").name,O=v.get("FROMGLOBALID").name,j=v.get("TOTERMINALID").name,F=v.get("FROMTERMINALID").name,I=v.get("FROMNETWORKSOURCEID").name,w=v.get("TONETWORKSOURCEID").name,E=v.get("ASSOCIATIONTYPE").name,D=v.get("ISCONTENTVISIBLE").name,A=v.get("OBJECTID").name,N=e(d.fields);try{for(N.s();!(h=N.n()).done;){var x=h.value;if("global-id"===x.type){n=l.field(x.name);break}}}catch(H){N.e(H)}finally{N.f()}var S=null,T=new p.d(new o.a({name:"percentalong",alias:"percentalong",type:"double"}),y.WhereClause.create("0",t.associations.getFieldsIndex())),C=new p.d(new o.a({name:"side",alias:"side",type:"string"}),y.WhereClause.create("''",t.associations.getFieldsIndex())),L="globalid",B="globalId",R={};for(var W in t.lkp)R[W]=t.lkp[W].sourceId;var P=new p.e(new o.a({name:"classname",alias:"classname",type:"string"}),null,R),k="";switch(c){case"midspan":k="((".concat(g,"='").concat(n,"') OR ( ").concat(O,"='").concat(n,"')) AND (").concat(E," IN (5))"),P.codefield=y.WhereClause.create("CASE WHEN (".concat(g,"='").concat(n,"') THEN ").concat(I," ELSE ").concat(w," END"),t.associations.getFieldsIndex());var M=Object(s.c)(p.a.findField(t.associations.fields,O));M.name=L,M.alias=L,S=new p.d(M,y.WhereClause.create("CASE WHEN (".concat(O,"='").concat(n,"') THEN ").concat(g," ELSE ").concat(O," END"),t.associations.getFieldsIndex())),T=t.unVersion>=4?new p.c(p.a.findField(t.associations.fields,v.get("PERCENTALONG").name)):new p.d(new o.a({name:"percentalong",alias:"percentalong",type:"double"}),y.WhereClause.create("0",t.associations.getFieldsIndex()));break;case"junctionedge":k="((".concat(g,"='").concat(n,"') OR ( ").concat(O,"='").concat(n,"')) AND (").concat(E," IN (4,6))"),P.codefield=y.WhereClause.create("CASE WHEN (".concat(g,"='").concat(n,"') THEN ").concat(I," ELSE ").concat(w," END"),t.associations.getFieldsIndex());var J=Object(s.c)(p.a.findField(t.associations.fields,O));J.name=L,J.alias=L,S=new p.d(J,y.WhereClause.create("CASE WHEN (".concat(O,"='").concat(n,"') THEN ").concat(g," ELSE ").concat(O," END"),t.associations.getFieldsIndex())),C=new p.d(new o.a({name:"side",alias:"side",type:"string"}),y.WhereClause.create("CASE WHEN (".concat(E,"=4) THEN 'from' ELSE 'to' END"),t.associations.getFieldsIndex()));break;case"connected":var G="".concat(g,"='@T'"),z="".concat(O,"='@T'");null!==r&&(G+=" AND ".concat(j,"=@A"),z+=" AND ".concat(F,"=@A")),k="(("+G+") OR ("+z+"))",k=Object(i.g)(k,"@T",n),G=Object(i.g)(G,"@T",n),null!==r&&(G=Object(i.g)(G,"@A",r.toString()),k=Object(i.g)(k,"@A",r.toString())),P.codefield=y.WhereClause.create("CASE WHEN "+G+" THEN ".concat(I," ELSE ").concat(w," END"),t.associations.getFieldsIndex());var V=Object(s.c)(p.a.findField(t.associations.fields,O));V.name=L,V.alias=L,S=new p.d(V,y.WhereClause.create("CASE WHEN "+G+" THEN ".concat(O," ELSE ").concat(g," END"),t.associations.getFieldsIndex()));break;case"container":k="".concat(g,"='").concat(n,"' AND ").concat(E," = 2"),null!==r&&(k+=" AND ".concat(j," = ")+r.toString()),P.codefield=I,k="( "+k+" )",S=new p.b(p.a.findField(t.associations.fields,O),L,L);case"content":k="(".concat(O,"='").concat(n,"' AND ").concat(E," = 2)"),null!==r&&(k+=" AND ".concat(F," = ")+r.toString()),P.codefield=w,k="( "+k+" )",S=new p.b(p.a.findField(t.associations.fields,g),L,L);break;case"structure":k="(".concat(g,"='").concat(n,"' AND ").concat(E," = 3)"),null!==r&&(k+=" AND ".concat(j," = ")+r.toString()),P.codefield=I,k="( "+k+" )",S=new p.b(p.a.findField(t.associations.fields,O),L,B);break;case"attached":k="(".concat(O,"='").concat(n,"' AND ").concat(E," = 3)"),null!==r&&(k+=" AND ".concat(F," = ")+r.toString()),P.codefield=w,k="( "+k+" )",S=new p.b(p.a.findField(t.associations.fields,g),L,B);break;default:throw new Error("Invalid Parameter")}return a&&(k="1 <> 1"),new p.a({parentfeatureset:t.associations,adaptedFields:[new p.c(p.a.findField(t.associations.fields,A)),new p.c(p.a.findField(t.associations.fields,D)),S,C,P,T],extraFilter:k?y.WhereClause.create(k,t.associations.getFieldsIndex()):null})})})},t.signatures.push({name:"featuresetbyassociation",min:"2",max:"6"}),t.functions.groupby=function(n,r){return t.standardFunctionAsync(n,r,function(r,c,o){return Object(i.J)(o,3,3),Object(i.T)(o[0])?o[0].load().then(function(r){var c=[],s=[],u=!1,f=[];if(Object(i.v)(o[1]))f.push(o[1]);else if(o[1]instanceof l.a)f.push(o[1]);else if(Object(i.B)(o[1]))f=o[1];else{if(!Object(i.I)(o[1]))return t.failDefferred("Illegal Value: GroupBy");f=o[1].toArray()}var d,m=e(f);try{for(m.s();!(d=m.n()).done;){var p=d.value;if(Object(i.v)(p)){var h=y.WhereClause.create(Object(i.y)(p),r.getFieldsIndex()),v=!0===Object(b.c)(h)?Object(i.y)(p):"%%%%FIELDNAME";c.push({name:v,expression:h}),"%%%%FIELDNAME"===v&&(u=!0)}else{if(!(p instanceof l.a))return t.failDefferred("Illegal Value: GroupBy");var g=p.hasField("name")?p.field("name"):"%%%%FIELDNAME",O=p.hasField("expression")?p.field("expression"):"";if("%%%%FIELDNAME"===g&&(u=!0),!g)return t.failDefferred("Illegal Value: GroupBy");c.push({name:g,expression:y.WhereClause.create(O||g,r.getFieldsIndex())})}}}catch(X){m.e(X)}finally{m.f()}if(f=[],Object(i.v)(o[2]))f.push(o[2]);else if(Object(i.B)(o[2]))f=o[2];else if(Object(i.I)(o[2]))f=o[2].toArray();else{if(!(o[2]instanceof l.a))return t.failDefferred("Illegal Value: GroupBy");f.push(o[2])}var j,F=e(f);try{for(F.s();!(j=F.n()).done;){var I=j.value;if(!(I instanceof l.a))return t.failDefferred("Illegal Value: GroupBy");var E=I.hasField("name")?I.field("name"):"",D=I.hasField("statistic")?I.field("statistic"):"",A=I.hasField("expression")?I.field("expression"):"";if(!E||!D||!A)return t.failDefferred("Illegal Value: GroupBy");s.push({name:E,statistic:D.toLowerCase(),expression:y.WhereClause.create(A,r.getFieldsIndex())})}}catch(X){F.e(X)}finally{F.f()}if(u){var N,x={},S=e(r.fields);try{for(S.s();!(N=S.n()).done;){x[N.value.name.toLowerCase()]=1}}catch(X){S.e(X)}finally{S.f()}var T,C=e(c);try{for(C.s();!(T=C.n()).done;){var L=T.value;"%%%%FIELDNAME"!==L.name&&(x[L.name.toLowerCase()]=1)}}catch(X){C.e(X)}finally{C.f()}var B,R=e(s);try{for(R.s();!(B=R.n()).done;){var W=B.value;"%%%%FIELDNAME"!==W.name&&(x[W.name.toLowerCase()]=1)}}catch(X){R.e(X)}finally{R.f()}var P,k=0,M=e(c);try{for(M.s();!(P=M.n()).done;){var J=P.value;if("%%%%FIELDNAME"===J.name){for(;1===x["field_"+k.toString()];)k++;x["field_"+k.toString()]=1,J.name="FIELD_"+k.toString()}}}catch(X){M.e(X)}finally{M.f()}}for(var G=[],z=0,V=c;z<V.length;z++){var H=V[z];G.push(w(H.expression,t,n))}for(var U=0,_=s;U<_.length;U++){var q=_[U];G.push(w(q.expression,t,n))}return G.length>0?Object(a.b)(G).then(function(){return Object(a.s)(o[0].groupby(c,s))}):Object(a.s)(o[0].groupby(c,s))}):t.failDefferred("Illegal Value: GroupBy")})},t.signatures.push({name:"groupby",min:"3",max:"3"}),t.functions.distinct=function(n,r){return t.standardFunctionAsync(n,r,function(r,c,o){return Object(i.T)(o[0])?(Object(i.J)(o,2,2),o[0].load().then(function(r){var c=[],s=[];if(Object(i.v)(o[1]))s.push(o[1]);else if(o[1]instanceof l.a)s.push(o[1]);else if(Object(i.B)(o[1]))s=o[1];else{if(!Object(i.I)(o[1]))return t.failDefferred("Illegal Value: GroupBy");s=o[1].toArray()}var u,f=!1,d=e(s);try{for(d.s();!(u=d.n()).done;){var m=u.value;if(Object(i.v)(m)){var p=y.WhereClause.create(Object(i.y)(m),r.getFieldsIndex()),h=!0===Object(b.c)(p)?Object(i.y)(m):"%%%%FIELDNAME";c.push({name:h,expression:p}),"%%%%FIELDNAME"===h&&(f=!0)}else{if(!(m instanceof l.a))return t.failDefferred("Illegal Value: GroupBy");var v=m.hasField("name")?m.field("name"):"%%%%FIELDNAME",g=m.hasField("expression")?m.field("expression"):"";if("%%%%FIELDNAME"===v&&(f=!0),!v)return t.failDefferred("Illegal Value: GroupBy");c.push({name:v,expression:y.WhereClause.create(g||v,r.getFieldsIndex())})}}}catch(R){d.e(R)}finally{d.f()}if(f){var O,j={},F=e(r.fields);try{for(F.s();!(O=F.n()).done;){j[O.value.name.toLowerCase()]=1}}catch(R){F.e(R)}finally{F.f()}var I,E=e(c);try{for(E.s();!(I=E.n()).done;){var D=I.value;"%%%%FIELDNAME"!==D.name&&(j[D.name.toLowerCase()]=1)}}catch(R){E.e(R)}finally{E.f()}var A,N=0,x=e(c);try{for(x.s();!(A=x.n()).done;){var S=A.value;if("%%%%FIELDNAME"===S.name){for(;1===j["field_"+N.toString()];)N++;j["field_"+N.toString()]=1,S.name="FIELD_"+N.toString()}}}catch(R){x.e(R)}finally{x.f()}}for(var T=[],C=0,L=c;C<L.length;C++){var B=L[C];T.push(w(B.expression,t,n))}return T.length>0?Object(a.b)(T).then(function(){return Object(a.s)(o[0].groupby(c,[]))}):Object(a.s)(o[0].groupby(c,[]))})):function(e,t,n,r){if(1===r.length){if(Object(i.B)(r[0]))return Object(f.a)(e,r[0],-1);if(Object(i.I)(r[0]))return Object(f.a)(e,r[0].toArray(),-1)}return Object(f.a)(e,r,-1)}("distinct",0,0,o)})})}}}])}();