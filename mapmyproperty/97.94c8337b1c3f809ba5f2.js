(function(){var e={"arcgis-js-api/layers/support/labelUtils":"L924","esri/layers/support/labelUtils":"L924","arcgis-js-api/layers/support/labelFormatUtils":"y/j/"},r=this||window,n=r.webpackJsonp=r.webpackJsonp||[];n.registerAbsMids?n.registerAbsMids(e):(n.absMidsWaiting=n.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{L924:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n("nRUF")],void 0===(a=(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSingleFieldArcadeExpression=r.getSingleFieldTemplatedString=r.convertTemplatedStringToArcade=r.getLabelExpressionSingleField=r.getLabelExpressionArcade=r.getLabelExpression=r.templateStringToSql=r.sqlToTemplateString=void 0;var t=new RegExp("__begin__","ig"),a=new RegExp("__end__","ig"),i=new RegExp("^__begin__","i"),s=new RegExp("__end__$","i");function l(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function o(e){var r={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(r.expression=e.labelExpressionInfo.value,r.type="conventional"):e.labelExpressionInfo.expression&&(r.expression=e.labelExpressionInfo.expression,r.type="arcade"):null!=e.labelExpression&&(r.expression=l(e.labelExpression),r.type="conventional"),r}function u(e){var r;return e?(r=n.replace(e,(function(e){return'__begin__$feature["'+e+'"]__end__'})),r=i.test(r)?r.replace(i,""):'"'+r,r=(r=s.test(r)?r.replace(s,""):r+'"').replace(t,'" + ').replace(a,' + "')):r='""',r}r.sqlToTemplateString=l,r.templateStringToSql=function(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")},r.getLabelExpression=o,r.getLabelExpressionArcade=function(e){var r=o(e);if(!r)return null;switch(r.type){case"conventional":return u(r.expression);case"arcade":return r.expression}return null},r.getLabelExpressionSingleField=function(e){var r=o(e);if(!r)return null;switch(r.type){case"conventional":return c(r.expression);case"arcade":return b(r.expression)}return null},r.convertTemplatedStringToArcade=u;var p=/^\s*\{([^}]+)\}\s*$/i;function c(e){var r=e.match(p);return r&&r[1].trim()||null}r.getSingleFieldTemplatedString=c;var d=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,f=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function b(e){if(!e)return null;var r=d.exec(e)||g.exec(e);return r?r[1]||r[3]:(r=f.exec(e))?r[2]:null}r.getSingleFieldArcadeExpression=b}).apply(null,t))||(e.exports=a)},"y/j/":function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n("zOht"),n("ma1f"),n("qsST"),n("hCwm"),n("ICCr"),n("I90O"),n("k7g7"),n("L924"),n("sCbS"),n("2Kdy")],void 0===(a=(function(e,r,t,a,i,s,l,o,u,p,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatField=r.createLabelFunction=void 0;var d=i.getLogger("esri.layers.support.labelFormatUtils"),g={type:"simple",evaluate:function(){return null}},f={getAttribute:function(e,r){return e.field(r)}};function b(e,r){if(null==e)return"";var n=r.domain;if(n)if("codedValue"===n.type||"coded-value"===n.type)for(var t=e,a=0,i=n.codedValues;a<i.length;a++){var o=i[a];if(o.code===t)return o.name}else if("range"===n.type){var p=+e;if(("range"in n?n.range[0]:n.minValue)<=p&&p<=("range"in n?n.range[1]:n.maxValue))return n.name}var c=e;return"date"===r.type||"esriFieldTypeDate"===r.type?c=s.formatDate(c,s.convertDateFormatToIntlOptions("short-date")):u.isNumericField(r)&&(c=l.formatNumber(+c)),c||""}r.createLabelFunction=function(r,i,s){return t.__awaiter(this,void 0,void 0,(function(){var l,v,x,m,w,y,_,E;return t.__generator(this,(function(t){switch(t.label){case 0:return r&&r.symbol?(l=r.where,v=p.getLabelExpression(r),l?[4,new Promise((function(e,r){n.e(13).then((function(){var r=[n("1eyA")];e.apply(null,r)}).bind(this)).catch(r.bind(this))}))]:[3,2]):[2,g];case 1:return m=t.sent(),[3,3];case 2:m=null,t.label=3;case 3:return x=m,"arcade"!==v.type?[3,5]:[4,c.createLabelExpression(v.expression,s,i)];case 4:return y=t.sent(),w={type:"arcade",evaluate:function(e){try{var r=y.evaluate({$feature:"attributes"in e?y.repurposeFeature(e):y.repurposeAdapter(e)});if(null!=r)return r.toString()}catch(r){d.error(new a("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:e,expression:v}))}return null},needsHydrationToEvaluate:function(){return null==p.getSingleFieldArcadeExpression(v.expression)}},[3,6];case 5:w={type:"simple",evaluate:function(e){return v.expression.replace(/{[^}]*}/g,(function(r){var n=r.slice(1,-1),t=u.getField(i,n);if(!t)return r;var a=null;return"attributes"in e?e&&e.attributes&&(a=e.attributes[t.name]):a=e.field(t.name),null==a?"":b(a,t)}))}},t.label=6;case 6:if(l){try{_=x.WhereClause.create(l,new o(i))}catch(e){return[2,g]}E=w.evaluate,w.evaluate=function(e){return _.testFeature(e,"attributes"in e?void 0:f)?E(e):null}}return[2,w]}}))}))},r.formatField=b}).apply(null,t))||(e.exports=a)}}]);