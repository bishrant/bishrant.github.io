!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function t(t){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?e(Object(l),!0).forEach(function(e){a(t,e,l[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))})}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{YKPD:function(e,a,n){"use strict";n.r(a),n.d(a,"previewSymbol2D",function(){return d});var l=n("zlDU"),r=n("nvBr"),i=n("qRWG"),o=n("zdBc"),c=n("IAPW"),s=n("S60b"),u="picture-fill",m=120,p=document.createElement("canvas");function h(e,t){var a=p.getContext("2d"),n=[];return t&&(t.weight&&n.push(t.weight),t.size&&n.push(t.size+"px"),t.family&&n.push(t.family)),a.font=n.join(" "),a.measureText(e).width}function d(e,a){var n,p,d=null!=(null==a?void 0:a.size)?Object(i.h)(a.size):null,f=null!=(null==a?void 0:a.maxSize)?Object(i.h)(a.maxSize):null,v=null!=(null==a?void 0:a.opacity)?a.opacity:null,b=null!=(null==a?void 0:a.rotation)?a.rotation:"angle"in e?e.angle:null,y=Object(o.b)(e),w=Object(o.d)(e);if(y&&!w){var g="type"in y?null:new r.a(y);"#ffffff"===(g?g.toHex():null)&&(w={color:"#bdc3c7",width:.75})}var O={shape:null,fill:null,stroke:w,offset:[0,0]};null!=(n=w)&&n.width&&(w.width=Math.min(w.width,80));var j=(null==(p=w)?void 0:p.width)||0,M=null!=d&&(null==(null==a?void 0:a.scale)||(null==a?void 0:a.scale)),k=0,x=0,P=!1;switch(e.type){case"simple-marker":var L=e.style,z=Math.min(null!=d?d:Object(i.h)(e.size),f||m);switch(k=z,x=z,L){case"circle":O.shape={type:"circle",cx:0,cy:0,r:.5*z},M||(k+=j,x+=j);break;case"cross":O.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[k,.5*x]},{command:"M",values:[.5*k,0]},{command:"L",values:[.5*k,x]}]};break;case"diamond":O.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[.5*k,0]},{command:"L",values:[k,.5*x]},{command:"L",values:[.5*k,x]},{command:"Z",values:[]}]},M||(k+=j,x+=j);break;case"square":O.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[k,0]},{command:"L",values:[k,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},M||(k+=j,x+=j),b&&(P=!0);break;case"triangle":O.shape={type:"path",path:[{command:"M",values:[.5*k,0]},{command:"L",values:[k,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},M||(k+=j,x+=j),b&&(P=!0);break;case"x":O.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[k,x]},{command:"M",values:[k,0]},{command:"L",values:[0,x]}]},b&&(P=!0);break;case"path":O.shape={type:"path",path:e.path||""},M||(k+=j,x+=j),b&&(P=!0),M=!0}break;case"simple-line":var S=Math.min(null!=d?d:j,f||80),D=S>22?2*S:40;w.width=S,k=D,x=S,O.shape={type:"path",path:[{command:"M",values:[0,x]},{command:"L",values:[k,x]}]};break;case u:case"simple-fill":k=Math.min(null!=d?d:22,f||m)+j,x=k,M=!0,O.shape="object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.isSquareFill?c.l.squareFill[0]:c.l.fill[0];break;case"picture-marker":var C=Object(i.h)(e.width),F=Object(i.h)(e.height),E=Math.max(C,F),q=C/F;C=q<=1?Math.ceil(E*q):E,F=q<=1?E:Math.ceil(E/q),k=Math.min(null!=d?d:C,f||m),x=Math.min(null!=d?d:F,f||m),O.shape={type:"image",x:-Math.round(k/2),y:-Math.round(x/2),width:k,height:x,src:e.url||""},b&&(P=!0);break;case"text":var Z=e,A=Z.text||"Aa",B=Z.font,H=Math.min(null!=d?d:Object(i.h)(B.size),f||m),J=h(A,{weight:B.weight,size:H,family:B.family}),R=/[\uE600-\uE6FF]/.test(A);k=R?H:J,x=H;var T=.25*function(e){if(0===e.length)return 0;if(e.length>2){var t=Object(i.i)(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}((B?H:0).toString());R&&(T+=5),O.shape={type:"text",text:A,x:0,y:T,align:"middle",decoration:B&&B.decoration,rotated:Z.rotated,kerning:Z.kerning},O.font=B&&{size:H,style:B.style,decoration:B.decoration,weight:B.weight,family:B.family}}if(!O.shape)return Promise.reject(new l.a("symbolPreview: renderPreviewHTML2D","symbol not supported."));var W=y,G=e.color,I=null;return W&&"pattern"===W.type&&G&&e.type!==u?I=Object(o.c)(W.src,G.toCss(!0)).then(function(e){return W.src=e,O.fill=W,O}):(O.fill=y,I=Promise.resolve(O)),I.then(function(e){var n=[[e]];if("object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.applyColorModulation){var l=.6*k;n.unshift([t(t({},e),{},{offset:[-l,0],fill:Object(c.a)(y,-.3)})]),n.push([t(t({},e),{},{offset:[l,0],fill:Object(c.a)(y,.3)})]),k+=2*l}return Object(s.a)(n,[k,x],{node:a&&a.node,scale:M,opacity:v,rotation:b,useRotationSize:P})})}}}])}();