(function(){var e={"arcgis-js-api/layers/support/RasterStorageInfo":"0GEy","arcgis-js-api/layers/support/rasterDatasets/RasterFactory":"20+E","arcgis-js-api/layers/support/rasterDatasets/MRFRaster":"2VC8","arcgis-js-api/layers/support/rasterDatasets/CloudRaster":"ANQh","arcgis-js-api/layers/ImageryTileLayer":"EhmR","arcgis-js-api/geometry/support/GeographicTransformationStep":"MbkH","arcgis-js-api/geometry/support/GeographicTransformation":"OkCb","arcgis-js-api/layers/mixins/RefreshableLayer":"WaJo","arcgis-js-api/layers/support/rasterDatasets/BaseRaster":"bF83","arcgis-js-api/layers/support/rasterDatasets/xmlUtilities":"d9Lx","arcgis-js-api/layers/support/rasterDatasets/TIFFRaster":"f8aF","arcgis-js-api/layers/support/rasterDatasets/DBFParser":"huIg","arcgis-js-api/geometry/pe":"w7fK","arcgis-js-api/geometry/projection":"wIC5","arcgis-js-api/layers/support/rasterDatasets/ImageServerRaster":"xB1n"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"0GEy":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27"),r("oxlp")],void 0===(i=(function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockWidth=void 0,t.blockHeight=void 0,t.compression=null,t.origin=null,t.firstPyramidLevel=null,t.maximumPyramidLevel=null,t.pyramidScalingFactor=2,t.pyramidBlockWidth=null,t.pyramidBlockHeight=null,t.tileInfo=null,t.blockBoundary=null,t}return r.__extends(t,e),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"blockWidth",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"blockHeight",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"compression",void 0),r.__decorate([i.property({type:o,json:{write:!0}})],t.prototype,"origin",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"firstPyramidLevel",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"maximumPyramidLevel",void 0),r.__decorate([i.property()],t.prototype,"pyramidScalingFactor",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"pyramidBlockWidth",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"pyramidBlockHeight",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,"tileInfo",void 0),r.__decorate([i.property()],t.prototype,"blockBoundary",void 0),r.__decorate([i.subclass("esri.layers.support.RasterStorageInfo")],t)}(n.JSONSupport)}).apply(null,n))||(e.exports=i)},"20+E":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("R2Zq"),r("ANQh"),r("xB1n"),r("2VC8"),r("f8aF")],void 0===(i=(function(e,t,r,n,i,o,a,s,l){var u=new Map;return u.set("CRF",{desc:"Cloud Raster Format",constructor:o}),u.set("MRF",{desc:"Meta Raster Format",constructor:s}),u.set("TIFF",{desc:"GeoTIFF",constructor:l}),u.set("RasterTileServer",{desc:"Raster Tile Server",constructor:a}),function(){function e(){}return Object.defineProperty(e,"supportedFormats",{get:function(){var e=new Set;return u.forEach((function(t,r){return e.add(r)})),e},enumerable:!0,configurable:!0}),e.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,o,a,s,l,p,c,f,d,_,h;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.url,o=e.ioConfig,a=e.sourceJSON,null==(s=e.datasetFormat)&&t.lastIndexOf(".")&&(s=t.slice(t.lastIndexOf(".")+1).toUpperCase()),"OVR"===s||"TIF"===s?s="TIFF":t.toLowerCase().indexOf("/imageserver")>-1&&(s="RasterTileServer"),l={bandIds:null,sampling:null},p={url:t,sourceJSON:a,datasetFormat:s,ioConfig:o||l},this.supportedFormats.has(s)?(c=u.get(s).constructor,[4,(f=new c(p)).open({signal:e.signal})]):[3,2];case 1:return r.sent(),[2,f];case 2:if(s)throw new n("rasterfactory:open","not a supported format "+s);return d=i.keysOfMap(u),_=0,[2,(h=function(){return(s=d[_++])?(c=u.get(s).constructor,(f=new c(p)).open({signal:e.signal}).then((function(){return f})).catch((function(){return h()}))):null})()]}}))}))},e.register=function(e,t,r){u.has(e.toUpperCase())||u.set(e.toUpperCase(),{desc:t,constructor:r})},e}()}).apply(null,n))||(e.exports=i)},"2VC8":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("ma1f"),r("LxLY"),r("qMld"),r("Vx27"),r("dXLH"),r("Kjnw"),r("0GEy"),r("bF83"),r("d9Lx")],void 0===(i=(function(e,t,r,n,i,o,a,s,l,u,p,c,f){var d,_,h=(d=new ArrayBuffer(4),_=new Uint8Array(d),new Uint32Array(d)[0]=1,1===_[0]),y=new Map;y.set("Int8","s8"),y.set("UInt8","u8"),y.set("Int16","s16"),y.set("UInt16","u16"),y.set("Int32","s32"),y.set("UInt32","u32"),y.set("Float32","f32"),y.set("Float64","f32"),y.set("Double64","f32");var g=new Map;return g.set("lerc",".lrc"),g.set("none",".til"),g.set("deflate",".pzp"),g.set("jpeg",".jzp"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._files=null,t._storageIndex=null,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s,l,u,p,c,f,d,_,h,y,g,m,v,P,x;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),t=e?o.unwrap(e.signal):null,[4,this.request({url:this.url,responseType:"xml"},t)];case 2:return n=r.sent(),i=this._parseHeader(n),a=i.files,this._set("rasterInfo",i.rasterInfo),this._files=a,[4,this.request({url:a.index,responseType:"array-buffer"},t)];case 3:for(s=r.sent(),this._storageIndex=this._parseIndex(s),l=0,u=-1,d=(f=this.rasterInfo.storageInfo).blockWidth,_=f.blockHeight,h=this.rasterInfo.storageInfo.pyramidScalingFactor,g=(y=this.rasterInfo).width,m=y.height,v=y.bandCount,P=[],x="none"===f.compression?1:v;l<this._storageIndex.length;)u++,p=Math.ceil(g/d/Math.pow(h,u)),c=Math.ceil(m/_/Math.pow(h,u)),l+=p*c*x*4,P.push({maxRow:c,maxCol:p,minCol:0,minRow:0});return this.rasterInfo.storageInfo.blockBoundary=P,u>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=u),[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var o,s,u,p,c,f,d,_,h,y,g,m,v,P,x,b,I,w,T,E,S,R,O,M;return r.__generator(this,(function(r){switch(r.label){case 0:if(s=(o=this.rasterInfo.storageInfo).blockWidth,u=o.blockHeight,p=o.compression,!(c=o.blockBoundary[e])||c.maxRow<t||c.maxCol<n||c.minRow>t||c.minCol>n)return[2,null];if(d=(f=this.rasterInfo).bandCount,_=f.pixelType,h=this._getTileLocation(e,t,n),g=h.actualTileWidth,m=h.actualTileHeight,!(y=h.ranges)||0===y.length)return[2,null];if(0===y[0].from&&0===y[0].to)return M=new Uint8Array(s*u),[2,new l({width:s,height:u,pixels:null,mask:M,validPixelCount:0})];for(v=this.ioConfig.bandIds,P="none"===p?1:d,x=[],b=0,b=0;b<P;b++)(!v||v.indexOf[b]>-1)&&x.push(this.request({url:this._files.data,range:{from:y[b].from,to:y[b].to},responseType:"array-buffer"},i.signal));return[4,a.all(x)];case 1:for(I=r.sent(),w=I.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),T=new Uint8Array(w),E=0,b=0;b<P;b++)T.set(new Uint8Array(I[b]),E),E+=I[b].byteLength;return[4,this.decodePixelBlock(T.buffer,{width:s,height:u,format:"lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",pixelType:_})];case 2:if(S=r.sent(),R=0,O=0,g!==s||m!==u)if(M=S.mask)for(b=0;b<u;b++)if(O=b*s,b<m)for(R=g;R<s;R++)M[O+R]=0;else for(R=0;R<s;R++)M[O+R]=0;else for(M=new Uint8Array(s*u),S.mask=M,b=0;b<m;b++)for(O=b*s,R=0;R<g;R++)M[O+R]=1;return[2,S]}}))}))},t.prototype._parseIndex=function(e){if(e.byteLength%16>0)throw"invalid array buffer must be multiples of 16";var t,r,n,i,o,a;if(h){for(r=new Uint8Array(e),i=new ArrayBuffer(e.byteLength),n=new Uint8Array(i),o=0;o<e.byteLength/4;o++)for(a=0;a<4;a++)n[4*o+a]=r[4*o+3-a];t=new Uint32Array(i)}else t=new Uint32Array(e);return t},t.prototype._getTileLocation=function(e,t,r){var n,i,o,a=this.rasterInfo.storageInfo,s=a.blockWidth,l=a.blockHeight,u=a.pyramidScalingFactor,p=this.rasterInfo,c=p.width,f=p.height,d="none"===a.compression?1:p.bandCount,_=0,h=0;for(o=0;o<e;o++)h=Math.pow(u,o),_+=(n=Math.ceil(c/s/h))*(i=Math.ceil(f/l/h));h=Math.pow(u,e),n=Math.ceil(c/s/h),i=Math.ceil(f/l/h),_+=t*n+r;for(var y=this._storageIndex.subarray(_*=4*d,_+4*d),g=0,m=0,v=[],P=0;P<d;P++)m=(g=y[4*P+0]*Math.pow(2,32)+y[4*P+1])+y[4*P+2]*Math.pow(2,32)+y[4*P+3],v.push({from:g,to:m});return{ranges:v,actualTileWidth:r<n-1?s:Math.ceil(c/h)-s*(n-1),actualTileHeight:t<i-1?l:Math.ceil(f/h)-l*(i-1)}},t.prototype._parseHeader=function(e){var t=f.getElement(e,"MRF_META/Raster");if(!t)throw new i("mrf:open","not a valid MRF format");var r=f.getElement(t,"Size"),o=parseInt(r.getAttribute("x"),10),a=parseInt(r.getAttribute("y"),10),s=parseInt(r.getAttribute("c"),10),l=(f.getElementValue(t,"Compression")||"none").toLowerCase();if(!l||-1===["none","lerc"].indexOf(l))throw new i("mrf:open","currently does not support compression "+l);var c=f.getElementValue(t,"DataType")||"UInt8",d=y.get(c);if(null==d)throw new i("mrf:open","currently does not support pixel type "+c);var _,h,m=f.getElement(t,"PageSize"),v=parseInt(m.getAttribute("x"),10),P=parseInt(m.getAttribute("y"),10),x=f.getElement(t,"DataValues");if(x&&null!=(h=x.getAttribute("NoData"))&&(_=h.trim().split(" ").map((function(e){return parseFloat(e)}))),f.getElement(e,"MRF_META/CachedSource"))throw new i("mrf:open","currently does not support MRF referencing other data files");var b=f.getElement(e,"MRF_META/GeoTags"),I=f.getElement(b,"BoundingBox");if(null==I)throw new i("mrf:open","missing node MRF_META/GeoTags/BoundingBox");var w,T=parseFloat(I.getAttribute("minx")),E=parseFloat(I.getAttribute("miny")),S=parseFloat(I.getAttribute("maxx")),R=parseFloat(I.getAttribute("maxy")),O=f.getElementValue(b,"Projection"),M=f.getElementValue(e,"datafile"),C=f.getElementValue(e,"IndexFile");"LOCAL_CS[]"!==O&&(w=new n.SpatialReference({wkt:O}));var N=new n.Extent(T,E,S,R);N.spatialReference=w;var A=f.getElement(e,"MRF_META/Rsets"),F=parseInt(A&&A.getAttribute("scale")||"2",10),k=new p({origin:new n.Point({x:N.xmin,y:N.ymax,spatialReference:w}),blockWidth:v,blockHeight:P,pyramidBlockWidth:v,pyramidBlockHeight:P,compression:l,pyramidScalingFactor:F}),D=new n.Point({x:(S-T)/o,y:(R-E)/a,spatialReference:w});return{rasterInfo:new u({width:o,height:a,extent:N,spatialReference:w,bandCount:s,pixelType:d,pixelSize:D,noDataValue:_,storageInfo:k}),files:{mrf:this.url,index:C||this.url.replace(".mrf",".idx"),data:M||this.url.replace(".mrf",g.get(l))}}},r.__decorate([s.property()],t.prototype,"_files",void 0),r.__decorate([s.property()],t.prototype,"_storageIndex",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),r.__decorate([s.subclass("esri.layers.support.rasterIO.MRFRaster")],t)}(c)}).apply(null,n))||(e.exports=i)},ANQh:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("ma1f"),r("LxLY"),r("qMld"),r("Vx27"),r("Kjnw"),r("0GEy"),r("pMLx"),r("bF83"),r("huIg"),r("w1v0")],void 0===(i=(function(e,t,r,n,i,o,a,s,l,u,p,c,f,d){var _=new Map;return _.set("int16","esriFieldTypeSmallInteger"),_.set("int32","esriFieldTypeInteger"),_.set("int64","esriFieldTypeInteger"),_.set("float32","esriFieldTypeSingle"),_.set("float64","esriFieldTypeDouble"),_.set("text","esriFieldTypeString"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.storageInfo=null,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,a,s,l,u;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),t=e?o.unwrap(e.signal):null,[4,this.request({url:this.url+"/conf.json",responseType:"json"},t)];case 2:if(n=r.sent(),!this._validateHeader(n))throw new i("cloudraster:open","Invalid or unsupported conf.json.");return this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),a=this._parseHeader(n),s=a.storageInfo,"thematic"!==(l=a.rasterInfo).dataType?[3,4]:[4,this._fetchAuxiliaryInformation()];case 3:u=r.sent(),l.attributeTable=u,r.label=4;case 4:return this._set("storageInfo",s),this._set("rasterInfo",l),this.ioConfig.retryCount=this.ioConfig.retryCount||0,[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var o,a,s,l,u,p,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=this.rasterInfo.storageInfo.maximumPyramidLevel-e)<0?[2,null]:(a=this._buildCacheFilePath(o,t,n,i.multidimensionalDefinition),s=this._getIndexRecordFromBundle(t,n),[4,this.request({url:a,range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer"},i.signal)]);case 1:return(l=r.sent())?(u=new Uint8Array(l),0===(p=this._getTileEndAndContentType(u,s)).recordSize?[2,null]:[4,this.request({url:a,range:{from:p.position,to:p.position+p.recordSize},responseType:"array-buffer"},i.signal)]):[2,null];case 2:return(c=r.sent())?[2,this.decodePixelBlock(c,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null})]:[2,null]}}))}))},t.prototype._validateHeader=function(e){return e&&"RasterInfo"===e.type&&!["origin","extent","geodataXform","LODInfos","blockWidth","blockHeight","bandCount","pixelType","pixelSizeX","pixelSizeY","format","packetSize"].some((function(t){return!e[t]}))},t.prototype._parseHeader=function(e){var t,r,i,o=["u1","u2","u4","u8","s8","u16","s16","u32","s32","f32","f64"][e.pixelType],a=e.bandCount,s=e.histograms,c=e.colormap,f=e.blockWidth,d=e.blockHeight,_=e.firstPyramidLevel,h=e.maximumPyramidLevel,y=e.statistics&&e.statistics.map((function(e){return{min:e.min,max:e.max,avg:e.mean,stddev:e.standardDeviation,median:e.median,mode:e.mode}})),g=new n.SpatialReference(e.extent.spatialReference||e.geodataXform.spatialReference),m=new n.Extent({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e.extent.xmax,ymax:e.extent.ymax,spatialReference:g}),v=new n.Point({x:e.pixelSizeX,y:e.pixelSizeY,spatialReference:g}),P=e.properties,x=e.format.toLowerCase().replace("cache/",""),b=new n.Point(e.origin.x,e.origin.y,g);if(c&&c.colors)for(t=[],r=0;r<c.colors.length;r++)t.push([c.values?c.values[r]:r,255&(i=c.colors[r]),i<<16>>>24,i<<8>>>24,i>>>24]);var I=e.LODInfos,w=[];for(r=0;r<I.levels.length;r++)w.push({level:I.levels[r],resolution:I.resolutions[r],scale:96/.0254*I.resolutions[r]});var T=new p({dpi:96,lods:w,format:x,origin:b,size:[f,d],spatialReference:g}),E={recordSize:8,packetSize:e.packetSize,headerSize:e.packetSize*e.packetSize*8+64},S=Math.round((m.xmax-m.xmin)/v.x),R=Math.round((m.ymax-m.ymin)/v.y),O=[{maxCol:Math.ceil(S/f)-1,maxRow:Math.ceil(R/d)-1,minCol:0,minRow:0}],M=2;if(h>0)for(r=0;r<h;r++)O.push({maxCol:Math.ceil(S/M/f)-1,maxRow:Math.ceil(R/M/d)-1,minCol:0,minRow:0}),M*=2;return{storageInfo:E,rasterInfo:new l({width:S,height:R,pixelType:o,bandCount:a,extent:m,spatialReference:g,pixelSize:v,keyProperties:P,statistics:y,histograms:s,multidimensionalInfo:e.mdInfo,colormap:t,storageInfo:new u({blockWidth:f,blockHeight:d,pyramidBlockWidth:f,pyramidBlockHeight:d,origin:b,tileInfo:T,firstPyramidLevel:_,maximumPyramidLevel:h,blockBoundary:O})})}},t.prototype._fetchAuxiliaryInformation=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,s,l,u,p;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.request({url:this.url+"/conf.vat.json",responseType:"json"},e).then((function(e){return e})).catch((function(){return null})),n=this.request({url:this.url+"/conf.vat.dbf",responseType:"array-buffer"},e).then((function(e){return e})).catch((function(){return null})),[4,a.all([t,n])];case 1:return(i=r.sent())[0]&&(l=i[0].values,(s=i[0].fields)&&l&&(s=s.map((function(e){return{type:"OID"===e.name?"esriFieldTypeOID":_.get(e.type),name:e.name,alias:e.alias||e.name}})),u=l.map((function(e){return{attributes:e}})),s&&l&&(o={fields:s,features:u}))),!o&&i[1]&&(p=f.parse(i[1]),o=p.recordSet),[2,d.fromJSON(o)]}}))}))},t.prototype._buildCacheFilePath=function(e,t,r,n){var i=this.storageInfo.packetSize,o=Math.floor(t/i)*i,a=Math.floor(r/i)*i,s="R"+this._toHexString4(o)+"C"+this._toHexString4(a),l="L";l+=e>=10?e.toString():"0"+e.toString();var u=n&&n[0];if(!u)return this.url+"/_alllayers/"+l+"/"+s+".bundle";for(var p=this.rasterInfo.multidimensionalInfo.variables.filter((function(e){return e.name===u.variableName}))[0].dimensions[0].values.indexOf(u.values[0]).toString(16),c=4-p.length,f=0;f<c;f++)p="0"+p;return this.url+"/_alllayers/"+u.variableName+"/"+(p="S"+p)+"/"+l+"/"+s+".bundle"},t.prototype._getIndexRecordFromBundle=function(e,t){var r=this.storageInfo.packetSize,n=r*(e%r)+t%r;if(n<0)throw"Invalid level / row / col";return 20+n*this.storageInfo.recordSize+44},t.prototype._getTileEndAndContentType=function(e,t){var r,n=e.subarray(t,t+8),i=0;for(r=0;r<5;r++)i|=(255&n[r])<<8*r;var o=0xffffffffff&i;for(i=0,r=5;r<8;r++)i|=(255&n[r])<<8*(r-5);return{position:o,recordSize:0xffffffffff&i}},t.prototype._toHexString4=function(e){var t=e.toString(16);if(4!==t.length)for(var r=4-t.length;r-- >0;)t="0"+t;return t},r.__decorate([s.property({readOnly:!0})],t.prototype,"storageInfo",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),r.__decorate([s.subclass("esri.layers.support.rasterDatasets.CloudRaster")],t)}(c)}).apply(null,n))||(e.exports=i)},EhmR:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("ifLZ"),r("+UAu"),r("zp6E"),r("ma1f"),r("ImIS"),r("qsST"),r("LxLY"),r("EUqE"),r("qMld"),r("Vx27"),r("1dvD"),r("nrlZ"),r("0RER"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("EtsK"),r("7Rj3"),r("KQcO"),r("YM6P"),r("T/jF"),r("pMLx"),r("20+E"),r("6PsE"),r("begh")],void 0===(i=(function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,_,h,y,g,m,v,P,x,b,I,w,T,E,S,R,O){var M=l.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});function C(){return{enabled:!this.loaded||"RasterTileServer"===this.raster.datasetFormat&&"Raster"===this.raster.tileType}}var N=u.getLogger("esri.layers.ImageryTileLayer");return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},n.bandIds=null,n.copyright=null,n.fullExtent=null,n.interpolation="nearest",n.legendEnabled=!0,n.isReference=null,n.listMode="show",n.raster=null,n.rasterInfo=null,n.sourceJSON=null,n.spatialReference=null,n.tileInfo=null,n.version=null,n.title=null,n.type="imagery-tile",n.url=null,n.operationalLayerType="ArcGISTiledImageServiceLayer",n.popupEnabled=!0,n.popupTemplate=null,n.symbolizer=null,n}return r.__extends(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r.__assign({url:e},t):e},t.prototype.load=function(e){var t=this,r=p.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._openRaster(r)}),(function(){return t._openRaster(r)}))),f.resolve(this)},Object.defineProperty(t.prototype,"multidimensionalDefinition",{set:function(e){this.raster&&(this._sliceId=this.raster.getSliceIndex(e)),this._set("multidimensionalDefinition",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){var e,t,r=[new I({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})],n=null===(t=null===(e=this.rasterInfo)||void 0===e?void 0:e.attributeTable)||void 0===t?void 0:t.fields;if(n){var i=n.filter((function(e){return"oid"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(e){var t=e.clone();return t.name="Raster."+e.name,t}));r=r.concat(i)}return r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){this._set("renderer",e),this.updateRenderer()},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var n=o.read(t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,r)||void 0;if(null!=n)return n},t.prototype.createPopupTemplate=function(e){return O.createPopupTemplate(this,e)},t.prototype.updateRenderer=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this.loaded?JSON.stringify(this._cachedRendererJson)===JSON.stringify(this.renderer)?[2]:(e=this._rasterJobHandler.instance)?(this.symbolizer.renderer=this.renderer,this.symbolizer.bind(),[4,e.updateSymbolizer(this.symbolizer)]):[2]:[2];case 1:return t.sent(),this._cachedRendererJson=this.renderer.toJSON(),[2]}}))}))},t.prototype.applyRenderer=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(s){switch(s.label){case 0:return(n=e&&e.pixelBlock)&&n.pixels&&n.pixels.length>0?(this.updateRenderer(),a=this.bandIds,(o=this._rasterJobHandler.instance)?[4,o.symbolize(r.__assign(r.__assign({},e),{simpleStretchParams:t,bandIds:a}))]:[3,2]):[2,null];case 1:return i=s.sent(),[3,3];case 2:i=this.symbolizer.symbolize(r.__assign(r.__assign({},e),{simpleStretchParams:t,bandIds:a})),s.label=3;case 3:return[2,i]}}))}))},t.prototype.getTileUrl=function(e,t,r){return"RasterTileServer"===this.raster.datasetFormat?this.url+"/tile/"+e+"/"+t+"/"+r:""},t.prototype.getCompatibleTileInfo=function(e,t){if(!this.loaded)return null;var r=h.getInfo(e);return E.create({size:256,spatialReference:e,origin:r?{x:r.origin[0],y:r.origin[1]}:{x:t.xmin,y:t.ymax}})},t.prototype.getCompatibleFullExtent=function(e){return this.loaded?(this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(e)||(this._compatibleFullExtent=this.raster.computeExtent(e)),this._compatibleFullExtent):null},t.prototype.fetchTile=function(e,t,n,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var o;return r.__generator(this,(function(s){switch(s.label){case 0:return i.requestAsImageElement?(o=this.getTileUrl(e,t,n),[2,a(o,{responseType:"image",query:{sliceId:this._sliceId,_ts:i.timestamp},signal:i.signal}).then((function(e){return e.data}))]):[4,this._initJobHandler()];case 1:return s.sent(),this.multidimensionalDefinition&&(i=r.__assign({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId},i)),[2,this.raster.fetchTile(e,t,n,i)]}}))}))},t.prototype.fetchPixels=function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(o){switch(o.label){case 0:return[4,this._initJobHandler()];case 1:return o.sent(),this.multidimensionalDefinition&&(i=r.__assign({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId},i)),[2,this.raster.fetchPixels(e,t,n,i)]}}))}))},t.prototype.identify=function(e,t){return void 0===t&&(t={}),this.raster.identify(e,t)},t.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++},t.prototype.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()},t.prototype.write=function(t,r){var n=this.raster;return(this.loaded?"RasterTileServer"===n.datasetFormat&&("Raster"===n.tileType||"Map"===n.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))?e.prototype.write.call(this,t,r):(r&&r.messages&&r.messages.push(new s("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+r.origin+"/"+(r.layerContainerType||"operational-layers")+"'",{layer:this})),null)},t.prototype._initJobHandler=function(){var e=this;if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;var t=new T;return this._rasterJobHandler.connectionPromise=t.initialize().then((function(){e._rasterJobHandler.instance=t,e.raster.rasterJobHandler=t,e.renderer&&e.updateRenderer()})).catch((function(){return null})),this._rasterJobHandler.connectionPromise},t.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this.raster.rasterJobHandler=null},t.prototype._openRaster=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,l,u,p,c,f,d;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,S.open(this.raster||{url:this.url,sourceJSON:this.sourceJSON,signal:e})];case 1:if(t=r.sent(),this.url||(this.url=t.url),this.raster=t,!(n=t.rasterInfo))throw new s("tile-imagery-layer:load","cannot load resources on "+this.url);if(this.sourceJSON=this.sourceJSON||this.raster.sourceJSON,null!=this.sourceJSON&&(this._set("version",this.sourceJSON.currentVersion),this._set("copyright",this.sourceJSON.copyrightText)),"Map"===this.raster.tileType&&(this.popupEnabled=!1),i=n.spatialReference,o=n.pixelSize,!(l=(a=n.storageInfo).tileInfo)){for(u=[],p=a.maximumPyramidLevel||0,c=Math.max(o.x,o.y),f=1/.0254*96*c,d=0;d<=p;d++)u.push({level:p-d,resolution:c,scale:f}),c*=2,f*=2;l=new E({origin:a.origin,size:[a.blockWidth,a.blockHeight],spatialReference:i,lods:u}),a.tileInfo=l}return null==this.title&&(this.title=this.raster.datasetName),n.multidimensionalInfo&&(this._configDefaultSlice(),this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)),this._configDefaultRenderer(),[2,t]}}))}))},t.prototype._configDefaultSlice=function(){var e=this.raster.rasterInfo.multidimensionalInfo.variables[0],t=[];e.dimensions.forEach((function(r){t.push(new b({variableName:e.name,dimensionName:r.name,values:r.values[0],isSlice:!0}))})),this.multidimensionalDefinition=t},t.prototype._configDefaultRenderer=function(){var e=this.raster.rasterInfo,t=e.pixelType;this.bandIds||(this.bandIds=w.getDefaultBandCombination(e)),this.renderer||(this.renderer=w.createDefaultRenderer(e,this.bandIds)),"u8"===t&&this.renderer&&"stretchType"in this.renderer&&"min-max"===this.renderer.stretchType&&this.renderer.dynamicRangeAdjustment&&(this.renderer.dynamicRangeAdjustment=!1,this.renderer.statistics=this.renderer.statistics||[[0,255],[0,255],[0,255]]),this.symbolizer?(this.symbolizer.renderer=this.renderer,this.symbolizer.rasterInfo=e):this.symbolizer=new R({renderer:this.renderer,rasterInfo:e}),this.symbolizer.bind()||N.warn("ImageryTileLayer","The given renderer is not supported by the layer.")},r.__decorate([d.property()],t.prototype,"_cachedRendererJson",void 0),r.__decorate([d.property()],t.prototype,"_sliceId",void 0),r.__decorate([d.property()],t.prototype,"_compatibleFullExtent",void 0),r.__decorate([d.property()],t.prototype,"_rasterJobHandler",void 0),r.__decorate([d.property({type:[_.Integer],json:{write:{overridePolicy:C}}})],t.prototype,"bandIds",void 0),r.__decorate([d.property()],t.prototype,"copyright",void 0),r.__decorate([d.property({type:n.Extent}),d.aliasOf("rasterInfo.extent")],t.prototype,"fullExtent",void 0),r.__decorate([d.property({type:String,json:{read:{reader:M.read},write:{writer:M.write,overridePolicy:C}}})],t.prototype,"interpolation",void 0),r.__decorate([d.property(x.legendEnabled)],t.prototype,"legendEnabled",void 0),r.__decorate([d.property({type:Boolean,json:{read:!1}})],t.prototype,"isReference",void 0),r.__decorate([d.property({type:["show","hide"]})],t.prototype,"listMode",void 0),r.__decorate([d.property({type:[b]})],t.prototype,"multidimensionalDefinition",null),r.__decorate([d.property()],t.prototype,"raster",void 0),r.__decorate([d.property({readOnly:!0}),d.aliasOf("raster.rasterInfo")],t.prototype,"rasterInfo",void 0),r.__decorate([d.property()],t.prototype,"sourceJSON",void 0),r.__decorate([d.property({type:n.SpatialReference}),d.aliasOf("rasterInfo.spatialReference")],t.prototype,"spatialReference",void 0),r.__decorate([d.property({type:E,dependsOn:["rasterInfo"]}),d.aliasOf("rasterInfo.storageInfo.tileInfo")],t.prototype,"tileInfo",void 0),r.__decorate([d.property({readOnly:!0})],t.prototype,"version",void 0),r.__decorate([d.property()],t.prototype,"title",void 0),r.__decorate([d.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),r.__decorate([d.property(x.url)],t.prototype,"url",void 0),r.__decorate([d.property({type:["ArcGISTiledImageServiceLayer"]})],t.prototype,"operationalLayerType",void 0),r.__decorate([d.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:C,writer:function(e,t,r){t[r]=!e}}}})],t.prototype,"popupEnabled",void 0),r.__decorate([d.property({type:i,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:C}}})],t.prototype,"popupTemplate",void 0),r.__decorate([d.property({readOnly:!0,dependsOn:["title"]})],t.prototype,"defaultPopupTemplate",null),r.__decorate([d.property({readOnly:!0,type:[I],dependsOn:["rasterInfo"]})],t.prototype,"fields",null),r.__decorate([d.property({types:o.rasterRendererTypes,json:{read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:C}}})],t.prototype,"renderer",null),r.__decorate([d.reader("renderer")],t.prototype,"readRenderer",null),r.__decorate([d.property()],t.prototype,"symbolizer",void 0),r.__decorate([d.subclass("esri.layers.ImageryTileLayer")],t)}(P.ScaleRangeLayer(v.RefreshableLayer(g.OperationalLayer(m.PortalLayer(c.MultiOriginJSONMixin(y))))))}).apply(null,n))||(e.exports=i)},MbkH:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}).apply(null,n))||(e.exports=i)},OkCb:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("MbkH")],void 0===(i=(function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];this.steps.push(i instanceof r?i:new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[null!=e.wkid?e.wkid.toString():"-1",null!=e.wkt?e.wkt.toString():"",null!=t.wkid?t.wkid.toString():"-1",null!=t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,a=t.steps;o<a.length;o++){var s=r.fromGE(a[o]);n.steps.push(s),i+=s.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--)t.steps.push(this.steps[r].getInverse());return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}).apply(null,n))||(e.exports=i)},WaJo:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27")],void 0===(i=(function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshableLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshInterval=0,t}return r.__extends(t,e),t.prototype.refresh=function(){this.emit("refresh")},r.__decorate([n.property({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),r.__decorate([n.subclass("esri.layers.mixins.RefreshableLayer")],t)}(e)}}).apply(null,n))||(e.exports=i)},bF83:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("zp6E"),r("ma1f"),r("ycL1"),r("LxLY"),r("SZNs"),r("qMld"),r("jfWY"),r("Vx27"),r("EtsK"),r("pMLx"),r("XOvD"),r("WSFd"),r("SAwq"),r("mnow")],void 0===(i=(function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,_,h,y,g){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rasterJobHandler=null,t.datasetName=null,t.datasetFormat=null,t.rasterInfo=null,t.ioConfig={sampling:"closest"},t}return r.__extends(t,e),t.prototype.init=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=g.load(),this.addResolvingPromise(e),[4,this.when()];case 1:return t.sent(),[2]}}))}))},t.prototype.normalizeCtorArgs=function(e){return e&&e.ioConfig&&(e=r.__assign(r.__assign({},e),{ioConfig:r.__assign({resolution:null,bandIds:null,sampling:"closest",tileInfo:d.create()},e.ioConfig)})),e},Object.defineProperty(t.prototype,"url",{set:function(e){var t=p.urlToObject(e);this._set("url",t.path)},enumerable:!0,configurable:!0}),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){throw new o("BaseRaster:open-not-implemented","open() is not implemented")}))}))},t.prototype.fetchTile=function(e,t,i,o){return void 0===o&&(o={}),r.__awaiter(this,void 0,void 0,(function(){var a,s,l,u;return r.__generator(this,(function(r){return s=(a=o.tileInfo).lodAt(e),l=new n.Point({x:s.resolution,y:s.resolution,spatialReference:a.spatialReference}),u=this._getTileExtent(l,t,i,a),[2,this.fetchPixels(u,a.size[0],a.size[1],o)]}))}))},t.prototype.identify=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,l,u,p,c,f,d,h,y,m,v,P,x;return r.__generator(this,(function(r){switch(r.label){case 0:return i=(n=this.rasterInfo).extent,o=g.projectPoint(e,n.spatialReference,t.datumTransformation),i.intersects(o)?(a=0,t.srcResolution?(l=g.snapPyramid(t.srcResolution,this.rasterInfo,this.ioConfig.sampling),a=l.pyramidLevel,[3,3]):[3,1]):[2,{location:o,value:null}];case 1:return[4,this.computeBestPyramidLevelForLocation(e,t)];case 2:if(null==(a=r.sent()))return[2,{location:o,value:null}];r.label=3;case 3:return null===(u=this.identifyPixelLocation(o,a,null))?[2,{location:o,value:null}]:(f=u.rowOffset,d=u.colOffset,m=_.getBlock(h=this.url,null,y=a+"/"+(p=u.row)+"/"+(c=u.col)),s.isSome(m)||(m=this.fetchRawTile(a,p,c,t),_.putBlock(h,null,y,m)),[4,m]);case 4:return(v=r.sent())&&v.pixels&&v.pixels.length>0?(P=f*this.rasterInfo.storageInfo.blockHeight+d,x=!v.mask||v.mask[P]?v.pixels.map((function(e){return e[P]})):null,[2,{location:o,value:x,pyramidLevel:a}]):[2,{location:o,value:null}]}}))}))},t.prototype.fetchPixels=function(e,t,i,o){return void 0===o&&(o={}),r.__awaiter(this,void 0,void 0,(function(){var a,s,l,u,p,c,f,d,_,h,m,v,P,x,b,I,w,T,E,S,R,O,M,C,N;return r.__generator(this,(function(r){switch(r.label){case 0:return a=e.clone().normalize(),l=!(e=a[0]).spatialReference.equals(s=this.rasterInfo.spatialReference),u=o.datumTransformation,p=new n.Point({x:(e.xmax-e.xmin)/t,y:(e.ymax-e.ymin)/i,spatialReference:e.spatialReference}),(c=o.srcResolution||(l?g.projectResolution(p,s,e,u):p))?(f=g.snapPyramid(c,this.rasterInfo,this.ioConfig.sampling),d=f.pyramidLevel,_=f.pyramidResolution,f.excessiveReading?[2,null]:(h=this.rasterInfo.storageInfo,null==(m=l?g.projectExtent(e,s,u):e)?[2,null]:(v={x:Math.floor((m.xmin-h.origin.x)/_.x+.1),y:Math.floor((h.origin.y-m.ymax)/_.y+.1)},P=Math.ceil((m.xmax-m.xmin)/_.x-.1),x=Math.ceil((m.ymax-m.ymin)/_.y-.1),P/t>8||x/i>8?[2,null]:[4,this.fetchRawPixels(d,v,{width:P,height:x},o)]))):[2,null];case 1:return(b=r.sent())?(I=d>0?h.pyramidBlockWidth:h.blockWidth,w=d>0?h.pyramidBlockHeight:h.blockHeight,l||1!==b.pixelBlocks.length||I!==t||w!==i||c.x!==p.x||c.y!==p.y?(T=g.getProjectionOffsetGrid(e,b.extent,p,u),S=!o.requestRawData,R={rows:T.spacing[0],cols:T.spacing[1]},O=b.pixelBlocks,M=b.mosaicSize,C=b.isPartiallyFilled,this.rasterJobHandler?[4,this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:O,srcMosaicSize:M,destDimension:S?{width:t,height:i}:null,coefs:S?T.coefficients:null,sampleSpacing:S?R:null},o)]:[3,3]):[2,{extent:e,srcExtent:m,pixelBlock:b.pixelBlocks[0],transformGrid:null}]):[2,null];case 2:return E=r.sent(),[3,4];case 3:N=y.mosaic(O,M),E=S?y.approximateTransform(N,{width:t,height:i},T.coefficients,R):N,r.label=4;case 4:return[2,{srcExtent:m,pixelBlock:E,transformGrid:T,extent:e,isPartiallyFilled:C}]}}))}))},t.prototype.fetchRawPixels=function(e,t,i,o){return r.__awaiter(this,void 0,void 0,(function(){var a,s,l,p,c,f,d,_,h,y,g,m,v,P,x,b,I,w,T,E,S,R,O,M,C,N;return r.__generator(this,(function(r){switch(r.label){case 0:if(s=(a=this.rasterInfo.storageInfo).origin,l=a.blockBoundary,p=e>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,c=e>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,f=Math.floor(t.x/p),d=Math.floor(t.y/c),_=Math.floor((t.x+i.width-1)/p),h=Math.floor((t.y+i.height-1)/c),g=(y=this.rasterInfo).pixelSize,m=y.spatialReference,!(v=l[e]))return[2,null];if(x=v.minCol,b=v.maxCol,I=v.maxRow,h<(P=v.minRow)||_<x||d>I||f>b)return[2,null];for(w=[],E=!1,S=d;S<=h;S++)for(R=f;R<=_;R++)S>=P&&R>=x&&I>=S&&b>=R?(T=this._fetchRawTile(e,S,R,o),this.ioConfig.allowPartialFill&&(T=u.create((function(e){T.then((function(t){return e(t)})).catch((function(){E=!0,e(null)}))}))),w.push(T)):w.push(null);return 0===w.length?[2,null]:[4,u.all(w)];case 1:return O=r.sent(),M={height:(h-d+1)*p,width:(_-f+1)*c},C=g.x*Math.pow(2,e),N=g.y*Math.pow(2,e),[2,{extent:new n.Extent({xmin:s.x+f*p*C,xmax:s.x+(_+1)*p*C,ymin:s.y-(h+1)*c*N,ymax:s.y-d*c*N,spatialReference:m}),pixelBlocks:O,mosaicSize:M,isPartiallyFilled:E}]}}))}))},t.prototype.fetchRawTile=function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){throw new o("BaseRaster:read-not-implemented","fetchRawTile() is not implemented")}))}))},t.prototype.computeExtent=function(e){return g.projectExtent(this.rasterInfo.extent,e)},t.prototype.decodePixelBlock=function(e,t){return this.rasterJobHandler?this.rasterJobHandler.decode({data:e,options:t}):h.decode(e,t)},t.prototype.request=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o,a,s,l,u,p;return r.__generator(this,(function(c){switch(c.label){case 0:n=this.ioConfig.customFetchParameters,o=e.url,a=e.range,s=e.query,l=e.responseType,null==e.retryCount&&this.ioConfig.retryCount&&(e.retryCount=this.ioConfig.retryCount),u=a?{Range:"bytes="+a.from+"-"+a.to}:null,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,i(o,{query:r.__assign(r.__assign({},s),n),headers:u,responseType:l,signal:t})];case 2:return[2,c.sent().data];case 3:if(p=c.sent(),e.retryCount>0)return e.retryCount--,[2,this.request(e,t)];throw p;case 4:return[2]}}))}))},t.prototype.getSliceIndex=function(e){var t=this.rasterInfo.multidimensionalInfo;if(!t||0===e.length)return null;for(var r=0,n=e[0].variableName,i=function(i){var o=t.variables[i],a=o.dimensions;if(o.name!==n)return r+=a.map((function(e){return e.values.length})).reduce((function(e,t){return e+t})),"break";for(var s=a.map((function(e){return e.values.length})),l=a.length,u=function(t){var n=e.filter((function(e){return e.dimensionName===a[t].name}))[0];if(null==n)return{value:null};var i=Array.isArray(n.values[0])?n.values[0][0]:n.values[0],o=a[t].values.indexOf(i);if(-1===o)return{value:null};s.shift(),r+=t===l-1?o:o*s.reduce((function(e,t){return e+t}))},p=0;p<l;p++){var c=u(p);if("object"==typeof c)return c}},o=0;o<t.variables.length;o++){var a=i(o);if("object"==typeof a)return a.value;if("break"===a)break}return r},t.prototype.computeBestPyramidLevelForLocation=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,0]}))}))},t.prototype.identifyPixelLocation=function(e,t,r){var n=this.rasterInfo,i=n.pixelSize,o=n.extent,a=this.rasterInfo.storageInfo,s=a.blockWidth,l=a.blockHeight,u=a.maximumPyramidLevel,p=a.pyramidScalingFactor,c=a.origin,f=g.projectPoint(e,n.spatialReference,r);if(!o.intersects(f))return null;if(t<0||t>u)return null;var d=Math.pow(p,t),_=(c.y-f.y)/(d*i.y)/l,h=(f.x-c.x)/(d*i.x)/s,y=Math.min(l-1,Math.floor((_-Math.floor(_))*l)),m=Math.min(s-1,Math.floor((h-Math.floor(h))*s));return{pyramidLevel:t,row:Math.floor(_),col:Math.floor(h),rowOffset:y,colOffset:m,srcLocation:f}},t.prototype._getTileExtent=function(e,t,r,i){var o=i.origin,a=i.size[0],s=i.size[1],l=o.x+r*a*e.x,u=o.y-t*s*e.y;return new n.Extent({xmin:l,xmax:l+a*e.x,ymin:u-s*e.y,ymax:u,spatialReference:i.spatialReference})},t.prototype._fetchRawTile=function(e,t,n,i){var o=this.url,a=e+"/"+t+"/"+n,l=_.getBlock(o,i.registryId,a);if(!s.isSome(l)){var p=u.createAbortController();l=this.fetchRawTile(e,t,n,r.__assign(r.__assign({},i),{signal:p.signal})),_.putBlock(o,i.registryId,a,l,p),l.catch((function(){_.deleteBlock(o,i.registryId,a)}))}return i.signal&&u.onAbort(i,(function(){_.decreaseRefCount(o,i.registryId,a)})),l},r.__decorate([c.property(f.url)],t.prototype,"url",null),r.__decorate([c.property({type:String,json:{write:!0}})],t.prototype,"datasetName",void 0),r.__decorate([c.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),r.__decorate([c.property()],t.prototype,"rasterInfo",void 0),r.__decorate([c.property()],t.prototype,"ioConfig",void 0),r.__decorate([c.property()],t.prototype,"sourceJSON",void 0),r.__decorate([c.subclass("esri.layers.support.rasterDatasets.BaseRaster")],t)}(l.EsriPromiseMixin(a.JSONSupport))}).apply(null,n))||(e.exports=i)},d9Lx:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){function r(e,t){if(!e||!t)return[];var r,i=t;if(t.indexOf("/")>-1?(i=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="",!(r=t?n(e,i).getElementsByTagNameNS("*",t):e.getElementsByTagNameNS("*",i))||0===r.length)return[];for(var o=[],a=0;a<r.length;a++)o.push(r[a]||r.item[a]);return o}function n(e,t){if(!e||!t)return null;var i=t;t.indexOf("/")>-1?(i=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="";var o=r(e,i);return o.length>0?t?n(o[0],t):o[0]:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getElements=r,t.getElement=n,t.getElementValue=function(e,t){var r,i=n(e,t);return i&&(r=i.textContent||i.nodeValue||i.innerText)?r.trim():null},t.getElementValues=function(e,t){for(var n,i=r(e,t),o=[],a=0;a<i.length;a++)(n=i[a].textContent||i[a].nodeValue||i[a].innerText)&&""!==(n=n.trim())&&o.push(n);return o}}).apply(null,n))||(e.exports=i)},f8aF:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("ma1f"),r("LxLY"),r("Vx27"),r("Kjnw"),r("0GEy"),r("bF83"),r("aS1B"),r("Jhq5")],void 0===(i=(function(e,t,r,n,i,o,a,s,l,u,p,c){var f=function(e,t){var r=e.get(t);return r&&r.values},d=function(e,t){var r=e.get(t);return r&&r.values[0]};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._files=null,t._headerInfo=null,t._bufferSize=1048576,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,a,u,c,f,d,_,h,y,g,m,v,P,x,b,I,w,T,E,S,R,O,M,C,N;return r.__generator(this,(function(A){switch(A.label){case 0:return[4,this.init()];case 1:return A.sent(),t=e?o.unwrap(e.signal):null,[4,this.request({url:this.url,range:{from:0,to:this._bufferSize},responseType:"array-buffer"},t)];case 2:if(!(a=A.sent()))throw new i("tiffraster:open","failed to open url "+this.url);return this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),u=p.parseSignature(a),[4,this.readIFDs(f=[],a,c=u.littleEndian,u.firstIFD,0,4,t)];case 3:if(A.sent(),d=p.getImageInfo(f),_=d.width,h=d.height,y=d.tileWidth,g=d.tileHeight,m=d.planes,v=d.pixelType,P=d.compression,x=d.firstPyramidLevel,b=d.maximumPyramidLevel,I=d.pyramidBlockWidth,w=d.pyramidBlockHeight,T=d.tileBoundary,E=d.metadata,S=n.Extent.fromJSON(d.extent),R=S.spatialReference,O=new n.Point(S?{x:S.xmin,y:S.ymax,spatialReference:R}:{x:0,y:0}),M=new l({blockWidth:y,blockHeight:g,pyramidBlockWidth:I,pyramidBlockHeight:w,compression:P,origin:O,firstPyramidLevel:x,maximumPyramidLevel:b,blockBoundary:T}),C=new n.Point({x:(S.xmax-S.xmin)/_,y:(S.ymax-S.ymin)/h,spatialReference:R}),N=new s({width:_,height:h,bandCount:m,pixelType:v,compression:P,pixelSize:C,storageInfo:M,spatialReference:R,keyProperties:E?{BandProperties:E.bandProperties,DataType:E.dataType}:null,extent:S,statistics:E?E.statistics:null}),this._set("rasterInfo",N),this._headerInfo=r.__assign({littleEndian:c,ifds:f},d),!this._headerInfo.isSupported)throw new i("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);return[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var o,a,s,l,u,p,c,f,d,_,h,y,g;return r.__generator(this,(function(r){switch(r.label){case 0:return!this._headerInfo&&this._headerInfo.isSupported?[2,null]:(o=e>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,a=e>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,!(s=this.rasterInfo.storageInfo.blockBoundary[e])||s.maxRow<t||s.maxCol<n||s.minRow>t||s.minCol>n?[2,null]:(l=this.getTileLocation(e,t,n))?(u=l.actualTileWidth,p=l.actualTileHeight,c=l.ifd,[4,this.request({url:this.url,range:l.range,responseType:"array-buffer"},i.signal)]):[2,null]);case 1:return f=r.sent(),[4,this.decodePixelBlock(f,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:c,offset:0,size:0},width:o,height:a,planes:null,pixelType:null})];case 2:if(d=r.sent(),u!==o||p!==a)if(g=d.mask)for(_=0;_<a;_++)if(y=_*o,_<p)for(h=u;h<o;h++)g[y+h]=0;else for(h=0;h<o;h++)g[y+h]=0;else for(g=new Uint8Array(o*a),d.mask=g,_=0;_<p;_++)for(y=_*o,h=0;h<u;h++)g[y+h]=1;return[2,d]}}))}))},t.prototype.readIFDs=function(e,t,n,i,o,a,s){return void 0===a&&(a=4),r.__awaiter(this,void 0,void 0,(function(){var l;return r.__generator(this,(function(r){switch(r.label){case 0:return i?i>=t.byteLength||i<0?[4,this.request({url:this.url,range:{from:i+o,to:i+o+this._bufferSize},responseType:"array-buffer"},s)]:[3,2]:[2,null];case 1:t=r.sent(),o=i+o,i=0,r.label=2;case 2:return[4,this.readIFD(t,n,i,o,c.TIFF_TAGS,a,s)];case 3:return l=r.sent(),e.push(l.ifd),l.nextIFD?[4,this.readIFDs(e,t,n,l.nextIFD-o,o,a,s)]:[2,null];case 4:return r.sent(),[2]}}))}))},t.prototype.readIFD=function(e,t,n,i,o,a,s){return void 0===o&&(o=c.TIFF_TAGS),void 0===a&&(a=4),r.__awaiter(this,void 0,void 0,(function(){var l,u,f,d,_,h,y,g;return r.__generator(this,(function(r){switch(r.label){case 0:return e?(l=p.parseIFD(e,t,n,i,o,a)).success?(u=[],l.ifd.forEach((function(e){e.values||u.push(e)})),u.length>0?(f=u.map((function(e){return e.offlineOffsetSize})),d=Math.min.apply(null,f.map((function(e){return e[0]}))),Math.min.apply(null,f.map((function(e){return e[0]+e[1]})))-d<=this._bufferSize?[4,this.request({url:this.url,range:{from:d,to:d+this._bufferSize},responseType:"array-buffer"},s)]:[3,2]):[3,2]):[3,5]:[2,null];case 1:e=r.sent(),i=d,u.forEach((function(r){return p.parseFieldValues(e,t,r,i)})),r.label=2;case 2:return l.ifd.has("GEOKEYDIRECTORY")?(_=l.ifd.get("GEOKEYDIRECTORY"),(h=_.values)&&h.length>4?(y=h[0]+"."+h[1]+"."+h[2],[4,this.readIFD(e,t,_.valueOffset+6-i,i,c.GEO_KEYS,2,s)]):[3,4]):[3,4];case 3:g=r.sent(),_.data=g.ifd,_.data&&_.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[y]}),r.label=4;case 4:return[2,l];case 5:return l.requiredBufferSize&&l.requiredBufferSize!==e.byteLength?[4,this.request({url:this.url,range:{from:i,to:i+l.requiredBufferSize+4},responseType:"array-buffer"},s)]:[3,7];case 6:return(e=r.sent()).byteLength<l.requiredBufferSize?[2,null]:[2,this.readIFD(e,t,0,i,c.TIFF_TAGS,4,s)];case 7:return[2]}}))}))},t.prototype.getTileLocation=function(e,t,r){var n=this.rasterInfo.storageInfo,i=n.blockBoundary,o=0===e?0:e-(n.firstPyramidLevel-1),a=this._headerInfo.ifds[o];if(!a)return null;var s=f(a,"TILEOFFSETS");if(void 0===s)return null;var l=f(a,"TILEBYTECOUNTS"),u=i[o],p=u.maxRow,c=u.maxCol;if(t>p||r>c||t<u.minRow||r<u.minCol)return null;var _=d(a,"IMAGEWIDTH"),h=d(a,"IMAGELENGTH"),y=d(a,"TILEWIDTH"),g=d(a,"TILELENGTH"),m=t*(c+1)+r,v=s[m],P=l[m];return null==v||null==P?null:{range:{from:v,to:v+P-1},ifd:a,actualTileWidth:r===c?_%y:y,actualTileHeight:t===p?h%g:g}},r.__decorate([a.property()],t.prototype,"_files",void 0),r.__decorate([a.property()],t.prototype,"_headerInfo",void 0),r.__decorate([a.property()],t.prototype,"_bufferSize",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),r.__decorate([a.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],t)}(u)}).apply(null,n))||(e.exports=i)},huIg:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("n7Tx")],void 0===(i=(function(e,t,r){return function(){function e(){}return Object.defineProperty(e,"supportedVersions",{get:function(){return[5]},enumerable:!0,configurable:!0}),e.parse=function(e){var t=new DataView(e),n=3&t.getUint8(0);if(3!==n)return{header:{version:n},recordSet:null};var i,o=t.getUint32(4,!0),a=t.getUint16(8,!0),s=t.getUint16(10,!0),l={version:n,recordCount:o,headerByteCount:a,recordByteCount:s},u=32,p=[],c=[];if(3===n){for(;13!==t.getUint8(u);)i=String.fromCharCode(t.getUint8(u+11)).trim(),p.push({name:r.bytesToUTF8(new Uint8Array(e,u,11)),type:i,typeName:["String","Date","Double","Boolean","String","Integer"][["C","D","F","L","M","N"].indexOf(i)],length:t.getUint8(u+16)}),u+=32;if(u+=1,p.length>0)for(var f=function(){var n=[];32===t.getUint8(u)?(u+=1,p.forEach((function(t){if("C"===t.type)n.push(r.bytesToUTF8(new Uint8Array(e,u,t.length)).trim());else if("N"===t.type)n.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(e,u,t.length)).trim(),10));else if("F"===t.type)n.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(e,u,t.length)).trim()));else if("D"===t.type){var i=String.fromCharCode.apply(null,new Uint8Array(e,u,t.length)).trim();n.push(new Date(parseInt(i.substring(0,4),10),parseInt(i.substring(4,6),10)-1,parseInt(i.substring(6,8),10)))}u+=t.length})),c.push(n)):u+=s};c.length<o&&e.byteLength-u>s;)f()}var d=function(e){var t=e.fields,r=e.records,n=t.some((function(e){return"oid"===e.name.toLowerCase()}))?"OBJECTID":"OID",i=[{name:n,type:"esriFieldTypeOID",alias:"OID"}].concat(t.map((function(e){return{name:e.name,type:"esriFieldType"+e.typeName,alias:e.name}}))),o=i.map((function(e){return e.name})),a=[],s=0,l=0;return r.forEach((function(e){var t={};for(t[n]=s++,l=1;l<o.length;l++)t[o[l]]=e[l-1];a.push({attributes:t})})),{displayFieldName:"",fields:i,features:a}}({fields:p,records:c});return{header:l,fields:p,records:c,recordSet:d}},e}()}).apply(null,n))||(e.exports=i)},w7fK:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("KFwS"),r("H1tY"),r("qMld"),r("2Kdy")],void 0===(i=(function(e,t,n,i,o,a){var s,l,u,p,c,f;function d(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,l.init(),u.init(),p.init(),c.init(),f.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++)r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(l.PE_NAME_MAX))}}));for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++)r(s[a].prototype,"getParameters",(function(e){return function(){for(var r=new Array(l.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return g(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}}));var d=t._pe._pe_getPeHorizonSize(),_=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+d*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",_),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",_),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=l.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(l.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function _(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function h(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function y(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function g(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<r;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!o("esri-wasm")},t.load=function(){return s||(s=a.create((function(e,t){new Promise((function(e,t){r.e(87).then((function(){var t=[r("dxOQ")];e.apply(null,t)}).bind(this)).catch(t.bind(this))})).then((function(r){r({locateFile:function(e){return i.getAssetUrl("esri/geometry/support/"+e)},onAbort:function(e){t(new Error(e))}}).then((function(t){d(t),e()}))}))})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=y(n),o=n===i,a=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&g(n,r,a,o),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=y(n),a=n===o,s=t._pe.ensureFloat64(o),l=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return l&&g(n,r,s,a),l}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case l.PE_TRANSFORM_P_TO_G:return n(e,t,i);case l.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(l=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,a=r[e];if(a||(r[e]=a={}),a.hasOwnProperty(String(n)))i=a[n];else{var s=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(s,t._pe.NULL)||(a[n]=i=s)}return o(i)}function o(e){if(e){var r=e.getType();switch(r){case l.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case l.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case l.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&l.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(l.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,a=n[e];if(a||(n[e]=a={}),a.hasOwnProperty(r))i=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(a[r]=i=s)}return o(i)},e.geogcs=function(e){return i(l.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(l.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(l.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(l.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,a,s){var l=null,u=new t._pe.PeInteger(s);try{var p=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,a,u);if((s=u.val)&&(l=[p],s>1))for(var c=t._pe.getPointer(p),f=1;f<s;f++)l.push(t._pe.wrapPointer(c+r*f,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(u)}return l}}(u=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];_(i),i.getEntries().forEach((function(e){_(e);var t=e.getGeogtran();_(t),t.getParameters().forEach(_),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){_(e);var t=e.getDatum();_(t),_(t.getSpheroid()),_(e.getPrimem()),_(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=y(n),s=n===a,l=t._pe.ensureFloat64(a),u=0;i&&(u=t._pe.ensureFloat64(i));var p=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,l,u,o);return p&&g(n,r,l,s),p}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,a){var s,u;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,u=l.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,u=l.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,u=l.PE_DMS_MAX}var p=0;r&&(p=t._pe.getPointer(r));var c=y(i),f=t._pe.ensureFloat64(c),d=h(n,u),_=s(p,n,f,o,t._pe.ensureInt32(d));if(_)for(var g=0;g<n;g++)a[g]=t._pe.UTF8ToString(d[g]);return _}function n(e,r,n,i,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var l=i.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(l),p=t._pe.ensureFloat64(new Array(2*n)),c=a(s,n,u,p);return c&&g(o,n,p),c}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var p=y(n),c=t._pe.ensureFloat64(p),f=h(r,l.PE_MGRS_MAX),d=t._pe.ensureInt32(f),_=t._pe._pe_geog_to_mgrs_extended(u,r,c,i,o,a,d);if(_)for(var g=0;g<r;g++)s[g]=t._pe.UTF8ToString(f[g]);return _},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_mgrs_to_geog_extended(a,r,l,i,u);return p&&g(o,r,u),p}}(p=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var p=y(n),c=t._pe.ensureFloat64(p),f=h(r,l.PE_MGRS_MAX),d=t._pe.ensureInt32(f),_=t._pe._pe_geog_to_usng(u,r,c,i,o,a,d);if(_)for(var g=0;g<r;g++)s[g]=t._pe.UTF8ToString(f[g]);return _},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),s=t._pe.ensureInt32(a),l=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_usng_to_geog(o,r,s,l);return u&&g(i,r,l),u}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=y(n),u=t._pe.ensureFloat64(s),p=h(r,l.PE_UTM_MAX),c=t._pe.ensureInt32(p),f=t._pe._pe_geog_to_utm(a,r,u,i,c);if(f)for(var d=0;d<r;d++)o[d]=t._pe.UTF8ToString(p[d]);return f},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_utm_to_geog(a,r,l,i,u);return p&&g(o,r,u),p}}(c=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,a;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[i]&&(o=a[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),a||r.set(n,a=[]),a[i]=o),o}}(f=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=d}).apply(null,n))||(e.exports=i)},wIC5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qMld"),r("w7fK"),r("OkCb"),r("2Kdy")],void 0===(i=(function(e,t,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=null,s=null;t.isLoaded=function(){return!!a&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var l=null;t.load=function(){return l||(l=n.all([i.load(),new Promise((function(e,t){Promise.resolve().then((function(){var t=[r("vFDJ")];e.apply(null,t)}).bind(this)).catch(t.bind(this))})),new Promise((function(e,t){Promise.resolve().then((function(){var t=[r("RBE7")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))]).then((function(e){s=e[2].hydratedAdapter,(a=e[1])._enableProjection(i)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:p(s,e,e[0].spatialReference,t,r):p(s,[e],e.spatialReference,t,r)[0]};var u={};function p(e,t,r,n,i){if(void 0===i&&(i=null),null===i){var s=o.cacheKey(r,n);void 0!==u[s]?i=u[s]:(null===(i=c(r,n,null))&&(i=new o),u[s]=i)}return a._project(e,t,r,n,i)}function c(e,t,r){void 0===r&&(r=null);var n=a._getTransformation(s,e,t,r,null==r?void 0:r.spatialReference);return null!==n?o.fromGE(n):null}t.projectMany=p,t.getTransformation=c,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=a._getTransformationBySuitability(s,e,t,r,null==r?void 0:r.spatialReference);if(null!==n){for(var i=[],l=0,u=n;l<u.length;l++)i.push(o.fromGE(u[l]));return i}return[]}}).apply(null,n))||(e.exports=i)},xB1n:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("zp6E"),r("ma1f"),r("LxLY"),r("qMld"),r("jfWY"),r("Vx27"),r("Kjnw"),r("0GEy"),r("ddAr"),r("pMLx"),r("Cobz"),r("bF83"),r("SAwq"),r("w1v0")],void 0===(i=(function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,_,h,y,g){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._levelOffset=0,t._slices=null,t._tilemapCache=null,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,s,u,p,h,y,g,m,v,P,x,b,I,w,T,E,S,R,O,M,C,N,A,F;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),t=e&&e.signal,this.sourceJSON?(s={data:this.sourceJSON},[3,4]):[3,2];case 2:return[4,i(this.url,{responseType:"json",query:{f:"json"},signal:t})];case 3:s=r.sent(),r.label=4;case 4:if((n=s).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=u=n.data,p=["jpg","jpeg","png","png8","png24","png32","mixed"],this.tileType=u.cacheType,null===this.tileType&&(this.tileType=p.indexOf(u.tileInfo.format.toLowerCase())>-1?"Map":"lerc"===u.tileInfo.format.toLowerCase()?"Elevation":"Raster"),!u)throw new o("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!u.tileInfo)throw new o("imageserverraster:open","use ImageryLayer to open non-tiled image services");return this.datasetName=u.name,[4,this._fetchRasterInfo({signal:t})];case 5:if(h=r.sent(),!a.isSome(h))throw new o("image-server-raster:open","cannot initialize image service");if(y="Map"===this.tileType?f.readServiceTileInfo(u.tileInfo,u,null):d.fromJSON(u.tileInfo),g=h.extent,v=.5/h.width*(m=h.pixelSize).x,P=void 0,x=void 0,b=y.lodAt(Math.max.apply(null,y.lods.map((function(e){return e.level})))),"Map"!==this.tileType&&0!==u.maxScale&&("Raster"===this.tileType?(P=y.lods.filter((function(e){return e.resolution===m.x}))[0])||(P=y.lods.filter((function(e){return e.resolution>m.x})).sort((function(e,t){return e.resolution>t.resolution?1:-1}))[0]):(P=y.lods.filter((function(e){return Math.abs(e.scale-u.maxScale)<v}))[0])||(P=y.lods.filter((function(e){return e.scale>u.maxScale})).sort((function(e,t){return e.scale>t.scale?1:-1}))[0]),m.x=m.y=P.resolution,h.width=Math.ceil((g.xmax-g.xmin)/m.x-.1),h.height=Math.ceil((g.ymax-g.ymin)/m.y-.1)),P||(P=b),I=y.lodAt(Math.min.apply(null,y.lods.map((function(e){return e.level})))),"Map"===this.tileType?this._levelOffset=y.lods[0].level:0!==u.minScale&&"Elevation"===this.tileType&&(x=y.lods.filter((function(e){return Math.abs(e.scale-u.minScale)<v}))[0],this._levelOffset=x.level-I.level),x||(x=I),w=Math.max(m.x,m.y),(Math.abs(m.x-m.y)>v||!y.lods.some((function(e){return Math.abs(e.resolution-w)<v})))&&(m.x=m.y=P.resolution,h.width=Math.ceil((g.xmax-g.xmin)/m.x-.1),h.height=Math.ceil((g.ymax-g.ymin)/m.y-.1)),T=P.level-x.level,S=(E=y.size)[0],R=E[1],O=y.origin,M=m.x,C=m.y,N=[{minCol:Math.floor((g.xmin-O.x+.1*M)/S/M),maxCol:Math.floor((g.xmax-O.x-.1*M)/S/M),minRow:Math.floor((O.y-g.ymax+.1*C)/R/C),maxRow:Math.floor((O.y-g.ymin-.1*C)/R/C)}],T>0)for(A=0;A<T;A++)M*=2,C*=2,N.push({minCol:Math.floor((g.xmin-O.x+.1*M)/S/M),maxCol:Math.floor((g.xmax-O.x-.1*M)/S/M),minRow:Math.floor((O.y-g.ymax+.1*C)/R/M),maxRow:Math.floor((O.y-g.ymin-.1*C)/R/M)});return h.storageInfo=new c({blockWidth:y.size[0],blockHeight:y.size[1],pyramidBlockWidth:y.size[0],pyramidBlockHeight:y.size[1],compression:y.format,origin:y.origin,firstPyramidLevel:1,maximumPyramidLevel:T,tileInfo:y,blockBoundary:N}),this._set("rasterInfo",h),u.capabilities.toLowerCase().indexOf("tilemap")>-1&&(F={tileInfo:h.storageInfo.tileInfo,parsedUrl:l.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new _.TilemapCache({layer:F})),[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var o,a,s,l,u,p,c,f,d,_,h,g,m,v,P,x,b;return r.__generator(this,(function(r){switch(r.label){case 0:return s=(o=this.rasterInfo).extent,l=o.pixelSize,[4,this.request({url:this.url+"/tile/"+((a=o.storageInfo).maximumPyramidLevel-e+this._levelOffset)+"/"+t+"/"+n,query:this._slices?{sliceId:i.sliceId||0}:null,responseType:"array-buffer"},i.signal)];case 1:return(u=r.sent())?[4,this.decodePixelBlock(u,{width:a.tileInfo.size[0],height:a.tileInfo.size[1],planes:null,pixelType:null,isPoint:"Elevation"===this.tileType})]:[2,null];case 2:return p=r.sent(),c=a.blockBoundary[e],"jpg"!==a.compression||n>c.minCol&&n<c.maxCol&&t>c.minRow&&t<c.maxRow||(f=a.origin,d=a.blockWidth,_=a.blockHeight,h=Math.pow(2,e),g=Math.round((s.xmin-f.x)/(l.x*h))%d,m=Math.round((s.xmax-f.x)/(l.x*h))%d,v=Math.round((f.y-s.ymax)/(l.x*h))%_,P=Math.round((f.y-s.ymin)/(l.x*h))%_,y.setValidBoundary(p,{x:x=n===c.minCol?g:0,y:b=t===c.minRow?v:0},{width:(n===c.maxCol?m:d)-x,height:(t===c.maxRow?P:_)-b})),[2,p]}}))}))},t.prototype.getSliceIndex=function(e){for(var t=e,r=0;r<this._slices.length;r++){var n=this._slices[r].multidimensionalDefinition;if(n.length===t.length&&!n.some((function(e){var r=t.filter((function(t){return e.variableName===t.variableName&&t.dimensionName===e.dimensionName}))[0];return r?(Array.isArray(e.values[0])?e.values[0][0]:e.values[0])!==(Array.isArray(r.values[0])?r.values[0][0]:r.values[0]):null})))return r}return null},t.prototype.computeBestPyramidLevelForLocation=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this._tilemapCache)return[2,0];if(null===(n=this.identifyPixelLocation(e,0,t.datumTransformation)))return[2,null];o=this.rasterInfo.storageInfo.maximumPyramidLevel-(i=0)+this._levelOffset,a=n.srcLocation,r.label=1;case 1:if(!(o>=0))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._tilemapCache.fetchAvailability(o,n.row,n.col,t)];case 3:return"available"===r.sent()?[3,6]:[3,5];case 4:return r.sent(),[3,5];case 5:return o--,i++,null===(n=this.identifyPixelLocation(a,i,t.datumTransformation))?[2,null]:[3,1];case 6:return-1===o||null==n?[2,null]:[2,i]}}))}))},t.prototype._fetchRasterInfo=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,o,a,l,u,c,f,d,_,h,y,m,v=this;return r.__generator(this,(function(r){return t=this.sourceJSON,o=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),a=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),l=n.SpatialReference.fromJSON(t.spatialReference||t.extent.spatialReference),"Map"===this.tileType?[2,new p({width:o,height:a,bandCount:3,extent:n.Extent.fromJSON(t.extent),spatialReference:l,pixelSize:new n.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:l}),pixelType:"u8",statistics:null})]:(u=e.slice,c=e.signal,f=!!t.hasRasterAttributeTable&&i(this.url+"/rasterAttributeTable",{query:{slice:u,f:"json"},signal:c}).then((function(e){return g.fromJSON(e.data)})).catch((function(){return null})),d=!!t.hasColormap&&i(this.url+"/colormap",{query:{slice:u,f:"json"},signal:c}).then((function(e){return e.data&&e.data.colormap})),_=!!t.hasHistograms&&i(this.url+"/histograms",{query:{slice:u,f:"json"},signal:c}).then((function(e){return e.data&&e.data.histograms})),h=i(this.url+"/keyProperties",{query:{f:"json"},signal:c}).then((function(e){return e.data})).catch((function(){})),y=!!t.hasMultidimensions&&i(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:c}).then((function(e){return e.data&&e.data.multidimensionalInfo})),m=!!t.hasMultidimensions&&i(this.url+"/slices",{query:{f:"json"},signal:c}).then((function(e){return e.data&&e.data.slices})).catch((function(){})),[2,s.all([f,d,_,h,y,m]).then((function(e){var r=null;if(t.minValues&&t.minValues.length===t.bandCount){r=[];for(var i=0;i<t.minValues.length;i++)r.push({min:t.minValues[i],max:t.maxValues[i],avg:t.meanValues[i],stddev:t.stdvValues[i]})}return v._slices=e[5]||null,new p({width:o,height:a,bandCount:t.bandCount,extent:n.Extent.fromJSON(t.extent),spatialReference:l,pixelSize:new n.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:l}),pixelType:t.pixelType.toLowerCase(),statistics:r,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||null,multidimensionalInfo:e[4]||null})}))])}))}))},r.__decorate([u.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0),r.__decorate([u.property()],t.prototype,"tileType",void 0),r.__decorate([u.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],t)}(h)}).apply(null,n))||(e.exports=i)}}]);