(function(){(this||window).webpackJsonp.registerAbsMids({"esri/rasterRenderers":"+UAu","esri/layers/graphics/OptimizedFeature":"/COu","arcgis-js-api/layers/graphics/OptimizedFeature":"/COu","esri/layers/support/rasterFormats/Raw":"0fRT","arcgis-js-api/layers/mixins/ArcGISService":"2fnV","esri/layers/mixins/ArcGISService":"2fnV","esri/renderers/RasterColormapRenderer":"3YLB","arcgis-js-api/tasks/support/RelationshipQuery":"531e","esri/renderers/support/RasterSymbolizer":"6PsE","esri/layers/support/DimensionalDefinition":"7Rj3","esri/tasks/ImageServiceIdentifyTask":"7ia+","esri/layers/support/RasterFunction":"97bx","arcgis-js-api/core/requireUtils":"ADZV","esri/core/requireUtils":"ADZV","esri/layers/support/rasterFormats/Png":"D34G","esri/layers/support/rasterFormats/JpgPlus":"EZfi","arcgis-js-api/layers/ImageryLayer":"G5N4","esri/layers/ImageryLayer":"G5N4","esri/layers/support/FieldsIndex":"I90O","arcgis-js-api/layers/support/FieldsIndex":"I90O","esri/renderers/support/ColormapInfo":"IbdV","esri/layers/graphics/OptimizedGeometry":"Jvs9","arcgis-js-api/layers/graphics/OptimizedGeometry":"Jvs9","arcgis-js-api/layers/support/Field":"KQcO","esri/layers/support/Field":"KQcO","esri/layers/support/RasterInfo":"Kjnw","esri/core/colorUtils":"KtQ6","esri/layers/support/TimeInfo":"N6pD","arcgis-js-api/layers/support/TimeInfo":"N6pD","esri/layers/mixins/ArcGISImageService":"Odfd","esri/layers/support/fieldType":"Q3lp","arcgis-js-api/layers/support/fieldType":"Q3lp","esri/layers/mixins/PortalLayer":"QJ8R","arcgis-js-api/layers/mixins/PortalLayer":"QJ8R","esri/layers/support/rasterFormats/ImageCanvasDecoder":"QT0f","esri/layers/support/rasterFormats/LercCodec":"Rc7o","esri/layers/support/RasterJobHandler":"T/jF","esri/renderers/RasterStretchRenderer":"TnfJ","arcgis-js-api/tasks/support/AttachmentQuery":"TsGx","esri/renderers/support/colorRampUtils":"UVEp","esri/layers/support/rasterFormats/RasterCodec":"WSFd","esri/layers/mixins/RefreshableLayer":"WaJo","arcgis-js-api/layers/mixins/RefreshableLayer":"WaJo","esri/layers/support/imageryRendererUtils":"YM6P","esri/layers/support/rasterFormats/TiffDecoder":"aS1B","esri/support/popupUtils":"begh","arcgis-js-api/support/popupUtils":"begh","esri/tasks/support/ImageServiceIdentifyResult":"bllj","arcgis-js-api/layers/mixins/TemporalLayer":"c/mu","esri/layers/mixins/TemporalLayer":"c/mu","arcgis-js-api/layers/support/TimeReference":"gRHS","esri/renderers/support/stretchRendererUtils":"hBcF","esri/layers/support/rasterFormats/Lerc2Codec":"hP4J","esri/TimeInterval":"kKuP","arcgis-js-api/TimeInterval":"kKuP","esri/tasks/support/ImageServiceIdentifyParameters":"nakx","arcgis-js-api/renderers/visualVariables/support/sizeVariableUtils":"o5TS","esri/layers/support/MosaicRule":"ouPT","esri/layers/support/rasterFormats/Zlib":"r5V0","esri/layers/support/ExportImageServiceParameters":"sNli","esri/tasks/support/FeatureSet":"w1v0","arcgis-js-api/tasks/support/FeatureSet":"w1v0","esri/layers/support/rasterFormats/Jpg":"xIS7","esri/layers/graphics/OptimizedFeatureSet":"xJgq","arcgis-js-api/layers/graphics/OptimizedFeatureSet":"xJgq"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[26,25,44,96,97,104,105,106,107,108,109,115,116,118],{"+UAu":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("V2ZO"),r("Z/W+"),r("3YLB"),r("TnfJ"),r("nHUP")],void 0===(i=(function(e,t,r,o,i,n,a){function s(e,t){if(!e)return null;var o=function(e){return e&&l[e.type]||null}(e);if(o){var i=new o;return i.read(e,t),i}return t&&t.messages&&e&&t.messages.push(new r("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}Object.defineProperty(t,"__esModule",{value:!0}),t.ClassBreaksRenderer=o,t.RasterColormapRenderer=i,t.RasterStretchRenderer=n,t.UniqueValueRenderer=a,t.rasterRendererTypes={key:"type",base:null,typeMap:{"unique-value":t.UniqueValueRenderer,"class-breaks":t.ClassBreaksRenderer,"raster-colormap":t.RasterColormapRenderer,"raster-stretch":t.RasterStretchRenderer}};var l={uniqueValue:t.UniqueValueRenderer,classBreaks:t.ClassBreaksRenderer,rasterStretch:t.RasterStretchRenderer,rasterColormap:t.RasterColormapRenderer};t.read=s,t.fromJSON=function(e,t){return s(e,t)}}).apply(null,o))||(e.exports=i)},"/COu":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("xhoE")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o){void 0===e&&(e=null),void 0===t&&(t={}),this.localId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=o&&(this.objectId=o)}}).apply(null,o))||(e.exports=i)},"0fRT":function(e,t,r){var o;void 0===(o=(function(){"use strict";return{decodeBIP:function(e,t){var r=t.pixelType,o=t.bandCount,i=[],n=t.width*t.height,a=this.getBandCount(e,t);o=o||a;var s,l,u,p,c=e.byteLength-e.byteLength%(n*this._getPixelLength(r)),d=new r(e,0,n*a);for(s=0;s<o;s++){for(p=new r(n),l=0;l<n;l++)p[l]=d[l*a+s];i.push(p)}return c<e.byteLength-1&&(u=this._decodeMask(e.slice(c),t)),{pixels:i,mask:u}},decodeBSQ:function(e,t){var r=t.pixelType,o=t.bandCount;null!=o||(o=this.getBandCount(e,t));var i,n,a=[],s=t.width*t.height,l=s*o,u=e.byteLength-e.byteLength%(s*this._getPixelLength(r)),p=new r(e,0,l);for(i=0;i<o;i++)a.push(p.subarray(i*s,(i+1)*s));return u<e.byteLength-1&&(n=this._decodeMask(e.slice(u),t)),{pixels:a,mask:n}},getBandCount:function(e,t){return Math.floor(e.byteLength/(t.width*t.height*this._getPixelLength(t.pixelType)))},_getPixelLength:function(e){var t=1;switch(e){case Uint8Array:case Int8Array:case Uint8ClampedArray:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},_decodeMask:function(e,t){var r=t.width*t.height;if(8*e.byteLength<r)return null;var o=new Uint8Array(e,0,Math.ceil(r/8)),i=new Uint8Array(t.width*t.height),n=0,a=0,s=0,l=0;for(s=0;s<o.length-1;s++)for(a=o[s],l=7;l>=0;l--)i[n++]=a>>l&1;for(l=7;n<r-1;)i[n++]=(a=o[o.length-1])>>l&1,l--;return i}}}).apply(null,[]))||(e.exports=o)},"2fnV":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("qsST"),r("Vx27"),r("8CIp")],void 0===(i=(function(e,t,r,o,i,n,a){Object.defineProperty(t,"__esModule",{value:!0});var s=i.getLogger("esri.layers.mixins.ArcGISService");t.ArcGISService=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=a.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",a.sanitizeUrl(e,s))},enumerable:!0,configurable:!0}),o([n.property({dependsOn:["url"]})],t.prototype,"title",null),o([n.property({type:String})],t.prototype,"url",null),o([n.subclass("esri.layers.mixins.ArcGISService")],t)}(n.declared(e))}}).apply(null,o))||(e.exports=i)},"3YLB":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("dxjN"),r("ycL1"),r("Vx27"),r("IbdV"),r("UVEp")],void 0===(i=(function(e,t,r,o,i,n,a,s,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="raster-colormap",r}var i;return r(t,e),i=t,t.createFromColormap=function(e){if(!e)return null;var t=5===e[0].length,r=e.sort((function(e){return e[0]-e[1]})).map(t?function(e){return s.fromJSON({value:e[0],color:e.slice(1,5),label:String(e[0])})}:function(e){return s.fromJSON({value:e[0],color:e.slice(1,4).concat([255]),label:String(e[0])})});return new i({colormapInfos:r})},t.createFromColorramp=function(e){var t=l.convertColorRampToColormap(e,256);return i.createFromColormap(t)},t.prototype.clone=function(){return new i({colormapInfos:this.colormapInfos.map((function(e){return e.toJSON()}))})},t.prototype.extractColormap=function(){return this.colormapInfos.map((function(e){return[e.value,e.color.r,e.color.g,e.color.b,e.color.a>1?e.color.a:255*e.color.a&255]})).sort((function(e,t){return e[0]-t[0]}))},o([a.property({type:[s],json:{write:!0}})],t.prototype,"colormapInfos",void 0),o([a.enumeration.serializable()({rasterColormap:"raster-colormap"})],t.prototype,"type",void 0),i=o([a.subclass("esri.renderers.RasterColormapRenderer")],t)}(a.declared(n.JSONSupport))}).apply(null,o))||(e.exports=i)},"531e":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("TMur"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(i=(function(e,t,r,o,i,n,a,s,l){var u=function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.source=null,r.where=null,r}var n;return r(t,e),n=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new n(a.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where}))},o([s.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),o([s.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),o([s.property({type:Date})],t.prototype,"historicMoment",void 0),o([s.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),o([s.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),o([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),o([s.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),o([s.property({type:i.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),o([s.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),o([s.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),o([s.property({json:{write:!0}})],t.prototype,"source",void 0),o([s.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),n=o([s.subclass("esri.tasks.support.RelationshipQuery")],t)}(s.declared(n.JSONSupport));return u.from=l.default(u),u}).apply(null,o))||(e.exports=i)},"6PsE":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("+UAu"),r("ycL1"),r("qsST"),r("Vx27"),r("Kjnw"),r("SAwq"),r("UVEp")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p,c,d,f){var h=u.getLogger("esri.renderers.support.RasterSymbolizer");return function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.readRenderer=function(e,t,r){return s.read(e,r)},t.prototype.bind=function(){if(this.lookup={},!this.renderer)return!1;var e;switch(this.renderer.type){case"unique-value":e=this._updateUVRenderer(this.renderer);break;case"raster-colormap":e=this._updateColormapRenderer(this.renderer);break;case"raster-stretch":e=this._updateStretchRenderer(this.renderer);break;case"class-breaks":e=this._updateClassBreaksRenderer(this.renderer)}return e},t.prototype.symbolize=function(e){if(!(e&&e.pixels&&e.pixels.length>0&&0!==e.validPixelCount))return e;try{e.pixels.length>3&&(e=d.extractBands(e,[0,1,2]));var t=void 0;switch(this.renderer.type){case"unique-value":case"raster-colormap":t=this._symbolize_colormap(e);break;case"class-breaks":t=this._symbolize_classBreaks(e);break;case"raster-stretch":t=this._symbolize_stretch(e)}return t}catch(t){return h.error("symbolize",t.message),e}},t.prototype._isLUTChanged=function(e){if(!this.lookup)return!0;if("raster-stretch"===this.renderer.type){if(e)return JSON.stringify(this.renderer.colorRamp.toJSON())!==JSON.stringify(this.lookup.rendererJson.colorRamp);var t=r({},this.renderer.toJSON()),o=r({},this.lookup.rendererJson);return t.colorRamp=null,o.colorRamp=null,JSON.stringify(this.renderer.toJSON())!==JSON.stringify(this.lookup.rendererJson)}return JSON.stringify(this.renderer.toJSON())!==JSON.stringify(this.lookup.rendererJson)},t.prototype._symbolize_colormap=function(e){return this._isLUTChanged()&&!this.bind()?e:d.colorize(e,this.lookup.lut)},t.prototype._symbolize_classBreaks=function(e){var t=["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType)>-1;return this._isLUTChanged()&&!this.bind()?e:t?d.colorize(e,this.lookup.lut):d.remapColor(e,this.lookup.lut)},t.prototype._symbolize_stretch=function(e){var t,o,i,n=this.rasterInfo.pixelType,a=this.renderer,s=["u8","u16","s8","s16"].indexOf(n)>-1,l=a.gamma,u=a.useGamma;if(s){if(a.dynamicRangeAdjustment)o=this.getStretchCutoff(a,e),t=d.createStretchLUT(r({pixelType:n},o,{gamma:u?l:null}));else if(this._isLUTChanged()){if(!this.bind())return e;t=this.lookup?this.lookup.lut:null}else t=this.lookup?this.lookup.lut:null;if(!t)return e;i=d.lookupPixels(e,t)}else o=this.getStretchCutoff(a,e),i=d.stretch(e,r({},o,{gamma:u?l:null}));if(a.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return e;i=d.colorize(i,this.lookup.colorRampLut)}return i},t.prototype._updateUVRenderer=function(e){var t=this.rasterInfo,r=t.bandCount,o=t.attributeTable,i=t.statistics,n=["u8","s8"].indexOf(t.pixelType)>-1&&i&&null!=i[0].min&&null!=i[0].max;if(1!==r||!o&&!n)return!1;var a=e.field;if(!a)return!1;var s=[];if(o){var l=o.fields.filter((function(e){return"value"===e.name.toLowerCase()}))[0];if(!l)return!1;o.features.forEach((function(t){var r=e.uniqueValueInfos.filter((function(e){return String(e.value)===String(t.attributes[a])}))[0],o=r&&r.symbol&&r.symbol.color;o&&s.push([t.attributes[l.name],o.r,o.g,o.b,o.a>1?o.a:Math.round(255*o.a)])}))}else{if("Value"!==a.toLowerCase())return!1;e.uniqueValueInfos.forEach((function(e){var t=e&&e.symbol&&e.symbol.color;t&&s.push([parseInt(e.value,10),t.r,t.g,t.b,t.a>1?t.a:Math.round(255*t.a)])}))}if(0===s.length)return!1;var u=d.createColormapLUT({colormap:s});return this.lookup={rendererJson:e.toJSON(),lut:u},!0},t.prototype._updateColormapRenderer=function(e){var t=e.extractColormap();if(!t||0===t.length)return!1;var r=d.createColormapLUT({colormap:t});return this.lookup={rendererJson:e.toJSON(),lut:r},!0},t.prototype._updateClassBreaksRenderer=function(e){var t=["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType)>-1,r=e.classBreakInfos;if(!r||0===r.length)return!1;var o=r.sort((function(e,t){return e.minValue-t.minValue})),i=o[o.length-1];if(!t){var n=o.map((function(e){return{value:e.minValue,mappedColor:[e.symbol.color.r,e.symbol.color.g,e.symbol.color.b,e.symbol.color.a>1?e.symbol.color.a:Math.round(255*e.symbol.color.a)]}}));return n.push({value:i.maxValue,mappedColor:[i.symbol.color.g,i.symbol.color.b,i.symbol.color.a>1?i.symbol.color.a:Math.round(255*i.symbol.color.a)]}),this.lookup={rendererJson:e.toJSON(),lut:n},!0}var a,s=[],l=0;o.forEach((function(e){a=Math.ceil(e.minValue),l=Math.floor(e.maxValue);for(var t=a;t<l;t++)s.push([t,e.symbol.color.r,e.symbol.color.g,e.symbol.color.b,e.symbol.color.a>1?e.symbol.color.a:Math.round(255*e.symbol.color.a)])})),s.push([i.maxValue,i.symbol.color.r,i.symbol.color.g,i.symbol.color.b,i.symbol.color.a>1?i.symbol.color.a:Math.round(255*i.symbol.color.a)]);var u=d.createColormapLUT({colormap:s,fillUnspecified:!1});return this.lookup={rendererJson:e.toJSON(),lut:u},!0},t.prototype._updateStretchRenderer=function(e){if(!(e.statistics||this.rasterInfo.statistics||e.dynamicRangeAdjustment))return!1;if(!e.dynamicRangeAdjustment&&"percent-clip"===e.stretchType&&!e.histograms&&!this.rasterInfo.histograms)return!1;var t=e.gamma,o=e.useGamma,i=e.colorRamp,n=this.rasterInfo.pixelType;if(!e.dynamicRangeAdjustment&&["u8","u16","s8","s16"].indexOf(n)>-1){var a=this.getStretchCutoff(e),s=d.createStretchLUT(r({pixelType:n},a,{gamma:o?t:null}));this.lookup={rendererJson:e.toJSON(),lut:s}}if(i){var l=f.convertColorRampToColormap(i,256);this.lookup.colorRampLut=d.createColormapLUT({colormap:l}),this.lookup.rendererJson=e.toJSON()}return!0},t.prototype.getStretchCutoff=function(e,t){var r,o,i=e.stretchType;if(e.dynamicRangeAdjustment)if("min-max"===i&&t.statistics)r=t.statistics.map((function(e){return[e.minValue,e.maxValue,0,0]}));else{var n=d.estimateStatisticsHistograms(t);r=n.statistics,o=n.histograms}else r=e.statistics,o=e.histograms||this.rasterInfo.histograms;var a,s,l,u,p,c,f,h,m,y=r||o?(r||o).length:this.rasterInfo.bandCount,g=[],v=[];switch(r[0]instanceof Array||(r=r.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),i){case"min-max":for(h=0;h<y;h++)g[h]=r[h][0],v[h]=r[h][1];break;case"standard-deviation":for(h=0;h<y;h++)g[h]=r[h][2]-e.numberOfStandardDeviations*r[h][3],v[h]=r[h][2]+e.numberOfStandardDeviations*r[h][3],g[h]<r[h][0]&&(g[h]=r[h][0]),v[h]>r[h][1]&&(v[h]=r[h][1]);break;case"percent-clip":for(h=0;h<y;h++){for(a=o[h],p=new Uint32Array(a.size),u=a.counts,l=0,s=(a.max-a.min)/a.size,f=-.5===a.min&&1===s?.5:0,m=0;m<a.size;m++)p[m]=l+=u[m];for(c=e.minPercent*l/100,m=0;m<a.size;m++)if(p[m]>c){g[h]=a.min+s*(m+f);break}for(c=(1-e.maxPercent/100)*l,m=a.size-2;m>=0;m--)if(p[m]<c){v[h]=a.min+s*(m+2-f);break}}break;default:for(h=0;h<y;h++)g[h]=r[h][0],v[h]=r[h][1]}return{minCutOff:g,maxCutOff:v,outMax:e.outputMax||255,outMin:e.outputMin||0}},i([p.property({types:s.rasterRendererTypes,json:{write:!0}})],t.prototype,"renderer",void 0),i([p.reader("renderer")],t.prototype,"readRenderer",null),i([p.property({type:c,json:{write:!0}})],t.prototype,"rasterInfo",void 0),i([p.property({json:{write:!0}})],t.prototype,"lookup",void 0),i([p.subclass("esri.renderers.support.RasterSymbolizer")],t)}(p.declared(l.JSONSupport))}).apply(null,o))||(e.exports=i)},"7Rj3":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(i=(function(e,t,r,o,i,n,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.variableName=null,r.dimensionName=null,r.values=[],r.isSlice=!1,r}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({variableName:this.variableName,dimensionName:this.dimensionName,values:n.clone(this.values),isSlice:this.isSlice})},o([a.property({type:String,json:{write:!0}})],t.prototype,"variableName",void 0),o([a.property({type:String,json:{write:!0}})],t.prototype,"dimensionName",void 0),o([a.property({type:s.types.array(s.types.oneOf([s.types.native(Number),s.types.array(s.types.native(Number))])),json:{write:!0}})],t.prototype,"values",void 0),o([a.property({type:Boolean,json:{write:!0}})],t.prototype,"isSlice",void 0),i=o([a.subclass("esri.layers.support.DimensionalDefinition")],t)}(a.declared(i.JSONSupport))}).apply(null,o))||(e.exports=i)},"7ia+":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("zp6E"),r("LxLY"),r("Vx27"),r("fw2w"),r("FPqO"),r("bllj")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.execute=function(e,t){var r=this;return l.normalizeCentralMeridian(e.geometry?[e.geometry]:[]).then((function(o){var s=e.toJSON(),l=o&&o[0];a.isSome(l)&&(s.geometry=JSON.stringify(l.toJSON()));var u=r._encode(i({f:"json"},r.parsedUrl.query,s)),p=i({query:u},r.requestOptions,t);return n(r.parsedUrl.path+"/identify",p)})).then((function(e){return p.fromJSON(e.data)}))},o([s.subclass("esri.tasks.ImageServiceIdentifyTask")],t)}(s.declared(u))}).apply(null,o))||(e.exports=i)},"97bx":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("9sIV"),r("ycL1"),r("rg9i"),r("Vx27")],void 0===(i=(function(e,t,r,o,i,n,a,s){var l,u=i.createSetFromValues(["Raster","Raster2","DEM","FillRaster"]),p=i.createSetFromValues(["Rasters"]),c=function(e){return e&&e.rasterFunction?f.fromJSON(e):e},d=function(e){return e&&e instanceof f?e.toJSON():e};!function(e){e[e.MOSAIC=0]="MOSAIC",e[e.GROUP=1]="GROUP",e[e.ITEM=2]="ITEM"}(l||(l={}));var f=function(e){function t(t){var r=e.call(this,t)||this;return r.functionArguments=null,r.functionName=null,r.outputPixelType="unknown",r.variableName=null,r.description=null,r.functionDefinition=null,r.thumbnail=null,r}var i;return r(t,e),i=t,t.prototype.readFunctionArguments=function(e,t){return function(e){if(null==e)return null;for(var t={},r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];t[i]=u.has(i)?c(e[i]):p.has(i)&&Array.isArray(e[i])?e[i].map(c):e[i]}return t}(t.arguments||t.rasterFunctionArguments)},t.prototype.writeFunctionArguments=function(e,t,r){for(var o={},i=0,n=Object.keys(e);i<n.length;i++){var a=n[i];o[a]=u.has(a)?d(e[a]):p.has(a)&&Array.isArray(e[a])?e[a].map(d):d(e[a])}this.functionDefinition?t.arguments=o:t[r]=o},t.prototype.readFunctionName=function(e,t){var r=t.rasterFunctionInfos;return t.name||(r&&r.length&&"None"!==r[0].name?r[0].name:t.rasterFunction)},t.prototype.writeFunctionName=function(e,t,r){this.functionDefinition?t.name=e:t[r]=e},t.prototype.readFunctionType=function(e){return l[e]},t.prototype.writeFunctionType=function(e,t,r){t[r]=l[e]},t.prototype.clone=function(){return new i({functionName:this.functionName,functionArguments:a.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,name:this.functionName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})},o([s.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],t.prototype,"functionArguments",void 0),o([s.reader("functionArguments",["rasterFunctionArguments","arguments"])],t.prototype,"readFunctionArguments",null),o([s.writer("functionArguments")],t.prototype,"writeFunctionArguments",null),o([s.property({json:{type:String,write:{target:"rasterFunction"}}})],t.prototype,"functionName",void 0),o([s.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],t.prototype,"readFunctionName",null),o([s.writer("functionName")],t.prototype,"writeFunctionName",null),o([s.enumeration.serializable()({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),s.property({json:{default:"unknown"}})],t.prototype,"outputPixelType",void 0),o([s.property({type:String,json:{read:!0,write:!0}})],t.prototype,"variableName",void 0),o([s.property({type:String,json:{read:!0,write:!0}})],t.prototype,"description",void 0),o([s.property()],t.prototype,"functionType",void 0),o([s.reader("functionType")],t.prototype,"readFunctionType",null),o([s.writer("functionType")],t.prototype,"writeFunctionType",null),o([s.property({type:Object,json:{read:{source:"function"},write:{target:"function"}}})],t.prototype,"functionDefinition",void 0),o([s.property({type:String,json:{read:!0,write:!0}})],t.prototype,"thumbnail",void 0),i=o([s.subclass("esri.layers.support.RasterFunction")],t)}(s.declared(n.JSONSupport));return f}).apply(null,o))||(e.exports=i)},ADZV:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("7bfM"),r("qsST"),r("qMld")],void 0===(i=(function(e,t,r,o,i){Object.defineProperty(t,"__esModule",{value:!0});var n=o.getLogger("esri.core.requireUtils");t.when=function e(t,o){return r.deprecatedFunction(n,"when",{moduleName:"requireUtils",replacement:"Use `promiseUtils.create()` instead.",version:"4.10",warnOnce:!0}),Array.isArray(o)?i.create((function(e){t(o,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)}))})):e(t,[o]).then((function(e){return e[0]}))},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}).apply(null,o))||(e.exports=i)},D34G:function(e,t,r){var o,i;o=[r("r5V0")],void 0===(i=(function(e){return function(t){function r(e){var t,r,o,i,n,a,s,l,u,p,c,d;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),s=(function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),r=this.readUInt16()||100,i.delay=1e3*o/r,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===s&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,p=0;0<=t?p<t:p>t;0<=t?++p:--p)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(l=255-this.transparency.indexed.length)>0)for(c=0;0<=l?c<l:c>l;0<=l?++c:--c)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":n=(u=this.read(t)).indexOf(0),a=String.fromCharCode.apply(String,u.slice(0,n)),this.text[a]=String.fromCharCode.apply(String,u.slice(n+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var o,i,n;return r.load=function(e,t,o){var i;return"function"==typeof t&&(o=t),(i=new XMLHttpRequest).open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){var e;return e=new r(new Uint8Array(i.response||i.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof o?o(e):void 0},i.send(null)},r.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(t){var r,o,i,n,a,s,l,u,p,c,d,f,h,m,y,g,v,w,b,x,S,I;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new e(t)).getBytes(),y=(d=this.pixelBitlength/8)*this.width,f=new Uint8Array(y*this.height),s=t.length,m=0,h=0,o=0;h<s;){switch(t[h++]){case 0:for(n=w=0;w<y;n=w+=1)f[o++]=t[h++];break;case 1:for(n=b=0;b<y;n=b+=1)r=t[h++],a=n<d?0:f[o-d],f[o++]=(r+a)%256;break;case 2:for(n=x=0;x<y;n=x+=1)r=t[h++],i=(n-n%d)/d,f[o++]=((g=m&&f[(m-1)*y+i*d+n%d])+r)%256;break;case 3:for(n=S=0;S<y;n=S+=1)r=t[h++],i=(n-n%d)/d,a=n<d?0:f[o-d],g=m&&f[(m-1)*y+i*d+n%d],f[o++]=(r+Math.floor((a+g)/2))%256;break;case 4:for(n=I=0;I<y;n=I+=1)r=t[h++],i=(n-n%d)/d,0===m?g=v=0:(g=f[(m-1)*y+i*d+n%d],v=i&&f[(m-1)*y+(i-1)*d+n%d]),l=(a=n<d?0:f[o-d])+g-v,u=Math.abs(l-a),p=Math.abs(l-g),c=Math.abs(l-v),f[o++]=(r+(u<=p&&u<=c?a:p<=c?g:v))%256;break;default:throw new Error("Invalid filter algorithm: "+t[h-1])}m++}return f},r.prototype.decodePalette=function(){var e,t,r,o,i,n,a,s,l;for(r=this.palette,n=this.transparency.indexed||[],i=new Uint8Array((n.length||0)+r.length),o=0,e=0,t=a=0,s=r.length;a<s;t=a+=3)i[o++]=r[t],i[o++]=r[t+1],i[o++]=r[t+2],i[o++]=null!=(l=n[e++])?l:255;return i},r.prototype.copyToImageData=function(e,t){var r,o,i,n,a,s,l,u,p,c,d;if(o=this.colors,p=null,r=this.hasAlphaChannel,this.palette.length&&(p=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),o=4,r=!0),u=(i=e.data||e).length,a=p||t,n=s=0,1===o)for(;n<u;)l=p?4*t[n/4]:s,c=a[l++],i[n++]=c,i[n++]=c,i[n++]=c,i[n++]=r?a[l++]:this.transparency.grayscale&&this.transparency.grayscale===c?0:255,s=l;else for(;n<u;)l=p?4*t[n/4]:s,i[n++]=a[l++],i[n++]=a[l++],i[n++]=a[l++],i[n++]=r?a[l++]:this.transparency.rgb&&this.transparency.rgb[1]===a[l-3]&&this.transparency.rgb[3]===a[l-2]&&this.transparency.rgb[5]===a[l-1]?0:255,s=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},i=t.document&&t.document.createElement("canvas"),n=i&&i.getContext("2d"),o=function(e){var t;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=i.toDataURL(),t},r.prototype.decodeFrames=function(e){var t,r,i,n,a,s,l,u;if(this.animation){for(u=[],r=a=0,s=(l=this.animation.frames).length;a<s;r=++a)i=e.createImageData((t=l[r]).width,t.height),n=this.decodePixels(new Uint8Array(t.data)),this.copyToImageData(i,n),t.imageData=i,u.push(t.image=o(i));return u}},r.prototype.renderFrame=function(e,t){var r,o,i;return r=(o=this.animation.frames)[t],i=o[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},r.prototype.animate=function(e){var t,r,o,i,n,a,s=this;return r=0,i=(a=this.animation).numFrames,o=a.frames,n=a.numPlays,(t=function(){var a,l;if(a=r++%i,l=o[a],s.renderFrame(e,a),i>1&&r/i<n)return s.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},r}(this)}).apply(null,o))||(e.exports=i)},EZfi:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("xIS7"),r("r5V0")],void 0===(i=(function(e,t,r,o){return function(){function e(){}return e.decode=function(e){var t=new Uint8Array(e),i=new r;i.parse(t);var n,a=i.width,s=i.height,l=i.numComponents,u=i.eof,p=i.getData(a,s,!0),c=a*s,d=0,f=0,h=0;if(u<t.length-1){var m=new o(t.subarray(u)).getBytes();n=new Uint8Array(c);var y=0;for(d=0;d<m.length;d++)for(h=7;h>=0;h--)n[y++]=m[d]>>h&1}var g,v=null;if(1===l)v=[p,p,p];else{for(v=[],d=0;d<3;d++)g=new Uint8Array(c),v.push(g);for(h=0,f=0;f<c;f++)for(d=0;d<3;d++)v[d][f]=p[h++]}return{width:a,height:s,pixels:v,mask:n}},e}()}).apply(null,o))||(e.exports=i)},G5N4:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("Q2wQ"),r("HZ3d"),r("ifLZ"),r("LxLY"),r("EUqE"),r("Vx27"),r("0RER"),r("Odfd"),r("2fnV"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("c/mu"),r("EtsK"),r("begh")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p,c,d,f,h,m,y,g,v,w,b){return function(e){function t(t,r){var o=e.call(this,t)||this;return o.legendEnabled=!0,o.isReference=null,o.operationalLayerType="ArcGISImageServiceLayer",o.popupEnabled=!0,o.popupTemplate=null,o.type="imagery",o}return r(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(e){var t=this,r=l.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),this.when()},Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),t.prototype.createPopupTemplate=function(e){var t=this.rasterFields,r=this.title,o=new Set,i=!1,n=!1;this.capabilities&&(n=(i=this.capabilities&&this.capabilities.some((function(e){return"catalog"===e.toLowerCase()}))||this.fields&&this.fields.length>0)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));var a=new Set;i&&(a.add("raster.itempixelvalue"),n&&a.add("raster.magnitude").add("raster.direction"));for(var s=0,l=t;s<l.length;s++){var u=l[s],p=u.name.toLowerCase();a.has(p)||p.indexOf("raster.servicepixelvalue.")>-1||o.add(u.name)}return b.createPopupTemplate({fields:t,title:r,visibleFieldNames:o},e)},t.prototype.redraw=function(){this.emit("redraw")},o([p.property(w.legendEnabled)],t.prototype,"legendEnabled",void 0),o([p.property({type:["show","hide"]})],t.prototype,"listMode",void 0),o([p.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),o([p.property({type:["ArcGISImageServiceLayer"]})],t.prototype,"operationalLayerType",void 0),o([p.property(w.popupEnabled)],t.prototype,"popupEnabled",void 0),o([p.property({type:s,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),o([p.property({readOnly:!0,dependsOn:["fields","title"]})],t.prototype,"defaultPopupTemplate",null),o([p.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),o([p.subclass("esri.layers.ImageryLayer")],t)}(p.declared(v.TemporalLayer(y.RefreshableLayer(g.ScaleRangeLayer(h.OperationalLayer(m.PortalLayer(d.ArcGISImageService(f.ArcGISService(u.MultiOriginJSONMixin(c))))))))))}).apply(null,o))||(e.exports=i)},I90O:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("xhoE")],void 0===(i=(function(e,t,r){function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function i(e){return e.toLowerCase().trim()}return function(){function e(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],e){for(var t=[],r=0,n=e;r<n.length;r++){var a=n[r],s=a&&a.name;if(s){var l=i(s);this._fieldsMap.set(s,a),this._fieldsMap.set(l,a),t.push(l),o(a)&&(this.dateFields.push(a),this._dateFieldsSet.add(a))}}t.sort(),this.uid=t.join(",")}}return e.prototype.destroy=function(){this._fieldsMap.clear()},e.prototype.has=function(e){return null!=this.get(e)},e.prototype.get=function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(i(e)):void 0},e.prototype.isDateField=function(e){return this._dateFieldsSet.has(this.get(e))},e.prototype.normalizeFieldName=function(e){var t=this.get(e);if(t)return t.name},e}()}).apply(null,o))||(e.exports=i)},IbdV:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("dxjN"),r("QDcU"),r("ycL1"),r("Vx27")],void 0===(i=(function(e,t,r,o,i,n,a,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.label=null,t.color=null,t}return r(t,e),o([s.property({type:Number,json:{write:!0}})],t.prototype,"value",void 0),o([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),o([s.property({type:n,json:{write:!0}})],t.prototype,"color",void 0),o([s.subclass("esri.renderers.support.ColormapInfo")],t)}(s.declared(a.JSONSupport))}).apply(null,o))||(e.exports=i)},Jvs9:function(e,t,r){var o,i;o=[r.dj.c(e.i),t],void 0===(i=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}}).apply(null,o))||(e.exports=i)},KQcO:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ImIS"),r("ycL1"),r("Vx27"),r("1dvD"),r("ZsQS"),r("Q3lp")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u){var p=new i.default({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return function(e){function t(t){var r=e.call(this,t)||this;return r.alias=null,r.defaultValue=void 0,r.description=null,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r.valueType=null,r}var i;return r(t,e),i=t,t.prototype.readDescription=function(e,t){var r,o=t.description;try{r=JSON.parse(o)}catch(e){}return r?r.value:null},t.prototype.readValueType=function(e,t){var r,o=t.description;try{r=JSON.parse(o)}catch(e){}return r?p.fromJSON(r.fieldValueType):null},t.prototype.clone=function(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})},o([a.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),o([a.property({type:[String,Number],json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),o([a.property()],t.prototype,"description",void 0),o([a.reader("description")],t.prototype,"readDescription",null),o([a.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],t.prototype,"domain",void 0),o([a.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),o([a.property({type:s.Integer,json:{write:!0}})],t.prototype,"length",void 0),o([a.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),o([a.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),o([a.enumeration.serializable()(u.kebabDict)],t.prototype,"type",void 0),o([a.property()],t.prototype,"valueType",void 0),o([a.reader("valueType",["description"])],t.prototype,"readValueType",null),i=o([a.subclass("esri.layers.support.Field")],t)}(a.declared(n.JSONSupport))}).apply(null,o))||(e.exports=i)},Kjnw:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("ycL1"),r("Vx27"),r("N7S/"),r("w1v0")],void 0===(i=(function(e,t,r,o,i,n,a,s,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.attributeTable=null,r.bandCount=null,r.colormap=null,r.extent=null,r.format=void 0,r.histograms=null,r.keyProperties=null,r.multidimensionalInfo=null,r.pixelSize=null,r.pixelType=null,r.spatialReference=null,r.statistics=null,r}return o(t,e),Object.defineProperty(t.prototype,"dataType",{get:function(){var e=this.keyProperties&&this.keyProperties.DataType;return e?e.toLowerCase():"generic"},enumerable:!0,configurable:!0}),i([a.property({type:l,json:{write:!0}})],t.prototype,"attributeTable",void 0),i([a.property({json:{write:!0}})],t.prototype,"bandCount",void 0),i([a.property({json:{write:!0}})],t.prototype,"colormap",void 0),i([a.property({type:String,readOnly:!0})],t.prototype,"dataType",null),i([a.property({type:s,json:{write:!0}})],t.prototype,"extent",void 0),i([a.property({json:{write:!0}})],t.prototype,"format",void 0),i([a.property({json:{write:!0}})],t.prototype,"histograms",void 0),i([a.property({json:{write:!0}})],t.prototype,"keyProperties",void 0),i([a.property({json:{write:!0}})],t.prototype,"multidimensionalInfo",void 0),i([a.property({json:{write:!0}})],t.prototype,"pixelSize",void 0),i([a.property({json:{write:!0}})],t.prototype,"pixelType",void 0),i([a.property({json:{write:!0}})],t.prototype,"spatialReference",void 0),i([a.property({json:{write:!0}})],t.prototype,"statistics",void 0),i([a.subclass("esri.layers.support.RasterInfo")],t)}(a.declared(n.JSONSupport))}).apply(null,o))||(e.exports=i)},KtQ6:function(e,t,r){var o,i;o=[r.dj.c(e.i),t],void 0===(i=(function(e,t){function r(e){return"h"in e&&"s"in e&&"v"in e}function o(e){return"l"in e&&"a"in e&&"b"in e}function i(e){return"l"in e&&"c"in e&&"h"in e}function n(e){return"x"in e&&"y"in e&&"z"in e}function a(e,t){var r,o,i=[];if(e[0].length!==t.length)throw"dimensions do not match";var n=e.length,a=e[0].length,s=0;for(r=0;r<n;r++){for(s=0,o=0;o<a;o++)s+=e[r][o]*t[o];i.push(s)}return i}function s(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),r=a(d,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function l(e){var t=a(f,[e.x/100,e.y/100,e.z/100]).map((function(e){var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function u(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function p(e){var t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function c(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:i(e)?function(e){return l(p(function(e){var t=e.c,r=e.h;return{l:e.l,a:t*Math.cos(r),b:t*Math.sin(r)}}(e)))}(e):o(e)?function(e){return l(p(e))}(e):n(e)?l(e):r(e)?function(e){var t,r=(e.h+360)%360/60,o=e.v/100*255,i=o*(e.s/100),n=i*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:t={r:i,g:n,b:0};break;case 1:t={r:n,g:i,b:0};break;case 2:t={r:0,g:i,b:n};break;case 3:t={r:0,g:n,b:i};break;case 4:t={r:n,g:0,b:i};break;case 5:case 6:t={r:i,g:0,b:n};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+o-i),t.g=Math.round(t.g+o-i),t.b=Math.round(t.b+o-i),t}(e):void 0}Object.defineProperty(t,"__esModule",{value:!0});var d=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],f=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];t.toRGB=c,t.toHSV=function(e){return r(e)?e:function(e){var t,r,o,i=e.r,n=e.g,a=e.b,s=Math.max(i,n,a),l=s-Math.min(i,n,a);return o=s,0===l?t=0:s===i?t=(n-a)/l%6:s===n?t=(a-i)/l+2:s===a&&(t=(i-n)/l+4),r=0===l?0:l/o,t<0&&(t+=6),{h:t*=60,s:r*=100,v:o*=100/255}}(c(e))},t.toLAB=function(e){return o(e)?e:function(e){return u(s(e))}(c(e))},t.toLCH=function(e){return i(e)?e:function(e){return function(e){var t=e.l,r=e.a,o=e.b,i=Math.sqrt(r*r+o*o),n=Math.atan2(o,r);return{l:t,c:i,h:n=n>0?n:n+2*Math.PI}}(u(s(e)))}(c(e))},t.toXYZ=function(e){return n(e)?e:s(c(e))}}).apply(null,o))||(e.exports=i)},N6pD:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("9gfz"),r("kKuP"),r("ycL1"),r("rg9i"),r("Vx27"),r("gRHS"),r("ml7j")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p){return function(e){function t(t){var r=e.call(this,t)||this;return r.cumulative=!1,r.endField=null,r.fullTimeExtent=null,r.hasLiveData=!1,r.interval=null,r.startField=null,r.timeReference=null,r.trackIdField=null,r.useTime=!0,r}var a;return r(t,e),a=t,t.prototype.readFullTimeExtent=function(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?new i({start:t.timeExtent[0],end:t.timeExtent[1]}):null},t.prototype.writeFullTimeExtent=function(e,t){t.timeExtent=e&&e.start&&e.end?[e.start.getTime(),e.end.getTime()]:null},t.prototype.readInterval=function(e,t){return t.timeInterval&&t.timeIntervalUnits?new n({value:t.timeInterval,unit:p.timeUnitKebabDictionary.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new n({value:t.defaultTimeInterval,unit:p.timeUnitKebabDictionary.fromJSON(t.defaultTimeIntervalUnits)}):null},t.prototype.writeInterval=function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null},t.prototype.clone=function(){var e=this,t=e.fullTimeExtent,r=e.trackIdField,o=e.useTime;return new a({cumulative:e.cumulative,endField:e.endField,hasLiveData:e.hasLiveData,interval:e.interval,startField:e.startField,timeReference:s.clone(e.timeReference),fullTimeExtent:s.clone(t),trackIdField:r,useTime:o})},o([l.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],t.prototype,"cumulative",void 0),o([l.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],t.prototype,"endField",void 0),o([l.property({type:i,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"fullTimeExtent",void 0),o([l.reader("fullTimeExtent",["timeExtent"])],t.prototype,"readFullTimeExtent",null),o([l.writer("fullTimeExtent")],t.prototype,"writeFullTimeExtent",null),o([l.property({type:Boolean,json:{write:!0}})],t.prototype,"hasLiveData",void 0),o([l.property({type:n,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"interval",void 0),o([l.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],t.prototype,"readInterval",null),o([l.writer("interval")],t.prototype,"writeInterval",null),o([l.property({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],t.prototype,"startField",void 0),o([l.property({type:u,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"timeReference",void 0),o([l.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"trackIdField",void 0),o([l.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],t.prototype,"useTime",void 0),a=o([l.subclass("esri.layers.support.TimeInfo")],t)}(l.declared(a.JSONSupport))}).apply(null,o))||(e.exports=i)},Odfd:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("TMur"),r("jZlN"),r("+UAu"),r("zp6E"),r("ma1f"),r("ImIS"),r("rg9i"),r("qsST"),r("LxLY"),r("qMld"),r("jfWY"),r("Vx27"),r("1dvD"),r("EtsK"),r("7Rj3"),r("sNli"),r("KQcO"),r("I90O"),r("YM6P"),r("ouPT"),r("dXLH"),r("97bx"),r("Kjnw"),r("T/jF"),r("WSFd"),r("6PsE"),r("7ia+"),r("uajq"),r("w1v0"),r("nakx"),r("IpeC")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p,c,d,f,h,m,y,g,v,w,b,x,S,I,R,T,C,k,O,A,D,P,N,M,_,j,F,U){Object.defineProperty(t,"__esModule",{value:!0});var L=h.getLogger("esri.layers.mixins.ArcGISImageService"),E=d.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),B=d.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),V=d.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});t.ArcGISImageService=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._functionRasterInfos={},t._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},t._symbolizer=null,t._defaultServiceMosaicRule=null,t.rasterAttributeTableFieldPrefix="Raster.",t.adjustAspectRatio=null,t.bandCount=null,t.bandIds=void 0,t.capabilities=null,t.compressionQuality=void 0,t.compressionTolerance=.01,t.copyright=null,t.definitionExpression=null,t.exportImageServiceParameters=null,t.rasterInfo=null,t.fields=null,t.fullExtent=null,t.hasMultidimensions=!1,t.imageMaxHeight=4100,t.imageMaxWidth=4100,t.interpolation=void 0,t.multidimensionalInfo=null,t.noData=null,t.noDataInterpretation=void 0,t.objectIdField=null,t.pixelSizeX=null,t.pixelSizeY=null,t.pixelFilter=null,t.raster=void 0,t.viewId=void 0,t.renderer=null,t.rasterAttributeTable=null,t.rasterFunctionInfos=null,t.serviceDataType=null,t.spatialReference=null,t.pixelType=null,t.serviceRasterInfo=null,t.sourceJSON=null,t.url=null,t.version=null,t}return o(t,e),t.prototype.initialize=function(){this._set("exportImageServiceParameters",new S.ExportImageServiceParameters({layer:this}))},t.prototype.readDefaultServiceMosaicRule=function(e,t){return C.fromJSON(t)},Object.defineProperty(t.prototype,"rasterFunctionNamesIndex",{get:function(){var e=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos.length<1?e:(this.rasterFunctionInfos.forEach((function(t){e.set(t.name.toLowerCase().replace(/ /gi,"_"),t.name)})),e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryTask",{get:function(){return new _({url:this.url})},enumerable:!0,configurable:!0}),t.prototype.readCapabilities=function(e){return e&&e.split(",").map((function(e){return e.trim()}))},t.prototype.writeCompressionQuality=function(e,t,r){null!=e&&"lerc"!==this.format&&(t[r]=e)},t.prototype.writeCompressionTolerance=function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)},Object.defineProperty(t.prototype,"fieldsIndex",{get:function(){return this.fields?new R(this.fields):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._get("format")||(null!=this.pixelFilter?"lerc":"jpgpng")},set:function(e){e&&["png","png8","png24","png32","jpg","bmp","jpgpng","lerc","tiff"].indexOf(e.toLowerCase())>-1&&this._set("format",e.toLowerCase())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mosaicRule",{set:function(e){var t=e;t&&t.mosaicMethod&&(t=C.fromJSON(r({},t.toJSON(),{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)},enumerable:!0,configurable:!0}),t.prototype.readMosaicRule=function(e,t){return C.fromJSON(e||t.mosaicRule||t)},t.prototype.writeMosaicRule=function(e,t,r){var o=this.mosaicRule,i=this.definitionExpression;o?i&&i!==o.where&&((o=o.clone()).where=i):i&&(o=new C({where:i})),this._isValidCustomizedMosaicRule(o)&&(t[r]=o.toJSON())},t.prototype.writeNoData=function(e,t,r){null!=e&&"number"==typeof e&&(t[r]=e)},t.prototype.readObjectIdField=function(e,t){if(!e){var r=t.fields.filter((function(e){return"esriFieldTypeOID"===e.type||"oid"===e.type}));e=r&&r[0]&&r[0].name}return e},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this.url?g.urlToObject(this.url):null},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var o=u.read(t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,r)||void 0;if(null!=o)return T.isSupportedRendererType(o)||L.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),o},Object.defineProperty(t.prototype,"rasterFields",{get:function(){var e=this.rasterAttributeTableFieldPrefix||"Raster.",t=new I({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),r=new I({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=new I({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),i=this.fields?f.clone(this.fields):[];i.push(r),this.capabilities&&this.capabilities.some((function(e){return"catalog"===e.toLowerCase()}))&&this.fields&&this.fields.length>0&&i.push(t),this.version>=10.4&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some((function(e){return"none"===e.name.toLowerCase()}))&&i.push(o),this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((function(e){return"none"!==e.name.toLowerCase()})).forEach((function(e){i.push(new I({name:"Raster.ServicePixelValue."+e.name,alias:e.name,domain:null,editable:!1,length:50,type:"string"}))})),null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(i.push(new I({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),i.push(new I({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));var n=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(n&&n.length>0){var a=n.filter((function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(t){var r=f.clone(t);return r.name=e+t.name,r}));i=i.concat(a)}return i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingRule",{set:function(e){var t=e;t&&t.rasterFunction&&(t=O.fromJSON(r({},t.toJSON(),{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)},enumerable:!0,configurable:!0}),t.prototype.readRenderingRule=function(e,t){var r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&"None"!==r[0].name?O.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null},t.prototype.writeRenderingRule=function(e,t,r){this._isRFTJson(e)||(t[r]=e.toJSON())},t.prototype.readSpatialReference=function(e,t){var r=e||t.extent.spatialReference;return r?s.SpatialReference.fromJSON(r):null},t.prototype.readPixelType=function(e){return V.fromJSON(e)||e},t.prototype.writePixelType=function(e,t,r){(m.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[r]=V.toJSON(e))},t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("fields")||t.hasOwnProperty("timeInfo")?10:9.3),r},t.prototype.applyFilter=function(e){var t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t},t.prototype.applyRenderer=function(e,t){return a(this,void 0,void 0,(function(){var r,o,i,a;return n(this,(function(n){switch(n.label){case 0:return r=e,this._isPicture()||!this.renderer||!this._symbolizer||this.pixelFilter?[3,5]:(o=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),(i=this._rasterJobHandler.instance)?o?(this._cachedRendererJson=this.renderer.toJSON(),this._symbolizer.bind(),[4,i.updateSymbolizer(this._symbolizer,t)]):[3,2]:[3,4]);case 1:n.sent(),n.label=2;case 2:return[4,i.symbolize(e.pixelBlock,t)];case 3:return a=n.sent(),r={extent:e.extent,pixelBlock:a},[3,5];case 4:r={extent:e.extent,pixelBlock:this._symbolizer.symbolize(e.pixelBlock)},n.label=5;case 5:return[2,r]}}))}))},t.prototype.destroy=function(){this._shutdownJobHandler()},t.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++},t.prototype.decreaseRasterJobHandlerUsage=function(){--this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()},t.prototype.fetchImage=function(e,t,r,o){var i=this;if(void 0===o&&(o={}),null==e||null==t||null==r)return y.reject(new c("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var n=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:o.signal}):null;return y.when(n).then((function(n){n&&(i.rasterInfo=n);var a=i.getExportImageServiceParameters(e,t,r,o.timeExtent);return i._requestArrayBuffer({imageServiceParameters:a,imageProps:{extent:e,width:t,height:r,format:i.format},requestAsImageElement:o.requestAsImageElement&&!i.pixelFilter||!1,signal:o.signal})}))},t.prototype.fetchKeyProperties=function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return p(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return e.data}))},t.prototype.fetchRasterAttributeTable=function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return this.version<10.1?y.reject(new c("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):p(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return j.fromJSON(e.data)}))},t.prototype.getCatalogItemRasterInfo=function(e,t){return a(this,void 0,void 0,(function(){var o,i,a,l,u;return n(this,(function(n){switch(n.label){case 0:return o=p(this.parsedUrl.path+"/"+e+"/info",r({query:this._getQueryParams(),responseType:"json"},t)).then((function(e){return e.data})),i=p(this.parsedUrl.path+"/"+e+"/info/keyProperties",r({query:this._getQueryParams(),responseType:"json"},t)).then((function(e){return e.data})).catch((function(){})),[4,y.all([o,i])];case 1:return(a=n.sent())[0]?(l=s.Extent.fromJSON(a[0].extent),u=a[0].statistics?a[0].statistics.map((function(e){return{min:e[0],max:e[1],avg:e[2],stddev:e[3]}})):null,[2,new A({bandCount:a[0].bandCount,extent:l,spatialReference:l.sr,pixelSize:new s.Point({x:a[0].pixelSizeX,y:a[0].pixelSizeY,spatialReference:l.sr}),pixelType:a[0].pixelType.toLowerCase(),statistics:u,histograms:a[0].histograms,keyProperties:a[1]})]):[2,void 0]}}))}))},t.prototype.getCatalogItemICSInfo=function(e,t){return a(this,void 0,void 0,(function(){var o,i,a,l,u,c,d,f,h,m,g,v,w,b,x,S,I,R,T,C,k,O,A,D,P,N,M,_,j;return n(this,(function(n){switch(n.label){case 0:return[4,p(this.parsedUrl.path+"/"+e+"/info/ics",r({query:this._getQueryParams(),responseType:"json"},t))];case 1:if(o=n.sent().data,!(i=o&&o.ics))return[2,void 0];if(a=this.version>=10.7?p(this.parsedUrl.path+"/"+e+"/info/icstopixel",r({query:this._getQueryParams(),responseType:"json"},t)).then((function(e){return e.data})).catch((function(){return{}})):{},!(l=i.extent.spatialReference))for(u in i.geodataXform)i.geodataXform[u].spatialReference&&(l=i.geodataXform[u].spatialReference);for(c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[i.extent]}),inSR:l.wkid||l,outSR:"0:"+e},d=p(this.parsedUrl.path+"/project",r({query:this._getQueryParams(c),responseType:"json"},t)).then((function(e){return e.data})),h=(i.extent.xmin+i.extent.xmax)/2,g=i.extent.ymin+(m=(i.extent.ymax-i.extent.ymin)/(1+(f=5))),v=[],P=0;P<f;P++)v.push({x:h,y:g+m*P});return w={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:v}),inSR:l.wkid||l,outSR:"0:"+e},b=p(this.parsedUrl.path+"/project",r({query:this._getQueryParams(w),responseType:"json"},t)).then((function(e){return e.data})),[4,y.all([a,d,b])];case 2:for(x=n.sent(),null==(S=x[0].ipxf)&&(I=i.geodataXform&&i.geodataXform.xf_0)&&"topup"===I.name.toLowerCase()&&(S={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:I.coefficients,cellsizeRatio:0,type:"GeometricXform"}}),(R=s.Extent.fromJSON(x[1]&&x[1].geometries&&x[1].geometries[0]))&&(R.spatialReference=new s.SpatialReference({wkid:0,imageCoordinateSystem:i})),T=x[2].geometries.filter((function(e){return null!=e})),C=T.length,k=0,O=0,A=0,D=0,P=0;P<C;P++)k+=T[P].x,O+=T[P].y,A+=T[P].x*T[P].x,D+=T[P].x*T[P].y;return M=0,_=T[f-1].x>T[0].x,j=T[f-1].y>T[0].y,(N=(C*D-k*O)/(C*A-k*k))==1/0?M=j?90:270:0===N?M=_?0:180:N>0?M=_?180*Math.atan(N)/Math.PI:180*Math.atan(N)/Math.PI+180:N<0&&(M=j?180+180*Math.atan(N)/Math.PI:360+180*Math.atan(N)/Math.PI),[2,{ics:i,icsToPixelTransform:S,icsExtent:R,northDirection:M}]}}))}))},t.prototype.generateRasterInfo=function(e,t){return a(this,void 0,void 0,(function(){var r,o;return n(this,(function(i){switch(i.label){case 0:if((!e||"none"===e.functionName.toLowerCase())&&m.isSome(this.serviceRasterInfo))return[2,this.serviceRasterInfo];if(r=function(e){return e?JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi).map((function(e){return e.replace('"rasterFunction":"',"").replace('"',"")})).join("/"):null}(e),this._functionRasterInfos[r])return[2,this._functionRasterInfos[r]];o=this._generateRasterInfo(e,t),this._functionRasterInfos[r]=o,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o];case 2:return[2,i.sent()];case 3:return i.sent(),this._functionRasterInfos[r]=null,[2,null];case 4:return[2]}}))}))},t.prototype.getExportImageServiceParameters=function(e,t,o,i){var n,a=(e=e.clone().shiftCentralMeridian()).spatialReference;if(a.imageCoordinateSystem){var s=a.imageCoordinateSystem,l=s.id,u=s.referenceServiceName;n=null!=l?u?this.parsedUrl.path.toLowerCase().indexOf("/"+u.toLowerCase()+"/")>-1?"0:"+l:JSON.stringify({icsid:l,icsns:u}):"0:"+l:JSON.stringify({ics:a.imageCoordinateSystem})}else n=a.wkid||JSON.stringify(a.toJSON());m.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var p=this.exportImageServiceParameters.toJSON(),c=p.bandIds,d=p.noData,f=p.mosaicRule,h=p.renderingRule;c instanceof Array&&c.length>0&&(p.bandIds=c.join(",")),d instanceof Array&&d.length>0&&(p.noData=d.join(","));var y=this.timeInfo;f&&f.multidimensionalDefinition&&i&&y&&y.startField&&(f.multidimensionalDefinition=f.multidimensionalDefinition.filter((function(e){return e.dimensionName!==y.startField}))),p.mosaicRule=f&&JSON.stringify(f),p.renderingRule=h&&JSON.stringify(h);var g={};if(i){var v=i.toJSON(),w=v.start,b=v.end;w&&b&&w===b?g.time=""+w:null==w&&null==b||(g.time=(null==w?"null":w)+","+(null==b?"null":b))}return r({bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:n,imageSR:n,size:t+","+o},p,g)},t.prototype.queryRasters=function(e){return this.queryTask.execute(e)},t.prototype.queryVisibleRasters=function(e,t){var r=this;if(!e)return y.reject(new c("imagery-layer: query-visible-rasters","missing query parameter"));var o=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1},i=o.pixelSize,n=o.returnDomainValues,a=o.returnTopmostRaster,l=o.showNoDataRecords,u=!1,p=null,d=null,f=this.rasterFunctionNamesIndex;if(e.outFields&&this.version>=10.4){var h=e.outFields.filter((function(e){return e.toLowerCase().indexOf("raster.servicepixelvalue")>-1&&e.length>"raster.servicepixelvalue".length})).map((function(e){var t=e.slice("raster.servicepixelvalue".length+1);return[r._updateRenderingRulesFunctionName(t,f),t]}));p=h.map((function(e){return new O({functionName:e[0]})})),d=h.map((function(e){return e[1]})),u=e.outFields.some((function(e){return-1===e.toLowerCase().indexOf("raster.servicepixelvalue")})),0===p.length&&(p=null)}var m=!e.outSpatialReference||e.outSpatialReference.equals(this.spatialReference),g=this._getQueryParams({geometry:e.geometry,timeExtent:e.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:this.renderingRule,renderingRules:p,pixelSize:i,returnCatalogItems:u,returnGeometry:m,maxItemCount:a?1:null});delete g.f;var v=new F(g),w=new M({url:this.url}),b=this.generateRasterInfo(this.renderingRule);return y.create((function(t){b.then((function(){w.execute(v).then((function(o){var i=e.outFields;if(u&&!m&&o.catalogItems&&o.catalogItems.features&&o.catalogItems.features.length>0){var a=r.objectIdField||"ObjectId",p=o.catalogItems.features,f=p.map((function(e){return e.attributes&&e.attributes[a]})),h=new U({objectIds:f,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[a]});return r.queryRasters(h).then((function(u){u&&u.features&&u.features.length>0&&u.features.forEach((function(t){p.forEach((function(r){r.attributes[a]===t.attributes[a]&&(r.geometry=new s.Polygon(t.geometry),r.geometry.spatialReference=e.outSpatialReference)}))})),t(r._processVisibleRastersResponse(o,{returnDomainValues:n,templateRRFunctionNames:d,showNoDataRecords:l,templateFields:i}))})).catch((function(){throw new c("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry")}))}t(r._processVisibleRastersResponse(o,{returnDomainValues:n,templateRRFunctionNames:d,showNoDataRecords:l,templateFields:i}))})).catch((function(){throw new c("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}))}))}))},t.prototype._fetchService=function(e){return a(this,void 0,void 0,(function(){var t,r,o,i,a,s=this;return n(this,(function(n){switch(n.label){case 0:return(t=this.sourceJSON)?[3,2]:[4,p(this.parsedUrl.path,{query:this._getQueryParams(),responseType:"json",signal:e})];case 1:r=n.sent(),o=r.ssl,this.sourceJSON=t=r.data,o&&(this.url=this.url.replace(/^http:/i,"https:")),n.label=2;case 2:return this.read(t,{origin:"service",url:this.parsedUrl}),m.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo),i=m.isSome(this.serviceRasterInfo)?y.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:t,signal:e}).then((function(e){return s._set("serviceRasterInfo",e),e})),a=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:e}):null,[2,y.all([i,a]).then((function(e){s._set("rasterInfo",e[1]?e[1]:e[0]),s._configDefaultRenderer(),s.watch("renderer",(function(){return s._configDefaultRenderer()})),s.watch("renderingRule",(function(e){(s.renderer||s._symbolizer||s.popupEnabled&&s.popupTemplate)&&s.generateRasterInfo(e).then((function(e){e&&(s.rasterInfo=e)}))}));var t=m.isSome(s.serviceRasterInfo)&&s.serviceRasterInfo.multidimensionalInfo;t&&s._updateMultidimensionalDefinition(t)}))]}}))}))},t.prototype._initJobHandler=function(){return a(this,void 0,void 0,(function(){var e,t=this;return n(this,(function(r){switch(r.label){case 0:return null!=this._rasterJobHandler.connectionPromise?[2,this._rasterJobHandler.connectionPromise]:(e=new D,this._rasterJobHandler.connectionPromise=e.initialize().then((function(){t._rasterJobHandler.instance=e}),(function(){return null})),[4,this._rasterJobHandler.connectionPromise]);case 1:return r.sent(),[2]}}))}))},t.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0},t.prototype._isPicture=function(){return!this.format||this.format.indexOf("jpg")>-1||this.format.indexOf("png")>-1},t.prototype._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&this.rasterInfo.bandCount>=3){var e=T.getDefaultBandCombination(this.rasterInfo);!e||3===this.rasterInfo.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}this.renderer||(this.renderer=T.createDefaultRenderer(this.rasterInfo,this.bandIds)),this._symbolizer?(this._symbolizer.renderer=this.renderer,this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new N({renderer:this.renderer,rasterInfo:this.rasterInfo}),this._symbolizer.bind()||(this._symbolizer=null)}},t.prototype._clonePixelData=function(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:e.pixelBlock&&e.pixelBlock.clone()}},t.prototype._getQueryParams=function(e){return r({raster:this.raster,viewId:this.viewId,f:"json"},e)},t.prototype._decodePixelBlock=function(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):P.decode(e,t,r)},t.prototype._fetchAuxiliaryRasterInfo=function(e){var t=e&&e.serviceInfo;if(!t)return y.reject(new c("imagery-layer:fetch-metadata","valid serviceInfo is required"));var r=e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,o=e.signal,i=!!(t.hasRasterAttributeTable&&this.version>=10.1)&&p(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:o}).then((function(e){return j.fromJSON(e.data)})).catch((function(){return null})),n=!!(t.hasColormap&&this.version>=10.1)&&p(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:this.version>=10.6?r:null}),signal:o}).then((function(e){return e.data&&e.data.colormap})),a=!!(t.hasHistograms&&this.version>=10.1)&&p(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:o}).then((function(e){return e.data&&e.data.histograms})),l=this.version>=10.3&&p(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:r}),signal:o}).then((function(e){return e.data})).catch((function(){})),u=!!(t.hasMultidimensions&&this.version>=10.3)&&p(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:o}).then((function(e){return e.data&&e.data.multidimensionalInfo}));return y.all([i,n,a,l,u]).then((function(e){var r=null;if(t.minValues&&t.minValues.length===t.bandCount){r=[];for(var o=0;o<t.minValues.length;o++)r.push({min:t.minValues[o],max:t.maxValues[o],avg:t.meanValues[o],stddev:t.stdvValues[o]})}var i=s.SpatialReference.fromJSON(t.spatialReference||t.extent.spatialReference);return new A({bandCount:t.bandCount,extent:s.Extent.fromJSON(t.extent),spatialReference:i,pixelSize:new s.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:i}),pixelType:t.pixelType.toLowerCase(),statistics:r,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||null,multidimensionalInfo:e[4]||null})}))},t.prototype._requestArrayBuffer=function(e){var t=this,o=e.imageProps,i=e.signal;if(e.requestAsImageElement&&!this.pixelFilter&&o.format&&o.format.indexOf("png")>-1)return p(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams(r({f:"image"},e.imageServiceParameters)),signal:i}).then((function(e){return{imageElement:e.data,params:o}}));var n=this._initJobHandler(),a=p(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams(r({f:"image"},e.imageServiceParameters)),signal:i});return y.all([a,n]).then((function(e){var n=e[0].data,a=o.format||"jpgpng",s=a;if("bsq"!==s&&"bip"!==s&&(s=P.getFormat(n)),!s)throw new c("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(n)));var l=a.indexOf("png")>-1&&("png"===s||"jpg"===s),u={signal:i};return l?P.decode(n,r({useCanvas:!0},o),u).then((function(e){return{pixelData:{pixelBlock:e,extent:o.extent},params:o}})):t._decodePixelBlock(n,{width:o.width,height:o.height,planes:null,pixelType:null,noDataValue:null,format:a},u).then((function(e){return{pixelData:{pixelBlock:e,extent:o.extent},params:o}}))}))},t.prototype._generateRasterInfo=function(e,t){return a(this,void 0,void 0,(function(){var o;return n(this,(function(i){switch(i.label){case 0:return[4,p(this.parsedUrl.path,r({query:this._getQueryParams({renderingRule:e}),responseType:"json"},t))];case 1:return o=i.sent().data,[4,this._fetchAuxiliaryRasterInfo(r({serviceInfo:o,renderingRule:e},t))];case 2:return[2,i.sent()]}}))}))},t.prototype._isValidCustomizedMosaicRule=function(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())},t.prototype._updateMultidimensionalDefinition=function(e){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var t=e.variables[0].dimensions,r=[];for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],n=i.extent,a=!0,s=[n[0]];i.hasRanges&&!0===i.hasRanges?(a=!1,s=[i.values[0]]):"stdz"===i.name.toLowerCase()&&Math.abs(n[1])<=Math.abs(n[0])&&(s=[n[1]]),r.push(new x({variableName:"",dimensionName:t[o].name,isSlice:a,values:s}))}if(r.length>0){this.mosaicRule=this.mosaicRule||new C;var l=this.mosaicRule.multidimensionalDefinition;(!l||l&&l.length<=0)&&(this.mosaicRule.multidimensionalDefinition=r)}}},t.prototype._processVisibleRastersResponse=function(e,t){var r=e.value,o=(t=t||{}).templateRRFunctionNames,i=t.showNoDataRecords,n=t.returnDomainValues,a=t.templateFields,s=e.processedValues,u=e.catalogItems&&e.catalogItems.features,p=e.properties&&e.properties.Values&&e.properties.Values.map((function(e){return e.replace(/ /gi,", ")}))||[],c=this.objectIdField||"ObjectId",d=r.toLowerCase().indexOf("nodata")>-1,f=[];if(r&&!u&&!d){var h={};h[c]=0,p=[r],u=[new l(this.fullExtent,null,h)]}if(!u)return[];this._updateResponseFieldNames(u,a);for(var m,y,g=0;g<u.length;g++){if(m=u[g],null!=r&&!d){if("nodata"===(y=p[g]).toLowerCase()&&!i)continue;m.attributes["Raster.ItemPixelValue"]=y,m.attributes["Raster.ServicePixelValue"]=r,this._updateFeatureWithMagDirValues(m,y),this._updateFeatureWithRasterAttributeTableValues(m,this.renderingRule?r:y)}if(m.sourceLayer=this,n&&this._updateFeatureWithDomainValues(m),o&&s&&o.length===s.length)for(var v=0;v<o.length;v++)m.attributes["Raster.ServicePixelValue."+o[v]]=s[v];f.push(u[g])}return f},t.prototype._updateFeatureWithRasterAttributeTableValues=function(e,t){var r=this,o=this.rasterInfo&&this.rasterInfo.attributeTable,i=o&&o.features;if(i){var n=o.fields,a=n.map((function(e){return e.name})).filter((function(e){return"value"===e.toLowerCase()})),s=a&&a[0];if(s){var l=i.filter((function(e){return e.attributes[s]===(null!=t?parseInt(t,10):null)}));l&&l[0]&&n.forEach((function(t){e.attributes[r.rasterAttributeTableFieldPrefix+t.name]=l[0].attributes[t.name]}))}}},t.prototype._updateFeatureWithMagDirValues=function(e,t){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var r=t.replace(" ",",").split(",").map((function(e){return parseFloat(e)})),o=r.map((function(e){return[e]})),i=r.map((function(e){return{minValue:e,maxValue:e,noDataValue:null}})),n=new k({height:1,width:1,pixelType:"f32",pixels:o,statistics:i});this.pixelFilter({pixelBlock:n,extent:new s.Extent(0,0,0,0,this.spatialReference)}),e.attributes["Raster.Magnitude"]=n.pixels[0][0],e.attributes["Raster.Direction"]=n.pixels[1][0]}},t.prototype._updateFeatureWithDomainValues=function(e){var t=this.fields&&this.fields.filter((function(e){return e.domain&&"coded-value"===e.domain.type}));null!=t&&t.forEach((function(t){var r=e.attributes[t.name];if(null!=r){var o=t.domain.codedValues.filter((function(e){return e.code===r}))[0];o&&(e.attributes[t.name]=o.name)}}))},t.prototype._updateResponseFieldNames=function(e,t){if(t&&!(t.length<1)){var r=this.fieldsIndex;r&&e.forEach((function(e){if(e&&e.attributes)for(var o=0,i=t;o<i.length;o++){var n=i[o];if(r.has(n)){var a=r.get(n).name;a!==n&&(e.attributes[n]=e.attributes[a],delete e.attributes[a])}}}))}},t.prototype._updateRenderingRulesFunctionName=function(e,t){if(e&&!(e.length<1)){if("Raw"===e)return e.replace("Raw","None");var r=e.toLowerCase().replace(/ /gi,"_");return t.has(r)?t.get(r):e}},t.prototype._isRFTJson=function(e){return e.name&&e.arguments&&e.function&&e.hasOwnProperty("functionType")},i([v.property()],t.prototype,"_functionRasterInfos",void 0),i([v.property()],t.prototype,"_rasterJobHandler",void 0),i([v.property()],t.prototype,"_symbolizer",void 0),i([v.property()],t.prototype,"_defaultServiceMosaicRule",void 0),i([v.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultServiceMosaicRule",null),i([v.property()],t.prototype,"_cachedRendererJson",void 0),i([v.property()],t.prototype,"rasterAttributeTableFieldPrefix",void 0),i([v.property({readOnly:!0,dependsOn:["rasterFunctionInfos"]})],t.prototype,"rasterFunctionNamesIndex",null),i([v.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"queryTask",null),i([v.property()],t.prototype,"adjustAspectRatio",void 0),i([v.property({readOnly:!0}),v.aliasOf("serviceRasterInfo.bandCount")],t.prototype,"bandCount",void 0),i([v.property({type:[w.Integer],json:{write:!0}})],t.prototype,"bandIds",void 0),i([v.property({readOnly:!0})],t.prototype,"capabilities",void 0),i([v.reader("capabilities")],t.prototype,"readCapabilities",null),i([v.property({type:Number})],t.prototype,"compressionQuality",void 0),i([v.writer("compressionQuality")],t.prototype,"writeCompressionQuality",null),i([v.property({type:Number})],t.prototype,"compressionTolerance",void 0),i([v.writer("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),i([v.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),i([v.property({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),i([v.property({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),i([v.property()],t.prototype,"rasterInfo",void 0),i([v.property({readOnly:!0,type:[I]})],t.prototype,"fields",void 0),i([v.property({readOnly:!0,dependsOn:["fields"]})],t.prototype,"fieldsIndex",null),i([v.property({type:String,json:{write:!0}})],t.prototype,"format",null),i([v.property({type:s.Extent})],t.prototype,"fullExtent",void 0),i([v.property({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),i([v.property({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),i([v.property({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),i([v.property({type:String,json:{read:{reader:E.read},write:{writer:E.write}}})],t.prototype,"interpolation",void 0),i([v.property({type:C})],t.prototype,"mosaicRule",null),i([v.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),i([v.writer("mosaicRule")],t.prototype,"writeMosaicRule",null),i([v.property({readOnly:!0}),v.aliasOf("serviceRasterInfo.multidimensionalInfo")],t.prototype,"multidimensionalInfo",void 0),i([v.property()],t.prototype,"noData",void 0),i([v.writer("noData")],t.prototype,"writeNoData",null),i([v.property({type:String,json:{read:{reader:B.read},write:{writer:B.write}}})],t.prototype,"noDataInterpretation",void 0),i([v.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),i([v.reader("objectIdField")],t.prototype,"readObjectIdField",null),i([v.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"parsedUrl",null),i([v.property({readOnly:!0}),v.aliasOf("serviceRasterInfo.pixelSize.x")],t.prototype,"pixelSizeX",void 0),i([v.property({readOnly:!0}),v.aliasOf("serviceRasterInfo.pixelSize.y")],t.prototype,"pixelSizeY",void 0),i([v.property({type:Function})],t.prototype,"pixelFilter",void 0),i([v.property()],t.prototype,"raster",void 0),i([v.property()],t.prototype,"viewId",void 0),i([v.property({types:u.rasterRendererTypes,json:{read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",void 0),i([v.reader("renderer")],t.prototype,"readRenderer",null),i([v.property(b.opacityDrawingInfo)],t.prototype,"opacity",void 0),i([v.property({readOnly:!0}),v.aliasOf("serviceRasterInfo.attributeTable")],t.prototype,"rasterAttributeTable",void 0),i([v.property({readOnly:!0,dependsOn:["fields","rasterInfo"]})],t.prototype,"rasterFields",null),i([v.property({readOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),i([v.property({type:O})],t.prototype,"renderingRule",null),i([v.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRenderingRule",null),i([v.writer("renderingRule")],t.prototype,"writeRenderingRule",null),i([v.property()],t.prototype,"serviceDataType",void 0),i([v.property({readOnly:!0,type:s.SpatialReference})],t.prototype,"spatialReference",void 0),i([v.reader("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),i([v.property()],t.prototype,"pixelType",void 0),i([v.reader("pixelType")],t.prototype,"readPixelType",null),i([v.writer("pixelType")],t.prototype,"writePixelType",null),i([v.property({constructOnly:!0,type:A})],t.prototype,"serviceRasterInfo",void 0),i([v.property()],t.prototype,"sourceJSON",void 0),i([v.property(b.url)],t.prototype,"url",void 0),i([v.property({readOnly:!0})],t.prototype,"version",void 0),i([v.reader("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),i([v.subclass("esri.layers.mixins.ArcGISImageService")],t)}(v.declared(e))}}).apply(null,o))||(e.exports=i)},Q3lp:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("ImIS")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.kebabDict=new r.default({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})}).apply(null,o))||(e.exports=i)},QJ8R:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("ma1f"),r("qsST"),r("qMld"),r("jfWY"),r("Vx27"),r("Qwus"),r("QmTF")],void 0===(i=(function(e,t,o,i,n,a,s,l,u,p,c,d,f){Object.defineProperty(t,"__esModule",{value:!0});var h=l.getLogger("esri.layers.mixins.PortalLayer");t.PortalLayer=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"portalItem",{set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))},enumerable:!0,configurable:!0}),t.prototype.readPortalItem=function(e,t,r){if(t.itemId)return new f({id:t.itemId,portal:r&&r.portal})},t.prototype.writePortalItem=function(e,t){e&&e.id&&(t.itemId=e.id)},t.prototype.loadFromPortal=function(e,t){return a(this,void 0,void 0,(function(){var o,i;return n(this,(function(n){switch(n.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,u.create((function(e){return Promise.all([r.e(0),r.e(98)]).then((function(){var t=[r("6hwa")];e.apply(null,t)}).bind(this)).catch(r.oe)}))];case 2:return o=n.sent(),u.throwIfAborted(t),[4,o.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)];case 3:return[2,n.sent()];case 4:throw i=n.sent(),h.warn("Failed to load layer ("+this.title+", "+this.id+") portal item ("+this.portalItem.id+")\n  "+i),i;case 5:return[2]}}))}))},t.prototype.read=function(e,t){var r=arguments;t&&(t.layer=this),this.inherited(r)},t.prototype.write=function(e,t){var r=t&&t.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||d.getDefault());return r&&o&&!p.hasSamePortal(o.restUrl,r.restUrl)?(t.messages&&t.messages.push(new s("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)},i([c.property({type:f})],t.prototype,"portalItem",null),i([c.reader("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),i([c.writer("portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),i([c.subclass("esri.layers.mixins.PortalLayer")],t)}(c.declared(e))}}).apply(null,o))||(e.exports=i)},QT0f:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("ma1f"),r("qMld"),r("qMld"),r("r5V0")],void 0===(i=(function(e,t,r,o,i,n){return function(){function e(e){e&&(this.canvas=e.canvas,this.ctx=e.ctx||e.canvas&&e.canvas.getContext("2d"))}return e.getFormat=function(e){if(!e||e.byteLength<10)return"";var t=new Uint8Array(e,0,10),r="";return 255===t[0]&&216===t[1]?r="jpeg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&(r="png"),r},e.prototype.decode=function(t,n,a){var s=this;if(!t||t.byteLength<10)throw new r("imagecanvasdecoder: decode","required a valid encoded data as input.");var l=e.getFormat(t);if(""===l)throw new r("imagecanvasdecoder: decode","encoded data format is not a supported format (jpeg or png).");var u=n.width,p=n.height,c=n.applyJpegMask;if(c&&(!u||!p))throw new r("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return o.create((function(r,d){var f=null;"jpeg"===l&&c&&(f=e.getMask(t,n));var h,m=new Blob([new Uint8Array(t)],{type:"image/"+l}),y=URL.createObjectURL(m),g=new Image;g.src=y,g.onload=function(){if(URL.revokeObjectURL(y),o.isAborted(a))d(i.createAbortError());else{u=g.width,p=g.height,s.canvas?(s.canvas.width===u&&s.canvas.height===p||(s.canvas.width=u,s.canvas.height=p),s.ctx.clearRect(0,0,u,p)):(s.canvas=document.createElement("canvas"),s.canvas.width=u,s.canvas.height=p,s.ctx=s.canvas.getContext("2d")),s.ctx.drawImage(g,0,0);var e,t=s.ctx.getImageData(0,0,u,p);if(h=t.data,n.renderOnCanvas){if(f)for(e=0;e<f.length;e++)h[4*e+3]=f[e]?255:0;return s.ctx.putImageData(t,0,0),void r(null)}var l=u*p,c=new Uint8Array(l),m=new Uint8Array(l),v=new Uint8Array(l);if(f)for(e=0;e<l;e++)c[e]=h[4*e],m[e]=h[4*e+1],v[e]=h[4*e+2];else for(f=new Uint8Array(l),e=0;e<l;e++)c[e]=h[4*e],m[e]=h[4*e+1],v[e]=h[4*e+2],f[e]=h[4*e+3];r({width:u,height:p,pixels:[c,m,v],mask:f,pixelType:"u8"})}},g.onerror=function(){URL.revokeObjectURL(y),d("cannot load image")}}))},e.getMask=function(e,t){var r=null;try{var o=new Uint8Array(e),i=Math.ceil(o.length/2),a=0,s=o.length-2;for(a=i;a<s&&(255!==o[a]||217!==o[a+1]);a++);if((a+=2)<o.length-1){var l=new n(o.subarray(a)).getBytes();r=new Uint8Array(t.width*t.height);for(var u=0,p=0;p<l.length;p++)for(var c=7;c>=0;c--)r[u++]=l[p]>>c&1}}catch(e){}return r},e}()}).apply(null,o))||(e.exports=i)},Rc7o:function(e,t,r){var o,i;o=[r("xoE+")],void 0===(i=(function(e){var t={};t.defaultNoDataValue=e.clampFloat32(-1/0),t.decode=function(a,s){var l=n(a,(s=s||{}).inputOffset||0,s.encodedMaskData||null===s.encodedMaskData),u=null!=s.noDataValue?e.clampFloat32(s.noDataValue):t.defaultNoDataValue,p=r(l,s.pixelType||Float32Array,s.encodedMaskData,u,s.returnMask),c={width:l.width,height:l.height,pixelData:p.resultPixels,minValue:l.pixels.minValue,maxValue:l.pixels.maxValue,noDataValue:u};return p.resultMask&&(c.maskData=p.resultMask),s.returnEncodedMask&&l.mask&&(c.encodedMaskData=l.mask.bitset?l.mask.bitset:null),s.returnFileInfo&&(c.fileInfo=o(l),s.computeUsedBitDepths&&(c.fileInfo.bitDepths=i(l))),c};var r=function(e,t,r,o,i){var n,s,l=0,u=e.pixels.numBlocksX,p=e.pixels.numBlocksY,c=Math.floor(e.width/u),d=Math.floor(e.height/p),f=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),n=new t(e.width*e.height),i&&r&&(s=new Uint8Array(e.width*e.height));for(var h,m,y=new Float32Array(c*d),g=0;g<=p;g++){var v=g!==p?d:e.height%p;if(0!==v)for(var w=0;w<=u;w++){var b=w!==u?c:e.width%u;if(0!==b){var x,S,I,R,T=g*e.width*d+w*c,C=e.width-b,k=e.pixels.blocks[l];if(k.encoding<2?(0===k.encoding?x=k.rawData:(a(k.stuffedData,k.bitsPerPixel,k.numValidPixels,k.offset,f,y,e.pixels.maxValue),x=y),S=0):I=2===k.encoding?0:k.offset,r)for(m=0;m<v;m++){for(7&T&&(R=r[T>>3],R<<=7&T),h=0;h<b;h++)7&T||(R=r[T>>3]),128&R?(s&&(s[T]=1),n[T++]=k.encoding<2?x[S++]:I):(s&&(s[T]=0),n[T++]=o),R<<=1;T+=C}else if(k.encoding<2)for(m=0;m<v;m++){for(h=0;h<b;h++)n[T++]=x[S++];T+=C}else for(m=0;m<v;m++)if(n.fill)n.fill(I,T,T+b),T+=b+C;else{for(h=0;h<b;h++)n[T++]=I;T+=C}if(1===k.encoding&&S!==k.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:n,resultMask:s}},o=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:this.noDataValue}}},i=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},o=0;o<t;o++){var i=e.pixels.blocks[o];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},n=function(e,t,r){var o={},i=new Uint8Array(e,t,10);if(o.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!=o.fileIdentifierString.trim())throw"Unexpected file identifier string: "+o.fileIdentifierString;t+=10;var n=new DataView(e,t,24);if(o.fileVersion=n.getInt32(0,!0),o.imageType=n.getInt32(4,!0),o.height=n.getUint32(8,!0),o.width=n.getUint32(12,!0),o.maxZError=n.getFloat64(16,!0),t+=24,!r)if(n=new DataView(e,t,16),o.mask={},o.mask.numBlocksY=n.getUint32(0,!0),o.mask.numBlocksX=n.getUint32(4,!0),o.mask.numBytes=n.getUint32(8,!0),o.mask.maxValue=n.getFloat32(12,!0),t+=16,o.mask.numBytes>0){var a=new Uint8Array(Math.ceil(o.width*o.height/8)),s=(n=new DataView(e,t,o.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)a[u++]=n.getUint8(l++);else{var p=n.getUint8(l++);for(s=-s;s--;)a[u++]=p}s=n.getInt16(l,!0),l+=2}while(l<o.mask.numBytes);if(-32768!==s||u<a.length)throw"Unexpected end of mask RLE encoding";o.mask.bitset=a,t+=o.mask.numBytes}else 0==(o.mask.numBytes|o.mask.numBlocksY|o.mask.maxValue)&&(a=new Uint8Array(Math.ceil(o.width*o.height/8)),o.mask.bitset=a);n=new DataView(e,t,16),o.pixels={},o.pixels.numBlocksY=n.getUint32(0,!0),o.pixels.numBlocksX=n.getUint32(4,!0),o.pixels.numBytes=n.getUint32(8,!0),o.pixels.maxValue=n.getFloat32(12,!0),t+=16;var c=o.pixels.numBlocksX,d=o.pixels.numBlocksY,f=c+(o.width%c>0?1:0),h=d+(o.height%d>0?1:0);o.pixels.blocks=new Array(f*h);for(var m=1e9,y=0,g=0;g<h;g++)for(var v=0;v<f;v++){var w=0;n=new DataView(e,t,Math.min(10,e.byteLength-t));var b={};o.pixels.blocks[y++]=b;var x=n.getUint8(0);if(w++,b.encoding=63&x,b.encoding>3)throw"Invalid block encoding ("+b.encoding+")";if(2!==b.encoding){if(0!==x&&2!==x){if(b.offsetType=x>>=6,2===x)b.offset=n.getInt8(1),w++;else if(1===x)b.offset=n.getInt16(1,!0),w+=2;else{if(0!==x)throw"Invalid block offset type";b.offset=n.getFloat32(1,!0),w+=4}if(m=Math.min(b.offset,m),1===b.encoding)if(x=n.getUint8(w),w++,b.bitsPerPixel=63&x,b.numValidPixelsType=x>>=6,2===x)b.numValidPixels=n.getUint8(w),w++;else if(1===x)b.numValidPixels=n.getUint16(w,!0),w+=2;else{if(0!==x)throw"Invalid valid pixel count type";b.numValidPixels=n.getUint32(w,!0),w+=4}}var S;if(t+=w,3!=b.encoding)if(0===b.encoding){var I=(o.pixels.numBytes-1)/4;if(I!==Math.floor(I))throw"uncompressed block has invalid length";S=new ArrayBuffer(4*I),new Uint8Array(S).set(new Uint8Array(e,t,4*I));for(var R=new Float32Array(S),T=0;T<R.length;T++)m=Math.min(m,R[T]);b.rawData=R,t+=4*I}else if(1===b.encoding){var C=Math.ceil(b.numValidPixels*b.bitsPerPixel/8),k=Math.ceil(C/4);S=new ArrayBuffer(4*k),new Uint8Array(S).set(new Uint8Array(e,t,C)),b.stuffedData=new Uint32Array(S),t+=C}}else t++,m=Math.min(m,0)}return o.pixels.minValue=m,o.eofOffset=t,o},a=function(e,t,r,o,i,n,a){var s,l,u,p=(1<<t)-1,c=0,d=0,f=Math.ceil((a-o)/i),h=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*h,s=0;s<r;s++){if(0===d&&(u=e[c++],d=32),d>=t)l=u>>>d-t&p,d-=t;else{var m=t-d;l=(u&p)<<m&p,l+=(u=e[c++])>>>(d=32-m)}n[s]=l<f?o+l*i:a}return n};return t}).apply(null,o))||(e.exports=i)},"T/jF":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("ma1f"),r("qMld"),r("ADZV"),r("8V7H"),r("dXLH"),r.dj.m(e)],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u){return function(){function t(){this._workerThread=null,this._destroyed=!1}return t.prototype.initialize=function(){return o(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return[4,s.open(a.getAbsMid("./RasterWorker",e,u))];case 1:return t=r.sent(),this._destroyed?t.close():this._workerThread=t,[2]}}))}))},t.prototype.destroy=function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)},t.prototype.decode=function(e,t){return o(this,void 0,void 0,(function(){var o;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new i("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("decode",e,t)];case 1:return[2,(o=r.sent())?new l(o):null]}}))}))},t.prototype.symbolize=function(e,t){return o(this,void 0,void 0,(function(){var o;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new i("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("symbolize",e.toJSON(),t)];case 1:return[2,(o=r.sent())?new l(o):null]}}))}))},t.prototype.updateSymbolizer=function(e,t){return o(this,void 0,void 0,(function(){var o;return r(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new i("raster-jobhandler:no-connection","no available worker connection");return o=e&&e.renderer&&"raster-stretch"===e.renderer.type&&e.renderer.histograms,[4,n.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:o},t))];case 1:return r.sent(),[2]}}))}))},t}()}).apply(null,o))||(e.exports=i)},TnfJ:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("dxjN"),r("ycL1"),r("rg9i"),r("Vx27"),r("hBcF"),r("eVYp")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u){return function(e){function t(t){var r=e.call(this,t)||this;return r.colorRamp=null,r.computeGamma=!1,r.dynamicRangeAdjustment=!0,r.gamma=[],r.maxPercent=null,r.minPercent=null,r.numberOfStandardDeviations=null,r.outputMax=null,r.outputMin=null,r.sigmoidStrengthLevel=null,r.statistics=[],r.histograms=null,r.useGamma=!1,r.stretchType="none",r.type="raster-stretch",r}var i;return r(t,e),i=t,t.prototype.readColorRamp=function(e){if(e)return u.fromJSON(e)},t.prototype.writeStatistics=function(e,t,r){null==e||0===e.length?e=null:e[0]instanceof Array||(e=e.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),t[r]=e},t.prototype.clone=function(){return new i({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:a.clone(this.statistics),gamma:a.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:a.clone(this.colorRamp),histograms:a.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})},o([s.property({types:u.types,json:{write:!0}})],t.prototype,"colorRamp",void 0),o([s.reader("colorRamp")],t.prototype,"readColorRamp",null),o([s.property({type:Boolean,json:{write:!0}})],t.prototype,"computeGamma",void 0),o([s.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],t.prototype,"dynamicRangeAdjustment",void 0),o([s.property({type:[Number],json:{write:{allowNull:!0}}})],t.prototype,"gamma",void 0),o([s.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"maxPercent",void 0),o([s.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"minPercent",void 0),o([s.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"numberOfStandardDeviations",void 0),o([s.property({type:Number,json:{read:{source:"max"},write:{target:"max",allowNull:!0}}})],t.prototype,"outputMax",void 0),o([s.property({type:Number,json:{read:{source:"min"},write:{target:"min",allowNull:!0}}})],t.prototype,"outputMin",void 0),o([s.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"sigmoidStrengthLevel",void 0),o([s.property({json:{write:{allowNull:!0}}})],t.prototype,"statistics",void 0),o([s.property()],t.prototype,"histograms",void 0),o([s.writer("statistics")],t.prototype,"writeStatistics",null),o([s.property({type:Boolean,json:{write:!0}})],t.prototype,"useGamma",void 0),o([s.property({type:l.stretchTypeJSONDict.apiValues,json:{type:l.stretchTypeJSONDict.jsonValues,read:l.stretchTypeJSONDict.read,write:l.stretchTypeJSONDict.write}})],t.prototype,"stretchType",void 0),o([s.enumeration.serializable()({rasterStretch:"raster-stretch"})],t.prototype,"type",void 0),i=o([s.subclass("esri.renderers.RasterStretchRenderer")],t)}(s.declared(n.JSONSupport))}).apply(null,o))||(e.exports=i)},TsGx:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(i=(function(e,t,r,o,i,n,a,s){var l=function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.attachmentsWhere=null,r.keywords=null,r.globalIds=null,r.name=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}var i;return r(t,e),i=t,t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new i(n.clone({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))},o([a.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),o([a.property({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],t.prototype,"attachmentsWhere",void 0),o([a.property({type:[String],json:{write:!0}})],t.prototype,"keywords",void 0),o([a.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),o([a.property({json:{write:!0}})],t.prototype,"name",void 0),o([a.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),o([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),o([a.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnMetadata",void 0),o([a.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),o([a.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),o([a.writer("start"),a.writer("num")],t.prototype,"writeStart",null),o([a.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),i=o([a.subclass("esri.tasks.support.AttachmentQuery")],t)}(a.declared(i.JSONSupport));return l.from=s.default(l),l}).apply(null,o))||(e.exports=i)},UVEp:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("QDcU"),r("KtQ6")],void 0===(i=(function(e,t,r,o){function i(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function n(e,t,r){var i=o.toLAB(e),n=o.toLAB(t);return o.toRGB({l:i.l*(1-r)+r*n.l,a:i.a*(1-r)+r*n.a,b:i.b*(1-r)+r*n.b})}function a(e,o){if(e){var n,a=o||t.PREDEFINED_JSON_COLOR_RAMPS,s=null;return"algorithmic"===e.type?a.some((function(t){if(i(e.fromColor.toRgb(),t.fromColor)&&i(e.toColor.toRgb(),t.toColor))return s=t.id,!0})):"multipart"===e.type&&a.some((function(t){if(e.colorRamps&&t.colorRamps&&e.colorRamps.length===t.colorRamps.length&&(n=e.colorRamps,!t.colorRamps.some((function(e,t){if(!i(n[t].fromColor.toRgb(),new r(e.fromColor).toRgb())||!i(n[t].toColor.toRgb(),new r(e.toColor).toRgb()))return!0})))){if(s)return!0;s=t.id}})),s}}Object.defineProperty(t,"__esModule",{value:!0}),t.PREDEFINED_JSON_COLOR_RAMPS=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],t.PREDEFINED_COLOR_RAMP_NAME_MAP={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},t.getColorRampId=a,t.getColorRampName=function(e){var r=a(e);return r?t.PREDEFINED_COLOR_RAMP_NAME_MAP[r]:null},t.convertColorRampToColormap=function(e,t){if(e&&t){for(var o,i,a,s,l,u="multipart"===e.type?e.colorRamps.length:1,p=[],c=[],d=0,f=0;f<u;f++)p[f]={start:null,end:null},p[f].start=d,p[f].end=d+1/u,d=p[f].end;for(f=0;f<t;f++)!function(u){s=u/t,p.forEach((function(p,d){s>=p.start&&s<p.end&&(l=(s-p.start)/(p.end-p.start),"multipart"===e.type?(o=new r(e.colorRamps[d].fromColor),i=new r(e.colorRamps[d].toColor)):(o=new r(e.fromColor),i=new r(e.toColor)),a=n(o,i,l),0===u?c.push([u,o.r,o.g,o.b]):u===t-1?c.push([u,i.r,i.g,i.b]):(a=n(o,i,l),c.push([u,a.r,a.g,a.b])))}))}(f);return c}}}).apply(null,o))||(e.exports=i)},WSFd:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("2Atf"),r("ma1f"),r("dXLH"),r("QT0f"),r("EZfi"),r("hP4J"),r("Rc7o"),r("D34G"),r("0fRT"),r("aS1B")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p,c,d,f){function h(e,t){if(!I)throw new n("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var r,o,i=t.width,s=t.height,l=t.pixelType,u=S(l),c=u.pixelTypeCtor,d=null==t.noDataValue?u.noDataValue:t.noDataValue,f=0,h=0,m=e.byteLength-10;h<m;){var y=p.decode(e,{inputOffset:h,encodedMaskData:r,returnMask:0===f,returnEncodedMask:0===f,returnFileInfo:!0,pixelType:c,noDataValue:d});if(i&&s&&(y.width!==i||y.height!==s))throw new n("rasterCoded:decode","lerc decoded result has width or height different from specified in options");h=y.fileInfo.eofOffset,0===f&&(r=y.encodedMaskData,o=new a({width:y.width,height:y.height,pixels:[],pixelType:l,mask:y.maskData,statistics:[]})),f++,o.addData({pixels:y.pixelData,statistics:{minValue:y.minValue,maxValue:y.maxValue,noDataValue:y.noDataValue}})}return o}function m(e,t){if(!I)throw new n("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var r,o,i,s=0,l=0,p=0,c=e.byteLength-10,d=[],f=t.width,h=t.height;l<c;){if(o=u.decode(e,{inputOffset:l,maskData:r,returnFileInfo:!0}),f&&h&&(o.width!==f||o.height!==h))throw new n("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");l=o.fileInfo.eofOffset,0===s&&(p=o.fileInfo.numValidPixel,r=o.maskData,i=new a({width:o.width,height:o.height,pixels:[],pixelType:o.fileInfo.pixelType,mask:o.maskData,statistics:[]})),o.fileInfo.mask&&o.fileInfo.mask.numBytes>0&&d.push(o.maskData),s++,i.addData({pixels:o.pixelData,statistics:{minValue:o.minValue,maxValue:o.maxValue}})}var m=0,y=0,g=0;if(d.length>1){for(g=i.width*i.height,(r=new Uint8Array(g)).set(d[0]),m=1;m<d.length;m++){var v=d[m];for(y=0;y<g;y++)r[y]=r[y]&v[y]}for(p=0,y=0;y<g;y++)p+=r[y];i.mask=r}return i.validPixelCount=p,i}function y(e){var t=f.decode(e),r=new a({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),mask:t.maskData,statistics:null});return r.updateStatistics(),r}function g(e,t,r){var o=S(t.pixelType).pixelTypeCtor,i=("bsq"===r?d.decodeBSQ:d.decodeBIP)(e,{bandCount:t.planes,width:t.width,height:t.height,pixelType:o}),n=new a({width:t.width,height:t.height,pixels:i.pixels,pixelType:t.pixelType,mask:i.mask,statistics:null});return n.updateStatistics(),n}function v(e){var t=l.decode(e),r=new a({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});return r.updateStatistics(),r}function w(e,t){var r,o=new Uint8Array(e),i=new c(o),n=t.width,s=t.height,l=n*s,u=i.decode(),p=0,d=0,f=new Uint8Array(l);for(p=0;p<l;p++)f[p]=u[4*p+3];var h=new a({width:n,height:s,pixels:[],pixelType:"U8",mask:f,statistics:[]});for(p=0;p<3;p++){for(r=new Uint8Array(l),d=0;d<l;d++)r[d]=u[4*d+p];h.addData({pixels:r})}return h.updateStatistics(),h}function b(e,t,n){return o(this,void 0,void 0,(function(){var o,l,u,p;return r(this,(function(r){switch(r.label){case 0:return o=new s,l=i({applyJpegMask:!1},t),[4,o.decode(e,l,n)];case 1:return u=r.sent(),(p=new a(u)).updateStatistics(),[2,p]}}))}))}function x(e){if(null==e)throw new n("rasterCodec:decode","parameter encodeddata is required.");var t=new Uint8Array(e,0,10),r="";return 255===t[0]&&216===t[1]?r="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?r="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?r="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?r="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]?r="tiff":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(r="error"),r}function S(e){var t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=Math.pow(2,8)-1,t=Uint8Array;break;case"u16":r=r||Math.pow(2,16)-1,t=Uint16Array;break;case"u32":r=r||Math.pow(2,32)-1,t=Uint32Array;break;case"s8":r=r||0-Math.pow(2,7),t=Int8Array;break;case"s16":r=r||0-Math.pow(2,15),t=Int16Array;break;case"s32":r=r||0-Math.pow(2,31),t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}var I=function(){var e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,1===t[0]}();return function(){function e(){}return e.getFormat=function(e){var t=x(e);return"lerc2"===t?t="lerc":"error"===t&&(t=""),t},e.decode=function(e,t,a){return o(this,void 0,void 0,(function(){var o,s,l;return r(this,(function(r){switch(r.label){case 0:if(null==e)throw new n("rasterCodec:decode","missing encodeddata parameter.");if(null==t||null==t.width||null==t.height)throw new n("rasterCodec:decode","requires width and height in options parameter.");return(!(o=t.format&&t.format.toLowerCase())||"bsq"!==o&&"bip"!==o)&&(o=x(e)),!t.useCanvas||"jpg"!==o&&"png"!==o?[3,2]:[4,b(e,t,a)];case 1:return l=r.sent(),[3,3];case 2:s=function(e){var t=null;switch(e){case"lerc":t=h;break;case"lerc2":t=m;break;case"jpg":t=v;break;case"png":t=w;break;case"bsq":t=function(e,t){return g(e,t,"bsq")};break;case"bip":t=function(e,t){return g(e,t,"bip")};break;case"tiff":t=y;break;case"error":t=function(){throw new n("rasterCodec:decode","input data contains error")};break;default:t=function(){throw new n("rasterCodec:decode","unsupported raster format")}}return t}(o),t.isPoint&&((t=i({},t)).width++,t.height++),l=s(e,t),t.isPoint&&function(e,t){if(void 0===t&&(t=1),e){var r=e.pixels,o=e.width,i=e.mask;if(r&&0!==r.length){var n,a,s,l,u,p,c,d=r.length,f=o-1,h=e.height-1,m=[],y=e.getPixelArrayConstructor(e.pixelType);if(0===t){for(n=0;n<d;n++){for(u=r[n],p=new y(f*h),a=0;a<h;a++)for(l=a*o,s=0;s<f;s++)p[a*f+s]=u[l+s];m.push(p)}if(i)for(c=new Uint8Array(f*h),a=0;a<h;a++)for(l=a*o,s=0;s<f;s++)c[a*f+s]=i[l+s]}else{for(n=0;n<d;n++){for(u=r[n],p=new y(f*h),a=0;a<h;a++)for(l=a*o,s=0;s<f;s++)p[a*f+s]=(u[l+s]+u[l+s+1]+u[l+o+s]+u[l+o+s+1])/4;m.push(p)}if(i)for(c=new Uint8Array(f*h),a=0;a<h;a++)for(l=a*o,s=0;s<f;s++)c[a*f+s]=Math.min.apply(null,[i[l+s],i[l+s+1],i[l+o+s],i[l+o+s+1]])}e.width=f,e.height=h,e.mask=c,e.pixels=m}}}(l),r.label=3;case 3:return[2,l]}}))}))},e}()}).apply(null,o))||(e.exports=i)},WaJo:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Vx27")],void 0===(i=(function(e,t,r,o,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshableLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshInterval=0,t}return r(t,e),t.prototype.refresh=function(){this.emit("refresh")},o([i.property({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),o([i.subclass("esri.layers.mixins.RefreshableLayer")],t)}(i.declared(e))}}).apply(null,o))||(e.exports=i)},YM6P:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("+UAu"),r("KY0m"),r("rg9i"),r("97bx"),r("UVEp"),r("hBcF")],void 0===(i=(function(e,t,r,o,i,n,a,s){function l(e,t){var r=p[String(t).toLowerCase()];return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function u(e){if(e){var t=e.fields,r=t&&o.find(t,(function(e){return e&&e.name&&"value"===e.name.toLowerCase()}));return r&&r.name}}Object.defineProperty(t,"__esModule",{value:!0});var p={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},c={type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]};t.isSupportedRendererType=function(e){var t=e.type;return"raster-stretch"===t||"unique-value"===t||"class-breaks"===t},t.combineRenderingRules=function(e,t){if(!e||!t)return i.clone(e||t);var r=i.clone(e);return"none"!==t.functionName.toLowerCase()&&((function e(t){var r=t.Raster;return r&&"esri.layers.support.RasterFunction"===r.declaredClass?e(r.functionArguments):t}(r.functionArguments)).Raster=t),r},t.convertRendererToRenderingRule=function(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){var r=new n;r.functionName="Stretch";var o=d[s.stretchTypeJSONDict.toJSON(e.stretchType)],i={StretchType:o,Statistics:e.statistics,DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(i.Min=e.outputMin),null!=e.outputMax&&(i.Max=e.outputMax),o===d.standardDeviation?(i.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType="u8"):o===d.percentClip?(i.MinPercent=e.minPercent,i.MaxPercent=e.maxPercent,r.outputPixelType="u8"):o===d.minMax?r.outputPixelType="u8":o===d.sigmoid&&(i.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=i,r.variableName="Raster",e.colorRamp){var l=e.colorRamp,u=new n,p=a.getColorRampName(l);return u.functionArguments=p?{colorRamp:p}:!t.convertColorRampToColormap||"algorithmic"!==l.type&&"multipart"!==l.type?{colorRamp:e.colorRamp.toJSON()}:{Colormap:a.convertColorRampToColormap(l,256)},u.variableName="Raster",u.functionName="Colormap",u.functionArguments.Raster=r,u}return r}(e,t);case"class-breaks":return function(e,t){var r=[],o=[],i=[],a=[],s=t.pixelType,p=t.rasterAttributeTable,c=p&&p.features,d=u(p);if(c&&Array.isArray(c)&&e.classBreakInfos){e.classBreakInfos.forEach((function(t,r){var o,i=t.symbol.color;i.a&&c.forEach((function(n){((o=n.attributes[e.field])>=t.minValue&&o<t.maxValue||r===e.classBreakInfos.length-1&&o>=t.minValue)&&a.push([n.attributes[d],i.r,i.g,i.b])}))}));var f=s?l(a,s):a,h=new n;return h.functionName="Colormap",h.functionArguments={},h.functionArguments.Colormap=f,h.variableName="Raster",h}e.classBreakInfos.forEach((function(e,t){var n=e.symbol&&e.symbol.color;n.a?(r.push(0===t?e.minValue:e.minValue+1e-6,e.maxValue+1e-6),o.push(t),a.push([t,n.r,n.g,n.b])):i.push(e.minValue,e.maxValue)}));var m=s?l(a,s):a,y=new n;y.functionName="Remap",y.functionArguments={InputRanges:r,OutputValues:o,NoDataRanges:i},y.variableName="Raster";var g=new n;return g.functionName="Colormap",g.functionArguments={Colormap:m,Raster:y},g}(e,t);case"unique-value":return function(e,t){var r=[],o=t.pixelType,i=t.rasterAttributeTable,a=i&&i.features,s=u(i),p=!1;if(e.uniqueValueInfos&&e.uniqueValueInfos.forEach((function(t){var o=t.symbol.color;o.a&&(e.field!==s&&a?a&&a.forEach((function(i){String(i.attributes[e.field])===String(t.value)&&r.push([i.attributes[s],o.r,o.g,o.b])})):isNaN(t.value)?p=!0:r.push([t.value,o.r,o.g,o.b]))})),p)return null;var c=o&&r.length>0?l(r,o):r,d=new n;return d.functionName="Colormap",d.functionArguments={},d.functionArguments.Colormap=c,d.variableName="Raster",d}(e,t);case"raster-colormap":return function(e,t){var r=e.extractColormap();if(r&&0!==r.length){var o=t.pixelType,i=o?l(r,o):r,a=new n;return a.functionName="Colormap",a.functionArguments={},a.functionArguments.Colormap=i,a}}(e,t)}},t.createDefaultRenderer=function(e,t){if(e){var o,i=e.attributeTable,n=e.dataType,a=e.bandCount,s=e.pixelType,l=e.colormap,u=e.statistics,p=e.histograms;if(t&&t.length>0&&(u=u?t.map((function(e){return u[e]})):null,p=p?t.map((function(e){return p[e]})):null),1===a&&l&&l.length>0)o=r.RasterColormapRenderer.createFromColormap(l);else if(1===a&&i){var d=i.fields.filter((function(e){return"red"===e.name.toLowerCase()}))[0],f=i.fields.filter((function(e){return"green"===e.name.toLowerCase()}))[0],h=i.fields.filter((function(e){return"blue"===e.name.toLowerCase()}))[0],m=i.fields.filter((function(e){return"value"===e.name}))[0],y=i.fields.filter((function(e){return"classname"===e.name.toLowerCase()}))[0];y||(y=i.fields.filter((function(e){return"string"===e.type}))[0])||(y=m),d&&f&&h&&y&&(o=r.UniqueValueRenderer.fromJSON({field1:y.name,uniqueValueInfos:i.features.map((function(e){return{value:e.attributes[y.name],label:e.attributes[y.name],symbol:{color:[e.attributes[d.name],e.attributes[f.name],e.attributes[h.name],255],type:"esriSFS",style:"esriSFSSolid"}}}))}))}else{var g=void 0,v=!1,w=void 0,b=void 0,x=void 0;"u8"===s&&"processed"===n?(g="min-max",u=u||[{min:0,max:255},{min:0,max:255},{min:0,max:255}]):"u8"===s||"elevation"===n?(g="min-max",v=!u):"scientific"===n?(g="min-max",v=!u,w=c):p&&p.length>0?(g="percent-clip",x=b=.25):u?g="min-max":(g="percent-clip",v=!0),o=r.RasterStretchRenderer.fromJSON({stretchType:g,dra:v,colorRamp:w,min:0,max:255,statistics:v?null:u,histograms:v?null:p,maxPercent:b,minPercent:x})}return o}},t.getDefaultBandCombination=function(e){var t,r,o,i,n,a,s=e.keyProperties&&e.keyProperties.BandProperties;if(e.bandCount>=3){if(s&&s.length===e.bandCount){for(t=0;t<s.length;t++)s[t].BandName&&"red"===s[t].BandName.toLowerCase()&&(o=t),s[t].BandName&&"green"===s[t].BandName.toLowerCase()&&(i=t),s[t].BandName&&"blue"===s[t].BandName.toLowerCase()&&(n=t),s[t].BandName&&"nearinfrared"===s[t].BandName.toLowerCase()&&(a=t);void 0!==o&&void 0!==i&&void 0!==n?r=[o,i,n]:void 0!==o&&void 0!==i&&void 0!==a&&(r=[a,o,i])}!r&&e.bandCount>3&&(r=[0,1,2])}return r};var d={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9}}).apply(null,o))||(e.exports=i)},aS1B:function(e,t,r){var o,i;o=[r("xIS7"),r("r5V0")],void 0===(i=(function(e,t){"use strict";var r=function(){var e=new ArrayBuffer(4),t=new Uint8Array(e),r=new Uint32Array(e);return t[0]=1,t[1]=2,t[2]=3,t[3]=4,67305985===r[0]},o=function(){var e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e}(),i=function(e){var t=o[e];return void 0===t&&(t="unknown"+e),t},n=[0,1,1,2,4,8,1,1,2,4,8,4,8],a=function(e,t){var r="UNKNOWN";return 3===e?r="F32":1===e?t<=8?r="U8":t<=16?r="U16":t<=32&&(r="U32"):2===e&&(t<=8?r="S8":t<=16?r="S16":t<=32&&(r="S32")),r},s=function(e,t,r){var o,i,a=[],s=r.fieldType,l=r.fieldValueCount,u=r.fieldValueOffset,p=u,c=n[s],d=8*c,f=l*c,h=l*n[s]*8;if(h<=32)if(t||(u>>>=32-h),1===l)a=[u];else for(i=0;i<l;i++)a.push(u<<d*i>>>32-d);else for(p=u;p<u+f;p+=c){switch(s){case 1:case 2:o=new DataView(e,p,1).getUint8(0);break;case 3:o=new DataView(e,p,2).getUint16(0,t);break;case 4:o=new DataView(e,p,4).getUint32(0,t);break;case 5:o=new DataView(e,p,4).getUint32(0,t)/new DataView(e,p+4,4).getUint32(0,t);break;case 6:o=new DataView(e,p,1).getInt8(0);break;case 8:o=new DataView(e,p,2).getInt16(0,t);break;case 9:o=new DataView(e,p,4).getInt32(0,t);break;case 10:o=new DataView(e,p,4).getInt32(0,t)/new DataView(e,p+4,4).getInt32(0,t);break;case 11:o=new DataView(e,p,4).getFloat32(0,t);break;case 12:o=new DataView(e,p,8).getFloat64(0,t);break;case 7:o=null;break;default:o=null}a.push(o)}if(2===s){var m="",y=a;for(a=[],i=0;i<y.length;i++)0===y[i]&&""!==m?(a.push(m),m=""):m+=String.fromCharCode(y[i]);""===m&&0!==a.length||a.push(m)}return a},l=function(e,t){var r,o,n,a,l,u,p,c,d,f,h,m;r=t.littleEndian,o=t.firstIFD;for(var y=[];o;){for(n=new DataView(e,o,2).getUint16(0,r),a=o+2,o=new DataView(e,a+12*n,4).getUint32(0,r),h={},l=0;l<n;l++)p=(u=new DataView(e,a,12)).getUint16(0,r),c=u.getUint16(2,r),d=u.getUint32(4,r),f=u.getUint32(8,r),a+=12,7===c||c>12||((m={fieldTag:p,fieldType:c,fieldValueCount:d,fieldValueOffset:f}).fieldValues=s(e,r,m),h[i(p)]={type:c,values:m.fieldValues});y.push(h)}return y},u=function(o,i,n){var s,l,u,p=r()===i.littleEndian,c=n.TILEOFFSETS?n.TILEOFFSETS.values:void 0;if(void 0!==c){var d=n.TILEBYTECOUNTS.values,f=n.TILEWIDTH.values[0],h=n.TILELENGTH.values[0],m=n.IMAGEWIDTH.values[0],y=n.IMAGELENGTH.values[0],g=m*y,v=n.BITSPERSAMPLE.values[0],w=n.SAMPLESPERPIXEL.values[0],b=n.SAMPLEFORMAT?n.SAMPLEFORMAT.values[0]:1,x=a(b,v);if(1!==(n.PLANARCONFIGURATION?n.PLANARCONFIGURATION.values[0]:1))throw console.log("can only handle PLANARCONFIGURATION=1"),"can only handle PLANARCONFIGURATION=1";var S=n.COMPRESSION?n.COMPRESSION.values[0]:1;if(1!==S&&6!==S&&8!==S&&32946!==S)throw console.log("this compression is not supported at this moment"),"this compression is not supported at this moment";if(!(b>3)){3===b?(l=new Float32Array(g*w),u=Float32Array):1===b?v<=8?(l=new Uint8Array(g*w),u=Uint8Array):v<=16?(l=new Uint16Array(g*w),u=Uint16Array):v<=32&&(l=new Uint32Array(g*w),u=Uint32Array):2===b&&(v<=8?(l=new Int8Array(g*w),u=Int8Array):v<=16?(l=new Int16Array(g*w),u=Int16Array):v<=32&&(l=new Int32Array(g*w),u=Int32Array));var I,R,T,C,k,O,A,D,P,N,M,_,j,F,U,L,E,B=Math.ceil(m/f);if(v%8==0)for(I=0;I<c.length;I++){if(D=((O=Math.floor(I/B)*h)*m+(A=I%B*f))*w,"U8"===x||"S8"===x||p){if(8===S||32946===S)F=new Uint8Array(o,c[I],d[I]),E=new t(F).getBytes(),j=new ArrayBuffer(E.length),(F=new Uint8Array(j)).set(E),F.length!==f*h*w*v/8&&console.log("tile byte counts is different than expected");else if(6===S){F=new Uint8Array(o,c[I],d[I]);var V=new e;V.parse(F);var J=V.getData(V.width,V.height);j=new ArrayBuffer(J.length),(F=new Uint8Array(j)).set(J)}else 1===S&&(d[I]!==f*h*w*v/8&&console.log("tile byte counts is different than expected"),j=o.slice(c[I],c[I]+d[I]));s=new u(j)}else{switch(8===S||32946===S?(F=new Uint8Array(o,c[I],d[I]),F=new t(F).getBytes(),j=new ArrayBuffer(F.length),U=new Uint8Array(j),F.length!==f*h*w*v/8&&console.log("tile byte counts is different than expected")):1===S&&(d[I]!==f*h*w*v/8&&console.log("tile byte counts is different than expected"),j=new ArrayBuffer(d[I]),F=new Uint8Array(o,c[I],d[I]),U=new Uint8Array(j)),x){case"U16":case"S16":for(T=0;T<F.length;T+=2)U[T]=F[T+1],U[T+1]=F[T];break;case"U32":case"S32":case"F32":for(T=0;T<F.length;T+=4)U[T]=F[T+3],U[T+1]=F[T+2],U[T+2]=F[T+1],U[T+3]=F[T]}s=new u(j)}for(N=0,P=D,_=Math.min(f,m-A),M=Math.min(h,y-O),C=0;C<M;C++)for(P=D+C*m*w,N=C*f*w,k=0;k<_*w;k++,P++,N++)l[P]=s[N]}var G={width:m,height:y,pixelType:x};if(1===w)G.pixels=[l];else for(G.pixels=[],I=0;I<w;I++){for(L=new u(g),R=0;R<g;R++)L[R]=l[R*w+I];G.pixels.push(L)}return G}}},p=function(o,i,n){var s,l,u,p=r()===i.littleEndian,c=n.STRIPOFFSETS?n.STRIPOFFSETS.values:void 0;if(void 0!==c){var d=n.STRIPBYTECOUNTS.values,f=n.ROWSPERSTRIP.values,h=n.IMAGEWIDTH.values[0],m=n.IMAGELENGTH.values[0],y=h*m,g=n.BITSPERSAMPLE.values[0],v=n.SAMPLESPERPIXEL.values[0],w=n.SAMPLEFORMAT?n.SAMPLEFORMAT.values[0]:1,b=a(w,g);if(1!==(n.PLANARCONFIGURATION?n.PLANARCONFIGURATION.values[0]:1))throw console.log("can only handle PLANARCONFIGURATION=1"),"can only handle PLANARCONFIGURATION=1";var x=n.COMPRESSION?n.COMPRESSION.values[0]:1;if(1!==x&&6!==x&&8!==x&&32946!==x)throw console.log("compressed tiff is not supported at this moment"),"compressed tiff is not supported at this moment";if(!(w>3)){3===w?(l=new Float32Array(y*v),u=Float32Array):1===w?g<=8?(l=new Uint8Array(y*v),u=Uint8Array):g<=16?(l=new Uint16Array(y*v),u=Uint16Array):g<=32&&(l=new Uint32Array(y*v),u=Uint32Array):2===w&&(g<=8?(l=new Int8Array(y*v),u=Int8Array):g<=16?(l=new Int16Array(y*v),u=Int16Array):g<=32&&(l=new Int32Array(h*m*v),u=Int32Array));var S,I,R,T,C,k,O,A,D,P=f;if(g%8==0)for(S=0;S<c.length;S++){if(T=S*(f*h)*v,P=(S+1)*f>m?m-S*f:f,"U8"===b||"S8"===b||p){if(8===x||32946===x)k=new Uint8Array(o,c[S],d[S]),D=new t(k).getBytes(),C=new ArrayBuffer(D.length),(k=new Uint8Array(C)).set(D),k.length!==P*h*v*g/8&&console.log("strip byte counts is different than expected");else if(6===x){k=new Uint8Array(o,c[S],d[S]);var N=new e;N.parse(k);var M=N.getData(N.width,N.height);C=new ArrayBuffer(M.length),(k=new Uint8Array(C)).set(M)}else 1===x&&(d[S]!==P*h*v*g/8&&console.log("strip byte counts is different than expected"),C=o.slice(c[S],c[S]+d[S]));s=new u(C)}else{switch(6===x||8===x||32946===x?(k=new Uint8Array(o,c[S],d[S]),k=new t(k).getBytes(),C=new ArrayBuffer(k.length),O=new Uint8Array(C),k.length!==P*h*v*g/8&&console.log("strip byte counts is different than expected")):1===x&&(d[S]!==P*h*v*g/8&&console.log("strip byte counts is different than expected"),C=new ArrayBuffer(d[S]),k=new Uint8Array(o,c[S],d[S]),O=new Uint8Array(C)),b){case"U16":case"S16":for(R=0;R<k.length;R+=2)O[R]=k[R+1],O[R+1]=k[R];break;case"U32":case"S32":case"F32":for(R=0;R<k.length;R+=4)O[R]=k[R+3],O[R+1]=k[R+2],O[R+2]=k[R+1],O[R+3]=k[R]}s=new u(C)}l.set(s,T)}var _={width:h,height:m,pixelType:b};if(1===v)_.pixels=[l];else for(_.pixels=[],S=0;S<v;S++){for(A=new u(y),I=0;I<y;I++)A[I]=l[I*v+S];_.pixels.push(A)}return _}}};return{decode:function(e){var t=function(e){var t,r=new DataView(e,0,8),o=r.getUint16(0,!1);if(18761===o)t=!0;else{if(19789!==o)throw"unexpected endianess byte";t=!1}if(42!==r.getUint16(2,t))throw"unexpected tiff identifier";return{littleEndian:t,firstIFD:r.getUint32(4,t)}}(e),r=l(e,t);if(0===r.length)throw"no valid image file directory";var o,i,n=r[0],a=null==n.GDAL_NODATA?null:parseFloat(n.GDAL_NODATA.values[0]);if(n.TILEOFFSETS?i=u(e,t,n):n.STRIPOFFSETS&&(i=p(e,t,n)),null!==a){if(i.maskData=new Uint8Array(i.width*i.height),Math.abs(a)>1e24)for(o=0;o<i.width*i.height;o++)i.maskData[o]=Math.abs((i.pixels[0][o]-a)/a)<1e-6?0:1;else for(o=0;o<i.width*i.height;o++)i.maskData[o]=i.pixels[0][o]===a?0:1;i.noDataValue=a}return i}}}).apply(null,o))||(e.exports=i)},begh:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("2Atf"),r("I08w"),r("ifLZ"),r("O4In"),r("Ctes"),r("BwRt")],void 0===(i=(function(e,t,r,o,i,n,a,s){function l(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function u(e,t){return e.editable&&-1===h.indexOf(e.type)&&!function(e,t){if(!e||!t)return!1;var r=t.creationDateField,o=t.creatorField,i=t.editDateField,n=t.editorField;return-1!==[r&&r.toLowerCase(),o&&o.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())}(e.name,t)}function p(e){var t=e.visibleFieldNames,r=e.editFieldsInfo;return e.fields.map((function(e){return new a({fieldName:e.name,isEditable:u(e,r),label:e.alias,format:c(e),visible:!t||t.has(e.name)})}))}function c(e){switch(e.type){case"small-integer":case"integer":case"single":return new s({digitSeparator:!0,places:0});case"double":return new s({digitSeparator:!0,places:2});case"date":return new s({dateFormat:"long-month-day-year"});default:return null}}function d(e){var t=[new n.FieldsContent,new n.AttachmentsContent];return e&&t.push(new n.TextContent({text:"<small>"+o.tooManyFields+"</small>"})),t}function f(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())||void 0}Object.defineProperty(t,"__esModule",{value:!0});var h=["oid","global-id","guid"];t.createPopupTemplate=function(e,t){var o=e.displayField,n=e.fields,a=e.title,s=e.visibleFieldNames,u=e.editFieldsInfo;if(!n)return null;var c=function(e,t){var r=e;if(t.ignoreFieldTypes&&(e=e.filter((function(e){return-1===t.ignoreFieldTypes.indexOf(e.type)}))),0===e.length)return null;var o=t.maximumFields&&e.length>t.maximumFields;return o&&(e=e.slice(0,t.maximumFields)),e===r&&(e=e.slice()),e.sort(l),{fields:e,limitExceeded:o}}(n,r({},m,t));if(!c)return null;var f=function(e){var t=e.titleBase,r=e.displayField||function(e){return e&&e.length?y(e,"name-or-title")||y(e,"unique-identifier")||y(e,"type-or-category")||function(e){for(var t=0,r=e;t<r.length;t++){var o=r[t];if(o&&o.name){var i=o.name.toLowerCase();if(i.indexOf("name")>-1||i.indexOf("title")>-1)return o.name}}return null}(e):null}(e.fields);return r?t+": {"+r.trim()+"}":t}({titleBase:a,fields:c.fields,displayField:o}),h=d(c.limitExceeded),y=p({fields:c.fields,visibleFieldNames:s,editFieldsInfo:u});return new i({title:f,content:h,fieldInfos:y})};var m={ignoreFieldTypes:["geometry","blob","raster","guid","xml"],maximumFields:75}}).apply(null,o))||(e.exports=i)},bllj:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27"),r("oxlp"),r("w1v0")],void 0===(i=(function(e,t,r,o,i,n,a,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.catalogItemVisibilities=null,t.catalogItems=null,t.location=null,t.name=null,t.objectId=null,t.processedValues=null,t.properties=null,t.value=null,t}return r(t,e),o([n.property({json:{write:!0}})],t.prototype,"catalogItemVisibilities",void 0),o([n.property({type:s,json:{write:!0}})],t.prototype,"catalogItems",void 0),o([n.property({type:a,json:{write:!0}})],t.prototype,"location",void 0),o([n.property({json:{write:!0}})],t.prototype,"name",void 0),o([n.property({json:{write:!0}})],t.prototype,"objectId",void 0),o([n.property({json:{write:!0}})],t.prototype,"processedValues",void 0),o([n.property({json:{write:!0}})],t.prototype,"properties",void 0),o([n.property({json:{write:!0}})],t.prototype,"value",void 0),o([n.subclass("esri.tasks.support.ImageServiceIdentifyResult")],t)}(n.declared(i.JSONSupport))}).apply(null,o))||(e.exports=i)},"c/mu":function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("9gfz"),r("kKuP"),r("Vx27"),r("N6pD"),r("k7g7"),r("ml7j")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0}),t.TemporalLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeExtent=null,t.timeOffset=null,t.useViewTime=!0,t}return r(t,e),t.prototype.readOffset=function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var o=r.timeOffset,i=u.timeUnitKebabDictionary.fromJSON(r.timeOffsetUnits);return o&&i?new n({value:o,unit:i}):null},Object.defineProperty(t.prototype,"timeInfo",{set:function(e){l.fixTimeInfoFields(e,this.fields),this._set("timeInfo",e)},enumerable:!0,configurable:!0}),o([a.property({type:i,json:{write:!1}})],t.prototype,"timeExtent",void 0),o([a.property({type:n})],t.prototype,"timeOffset",void 0),o([a.reader("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),o([a.property({value:null,type:s,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),o([a.property({type:Boolean,json:{write:!1}})],t.prototype,"useViewTime",void 0),o([a.subclass("esri.layers.mixins.TemporalLayer")],t)}(a.declared(e))}}).apply(null,o))||(e.exports=i)},gRHS:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27")],void 0===(i=(function(e,t,r,o,i,n){return function(e){function t(t){var r=e.call(this,t)||this;return r.respectsDaylightSaving=!1,r.timezone=null,r}var i;return r(t,e),i=t,t.prototype.readRespectsDaylightSaving=function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving},t.prototype.clone=function(){return new i({respectsDaylightSaving:this.respectsDaylightSaving,timezone:this.timezone})},o([n.property({type:Boolean,json:{write:!0}})],t.prototype,"respectsDaylightSaving",void 0),o([n.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],t.prototype,"readRespectsDaylightSaving",null),o([n.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],t.prototype,"timezone",void 0),i=o([n.subclass("esri.layers.support.TimeReference")],t)}(n.declared(i.JSONSupport))}).apply(null,o))||(e.exports=i)},hBcF:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("ImIS")],void 0===(i=(function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.stretchTypeJSONDict=new r.default({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"})}).apply(null,o))||(e.exports=i)},hP4J:function(e,t,r){var o;void 0===(o=(function(){"use strict";var e=function(e,t,r,o,i,n,a,s){var l,u,p,c,d,f=(1<<r)-1,h=0,m=0,y=4*e.length-Math.ceil(r*o/8);if(e[e.length-1]<<=8*y,i)for(l=0;l<o;l++)0===m&&(p=e[h++],m=32),m>=r?(u=p>>>m-r&f,m-=r):(u=(p&f)<<(c=r-m)&f,u+=(p=e[h++])>>>(m=32-c)),t[l]=i[u];else for(d=Math.ceil((s-n)/a),l=0;l<o;l++)0===m&&(p=e[h++],m=32),m>=r?(u=p>>>m-r&f,m-=r):(u=(p&f)<<(c=r-m)&f,u+=(p=e[h++])>>>(m=32-c)),t[l]=u<d?n+u*a:s},t=function(e,t,r,o,i,n,a,s){var l,u,p,c,d=(1<<r)-1,f=0,h=0,m=0;if(i)for(l=0;l<o;l++)0===h&&(p=e[f++],h=32,m=0),h>=r?(u=p>>>m&d,h-=r,m+=r):(u=p>>>m&d,h=32-(c=r-h),u|=((p=e[f++])&(1<<c)-1)<<r-c,m=c),t[l]=i[u];else{var y=Math.ceil((s-n)/a);for(l=0;l<o;l++)0===h&&(p=e[f++],h=32,m=0),h>=r?(u=p>>>m&d,h-=r,m+=r):(u=p>>>m&d,h=32-(c=r-h),u|=((p=e[f++])&(1<<c)-1)<<r-c,m=c),t[l]=u<y?n+u*a:s}return t},r={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,o=e.length,i=Math.floor(o/2),n=0;i;){var a=i>=359?359:i;i-=a;do{t+=e[n++]<<8,r+=t+=e[n++]}while(--a);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&o&&(r+=t+=e[n]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,o=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,o),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var n=new DataView(e,r,8),a=n.getInt32(0,!0);if(i.fileVersion=a,r+=4,a>=3&&(i.checksum=n.getUint32(4,!0),r+=4),n=new DataView(e,r,12),i.height=n.getUint32(0,!0),i.width=n.getUint32(4,!0),r+=8,a>=4?(i.numDims=n.getUint32(8,!0),r+=4):i.numDims=1,n=new DataView(e,r,40),i.numValidPixel=n.getUint32(0,!0),i.microBlockSize=n.getInt32(4,!0),i.blobSize=n.getInt32(8,!0),i.imageType=n.getInt32(12,!0),i.maxZError=n.getFloat64(16,!0),i.zMin=n.getFloat64(24,!0),i.zMax=n.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,a>=3&&this.computeChecksumFletcher32(new Uint8Array(e,r-(a>=4?52:48),i.blobSize-14))!==i.checksum)throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,o=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),n=this.readSubArray(e,t.ptr,o,i),a=this.readSubArray(e,t.ptr+i,o,i);t.ptr+=2*i;var s,l=!0;for(s=0;s<r.numDims;s++)if(n[s]!==a[s]){l=!1;break}return r.minValues=n,r.maxValues=a,l},readSubArray:function(e,t,r,o){var i;if(r===Uint8Array)i=new Uint8Array(e,t,o);else{var n=new ArrayBuffer(o);new Uint8Array(n).set(new Uint8Array(e,t,o)),i=new r(n)}return i},readMask:function(e,t){var r,o,i=t.ptr,n=t.headerInfo,a=n.width*n.height,s=n.numValidPixel,l=new DataView(e,i,4),u={};if(u.numBytes=l.getUint32(0,!0),i+=4,(0===s||a===s)&&0!==u.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(a/8)),u.bitset=r,o=new Uint8Array(a),t.pixels.resultMask=o,i+=u.numBytes;else if(u.numBytes>0){r=new Uint8Array(Math.ceil(a/8));var p=(l=new DataView(e,i,u.numBytes)).getInt16(0,!0),c=2,d=0,f=0;do{if(p>0)for(;p--;)r[d++]=l.getUint8(c++);else for(f=l.getUint8(c++),p=-p;p--;)r[d++]=f;p=l.getInt16(c,!0),c+=2}while(c<u.numBytes);if(-32768!==p||d<r.length)throw"Unexpected end of mask RLE encoding";o=new Uint8Array(a);var h=0,m=0;for(m=0;m<a;m++)7&m?(h=r[m>>3],h<<=7&m):h=r[m>>3],128&h&&(o[m]=1);t.pixels.resultMask=o,u.bitset=r,i+=u.numBytes}return t.ptr=i,t.mask=u,!0},readDataOneSweep:function(e,t,o){var i,n=t.ptr,a=t.headerInfo,s=a.numDims,l=a.width*a.height,u=a.numValidPixel*r.getDataTypeSize(a.imageType)*s,p=t.pixels.resultMask;if(o===Uint8Array)i=new Uint8Array(e,n,u);else{var c=new ArrayBuffer(u);new Uint8Array(c).set(new Uint8Array(e,n,u)),i=new o(c)}if(i.length===l*s)t.pixels.resultPixels=i;else{t.pixels.resultPixels=new o(l*s);var d=0,f=0,h=0,m=0;if(s>1)for(h=0;h<s;h++)for(m=h*l,f=0;f<l;f++)p[f]&&(t.pixels.resultPixels[m+f]=i[d++]);else for(f=0;f<l;f++)p[f]&&(t.pixels.resultPixels[f]=i[d++])}return t.ptr=n+=u,!0},readHuffmanTree:function(e,t){var i=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var a=n.getInt32(4,!0),s=n.getInt32(8,!0),l=n.getInt32(12,!0);if(s>=l)return!1;var u=new Uint32Array(l-s);r.decodeBits(e,t,u);var p,c,d,f,h=[];for(p=s;p<l;p++)h[c=p-(p<a?0:a)]={first:u[p-s],second:null};var m=e.byteLength-t.ptr,y=Math.ceil(m/4),g=new ArrayBuffer(4*y);new Uint8Array(g).set(new Uint8Array(e,t.ptr,m));var v,w=new Uint32Array(g),b=0,x=0;for(v=w[0],p=s;p<l;p++)(f=h[c=p-(p<a?0:a)].first)>0&&(h[c].second=v<<b>>>32-f,32-b>=f?32===(b+=f)&&(b=0,v=w[++x]):(x++,h[c].second|=(v=w[x])>>>32-(b+=f-32)));var S,I=0,R=new o;for(p=0;p<h.length;p++)void 0!==h[p]&&(I=Math.max(I,h[p].first));S=I>=i?i:I;var T,C,k,O,A,D=[];for(p=s;p<l;p++)if((f=h[c=p-(p<a?0:a)].first)>0)if(T=[f,c],f<=S)for(C=h[c].second<<S-f,k=1<<S-f,d=0;d<k;d++)D[C|d]=T;else for(C=h[c].second,A=R,O=f-1;O>=0;O--)C>>>O&1?(A.right||(A.right=new o),A=A.right):(A.left||(A.left=new o),A=A.left),0!==O||A.val||(A.val=T[1]);return{decodeLut:D,numBitsLUTQick:S,numBitsLUT:I,tree:R,stuffedData:w,srcPtr:x,bitPos:b}},readHuffman:function(e,t,r){var o,i,n,a,s,l,u,p,c,d=t.headerInfo,f=d.numDims,h=t.headerInfo.height,m=t.headerInfo.width,y=m*h,g=this.readHuffmanTree(e,t),v=g.decodeLut,w=g.tree,b=g.stuffedData,x=g.srcPtr,S=g.bitPos,I=g.numBitsLUTQick,R=g.numBitsLUT,T=0===t.headerInfo.imageType?128:0,C=t.pixels.resultMask,k=0;S>0&&(x++,S=0);var O,A=b[x],D=1===t.encodeMode,P=new r(y*f),N=P;for(O=0;O<d.numDims;O++){if(f>1&&(N=new r(P.buffer,y*O,y),k=0),t.headerInfo.numValidPixel===m*h)for(p=0,l=0;l<h;l++)for(u=0;u<m;u++,p++){if(i=0,s=a=A<<S>>>32-I,32-S<I&&(s=a|=b[x+1]>>>64-S-I),v[s])i=v[s][1],S+=v[s][0];else for(s=a=A<<S>>>32-R,32-S<R&&(s=a|=b[x+1]>>>64-S-R),o=w,c=0;c<R;c++)if(!(o=a>>>R-c-1&1?o.right:o.left).left&&!o.right){i=o.val,S=S+c+1;break}S>=32&&(S-=32,A=b[++x]),n=i-T,D?(n+=u>0?k:l>0?N[p-m]:k,N[p]=n&=255,k=n):N[p]=n}else for(p=0,l=0;l<h;l++)for(u=0;u<m;u++,p++)if(C[p]){if(i=0,s=a=A<<S>>>32-I,32-S<I&&(s=a|=b[x+1]>>>64-S-I),v[s])i=v[s][1],S+=v[s][0];else for(s=a=A<<S>>>32-R,32-S<R&&(s=a|=b[x+1]>>>64-S-R),o=w,c=0;c<R;c++)if(!(o=a>>>R-c-1&1?o.right:o.left).left&&!o.right){i=o.val,S=S+c+1;break}S>=32&&(S-=32,A=b[++x]),n=i-T,D?(n+=u>0&&C[p-1]?k:l>0&&C[p-m]?N[p-m]:k,N[p]=n&=255,k=n):N[p]=n}t.ptr=t.ptr+4*(x+1)+(S>0?4:0)}t.pixels.resultPixels=P},decodeBits:function(r,o,i,n,a){var s=o.headerInfo,l=s.fileVersion,u=0,p=new DataView(r,o.ptr,r.byteLength-o.ptr>=5?5:r.byteLength-o.ptr),c=p.getUint8(0);u++;var d=c>>6,f=0===d?4:3-d,h=(32&c)>0,m=31&c,y=0;if(1===f)y=p.getUint8(u),u++;else if(2===f)y=p.getUint16(u,!0),u+=2;else{if(4!==f)throw"Invalid valid pixel count type";y=p.getUint32(u,!0),u+=4}var g,v,w,b,x,S,I,R,T,C=2*s.maxZError,k=s.numDims>1?s.maxValues[a]:s.zMax;if(h){for(o.counter.lut++,R=p.getUint8(u),u++,b=Math.ceil((R-1)*m/8),x=Math.ceil(b/4),v=new ArrayBuffer(4*x),w=new Uint8Array(v),o.ptr+=u,w.set(new Uint8Array(r,o.ptr,b)),I=new Uint32Array(v),o.ptr+=b,T=0;R-1>>>T;)T++;b=Math.ceil(y*T/8),x=Math.ceil(b/4),v=new ArrayBuffer(4*x),(w=new Uint8Array(v)).set(new Uint8Array(r,o.ptr,b)),g=new Uint32Array(v),o.ptr+=b,S=l>=3?function(e,t,r,o,i,n){var a,s=(1<<t)-1,l=0,u=0,p=0,c=0,d=0,f=0,h=[],m=Math.ceil((n-o)/i);for(u=0;u<r;u++)0===c&&(a=e[l++],c=32,f=0),c>=t?(d=a>>>f&s,c-=t,f+=t):(d=a>>>f&s,c=32-(p=t-c),d|=((a=e[l++])&(1<<p)-1)<<t-p,f=p),h[u]=d<m?o+d*i:n;return h.unshift(o),h}(I,m,R-1,n,C,k):function(e,t,r,o,i,n){var a,s=(1<<t)-1,l=0,u=0,p=0,c=0,d=0,f=[],h=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*h;var m=Math.ceil((n-o)/i);for(u=0;u<r;u++)0===c&&(a=e[l++],c=32),c>=t?(d=a>>>c-t&s,c-=t):(d=(a&s)<<(p=t-c)&s,d+=(a=e[l++])>>>(c=32-p)),f[u]=d<m?o+d*i:n;return f.unshift(o),f}(I,m,R-1,n,C,k),l>=3?t(g,i,T,y,S):e(g,i,T,y,S)}else o.counter.bitstuffer++,T=m,o.ptr+=u,T>0&&(b=Math.ceil(y*T/8),x=Math.ceil(b/4),v=new ArrayBuffer(4*x),(w=new Uint8Array(v)).set(new Uint8Array(r,o.ptr,b)),g=new Uint32Array(v),o.ptr+=b,l>=3?null==n?function(e,t,r,o){var i,n,a,s,l=(1<<r)-1,u=0,p=0,c=0;for(i=0;i<o;i++)0===p&&(a=e[u++],p=32,c=0),p>=r?(n=a>>>c&l,p-=r,c+=r):(n=a>>>c&l,p=32-(s=r-p),n|=((a=e[u++])&(1<<s)-1)<<r-s,c=s),t[i]=n}(g,i,T,y):t(g,i,T,y,!1,n,C,k):null==n?function(e,t,r,o){var i,n,a,s,l=(1<<r)-1,u=0,p=0,c=4*e.length-Math.ceil(r*o/8);for(e[e.length-1]<<=8*c,i=0;i<o;i++)0===p&&(a=e[u++],p=32),p>=r?(n=a>>>p-r&l,p-=r):(n=(a&l)<<(s=r-p)&l,n+=(a=e[u++])>>>(p=32-s)),t[i]=n}(g,i,T,y):e(g,i,T,y,!1,n,C,k))},readTiles:function(e,t,o){var i=t.headerInfo,n=i.width,a=i.height,s=i.microBlockSize,l=i.imageType,u=r.getDataTypeSize(l),p=Math.ceil(n/s),c=Math.ceil(a/s);t.pixels.numBlocksY=c,t.pixels.numBlocksX=p,t.pixels.ptr=0;var d,f,h,m,y,g,v,w,b,x,S=0,I=0,R=0,T=0,C=0,k=0,O=0,A=0,D=0,P=0,N=0,M=0,_=0,j=0,F=new o(s*s),U=a%s||s,L=n%s||s,E=i.numDims,B=t.pixels.resultMask,V=t.pixels.resultPixels,J=i.fileVersion>=5?14:15,G=i.zMax;for(R=0;R<c;R++)for(C=R!==c-1?s:U,T=0;T<p;T++)for(D=R*n*s+T*s,P=n-(k=T!==p-1?s:L),w=0;w<E;w++){if(E>1?(x=V,D=R*n*s+T*s,V=new o(t.pixels.resultPixels.buffer,n*a*w*u,n*a),G=i.maxValues[w]):x=null,f={},j=0,j++,A=(O=(d=new DataView(e,t.ptr,Math.min(10,e.byteLength-t.ptr))).getUint8(0))>>6&255,(O>>2&J)!=(T*s>>3&J))throw"integrity issue";if((b=i.fileVersion>=5?4&O:0)&&0===w)throw"integrity issue";if((y=3&O)>3)throw t.ptr+=j,"Invalid block encoding ("+y+")";if(2!==y)if(0===y){if(b)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=j,N=(N=C*k*u)<(M=e.byteLength-t.ptr)?N:M,h=new ArrayBuffer(N%u==0?N:N+u-N%u),new Uint8Array(h).set(new Uint8Array(e,t.ptr,N)),m=new o(h),_=0,B)for(S=0;S<C;S++){for(I=0;I<k;I++)B[D]&&(V[D]=m[_++]),D++;D+=P}else for(S=0;S<C;S++){for(I=0;I<k;I++)V[D++]=m[_++];D+=P}t.ptr+=_*u}else if(g=r.getDataTypeUsed(b&&l<6?5:l,A),v=r.getOnePixel(f,j,g,d),j+=r.getDataTypeSize(g),3===y)if(t.ptr+=j,t.counter.constantoffset++,B)for(S=0;S<C;S++){for(I=0;I<k;I++)B[D]&&(V[D]=b?Math.min(G,x[D]+v):v),D++;D+=P}else for(S=0;S<C;S++){for(I=0;I<k;I++)V[D]=b?Math.min(G,x[D]+v):v,D++;D+=P}else if(t.ptr+=j,r.decodeBits(e,t,F,v,w),j=0,b)if(B)for(S=0;S<C;S++){for(I=0;I<k;I++)B[D]&&(V[D]=F[j++]+x[D]),D++;D+=P}else for(S=0;S<C;S++){for(I=0;I<k;I++)V[D]=F[j++]+x[D],D++;D+=P}else if(B)for(S=0;S<C;S++){for(I=0;I<k;I++)B[D]&&(V[D]=F[j++]),D++;D+=P}else for(S=0;S<C;S++){for(I=0;I<k;I++)V[D++]=F[j++];D+=P}else{if(b)if(B)for(S=0;S<C;S++)for(I=0;I<k;I++)B[D]&&(V[D]=x[D]),D++;else for(S=0;S<C;S++)for(I=0;I<k;I++)V[D]=x[D],D++;t.counter.constant++,t.ptr+=j}}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:r.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var t=e.headerInfo.zMax,r=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,i=0,n=0,a=0,s=e.pixels.resultMask,l=e.pixels.resultPixels;if(s)if(r>1)for(i=0;i<r;i++)for(a=i*o,t=e.headerInfo.maxValues[i],n=0;n<o;n++)s[n]&&(l[a+n]=t);else for(n=0;n<o;n++)s[n]&&(l[n]=t);else if(r>1)for(i=0;i<r;i++)for(a=i*o,t=e.headerInfo.maxValues[i],n=0;n<o;n++)l[a+n]=t;else for(n=0;n<o;n++)l[n]=t},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=5e-324&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,o){var i=0;switch(r){case 0:i=o.getInt8(t);break;case 1:i=o.getUint8(t);break;case 2:i=o.getInt16(t,!0);break;case 3:i=o.getUint16(t,!0);break;case 4:i=o.getInt32(t,!0);break;case 5:i=o.getUInt32(t,!0);break;case 6:i=o.getFloat32(t,!0);break;case 7:i=o.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i}},o=function(e,t,r){this.val=e,this.left=t,this.right=r};return{decode:function(e,t){var o=(t=t||{}).noDataValue,i=0,n={};if(n.ptr=t.inputOffset||0,n.pixels={},r.readHeaderInfo(e,n)){var a=n.headerInfo,s=a.fileVersion,l=r.getDataTypeArray(a.imageType);if(s>5)throw"unsupported lerc version 2."+s;r.readMask(e,n),a.numValidPixel===a.width*a.height||n.pixels.resultMask||(n.pixels.resultMask=t.maskData);var u,p=a.width*a.height;if(n.pixels.resultPixels=new l(p*a.numDims),n.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0},0!==a.numValidPixel)if(a.zMax===a.zMin)r.constructConstantSurface(n);else if(s>=4&&r.checkMinMaxRanges(e,n))r.constructConstantSurface(n);else{var c=new DataView(e,n.ptr,2),d=c.getUint8(0);if(n.ptr++,d)r.readDataOneSweep(e,n,l);else if(s>1&&a.imageType<=1&&Math.abs(a.maxZError-.5)<1e-5){var f=c.getUint8(1);if(n.ptr++,n.encodeMode=f,f>2||s<4&&f>1)throw"Invalid Huffman flag "+f;f?r.readHuffman(e,n,l):r.readTiles(e,n,l)}else r.readTiles(e,n,l)}n.eofOffset=n.ptr,t.inputOffset?(u=n.headerInfo.blobSize+t.inputOffset-n.ptr,Math.abs(u)>=1&&(n.eofOffset=t.inputOffset+n.headerInfo.blobSize)):(u=n.headerInfo.blobSize-n.ptr,Math.abs(u)>=1&&(n.eofOffset=n.headerInfo.blobSize));var h={width:a.width,height:a.height,pixelData:n.pixels.resultPixels,minValue:a.zMin,maxValue:a.zMax,validPixelCount:a.numValidPixel,dimCount:a.numDims,dimStats:{minValues:a.minValues,maxValues:a.maxValues},maskData:n.pixels.resultMask};if(n.pixels.resultMask&&r.isValidPixelValue(a.imageType,o)){var m=n.pixels.resultMask;for(i=0;i<p;i++)m[i]||(h.pixelData[i]=o);h.noDataValue=o}return n.noDataValue=o,t.returnFileInfo&&(h.fileInfo=r.formatFileInfo(n)),h}},getBandCount:function(e){for(var t=0,o=0,i={ptr:0,pixels:{}};o<e.byteLength-58;)r.readHeaderInfo(e,i),t++,i.ptr=o+=i.headerInfo.blobSize;return t}}}).apply(null,[]))||(e.exports=o)},kKuP:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27"),r("ml7j")],void 0===(i=(function(e,t,r,o,i,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.value=0,r.unit="milliseconds",r}var i;return r(t,e),i=t,t.prototype.toMilliseconds=function(){return this.value*a.millisecondsPerTimeUnit[this.unit]},t.prototype.clone=function(){return new i({value:this.value,unit:this.unit})},o([n.property({type:Number,json:{write:!0},nonNullable:!0})],t.prototype,"value",void 0),o([n.property({type:a.timeUnitKebabDictionary.apiValues,json:{type:a.timeUnitKebabDictionary.jsonValues,read:a.timeUnitKebabDictionary.read,write:a.timeUnitKebabDictionary.write},nonNullable:!0})],t.prototype,"unit",void 0),i=o([n.subclass("esri.TimeInterval")],t)}(n.declared(i.JSONSupport))}).apply(null,o))||(e.exports=i)},nakx:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("9gfz"),r("ycL1"),r("Vx27"),r("oxlp"),r("Lzvl"),r("ouPT"),r("97bx")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p,c){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geometry=null,t.renderingRules=null,t.pixelSize=null,t.returnGeometry=!0,t.returnCatalogItems=!0,t.returnPixelValues=!0,t.maxItemCount=null,t.timeExtent=null,t.raster=void 0,t.viewId=void 0,t}return r(t,e),t.prototype.writeGeometry=function(e,t,r){null!=e&&(t.geometryType=u.getJsonType(e),t[r]=JSON.stringify(e.toJSON()))},Object.defineProperty(t.prototype,"mosaicRule",{set:function(e){var t=e;t&&t.mosaicMethod&&(t=p.fromJSON(i({},t.toJSON(),{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)},enumerable:!0,configurable:!0}),t.prototype.writeMosaicRule=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},Object.defineProperty(t.prototype,"renderingRule",{set:function(e){var t=e;t&&t.rasterFunction&&(t=c.fromJSON(i({},t.toJSON(),{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)},enumerable:!0,configurable:!0}),t.prototype.writeRenderingRule=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},t.prototype.writeRenderingRules=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.map((function(e){return e.toJSON()}))))},t.prototype.writePixelSize=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},t.prototype.writeTimeExtent=function(e,t,r){if(null!=e){var o=e.start?e.start.getTime():null,i=e.end?e.end.getTime():null;t[r]=null!=o?null!=i?o+","+i:""+o:null}},o([s.property({json:{write:!0}})],t.prototype,"geometry",void 0),o([s.writer("geometry")],t.prototype,"writeGeometry",null),o([s.property({type:p,json:{write:!0}})],t.prototype,"mosaicRule",null),o([s.writer("mosaicRule")],t.prototype,"writeMosaicRule",null),o([s.property({type:c,json:{write:!0}})],t.prototype,"renderingRule",null),o([s.writer("renderingRule")],t.prototype,"writeRenderingRule",null),o([s.property({type:[c],json:{write:!0}})],t.prototype,"renderingRules",void 0),o([s.writer("renderingRules")],t.prototype,"writeRenderingRules",null),o([s.property({type:l,json:{write:!0}})],t.prototype,"pixelSize",void 0),o([s.writer("pixelSize")],t.prototype,"writePixelSize",null),o([s.property({type:Boolean,json:{write:!0}})],t.prototype,"returnGeometry",void 0),o([s.property({type:Boolean,json:{write:!0}})],t.prototype,"returnCatalogItems",void 0),o([s.property({type:Boolean,json:{write:!0}})],t.prototype,"returnPixelValues",void 0),o([s.property({type:Number,json:{write:!0}})],t.prototype,"maxItemCount",void 0),o([s.property({type:n,json:{write:{target:"time"}}})],t.prototype,"timeExtent",void 0),o([s.writer("timeExtent")],t.prototype,"writeTimeExtent",null),o([s.property({json:{write:!0}})],t.prototype,"raster",void 0),o([s.property({json:{write:!0}})],t.prototype,"viewId",void 0),o([s.subclass("esri.tasks.support.ImageServiceIdentifyParameters")],t)}(s.declared(a.JSONSupport))}).apply(null,o))||(e.exports=i)},o5TS:function(e,t,r){var o,i;o=[r.dj.c(e.i),t],void 0===(i=(function(e,t){function r(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}Object.defineProperty(t,"__esModule",{value:!0}),t.isSizeVariable=function(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass},t.isValidNumber=function(e){return null!=e&&!isNaN(e)&&isFinite(e)},t.getInputValueType=r,t.getTransformationType=function(e,t){return"unknown"===(t||r(e))?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===(e.valueUnit||"unknown")?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}}).apply(null,o))||(e.exports=i)},ouPT:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ImIS"),r("ycL1"),r("rg9i"),r("Vx27"),r("oxlp"),r("7Rj3"),r("97bx")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p){var c=i.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),d=i.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});return function(e){function t(t){var r=e.call(this,t)||this;return r.ascending=!0,r.itemRenderingRule=null,r.lockRasterIds=null,r.method=null,r.multidimensionalDefinition=null,r.objectIds=null,r.operation=null,r.sortField=null,r.sortValue=null,r.viewpoint=null,r.where=null,r}var i;return r(t,e),i=t,t.prototype.readAscending=function(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending},t.prototype.readMethod=function(e,t){return function(e){var t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;case"none":default:t="esriMosaicNone"}return d.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)},t.prototype.readOperation=function(e,t){var r=t.mosaicOperation,o=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),i=r||(o?c.toJSON(o):null);return c.fromJSON(i)||"first"},t.prototype.castSortValue=function(e){return null==e||"string"==typeof e||"number"==typeof e?e:""+e},t.prototype.clone=function(){return new i({ascending:this.ascending,itemRenderingRule:a.clone(this.itemRenderingRule),lockRasterIds:a.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:a.clone(this.multidimensionalDefinition),objectIds:a.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:a.clone(this.viewpoint),where:this.where})},o([s.property({type:Boolean,json:{write:!0}})],t.prototype,"ascending",void 0),o([s.reader("ascending",["ascending","sortAscending"])],t.prototype,"readAscending",null),o([s.property({type:p,json:{write:!0}})],t.prototype,"itemRenderingRule",void 0),o([s.property({type:[Number],json:{write:{overridePolicy:function(){return{enabled:"lock-raster"===this.method}}}}})],t.prototype,"lockRasterIds",void 0),o([s.property({type:String,json:{type:d.jsonValues,write:{target:"mosaicMethod",writer:d.write}}})],t.prototype,"method",void 0),o([s.reader("method",["mosaicMethod","defaultMosaicMethod"])],t.prototype,"readMethod",null),o([s.property({type:[u],json:{write:!0}})],t.prototype,"multidimensionalDefinition",void 0),o([s.property({type:[Number],json:{read:{source:"fids"},write:{target:"fids"}}})],t.prototype,"objectIds",void 0),o([s.property({json:{type:c.jsonValues,read:{reader:c.read},write:{target:"mosaicOperation",writer:c.write}}})],t.prototype,"operation",void 0),o([s.reader("operation",["mosaicOperation","mosaicOperator"])],t.prototype,"readOperation",null),o([s.property({type:String,json:{write:{overridePolicy:function(){return{enabled:"attribute"===this.method}}}}})],t.prototype,"sortField",void 0),o([s.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],t.prototype,"sortValue",void 0),o([s.cast("sortValue")],t.prototype,"castSortValue",null),o([s.property({type:l,json:{write:!0}})],t.prototype,"viewpoint",void 0),o([s.property({type:String,json:{write:!0}})],t.prototype,"where",void 0),i=o([s.subclass("esri.layers.support.MosaicRule")],t)}(s.declared(n.JSONSupport))}).apply(null,o))||(e.exports=i)},r5V0:function(e,t,r){var o;void 0===(o=(function(){var e=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(e<r)return t;for(var o=512;o<e;)o<<=1;for(var i=new Uint8Array(o),n=0;n<r;++n)i[n]=t[n];return this.buffer=i},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var o=this.bufferLength;r>o&&(r=o)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var o=e+t;this.bufferLength<=o&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}();return function(){function t(e){throw new Error(e)}function r(r){var o=0,i=r[o++],n=r[o++];-1!=i&&-1!=n||t("Invalid header in flate stream"),8!=(15&i)&&t("Unknown compression method in flate stream"),((i<<8)+n)%31!=0&&t("Bad FCHECK in flate stream"),32&n&&t("FDICT bit set in flate stream"),this.bytes=r,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,e.call(this)}if(!self||!self.Uint32Array)return null;var o=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),a=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(r.prototype=Object.create(e.prototype)).getBits=function(e){for(var r,o=this.codeSize,i=this.codeBuf,n=this.bytes,a=this.bytesPos;o<e;)void 0===(r=n[a++])&&t("Bad encoding in flate stream"),i|=r<<o,o+=8;return r=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=o-=e,this.bytesPos=a,r},r.prototype.getCode=function(e){for(var r=e[0],o=e[1],i=this.codeSize,n=this.codeBuf,a=this.bytes,s=this.bytesPos;i<o;){var l;void 0===(l=a[s++])&&t("Bad encoding in flate stream"),n|=l<<i,i+=8}var u=r[n&(1<<o)-1],p=u>>16,c=65535&u;return(0==i||i<p||0==p)&&t("Bad encoding in flate stream"),this.codeBuf=n>>p,this.codeSize=i-p,this.bytesPos=s,c},r.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,o=0;o<t;++o)e[o]>r&&(r=e[o]);for(var i=1<<r,n=new Uint32Array(i),a=1,s=0,l=2;a<=r;++a,s<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==a){var p=0,c=s;for(o=0;o<a;++o)p=p<<1|1&c,c>>=1;for(o=p;o<i;o+=l)n[o]=a<<16|u;++s}return[n,r]},r.prototype.readBlock=function(){function e(e,t,r,o,i){for(var n=e.getBits(r)+o;n-- >0;)t[h++]=i}var r=this.getBits(3);if(1&r&&(this.eof=!0),0!=(r>>=1)){var l,u;if(1==r)l=a,u=s;else if(2==r){for(var p=this.getBits(5)+257,c=this.getBits(5)+1,d=this.getBits(4)+4,f=Array(o.length),h=0;h<d;)f[o[h++]]=this.getBits(3);for(var m=this.generateHuffmanTable(f),y=0,g=(h=0,p+c),v=new Array(g);h<g;){var w=this.getCode(m);16==w?e(this,v,2,3,y):17==w?e(this,v,3,3,y=0):18==w?e(this,v,7,11,y=0):v[h++]=y=w}l=this.generateHuffmanTable(v.slice(0,p)),u=this.generateHuffmanTable(v.slice(p,g))}else t("Unknown block type in flate stream");for(var b=(N=this.buffer)?N.length:0,x=this.bufferLength;;){var S=this.getCode(l);if(S<256)x+1>=b&&(b=(N=this.ensureBuffer(x+1)).length),N[x++]=S;else{if(256==S)return void(this.bufferLength=x);var I=(S=i[S-=257])>>16;I>0&&(I=this.getBits(I)),y=(65535&S)+I,S=this.getCode(u),(I=(S=n[S])>>16)>0&&(I=this.getBits(I));var R=(65535&S)+I;x+y>=b&&(b=(N=this.ensureBuffer(x+y)).length);for(var T=0;T<y;++T,++x)N[x]=N[x-R]}}}else{var C,k=this.bytes,O=this.bytesPos;void 0===(C=k[O++])&&t("Bad block header in flate stream");var A=C;void 0===(C=k[O++])&&t("Bad block header in flate stream"),A|=C<<8,void 0===(C=k[O++])&&t("Bad block header in flate stream");var D=C;void 0===(C=k[O++])&&t("Bad block header in flate stream"),(D|=C<<8)!=(65535&~A)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var P=this.bufferLength,N=this.ensureBuffer(P+A),M=P+A;this.bufferLength=M;for(var _=P;_<M;++_){if(void 0===(C=k[O++])){this.eof=!0;break}N[_]=C}this.bytesPos=O}},r}()}).apply(null,[]))||(e.exports=o)},sNli:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("ImIS"),r("ycL1"),r("Vx27"),r("YM6P"),r("ouPT")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0});var p=new n.default({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),c=new n.default({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=null,t.adjustAspectRatio=void 0,t.bandIds=void 0,t.compression=void 0,t.compressionQuality=void 0,t.compressionTolerance=.01,t.format=null,t.interpolation=null,t.noData=null,t.noDataInterpretation=void 0,t.pixelType=void 0,t.lercVersion=2,t}return o(t,e),t.prototype.writeAdjustAspectRatio=function(e,t,r){this.layer.version<10.3||(t[r]=e)},t.prototype.writeCompressionQuality=function(e,t,r){this.format&&this.format.toLowerCase().indexOf("jpg")>-1&&null!=e&&(t[r]=e)},t.prototype.writeCompressionTolerance=function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)},t.prototype.writeLercVersion=function(e,t,r){"lerc"===this.format&&this.layer.version>=10.5&&(t[r]=e)},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},set:function(e){this._set("version",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mosaicRule",{get:function(){var e=this.layer,t=e.mosaicRule,r=e.definitionExpression;return t?r&&r!==t.where&&((t=t.clone()).where=r):r&&(t=new u({where:r})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingRule",{get:function(){var e=this.layer,t=e.renderingRule,r=e.pixelFilter;return(!e.format||e.format.indexOf("jpg")>-1||e.format.indexOf("png")>-1)&&!r&&(t=this.combineRendererWithRenderingRule()),t},enumerable:!0,configurable:!0}),t.prototype.combineRendererWithRenderingRule=function(){var e=this.layer,t=e.rasterInfo,r=e.renderingRule,o=e.renderer;return o&&l.isSupportedRendererType(o)?l.combineRenderingRules(l.convertRendererToRenderingRule(o,{rasterAttributeTable:t.attributeTable,pixelType:t.pixelType,convertColorRampToColormap:e.version<10.6}),r):r},i([s.property()],t.prototype,"layer",void 0),i([s.property({json:{write:!0}})],t.prototype,"adjustAspectRatio",void 0),i([s.writer("adjustAspectRatio")],t.prototype,"writeAdjustAspectRatio",null),i([s.property({json:{write:!0}}),s.aliasOf("layer.bandIds")],t.prototype,"bandIds",void 0),i([s.property({json:{write:!0}})],t.prototype,"compression",void 0),i([s.property({json:{write:!0}}),s.aliasOf("layer.compressionQuality")],t.prototype,"compressionQuality",void 0),i([s.writer("compressionQuality")],t.prototype,"writeCompressionQuality",null),i([s.property({json:{write:!0}}),s.aliasOf("layer.compressionTolerance")],t.prototype,"compressionTolerance",void 0),i([s.writer("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),i([s.property({json:{write:!0}}),s.aliasOf("layer.format")],t.prototype,"format",void 0),i([s.property({type:String,json:{read:{reader:p.read},write:{writer:p.write}}}),s.aliasOf("layer.interpolation")],t.prototype,"interpolation",void 0),i([s.property({json:{write:!0}}),s.aliasOf("layer.noData")],t.prototype,"noData",void 0),i([s.property({type:String,json:{read:{reader:c.read},write:{writer:c.write}}}),s.aliasOf("layer.noDataInterpretation")],t.prototype,"noDataInterpretation",void 0),i([s.property({json:{write:!0}})],t.prototype,"pixelType",void 0),i([s.property({json:{write:!0}})],t.prototype,"lercVersion",void 0),i([s.writer("lercVersion")],t.prototype,"writeLercVersion",null),i([s.property({type:Number,dependsOn:["layer.adjustAspectRatio","layer.bandIds","layer.format","layer.compressionQuality","layer.compressionTolerance","layer.definitionExpression","layer.interpolation","layer.noData","layer.noDataInterpretation","layer.mosaicRule","layer.renderingRule","layer.pixelFilter","layer.renderer","lercVersion","pixelType"]})],t.prototype,"version",null),i([s.property({dependsOn:["layer.mosaicRule","layer.definitionExpression"],json:{write:!0}})],t.prototype,"mosaicRule",null),i([s.property({dependsOn:["layer.renderingRule","layer.renderer","layer.rasterInfo","layer.format"],json:{write:!0}})],t.prototype,"renderingRule",null),i([s.subclass("esri.layers.mixins.ExportImageServiceParameters")],t)}(s.declared(a.JSONSupport));t.ExportImageServiceParameters=d}).apply(null,o))||(e.exports=i)},w1v0:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("TMur"),r("jZlN"),r("ImIS"),r("ycL1"),r("LxLY"),r("Vx27"),r("Z4y+"),r("Lzvl"),r("KQcO")],void 0===(i=(function(e,t,r,o,i,n,a,s,l,u,p,c,d){var f=new a.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}),h=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return o(t,e),t.prototype.readFeatures=function(e,t){for(var r=p.fromJSON(t.spatialReference),o=[],i=0;i<e.length;i++){var a=e[i],s=n.fromJSON(a),u=a.geometry&&a.geometry.spatialReference;l.isSome(s.geometry)&&!u&&(s.geometry.spatialReference=r),o.push(s)}return o},t.prototype.writeGeometryType=function(e,t,r,o){if(e)f.write(e,t,r,o);else{var i=this.features;if(i)for(var n=0,a=i;n<a.length;n++){var s=a[n];if(s&&l.isSome(s.geometry))return void f.write(s.geometry.type,t,r,o)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r)for(var o=0,i=r;o<i.length;o++){var n=i[o];n&&l.isSome(n.geometry)&&n.geometry.spatialReference&&(t.spatialReference=n.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var o=t.features[r];if(o.geometry){var i=e&&e[r];o.geometry=i&&i.toJSON()||o.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],o=t[1],i=e.translate,n=i[0],a=i[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-n)/r)}),(function(e){return Math.round((a-e)/o)})),p=0,c=s.length;p<c;p++)u(l.expect(s[p].geometry))||(s.splice(p,1),p--,c--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this,t=e.features,r=e.transform;if(!r)return this;for(var o=r.translate,i=o[0],n=o[1],a=r.scale,s=a[0],u=a[1],p=this._getHydrationFunction(e.geometryType,(function(e){return e*s+i}),(function(e){return n-e*u})),c=0,d=t;c<d.length;c++){var f=d[c].geometry;l.isSome(f)&&p(f)}return this},t.prototype._quantizePoints=function(e,t,r){for(var o,i,n=[],a=0,s=e.length;a<s;a++){var l=e[a];if(a>0){var u=t(l[0]),p=r(l[1]);u===o&&p===i||(n.push([u-o,p-i]),o=u,i=p)}else o=t(l[0]),i=r(l[1]),n.push([o,i])}return n.length>0?n:null},t.prototype._getQuantizationFunction=function(e,t,r){var o=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=c.isPolygon(e)?e.rings:e.paths,n=[],a=0,s=i.length;a<s;a++){var l=o._quantizePoints(i[a],t,r);l&&n.push(l)}return n.length>0?(c.isPolygon(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?function(e){var i;return(i=o._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var o,i,n=c.isPolygon(e)?e.rings:e.paths,a=0,s=n.length;a<s;a++)for(var l=n[a],u=0,p=l.length;u<p;u++){var d=l[u];u>0?(o+=d[0],i+=d[1]):(o=d[0],i=d[1]),d[0]=t(o),d[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var o,i,n=e.points,a=0,s=n.length;a<s;a++){var l=n[a];a>0?(o+=l[0],i+=l[1]):(o=l[0],i=l[1]),l[0]=t(o),l[1]=r(i)}}:void 0},r([u.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([u.property({type:[n],json:{write:!0}})],t.prototype,"features",void 0),r([u.reader("features")],t.prototype,"readFeatures",null),r([u.property({type:[d],json:{write:!0}})],t.prototype,"fields",void 0),r([u.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f.read}}})],t.prototype,"geometryType",void 0),r([u.writer("geometryType")],t.prototype,"writeGeometryType",null),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([u.property({types:i.geometryTypes,json:{read:c.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([u.property({type:p,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([u.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([u.property({json:{write:!0}})],t.prototype,"transform",void 0),r([u.subclass("esri.tasks.support.FeatureSet")],t)}(u.declared(s.JSONSupport));return h.prototype.toJSON.isDefaultToJSON=!0,h||(h={}),h}).apply(null,o))||(e.exports=i)},xIS7:function(e,t,r){var o;void 0===(o=(function(){"use strict";var e=function(){function e(e){this.message="JPEG error: "+e}return(e.prototype=new Error).name="JpegError",e.constructor=e,e}();return function(){function t(){this.decodeTransform=null,this.colorTransform=-1}function r(e,t){for(var r,o,i=0,n=[],a=16;a>0&&!e[a-1];)a--;n.push({children:[],index:0});var s,l=n[0];for(r=0;r<a;r++){for(o=0;o<e[r];o++){for((l=n.pop()).children[l.index]=t[i];l.index>0;)l=n.pop();for(l.index++,n.push(l);n.length<=r;)n.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s;i++}r+1<a&&(n.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s)}return n[0].children}function o(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function i(t,r,i,n,a,u,p,c,d){function f(){if(k>0)return k--,C>>k&1;if(255===(C=t[r++])){var o=t[r++];if(o)throw new e("unexpected marker "+(C<<8|o).toString(16))}return k=7,C>>>7}function h(t){for(var r=t;;){if("number"==typeof(r=r[f()]))return r;if("object"!=typeof r)throw new e("invalid huffman sequence")}}function m(e){for(var t=0;e>0;)t=t<<1|f(),e--;return t}function y(e){if(1===e)return 1===f()?1:-1;var t=m(e);return t>=1<<e-1?t:t+(-1<<e)+1}var g,v,w,b,x,S,I,R=i.mcusPerLine,T=r,C=0,k=0,O=0,A=0,D=n.length;I=i.progressive?0===u?0===c?function(e,t){var r=h(e.huffmanTableDC),o=0===r?0:y(r)<<d;e.blockData[t]=e.pred+=o}:function(e,t){e.blockData[t]|=f()<<d}:0===c?function(e,t){if(O>0)O--;else for(var r=u,o=p;r<=o;){var i=h(e.huffmanTableAC),n=15&i,a=i>>4;if(0!==n)e.blockData[t+l[r+=a]]=y(n)*(1<<d),r++;else{if(a<15){O=m(a)+(1<<a)-1;break}r+=16}}}:function(t,r){for(var o,i,n=u,a=p,s=0;n<=a;){var c=l[n];switch(A){case 0:if(s=(i=h(t.huffmanTableAC))>>4,0==(o=15&i))s<15?(O=m(s)+(1<<s),A=4):(s=16,A=1);else{if(1!==o)throw new e("invalid ACn encoding");g=y(o),A=s?2:3}continue;case 1:case 2:t.blockData[r+c]?t.blockData[r+c]+=f()<<d:0==--s&&(A=2===A?3:0);break;case 3:t.blockData[r+c]?t.blockData[r+c]+=f()<<d:(t.blockData[r+c]=g<<d,A=0);break;case 4:t.blockData[r+c]&&(t.blockData[r+c]+=f()<<d)}n++}4===A&&0==--O&&(A=0)}:function(e,t){var r=h(e.huffmanTableDC),o=0===r?0:y(r);e.blockData[t]=e.pred+=o;for(var i=1;i<64;){var n=h(e.huffmanTableAC),a=15&n,s=n>>4;if(0!==a)e.blockData[t+l[i+=s]]=y(a),i++;else{if(s<15)break;i+=16}}};var P,N,M,_,j=0;for(N=1===D?n[0].blocksPerLine*n[0].blocksPerColumn:R*i.mcusPerColumn;j<N;){var F=a?Math.min(N-j,a):N;for(w=0;w<D;w++)n[w].pred=0;if(O=0,1===D)for(v=n[0],S=0;S<F;S++)!function(e,t,r){t(e,o(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}(v,I,j),j++;else for(S=0;S<F;S++){for(w=0;w<D;w++)for(M=(v=n[w]).h,_=v.v,b=0;b<_;b++)for(x=0;x<M;x++)!function(e,t,r,i,n){t(e,o(e,(r/R|0)*e.v+i,r%R*e.h+n))}(v,I,j,b,x);j++}k=0,(P=s(t,r))&&P.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+P.invalid),r=P.offset);var U=P&&P.marker;if(!U||U<=65280)throw new e("marker was not found");if(!(U>=65488&&U<=65495))break;r+=2}return(P=s(t,r))&&P.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+P.invalid),r=P.offset),r-T}function n(t,r,o){var i,n,a,s,l,g,v,w,b,x,S,I,R,T,C,k,O,A=t.quantizationTable,D=t.blockData;if(!A)throw new e("missing required Quantization Table.");for(var P=0;P<64;P+=8)b=D[r+P],b*=A[P],0!=((x=D[r+P+1])|(S=D[r+P+2])|(I=D[r+P+3])|(R=D[r+P+4])|(T=D[r+P+5])|(C=D[r+P+6])|(k=D[r+P+7]))?(n=(i=(i=m*b+128>>8)+(n=m*(R*=A[P+4])+128>>8)+1>>1)-n,O=(a=S*=A[P+2])*h+(s=C*=A[P+6])*f+128>>8,a=a*f-s*h+128>>8,v=(l=(l=y*((x*=A[P+1])-(k*=A[P+7]))+128>>8)+(v=(T*=A[P+5])<<4)+1>>1)-v,g=(w=(w=y*(x+k)+128>>8)+(g=(I*=A[P+3])<<4)+1>>1)-g,s=(i=i+(s=O)+1>>1)-s,a=(n=n+a+1>>1)-a,O=l*d+w*c+2048>>12,l=l*c-w*d+2048>>12,w=O,O=g*p+v*u+2048>>12,g=g*u-v*p+2048>>12,v=O,o[P]=i+w,o[P+7]=i-w,o[P+1]=n+v,o[P+6]=n-v,o[P+2]=a+g,o[P+5]=a-g,o[P+3]=s+l,o[P+4]=s-l):(o[P]=O=m*b+512>>10,o[P+1]=O,o[P+2]=O,o[P+3]=O,o[P+4]=O,o[P+5]=O,o[P+6]=O,o[P+7]=O);for(var N=0;N<8;++N)b=o[N],0!=((x=o[N+8])|(S=o[N+16])|(I=o[N+24])|(R=o[N+32])|(T=o[N+40])|(C=o[N+48])|(k=o[N+56]))?(O=(a=S)*h+(s=C)*f+2048>>12,a=a*f-s*h+2048>>12,s=O,v=(l=(l=y*(x-k)+2048>>12)+(v=T)+1>>1)-v,g=(w=(w=y*(x+k)+2048>>12)+(g=I)+1>>1)-g,O=l*d+w*c+2048>>12,l=l*c-w*d+2048>>12,w=O,O=g*p+v*u+2048>>12,g=g*u-v*p+2048>>12,x=(x=(n=(n=(i=4112+((i=m*b+2048>>12)+(n=m*R+2048>>12)+1>>1))-n)+a+1>>1)+(v=O))<16?0:x>=4080?255:x>>4,S=(S=(a=n-a)+g)<16?0:S>=4080?255:S>>4,I=(I=(s=(i=i+s+1>>1)-s)+l)<16?0:I>=4080?255:I>>4,R=(R=s-l)<16?0:R>=4080?255:R>>4,T=(T=a-g)<16?0:T>=4080?255:T>>4,C=(C=n-v)<16?0:C>=4080?255:C>>4,k=(k=i-w)<16?0:k>=4080?255:k>>4,D[r+N]=b=(b=i+w)<16?0:b>=4080?255:b>>4,D[r+N+8]=x,D[r+N+16]=S,D[r+N+24]=I,D[r+N+32]=R,D[r+N+40]=T,D[r+N+48]=C,D[r+N+56]=k):(D[r+N]=O=(O=m*b+8192>>14)<-2040?0:O>=2024?255:O+2056>>4,D[r+N+8]=O,D[r+N+16]=O,D[r+N+24]=O,D[r+N+32]=O,D[r+N+40]=O,D[r+N+48]=O,D[r+N+56]=O)}function a(e,t){for(var r=t.blocksPerLine,i=t.blocksPerColumn,a=new Int16Array(64),s=0;s<i;s++)for(var l=0;l<r;l++)n(t,o(t,s,l),a);return t.blockData}function s(e,t,r){function o(t){return e[t]<<8|e[t+1]}var i=e.length-1,n=r<t?r:t;if(t>=i)return null;var a=o(t);if(a>=65472&&a<=65534)return{invalid:null,marker:a,offset:t};for(var s=o(n);!(s>=65472&&s<=65534);){if(++n>=i)return null;s=o(n)}return{invalid:a.toString(16),marker:s,offset:n}}if(!self||!self.Uint8ClampedArray)return null;var l=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),u=4017,p=799,c=3406,d=2276,f=1567,h=3784,m=5793,y=2896;return t.prototype={parse:function(t){function o(){var e=t[p]<<8|t[p+1];return p+=2,e}var n,u,p=0,c=null,d=null,f=[],h=[],m=[],y=o();if(65496!==y)throw new e("SOI not found");for(y=o();65497!==y;){var g,v,w;switch(y){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=function(){var e=o(),r=p+e-2,i=s(t,r,p);i&&i.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+i.invalid),r=i.offset);var n=t.subarray(p,r);return p+=n.length,n}();65504===y&&74===b[0]&&70===b[1]&&73===b[2]&&70===b[3]&&0===b[4]&&(c={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])}),65518===y&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&(d={version:b[5]<<8|b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break;case 65499:for(var x=o()+p-2;p<x;){var S=t[p++],I=new Uint16Array(64);if(S>>4==0)for(v=0;v<64;v++)I[l[v]]=t[p++];else{if(S>>4!=1)throw new e("DQT - invalid table spec");for(v=0;v<64;v++)I[l[v]]=o()}f[15&S]=I}break;case 65472:case 65473:case 65474:if(n)throw new e("Only single frame JPEGs supported");o(),(n={}).extended=65473===y,n.progressive=65474===y,n.precision=t[p++],n.scanLines=o(),n.samplesPerLine=o(),n.components=[],n.componentIds={};var R,T=t[p++],C=0,k=0;for(g=0;g<T;g++){R=t[p];var O=t[p+1]>>4,A=15&t[p+1];C<O&&(C=O),k<A&&(k=A),w=n.components.push({h:O,v:A,quantizationId:t[p+2],quantizationTable:null}),n.componentIds[R]=w-1,p+=3}n.maxH=C,n.maxV=k,function(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),o=0;o<e.components.length;o++){j=e.components[o];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*j.h/e.maxH),n=Math.ceil(Math.ceil(e.scanLines/8)*j.v/e.maxV);j.blockData=new Int16Array(r*j.v*64*(t*j.h+1)),j.blocksPerLine=i,j.blocksPerColumn=n}e.mcusPerLine=t,e.mcusPerColumn=r}(n);break;case 65476:var D=o();for(g=2;g<D;){var P=t[p++],N=new Uint8Array(16),M=0;for(v=0;v<16;v++,p++)M+=N[v]=t[p];var _=new Uint8Array(M);for(v=0;v<M;v++,p++)_[v]=t[p];g+=17+M,(P>>4==0?m:h)[15&P]=r(N,_)}break;case 65501:o(),u=o();break;case 65498:o();var j,F=t[p++],U=[];for(g=0;g<F;g++){var L=n.componentIds[t[p++]],E=t[p++];(j=n.components[L]).huffmanTableDC=m[E>>4],j.huffmanTableAC=h[15&E],U.push(j)}var B=t[p++],V=t[p++],J=t[p++],G=i(t,p,n,U,u,B,V,J>>4,15&J);p+=G;break;case 65535:255!==t[p]&&p--;break;default:if(255===t[p-3]&&t[p-2]>=192&&t[p-2]<=254){p-=3;break}throw new e("unknown marker "+y.toString(16))}y=o()}for(this.width=n.samplesPerLine,this.height=n.scanLines,this.jfif=c,this.eof=p,this.adobe=d,this.components=[],g=0;g<n.components.length;g++){var z=f[(j=n.components[g]).quantizationId];z&&(j.quantizationTable=z),this.components.push({output:a(0,j),scaleX:j.h/n.maxH,scaleY:j.v/n.maxV,blocksPerLine:j.blocksPerLine,blocksPerColumn:j.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,o,i,n,a,s,l,u,p,c,d,f=this.width/e,h=this.height/t,m=0,y=this.components.length,g=e*t*y,v=new Uint8ClampedArray(g),w=new Uint32Array(e);for(l=0;l<y;l++){for(o=(r=this.components[l]).scaleX*f,i=r.scaleY*h,m=l,d=r.output,n=r.blocksPerLine+1<<3,a=0;a<e;a++)w[a]=(4294967288&(u=0|a*o))<<3|7&u;for(s=0;s<t;s++)for(c=n*(4294967288&(u=0|s*i))|(7&u)<<3,a=0;a<e;a++)v[m]=d[c+w[a]],m+=y}var b=this.decodeTransform;if(b)for(l=0;l<g;)for(u=0,p=0;u<y;u++,l++,p+=2)v[l]=(v[l]*b[p]>>8)+b[p+1];return v},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(e){for(var t,r,o,i=0,n=e.length;i<n;i+=3)r=e[i+1],e[i]=(t=e[i])-179.456+1.402*(o=e[i+2]),e[i+1]=t+135.459-.344*r-.714*o,e[i+2]=t-226.816+1.772*r;return e},_convertYcckToRgb:function(e){for(var t,r,o,i,n=0,a=0,s=e.length;a<s;a+=4)e[n++]=(r=e[a+1])*(-660635669420364e-19*r+.000437130475926232*(o=e[a+2])-54080610064599e-18*(t=e[a])+.00048449797120281*(i=e[a+3])-.154362151871126)-122.67195406894+o*(-.000957964378445773*o+.000817076911346625*t-.00477271405408747*i+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),e[n++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*o+.000659397001245577*t+.000426105652938837*i-.176491792462875)+o*(-.000778269941513683*o+.00130872261408275*t+.000770482631801132*i-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),e[n++]=r*(-.000570115196973677*r-263409051004589e-19*o+.0020741088115012*t-.00288260236853442*i+.814272968359295)-20.810012546947+o*(-153496057440975e-19*o-.000132689043961446*t+.000560833691242812*i-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return e},_convertYcckToCmyk:function(e){for(var t,r,o,i=0,n=e.length;i<n;i+=4)r=e[i+1],e[i]=434.456-(t=e[i])-1.402*(o=e[i+2]),e[i+1]=119.541-t+.344*r+.714*o,e[i+2]=481.816-t-1.772*r;return e},_convertCmykToRgb:function(e){for(var t,r,o,i,n=0,a=0,s=e.length;a<s;a+=4)e[n++]=255+(t=e[a]*(1/255))*(-4.387332384609988*t+54.48615194189176*(r=e[a+1]*(1/255))+18.82290502165302*(o=e[a+2]*(1/255))+212.25662451639585*(i=e[a+3]*(1/255))-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*o-17.873870861415444*i-5.497006427196366)+o*(-2.5217340131683033*o-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),e[n++]=255+t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*o+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*o+131.35250912493976*i-190.9453302588951)+o*(4.444339102852739*o+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),e[n++]=255+t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*o-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*o+50.606957656360734*i-112.23884253719248)+o*(.03296041114873217*o+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return e},getData:function(t,r,o){if(this.numComponents>4)throw new e("Unsupported color mode");var i=this._getLinearizedBlockData(t,r);if(1===this.numComponents&&o){for(var n=i.length,a=new Uint8ClampedArray(3*n),s=0,l=0;l<n;l++){var u=i[l];a[s++]=u,a[s++]=u,a[s++]=u}return a}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(i);if(4===this.numComponents){if(this._isColorConversionNeeded())return o?this._convertYcckToRgb(i):this._convertYcckToCmyk(i);if(o)return this._convertCmykToRgb(i)}return i}},t}()}).apply(null,[]))||(e.exports=o)},xJgq:function(e,t,r){var o,i;o=[r.dj.c(e.i),t],void 0===(i=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}}).apply(null,o))||(e.exports=i)}}]);