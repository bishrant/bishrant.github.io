!function(){function e(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{NloG:function(e,t,n){"use strict";var i=n("pO5D"),r=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),l=n("zm0L"),u=n("pdg3"),c=n("+rMe"),h=n("kJYu"),f=function(e){d(n,e);var t=b(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).layer=null,i.parent=null,i}return y(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var n=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";throw r.a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(i,"', id: '").concat(n,"')"),t),t}}))}},{key:"fullOpacity",get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){return!this.suspended&&!0===this.layer.legendEnabled}},{key:"updating",get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}},{key:"visible",get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}},{key:"canResume",value:function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),n}(Object(h.b)(Object(u.a)(Object(c.b)(l.a.EventedMixin(s.a)))));Object(i.a)([Object(a.b)()],f.prototype,"fullOpacity",null),Object(i.a)([Object(a.b)()],f.prototype,"layer",void 0),Object(i.a)([Object(a.b)()],f.prototype,"parent",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"suspended",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"suspendInfo",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"legendEnabled",null),Object(i.a)([Object(a.b)({type:Boolean,readOnly:!0})],f.prototype,"updating",null),Object(i.a)([Object(a.b)()],f.prototype,"visible",null),f=Object(i.a)([Object(o.a)("esri.views.layers.LayerView")],f),t.a=f},Vm2Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i,r=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),l=n("fX31"),u=n("N5XI"),h=n("ZuQG"),f=n("L1EH"),v=n("AMBt"),w=n("N2DF"),m=n("OvF4"),O=n("Ehki"),j=n("qatw");n("4GrV");var _={base:w.a,key:"type",typeMap:{extent:m.a,polygon:O.a}},k=i=function(e){d(n,e);var t=b(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).type="geometry",e.geometry=null,e}return y(n,[{key:"version",get:function(){return(this._get("version")||0)+1}},{key:"clone",value:function(){return new i({geometry:this.geometry.clone()})}}]),n}(h.a);Object(r.a)([Object(a.b)({types:_,json:{read:j.a,write:!0}})],k.prototype,"geometry",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],k.prototype,"version",null);var V=k=i=Object(r.a)([Object(o.a)("esri.views.layers.support.Geometry")],k),S=function(e){d(n,e);var t=b(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).type="path",e.path=[],e}return y(n,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),n}(h.a);Object(r.a)([Object(a.b)({type:[[[Number]]],json:{write:!0}})],S.prototype,"path",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],S.prototype,"version",null),S=Object(r.a)([Object(o.a)("esri.views.layers.support.Path")],S);var x=s.a.ofType({key:"type",base:h.a,typeMap:{rect:f.a,path:S,geometry:V}}),I=function(e){var t=function(e){d(n,e);var t=b(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).clips=new x,e.moving=!1,e.attached=!1,e.lastUpdateId=-1,e.updateRequested=!1,e}return y(n,[{key:"initialize",value:function(){var e,t=this;this.container||(this.container=new v.a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(u.init)(this,"suspended",(function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestUpdate()}),!0),Object(u.init)(this,["layer.opacity","container"],(function(){var e,n;t.container&&(t.container.opacity=null!=(e=null==(n=t.layer)?void 0:n.opacity)?e:1)}),!0),Object(u.init)(this,["layer.blendMode"],(function(e){t.container&&(t.container.blendMode=e)}),!0),Object(u.init)(this,["layer.effect"],(function(e){t.container&&(t.container.effect=e)}),!0),this.clips.on("change",(function(){t.container.clips=t.clips,t.notifyChange("clips")}))]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then((function(e){e!==t||t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){})):this.when().then((function(){t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){}))}},{key:"destroy",value:function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}},{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}},{key:"isVisibleAtScale",value:function(e){var t=!0,n=this.layer,i=n.minScale,r=n.maxScale;if(null!=i&&null!=r){var a=!i,o=!r;!a&&e<=i&&(a=!0),!o&&e>=r&&(o=!0),t=a&&o}return t}},{key:"requestUpdate",value:function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}},{key:"processUpdate",value:function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}},{key:"isUpdating",value:function(){return!1}},{key:"isRendering",value:function(){return!1}},{key:"canResume",value:function(){return!!c(g(n.prototype),"canResume",this).call(this)&&this.isVisibleAtScale(this.view.scale)}}]),n}(e);return Object(r.a)([Object(a.b)({type:x,set:function(e){var t=Object(l.b)(e,this._get("clips"),x);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(r.a)([Object(a.b)()],t.prototype,"moving",void 0),Object(r.a)([Object(a.b)()],t.prototype,"attached",void 0),Object(r.a)([Object(a.b)()],t.prototype,"container",void 0),Object(r.a)([Object(a.b)()],t.prototype,"suspended",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(r.a)([Object(a.b)()],t.prototype,"updateRequested",void 0),Object(r.a)([Object(a.b)()],t.prototype,"updating",null),Object(r.a)([Object(a.b)()],t.prototype,"view",void 0),t=Object(r.a)([Object(o.a)("esri.views.2d.layers.LayerView2D")],t)}},oM7z:function(t,i,r){"use strict";r.r(i);var l=r("pO5D"),u=(r("wSAH"),r("srIe")),c=(r("6S2I"),r("zqDF"),r("WbKI")),h=r("04ZG"),f=r("4EHJ"),v=(r("ju1D"),r("9AIY"),r("WZb1")),g=r("l4ZG"),w=r("OvF4"),m=r("LE9a"),O=r("975N"),j=r("Lqtk"),_=r("r0DZ"),k=r("gYg2"),V=r("u3Ia"),S=r("9iar"),x=r("BGvB"),I=r("NloG"),P=r("Vh9r"),R=r("q03O"),D=r("xzrc"),M=r("LTnl"),A=r("Vm2Q"),q=function e(){p(this,e),this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]},C=function(t){d(c,t);var i,r,l=b(c);function c(){var e;return p(this,c),(e=l.apply(this,arguments))._handles=new _.a,e._bitmapIndex=new Map,e._mapImageContainer=new M.a,e._kmlVisualData=new q,e.allVisiblePoints=new S.a,e.allVisiblePolylines=new S.a,e.allVisiblePolygons=new S.a,e.allVisibleMapImages=new m.a,e}return y(c,[{key:"hitTest",value:function(e,t){var n=this;if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return Promise.resolve(null);var i=[this._pointsView.hitTest(e,t),this._polylinesView.hitTest(e,t),this._polygonsView.hitTest(e,t)];return Promise.all(i).then((function(e){return e.filter((function(e){return e&&(e.layer=n.layer,e.sourceLayer=n.layer),!!e}))[0]||null}))}},{key:"update",value:function(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}},{key:"attach",value:function(){var e=this;this._handles.add([this.allVisibleMapImages.on("change",(function(t){t.added.forEach((function(t){return e._addMapImage(t)})),t.removed.forEach((function(t){return e._removeMapImage(t)}))}))]),this.container.addChild(this._mapImageContainer),this._polygonsView=new P.a({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:function(){return e.requestUpdate()},container:new R.a(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new P.a({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:function(){return e.requestUpdate()},container:new R.a(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new P.a({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:function(){return e.requestUpdate()},container:new R.a(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.watch("layer.visibleSublayers",(function(t){var n,i=s(e._kmlVisualData.allSublayers);try{for(i.s();!(n=i.n()).done;){var r=o(n.value,2);r[0];r[1].visibility=0}}catch(p){i.e(p)}finally{i.f()}var a,l=s(t);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=e._kmlVisualData.allSublayers.get(u.id);c&&(c.visibility=1)}}catch(p){l.e(p)}finally{l.f()}e._refreshCollections()})),this._fetchingPromise=this._fetchService().then((function(){e._fetchingPromise=null,e.notifyChange("updating")}))}},{key:"detach",value:function(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}},{key:"moveEnd",value:function(){}},{key:"isUpdating",value:function(){return null!=this._fetchingPromise||this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}},{key:"_addMapImage",value:function(e){var t=this;(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&Object(j.default)(e.href,{responseType:"image"}).then((function(n){var i=n.data,r=w.a.fromJSON(e.extent);Object(g.a)(r,t.view.spatialReference)&&(r=Object(g.d)(r,t.view.spatialReference));var a=new D.a(i,"standard");a.x=r.xmin,a.y=r.ymax,a.resolution=r.width/i.naturalWidth,a.rotation=e.rotation,t._mapImageContainer.addChild(a),t._bitmapIndex.set(e,a)}))}},{key:"_getViewDependentUrl",value:(r=a(regeneratorRuntime.mark((function e(t,i){var r,a,o,s,l,c,p,h,y,d,b,g,m,j,_,S,x,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.viewFormat,a=t.viewBoundScale,o=t.httpQuery,!Object(u.k)(r)){e.next=19;break}if(!Object(u.j)(i)){e.next=4;break}throw new Error("Loading this network link requires a view state.");case 4:return e.next=6,Object(k.i)();case 6:if(!Object(u.k)(a)||1===a){e.next=11;break}(l=new w.a(i.extent)).expand(a),s=l,e.next=12;break;case 11:s=i.extent;case 12:return s=Object(k.j)(s,v.a.WGS84),c=Object(k.j)(s,v.a.WebMercator),p=s.xmin,h=s.xmax,y=s.ymin,d=s.ymax,b=i.size[0]*i.pixelRatio,g=i.size[1]*i.pixelRatio,m=Math.max(c.width,c.height),j={"[bboxWest]":p.toString(),"[bboxEast]":h.toString(),"[bboxSouth]":y.toString(),"[bboxNorth]":d.toString(),"[lookatLon]":s.center.x.toString(),"[lookatLat]":s.center.y.toString(),"[lookatRange]":m.toString(),"[lookatTilt]":"0","[lookatHeading]":i.rotation.toString(),"[lookatTerrainLon]":s.center.x.toString(),"[lookatTerrainLat]":s.center.y.toString(),"[lookatTerrainAlt]":"0","[cameraLon]":s.center.x.toString(),"[cameraLat]":s.center.y.toString(),"[cameraAlt]":m.toString(),"[horizFov]":"60","[vertFov]":"60","[horizPixels]":b.toString(),"[vertPixels]":g.toString(),"[terrainEnabled]":"0","[clientVersion]":O.d,"[kmlVersion]":"2.2","[clientName]":"ArcGIS API for JavaScript","[language]":"en-US"},_=function(e){for(var t in e)for(var n in j)e[t]=e[t].replace(n,j[n])},S=Object(f.E)(r),_(S),x={},Object(u.k)(o)&&(x=Object(f.E)(o),_(x)),I=Object(V.c)(t.href),e.abrupt("return",(I.query=n(n(n({},I.query),S),x),"".concat(I.path,"?").concat(Object(f.D)(S))));case 19:return e.abrupt("return",t.href);case 20:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"_fetchService",value:(i=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new q,e.next=3,this._loadVisualData(this.layer.url,t);case 3:this._kmlVisualData=t,this._refreshCollections();case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_refreshCollections",value:function(){var e=this;this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((function(t){return e._isSublayerVisible(t.sublayerId)})).map((function(e){return e.item}))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((function(t){return e._isSublayerVisible(t.sublayerId)})).map((function(e){return e.item}))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((function(t){return e._isSublayerVisible(t.sublayerId)})).map((function(e){return e.item}))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((function(t){return e._isSublayerVisible(t.sublayerId)})).map((function(e){return e.item})))}},{key:"_isSublayerVisible",value:function(e){var t=this._kmlVisualData.allSublayers.get(e);return!!t.visibility&&(-1===t.parentFolderId||this._isSublayerVisible(t.parentFolderId))}},{key:"_loadVisualData",value:function(t,n){var i=this;return this._fetchParsedKML(t).then(function(){var t=a(regeneratorRuntime.mark((function t(r){var a,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s(r.sublayers),t.prev=1,l=regeneratorRuntime.mark((function t(){var r,a,s,l,u,c,p,h,y,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.value,n.allSublayers.set(u.id,u),!u.points){t.next=8;break}return t.next=5,Object(x.c)(u.points);case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0=[];case 9:if(c=t.t0,!u.polylines){t.next=16;break}return t.next=13,Object(x.c)(u.polylines);case 13:t.t1=t.sent,t.next=17;break;case 16:t.t1=[];case 17:if(p=t.t1,!u.polygons){t.next=24;break}return t.next=21,Object(x.c)(u.polygons);case 21:t.t2=t.sent,t.next=25;break;case 24:t.t2=[];case 25:if(h=t.t2,y=u.mapImages||[],(r=n.allPoints).push.apply(r,e(c.map((function(e){return{item:e,sublayerId:u.id}})))),(a=n.allPolylines).push.apply(a,e(p.map((function(e){return{item:e,sublayerId:u.id}})))),(s=n.allPolygons).push.apply(s,e(h.map((function(e){return{item:e,sublayerId:u.id}})))),(l=n.allMapImages).push.apply(l,e(y.map((function(e){return{item:e,sublayerId:u.id}})))),!u.networkLink){t.next=33;break}return t.next=30,i._getViewDependentUrl(u.networkLink,i.view.state);case 30:return d=t.sent,t.next=33,i._loadVisualData(d,n);case 33:case"end":return t.stop()}}),t)})),a.s();case 4:if((o=a.n()).done){t.next=8;break}return t.delegateYield(l(),"t0",6);case 6:t.next=4;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),a.e(t.t1);case 13:return t.prev=13,a.f(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"_fetchParsedKML",value:function(e){return Object(x.b)(e,this.view.spatialReference,this.layer.refreshInterval).then((function(e){return Object(x.d)(e.data)}))}},{key:"_removeMapImage",value:function(e){var t=this._bitmapIndex.get(e);t&&(this._mapImageContainer.removeChild(t),this._bitmapIndex.delete(e))}}]),c}(Object(A.a)(I.a));Object(l.a)([Object(c.b)()],C.prototype,"_pointsView",void 0),Object(l.a)([Object(c.b)()],C.prototype,"_polylinesView",void 0),Object(l.a)([Object(c.b)()],C.prototype,"_polygonsView",void 0),Object(l.a)([Object(c.b)()],C.prototype,"_fetchingPromise",void 0),Object(l.a)([Object(c.b)()],C.prototype,"updating",void 0),C=Object(l.a)([Object(h.a)("esri.views.2d.layers.KMLLayerView2D")],C),i.default=C}}])}();