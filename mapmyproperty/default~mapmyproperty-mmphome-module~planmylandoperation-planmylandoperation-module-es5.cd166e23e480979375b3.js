!function(){var e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_,x,k,S,M,I,T,A,C,E,P,R,D,L,N,F,z,V,G,U,B,q,H,W,J,Z,K,Y,X,Q,$,ee,te,ne,re,ie,ae,oe,se,ue,ce,le,he,fe,pe,de,ve,ye,be,ge,me,we,Oe,je,_e,xe,ke,Se,Me,Ie,Te,Ae,Ce,Ee,Pe,Re,De,Le,Ne,Fe,ze,Ve,Ge,Ue,Be,qe,He,We,Je,Ze,Ke,Ye,Xe,Qe,$e,et,tt,nt,rt,it,at,ot,st,ut,ct,lt,ht,ft,pt,dt,vt,yt,bt,gt,mt,wt,Ot,jt,_t,xt,kt,St,Mt,It,Tt,At,Ct,Et;function Pt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Dt(e,t,n){return(Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||qt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Gt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ut(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Gt(a,r,i,o,s,"next",e)}function s(e){Gt(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Bt(e){return function(e){if(Array.isArray(e))return Ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t,n){return t&&Jt(e.prototype,t),n&&Jt(e,n),e}function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=en(e);if(t){var i=en(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?$t(e):t}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"+9DA":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("tQ+6"),i=n("AvGH"),a=n("M0lq"),o=function(e){Kt(n,e);var t=Xt(n);function n(e,r,o,s,u){var c,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Wt(this,n),(c=t.call(this,e)).origin=r,c.axis1=o,c.factor1=s,c.factor2=u,c.accumulationType=l,c.axis2=Object(a.r)(Object(i.a)(),o[1],-o[0]),c}return Zt(n,[{key:"scale",value:function(e,t,n){this.helper.scale(e.pos,this.origin,this.axis1,t),this.helper.scale(e.pos,this.origin,this.axis2,n)}},{key:"apply",value:function(e){this.scale(e,this.factor1,this.factor2)}},{key:"undo",value:function(e){this.scale(e,1/this.factor1,1/this.factor2)}},{key:"canAccumulate",value:function(e){return e instanceof n&&Object(r.c)(this.origin,e.origin)&&Object(r.c)(this.axis1,e.axis1)}},{key:"accumulate",value:function(e,t){1===t.accumulationType?this.scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this.scale(e,t.factor1,t.factor2)}},{key:"accumulateParams",value:function(e){var t=1===e.accumulationType;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}]),n}(n("NPIS").a)},"+AYZ":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("r88o"),u=n("04ZG"),c=n("Cduq"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=n("1Mqo"),f=n("ZYtI"),p=n("K5Jr"),d=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).respectsDaylightSaving=!1,r.timezone=null,r}return Zt(n,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new r({respectsDaylightSaving:e,timezone:t})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],d.prototype,"respectsDaylightSaving",void 0),Object(i.a)([Object(s.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],d.prototype,"readRespectsDaylightSaving",null),Object(i.a)([Object(o.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],d.prototype,"timezone",void 0);var v,y=d=r=Object(i.a)([Object(u.a)("esri.layers.support.TimeReference")],d),b=v=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).cumulative=!1,r.endField=null,r.fullTimeExtent=null,r.hasLiveData=!1,r.interval=null,r.startField=null,r.timeReference=null,r.trackIdField=null,r.useTime=!0,r}return Zt(n,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var n=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new f.a({start:n,end:r})}},{key:"writeFullTimeExtent",value:function(e,t){t.timeExtent=e&&e.start&&e.end?[e.start.getTime(),e.end.getTime()]:null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new p.a({value:t.timeInterval,unit:h.d.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new p.a({value:t.defaultTimeInterval,unit:h.d.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var n=e.toJSON();t.timeInterval=n.value,t.timeIntervalUnits=n.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,n=this.hasLiveData,r=this.interval,i=this.startField,o=this.timeReference,s=this.fullTimeExtent,u=this.trackIdField,c=this.useTime;return new v({cumulative:e,endField:t,hasLiveData:n,interval:r,startField:i,timeReference:Object(a.a)(o),fullTimeExtent:Object(a.a)(s),trackIdField:u,useTime:c})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],b.prototype,"cumulative",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],b.prototype,"endField",void 0),Object(i.a)([Object(o.b)({type:f.a,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(s.a)("fullTimeExtent",["timeExtent"])],b.prototype,"readFullTimeExtent",null),Object(i.a)([Object(c.a)("fullTimeExtent")],b.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],b.prototype,"hasLiveData",void 0),Object(i.a)([Object(o.b)({type:p.a,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"interval",void 0),Object(i.a)([Object(s.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],b.prototype,"readInterval",null),Object(i.a)([Object(c.a)("interval")],b.prototype,"writeInterval",null),Object(i.a)([Object(o.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],b.prototype,"startField",void 0),Object(i.a)([Object(o.b)({type:y,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"timeReference",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"trackIdField",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],b.prototype,"useTime",void 0),b=v=Object(i.a)([Object(u.a)("esri.layers.support.TimeInfo")],b),t.a=b},"+BzL":function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n("16wW");t.uncompressInputType=r?"uint8array":"array",t.compressInputType=r?"uint8array":"array",t.magic="\b\0",t.compress=function(e,t){return i.deflateRaw(e,{level:t.level||-1})},t.uncompress=function(e){return i.inflateRaw(e)}},"+JUG":function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return C})),n("wSAH");var r=n("srIe"),i=n("6S2I"),a=n("OKTS"),o=n("Cy1f"),s=n("5DEt"),u=n("aAs6"),c=n("15Hh"),l=n("D8Ta"),h=n("dXfX"),f=n("8JEK"),p=n("IEcw"),d=n("QFRQ"),v=i.a.getLogger("esri.views.3d.support.geometryUtils.sphere");function y(){return Object(l.c)()}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y();return Object(h.c)(t,e)}function g(e){e[0]=e[1]=e[2]=e[3]=0}function m(e){return Array.isArray(e)?e[3]:e}function w(e){return Array.isArray(e)?e:T}function O(e,t,n){if(Object(r.j)(t))return!1;var i=Object(s.i)(f.d.get(),t.origin,w(e)),a=Object(s.g)(t.direction,t.direction),o=2*Object(s.g)(t.direction,i),u=o*o-4*a*(Object(s.g)(i,i)-e[3]*e[3]);if(u<0)return!1;var c=Math.sqrt(u),l=(-o-c)/(2*a),h=(-o+c)/(2*a);return(l<0||h<l&&h>0)&&(l=h),!(l<0||(n&&Object(s.e)(n,t.origin,Object(s.d)(f.d.get(),t.direction,l)),0))}function j(e,t,n){var r=f.d.get(),i=f.a.get();Object(s.f)(r,t.origin,t.direction);var a=m(e);Object(s.f)(n,r,t.origin),Object(s.d)(n,n,1/Object(s.o)(n)*a);var o=x(e,t.origin),u=Object(p.a)(t.origin,n);return Object(c.i)(i),Object(c.q)(i,i,u+o,r),Object(s.l)(n,n,i),n}function _(e,t,n){var r=Object(s.i)(f.d.get(),t,w(e)),i=Object(s.d)(f.d.get(),r,e[3]/Object(s.o)(r));return Object(s.e)(n,i,w(e))}function x(e,t){var n=Object(s.i)(f.d.get(),t,w(e)),r=Object(s.o)(n),i=m(e),o=i+Math.abs(i-r);return Object(a.a)(i/o)}var k=Object(o.e)();function S(e,t,n,r){var i=Object(s.i)(k,t,w(e));switch(n){case 0:var a=Object(u.a)(i,k)[2];return Object(s.v)(r,-Math.sin(a),Math.cos(a),0);case 1:var o=Object(u.a)(i,k),c=o[1],l=o[2],h=Math.sin(c);return Object(s.v)(r,-h*Math.cos(l),-h*Math.sin(l),Math.cos(c));case 2:return Object(s.q)(r,i);default:return}}function M(e,t){var n=Object(s.i)(A,t,w(e));return Object(s.o)(n)-e[3]}var I=Object(d.b)(),T=Object(o.e)(),A=Object(o.e)();Object.freeze(T);var C=Object.freeze({__proto__:null,create:y,copy:b,fromCenterAndRadius:function(e,t){return Object(l.d)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:g,fromRadius:function(e){return e},getRadius:m,getCenter:w,fromValues:function(e,t,n,r){return Object(l.d)(e,t,n,r)},elevate:function(e,t,n){return e!==n&&Object(s.j)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return v.error("sphere.setExtent is not yet supported"),e===n?n:b(e,n)},intersectRay:O,intersectScreen:function(e,t,n,r){return O(e,Object(d.e)(t,n,I),r)},intersectsRay:function(e,t){return O(e,t,null)},intersectRayClosestSilhouette:function(e,t,n){if(O(e,t,n))return n;var r=j(e,t,f.d.get());return Object(s.e)(n,t.origin,Object(s.d)(f.d.get(),t.direction,Object(s.n)(t.origin,r)/Object(s.o)(t.direction))),n},closestPointOnSilhouette:j,closestPoint:function(e,t,n){return O(e,t,n)?n:(Object(d.f)(t,w(e),n),_(e,n,n))},projectPoint:_,distanceToSilhouette:function(e,t){var n=Object(s.i)(f.d.get(),t,w(e)),r=Object(s.r)(n);return Math.sqrt(Math.abs(r-e[3]*e[3]))},angleToSilhouette:x,axisAt:S,altitudeAt:M,setAltitudeAt:function(e,t,n,r){var i=M(e,t),a=S(e,t,2,A),o=Object(s.d)(A,a,n-i);return Object(s.e)(r,t,o),r}})},"+NQI":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n("KLE9"),i=[];function a(e,t,n,r){return{xmin:e,ymin:t,xmax:n,ymax:r}}function o(e,t,n,r,i,a){return{xmin:e,ymin:t,zmin:n,xmax:r,ymax:i,zmax:a}}function s(e,t,n,r,i,a){return{xmin:e,ymin:t,mmin:n,xmax:r,ymax:i,mmax:a}}function u(e,t,n,r,i,a,o,s){return{xmin:e,ymin:t,zmin:n,mmin:r,xmax:i,ymax:a,zmax:o,mmax:s}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?n?u(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):o(e[0],e[1],e[2],e[3],e[4],e[5]):n?s(e[0],e[1],e[2],e[3],e[4],e[5]):a(e[0],e[1],e[2],e[3])}function l(e){return e?function(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}(e)?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?function(e){var t=e.x,n=e.y,r=e.z,i=e.m,c=null!=i;return null!=r?c?u(t,n,r,i,t,n,r,i):o(t,n,r,t,n,r):c?s(t,n,i,t,n,i):a(t,n,t,n)}(e):function(e){return void 0!==e.rings}(e)?h(e):function(e){return void 0!==e.paths}(e)?f(e):function(e){return void 0!==e.points}(e)?(n=(t=e).hasZ,l=t.hasM,p=t.points,c(Object(r.c)(i,p,n,l),n,l)):null:null;var t,n,l,p}function h(e){var t=e.hasZ,n=e.hasM,a=e.rings,o=Object(r.d)(i,a,t,n);return o?c(o,t,n):null}function f(e){var t=e.hasZ,n=e.hasM,a=e.paths,o=Object(r.d)(i,a,t,n);return o?c(o,t,n):null}},"+X7O":function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return S}));var r=n("srIe"),i=n("6S2I"),a=n("zlDU"),o=n("gVKr"),s=n("hufI"),u=n("ATu9"),c=i.a.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),l=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],h=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],f=["upperLeft","lowerLeft"];function p(e){return e>=l.length?null:l[e]}function d(e){return e>=h.length?null:h[e]}function v(e){return e>=f.length?null:f[e]}function y(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function b(e,t,n){for(var r=t.createPointGeometry(n);e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),a=e.pos()+i,o=0;e.pos()<a;)t.addCoordinatePoint(r,e.getSInt64(),o++);break;case 1:case 2:default:e.skip()}return r}function g(e,t,n){for(var r=t.createGeometry(n),i=2+(n.hasZ?1:0)+(n.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var a=e.getUInt32(),o=e.pos()+a,s=0;e.pos()<o;)t.addLength(r,e.getUInt32(),s++);break;case 3:var u=e.getUInt32(),c=e.pos()+u,l=0;for(t.allocateCoordinates(r);e.pos()<c;)t.addCoordinate(r,e.getSInt64(),l),++l===i&&(l=0);break;case 1:default:e.skip()}return r}function m(e){for(var t=new o.a,n="esriGeometryPoint";e.next();)switch(e.tag()){case 2:for(var r=e.getUInt32(),i=e.pos()+r;e.pos()<i;)t.lengths.push(e.getUInt32());break;case 3:for(var a=e.getUInt32(),u=e.pos()+a;e.pos()<u;)t.coords.push(e.getSInt64());break;case 1:n=s.a[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:n}}function w(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function O(e){for(var t={type:p(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=p(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=d(e.getEnum());break;case 5:try{t.domain=JSON.parse(e.getString())}catch(v){c.error(new a.a("query:parsing-pbf","Failed to parse domain",{error:v})),t.domain=null}break;case 6:t.defaultValue=e.getString();break;default:e.skip()}return t}function j(e){for(var t={};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function _(e,t,n,r){for(var i=t.createFeature(n),a=0;e.next();)switch(e.tag()){case 1:var o=r[a++].name;i.attributes[o]=e.processMessage(w);break;case 2:i.geometry=e.processMessageWithArgs(g,t,n);break;case 4:i.centroid=e.processMessageWithArgs(b,t,n);break;default:e.skip()}return i}function x(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function k(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function S(e){for(var t={originPosition:v(0)};e.next();)switch(e.tag()){case 1:t.originPosition=v(e.getEnum());break;case 2:t.scale=e.processMessage(x);break;case 3:t.translate=e.processMessage(k);break;default:e.skip()}return t}function M(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function I(e,t){for(var n=t.createSpatialReference();e.next();)switch(e.tag()){case 1:n.wkid=e.getUInt32();break;case 5:n.wkt=e.getString();break;case 2:n.latestWkid=e.getUInt32();break;case 3:n.vcsWkid=e.getUInt32();break;case 4:n.latestVcsWkid=e.getUInt32();break;default:e.skip()}return n}function T(e,t){var n=t.createFeatureResult();n.geometryType=y(t,0);for(var r=!1;e.next();)switch(e.tag()){case 1:n.objectIdFieldName=e.getString();break;case 3:n.globalIdFieldName=e.getString();break;case 4:n.geohashFieldName=e.getString();break;case 5:n.geometryProperties=e.processMessage(M);break;case 7:n.geometryType=y(t,e.getEnum());break;case 8:n.spatialReference=e.processMessageWithArgs(I,t);break;case 10:n.hasZ=e.getBool();break;case 11:n.hasM=e.getBool();break;case 12:n.transform=e.processMessage(S);break;case 9:var i=e.getBool();n.exceededTransferLimit=i;break;case 13:t.addField(n,e.processMessage(O));break;case 15:r||(t.prepareFeatures(n),r=!0),t.addFeature(n,e.processMessageWithArgs(_,t,n,n.fields));break;case 2:n.uniqueIdField=e.processMessage(j);break;case 6:default:e.skip()}return t.finishFeatureResult(n),n}function A(e,t){for(var n={},i=null;e.next();)switch(e.tag()){case 4:i=e.processMessageWithArgs(m);break;case 1:n.featureResult=e.processMessageWithArgs(T,t);break;case 2:case 3:default:e.skip()}return Object(r.k)(i)&&n.featureResult&&t.addQueryGeometry(n,i),n}function C(e,t){try{for(var n=new u.a(new Uint8Array(e),new DataView(e)),r={};n.next();)switch(n.tag()){case 2:r.queryResult=n.processMessageWithArgs(A,t);break;default:n.skip()}return r}catch(n){throw new a.a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:n})}}},"+Xal":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return u})),n("wSAH");var r=n("nR38"),i=n("ACjl"),a=n("C4aV"),o=n("zlDU"),s=n("XNvV");function u(e,t,n,i){var a=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;case"heatmap":case"dictionary":case"dot-density":default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new o.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,i);a&&Object(r.c)(n,a,t)}function c(e,t){return h(e,null,t)}var l=Object(a.b)({types:s.a});function h(e,t,n){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(n&&n.messages&&n.messages.push(new i.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:n})),null):l(e,t,n):null}},"+h6m":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},"+opI":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreUnknown:!1};Wt(this,e),this.jsonToAPI=t,this.options=r,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(t),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=function(e){return n.fromJSON(e)},this.write=function(e,t,r){var i=n.toJSON(e);void 0!==i&&(t[r]=i)},this.write.isJSONMapWriter=!0}return Zt(e,[{key:"toJSON",value:function(e){return this.apiToJSON.hasOwnProperty(e)?this.apiToJSON[e]:this.options.ignoreUnknown?void 0:e}},{key:"fromJSON",value:function(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e}},{key:"invertMap",value:function(e){var t={};for(var n in e)t[e[n]]=n;return t}},{key:"getKeysSorted",value:function(e){var t=[];for(var n in e)t.push(n);return t.sort(),t}}]),e}();function i(){return function(e){return new r(e,{ignoreUnknown:!0})}}},"+pD8":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("m501")),u=n("ag7Y"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).linkURL=null,r.sourceURL=null,r}return Zt(n,[{key:"clone",value:function(){return new r({linkURL:this.linkURL,sourceURL:this.sourceURL})}}]),n}(u.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"linkURL",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"sourceURL",void 0);var l,h=c=r=Object(i.a)([Object(o.a)("esri.popup.content.support.ImageMediaInfoValue")],c),f=l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).refreshInterval=null,r.type="image",r.value=null,r}return Zt(n,[{key:"clone",value:function(){return new l({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:Number,json:{write:!0}})],f.prototype,"refreshInterval",void 0),Object(i.a)([Object(a.b)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:h,json:{write:!0}})],f.prototype,"value",void 0),f=l=Object(i.a)([Object(o.a)("esri.popup.content.ImageMediaInfo")],f),t.a=f},"+rMe":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n("pO5D"),i=n("srIe"),a=n("04ZG"),o=n("9MzC"),s=n("/CmD"),u=function(){function e(t){var n=this;Wt(this,e),this.instance=t,this._resolver=Object(o.f)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((function(){n._status=1,n._cleanUp()}),(function(){n._status=2,n._cleanUp()}))}return Zt(e,[{key:"addResolvingPromise",value:function(e){this._resolvingPromises.push(e),this._tryResolve()}},{key:"isResolved",value:function(){return 1===this._status}},{key:"isRejected",value:function(){return 2===this._status}},{key:"isFulfilled",value:function(){return 0!==this._status}},{key:"abort",value:function(){this._resolver.reject(Object(o.e)())}},{key:"when",value:function(e,t){return this._resolver.promise.then(e,t)}},{key:"_cleanUp",value:function(){this._allPromise=this._resolvingPromises=this._allPromise=null}},{key:"_tryResolve",value:function(){var e=this;if(!this.isFulfilled()){var t=Object(o.f)(),n=[].concat(Bt(this._resolvingPromises),[Object(i.d)(t.promise)]),r=this._allPromise=Promise.all(n);r.then((function(){e.isFulfilled()||e._allPromise!==r||e._resolver.resolve(e.instance)}),(function(t){e.isFulfilled()||e._allPromise!==r||Object(o.m)(t)||e._resolver.reject(t)})),t.resolve()}}}]),e}(),c=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._promiseProps=new u($t(e)),e.addResolvingPromise(Promise.resolve()),e}return Zt(n,[{key:"isResolved",value:function(){return this._promiseProps.isResolved()}},{key:"isRejected",value:function(){return this._promiseProps.isRejected()}},{key:"isFulfilled",value:function(){return this._promiseProps.isFulfilled()}},{key:"when",value:function(e,t){var n=this;return new Promise((function(e,t){n._promiseProps.when(e,t)})).then(e,t)}},{key:"catch",value:function(e){return this.when(null,e)}},{key:"addResolvingPromise",value:function(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}}]),n}(e);return t=Object(r.a)([Object(a.a)("esri.core.Promise")],t)},l=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(c(s.a));l=Object(r.a)([Object(a.a)("esri.core.Promise")],l)},"/1dM":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ZnuT")),l=n("vk02"),h=n("guTz"),f=r=function(e){Kt(s,e);var t,n,i,o=Xt(s);function s(e){var t;return Wt(this,s),(t=o.call(this,e)).description=null,t.label=null,t.symbol=null,t.type="simple",t}return Zt(s,[{key:"collectRequiredFields",value:(i=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,n),this.collectVVRequiredFields(t,n)]);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"collectSymbolFields",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new r({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(a.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),s}(Object(l.a)(c.a));Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(i.a)([Object(o.b)(h.b)],f.prototype,"symbol",void 0),Object(i.a)([Object(s.a)({simple:"simple"})],f.prototype,"type",void 0),f=r=Object(i.a)([Object(u.a)("esri.renderers.SimpleRenderer")],f),t.a=f},"/ADo":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("VeZB"),i=n("grla"),a=function(){function e(t,n){Wt(this,e),this.layout=t,this.buffer="number"==typeof n?new ArrayBuffer(n*t.stride):n;var r,i=Vt(t.fieldNames);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t.fields.get(a);this[a]=new o.constructor(this.buffer,o.offset,this.stride)}}catch(s){i.e(s)}finally{i.f()}}return Zt(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}},{key:"slice",value:function(t,n){return new e(this.layout,this.buffer.slice(t*this.stride,n*this.stride))}},{key:"copyFrom",value:function(e,t,n,r){var i=this.stride;if(i%4==0){var a=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(a)}else{var o=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(o)}}}]),e}(),o=function(){function e(){Wt(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return Zt(e,[{key:"vec2f",value:function(e,t){return this.appendField(e,r.m,t),this}},{key:"vec2f64",value:function(e,t){return this.appendField(e,r.n,t),this}},{key:"vec3f",value:function(e,t){return this.appendField(e,r.u,t),this}},{key:"vec3f64",value:function(e,t){return this.appendField(e,r.v,t),this}},{key:"vec4f",value:function(e,t){return this.appendField(e,r.C,t),this}},{key:"vec4f64",value:function(e,t){return this.appendField(e,r.D,t),this}},{key:"mat3f",value:function(e,t){return this.appendField(e,r.f,t),this}},{key:"mat3f64",value:function(e,t){return this.appendField(e,r.g,t),this}},{key:"mat4f",value:function(e,t){return this.appendField(e,r.h,t),this}},{key:"mat4f64",value:function(e,t){return this.appendField(e,r.i,t),this}},{key:"vec4u8",value:function(e,t){return this.appendField(e,r.J,t),this}},{key:"f32",value:function(e,t){return this.appendField(e,r.a,t),this}},{key:"f64",value:function(e,t){return this.appendField(e,r.b,t),this}},{key:"u8",value:function(e,t){return this.appendField(e,r.l,t),this}},{key:"u16",value:function(e,t){return this.appendField(e,r.j,t),this}},{key:"i8",value:function(e,t){return this.appendField(e,r.e,t),this}},{key:"vec2i8",value:function(e,t){return this.appendField(e,r.q,t),this}},{key:"vec2i16",value:function(e,t){return this.appendField(e,r.o,t),this}},{key:"vec2u8",value:function(e,t){return this.appendField(e,r.t,t),this}},{key:"vec4u16",value:function(e,t){return this.appendField(e,r.H,t),this}},{key:"u32",value:function(e,t){return this.appendField(e,r.k,t),this}},{key:"appendField",value:function(e,t,n){var r=t.ElementCount*Object(i.a)(t.ElementType);this.fields.set(e,{size:r,constructor:t,offset:this.stride,optional:n}),this.stride+=r,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.indexOf(e)>=0}},{key:"createBuffer",value:function(e){return new a(this,e)}},{key:"createView",value:function(e){return new a(this,e)}},{key:"clone",value:function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((function(e,n){return t.fields.set(n,e)})),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}]),e}();function s(){return new o}},"/CmD":function(e,t,n){"use strict";var r=n("6S2I"),i=n("nZ3f"),a=n("evjZ"),o=n("LdQC"),s=n("WbKI"),u=n("4gt3"),c=n("04ZG"),l=(n("wSAH"),n("f/qv")),h=n("TDcG"),f=n("ku/q"),p=n("7Nfj"),d=n("m4bB"),v=!1;function y(e){return void 0!==e.flags}var b=function(){function e(t,n,r){Wt(this,e),this.host=t,this.propertyName=n,this.metadata=r,this.flags=1,this._observers=null,this._accessed=null,this._handles=[],this.flags=1|(r.nonNullable?8:0)|(r.hasOwnProperty("value")?16:0)|(void 0===r.get?32:0)|(void 0===r.dependsOn?64:0)}return Zt(e,[{key:"destroy",value:function(){this._accessed&&(this._accessed.clear(),this._accessed=null),this._observers&&(this._observers.clear(),this._observers=null),this._clearObservationHandles()}},{key:"onObservableAccessed",value:function(e){e!==this&&(null===this._accessed&&(this._accessed=new Set),this._accessed.add(e))}},{key:"onTrackingEnd",value:function(){this._clearObservationHandles(),this.flags|=32;var e=this._accessed;if(null!==e){var t,n=this._handles,r=Vt(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i.observe(this))}}catch(a){r.e(a)}finally{r.f()}e.clear()}}},{key:"observe",value:function(e){return null===this._observers&&(this._observers=new Set),new d.a(this._observers.add(e),e)}},{key:"notify",value:function(){2&~this.flags&&(this.flags|=1),this._notifyObservers()}},{key:"invalidate",value:function(){this.notify()}},{key:"commit",value:function(){this.flags&=-2,this._notifyObservers()}},{key:"_notifyObservers",value:function(){if(null!==this._observers){var e,t=this._observers.size,n=new Array(t),r=t-1,i=Vt(this._observers);try{for(i.s();!(e=i.n()).done;){var a=e.value;n[r--]=a}}catch(h){i.e(h)}finally{i.f()}for(var o=!v;n.length;){var s=n.pop();if(y(s)){if(2&~s.flags&&(s.flags|=1),null===s._observers)continue;var u,c=Vt(s._observers);try{for(c.s();!(u=c.n()).done;){var l=u.value;n.push(l)}}catch(h){c.e(h)}finally{c.f()}}else o&&s.notify()}}}},{key:"_clearObservationHandles",value:function(){var e,t=Vt(this._handles);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}this._handles.length=0}}]),e}(),g=function(){function e(){Wt(this,e),this._values=new Map}return Zt(e,[{key:"clone",value:function(t){var n=new e;return this._values.forEach((function(e,r){t&&t.has(r)||n.set(r,Object(l.a)(e))})),n}},{key:"get",value:function(e){return this._values.get(e)}},{key:"originOf",value:function(){return 6}},{key:"keys",value:function(){return Bt(this._values.keys())}},{key:"set",value:function(e,t){this._values.set(e,t)}},{key:"delete",value:function(e){this._values.delete(e)}},{key:"has",value:function(e){return this._values.has(e)}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),m=n("wNOj");function w(e,t,n){return void 0!==e}function O(e,t,n,r){return!(void 0===e||null==n&&8&e.flags)}function j(e){return e&&"function"==typeof e.destroy}r.a.getLogger("esri.core.accessorSupport.Properties");var _=new p.a(function(){function e(){Wt(this,e),this.value=null,this.valid=!0}return Zt(e,[{key:"acquire",value:function(){this.valid=!0}},{key:"release",value:function(){this.value=null}}]),e}()),x=function(){function e(t){Wt(this,e),this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new g,this._origin=6;var n=this.host.constructor.__accessorMetadata__,r=n.properties;for(var i in r){var a=new b(t,i,r[i]);this.properties.set(i,a)}this.metadatas=r,this._autoDestroy=n.autoDestroy}return Zt(e,[{key:"initialize",value:function(){this.lifecycle=1}},{key:"constructed",value:function(){this.lifecycle=2}},{key:"destroy",value:function(){if(this.destroyed=!0,this._autoDestroy){var e,t=Vt(this.properties);try{for(t.s();!(e=t.n()).done;){var n=zt(e.value,2),r=n[0],i=n[1],a=this.internalGet(r);a&&j(a)&&(a.destroy(),8&~i.flags&&this._internalSet(i,null)),i.destroy()}}catch(c){t.e(c)}finally{t.f()}}else{var o,s=Vt(this.properties);try{for(s.s();!(o=s.n()).done;){var u=zt(o.value,2);u[0];u[1].destroy()}}catch(c){s.e(c)}finally{s.f()}}}},{key:"initialized",get:function(){return 0!==this.lifecycle}},{key:"get",value:function(e){return this.properties.get(e).metadata.get?this.getterComputed(e):this.getterStatic(e)}},{key:"getterStatic",value:function(e){var t=this.properties.get(e);if(void 0!==t)return Object(m.c)(t),this.store.has(e)?this.store.get(e):t.metadata.value}},{key:"getterComputed",value:function(e){var t=this.properties.get(e);Object(m.c)(t);var n,r=this.store,i=t.flags,a=this.store.get(e);if(4&i)return a;if(r.has(e)&&(1&~i||v))return a;t.flags|=4;var o=t.metadata.get;64&i?n=Object(m.b)(t,o,this.host):(Object(m.d)(this.host,t),n=o.call(this.host)),r.set(e,n,1);var s=this.store.get(e);return s===a?t.flags&=-2:t.commit(),t.flags&=-5,s}},{key:"originOf",value:function(e){var t=this.store.originOf(e);if(void 0===t){var n=this.properties.get(e);if(void 0!==n&&16&n.flags)return"defaults"}return Object(f.b)(t)}},{key:"has",value:function(e){return!!this.properties.has(e)&&this.store.has(e)}},{key:"keys",value:function(){return Bt(this.properties.keys())}},{key:"internalGet",value:function(e){var t=this.properties.get(e);if(w(t))return this.store.has(e)?this.store.get(e):t.metadata.value}},{key:"internalSet",value:function(e,t){var n=this.properties.get(e);w(n)&&this._internalSet(n,t)}},{key:"getDependsInfo",value:function(e,t,n){var r=this.properties.get(t);if(!w(r))return"";var i=new Set,a=Object(m.b)({onObservableAccessed:function(e){return i.add(e)},onTrackingEnd:function(){}},(function(){var t;return null==(t=r.metadata.get)?void 0:t.call(e)})),o="".concat(n).concat(e.declaredClass.split(".").pop(),".").concat(t,": ").concat(a,"\n");if(0===i.size)return o;n+="  ";var s,u=Vt(i);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(c instanceof b){var l=c.host,f=c.propertyName,p=Object(h.a)(l);o+=p?p.getDependsInfo(l,f,n):"".concat(n).concat(f,": undefined\n")}}}catch(d){u.e(d)}finally{u.f()}return o}},{key:"setAtOrigin",value:function(e,t,n){var r=this.properties.get(e);if(w(r))return this._setAtOrigin(r,t,n)}},{key:"isOverridden",value:function(e){var t=this.properties.get(e);return void 0!==t&&!!(2&t.flags)}},{key:"clearOverride",value:function(e){var t=this.properties.get(e);void 0!==t&&2&t.flags&&(t.flags&=-3,t.invalidate())}},{key:"override",value:function(e,t){var n=this.properties.get(e);if(O(n,0,t)){var r=n.metadata.cast;if(r){var i=this._cast(r,t),a=i.valid,o=i.value;if(_.release(i),!a)return;t=o}n.flags|=2,this._internalSet(n,t)}}},{key:"set",value:function(e,t){var n=this.properties.get(e);if(O(n,0,t)){var r=n.metadata.cast;if(r){var i=this._cast(r,t),a=i.valid,o=i.value;if(_.release(i),!a)return;t=o}var s=n.metadata.set;s?s.call(this.host,t):this._internalSet(n,t)}}},{key:"setDefaultOrigin",value:function(e){this._origin=Object(f.d)(e)}},{key:"getDefaultOrigin",value:function(){return Object(f.b)(this._origin)}},{key:"propertyInvalidated",value:function(e){var t=this.properties.get(e);void 0!==t&&t.invalidate()}},{key:"propertyCommitted",value:function(e){var t=this.properties.get(e);void 0!==t&&t.commit()}},{key:"_internalSet",value:function(e,t){this._setAtOrigin(e,t,0!==this.lifecycle?this._origin:0)}},{key:"_setAtOrigin",value:function(e,t,n){var r=this.store,i=e.propertyName;r.has(i,n)&&Object(l.b)(t,r.get(i))&&2&~e.flags&&n===r.originOf(i)||(v=!0,e.invalidate(),v=!1,r.set(i,t,n),e.commit(),Object(m.a)(this.host,e))}},{key:"_cast",value:function(e,t){var n=_.acquire();return n.valid=!0,n.value=t,e&&(n.value=e.call(this.host,t,n)),n}}]),e}(),k=n("BkZU");function S(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}var M=function(){function e(){if(Wt(this,e),this.constructor===e)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new x(this)}),n.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,n))}return Zt(e,[{key:"postscript",value:function(e){var t=this.__accessor__,n=t.ctorArgs||e;t.initialize(),n&&(this.set(n),t.ctorArgs=null),t.constructed(),this.initialize()}},{key:"initialize",value:function(){}},{key:"destroy",value:function(){this.destroyed||(Object(k.c)(this),this.__accessor__.destroy())}},{key:"initialized",get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},{key:"constructed",get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},{key:"destroyed",get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}},{key:"commitProperty",value:function(e){this.get(e)}},{key:"get",value:function(e){return Object(i.b)(this,e)}},{key:"hasOwnProperty",value:function(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}},{key:"isInstanceOf",value:function(e){return Object(u.b)(r.a.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}},{key:"keys",value:function(){return this.__accessor__?this.__accessor__.keys():[]}},{key:"set",value:function(e,t){return Object(o.a)(this,e,t),this}},{key:"watch",value:function(e,t,n){return Object(k.d)(this,e,t,n)}},{key:"_clearOverride",value:function(e){return this.__accessor__.clearOverride(e)}},{key:"_override",value:function(e,t){return this.__accessor__.override(e,t)}},{key:"_isOverridden",value:function(e){return this.__accessor__.isOverridden(e)}},{key:"notifyChange",value:function(e){this.__accessor__.propertyInvalidated(e)}},{key:"_get",value:function(e){return this.__accessor__.internalGet(e)}},{key:"_set",value:function(e,t){return this.__accessor__.internalSet(e,t),this}}],[{key:"createSubclass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");var t=e.properties,n=e.declaredClass,r=e.constructor;delete e.declaredClass,delete e.properties,delete e.constructor;var i=this,o=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inherited=null,r&&r.apply($t(e),a),e}return n}(i);Object(a.a)(o.prototype);var u=function(t){var n=e[t];o.prototype[t]="function"==typeof n?function(){var e,a=this.inherited;this.inherited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(i.prototype[t])return i.prototype[t].apply(this,n)};try{for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];e=n.apply(this,s)}catch(r){throw this.inherited=a,r}return this.inherited=a,e}:e[t]};for(var l in e)u(l);for(var h in t){var f=S(t[h]);Object(s.b)(f)(o.prototype,h)}return Object(c.a)(n)(o)}}]),e}();t.a=M},"/GVf":function(e,t,n){"use strict";n.r(t);var r,i,a,o=n("pO5D"),s=(n("wSAH"),n("srIe")),u=n("6S2I"),c=n("zqDF"),l=n("WbKI"),h=n("04ZG"),f=n("Cduq"),p=n("4EHJ"),d=(n("ju1D"),n("9AIY"),n("SFah")),v=n("pqNC"),y=n("5pQd"),b=n("IvSi"),g=n("uRH/"),m=n("PVlI"),w=n("mXvl"),O=n("DbUH"),j=n("jhcG"),_=n("WmKv"),x=n("YBpl"),k=n("9Ruv"),S=n("f/qv"),M=n("Stxv"),I=n("+opI"),T=n("r88o"),A=n("zlDU"),C=n("9MzC"),E=n("WZb1"),P=n("SuVq"),R=n("OvF4"),D=n("Ehki"),L=n("4GrV"),N=n("Lqtk"),F=n("jWBI"),z=n("Piei"),V=n("ukD5"),G=n("ofM5"),U=n("gLc9"),B=n("8prj"),q=n("xk++"),H=n("/uz8"),W=n("tidM"),J=n("RI0u"),Z=n("ag7Y"),K=new Set(["raster","raster2","dem","fillraster"]),Y=new Set(["rasters"]),X=function(e){return e&&e.rasterFunction?te.fromJSON(e):e},Q=function(e){return e&&e instanceof te?e.toJSON():e},$=function(e){return(null==e?void 0:e.functionName)&&!e.declaredClass},ee=function(e){return $(e)?new te(e):e};(a=i||(i={}))[a.MOSAIC=0]="MOSAIC",a[a.GROUP=1]="GROUP",a[a.ITEM=2]="ITEM";var te=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).functionName=null,r.outputPixelType="unknown",r.variableName=null,r.description=null,r.functionDefinition=null,r.thumbnail=null,r}return Zt(n,[{key:"functionArguments",set:function(e){if(e){var t=Object.keys(e);if(t.some((function(t){return K.has(t.toLowerCase())&&$(e[t])}))||t.some((function(t){return Y.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some((function(e){return $(e)}))}))){e=Object(S.a)(e);var n,r=Vt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;K.has(i.toLowerCase())?e[i]=ee(e[i]):Y.has(i.toLowerCase())&&Array.isArray(e[i])&&(e[i]=e[i].map((function(e){return ee(e)})))}}catch(a){r.e(a)}finally{r.f()}}}this._set("functionArguments",e)}},{key:"readFunctionArguments",value:function(e,t){return function(e){if(null==e)return null;e=Object(S.a)(e);for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t[i]=K.has(i.toLowerCase())?X(e[i]):Y.has(i.toLowerCase())&&Array.isArray(e[i])?e[i].map(X):e[i]}return t}(t.arguments||t.rasterFunctionArguments)}},{key:"writeFunctionArguments",value:function(e,t,n){for(var r={},i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];r[o]=K.has(o.toLowerCase())?Q(e[o]):Y.has(o.toLowerCase())&&Array.isArray(e[o])?e[o].map(Q):Q(e[o])}this.functionDefinition?t.arguments=r:t[n]=r}},{key:"readFunctionName",value:function(e,t){var n=t.rasterFunctionInfos;return t.name||(n&&n.length&&"None"!==n[0].name?n[0].name:t.rasterFunction)}},{key:"writeFunctionName",value:function(e,t,n){this.functionDefinition?t.name=e:t[n]=e}},{key:"readFunctionType",value:function(e){return i[e]}},{key:"writeFunctionType",value:function(e,t,n){t[n]=i[e]}},{key:"clone",value:function(){return new r({functionName:this.functionName,functionArguments:Object(S.a)(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})}}]),n}(Z.a);Object(o.a)([Object(l.b)({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],te.prototype,"functionArguments",null),Object(o.a)([Object(T.a)("functionArguments",["rasterFunctionArguments","arguments"])],te.prototype,"readFunctionArguments",null),Object(o.a)([Object(f.a)("functionArguments")],te.prototype,"writeFunctionArguments",null),Object(o.a)([Object(l.b)({json:{type:String,write:{target:"rasterFunction"}}})],te.prototype,"functionName",void 0),Object(o.a)([Object(T.a)("functionName",["rasterFunction","rasterFunctionInfos","name"])],te.prototype,"readFunctionName",null),Object(o.a)([Object(f.a)("functionName")],te.prototype,"writeFunctionName",null),Object(o.a)([Object(J.a)({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),Object(l.b)({json:{default:"unknown"}})],te.prototype,"outputPixelType",void 0),Object(o.a)([Object(l.b)({type:String,json:{read:!0,write:!0}})],te.prototype,"variableName",void 0),Object(o.a)([Object(l.b)({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],te.prototype,"description",void 0),Object(o.a)([Object(l.b)({json:{origins:{"web-document":{read:!1,write:!1}}}})],te.prototype,"functionType",void 0),Object(o.a)([Object(T.a)("functionType")],te.prototype,"readFunctionType",null),Object(o.a)([Object(f.a)("functionType")],te.prototype,"writeFunctionType",null),Object(o.a)([Object(l.b)({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],te.prototype,"functionDefinition",void 0),Object(o.a)([Object(l.b)({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],te.prototype,"thumbnail",void 0);var ne=te=r=Object(o.a)([Object(h.a)("esri.layers.support.RasterFunction")],te),re=n("w/y1"),ie=n("fG4V"),ae=n("ZVeJ"),oe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},se={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},ue=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function ce(e){return ue.has(e.type)}function le(e,t){if(!e||!t)return Object(S.a)(e||t);var n=Object(S.a)(e);return"none"!==t.functionName.toLowerCase()&&((function e(t){var n=t.Raster;return n&&"esri.layers.support.RasterFunction"===n.declaredClass?e(n.functionArguments):t}(n.functionArguments)).Raster=t),n}var he={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function fe(e,t){var n=oe[String(t).toLowerCase()];return n&&e.push([Math.floor(n[0]-1),0,0,0],[Math.ceil(n[1]+1),0,0,0]),e}function pe(e){if(e){var t=e.fields,n=t&&t.find((function(e){return e&&e.name&&"value"===e.name.toLowerCase()}));return n&&n.name}}function de(e){var t=[];return e.forEach((function(e){var n=e;if(Array.isArray(n))t.push(n);else{if(null==n.min||null==n.max)return;t.push([n.min,n.max,n.avg||0,n.stddev||0])}})),t}var ve,ye=n("Gj5k"),be=Object(I.b)()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),ge=Object(I.b)()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"}),me=ve=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).ascending=!0,r.itemRenderingRule=null,r.lockRasterIds=null,r.method=null,r.multidimensionalDefinition=null,r.objectIds=null,r.operation=null,r.sortField=null,r.sortValue=null,r.viewpoint=null,r.where=null,r}return Zt(n,[{key:"readAscending",value:function(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending}},{key:"readMethod",value:function(e,t){return function(e){var t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;case"none":default:t="esriMosaicNone"}return ge.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)}},{key:"readOperation",value:function(e,t){var n=t.mosaicOperation,r=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),i=n||(r?be.toJSON(r):null);return be.fromJSON(i)||"first"}},{key:"castSortValue",value:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:""+e}},{key:"clone",value:function(){return new ve({ascending:this.ascending,itemRenderingRule:Object(S.a)(this.itemRenderingRule),lockRasterIds:Object(S.a)(this.lockRasterIds),method:this.method,multidimensionalDefinition:Object(S.a)(this.multidimensionalDefinition),objectIds:Object(S.a)(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Object(S.a)(this.viewpoint),where:this.where})}}]),n}(Z.a);Object(o.a)([Object(l.b)({type:Boolean,json:{write:!0}})],me.prototype,"ascending",void 0),Object(o.a)([Object(T.a)("ascending",["ascending","sortAscending"])],me.prototype,"readAscending",null),Object(o.a)([Object(l.b)({type:ne,json:{write:!0}})],me.prototype,"itemRenderingRule",void 0),Object(o.a)([Object(l.b)({type:[c.a],json:{write:{overridePolicy:function(){return{enabled:"lock-raster"===this.method}}}}})],me.prototype,"lockRasterIds",void 0),Object(o.a)([Object(l.b)({type:String,json:{type:ge.jsonValues,write:{target:"mosaicMethod",writer:ge.write}}})],me.prototype,"method",void 0),Object(o.a)([Object(T.a)("method",["mosaicMethod","defaultMosaicMethod"])],me.prototype,"readMethod",null),Object(o.a)([Object(l.b)({type:[W.a],json:{write:!0}})],me.prototype,"multidimensionalDefinition",void 0),Object(o.a)([Object(l.b)({type:[c.a],json:{name:"fids",write:!0}})],me.prototype,"objectIds",void 0),Object(o.a)([Object(l.b)({json:{type:be.jsonValues,read:{reader:be.read},write:{target:"mosaicOperation",writer:be.write}}})],me.prototype,"operation",void 0),Object(o.a)([Object(T.a)("operation",["mosaicOperation","mosaicOperator"])],me.prototype,"readOperation",null),Object(o.a)([Object(l.b)({type:String,json:{write:{overridePolicy:function(){return{enabled:"attribute"===this.method}}}}})],me.prototype,"sortField",void 0),Object(o.a)([Object(l.b)({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],me.prototype,"sortValue",void 0),Object(o.a)([Object(ye.a)("sortValue")],me.prototype,"castSortValue",null),Object(o.a)([Object(l.b)({type:P.a,json:{write:!0}})],me.prototype,"viewpoint",void 0),Object(o.a)([Object(l.b)({type:String,json:{write:!0}})],me.prototype,"where",void 0);var we=me=ve=Object(o.a)([Object(h.a)("esri.layers.support.MosaicRule")],me),Oe=new I.a({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),je=new I.a({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),_e=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).layer=null,e.adjustAspectRatio=void 0,e.bandIds=void 0,e.compression=void 0,e.compressionQuality=void 0,e.compressionTolerance=.01,e.format=null,e.interpolation=null,e.noData=null,e.noDataInterpretation=void 0,e.pixelType=void 0,e.lercVersion=2,e}return Zt(n,[{key:"writeAdjustAspectRatio",value:function(e,t,n){this.layer.version<10.3||(t[n]=e)}},{key:"writeCompressionQuality",value:function(e,t,n){this.format&&this.format.toLowerCase().indexOf("jpg")>-1&&null!=e&&(t[n]=e)}},{key:"writeCompressionTolerance",value:function(e,t,n){"lerc"===this.format&&null!=e&&(t[n]=e)}},{key:"writeLercVersion",value:function(e,t,n){"lerc"===this.format&&this.layer.version>=10.5&&(t[n]=e)}},{key:"version",get:function(){var e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("renderingRule"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("renderer"),e.commitProperty("definitionExpression"),(this._get("version")||0)+1},set:function(e){this._set("version",e)}},{key:"mosaicRule",get:function(){var e=this.layer,t=e.mosaicRule,n=e.definitionExpression;return t?n&&n!==t.where&&((t=t.clone()).where=n):n&&(t=new we({where:n})),t}},{key:"renderingRule",get:function(){var e=this.layer,t=e.renderingRule,n=e.pixelFilter,r=!e.format||e.format.indexOf("jpg")>-1||e.format.indexOf("png")>-1;return t=this._addResampleRasterFunction(t),r&&!n&&(t=this.combineRendererWithRenderingRule()),t}},{key:"combineRendererWithRenderingRule",value:function(){var e,t=this.layer,n=t.rasterInfo,r=t.renderingRule,i=t.renderer;return i&&ce(i)?le(function(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){var n=new ne;n.functionName="Stretch";var r=he[ae.b.toJSON(e.stretchType)],i="u8",a={StretchType:r,Statistics:de(e.statistics),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(a.Min=e.outputMin),null!=e.outputMax&&(a.Max=e.outputMax),r===he.standardDeviation?(a.NumberOfStandardDeviations=e.numberOfStandardDeviations,n.outputPixelType=i):r===he.percentClip?(a.MinPercent=e.minPercent,a.MaxPercent=e.maxPercent,n.outputPixelType=i):r===he.minMax?n.outputPixelType=i:r===he.sigmoid&&(a.SigmoidStrengthLevel=e.sigmoidStrengthLevel),n.functionArguments=a,n.variableName="Raster",e.colorRamp){var o=e.colorRamp,s=new ne,u=Object(ie.c)(o);return s.functionArguments=u?{colorRamp:u}:!t.convertColorRampToColormap||"algorithmic"!==o.type&&"multipart"!==o.type?{colorRamp:e.colorRamp.toJSON()}:{Colormap:Object(ie.b)(o,256)},s.variableName="Raster",s.functionName="Colormap",s.functionArguments.Raster=n,s}return n}(e,t);case"class-breaks":return function(e,t){var n=[],r=[],i=[],a=[],o=1e-6,s=t.pixelType,u=t.rasterAttributeTable,c=u&&u.features,l=pe(u);if(c&&Array.isArray(c)&&e.classBreakInfos){e.classBreakInfos.forEach((function(t,n){var r,i=t.symbol.color;i.a&&c.forEach((function(o){((r=o.attributes[e.field])>=t.minValue&&r<t.maxValue||n===e.classBreakInfos.length-1&&r>=t.minValue)&&a.push([o.attributes[l],i.r,i.g,i.b])}))}));var h=s?fe(a,s):a,f=new ne;return f.functionName="Colormap",f.functionArguments={},f.functionArguments.Colormap=h,f.variableName="Raster",f}e.classBreakInfos.forEach((function(e,t){var s=e.symbol&&e.symbol.color;s.a?(n.push(0===t?e.minValue:e.minValue+o,e.maxValue+o),r.push(t),a.push([t,s.r,s.g,s.b])):i.push(e.minValue,e.maxValue)}));var p=s?fe(a,s):a,d=new ne;d.functionName="Remap",d.functionArguments={InputRanges:n,OutputValues:r,NoDataRanges:i},d.variableName="Raster";var v=new ne;return v.functionName="Colormap",v.functionArguments={Colormap:p,Raster:d},v}(e,t);case"unique-value":return function(e,t){var n=[],r=t.pixelType,i=t.rasterAttributeTable,a=i&&i.features,o=pe(i),s=!1;if(e.uniqueValueInfos&&e.uniqueValueInfos.forEach((function(t){var r=t.symbol.color;r.a&&(e.field!==o&&a?a&&a.forEach((function(i){String(i.attributes[e.field])===String(t.value)&&n.push([i.attributes[o],r.r,r.g,r.b])})):isNaN(+t.value)?s=!0:n.push([+t.value,r.r,r.g,r.b]))})),s)return null;var u=r&&n.length>0?fe(n,r):n,c=new ne;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",c}(e,t);case"raster-colormap":return function(e,t){var n=e.extractColormap();if(n&&0!==n.length){var r=t.pixelType,i=r?fe(n,r):n,a=new ne;return a.functionName="Colormap",a.functionArguments={},a.functionArguments.Colormap=i,a}}(e,t);case"vector-field":return function(e,t){var n=new ne;n.functionName="VectorFieldRenderer";var r,i,a=t.dataType,o=t.bandProperties,s="vector-uv"===a;o&&2===o.length&&(r=o.map((function(e){return e.BandName.toLowerCase()})).indexOf("magnitude"),i=o.map((function(e){return e.BandName.toLowerCase()})).indexOf("direction")),-1!==r&&null!==r||(r=0,i=1);var u="arithmetic"===e.rotationType?1:2,c="flow-from"===e.flowRepresentation?0:1,l=e.visualVariables?e.visualVariables.filter((function(e){return"Magnitude"===e.field}))[0]:new re.a,h={magnitudeBandID:r,directionBandID:i,isUVComponents:s,referenceSystem:u,massFlowAngleRepresentation:c,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:se[e.style.toLowerCase().replace("-","_")],minimumMagnitude:l.minDataValue,maximumMagnitude:l.maxDataValue,minimumSymbolSize:l.minSize,maximumSymbolSize:l.maxSize};return n.functionArguments=h,n}(e,t);case"raster-shaded-relief":return function(e,t){if("elevation"!==t.dataType)return new ne;var n=new ne;n.functionName="Hillshade";var r="traditional"===e.hillshadeType?0:1,i="none"===e.scalingType?1:3,a={HillshadeType:r,SlopeType:i,ZFactor:e.zFactor};return 0===r&&(a.Azimuth=e.azimuth,a.Altitude=e.altitude),3===i&&(a.PSPower=e.pixelSizePower,a.PSZFactor=e.pixelSizeFactor),n.functionArguments=a,n.variableName="Raster",e.colorRamp&&(n.functionName="ShadedRelief",a.Colormap=Object(ie.b)(e.colorRamp,256)),n}(e,t)}}(i,{rasterAttributeTable:n.attributeTable,pixelType:n.pixelType,dataType:n.dataType,bandProperties:null==(e=n.keyProperties)?void 0:e.BandProperties,convertColorRampToColormap:t.version<10.6}),r):r}},{key:"_addResampleRasterFunction",value:function(e){var t;return"vector-field"!==(null==(t=this.layer.renderer)?void 0:t.type)||"Resample"===(null==e?void 0:e.functionName)?e:le(new ne({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}}),e)}}]),n}(Z.a);Object(o.a)([Object(l.b)()],_e.prototype,"layer",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],_e.prototype,"adjustAspectRatio",void 0),Object(o.a)([Object(f.a)("adjustAspectRatio")],_e.prototype,"writeAdjustAspectRatio",null),Object(o.a)([Object(l.b)({json:{write:!0}}),Object(M.a)("layer.bandIds")],_e.prototype,"bandIds",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],_e.prototype,"compression",void 0),Object(o.a)([Object(l.b)({json:{write:!0}}),Object(M.a)("layer.compressionQuality")],_e.prototype,"compressionQuality",void 0),Object(o.a)([Object(f.a)("compressionQuality")],_e.prototype,"writeCompressionQuality",null),Object(o.a)([Object(l.b)({json:{write:!0}}),Object(M.a)("layer.compressionTolerance")],_e.prototype,"compressionTolerance",void 0),Object(o.a)([Object(f.a)("compressionTolerance")],_e.prototype,"writeCompressionTolerance",null),Object(o.a)([Object(l.b)({json:{write:!0}}),Object(M.a)("layer.format")],_e.prototype,"format",void 0),Object(o.a)([Object(l.b)({type:String,json:{read:{reader:Oe.read},write:{writer:Oe.write}}}),Object(M.a)("layer.interpolation")],_e.prototype,"interpolation",void 0),Object(o.a)([Object(l.b)({json:{write:!0}}),Object(M.a)("layer.noData")],_e.prototype,"noData",void 0),Object(o.a)([Object(l.b)({type:String,json:{read:{reader:je.read},write:{writer:je.write}}}),Object(M.a)("layer.noDataInterpretation")],_e.prototype,"noDataInterpretation",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],_e.prototype,"pixelType",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],_e.prototype,"lercVersion",void 0),Object(o.a)([Object(f.a)("lercVersion")],_e.prototype,"writeLercVersion",null),Object(o.a)([Object(l.b)({type:Number})],_e.prototype,"version",null),Object(o.a)([Object(l.b)({json:{write:!0}})],_e.prototype,"mosaicRule",null),Object(o.a)([Object(l.b)({json:{write:!0}})],_e.prototype,"renderingRule",null),_e=Object(o.a)([Object(h.a)("esri.layers.mixins.ExportImageServiceParameters")],_e);var xe=n("pPNP"),ke=n("2mvb"),Se=n("FFFX"),Me=n("HM2S"),Ie=n("ciAr"),Te=n("qNUd"),Ae=n("u3Ia"),Ce=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).catalogItemVisibilities=null,e.catalogItems=null,e.location=null,e.name=null,e.objectId=null,e.processedValues=null,e.properties=null,e.value=null,e}return n}(Z.a);Object(o.a)([Object(l.b)({json:{write:!0}})],Ce.prototype,"catalogItemVisibilities",void 0),Object(o.a)([Object(l.b)({type:B.default,json:{write:!0}})],Ce.prototype,"catalogItems",void 0),Object(o.a)([Object(l.b)({type:P.a,json:{write:!0}})],Ce.prototype,"location",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Ce.prototype,"name",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Ce.prototype,"objectId",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Ce.prototype,"processedValues",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Ce.prototype,"properties",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Ce.prototype,"value",void 0);var Ee=Ce=Object(o.a)([Object(h.a)("esri.tasks.support.ImageIdentifyResult")],Ce);function Pe(e,t,n){return Re.apply(this,arguments)}function Re(){return(Re=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ae.c)(t),a=n.geometry?[n.geometry]:[],e.next=4,Object(Te.a)(a);case 4:return o=e.sent,function(e){var t=null==e?void 0:e.time;if(t&&(null!=t.start||null!=t.end)){var n=[];null!=t.start&&n.push(t.start),null!=t.end&&-1===n.indexOf(t.end)&&n.push(t.end),e.time=n.join(",")}}(u=n.toJSON()),c=o&&o[0],Object(s.k)(c)&&(u.geometry=c.toJSON()),l=Object(Ae.b)(Nt(Nt({},i.query),{},{f:"json"},u)),e.abrupt("return",Object(Ae.a)(l,r));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De,Le=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"execute",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ae.c)(t),a=n.geometry?[n.geometry]:[],e.abrupt("return",Object(Te.a)(a).then((function(e){var t=n.toJSON(),a=e&&e[0];Object(s.k)(a)&&(t.geometry=JSON.stringify(a.toJSON()));var o=Object(Ae.b)(Nt(Nt({},i.query),{},{f:"json"},t)),u=Object(Ae.a)(o,r);return Object(N.default)(i.path+"/identify",u)})).then((function(e){return Ee.fromJSON(e.data)})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}}]),n}(n("kglp").a),Ne=Le=Object(o.a)([Object(h.a)("esri.tasks.ImageIdentifyTask")],Le),Fe=n("qatw"),ze=n("ZYtI"),Ve=De=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).geometry=null,e.mosaicRule=null,e.renderingRule=null,e.pixelSize=null,e.raster=void 0,e.timeExtent=null,e}return Zt(n,[{key:"writeGeometry",value:function(e,t,n){null!=e&&(t.geometryType=Object(Fe.c)(e),t[n]=e.toJSON())}},{key:"clone",value:function(){return new De(Object(S.a)({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}}]),n}(Z.a);Object(o.a)([Object(l.b)({types:L.e,json:{read:Fe.a}})],Ve.prototype,"geometry",void 0),Object(o.a)([Object(f.a)("geometry")],Ve.prototype,"writeGeometry",null),Object(o.a)([Object(l.b)({type:we,json:{write:!0}})],Ve.prototype,"mosaicRule",void 0),Object(o.a)([Object(l.b)({type:ne,json:{write:!0}})],Ve.prototype,"renderingRule",void 0),Object(o.a)([Object(l.b)({type:P.a,json:{write:!0}})],Ve.prototype,"pixelSize",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Ve.prototype,"raster",void 0),Object(o.a)([Object(l.b)({type:ze.a,json:{read:{source:"time"},write:{target:"time"}}})],Ve.prototype,"timeExtent",void 0);var Ge,Ue=Ve=De=Object(o.a)([Object(h.a)("esri.tasks.support.ImageHistogramParameters")],Ve),Be=Ge=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).geometry=null,e.renderingRules=null,e.pixelSize=null,e.returnGeometry=!0,e.returnCatalogItems=!0,e.returnPixelValues=!0,e.maxItemCount=null,e.timeExtent=null,e.raster=void 0,e.viewId=void 0,e}return Zt(n,[{key:"writeGeometry",value:function(e,t,n){null!=e&&(t.geometryType=Object(Fe.c)(e),t[n]=JSON.stringify(e.toJSON()))}},{key:"mosaicRule",set:function(e){var t=e;t&&t.mosaicMethod&&(t=we.fromJSON(Nt(Nt({},t.toJSON()),{},{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)}},{key:"writeMosaicRule",value:function(e,t,n){null!=e&&(t[n]=JSON.stringify(e.toJSON()))}},{key:"renderingRule",set:function(e){var t=e;t&&t.rasterFunction&&(t=ne.fromJSON(Nt(Nt({},t.toJSON()),{},{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)}},{key:"writeRenderingRule",value:function(e,t,n){null!=e&&(t[n]=JSON.stringify(e.toJSON()))}},{key:"writeRenderingRules",value:function(e,t,n){null!=e&&(t[n]=JSON.stringify(e.map((function(e){return e.toJSON()}))))}},{key:"writePixelSize",value:function(e,t,n){null!=e&&(t[n]=JSON.stringify(e))}},{key:"writeTimeExtent",value:function(e,t,n){if(null!=e){var r=e.start?e.start.getTime():null,i=e.end?e.end.getTime():null;t[n]=null!=r?null!=i?"".concat(r,",").concat(i):""+r:null}}},{key:"clone",value:function(){return new Ge(Object(S.a)({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}}]),n}(Z.a);Object(o.a)([Object(l.b)({json:{write:!0}})],Be.prototype,"geometry",void 0),Object(o.a)([Object(f.a)("geometry")],Be.prototype,"writeGeometry",null),Object(o.a)([Object(l.b)({type:we,json:{write:!0}})],Be.prototype,"mosaicRule",null),Object(o.a)([Object(f.a)("mosaicRule")],Be.prototype,"writeMosaicRule",null),Object(o.a)([Object(l.b)({type:ne,json:{write:!0}})],Be.prototype,"renderingRule",null),Object(o.a)([Object(f.a)("renderingRule")],Be.prototype,"writeRenderingRule",null),Object(o.a)([Object(l.b)({type:[ne],json:{write:!0}})],Be.prototype,"renderingRules",void 0),Object(o.a)([Object(f.a)("renderingRules")],Be.prototype,"writeRenderingRules",null),Object(o.a)([Object(l.b)({type:P.a,json:{write:!0}})],Be.prototype,"pixelSize",void 0),Object(o.a)([Object(f.a)("pixelSize")],Be.prototype,"writePixelSize",null),Object(o.a)([Object(l.b)({type:Boolean,json:{write:!0}})],Be.prototype,"returnGeometry",void 0),Object(o.a)([Object(l.b)({type:Boolean,json:{write:!0}})],Be.prototype,"returnCatalogItems",void 0),Object(o.a)([Object(l.b)({type:Boolean,json:{write:!0}})],Be.prototype,"returnPixelValues",void 0),Object(o.a)([Object(l.b)({type:Number,json:{write:!0}})],Be.prototype,"maxItemCount",void 0),Object(o.a)([Object(l.b)({type:ze.a,json:{write:{target:"time"}}})],Be.prototype,"timeExtent",void 0),Object(o.a)([Object(f.a)("timeExtent")],Be.prototype,"writeTimeExtent",null),Object(o.a)([Object(l.b)({json:{write:!0}})],Be.prototype,"raster",void 0),Object(o.a)([Object(l.b)({json:{write:!0}})],Be.prototype,"viewId",void 0);var qe,He,We=Be=Ge=Object(o.a)([Object(h.a)("esri.tasks.support.ImageIdentifyParameters")],Be),Je=u.a.getLogger("esri.layers.mixins.ArcGISImageService"),Ze=Object(I.b)()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),Ke=Object(I.b)()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),Ye=Object(I.b)()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),Xe=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),Qe=Object(l.a)(c.i,{min:0,max:255}),$e=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).legendEnabled=!0,e.isReference=null,e.operationalLayerType="ArcGISImageServiceLayer",e.popupEnabled=!0,e.popupTemplate=null,e.type="imagery",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Nt({url:e},t):e}},{key:"load",value:function(e){var t=this,n=Object(s.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._fetchService(n)}),(function(){return t._fetchService(n)}))),Promise.resolve(this)}},{key:"writeOperationalLayerType",value:function(e,t,n){var r,i="vector-field"===(null==(r=this.renderer)?void 0:r.type);t[n]=i?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"createPopupTemplate",value:function(e){var t=this.rasterFields,n=this.title,r=new Set,i=!1,a=!1;this.capabilities&&(a=(i=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));var o=new Set;i&&(o.add("raster.itempixelvalue"),a&&o.add("raster.magnitude").add("raster.direction"));var s,u=Vt(t);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=c.name.toLowerCase();o.has(l)||l.indexOf("raster.servicepixelvalue.")>-1||r.add(c.name)}}catch(h){u.e(h)}finally{u.f()}return Object(k.a)({fields:t,title:n},Nt(Nt({},e),{},{visibleFieldNames:r}))}},{key:"redraw",value:function(){this.emit("redraw")}}]),n}(Object(w.a)(Object(x.a)(Object(j.a)(Object(_.a)(Object(g.a)(Object(O.a)((qe=Object(m.a)(Object(y.a)(v.a)),He=function(e){Kt(w,e);var t,n,r,i,a,o,u,l,h,f,d,v,y,b,g,m=Xt(w);function w(){var e;return Wt(this,w),(e=m.apply(this,arguments))._functionRasterInfos={},e._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},e._symbolizer=null,e._defaultServiceMosaicRule=null,e.rasterAttributeTableFieldPrefix="Raster.",e.adjustAspectRatio=null,e.bandCount=null,e.bandIds=void 0,e.capabilities=null,e.compressionQuality=void 0,e.compressionTolerance=.01,e.copyright=null,e.definitionExpression=null,e.exportImageServiceParameters=null,e.rasterInfo=null,e.fields=null,e.fullExtent=null,e.hasMultidimensions=!1,e.imageMaxHeight=4100,e.imageMaxWidth=4100,e.interpolation=void 0,e.minScale=0,e.maxScale=0,e.multidimensionalInfo=null,e.noData=null,e.noDataInterpretation=void 0,e.objectIdField=null,e.pixelSizeX=null,e.pixelSizeY=null,e.pixelFilter=null,e.raster=void 0,e.viewId=void 0,e.renderer=null,e.rasterAttributeTable=null,e.rasterFunctionInfos=null,e.serviceDataType=null,e.spatialReference=null,e.pixelType=null,e.serviceRasterInfo=null,e.sourceJSON=null,e.url=null,e.version=null,e}return Zt(w,[{key:"initialize",value:function(){this._set("exportImageServiceParameters",new _e({layer:this}))}},{key:"readDefaultServiceMosaicRule",value:function(e,t){return we.fromJSON(t)}},{key:"rasterFunctionNamesIndex",get:function(){var e=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos.length<1||this.rasterFunctionInfos.forEach((function(t){e.set(t.name.toLowerCase().replace(/ /gi,"_"),t.name)})),e}},{key:"queryTask",get:function(){return new H.a({url:this.url})}},{key:"readBandIds",value:function(e,t){if(Array.isArray(e)&&e.length>0&&e.every((function(e){return"number"==typeof e})))return e}},{key:"readCapabilities",value:function(e,t){return this._readCapabilities(t)}},{key:"writeCompressionQuality",value:function(e,t,n){null!=e&&"lerc"!==this.format&&(t[n]=e)}},{key:"writeCompressionTolerance",value:function(e,t,n){"lerc"===this.format&&null!=e&&(t[n]=e)}},{key:"fieldsIndex",get:function(){return this.fields?new U.a(this.fields):null}},{key:"format",set:function(e){e&&Xe.has(e.toLowerCase())&&this._set("format",e.toLowerCase())}},{key:"readFormat",value:function(e,t){return"esriImageServiceDataTypeVector-UV"===t.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===t.serviceDataType||null!=this.pixelFilter?"lerc":"jpgpng"}},{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"mosaicRule",set:function(e){var t=e;t&&t.mosaicMethod&&(t=we.fromJSON(Nt(Nt({},t.toJSON()),{},{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)}},{key:"readMosaicRule",value:function(e,t){return we.fromJSON(e||t.mosaicRule||t)}},{key:"writeMosaicRule",value:function(e,t,n){var r=this.mosaicRule,i=this.definitionExpression;r?i&&i!==r.where&&((r=r.clone()).where=i):i&&(r=new we({where:i})),this._isValidCustomizedMosaicRule(r)&&(t[n]=r.toJSON())}},{key:"writeNoData",value:function(e,t,n){null!=e&&"number"==typeof e&&(t[n]=Qe(e))}},{key:"readObjectIdField",value:function(e,t){if(!e){var n=t.fields.filter((function(e){return"esriFieldTypeOID"===e.type||"oid"===e.type}));e=n&&n[0]&&n[0].name}return e}},{key:"parsedUrl",get:function(){return this.url?Object(p.J)(this.url):null}},{key:"readRenderer",value:function(e,t,n){var r,i,a=null==t||null==(r=t.layerDefinition)||null==(i=r.drawingInfo)?void 0:i.renderer,o=Object(V.b)(a,n);return null==o?null:("vector-field"===o.type&&t.symbolTileSize&&!a.symbolTileSize&&(o.symbolTileSize=t.symbolTileSize),ce(o)||Je.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),o)}},{key:"writeRenderer",value:function(e,t,n){t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.toJSON(),"vector-field"===e.type&&(t.symbolTileSize=e.symbolTileSize)}},{key:"rasterFields",get:function(){var e=this.rasterAttributeTableFieldPrefix||"Raster.",t=new G.a({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new G.a({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),r=new G.a({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),i=this.fields?Object(S.a)(this.fields):[];i.push(n),this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0&&i.push(t),this.version>=10.4&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some((function(e){return"none"===e.name.toLowerCase()}))&&i.push(r),this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((function(e){return"none"!==e.name.toLowerCase()})).forEach((function(e){i.push(new G.a({name:"Raster.ServicePixelValue."+e.name,alias:e.name,domain:null,editable:!1,length:50,type:"string"}))})),null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(i.push(new G.a({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),i.push(new G.a({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));var a=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(a&&a.length>0){var o=a.filter((function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(t){var n=Object(S.a)(t);return n.name=e+t.name,n}));i=i.concat(o)}return i}},{key:"renderingRule",set:function(e){var t=e;t&&t.rasterFunction&&(t=ne.fromJSON(Nt(Nt({},t.toJSON()),{},{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)}},{key:"readRenderingRule",value:function(e,t){var n=t.rasterFunctionInfos;return t.renderingRule||n&&n.length&&"None"!==n[0].name?ne.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}},{key:"writeRenderingRule",value:function(e,t,n){this._isRFTJson(e)||(t[n]=e.toJSON())}},{key:"readSpatialReference",value:function(e,t){var n=e||t.extent.spatialReference;return n?E.a.fromJSON(n):null}},{key:"readPixelType",value:function(e){return Ye.fromJSON(e)||e}},{key:"writePixelType",value:function(e,t,n){(Object(s.j)(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[n]=Ye.toJSON(e))}},{key:"readVersion",value:function(e,t){var n=t.currentVersion;return n||(n=t.hasOwnProperty("fields")||t.hasOwnProperty("timeInfo")?10:9.3),n}},{key:"applyFilter",value:function(e){var t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t}},{key:"applyRenderer",value:(g=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,this._isPicture()||!this.renderer||!this._symbolizer||this.pixelFilter){e.next=17;break}if(i=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),a=this._rasterJobHandler.instance,o=this.bandIds,!a){e.next=16;break}if(e.t0=i,!e.t0){e.next=10;break}return this._symbolizer.bind(),e.next=9,a.updateSymbolizer(this._symbolizer,n);case 9:this._cachedRendererJson=this.renderer.toJSON();case 10:return e.next=12,a.symbolize(Nt({bandIds:o},t),n);case 12:s=e.sent,r={extent:t.extent,pixelBlock:s},e.next=17;break;case 16:r={extent:t.extent,pixelBlock:this._symbolizer.symbolize(Nt({bandIds:o},t))};case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"destroy",value:function(){this._shutdownJobHandler()}},{key:"increaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount++}},{key:"decreaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}},{key:"computeHistograms",value:(b=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==n?void 0:n.signal,e.next=3,this._fetchCapabilities(r);case 3:if(this.capabilities.operations.supportsComputeHistograms){e.next=5;break}throw new A.a("imagery-layer:compute-histograms","this operation is not supported on the input image service");case 5:return t=Object(c.d)(Ue,t).clone(),i=this.raster,a=this.mosaicRule,o=this.renderingRule,e.abrupt("return",(o&&null==t.renderingRule&&(t.renderingRule=o),a&&null==t.mosaicRule&&(t.mosaicRule=a),i&&null==t.raster&&(t.raster=i),function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t,n,r);case 2:return i=e.sent,a=Object(Ae.c)(t),e.next=6,Object(N.default)(a.path+"/computeHistograms",i);case 6:return o=e.sent,s=o.data,e.abrupt("return",{histograms:s.histograms});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this.url,t,{signal:r})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"computeStatisticsHistograms",value:(y=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==n?void 0:n.signal,e.next=3,this._fetchCapabilities(r);case 3:if(this.capabilities.operations.supportsComputeStatisticsHistograms){e.next=5;break}throw new A.a("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");case 5:return t=Object(c.d)(Ue,t).clone(),i=this.raster,a=this.mosaicRule,o=this.renderingRule,e.abrupt("return",(o&&null==t.renderingRule&&(t.renderingRule=o),a&&null==t.mosaicRule&&(t.mosaicRule=a),i&&null==t.raster&&(t.raster=i),function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t,n,r);case 2:return i=e.sent,a=Object(Ae.c)(t),e.next=6,Object(N.default)(a.path+"/computeStatisticsHistograms",i);case 6:return o=e.sent,s=o.data,u=s.statistics,e.abrupt("return",(null!=u&&u.length&&u.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:u,histograms:s.histograms}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this.url,t,{signal:r})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"fetchImage",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null==e||null==t||null==n)return Promise.reject(new A.a("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var a=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:i.signal}):null;return Object(C.w)(a).then((function(a){a&&(r.rasterInfo=a);var o={imageServiceParameters:r.getExportImageServiceParameters(e,t,n,i.timeExtent),imageProps:{extent:e,width:t,height:n,format:r.format},requestAsImageElement:i.requestAsImageElement&&!r.pixelFilter||!1,signal:i.signal};return r._requestArrayBuffer(o)}))}},{key:"fetchKeyProperties",value:function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return Object(N.default)(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return e.data}))}},{key:"fetchRasterAttributeTable",value:function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return this.version<10.1?Promise.reject(new A.a("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Object(N.default)(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return B.default.fromJSON(e.data)}))}},{key:"getCatalogItemRasterInfo",value:(v=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(N.default)(this.parsedUrl.path+"/"+t+"/info",Nt({query:this._getQueryParams()},n)).then((function(e){return e.data})),i=Object(N.default)(this.parsedUrl.path+"/"+t+"/info/keyProperties",Nt({query:this._getQueryParams()},n)).then((function(e){return e.data})).catch((function(){})),e.next=4,Promise.all([r,i]);case 4:if((a=e.sent)[0]){e.next=7;break}return e.abrupt("return");case 7:return o=R.a.fromJSON(a[0].extent),s=a[0].statistics?a[0].statistics.map((function(e){return{min:e[0],max:e[1],avg:e[2],stddev:e[3]}})):null,e.abrupt("return",new xe.a({bandCount:a[0].bandCount,extent:o,spatialReference:o.sr,pixelSize:new P.a({x:a[0].pixelSizeX,y:a[0].pixelSizeY,spatialReference:o.sr}),pixelType:a[0].pixelType.toLowerCase(),statistics:s,histograms:a[0].histograms,keyProperties:a[1]||{}}));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"getCatalogItemICSInfo",value:(d=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_,x,k,S,M,I,T,A,C,P,D,L,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.default)(this.parsedUrl.path+"/"+t+"/info/ics",Nt({query:this._getQueryParams()},n));case 2:if(r=e.sent,i=r.data,a=i&&i.ics){e.next=7;break}return e.abrupt("return");case 7:return o=null,e.prev=8,e.next=11,Object(N.default)(this.parsedUrl.path+"/"+t+"/info",Nt({query:this._getQueryParams()},n));case 11:o=e.sent.data.extent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:if(o&&o.spatialReference){e.next=18;break}return e.abrupt("return",{ics:a,icsToPixelTransform:null,icsExtent:null,northDirection:null});case 18:for(s=this.version>=10.7?Object(N.default)(this.parsedUrl.path+"/"+t+"/info/icstopixel",Nt({query:this._getQueryParams()},n)).then((function(e){return e.data})).catch((function(){return{}})):{},u=o.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[o]}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+t},l=Object(N.default)(this.parsedUrl.path+"/project",Nt({query:this._getQueryParams(c)},n)).then((function(e){return e.data})).catch((function(){return{}})),h=(o.xmin+o.xmax)/2,f=(o.ymax-o.ymin)/6,p=o.ymin+f,d=[],v=0;v<5;v++)d.push({x:h,y:p+f*v});return y={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:d}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+t},b=Object(N.default)(this.parsedUrl.path+"/project",Nt({query:this._getQueryParams(y)},n)).then((function(e){return e.data})).catch((function(){return{}})),e.next=24,Promise.all([s,l,b]);case 24:if(g=e.sent,null==(m=g[0].ipxf)&&"topup"===(null==(_=null==(w=a.geodataXform)?void 0:w.xf_0)||null==(O=_.name)?void 0:O.toLowerCase())&&6===(null==_||null==(j=_.coefficients)?void 0:j.length)&&(m={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:_.coefficients,cellsizeRatio:0,type:"GeometricXform"}}),(x=R.a.fromJSON(g[1]&&g[1].geometries&&g[1].geometries[0]))&&(x.spatialReference=new E.a({wkid:0,imageCoordinateSystem:a})),k=g[2].geometries?g[2].geometries.filter((function(e){return null!=e&&null!=e.x&&null!=e.y&&"NaN"!==e.x&&"NaN"!==e.y})):[],!((S=k.length)<3)){e.next=32;break}return e.abrupt("return",{ics:a,icsToPixelTransform:m,icsExtent:x,northDirection:null});case 32:for(M=0,I=0,T=0,A=0,C=0;C<S;C++)M+=k[C].x,I+=k[C].y,T+=k[C].x*k[C].x,A+=k[C].x*k[C].y;return P=(S*A-M*I)/(S*T-M*M),D=0,L=k[4].x>k[0].x,F=k[4].y>k[0].y,e.abrupt("return",(P===1/0?D=F?90:270:0===P?D=L?0:180:P>0?D=L?180*Math.atan(P)/Math.PI:180*Math.atan(P)/Math.PI+180:P<0&&(D=F?180+180*Math.atan(P)/Math.PI:360+180*Math.atan(P)/Math.PI),{ics:a,icsToPixelTransform:m,icsExtent:x,northDirection:D}));case 38:case"end":return e.stop()}}),e,this,[[8,14]])}))),function(e,t){return d.apply(this,arguments)})},{key:"generateRasterInfo",value:(f=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"none"!==t.functionName.toLowerCase()&&!this._isVectorFieldResampleFunction(t)||!Object(s.k)(this.serviceRasterInfo)){e.next=2;break}return e.abrupt("return",this.serviceRasterInfo);case 2:if(r=function(e){if(!e)return null;var t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi),n=null==t?void 0:t.map((function(e){return e.replace('"rasterFunction":"',"").replace('"',"")}));return n?n.join("/"):null}(t),!this._functionRasterInfos[r]){e.next=5;break}return e.abrupt("return",this._functionRasterInfos[r]);case 5:return i=this._generateRasterInfo(t,n),this._functionRasterInfos[r]=i,e.prev=7,e.next=10,i;case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",(this._functionRasterInfos[r]=null,null));case 16:case"end":return e.stop()}}),e,this,[[7,13]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getExportImageServiceParameters",value:function(e,t,n,r){var i,a=(e=e.clone().shiftCentralMeridian()).spatialReference;if(a.imageCoordinateSystem){var o=a.imageCoordinateSystem,u=o.id,c=o.referenceServiceName;i=null!=u?c?this.parsedUrl.path.toLowerCase().indexOf("/"+c.toLowerCase()+"/")>-1?"0:"+u:JSON.stringify({icsid:u,icsns:c}):"0:"+u:JSON.stringify({ics:a.imageCoordinateSystem})}else i=a.wkid||JSON.stringify(a.toJSON());Object(s.k)(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var l=this.exportImageServiceParameters.toJSON(),h=l.bandIds,f=l.noData,p=l.mosaicRule,d=l.renderingRule;if(l.bandIds=h instanceof Array&&h.length>0&&!this.renderingRule?h.join(","):void 0,null!=h&&h.length&&this.renderingRule)if("Colormap"===d.rasterFunction){var v=new ne({functionName:"ExtractBand",functionArguments:{BandIds:h,raster:d.rasterFunctionArguments.Raster}});d.rasterFunctionArguments.Raster=v}else d=new ne({functionName:"ExtractBand",functionArguments:{BandIds:h,raster:d}});f instanceof Array&&f.length>0&&(l.noData=f.join(","));var y=this.timeInfo;p&&p.multidimensionalDefinition&&r&&y&&y.startField&&(p.multidimensionalDefinition=p.multidimensionalDefinition.filter((function(e){return e.dimensionName!==y.startField}))),l.mosaicRule=p&&JSON.stringify(p),l.renderingRule=d&&JSON.stringify(d);var b={};if(r){var g=r.toJSON(),m=g.start,w=g.end;m&&w&&m===w?b.time=""+m:null==m&&null==w||(b.time="".concat(null==m?"null":m,",").concat(null==w?"null":w))}return Nt(Nt({bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:i,imageSR:i,size:t+","+n},l),b)}},{key:"identify",value:(h=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null==n?void 0:n.signal);case 2:if(this.capabilities.operations.supportsIdentify){e.next=4;break}throw new A.a("imagery-layer:query-rasters","query operation is not supported on the input image service");case 4:return t=Object(c.d)(We,t).clone(),r=this.raster,i=this.mosaicRule,a=this.renderingRule,e.abrupt("return",(a&&null==t.renderingRule&&(t.renderingRule=a),i&&null==t.mosaicRule&&(t.mosaicRule=i),r&&null==t.raster&&(t.raster=r),new Ne({url:this.url}).execute(t,n)));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"queryRasters",value:(l=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null==n?void 0:n.signal);case 2:if(this.capabilities.operations.supportsQuery){e.next=4;break}throw new A.a("imagery-layer:query-rasters","query operation is not supported on the input image service");case 4:return e.abrupt("return",(t=Object(c.d)(q.a,t),this.queryTask.execute(t,n)));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"queryVisibleRasters",value:function(e,t){var n=this;if(!e)return Promise.reject(new A.a("imagery-layer: query-visible-rasters","missing query parameter"));var r=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1},i=r.pixelSize,a=r.returnDomainValues,o=r.returnTopmostRaster,u=r.showNoDataRecords,c=!1,l=null,h=null,f="raster.servicepixelvalue",p=this.rasterFunctionNamesIndex;if(Object(s.k)(e.outFields)&&(c=e.outFields.some((function(e){return-1===e.toLowerCase().indexOf(f)})),this.version>=10.4)){var d=e.outFields.filter((function(e){return e.toLowerCase().indexOf(f)>-1&&e.length>f.length})).map((function(e){var t=e.slice(f.length+1);return[n._updateRenderingRulesFunctionName(t,p),t]}));l=d.map((function(e){return new ne({functionName:e[0]})})),h=d.map((function(e){return e[1]})),0===l.length?this.renderingRule?(l.push(this.renderingRule),h.push(this.renderingRule.functionName)):l=null:this.renderingRule&&!l.some((function(e){return e.functionName===n.renderingRule.functionName}))&&(l.push(this.renderingRule),h.push(this.renderingRule.functionName))}var v=Object(s.j)(e.outSpatialReference)||e.outSpatialReference.equals(this.spatialReference),y=this._getQueryParams({geometry:e.geometry,timeExtent:e.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:l,pixelSize:i,returnCatalogItems:c,returnGeometry:v,maxItemCount:o?1:null});delete y.f;var b=new We(y),g=new Ne({url:this.url}),m=this.generateRasterInfo(this.renderingRule);return new Promise((function(t){m.then((function(){g.execute(b).then((function(r){var i=e.outFields;if(c&&!v&&r.catalogItems&&r.catalogItems.features&&r.catalogItems.features.length>0){var o=n.objectIdField||"ObjectId",s=r.catalogItems.features,l=s.map((function(e){return e.attributes&&e.attributes[o]})),f=new q.a({objectIds:l,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[o]});return n.queryRasters(f).then((function(c){c&&c.features&&c.features.length>0&&c.features.forEach((function(t){s.forEach((function(n){n.attributes[o]===t.attributes[o]&&(n.geometry=new D.a(t.geometry),n.geometry.spatialReference=e.outSpatialReference)}))})),t(n._processVisibleRastersResponse(r,{returnDomainValues:a,templateRRFunctionNames:h,showNoDataRecords:u,templateFields:i}))})).catch((function(){throw new A.a("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry")}))}t(n._processVisibleRastersResponse(r,{returnDomainValues:a,templateRRFunctionNames:h,showNoDataRecords:u,templateFields:i}))})).catch((function(){throw new A.a("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}))}))}))}},{key:"fetchVariableStatisticsHistograms",value:(u=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(N.default)(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:t}),signal:n}).then((function(e){var t;return null==(t=e.data)?void 0:t.statistics})),i=Object(N.default)(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:t}),signal:n}).then((function(e){var t;return null==(t=e.data)?void 0:t.histograms})),e.next=4,Promise.all([r,i]);case 4:return a=e.sent,e.abrupt("return",(a[0]&&a[0].forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:a[0]||null,histograms:a[1]||null}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"_fetchService",value:(o=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchServiceInfo(t);case 2:return Object(s.k)(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo),n=this.sourceJSON,r=Object(s.k)(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:n,signal:t}).then((function(e){return a._set("serviceRasterInfo",e),e})),i=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:t}):null,e.abrupt("return",Promise.all([r,i]).then((function(e){a._set("rasterInfo",e[1]?e[1]:e[0]),a.renderer&&Object(Me.d)(a.rasterInfo).indexOf(a.renderer.type)<0&&(a.renderer=null,Je.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),a._configDefaultRenderer(),a.watch("renderer",(function(){return a._configDefaultRenderer()})),a.watch("renderingRule",(function(e){(a.renderer||a._symbolizer||a.popupEnabled&&a.popupTemplate)&&a.generateRasterInfo(e).then((function(e){e&&(a.rasterInfo=e)}))}));var t=Object(s.k)(a.serviceRasterInfo)&&a.serviceRasterInfo.multidimensionalInfo;t&&a._updateMultidimensionalDefinition(t)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_initJobHandler",value:(a=Ut(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._rasterJobHandler.connectionPromise){e.next=2;break}return e.abrupt("return",this._rasterJobHandler.connectionPromise);case 2:return t=new ke.a,this._rasterJobHandler.connectionPromise=t.initialize().then((function(){n._rasterJobHandler.instance=t}),(function(){return null})),e.next=6,this._rasterJobHandler.connectionPromise;case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_shutdownJobHandler",value:function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0}},{key:"_fetchCapabilities",value:(i=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.capabilities,e.t0){e.next=4;break}return e.next=4,this._fetchServiceInfo(t);case 4:return e.abrupt("return",this.capabilities);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_fetchServiceInfo",value:(r=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.sourceJSON){e.next=8;break}return e.next=4,Object(N.default)(this.parsedUrl.path,{query:this._getQueryParams(),signal:t});case 4:i=e.sent,a=i.data,o=i.ssl,r=a,this.sourceJSON=r,o&&(this.url=this.url.replace(/^http:/i,"https:"));case 8:if(!((null==(n=r.capabilities)?void 0:n.toLowerCase().split(",").map((function(e){return e.trim()})).indexOf("tilesonly"))>-1)){e.next=10;break}throw new A.a("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");case 10:this.read(r,{origin:"service",url:this.parsedUrl});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_isVectorFieldResampleFunction",value:function(e){if(!Object(s.k)(e))return!1;var t=e.functionName,n=e.functionArguments,r="resample"===t.toLowerCase(),i=(null==n?void 0:n.ResampleType)||(null==n?void 0:n.resampleType);return r&&(7===i||10===i)}},{key:"_isPicture",value:function(){return!this.format||this.format.indexOf("jpg")>-1||this.format.indexOf("png")>-1}},{key:"_configDefaultRenderer",value:function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&this.rasterInfo.bandCount>=3){var e=Object(Me.b)(this.rasterInfo);!e||3===this.rasterInfo.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}var t,n;this.renderer||(this.renderer=Object(Me.a)(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(t=this.mosaicRule)||null==(n=t.multidimensionalDefinition)?void 0:n[0].variableName})),this._symbolizer?(this._symbolizer.rendererJSON=Object(Me.e)(this.renderer.toJSON()),this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new Ie.a({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo}),this._symbolizer.bind()||(this._symbolizer=null)}}},{key:"_clonePixelData",value:function(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:e.pixelBlock&&e.pixelBlock.clone()}}},{key:"_getQueryParams",value:function(e){return Nt({raster:this.raster,viewId:this.viewId,f:"json"},e)}},{key:"_decodePixelBlock",value:function(e,t,n){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):Object(Se.a)(e,t,n)}},{key:"_fetchMultidimensionalInfo",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.default)(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:t}).then((function(e){var t;return null==(t=e.data)?void 0:t.multidimensionalInfo}));case 2:return r=e.sent,e.abrupt("return",(null!=(n=r.variables)&&n.length&&r.variables.forEach((function(e){var t;null!=(t=e.statistics)&&t.length&&e.statistics.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation}))})),r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_fetchAuxiliaryRasterInfo",value:function(e){var t=e&&e.serviceInfo;if(!t)return Promise.reject(new A.a("imagery-layer:fetch-metadata","valid serviceInfo is required"));var n=e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,r=e.signal,i=!!(t.hasRasterAttributeTable&&this.version>=10.1)&&Object(N.default)(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.1?n:null}),signal:r}).then((function(e){return B.default.fromJSON(e.data)})).catch((function(){return null})),a=!!(t.hasColormap&&this.version>=10.1)&&Object(N.default)(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:this.version>=10.6?n:null}),signal:r}).then((function(e){var t;return null==(t=e.data)?void 0:t.colormap})),o=!!(t.hasHistograms&&this.version>=10.1)&&Object(N.default)(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:this.version>=10.1?n:null}),signal:r}).then((function(e){var t;return null==(t=e.data)?void 0:t.histograms})),s=this.version>=10.3&&Object(N.default)(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:n}),signal:r}).then((function(e){return e.data})).catch((function(){})),u=!!(t.hasMultidimensions&&this.version>=10.3)&&this._fetchMultidimensionalInfo();return Promise.all([i,a,o,s,u]).then((function(e){var n=null;if(t.minValues&&t.minValues.length===t.bandCount){n=[];for(var r=0;r<t.minValues.length;r++)n.push({min:t.minValues[r],max:t.maxValues[r],avg:t.meanValues[r],stddev:t.stdvValues[r]})}var i=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),a=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),o=E.a.fromJSON(t.spatialReference||t.extent.spatialReference);return new xe.a({width:i,height:a,bandCount:t.bandCount,extent:R.a.fromJSON(t.extent),spatialReference:o,pixelSize:new P.a({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:o}),pixelType:t.pixelType.toLowerCase(),statistics:n,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||{},multidimensionalInfo:e[4]||null})}))}},{key:"_requestArrayBuffer",value:function(e){var t=this,n=e.imageProps,r=e.requestAsImageElement,i=e.signal;if(r&&!this.pixelFilter&&n.format&&n.format.indexOf("png")>-1)return Object(N.default)(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams(Nt({f:"image"},e.imageServiceParameters)),signal:i}).then((function(e){return{imageElement:e.data,params:n}}));var a=this._initJobHandler(),o=Object(N.default)(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams(Nt({f:"image"},e.imageServiceParameters)),signal:i});return Promise.all([o,a]).then((function(e){var r=e[0].data,a=n.format||"jpgpng",o=a;if("bsq"!==o&&"bip"!==o&&(o=Object(Se.b)(r)),!o)throw new A.a("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(r)));var s="gif"===a||"bmp"===a||a.indexOf("png")>-1&&("png"===o||"jpg"===o),u={signal:i};return s?Object(Se.a)(r,Nt({useCanvas:!0},n),u).then((function(e){return{pixelData:{pixelBlock:e,extent:n.extent},params:n}})):t._decodePixelBlock(r,{width:n.width,height:n.height,planes:null,pixelType:null,noDataValue:null,format:a},u).then((function(e){return{pixelData:{pixelBlock:e,extent:n.extent},params:n}}))}))}},{key:"_generateRasterInfo",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.default)(this.parsedUrl.path,Nt({query:this._getQueryParams({renderingRule:t})},n));case 2:return r=e.sent,i=r.data,e.next=6,this._fetchAuxiliaryRasterInfo(Nt({serviceInfo:i,renderingRule:t},n));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_isValidCustomizedMosaicRule",value:function(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())}},{key:"_updateMultidimensionalDefinition",value:function(e){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var t=e.variables[0].dimensions,n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],a=i.extent,o=!0,s=[a[0]];i.hasRanges&&!0===i.hasRanges?(o=!1,s=[i.values[0]]):"stdz"===i.name.toLowerCase()&&Math.abs(a[1])<=Math.abs(a[0])&&(s=[a[1]]),n.push(new W.a({variableName:"",dimensionName:t[r].name,isSlice:o,values:s}))}if(n.length>0){this.mosaicRule=this.mosaicRule||new we;var u=this.mosaicRule.multidimensionalDefinition;(!u||u&&u.length<=0)&&(this.mosaicRule.multidimensionalDefinition=n)}}}},{key:"_formatAttributeValue",value:function(e,t){if("string"==typeof e){var n,r,i=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,t),a=i&&i.format;if(a)return e.trim().indexOf(",")>-1?(r=(n=",")+" ",this._formatDelimitedString(e,n,r,a)):e.trim().indexOf(" ")>-1?(n=r=" ",this._formatDelimitedString(e,n,r,a)):this._formatNumberFromString(e,a)}return e}},{key:"_getFieldInfo",value:function(e,t){if(e&&e.length&&t){var n,r=t.toLowerCase();return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,"_")||(n=e,0))})),n}}},{key:"_formatDelimitedString",value:function(e,t,n,r){var i=this;return e&&t&&n&&r?e.trim().split(t).map((function(e){return i._formatNumberFromString(e,r)})).join(n):e}},{key:"_formatNumberFromString",value:function(e,t){if(!e||!t)return e;var n=Number(e);return isNaN(n)?e:t.format(n)}},{key:"_processVisibleRastersResponse",value:function(e,t){t=t||{};var n,r,i,a=e.value,o=t,u=o.templateRRFunctionNames,c=o.showNoDataRecords,l=o.returnDomainValues,h=o.templateFields,f=e.processedValues,p=e.catalogItems&&e.catalogItems.features,d=e.properties&&e.properties.Values&&e.properties.Values.map((function(e){return e.replace(/ /gi,", ")}))||[],v=this.objectIdField||"ObjectId",y="string"==typeof a&&a.toLowerCase().indexOf("nodata")>-1,b=[];if(a&&!p&&!y){var g={};g[v]=0,d=[a],p=[new F.a(this.fullExtent,null,g)]}if(!p)return[];this._updateResponseFieldNames(p,h);for(var m=0;m<p.length;m++){if(n=p[m],null!=a&&!y){if(r=d[m],i=this.renderingRule&&f&&f.length>0&&u&&u.length>0&&u.indexOf(this.renderingRule.functionName)>-1?f[u.indexOf(this.renderingRule.functionName)]:a,"nodata"===r.toLowerCase()&&!c)continue;var w="Raster.ItemPixelValue",O="Raster.ServicePixelValue";n.attributes[w]=this._formatAttributeValue(r,w),n.attributes[O]=this._formatAttributeValue(i,O),this._updateFeatureWithMagDirValues(n,r);var j=this.fields&&this.fields.length>0,_=this.renderingRule&&Object(s.k)(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?j?r:a:i;this.renderingRule||(_=j?r:a),this._updateFeatureWithRasterAttributeTableValues(n,_)}if(n.sourceLayer=this,l&&this._updateFeatureWithDomainValues(n),u&&f&&u.length===f.length)for(var x=0;x<u.length;x++){var k="Raster.ServicePixelValue."+u[x];n.attributes[k]=this._formatAttributeValue(f[x],k)}b.push(p[m])}return b}},{key:"_updateFeatureWithRasterAttributeTableValues",value:function(e,t){var n=this,r=this.rasterInfo&&this.rasterInfo.attributeTable||Object(s.k)(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,i=r&&r.features;if(i){var a=r.fields,o=a.map((function(e){return e.name})).filter((function(e){return"value"===e.toLowerCase()})),u=o&&o[0];if(u){var c=i.filter((function(e){return e.attributes[u]===(null!=t?parseInt(t,10):null)}));c&&c[0]&&a.forEach((function(t){var r=n.rasterAttributeTableFieldPrefix+t.name;e.attributes[r]=n._formatAttributeValue(c[0].attributes[t.name],r)}))}}}},{key:"_updateFeatureWithMagDirValues",value:function(e,t){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var n=t.replace(" ",",").split(",").map((function(e){return parseFloat(e)})),r=n.map((function(e){return[e]})),i=n.map((function(e){return{minValue:e,maxValue:e,noDataValue:null}})),a=new z.a({height:1,width:1,pixelType:"f32",pixels:r,statistics:i});this.pixelFilter({pixelBlock:a,extent:new R.a(0,0,0,0,this.spatialReference)}),e.attributes["Raster.Magnitude"]=a.pixels[0][0],e.attributes["Raster.Direction"]=a.pixels[1][0]}}},{key:"_updateFeatureWithDomainValues",value:function(e){var t=this.fields&&this.fields.filter((function(e){return e.domain&&"coded-value"===e.domain.type}));null!=t&&t.forEach((function(t){var n=e.attributes[t.name];if(null!=n){var r=t.domain.codedValues.filter((function(e){return e.code===n}))[0];r&&(e.attributes[t.name]=r.name)}}))}},{key:"_updateResponseFieldNames",value:function(e,t){if(t&&!(t.length<1)){var n=this.fieldsIndex;n&&e.forEach((function(e){if(e&&e.attributes){var r,i=Vt(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(n.has(a)){var o=n.get(a).name;o!==a&&(e.attributes[a]=e.attributes[o],delete e.attributes[o])}}}catch(s){i.e(s)}finally{i.f()}}}))}}},{key:"_updateRenderingRulesFunctionName",value:function(e,t){if(e&&!(e.length<1)){if("Raw"===e)return e.replace("Raw","None");var n=e.toLowerCase().replace(/ /gi,"_");return t.has(n)?t.get(n):e}}},{key:"_isRFTJson",value:function(e){return e.name&&e.arguments&&e.function&&e.hasOwnProperty("functionType")}},{key:"_readCapabilities",value:function(e){var t=e.capabilities?e.capabilities.toLowerCase().split(",").map((function(e){return e.trim()})):["image","catalog"],n=e.currentVersion,r=e.advancedQueryCapabilities,i=e.maxRecordCount,a=t.indexOf("image")>-1,o="esriImageServiceDataTypeElevation"===e.serviceDataType,s=!!(e.spatialReference||e.extent&&e.extent.spatialReference);return{operations:{supportsComputeHistograms:a,supportsExportImage:a,supportsIdentify:a,supportsMeasure:t.indexOf("mensuration")>-1&&s,supportsDownload:t.indexOf("download")>-1,supportsQuery:t.indexOf("catalog")>-1&&e.fields&&e.fields.length>0,supportsGetSamples:n>=10.2&&a,supportsProject:n>=10.3&&a,supportsComputeStatisticsHistograms:n>=10.4&&a,supportsQueryBoundary:n>=10.6&&a,supportsCalculateVolume:n>=10.7&&o,supportsComputePixelLocation:n>=10.7&&t.indexOf("catalog")>-1},query:{supportsStatistics:!(!r||!r.supportsStatistics),supportsOrderBy:!(!r||!r.supportsOrderBy),supportsDistinct:!(!r||!r.supportsDistinct),supportsPagination:!(!r||!r.supportsPagination),supportsStandardizedQueriesOnly:!(!r||!r.useStandardizedQueries),maxRecordCount:i}}}}]),w}(qe),Object(o.a)([Object(l.b)()],He.prototype,"_functionRasterInfos",void 0),Object(o.a)([Object(l.b)()],He.prototype,"_rasterJobHandler",void 0),Object(o.a)([Object(l.b)()],He.prototype,"_symbolizer",void 0),Object(o.a)([Object(l.b)()],He.prototype,"_defaultServiceMosaicRule",void 0),Object(o.a)([Object(T.a)("_defaultServiceMosaicRule",["defaultMosaicMethod"])],He.prototype,"readDefaultServiceMosaicRule",null),Object(o.a)([Object(l.b)()],He.prototype,"_cachedRendererJson",void 0),Object(o.a)([Object(l.b)()],He.prototype,"rasterAttributeTableFieldPrefix",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"rasterFunctionNamesIndex",null),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"queryTask",null),Object(o.a)([Object(l.b)()],He.prototype,"adjustAspectRatio",void 0),Object(o.a)([Object(l.b)({readOnly:!0}),Object(M.a)("serviceRasterInfo.bandCount")],He.prototype,"bandCount",void 0),Object(o.a)([Object(l.b)({type:[c.a],json:{write:!0}})],He.prototype,"bandIds",void 0),Object(o.a)([Object(T.a)("bandIds")],He.prototype,"readBandIds",null),Object(o.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],He.prototype,"capabilities",void 0),Object(o.a)([Object(T.a)("service","capabilities",["capabilities","currentVersion","serviceDataType"])],He.prototype,"readCapabilities",null),Object(o.a)([Object(l.b)({type:Number})],He.prototype,"compressionQuality",void 0),Object(o.a)([Object(f.a)("compressionQuality")],He.prototype,"writeCompressionQuality",null),Object(o.a)([Object(l.b)({type:Number})],He.prototype,"compressionTolerance",void 0),Object(o.a)([Object(f.a)("compressionTolerance")],He.prototype,"writeCompressionTolerance",null),Object(o.a)([Object(l.b)({json:{read:{source:"copyrightText"}}})],He.prototype,"copyright",void 0),Object(o.a)([Object(l.b)({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],He.prototype,"definitionExpression",void 0),Object(o.a)([Object(l.b)({readOnly:!0,constructOnly:!0})],He.prototype,"exportImageServiceParameters",void 0),Object(o.a)([Object(l.b)()],He.prototype,"rasterInfo",void 0),Object(o.a)([Object(l.b)({readOnly:!0,type:[G.a]})],He.prototype,"fields",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"fieldsIndex",null),Object(o.a)([Object(l.b)({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],He.prototype,"format",null),Object(o.a)([Object(T.a)("service","format",["serviceDataType"])],He.prototype,"readFormat",null),Object(o.a)([Object(l.b)({type:R.a})],He.prototype,"fullExtent",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"hasMultidimensions",void 0),Object(o.a)([Object(l.b)({json:{read:{source:"maxImageHeight"}}})],He.prototype,"imageMaxHeight",void 0),Object(o.a)([Object(l.b)({json:{read:{source:"maxImageWidth"}}})],He.prototype,"imageMaxWidth",void 0),Object(o.a)([Object(l.b)({type:String,json:{type:Ze.jsonValues,read:Ze.read,write:Ze.write}})],He.prototype,"interpolation",void 0),Object(o.a)([Object(l.b)()],He.prototype,"minScale",void 0),Object(o.a)([Object(T.a)("service","minScale")],He.prototype,"readMinScale",null),Object(o.a)([Object(l.b)()],He.prototype,"maxScale",void 0),Object(o.a)([Object(T.a)("service","maxScale")],He.prototype,"readMaxScale",null),Object(o.a)([Object(l.b)({type:we})],He.prototype,"mosaicRule",null),Object(o.a)([Object(T.a)("mosaicRule",["mosaicRule","defaultMosaicMethod"])],He.prototype,"readMosaicRule",null),Object(o.a)([Object(f.a)("mosaicRule")],He.prototype,"writeMosaicRule",null),Object(o.a)([Object(l.b)({readOnly:!0}),Object(M.a)("serviceRasterInfo.multidimensionalInfo")],He.prototype,"multidimensionalInfo",void 0),Object(o.a)([Object(l.b)({json:{type:c.a}})],He.prototype,"noData",void 0),Object(o.a)([Object(f.a)("noData")],He.prototype,"writeNoData",null),Object(o.a)([Object(l.b)({type:String,json:{type:Ke.jsonValues,read:Ke.read,write:Ke.write}})],He.prototype,"noDataInterpretation",void 0),Object(o.a)([Object(l.b)({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],He.prototype,"objectIdField",void 0),Object(o.a)([Object(T.a)("objectIdField")],He.prototype,"readObjectIdField",null),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"parsedUrl",null),Object(o.a)([Object(l.b)({readOnly:!0}),Object(M.a)("serviceRasterInfo.pixelSize.x")],He.prototype,"pixelSizeX",void 0),Object(o.a)([Object(l.b)({readOnly:!0}),Object(M.a)("serviceRasterInfo.pixelSize.y")],He.prototype,"pixelSizeY",void 0),Object(o.a)([Object(l.b)({type:Function})],He.prototype,"pixelFilter",void 0),Object(o.a)([Object(l.b)()],He.prototype,"raster",void 0),Object(o.a)([Object(l.b)()],He.prototype,"viewId",void 0),Object(o.a)([Object(l.b)({types:V.a,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:V.c,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e){return{enabled:e&&"vector-field"!==e.type}}}}}}})],He.prototype,"renderer",void 0),Object(o.a)([Object(T.a)("renderer")],He.prototype,"readRenderer",null),Object(o.a)([Object(f.a)("renderer")],He.prototype,"writeRenderer",null),Object(o.a)([Object(l.b)(b.h)],He.prototype,"opacity",void 0),Object(o.a)([Object(l.b)({readOnly:!0}),Object(M.a)("serviceRasterInfo.attributeTable")],He.prototype,"rasterAttributeTable",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"rasterFields",null),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"rasterFunctionInfos",void 0),Object(o.a)([Object(l.b)({type:ne})],He.prototype,"renderingRule",null),Object(o.a)([Object(T.a)("renderingRule",["renderingRule","rasterFunctionInfos"])],He.prototype,"readRenderingRule",null),Object(o.a)([Object(f.a)("renderingRule")],He.prototype,"writeRenderingRule",null),Object(o.a)([Object(l.b)()],He.prototype,"serviceDataType",void 0),Object(o.a)([Object(l.b)({readOnly:!0,type:E.a})],He.prototype,"spatialReference",void 0),Object(o.a)([Object(T.a)("spatialReference",["spatialReference","extent"])],He.prototype,"readSpatialReference",null),Object(o.a)([Object(l.b)({json:{type:Ye.jsonValues}})],He.prototype,"pixelType",void 0),Object(o.a)([Object(T.a)("pixelType")],He.prototype,"readPixelType",null),Object(o.a)([Object(f.a)("pixelType")],He.prototype,"writePixelType",null),Object(o.a)([Object(l.b)({constructOnly:!0,type:xe.a})],He.prototype,"serviceRasterInfo",void 0),Object(o.a)([Object(l.b)()],He.prototype,"sourceJSON",void 0),Object(o.a)([Object(l.b)(b.n)],He.prototype,"url",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],He.prototype,"version",void 0),Object(o.a)([Object(T.a)("version",["currentVersion","fields","timeInfo"])],He.prototype,"readVersion",null),He=Object(o.a)([Object(h.a)("esri.layers.mixins.ArcGISImageService")],He)))))))));Object(o.a)([Object(l.b)(b.e)],$e.prototype,"legendEnabled",void 0),Object(o.a)([Object(l.b)({type:["show","hide"]})],$e.prototype,"listMode",void 0),Object(o.a)([Object(l.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],$e.prototype,"isReference",void 0),Object(o.a)([Object(l.b)({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],$e.prototype,"operationalLayerType",void 0),Object(o.a)([Object(f.a)("web-map","operationalLayerType")],$e.prototype,"writeOperationalLayerType",null),Object(o.a)([Object(l.b)(b.j)],$e.prototype,"popupEnabled",void 0),Object(o.a)([Object(l.b)({type:d.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],$e.prototype,"popupTemplate",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],$e.prototype,"defaultPopupTemplate",null),Object(o.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],$e.prototype,"type",void 0),$e=Object(o.a)([Object(h.a)("esri.layers.ImageryLayer")],$e),t.default=$e},"/PL2":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return u}));var r=n("srIe"),i=n("4EHJ");function a(e,t){var n=t&&t.url&&t.url.path;if(e&&n&&(e=Object(i.z)(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){var r=Object(i.B)(e,t.portalItem.itemUrl);l.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return f(e,t&&t.portal)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return e;!Object(i.s)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);var r=Object(i.z)(e);if(t){var a=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(a){var o=f(a,t.portal);(r=Object(i.B)(f(r,t.portal),o,o))!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Object(i.h)(e,"".concat(t.urlKey,".").concat(t.customBaseUrl),t.portalHostname):e}(r,t&&t.portal),Object(i.s)(r)&&(r=Object(i.C)(r)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Object(i.s)(r)&&!Object(i.u)(r)&&0===n&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function s(e,t,n){return a(e,n)}function u(e,t,n,r){var i=o(e,r);void 0!==i&&(t[n]=i)}var c=/\/items\/([^\/]+)\/resources\//,l=/^\.\/resources\//;function h(e){var t=Object(r.k)(e)?e.match(c):null;return Object(r.k)(t)?t[1]:null}function f(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;var n="".concat(t.urlKey,".").concat(t.customBaseUrl);return Object(i.q)(i.g,"".concat(i.g.scheme,"://").concat(n))?Object(i.h)(e,t.portalHostname,n):Object(i.h)(e,n,t.portalHostname)}var p=Object.freeze({__proto__:null,fromJSON:a,toJSON:o,read:s,write:u,itemIdFromResourceUrl:h})},"/RTN":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("r88o"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),f=n("wdpY"),p=r=function(e){Kt(i,e);var t,n=Xt(i);function i(){return Wt(this,i),n.apply(this,arguments)}return Zt(i,[{key:"collectRequiredFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.a)(t,n,this.expression));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"clone",value:function(){return new r({expression:this.expression,title:this.title})}}]),i}(h.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"expression",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"title",void 0);var d,v=p=r=Object(i.a)([Object(c.a)("esri.layers.support.FeatureExpressionInfo")],p),y=n("gHbr"),b=Object(s.b)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),g=new s.a({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),m=d=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).offset=null,e}return Zt(n,[{key:"readFeatureExpressionInfo",value:function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}},{key:"writeFeatureExpressionInfo",value:function(e,t,n,r){t[n]=e.write(null,r),"0"===e.expression&&(t.featureExpression={value:0})}},{key:"mode",get:function(){var e=this.offset,t=this.featureExpressionInfo;return this._isOverridden("mode")?this._get("mode"):Object(a.k)(e)||t?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)}},{key:"unit",set:function(e){this._set("unit",e)}},{key:"write",value:function(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?Dt(en(n.prototype),"write",this).call(this,e,t):null}},{key:"clone",value:function(){return new d({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}}]),n}(h.a);Object(i.a)([Object(o.b)({type:v,json:{write:!0}})],m.prototype,"featureExpressionInfo",void 0),Object(i.a)([Object(u.a)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],m.prototype,"readFeatureExpressionInfo",null),Object(i.a)([Object(l.a)("featureExpressionInfo",{featureExpressionInfo:{type:v},"featureExpression.value":{type:[0]}})],m.prototype,"writeFeatureExpressionInfo",null),Object(i.a)([Object(o.b)({type:b.apiValues,nonNullable:!0,json:{type:b.jsonValues,read:b.read,write:{writer:b.write,isRequired:!0}}})],m.prototype,"mode",null),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],m.prototype,"offset",void 0),Object(i.a)([Object(o.b)({type:y.b,json:{type:String,read:g.read,write:g.write}})],m.prototype,"unit",null),m=d=Object(i.a)([Object(c.a)("esri.layers.support.ElevationInfo")],m),t.a=m},"/WmU":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("fXoL"),i=n("xgIS"),a=n("1G5W"),o=n("jH8C"),s=function(){var e=function(){function e(t){Wt(this,e),this.resizeBegin=new r.t,this.resizing=new r.t,this.resizeEnd=new r.t,this.element=t.nativeElement}return Zt(e,[{key:"ngAfterViewInit",value:function(){this.south&&this.createHandle("resize-handle-s"),this.east&&this.createHandle("resize-handle-e"),this.southEast&&this.createHandle("resize-handle-se");var e=window.getComputedStyle(this.element);this.minWidth=parseFloat(e.minWidth),this.maxWidth=parseFloat(e.maxWidth),this.minHeight=parseFloat(e.minHeight),this.maxHeight=parseFloat(e.maxHeight)}},{key:"ngOnDestroy",value:function(){this.destroySubscription()}},{key:"onMousedown",value:function(e){var t=this;if(Object(o.c)(e)){var n=e.target.classList,r=n.contains("resize-handle-s"),s=n.contains("resize-handle-e"),u=n.contains("resize-handle-se"),c=Object(o.b)(e),l=this.element.clientWidth,h=this.element.clientHeight,f=c.screenX,p=c.screenY,d=e.type.startsWith("touch"),v=d?"touchmove":"mousemove",y=d?"touchend":"mouseup";if(r||s||u){this.initResize(e,r,s,u);var b=Object(i.a)(document,y);this.subscription=b.subscribe((function(e){return t.onMouseup(e)}));var g=Object(i.a)(document,v).pipe(Object(a.a)(b)).subscribe((function(e){return t.move(e,l,h,f,p)}));this.subscription.add(g)}}}},{key:"move",value:function(e,t,n,r,i){var a=Object(o.b)(e),s=a.screenY-i;this.newWidth=t+(a.screenX-r),this.newHeight=n+s,this.resizeWidth(a),this.resizeHeight(a)}},{key:"onMouseup",value:function(e){this.endResize(e),this.destroySubscription()}},{key:"destroySubscription",value:function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}},{key:"createHandle",value:function(e){var t=document.createElement("span");t.className=e,this.element.appendChild(t)}},{key:"initResize",value:function(e,t,n,r){t&&(this.resizingS=!0),n&&(this.resizingE=!0),r&&(this.resizingSE=!0),this.element.classList.add("resizing"),this.newWidth=this.element.clientWidth,this.newHeight=this.element.clientHeight,e.stopPropagation(),this.resizeBegin.emit()}},{key:"endResize",value:function(e){this.resizingS=!1,this.resizingE=!1,this.resizingSE=!1,this.element.classList.remove("resizing"),this.resizeEnd.emit({event:Object(o.b)(e),width:this.newWidth,height:this.newHeight})}},{key:"resizeWidth",value:function(e){(this.resizingSE||this.resizingE)&&(!this.minWidth||this.newWidth>=this.minWidth)&&(!this.maxWidth||this.newWidth<=this.maxWidth)&&(this.ghost||(this.element.style.width=this.newWidth+"px"),this.resizing.emit({event:e,width:this.newWidth,height:this.newHeight,direction:"horizontal"}))}},{key:"resizeHeight",value:function(e){(this.resizingSE||this.resizingS)&&(!this.minHeight||this.newHeight>=this.minHeight)&&(!this.maxHeight||this.newHeight<=this.maxHeight)&&(this.ghost||(this.element.style.height=this.newHeight+"px"),this.resizing.emit({event:e,width:this.newWidth,height:this.newHeight,direction:"vertical"}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(r.r))},e.\u0275dir=r.ac({type:e,selectors:[["","appResizable",""]],hostBindings:function(e,t){1&e&&r.rc("mousedown",(function(e){return t.onMousedown(e)}))("touchstart",(function(e){return t.onMousedown(e)}))},inputs:{south:"south",east:"east",southEast:"southEast",ghost:"ghost"},outputs:{resizeBegin:"resizeBegin",resizing:"resizing",resizeEnd:"resizeEnd"}}),e}()},"/quj":function(e,t,n){"use strict";function r(e){return function(t){t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var n=t._delegatedEventNames,r=Array.isArray(e)?e:e.split(",").map((function(e){return e.trim()}));n.push.apply(n,Bt(r))}}n.d(t,"a",(function(){return r}))},"/rov":function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n("wSAH");var r=n("xkkJ"),i=n("nvBr"),a=n("Cy1f"),o=n("5DEt"),s=n("yftL"),u=n("ZwYu"),c=n("ZadS"),l=n("jxyb"),h=n("srIe"),f=n("qRWG"),p=n("r0DZ"),d=n("r+FG"),v=n("M0lq"),y=n("dXfX"),b=n("XvKw"),g=n("yvcr"),m=n("hrr/"),w=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._handles=new p.a,r._location=Object(a.e)(),r._direction=Object(a.g)(1,0,0),r._width=1,r._offset=1,r._length=18,r._color=Object(b.c)(1,0,1,1),r._renderOccluded=4,r.applyProps(e),r}return Zt(n,[{key:"location",get:function(){return this._location},set:function(e){Object(o.p)(this._location,e)||(Object(o.j)(this._location,e),this.updateGeometry())}},{key:"direction",get:function(){return this._direction},set:function(e){Object(o.p)(this._direction,e)||(Object(o.j)(this._direction,e),this.updateGeometry())}},{key:"setDirectionFromPoints",value:function(e,t){Object(o.q)(this._direction,Object(o.i)(this._direction,t,e)),this.updateGeometry()}},{key:"width",get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e,this.updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(e){e!==this._offset&&(this._offset=e,this.updateGeometry())}},{key:"length",get:function(){return this._length},set:function(e){e!==this._length&&(this._length=e,this.updateGeometry())}},{key:"color",get:function(){return this._color},set:function(e){Object(y.g)(e,this._color)||(Object(y.c)(this._color,e),this.updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"createExternalResources",value:function(){var e=this,t=new m.a(this.materialParameters);this._handles.add(this.view.state.watch("camera",(function(){e.updateGeometry()}))),this._externalResources={material:t}}},{key:"destroyExternalResources",value:function(){this._handles.removeAll(),this._externalResources=null}},{key:"createGeometries",value:function(e){var t=g.a.createPolylineGeometry([Object(a.e)(),Object(a.e)()]),n=g.a.createPolylineGeometry([Object(a.e)(),Object(a.e)()]),r=Object(h.q)(this._externalResources).material;e.addGeometry(t,r,d.a),e.addGeometry(n,r,d.a),this.updateVertices(e)}},{key:"forEachExternalMaterial",value:function(e){Object(h.k)(this._externalResources)&&e(this._externalResources.material)}},{key:"updateMaterial",value:function(){Object(h.j)(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}},{key:"updateGeometry",value:function(){var e=this.object;Object(h.j)(e)||this.updateVertices(e)}},{key:"updateVertices",value:function(e){var t=this.view.state.camera;t.projectToScreen(this.location,j),Object(o.e)(O,this.location,this.direction),t.projectToScreen(O,_),Object(v.e)(_,Object(v.d)(_,_,j)),this.updateVertexAttributes(t,e,0,j,_,1),this.updateVertexAttributes(t,e,1,j,_,-1)}},{key:"updateVertexAttributes",value:function(e,t,n,r,i,a){var o=t.geometryRecords[n].geometry.getMutableAttribute("position").data,s=Object(v.a)(x,Object(v.r)(x,i[1]*a,i[0]*-a),this.offset+this.width/2),u=Object(v.h)(k,Object(v.h)(k,Object(v.h)(k,r,Object(v.a)(k,i,this.length/2)),s),s),c=Object(v.h)(S,u,Object(v.a)(S,i,-this.length));e.unprojectFromScreen(u,O),o[0]=O[0],o[1]=O[1],o[2]=O[2],e.unprojectFromScreen(c,O),o[3]=O[0],o[4]=O[1],o[5]=O[2],t.geometryVertexAttrsUpdated(n)}}]),n}(n("X668").a),O=Object(a.e)(),j=Object(f.g)(),_=Object(f.g)(),x=Object(f.g)(),k=Object(f.g)(),S=Object(f.g)(),M=n("ACyv"),I=n("RaGr"),T=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"visualizeIntersectionPoint",value:function(e,t){var n=t.coordinateHelper,a=t.elevationInfo,o=t.view;return Object(r.a)(new M.a({view:o,primitive:"circle",geometry:n.createPoint(e.intersectionPoint),elevationInfo:a,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:i.a.toUnitRGBA(s.a.orange),pixelSnappingEnabled:!1}))}},{key:"visualizePoint",value:function(e,t){var n=t.coordinateHelper,a=t.elevationInfo,o=t.view;return Object(r.a)(new M.a({view:o,primitive:"circle",geometry:n.createPoint(e.point),elevationInfo:a,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:i.a.toUnitRGBA(s.a.orange),pixelSnappingEnabled:!1}))}},{key:"visualizeLine",value:function(e,t){var n=t.coordinateHelper,i=t.elevationInfo,a=t.view;return Object(r.a)(this.createLineSegmentHintFromMap(e.type,e.lineStart,e.lineEnd,n,i,a,e.fadeLeft,e.fadeRight))}},{key:"visualizeParallelSign",value:function(e,t){var n=t.coordinateHelper,a=t.elevationInfo,c=t.view,l=Object(u.a)(e.lineStart,n,a,t.view),h=Object(u.a)(e.lineEnd,n,a,t.view),f=Object(o.h)(h,l,h,.5),p=new w({view:c,attached:!1,offset:s.a.parallelLineHintOffset,length:s.a.parallelLineHintLength,width:s.a.parallelLineHintWidth,color:i.a.toUnitRGBA(s.a.orange),location:f,renderOccluded:16});return p.setDirectionFromPoints(l,f),p.attached=!0,Object(r.a)(p)}},{key:"visualizeRightAngleQuad",value:function(e,t){var n=t.coordinateHelper,a=t.elevationInfo,o=t.view;return Object(r.a)(new I.a({view:o,attached:!0,color:i.a.toUnitRGBA(s.a.orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:i.a.toUnitRGBA(s.a.orange),outlineSize:s.a.rightAngleHintOutlineSize,size:s.a.rightAngleHintSize,geometry:{previous:Object(u.a)(e.previousVertex,n,a,o),center:Object(u.a)(e.centerVertex,n,a,o),next:Object(u.a)(e.nextVertex,n,a,o)}}))}},{key:"createLineSegmentHintFromMap",value:function(e,t,n,r,i,o){var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=Object(a.e)(),h=Object(a.e)();return Object(u.c)(t,n,r,i,o,l,h),this.createLineSegmentHint(e,o,l,h,s,c)}},{key:"createLineSegmentHint",value:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=new l.a({view:t,extensionType:3,start:n,end:r,color:i.a.toUnitRGBA(s.a.orange),renderOccluded:16});switch(e){case 0:u.width=s.a.lineHintWidthTarget,u.fadedExtensions={start:0,end:s.a.lineHintFadedExtensions};break;case 2:u.width=s.a.lineHintWidthReference,u.fadedExtensions={start:0,end:0};break;case 1:u.width=s.a.lineHintWidthReference,u.fadedExtensions={start:a?s.a.lineHintFadedExtensions:0,end:o?s.a.lineHintFadedExtensions:0}}return u.attached=!0,u}}]),n}(c.a)},"/rtH":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("fXoL"),i=n("YZ0+"),a=n("U/i9"),o=n("VcYX"),s=n("TYL1"),u=n("tk/3"),c=n("mKlZ"),l=n("ofXK"),h=n("8WOb"),f=n("3Pt+");function p(e,t){if(1&e&&(r.kc(0,"span",17),r.Tc(1),r.jc()),2&e){var n=r.vc();r.Tb(1),r.Vc(" ",n.state.basemap.label,"\n")}}var d=function(e){return{selected:e}};function v(e,t){if(1&e){var n=r.lc();r.kc(0,"div",18),r.rc("click",(function(){r.Lc(n);var e=t.$implicit;return r.vc().setBasemap(e)})),r.gc(1,"img",19),r.kc(2,"span"),r.Tc(3),r.jc(),r.jc()}if(2&e){var i=t.$implicit,a=r.vc();r.Bc("ngClass",r.Ec(4,d,i===a.state.basemap)),r.Tb(1),r.Cc("src","assets/icons/basemap/",i.image,".jpg",r.Nc),r.Ub("aria-label",i.image),r.Tb(2),r.Vc(" ",i.label,"")}}function y(e,t){1&e&&(r.kc(0,"span"),r.Tc(1," Texas High Resolution Imagery"),r.jc())}function b(e,t){if(1&e&&(r.kc(0,"option",22),r.Tc(1),r.jc()),2&e){var n=t.$implicit;r.Bc("value",n),r.Tb(1),r.Vc(" ",n," ")}}function g(e,t){if(1&e){var n=r.lc();r.kc(0,"select",20),r.rc("ngModelChange",(function(e){return r.Lc(n),r.vc().selectedTexasBasemap=e}))("ngModelChange",(function(){return r.Lc(n),r.vc().changeTexasBasemap(!1)})),r.Sc(1,b,2,2,"option",21),r.jc()}if(2&e){var i=r.vc();r.Bc("ngModel",i.selectedTexasBasemap),r.Tb(1),r.Bc("ngForOf",i.texasBasemaps)}}function m(e,t){if(1&e&&(r.kc(0,"span",23),r.Tc(1),r.wc(2,"date"),r.jc()),2&e){var n=r.vc();r.Tb(1),r.Vc("Imagery updated on: ",r.yc(2,1,n.updatedDate,"longDate"),"")}}function w(e,t){1&e&&(r.kc(0,"div",24),r.gc(1,"div",25),r.kc(2,"span"),r.Tc(3," Loading.. "),r.jc(),r.jc())}var O=function(e){return{selectedBtn:e}},j=n("N5XI"),_=function(){var e=function(){function e(t,n){var r=this;Wt(this,e),this.http=t,this.widgetToggleService=n,this.texasImageryVisible=!1,this.loading=!1,this.showBasemapLabel=!0,this.texasBasemaps=s.b,this.texasBasemapsDict=s.c,this.googleWMSlayer=s.a,this.basemaps=[{label:"Bing Hybrid",value:"bing",image:"bing"},{label:"Aerial",value:"satellite",image:"aerial"},{label:"Streets",value:"streets",image:"streets"},{label:"Topographic",value:"topo",image:"topo"},{label:"USA Topo",value:"usa-topo",image:"usa-topo"},{label:"USGS",value:"usgs",image:"usgs"}],this.state={open:!1,basemap:this.basemaps[0]},this.selectedTexasBasemap=this.texasBasemaps[0],this.usa_topo=this.createBasemap(new a.default({url:"https://services.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer",id:"usa-topo"}),"usa-topo"),this.usgs=this.createBasemap(new a.default({url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer"}),"usgs"),this.google=this.createBasemap(this.googleWMSlayer,"texas"),this.bing=Object(o.a)(),this._basemapObj={bing:this.bing,"usa-topo":this.usa_topo,usgs:this.usgs,texas:this.google},this.subscriptions$=this.widgetToggleService.widgetViewChanged.subscribe((function(e){r.showBasemapLabel=!0,"basemap"!==e.name&&r.state.open&&r.toggle(),"swipe"===e.name&&e.visible&&(r.showBasemapLabel=!1)}))}return Zt(e,[{key:"toggle",value:function(){this.widgetToggleService.changeWidgetView("basemap",this.state.open),this.state.open=!this.state.open}},{key:"toggleTexasImagery",value:function(){this.texasImageryVisible=!this.texasImageryVisible,this.changeTexasBasemap(!this.texasImageryVisible)}},{key:"changeTexasBasemap",value:function(e){var t=this;this.mapView.map.basemap.baseLayers.forEach((function(e){t.texasBasemaps.includes(e.id)&&t.mapView.map.basemap.baseLayers.remove(e)})),e||(this.mapView.map.basemap.baseLayers.add(this.texasBasemapsDict[this.selectedTexasBasemap]),this.basemapObject=this.mapView.map.basemap,this.loadingBaseLayer=this.mapView.map.basemap.baseLayers.getItemAt(1))}},{key:"createBasemap",value:function(e,t){return new i.default({baseLayers:[e],id:t})}},{key:"setBasemap",value:function(e){this.state.basemap!==e&&(this.state.basemap=e,this.texasImageryVisible=!1,this.basemapObject=["satellite","topo","streets"].includes(e.value)?i.default.fromId(e.value):this._basemapObj[e.value],this.basemapObject.load(),this.mapView.map.basemap=this.basemapObject,this.loadingBaseLayer=this.mapView.map.basemap.baseLayers.getItemAt(0),this.updateImageryDate())}},{key:"updateImageryDate",value:function(){var e=this;if("satellite"===this.state.basemap.value){var t={returnGeometry:!1,returnDistinctValues:!1,outFields:"SRC_DATE2",spatialRel:"esriSpatialRelIntersects",f:"json",geometryType:"esriGeometryPoint",inSR:4326,geometry:JSON.stringify({x:this.mapView.center.longitude,y:this.mapView.center.latitude})};this.http.get("https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/0/query",{params:t}).subscribe((function(t){e.updatedDate=t.features.length>0?t.features[0].attributes.SRC_DATE2:null}))}else this.updatedDate=void 0}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapViewListener=j.whenTrue(this.mapView,"stationary",(function(){e.mapView.center&&e.mapView.scale<4e6&&e.updateImageryDate()})),this.layerViewEvent=this.mapView.on("layerview-create",(function(t){e.loading=!0,"loaded"===t.layer.loadStatus&&(e.loading=!1)}))}},{key:"ngOnDestroy",value:function(){this.mapViewListener.remove(),this.layerViewEvent.remove(),this.subscriptions$.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(u.a),r.fc(c.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["app-basemap-widget"]],inputs:{mapView:"mapView"},decls:18,vars:16,consts:[["class","basemapLabel hidden md:block",4,"ngIf"],["title","Basemaps",1,"basemapToggleBtn",3,"ngClass","click"],["src","assets/icons/basemaps.png","aria-label","basemap gallery"],[1,"basemapBody","basemap-open",3,"hidden"],[1,"widgetTitle"],[1,"widgetTitleText"],[3,"header","itemName","fillColor"],[1,"widgetCloseBtn","ui-icon","dt-icon-close",3,"click"],[2,"flex","1"],[1,"basemapgrid"],["class","basemapcard",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"basemapcard","texasimagery",3,"ngClass"],["src","assets/icons/basemap/texas.jpg","aria-label","texas imagery",3,"click"],[4,"ngIf"],["aria-label","Basemap",3,"ngModel","ngModelChange",4,"ngIf"],["class","imageryDate",4,"ngIf"],["class","loadingContainer",4,"ngIf"],[1,"basemapLabel","hidden","md:block"],[1,"basemapcard",3,"ngClass","click"],["aria-label","im",3,"src"],["aria-label","Basemap",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"imageryDate"],[1,"loadingContainer"],[1,"loader"]],template:function(e,t){1&e&&(r.Sc(0,p,2,1,"span",0),r.kc(1,"button",1),r.rc("click",(function(){return t.toggle()})),r.gc(2,"img",2),r.jc(),r.kc(3,"div",3),r.kc(4,"div",4),r.kc(5,"span",5),r.Tc(6,"Basemaps"),r.jc(),r.gc(7,"app-help-button",6),r.kc(8,"i",7),r.rc("click",(function(){return t.toggle()})),r.jc(),r.jc(),r.kc(9,"div",8),r.kc(10,"div",9),r.Sc(11,v,4,6,"div",10),r.jc(),r.kc(12,"div",11),r.kc(13,"img",12),r.rc("click",(function(){return t.toggleTexasImagery()})),r.jc(),r.Sc(14,y,2,0,"span",13),r.Sc(15,g,2,2,"select",14),r.jc(),r.Sc(16,m,3,4,"span",15),r.Sc(17,w,4,0,"div",16),r.jc(),r.jc()),2&e&&(r.Bc("ngIf",t.showBasemapLabel),r.Tb(1),r.Bc("ngClass",r.Ec(12,O,t.state.open)),r.Tb(2),r.Bc("hidden",!t.state.open),r.Tb(4),r.Bc("header","Basemaps")("itemName","basemaps")("fillColor","white"),r.Tb(4),r.Bc("ngForOf",t.basemaps),r.Tb(1),r.Bc("ngClass",r.Ec(14,d,t.texasImageryVisible)),r.Tb(2),r.Bc("ngIf",!t.texasImageryVisible),r.Tb(1),r.Bc("ngIf",t.texasImageryVisible),r.Tb(1),r.Bc("ngIf",t.updatedDate),r.Tb(1),r.Bc("ngIf",t.loading))},directives:[l.m,l.k,h.a,l.l,f.s,f.j,f.m,f.n,f.u],pipes:[l.e],styles:[".basemapContainer[_ngcontent-%COMP%]{position:absolute;right:15px;top:1em;background:grey}.basemapContainer.basemap-open[_ngcontent-%COMP%]{background:grey;width:24em;height:24em;overflow:auto}.basemapToggleBtn[_ngcontent-%COMP%]{position:absolute;top:1em;right:15px;height:var(--map-button-height);width:var(--map-button-width)}.basemapToggleBtn.selectedBtn[_ngcontent-%COMP%]{box-sizing:border-box;border:2px solid #0ff}.basemapBody[_ngcontent-%COMP%]{position:absolute;top:4em;right:15px;height:27em;width:25em;background:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:0 0 10px rgba(0,0,0,.611764705882353);z-index:1}.basemapLabel[_ngcontent-%COMP%]{right:4em;position:absolute;background:#353535;color:#fff;top:1.4em;padding:.2em .5em}.basemapcard[_ngcontent-%COMP%]{width:7em;display:flex;flex-direction:column;height:6em;justify-content:center;align-items:center}title[_ngcontent-%COMP%]{display:block}.basemapcard.selected[_ngcontent-%COMP%]{font-weight:700}.basemapgrid[_ngcontent-%COMP%]{display:inline-grid;grid-template-columns:auto auto auto;grid-gap:1em;margin:1em 1em 0}.basemapcard[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{box-shadow:0 0 9px #000;border:1px solid #fff;width:6em}.basemapcard.selected[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{box-shadow:0 0 9px #000;border:2px solid #000}.basemapcard[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:13px;padding-top:4px}select[_ngcontent-%COMP%]{display:block;margin:auto;width:10em;height:2em;border:1px solid #000;box-shadow:0 0 1px}.loader[_ngcontent-%COMP%]{border-radius:50%;border:6px solid #f3f3f3;border-top-color:#3498db;width:30px;height:30px;-webkit-animation:spin .5s linear infinite;animation:spin .5s linear infinite;display:inline-block}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.loadingContainer[_ngcontent-%COMP%]{position:absolute;bottom:1em;left:1em;display:flex;justify-content:center;align-items:center}.loadingContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding-left:5px}.texasimagery[_ngcontent-%COMP%]{height:8em;width:12em;display:block;margin:1em auto 0;text-align:center}.texasimagery[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}.texasimagery[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{margin-top:10px}.imageryDate[_ngcontent-%COMP%]{float:right;padding-right:10px}"]}),e}()},"/uz8":function(e,t,n){"use strict";var r=n("pO5D"),i=n("wSAH"),a=n("srIe"),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("8prj")),c=n("Ykwf"),l=n("xk++"),h=n("n6Nx"),f=n("tSEa"),p=n("u3Ia"),d=n("2LKE"),v=n("6fyR"),y=n("OvF4");n("4GrV");var b=n("bJda"),g=n("ZlUD"),m=n("iRQj");function w(e,t){return t}function O(e,t,n,r){switch(n){case 0:return k(e,t+r,0);case 1:return"lowerLeft"===e.originPosition?k(e,t+r,1):function(e,t,n){var r=e.translate,i=e.scale;return r[1]-t*i[1]}(e,t+r)}}function j(e,t,n,r){switch(n){case 2:return k(e,t,2);default:return O(e,t,n,r)}}function _(e,t,n,r){switch(n){case 2:return k(e,t,3);default:return O(e,t,n,r)}}function x(e,t,n,r){switch(n){case 3:return k(e,t,3);default:return j(e,t,n,r)}}function k(e,t,n){var r=e.translate,i=e.scale;return r[n]+t*i[n]}var S=function(){function e(t){Wt(this,e),this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=w,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return Zt(e,[{key:"createFeatureResult",value:function(){return{fields:[],features:[]}}},{key:"finishFeatureResult",value:function(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=Object(m.a)(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t){var n,r=Vt(e.features);try{for(r.s();!(n=r.n()).done;){t(n.value.geometry)}}catch(i){r.e(i)}finally{r.f()}}}}},{key:"createSpatialReference",value:function(){return{}}},{key:"addField",value:function(e,t){e.fields.push(t);var n=e.fields.map((function(e){return e.name}));this.AttributesConstructor=function(){var e,t=Vt(n);try{for(t.s();!(e=t.n()).done;){this[e.value]=null}}catch(r){t.e(r)}finally{t.f()}}}},{key:"addFeature",value:function(e,t){e.features.push(t)}},{key:"prepareFeatures",value:function(e){var t=this;switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=function(e,n,r){return t.addCoordinatePoint(e,n,r)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"esriGeometryPolygon":this.addCoordinate=function(e,n,r){return t.addCoordinatePolygon(e,n,r)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"esriGeometryPolyline":this.addCoordinate=function(e,n,r){return t.addCoordinatePolyline(e,n,r)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"esriGeometryMultipoint":this.addCoordinate=function(e,n,r){return t.addCoordinateMultipoint(e,n,r)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:Object(b.a)(e.geometryType)}}},{key:"createFeature",value:function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}},{key:"allocateCoordinates",value:function(){}},{key:"addLength",value:function(e,t,n){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}},{key:"addQueryGeometry",value:function(e,t){var n=t.queryGeometry,r=t.queryGeometryType,i=Object(g.z)(n.clone(),n,!1,!1,this.transform),a=Object(g.k)(i,r,!1,!1);e.queryGeometryType=r,e.queryGeometry=Nt({},a)}},{key:"createPointGeometry",value:function(e){var t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}},{key:"addCoordinatePoint",value:function(e,t,n){switch(t=this.applyTransform(this.transform,t,n,0),n){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}},{key:"transformPathLikeValue",value:function(e,t){var n=0;return t<=1&&(n=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,n)}},{key:"addCoordinatePolyline",value:function(e,t,n){this.dehydratedAddPointsCoordinate(e.paths,t,n)}},{key:"addCoordinatePolygon",value:function(e,t,n){this.dehydratedAddPointsCoordinate(e.rings,t,n)}},{key:"addCoordinateMultipoint",value:function(e,t,n){0===n&&e.points.push([]);var r=this.transformPathLikeValue(t,n);e.points[e.points.length-1].push(r)}},{key:"createPolygonGeometry",value:function(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"createPolylineGeometry",value:function(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"createMultipointGeometry",value:function(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"dehydratedAddPointsCoordinate",value:function(e,t,n){0===n&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var r=this.transformPathLikeValue(t,n),i=e[e.length-1];0===n&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),i.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=r}},{key:"deriveApplyTransform",value:function(e){var t=e.hasZ,n=e.hasM;return t&&n?x:t?j:n?_:O}}]),e}(),M=n("Lqtk"),I=n("vuI0");function T(e,t){var n=e.toJSON();return n.objectIds&&(n.objectIds=n.objectIds.join(",")),n.orderByFields&&(n.orderByFields=n.orderByFields.join(",")),!n.outFields||null!=t&&t.returnCountOnly?delete n.outFields:n.outFields=-1!==n.outFields.indexOf("*")?"*":n.outFields.join(","),n.outSpatialReference&&(n.outSR=n.outSR.wkid||JSON.stringify(n.outSR.toJSON()),delete n.outSpatialReference),n.dynamicDataSource&&(n.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n}function A(e,t){return C.apply(this,arguments)}function C(){return(C=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},i=o.length>3?o[3]:void 0,a=Object(I.a)(Nt(Nt(Nt({},t.query),{},{f:"json"},i),T(n,i))),e.abrupt("return",Object(M.default)(t.path+"/queryRelatedRecords",Nt(Nt({},r),{},{query:Nt(Nt({},r.query),a)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e)).dynamicDataSource=null,t.format="json",t.gdbVersion=null,t.sourceSpatialReference=null,t}return Zt(r,[{key:"execute",value:function(e,t){return this.executeJSON(e,t).then((function(e){return u.default.fromJSON(e)}))}},{key:"executeJSON",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,u,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Nt(Nt({},this.requestOptions),n),o=this._normalizeQuery(t),s=null!=(null==(r=t.outStatistics)?void 0:r[0]),u=Object(i.a)("featurelayer-pbf-statistics"),c=!s||u,"pbf"!==this.format||!c){e.next=13;break}return e.prev=2,e.next=5,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.c)(t),a=Nt({},r),o=l.a.from(n),s=!o.quantizationParameters,e.next=6,Object(v.executeQueryPBF)(i,o,new S({sourceSpatialReference:o.sourceSpatialReference,applyTransform:s}),a);case 6:return u=e.sent,c=u.data,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this.url,o,a);case 5:h=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),"query:parsing-pbf"===e.t0.name){e.next=12;break}throw e.t0;case 12:this.format="json";case 13:if(e.t1="json"!==this.format&&c,e.t1){e.next=18;break}return e.next=17,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.c)(t),a=Nt({},r),o=l.a.from(n),e.next=5,Object(v.executeQuery)(i,o,o.sourceSpatialReference,a);case 5:return s=e.sent,u=s.data,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this.url,o,a);case 17:h=e.sent;case 18:return this._normalizeFields(h.fields),e.abrupt("return",h);case 20:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,n){return t.apply(this,arguments)})},{key:"executeForCount",value:function(e,t){var n,r=Nt(Nt({},this.requestOptions),t),i=this._normalizeQuery(e);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.c)(t),e.abrupt("return",Object(v.executeQueryForCount)(i,l.a.from(n),Nt({},r)).then((function(e){return e.data.count})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,i,r)}},{key:"executeForExtent",value:function(e,t){var n,r=Nt(Nt({},this.requestOptions),t),i=this._normalizeQuery(e);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.c)(t),e.abrupt("return",Object(v.executeQueryForExtent)(i,l.a.from(n),Nt({},r)).then((function(e){return{count:e.data.count,extent:y.a.fromJSON(e.data.extent)}})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,i,r)}},{key:"executeForIds",value:function(e,t){var n,r=Nt(Nt({},this.requestOptions),t),i=this._normalizeQuery(e);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.c)(t),e.abrupt("return",Object(v.executeQueryForIds)(i,l.a.from(n),Nt({},r)).then((function(e){return e.data.objectIds})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,i,r)}},{key:"executeRelationshipQuery",value:function(e,t){e=h.a.from(e);var n,r=Nt(Nt({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),(n=Ut(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=h.a.from(n),function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n,r);case 2:i=e.sent,a=i.data,o=a.geometryType,s=a.spatialReference,u={},c=Vt(a.relatedRecordGroups);try{for(c.s();!(l=c.n()).done;)if(h=l.value,f={fields:void 0,objectIdFieldName:void 0,geometryType:o,spatialReference:s,hasZ:!!a.hasZ,hasM:!!a.hasM,features:h.relatedRecords},null!=h.objectId)u[h.objectId]=f;else for(p in h)h.hasOwnProperty(p)&&"relatedRecords"!==p&&(u[h[p]]=f)}catch(d){c.e(d)}finally{c.f()}return e.abrupt("return",Nt(Nt({},i),{},{data:u}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(Object(p.c)(t),n,r).then((function(e){var t=e.data,n={};return Object.keys(t).forEach((function(e){return n[e]=u.default.fromJSON(t[e])})),n}))));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}},{key:"executeRelationshipQueryForCount",value:function(e,t){e=h.a.from(e);var n,r=Nt(Nt({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),(n=Ut(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=h.a.from(n),function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n,r,{returnCountOnly:!0});case 2:i=e.sent,a=i.data,o={},s=Vt(a.relatedRecordGroups);try{for(s.s();!(u=s.n()).done;)null!=(c=u.value).objectId&&(o[c.objectId]=c.count)}catch(l){s.e(l)}finally{s.f()}return e.abrupt("return",Nt(Nt({},i),{},{data:o}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(Object(p.c)(t),n,Nt({},r)).then((function(e){return e.data}))));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}},{key:"executeAttachmentQuery",value:function(e,t){var n,r=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.c)(t),e.abrupt("return",Object(d.a)(i,f.a.from(n),Nt({},r)).then((function(e){return Object(d.b)(e.data.attachmentGroups,i.path)})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}},{key:"_normalizeQuery",value:function(e){var t=l.a.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,!this.gdbVersion&&!this.dynamicDataSource)return t;var n=t===e?t.clone():t;return n.gdbVersion=e.gdbVersion||this.gdbVersion,n.dynamicDataSource=e.dynamicDataSource?c.a.from(e.dynamicDataSource):this.dynamicDataSource,n}},{key:"_normalizeFields",value:function(e){if(Object(a.k)(this.fieldsIndex)&&Object(a.k)(e)){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.fieldsIndex.get(r.name);i&&Object.assign(r,i.toJSON())}}catch(o){n.e(o)}finally{n.f()}}}}]),r}(n("kglp").a);Object(r.a)([Object(o.b)({type:c.a})],E.prototype,"dynamicDataSource",void 0),Object(r.a)([Object(o.b)()],E.prototype,"fieldsIndex",void 0),Object(r.a)([Object(o.b)()],E.prototype,"format",void 0),Object(r.a)([Object(o.b)()],E.prototype,"gdbVersion",void 0),Object(r.a)([Object(o.b)()],E.prototype,"sourceSpatialReference",void 0),E=Object(r.a)([Object(s.a)("esri.tasks.QueryTask")],E),t.a=E},"00eo":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("pO5D"),i=n("srIe"),a=n("nZ3f"),o=n("WbKI"),s=n("04ZG"),u=n("WBXD"),c=n("nvss"),l=n("/CmD"),h=n("r0DZ"),f=n("N5XI"),p=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new h.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Zt(n,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0!=(1&i),o=++this.handleId;a||this.installSyncUpdatingWatch(e,t,o);var s=0!=(2&i)?Object(f.init)(e,t,n,a):e.watch(t,n,a);return this.handles.add(s,o),{remove:function(){r.handles.remove(o)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0!=(2&i),o=++this.handleId;return this.handles.add([Object(f.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(f.on)(e,t,"change",n,a?function(e){n({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:function(){r.handles.remove(o)}}}},{key:"addOnCollectionChange",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0!=(2&r),a=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],a),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){n.handles.remove(a)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(i.j)(e))return e;var n=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(d)||t._set("updating",!1))}},n),this.pendingPromises.add(e),this._set("updating",!0);var r=function(){return t.handles.remove(n)};return e.then(r,r),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,n){var r=this.createSyncUpdatingCallback(),i=Object(c.a)((function(){return Object(a.c)(e,t)}),r);return this.handles.add(i,n),i}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(d),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(u.b)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(d))})),d)}}}]),n}(l.a);Object(r.a)([Object(o.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(r.a)([Object(s.a)("esri.views.support.WatchUpdatingTracking")],p);var d=-42},"024p":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("1/dN"),i=n("fFEv"),a=n("NbNv"),o=n("dDjh"),s=n("hnWO"),u=n("pO5D"),c=n("w6Td"),l=n("ypgp"),h=n("2jVe"),f=n("+h6m"),p=n("jjdI"),d=n("GJyJ"),v=n("jpeq"),y=n("0nJL"),b=n("agdK"),g=n("xtdb"),m=n("h7dw"),w=n("GWL5"),O=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build({output:r.output,OITEnabled:0===r.transparencyPassType,attributeColor:r.vertexColors,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new p.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),f.a)}},{key:"bindPass",value:function(e,t,n){v.a.bindProjectionMatrix(this.program,n.camera.projectionMatrix),this.program.setUniform4fv("eColor",t.color),4===this.configuration.output&&b.a.bindOutputHighlight(e,this.program,n),(1===this.configuration.output||n.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",n.camera.nearFar),n.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",n.inverseViewport),Object(g.a)(this.program,e,n))}},{key:"bindDraw",value:function(e){v.a.bindView(this.program,e),y.a.bindUniformsWithOrigin(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e,t){var n=this.configuration,r=3===e,i=2===e;return Object(d.d)({blending:0!==n.output&&7!==n.output||!n.transparent?null:r?o.f:Object(o.a)(e),culling:function(e){return 0!==e&&{face:1===e?1028:1029,mode:2305}}(n.cullFace),depthTest:{func:Object(o.b)(e)},depthWrite:r||i?n.writeDepth&&d.c:null,colorWrite:d.b,stencilWrite:n.sceneHasOcludees?m.h:null,stencilTest:n.sceneHasOcludees?t?m.d:m.c:null,polygonOffset:r||i?n.polygonOffset&&j:Object(o.g)(n.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipelineState",value:function(e){return e?this._occludeePipelineState:this.pipeline}}]),n}(l.a);O.shader=new c.a(w.a,(function(){return n.e(31).then(n.bind(null,"hk8n"))}));var j={factor:1,units:1},_=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).output=0,e.cullFace=0,e.slicePlaneEnabled=!1,e.vertexColors=!1,e.transparent=!1,e.polygonOffset=!1,e.enableOffset=!0,e.writeDepth=!0,e.sceneHasOcludees=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!0,e}return n}(h.a);Object(u.a)([Object(h.b)({count:8})],_.prototype,"output",void 0),Object(u.a)([Object(h.b)({count:3})],_.prototype,"cullFace",void 0),Object(u.a)([Object(h.b)()],_.prototype,"slicePlaneEnabled",void 0),Object(u.a)([Object(h.b)()],_.prototype,"vertexColors",void 0),Object(u.a)([Object(h.b)()],_.prototype,"transparent",void 0),Object(u.a)([Object(h.b)()],_.prototype,"polygonOffset",void 0),Object(u.a)([Object(h.b)()],_.prototype,"enableOffset",void 0),Object(u.a)([Object(h.b)()],_.prototype,"writeDepth",void 0),Object(u.a)([Object(h.b)()],_.prototype,"sceneHasOcludees",void 0),Object(u.a)([Object(h.b)({count:4})],_.prototype,"transparencyPassType",void 0),Object(u.a)([Object(h.b)()],_.prototype,"multipassTerrainEnabled",void 0),Object(u.a)([Object(h.b)()],_.prototype,"cullAboveGround",void 0);var x=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e,S)).supportsEdges=!0,r.techniqueConfig=new _,r}return Zt(n,[{key:"getTechniqueConfig",value:function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<o.e,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}},{key:"getPassParameters",value:function(){return this.params}},{key:"intersect",value:function(e,t,n,r,a,o,s){Object(i.e)(e,t,r,a,o,void 0,s)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output||4===e.output||1===e.output&&this.params.writeLinearDepth?new k(e):void 0}},{key:"createBufferWriter",value:function(){return new s.a(s.b)}}]),n}(a.a),k=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).updateParameters(),r}return Zt(n,[{key:"updateParameters",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(O,this.material.getTechniqueConfig(this.output,e),this.technique)}},{key:"beginSlot",value:function(e){return 4===this.output?3===e:e===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}},{key:"ensureParameters",value:function(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}},{key:"getPipelineState",value:function(e,t){return this.technique.getPipelineState(t)}}]),n}(r.a),S=Nt({color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1},a.b)},"04ZG":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("wSAH");var r=n("evjZ"),i=[n("ftD4").a],a=new Set,o=new Set;function s(e){return function(t){t.prototype.declaredClass=e,function(e,t){var n,r=Vt(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.processPrototypePropertyMetadata)for(var o in e)a.processPrototypePropertyMetadata(o,e[o],e,t)}}catch(s){r.e(s)}finally{r.f()}}(Object(r.a)(t.prototype).properties,e),function(e){var t=e.prototype,n=t.declaredClass,a=Object(r.a)(t).properties;!function(e,t){var n,r=Vt(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.processClassPropertyMetadata)for(var o in e)a.processClassPropertyMetadata(o,e[o],e,t)}}catch(s){r.e(s)}finally{r.f()}}(a,n);var o,s={},c=Vt(Object.getOwnPropertyNames(a));try{var l=function(){var e=o.value,t=a[e];s[e]={enumerable:!0,configurable:!0,get:u(e,t),set:function(n){var r=this.__accessor__;if(void 0!==r){if(!Object.isFrozen(this)){if(r.initialized&&t.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '".concat(e,"' of ").concat(this.declaredClass));if(2===r.lifecycle&&t.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '".concat(e,"' of ").concat(this.declaredClass));r.set(e,n)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}}};for(c.s();!(o=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}Object.defineProperties(e.prototype,s)}(t);for(var n=[],s=[],c=t.prototype;c;)c.hasOwnProperty("initialize")&&!a.has(c.initialize)&&(a.add(c.initialize),n.push(c.initialize)),c.hasOwnProperty("destroy")&&!o.has(c.destroy)&&(o.add(c.destroy),s.push(c.destroy)),c=Object.getPrototypeOf(c);a.clear(),o.clear();var l=function(e){Kt(r,e);var t=Xt(r);function r(){var e;Wt(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];if((e=t.call.apply(t,[this].concat(a))).constructor===r&&"function"==typeof e.postscript){var u;if(n.length&&Object.defineProperty($t(e),"initialize",{enumerable:!1,configurable:!0,value:function(){for(var e=n.length-1;e>=0;e--)n[e].call(this)}}),s.length){var c=!1;Object.defineProperty($t(e),"destroy",{enumerable:!1,configurable:!0,value:function(){if(!c){c=!0;for(var e=0;e<s.length;e++)s[e].call(this)}}})}(u=e).postscript.apply(u,a)}return Qt(e)}return r}(t);return l.__accessorMetadata__=Object(r.a)(t.prototype),l.prototype.declaredClass=e,l}}function u(e,t){return null==t.get?function(){return this.__accessor__.getterStatic(e)}:function(){return this.__accessor__.getterComputed(e)}}},"08/N":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n("wSAH");var r=n("ohva"),i=(n("f/qv"),n("srIe")),a=n("qatw"),o=(n("jWBI"),n("GlSV"));function s(e){return"declaredClass"in e}function u(e){return"declaredClass"in e}function c(e){return Object(i.j)(e)?null:s(e)?e:Object(a.a)(function(e){var t=e.spatialReference.toJSON();switch(e.type){case"point":return{x:e.x,y:e.y,z:e.z,m:e.m,spatialReference:t};case"polygon":var n=e.rings,r=e.hasZ,i=e.hasM;return{rings:l(n),hasZ:r,hasM:i,spatialReference:t};case"polyline":var a=e.paths,o=e.hasZ,s=e.hasM;return{paths:l(a),hasZ:o,hasM:s,spatialReference:t};case"extent":return{xmin:e.xmin,xmax:e.xmax,ymin:e.ymin,ymax:e.ymax,zmin:e.zmin,zmax:e.zmax,mmin:e.mmin,mmax:e.mmax,hasZ:e.hasZ,hasM:e.hasM,spatialReference:t};case"multipoint":var u=e.points,c=e.hasZ,p=e.hasM;return{points:f(u)?h(u):u,hasZ:c,hasM:p,spatialReference:t};default:return}}(e))}function l(e){return function(e){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(0!==r.length)return f(r)}}catch(i){n.e(i)}finally{n.f()}return!1}(e)?e.map((function(e){return h(e)})):e}function h(e){return e.map((function(e){return Object(r.n)(e)}))}function f(e){return e.length&&(Object(r.d)(e[0])||Object(r.e)(e[0]))}function p(e,t){if(!e)return null;var n;if(u(e)){if(null==t)return e.clone();if(u(t))return t.copy(e)}return null!=t?((n=t).x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=null,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=null,n.hasM=!1)):(n=Object(o.d)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}},"0DCJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("fXoL"),i=n("sq3C"),a=n("dk/s"),o=n("ofXK"),s=n("zVIQ"),u=n("RGY+"),c=n("3Pt+"),l=n("OFbc");function h(e,t){if(1&e){var n=r.lc();r.kc(0,"label"),r.kc(1,"input",7),r.rc("ngModelChange",(function(e){return r.Lc(n),r.vc().pointSymbol=e}))("ngModelChange",(function(e){return r.Lc(n),r.vc().changePointShapeEvt(e)})),r.jc(),r.kc(2,"span"),r.gc(3,"svg-icon",8),r.jc(),r.jc()}if(2&e){var i=t.$implicit,a=r.vc();r.Tb(1),r.Bc("value",i)("ngModel",a.pointSymbol),r.Tb(2),r.Bc("src","assets/pointsymbols/"+i.name+".svg")("svgStyle",a.fillSvgStyle2)}}var f=function(){var e=function(){function e(){var t=this;Wt(this,e),this._getColor=i.d,this.markerStyles=[{name:"circle",type:"simple-marker"},{name:"cross",type:"picture-marker"},{name:"triangle",type:"simple-marker"},{name:"x",type:"picture-marker"},{name:"diamond",type:"simple-marker"},{name:"square",type:"simple-marker"},{name:"tree",type:"picture-marker"},{name:"flag",type:"picture-marker"},{name:"warning",type:"picture-marker"},{name:"parking",type:"picture-marker"},{name:"water",type:"picture-marker"},{name:"pin",type:"picture-marker"},{name:"gate",type:"picture-marker"},{name:"home",type:"picture-marker"}],this.markerSize=12,this.pointSymbol=this.markerStyles[0],this.markerProps={type:this.pointSymbol.type,size:this.markerSize+"px",url:"",width:this.markerSize+"px",height:this.markerSize+"px",style:"circle",contentType:"image/svg",name:"circle",color:{r:255,g:255,b:0,a:1}},this.fillSvgStyle={"width.px":30,fill:Object(i.d)(this.markerProps.color)},this.fillSvgStyle2={"width.px":30,fill:Object(i.d)(this.markerProps.color)},this.changeMarkerSize=function(e){t.markerSize=e;var n=t.markerSize+"px";t.markerProps.size=n,t.markerProps.width=n,t.markerProps.height=t.markerSize+"px",t.updateMarkerShape()},this.updateMarkerShape=function(){"picture-marker"===t.pointSymbol.type?(t.markerProps.url=Object(a.a)(t.pointSymbol.name,t.markerProps.color),t.markerProps.contentType="image/svg"):t.markerProps.contentType=void 0},this.changePointShapeEvt=function(e){t.pointSymbol=e,t.markerProps.type=e.type,"picture-marker"===e.type?(t.markerProps.height=t.markerSize+"px",t.markerProps.name=e.name,t.updateMarkerShape()):(t.markerProps.url="",t.markerProps.style=e.name,t.markerProps.name=e.name)},this.changePointColor=function(e){t.markerProps.color=e,t.updateMarkerShape(),t.fillSvgStyle.fill=Object(i.d)(t.markerProps.color),t.fillSvgStyle2.fill=Object(i.d)(t.markerProps.color)}}return Zt(e,[{key:"selectedGraphics",get:function(){return this._selectedGraphics},set:function(e){if(!(this._selectedGraphics=e,void 0===e||e.length<1||"point"!==e[0].geometry.type)){var t=e[0].attributes.symbol;this.markerProps.type=t.type,this.markerProps.style=t.style,this.markerProps.name=t.name,this.markerSize=parseInt(t.size.split("px")[0]),this.pointSymbol=this.markerStyles.filter((function(e){return e.name===t.name}))[0],this.markerProps.size=this.markerSize+"px",this.markerProps.width=this.markerSize+"px",this.markerProps.height=this.markerSize+"px",this.markerProps.color=t.color,this.updateMarkerShape()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["app-pointcontrol"]],inputs:{selectedGraphics:"selectedGraphics"},decls:21,vars:7,consts:[[1,"marginTop10px"],[1,"toggleRadios"],[4,"ngFor","ngForOf"],[1,"flex","colorDiv","verticalCenter"],[3,"color","opacity","colorSelected"],[1,"widthSliderContainer"],[1,"widthSlider",3,"value","min","max","onChange"],["type","radio","name","shapes","aria-label","tes",3,"value","ngModel","ngModelChange"],[1,"toggleBtn",3,"src","svgStyle"]],template:function(e,t){1&e&&(r.kc(0,"div"),r.gc(1,"br"),r.kc(2,"fieldset"),r.kc(3,"legend"),r.Tc(4,"Point Style"),r.jc(),r.kc(5,"div",0),r.Tc(6," Shape "),r.gc(7,"br"),r.kc(8,"div",1),r.Sc(9,h,4,4,"label",2),r.jc(),r.jc(),r.gc(10,"br"),r.kc(11,"div",3),r.Tc(12,"Color: "),r.kc(13,"app-color-picker",4),r.rc("colorSelected",(function(e){return t.changePointColor(e)})),r.jc(),r.jc(),r.kc(14,"div",0),r.Tc(15),r.gc(16,"br"),r.kc(17,"div",5),r.Tc(18," 5 \xa0"),r.kc(19,"app-slider",6),r.rc("onChange",(function(e){return t.changeMarkerSize(e)})),r.jc(),r.Tc(20," \xa050 "),r.jc(),r.jc(),r.jc(),r.jc()),2&e&&(r.Tb(9),r.Bc("ngForOf",t.markerStyles),r.Tb(4),r.Bc("color",t.markerProps.color)("opacity",100*t.markerProps.color.a),r.Tb(2),r.Vc(" Size: ",t.markerSize,"px"),r.Tb(4),r.Bc("value",t.markerSize)("min",5)("max",50))},directives:[o.l,s.a,u.a,c.p,c.b,c.j,c.m,l.b],styles:["fieldset[_ngcontent-%COMP%]{position:relative;padding-top:12px}.widthSlider[_ngcontent-%COMP%]{width:80%;height:20px}.widthSlider[_ngcontent-%COMP%] > .slidecontainer[_ngcontent-%COMP%]{width:200px}.widthSliderContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;line-height:15px}.buttonActive[_ngcontent-%COMP%]{background-color:#d3d3d3;border:2px solid #0ff;color:#000}.fontButtons[_ngcontent-%COMP%]{min-width:unset!important;width:50px;margin:2px;outline:none}.fontStyle[_ngcontent-%COMP%]{justify-content:center;margin-top:10px}.verticalCenter[_ngcontent-%COMP%]{align-items:center}.matSelect[_ngcontent-%COMP%]{margin-left:10px}.colorDiv[_ngcontent-%COMP%], .marginTop10px[_ngcontent-%COMP%]{margin-top:10px}legend[_ngcontent-%COMP%]{font-weight:600}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:left;width:40px;height:40px;margin:2px;background-color:#efefef;border-radius:4px;border:1px solid #d0d0d0;overflow:auto}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;width:100%;overflow:hidden}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.toggleRadios[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:#7d7b7b;color:#f7f7f7}.toggleRadios[_ngcontent-%COMP%]{display:inline-block}"]}),e}()},"0Ect":function(t,n,r){"use strict";r.d(n,"a",(function(){return o}));var i=r("OIYi"),a=r("UBvB");function o(t){t.include(a.a),t.code.add(i.a(e||(e=Rt(["\n    float linearDepthFromFloat(float depth, vec2 nearFar) {\n      return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n    }\n\n    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {\n      return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);\n    }\n  "]))))}},"0I6m":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("fXoL"),i=n("ofXK"),a=(n("m1Uf"),n("FhEM")),o=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c,a.a]]}),e}()},"0Kx6":function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return P})),n.d(t,"h",(function(){return D}));var r=n("IEcw"),i=n("5DEt"),a=n("8JEK");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return[e[0],e[1],e[2],e[3]]}function s(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o();return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}var u=[0,0,1,0];Object.freeze({__proto__:null,create:o,wrap:function(e,t,n,r){return s(e,t,n,r,a.e.get())},wrapAxisAngle:function(e,t){return s(e[0],e[1],e[2],t,a.e.get())},copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();return s(e[0],e[1],e[2],e[3],t)},fromValues:s,fromAxisAndAngle:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return Object(i.j)(n,e),n[3]=t,n},fromPoints:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return Object(i.f)(n,e,t),Object(i.q)(n,n),n[3]=Object(r.a)(e,t),n},axis:function(e){return e},UP:u});var c=n("jZU2"),l=n("QFRQ"),h=n("+JUG"),f=n("cKtl"),p=n("DZ/s"),d=n("Gbm8"),v=n("Cy1f"),y=n("15Hh"),b=n("IRkY"),g=n("D8Ta"),m=n("dXfX");function w(e){return e?[Object(f.c)(e[0]),Object(f.c)(e[1]),Object(f.c)(e[2]),Object(f.c)(e[3]),Object(f.c)(e[4]),Object(f.c)(e[5])]:[Object(f.c)(),Object(f.c)(),Object(f.c)(),Object(f.c)(),Object(f.c)(),Object(f.c)()]}function O(){return[Object(v.e)(),Object(v.e)(),Object(v.e)(),Object(v.e)(),Object(v.e)(),Object(v.e)(),Object(v.e)(),Object(v.e)()]}function j(e,t){Object(f.j)(t[4],t[0],t[3],e[0]),Object(f.j)(t[1],t[5],t[6],e[1]),Object(f.j)(t[4],t[5],t[1],e[2]),Object(f.j)(t[3],t[2],t[6],e[3]),Object(f.j)(t[0],t[1],t[2],e[4]),Object(f.j)(t[5],t[4],t[7],e[5])}function _(e,t){for(var n=0;n<6;n++)if(!Object(f.q)(e[n],t))return!1;return!0}var x=[Object(g.d)(-1,-1,-1,1),Object(g.d)(1,-1,-1,1),Object(g.d)(1,1,-1,1),Object(g.d)(-1,1,-1,1),Object(g.d)(-1,-1,1,1),Object(g.d)(1,-1,1,1),Object(g.d)(1,1,1,1),Object(g.d)(-1,1,1,1)],k=new b.a(d.b),S=O(),M=Object.freeze({__proto__:null,create:w,createPoints:O,copy:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w(),n=0;n<6;n++)Object(f.a)(e[n],t[n])},fromMatrix:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,o=Object(y.l)(a.a.get(),t,e);Object(y.a)(o,o);for(var s=0;s<8;++s){var u=Object(m.m)(a.e.get(),x[s],o);Object(i.v)(r[s],u[0]/u[3],u[1]/u[3],u[2]/u[3])}j(n,r)},computePlanes:j,intersectsSphere:function(e,t){for(var n=0;n<6;n++)if(Object(f.k)(e[n],t))return!1;return!0},intersectsRay:function(e,t){return _(e,Object(d.e)(t,k.get()))},intersectClipRay:function(e,t){for(var n=0;n<6;n++){var r=e[n];if(!Object(f.l)(r,t))return!1}return!0},intersectsLineSegment:function(e,t,n){return _(e,Object(d.a)(t,n,k.get()))},intersectsPoint:function(e,t){for(var n=0;n<6;n++)if(Object(f.m)(e[n],t)>0)return!1;return!0},intersectsAABB:function(e,t){for(var n=0;n<6;n++)if(Object(f.o)(e[n],t))return!1;return!0},planePointIndices:{bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]}});n("oSUa");var I=f.h,T=p.a,A=c.d,C=l.g,E=d.c,P=h.d,R=M,D=r.d},"0MsP":function(e,u,c){"use strict";c.d(u,"a",(function(){return p}));var l,h=c("OIYi"),f=c("L5gG");function p(e,u){var c=e;c.include(f.a),c.attributes.add("position","vec3"),c.attributes.add("normal","vec3"),c.attributes.add("auxpos1","vec4"),c.vertex.uniforms.add("proj","mat4"),c.vertex.uniforms.add("view","mat4"),c.vertex.uniforms.add("viewNormal","mat4"),c.vertex.uniforms.add("viewport","vec4"),c.vertex.uniforms.add("camPos","vec3"),c.vertex.uniforms.add("polygonOffset","float"),c.vertex.uniforms.add("cameraGroundRelative","float"),c.vertex.uniforms.add("pixelRatio","float"),c.vertex.uniforms.add("perDistancePixelRatio","float"),c.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float"),u.verticalOffsetEnabled&&c.vertex.uniforms.add("verticalOffset","vec4"),u.screenSizePerspectiveEnabled&&c.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4"),c.vertex.uniforms.add("hudVisibilityTexture","sampler2D"),c.vertex.constants.add("smallOffsetAngle","float",.984807753012208),c.vertex.code.add(h.a(t||(t=Rt(["\n    struct ProjectHUDAux {\n      vec3 posModel;\n      vec3 posView;\n      vec3 vnormal;\n\n      float distanceToCamera;\n      float absCosAngle;\n    };\n  "])))),c.vertex.code.add(h.a(n||(n=Rt(["\n    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n      float pointGroundSign = sign(pointGroundDistance);\n\n      if (pointGroundSign == 0.0) {\n        pointGroundSign = cameraGroundRelative;\n      }\n\n      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground\n      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise\n      float groundRelative = cameraGroundRelative * pointGroundSign;\n\n      // view angle dependent part of polygon offset emulation\n      // we take the absolute value because the sign that is dropped is\n      // instead introduced using the ground-relative position of the symbol and the camera\n      if (polygonOffset > .0) {\n        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);\n\n        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n        float factor = (1.0 - tanAlpha / viewport[2]);\n\n        // same side of the terrain\n        if (groundRelative > 0.0) {\n          posView *= factor;\n        }\n        // opposite sides of the terrain\n        else {\n          posView /= factor;\n        }\n      }\n\n      return groundRelative;\n    }\n  "])))),u.isDraped||c.vertex.code.add(h.a(r||(r=Rt(["\n    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n      float distanceToCamera = length(posView);\n\n      // Compute offset in world units for a half pixel shift\n      float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;\n\n      // Apply offset along normal in the direction away from the ground surface\n      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;\n\n      // Apply the same offset also on the view space position\n      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n\n      posModel += modelOffset;\n      posView += viewOffset;\n    }\n  "])))),c.vertex.code.add(h.a(i||(i=Rt(["\n    vec4 projectPositionHUD(out ProjectHUDAux aux) {\n      // centerOffset is in view space and is used to implement world size offsetting\n      // of labels with respect to objects. It also pulls the label towards the viewer\n      // so that the label is visible in front of the object.\n      vec3 centerOffset = auxpos1.xyz;\n\n      // The pointGroundDistance is the distance of the geometry to the ground and is\n      // negative if the point is below the ground, or positive if the point is above\n      // ground.\n      float pointGroundDistance = auxpos1.w;\n\n      aux.posModel = position;\n      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;\n      aux.vnormal = normal;\n      ","\n\n      // Screen sized offset in world space, used for example for line callouts\n      // Note: keep this implementation in sync with the CPU implementation, see\n      //   - MaterialUtil.verticalOffsetAtDistance\n      //   - HUDMaterial.applyVerticalOffsetTransformation\n\n      aux.distanceToCamera = length(aux.posView);\n\n      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);\n      float cosAngle = dot(aux.vnormal, viewDirObjSpace);\n\n      aux.absCosAngle = abs(cosAngle);\n\n      ","\n\n      ","\n\n      ","\n\n      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n\n      ","\n\n      vec4 posProj = proj * vec4(aux.posView, 1.0);\n\n      ","\n\n      ","\n\n      // constant part of polygon offset emulation\n      posProj.z -= groundRelative * polygonOffset * posProj.w;\n      return posProj;\n    }\n  "])),u.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);",u.screenSizePerspectiveEnabled&&(u.verticalOffsetEnabled||1===u.screenCenterOffsetUnitsEnabled)?"vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"",u.verticalOffsetEnabled?u.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":"",u.verticalOffsetEnabled?h.a(a||(a=Rt(["\n            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n            vec3 modelOffset = aux.vnormal * worldOffset;\n            aux.posModel += modelOffset;\n            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n            aux.posView += viewOffset;\n            // Since we elevate the object, we need to take that into account\n            // in the distance to ground\n            pointGroundDistance += worldOffset;"]))):"",1!==u.screenCenterOffsetUnitsEnabled?h.a(o||(o=Rt(["\n            // Apply x/y in view space, but z in screen space (i.e. along posView direction)\n            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);\n\n            // Same material all have same z != 0.0 condition so should not lead to\n            // branch fragmentation and will save a normalization if it's not needed\n            if (centerOffset.z != 0.0) {\n              aux.posView -= normalize(aux.posView) * centerOffset.z;\n            }\n          "]))):"",1===u.screenCenterOffsetUnitsEnabled?u.screenSizePerspectiveEnabled?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":"",1===u.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":"")),c.vertex.code.add(h.a(s||(s=Rt(["\n    bool testVisibilityHUD(vec4 posProj) {\n      // For occlusion testing, use the nearest pixel center to avoid\n      // subpixel filtering messing up the color we use to test for\n      vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\n\n      // the red pixel here indicates that the occlusion pixel passed the depth test against solid geometry and was written\n      // the green pixel stores transparency of transparent geometry (1.0 -> fully transparent)\n      // note that we also check against green == 0.0, i.e. transparent geometry that has opaque parts\n\n      // thus we render visible pixels that are occluded by semi-transparent (but not fully transparent!) geometry here\n      if (uRenderTransparentlyOccludedHUD > 0.5) {\n        // multiplying by uRenderTransparentlyOccludedHUD allows us to ignore the second condition if\n        // uRenderTransparentlyOccludedHUD = 0.75\n        return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;\n      }\n\n      // and visible pixels that are not occluded by semi-transparent geometry here\n      return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;\n    }\n  "]))))}(l=p||(p={})).bindUniforms=function(e,t){e.setUniform1f("uRenderTransparentlyOccludedHUD",0===t.renderTransparentlyOccludedHUD?1:1===t.renderTransparentlyOccludedHUD?0:.75)},l.bindVisibilityTexture=function(e,t,n){t.setUniform1i("hudVisibilityTexture",4),e.bindTexture(n.hudVisibilityTexture,4),e.setActiveTexture(0)}},"0OnR":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("p6dn")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).text=null,r.type="text",r}return Zt(n,[{key:"clone",value:function(){return new r({text:this.text})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"text",void 0),Object(i.a)([Object(a.b)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0),u=r=Object(i.a)([Object(o.a)("esri.popup.content.TextContent")],u),t.a=u},"0jIh":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("wSAH");var r=n("6S2I"),i=n("ZwYu"),a=n("fctI");r.a.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");var o=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this)).lineStart=e,i.lineEnd=r,i}return Zt(n,[{key:"equals",value:function(e){return e instanceof n&&Object(i.d)(this.lineStart,e.lineStart)&&Object(i.d)(this.lineEnd,e.lineEnd)}}]),n}(a.a)},"0meK":function(e,t,n){"use strict";n("wSAH");var r=n("6S2I"),i=n("of9L"),a=n("kbDN"),o=r.a.getLogger("esri.views.webgl.FrameBufferObject"),s=function(){function e(t,n,r,o){var s,u;if(Wt(this,e),this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc=Nt({},n),t.instanceCounter.increment(4,this),r)if(Array.isArray(r)){var c,l=Vt(r);try{for(l.s();!(c=l.n()).done;){var h=c.value,f=h.attachmentPoint,p=h.texture,d=p instanceof i.a?p:new i.a(t,p);s=d.descriptor,this._colorAttachments.set(f,d),this._validateColorAttachmentPoint(f),this._validateTextureDimensions(s,this._desc)}}catch(g){l.e(g)}finally{l.f()}}else r instanceof i.a?(s=r.descriptor,this._colorAttachments.set(36064,r)):(s=r,this._colorAttachments.set(36064,new i.a(t,r))),0!==(null==(u=this._desc)?void 0:u.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(s,this._desc);if(o instanceof a.a){var v,y=null!=(v=this._desc.depthStencilTarget)?v:3;2===y?this._stencilAttachment=o:1===y||3===y?this._depthAttachment=o:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),e._validateBufferDimensions(o.descriptor,this._desc)}else if(o){var b;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),o instanceof i.a?(this._depthStencilTexture=o,b=this._depthStencilTexture.descriptor):(b=o,this._depthStencilTexture=new i.a(this._context,b)),this._validateTextureDimensions(b,this._desc)}}return Zt(e,[{key:"dispose",value:function(){if(this._desc){var e=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(e),this._context.instanceCounter.decrement(4,this),this._desc=null}}},{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){var e=this._colorAttachments.get(36064);return e&&e instanceof i.a?e:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}},{key:"getColorTexture",value:function(e){var t=this._colorAttachments.get(e);return t&&t instanceof i.a?t:null}},{key:"attachColorTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36064;if(e){if(this._validateColorAttachmentPoint(t),this._validateTextureDimensions(e.descriptor,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);var n=this._context.gl;n.framebufferTexture2D(n.FRAMEBUFFER,t,n.TEXTURE_2D,e.glName,0)}this._colorAttachments.set(t,e)}}},{key:"detachColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=this._colorAttachments.get(e);if(t instanceof i.a){var n=t;if(this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,null,0)}return this._colorAttachments.delete(e),n}}},{key:"attachDepthStencilTexture",value:function(e){if(e){var t=e.descriptor;if(34041!==t.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==t.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(t,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);var n=this._context.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,e.glName,0)}this._depthStencilTexture=e}}},{key:"detachDepthStencilTexture",value:function(){var e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,e}},{key:"attachDepthStencilBuffer",value:function(t){if(t){var n=t.descriptor;if(34041!==n.internalFormat&&33189!==n.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),e._validateBufferDimensions(n,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===n.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,1===this._desc.depthStencilTarget?r.DEPTH_ATTACHMENT:r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,t.glName)}this._depthAttachment=t}}},{key:"detachDepthStencilBuffer",value:function(){var e=this._context.gl,t=this._depthAttachment;return t&&this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._depthAttachment=null,t}},{key:"copyToTexture",value:function(e,t,n,r,i,a,o){(e<0||t<0||i<0||a<0)&&console.error("Offsets cannot be negative!"),(n<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");var s=this._desc,u=o.descriptor;3553!==o.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+n>s.width||t+r>s.height||i+n>u.width||a+r>u.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");var c=this._context;c.bindTexture(o,0),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(3553,0,i,a,e,t,n,r)}},{key:"readPixels",value:function(e,t,n,r,i,a,o){(n<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,n,r,i,a,o)}},{key:"resize",value:function(e,t){var n=this._desc;if(n.width!==e||n.height!==t){if(!this._initialized)return n.width=e,n.height=t,this._colorAttachments.forEach((function(n){n&&n.resize(e,t)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(e,t));n.width=e,n.height=t,this._colorAttachments.forEach((function(n){n&&n.resize(e,t)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(e,t):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(e,t),this._stencilAttachment&&this._stencilAttachment.resize(e,t)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}},{key:"initializeAndBind",value:function(){var e,t,n,r,o=this._context.gl;if(this._initialized)o.bindFramebuffer(o.FRAMEBUFFER,this.glName);else{this._glName&&o.deleteFramebuffer(this._glName);var s=this._context,c=o.createFramebuffer(),l=this._desc,h=null!=(e=l.colorTarget)?e:1,f=null!=(t=l.width)?t:1,p=null!=(n=l.height)?n:1;if(o.bindFramebuffer(o.FRAMEBUFFER,c),0===this._colorAttachments.size)if(0===h)this._colorAttachments.set(36064,u(s,l));else{var d=new a.a(s,{internalFormat:32854,width:f,height:p});this._colorAttachments.set(36064,d)}this._colorAttachments.forEach((function(e,t){e&&(e instanceof i.a?o.framebufferTexture2D(o.FRAMEBUFFER,t,o.TEXTURE_2D,e.glName,0):o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,e.glName))}));var v=null!=(r=l.depthStencilTarget)?r:0;switch(v){case 1:case 3:this._depthAttachment||(this._depthAttachment=new a.a(s,{internalFormat:1===l.depthStencilTarget?33189:34041,width:f,height:p})),o.framebufferRenderbuffer(o.FRAMEBUFFER,1===v?o.DEPTH_ATTACHMENT:o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new a.a(s,{internalFormat:36168,width:f,height:p})),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(s.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new i.a(s,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:f,height:p})),o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=c,this._initialized=!0}}},{key:"_disposeColorAttachments",value:function(){var e=this;this._colorAttachments.forEach((function(t,n){if(t instanceof i.a){if(e._initialized){e._context.bindFramebuffer(e);var r=e._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,n,r.TEXTURE_2D,null,0)}t.dispose()}else if(t instanceof WebGLRenderbuffer){var a=e._context.gl;e._initialized&&(e._context.bindFramebuffer(e),a.framebufferRenderbuffer(a.FRAMEBUFFER,n,a.RENDERBUFFER,null)),e._context.gl.deleteRenderbuffer(t)}})),this._colorAttachments.clear()}},{key:"_disposeDepthStencilAttachments",value:function(){var e=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null),this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}},{key:"_validateTextureDimensions",value:function(e,t){console.assert(e.width>=0&&e.height>=0),3553!==e.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}},{key:"_validateColorAttachmentPoint",value:function(t){if(-1===e._MAX_COLOR_ATTACHMENTS){var n=this._context.capabilities.drawBuffers;e._MAX_COLOR_ATTACHMENTS=n?this._context.gl.getParameter(n.MAX_COLOR_ATTACHMENTS):1}var r=t-36064;r+1>e._MAX_COLOR_ATTACHMENTS&&o.error("esri.FrameBufferObject","illegal attachment point for color attachment: ".concat(r+1,". Implementation supports up to ").concat(e._MAX_COLOR_ATTACHMENTS," color attachments"))}}],[{key:"_validateBufferDimensions",value:function(e,t){console.assert(e.width>=0&&e.height>=0),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}}]),e}();s._MAX_COLOR_ATTACHMENTS=-1;var u=function(e,t){return new i.a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:t.width,height:t.height})};t.a=s},"0nJL":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i=n("srIe"),a=n("Cy1f"),o=n("5DEt"),s=n("OIYi");function p(e,t){if(t.slicePlaneEnabled){e.extensions.add("GL_OES_standard_derivatives"),t.sliceEnabledForVertexPrograms&&(e.vertex.uniforms.add("slicePlaneOrigin","vec3"),e.vertex.uniforms.add("slicePlaneBasis1","vec3"),e.vertex.uniforms.add("slicePlaneBasis2","vec3")),e.fragment.uniforms.add("slicePlaneOrigin","vec3"),e.fragment.uniforms.add("slicePlaneBasis1","vec3"),e.fragment.uniforms.add("slicePlaneBasis2","vec3");var n=s.a(u||(u=Rt(["\n      struct SliceFactors {\n        float front;\n        float side0;\n        float side1;\n        float side2;\n        float side3;\n      };\n\n      SliceFactors calculateSliceFactors(vec3 pos) {\n        vec3 rel = pos - slicePlaneOrigin;\n\n        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);\n        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);\n\n        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);\n        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);\n\n        float basis1Dot = dot(slicePlaneBasis1, rel);\n        float basis2Dot = dot(slicePlaneBasis2, rel);\n\n        return SliceFactors(\n          dot(slicePlaneNormal, pos) + slicePlaneW,\n          -basis1Dot - basis1Len2,\n          basis1Dot - basis1Len2,\n          -basis2Dot - basis2Len2,\n          basis2Dot - basis2Len2\n        );\n      }\n\n      bool sliceByFactors(SliceFactors factors) {\n        return factors.front < 0.0\n          && factors.side0 < 0.0\n          && factors.side1 < 0.0\n          && factors.side2 < 0.0\n          && factors.side3 < 0.0;\n      }\n\n      bool sliceEnabled() {\n        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.\n        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;\n      }\n\n      bool sliceByPlane(vec3 pos) {\n        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));\n      }\n\n      #define rejectBySlice(_pos_) sliceByPlane(_pos_)\n      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }\n    "]))),r=s.a(c||(c=Rt(["\n      vec4 applySliceHighlight(vec4 color, vec3 pos) {\n        SliceFactors factors = calculateSliceFactors(pos);\n\n        if (sliceByFactors(factors)) {\n          return color;\n        }\n\n        const float HIGHLIGHT_WIDTH = 1.0;\n        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);\n\n        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\n        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\n        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\n        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\n        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\n\n        float highlightFactor = (1.0 - step(0.5, factors.front))\n          * (1.0 - step(0.5, factors.side0))\n          * (1.0 - step(0.5, factors.side1))\n          * (1.0 - step(0.5, factors.side2))\n          * (1.0 - step(0.5, factors.side3));\n\n        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n      }\n    "]))),i=t.sliceHighlightDisabled?s.a(l||(l=Rt(["#define highlightSlice(_color_, _pos_) (_color_)"]))):s.a(h||(h=Rt(["\n        ","\n        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))\n      "])),r);t.sliceEnabledForVertexPrograms&&e.vertex.code.add(n),e.fragment.code.add(n),e.fragment.code.add(i)}else{var a=s.a(f||(f=Rt(["\n      #define rejectBySlice(_pos_) false\n      #define discardBySlice(_pos_) {}\n      #define highlightSlice(_color_, _pos_) (_color_)\n    "])));t.sliceEnabledForVertexPrograms&&e.vertex.code.add(a),e.fragment.code.add(a)}}(r=p||(p={})).bindUniformsWithOrigin=function(e,t,n){r.bindUniforms(e,t,n.slicePlane,n.origin)},r.bindUniforms=function(e,t,n,r){t.slicePlaneEnabled&&(Object(i.k)(n)?(r?(Object(o.i)(d,n.origin,r),e.setUniform3fv("slicePlaneOrigin",d)):e.setUniform3fv("slicePlaneOrigin",n.origin),e.setUniform3fv("slicePlaneBasis1",n.basis1),e.setUniform3fv("slicePlaneBasis2",n.basis2)):(e.setUniform3fv("slicePlaneBasis1",a.b),e.setUniform3fv("slicePlaneBasis2",a.b),e.setUniform3fv("slicePlaneOrigin",a.b)))};var d=Object(a.e)()},"0oj5":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("RI0u"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),h=n("qRWG"),f=n("XACZ"),p=n("cPYn"),d=n("jwe7"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="line",r.color=new l.a([0,0,0,1]),r.size=Object(h.i)(1),r.border=null,r}return Zt(n,[{key:"visible",get:function(){return this.size>0&&Object(o.k)(this.color)&&this.color.a>0}},{key:"clone",value:function(){return new r({color:Object(a.a)(this.color),size:this.size,border:Object(a.a)(this.border)})}}]),n}(p.a);Object(i.a)([Object(u.a)({line:"line"},{readOnly:!0})],v.prototype,"type",void 0),Object(i.a)([Object(s.b)(f.a)],v.prototype,"color",void 0),Object(i.a)([Object(s.b)(f.b)],v.prototype,"size",void 0),Object(i.a)([Object(s.b)({type:d.a,json:{write:!0}})],v.prototype,"border",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],v.prototype,"visible",null),v=r=Object(i.a)([Object(c.a)("esri.symbols.callouts.LineCallout3D")],v),t.a=v},"0pea":function(e,t,n){"use strict";n.r(t),n.d(t,"getAllSizes",(function(){return x})),n.d(t,"getColor",(function(){return d})),n.d(t,"getOpacity",(function(){return v})),n.d(t,"getRotationAngle",(function(){return y})),n.d(t,"getSize",(function(){return b})),n.d(t,"getSizeForValue",(function(){return w})),n.d(t,"getSizeFromNumberOrVariable",(function(){return g})),n.d(t,"getSizeRangeAtScale",(function(){return O})),n.d(t,"getVisualVariableValues",(function(){return j})),n.d(t,"viewScaleRE",(function(){return p}));var r=n("bJda"),i=n("srIe"),a=n("6S2I"),o=n("nvBr"),s=n("jWBI"),u=n("m0D6"),c=n("hvLT"),l=a.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),h=new s.a,f=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(r)if("esri.renderers.visualVariables.ColorVariable"===r.declaredClass){var a="number"==typeof t,s=a?null:t,u=s&&s.attributes,c=a?t:null,h=r.field,f=r.cache,p=f.ipData,d=f.hasExpression,v=r.cache.compiledFunc;if(!h&&!d){var y=r.stops;return y&&y[0]&&y[0].color}if("number"!=typeof c)if(d){if(!Object(i.k)(n)||!Object(i.k)(n.arcade))return void l.error("Use of arcade expressions requires an arcade context");var b=n.arcade.arcadeUtils,g=b.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),m=b.createExecContext(s,g);if(!v){var w=b.createSyntaxTree(r.valueExpression);v=b.createFunction(w),r.cache.compiledFunc=v}c=b.executeFunction(v,m)}else u&&(c=u[h]);var O=r.normalizationField,j=u?parseFloat(u[O]):void 0;if(null!=c&&(!O||a||!isNaN(j)&&0!==j)){isNaN(j)||a||(c/=j);var x=_(c,p);if(x){var k=x[0],S=x[1],M=k===S?r.stops[k].color:o.a.blendColors(r.stops[k].color,r.stops[S].color,x[2],Object(i.k)(n)?n.color:void 0);return new o.a(M)}}}else l.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function v(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(r)if("esri.renderers.visualVariables.OpacityVariable"===r.declaredClass){var a="number"==typeof t,o=a?null:t,s=o&&o.attributes,u=a?t:null,c=r.field,h=r.cache,f=h.ipData,p=h.hasExpression,d=r.cache.compiledFunc;if(!c&&!p){var v=r.stops;return v&&v[0]&&v[0].opacity}if("number"!=typeof u)if(p){if(Object(i.j)(n)||Object(i.j)(n.arcade))return void l.error("Use of arcade expressions requires an arcade context");var y=n.arcade.arcadeUtils,b=y.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),g=y.createExecContext(o,b);if(!d){var m=y.createSyntaxTree(r.valueExpression);d=y.createFunction(m),r.cache.compiledFunc=d}u=y.executeFunction(d,g)}else s&&(u=s[c]);var w=r.normalizationField,O=s?parseFloat(s[w]):void 0;if(null!=u&&(!w||a||!isNaN(O)&&0!==O)){isNaN(O)||a||(u/=O);var j=_(u,f);if(j){var x=j[0],k=j[1];if(x===k)return r.stops[x].opacity;var S=r.stops[x].opacity;return S+(r.stops[k].opacity-S)*j[2]}}}else l.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function y(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(r){if("esri.renderers.visualVariables.RotationVariable"===r.declaredClass){var a=r.axis||"heading",o="heading"===a&&"arithmetic"===r.rotationType?90:0,s="heading"===a&&"arithmetic"===r.rotationType?-1:1,u="number"==typeof t?null:t,c=u&&u.attributes,h=r.field,f=r.cache.hasExpression,p=r.cache.compiledFunc,d=0;if(!h&&!f)return d;if(f){if(Object(i.j)(n)||Object(i.j)(n.arcade))return void l.error("Use of arcade expressions requires an arcade context");var v=n.arcade.arcadeUtils,y=v.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),b=v.createExecContext(u,y);if(!p){var g=v.createSyntaxTree(r.valueExpression);p=v.createFunction(g),r.cache.compiledFunc=p}d=v.executeFunction(p,b)}else c&&(d=c[h]||0);return d="number"!=typeof d||isNaN(d)?null:o+s*d}l.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function b(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(r){if("esri.renderers.visualVariables.SizeVariable"===r.declaredClass){var a=w(function(e,t,n){var r="number"==typeof t,a=r?null:t,o=a&&a.attributes,s=r?t:null,u=e.cache.isScaleDriven,h=e.cache.compiledFunc;if(u){var f=Object(i.k)(n)?n.scale:void 0,p=Object(i.k)(n)?n.view:void 0;s=null==f||"3d"===p?function(e){var t=null,n=null,r=e.stops;return r?(t=r[0].value,n=r[r.length-1].value):(t=e.minDataValue||0,n=e.maxDataValue||0),(t+n)/2}(e):f}else if(!r)switch(e.inputValueType){case"expression":if(Object(i.j)(n)||Object(i.j)(n.arcade))return void l.error("Use of arcade expressions requires an arcade context");var d=n.arcade.arcadeUtils,v=d.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),y=d.createExecContext(a,v);if(!h){var b=d.createSyntaxTree(e.valueExpression);h=d.createFunction(b),e.cache.compiledFunc=h}s=d.executeFunction(h,y);break;case"field":o&&(s=o[e.field]);break;case"unknown":s=null}if(!Object(c.d)(s))return null;if(r||!e.normalizationField)return s;var g=o?parseFloat(o[e.normalizationField]):null;return Object(c.d)(g)&&0!==g?s/g:null}(r,t,n),r,t,n,r.cache.ipData);return null==a||isNaN(a)?0:a}l.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function g(e,t,n){return null==e?null:Object(c.c)(e)?b(e,t,n):Object(c.d)(e)?e:null}function m(e,t,n){return Object(c.d)(n)&&e>n?n:Object(c.d)(t)&&e<t?t:e}function w(e,t,n,r,a){switch(t.transformationType){case"additive":return function(e,t,n,r){return e+(g(t.minSize,n,r)||t.minDataValue)}(e,t,n,r);case"constant":return function(e,t,n){var r=e.stops,i=r&&r.length&&r[0].size;return null==i&&(i=e.minSize),g(i,t,n)}(t,n,r);case"clamped-linear":return function(e,t,n,r){var a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=g(t.minSize,n,r),s=g(t.maxSize,n,r),u=Object(i.k)(r)?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&u){var c="circle"===u,l=c?f*Math.pow(o/2,2):o*o,h=l+a*((c?f*Math.pow(s/2,2):s*s)-l);return c?2*Math.sqrt(h/f):Math.sqrt(h)}return o+a*(s-o)}(e,t,n,r);case"proportional":return function(e,t,n,r){var a=Object(i.k)(r)?r.shape:void 0,o=e/t.minDataValue,s=g(t.minSize,n,r),u=g(t.maxSize,n,r);return m("circle"===a?2*Math.sqrt(o*Math.pow(s/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(o*Math.pow(s,2)):o*s,s,u)}(e,t,n,r);case"stops":return function(e,t,n,r,i){var a=zt(_(e,i),3),o=a[0],s=a[1],u=a[2];if(o===s)return g(t.stops[o].size,n,r);var c=g(t.stops[o].size,n,r);return c+(g(t.stops[s].size,n,r)-c)*u}(e,t,n,r,a);case"real-world-size":return function(e,t,n,r){var a=(Object(i.k)(r)&&r.resolution?r.resolution:1)*u.a[t.valueUnit],o=g(t.minSize,n,r),s=g(t.maxSize,n,r),c=t.valueRepresentation;return m("area"===c?2*Math.sqrt(e/f)/a:"radius"===c||"distance"===c?2*e/a:e/a,o,s)}(e,t,n,r);case"identity":return e;case"unknown":return null}}function O(e,t,n){if(!(e.cache.isScaleDriven&&"3d"===n||t))return null;var r={scale:t,view:n},i=g(e.minSize,h,r),a=g(e.maxSize,h,r);if(null!=i||null!=a){if(i>a){var o=a;a=i,i=o}return{minSize:i,maxSize:a}}}function j(e,t,n){if(e.visualVariables){var r,i=[],a=[],o=[],s=[],u=[],c=Vt(e.visualVariables);try{for(c.s();!(r=c.n()).done;){var l=r.value;switch(l.type){case"color":a.push(l);break;case"opacity":o.push(l);break;case"rotation":u.push(l);break;case"size":s.push(l)}}}catch(h){c.e(h)}finally{c.f()}return a.forEach((function(e){var r=d(e,t,n);i.push({variable:e,value:r})})),o.forEach((function(e){var r=v(e,t,n);i.push({variable:e,value:r})})),u.forEach((function(e){var r=y(e,t,n);i.push({variable:e,value:r})})),s.forEach((function(e){var r=b(e,t,n);i.push({variable:e,value:r})})),i.filter((function(e){return null!=e.value}))}}function _(e,t){if(t){var n=0,r=t.length-1;return t.some((function(t,i){return e<t?(r=i,!0):(n=i,!1)})),[n,r,(e-t[n])/(t[r]-t[n])]}}function x(e,t,n){var i,a=["proportional","proportional","proportional"],o=Vt(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.useSymbolValue?"symbol-value":b(s,t,n);switch(s.axis){case"width":a[0]=u;break;case"depth":a[1]=u;break;case"height":a[2]=u;break;case"width-and-depth":a[0]=u,a[1]=u;break;case"all":case void 0:case null:a[0]=u,a[1]=u,a[2]=u;break;default:Object(r.a)(s.axis)}}}catch(c){o.e(c)}finally{o.f()}return a}},"0w9u":function(e,t,n){"use strict";function r(e){localStorage.setItem(o,JSON.stringify(e))}function i(){localStorage.removeItem(o)}function a(){return JSON.parse(localStorage.getItem(o))}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r}));var o="__mmp_storage__"},"0wLv":function(e,t,n){"use strict";var r=n("rlSK"),i=n("umoc"),a=n("M0lq");function o(e,t){e.delete(t)}var s=new r.a(0,0,0,0),u=new Map,c=[],l=[];t.a=function(){function e(t){var n=this;Wt(this,e),this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=null==t.resampling||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),null!=t.buffer&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new(function(){function e(t,n,r){Wt(this,e),this.maxSize=t,this.tileInfoView=n,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}return Zt(e,[{key:"has",value:function(e){return this._tilePerId.has(e)}},{key:"get",value:function(e){return this._tilePerId.get(e)}},{key:"pop",value:function(e){var t=this._tilePerId.get(e);if(!t)return null;var n=this._tileKeysPerLevel[t.key.level];o(this._tilePerId,e);for(var r=0;r<n.length;r++)if(n[r].id===e){n.splice(r,1);break}return t.visible=!0,t}},{key:"add",value:function(e){e.visible=!1;var t=e.key,n=t.id;if(!this._tilePerId.has(n)){this._tilePerId.set(n,e);var r=t.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(t)}}},{key:"prune",value:function(e,t,n){var r=this._tilePerId.size;if(!(r<=this.maxSize)){for(var i=this._tileKeysPerLevel.length-1;r>this.maxSize&&i>=0;)i!==e&&(r=this._pruneAroundCenterTile(r,t,n,i)),i--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,t,n,e))}}},{key:"_pruneAroundCenterTile",value:function(e,t,n,r){var i=this._tileKeysPerLevel[r];if(!i||0===i.length)return e;var o=this.tileInfoView.tileInfo,s=o.size,u=o.origin,c=n*s[0],l=n*s[1],h=[0,0],f=[0,0];for(i.sort((function(e,n){return h[0]=u.x+c*(e.col+.5),h[1]=u.y-l*(e.row+.5),f[0]=u.x+c*(n.col+.5),f[1]=u.y-l*(n.row+.5),Object(a.j)(h,t)-Object(a.j)(f,t)}));i.length>0;){var p=i.pop();if(this._removeTile(p.id),--e===this.maxSize)break}return e}},{key:"_removeTile",value:function(e){var t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),o(this._tilePerId,e)}}]),e}())(t.cacheSize,this.tileInfoView,(function(e){n.releaseTile(e)})))}return Zt(e,[{key:"destroy",value:function(){this.tileIndex.clear()}},{key:"update",value:function(e){var t=this,n=this.resampling,r=this.tileIndex,a=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(l.length=0,c.length=0,u.clear(),a){var o=this.tileInfoView.tileInfo,h=o.minScale,f=o.maxScale,p=a.spans,d=a.lodInfo,v=d.level,y=e.state,b=y.scale,g=y.center,m=y.resolution,w=!e.stationary&&b>this._previousScale;if(this._previousScale=b,this.tiles.length=0,!n&&(b>h||b<f))return this.tiles.length=0,u.clear(),r.forEach((function(e){t.releaseTile(e)})),r.clear(),l.length=0,c.length=0,u.clear(),i.a.pool.release(a),!0;r.forEach((function(e){return e.visible=!0}));var O=0,j=0;if(p.length>0){var _,x=Vt(p);try{for(x.s();!(_=x.n()).done;)for(var k=_.value,S=k.row,M=k.colFrom,I=k.colTo,T=M;T<=I;T++){O++;var A=s.set(v,S,d.normalizeCol(T),d.getWorldForColumn(T)).id;if(r.has(A)){var C=r.get(A);C.isReady?(u.set(A,C),j++):w||this._addParentTile(A,u)}else{var E=void 0;if(this._tileCache&&this._tileCache.has(A)){if(E=this._tileCache.pop(A),this.tileIndex.set(A,E),E.isReady){u.set(A,E),j++;continue}}else E=this.acquireTile(s),this.tileIndex.set(A,E);w||this._addParentTile(A,u)}}}catch(U){x.e(U)}finally{x.f()}}var P=j===O;r.forEach((function(e,n){if(s.set(n),!u.has(n)){var r=t.tileInfoView.intersects(a,s),i="purge"===t.cachePolicy?s.level!==v:s.level>v;!r||!w&&P?!i&&r||c.push(n):e.isReady?l.push(n):i&&c.push(n)}}));var R,D=Vt(l);try{for(D.s();!(R=D.n()).done;){var L=R.value,N=r.get(L);N&&N.isReady&&u.set(L,N)}}catch(U){D.e(U)}finally{D.f()}var F,z=Vt(c);try{for(z.s();!(F=z.n()).done;){var V=F.value,G=r.get(V);this._tileCache?this._tileCache.add(G):this.releaseTile(G),r.delete(V)}}catch(U){z.e(U)}finally{z.f()}return u.forEach((function(e){return t.tiles.push(e)})),r.forEach((function(e){u.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(v,g,m),i.a.pool.release(a),u.clear(),P}}},{key:"clear",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.tileIndex;t&&n.forEach((function(t){e.releaseTile(t)})),n.clear()}},{key:"updateCacheSize",value:function(e){this._tileCache&&(this._tileCache.maxSize=e)}},{key:"_addParentTile",value:function(e,t){for(var n=e,r=null;n=this.tileInfoView.getTileParentId(n);)if(this.tileIndex.has(n)){if((r=this.tileIndex.get(n))&&r.isReady){t.has(r.key.id)||t.set(r.key.id,r);break}}else if(this._tileCache&&this._tileCache.has(n)&&(r=this._tileCache.pop(n),this.tileIndex.set(n,r),r&&r.isReady)){t.has(r.key.id)||t.set(r.key.id,r);break}}}]),e}()},"0ynT":function(e,t,n){"use strict";function r(e){return"h"in e&&"s"in e&&"v"in e}function i(e){return"l"in e&&"a"in e&&"b"in e}function a(e){return"l"in e&&"c"in e&&"h"in e}n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return v}));var o=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],s=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){var n,r,i=[];if(e[0].length!==t.length)throw"dimensions do not match";var a=e.length,o=e[0].length,s=0;for(n=0;n<a;n++){for(s=0,r=0;r<o;r++)s+=e[n][r]*t[r];i.push(s)}return i}function c(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),n=u(o,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function l(e){var t=u(s,[e.x/100,e.y/100,e.z/100]).map((function(e){return Math.min(1,Math.max(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function h(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function f(e){var t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function p(e){return h(c(e))}function d(e){return l(f(e))}function v(e){return"r"in(t=e)&&"g"in t&&"b"in t?e:a(e)?function(e){return l(f(function(e){var t=e.c,n=e.h;return{l:e.l,a:t*Math.cos(n),b:t*Math.sin(n)}}(e)))}(e):i(e)?d(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?l(e):r(e)?function(e){var t,n=(e.h+360)%360/60,r=e.v/100*255,i=r*(e.s/100),a=i*(1-Math.abs(n%2-1));switch(Math.floor(n)){case 0:t={r:i,g:a,b:0};break;case 1:t={r:a,g:i,b:0};break;case 2:t={r:0,g:i,b:a};break;case 3:t={r:0,g:a,b:i};break;case 4:t={r:a,g:0,b:i};break;case 5:case 6:t={r:i,g:0,b:a};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+r-i),t.g=Math.round(t.g+r-i),t.b=Math.round(t.b+r-i),t}(e):e;var t}function y(e){return r(e)?e:function(e){var t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),a=i-Math.min(t,n,r),o=i,s=0===a?0:i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4,u=0===a?0:a/o;return s<0&&(s+=6),{h:s*=60,s:u*=100,v:o*=100/255}}(v(e))}function b(e){return i(e)?e:p(v(e))}function g(e){return a(e)?e:function(e){return function(e){var t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return{l:t,c:i,h:a=a>0?a:a+2*Math.PI}}(h(c(e)))}(v(e))}function m(e,t){var n=p(e);return n.l*=1-t,d(n)}},"1/KW":function(e,t,n){"use strict";var r=n("rvq7");t.a=function(){function e(t,n){Wt(this,e),this._storage=new r.b,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return Zt(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}}]),e}()},"1/dN":function(e,t,n){"use strict";var r=n("cKKt");t.a=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this)).material=e.material,r.techniqueRep=e.techniqueRep,r.output=e.output,r}return Zt(n,[{key:"getTechnique",value:function(){return this.technique}},{key:"getPipelineState",value:function(e,t){return this.getTechnique().pipeline}},{key:"ensureResources",value:function(e){return 2}},{key:"ensureParameters",value:function(e){}}]),n}(r.a)},"15Hh":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return k})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return M})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return p})),n.d(t,"r",(function(){return f})),n.d(t,"s",(function(){return h})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return w}));var r=n("Cy1f"),i=n("QhKk");function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,v,y){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=h,e[11]=f,e[12]=p,e[13]=d,e[14]=v,e[15]=y,e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function c(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],v=t[13],y=t[14],b=t[15],g=n*s-r*o,m=n*u-i*o,w=n*c-a*o,O=r*u-i*s,j=r*c-a*s,_=i*c-a*u,x=l*v-h*d,k=l*y-f*d,S=l*b-p*d,M=h*y-f*v,I=h*b-p*v,T=f*b-p*y,A=g*T-m*I+w*M+O*S-j*k+_*x;return A?(A=1/A,e[0]=(s*T-u*I+c*M)*A,e[1]=(i*I-r*T-a*M)*A,e[2]=(v*_-y*j+b*O)*A,e[3]=(f*j-h*_-p*O)*A,e[4]=(u*S-o*T-c*k)*A,e[5]=(n*T-i*S+a*k)*A,e[6]=(y*w-d*_-b*m)*A,e[7]=(l*_-f*w+p*m)*A,e[8]=(o*I-s*S+c*x)*A,e[9]=(r*S-n*I-a*x)*A,e[10]=(d*j-v*w+b*g)*A,e[11]=(h*w-l*j-p*g)*A,e[12]=(s*k-o*M-u*x)*A,e[13]=(n*M-r*k+i*x)*A,e[14]=(v*m-d*O-y*g)*A,e[15]=(l*O-h*m+f*g)*A,e):null}function l(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],p=t[10],d=t[11],v=t[12],y=t[13],b=t[14],g=t[15],m=n[0],w=n[1],O=n[2],j=n[3];return e[0]=m*r+w*s+O*h+j*v,e[1]=m*i+w*u+O*f+j*y,e[2]=m*a+w*c+O*p+j*b,e[3]=m*o+w*l+O*d+j*g,m=n[4],w=n[5],O=n[6],j=n[7],e[4]=m*r+w*s+O*h+j*v,e[5]=m*i+w*u+O*f+j*y,e[6]=m*a+w*c+O*p+j*b,e[7]=m*o+w*l+O*d+j*g,m=n[8],w=n[9],O=n[10],j=n[11],e[8]=m*r+w*s+O*h+j*v,e[9]=m*i+w*u+O*f+j*y,e[10]=m*a+w*c+O*p+j*b,e[11]=m*o+w*l+O*d+j*g,m=n[12],w=n[13],O=n[14],j=n[15],e[12]=m*r+w*s+O*h+j*v,e[13]=m*i+w*u+O*f+j*y,e[14]=m*a+w*c+O*p+j*b,e[15]=m*o+w*l+O*d+j*g,e}function h(e,t,n){var r,i,a,o,s,u,c,l,h,f,p,d,v=n[0],y=n[1],b=n[2];return t===e?(e[12]=t[0]*v+t[4]*y+t[8]*b+t[12],e[13]=t[1]*v+t[5]*y+t[9]*b+t[13],e[14]=t[2]*v+t[6]*y+t[10]*b+t[14],e[15]=t[3]*v+t[7]*y+t[11]*b+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=h,e[9]=f,e[10]=p,e[11]=d,e[12]=r*v+s*y+h*b+t[12],e[13]=i*v+u*y+f*b+t[13],e[14]=a*v+c*y+p*b+t[14],e[15]=o*v+l*y+d*b+t[15]),e}function f(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,n,r){var a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_,x,k,S,M,I,T=r[0],A=r[1],C=r[2],E=Math.sqrt(T*T+A*A+C*C);return E<i.a?null:(T*=E=1/E,A*=E,C*=E,a=Math.sin(n),s=1-(o=Math.cos(n)),u=t[0],c=t[1],l=t[2],h=t[3],f=t[4],p=t[5],d=t[6],v=t[7],y=t[8],b=t[9],g=t[10],m=t[11],w=T*T*s+o,O=A*T*s+C*a,j=C*T*s-A*a,_=T*A*s-C*a,x=A*A*s+o,k=C*A*s+T*a,S=T*C*s+A*a,M=A*C*s-T*a,I=C*C*s+o,e[0]=u*w+f*O+y*j,e[1]=c*w+p*O+b*j,e[2]=l*w+d*O+g*j,e[3]=h*w+v*O+m*j,e[4]=u*_+f*x+y*k,e[5]=c*_+p*x+b*k,e[6]=l*_+d*x+g*k,e[7]=h*_+v*x+m*k,e[8]=u*S+f*M+y*I,e[9]=c*S+p*M+b*I,e[10]=l*S+d*M+g*I,e[11]=h*S+v*M+m*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function d(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+h*r,e[7]=u*i+f*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=h*i-s*r,e[11]=f*i-u*r,e}function v(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-h*r,e[3]=u*i-f*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+h*i,e[11]=u*r+f*i,e}function y(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+h*r,e[3]=u*i+f*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=h*i-s*r,e[7]=f*i-u*r,e}function b(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function m(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,c=a+a,l=r*s,h=r*u,f=r*c,p=i*u,d=i*c,v=a*c,y=o*s,b=o*u,g=o*c;return e[0]=1-(p+v),e[1]=h+g,e[2]=f-b,e[3]=0,e[4]=h-g,e[5]=1-(l+v),e[6]=d+y,e[7]=0,e[8]=f+b,e[9]=d-y,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}var j=Object(r.e)();function _(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function x(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,p=i*s,d=i*u,v=a*o,y=a*s,b=a*u;return e[0]=1-h-d,e[1]=l+b,e[2]=f-y,e[3]=0,e[4]=l-b,e[5]=1-c-d,e[6]=p+v,e[7]=0,e[8]=f+y,e[9]=p-v,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}function S(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e}function M(e,t,n,r){var a,o,u,c,l,h,f,p,d,v,y=t[0],b=t[1],g=t[2],m=r[0],w=r[1],O=r[2],j=n[0],_=n[1],x=n[2];return Math.abs(y-j)<i.a&&Math.abs(b-_)<i.a&&Math.abs(g-x)<i.a?s(e):(f=y-j,p=b-_,d=g-x,a=w*(d*=v=1/Math.sqrt(f*f+p*p+d*d))-O*(p*=v),o=O*(f*=v)-m*d,u=m*p-w*f,(v=Math.sqrt(a*a+o*o+u*u))?(a*=v=1/v,o*=v,u*=v):(a=0,o=0,u=0),c=p*u-d*o,l=d*a-f*u,h=f*o-p*a,(v=Math.sqrt(c*c+l*l+h*h))?(c*=v=1/v,l*=v,h*=v):(c=0,l=0,h=0),e[0]=a,e[1]=c,e[2]=f,e[3]=0,e[4]=o,e[5]=l,e[6]=p,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=-(a*y+o*b+u*g),e[13]=-(c*y+l*b+h*g),e[14]=-(f*y+p*b+d*g),e[15]=1,e)}function I(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}Object.freeze({__proto__:null,copy:a,set:o,identity:s,transpose:u,invert:c,adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],v=t[13],y=t[14],b=t[15];return e[0]=s*(f*b-p*y)-h*(u*b-c*y)+v*(u*p-c*f),e[1]=-(r*(f*b-p*y)-h*(i*b-a*y)+v*(i*p-a*f)),e[2]=r*(u*b-c*y)-s*(i*b-a*y)+v*(i*c-a*u),e[3]=-(r*(u*p-c*f)-s*(i*p-a*f)+h*(i*c-a*u)),e[4]=-(o*(f*b-p*y)-l*(u*b-c*y)+d*(u*p-c*f)),e[5]=n*(f*b-p*y)-l*(i*b-a*y)+d*(i*p-a*f),e[6]=-(n*(u*b-c*y)-o*(i*b-a*y)+d*(i*c-a*u)),e[7]=n*(u*p-c*f)-o*(i*p-a*f)+l*(i*c-a*u),e[8]=o*(h*b-p*v)-l*(s*b-c*v)+d*(s*p-c*h),e[9]=-(n*(h*b-p*v)-l*(r*b-a*v)+d*(r*p-a*h)),e[10]=n*(s*b-c*v)-o*(r*b-a*v)+d*(r*c-a*s),e[11]=-(n*(s*p-c*h)-o*(r*p-a*h)+l*(r*c-a*s)),e[12]=-(o*(h*y-f*v)-l*(s*y-u*v)+d*(s*f-u*h)),e[13]=n*(h*y-f*v)-l*(r*y-i*v)+d*(r*f-i*h),e[14]=-(n*(s*y-u*v)-o*(r*y-i*v)+d*(r*u-i*s)),e[15]=n*(s*f-u*h)-o*(r*f-i*h)+l*(r*u-i*s),e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],p=e[12],d=e[13],v=e[14],y=e[15];return(t*o-n*a)*(h*y-f*v)-(t*s-r*a)*(l*y-f*d)+(t*u-i*a)*(l*v-h*d)+(n*s-r*o)*(c*y-f*p)-(n*u-i*o)*(c*v-h*p)+(r*u-i*s)*(c*d-l*p)},multiply:l,translate:h,scale:f,rotate:p,rotateX:d,rotateY:v,rotateZ:y,fromTranslation:b,fromScaling:g,fromRotation:function(e,t,n){var r,a,o,s=n[0],u=n[1],c=n[2],l=Math.sqrt(s*s+u*u+c*c);return l<i.a?null:(s*=l=1/l,u*=l,c*=l,r=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=s*s*o+a,e[1]=u*s*o+c*r,e[2]=c*s*o-u*r,e[3]=0,e[4]=s*u*o-c*r,e[5]=u*u*o+a,e[6]=c*u*o+s*r,e[7]=0,e[8]=s*c*o+u*r,e[9]=u*c*o-s*r,e[10]=c*c*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:m,fromYRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:w,fromRotationTranslation:O,fromQuat2:function(e,t){var n=j,r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=r*r+i*i+a*a+o*o;return h>0?(n[0]=2*(s*o+l*r+u*a-c*i)/h,n[1]=2*(u*o+l*i+c*r-s*a)/h,n[2]=2*(c*o+l*a+s*i-u*r)/h):(n[0]=2*(s*o+l*r+u*a-c*i),n[1]=2*(u*o+l*i+c*r-s*a),n[2]=2*(c*o+l*a+s*i-u*r)),O(e,t,n),e},getTranslation:_,getScaling:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(u*u+c*c+l*l),e},getRotation:function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},fromRotationTranslationScale:function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,p=i*l,d=a*c,v=a*l,y=o*l,b=s*u,g=s*c,m=s*l,w=r[0],O=r[1],j=r[2];return e[0]=(1-(d+y))*w,e[1]=(f+m)*w,e[2]=(p-g)*w,e[3]=0,e[4]=(f-m)*O,e[5]=(1-(h+y))*O,e[6]=(v+b)*O,e[7]=0,e[8]=(p+g)*j,e[9]=(v-b)*j,e[10]=(1-(h+d))*j,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],u=t[3],c=a+a,l=o+o,h=s+s,f=a*c,p=a*l,d=a*h,v=o*l,y=o*h,b=s*h,g=u*c,m=u*l,w=u*h,O=r[0],j=r[1],_=r[2],x=i[0],k=i[1],S=i[2],M=(1-(v+b))*O,I=(p+w)*O,T=(d-m)*O,A=(p-w)*j,C=(1-(f+b))*j,E=(y+g)*j,P=(d+m)*_,R=(y-g)*_,D=(1-(f+v))*_;return e[0]=M,e[1]=I,e[2]=T,e[3]=0,e[4]=A,e[5]=C,e[6]=E,e[7]=0,e[8]=P,e[9]=R,e[10]=D,e[11]=0,e[12]=n[0]+x-(M*x+A*k+P*S),e[13]=n[1]+k-(I*x+C*k+R*S),e[14]=n[2]+S-(T*x+E*k+D*S),e[15]=1,e},fromQuat:x,frustum:k,perspective:function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},perspectiveFromFieldOfView:function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},ortho:S,lookAt:M,targetTo:function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],u=r[1],c=r[2],l=i-n[0],h=a-n[1],f=o-n[2],p=l*l+h*h+f*f;p>0&&(l*=p=1/Math.sqrt(p),h*=p,f*=p);var d=u*f-c*h,v=c*l-s*f,y=s*h-u*l;return(p=d*d+v*v+y*y)>0&&(d*=p=1/Math.sqrt(p),v*=p,y*=p),e[0]=d,e[1]=v,e[2]=y,e[3]=0,e[4]=h*y-f*v,e[5]=f*d-l*y,e[6]=l*v-h*d,e[7]=0,e[8]=l,e[9]=h,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},subtract:I,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},equals:function(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],p=e[10],d=e[11],v=e[12],y=e[13],b=e[14],g=e[15],m=t[0],w=t[1],O=t[2],j=t[3],_=t[4],x=t[5],k=t[6],S=t[7],M=t[8],I=t[9],T=t[10],A=t[11],C=t[12],E=t[13],P=t[14],R=t[15];return Math.abs(n-m)<=i.a*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-w)<=i.a*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(a-O)<=i.a*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(o-j)<=i.a*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(s-_)<=i.a*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-x)<=i.a*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-k)<=i.a*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-S)<=i.a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-M)<=i.a*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(f-I)<=i.a*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(p-T)<=i.a*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(d-A)<=i.a*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(v-C)<=i.a*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(y-E)<=i.a*Math.max(1,Math.abs(y),Math.abs(E))&&Math.abs(b-P)<=i.a*Math.max(1,Math.abs(b),Math.abs(P))&&Math.abs(g-R)<=i.a*Math.max(1,Math.abs(g),Math.abs(R))},mul:l,sub:I})},"16wW":function(e,t,n){"use strict";var r={};(0,n("vn/o").assign)(r,n("QSbz"),n("cX6o"),n("LOvY")),e.exports=r},"1Ana":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("TDcG")),o=n("WbKI"),s=n("04ZG"),u=n("zlDU"),c=(n("4EHJ"),n("ju1D"),n("ku/q")),l=(n("9AIY"),n("LE9a")),h=n("TRCY"),f=n("6dDx"),p=n("Ilhi"),d=i.a.getLogger("esri.layers.TileLayer"),v=l.a.ofType(f.a),y=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).allSublayers=new h.a({root:$t(e),rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),e.sublayersSourceJSON={2:{},3:{},4:{},5:{}},e.watch("sublayers",(function(t,n){return e._handleSublayersChange(t,n)}),!0),e}return Zt(n,[{key:"readSublayers",value:function(e,t){if(t&&e){var n=this.sublayersSourceJSON,r=Object(c.d)(t.origin);if(!(r<2||(n[r]={context:t,visibleLayers:e.visibleLayers||n[r].visibleLayers,layers:e.layers||n[r].layers},r>2))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),o=i.sublayers,s=i.origin,u=Object(a.a)(this);u.setDefaultOrigin(s),this._set("sublayers",new v(o)),u.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,n=Object(c.d)("web-document"===e?"web-map":e),r=2,i=this.sublayersSourceJSON[2].layers,a=this.sublayersSourceJSON[2].context,o=null,s=Vt([3,4,5].filter((function(e){return e<=n})));try{for(s.s();!(t=s.n()).done;){var u=t.value,l=this.sublayersSourceJSON[u];Object(p.b)(l.layers)&&(r=u,i=l.layers,a=l.context,l.visibleLayers&&(o={visibleLayers:l.visibleLayers,context:l.context}))}}catch(E){s.e(E)}finally{s.f()}var h,d=[3,4,5].filter((function(e){return e>r&&e<=n})),y=null,b=Vt(d);try{for(b.s();!(h=b.n()).done;){var g=h.value,m=this.sublayersSourceJSON[g],w=m.layers,O=m.visibleLayers,j=m.context;w&&(y={layers:w,context:j}),O&&(o={visibleLayers:O,context:j})}}catch(E){b.e(E)}finally{b.f()}var _=function(e,t){var n=[],r={};return e?(e.forEach((function(e){var i=new f.a;if(i.read(e,t),r[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var a=r[e.parentLayerId];a.sublayers||(a.sublayers=[]),a.sublayers.unshift(i)}else n.unshift(i)})),n):n}(i,a),x=new Map,k=new Set;if(y){var S,M=Vt(y.layers);try{for(M.s();!(S=M.n()).done;){var I=S.value;x.set(I.id,I)}}catch(E){M.e(E)}finally{M.f()}}if(o){var T,A=Vt(o.visibleLayers);try{for(A.s();!(T=A.n()).done;){var C=T.value;k.add(C)}}catch(E){A.e(E)}finally{A.f()}}return function e(t,n){t&&t.forEach((function(t){n(t),t.sublayers&&t.sublayers.length&&e(t.sublayers,n)}))}(_,(function(e){y&&e.read(x.get(e.id),y.context),o&&e.read({defaultVisibility:k.has(e.id)},o.context)})),{origin:Object(c.b)(r),sublayers:new v({items:_})}}},{key:"read",value:function(e,t){Dt(en(n.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var n=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=n,e.layer=n})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=n,t.layer=n})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){d.error(new u.a("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:n})),e.preventDefault()})),"sublayers-owner"))}}]),n}(e);return Object(r.a)([Object(o.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(r.a)([Object(o.b)({readOnly:!0,type:l.a.ofType(f.a)})],t.prototype,"serviceSublayers",void 0),Object(r.a)([Object(o.b)({value:null,type:v,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(r.a)([Object(s.a)("esri.layers.mixins.SublayersOwner")],t),t}},"1E6V":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=n("4EHJ"),s=(n("ju1D"),n("9AIY"),n("kglp")),u=n("Lqtk"),c=n("u3Ia"),l=n("Ehki"),h=(n("4GrV"),n("pXG8")),f=n("qatw"),p=n("vaBp"),d=n("Fpx9"),v=n("UH+o"),y=n("2jrz"),b=n("1lHr"),g=n("xazm"),m=n("jksI"),w=n("rJHQ"),O=n("fQPN"),j=n("Nvf0"),_=n("UhwK"),x=n("GeAh"),k=n("5SEJ"),S=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).url=null,r}return Zt(n,[{key:"areasAndLengths",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(c.c)(t),a=Nt(Nt({},i.query),{},{f:"json"},n.toJSON()),o=Object(c.a)(a,r),e.abrupt("return",Object(u.default)(i.path+"/areasAndLengths",o).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"autoComplete",value:function(e,t,n){return(r=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[0].spatialReference,o=Object(c.c)(t),s=Nt(Nt({},o.query),{},{f:"json",sr:JSON.stringify(a.toJSON()),polygons:JSON.stringify(Object(h.b)(n).geometries),polylines:JSON.stringify(Object(h.b)(r).geometries)}),f=Object(c.a)(s,i),e.abrupt("return",Object(u.default)(o.path+"/autoComplete",f).then((function(e){return(e.data.geometries||[]).map((function(e){var t=e.rings;return new l.a({spatialReference:a,rings:t})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return r.apply(this,arguments)})(this.url,e,t,n);var r}},{key:"buffer",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(c.c)(t),a=Nt(Nt({},i.query),{},{f:"json"},n.toJSON()),o=n.outSpatialReference||n.geometries[0].spatialReference,s=Object(c.a)(a,r),e.abrupt("return",Object(u.default)(i.path+"/buffer",s).then((function(e){return(e.data.geometries||[]).map((function(e){var t=e.rings;return new l.a({spatialReference:o,rings:t})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"convexHull",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n[0].spatialReference,a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json",sr:JSON.stringify(i.toJSON()),geometries:JSON.stringify(Object(h.b)(n))}),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/convexHull",s).then((function(e){var t=e.data;return Object(f.a)(t.geometry).set({spatialReference:i})})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"cut",value:function(e,t,n){return(r=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,l,h,p,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(c.c)(t),o=n[0].spatialReference,s=Nt(Nt({},i),{},{query:Nt(Nt({},a.query),{},{f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:Object(f.c)(n[0]),geometries:n}),cutter:JSON.stringify(r)})}),e.next=5,Object(u.default)(a.path+"/cut",s);case 5:return l=e.sent,h=l.data,p=h.cutIndexes,d=h.geometries,v=void 0===d?[]:d,e.abrupt("return",{cutIndexes:p,geometries:v.map((function(e){var t=Object(f.a)(e);return t.spatialReference=o,t}))});case 11:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return r.apply(this,arguments)})(this.url,e,t,n);var r}},{key:"densify",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.geometries[0].spatialReference,a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},n.toJSON()),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/densify",s).then((function(e){return(e.data.geometries||[]).map((function(e){return Object(f.a)(e).set({spatialReference:i})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"difference",value:function(e,t,n){return(r=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[0].spatialReference,o=Object(c.c)(t),s={query:Nt(Nt({},o.query),{},{f:"json",sr:JSON.stringify(a.toJSON()),geometries:JSON.stringify(Object(h.b)(n)),geometry:JSON.stringify({geometryType:Object(f.c)(r),geometry:r.toJSON()})})},e.abrupt("return",(i&&(s=Nt(Nt({},i),s)),Object(u.default)(o.path+"/difference",s).then((function(e){return(e.data.geometries||[]).map((function(e){return Object(f.a)(e).set({spatialReference:a})}))}))));case 3:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return r.apply(this,arguments)})(this.url,e,t,n);var r}},{key:"distance",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(c.c)(t),a=Nt(Nt({},i.query),{},{f:"json"},n.toJSON()),o=Object(c.a)(a,r),e.abrupt("return",Object(u.default)(i.path+"/distance",o).then((function(e){var t=e.data;return t&&t.distance})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"fromGeoCoordinateString",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i={}).sr=null!=n.sr&&"object"==typeof n.sr?n.sr.wkid||JSON.stringify(n.sr):n.sr,i.strings=JSON.stringify(n.strings),i.conversionType=p.a.toJSON(n.conversionType||"mgrs"),i.conversionMode=n.conversionMode,a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},i),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/fromGeoCoordinateString",s).then((function(e){return e.data.coordinates})));case 4:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"generalize",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=v.a.from(n)).toJSON(),a=Object(d.a)(n),o=Object(c.c)(t),s=Nt(Nt({},o.query),{},{f:"json"},a),l=i.geometries[0].spatialReference,h=Object(c.a)(s,r),e.abrupt("return",Object(u.default)(o.path+"/generalize",h).then((function(e){return(e.data.geometries||[]).map((function(e){return Object(f.a)(e).set({spatialReference:l})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"intersect",value:function(e,t,n){return(r=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[0].spatialReference,o=Object(c.c)(t),s=Nt(Nt({},o.query),{},{f:"json",sr:JSON.stringify(a.toJSON()),geometries:JSON.stringify(Object(h.b)(n)),geometry:JSON.stringify({geometryType:Object(f.c)(r),geometry:r.toJSON()})}),l=Object(c.a)(s,i),e.abrupt("return",Object(u.default)(o.path+"/intersect",l).then((function(e){return(e.data.geometries||[]).map((function(e){return Object(f.a)(e).set({spatialReference:a})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return r.apply(this,arguments)})(this.url,e,t,n);var r}},{key:"labelPoints",value:function(e,t){return function(e,t,n){var r=t.map((function(e){return e.toJSON()})),i=t[0].spatialReference,a=Object(c.c)(e),o=Nt(Nt({},a.query),{},{f:"json",sr:i.wkid?i.wkid:JSON.stringify(i.toJSON()),polygons:JSON.stringify(r)}),s=Object(c.a)(o,n);return Object(u.default)(a.path+"/labelPoints",s).then((function(e){return(e.data.labelPoints||[]).map((function(e){return Object(f.a)(e).set({spatialReference:i})}))}))}(this.url,e,t)}},{key:"lengths",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.from(n),i=Object(y.a)(n),a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},i),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/lengths",s).then((function(e){return e.data})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"offset",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.a.from(n),i=Object(g.a)(n),a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},i),s=n.geometries[0].spatialReference,l=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/offset",l).then((function(e){return(e.data.geometries||[]).map((function(e){return Object(f.a)(e).set({spatialReference:s})}))})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}))},{key:"project",value:function(e,t){return Object(w.a)(this.url,e,t)}},{key:"relation",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.from(n),i=Object(O.a)(n),a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},i),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/relation",s).then((function(e){return e.data.relations})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"reshape",value:function(e,t,n){return(r=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.spatialReference,o=Object(c.c)(t),s=Nt(Nt({},o.query),{},{f:"json",sr:JSON.stringify(a.toJSON()),target:JSON.stringify({geometryType:Object(f.c)(n),geometry:n.toJSON()}),reshaper:JSON.stringify(r.toJSON())}),l=Object(c.a)(s,i),e.abrupt("return",Object(u.default)(o.path+"/reshape",l).then((function(e){var t=e.data;return Object(f.a)(t.geometry).set({spatialReference:a})})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return r.apply(this,arguments)})(this.url,e,t,n);var r}},{key:"simplify",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,c,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?Object(o.J)(t):t,a=n[0].spatialReference,s=Object(f.c)(n[0]),c=Nt(Nt({},r),{},{query:Nt(Nt({},i.query),{},{f:"json",sr:a.wkid?a.wkid:JSON.stringify(a),geometries:JSON.stringify(Object(h.b)(n))})}),e.next=6,Object(u.default)(i.path+"/simplify",c);case 6:return l=e.sent,p=l.data,e.abrupt("return",Object(h.a)(p.geometries,s,a));case 9:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"toGeoCoordinateString",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i={}).sr=null!=n.sr&&"object"==typeof n.sr?n.sr.wkid||JSON.stringify(n.sr):n.sr,i.coordinates=JSON.stringify(n.coordinates),i.conversionType=p.a.toJSON(n.conversionType||"mgrs"),i.conversionMode=n.conversionMode,i.numOfDigits=n.numOfDigits,i.rounding=n.rounding,i.addSpaces=n.addSpaces,a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},i),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/toGeoCoordinateString",s).then((function(e){return e.data.strings})));case 4:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"trimExtend",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.a.from(n),i=Object(x.a)(n),a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json"},i),s=n.sr,l=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/trimExtend",l).then((function(e){return(e.data.geometries||[]).map((function(e){var t=e.paths;return new _.a({spatialReference:s,paths:t})}))})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}},{key:"union",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n[0].spatialReference,a=Object(c.c)(t),o=Nt(Nt({},a.query),{},{f:"json",sr:JSON.stringify(i.toJSON()),geometries:JSON.stringify(Object(h.b)(n))}),s=Object(c.a)(o,r),e.abrupt("return",Object(u.default)(a.path+"/union",s).then((function(e){var t=e.data;return Object(f.a)(t.geometry).set({spatialReference:i})})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,t);var n}}]),n}(s.a);S.UNIT_METER=9001,S.UNIT_GERMAN_METER=9031,S.UNIT_FOOT=9002,S.UNIT_SURVEY_FOOT=9003,S.UNIT_CLARKE_FOOT=9005,S.UNIT_FATHOM=9014,S.UNIT_NAUTICAL_MILE=9030,S.UNIT_SURVEY_CHAIN=9033,S.UNIT_SURVEY_LINK=9034,S.UNIT_SURVEY_MILE=9035,S.UNIT_KILOMETER=9036,S.UNIT_CLARKE_YARD=9037,S.UNIT_CLARKE_CHAIN=9038,S.UNIT_CLARKE_LINK=9039,S.UNIT_SEARS_YARD=9040,S.UNIT_SEARS_FOOT=9041,S.UNIT_SEARS_CHAIN=9042,S.UNIT_SEARS_LINK=9043,S.UNIT_BENOIT_1895A_YARD=9050,S.UNIT_BENOIT_1895A_FOOT=9051,S.UNIT_BENOIT_1895A_CHAIN=9052,S.UNIT_BENOIT_1895A_LINK=9053,S.UNIT_BENOIT_1895B_YARD=9060,S.UNIT_BENOIT_1895B_FOOT=9061,S.UNIT_BENOIT_1895B_CHAIN=9062,S.UNIT_BENOIT_1895B_LINK=9063,S.UNIT_INDIAN_FOOT=9080,S.UNIT_INDIAN_1937_FOOT=9081,S.UNIT_INDIAN_1962_FOOT=9082,S.UNIT_INDIAN_1975_FOOT=9083,S.UNIT_INDIAN_YARD=9084,S.UNIT_INDIAN_1937_YARD=9085,S.UNIT_INDIAN_1962_YARD=9086,S.UNIT_INDIAN_1975_YARD=9087,S.UNIT_FOOT_1865=9070,S.UNIT_RADIAN=9101,S.UNIT_DEGREE=9102,S.UNIT_ARCMINUTE=9103,S.UNIT_ARCSECOND=9104,S.UNIT_GRAD=9105,S.UNIT_GON=9106,S.UNIT_MICRORADIAN=9109,S.UNIT_ARCMINUTE_CENTESIMAL=9112,S.UNIT_ARCSECOND_CENTESIMAL=9113,S.UNIT_MIL6400=9114,S.UNIT_BRITISH_1936_FOOT=9095,S.UNIT_GOLDCOAST_FOOT=9094,S.UNIT_INTERNATIONAL_CHAIN=109003,S.UNIT_INTERNATIONAL_LINK=109004,S.UNIT_INTERNATIONAL_YARD=109001,S.UNIT_STATUTE_MILE=9093,S.UNIT_SURVEY_YARD=109002,S.UNIT_50KILOMETER_LENGTH=109030,S.UNIT_150KILOMETER_LENGTH=109031,S.UNIT_DECIMETER=109005,S.UNIT_CENTIMETER=109006,S.UNIT_MILLIMETER=109007,S.UNIT_INTERNATIONAL_INCH=109008,S.UNIT_US_SURVEY_INCH=109009,S.UNIT_INTERNATIONAL_ROD=109010,S.UNIT_US_SURVEY_ROD=109011,S.UNIT_US_NAUTICAL_MILE=109012,S.UNIT_UK_NAUTICAL_MILE=109013,S.UNIT_SQUARE_INCHES="esriSquareInches",S.UNIT_SQUARE_FEET="esriSquareFeet",S.UNIT_SQUARE_YARDS="esriSquareYards",S.UNIT_ACRES="esriAcres",S.UNIT_SQUARE_MILES="esriSquareMiles",S.UNIT_SQUARE_MILLIMETERS="esriSquareMillimeters",S.UNIT_SQUARE_CENTIMETERS="esriSquareCentimeters",S.UNIT_SQUARE_DECIMETERS="esriSquareDecimeters",S.UNIT_SQUARE_METERS="esriSquareMeters",S.UNIT_ARES="esriAres",S.UNIT_HECTARES="esriHectares",S.UNIT_SQUARE_KILOMETERS="esriSquareKilometers",Object(r.a)([Object(i.b)()],S.prototype,"url",void 0),S=Object(r.a)([Object(a.a)("esri.tasks.GeometryService")],S),t.default=S},"1EXT":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o}));var r=n("nvBr"),i=n("NrhG");function a(e){var t=Object(i.k)(e);if("CIMTextSymbol"===t.type)return t.height;var n=0;if(t.symbolLayers){var r,a=Vt(t.symbolLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;Object(i.g)(o)&&o.size>n?n=o.size:Object(i.i)(o)&&o.width>n?n=o.width:Object(i.f)(o)}}catch(s){a.e(s)}finally{a.f()}}return n}function o(e,t,n){var r=Object(i.k)(e),o=a(e);0!==o?s(r,t/o,!1,n):function(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers){var n,r=Vt(e.symbolLayers);try{for(r.s();!(n=r.n()).done;){var i=n.value;switch(i.type){case"CIMPictureMarker":case"CIMVectorMarker":i.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":i.width=t}}}catch(a){r.e(a)}finally{r.f()}}}else e.height=t}(r,t)}function s(e,t,n,r){if("CIMTextSymbol"!==e.type){if(n&&e.effects){var i,a=Vt(e.effects);try{for(a.s();!(i=a.n()).done;){c(i.value,t)}}catch(f){a.e(f)}finally{a.f()}}if(e.symbolLayers){var o,l=Vt(e.symbolLayers);try{for(l.s();!(o=l.n()).done;){var h=o.value;switch(h.type){case"CIMPictureMarker":case"CIMVectorMarker":u(h,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=r&&r.preserveOutlineWidth||(h.width*=t);break;case"CIMPictureFill":h.height*=t,h.offsetX*=t,h.offsetY*=t;break;case"CIMHatchFill":s(h.lineSymbol,t,!0,Nt(Nt({},r),{},{preserveOutlineWidth:!1})),h.offsetX*=t,h.offsetY*=t,h.separation*=t}}}catch(f){l.e(f)}finally{l.f()}}}else e.height*=t}function u(e,t,n){if(e.markerPlacement&&function(e,t){switch(Object(i.h)(e)&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){var n=e.placementTemplate.map((function(e){return e*t}));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){var r=e.placementTemplate.map((function(e){return e*t}));e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t}}(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics){var r,a=Vt(e.markerGraphics);try{for(a.s();!(r=a.n()).done;){var o=r.value;e.scaleSymbolsProportionally||s(o.symbol,t,!0,n)}}catch(u){a.e(u)}finally{a.f()}}}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){var n=e.dashTemplate.map((function(e){return e*t}));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t}}function l(e){var t=[];return function e(t,n){var r;r="CIMTextSymbol"===t.type?t.symbol:t;var a="CIMPolygonSymbol"===t.type;if(r.symbolLayers){var o,s=Vt(r.symbolLayers);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!(u.colorLocked||a&&(Object(i.i)(u)||Object(i.g)(u)&&u.markerPlacement&&Object(i.h)(u.markerPlacement))))switch(u.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":u.markerGraphics.forEach((function(t){e(t.symbol,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":h(n,u.color);break;case"CIMHatchFill":e(u.lineSymbol,n)}}}catch(c){s.e(c)}finally{s.f()}}}(Object(i.k)(e),t),t.length?new r.a(Object(i.e)(t[0])):null}function h(e,t){var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){if(n.value.join(".")===t.join("."))return}}catch(i){r.e(i)}finally{r.f()}e.push(t)}},"1Mqo":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n("wSAH");var r=n("+opI");function i(e){return e}var a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},o=Object(r.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function s(e,t,n){var r=new Date(e.getTime());if(t&&n){var i=a[n],o=i.getter,s=i.setter,u=i.multiplier;r[s](r[o]()+t*u)}return r}var u={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},"1ff1":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n("+h6m"),i=n("fOQB"),a=n("of9L"),o=n("D6bk"),s=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],u=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=null;switch(t){case u:l=new Float32Array([a,a,0,0,c,a,1,0,a,c,0,1,c,c,1,1]);break;case s:default:l=new Float32Array([a,a,c,a,a,c,c,c])}return new o.a(e,n,{geometry:t},{geometry:i.a.createVertex(e,35044,l)})}function l(e){return new a.a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"1hFN":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).title=null,e}return Zt(n,[{key:"clone",value:function(){return new r({title:this.title})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"title",void 0),u=r=Object(i.a)([Object(o.a)("esri.renderers.support.LegendOptions")],u),t.a=u},"1jaj":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return i}));var r=n("IlWj"),i=Math.PI/180,a=/SPHEROID\[([^\]]+)]/i,o=r.a.radius,s=r.a.eccentricitySquared,u={a1:o*s,a2:o*s*o*s,a3:o*s*s/2,a4:o*s*o*s*2.5,a5:o*s+o*s*s/2,a6:1-s},c={4326:{a:r.a.radius,f:r.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:r.c.radius,f:r.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:r.b.radius,f:r.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:r.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},"1lHr":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("UhwK"),c=n("qatw");n("4GrV");var l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).calculationType=null,r.geodesic=null,r.lengthUnit=null,r.polylines=null,r}return n}(s.a);Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"calculationType",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:!0}})],l.prototype,"geodesic",void 0),Object(r.a)([Object(a.b)({json:{write:!0}})],l.prototype,"lengthUnit",void 0),Object(r.a)([Object(a.b)({type:[u.a],json:{read:{reader:function(e){return e?e.map((function(e){return Object(c.a)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],l.prototype,"polylines",void 0),(l=Object(r.a)([Object(o.a)("esri.tasks.support.LengthsParameters")],l)).from=Object(i.m)(l),t.a=l},"1z6z":function(e,t,n){var r=n("2GIW");e.exports=function(e,t){var n=r(e,t);location.href="data:application/zip;base64,"+n}},"2+LD":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("EyXx"),i=function(){r.a.workers.loaderUrl="https://js.arcgis.com/4.17/dojo/dojo-lite.js",r.a.workers.loaderConfig={baseUrl:"https://js.arcgis.com/4.17/dojo",packages:[{name:"esri",location:"https://js.arcgis.com/4.17/esri"},{name:"dojo",location:"https://js.arcgis.com/4.17/dojo"},{name:"moment",location:"https://js.arcgis.com/4.17/moment"}]}}},"21Ip":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("qRWG")),l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="simple-line",r.width=.75,r}return Zt(n,[{key:"hash",value:function(){return"".concat(this.type,".").concat(this.width)}}]),n}(n("DZP5").a);Object(r.a)([Object(s.a)({esriSLS:"simple-line"},{readOnly:!0})],l.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:Number,cast:c.k,json:{write:!0}})],l.prototype,"width",void 0);var h,f=l=Object(r.a)([Object(u.a)("esri.symbols.LineSymbol")],l),p=n("r88o"),d=n("Cduq"),v=n("ag7Y"),y=n("nvBr"),b=h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).placement="begin-end",r.type="line-marker",r.style="arrow",r}return Zt(n,[{key:"writeStyle",value:function(e,t,n,r){t[n]="web-map"===(null==r?void 0:r.origin)?"arrow":e}},{key:"color",set:function(e){this._set("color",e)}},{key:"readColor",value:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}},{key:"writeColor",value:function(e,t,n,r){"web-map"===(null==r?void 0:r.origin)||(t[n]=e)}},{key:"clone",value:function(){return new h({color:Object(i.a)(this.color),placement:this.placement,style:this.style})}},{key:"hash",value:function(){var e;return"".concat(this.placement,".").concat(null==(e=this.color)?void 0:e.hash(),".").concat(this.style)}}]),n}(v.a);Object(r.a)([Object(a.b)({type:["begin","end","begin-end"],json:{write:!0}})],b.prototype,"placement",void 0),Object(r.a)([Object(s.a)({"line-marker":"line-marker"},{readOnly:!0}),Object(a.b)({json:{origins:{"web-map":{write:!1}}}})],b.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:["arrow","circle","square","diamond","cross","x"]})],b.prototype,"style",void 0),Object(r.a)([Object(d.a)("style")],b.prototype,"writeStyle",null),Object(r.a)([Object(a.b)({type:y.a,value:null,json:{write:{allowNull:!0}}})],b.prototype,"color",null),Object(r.a)([Object(p.a)("color")],b.prototype,"readColor",null),Object(r.a)([Object(d.a)("color")],b.prototype,"writeColor",null);var g,m=b=h=Object(r.a)([Object(u.a)("esri.symbols.LineSymbolMarker")],b),w=new o.a({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"}),O=g=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).type="simple-line",e.style="solid",e.cap="round",e.join="round",e.marker=null,e.miterLimit=2,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r,i,a){if(e&&"string"!=typeof e)return e;var o={};return null!=e&&(o.style=e),null!=t&&(o.color=t),null!=n&&(o.width=Object(c.k)(n)),null!=r&&(o.cap=r),null!=i&&(o.join=i),null!=a&&(o.miterLimit=Object(c.k)(a)),o}},{key:"clone",value:function(){var e;return new g({color:Object(i.a)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(e=this.marker)?void 0:e.clone()})}},{key:"hash",value:function(){var e,t;return"".concat(Dt(en(n.prototype),"hash",this).call(this),".").concat(null==(e=this.color)?void 0:e.hash(),".").concat(this.style,".").concat(this.cap,".").concat(this.join,".").concat(this.miterLimit,".").concat(null==(t=this.marker)?void 0:t.hash())}}]),n}(f);Object(r.a)([Object(s.a)({esriSLS:"simple-line"},{readOnly:!0})],O.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:w.apiValues,json:{read:w.read,write:w.write}})],O.prototype,"style",void 0),Object(r.a)([Object(a.b)({type:["butt","round","square"],json:{write:{overridePolicy:function(e,t,n){return{enabled:"round"!==e&&(null==n||null==n.origin)}}}}})],O.prototype,"cap",void 0),Object(r.a)([Object(a.b)({type:["miter","round","bevel"],json:{write:{overridePolicy:function(e,t,n){return{enabled:"round"!==e&&(null==n||null==n.origin)}}}}})],O.prototype,"join",void 0),Object(r.a)([Object(a.b)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":m}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"marker",void 0),Object(r.a)([Object(a.b)({type:Number,json:{read:!1,write:!1}})],O.prototype,"miterLimit",void 0),O=g=Object(r.a)([Object(u.a)("esri.symbols.SimpleLineSymbol")],O),t.a=O},"2GIW":function(e,t,n){var r=n("WqGO"),i=n("J7T7"),a=n("LXJO"),o=n("fDnD");e.exports=function(e,t){var n=new o,s=n.folder(t&&t.folder?t.folder:"layers");[i.point(e),i.line(e),i.polygon(e)].forEach((function(e){e.geometries.length&&e.geometries[0].length&&r(e.properties,e.type,e.geometries,(function(n,r){var i=t&&t.types[e.type.toLowerCase()]?t.types[e.type.toLowerCase()]:e.type;s.file(i+".shp",r.shp.buffer,{binary:!0}),s.file(i+".shx",r.shx.buffer,{binary:!0}),s.file(i+".dbf",r.dbf.buffer,{binary:!0}),s.file(i+".prj",a)}))}));var u={compression:"STORE"};return process.browser||(u.type="nodebuffer"),n.generate(u)}},"2LKE":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n("4EHJ"),i=n("975N"),a=n("Lqtk"),o=n("yNaq"),s=n("vuI0");function u(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function c(e,t){var n,a={},s=Vt(e);try{for(s.s();!(n=s.n()).done;){var u,c=n.value,l=c.parentObjectId,h=c.parentGlobalId,f=Vt(c.attachmentInfos);try{for(f.s();!(u=f.n()).done;){var p=u.value,d=p.id,v=Object(r.b)(Object(i.a)("".concat(t,"/").concat(l,"/attachments/").concat(d))),y=o.a.fromJSON(p);y.set({url:v,parentObjectId:l,parentGlobalId:h}),a[l]?a[l].push(y):a[l]=[y]}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}return a}function l(e,t,n){var r={query:Object(s.a)(Nt(Nt({},e.query),{},{f:"json"},u(t)))};return n&&(r=Nt(Nt(Nt({},n),r),{},{query:Nt(Nt({},n.query),r.query)})),Object(a.default)(e.path+"/queryAttachments",r)}},"2gBT":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("nR38"),s=n("srIe"),u=n("6S2I"),c=n("zqDF"),l=n("WbKI"),h=n("Gj5k"),f=n("RI0u"),p=n("r88o"),d=n("04ZG"),v=n("Cduq"),y=n("zlDU"),b=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/PL2")),g=n("gvqN"),m=n("wdpY"),w=n("AiS/"),O=n("3cLA"),j=n("H9eC"),_=n("1hFN"),x=n("ZnuT"),k=n("vk02"),S=n("guTz"),M=n("DxxZ"),I=n("mfMX"),T=n("NDpP"),A=u.a.getLogger("esri.renderers.UniqueValueRenderer"),C=Object(c.m)(I.a),E=r=function(e){Kt(l,e);var t,n,i,o,u=Xt(l);function l(e){var t;return Wt(this,l),(t=u.call(this,e))._valueInfoMap={},t._isDefaultSymbolDerived=!1,t.type="unique-value",t.backgroundFillSymbol=null,t.field=null,t.field2=null,t.field3=null,t.valueExpression=null,t.valueExpressionTitle=null,t.legendOptions=null,t.defaultLabel=null,t.fieldDelimiter=null,t.portal=null,t.styleOrigin=null,t.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var n=!1,r={type:"collection",added:[],removed:[],changed:[],unchanged:[]},i=function(i){var a=e.find((function(e){return e.value===t[i].value}));a?Object(M.a)(a,t[i])?(r.changed.push({type:"complete",oldValue:a,newValue:t[i]}),n=!0):r.unchanged.push({oldValue:a,newValue:t[i]}):(r.added.push(t[i]),n=!0)},a=0;a<t.length;a++)i(a);for(var o=function(i){t.find((function(t){return t.value===e[i].value}))||(r.removed.push(e[i]),n=!0)},s=0;s<e.length;s++)o(s);return n?r:void 0}}},t._set("uniqueValueInfos",[]),t}return Zt(l,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"castField",value:function(e){return null==e||"function"==typeof e?e:Object(c.l)(e)}},{key:"writeField",value:function(e,t,n,r){"string"==typeof e?t[n]=e:r&&r.messages?r.messages.push(new y.a("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):A.error(".field: cannot write field to JSON since it's not a string value")}},{key:"defaultSymbol",set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}},{key:"readPortal",value:function(e,t,n){return n.portal||w.a.getDefault()}},{key:"readStyleOrigin",value:function(e,t,n){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var r=Object(b.a)(t.styleUrl,n);return Object.freeze({styleUrl:r})}}},{key:"writeStyleOrigin",value:function(e,t,n,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Object(b.e)(e.styleUrl,r))}},{key:"uniqueValueInfos",set:function(e){this.styleOrigin?A.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}},{key:"addUniqueValueInfo",value:function(e,t){var n;this.styleOrigin?A.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(n="object"==typeof e?C(e):new I.a({value:e,symbol:Object(j.c)(t)}),this.uniqueValueInfos.push(n),this._valueInfoMap[n.value]=n)}},{key:"removeUniqueValueInfo",value:function(e){if(this.styleOrigin)A.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}},{key:"getUniqueValueInfo",value:(o=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,e.t0=this.valueExpression&&(Object(s.j)(n)||Object(s.j)(n.arcade)),!e.t0){e.next=11;break}return e.t1=Nt,e.t2=Nt({},r),e.t3={},e.next=8,Object(g.e)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},r=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return e.abrupt("return",this._getUniqueValueInfo(t,r));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!Object(s.j)(t)&&!Object(s.j)(t.arcade)){var n=this._getUniqueValueInfo(e,t);return n&&n.symbol||this.defaultSymbol}A.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:(i=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,!this.valueExpression||!Object(s.j)(r)&&!Object(s.j)(r.arcade)){e.next=11;break}return e.next=4,Object(g.e)();case 4:if(i=e.sent,a=i.arcadeUtils,e.t0=a.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,a.enableGeometryOperations();case 10:r=Nt(Nt({},r),{},{arcade:i});case 11:return o=this._getUniqueValueInfo(t,r),e.abrupt("return",o&&o.symbol||this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getSymbols",value:function(){var e,t=[],n=Vt(this.uniqueValueInfos);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.symbol&&t.push(r.symbol)}}catch(i){n.e(i)}finally{n.f()}return this.defaultSymbol&&t.push(this.defaultSymbol),t}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.backgroundFillSymbol),".").concat(JSON.stringify(this.defaultSymbol),".").concat(this.uniqueValueInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(this.field,".").concat(this.field2,".").concat(this.field3,".").concat(this.fieldDelimiter,".").concat(this.valueExpression)}},{key:"clone",value:function(){var e=new r({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Object(a.a)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Object(a.a)(this.visualVariables),legendOptions:Object(a.a)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:Object(a.a)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=Object(a.a)(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(Object(a.a)(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"collectRequiredFields",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[this.collectVVRequiredFields(t,n),this.collectSymbolFields(t,n)],e.next=3,Promise.all(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"collectSymbolFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat(Bt(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)}))),[Object(m.a)(t,n,this.valueExpression)]),Object(m.d)(t,n,this.field),Object(m.d)(t,n,this.field2),Object(m.d)(t,n,this.field3),e.next=6,Promise.all(r);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"populateFromStyle",value:function(){var e=this;return Object(T.fetchStyle)(this.styleOrigin,{portal:this.portal}).then((function(t){var n=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((function(r){var i=new O.a({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:r.name});e.defaultSymbol||r.name!==t.data.defaultItem||(e.defaultSymbol=i,e._isDefaultSymbolDerived=!0);var a=new I.a({value:r.name,symbol:i});n.push(a),e._valueInfoMap[r.name]=a})),e._set("uniqueValueInfos",Object.freeze(n)),!e.defaultSymbol&&e.uniqueValueInfos.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e}))}},{key:"_updateValueInfoMap",value:function(){var e=this;this._valueInfoMap={},this.uniqueValueInfos.forEach((function(t){return e._valueInfoMap[t.value+""]=t}))}},{key:"_getUniqueValueInfo",value:function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}},{key:"_getUnqiueValueInfoForExpression",value:function(e,t){var n=Object(s.r)(t,{}),r=n.viewingMode,i=n.scale,a=n.spatialReference,o=n.arcade,u=this._cache.compiledFunc,c=Object(s.q)(o).arcadeUtils;if(!u){var l=c.createSyntaxTree(this.valueExpression);u=c.createFunction(l),this._cache.compiledFunc=u}var h=c.executeFunction(u,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:a})));return this._valueInfoMap[h+""]}},{key:"_getUnqiueValueInfoForFields",value:function(e){var t,n=this.field,r=e.attributes;if("function"!=typeof n&&this.field2){var i=this.field2,a=this.field3,o=[];n&&o.push(r[n]),i&&o.push(r[i]),a&&o.push(r[a]),t=o.join(this.fieldDelimiter||"")}else"function"==typeof n?t=n(e):n&&(t=r[n]);return this._valueInfoMap[t+""]}}],[{key:"fromPortalStyle",value:function(e,t){var n=new r(t&&t.properties);n._set("styleOrigin",Object.freeze({styleName:e})),n._set("portal",t&&t.portal||w.a.getDefault());var i=n.populateFromStyle();return i.catch((function(t){A.error("#fromPortalStyle('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style name",t)})),i}},{key:"fromStyleUrl",value:function(e,t){var n=new r(t&&t.properties);n._set("styleOrigin",Object.freeze({styleUrl:e}));var i=n.populateFromStyle();return i.catch((function(t){A.error("#fromStyleUrl('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style URL",t)})),i}}]),l}(Object(k.a)(x.a));Object(i.a)([Object(l.b)({readOnly:!0})],E.prototype,"_cache",null),Object(i.a)([Object(f.a)({uniqueValue:"unique-value"})],E.prototype,"type",void 0),Object(i.a)([Object(l.b)(S.a)],E.prototype,"backgroundFillSymbol",void 0),Object(i.a)([Object(l.b)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],E.prototype,"field",void 0),Object(i.a)([Object(h.a)("field")],E.prototype,"castField",null),Object(i.a)([Object(v.a)("field")],E.prototype,"writeField",null),Object(i.a)([Object(l.b)({type:String,json:{write:!0}})],E.prototype,"field2",void 0),Object(i.a)([Object(l.b)({type:String,json:{write:!0}})],E.prototype,"field3",void 0),Object(i.a)([Object(l.b)({type:String,json:{write:!0}})],E.prototype,"valueExpression",void 0),Object(i.a)([Object(l.b)({type:String,json:{write:!0}})],E.prototype,"valueExpressionTitle",void 0),Object(i.a)([Object(l.b)({type:_.a,json:{write:!0}})],E.prototype,"legendOptions",void 0),Object(i.a)([Object(l.b)({type:String,json:{write:!0}})],E.prototype,"defaultLabel",void 0),Object(i.a)([Object(l.b)(Object(o.a)(Nt({},S.b),{json:{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],E.prototype,"defaultSymbol",null),Object(i.a)([Object(l.b)({type:String,json:{write:!0}})],E.prototype,"fieldDelimiter",void 0),Object(i.a)([Object(l.b)({type:w.a,readOnly:!0})],E.prototype,"portal",void 0),Object(i.a)([Object(p.a)("portal",["styleName"])],E.prototype,"readPortal",null),Object(i.a)([Object(l.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],E.prototype,"styleOrigin",void 0),Object(i.a)([Object(p.a)("styleOrigin",["styleName","styleUrl"])],E.prototype,"readStyleOrigin",null),Object(i.a)([Object(v.a)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],E.prototype,"writeStyleOrigin",null),Object(i.a)([Object(l.b)({type:[I.a],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],E.prototype,"uniqueValueInfos",null),E=r=Object(i.a)([Object(d.a)("esri.renderers.UniqueValueRenderer")],E),t.a=E},"2hxh":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));var r=n("OKTS");function i(e,t,n){var r=n.parameters,i=n.paddingPixelsOverride;return l.scale=Math.min(r.divisor/(t-r.offset),1),l.factor=function(e){return Math.abs(e*e*e)}(e),l.minPixelSize=r.minPixelSize,l.paddingPixels=i,l}function a(e,t){return 0===e?t.minPixelSize:t.minPixelSize*(1+2*t.paddingPixels/e)}function o(e,t){return Math.max(Object(r.i)(e*t.scale,e,t.factor),a(e,t))}function s(e,t,n,r){r.scale=function(e,t,n){var r=i(e,t,n);return r.minPixelSize=0,r.paddingPixels=0,o(1,r)}(e,t,n),r.factor=0,r.minPixelSize=n.parameters.minPixelSize,r.paddingPixels=n.paddingPixelsOverride}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=Math.min(Math.max(t.scale,a(e[1],t)/e[1]),1);return n[0]=e[0]*r,n[1]=e[1]*r,n}function c(e,t,n,r){return o(e,i(t,n,r))}Object(r.d)(10),Object(r.d)(12),Object(r.d)(70),Object(r.d)(40);var l={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},"2jVe":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("OKTS"),i=function(){function e(){Wt(this,e),this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map((function(){return 0}))}return Zt(e,[{key:"key",get:function(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}},{key:"snapshot",value:function(){var e,t=this._parameterNames,n={key:this.key},r=Vt(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i]=this[i]}}catch(a){r.e(a)}finally{r.f()}return n}}]),e}();function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var i,a;t._parameterNames=null!=(i=t._parameterNames)?i:[],t._parameterNames.push(n);for(var o=t._parameterNames.length-1,s=e.count||2,u=Math.ceil(Object(r.j)(s)),c=null!=(a=t._parameterBits)?a:[0],l=0;c[l]+u>16;)++l>=c.length&&c.push(0);t._parameterBits=c;var h=c[l],f=(1<<u)-1<<h;c[l]+=u,Object.defineProperty(t,n,{get:function(){return this[o]},set:function(e){if(this[o]!==e&&(this[o]=e,this._keyDirty=!0,this._parameterBits[l]=this._parameterBits[l]&~f|+e<<h&f,"number"!=typeof e&&"boolean"!=typeof e))throw"Configuration value for "+n+" must be boolean or number, got "+typeof e}})}}},"2jrz":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new(n("+opI").a)({preserveShape:"preserve-shape"});function i(e){var t=e.toJSON(),n=t.polylines,i=t.lengthUnit,a=t.geodesic,o=t.calculationType,s={};s.polylines=JSON.stringify(n);var u=e.polylines[0].spatialReference;return s.sr=u.wkid?u.wkid:JSON.stringify(u.toJSON()),i&&(s.lengthUnit=i),a&&(s.geodesic=a),o&&(s.calculationType=r.toJSON(o)),s}},"2mvb":function(e,t,n){"use strict";var r=n("zlDU"),i=n("Piei"),a=n("36Co");t.a=function(){function e(){Wt(this,e),this._workerThread=null,this._destroyed=!1}var t,n,o,s,u,c,l,h;return Zt(e,[{key:"initialize",value:(h=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.b)("RasterWorker");case 2:t=e.sent,this._destroyed?t.close():this._workerThread=t;case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"destroy",value:function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}},{key:"decode",value:(l=Ut(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("decode",t,n);case 4:return a=e.sent,e.abrupt("return",a?new i.a(a):null);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"symbolize",value:(c=Ut(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:return a={extent:t.extent&&t.extent.toJSON(),pixelBlock:t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},e.next=5,this._workerThread.invoke("symbolize",a,n);case 5:return o=e.sent,e.abrupt("return",o?new i.a(o):null);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"updateSymbolizer",value:(u=Ut(regeneratorRuntime.mark((function e(t,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:return a=null==t||null==(i=t.rendererJSON)?void 0:i.histograms,e.next=5,Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:a},n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"stretch",value:(s=Ut(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},e.next=7,this._workerThread.invoke("stretch",a,n);case 7:return o=e.sent,e.abrupt("return",o?new i.a(o):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"split",value:(o=Ut(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},e.next=7,this._workerThread.invoke("split",a,n);case 7:return o=e.sent,e.abrupt("return",(o&&o.forEach((function(e,t){o.set(t,e?i.a.fromJSON(e):null)})),Promise.resolve(o)));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"estimateStatisticsHistograms",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return i={srcPixelBlock:t.pixelBlock.toJSON()},e.next=7,this._workerThread.invoke("estimateStatisticsHistograms",i,n);case 7:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"mosaicAndTransform",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new r.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&null!=(a=t.srcPixelBlocks)&&a.length){e.next=4;break}return e.abrupt("return",null);case 4:return o=Nt(Nt({},t),{},{srcPixelBlocks:t.srcPixelBlocks.map((function(e){return e?e.toJSON():null}))}),e.next=7,this._workerThread.invoke("mosaicAndTransform",o,n);case 7:return s=e.sent,e.abrupt("return",s?new i.a(s):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}()},"2uI/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function(){function e(){Wt(this,e),this.sensAreasAccordionOpen=new r.t,this.soilsAccordionOpen=new r.t,this.harvOpAccordionOpen=new r.t,this.regOpAccordionOpen=new r.t,this.closeAllPanelsExcept=new r.t}return Zt(e,[{key:"setActivePanel",value:function(e){if(e&&null!==e){var t=e.opened;switch(e.panelTitle){case"Sensitive Areas":this.sensAreasAccordionOpen.emit(t);break;case"Operational Considerations":this.harvOpAccordionOpen.emit(t);break;case"Regeneration":this.regOpAccordionOpen.emit(t);break;case"Soils":this.soilsAccordionOpen.emit(t)}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"2uVf":function(e,t,n){"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,r,i,a,o,s,u){return[e,t,n,r,i,a,o,s,u]},createView:i})},"2yZv":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n("ofXK"),i=function(e){return.00024710538146717*e},a=function(e,t){var n="1."+t.toString()+"-"+t.toString();return Object(r.v)(e,"en-US",n)}},"3/ME":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("+opI"),u=n("r88o"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),f=n("f4Nx"),p=n("WZb1"),d=n("l4ZG"),v=n("SuVq"),y=(n("4GrV"),n("gEht")),b=n("kYAx"),g=n("UOZ4"),m=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),w=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).dpi=96,r.format=null,r.origin=null,r.minScale=0,r.maxScale=0,r.size=null,r.spatialReference=null,r}return Zt(n,[{key:"isWrappable",get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var n=Object(f.d)(e);return e.isWrappable&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}},{key:"readOrigin",value:function(e,t){return v.a.fromJSON(Nt({spatialReference:t.spatialReference},e))}},{key:"lods",set:function(e){var t=this,n=0,r=0,i=[];this._levelToLOD={},e&&(n=-1/0,r=1/0,e.forEach((function(e){i.push(e.scale),n=e.scale>n?e.scale:n,r=e.scale<r?e.scale:r,t._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",n),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}},{key:"readSize",value:function(e,t){return[t.cols,t.rows]}},{key:"writeSize",value:function(e,t){t.cols=e[0],t.rows=e[0]}},{key:"zoomToScale",value:function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var n=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[n]-t[r])}},{key:"scaleToZoom",value:function(e){for(var t=this.scales,n=t.length-1,r=0;r<n;r++){var i=t[r],a=t[r+1];if(i<=e)return r;if(a===e)return r+1;if(i>e&&a<e)return r+1-(e-a)/(i-a)}return r}},{key:"snapScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=this.scaleToZoom(e);return n%Math.floor(n)>=t?this.zoomToScale(Math.ceil(n)):this.zoomToScale(Math.floor(n))}},{key:"tileAt",value:function(e,t,n,r){var i,a,o=this.lodAt(e);if(!o)return null;if("number"==typeof t)i=t,a=n;else if(Object(f.c)(t.spatialReference,this.spatialReference))i=t.x,a=t.y,r=n;else{var s=Object(d.d)(t,this.spatialReference);if(!s)return null;i=s.x,a=s.y,r=n}var u=o.resolution*this.size[0],c=o.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(b.g)()}),r.level=e,r.row=Math.floor((this.origin.y-a)/c+.001),r.col=Math.floor((i-this.origin.x)/u+.001),this.updateTileInfo(r),r}},{key:"updateTileInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.lodAt(e.level);if(!n&&1===t){var r=this.lods[this.lods.length-1];r.level<e.level&&(n=r)}if(n){var i=e.level-n.level,a=n.resolution*this.size[0]/Math.pow(2,i),o=n.resolution*this.size[1]/Math.pow(2,i);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=Object(b.g)()),e.extent[0]=this.origin.x+e.col*a,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+a,e.extent[3]=e.extent[1]+o}}},{key:"upsampleTile",value:function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}},{key:"getTileBounds",value:function(e,t){var n=this.lodAt(t.level).resolution,r=n*this.size[0],i=n*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+r,e[3]=e[1]+i,e}},{key:"lodAt",value:function(e){return this._levelToLOD&&this._levelToLOD[e]||null}},{key:"clone",value:function(){return r.fromJSON(this.write({}))}},{key:"_initializeUpsampleLevels",value:function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,n=0;n<e.length;n++){var r=e[n];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{size:256,spatialReference:p.a.WebMercator},t=e.resolutionFactor||1,n=e.scales,i=e.size||256,a=e.spatialReference||p.a.WebMercator;if(!Object(f.i)(a)){var o=[];if(n)for(var s=0;s<n.length;s++){var u=n[s];o.push({level:s,scale:u,resolution:u})}else for(var c=5e-4,l=23;l>=0;l--)o.unshift({level:l,scale:c,resolution:c}),c*=2;return new r({dpi:96,lods:o,origin:new v.a(0,0,a),size:[i,i],spatialReference:a})}var h=Object(f.d)(a),d=new v.a(e.origin?{x:e.origin.x,y:e.origin.y,spatialReference:a}:h?{x:h.origin[0],y:h.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),b=1/(39.37*Object(y.f)(a)*96),g=[];if(n)for(var m=0;m<n.length;m++){var w=n[m];g.push({level:m,scale:w,resolution:w*b})}else{var O=Object(f.f)(a)?512/i*591657527.5917094:256/i*591657527.591555,j=Math.ceil(24/t);g.push({level:0,scale:O,resolution:O*b});for(var _=1;_<j;_++){var x=O/Math.pow(2,t);g.push({level:_,scale:x,resolution:x*b}),O=x}}return new r({dpi:96,lods:g,origin:d,size:[i,i],spatialReference:a})}}]),n}(h.a);Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],w.prototype,"compressionQuality",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],w.prototype,"dpi",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:m.read,write:m.write,origins:{"web-scene":{read:!1,write:!1}}}})],w.prototype,"format",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],w.prototype,"isWrappable",null),Object(i.a)([Object(o.b)({type:v.a,json:{write:!0}})],w.prototype,"origin",void 0),Object(i.a)([Object(u.a)("origin")],w.prototype,"readOrigin",null),Object(i.a)([Object(o.b)({type:[g.a],value:null,json:{write:!0}})],w.prototype,"lods",null),Object(i.a)([Object(o.b)({readOnly:!0})],w.prototype,"minScale",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],w.prototype,"maxScale",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],w.prototype,"scales",void 0),Object(i.a)([Object(o.b)({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],w.prototype,"size",void 0),Object(i.a)([Object(u.a)("size",["rows","cols"])],w.prototype,"readSize",null),Object(i.a)([Object(l.a)("size",{cols:{type:a.a},rows:{type:a.a}})],w.prototype,"writeSize",null),Object(i.a)([Object(o.b)({type:p.a,json:{write:!0}})],w.prototype,"spatialReference",void 0),w=r=Object(i.a)([Object(c.a)("esri.layers.support.TileInfo")],w),t.a=w},"36Co":function(e,t,n){"use strict";n.d(t,"a",(function(){return ce})),n.d(t,"b",(function(){return pe})),n.d(t,"c",(function(){return le}));var r,i,a=n("wSAH"),o=n("zlDU"),s=n("9MzC"),u=n("Sfqt"),c=n("srIe"),l=n("nYOO"),h=n("975N"),f=n("kwW8"),p={geometryEngineWorker:function(){return Promise.all([n.e(0),n.e(120)]).then(n.bind(null,"D5ze"))},CSVSourceWorker:function(){return Promise.all([n.e(6),n.e(11),n.e(0),n.e(143)]).then(n.bind(null,"136L"))},EdgeProcessingWorker:function(){return n.e(185).then(n.bind(null,"InNl"))},ElevationSamplerWorker:function(){return Promise.all([n.e(0),n.e(121)]).then(n.bind(null,"CVnL"))},GeoJSONSourceWorker:function(){return Promise.all([n.e(6),n.e(11),n.e(0),n.e(142)]).then(n.bind(null,"BUoz"))},LercWorker:function(){return n.e(145).then(n.bind(null,"txpZ"))},MemorySourceWorker:function(){return Promise.all([n.e(6),n.e(11),n.e(0),n.e(144)]).then(n.bind(null,"Glky"))},PBFDecoderWorker:function(){return n.e(184).then(n.bind(null,"Ab+v"))},Pipeline:function(){return Promise.all([n.e(6),n.e(9),n.e(11),n.e(0),n.e(179)]).then(n.bind(null,"DEW6"))},PointCloudWorker:function(){return Promise.all([n.e(0),n.e(181)]).then(n.bind(null,"rr5J"))},RasterWorker:function(){return n.e(146).then(n.bind(null,"DABJ"))},SceneLayerWorker:function(){return n.e(182).then(n.bind(null,"KgD9"))},WorkerTileHandler:function(){return Promise.all([n.e(7),n.e(178)]).then(n.bind(null,"VLY0"))},FeatureServiceSnappingSourceWorker:function(){return Promise.all([n.e(6),n.e(11),n.e(0),n.e(189)]).then(n.bind(null,"YV+X"))}};(i=r||(r={}))[i.HANDSHAKE=0]="HANDSHAKE",i[i.OPEN=1]="OPEN",i[i.OPENED=2]="OPENED",i[i.RESPONSE=3]="RESPONSE",i[i.INVOKE=4]="INVOKE",i[i.ABORT=5]="ABORT",i[i.CLOSE=6]="CLOSE",i[i.OPEN_PORT=7]="OPEN_PORT",i[i.ON=8]="ON";var d=0;function v(){return d++}function y(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function b(e,t,n,i){var a;t.type!==r.OPEN_PORT?t.type===r.INVOKE||t.type===r.RESPONSE?(!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(n)?(a=m(i),t.data=n):(a=m(n.transferList),t.data=n.result),a?e.postMessage(t,a):e.postMessage(t)):e.postMessage(t):e.postMessage(t,[t.port])}function g(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function m(e){if(!e||!e.length)return null;if(Object(a.a)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((function(e){return!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)}));return t.length?t:null}var w=r,O=w.CLOSE,j=w.ABORT,_=w.INVOKE,x=w.RESPONSE,k=w.OPEN_PORT,S=w.ON,M=function(){function e(t){Wt(this,e),this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}return Zt(e,[{key:"push",value:function(e){e.type===r.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}},{key:"clear",value:function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}},{key:"_process",value:function(){this._timer=null;var e,t=Vt(this._invokeMessages);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._cancelledJobIds.has(n.jobId)||this._invoke(n)}}catch(r){t.e(r)}finally{t.f()}this._cancelledJobIds.clear(),this._invokeMessages.length=0}}]),e}(),I=function(){function e(t,n){var r=this;Wt(this,e),this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new M((function(e){return r._onInvokeMessage(e)})),this._messageQueue=new Array,this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,Object(c.k)(n.scheduler)&&(this._frameTask=n.scheduler.registerTask(f.b.REMOTE_CLIENT,(function(e){return r._update(e)}),(function(){return r._messageQueue.length>0}))),this._port.addEventListener("message",this._onMessage),this._port.start()}return Zt(e,[{key:"close",value:function(){this._post({type:O}),this._close()}},{key:"isBusy",value:function(){return this._outJobs.size>0}},{key:"invoke",value:function(e,t,n){var r=this,i=n&&n.signal,a=n&&n.transferList;if(!this._port)return Promise.reject(new o.a("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var u=v();return new Promise((function(n,o){var c=Object(s.q)(i,(function(){var e,t=r._outJobs.get(u);t&&(r._outJobs.delete(u),null==(e=t.abortHandle)||e.remove(),r._post({type:j,jobId:u}),o(Object(s.e)()))}));r._outJobs.set(u,{resolve:n,reject:o,abortHandle:c,debugInfo:e}),r._post({type:_,jobId:u,methodName:e,abortable:null!=i},t,a)}))}},{key:"on",value:function(e,t){var n=new MessageChannel;function i(e){t(e.data)}return this._port.postMessage({type:r.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",i),n.port1.start(),{remove:function(){n.port1.postMessage({type:r.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",i)}}}},{key:"openPort",value:function(){var e=new MessageChannel;return this._post({type:k,port:e.port2}),e.port1}},{key:"_close",value:function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((function(e){var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(s.e)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask=Object(c.p)(this._frameTask)}},{key:"_onMessage",value:function(e){Object(c.k)(this._frameTask)?this._messageQueue.push(e):this._processMessage(e)}},{key:"_processMessage",value:function(e){var t=g(e);if(t)switch(t.type){case x:this._onResponseMessage(t);break;case _:this._invokeQueue.push(t);break;case j:this._onAbortMessage(t);break;case O:this._onCloseMessage();break;case k:this._onOpenPortMessage(t);break;case S:this._onOnMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,n=e.jobId,r=t.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(n))}},{key:"_onCloseMessage",value:function(){var t=this._client;this._close(),t&&"destroy"in t&&e.clients.get(this)===t&&t.destroy(),e.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}},{key:"_onInvokeMessage",value:function(e){var t,n=this,r=e.methodName,i=e.jobId,a=e.data,o=e.abortable?Object(s.d)():null,u=this._inJobs,c=this._client,l=c[r];try{if(!l&&r&&-1!==r.indexOf("."))for(var h=r.split("."),f=0;f<h.length-1;f++)l=(c=c[h[f]])[h[f+1]];if("function"!=typeof l)throw new TypeError(r+" is not a function");t=l.call(c,a,{client:this,signal:o?o.signal:null})}catch(p){return void this._post({type:x,jobId:i,error:y(p)})}Object(s.o)(t)?(u.set(i,{controller:o,promise:t}),t.then((function(e){u.has(i)&&(u.delete(i),n._post({type:x,jobId:i},e))}),(function(e){u.has(i)&&(u.delete(i),Object(s.m)(e)||n._post({type:x,jobId:i,error:y(e||{message:"Error encountered at method "+r})}))}))):this._post({type:x,jobId:i},t)}},{key:"_onOpenPortMessage",value:function(t){new e(t.port,{client:this._client})}},{key:"_onOnMessage",value:function(e){var t=e.port,n=this._client.on(e.eventType,(function(e){t.postMessage(e)})),i=Object(l.c)(e.port,"message",(function(e){g(e).type===r.CLOSE&&(i.remove(),n.remove(),t.close())}))}},{key:"_onResponseMessage",value:function(e){var t,n=e.jobId,r=e.error,i=e.data,a=this._outJobs;if(a.has(n)){var s=a.get(n);a.delete(n),null==(t=s.abortHandle)||t.remove(),r?s.reject(o.a.fromJSON(JSON.parse(r))):s.resolve(i)}}},{key:"_update",value:function(e){for(;!e.done&&this._messageQueue.length>0;)this._processMessage(this._messageQueue.shift()),e.madeProgress()}},{key:"_post",value:function(e,t,n){return b(this._port,e,t,n)}}],[{key:"connect",value:function(t){var n,r=new MessageChannel;n="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t;var i=new e(r.port1,{channel:r,client:n});return"object"==typeof n&&"remoteClient"in n&&(n.remoteClient=i),e.clients.set(i,n),r.port2}},{key:"loadWorker",value:function(e){var t=p[e];return t?t():Promise.resolve(null)}}]),e}();I.kernelInfo={revision:u.b,version:h.d,buildDate:u.a},I.clients=new Map;var T=I,A=n("6S2I"),C=n("xkkJ"),E=A.a.getLogger("esri.core.workers.Connection"),P=n("EyXx"),R=n("4EHJ"),D=n("IDUf"),L=n("ss0y");n("G48n");var N={},F=n("3r0u"),z=function e(){var t=this;Wt(this,e);var n=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((function(e){t[e]=function(){return n[e].apply(n,arguments)}}))},V=F.a.MutationObserver||F.a.WebKitMutationObserver,G=function(){var e;if(F.a.process&&F.a.process.nextTick)e=function(e){F.a.process.nextTick(e)};else if(F.a.Promise)e=function(e){F.a.Promise.resolve().then(e)};else if(V){var t=[],n=document.createElement("div");new V((function(){for(;t.length>0;)t.shift()()})).observe(n,{attributes:!0}),e=function(e){t.push(e),n.setAttribute("queueStatus","1")}}return e}(),U=function(){var e=F.a.MessageEvent;try{new e("message",{data:null})}catch(t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.bubbles,i=void 0!==r&&r,a=t.cancelable,o=void 0!==a&&a,s=document.createEvent("Event");return s.initEvent(e,i,o),s.data=n,s}}return function(t,n){return new e(t,n)}}(),B=function(){function e(){Wt(this,e),this._dispatcher=new z,this._workerPostMessage({type:r.HANDSHAKE})}var t;return Zt(e,[{key:"terminate",value:function(){}},{key:"onmessage",get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}},{key:"postMessage",value:function(e){var t=this;G((function(){t._workerMessageHandler(U("message",{data:e}))}))}},{key:"dispatchEvent",value:function(e){return this._dispatcher.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t,n){this._dispatcher.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this._dispatcher.removeEventListener(e,t,n)}},{key:"_workerPostMessage",value:function(e){var t=this;G((function(){t.dispatchEvent(U("message",{data:e}))}))}},{key:"_workerMessageHandler",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=g(t))||n.type!==r.OPEN){e.next=13;break}return i=n.modulePath,a=n.jobId,e.next=5,T.loadWorker(i);case 5:if(o=e.sent,e.t0=o,e.t0){e.next=11;break}return e.next=10,import(i);case 10:o=e.sent;case 11:s=T.connect(o),this._workerPostMessage({type:r.OPENED,jobId:a,data:s});case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),q=A.a.getLogger("esri.core.workers");a.a.add("esri-workers-arraybuffer-transfer",!Object(a.a)("safari")||Object(a.a)("safari")>=12);var H,W,J=r.HANDSHAKE,Z="Failed to create Worker. Fallback to execute module in main thread";function K(e){return Y.apply(this,arguments)}function Y(){return(Y=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){function n(i){var a=g(i);a&&a.type===J&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(e){e.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),q.warn("Failed to create Worker. Fallback to execute module in main thread",e),(t=new B).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=0,Q=A.a.getLogger("esri.core.workers"),$=r,ee=$.ABORT,te=$.INVOKE,ne=$.OPEN,re=$.OPENED,ie=$.RESPONSE,ae=function(){function e(t,n){Wt(this,e),this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=n,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(function(e){e.preventDefault(),Q.error(e)}))}var t,n;return Zt(e,[{key:"terminate",value:function(){this.worker.terminate()}},{key:"open",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a=this,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=n.signal,i=v(),e.abrupt("return",new Promise((function(e,n){var o={resolve:e,reject:n,abortHandle:Object(s.q)(r,(function(){a._outJobs.delete(i),a._post({type:ee,jobId:i})}))};a._outJobs.set(i,o),a._post({type:ne,jobId:i,modulePath:t})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"_onMessage",value:function(e){var t=g(e);if(t)switch(t.type){case re:this._onOpenedMessage(t);break;case ie:this._onResponseMessage(t);break;case ee:this._onAbortMessage(t);break;case te:this._onInvokeMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,n=e.jobId,r=t.get(n);r&&(r.controller&&r.controller.abort(),t.delete(n))}},{key:"_onInvokeMessage",value:function(e){var t,n=this,r=e.methodName,i=e.jobId,a=e.data,o=e.abortable?Object(s.d)():null,u=this._inJobs,c=h.e[r];try{if("function"!=typeof c)throw new TypeError(r+" is not a function");t=c.call(null,a,{signal:o?o.signal:null})}catch(l){return void this._post({type:ie,jobId:i,error:y(l)})}Object(s.o)(t)?(u.set(i,{controller:o,promise:t}),t.then((function(e){u.has(i)&&(u.delete(i),n._post({type:ie,jobId:i},e))}),(function(e){u.has(i)&&(u.delete(i),e||(e={message:"Error encountered at method"+r}),Object(s.m)(e)||n._post({type:ie,jobId:i,error:y(e||{message:"Error encountered at method "+r})}))}))):this._post({type:ie,jobId:i},t)}},{key:"_onOpenedMessage",value:function(e){var t,n=e.jobId,r=e.data,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),null==(t=i.abortHandle)||t.remove(),i.resolve(r))}},{key:"_onResponseMessage",value:function(e){var t,n=e.jobId,r=e.error,i=e.data,a=this._outJobs.get(n);a&&(this._outJobs.delete(n),null==(t=a.abortHandle)||t.remove(),r?a.reject(o.a.fromJSON(JSON.parse(r))):a.resolve(i))}},{key:"_post",value:function(e,t,n){return b(this.worker,e,t,n)}}],[{key:"create",value:(t=Ut(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(a.a)("esri-workers")){e.next=2;break}return e.abrupt("return",K(new B));case 2:if(!H&&!W)try{t='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.replace('"{CONFIGURATION}"',"'".concat(function(){var e;if(null!=P.a.default){var t=Nt({},P.a);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(P.a));e.assetsPath=Object(R.z)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Object(D.b)(),e.has={"csp-restrictions":Object(a.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(a.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(a.a)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":Object(a.a)("featurelayer-pbf"),"featurelayer-snapshot-point-threshold":Object(a.a)("featurelayer-snapshot-point-threshold"),"esri-atomics":Object(a.a)("esri-atomics"),"esri-shared-array-buffer":Object(a.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(a.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(a.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Object(R.z)(e.workers.loaderUrl)),e.workers.workerPath=e.workers.workerPath?Object(R.z)(e.workers.workerPath):Object(R.z)(Object(L.a)("esri/core/workers/RemoteClient.js"));var n=P.a.workers.loaderConfig,r=function(e){var t,n={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:Nt({},e.has),map:Nt({},e.map),packages:e.packages&&e.packages.concat()||[],paths:Nt({},e.paths)};return e.hasOwnProperty("async")||(n.async=!0),e.hasOwnProperty("isDebug")||(n.isDebug=!1),e.baseUrl||(n.baseUrl=N.baseUrl),null==(t=N.packages)||t.forEach((function(e){!function(e,t){var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;)if(n.value.name===t.name)return}catch(i){r.e(i)}finally{r.f()}e.push(t)}(n.packages,e)})),n}({baseUrl:null==n?void 0:n.baseUrl,locale:Object(D.b)(),has:Nt({"csp-restrictions":Object(a.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1},null==n?void 0:n.has),map:Nt({},null==n?void 0:n.map),paths:Nt({},null==n?void 0:n.paths),packages:(null==n?void 0:n.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{version:h.d,buildDate:u.a,revision:u.b}})}(),"'")),H=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(r){W=r||{}}if(H)try{n=new Worker(H,{name:"esri-worker-"+X++})}catch(r){q.warn(Z,W),n=new B}else q.warn(Z,W),n=new B;return e.abrupt("return",K(n));case 5:case"end":return e.stop()}}),e)})))();case 2:return r=t.sent,t.abrupt("return",new e(r,n));case 4:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}(),oe=Object(a.a)("esri-workers-debug")?1:Object(a.a)("host-browser")?navigator.hardwareConcurrency-1:0;oe||(oe=Object(a.a)("safari")&&Object(a.a)("mac")||Object(a.a)("trident")?7:2);var se=0,ue=[];function ce(){ye()}function le(e,t){return he(e,{client:t})}function he(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new(function(){function e(){Wt(this,e),this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}return Zt(e,[{key:"destroy",value:function(){this.close()}},{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"open",value:function(e,t){var n=this;return new Promise((function(r,i){var a=!0,o=function(e){Object(s.u)(t.signal),a&&(a=!1,e())};n._clients.length=e.length,n._clientPromises.length=e.length;for(var u=function(a){var u=e[a];Object(s.o)(u)?n._clientPromises[a]=u.then((function(e){return n._clients[a]=new T(e,t),o(r),n._clients[a]}),(function(){return o(i),null})):(n._clients[a]=new T(u,t),n._clientPromises[a]=Promise.resolve(n._clients[a]),o(r))},c=0;c<e.length;++c)u(c)}))}},{key:"broadcast",value:function(e,t,n){for(var r=new Array(this._clientPromises.length),i=0;i<this._clientPromises.length;++i)r[i]=this._clientPromises[i].then((function(r){return r.invoke(e,t,n)}));return r}},{key:"close",value:function(){var e,t=Vt(this._clientPromises);try{for(t.s();!(e=t.n()).done;){e.value.then((function(e){return e.close()}))}}catch(n){t.e(n)}finally{t.f()}this._clients.length=0,this._clientPromises.length=0}},{key:"getAvailableClient",value:function(){for(var e,t=0;t<this._clients.length;++t){var n=this._clients[t];if(n){if(!n.isBusy())return Promise.resolve(n)}else(e=e||[]).push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}},{key:"invoke",value:function(e,t,n){var r=null;return Array.isArray(n)?(E.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:n}):r=n,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((function(n){return n.invoke(e,t,r)}))}},{key:"on",value:function(e,t){var n=this;return Promise.all(this._clientPromises).then((function(){return Object(C.b)(n._clients.map((function(n){return n.on(e,t)})))}))}},{key:"openPorts",value:function(){var e=this;return new Promise((function(t){for(var n=new Array(e._clientPromises.length),r=n.length,i=function(i){e._clientPromises[i].then((function(e){n[i]=e.openPort(),0==--r&&t(n)}))},a=0;a<e._clientPromises.length;++a)i(a)}))}},{key:"test",get:function(){return{numClients:this._clients.length}}}]),e}()),e.next=3,r.open(t,n);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return de.apply(this,arguments)}function de(){return(de=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,u,c,l,h,f,p,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},"string"==typeof t){e.next=3;break}throw new o.a("workers:undefined-module","modulePath is missing");case 3:if(r=n.strategy||"distributed",Object(a.a)("host-webworker")&&!Object(a.a)("esri-workers")&&(r="local"),"local"!==r){e.next=16;break}return e.next=7,T.loadWorker(t);case 7:if(i=e.sent,e.t0=i,e.t0){e.next=13;break}return e.next=12,import(t);case 12:i=e.sent;case 13:return Object(s.u)(n.signal),u=n.client||i,e.abrupt("return",he([T.connect(i)],Nt(Nt({},n),{},{client:u})));case 16:return e.next=18,ye();case 18:if(Object(s.u)(n.signal),"dedicated"!==r){e.next=28;break}return c=se++%oe,e.t1=he,e.next=24,ue[c].open(t,n);case 24:return e.t2=e.sent,e.t3=[e.t2],e.t4=n,e.abrupt("return",(0,e.t1)(e.t3,e.t4));case 28:if(!(n.maxNumWorkers&&n.maxNumWorkers>0)){e.next=34;break}if(!((l=Math.min(n.maxNumWorkers,oe))<oe)){e.next=34;break}for(h=new Array(l),f=0;f<l;++f)p=se++%oe,h[f]=ue[p].open(t,n);return e.abrupt("return",he(h,n));case 34:return e.abrupt("return",he(ue.map((function(e){return e.open(t,n)})),n));case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ve=null;function ye(){return be.apply(this,arguments)}function be(){return(be=Ut(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve){e.next=2;break}return e.abrupt("return",ve);case 2:for(Object(s.d)(),t=[],n=function(e){var n=ae.create(e).then((function(t){return ue[e]=t,t}));t.push(n)},r=0;r<oe;r++)n(r);return e.abrupt("return",ve=Promise.all(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"3E6D":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function e(){Wt(this,e),this.setActivePanel=new r.t};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"3WMd":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("srIe"),i=n("N5XI"),a=n("WiJz"),o=n("dI/Q"),s=function(){function e(t){Wt(this,e),this.resourceFactory=t,this._resources=null,this._visible=!0,this._attached=!1}return Zt(e,[{key:"destroy",value:function(){this._destroyResources()}},{key:"object",get:function(){return Object(r.k)(this._resources)?this._resources.object:null}},{key:"resources",get:function(){return Object(r.k)(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}},{key:"recreate",value:function(){this.attached&&this._createResources()}},{key:"recreateGeometry",value:function(){if(this.resourceFactory.recreateGeometry){var e=this.resourceFactory.view._stage;if(!Object(r.j)(this._resources)&&e){var t=this._resources.object;this._resources.external.forEach((function(t){2===t.type&&e.remove(t)})),t.removeAllGeometries();var n=this.resourceFactory.recreateGeometry(this._resources.external,t,this._resources.layer);e.addMany(n),this._resources.layer.commit()}}else this.recreate()}},{key:"_createOrDestroyResources",value:function(){this._attached?this._resources||this._createResources():this._destroyResources()}},{key:"_createResources",value:function(){var e=this;this._destroyResources();var t=this.resourceFactory.view._stage;if(t){var n=new o.a({isPickable:!1});t.add(n);var r=new a.a({castShadow:!1}),s=this.resourceFactory.createResources(r,n);s.forEach((function(e){return t.add(e)})),t.add(r),n.add(r),n.commit(),this._syncVisible();var u=this.resourceFactory.cameraChanged?Object(i.init)(this.resourceFactory.view.state,"camera",(function(t){return e.resourceFactory.cameraChanged(t)})):null;this._resources={layer:n,object:r,external:s,cameraHandle:u}}}},{key:"_destroyResources",value:function(){if(!Object(r.j)(this._resources)){var e=this.resourceFactory.view._stage;null==e||e.remove(this._resources.object),null==e||e.remove(this._resources.layer),this._resources.external.forEach((function(t){null==e||e.remove(t),"dispose"in t&&t.dispose()})),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}}},{key:"_syncVisible",value:function(){Object(r.j)(this._resources)||(this._resources.object.setVisible(this._visible),this._resources.layer.commit())}}]),e}()},"3cLA":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I")),o=(n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/PL2")),l=n("9MzC"),h=n("DZP5"),f=n("AiS/"),p=n("UFqC"),d=a.a.getLogger("esri.symbols.WebStyleSymbol"),v=r=function(e){Kt(a,e);var t,i=Xt(a);function a(e){var t;return Wt(this,a),(t=i.call(this,e)).styleName=null,t.portal=null,t.styleUrl=null,t.thumbnail=null,t.name=null,t.type="web-style",t}return Zt(a,[{key:"read",value:function(e,t){this.portal=t?t.portal:void 0,Dt(en(a.prototype),"read",this).call(this,e,t)}},{key:"clone",value:function(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}},{key:"fetchSymbol",value:function(e){return this._fetchSymbol("webRef",e)}},{key:"fetchCIMSymbol",value:function(e){return this._fetchSymbol("cimRef",e)}},{key:"_fetchSymbol",value:(t=Ut(regeneratorRuntime.mark((function e(t,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,"NDpP"));case 2:return i=e.sent,Object(l.u)(r),a=i.resolveWebStyleSymbol(this,{portal:this.portal},t,r),e.abrupt("return",(a.catch((function(e){d.error("#fetchSymbol()","Failed to create symbol from style",e)})),a));case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),a}(h.a);Object(i.a)([Object(o.b)({json:{write:!1}})],v.prototype,"color",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],v.prototype,"styleName",void 0),Object(i.a)([Object(o.b)({type:f.a,json:{write:!1}})],v.prototype,"portal",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:c.d,write:c.f}})],v.prototype,"styleUrl",void 0),Object(i.a)([Object(o.b)({type:p.a,json:{read:!1}})],v.prototype,"thumbnail",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],v.prototype,"name",void 0),Object(i.a)([Object(s.a)({styleSymbolReference:"web-style"},{readOnly:!0})],v.prototype,"type",void 0),v=r=Object(i.a)([Object(u.a)("esri.symbols.WebStyleSymbol")],v),t.a=v},"3gcQ":function(e,t){e.exports.lpad=function(e,t,n){for(;e.length<t;)e=n+e;return e},e.exports.rpad=function(e,t,n){for(;e.length<t;)e+=n;return e},e.exports.writeField=function(e,t,n,r){for(var i=0;i<t;i++)e.setUint8(r,n.charCodeAt(i)),r++;return r}},"3j3K":function(e,t,n){"use strict";var r,i,a=global.MutationObserver||global.WebKitMutationObserver;if(a){var o=0,s=new a(h),u=global.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=o=++o%2}}else if(global.setImmediate||void 0===global.MessageChannel)r="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var e=global.document.createElement("script");e.onreadystatechange=function(){h(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e)}:function(){setTimeout(h,0)};else{var c=new global.MessageChannel;c.port1.onmessage=h,r=function(){c.port2.postMessage(0)}}var l=[];function h(){var e,t;i=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}i=!1}e.exports=function(e){1!==l.push(e)||i||r()}},"3r0u":function(e,t,n){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;t.a=r},"3z0I":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("RI0u"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("Qzg2")),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).maxValue=null,r.minValue=null,r.type="range",r}return Zt(n,[{key:"clone",value:function(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),n}(u.a);Object(i.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,n){t[n]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(i.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,n){t[n]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(i.a)([Object(o.a)({range:"range"})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(s.a)("esri.layers.support.RangeDomain")],c),t.a=c},"3zv9":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t,n,r){Wt(this,e),this.coordinateHelper=t,this.targetPoint=n,this.constraint=r}},"49sm":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"4EHJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return he})),n.d(t,"e",(function(){return fe})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return se})),n.d(t,"i",(function(){return X})),n.d(t,"j",(function(){return K})),n.d(t,"k",(function(){return ae})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return H})),n.d(t,"n",(function(){return pe})),n.d(t,"o",(function(){return R})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return F})),n.d(t,"r",(function(){return D})),n.d(t,"s",(function(){return W})),n.d(t,"t",(function(){return J})),n.d(t,"u",(function(){return Z})),n.d(t,"v",(function(){return $})),n.d(t,"w",(function(){return ce})),n.d(t,"x",(function(){return z})),n.d(t,"y",(function(){return q})),n.d(t,"z",(function(){return G})),n.d(t,"A",(function(){return Q})),n.d(t,"B",(function(){return U})),n.d(t,"C",(function(){return B})),n.d(t,"D",(function(){return M})),n.d(t,"E",(function(){return k})),n.d(t,"F",(function(){return ie})),n.d(t,"G",(function(){return le})),n.d(t,"H",(function(){return oe})),n.d(t,"I",(function(){return te})),n.d(t,"J",(function(){return x})),n("3r0u");var r,i,a=n("EyXx"),o=n("srIe"),s=n("6S2I"),u=n("zlDU"),c=s.a.getLogger("esri.core.urlUtils"),l=a.a.request,h="esri/config: esriConfig.request.proxyUrl is not set.",f=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,p=/^\s*http:/i,d=/^\s*https:/i,v=/^\s*file:/i,y=/:\d+$/,b=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,g=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),m=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Wt(this,e),this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;var n=Object(o.d)(this.uri.match(g));this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),null!=this.authority&&(n=Object(o.d)(this.authority.match(m)),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}return Zt(e,[{key:"toString",value:function(){return this.uri}}]),e}(),O=new w(a.a.applicationUrl),j={},_=(r=Object(o.d)(O.path),i=r.substring(0,r.lastIndexOf(r.split("/")[r.split("/").length-1])),"".concat(O.scheme,"://").concat(O.host).concat(null!=O.port?":"+O.port:"").concat(i));function x(e){var t={path:null,query:null},n=new w(e),r=e.indexOf("?");return null===n.query?t.path=e:(t.path=e.substring(0,r),t.query=k(n.query)),n.fragment&&(t.hash=n.fragment,null===n.query&&(t.path=t.path.substring(0,t.path.length-(n.fragment.length+1)))),t}function k(e){var t,n={},r=Vt(e.split("&"));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i){var a=i.indexOf("="),o=void 0,s=void 0;a<0?(o=decodeURIComponent(i),s=""):(o=decodeURIComponent(i.slice(0,a)),s=decodeURIComponent(i.slice(a+1)));var u=n[o];"string"==typeof u&&(u=n[o]=[u]),Array.isArray(u)?u.push(s):n[o]=s}}}catch(c){r.e(c)}finally{r.f()}return n}function S(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function M(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(t(n,e[n]))})).join("&"):Object.keys(e).map((function(n){var r=e[n];if(null==r)return"";var i=encodeURIComponent(n)+"=",a=t&&t[n];return a?i+encodeURIComponent(a(r)):Array.isArray(r)?r.map((function(e){return S(e)?i+encodeURIComponent(JSON.stringify(e)):i+encodeURIComponent(e)})).join("&"):S(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)})).filter((function(e){return e})).join("&"):""}function I(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=l.proxyUrl;if("string"==typeof t){e=function(e){return d.test(e)||"https"===O.scheme&&$(e)}(t);var r=R(t);r&&(n=r.proxyUrl)}else e=!!t;if(!n)throw c.warn(h),new u.a("urlutils:proxy-not-set",h);return e&&ne()&&(n=te(n)),x(n)}function T(e){var t,n,r=R(e);if(r){var i=C(r.proxyUrl);t=i.path,n=i.query?k(i.query):null}if(t){var a=x(e);e=t+"?"+a.path;var o=M(Nt(Nt({},n),a.query));o&&(e="".concat(e,"?").concat(o))}return e}var A={path:"",query:""};function C(e){var t=e.indexOf("?");return-1!==t?(A.path=e.slice(0,t),A.query=e.slice(t+1)):(A.path=e,A.query=null),A}function E(e){return(e=re(e=function(e){return e&&"/"===e[e.length-1]?e:e+"/"}(e=C(e).path),!0)).toLowerCase()}function P(e){for(var t={proxyUrl:e.proxyUrl,urlPrefix:E(e.urlPrefix)},n=l.proxyRules,r=t.urlPrefix,i=n.length,a=0;a<n.length;a++){var o=n[a].urlPrefix;if(0===r.indexOf(o)){if(r.length===o.length)return-1;i=a;break}0===o.indexOf(r)&&(i=a+1)}return n.splice(i,0,t),i}function R(e){for(var t=l.proxyRules,n=E(e),r=0;r<t.length;r++)if(0===n.indexOf(t[r].urlPrefix))return t[r]}function D(e,t){return e=L(e),t=L(t),re(e)===re(t)}function L(e){var t=(e=B(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function N(e){var t=function(t){return null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t)},n=l.interceptors;if(n){var r,i=Vt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(Array.isArray(a.urls)){if(a.urls.some(t))return a}else if(t(a.urls))return a}}catch(o){i.e(o)}finally{i.f()}}return null}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ue(e),i=ue(t);return!(!n&&r.scheme!==i.scheme)&&null!=r.host&&null!=i.host&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function z(e){if("string"==typeof e){if(!W(e))return!0;e=ue(e)}if(F(e,O))return!0;for(var t=l.trustedServers||[],n=0;n<t.length;n++)for(var r=V(t[n]),i=0;i<r.length;i++)if(F(e,r[i]))return!0;return!1}function V(e){return j[e]||(j[e]=ee(e)||$(e)?[new w(G(e))]:[new w("http://"+e),new w("https://"+e)]),j[e]}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2?arguments[2]:void 0;return $(e)?n&&n.preserveProtocolRelative?e:"http"===O.scheme&&O.authority===H(e).slice(2)?"http:"+e:"https:"+e:ee(e)?e:Object(o.d)(q("/"===e[0]?function(e){var t=e.indexOf("//"),n=e.indexOf("/",t+2);return-1===n?e:e.slice(0,n)}(t):t,e))}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2?arguments[2]:void 0;if(!W(e))return e;var r=B(e),i=r.toLowerCase(),a=B(t).toLowerCase().replace(/\/+$/,""),o=n?B(n).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==a.indexOf(o))return e;for(var s=function(e,t,n){return-1===(n=e.indexOf(t,n))?e.length:n},u=s(i,"/",i.indexOf("//")+2),c=-1;i.slice(0,u+1)===a.slice(0,u)+"/"&&(c=u+1,u!==i.length);)u=s(i,"/",u+1);if(-1===c)return e;if(o&&c<o.length)return e;e=r.slice(c);var l=a.slice(c-1).replace(/[^/]+/g,"").length;if(l>0)for(var h=0;h<l;h++)e="../"+e;else e="./"+e;return e}function B(e){return function(e){var t=l.httpsDomains;if(!function(e){return p.test(e)||"http"===O.scheme&&$(e)}(e))return e;var n,r=e.indexOf("/",7);if(n=(n=-1===r?e:e.slice(0,r)).toLowerCase().slice(7),y.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return"http"===O.scheme&&n===O.authority&&!b.test(e)||(ne()&&n===O.authority||t&&t.some((function(e){return n===e||n.endsWith("."+e)}))||ne()&&!R(e))&&(e=te(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){var t=C(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+="?"+t.query)}return e}(e=G(e=e.trim()))))}function q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(o.k);if(r&&r.length){var i=[];if(W(r[0])){var a=r[0],s=a.indexOf("//");-1!==s&&(i.push(a.slice(0,s+1)),function(e){return v.test(e)}(r[0])&&(i[0]+="/"),r[0]=a.slice(s+2))}else"/"===r[0][0]&&i.push("");for(var u=r.reduce((function(e,t){return t?e.concat(t.split("/")):e}),[]),c=0;c<u.length;c++){var l=u[c];".."===l&&i.length>0&&".."!==i[i.length-1]?i.pop():(!l&&c===u.length-1||l&&("."!==l||0===i.length))&&i.push(l)}return i.join("/")}}function H(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(J(e)||Z(e))return null;var n=e.indexOf("://");if(-1===n&&$(e))n=2;else{if(-1===n)return null;n+=3}var r=e.indexOf("/",n);return-1!==r&&(e=e.slice(0,r)),t&&(e=re(e,!0)),e}function W(e){return $(e)||ee(e)}function J(e){return null!=e&&"blob:"===e.slice(0,5)}function Z(e){return"data:"===e.slice(0,5)}function K(e){var t=X(e);if(!t||!t.isBase64)return null;for(var n=atob(t.data),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r.buffer}var Y=/^data:(.*?)(;base64)?,(.*)$/;function X(e){var t=e.match(Y);if(!t)return null;var n=zt(t,4);return{mediaType:n[1],isBase64:!!n[2],data:n[3]}}function Q(e){return e.isBase64?"data:".concat(e.mediaType,";base64,").concat(e.data):"data:".concat(e.mediaType,",").concat(e.data)}function $(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function ee(e){return f.test(e)}function te(e){return $(e)?"https:"+e:e.replace(p,"https:")}function ne(){return"https"===O.scheme}function re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $(e)?e.slice(2):(e=e.replace(f,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function ie(e){var t=0;if(W(e)){var n=e.indexOf("//");-1!==n&&(t=n+2)}var r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function ae(e,t){if(!e)return"";var n=x(e).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(null==t||!t.length)return r;var i=new RegExp(".(".concat(t.join("|"),")$"),"ig");return r.replace(i,"")}function oe(e){return e.replace(/\/+$/,"")}function se(e,t,n){if(!(t&&n&&e&&W(e)))return e;var r=e.indexOf("//"),i=e.indexOf("/",r+2),a=e.indexOf(":",r+2),o=Math.min(i<0?e.length:i,a<0?e.length:a);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:"".concat(e.slice(0,r+2)).concat(n).concat(e.slice(o))}function ue(e){return"string"==typeof e?new w(G(e)):(e.scheme||(e.scheme=O.scheme),e)}function ce(e){return ve.test(e)}function le(e,t){var n=x(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: ".concat(r.join(", "),".")),n.path}function he(e,t,n){var r=x(e),i=r.query||{};return i[t]=String(n),"".concat(r.path,"?").concat(M(i))}function fe(e,t){var n=x(e),r=n.query||{};for(var i in t)r[i]=t[i];var a=M(r);return a?"".concat(n.path,"?").concat(a):n.path}function pe(e){if(Object(o.j)(e))return null;var t=e.match(de);return t?t[1]:null}var de=/.*?\.([^\/]*)$/,ve=/(^data:image\/svg|\.svg$)/i},"4EdQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("srIe"),i=n("LE9a"),a=function(){function e(){Wt(this,e),this._isToolEditable=!0,this._manipulators=new i.a,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}return Zt(e,[{key:"isToolEditable",set:function(e){this._isToolEditable=e}},{key:"length",get:function(){return this._manipulators.length}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.addMany([e],t)[0]}},{key:"addMany",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){var r=t._nextManipulatorId++,i={id:r,manipulator:e,visibilityPredicate:n,attached:!1};return t._manipulators.add(i),t._attached&&t._updateManipulatorAttachment(i),r}))}},{key:"remove",value:function(e){if("number"==typeof e){for(var t=e,n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).id===t){var r=this._manipulators.splice(n,1)[0];return this._detachManipulator(r),r.id}return null}for(var i=e,a=0;a<this._manipulators.length;a++)if(this._manipulators.getItemAt(a).manipulator===i){var o=this._manipulators.splice(a,1)[0];return this._detachManipulator(o),o.id}return null}},{key:"removeAll",value:function(){var e=this;this._manipulators.forEach((function(t){e._detachManipulator(t)})),this._manipulators.removeAll()}},{key:"attach",value:function(){var e=this;this._manipulators.forEach((function(t){e._updateManipulatorAttachment(t)})),this._attached=!0}},{key:"detach",value:function(){var e=this;this._manipulators.forEach((function(t){e._detachManipulator(t)})),this._attached=!1}},{key:"destroy",value:function(){this._manipulators.forEach((function(e){var t=e.manipulator;t.destroy&&t.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}},{key:"on",value:function(e,t){return this._manipulators.on(e,(function(e){t(e)}))}},{key:"forEach",value:function(e){var t,n=Vt(this._manipulators.items);try{for(n.s();!(t=n.n()).done;){e(t.value)}}catch(r){n.e(r)}finally{n.f()}}},{key:"some",value:function(e){return this._manipulators.items.some(e)}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){return e.push(t.manipulator)})),e}},{key:"intersect",value:function(e,t){var n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((function(a){var o=a.id,s=a.manipulator;if(a.attached&&s.interactive){var u=s.intersectionDistance(e,t);Object(r.k)(u)&&u<i&&(i=u,n={id:o,manipulator:s})}})),n}},{key:"findById",value:function(e){if(Object(r.j)(e))return null;var t,n=Vt(this._manipulators.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e===i.id)return i.manipulator}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"_updateManipulatorAttachment",value:function(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}},{key:"_attachManipulator",value:function(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}},{key:"_detachManipulator",value:function(e){if(e.attached){var t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}}},{key:"_isManipulatorItemVisible",value:function(e){return 2===e.visibilityPredicate||(this._isToolEditable?0===e.visibilityPredicate:1===e.visibilityPredicate)}}]),e}()},"4GrV":function(e,t,n){"use strict";n.d(t,"e",(function(){return h}));var r=n("zqDF"),i=n("WZb1");n.d(t,"d",(function(){return i.a}));var a=n("N2DF"),o=n("SuVq");n.d(t,"a",(function(){return o.a}));var s=n("OvF4"),u=n("V9wi"),c=n("Ehki");n.d(t,"b",(function(){return c.a}));var l=n("UhwK");n.d(t,"c",(function(){return l.a})),n("dOLD"),n("qatw");var h={base:a.a,key:"type",typeMap:{extent:s.a,multipoint:u.a,point:o.a,polyline:l.a,polygon:c.a}};Object(r.k)(h)},"4bvL":function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e,t){for(var n,i,a,o,s,u,c,l="",h=0;h<e.length;)o=(n=e.charCodeAt(h++))>>2,s=(3&n)<<4|(i=e.charCodeAt(h++))>>4,u=(15&i)<<2|(a=e.charCodeAt(h++))>>6,c=63&a,isNaN(i)?u=c=64:isNaN(a)&&(c=64),l=l+r.charAt(o)+r.charAt(s)+r.charAt(u)+r.charAt(c);return l},t.decode=function(e,t){var n,i,a,o,s,u,c="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)a=r.indexOf(e.charAt(l++)),n=(15&(o=r.indexOf(e.charAt(l++))))<<4|(s=r.indexOf(e.charAt(l++)))>>2,i=(3&s)<<6|(u=r.indexOf(e.charAt(l++))),c+=String.fromCharCode(a<<2|o>>4),64!=s&&(c+=String.fromCharCode(n)),64!=u&&(c+=String.fromCharCode(i));return c}},"4bvo":function(e,t,n){"use strict";var r,i,a=n("pO5D"),o=(n("wSAH"),n("srIe")),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("RI0u"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("lh0l")),h=n("o685"),f=n("jBHT"),p=n("/CmD"),d=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).x=0,e.y=0,e.z=0,e}return Zt(n,[{key:"clone",value:function(){return new r({x:this.x,y:this.y,z:this.z})}}]),n}(p.a);Object(a.a)([Object(s.b)({type:Number})],d.prototype,"x",void 0),Object(a.a)([Object(s.b)({type:Number})],d.prototype,"y",void 0),Object(a.a)([Object(s.b)({type:Number})],d.prototype,"z",void 0),d=r=Object(a.a)([Object(c.a)("esri.symbols.support.Symbol3DAnchorPosition3D")],d);var v=i=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).material=null,r.castShadows=!0,r.resource=null,r.type="object",r.width=void 0,r.height=void 0,r.depth=void 0,r.anchor=void 0,r.anchorPosition=void 0,r.heading=void 0,r.tilt=void 0,r.roll=void 0,r}return Zt(n,[{key:"clone",value:function(){return new i({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:Object(o.k)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}},{key:"isPrimitive",get:function(){return!this.resource||"string"!=typeof this.resource.href}}]),n}(l.a);Object(a.a)([Object(s.b)({type:h.a,json:{write:!0}})],v.prototype,"material",void 0),Object(a.a)([Object(s.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],v.prototype,"castShadows",void 0),Object(a.a)([Object(s.b)({type:f.a,json:{write:!0}})],v.prototype,"resource",void 0),Object(a.a)([Object(u.a)({Object:"object"},{readOnly:!0})],v.prototype,"type",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"width",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"height",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"depth",void 0),Object(a.a)([Object(u.a)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),Object(s.b)({json:{default:"origin"}})],v.prototype,"anchor",void 0),Object(a.a)([Object(s.b)({type:d,json:{type:[Number],read:{reader:function(e){return new d({x:e[0],y:e[1],z:e[2]})}},write:{writer:function(e,t){t.anchorPosition=[e.x,e.y,e.z]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],v.prototype,"anchorPosition",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"heading",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"tilt",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"roll",void 0),Object(a.a)([Object(s.b)({readOnly:!0})],v.prototype,"isPrimitive",null),v=i=Object(a.a)([Object(c.a)("esri.symbols.ObjectSymbol3DLayer")],v),t.a=v},"4eAd":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("tQ+6"),i=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Wt(this,n),(a=t.call(this,e)).origin=r,a.angle=i,a.accumulationType=o,a}return Zt(n,[{key:"rotate",value:function(e,t){this.helper.rotate(e.pos,this.origin,t)}},{key:"apply",value:function(e){this.rotate(e,this.angle)}},{key:"undo",value:function(e){this.rotate(e,-this.angle)}},{key:"canAccumulate",value:function(e){return e instanceof n&&Object(r.c)(this.origin,e.origin)}},{key:"accumulate",value:function(e,t){this.rotate(e,1===t.accumulationType?t.angle-this.angle:t.angle)}},{key:"accumulateParams",value:function(e){this.angle=1===e.accumulationType?e.angle:this.angle+e.angle}}]),n}(n("NPIS").a)},"4frj":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("Gxlu")),u=n("sI4m"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="bar-chart",r}return Zt(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:u.a.write}})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(o.a)("esri.popup.content.BarChartMediaInfo")],c),t.a=c},"4gt3":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n("wSAH"),i=new Set;function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&i.has(t)||(n&&i.add(t),e.warn("\ud83d\uded1 DEPRECATED - "+t))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(r.a)("esri-deprecation-warnings")){var i=n.moduleName;u(e,"Function: "+(i?i+"::":"")+t+"()",n)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(r.a)("esri-deprecation-warnings")){var i=n.moduleName;u(e,"Property: "+(i?i+"::":"")+t,n)}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(r.a)("esri-deprecation-warnings")){var i=n.replacement,o=n.version,s=n.see,u=n.warnOnce,c=t;i&&(c+="\n\t\ud83d\udee0\ufe0f Replacement: "+i),o&&(c+="\n\t\u2699\ufe0f Version: "+o),s&&(c+="\n\t\ud83d\udd17 See ".concat(s," for more details.")),a(e,c,u)}}},"51PB":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ZwYu"),i=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this)).intersectionPoint=e,r}return Zt(n,[{key:"equals",value:function(e){return e instanceof n&&Object(r.d)(this.intersectionPoint,e.intersectionPoint)}}]),n}(n("fctI").a)},"5C/r":function(e,t,n){"use strict";function r(e,t,n,r){var i=null,a=1e3;"number"==typeof t?(a=t,r=n):(i=null!=t?t:null,a=n);var o,s=0,u=function(){s=0,e.apply(r,o)},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i&&i.apply(r,t),o=t,a?s||(s=setTimeout(u,a)):u()};return c.remove=function(){s&&(clearTimeout(s),s=0)},c.forceUpdate=function(){s&&(clearTimeout(s),u())},c.hasPendingUpdates=function(){return!!s},c}n.d(t,"a",(function(){return r}))},"5DEt":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return o})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return j})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return a})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return g})),n.d(t,"r",(function(){return y})),n.d(t,"s",(function(){return b})),n.d(t,"t",(function(){return x})),n.d(t,"u",(function(){return T})),n.d(t,"v",(function(){return s})),n.d(t,"w",(function(){return _})),n.d(t,"x",(function(){return P})),n.d(t,"y",(function(){return C})),n.d(t,"z",(function(){return A}));var r=n("Cy1f"),i=n("QhKk");function a(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function u(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function c(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function h(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function f(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function p(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function d(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function v(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function y(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function b(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function g(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function w(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function O(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function j(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12],e[1]=n[1]*r+n[5]*i+n[9]*a+n[13],e[2]=n[2]*r+n[6]*i+n[10]*a+n[14],e}function _(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function x(e,t,n){var r=n[0],i=n[1],a=n[2],o=t[0],s=t[1],u=t[2],c=i*u-a*s,l=a*o-r*u,h=r*s-i*o,f=i*h-a*l,p=a*c-r*h,d=r*l-i*c,v=2*n[3];return c*=v,l*=v,h*=v,f*=2,p*=2,d*=2,e[0]=o+c+f,e[1]=s+l+p,e[2]=u+h+d,e}function k(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}var S=Object(r.e)(),M=Object(r.e)();function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var T=c,A=d,C=v,E=a,P=y;Object.freeze({__proto__:null,length:a,copy:o,set:s,add:u,subtract:c,multiply:l,divide:h,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:f,scaleAndAdd:p,distance:d,squaredDistance:v,squaredLength:y,negate:b,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:g,dot:m,cross:w,lerp:O,hermite:function(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),l=o*(3-2*a);return e[0]=t[0]*s+n[0]*u+r[0]*c+i[0]*l,e[1]=t[1]*s+n[1]*u+r[1]*c+i[1]*l,e[2]=t[2]*s+n[2]*u+r[2]*c+i[2]*l,e},bezier:function(e,t,n,r,i,a){var o=1-a,s=o*o,u=a*a,c=s*o,l=3*a*s,h=3*u*o,f=u*a;return e[0]=t[0]*c+n[0]*l+r[0]*h+i[0]*f,e[1]=t[1]*c+n[1]*l+r[1]*h+i[1]*f,e[2]=t[2]*c+n[2]*l+r[2]*h+i[2]*f,e},random:function(e,t){t=t||1;var n=2*Object(i.b)()*Math.PI,r=2*Object(i.b)()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e},transformMat4:j,transformMat3:_,transformQuat:x,rotateX:function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},rotateY:function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},rotateZ:k,angle:function(e,t){o(S,e),o(M,t),g(S,S),g(M,M);var n=m(S,M);return n>1?0:n<-1?Math.PI:Math.acos(n)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:I,equals:function(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],s=t[1],u=t[2];return Math.abs(n-o)<=i.a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i.a*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=i.a*Math.max(1,Math.abs(a),Math.abs(u))},sub:T,mul:l,div:h,dist:A,sqrDist:C,len:E,sqrLen:P})},"5SEJ":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("UhwK"),c=n("qatw");n("4GrV");var l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).extendHow="default-curve-extension",r.polylines=null,r.trimExtendTo=null,r}return n}(s.a);Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"extendHow",void 0),Object(r.a)([Object(a.b)({type:[u.a],json:{read:{reader:function(e){return e?e.map((function(e){return Object(c.a)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],l.prototype,"polylines",void 0),Object(r.a)([Object(a.b)({json:{read:{reader:function(e){return e?Object(c.a)(e):null}},write:{writer:function(e,t){t.trimExtendTo=e.toJSON()}}}})],l.prototype,"trimExtendTo",void 0),(l=Object(r.a)([Object(o.a)("esri.tasks.support.TrimExtendParameters")],l)).from=Object(i.m)(l),t.a=l},"5VIg":function(e,t){e.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}},"5VpP":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,1===t[0]}()},"5k2a":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("r88o"),u=n("ACjl"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("tQ+6")),f=n("ag7Y"),p=n("gEht"),d=Object(o.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),v=d.jsonValues.slice();Object(h.j)(v,"orthometric");var y=Object(o.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),b=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).heightModel="gravity-related-height",r.heightUnit="meters",r.vertCRS=null,r}return Zt(n,[{key:"writeHeightModel",value:function(e,t,n){return d.write(e,t,n)}},{key:"readHeightModel",value:function(e,t,n){return d.read(e)||(n&&n.messages&&n.messages.push(function(e,t){return new u.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:n})),null)}},{key:"readHeightUnit",value:function(e,t,n){return y.read(e)||(n&&n.messages&&n.messages.push(g(e,{context:n})),null)}},{key:"readHeightUnitService",value:function(e,t,n){return Object(p.x)(e)||y.read(e)||(n&&n.messages&&n.messages.push(g(e,{context:n})),null)}},{key:"readVertCRS",value:function(e,t){return t.vertCRS||t.ellipsoid||t.geoid}},{key:"clone",value:function(){return new r({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}},{key:"equals",value:function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}},{key:"write",value:function(e,t){return t=Nt({origin:"web-scene"},t),Dt(en(n.prototype),"write",this).call(this,e,t)}}],[{key:"deriveUnitFromSR",value:function(e,t){var n=Object(p.i)(t);return new r({heightModel:e.heightModel,heightUnit:n,vertCRS:e.vertCRS})}},{key:"fromJSON",value:function(e){if(!e)return null;var t=new r;return t.read(e,{origin:"web-scene"}),t}}]),n}(f.a);function g(e,t){return new u.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(i.a)([Object(a.b)({type:d.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:v,default:"ellipsoidal"}}}})],b.prototype,"heightModel",void 0),Object(i.a)([Object(l.a)("web-scene","heightModel")],b.prototype,"writeHeightModel",null),Object(i.a)([Object(s.a)(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",null),Object(i.a)([Object(a.b)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:y.jsonValues,write:y.write}}}})],b.prototype,"heightUnit",void 0),Object(i.a)([Object(s.a)("web-scene","heightUnit")],b.prototype,"readHeightUnit",null),Object(i.a)([Object(s.a)("service","heightUnit")],b.prototype,"readHeightUnitService",null),Object(i.a)([Object(a.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0),Object(i.a)([Object(s.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,"readVertCRS",null),b=r=Object(i.a)([Object(c.a)("esri.geometry.HeightModelInfo")],b),t.a=b},"5ljs":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),u=n("fX31"),c="esri.support.TablesMixin",l=i.a.getLogger(c);function h(e){return e&&"group"===e.type}function f(e,t,n){if(e)for(var r=0,i=e.length;r<i;r++){var a=e.getItemAt(r);if(a[t]===n)return a;if(h(a)){var o=f(a.tables,t,n);if(o)return o}}}var p=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).tables=new s.a,e.tables.on("after-add",(function(t){var n=t.item;n.parent&&n.parent!==$t(e)&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=$t(e),"feature"!==n.type&&l.error("Layer 'title:".concat(n.title,", id:").concat(n.id,"' of type '").concat(n.type,"' is not supported as a table and will therefore be ignored."))})),e.tables.on("after-remove",(function(e){e.item.parent=null})),e}return Zt(n,[{key:"destroy",value:function(){var e,t=Vt(this.tables.removeAll());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.tables.destroy()}},{key:"tables",set:function(e){this._set("tables",Object(u.b)(e,this._get("tables")))}},{key:"findTableById",value:function(e){return f(this.tables,"id",e)}},{key:"findTableByUid",value:function(e){return f(this.tables,"uid",e)}}]),n}(e);return Object(r.a)([Object(a.b)()],t.prototype,"tables",null),t=Object(r.a)([Object(o.a)(c)],t)}},"5pQd":function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g}));var r=n("pO5D"),i=n("TDcG"),a=n("04ZG"),o=n("ku/q"),s=n("/CmD"),u=n("xHih"),c=n("srIe"),l=n("CWQl"),h=n("f/qv"),f=function(){function e(){Wt(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(o.a),this._values=new Map}return Zt(e,[{key:"clone",value:function(t){var n=this,r=new e,i=this._originStores[0];i&&i.forEach((function(e,t){r.set(t,Object(h.a)(e),0)}));for(var a=function(e){var i=n._originStores[e];i&&i.forEach((function(n,i){t&&t.has(i)||r.set(i,Object(h.a)(n),e)}))},s=2;s<o.a;s++)a(s);return r}},{key:"get",value:function(e,t){var n=void 0===t?this._values:this._originStores[t];return n?n.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?Bt(t.keys()):[]}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=this._originStores[n];if(r||(r=new Map,this._originStores[n]=r),r.set(e,t),!this._values.has(e)||Object(c.d)(this._propertyOriginMap.get(e))<=n){var i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,n),i!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=this._originStores[t];if(n){var r=n.get(e);if(n.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var i=t-1;i>=0;i--){var a=this._originStores[i];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,i);break}}}return r}}},{key:"has",value:function(e,t){var n=void 0===t?this._values:this._originStores[t];return!!n&&n.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var n=this._originStores[t],r=n&&n.get(e),i=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),i!==r}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||0}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),p=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];e=t.call.apply(t,[this].concat(a));var s=Object(c.d)(Object(i.a)($t(e))),u=s.metadatas,l=s.store,h=new f;return s.store=h,l.keys().forEach((function(e){h.set(e,l.get(e),0)})),Object.keys(u).forEach((function(e){s.internalGet(e)&&h.set(e,s.internalGet(e),0)})),e}return Zt(n,[{key:"read",value:function(e,t){Object(l.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var n=d(this),r=Object(o.d)(t);if("string"==typeof e)return n.get(e,r);var i={};return e.forEach((function(e){i[e]=n.get(e,r)})),i}},{key:"originOf",value:function(e){return Object(o.b)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return d(this).originOf(e)}},{key:"revert",value:function(e,t){var n=d(this),r=Object(o.d)(t),a=Object(i.a)(this);("string"==typeof e?"*"===e?n.keys(r):[e]:e).forEach((function(e){a.propertyInvalidated(e),n.revert(e,r),a.propertyCommitted(e)}))}}]),n}(e);return t=Object(r.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function d(e){return Object(i.a)(e).store}var v=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(p(s.a));v=Object(r.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],v);function y(e){return Object(i.a)(e).store}var b=function(e){var t,n,s=function(e){Kt(n,e);var t=Xt(n);function n(){Wt(this,n);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.call.apply(t,[this].concat(r))}return n}((t=p(e),n=function(e){Kt(n,e);var t=Xt(n);function n(){Wt(this,n);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.call.apply(t,[this].concat(r))}return Zt(n,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return y(this).delete(e,Object(o.d)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(u.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,n){Object(i.a)(this).setAtOrigin(e,t,Object(o.d)(n))}},{key:"removeOrigin",value:function(e){var t,n=y(this),r=Object(o.d)(e),i=Vt(n.keys(r));try{for(i.s();!(t=i.n()).done;){var a=t.value;n.originOf(a)===r&&n.set(a,n.get(a,r),6)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateOrigin",value:function(e,t){for(var n=y(this),r=Object(o.d)(t),i=this.get(e),a=r+1;a<o.a;++a)n.delete(e,a);n.set(e,i,r)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),n}(t),(n=Object(r.a)([Object(a.a)("esri.core.WriteableMultiOriginJSONSupport")],n)).prototype.toJSON.isDefaultToJSON=!0,n));return s=Object(r.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],s)},g=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(b(s.a));g=Object(r.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],g)},"5qpZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e,t){e.vertex.uniforms.add("intrinsicWidth","float"),t.vvSize?(e.attributes.add("sizeFeatureAttribute","float"),e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.code.add(r.a(p||(p=Rt(["\n    float getSize() {\n      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n    }\n    "]))))):(e.attributes.add("size","float"),e.vertex.code.add(r.a(d||(d=Rt(["\n    float getSize(){\n      return intrinsicWidth * size;\n    }\n    "]))))),t.vvOpacity?(e.attributes.add("opacityFeatureAttribute","float"),e.vertex.constants.add("vvOpacityNumber","int",8),e.vertex.code.add(r.a(v||(v=Rt(["\n    uniform float vvOpacityValues[vvOpacityNumber];\n    uniform float vvOpacityOpacities[vvOpacityNumber];\n\n    float interpolateOpacity( float value ){\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity( vec4 color ){\n      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n    }\n    "]))))):e.vertex.code.add(r.a(y||(y=Rt(["\n    vec4 applyOpacity( vec4 color ){\n      return color;\n    }\n    "])))),t.vvColor?(e.attributes.add("colorFeatureAttribute","float"),e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(r.a(b||(b=Rt(["\n    uniform float vvColorValues[vvColorNumber];\n    uniform vec4 vvColorColors[vvColorNumber];\n\n    vec4 interpolateColor( float value ) {\n      if (value <= vvColorValues[0]) {\n        return vvColorColors[0];\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return mix(vvColorColors[i-1], vvColorColors[i], f);\n        }\n      }\n\n      return vvColorColors[vvColorNumber - 1];\n    }\n\n    vec4 getColor(){\n      return applyOpacity(interpolateColor(colorFeatureAttribute));\n    }\n    "]))))):(e.attributes.add("color","vec4"),e.vertex.code.add(r.a(g||(g=Rt(["\n    vec4 getColor(){\n      return applyOpacity(color);\n    }\n    "])))))}},"5rU3":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("wSAH");var r=n("6S2I"),i=n("ZwYu"),a=n("fctI");r.a.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");var o=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Wt(this,n),(a=t.call(this)).type=e,a.lineStart=r,a.lineEnd=i,a.fadeLeft=o,a.fadeRight=s,a}return Zt(n,[{key:"equals",value:function(e){return e instanceof n&&this.type===e.type&&Object(i.d)(this.lineStart,e.lineStart)&&Object(i.d)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}}]),n}(a.a)},"5sKF":function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return j}));var r,i=n("cCpn"),a="http://www.w3.org/",o=a+"2000/svg",s=a+"1999/xlink",u=[],c=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),n},l=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},h=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},f=function(e,t,n){if(""!==t.vnodeSelector)for(var r=n;r<e.length;r++)if(l(e[r],t))return r;return-1},p=function(e,t,n,r){var i=e[t];if(""!==i.vnodeSelector){var a=i.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var o=0;o<e.length;o++)if(o!==t&&l(e[o],i))throw new Error("".concat(n.vnodeSelector," had a ").concat(i.vnodeSelector," child ").concat("added"===r?r:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable."))}},d=function(e){if(e.properties){var t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},v=[],y=!1,b=function e(t){(t.children||[]).forEach(e),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},g=function(){y=!1,v.forEach(b),v.length=0},m=function(e){v.push(e),y||(y=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(g,{timeout:16}):setTimeout(g,16))},w=function(e){var t=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){t.style.pointerEvents="none";return void n(t,(function(){t.parentNode&&(t.parentNode.removeChild(t),m(e))}),e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),m(e))},O=function(e,t,n){if(t)for(var r=n.eventHandlerInterceptor,a=Object.keys(t),u=a.length,c=function(u){var c=a[u],l=t[c];if("className"===c)throw new Error('Property "className" is not supported, use "class".');if("class"===c)x(e,l,!0);else if("classes"===c)for(var f=Object.keys(l),p=f.length,d=0;d<p;d++){var v=f[d];l[v]&&e.classList.add(v)}else if("styles"===c)for(var y=Object.keys(l),b=y.length,g=0;g<b;g++){var m=y[g],w=l[m];w&&(h(w),n.styleApplyer(e,m,w))}else if("key"!==c&&null!=l){var O=typeof l;"function"===O?(0===c.lastIndexOf("on",0)&&(r&&(l=r(c,l,e,t)),"oninput"===c&&function(){var e=l;l=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[c]=l):n.namespace===o?"href"===c?e.setAttributeNS(s,c,l):e.setAttribute(c,l):"string"===O&&"value"!==c?"innerHTML"===c?e[c]=i.h.sanitize(l):e.setAttribute(c,l):e[c]=l}},l=0;l<u;l++)c(l)},j=function(e,t,n){(function(e,t,n){if(t){var r,i=Vt(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;_(a,e,void 0,n)}}catch(o){i.e(o)}finally{i.f()}}})(e,t.children,n),t.text&&(e.textContent=t.text),O(e,t.properties,n),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,n,t.vnodeSelector,t.properties,t.children])},_=function(e,t,n,r){var i,a=0,s=e.vnodeSelector,u=t.ownerDocument;if(""===s)i=e.domNode=u.createTextNode(e.text),void 0!==n?t.insertBefore(i,n):t.appendChild(i);else{for(var l=0;l<=s.length;++l){var h=s.charAt(l);if(l===s.length||"."===h||"#"===h){var f=s.charAt(a-1),p=s.slice(a,l);"."===f?i.classList.add(p):"#"===f?i.id=p:("svg"===p&&(r=c(r,{namespace:o})),void 0!==r.namespace?i=e.domNode=u.createElementNS(r.namespace,p):(i=e.domNode=e.domNode||u.createElement(p),"input"===p&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==n?t.insertBefore(i,n):i.parentNode!==t&&t.appendChild(i)),a=l+1}}j(i,e,r)}},x=function(e,t,n){t&&t.split(" ").forEach((function(t){t&&e.classList.toggle(t,n)}))},k=function(e,t,n,r){if(n){for(var a=!1,u=Object.keys(n),c=u.length,l=0;l<c;l++){var f=u[l],p=n[f],d=t[f];if("class"===f)d!==p&&(x(e,d,!1),x(e,p,!0));else if("classes"===f)for(var v=e.classList,y=Object.keys(p),b=y.length,g=0;g<b;g++){var m=y[g],w=!!p[m];w!==!!d[m]&&(a=!0,w?v.add(m):v.remove(m))}else if("styles"===f)for(var O=Object.keys(p),j=O.length,_=0;_<j;_++){var k=O[_],S=p[k];S!==d[k]&&(a=!0,S?(h(S),r.styleApplyer(e,k,S)):r.styleApplyer(e,k,""))}else if(p||"string"!=typeof d||(p=""),"value"===f){var M=e[f];M!==p&&(e["oninput-value"]?M===e["oninput-value"]:p!==d)&&(e[f]=p,e["oninput-value"]=void 0),p!==d&&(a=!0)}else if(p!==d){var I=typeof p;"function"===I&&r.eventHandlerInterceptor||(r.namespace===o?"href"===f?e.setAttributeNS(s,f,p):e.setAttribute(f,p):"string"===I?"innerHTML"===f?e[f]=i.h.sanitize(p):"role"===f&&""===p?e.removeAttribute(f):e.setAttribute(f,p):e[f]!==p&&(e[f]=p),a=!0)}}return a}},S=function(e,t,n,i,a){if(n===i)return!1;for(var o,s=(n=n||u).length,c=(i=i||u).length,h=0,v=0,y=!1;v<c;){var b=h<s?n[h]:void 0,g=i[v];if(void 0!==b&&l(b,g))y=r(b,g,a)||y,h++;else{var m=f(n,g,h+1);if(m>=0){for(o=h;o<m;o++)w(n[o]),p(n,o,e,"removed");y=r(n[m],g,a)||y,h=m+1}else _(g,t,h<s?n[h].domNode:void 0,a),d(g),p(i,v,e,"added")}v++}if(s>h)for(o=h;o<s;o++)w(n[o]),p(n,o,e,"removed");return y};r=function(e,t,n){var r=e.domNode,i=!1;if(e===t)return!1;var a=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var s=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(s,r),t.domNode=s,i=!0}t.domNode=r}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(n=c(n,{namespace:o})),e.text!==t.text&&(a=!0,void 0===t.text?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,a=S(t,r,e.children,t.children,n)||a,a=k(r,e.properties,t.properties,n)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,n,t.vnodeSelector,t.properties,t.children]);return a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),i};var M=function(e,t){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var i=e;e=n,r(i,n,t)},domNode:e.domNode}}},"69UF":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n("OIYi"),i=.1,a=.001;function o(e,t){var n=e.fragment;switch(t.alphaDiscardMode){case 0:n.code.add(r.a(m||(m=Rt(["\n        #define discardOrAdjustAlpha(color) { if (color.a < ",") { discard; } }\n      "])),r.a.float(a)));break;case 1:n.code.add(r.a(w||(w=Rt(["\n        void discardOrAdjustAlpha(inout vec4 color) {\n          color.a = 1.0;\n        }\n      "]))));break;case 2:n.uniforms.add("textureAlphaCutoff","float"),n.code.add(r.a(O||(O=Rt(["\n        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }\n      "]))));break;case 3:e.fragment.uniforms.add("textureAlphaCutoff","float"),e.fragment.code.add(r.a(j||(j=Rt(["\n        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }\n      "]))))}}},"6HyS":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("iRQj");function i(e,t,n){if(n&&n.features&&n.hasZ){var i=Object(r.a)(n.geometryType,t,e.outSpatialReference);if(i){var a,o=Vt(n.features);try{for(o.s();!(a=o.n()).done;){i(a.value.geometry)}}catch(s){o.e(s)}finally{o.f()}}}}},"6Q66":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("X2wA"),i=Object(r.b)((function(e){var t,n;t=function(){var e=function(){function e(e){this.message="JPEG error: "+e}return(e.prototype=new Error).name="JpegError",e.constructor=e,e}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,r=799,i=3406,a=2276,o=1567,s=3784,u=5793,c=2896;function l(){this.decodeTransform=null,this.colorTransform=-1}function h(e,t){for(var n,r,i=0,a=[],o=16;o>0&&!e[o-1];)o--;a.push({children:[],index:0});var s,u=a[0];for(n=0;n<o;n++){for(r=0;r<e[n];r++){for((u=a.pop()).children[u.index]=t[i];u.index>0;)u=a.pop();for(u.index++,a.push(u);a.length<=n;)a.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s;i++}n+1<o&&(a.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s)}return a[0].children}function f(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function p(n,r,i,a,o,s,u,c,l){var h=i.mcusPerLine,p=r,d=0,v=0;function b(){if(v>0)return v--,d>>v&1;if(255===(d=n[r++])){var t=n[r++];if(t)throw new e("unexpected marker "+(d<<8|t).toString(16))}return v=7,d>>>7}function g(t){for(var n=t;;){if("number"==typeof(n=n[b()]))return n;if("object"!=typeof n)throw new e("invalid huffman sequence")}}function m(e){for(var t=0;e>0;)t=t<<1|b(),e--;return t}function w(e){if(1===e)return 1===b()?1:-1;var t=m(e);return t>=1<<e-1?t:t+(-1<<e)+1}var O,j=0,_=0;function x(e,t,n,r,i){t(e,f(e,(n/h|0)*e.v+r,n%h*e.h+i))}function k(e,t,n){t(e,f(e,n/e.blocksPerLine|0,n%e.blocksPerLine))}var S,M,I,T,A,C,E=a.length;C=i.progressive?0===s?0===c?function(e,t){var n=g(e.huffmanTableDC),r=0===n?0:w(n)<<l;e.blockData[t]=e.pred+=r}:function(e,t){e.blockData[t]|=b()<<l}:0===c?function(e,n){if(j>0)j--;else for(var r=s,i=u;r<=i;){var a=g(e.huffmanTableAC),o=15&a,c=a>>4;if(0!==o){var h=t[r+=c];e.blockData[n+h]=w(o)*(1<<l),r++}else{if(c<15){j=m(c)+(1<<c)-1;break}r+=16}}}:function(n,r){for(var i,a,o=s,c=u,h=0;o<=c;){var f=t[o];switch(_){case 0:if(h=(a=g(n.huffmanTableAC))>>4,0==(i=15&a))h<15?(j=m(h)+(1<<h),_=4):(h=16,_=1);else{if(1!==i)throw new e("invalid ACn encoding");O=w(i),_=h?2:3}continue;case 1:case 2:n.blockData[r+f]?n.blockData[r+f]+=b()<<l:0==--h&&(_=2===_?3:0);break;case 3:n.blockData[r+f]?n.blockData[r+f]+=b()<<l:(n.blockData[r+f]=O<<l,_=0);break;case 4:n.blockData[r+f]&&(n.blockData[r+f]+=b()<<l)}o++}4===_&&0==--j&&(_=0)}:function(e,n){var r=g(e.huffmanTableDC),i=0===r?0:w(r);e.blockData[n]=e.pred+=i;for(var a=1;a<64;){var o=g(e.huffmanTableAC),s=15&o,u=o>>4;if(0!==s){var c=t[a+=u];e.blockData[n+c]=w(s),a++}else{if(u<15)break;a+=16}}};var P,R,D,L,N=0;for(R=1===E?a[0].blocksPerLine*a[0].blocksPerColumn:h*i.mcusPerColumn;N<R;){var F=o?Math.min(R-N,o):R;for(M=0;M<E;M++)a[M].pred=0;if(j=0,1===E)for(S=a[0],A=0;A<F;A++)k(S,C,N),N++;else for(A=0;A<F;A++){for(M=0;M<E;M++)for(D=(S=a[M]).h,L=S.v,I=0;I<L;I++)for(T=0;T<D;T++)x(S,C,N,I,T);N++}v=0,(P=y(n,r))&&P.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+P.invalid),r=P.offset);var z=P&&P.marker;if(!z||z<=65280)throw new e("marker was not found");if(!(z>=65488&&z<=65495))break;r+=2}return(P=y(n,r))&&P.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+P.invalid),r=P.offset),r-p}function d(t,l,h){var f,p,d,v,y,b,g,m,w,O,j,_,x,k,S,M,I,T=t.quantizationTable,A=t.blockData;if(!T)throw new e("missing required Quantization Table.");for(var C=0;C<64;C+=8)w=A[l+C],w*=T[C],0!=((O=A[l+C+1])|(j=A[l+C+2])|(_=A[l+C+3])|(x=A[l+C+4])|(k=A[l+C+5])|(S=A[l+C+6])|(M=A[l+C+7]))?(p=(f=(f=u*w+128>>8)+(p=u*(x*=T[C+4])+128>>8)+1>>1)-p,I=(d=j*=T[C+2])*s+(v=S*=T[C+6])*o+128>>8,d=d*o-v*s+128>>8,g=(y=(y=c*((O*=T[C+1])-(M*=T[C+7]))+128>>8)+(g=(k*=T[C+5])<<4)+1>>1)-g,b=(m=(m=c*(O+M)+128>>8)+(b=(_*=T[C+3])<<4)+1>>1)-b,v=(f=f+(v=I)+1>>1)-v,d=(p=p+d+1>>1)-d,I=y*a+m*i+2048>>12,y=y*i-m*a+2048>>12,m=I,I=b*r+g*n+2048>>12,b=b*n-g*r+2048>>12,g=I,h[C]=f+m,h[C+7]=f-m,h[C+1]=p+g,h[C+6]=p-g,h[C+2]=d+b,h[C+5]=d-b,h[C+3]=v+y,h[C+4]=v-y):(h[C]=I=u*w+512>>10,h[C+1]=I,h[C+2]=I,h[C+3]=I,h[C+4]=I,h[C+5]=I,h[C+6]=I,h[C+7]=I);for(var E=0;E<8;++E)w=h[E],0!=((O=h[E+8])|(j=h[E+16])|(_=h[E+24])|(x=h[E+32])|(k=h[E+40])|(S=h[E+48])|(M=h[E+56]))?(p=(f=4112+((f=u*w+2048>>12)+(p=u*x+2048>>12)+1>>1))-p,I=(d=j)*s+(v=S)*o+2048>>12,d=d*o-v*s+2048>>12,v=I,g=(y=(y=c*(O-M)+2048>>12)+(g=k)+1>>1)-g,b=(m=(m=c*(O+M)+2048>>12)+(b=_)+1>>1)-b,I=y*a+m*i+2048>>12,y=y*i-m*a+2048>>12,m=I,I=b*r+g*n+2048>>12,b=b*n-g*r+2048>>12,w=(w=(f=f+v+1>>1)+m)<16?0:w>=4080?255:w>>4,O=(O=(p=p+d+1>>1)+(g=I))<16?0:O>=4080?255:O>>4,j=(j=(d=p-d)+b)<16?0:j>=4080?255:j>>4,_=(_=(v=f-v)+y)<16?0:_>=4080?255:_>>4,x=(x=v-y)<16?0:x>=4080?255:x>>4,k=(k=d-b)<16?0:k>=4080?255:k>>4,S=(S=p-g)<16?0:S>=4080?255:S>>4,M=(M=f-m)<16?0:M>=4080?255:M>>4,A[l+E]=w,A[l+E+8]=O,A[l+E+16]=j,A[l+E+24]=_,A[l+E+32]=x,A[l+E+40]=k,A[l+E+48]=S,A[l+E+56]=M):(I=(I=u*w+8192>>14)<-2040?0:I>=2024?255:I+2056>>4,A[l+E]=I,A[l+E+8]=I,A[l+E+16]=I,A[l+E+24]=I,A[l+E+32]=I,A[l+E+40]=I,A[l+E+48]=I,A[l+E+56]=I)}function v(e,t){for(var n=t.blocksPerLine,r=t.blocksPerColumn,i=new Int16Array(64),a=0;a<r;a++)for(var o=0;o<n;o++)d(t,f(t,a,o),i);return t.blockData}function y(e,t,n){function r(t){return e[t]<<8|e[t+1]}var i=e.length-1,a=n<t?n:t;if(t>=i)return null;var o=r(t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};for(var s=r(a);!(s>=65472&&s<=65534);){if(++a>=i)return null;s=r(a)}return{invalid:o.toString(16),marker:s,offset:a}}return l.prototype={parse:function(n){function r(){var e=n[u]<<8|n[u+1];return u+=2,e}function i(){var e=r(),t=u+e-2,i=y(n,t,u);i&&i.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+i.invalid),t=i.offset);var a=n.subarray(u,t);return u+=a.length,a}function a(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV),r=0;r<e.components.length;r++){N=e.components[r];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*N.h/e.maxH),a=Math.ceil(Math.ceil(e.scanLines/8)*N.v/e.maxV);N.blockData=new Int16Array(n*N.v*64*(t*N.h+1)),N.blocksPerLine=i,N.blocksPerColumn=a}e.mcusPerLine=t,e.mcusPerColumn=n}var o,s,u=0,c=null,l=null,f=[],d=[],b=[],g=r();if(65496!==g)throw new e("SOI not found");for(g=r();65497!==g;){var m,w,O;switch(g){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var j=i();65504===g&&74===j[0]&&70===j[1]&&73===j[2]&&70===j[3]&&0===j[4]&&(c={version:{major:j[5],minor:j[6]},densityUnits:j[7],xDensity:j[8]<<8|j[9],yDensity:j[10]<<8|j[11],thumbWidth:j[12],thumbHeight:j[13],thumbData:j.subarray(14,14+3*j[12]*j[13])}),65518===g&&65===j[0]&&100===j[1]&&111===j[2]&&98===j[3]&&101===j[4]&&(l={version:j[5]<<8|j[6],flags0:j[7]<<8|j[8],flags1:j[9]<<8|j[10],transformCode:j[11]});break;case 65499:for(var _=r()+u-2;u<_;){var x=n[u++],k=new Uint16Array(64);if(x>>4==0)for(w=0;w<64;w++)k[t[w]]=n[u++];else{if(x>>4!=1)throw new e("DQT - invalid table spec");for(w=0;w<64;w++)k[t[w]]=r()}f[15&x]=k}break;case 65472:case 65473:case 65474:if(o)throw new e("Only single frame JPEGs supported");r(),(o={}).extended=65473===g,o.progressive=65474===g,o.precision=n[u++],o.scanLines=r(),o.samplesPerLine=r(),o.components=[],o.componentIds={};var S,M=n[u++],I=0,T=0;for(m=0;m<M;m++){S=n[u];var A=n[u+1]>>4,C=15&n[u+1];I<A&&(I=A),T<C&&(T=C),O=o.components.push({h:A,v:C,quantizationId:n[u+2],quantizationTable:null}),o.componentIds[S]=O-1,u+=3}o.maxH=I,o.maxV=T,a(o);break;case 65476:var E=r();for(m=2;m<E;){var P=n[u++],R=new Uint8Array(16),D=0;for(w=0;w<16;w++,u++)D+=R[w]=n[u];var L=new Uint8Array(D);for(w=0;w<D;w++,u++)L[w]=n[u];m+=17+D,(P>>4==0?b:d)[15&P]=h(R,L)}break;case 65501:r(),s=r();break;case 65498:r();var N,F=n[u++],z=[];for(m=0;m<F;m++){var V=o.componentIds[n[u++]],G=n[u++];(N=o.components[V]).huffmanTableDC=b[G>>4],N.huffmanTableAC=d[15&G],z.push(N)}var U=n[u++],B=n[u++],q=n[u++],H=p(n,u,o,z,s,U,B,q>>4,15&q);u+=H;break;case 65535:255!==n[u]&&u--;break;default:if(255===n[u-3]&&n[u-2]>=192&&n[u-2]<=254){u-=3;break}throw new e("unknown marker "+g.toString(16))}g=r()}for(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=c,this.eof=u,this.adobe=l,this.components=[],m=0;m<o.components.length;m++){var W=f[(N=o.components[m]).quantizationId];W&&(N.quantizationTable=W),this.components.push({output:v(0,N),scaleX:N.h/o.maxH,scaleY:N.v/o.maxV,blocksPerLine:N.blocksPerLine,blocksPerColumn:N.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p=this.width/e,d=this.height/t,v=0,y=this.components.length,b=e*t*y,g=new Uint8ClampedArray(b),m=new Uint32Array(e),w=4294967288;for(u=0;u<y;u++){for(r=(n=this.components[u]).scaleX*p,i=n.scaleY*d,v=u,f=n.output,a=n.blocksPerLine+1<<3,o=0;o<e;o++)m[o]=((c=0|o*r)&w)<<3|7&c;for(s=0;s<t;s++)for(h=a*((c=0|s*i)&w)|(7&c)<<3,o=0;o<e;o++)g[v]=f[h+m[o]],v+=y}var O=this.decodeTransform;if(O)for(u=0;u<b;)for(c=0,l=0;c<y;c++,u++,l+=2)g[u]=(g[u]*O[l]>>8)+O[l+1];return g},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(e){for(var t,n,r,i=0,a=e.length;i<a;i+=3)n=e[i+1],e[i]=(t=e[i])-179.456+1.402*(r=e[i+2]),e[i+1]=t+135.459-.344*n-.714*r,e[i+2]=t-226.816+1.772*n;return e},_convertYcckToRgb:function(e){for(var t,n,r,i,a=0,o=0,s=e.length;o<s;o+=4)e[a++]=(n=e[o+1])*(-660635669420364e-19*n+.000437130475926232*(r=e[o+2])-54080610064599e-18*(t=e[o])+.00048449797120281*(i=e[o+3])-.154362151871126)-122.67195406894+r*(-.000957964378445773*r+.000817076911346625*t-.00477271405408747*i+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),e[a++]=107.268039397724+n*(219927104525741e-19*n-.000640992018297945*r+.000659397001245577*t+.000426105652938837*i-.176491792462875)+r*(-.000778269941513683*r+.00130872261408275*t+.000770482631801132*i-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),e[a++]=n*(-.000570115196973677*n-263409051004589e-19*r+.0020741088115012*t-.00288260236853442*i+.814272968359295)-20.810012546947+r*(-153496057440975e-19*r-.000132689043961446*t+.000560833691242812*i-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return e},_convertYcckToCmyk:function(e){for(var t,n,r,i=0,a=e.length;i<a;i+=4)n=e[i+1],e[i]=434.456-(t=e[i])-1.402*(r=e[i+2]),e[i+1]=119.541-t+.344*n+.714*r,e[i+2]=481.816-t-1.772*n;return e},_convertCmykToRgb:function(e){for(var t,n,r,i,a=0,o=1/255,s=0,u=e.length;s<u;s+=4)e[a++]=255+(t=e[s]*o)*(-4.387332384609988*t+54.48615194189176*(n=e[s+1]*o)+18.82290502165302*(r=e[s+2]*o)+212.25662451639585*(i=e[s+3]*o)-285.2331026137004)+n*(1.7149763477362134*n-5.6096736904047315*r-17.873870861415444*i-5.497006427196366)+r*(-2.5217340131683033*r-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),e[a++]=255+t*(8.841041422036149*t+60.118027045597366*n+6.871425592049007*r+31.159100130055922*i-79.2970844816548)+n*(-15.310361306967817*n+17.575251261109482*r+131.35250912493976*i-190.9453302588951)+r*(4.444339102852739*r+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),e[a++]=255+t*(.8842522430003296*t+8.078677503112928*n+30.89978309703729*r-.23883238689178934*i-14.183576799673286)+n*(10.49593273432072*n+63.02378494754052*r+50.606957656360734*i-112.23884253719248)+r*(.03296041114873217*r+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return e},getData:function(t,n,r){if(this.numComponents>4)throw new e("Unsupported color mode");var i=this._getLinearizedBlockData(t,n);if(1===this.numComponents&&r){for(var a=i.length,o=new Uint8ClampedArray(3*a),s=0,u=0;u<a;u++){var c=i[u];o[s++]=c,o[s++]=c,o[s++]=c}return o}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(i);if(4===this.numComponents){if(this._isColorConversionNeeded())return r?this._convertYcckToRgb(i):this._convertYcckToCmyk(i);if(r)return this._convertCmykToRgb(i)}return i}},l}()},void 0!==(n=t())&&(e.exports=n)}))},"6S2I":function(e,t,n){"use strict";n("wSAH");var r=n("EyXx"),i=n("srIe"),a=n("s7YA"),o={info:0,warn:1,error:2,none:3},s=function(){function e(t){Wt(this,e),this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=t.level&&(this.level=t.level),null!=t.writer&&(this.writer=t.writer),this._module=t.module,e._loggers[this.module]=this;var n=this.module.lastIndexOf(".");-1!==n&&(this._parent=e.getLogger(this.module.slice(0,n)))}return Zt(e,[{key:"module",get:function(){return this._module}},{key:"parent",get:function(){return this._parent}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["error","always"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["warn","always"].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["info","always"].concat(t))}},{key:"errorOnce",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["error","once"].concat(t))}},{key:"warnOnce",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["warn","once"].concat(t))}},{key:"infoOnce",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["info","once"].concat(t))}},{key:"errorOncePerTick",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["error","oncePerTick"].concat(t))}},{key:"warnOncePerTick",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["warn","oncePerTick"].concat(t))}},{key:"infoOncePerTick",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["info","oncePerTick"].concat(t))}},{key:"test",get:function(){var e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:function(){return e._loggedMessages.warn.clear()}}}},{key:"_log",value:function(t,n){if(this._matchLevel(t)){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];if("always"!==n&&!e._throttlingDisabled){var s=this._argsToKey(a),u=this._loggedMessages[t].get(s);if("once"===n&&null!=u||"oncePerTick"===n&&u&&u>=e._tickCounter)return;this._loggedMessages[t].set(s,e._tickCounter),e._scheduleTickCounterIncrement()}var c,l=Vt(r.a.log.interceptors);try{for(l.s();!(c=l.n()).done;){var h=c.value;if(h.apply(void 0,[t,this.module].concat(a)))return}}catch(f){l.e(f)}finally{l.f()}this._inheritedWriter().apply(void 0,[t,this.module].concat(a))}}},{key:"_parentWithMember",value:function(e,t){for(var n=this;Object(i.k)(n);){var r=n[e];if(Object(i.k)(r))return r;n=n.parent}return t}},{key:"_inheritedWriter",value:function(){return this._parentWithMember("writer",this._consoleWriter)}},{key:"_consoleWriter",value:function(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];(n=console)[e].apply(n,["[".concat(t,"]")].concat(i))}},{key:"_matchLevel",value:function(e){return o[this._parentWithMember("level",r.a.log.level?r.a.log.level:"warn")]<=o[e]}},{key:"_argsToKey",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.b)(JSON.stringify(t,(function(e,t){return"object"!=typeof t||Array.isArray(t)?t:"[Object]"})))}}],[{key:"testSingleton",get:function(){return{resetLoggers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e._loggers;return e._loggers=t,n},set throttlingDisabled(t){e._throttlingDisabled=t}}}},{key:"getLogger",value:function(t){var n=e._loggers[t];return n||(n=new e({module:t})),n}},{key:"_scheduleTickCounterIncrement",value:function(){e._tickCounterScheduled||(e._tickCounterScheduled=!0,Promise.resolve().then((function(){e._tickCounter++,e._tickCounterScheduled=!1})))}}]),e}();s._loggers={},s._tickCounter=0,s._tickCounterScheduled=!1,s._throttlingDisabled=!1,t.a=s},"6aRp":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),l=n("WZb1"),h=n("l4ZG"),f=n("OvF4"),p=new s.a({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"}),d=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).categories=null,r.disableExtraQuery=!1,r.extent=null,r.num=10,r.query=null,r.sortField=null,r.start=1,r}return Zt(n,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}},{key:"clone",value:function(){return new r({categories:this.categories?Object(a.a)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}},{key:"toRequestOptions",value:function(e,t){var n,r;if(this.categories&&(n=this.categories.map((function(e){return Array.isArray(e)?JSON.stringify(e):e}))),this.extent){var i=Object(h.d)(this.extent,l.a.WGS84);i&&(r="".concat(i.xmin,",").concat(i.ymin,",").concat(i.xmax,",").concat(i.ymax))}var a=this.query;!this.disableExtraQuery&&e.extraQuery&&(a="("+a+")"+e.extraQuery);var o={categories:n,bbox:r,q:a,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map((function(e){return p.toJSON(e.trim())})).join(","),o.sortOrder=this.sortOrder),{query:Nt(Nt({},t),o)}}}]),n}(c.a);Object(i.a)([Object(o.b)()],d.prototype,"categories",void 0),Object(i.a)([Object(o.b)()],d.prototype,"disableExtraQuery",void 0),Object(i.a)([Object(o.b)({type:f.a})],d.prototype,"extent",void 0),Object(i.a)([Object(o.b)()],d.prototype,"num",void 0),Object(i.a)([Object(o.b)()],d.prototype,"query",void 0),Object(i.a)([Object(o.b)()],d.prototype,"sortField",void 0),Object(i.a)([Object(o.b)()],d.prototype,"sortOrder",null),Object(i.a)([Object(o.b)()],d.prototype,"start",void 0),d=r=Object(i.a)([Object(u.a)("esri.portal.PortalQueryParams")],d),t.a=d},"6dDx":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("6S2I"),s=n("zqDF"),u=n("TDcG"),c=n("WbKI"),l=n("Gj5k"),h=n("r88o"),f=n("04ZG"),p=n("Cduq"),d=n("zlDU"),v=n("4EHJ"),y=(n("ju1D"),n("ku/q")),b=(n("9AIY"),n("OvF4")),g=(n("4GrV"),n("LE9a")),m=n("wdpY"),w=n("pdg3"),O=n("SFah"),j=n("Lqtk"),_=n("bV/r"),x=n("H9eC"),k=n("5pQd"),S=(n("ZnuT"),n("tCO6"),n("2gBT"),n("JhoD"),n("tI3Y"),n("R4xK"),n("/1dM"),n("XNvV")),M=(n("+Xal"),n("ofM5")),I=n("gLc9"),T=n("wkZP"),A=n("orEy"),C=n("WmHL"),E=n("Ykwf"),P=n("9Ruv"),R=n("xk++"),D=n("kJYu");function L(e){return e&&"esriSMS"===e.type}function N(e,t,n){var r;return{ignoreOrigin:!0,enabled:!!n&&"map-image"===(null==(r=n.layer)?void 0:r.type)&&(n.writeSublayerStructure||this.originIdOf(t)>=Object(y.d)(n.origin))}}function F(e,t,n){var r;return{enabled:!!n&&"tile"===(null==(r=n.layer)?void 0:r.type)&&this._isOverridden(t)}}function z(e,t,n){return{ignoreOrigin:!0,enabled:n&&n.writeSublayerStructure||!1}}function V(e,t,n){return{ignoreOrigin:!0,enabled:!!n&&(n.writeSublayerStructure||this.originIdOf(t)>=Object(y.d)(n.origin))}}var G=o.a.getLogger("esri.layers.support.Sublayer"),U=0,B=new Set;B.add("layer"),B.add("parent"),B.add("loaded"),B.add("loadStatus"),B.add("loadError"),B.add("loadWarnings");var q=r=function(e){Kt(c,e);var t,i,o=Xt(c);function c(e){var t;return Wt(this,c),(t=o.call(this,e)).capabilities=void 0,t.fields=null,t.fullExtent=null,t.globalIdField=null,t.legendEnabled=!0,t.objectIdField=null,t.popupEnabled=!0,t.popupTemplate=null,t.sourceJSON=null,t.title=null,t.typeIdField=null,t.types=null,t}return Zt(c,[{key:"load",value:(i=Ut(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(Ut(regeneratorRuntime.mark((function e(){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.layer||n.url){e.next=2;break}throw new d.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:n});case 2:if(i=null,n.layer&&!(n.originIdOf("url")>2)&&"data-layer"!==(null==(r=n.source)?void 0:r.type)){e.next=9;break}return e.next=6,Object(j.default)(n.url,Nt({responseType:"json",query:{f:"json"}},t));case 6:i=e.sent.data,e.next=14;break;case 9:return o=n.id,"map-layer"===(null==(a=n.source)?void 0:a.type)&&(o=n.source.mapLayerId),e.next=13,n.layer.fetchSublayerInfo(o,t);case 13:i=e.sent;case 14:i&&(n.sourceJSON=i,n.read({layerDefinition:i},{origin:"service"}));case 15:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"readCapabilities",value:function(e,t){var n=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map((function(e){return e.trim()})):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==n.indexOf("query")}}}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new I.a(this.fields||[])}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var n,r=Vt(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(a){r.e(a)}finally{r.f()}}}},{key:"id",get:function(){var e=this._get("id");return null==e?U++:e},set:function(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,n,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},r)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var n,r=Vt(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(a){r.e(a)}finally{r.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var n=t.layerDefinition;return 1-.01*(null!=n.transparency?n.transparency:n.drawingInfo.transparency)}},{key:"writeOpacity",value:function(e,t,n,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){t.parentLayerId=this.parent&&this.parent!==this.layer?Object(s.e)(this.parent.id):-1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){if(e){var t,n=Vt(e.getSymbols());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Object(x.e)(r)){G.warn("Sublayer renderer should use 2D symbols");break}}}catch(i){n.e(i)}finally{n.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new C.a({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(s.m)(g.a.ofType(r),e)}},{key:"writeSublayers",value:function(e,t,n){this.get("sublayers.length")&&(t[n]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var n=(t=t.layerDefinition||t).typeIdField;if(n){var r=Object(m.n)(t.fields,n);if(r)return r.name}return null}},{key:"url",get:function(){var e,t,n=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,r=this.source;if(!n)return null;if(this._lastParsedUrl=n,"map-layer"===(null==r?void 0:r.type))return"".concat(n.path,"/").concat(r.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(n.path,"/dynamicLayer?").concat(Object(v.D)(i))},set:function(e){e?this._override("url",e):this._clearOverride("url")}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,n,r){t[n]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=Object(u.a)(this).store,t=new r;return Object(u.a)(t).store=e.clone(B),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return Object(P.a)(this,e)}},{key:"createQuery",value:function(){return new R.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:(t=Ut(regeneratorRuntime.mark((function e(){var t,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return i=null==(t=this.layer)?void 0:t.parsedUrl,e.next=6,Promise.resolve().then(n.bind(null,"W9Wu"));case 6:return e.t0=e.sent.default,e.t1={url:i.path},o=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?o.layerId=this.source.mapLayerId:o.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(o.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(o.definitionExpression=this.definitionExpression),this.originIdOf("labelingInfo")>2&&(o.labelingInfo=Object(a.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(o.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(o.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(o.visible=this.visible),this.originIdOf("minScale")>0&&(o.minScale=this.minScale),this.originIdOf("maxScale")>0&&(o.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(o.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(o.popupTemplate=Object(a.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(o.renderer=Object(a.a)(this.renderer)),"data-layer"===(null==(r=this.source)?void 0:r.type)&&(o.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(o.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(o.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(o.customParameters=this.layer.customParameters),o));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatureType",value:function(e){var t=this.typeIdField,n=this.types;if(!t||!e)return null;var r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;var i=null;return n.some((function(e){var t=e.id;return null!=t&&(t.toString()===r.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var n=this.getFeatureType(t&&t.feature);if(n){var r=n.domains&&n.domains[e];if(r&&"inherited"!==r.type)return r}return this._getLayerDomain(e)}},{key:"queryFeatures",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.createQuery(),r=arguments.length>1?arguments[1]:void 0;return this.load().then((function(){if(!e.get("capabilities.operations.supportsQuery"))throw new d.a("Sublayer.queryFeatures","this layer doesn't support queries.");return Promise.all([Promise.resolve().then(n.bind(null,"6fyR")),Promise.resolve().then(n.bind(null,"8prj"))])})).then((function(n){var i=zt(n,2),a=i[0].executeQuery,o=i[1].default;return a(e.url,R.a.from(t),e.layer?e.layer.spatialReference:null,Nt(Nt({},r),{},{query:Nt({},e.layer.customParameters)})).then((function(e){return o.fromJSON(e.data)}))})).then((function(t){return t&&t.features&&t.features.forEach((function(t){t.sourceLayer=e})),t}))}},{key:"toExportImageJSON",value:function(){var e,t=this,n={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(n.definitionExpression=this.definitionExpression);var r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,n){return e[n]=t.originIdOf(n),e}),{});if(Object.keys(r).some((function(e){return r[e]>2}))){var i=n.drawingInfo={};r.renderer>2&&(i.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>2&&(i.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>2&&(i.labelingInfo=this.labelingInfo?this.labelingInfo.map((function(e){return e.write({},{origin:"service",layer:t.layer})})):null,i.showLabels=!0),r.opacity>2&&(i.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(i.renderer)}return n}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.color=e.outline&&e.outline.color?e.outline.color:[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var n,r=Vt("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;L(i.symbol)&&t(i.symbol)}}catch(a){r.e(a)}finally{r.f()}"symbol"in e&&L(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&L(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var n,r,i=this.layer,a=this._get(e);switch(e){case"definitionExpression":n="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",r="supportsModification"}var o=Object(u.a)(this).getDefaultOrigin();if("service"!==o){if(n&&!1===this.get("layer.capabilities.exportMap."+n))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(n,"'"));if(r&&!1===this.get("capabilities.exportMap."+r))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(r,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==o&&a!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var n=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=n,e.layer=n.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=n,t.layer=n.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t=n.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(G.error(new d.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:n,layer:n.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){G.error(new d.a("sublayer:locked","Property '".concat(e,"' can't be changed on Sublayer from the layer '").concat(this.layer.id,"'"),{reason:t,sublayer:this,layer:this.layer}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),c}(Object(D.b)(Object(k.a)(Object(w.a)(_.a))));q.test={isMapImageLayerOverridePolicy:function(e){return e===z||e===N},isTileImageLayerOverridePolicy:function(e){return e===F}},Object(i.a)([Object(c.b)({readOnly:!0})],q.prototype,"capabilities",void 0),Object(i.a)([Object(h.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],q.prototype,"readCapabilities",null),Object(i.a)([Object(c.b)({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:N}}})],q.prototype,"definitionExpression",null),Object(i.a)([Object(c.b)({type:[M.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],q.prototype,"fields",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],q.prototype,"fieldsIndex",null),Object(i.a)([Object(c.b)({type:b.a,json:{read:{source:"layerDefinition.extent"}}})],q.prototype,"fullExtent",void 0),Object(i.a)([Object(c.b)({type:String})],q.prototype,"globalIdField",void 0),Object(i.a)([Object(h.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],q.prototype,"readGlobalIdFieldFromService",null),Object(i.a)([Object(c.b)({type:s.a,json:{write:{ignoreOrigin:!0}}})],q.prototype,"id",null),Object(i.a)([Object(c.b)({value:null,type:[T.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:z}}})],q.prototype,"labelingInfo",null),Object(i.a)([Object(p.a)("labelingInfo")],q.prototype,"writeLabelingInfo",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:z}}})],q.prototype,"labelsVisible",null),Object(i.a)([Object(c.b)({value:null})],q.prototype,"layer",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:V}}})],q.prototype,"legendEnabled",void 0),Object(i.a)([Object(c.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],q.prototype,"listMode",null),Object(i.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:z}}})],q.prototype,"minScale",null),Object(i.a)([Object(h.a)("minScale",["minScale","layerDefinition.minScale"])],q.prototype,"readMinScale",null),Object(i.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:z}}})],q.prototype,"maxScale",null),Object(i.a)([Object(h.a)("maxScale",["maxScale","layerDefinition.maxScale"])],q.prototype,"readMaxScale",null),Object(i.a)([Object(c.b)({type:String})],q.prototype,"objectIdField",void 0),Object(i.a)([Object(h.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],q.prototype,"readObjectIdFieldFromService",null),Object(i.a)([Object(c.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:z}}})],q.prototype,"opacity",null),Object(i.a)([Object(h.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],q.prototype,"readOpacity",null),Object(i.a)([Object(p.a)("opacity")],q.prototype,"writeOpacity",null),Object(i.a)([Object(c.b)({json:{type:s.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:z}}})],q.prototype,"parent",void 0),Object(i.a)([Object(p.a)("parent")],q.prototype,"writeParent",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:V,writer:function(e,t,n){t[n]=!e}}}})],q.prototype,"popupEnabled",void 0),Object(i.a)([Object(c.b)({type:O.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:V}}})],q.prototype,"popupTemplate",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],q.prototype,"defaultPopupTemplate",null),Object(i.a)([Object(c.b)({types:S.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:z},origins:{"web-scene":{types:S.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:z}}}}})],q.prototype,"renderer",null),Object(i.a)([Object(c.b)({types:{key:"type",base:null,typeMap:{"data-layer":E.a,"map-layer":C.a}},cast:function(e){if(e){if("mapLayerId"in e)return Object(s.d)(C.a,e);if("dataSource"in e)return Object(s.d)(E.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:z}}})],q.prototype,"source",null),Object(i.a)([Object(c.b)()],q.prototype,"sourceJSON",void 0),Object(i.a)([Object(c.b)({value:null,json:{type:[s.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:z}}})],q.prototype,"sublayers",null),Object(i.a)([Object(l.a)("sublayers")],q.prototype,"castSublayers",null),Object(i.a)([Object(p.a)("sublayers")],q.prototype,"writeSublayers",null),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:V}}})],q.prototype,"title",void 0),Object(i.a)([Object(c.b)({type:String})],q.prototype,"typeIdField",void 0),Object(i.a)([Object(h.a)("typeIdField",["layerDefinition.typeIdField"])],q.prototype,"readTypeIdField",null),Object(i.a)([Object(c.b)({type:[A.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],q.prototype,"types",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:F}}})],q.prototype,"url",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:z}}})],q.prototype,"visible",null),Object(i.a)([Object(p.a)("visible")],q.prototype,"writeVisible",null),q=r=Object(i.a)([Object(f.a)("esri.layers.support.Sublayer")],q),t.a=q},"6fyR":function(e,t,n){"use strict";n.r(t),n.d(t,"executeQuery",(function(){return p})),n.d(t,"executeQueryForCount",(function(){return m})),n.d(t,"executeQueryForExtent",(function(){return w})),n.d(t,"executeQueryForIds",(function(){return g})),n.d(t,"executeQueryPBF",(function(){return v})),n.d(t,"executeQueryPBFBuffer",(function(){return b})),n.d(t,"queryToQueryStringParameters",(function(){return f})),n.d(t,"runQuery",(function(){return O}));var r=n("srIe"),i=n("4EHJ"),a=n("qatw"),o=n("Lqtk"),s=n("qNUd"),u=n("6HyS"),c=n("vuI0"),l=n("By9p"),h="Layer does not support extent calculation.";function f(e,t){var n=e.geometry,i=e.toJSON(),o=i;if(Object(r.k)(n)&&(o.geometry=JSON.stringify(n),o.geometryType=Object(a.c)(n),o.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),i.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(o.objectIds=i.objectIds.join(",")),i.orderByFields&&(o.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete o.outFields:o.outFields=-1!==i.outFields.indexOf("*")?"*":i.outFields.join(","),i.outSR?o.outSR=i.outSR.wkid||JSON.stringify(i.outSR):n&&(i.returnGeometry||i.returnCentroid)&&(o.outSR=o.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(o.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(o.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(o.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(o.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(o.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(o.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){var s=i.timeExtent,u=s.start,c=s.end;null==u&&null==c||(o.time=u===c?u:"".concat(null==u?"null":u,",").concat(null==c?"null":c)),delete i.timeExtent}return o}function p(e,t,n,r){return d.apply(this,arguments)}function d(){return(d=Ut(regeneratorRuntime.mark((function e(t,n,i,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(r.k)(n.timeExtent)||!n.timeExtent.isEmpty){e.next=4;break}e.t0={data:{features:[]}},e.next=7;break;case 4:return e.next=6,O(t,n,"json",a);case 6:e.t0=e.sent;case 7:return o=e.t0,e.abrupt("return",(Object(u.a)(n,i,o.data),o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n,r){return y.apply(this,arguments)}function y(){return(y=Ut(regeneratorRuntime.mark((function e(t,n,i,a){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(r.k)(n.timeExtent)||!n.timeExtent.isEmpty){e.next=2;break}return e.abrupt("return",Promise.resolve({data:i.createFeatureResult()}));case 2:return e.next=4,b(t,n,a);case 4:return o=e.sent,s=o,e.abrupt("return",(s.data=Object(l.a)(o.data,i),s));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n){return O(e,t,"pbf",n)}function g(e,t,n){return Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):O(e,t,"json",n,{returnIdsOnly:!0})}function m(e,t,n){return Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):O(e,t,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function w(e,t,n){return Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):O(e,t,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(h);if(t.hasOwnProperty("count"))throw new Error(h);return e}))}function O(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l="string"==typeof e?Object(i.J)(e):e,h=t.geometry?[t.geometry]:[];return a.responseType="pbf"===n?"array-buffer":"json",Object(s.a)(h,null,a).then((function(e){var s=e&&e[0];Object(r.k)(s)&&((t=t.clone()).geometry=s);var h=Object(c.a)(Nt(Nt(Nt({},l.query),{},{f:n},u),f(t,u)));return Object(o.default)(Object(i.y)(l.path,"query"),Nt(Nt({},a),{},{query:Nt(Nt({},h),a.query)}))}))}},"6lH3":function(e,t,n){"use strict";n.r(t),n.d(t,"buffer",(function(){return M})),n.d(t,"clip",(function(){return s})),n.d(t,"contains",(function(){return c})),n.d(t,"convexHull",(function(){return O})),n.d(t,"crosses",(function(){return l})),n.d(t,"cut",(function(){return u})),n.d(t,"densify",(function(){return N})),n.d(t,"difference",(function(){return j})),n.d(t,"disjoint",(function(){return y})),n.d(t,"distance",(function(){return h})),n.d(t,"equals",(function(){return f})),n.d(t,"extendedSpatialReferenceInfo",(function(){return o})),n.d(t,"flipHorizontal",(function(){return R})),n.d(t,"flipVertical",(function(){return D})),n.d(t,"generalize",(function(){return L})),n.d(t,"geodesicArea",(function(){return G})),n.d(t,"geodesicBuffer",(function(){return I})),n.d(t,"geodesicDensify",(function(){return F})),n.d(t,"geodesicLength",(function(){return U})),n.d(t,"intersect",(function(){return x})),n.d(t,"intersects",(function(){return p})),n.d(t,"isSimple",(function(){return m})),n.d(t,"nearestCoordinate",(function(){return T})),n.d(t,"nearestVertex",(function(){return A})),n.d(t,"nearestVertices",(function(){return C})),n.d(t,"offset",(function(){return S})),n.d(t,"overlaps",(function(){return b})),n.d(t,"planarArea",(function(){return z})),n.d(t,"planarLength",(function(){return V})),n.d(t,"relate",(function(){return g})),n.d(t,"rotate",(function(){return P})),n.d(t,"simplify",(function(){return w})),n.d(t,"symmetricDifference",(function(){return _})),n.d(t,"touches",(function(){return d})),n.d(t,"union",(function(){return k})),n.d(t,"within",(function(){return v}));var r=n("9gar"),i=n("dZC4");function a(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function o(e){return r.a.extendedSpatialReferenceInfo(e)}function s(e,t){return r.a.clip(i.hydratedAdapter,a(e),e,t)}function u(e,t){return r.a.cut(i.hydratedAdapter,a(e),e,t)}function c(e,t){return r.a.contains(i.hydratedAdapter,a(e),e,t)}function l(e,t){return r.a.crosses(i.hydratedAdapter,a(e),e,t)}function h(e,t,n){return r.a.distance(i.hydratedAdapter,a(e),e,t,n)}function f(e,t){return r.a.equals(i.hydratedAdapter,a(e),e,t)}function p(e,t){return r.a.intersects(i.hydratedAdapter,a(e),e,t)}function d(e,t){return r.a.touches(i.hydratedAdapter,a(e),e,t)}function v(e,t){return r.a.within(i.hydratedAdapter,a(e),e,t)}function y(e,t){return r.a.disjoint(i.hydratedAdapter,a(e),e,t)}function b(e,t){return r.a.overlaps(i.hydratedAdapter,a(e),e,t)}function g(e,t,n){return r.a.relate(i.hydratedAdapter,a(e),e,t,n)}function m(e){return r.a.isSimple(i.hydratedAdapter,a(e),e)}function w(e){return r.a.simplify(i.hydratedAdapter,a(e),e)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.a.convexHull(i.hydratedAdapter,a(e),e,t)}function j(e,t){return r.a.difference(i.hydratedAdapter,a(e),e,t)}function _(e,t){return r.a.symmetricDifference(i.hydratedAdapter,a(e),e,t)}function x(e,t){return r.a.intersect(i.hydratedAdapter,a(e),e,t)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.a.union(i.hydratedAdapter,a(e),e,t)}function S(e,t,n,o,s,u){return r.a.offset(i.hydratedAdapter,a(e),e,t,n,o,s,u)}function M(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.a.buffer(i.hydratedAdapter,a(e),e,t,n,o)}function I(e,t,n,o,s,u){return r.a.geodesicBuffer(i.hydratedAdapter,a(e),e,t,n,o,s,u)}function T(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.a.nearestCoordinate(i.hydratedAdapter,a(e),e,t,n)}function A(e,t){return r.a.nearestVertex(i.hydratedAdapter,a(e),e,t)}function C(e,t,n,o){return r.a.nearestVertices(i.hydratedAdapter,a(e),e,t,n,o)}function E(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function P(e,t,n){var i;if(null==e)throw new Error("Illegal Argument Exception");var a=e.spatialReference;if(null==(n=null!=(i=n)?i:E(e)))throw new Error("Illegal Argument Exception");var o=e.constructor.fromJSON(r.a.rotate(e,t,n));return o.spatialReference=a,o}function R(e,t){var n;if(null==e)throw new Error("Illegal Argument Exception");var i=e.spatialReference;if(null==(t=null!=(n=t)?n:E(e)))throw new Error("Illegal Argument Exception");var a=e.constructor.fromJSON(r.a.flipHorizontal(e,t));return a.spatialReference=i,a}function D(e,t){var n;if(null==e)throw new Error("Illegal Argument Exception");var i=e.spatialReference;if(null==(t=null!=(n=t)?n:E(e)))throw new Error("Illegal Argument Exception");var a=e.constructor.fromJSON(r.a.flipVertical(e,t));return a.spatialReference=i,a}function L(e,t,n,o){return r.a.generalize(i.hydratedAdapter,a(e),e,t,n,o)}function N(e,t,n){return r.a.densify(i.hydratedAdapter,a(e),e,t,n)}function F(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.a.geodesicDensify(i.hydratedAdapter,a(e),e,t,n,o)}function z(e,t){return r.a.planarArea(i.hydratedAdapter,a(e),e,t)}function V(e,t){return r.a.planarLength(i.hydratedAdapter,a(e),e,t)}function G(e,t,n){return r.a.geodesicArea(i.hydratedAdapter,a(e),e,t,n)}function U(e,t,n){return r.a.geodesicLength(i.hydratedAdapter,a(e),e,t,n)}},"6zdV":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s}));var r={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function i(e){var t;return null!=(t=r[e.toLowerCase()])?t:null}function a(e){var t=i(e);return t?Bt(t):t}function o(e,t,n){n<0&&++n,n>1&&--n;var r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=(e%360+360)%360/360,a=n<=.5?n*(t+1):n+t-n*t,s=2*n-a;return[Math.round(256*o(s,a,i+1/3)),Math.round(256*o(s,a,i)),Math.round(256*o(s,a,i-1/3)),r]}function u(e){var t=e.length>5,n=t?8:4,r=(1<<n)-1,i=t?1:17,a=t?9===e.length:5===e.length,o=Number("0x"+e.substr(1));if(isNaN(o))return null;var s,u=[0,0,0,1];return a&&(s=o&r,o>>=n,u[3]=i*s/255),s=o&r,o>>=n,u[2]=i*s,s=o&r,o>>=n,u[1]=i*s,s=o&r,o>>=n,u[0]=i*s,u}},"7/DV":function(e,t,n){"use strict";t.STORE={magic:"\0\0",compress:function(e,t){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},t.DEFLATE=n("+BzL")},"72l/":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t,n,r,i){Wt(this,e),this.label=t,this.sortField=n,this.sortedAsc=r,this.isSortActive=i}},"7HKM":function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n("fXoL"),i=n("LE9a"),a=n("pO5D"),o=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),s=n("Stxv"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nYOO")),l=(n("cCpn"),n("dV4Z")),h=n("Jv1m"),f=n("Ehpe"),p=n("bJda"),d=n("/CmD"),v=n("r0DZ"),y=n("pqNC"),b=n("N5XI"),g=n("L1EH"),m=i.a.ofType(y.a),w={left:0,right:0,top:0,bottom:0},O=function(e){Kt(i,e);var t,n,r=Xt(i);function i(e){var t;return Wt(this,i),(t=r.call(this,e))._handles=new v.a,t._leadingClips=new Map,t._trailingClips=new Map,t.direction="horizontal",t.leadingLayers=new m,t.max=100,t.min=0,t.precision=4,t.step=.5,t.stepMultiplier=10,t.trailingLayers=new m,t.view=null,t}return Zt(i,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(b.init)(this,["view","view.ready","position","direction"],(function(){return e._clipLayers()})),Object(b.on)(this,"leadingLayers","change",(function(){return e._clipLeadingLayers()})),Object(b.on)(this,"trailingLayers","change",(function(){return e._clipTrailingLayers()}))])}},{key:"destroy",value:function(){this._removeExistingClips(),this._handles.destroy(),this._handles=null}},{key:"position",get:function(){return 25},set:function(e){var t=this.precision,n=this.min,r=this.max;this._set("position",function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(Math.max(Math.min(e,r),n),t))}},{key:"state",get:function(){var e=this.view;return e&&e.ready?"ready":"disabled"}},{key:"_clipLayers",value:function(){this._clipLeadingLayers(),this._clipTrailingLayers()}},{key:"_clipLeadingLayers",value:function(){var e=this;this._removeClips("leading"),this.leadingLayers.forEach((function(t){return e._clipLayer({layer:t,type:"leading"})}))}},{key:"_clipTrailingLayers",value:function(){var e=this;this._removeClips("trailing"),this.trailingLayers.forEach((function(t){return e._clipLayer({layer:t,type:"trailing"})}))}},{key:"_getLayerView",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,t&&n){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Object(p.b)(n)().whenLayerView(t);case 5:return r=e.sent,e.abrupt("return","clips"in r?r:null);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_getVerticalClipRect",value:function(e){var t=this.position;return"leading"===e?new g.a(Nt(Nt({},w),{},{bottom:100-t+"%"})):"trailing"===e?new g.a(Nt(Nt({},w),{},{top:t+"%"})):null}},{key:"_getHorizontalClipRect",value:function(e){var t=this.position;return"leading"===e?new g.a(Nt(Nt({},w),{},{right:100-t+"%"})):"trailing"===e?new g.a(Nt(Nt({},w),{},{left:t+"%"})):null}},{key:"_getClipRect",value:function(e){var t=this.direction;return"vertical"===t?this._getVerticalClipRect(e):"horizontal"===t?this._getHorizontalClipRect(e):null}},{key:"_clipLayer",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._leadingClips,r=this._trailingClips,i=t.layer,a=t.type,o="trailing"===a?r:"leading"===a?n:null,e.next=7,this._getLayerView(i);case 7:if((s=e.sent)&&"clips"in s&&o&&s.hasOwnProperty("clips")){e.next=10;break}return e.abrupt("return");case 10:(u=o.get(s))&&s.clips.remove(u),(c=this._getClipRect(a))&&(o.set(s,c),s.clips.add(c));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_removeClips",value:function(e){var t=this._leadingClips,n=this._trailingClips,r="trailing"===e?n:"leading"===e?t:null;r&&(r.forEach((function(e,t){t&&t.hasOwnProperty("clips")&&t.clips.remove(e)})),r.clear())}},{key:"_removeExistingClips",value:function(){this._removeClips("leading"),this._removeClips("trailing")}}]),i}(d.a);Object(a.a)([Object(o.b)()],O.prototype,"direction",void 0),Object(a.a)([Object(o.b)({type:m})],O.prototype,"leadingLayers",void 0),Object(a.a)([Object(o.b)({readOnly:!0})],O.prototype,"max",void 0),Object(a.a)([Object(o.b)({readOnly:!0})],O.prototype,"min",void 0),Object(a.a)([Object(o.b)()],O.prototype,"position",null),Object(a.a)([Object(o.b)()],O.prototype,"precision",void 0),Object(a.a)([Object(o.b)({readOnly:!0})],O.prototype,"state",null),Object(a.a)([Object(o.b)()],O.prototype,"step",void 0),Object(a.a)([Object(o.b)()],O.prototype,"stepMultiplier",void 0),Object(a.a)([Object(o.b)({type:m})],O.prototype,"trailingLayers",void 0),Object(a.a)([Object(o.b)()],O.prototype,"view",void 0);var j=O=Object(a.a)([Object(u.a)("esri.widgets.Swipe.SwipeViewModel")],O),_={handle:!0,divider:!0},x=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).direction=null,i.disabled=!1,i.dragLabel=void 0,i.iconClass="esri-icon-up-down-arrows",i.label=void 0,i.leadingLayers=null,i.messages=null,i.position=null,i.trailingLayers=null,i.view=null,i.viewModel=new j,i._pointerOffset=null,i._container=null,i._onContainerPointerDown=i._onContainerPointerDown.bind($t(i)),i._onContainerPointerMove=i._onContainerPointerMove.bind($t(i)),i._onContainerPointerUp=i._onContainerPointerUp.bind($t(i)),i}return Zt(n,[{key:"visibleElements",get:function(){return this._get("visibleElements")||_},set:function(e){this._set("visibleElements",Nt(Nt({},_),e))}},{key:"render",value:function(){var e=this.viewModel,t=e.state,n=e.direction,r="disabled"===t||this.disabled,i={"esri-disabled":r,"esri-swipe--disabled":r,"esri-swipe--vertical":"vertical"===n,"esri-swipe--horizontal":"horizontal"===n};return Object(h.a)("div",{class:this.classes("esri-swipe","esri-widget",i)},"disabled"===t?null:this.renderContainer())}},{key:"renderHandle",value:function(){var e=this.viewModel.direction,t=this.visibleElements,n={"esri-icon-drag-horizontal":"vertical"===e,"esri-icon-drag-vertical":"horizontal"===e},r=this.classes("esri-swipe__handle",!t.handle&&"esri-swipe__handle--hidden");return Object(h.a)("div",{key:"handle",role:"presentation",class:r},Object(h.a)("span",{"aria-hidden":"true",class:this.classes("esri-swipe__handle-icon",n)}))}},{key:"renderDivider",value:function(){var e=this.visibleElements;return e&&e.divider?Object(h.a)("div",{key:"divider",role:"presentation",class:"esri-swipe__divider"}):null}},{key:"renderContent",value:function(){return[this.renderDivider(),this.renderHandle()]}},{key:"renderContainer",value:function(){var e=this.disabled,t=this.dragLabel,n=this.viewModel,r=n.max,i=n.min,a=n.direction,o=n.position,s=o+"%",u={top:"vertical"===a?s:null,left:"vertical"===a?null:s},c=this.renderContent();return Object(h.a)("div",e?{key:"container",role:"presentation",styles:u,class:"esri-swipe__container"}:{tabIndex:0,key:"container",bind:this,afterCreate:this._afterContainerCreate,onkeydown:this._onContainerKeyDown,"touch-action":"none",role:"slider",title:t,"aria-label":t,"aria-orientation":a,"aria-valuemax":""+r,"aria-valuemin":""+i,"aria-valuenow":""+o,"aria-valuetext":s,styles:u,class:"esri-swipe__container"},c)}},{key:"_afterContainerCreate",value:function(e){this._container=e,e.addEventListener("pointerdown",this._onContainerPointerDown)}},{key:"_calculatePointerOffset",value:function(e){var t=this.direction,n=e.target,r=("vertical"===t?n.clientHeight:n.clientWidth)/2,i=n.getBoundingClientRect();this._pointerOffset="vertical"===t?e.clientY-i.top-r:e.clientX-i.left-r}},{key:"_onContainerPointerDown",value:function(e){e.preventDefault(),this._container&&document.activeElement!==this.container&&this._container.focus(),this._calculatePointerOffset(e),document.addEventListener("pointerup",this._onContainerPointerUp),document.addEventListener("pointermove",this._onContainerPointerMove)}},{key:"_onContainerPointerUp",value:function(e){e.preventDefault(),document.removeEventListener("pointerup",this._onContainerPointerUp),document.removeEventListener("pointermove",this._onContainerPointerMove)}},{key:"_onContainerPointerMove",value:function(e){e.preventDefault();var t=this._pointerOffset,n=this.container,r=this.direction,i=e.clientX,a=e.clientY,o=n.getBoundingClientRect(),s=o.top,u=o.left,c=o.width,l=o.height;this.position=("vertical"===r?a-s-t:i-u-t)/("vertical"===r?l:c)*100}},{key:"_getKeyPosition",value:function(e){var t=Object(c.a)(e),n=this.position,r=this.viewModel,i=r.max,a=r.min,o=r.step,s=r.stepMultiplier,u=r.direction,l=o*s;return["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(t)>-1&&(e.preventDefault(),e.stopPropagation()),("vertical"===u?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t)?n+(e.shiftKey?l:o):("vertical"===u?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t)?n-(e.shiftKey?l:o):"Home"===t?a:"End"===t?i:("vertical"===u?"PageDown"===t:"PageUp"===t)?n+l:("vertical"===u?"PageUp"===t:"PageDown"===t)?n-l:null}},{key:"_onContainerKeyDown",value:function(e){var t=this._getKeyPosition(e);"number"==typeof t&&(this.position=t)}}]),n}(f.a);Object(a.a)([Object(s.a)("viewModel.direction")],x.prototype,"direction",void 0),Object(a.a)([Object(o.b)()],x.prototype,"disabled",void 0),Object(a.a)([Object(o.b)({aliasOf:{source:"messages.dragLabel",overridable:!0}})],x.prototype,"dragLabel",void 0),Object(a.a)([Object(o.b)()],x.prototype,"iconClass",void 0),Object(a.a)([Object(o.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],x.prototype,"label",void 0),Object(a.a)([Object(s.a)("viewModel.leadingLayers")],x.prototype,"leadingLayers",void 0),Object(a.a)([Object(o.b)(),Object(l.a)("esri/widgets/Swipe/t9n/Swipe")],x.prototype,"messages",void 0),Object(a.a)([Object(s.a)("viewModel.position")],x.prototype,"position",void 0),Object(a.a)([Object(s.a)("viewModel.trailingLayers")],x.prototype,"trailingLayers",void 0),Object(a.a)([Object(s.a)("viewModel.view")],x.prototype,"view",void 0),Object(a.a)([Object(o.b)({type:j})],x.prototype,"viewModel",void 0),Object(a.a)([Object(o.b)()],x.prototype,"visibleElements",null);var k=x=Object(a.a)([Object(u.a)("esri.widgets.Swipe")],x),S=n("TYL1"),M=n("NVId"),I=n("mKlZ"),T=n("ofXK"),A=n("8WOb"),C=n("3Pt+");function E(e,t){if(1&e&&(r.kc(0,"option",13),r.Tc(1),r.jc()),2&e){var n=t.$implicit,i=r.vc();r.Bc("value",n)("disabled",n===i.secondLayer),r.Tb(1),r.Vc(" ",n," ")}}function P(e,t){if(1&e&&(r.kc(0,"option",13),r.Tc(1),r.jc()),2&e){var n=t.$implicit,i=r.vc();r.Bc("value",n)("disabled",n===i.firstLayer),r.Tb(1),r.Vc(" ",n," ")}}var R,D=function(e){return{selectedBtn:e}},L=function(e){return{swipeSelected:e}},N=((R=function(){function e(t,n){var r=this;Wt(this,e),this.loadingService=t,this.widgetToggleService=n,this.texasBasemaps=S.b,this.texasBasemapsDict=S.c,this.googleWMSlayer=S.a,this.state={open:!1},this.firstLayer=this.texasBasemaps[0],this.secondLayer=this.texasBasemaps[this.texasBasemaps.length-1],this.swipeMode="horizontal",this.subscriptions$=this.widgetToggleService.widgetViewChanged.subscribe((function(e){"swipe"!==e.name&&r.state.open&&r.toggle()}))}return Zt(e,[{key:"setSwipeMode",value:function(e){this.swipeMode=e,this.swipeWidget.direction=e}},{key:"ngAfterViewInit",value:function(){window.mapView=this.mapView}},{key:"changeSwipeLayers",value:function(e){var t="leading"===e?this.texasBasemapsDict[this.firstLayer]:this.texasBasemapsDict[this.secondLayer],n="leading"===e?this.swipeWidget.leadingLayers.getItemAt(0):this.swipeWidget.trailingLayers.getItemAt(0);n.id!==t.id&&(this.mapView.map.remove(n),this.addLayersIfNotExists(t,e))}},{key:"getNewSwipeLayerCollection",value:function(e){var t=this;this.mapView.map.layers.includes(e)||(this.mapView.map.layers.add(e,this.mapView.map.layers.length-3),this.loadingService.isLoading.next(!0),this.mapView.whenLayerView(e).then((function(){return t.loadingService.isLoading.next(!1)})));var n=new i.a;return n.add(e),n}},{key:"moveSwipeCursor",value:function(){this.swipeWidget.position=Math.min(this.swipeWidget.position+-1*(Math.random()>.5?1:-1),60)}},{key:"addLayersIfNotExists",value:function(e,t){"leading"===t?this.swipeWidget.leadingLayers=this.getNewSwipeLayerCollection(e):this.swipeWidget.trailingLayers=this.getNewSwipeLayerCollection(e),this.moveSwipeCursor()}},{key:"toggle",value:function(){var e=this;if(this.state.open=!this.state.open,this.state.open){this.swipeWidget&&this.swipeWidget.destroy();var t=this.texasBasemapsDict[this.firstLayer],n=this.texasBasemapsDict[this.secondLayer];this.mapView.map.addMany([t,n],this.mapView.map.layers.length-3),this.loadingService.isLoading.next(!0),Promise.all([this.mapView.whenLayerView(t),this.mapView.whenLayerView(t)]).then((function(){return e.loadingService.isLoading.next(!1)})),this.swipeWidget=new k({leadingLayers:[t],trailingLayers:[n],position:35,view:this.mapView}),this.mapView.ui.add(this.swipeWidget)}else this.swipeWidget&&this.swipeWidget.destroy(),this.mapView.map.removeMany([this.texasBasemapsDict[this.firstLayer],this.texasBasemapsDict[this.secondLayer]]);this.widgetToggleService.changeWidgetView("swipe",this.state.open)}},{key:"ngOnDestroy",value:function(){this.subscriptions$.unsubscribe()}},{key:"close",value:function(){this.state.open=!1,this.swipeWidget&&this.swipeWidget.destroy()}}]),e}()).\u0275fac=function(e){return new(e||R)(r.fc(M.a),r.fc(I.a))},R.\u0275cmp=r.Zb({type:R,selectors:[["app-swipe-widget"]],inputs:{mapView:"mapView"},decls:26,vars:19,consts:[["title","Swipe layers",1,"swipeToggleBtn",3,"ngClass","click"],["src","assets/icons/swipe.png","aria-label","swipe layers"],[1,"swipeWidgetBody","basemap-open",3,"hidden"],[1,"widgetTitle"],[1,"widgetTitleText"],[3,"header","itemName","fillColor"],[1,"widgetCloseBtn","ui-icon","dt-icon-close",3,"click"],[1,"swipeBodyContainer"],["aria-label","first layer",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["aria-label","second layer",3,"ngModel","ngModelChange"],[1,"swipeMode"],[1,"swipeDirection",3,"ngClass","click"],[3,"value","disabled"]],template:function(e,t){1&e&&(r.kc(0,"button",0),r.rc("click",(function(){return t.toggle()})),r.gc(1,"img",1),r.jc(),r.kc(2,"div",2),r.kc(3,"div",3),r.kc(4,"span",4),r.Tc(5,"Swipe Layers"),r.jc(),r.gc(6,"app-help-button",5),r.kc(7,"i",6),r.rc("click",(function(){return t.toggle()})),r.jc(),r.jc(),r.kc(8,"div",7),r.Tc(9),r.gc(10,"br"),r.kc(11,"select",8),r.rc("ngModelChange",(function(e){return t.firstLayer=e}))("ngModelChange",(function(){return t.changeSwipeLayers("leading")})),r.Sc(12,E,2,3,"option",9),r.jc(),r.gc(13,"br"),r.Tc(14),r.gc(15,"br"),r.kc(16,"select",10),r.rc("ngModelChange",(function(e){return t.secondLayer=e}))("ngModelChange",(function(){return t.changeSwipeLayers("trailing")})),r.Sc(17,P,2,3,"option",9),r.jc(),r.gc(18,"br"),r.Tc(19," Swipe Direction:"),r.gc(20,"br"),r.kc(21,"div",11),r.kc(22,"button",12),r.rc("click",(function(){return t.setSwipeMode("horizontal")})),r.Tc(23,"Left-Right"),r.jc(),r.kc(24,"button",12),r.rc("click",(function(){return t.setSwipeMode("vertical")})),r.Tc(25,"Top-Bottom"),r.jc(),r.jc(),r.jc(),r.jc()),2&e&&(r.Bc("ngClass",r.Ec(13,D,t.state.open)),r.Tb(2),r.Bc("hidden",!t.state.open),r.Tb(4),r.Bc("header","Swipe Layers")("itemName","swipe")("fillColor","white"),r.Tb(3),r.Vc(" ","horizontal"===t.swipeMode?"Left Layer":"Top Layer"," "),r.Tb(2),r.Bc("ngModel",t.firstLayer),r.Tb(1),r.Bc("ngForOf",t.texasBasemaps),r.Tb(2),r.Vc(" ","horizontal"===t.swipeMode?"Right Layer":"Bottom Layer",""),r.Tb(2),r.Bc("ngModel",t.secondLayer),r.Tb(1),r.Bc("ngForOf",t.texasBasemaps),r.Tb(5),r.Bc("ngClass",r.Ec(15,L,"horizontal"===t.swipeMode)),r.Tb(2),r.Bc("ngClass",r.Ec(17,L,"vertical"===t.swipeMode)))},directives:[T.k,A.a,C.s,C.j,C.m,T.l,C.n,C.u],styles:[".basemapContainer[_ngcontent-%COMP%]{position:absolute;right:1em;top:1em;background:grey}.basemapContainer.basemap-open[_ngcontent-%COMP%]{background:grey;width:24em;height:24em;overflow:auto}.swipeToggleBtn[_ngcontent-%COMP%]{position:absolute;top:calc(4.5em + var(--map-button-height));right:1em;height:var(--map-button-height);width:var(--map-button-width)}.swipeToggleBtn.selectedBtn[_ngcontent-%COMP%]{box-sizing:border-box;border:2px solid #0ff}.swipeWidgetBody[_ngcontent-%COMP%]{position:absolute;top:calc(4.5em + var(--map-button-height) + 3em);right:1em;height:19em;width:15em;background:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:0 0 10px rgba(0,0,0,.611764705882353);z-index:1}option[_ngcontent-%COMP%]:disabled{color:#7d7d7d;background:rgba(76,67,67,.25098039215686274)}.swipeBodyContainer[_ngcontent-%COMP%]{flex:1;margin-top:1.5em}title[_ngcontent-%COMP%]{display:block}.swipeDirection[_ngcontent-%COMP%]{background:#d3d3d3;border:1px solid #000;margin:5px;padding:.3em;border-radius:5px}.swipeSelected[_ngcontent-%COMP%]{box-shadow:0 0 8px #1d8faf;border:1px solid #1d8faf}select[_ngcontent-%COMP%]{display:block;margin:auto;width:10em;height:2em;border:1px solid #000;box-shadow:0 0 1px}"]}),R)},"7MGP":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).type=null,e}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);Object(r.a)([Object(i.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],o.prototype,"type",void 0),o=Object(r.a)([Object(a.a)("esri.layers.support.FeatureReduction")],o),t.a=o},"7Nfj":function(e,t,n){"use strict";var r=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(Wt(this,e),this.ctor=t,this.acquireFunction=n,this.releaseFunction=r,this.allocationSize=i,this._pool=new Array(a),this._initialSize=a,this.ctor)for(var o=0;o<a;o++)this._pool[o]=new this.ctor;this.allocationSize=Math.max(i,1)}return Zt(e,[{key:"destroy",value:function(){this.prune(0)}},{key:"acquire",value:function(){var t,n;if(e.test.disabled)n=new this.ctor;else{if(0===this._pool.length)for(var r=this.allocationSize,i=0;i<r;i++)this._pool[i]=new this.ctor;n=this._pool.pop()}for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return this.acquireFunction?this.acquireFunction.apply(this,[n].concat(o)):function(e){return e&&e.acquire&&"function"==typeof e.acquire}(n)&&(t=n).acquire.apply(t,o),n}},{key:"release",value:function(t){var n;t&&!e.test.disabled&&(this.releaseFunction?this.releaseFunction(t):(n=t)&&n.release&&"function"==typeof n.release&&t.release(),this._pool.push(t))}},{key:"prune",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._initialSize;if(!(e>=this._pool.length)){for(var t=e;t<this._pool.length;++t)this._dispose(this._pool[t]);this._pool.length=e}}},{key:"_dispose",value:function(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}]),e}();r.test={disabled:!1},t.a=r},"7ZHn":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("Gxlu")),u=n("sI4m"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="pie-chart",r}return Zt(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:u.a.write}})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(o.a)("esri.popup.content.PieChartMediaInfo")],c),t.a=c},"7tXg":function(e,t,n){"use strict";var r=function(){function e(){Wt(this,e),this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}return Zt(e,[{key:"weakClone",value:function(){var t=new e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}]),e}();t.a=r},"7tol":function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},"875+":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("04ZG"),c=n("Cduq"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=new s.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).maxPointCount=void 0,r.maxRecordCount=void 0,r.maxVertexCount=void 0,r.onStatisticField=null,r.outStatisticFieldName=null,r.statisticType=null,r.statisticParameters=null,r}return Zt(n,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(a.a)(e))}},{key:"clone",value:function(){return new r({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"maxPointCount",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"maxRecordCount",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"maxVertexCount",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"onStatisticField",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"outStatisticFieldName",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:{source:"statisticType",reader:h.read},write:{target:"statisticType",writer:h.write}}})],f.prototype,"statisticType",void 0),Object(i.a)([Object(o.b)({type:Object})],f.prototype,"statisticParameters",void 0),Object(i.a)([Object(c.a)("statisticParameters")],f.prototype,"writeStatisticParameters",null),f=r=Object(i.a)([Object(u.a)("esri.tasks.support.StatisticDefinition")],f),t.a=f},"8JEK":function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return v}));var r=n("srIe"),i=n("KrcW"),a=n("Cy1f"),o=n("2uVf"),s=n("r+FG"),u=n("sTkM"),c=n("AvGH"),l=n("D8Ta"),h=function(){function e(t,n,r){var a=this;Wt(this,e),this.itemByteSize=t,this.itemCreate=n,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=i.a.before((function(){return a.reset()}))}return Zt(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(r.o)(this.tickHandle)),this.itemsPtr=0,this.items=Object(r.o)(this.items),this.buffers=Object(r.o)(this.buffers)}},{key:"get",value:function(){0===this.itemsPtr&&Object(i.a)((function(){}));for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),n=0;n<this.itemsPerBuffer;++n)this.items.push(this.itemCreate(t,n*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}},{key:"reset",value:function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}},{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new e(16,c.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new e(24,a.c,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new e(32,l.e,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new e(72,o.b,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new e(128,s.d,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new e(32,u.b,t)}}]),e}(),f=4096,p=h.createVec2f64(),d=h.createVec3f64(),v=h.createVec4f64(),y=(h.createMat3f64(),h.createMat4f64()),b=h.createQuatf64()},"8Lmx":function(e,t,n){"use strict";function r(e){return 32+e.length}function i(e){if(!e)return 0;var t=32;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];switch(typeof i){case"string":t+=r(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function a(e,t){return 32+e.length*t}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}))},"8RtG":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("H9eC"),c=n("YXST"),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.label=null,r.minValue=null,r.maxValue=0,r.symbol=null,r}return Zt(n,[{key:"clone",value:function(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"description",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"label",void 0),Object(i.a)([Object(a.b)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l.prototype,"minValue",void 0),Object(i.a)([Object(a.b)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l.prototype,"maxValue",void 0),Object(i.a)([Object(a.b)({types:u.k,json:{origins:{"web-scene":{types:u.l,write:c.b}},write:c.b}})],l.prototype,"symbol",void 0),l=r=Object(i.a)([Object(o.a)("esri.renderers.support.ClassBreakInfo")],l),t.a=l},"8Vgs":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("4GrV"),i=n("6lH3"),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,n=arguments.length>2?arguments[2]:void 0;return Object(i.geodesicArea)(e,n)>t},o=function(e,t){var n=!1;switch(e.geometry.type){case"point":n=Object(i.equals)(r.a.fromJSON(e.geometry),r.a.fromJSON(t.geometry));break;case"polygon":n=Object(i.equals)(r.b.fromJSON(e.geometry),r.b.fromJSON(t.geometry));break;case"polyline":n=Object(i.equals)(r.c.fromJSON(e.geometry),r.c.fromJSON(t.geometry))}var a=e.attributes,o=t.attributes,s=!1;if(Object.keys(a).length===Object.keys(o).length){for(var u in a)if(a[u]!==o[u]){s=!1;break}}else s=!1;return n&&s},s=function(e){return e.reduce((function(e,t){return e+Object(i.geodesicLength)(t.geometry,"feet")}),0)},u=function(e){return e.reduce((function(e,t){return e+Object(i.geodesicArea)(t.geometry,"acres")}),0)},c=function(e){return.00024710538146717*e}},"8WOb":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("fXoL"),i=n("5qNO"),a=n("OFbc"),o=function(e){return{"width.px":25,fill:e}},s=function(){var e=function(){function e(t){Wt(this,e),this.helpService=t,this.header="Help",this.itemName="help",this.fillColor="#353535"}return Zt(e,[{key:"openHelp",value:function(){this.helpService.openHelp.emit({header:this.header,itemName:this.itemName})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(i.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["app-help-button"]],inputs:{header:"header",itemName:"itemName",fillColor:"fillColor"},decls:2,vars:4,consts:[["aria-label","help",1,"float-right",3,"click"],[3,"src","svgStyle"]],template:function(e,t){1&e&&(r.kc(0,"button",0),r.rc("click",(function(){return t.openHelp()})),r.gc(1,"svg-icon",1),r.jc()),2&e&&(r.Tb(1),r.Bc("src","assets/icons/help.svg")("svgStyle",r.Ec(2,o,t.fillColor)))},directives:[a.b],styles:[".help-icon[_ngcontent-%COMP%]{float:right;height:1em}"]}),e}()},"8aRT":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=n("zlDU"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("6aRp"),l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).access=null,r.created=null,r.description=null,r.id=null,r.isInvitationOnly=!1,r.modified=null,r.owner=null,r.portal=null,r.snippet=null,r.sortField=null,r.sortOrder=null,r.tags=null,r.title=null,r}return Zt(n,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}},{key:"fetchCategorySchema",value:function(e){var t=this;return this.portal._request(this.url+"/categorySchema",e).then((function(n){var r=n.categorySchema||[];return r.some((function(e){return"contentCategorySetsGroupQuery.LivingAtlas"===e.source}))?t._fetchCategorySchemaSet("LivingAtlas",e):r}))}},{key:"fetchMembers",value:function(e){return this.portal._request(this.url+"/users",e)}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t}},{key:"toJSON",value:function(){throw new s.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}},{key:"queryItems",value:function(e,t){var n=Object(i.m)(c.a,e);return parseFloat(this.portal.currentVersion)>5?(n=n||new c.a,this.portal._queryPortal("/content/groups/".concat(this.id,"/search"),n,"PortalItem",t)):((n=n?n.clone():new c.a).query="group:"+this.id+(n.query?" "+n.query:""),this.portal.queryItems(n,t))}},{key:"_fetchCategorySchemaSet",value:function(e,t){var n=this;return this.portal._fetchSelf(this.portal.authMode,!0,t).then((function(e){var r=e.contentCategorySetsGroupQuery;if(r){var i=new c.a;return i.disableExtraQuery=!0,i.num=1,i.query=r,n.portal.queryGroups(i,t)}throw new s.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((function(n){if(n.total){var r=n.results[0],i=new c.a;return i.num=1,i.query='typekeywords:"'.concat(e,'"'),r.queryItems(i,t)}throw new s.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((function(e){return e.total?e.results[0].fetchData("json",t).then((function(e){var t=e&&e.categorySchema;return t&&t.length?t:[]})):[]}))}}]),n}(u.a);Object(r.a)([Object(a.b)()],l.prototype,"access",void 0),Object(r.a)([Object(a.b)({type:Date})],l.prototype,"created",void 0),Object(r.a)([Object(a.b)()],l.prototype,"description",void 0),Object(r.a)([Object(a.b)()],l.prototype,"id",void 0),Object(r.a)([Object(a.b)()],l.prototype,"isInvitationOnly",void 0),Object(r.a)([Object(a.b)({type:Date})],l.prototype,"modified",void 0),Object(r.a)([Object(a.b)()],l.prototype,"owner",void 0),Object(r.a)([Object(a.b)()],l.prototype,"portal",void 0),Object(r.a)([Object(a.b)()],l.prototype,"snippet",void 0),Object(r.a)([Object(a.b)()],l.prototype,"sortField",void 0),Object(r.a)([Object(a.b)()],l.prototype,"sortOrder",void 0),Object(r.a)([Object(a.b)()],l.prototype,"tags",void 0),Object(r.a)([Object(a.b)()],l.prototype,"thumbnail",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],l.prototype,"thumbnailUrl",null),Object(r.a)([Object(a.b)()],l.prototype,"title",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],l.prototype,"url",null),l=Object(r.a)([Object(o.a)("esri.portal.PortalGroup")],l),t.default=l},"8prj":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("r88o"),u=n("04ZG"),c=n("Cduq"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=n("WZb1"),f=n("qatw"),p=n("4GrV"),d=n("jWBI"),v=n("ofM5"),y=new o.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),b=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return Zt(n,[{key:"readFeatures",value:function(e,t){for(var n=h.a.fromJSON(t.spatialReference),r=[],a=0;a<e.length;a++){var o=e[a],s=d.a.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;Object(i.k)(s.geometry)&&!u&&(s.geometry.spatialReference=n),r.push(s)}return r}},{key:"writeGeometryType",value:function(e,t,n,r){if(e)y.write(e,t,n,r);else{var a=this.features;if(a){var o,s=Vt(a);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u&&Object(i.k)(u.geometry))return void y.write(u.geometry.type,t,n,r)}}catch(c){s.e(c)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var n=!!e.spatialReference,r=Object(f.a)(e);return!n&&t.spatialReference&&(r.spatialReference=h.a.fromJSON(t.spatialReference)),r}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var n=this.features;if(n){var r,a=Vt(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o&&Object(i.k)(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(s){a.e(s)}finally{a.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var n=0;n<t.features.length;n++){var r=t.features[n];if(r.geometry){var i=e&&e[n];r.geometry=i&&i.toJSON()||r.geometry}}return t}},{key:"quantize",value:function(e){for(var t=zt(e.scale,2),n=t[0],r=t[1],a=zt(e.translate,2),o=a[0],s=a[1],u=this.features,c=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/n)}),(function(e){return Math.round((s-e)/r)})),l=0,h=u.length;l<h;l++)c(Object(i.q)(u[l].geometry))||(u.splice(l,1),l--,h--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,n=this.transform;if(!n)return this;var r,a=zt(n.translate,2),o=a[0],s=a[1],u=zt(n.scale,2),c=u[0],l=u[1],h=this._getHydrationFunction(e,(function(e){return e*c+o}),(function(e){return s-e*l})),f=Vt(t);try{for(f.s();!(r=f.n()).done;){var p=r.value.geometry;Object(i.k)(p)&&h(p)}}catch(d){f.e(d)}finally{f.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,n){for(var r,i,a=[],o=0,s=e.length;o<s;o++){var u=e[o];if(o>0){var c=t(u[0]),l=n(u[1]);c===r&&l===i||(a.push([c-r,l-i]),r=c,i=l)}else r=t(u[0]),i=n(u[1]),a.push([r,i])}return a.length>0?a:null}},{key:"_getQuantizationFunction",value:function(e,t,n){var r=this;return"point"===e?function(e){return e.x=t(e.x),e.y=n(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=Object(f.g)(e)?e.rings:e.paths,a=[],o=0,s=i.length;o<s;o++){var u=r._quantizePoints(i[o],t,n);u&&a.push(u)}return a.length>0?(Object(f.g)(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var i=r._quantizePoints(e.points,t,n);return i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,n){return"point"===e?function(e){e.x=t(e.x),e.y=n(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var r,i,a=Object(f.g)(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var u=a[o],c=0,l=u.length;c<l;c++){var h=u[c];c>0?(r+=h[0],i+=h[1]):(r=h[0],i=h[1]),h[0]=t(r),h[1]=n(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax)}:"multipoint"===e?function(e){for(var r,i,a=e.points,o=0,s=a.length;o<s;o++){var u=a[o];o>0?(r+=u[0],i+=u[1]):(r=u[0],i=u[1]),u[0]=t(r),u[1]=n(i)}}:void 0}}]),n}(l.a);Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"exceededTransferLimit",void 0),Object(r.a)([Object(a.b)({type:[d.a],json:{write:!0}})],b.prototype,"features",void 0),Object(r.a)([Object(s.a)("features")],b.prototype,"readFeatures",null),Object(r.a)([Object(a.b)({type:[v.a],json:{write:!0}})],b.prototype,"fields",void 0),Object(r.a)([Object(a.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:y.read}}})],b.prototype,"geometryType",void 0),Object(r.a)([Object(c.a)("geometryType")],b.prototype,"writeGeometryType",null),Object(r.a)([Object(a.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"hasM",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"hasZ",void 0),Object(r.a)([Object(a.b)({types:p.e,json:{write:!0}})],b.prototype,"queryGeometry",void 0),Object(r.a)([Object(s.a)("queryGeometry")],b.prototype,"readQueryGeometry",null),Object(r.a)([Object(a.b)({type:h.a,json:{write:!0}})],b.prototype,"spatialReference",void 0),Object(r.a)([Object(c.a)("spatialReference")],b.prototype,"writeSpatialReference",null),Object(r.a)([Object(a.b)({json:{write:!0}})],b.prototype,"transform",void 0),(b=Object(r.a)([Object(u.a)("esri.tasks.support.FeatureSet")],b)).prototype.toJSON.isDefaultToJSON=!0,b||(b={}),t.default=b},"8uAX":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=0;function i(){return++r}},"9+ss":function(e,t,n){"use strict";function r(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a){return[e,t,n,r,i,a]},createView:function(e,t){return new Float64Array(e,t,6)}})},"975N":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var r,i=n("wSAH"),a=(n("Sfqt"),n("4EHJ")),o="4.19",s={request:function(e,t){return Promise.resolve().then(n.bind(null,"Lqtk")).then((function(n){var r=n.default,i=e.options||{};return i.responseType="array-buffer",i.signal=null==t?void 0:t.signal,r(e.url,i)})).then((function(e){return{result:{data:e.data,ssl:e.ssl},transferList:[e.data]}}))}};function u(e){r=e}function c(e){var t=r&&r.findCredential(e);return t&&t.token?Object(a.d)(e,"token",t.token):e}Object(i.a)("host-webworker")||(Object(i.a)("edge")||Object(i.a)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},"97vc":function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Not Available";return{name:"MMPCustomError",level:"Severe",userMsg:e,message:t,stackTrace:n,toString:function(){return this.name+": "+this.message}}}n.d(t,"a",(function(){return r})),Error},"9AGB":function(e,t,n){"use strict";var r=n("yoF8");function i(e){return 0===e.length?r.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},t.pipeFromArray=i},"9AIY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("4EHJ");function i(e){return a[function(e){return e instanceof Blob?e.type:function(e){var t=Object(r.n)(e);return u[t]||o}(e.url)}(e)]||s}var a={},o="text/plain",s=a[o],u={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(var c in u)a[u[c]]=c},"9AiD":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return c}));var r=n("srIe"),i=n("gHbr");function a(e,t){return Object(r.j)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function o(e,t){return a(!!Object(r.k)(e)&&e.hasZ,t)}function s(e){var t=l(e);return o(e.geometry,t)}function u(e){var t=l(e),n=o(e.geometry,t);return{mode:n,offset:Object(r.k)(t)&&"on-the-ground"!==n?Object(r.r)(t.offset,0)*Object(i.a)(Object(r.r)(t.unit,"meters")):0}}function c(e){if("on-the-ground"===s(e))return!1;var t=l(e),n=Object(r.k)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||"0"===n)}function l(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function h(e,t,n){if(!Object(r.j)(n)&&n.mode){var i=e.hasZ?e.z:0,a=Object(r.k)(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return i-a;case"on-the-ground":return 0;case"relative-to-ground":return i-(Object(r.r)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return i-(Object(r.r)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+a)}}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function p(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return d(e,t[0],t[1],t.length>2?t[2]:0,n,r,i)}function d(e,t,n,i,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!Object(r.j)(o)){var u=Object(r.k)(s)?s.mode:"absolute-height";return"on-the-ground"===u?0:function(e,t,n,i,a,o,s,u){var c=Object(r.k)(s)&&Object(r.k)(s.offset)?s.offset:0;switch(u){case"absolute-height":return e-c;case"relative-to-ground":return e-(Object(r.r)(o.elevationProvider.getElevation(t,n,i,a,"ground"),0)+c);case"relative-to-scene":return e-(Object(r.r)(o.elevationProvider.getElevation(t,n,i,a,"scene"),0)+c)}}(function(e,t,n,i,a,o){var s=Object(r.k)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return n+s;case"on-the-ground":return Object(r.r)(a.elevationProvider.getElevation(e,t,0,i,"ground"),0);case"relative-to-ground":return n+Object(r.r)(a.elevationProvider.getElevation(e,t,n,i,"ground"),0)+s;case"relative-to-scene":return n+Object(r.r)(a.elevationProvider.getElevation(e,t,n,i,"scene"),0)+s}}(t,n,i,a,e,o),t,n,i,a,e,s,u)}}},"9MzC":function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return j})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return w})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return M})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return b})),n.d(t,"r",(function(){return x})),n.d(t,"s",(function(){return k})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return h})),n.d(t,"v",(function(){return v})),n.d(t,"w",(function(){return I})),n.d(t,"x",(function(){return g}));var r=n("srIe"),i=(n("6S2I"),n("zlDU")),a=n("Fym7"),o=n("nYOO");function s(e){return Promise.all(e)}function u(e){return new Promise((function(t,n){try{e(t,n)}catch(r){Promise.resolve().then((function(){return n(r)}))}}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Aborted";return new i.a("AbortError",e)}function l(){return new AbortController}function h(e){if(p(e))throw c()}function f(e){return Object(r.k)(e)?"aborted"in e?e:e.signal:e}function p(e){var t=f(e);return Object(r.k)(t)&&t.aborted}function d(e){if(m(e))throw e}function v(e){if(!m(e))throw e}function y(e,t){var n=f(e);if(!Object(r.j)(n)){if(!n.aborted)return Object(o.d)(n,"abort",(function(){return t()}));t()}}function b(e,t){var n=f(e);if(!Object(r.j)(n))return h(n),Object(o.d)(n,"abort",(function(){return t(c())}))}function g(e,t){var n=f(t);return Object(r.j)(n)?e:new Promise((function(n,i){var a=y(t,(function(){return i(c())})),o=function(){return a=Object(r.p)(a)};e.then(o,o),e.then(n,i)}))}function m(e){return e&&"AbortError"===e.name}function w(e){return e.catch((function(e){if(!m(e))throw e}))}function O(){var e=null,t=new Promise((function(t,n){e={promise:void 0,resolve:t,reject:n}}));return e.promise=t,e}function j(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return j(t.map((function(t){return e[t]}))).then((function(e){var n={};return t.forEach((function(t,r){return n[t]=e[r]})),n}))}var n=e;return Promise.allSettled(n).then((function(e){return Array.from(n,(function(t,n){var r=e[n];return"fulfilled"===r.status?{promise:t,value:r.value}:{promise:t,error:r.reason}}))}))}}function _(e){return j(e).then((function(e){return e.filter((function(e){return!!e.value})).map((function(e){return e.value}))}))}function x(e){return Promise.reject(e)}function k(e){return Promise.resolve(e)}function S(e,t,n){var r=l();return y(n,(function(){return r.abort()})),new Promise((function(n,i){var a=setTimeout((function(){a=0,n(t)}),e);y(r,(function(){a&&(clearTimeout(a),i(c()))}))}))}function M(e){return e&&"function"==typeof e.then}function I(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function T(e){var t,n,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=null,u=function u(){for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];if(t){n=f,a&&a.reject(c()),a=O();var d=Object(r.d)(a.promise);if(s){var v=s;s=null,v.abort()}return d}if(i=a||O(),a=null,o>0){var y=l(),b=t=I(e.apply(void 0,f.concat([y.signal])));S(o).then((function(){t===b&&(a?y.abort():s=y)}))}else t=1,t=I(e.apply(void 0,f));var g=function(){var e=n;n=i=t=s=null,null!=e&&u.apply(void 0,Bt(e))},m=t,w=i;return m.then(g,g),m.then(w.resolve,w.reject),Object(r.d)(w.promise)};return u}function A(){var e,t,n=new Promise((function(n,r){e=n,t=r})),r=function(t){e(t)};return r.resolve=function(t){return e(t)},r.reject=function(e){return t(e)},r.timeout=function(e,t){return a.a.setTimeout((function(){return r.reject(t)}),e)},r.promise=n,r}function C(e){var t=l(),n=e(t.signal),r={promise:n,finished:!1,abort:function(){t&&(t.abort(),t=null)}},i=function(){r&&(r.finished=!0,r=null),t=null};return n.then(i,i),r}},"9Ruv":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("wdpY"),i=(n("p6dn"),n("Eonp")),a=(n("ack/"),n("iALD")),o=n("n5EF"),s=n("GL98"),u=(n("PKzc"),n("0OnR"),n("SFah")),c=["oid","global-id"],l=["oid","global-id","guid"];function h(e,t){var n=e.displayField,a=e.editFieldsInfo,c=e.fields,l=e.objectIdField,h=e.title;if(!c)return null;var f=function(e,t){var n=e.editFieldsInfo,r=e.objectIdField;return function(e,t){var n=e;return t&&(e=e.filter((function(e){return-1===t.indexOf(e.type)}))),e===n&&(e=e.slice()),e.sort(d),e}(e.fields,(null==t?void 0:t.ignoreFieldTypes)||m).map((function(e){return new o.a({fieldName:e.name,isEditable:y(e,n),label:e.alias,format:b(e),visible:p(e,{editFieldsInfo:n,objectIdField:r,visibleFieldNames:null==t?void 0:t.visibleFieldNames})})}))}({editFieldsInfo:a,fields:c,objectIdField:l},t);if(!f.length)return null;var v=function(e){var t=Object(r.l)(e),n=e.titleBase;return t?"".concat(n,": {").concat(t.trim(),"}"):n}({titleBase:h,fields:c,displayField:n}),g=[new s.a,new i.a];return new u.a({title:v,content:g,fieldInfos:f})}var f=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],p=function(e,t){var n=t.editFieldsInfo,r=t.objectIdField,i=t.visibleFieldNames;return i?i.has(e.name):!(v(e.name,n)||r&&e.name===r||c.indexOf(e.type)>-1||f.some((function(t){return t.test(e.name)})))};function d(e,t){return"oid"===e.type?-1:"oid"===t.type?1:g(e)?-1:g(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function v(e,t){if(!e||!t)return!1;var n=t.creationDateField,r=t.creatorField,i=t.editDateField,a=t.editorField;return-1!==[n&&n.toLowerCase(),r&&r.toLowerCase(),i&&i.toLowerCase(),a&&a.toLowerCase()].indexOf(e.toLowerCase())}function y(e,t){return e.editable&&-1===l.indexOf(e.type)&&!v(e.name,t)}function b(e){switch(e.type){case"small-integer":case"integer":case"single":return new a.a({digitSeparator:!0,places:0});case"double":return new a.a({digitSeparator:!0,places:2});case"date":return new a.a({dateFormat:"long-month-day-year"});default:return null}}function g(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())||void 0}var m=["geometry","blob","raster","guid","xml"]},"9ToJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t){var n=this;Wt(this,e),this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch("ready",(function(e){n._resourcesCreated&&(e?n._createResources():n._destroyResources())}))}return Zt(e,[{key:"applyProps",value:function(e){var t=!1;for(var n in e)n in this?"attached"===n?t=e[n]:this[n]=e[n]:console.error("Cannot set unknown property",n);this.attached=t}},{key:"destroy",value:function(){this.attached=!1}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}},{key:"_createResources",value:function(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}},{key:"_destroyResources",value:function(){this.destroyResources(),this._resourcesCreated=!1}}]),e}()},"9XlO":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("04ZG"),u=n("zlDU"),c=n("4EHJ"),l=(n("ju1D"),n("9AIY"),n("Ehki")),h=n("qRWG"),f=n("975N"),p=n("Lqtk"),d=n("0pea"),v=n("xk++"),y=n("kglp"),b=n("LE+W"),g=new o.a({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"}),m=(g.fromJSON.bind(g),g.toJSON.bind(g)),w=new o.a({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),O=(w.fromJSON.bind(w),w.toJSON.bind(w));function j(e,t){var n=t.graphic,r=t.renderer,i=t.symbol,a=i.type;if("text"!==a&&"shield-label-symbol"!==a&&"visualVariables"in r&&r.visualVariables){var o=r.getVisualVariablesForType("size"),s=r.getVisualVariablesForType("color"),u=r.getVisualVariablesForType("opacity"),c=r.getVisualVariablesForType("rotation"),l=o&&o[0],f=s&&s[0],p=u&&u[0],v=c&&c[0];if(l){var y="simple-marker"===a?i.style:null,b=Object(d.getSize)(l,n,{shape:y});null!=b&&("simple-marker"===a?e.size=Object(h.i)(b):"picture-marker"===a?(e.width=Object(h.i)(b),e.height=Object(h.i)(b)):"simple-line"===a?e.width=Object(h.i)(b):e.outline&&(e.outline.width=Object(h.i)(b)))}if(f){var g=Object(d.getColor)(f,n);(g&&"simple-marker"===a||"simple-line"===a||"simple-fill"===a)&&(e.color=g?g.toJSON():void 0)}if(p){var m=Object(d.getOpacity)(p,n);null!=m&&e.color&&(e.color[3]=Math.round(255*m))}v&&(e.angle=-Object(d.getRotationAngle)(r,n))}}function _(e){return e&&"bing-maps"===e.type}function x(e){return e&&"csv"===e.type}function k(e){return e&&"feature"===e.type}function S(e){return e&&"geojson"===e.type}function M(e){return e&&"graphics"===e.type}function I(e){return e&&"group"===e.type}function T(e){return e&&"esri.views.2d.layers.GroupLayerView2D"===e.declaredClass}function A(e){return e&&"imagery"===e.type}function C(e){return e&&"kml"===e.type}function E(e){return e&&"map-image"===e.type}function P(e){return e&&"map-notes"===e.type}function R(e){return e&&"open-street-map"===e.type}function D(e){return e&&"stream"===e.type}function L(e){return e&&"tile"===e.type}function N(e){return e&&"vector-tile"===e.type}function F(e){return e&&"web-tile"===e.type}function z(e){return e&&"wms"===e.type}function V(e){return e&&"wmts"===e.type}var G=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).attributionVisible=!0,r.exportOptions={width:800,height:1100,dpi:96},r.forceFeatureAttributes=!1,r.format="png32",r.label=null,r.layout="map-only",r.layoutOptions=null,r.outScale=0,r.scalePreserved=!0,r.showLabels=!0,r}return n}(n("/CmD").a);Object(r.a)([Object(a.b)()],G.prototype,"attributionVisible",void 0),Object(r.a)([Object(a.b)()],G.prototype,"exportOptions",void 0),Object(r.a)([Object(a.b)()],G.prototype,"forceFeatureAttributes",void 0),Object(r.a)([Object(a.b)()],G.prototype,"format",void 0),Object(r.a)([Object(a.b)()],G.prototype,"label",void 0),Object(r.a)([Object(a.b)()],G.prototype,"layout",void 0),Object(r.a)([Object(a.b)()],G.prototype,"layoutOptions",void 0),Object(r.a)([Object(a.b)()],G.prototype,"outScale",void 0),Object(r.a)([Object(a.b)()],G.prototype,"scalePreserved",void 0),Object(r.a)([Object(a.b)()],G.prototype,"showLabels",void 0);var U=G=Object(r.a)([Object(s.a)("esri.tasks.support.PrintTemplate")],G),B={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},q=new o.a({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),H=new o.a({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),W=new v.a({returnGeometry:!0});function J(e){return e&&(e.path||"image/svg+xml"===e.contentType||e.url&&e.url.endsWith(".svg"))}var Z=function(e){Kt($,e);var t,n,r,a,o,s,v,y,g,w,G,Z,K,Y,X,Q=Xt($);function $(){var e;Wt(this,$);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=Q.call.apply(Q,[this].concat(n)))._ssExtent=null,e._legendLayers=[],e._legendLayerNameMap={},e._gpServerUrl=null,e._cimVersion=null,e._is11xService=!1,e._gpMetadata=null,e.updateDelay=1e3,e}return Zt($,[{key:"_geoprocessor",get:function(){return new b.a({url:this.url})}},{key:"mode",get:function(){return this._gpMetadata&&this._gpMetadata.executionType?H.fromJSON(this._gpMetadata.executionType):"sync"}},{key:"execute",value:function(e,t){var n=this,r=this.url,i=r.lastIndexOf("/GPServer/");return i>0&&(r=r.slice(0,i+9)),Promise.resolve().then((function(){return n._gpServerUrl===r?{data:n._gpMetadata}:(n._gpServerUrl=r,Object(p.default)(r,{query:{f:"json"}}))})).then((function(t){return n._gpMetadata=t.data,n._cimVersion=n._gpMetadata.cimVersion,n._is11xService=!!n._cimVersion,n._getGpPrintParams(e)})).then((function(e){var r=function(e){return"sync"===n.mode?e.results&&e.results[0]&&e.results[0].value:n._geoprocessor.getResultData(e.jobId,"Output_File",t).then((function(e){return e.value}))};return"async"===n.mode?n._geoprocessor.submitJob(e,t).then((function(e){return n._geoprocessor.waitForJobCompletion(e.jobId,{interval:n.updateDelay}).then(r)})):n._geoprocessor.execute(e,t).then(r)}))}},{key:"_createOperationalLayers",value:(X=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i={layerView:null,printTemplate:n,view:t},a=0,n.scalePreserved&&(a=n.outScale||t.scale),o=function(e,t){var n=e.allLayerViews.items;if(t===e.scale)return n.filter((function(e){return!e.suspended}));var r,i=new Array,a=Vt(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;T(o.parent)&&!i.includes(o.parent)||!o.visible||t&&"isVisibleAtScale"in o&&!o.isVisibleAtScale(t)||i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}(t,a),s=Vt(o),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=116;break}if(c=u.value,(l=c.layer).loaded&&!I(l)){e.next=12;break}return e.abrupt("continue",114);case 12:if(h=void 0,i.layerView=c,!_(l)){e.next=18;break}e.t0=this._createBingMapsLayerJSON(l),e.next=112;break;case 18:if(!x(l)){e.next=24;break}return e.next=21,this._createCSVLayerJSON(l,i);case 21:e.t1=e.sent,e.next=111;break;case 24:if(!k(l)){e.next=30;break}return e.next=27,this._createFeatureLayerJSON(l,i);case 27:e.t2=e.sent,e.next=110;break;case 30:if(!S(l)){e.next=36;break}return e.next=33,this._createGeoJSONLayer(l,i);case 33:e.t3=e.sent,e.next=109;break;case 36:if(!M(l)){e.next=42;break}return e.next=39,this._createGraphicsLayerJSON(l,i);case 39:e.t4=e.sent,e.next=108;break;case 42:if(!A(l)){e.next=46;break}e.t5=this._createImageryLayerJSON(l),e.next=107;break;case 46:if(!C(l)){e.next=52;break}return e.next=49,this._createKMLLayerJSON(l,i);case 49:e.t6=e.sent,e.next=106;break;case 52:if(!E(l)){e.next=56;break}e.t7=this._createMapImageLayerJSON(l,i),e.next=105;break;case 56:if(!P(l)){e.next=62;break}return e.next=59,this._createMapNotesLayerJSON(i);case 59:e.t8=e.sent,e.next=104;break;case 62:if(!R(l)){e.next=66;break}e.t9=this._createOpenStreetMapLayerJSON(),e.next=103;break;case 66:if(!D(l)){e.next=72;break}return e.next=69,this._createStreamLayerJSON(l,i);case 69:e.t10=e.sent,e.next=102;break;case 72:if(!L(l)){e.next=76;break}e.t11=this._createTileLayerJSON(l),e.next=101;break;case 76:if(!N(l)){e.next=82;break}return e.next=79,this._createVectorTileLayerJSON(l,i);case 79:e.t12=e.sent,e.next=100;break;case 82:if(!F(l)){e.next=86;break}e.t13=this._createWebTileLayerJSON(l),e.next=99;break;case 86:if(!z(l)){e.next=90;break}e.t14=this._createWMSLayerJSON(l),e.next=98;break;case 90:if(!V(l)){e.next=94;break}e.t15=this._createWMTSLayerJSON(l),e.next=97;break;case 94:return e.next=96,this._createScreenshotJSON(l,i);case 96:e.t15=e.sent;case 97:e.t14=e.t15;case 98:e.t13=e.t14;case 99:e.t12=e.t13;case 100:e.t11=e.t12;case 101:e.t10=e.t11;case 102:e.t9=e.t10;case 103:e.t8=e.t9;case 104:e.t7=e.t8;case 105:e.t6=e.t7;case 106:e.t5=e.t6;case 107:e.t4=e.t5;case 108:e.t3=e.t4;case 109:e.t2=e.t3;case 110:e.t1=e.t2;case 111:e.t0=e.t1;case 112:(h=e.t0)&&(Array.isArray(h)?r.push.apply(r,Bt(h)):(h.id=l.id,h.title=this._legendLayerNameMap[l.id]||l.title,h.opacity=l.opacity,h.minScale=l.minScale||0,h.maxScale=l.maxScale||0,r.push(h)));case 114:e.next=7;break;case 116:e.next=121;break;case 118:e.prev=118,e.t16=e.catch(5),s.e(e.t16);case 121:return e.prev=121,s.f(),e.finish(121);case 124:if(a&&r.forEach((function(e){e.minScale=0,e.maxScale=0})),!t.graphics||!t.graphics.length){e.next=129;break}return e.next=127,this._createFeatureCollectionJSON(null,t.graphics,n);case 127:(f=e.sent)&&r.push(f);case 129:return e.abrupt("return",r);case 130:case"end":return e.stop()}}),e,this,[[5,118,121,124]])}))),function(e,t){return X.apply(this,arguments)})},{key:"_createBingMapsLayerJSON",value:function(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}}},{key:"_createCSVLayerJSON",value:(Y=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.layerView,i=n.printTemplate,this._legendLayers&&this._legendLayers.push({id:t.id}),this._is11xService){e.next=6;break}return e.next=4,this._getGraphics(r);case 4:return o=e.sent,e.abrupt("return",this._createFeatureCollectionJSON(t,o,i));case 6:return e.abrupt("return",(a={type:"CSV"},t.write(a,{origin:"web-map"}),delete a.popupInfo,delete a.layerType,a.showLabels=i.showLabels&&t.labelsVisible,a));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return Y.apply(this,arguments)})},{key:"_createFeatureCollectionJSON",value:(K=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,h,f,p,d,v,y,b,g,m,w,O,_,x,k,S,M,I,T,A,C,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}},o={layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}},s={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}},u={layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}},(c={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}).layerDefinition.name="textLayer",delete c.layerDefinition.drawingInfo,t&&("esri.layers.FeatureLayer"===t.declaredClass||"esri.layers.StreamLayer"===t.declaredClass?a.layerDefinition.name=o.layerDefinition.name=s.layerDefinition.name=u.layerDefinition.name=this._legendLayerNameMap[t.id]||t.get("arcgisProps.title")||t.title:"esri.layers.GraphicsLayer"===t.declaredClass&&(n=t.graphics.items),t.renderer&&(h=t.renderer.toJSON(),a.layerDefinition.drawingInfo.renderer=h,o.layerDefinition.drawingInfo.renderer=h,s.layerDefinition.drawingInfo.renderer=h,u.layerDefinition.drawingInfo.renderer=h),r.showLabels&&t.labelsVisible&&"function"==typeof t.write&&(d=null==(f=t.write({},{origin:"web-map"}).layerDefinition)||null==(p=f.drawingInfo)?void 0:p.labelingInfo)&&(i=!0,a.layerDefinition.drawingInfo.labelingInfo=d,o.layerDefinition.drawingInfo.labelingInfo=d,s.layerDefinition.drawingInfo.labelingInfo=d,u.layerDefinition.drawingInfo.labelingInfo=d)),null!=t&&t.renderer||i||(delete a.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo,delete s.layerDefinition.drawingInfo,delete u.layerDefinition.drawingInfo),y=t&&t.fields,b=t&&t.renderer,!y||!b||"function"!=typeof b.collectRequiredFields){e.next=9;break}return g=new Set,e.next=8,b.collectRequiredFields(g,y);case 8:v=Array.from(g);case 9:y&&(m=y.map((function(e){return e.toJSON()})),a.layerDefinition.fields=m,o.layerDefinition.fields=m,s.layerDefinition.fields=m,u.layerDefinition.fields=m),w=n&&n.length,_=0;case 12:if(!(_<w)){e.next=44;break}if(!1!==(x=n[_]||n.getItemAt(_)).visible&&x.geometry){e.next=16;break}return e.abrupt("continue",41);case 16:if((O=x.toJSON()).hasOwnProperty("popupTemplate")&&delete O.popupTemplate,O.geometry&&O.geometry.z&&delete O.geometry.z,!O.symbol||!O.symbol.outline||"esriCLS"!==O.symbol.outline.type||this._is11xService){e.next=18;break}return e.abrupt("continue",41);case 18:if(!this._is11xService&&O.symbol&&O.symbol.outline&&O.symbol.outline.color&&O.symbol.outline.color[3]&&(O.symbol.outline.color[3]=255),k=t&&t.renderer&&("valueExpression"in t.renderer&&t.renderer.valueExpression||"hasVisualVariables"in t.renderer&&t.renderer.hasVisualVariables()),O.symbol||!t||!t.renderer||!k||this._is11xService){e.next=28;break}return S=t.renderer,e.next=24,S.getSymbolAsync(x);case 24:if(M=e.sent){e.next=27;break}return e.abrupt("continue",41);case 27:O.symbol=M.toJSON(),"hasVisualVariables"in S&&S.hasVisualVariables()&&j(O.symbol,{renderer:S,graphic:x,symbol:M});case 28:if(e.t0=O.symbol,!e.t0){e.next=38;break}if(O.symbol.angle||delete O.symbol.angle,!J(O.symbol)){e.next=37;break}return e.next=34,this._convertSvgToPictureMarkerSymbolJson(O.symbol);case 34:O.symbol=e.sent,e.next=38;break;case 37:O.symbol.text&&delete O.attributes;case 38:if(r&&r.forceFeatureAttributes||!v||!v.length){e.next=40;break}!function(){var e={};v.forEach((function(t){O.attributes&&O.attributes.hasOwnProperty(t)&&(e[t]=O.attributes[t])})),O.attributes=e}();case 40:"polygon"===x.geometry.type?a.featureSet.features.push(O):"polyline"===x.geometry.type?o.featureSet.features.push(O):"point"===x.geometry.type?O.symbol&&O.symbol.text?c.featureSet.features.push(O):s.featureSet.features.push(O):"multipoint"===x.geometry.type?u.featureSet.features.push(O):"extent"===x.geometry.type&&(O.geometry=l.a.fromExtent(x.geometry).toJSON(),a.featureSet.features.push(O));case 41:_++,e.next=12;break;case 44:I=[a,o,u,s,c].filter((function(e){return e.featureSet.features.length>0})),T=Vt(I),e.prev=46,T.s();case 48:if((A=T.n()).done){e.next=59;break}if(C=A.value,!(E=C.featureSet.features.every((function(e){return e.symbol})))||r&&r.forceFeatureAttributes||C.featureSet.features.forEach((function(e){delete e.attributes})),E&&delete C.layerDefinition.drawingInfo,e.t1=C.layerDefinition.drawingInfo&&C.layerDefinition.drawingInfo.renderer,!e.t1){e.next=57;break}return e.next=57,this._convertSvgRenderer(C.layerDefinition.drawingInfo.renderer);case 57:e.next=48;break;case 59:e.next=64;break;case 61:e.prev=61,e.t2=e.catch(46),T.e(e.t2);case 64:return e.prev=64,T.f(),e.finish(64);case 67:return e.abrupt("return",I.length?{featureCollection:{layers:I},showLabels:i}:null);case 68:case"end":return e.stop()}}),e,this,[[46,61,64,67]])}))),function(e,t,n){return K.apply(this,arguments)})},{key:"_createFeatureLayerJSON",value:(Z=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,p,v,y,b,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._legendLayers&&this._legendLayers.push({id:t.id}),o=t.renderer,!(t.featureReduction||o&&"dot-density"===o.type&&(!this._is11xService||parseFloat(this._cimVersion)<2.6))){e.next=4;break}return e.abrupt("return",this._createScreenshotJSON(t,n));case 4:if(s=n.layerView,u=n.printTemplate,c=n.view,l=o&&("valueExpression"in o&&o.valueExpression||"hasVisualVariables"in o&&o.hasVisualVariables()),h="feature-layer"!==(null==(r=t.source)?void 0:r.type)&&"ogc-feature"!==(null==(i=t.source)?void 0:i.type),!(!this._is11xService&&l||t.featureReduction||h)&&o&&(!("field"in o)||null==o.field||"string"==typeof o.field&&t.getField(o.field))){e.next=14;break}return e.next=8,this._getGraphics(s);case 8:return f=e.sent,e.next=11,this._createFeatureCollectionJSON(t,f,u);case 11:a=e.sent,e.next=27;break;case 14:if((a={id:(g=t.write()).id,title:g.title,opacity:g.opacity,minScale:g.minScale,maxScale:g.maxScale,url:g.url,layerDefinition:g.layerDefinition}).showLabels=u.showLabels&&t.labelsVisible,this._setURLandToken(a,t),e.t0=null!=(p=a.layerDefinition)&&null!=(v=p.drawingInfo)&&v.renderer,!e.t0){e.next=24;break}return delete a.layerDefinition.minScale,delete a.layerDefinition.maxScale,e.next=23,this._convertSvgRenderer(a.layerDefinition.drawingInfo.renderer);case 23:e.t0="visualVariables"in o&&o.visualVariables&&o.visualVariables[0];case 24:if(!e.t0){e.next=27;break}"size"===(y=o.visualVariables[0]).type&&y.maxSize&&"number"!=typeof y.maxSize&&y.minSize&&"number"!=typeof y.minSize&&(b=Object(d.getSizeRangeAtScale)(y,c.scale),a.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=b.minSize,a.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=b.maxSize);case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this)}))),function(e,t){return Z.apply(this,arguments)})},{key:"_createGeoJSONLayer",value:(G=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.layerView,i=n.printTemplate,this._legendLayers&&this._legendLayers.push({id:t.id}),e.next=4,this._getGraphics(r);case 4:return a=e.sent,e.abrupt("return",this._createFeatureCollectionJSON(t,a,i));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return G.apply(this,arguments)})},{key:"_createGraphicsLayerJSON",value:(w=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.printTemplate,e.abrupt("return",this._createFeatureCollectionJSON(t,null,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"_createImageryLayerJSON",value:function(e){this._legendLayers&&this._legendLayers.push({id:e.id});var t={bandIds:e.bandIds,compressionQuality:e.compressionQuality,format:e.format,interpolation:e.interpolation};if((e.mosaicRule||e.definitionExpression)&&(t.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(this._is11xService)e.renderingRule&&(t.renderingRule=e.renderingRule.toJSON()),e.renderer&&(t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{var n=e.exportImageServiceParameters.combineRendererWithRenderingRule();n&&(t.renderingRule=n.toJSON())}return this._setURLandToken(t,e),t}},{key:"_createKMLLayerJSON",value:(g=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.printTemplate,!this._is11xService){e.next=4;break}return i={type:"kml"},e.abrupt("return",(t.write(i,{origin:"web-map"}),delete i.layerType,i.url=Object(c.C)(t.url),i));case 4:return a=[],(o=n.layerView).allVisibleMapImages.forEach((function(e,n){var r={id:"".concat(t.id,"_image").concat(n),type:"image",title:t.id,minScale:t.minScale||0,maxScale:t.maxScale||0,opacity:t.opacity,extent:e.extent};"data:image/png;base64,"===e.href.substr(0,22)?r.imageData=e.href.substr(22):r.url=e.href,a.push(r)})),s=[].concat(Bt(o.allVisiblePoints.items),Bt(o.allVisiblePolylines.items),Bt(o.allVisiblePolygons.items)),e.t0=Nt,e.t1={id:t.id},e.next=11,this._createFeatureCollectionJSON(null,s,r);case 11:return e.t2=e.sent,u=(0,e.t0)(e.t1,e.t2),e.abrupt("return",(a.push(u),a));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"_createMapImageLayerJSON",value:function(e,t){var n,r=t.view,i={id:e.id,subLayerIds:[]},a=[],o=r.scale;return e.sublayers&&e.sublayers.forEach((function e(t){if(t.visible&&(0===o||(0===t.minScale||o<=t.minScale)&&(0===t.maxScale||o>=t.maxScale)))if(t.sublayers)t.sublayers.forEach(e);else{var n=t.toExportImageJSON();a.unshift({id:t.id,name:t.title,layerDefinition:{drawingInfo:n.drawingInfo,definitionExpression:n.definitionExpression,source:n.source}}),i.subLayerIds.push(t.id)}})),a.length&&(n={layers:a=a.map((function(e){return{id:e.id,name:e.name,layerDefinition:e.layerDefinition}})),visibleLayers:e.capabilities.exportMap.supportsDynamicLayers?void 0:i.subLayerIds},this._setURLandToken(n,e),this._legendLayers.push(i)),n}},{key:"_createMapNotesLayerJSON",value:(y=Ut(regeneratorRuntime.mark((function e(t){var n,r,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.layerView,r=t.printTemplate,a=[],o=n.layer,!Object(i.k)(o.featureCollections)){e.next=24;break}s=Vt(o.featureCollections),e.prev=4,s.s();case 6:if((u=s.n()).done){e.next=14;break}return c=u.value,e.next=10,this._createFeatureCollectionJSON(c,c.source,r);case 10:(l=e.sent)&&a.push.apply(a,Bt(l.featureCollection.layers));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:e.next=44;break;case 24:if(!Object(i.k)(o.sublayers)){e.next=44;break}h=Vt(o.sublayers),e.prev=26,h.s();case 28:if((f=h.n()).done){e.next=36;break}return p=f.value,e.next=32,this._createFeatureCollectionJSON(null,p.graphics,r);case 32:(d=e.sent)&&a.push.apply(a,Bt(d.featureCollection.layers));case 34:e.next=28;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(26),h.e(e.t1);case 41:return e.prev=41,h.f(),e.finish(41);case 44:return e.abrupt("return",{featureCollection:{layers:a}});case 45:case"end":return e.stop()}}),e,this,[[4,16,19,22],[26,38,41,44]])}))),function(e){return y.apply(this,arguments)})},{key:"_createOpenStreetMapLayerJSON",value:function(){return{type:"OpenStreetMap"}}},{key:"_createScreenshotJSON",value:(v=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,l,f,p,d,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.printTemplate,i=n.view,a={type:"image"},o={format:"png",ignoreBackground:!0,layers:[t],rotation:0},s=this._ssExtent||i.extent.clone(),u=96,l=!0,f=!0,r.exportOptions&&((p=r.exportOptions).dpi>0&&(u=p.dpi),p.width>0&&(l=p.width%2==i.width%2),p.height>0&&(f=p.height%2==i.height%2)),"map-only"!==r.layout||!r.scalePreserved||r.outScale&&r.outScale!==i.scale||96!==u||l&&f||(o.area={x:0,y:0,width:i.width,height:i.height},l||(o.area.width-=1),f||(o.area.height-=1),this._ssExtent)||(d=i.toMap(Object(h.f)(o.area.width,o.area.height)),s.ymin=d.y,s.xmax=d.x,this._ssExtent=s),a.extent=s.clone()._normalize(!0).toJSON(),e.next=8,i.takeScreenshot(o);case 8:return v=e.sent,y=Object(c.i)(v.dataUrl),e.abrupt("return",(a.imageData=y.data,a));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"_createStreamLayerJSON",value:(s=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.layerView,i=n.printTemplate,this._legendLayers&&this._legendLayers.push({id:t.id}),e.next=4,this._getGraphics(r);case 4:return a=e.sent,e.abrupt("return",this._createFeatureCollectionJSON(t,a,i));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"_createTileLayerJSON",value:function(e){var t={customParameters:e.customParameters};return this._setURLandToken(t,e),t}},{key:"_createVectorTileLayerJSON",value:(o=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._is11xService&&t.serviceUrl&&t.styleUrl)){e.next=5;break}if(r=f.b&&f.b.findCredential(t.styleUrl),i=f.b&&f.b.findCredential(t.serviceUrl),(r||i)&&"2.1.0"===this._cimVersion){e.next=5;break}return a={type:"VectorTileLayer"},e.abrupt("return",(a.styleUrl=Object(c.C)(t.styleUrl),r&&(a.token=r.token),i&&i.token!==a.token&&(a.additionalTokens=[{url:t.serviceUrl,token:i.token}]),a));case 5:return e.abrupt("return",this._createScreenshotJSON(t,n));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"_createWebTileLayerJSON",value:function(e){var t={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(t.subDomains=e.subDomains),t}},{key:"_createWMSLayerJSON",value:function(e){var t,n=[];return e.sublayers&&e.sublayers.forEach((function e(t){t.visible&&(t.sublayers?t.sublayers.forEach(e):t.name&&n.unshift(t.name))})),n.length&&(t={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:n,url:Object(c.C)(e.url),version:e.version}),t}},{key:"_createWMTSLayerJSON",value:function(e){var t=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:Object(c.C)(e.url)}}},{key:"_setURLandToken",value:function(e,t){var n;if(t.url){e.url=Object(c.C)(e.url||t.url);var r=null==(n=f.b)?void 0:n.findCredential(t.url);r&&(e.token=r.token)}}},{key:"_convertSvgToPictureMarkerSymbolJson",value:(a=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,f,d,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._canvas||(this._canvas=document.createElement("canvas")),n=1024,this._canvas.width=n,this._canvas.height=n,r=this._canvas.getContext("2d"),!t.path){e.next=20;break}if((s=new Path2D(t.path)).closePath(),r.fillStyle=Array.isArray(t.color)?"rgba(".concat(t.color[0],",").concat(t.color[1],",").concat(t.color[2],",").concat(t.color[3]/255,")"):"rgb(0,0,0)",r.fill(s),u=function(e){var t,n,r,i,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,u=e.canvas.width,c=e.canvas.height,l=e.getImageData(0,0,u,c).data;e:for(n=c;n--;)for(t=u;t--;)if(l[4*(u*n+t)+3]>s){o=n;break e}if(!o)return null;e:for(t=u;t--;)for(n=o+1;n--;)if(l[4*(u*n+t)+3]>s){a=t;break e}e:for(t=0;t<=a;++t)for(n=o+1;n--;)if(l[4*(u*n+t)+3]>s){r=t;break e}e:for(n=0;n<=o;++n)for(t=r;t<=a;++t)if(l[4*(u*n+t)+3]>s){i=n;break e}return{x:r,y:i,width:a-r,height:o-i}}(r)){e.next=10;break}return e.abrupt("return",null);case 10:r.clearRect(0,0,n,n),c=Object(h.h)(t.size)/Math.max(u.width,u.height),r.scale(c,c),l=n/c,r.translate(l/2-u.width/2-u.x,l/2-u.height/2-u.y),Array.isArray(t.color)&&r.fill(s),null!=(o=t.outline)&&o.width&&Array.isArray(t.outline.color)&&(f=t.outline,r.lineWidth=Object(h.h)(f.width)/c,r.lineJoin="round",r.strokeStyle="rgba(".concat(f.color[0],",").concat(f.color[1],",").concat(f.color[2],",").concat(f.color[3]/255,")"),r.stroke(s),u.width+=r.lineWidth,u.height+=r.lineWidth),u.width*=c,u.height*=c,d=r.getImageData(512-u.width/2,512-u.height/2,Math.ceil(u.width),Math.ceil(u.height)),i=d.width,a=d.height,r.canvas.width=i,r.canvas.height=a,r.putImageData(d,0,0),e.next=25;break;case 20:return v="image/svg+xml"===t.contentType?"data:image/svg+xml;base64,"+t.imageData:t.url,e.next=23,Object(p.default)(v,{responseType:"image"});case 23:y=e.sent.data,i=Object(h.h)(t.width),a=Object(h.h)(t.height),r.canvas.width=i,r.canvas.height=a,r.drawImage(y,0,0,r.canvas.width,r.canvas.height);case 25:return e.abrupt("return",{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").substr(22),angle:t.angle,contentType:"image/png",height:Object(h.i)(a),width:Object(h.i)(i),xoffset:t.xoffset,yoffset:t.yoffset});case 26:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_convertSvgRenderer",value:(r=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("simple"!==(n=t.type)||!J(t.symbol)){e.next=7;break}return e.next=4,this._convertSvgToPictureMarkerSymbolJson(t.symbol);case 4:t.symbol=e.sent,e.next=35;break;case 7:if("uniqueValue"!==n&&"classBreaks"!==n){e.next=35;break}if(e.t0=J(t.defaultSymbol),!e.t0){e.next=13;break}return e.next=12,this._convertSvgToPictureMarkerSymbolJson(t.defaultSymbol);case 12:t.defaultSymbol=e.sent;case 13:if(!(r=t["uniqueValue"===n?"uniqueValueInfos":"classBreakInfos"])){e.next=35;break}i=Vt(r),e.prev=16,i.s();case 18:if((a=i.n()).done){e.next=27;break}if(o=a.value,e.t1=J(o.symbol),!e.t1){e.next=25;break}return e.next=24,this._convertSvgToPictureMarkerSymbolJson(o.symbol);case 24:o.symbol=e.sent;case 25:e.next=18;break;case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(16),i.e(e.t2);case 32:return e.prev=32,i.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[16,29,32,35]])}))),function(e){return r.apply(this,arguments)})},{key:"_getGraphics",value:function(e){return e.queryFeatures(W).then((function(e){return e.features}))}},{key:"_getPrintDefinition",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.view,i=r.spatialReference,e.next=4,this._createOperationalLayers(r,n);case 4:return e.t0=e.sent,a={operationalLayers:e.t0},o=this._ssExtent||t.extent||r.extent,e.abrupt("return",(i&&i.isWrappable&&(o=o.clone()._normalize(!0),i=o.spatialReference),a.mapOptions={extent:o&&o.toJSON(),spatialReference:i&&i.toJSON(),showAttribution:n.attributionVisible},this._ssExtent=null,r.background&&(a.background=r.background.toJSON()),r.rotation&&(a.mapOptions.rotation=-r.rotation),n.scalePreserved&&(a.mapOptions.scale=n.outScale||r.scale),a));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_getGpPrintParams",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,c,l,h,f,p,d,v,y,b,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=t.template||new U).showLabels&&(n.showLabels=!0),r=n.exportOptions,a=O(n.layout),r&&(i={dpi:r.dpi},"map_only"===a.toLowerCase()||""===a)&&(i.outputSize=[r.width,r.height]),(o=n.layoutOptions)&&("Miles"===o.scalebarUnit||"Kilometers"===o.scalebarUnit?(c="Kilometers",l="Miles"):"Meters"!==o.scalebarUnit&&"Feet"!==o.scalebarUnit||(c="Meters",l="Feet"),s={titleText:o.titleText,authorText:o.authorText,copyrightText:o.copyrightText,customTextElements:o.customTextElements,scaleBarOptions:{metricUnit:q.toJSON(c),metricLabel:B[c],nonMetricUnit:q.toJSON(l),nonMetricLabel:B[l]}}),h=null,o&&o.legendLayers&&(h=o.legendLayers.map((function(e){g._legendLayerNameMap[e.layerId]=e.title;var t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t}))),e.next=11,this._getPrintDefinition(t,n);case 11:return(f=e.sent).operationalLayers&&(p=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),d=/[\u0600-\u06FF]/,v=function(e){var t=e.text,n=e.font,r=n&&n.family&&n.family.toLowerCase();t&&n&&("arial"===r||"arial unicode ms"===r)&&(n.family=p.test(t)?"Arial Unicode MS":"Arial","normal"!==n.style&&d.test(t)&&(n.family="Arial Unicode MS"))},y=function(){throw new u.a("print-task:cim-symbol-unsupported","CIMSymbol is not supported by a print service published from ArcMap")},f.operationalLayers.forEach((function(e){var t,n,r;null!=(t=e.featureCollection)&&t.layers?e.featureCollection.layers.forEach((function(e){var t,n,r,i;if(null!=(t=e.layerDefinition)&&null!=(n=t.drawingInfo)&&null!=(r=n.renderer)&&r.symbol){var a=e.layerDefinition.drawingInfo.renderer;"esriTS"===a.symbol.type?v(a.symbol):"CIMSymbolReference"!==a.symbol.type||g._is11xService||y()}null!=(i=e.featureSet)&&i.features&&e.featureSet.features.forEach((function(e){e.symbol&&("esriTS"===e.symbol.type?v(e.symbol):"CIMSymbolReference"!==e.symbol.type||g._is11xService||y())}))})):!g._is11xService&&null!=(n=e.layerDefinition)&&null!=(r=n.drawingInfo)&&r.renderer&&JSON.stringify(e.layerDefinition.drawingInfo.renderer).includes('"type":"CIMSymbolReference"')&&y()}))),t.outSpatialReference&&(f.mapOptions.spatialReference=t.outSpatialReference.toJSON()),Object.assign(f,{exportOptions:i,layoutOptions:s||{}}),Object.assign(f.layoutOptions,{legendOptions:{operationalLayers:null!=h?h:this._legendLayers.slice()}}),this._legendLayers.length=0,b={Web_Map_as_JSON:JSON.stringify(f),Format:m(n.format),Layout_Template:a},e.abrupt("return",(t.extraParameters&&Object.assign(b,t.extraParameters),b));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),$}(y.a);Object(r.a)([Object(a.b)()],Z.prototype,"_geoprocessor",null),Object(r.a)([Object(a.b)()],Z.prototype,"_gpMetadata",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Z.prototype,"mode",null),Object(r.a)([Object(a.b)()],Z.prototype,"updateDelay",void 0),Z=Object(r.a)([Object(s.a)("esri.tasks.PrintTask")],Z),t.default=Z},"9aYe":function(e,t,n){"use strict";var r=n("Mi3D"),i=n("7/DV"),a=n("z//S");function o(e){return e}function s(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function u(e){var n=65536,r=[],i=e.length,o=t.getTypeOf(e),s=0,u=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,a(0))}}catch(h){u=!1}if(!u){for(var c="",l=0;l<e.length;l++)c+=String.fromCharCode(e[l]);return c}for(;s<i&&n>1;)try{r.push(String.fromCharCode.apply(null,"array"===o||"nodebuffer"===o?e.slice(s,Math.min(s+n,i)):e.subarray(s,Math.min(s+n,i)))),s+=n}catch(h){n=Math.floor(n/2)}return r.join("")}function c(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.string2binary=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n));return t},t.arrayBuffer2Blob=function(e,n){t.checkSupport("blob"),n=n||"application/zip";try{return new Blob([e],{type:n})}catch(i){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(i){throw new Error("Bug : can't construct the Blob.")}}},t.applyFromCharCode=u;var l={};l.string={string:o,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return l.string.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:function(e){return s(e,a(e.length))}},l.array={string:u,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a(e)}},l.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return c(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a(new Uint8Array(e))}},l.uint8array={string:u,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return a(e)}},l.nodebuffer={string:u,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return l.nodebuffer.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:o},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return l[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.test(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this browser")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.findCompression=function(e){for(var t in i)if(i.hasOwnProperty(t)&&i[t].magic===e)return i[t];return null},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n}},"9gar":function(e,t,n){"use strict";n.r(t),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return a}));var r=n("X2wA"),i=Object(r.b)((function(e,t){var n=function(){function e(e){if("number"==typeof e)return J.Uc.hh(e);if(null==e)return null;if(null!=ne[e])return J.Uc.hh(ne[e]);throw Error("Unrecognised Unit Type")}function t(e){if("number"==typeof e)return J.Uc.hh(e);if(null==e)return null;if(null!=re[e])return J.Uc.hh(re[e]);throw Error("Unrecognised Unit Type")}function n(e){if(e)switch(e){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function r(e,t,n,r){if(null==n||n.u())return null;switch(n.F()){case J.In.Point:return e.exportPoint(t,n,r);case J.In.Polygon:return e.exportPolygon(t,n,r);case J.In.Polyline:return e.exportPolyline(t,n,r);case J.In.MultiPoint:return e.exportMultipoint(t,n,r);case J.In.Envelope:return e.exportExtent(t,n,r)}return null}function i(e,t,n,r){if(n.F()!==J.In.Point)throw Error("Geometry not Point");return e.exportPoint(t,n,r)}function a(e,t,n){return e.convertToGEGeometry(t,n)}function o(e){var t=e.wkid;e=e.wkt;var n=ie.get(t||e);return null==n&&(-1!==t&&null!=t?(n=J.je.create(t),ie.set(t,n)):e&&(n=J.je.AQ(e),ie.set(e,n))),n}function s(e){var t;if(null==e)return null;var n=o(e);return e=n.Ld(),n=n.co(),(t={}).tolerance=n,t.unitType=null==e?-1:e.od,t.unitID=null==e?-1:e.xc(),t.unitBaseFactor=null==e?0:e.gi,t.unitSquareDerivative=null==e?0:J.Uc.MG(e).xc(),t}function u(e,t,n,i){return null==n?null:(n=J.bc.clip(a(e,ae,n),a(e,ae,i),o(t)),r(e,ae,n,t))}function c(e,t,n,i){n=J.bc.jl(a(e,ae,n),a(e,ae,i),o(t)),i=[];for(var s=0;s<n.length;s++)i.push(r(e,ae,n[s],t));return i}function l(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.contains(a(e,ae,n),a(e,ae,r),o(t))}function h(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.MQ(a(e,ae,n),a(e,ae,r),o(t))}function f(t,n,r,i,s){if(null==r||null==i)throw Error("Illegal Argument Exception");return J.bc.vb(a(t,ae,r),a(t,ae,i),o(n),e(s))}function p(e,t,n,r){return!(null==n&&null!=r||null==r&&null!=n)&&J.bc.Ib(a(e,ae,n),a(e,ae,r),o(t))}function d(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.mU(a(e,ae,n),a(e,ae,r),o(t))}function v(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.touches(a(e,ae,n),a(e,ae,r),o(t))}function y(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.XZ(a(e,ae,n),a(e,ae,r),o(t))}function b(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.dR(a(e,ae,n),a(e,ae,r),o(t))}function g(e,t,n,r){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.WV(a(e,ae,n),a(e,ae,r),o(t))}function m(e,t,n,r,i){if(null==n||null==r)throw Error("Illegal Argument Exception");return J.bc.hC(a(e,ae,n),a(e,ae,r),o(t),i)}function w(e,t,n){if(null==n)throw Error("Illegal Argument Exception");return J.bc.AU(a(e,ae,n),o(t))}function O(e,t,n){if(null==n)throw Error("Illegal Argument Exception");return n=J.bc.MC(a(e,ae,n),o(t)),r(e,ae,n,t)}function j(e,t,n,i){if(void 0===i&&(i=!1),null==n)throw Error("Illegal Argument Exception");if(Array.isArray(n)){var s=i,u=[];for(i=0;i<n.length;i++)u.push(a(e,ae,n[i]));for(n=J.bc.tQ(u,s),s=Array(n.length),i=0;i<n.length;i++)s[i]=r(e,ae,n[i],t);return s}return i=J.bc.sQ(a(e,ae,n),o(t)),r(e,ae,i,t)}function _(e,t,n,i){if(null==n||null==i)throw Error("Illegal Argument Exception");if(Array.isArray(n)){for(var s=[],u=0;u<n.length;u++)s.push(a(e,ae,n[u]));for(n=J.bc.aR(s,a(e,ae,i),o(t)),i=Array(n.length),u=0;u<n.length;u++)i[u]=r(e,ae,n[u],t);return i}return u=J.bc.tm(a(e,ae,n),a(e,ae,i),o(t)),r(e,ae,u,t)}function x(e,t,n,i){if(null==n||null==i)throw Error("Illegal Argument Exception");if(Array.isArray(n)){for(var s=[],u=0;u<n.length;u++)s.push(a(e,ae,n[u]));for(n=J.bc.AZ(s,a(e,ae,i),o(t)),i=Array(n.length),u=0;u<n.length;u++)i[u]=r(e,ae,n[u],t);return i}return u=J.bc.tp(a(e,ae,n),a(e,ae,i),o(t)),r(e,ae,u,t)}function k(e,t,n,i){if(null==n||null==i)throw Error("Illegal Argument Exception");if(Array.isArray(n)){for(var s=[],u=0;u<n.length;u++)s.push(a(e,ae,n[u]));for(n=J.bc.kU(s,a(e,ae,i),o(t)),i=Array(n.length),u=0;u<n.length;u++)i[u]=r(e,ae,n[u],t);return i}return u=J.bc.Ia(a(e,ae,n),a(e,ae,i),o(t)),r(e,ae,u,t)}function S(e,t,n,i){if(null==n)return null;var s=[];if(Array.isArray(n)){if(0===n.length)return null;for(i=0;i<n.length;i++)s.push(a(e,ae,n[i]))}else s.push(a(e,ae,n)),null!=i&&s.push(a(e,ae,i));return r(e,ae,J.bc.SZ(s,o(t)),t)}function M(t,n,i,s,u,c,l,h){var f=0;if(null!=c)switch(c){case"round":f=0;break;case"bevel":f=1;break;case"miter":f=2;break;case"square":f=3}if(Array.isArray(i)){if(null==i)t=null;else if(0===i.length)t=[];else{var p=[];for(c=0;c<i.length;c++)p.push(a(t,ae,i[c]));for(i=J.bc.UV(p,o(n),s,f,l,h,e(u)),s=Array(i.length),c=0;c<i.length;c++)s[c]=r(t,ae,i[c],n);t=s}return t}return i=J.bc.offset(a(t,ae,i),o(n),s,f,l,h,e(u)),r(t,ae,i,n)}function I(t,n,i,s,u,c){if(void 0===c&&(c=!1),Array.isArray(i)){if(!Array.isArray(s)){for(var l=[],h=0;h<i.length;h++)l.push(s);s=l}if(s.length!=i.length){if(0==s.length)throw Error("Illegal Argument Exception");l=[];var f=0;for(h=0;h<i.length;h++)void 0===s[h]?l.push(f):(l.push(s[h]),f=s[h]);s=l}return A(t,n,i,s,u,!1,c,"geodesic",NaN)}return i=J.bc.buffer(a(t,ae,i),o(n),s,e(u),!1,0,NaN),r(t,ae,i,n)}function T(t,i,s,u,c,l,h,f){if(Array.isArray(s)){if(!Array.isArray(u)){for(var p=[],d=0;d<s.length;d++)p.push(u);u=p}if(u.length!==s.length){if(0===u.length)throw Error("Illegal Argument Exception");p=[];var v=0;for(d=0;d<s.length;d++)void 0===u[d]?p.push(v):(p.push(u[d]),v=u[d]);u=p}return A(t,i,s,u,c,!0,l,h,f)}return void 0===h&&(h=NaN),s=J.bc.buffer(a(t,ae,s),o(i),u,e(c),!0,n(l),h),r(t,ae,s,i)}function A(t,i,s,u,c,l,h,f,p){if(void 0===p&&(p=NaN),null==s)return null;if(0===s.length)return[];for(var d=[],v=0;v<s.length;v++)d.push(a(t,ae,s[v]));for(s=J.bc.XO(d,o(i),u,e(c),l,h,n(f),p),u=Array(s.length),v=0;v<s.length;v++)u[v]=r(t,ae,s[v],i);return u}function C(e,t,n,r,o){var s;return void 0===o&&(o=!0),n=J.bc.Xz(a(e,ae,n),a(e,ae,r),o),(s={}).coordinate=i(e,ae,n.Lz(),t),s.distance=n.Oz(),s.isRightSide=n.AA(),s.vertexIndex=n.Ua(),s.isEmpty=n.u(),s}function E(e,t,n,r){var o;return n=J.bc.Yz(a(e,ae,n),a(e,ae,r)),(o={}).coordinate=i(e,ae,n.Lz(),t),o.distance=n.Oz(),o.isRightSide=n.AA(),o.vertexIndex=n.Ua(),o.isEmpty=n.u(),o}function P(e,t,n,r,o,s){var u;for(n=J.bc.Zz(a(e,ae,n),a(e,ae,r),o,s),r=[],o=0;o<n.length;o++)!1===n[o].u()&&r.push(((u={}).coordinate=i(e,ae,n[o].Lz(),t),u.distance=n[o].Oz(),u.isRightSide=n[o].AA(),u.vertexIndex=n[o].Ua(),u.isEmpty=n[o].u(),u));return r}function R(t,n,i,s,u,c){return i=J.bc.bS(a(t,ae,i),o(n),s,u,e(c)),r(t,ae,i,n)}function D(t,n,i,s,u){return i=J.bc.rs(a(t,ae,i),o(n),s,e(u)),r(t,ae,i,n)}function L(t,n,i,s,u,c){return void 0===c&&(c=0),i=J.bc.Bz(a(t,ae,i),o(n),s,e(u),c),r(t,ae,i,n)}function N(e,n,r,i){if(null==r)throw Error("Illegal Argument Exception");return J.bc.bW(a(e,ae,r),o(n),t(i))}function F(t,n,r,i){if(null==r)throw Error("Illegal Argument Exception");return J.bc.cW(a(t,ae,r),o(n),e(i))}function z(e,r,i,s,u){if(null==i)throw Error("Illegal Argument Exception");return J.bc.hS(a(e,ae,i),o(r),t(s),n(u))}function V(t,r,i,s,u){if(null==i)throw Error("Illegal Argument Exception");return J.bc.lS(a(t,ae,i),o(r),e(s),n(u))}function G(e){J.VM.bind(e)}function U(e,t,n,r,i){var s=null,u=null;if(r){if(!i)throw J.f.I("AOI missing Spatial Reference");s=a(e,ae,r),u=o(i).mh()}return null!==(e=J.Nu.nT(o(t).mh(),o(n).mh(),s,u))?e:null}function B(e,t,n,r,i){var s=null,u=null;if(r){if(!i)throw J.f.I("AOI missing Spatial Reference");s=a(e,ae,r),u=o(i).mh()}return J.Nu.oT(o(t).mh(),o(n).mh(),s,u)}function q(e,t,n,r,i){if(void 0===i&&(i=null),!1===this.z_)throw Error("Projection Engine must be enabled using enableProjection");if(0===t.length)return[];if(i){var a=i.getCachedGeTransformation(n,r);if(!a)e:{if(a=i,i=null,a){var s=a.getGTListEntry();if(null!==s){i=new J.hy(null);for(var u=0,c=s.steps;u<c.length;u++){var l=new J.Hn((s=c[u]).geogtran);s.isInverse&&l.Xs(),i.add(l)}i=J.Ur.os(o(n).mh(),o(r).mh(),i),a.assignCachedGe(n,r,i),a=i;break e}}if(null===i&&a&&a.steps&&0<a.steps.length){for(i=new J.hy(null),u=0,c=a.steps;u<c.length;u++)-1!=(s=c[u]).wkid&&null!=s.wkid?i.add(J.Hn.create(s.wkid,s.isInverse)):i.add(J.Hn.LF(s.wkt,s.isInverse));i=J.Ur.os(o(n).mh(),o(r).mh(),i),a.assignCachedGe(n,r,i),a=i}else a=J.Ur.os(o(n).mh(),o(r).mh(),i)}for(n=[],s=0;s<t.length;s++)n.push(H(e,i=t[s],r,a))}else for(a=J.Ur.os(o(n).mh(),o(r).mh(),null),n=[],s=0;s<t.length;s++)n.push(H(e,i=t[s],r,a));return n}function H(e,t,n,i){return t=J.bc.$g(a(e,ae,t),i),r(e,ae,t,n)}var W,J,Z,K,Y=this&&this.__extends||function(){function e(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)}return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){var t;(t=e.In||(e.In={}))[t.Unknown=0]="Unknown",t[t.Point=33]="Point",t[t.Line=322]="Line",t[t.Envelope=197]="Envelope",t[t.MultiPoint=550]="MultiPoint",t[t.Polyline=1607]="Polyline",t[t.Polygon=1736]="Polygon",function(e){e[e.enumMild=0]="enumMild",e[e.enumMedium=1]="enumMedium",e[e.enumHot=2]="enumHot"}(e.gM||(e.gM={}));var n=function(){function t(){this.description=null,this.FB=0}return t.prototype.F=function(){return 0},t.prototype.pb=function(){return-1},t.prototype.rg=function(e){this.vc(),e!=this.description&&this.Ln(e)},t.prototype.Ln=function(){},t.prototype.Tl=function(t){this.vc(),t!=this.description&&(t=e.ke.SS(this.description,t))!=this.description&&this.Ln(t)},t.prototype.hasAttribute=function(e){return this.description.hasAttribute(e)},t.prototype.le=function(t){this.vc(),this.description.hasAttribute(t)||(t=e.ke.RS(this.description,t),this.Ln(t))},t.prototype.Qf=function(){return null},t.prototype.qn=function(){},t.prototype.s=function(){},t.prototype.ip=function(){},t.prototype.Zb=function(e){this.s(e)},t.prototype.u=function(){return!0},t.prototype.Ka=function(){},t.prototype.Qc=function(){},t.prototype.Ea=function(){return null},t.prototype.copyTo=function(){},t.prototype.Pe=function(){return 0},t.prototype.Pb=function(){return 0},t.prototype.VG=function(){return this.hasAttribute(1)},t.Se=function(e){return 1+((192&e)>>6)>>1},t.lo=function(e){return 0!=(32&e)},t.m0=function(e){return 0!=(64&e)},t.nU=function(e){return 0!=(128&e)},t.Ic=function(e){return 0!=(256&e)},t.Rg=function(e){return 0!=(512&e)},t.Bc=function(e){return 0!=(1024&e)},t.prototype.Cf=function(){var e=this.Ea();return this.copyTo(e),e},t.prototype.sg=function(){return null},t.$d=function(e){var t=e.Ea();return e.copyTo(t),t},t.prototype.vc=function(){0<=this.FB&&(this.FB+=2147483649)},t.fy=function(n){var r=n.F();if(t.Rg(r))return n.D();if(n.u())return 0;if(197==r)return 4;if(33==r)return 1;if(t.Ic(r))return 2;throw e.f.Y("missing type")},t}();e.R=n}(J||(J={})),Z=J||(J={}),K=function(){function e(){this.y=this.x=0}return e.construct=function(t,n){var r=new e;return r.x=t,r.y=n,r},e.gl=function(t){var n=new e;return n.x=t.x,n.y=t.y,n},e.prototype.ka=function(e,t){this.x=e,this.y=t},e.prototype.K=function(e){this.x=e.x,this.y=e.y},e.prototype.wq=function(e,t){return this.x===e&&this.y===t},e.prototype.xA=function(e){return 2220446049250313e-31>=Math.abs(this.x-e.x)&&2220446049250313e-31>=Math.abs(this.y-e.y)},e.prototype.qb=function(e){return this.x===e.x&&this.y===e.y},e.prototype.Ib=function(t){return t==this||t instanceof e&&this.x==t.x&&this.y==t.y},e.prototype.sub=function(e){this.x-=e.x,this.y-=e.y},e.prototype.tc=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.add=function(e,t){void 0!==t?(this.x=e.x+t.x,this.y=e.y+t.y):(this.x+=e.x,this.y+=e.y)},e.prototype.lr=function(){this.x=-this.x,this.y=-this.y},e.prototype.Vt=function(e){this.x=-e.x,this.y=-e.y},e.prototype.hU=function(e,t,n){this.x=e.x*(1-n)+t.x*n,this.y=e.y*(1-n)+t.y*n},e.prototype.nu=function(e,t){this.x=this.x*e+t.x,this.y=this.y*e+t.y},e.prototype.mY=function(e,t,n){this.x=t.x*e+n.x,this.y=t.y*e+n.y},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.compare=function(e){return this.y<e.y?-1:this.y>e.y?1:this.x<e.x?-1:this.x>e.x?1:0},e.prototype.normalize=function(){var e=this.length();0==e&&(this.x=1,this.y=0),this.x/=e,this.y/=e},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.En=function(){return this.x*this.x+this.y*this.y},e.vb=function(e,t){return Math.sqrt(this.oc(e,t))},e.uz=function(e,t,n,r){return e-=n,t-=r,Math.sqrt(e*e+t*t)},e.prototype.Vh=function(e){return this.x*e.x+this.y*e.y},e.prototype.PD=function(e){return Math.abs(this.x*e.x)+Math.abs(this.y*e.y)},e.prototype.Di=function(e){return this.x*e.y-this.y*e.x},e.prototype.mu=function(e,t){var n=-this.x*t+this.y*e;this.x=this.x*e+this.y*t,this.y=n},e.prototype.pw=function(){var e=this.x;this.x=-this.y,this.y=e},e.prototype.yH=function(e){this.x=-e.y,this.y=e.x},e.prototype.ur=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.iE=function(){this.y=this.x=NaN},e.prototype.Ey=function(){return isNaN(this.x)},e.prototype.Xu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3},e.Wr=function(e,t){var n=e.Xu(),r=t.Xu();return r==n?0>(e=e.Di(t))?1:0<e?-1:0:n<r?-1:1},e.I_=function(t,n){return e.Wr(t,n)},e.oc=function(e,t){var n=e.x-t.x;return n*n+(e=e.y-t.y)*e},e.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},e.prototype.Tc=function(){this.y=this.x=NaN},e.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},e.prototype.ZN=function(){return this.Ey()?NaN:Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y)},e.prototype.offset=function(t,n){var r=e.vb(t,n),i=e.construct(this.x,this.y);if(0==r)return e.vb(i,t);var a=new e;return a.K(n),a.sub(t),i.sub(t),i.Di(a)/r},e.fp=function(e,t,n){var r=new Z.Wb;r.set(t.x),r.sub(e.x);var i=new Z.Wb;i.set(n.y),i.sub(e.y);var a=new Z.Wb;a.set(t.y),a.sub(e.y);var o=new Z.Wb;return o.set(n.x),o.sub(e.x),r.Gg(i),a.Gg(o),r.sub(a),r.Ys()?(r=new Z.xp(t.x),i=new Z.xp(e.x),a=new Z.xp(e.y),r=r.St(i),e=(e=new Z.xp(n.y)).St(a),t=(t=new Z.xp(t.y)).St(a),n=(n=new Z.xp(n.x)).St(i),r=r.Hr(e),t=t.Hr(n),(r=r.Hr(t)).JU()?-1:r.AT()?1:0):0>(n=r.value())?-1:0<n?1:0},e.prototype.fc=function(){return Z.L.Aj(Z.L.Aj())},e}(),Z.b=K,function(e){var t=function(){function e(e){this.jz=this.wu=0,this.tZ=e}return e.prototype.reset=function(){this.jz=this.wu=0},e.prototype.add=function(e){var t=this.wu+(e-=this.jz);this.jz=t-this.wu-e,this.wu=t},e.prototype.sub=function(e){this.add(-e)},e.prototype.Dm=function(){return this.tZ+this.wu},e}();e.ky=t,e.Tb=function(){function e(){}return e.hl=function(e,t){return 0<=t?Math.abs(e):-Math.abs(e)},e.sign=function(e){return 0>e?-1:0<e?1:0},e.ZL=function(e){return e-360*Math.floor(e/360)},e.round=function(e){return Math.floor(e+.5)},e.Wx=function(e){return e*e},e.Aq=function(e,t,n){return.5>=n?e+(t-e)*n:t-(t-e)*(1-n)},e.AH=function(e,t,n,r){.5>=n?(r.x=e.x+(t.x-e.x)*n,r.y=e.y+(t.y-e.y)*n):(r.x=t.x-(t.x-e.x)*(1-n),r.y=t.y-(t.y-e.y)*(1-n))},e.HU=function(e,t,n,r,i,a){.5>=i?(a.x=e+(n-e)*i,a.y=t+(r-t)*i):(a.x=n-(n-e)*(1-i),a.y=r-(r-t)*(1-i))},e}()}(J||(J={})),function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.ra=0,e.na=0,e.pa=0,e.ma=0,e.ia=null,e}return Y(n,t),n.prototype.ac=function(){return e.b.construct(this.ra,this.na)},n.prototype.qq=function(e){e.x=this.ra,e.y=this.na},n.prototype.Fc=function(e){this.pm(0,e)},n.prototype.GC=function(t,n){this.pm(0,e.b.construct(t,n))},n.prototype.jp=function(e){this.SD(0,e)},n.prototype.setStart=function(e){this.fE(0,e)},n.prototype.Ks=function(e,t){return this.Pd(0,e,t)},n.prototype.Qx=function(e,t,n){this.Nn(0,e,t,n)},n.prototype.wc=function(){return e.b.construct(this.pa,this.ma)},n.prototype.vs=function(e){e.x=this.pa,e.y=this.ma},n.prototype.Sc=function(e){this.pm(1,e)},n.prototype.am=function(t,n){this.pm(1,e.b.construct(t,n))},n.prototype.hp=function(e){this.SD(1,e)},n.prototype.setEnd=function(e){this.fE(1,e)},n.prototype.us=function(e,t){return this.Pd(1,e,t)},n.prototype.Hx=function(e,t,n){this.Nn(1,e,t,n)},n.prototype.pb=function(){return 1},n.prototype.u=function(){return this.Ac()},n.prototype.Ka=function(){},n.prototype.Pe=function(){return 0},n.prototype.Ia=function(e,t,n,r,i){return this.SN(e,t,n,r,i)},n.prototype.isIntersecting=function(e,t){return 0!=this.Zr(e,t,!1)},n.prototype.Zs=function(e,t){return this.Yu(e,t,!1)},n.prototype.Yu=function(){return null},n.prototype.Ac=function(){return!1},n.prototype.Hy=function(t){if(this.vc(),null==this.ia&&0<t)this.ia=e.L.Xf(2*t);else if(null!=this.ia&&this.ia.length<2*t){for(var n=this.ia.slice(0),r=this.ia.length;r<2*t;r++)n[r]=0;this.ia=n}},n.nN=function(e,t,n){if(0<n)var r=0;for(var i=0;i<n;i++)t[0+r]=e[0],r++},n.prototype.pm=function(e,t){0!=e?(this.pa=t.x,this.ma=t.y):(this.ra=t.x,this.na=t.y)},n.prototype.Ln=function(t){if(null!=this.ia){for(var r=e.ke.ox(t,this.description),i=[],a=n.Mg(this.description,0),o=n.Mg(this.description,1),s=n.Mg(t,0),u=n.Mg(t,1),c=0,l=1,h=t.Ca;l<h;l++){var f=t.kd(l),p=e.oa.Sa(f);if(-1==r[l]){var d=e.oa.me(f);for(f=0;f<p;f++)i[s+c]=d,i[u+c]=d,c++}else for(d=this.description.dk(r[l])-2,f=0;f<p;f++)i[s+c]=this.ia[a+d],i[u+c]=this.ia[o+d],c++,d++}this.ia=i}this.description=t},n.prototype.SD=function(t,n){if(this.Ac())throw e.f.Y("empty geometry");n.rg(this.description),n.Ac()&&n.Mp();for(var r=0;r<this.description.Ca;r++)for(var i=this.description.Jd(r),a=0,o=e.oa.Sa(i);a<o;a++){var s=this.Pd(t,i,a);n.setAttribute(i,a,s)}},n.prototype.fE=function(t,n){if(this.vc(),n.Ac())throw e.f.Y("empty geometry");for(var r=n.description,i=0,a=r.Ca;i<a;i++)for(var o=r.Jd(i),s=e.oa.Sa(o),u=0;u<s;u++){var c=n.Rc(o,u);this.Nn(t,o,u,c)}},n.prototype.Pd=function(t,r,i){if(this.Ac())throw e.f.Y("This operation was performed on an Empty Geometry.");if(0==r)return 0!=t?0!=i?this.ma:this.pa:0!=i?this.na:this.ra;if(i>=e.oa.Sa(r))throw e.f.Gd();var a=this.description.Yf(r);return 0<=a?(null!=this.ia&&this.Hy(this.description.Ge.length-2),this.ia[n.Mg(this.description,t)+this.description.dk(a)-2+i]):e.oa.me(r)},n.prototype.Nn=function(t,r,i,a){if(this.vc(),i>=e.oa.Sa(r))throw e.f.Gd();var o=this.description.Yf(r);0>o&&(this.le(r),o=this.description.Yf(r)),0==r?0!=t?0!=i?this.ma=a:this.pa=a:0!=i?this.na=a:this.ra=a:(null==this.ia&&this.Hy(this.description.Ge.length-2),this.ia[n.Mg(this.description,t)+this.description.dk(o)-2+i]=a)},n.prototype.copyTo=function(t){if(t.F()!=this.F())throw e.f.I();t.description=this.description,t.Hy(this.description.Ge.length-2),n.nN(this.ia,t.ia,2*(this.description.Ge.length-2)),t.ra=this.ra,t.na=this.na,t.pa=this.pa,t.ma=this.ma,t.vc(),this.Hp(t)},n.prototype.Qf=function(t,n){var r=new e.uc;return this.Ac()?(r.Ka(),r):(r.fa=this.Pd(0,t,n),r.ja=r.fa,r.Sk(this.Pd(1,t,n)),r)},n.prototype.QJ=function(e){this.Ac()?e.Ka():(e.fa=this.Pd(0,0,0),e.ja=e.fa,e.Sk(this.Pd(1,0,0)))},n.prototype.zx=function(t,n){n.rg(this.description),n.nb(this.cc(t));for(var r=1,i=this.description.Ca;r<i;r++)for(var a=this.description.Jd(r),o=e.oa.Sa(a),s=0;s<o;s++){var u=this.Rc(t,a,s);n.setAttribute(a,s,u)}},n.prototype.NN=function(e){if(this.description!=e.description||this.ra!=e.ra||this.pa!=e.pa||this.na!=e.na||this.ma!=e.ma)return!1;for(var t=0;t<2*(this.description.Ge.length-2);t++)if(this.ia[t]!=e.ia[t])return!1;return!0},n.prototype.nH=function(){return this.ra==this.pa&&this.na==this.ma},n.prototype.reverse=function(){var t=this.ra;this.ra=this.pa,this.pa=t,t=this.na,this.na=this.ma,this.ma=t,t=1;for(var n=this.description.Ca;t<n;t++)for(var r=this.description.kd(t),i=0,a=e.oa.Sa(r);i<a;i++){var o=this.Pd(0,r,i),s=this.Pd(1,r,i);this.Nn(0,r,i,s),this.Nn(1,r,i,o)}},n.prototype.Zr=function(t,n,r){var i=t.F();switch(this.F()){case 322:if(322==i)return e.zb.WN(this,t,n,r);throw e.f.za();default:throw e.f.za()}},n.prototype.SN=function(t,n,r,i,a){var o=t.F();switch(this.F()){case 322:if(322==o)return e.zb.Dy(this,t,n,r,i,a);throw e.f.za();default:throw e.f.za()}},n.prototype.yy=function(){return null},n.Mg=function(e,t){return t*(e.Ge.length-2)},n.prototype.cc=function(t,n){if(void 0===n)return n=new e.b,this.cc(t,n),n;e.Tb.HU(this.ra,this.na,this.pa,this.ma,t,n)},n.prototype.ae=function(){return null},n.prototype.QG=function(){return null},n.prototype.uq=function(){return null},n.prototype.Qg=function(){return null},n.prototype.jo=function(){return null},n.prototype.qg=function(){return null},n.prototype.zy=function(e,t){return void 0!==t?this.by(t)-this.by(e):this.by(e)},n.prototype.Hp=function(){},n.prototype.jl=function(){return null},n.prototype.jh=function(){},n.prototype.Rc=function(){return null},n.prototype.Te=function(){return null},n.prototype.by=function(){return null},n.prototype.zH=function(){return null},n.prototype.vb=function(e,t){if(!t&&0!=this.Zr(e,0,!1))return 0;t=17976931348623157e292;var n=this.ac(),r=e.ae(n,!1);return n.sub(e.cc(r)),(n=n.length())<t&&(t=n),n=this.wc(),r=e.ae(n,!1),n.sub(e.cc(r)),(n=n.length())<t&&(t=n),n=e.ac(),r=this.ae(n,!1),n.sub(this.cc(r)),(n=n.length())<t&&(t=n),n=e.wc(),r=this.ae(n,!1),n.sub(this.cc(r)),(n=n.length())<t&&(t=n),t},n.prototype.sg=function(){return e.yi.qm(this,null)},n}(e.R);e.zD=t}(J||(J={})),new J.b,function(e){var t;(t=e.iM||(e.iM={}))[t.Unknown=-1]="Unknown",t[t.Not=0]="Not",t[t.Weak=1]="Weak",t[t.Strong=2]="Strong",function(e){e[e.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",e[e.IsWeakSimple=2]="IsWeakSimple",e[e.IsStrongSimple=4]="IsStrongSimple",e[e.DirtyOGCFlags=8]="DirtyOGCFlags",e[e.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",e[e.DirtyExactIntervals=64]="DirtyExactIntervals",e[e.DirtyLooseIntervals=128]="DirtyLooseIntervals",e[e.DirtyIntervals=192]="DirtyIntervals",e[e.DirtyIsEnvelope=256]="DirtyIsEnvelope",e[e.DirtyLength2D=512]="DirtyLength2D",e[e.DirtyRingAreas2D=1024]="DirtyRingAreas2D",e[e.DirtyCoordinates=1993]="DirtyCoordinates",e[e.DirtyAllInternal=65535]="DirtyAllInternal",e[e.DirtyAll=16777215]="DirtyAll"}(e.VL||(e.VL={}));var n=function(t){function n(){var e=t.call(this)||this;return e.Sm=65535,e.sa=0,e.Vg=-1,e.ib=null,e}return Y(n,t),n.prototype.Hp=function(){},n.prototype.Gy=function(){},n.prototype.Oy=function(){},n.prototype.D=function(){return this.sa},n.prototype.u=function(){return this.Ac()},n.prototype.Ac=function(){return 0==this.sa},n.prototype.ek=function(e){return 0!=(this.Sm&e)},n.prototype.Vf=function(e,t){this.Sm=t?this.Sm|e:this.Sm&~e},n.prototype.rc=function(){this.ek(32)&&this.lO()},n.prototype.yu=function(){if(this.Ac())throw e.f.Y("This operation was performed on an Empty Geometry.")},n.prototype.ne=function(t,n){if(0>t||t>=this.sa)throw e.f.Y("index out of bounds");this.rc(),n.rg(this.description),n.u()&&n.Mp();for(var r=0;r<this.description.Ca;r++)for(var i=this.description.Jd(r),a=0,o=e.oa.Sa(i);a<o;a++){var s=this.va[r].Ig(o*t+a);n.setAttribute(i,a,s)}},n.prototype.ru=function(t,n){this.rc();for(var r=n.description,i=0;i<r.Ca;i++)for(var a=r.Jd(i),o=e.oa.Sa(a),s=0;s<o;s++){var u=n.Rc(a,s);this.setAttribute(a,t,s,u)}},n.prototype.w=function(t,n){if(0>t||t>=this.D())throw e.f.Gd();this.rc(),this.va[0].mc(2*t,n)},n.prototype.xa=function(t){var n=new e.b;return this.w(t,n),n},n.prototype.Hc=function(e,t){this.va[0].mc(2*e,t)},n.prototype.nb=function(t,n,r){if(0>t||t>=this.sa)throw e.f.Gd();this.rc();var i=this.va[0];void 0!==r?(i.write(2*t,n),i.write(2*t+1,r)):i.Bu(2*t,n),this.Oc(1993)},n.prototype.kA=function(){if(void 0>=this.D())throw e.f.Gd();this.rc();var t=this.va[0],n=new e.Id;return n.x=t.read(NaN),n.y=t.read(NaN),n.z=this.hasAttribute(1)?this.va[1].Ig(void 0):e.oa.me(1),n},n.prototype.LC=function(t){if(0>t||t>=this.D())throw e.f.Gd();this.le(1),this.rc(),this.Oc(1993);var n=this.va[0];n.write(2*t,(void 0).x),n.write(2*t+1,(void 0).y),this.va[1].Mr(t,(void 0).z)},n.prototype.Rc=function(t,n,r){if(0>n||n>=this.sa)throw e.f.Gd();var i=e.oa.Sa(t);if(r>=i)throw e.f.Gd();this.rc();var a=this.description.Yf(t);return 0<=a?this.va[a].Ig(n*i+r):e.oa.me(t)},n.prototype.lG=function(e,t){return this.Rc(e,t,void 0)},n.prototype.setAttribute=function(t,n,r,i){if(0>n||n>=this.sa)throw e.f.Gd();var a=e.oa.Sa(t);if(r>=a)throw e.f.Gd();this.le(t),this.rc(),t=this.description.Yf(t),this.Oc(1993),this.va[t].Mr(n*a+r,i)},n.prototype.Va=function(e){return this.yu(),this.le(e),this.rc(),this.va[this.description.Yf(e)]},n.prototype.yn=function(t,n){if(null!=n&&e.oa.sl(t)!=n.sl())throw e.f.I();this.le(t),t=this.description.Yf(t),null==this.va&&(this.va=e.Xc.gJ(this.description.Ca)),this.va[t]=n,this.Oc(16777215)},n.prototype.Ln=function(t){var n=null;if(null!=this.va){var r=e.ke.ox(t,this.description);n=[];for(var i=0,a=t.Ca;i<a;i++)-1!=r[i]&&(n[i]=this.va[r[i]])}this.description=t,this.va=n,this.Vg=-1,this.Oc(16777215)},n.prototype.mE=function(t){this.cv(!0),t instanceof e.g?this.X.s(t):this.X.ip(t)},n.prototype.kO=function(t){this.cv(!1),t instanceof e.g?this.X.s(t):this.X.ip(t)},n.prototype.qn=function(e){this.cv(!0),this.X.copyTo(e)},n.prototype.s=function(e){this.mE(e)},n.prototype.ip=function(e){this.mE(e)},n.prototype.Zb=function(e){this.kO(e)},n.prototype.Qf=function(t,n){var r=new e.uc;return this.Ac()?(r.Ka(),r):(this.cv(!0),this.X.Qf(t,n))},n.prototype.fc=function(){var t=this.description.fc();if(!this.Ac())for(var n=this.D(),r=0,i=this.description.Ca;r<i;r++)t=this.va[r].Un(t,0,n*e.oa.Sa(this.description.Jd(r)));return t},n.prototype.Ib=function(t){if(t==this)return!0;if(!(t instanceof n&&this.description.Ib(t.description))||this.Ac()!=t.Ac())return!1;if(this.Ac())return!0;var r=this.D();if(r!=t.D())return!1;for(var i=0;i<this.description.Ca;i++){var a=this.description.kd(i),o=this.Va(a),s=t.Va(a);if(!o.Ib(s,0,r*e.oa.Sa(a)))return!1}return!0},n.prototype.copyTo=function(t){if(t.F()!=this.F())throw e.f.I();this.ND(t)},n.prototype.ND=function(t){this.rc(),t.description=this.description,t.va=null;var n=this.description.Ca,r=null;if(null!=this.va){r=[];for(var i=0;i<n;i++)null!=this.va[i]&&(r[i]=this.va[i].qC(this.D()*e.oa.Sa(this.description.Jd(i))))}null!=this.X?(t.X=this.X.Ea(),this.X.copyTo(t.X)):t.X=null,t.sa=this.sa,t.Sm=this.Sm,t.va=r;try{this.Hp(t)}catch(a){throw t.Ka(),e.f.Mu()}},n.prototype.hE=function(){this.sa=0,this.Vg=-1,this.va=null,this.Oc(16777215)},n.prototype.Oc=function(e){16777215==e&&(this.Vg=-1,this.Gy()),this.Sm|=e,this.tN(),this.vc()},n.prototype.cv=function(t){if(this.rc(),this.ek(192))if(null==this.X?this.X=new e.Ih(this.description):this.X.rg(this.description),this.u())this.X.Ka();else{this.Ny(t);for(var n=1;n<this.description.Ca;n++)for(var r=this.description.Jd(n),i=e.oa.Sa(r),a=this.va[n],o=0;o<i;o++){var s=new e.uc;s.Ka();for(var u=0;u<this.sa;u++){var c=a.Ig(u*i+o);s.Nb(c)}this.X.setInterval(r,o,s)}t&&this.Vf(192,!1)}},n.prototype.Ny=function(){this.X.Ka();for(var t=this.va[0],n=new e.b,r=0;r<this.sa;r++)t.mc(2*r,n),this.X.Nb(n)},n.prototype.Tn=function(t){t.Ka();for(var n=this.va[0],r=new e.b,i=0;i<this.sa;i++)n.mc(2*i,r),t.Nb(r)},n.prototype.lO=function(){if(this.Vg<this.sa){null==this.va&&(this.va=e.Xc.gJ(this.description.Ca)),this.Vg=2147483647;for(var t=0;t<this.description.Ca;t++){var n=this.description.Jd(t);if(null!=this.va[t]){var r=e.oa.Sa(n),i=e.L.truncate(this.va[t].size/r);i<this.sa&&(i=e.L.truncate(this.Vg>this.sa+5?(5*this.sa+3)/4:this.sa),this.va[t].resize(i*r,e.oa.me(n))),i<this.Vg&&(this.Vg=i)}else this.va[t]=e.Xc.JF(n,this.sa),this.Vg=this.sa}}this.Oy(),this.Vf(32,!1)},n.prototype.bl=function(t){if(0>t)throw e.f.I();t!=this.sa&&(this.sa=t,this.Oc(65535))},n.prototype.rk=function(e){if(!this.ek(1)){if(!this.ek(2))return 0;if(this.iV>=e)return this.ek(8)?1:2}return-1},n.prototype.Jg=function(t,n){if(this.iV=n,-1==t)this.Vf(1,!0),this.Vf(8,!0);else if(this.Vf(1,!1),this.Vf(8,!0),0==t)this.Vf(2,!1),this.Vf(4,!1);else if(1==t)this.Vf(2,!0),this.Vf(4,!1);else{if(2!=t)throw e.f.Y("internal error.");this.Vf(2,!0),this.Vf(4,!0)}},n.prototype.tN=function(){null!=this.ib&&(this.ib=null)},n.prototype.VD=function(t,n,r,i){if(0>t||t>=this.sa)throw e.f.Y("index out of bounds");if(0>n||n>=this.sa)throw e.f.Y("index out of bounds");this.rc(),i.rg(this.description),i.u()&&i.Mp();for(var a=0;a<this.description.Ca;a++)for(var o=this.description.Jd(a),s=0,u=e.oa.Sa(o);s<u;s++){var c=this.va[a].Ig(u*t+s),l=this.va[a].Ig(u*n+s);i.setAttribute(o,s,e.Tb.Aq(c,l,r))}},n.prototype.Yr=function(e,t){var n=this.va[0].i,r=n[2*e]-n[2*t];return e=n[2*e+1]-n[2*t+1],Math.sqrt(r*r+e*e)},n.prototype.Hh=function(t,n){if(0>t||t>=this.sa)throw e.f.Gd();if(n.u())throw e.f.I();this.rc();for(var r=n.description,i=0;i<r.Ca;i++)for(var a=r.kd(i),o=e.oa.Sa(a),s=0;s<o;s++){var u=n.Rc(a,s);this.setAttribute(a,t,s,u)}},n.prototype.Tu=function(){return null},n.prototype.lj=function(){return null},n}(e.R);e.ly=n}(J||(J={})),function(e){var t=function(){function t(){this.lb=this.so=null,this.fn=124234251,this.yw=!0,this.Ve=-1,this.lb=new e.ad(7),this.so=null}return t.prototype.kp=function(e){this.so=e},t.prototype.bR=function(){this.yw=!1},t.prototype.Le=function(e){this.lb.Le(e)},t.prototype.qs=function(e){var t=this.lb.Ke();return this.VY(t),this.YY(e,t),t},t.prototype.XQ=function(e){this.lb.jd(e)},t.prototype.addElement=function(e,t){return-1==t&&(-1==this.Ve&&(this.Ve=this.qs(-1)),t=this.Ve),this.rE(e,0,t)},t.prototype.wE=function(e){return-1==this.Ve&&(this.Ve=this.qs(-1)),this.rE(e,1,this.Ve)},t.prototype.Qn=function(e){-1==this.Ve&&(this.Ve=this.qs(-1));var t=this.Ve,n=this.lb.i;if(-1==t||-1==n[7*t])return e=this.lb.Vl([-1,-1,-1,e,this.nl(),-1,-1]),(n=this.lb.i)[7*t]=e,this.Pp(-1,e,t,n),e;var r=-1==t?-1:n[7*t+2];return e=this.lb.Vl([-1,-1,r,e,this.nl(),-1,-1]),(n=this.lb.i)[7*r+1]=e,this.Uy(e,n),-1===n[7*e+2]&&(n[7*t]=e),this.Pp(-1,e,t,n),e},t.prototype.fv=function(t,n,r,i){var a=-1;-1==a&&(-1==this.Ve&&(this.Ve=this.qs(-1)),a=this.Ve);var o=this.lb.i;if(-1==a||-1==o[7*a])return r=this.lb.Vl([-1,-1,-1,r,this.nl(),-1,-1]),(o=this.lb.i)[7*a]=r,this.Pp(-1,r,a,o),r;if(i){i=-1!=n?this.so.compare(this,r,n):-1;var s=-1!=t?this.so.compare(this,r,t):1}else i=-1,s=1;if(0==i||0==s)return o[7*a+3]=0==i?n:t,-1;for((-1!=n&&-1!=t?this.fn>e.L.MB(this.fn)>>1:-1!=n)?t=n:i=s,n=!0;;){if(0>i){if(-1==(s=o[7*t])){i=t,r=this.lb.Vl([-1,-1,t,r,this.nl(),-1,-1]),(o=this.lb.i)[7*t]=r;break}t=s}else{if(-1==(s=o[7*t+1])){i=o[7*t+6],r=this.lb.Vl([-1,-1,t,r,this.nl(),-1,-1]),(o=this.lb.i)[7*t+1]=r;break}t=s}n&&(i*=-1,n=!1)}return this.Uy(r,o),-1===o[7*r+2]&&(o[7*a]=r),this.Pp(i,r,a,o),r},t.prototype.rG=function(){return this.wS(this.Ve)},t.prototype.zd=function(e,t){t=-1==t?this.Ve:t,this.yw?this.WQ(e,t):this.RZ(e,t)},t.prototype.search=function(e,t){for(t=this.aw(t);-1!=t;){var n=this.so.compare(this,e,t);if(0==n)return t;t=0>n?this.rl(t):this.pq(t)}return-1},t.prototype.nY=function(e){for(var t=this.aw(-1),n=-1;-1!=t;){var r=e.compare(this,t);if(0==r)return t;0>r?t=this.rl(t):(n=t,t=this.pq(t))}return n},t.prototype.yK=function(e){for(var t=this.aw(-1),n=-1;-1!=t;){var r=e.compare(this,t);if(0==r)return t;0>r?(n=t,t=this.rl(t)):t=this.pq(t)}return n},t.prototype.ga=function(e){return this.lb.S(e,3)},t.prototype.rl=function(e){return this.lb.S(e,0)},t.prototype.pq=function(e){return this.lb.S(e,1)},t.prototype.getParent=function(e){return this.lb.S(e,2)},t.prototype.hb=function(e){return this.lb.S(e,6)},t.prototype.Be=function(e){return this.lb.S(e,5)},t.prototype.sc=function(e){return this.ql(-1==e?this.Ve:e)},t.prototype.Gc=function(e){return this.Fs(-1==e?this.Ve:e)},t.prototype.qT=function(e){return this.NG(-1==e?this.Ve:e)},t.prototype.Tj=function(e,t){this.xC(e,t)},t.prototype.aw=function(e){return this.JG(-1==e?this.Ve:e)},t.prototype.clear=function(){this.lb.rj(!1),this.Ve=-1},t.prototype.size=function(e){return this.LG(-1==e?this.Ve:e)},t.prototype.VO=function(e,t){for(var n=t[7*e],r=t[7*e+1],i=t[7*e+4];-1!=n||-1!=r;){var a=-1!=n?t[7*n+4]:2147483647;if(r=-1!=r?t[7*r+4]:2147483647,i<=Math.min(a,r))break;a<=r?this.wK(n,t):this.vK(e,t),n=t[7*e],r=t[7*e+1]}},t.prototype.Uy=function(e,t){if(this.yw)for(var n=t[7*e+4],r=t[7*e+2];-1!=r&&t[7*r+4]>n;)t[7*r]==e?this.wK(e,t):this.vK(r,t),r=t[7*e+2]},t.prototype.vK=function(e,t){var n=t[7*e+1];t[7*n+2]=t[7*e+2],t[7*e+2]=n;var r=t[7*n];t[7*e+1]=r,-1!=r&&(t[7*r+2]=e),t[7*n]=e,-1!=(r=t[7*n+2])&&(t[7*r]==e?t[7*r]=n:t[7*r+1]=n)},t.prototype.wK=function(e,t){var n=t[7*e+2];t[7*e+2]=t[7*n+2],t[7*n+2]=e;var r=t[7*e+1];t[7*n]=r,-1!=r&&(t[7*r+2]=n),t[7*e+1]=n,-1!=(r=t[7*e+2])&&(t[7*r]===n?t[7*r]=e:t[7*r+1]=e)},t.prototype.Wk=function(e,t){this.lb.P(e,2,t)},t.prototype.BC=function(e,t){this.lb.P(e,0,t)},t.prototype.FC=function(e,t){this.lb.P(e,1,t)},t.prototype.EC=function(e,t){this.lb.P(e,5,t)},t.prototype.Mx=function(e,t){this.lb.P(e,6,t)},t.prototype.aL=function(e,t){this.lb.P(t,0,e)},t.prototype.VY=function(e){this.lb.P(e,4,0)},t.prototype.YY=function(e,t){this.lb.P(t,5,e)},t.prototype.JG=function(e){return-1==e?-1:this.lb.S(e,0)},t.prototype.ql=function(e){return-1==e?-1:this.lb.S(e,1)},t.prototype.Fs=function(e){return-1==e?-1:this.lb.S(e,2)},t.prototype.wS=function(e){return-1==e?-1:this.lb.S(e,3)},t.prototype.LG=function(e){return-1==e?0:this.lb.S(e,4)},t.prototype.NG=function(e){return this.lb.S(e,5)},t.prototype.vx=function(){return this.lb.Vl([-1,-1,-1,void 0,this.nl(),-1,-1])},t.prototype.ml=function(e){-1!=e&&this.lb.jd(e)},t.prototype.nl=function(){return this.fn=e.L.MB(this.fn),1073741823&this.fn},t.prototype.rE=function(e,t,n){var r=this.lb.i;if(-1==n||-1==r[7*n])return e=this.lb.Vl([-1,-1,-1,e,this.nl(),-1,-1]),(r=this.lb.i)[7*n]=e,this.Pp(-1,e,n,r),e;for(var i=-1==n?-1:r[7*n];;){var a=-1==t?1:this.so.compare(this,e,i);if(0>a){if(-1==(a=this.rl(i))){t=i,e=this.lb.Vl([-1,-1,i,e,this.nl(),-1,-1]),(r=this.lb.i)[7*i]=e;break}i=a}else{if(1==t&&0==a)return r[7*n+3]=i,-1;if(-1==(a=r[7*i+1])){t=r[7*i+6],e=this.lb.Vl([-1,-1,i,e,this.nl(),-1,-1]),(r=this.lb.i)[7*i+1]=e;break}i=a}}return this.Uy(e,r),-1===r[7*e+2]&&(r[7*n]=e),this.Pp(t,e,n,r),e},t.prototype.Pp=function(e,t,n,r){if(-1!=e){var i=r[7*e+5];r[7*e+5]=t}else i=-1==n?-1:r[7*n+2];r[7*t+5]=i,-1!=i&&(r[7*i+6]=t),r[7*t+6]=e,e==(-1==n?-1:r[7*n+1])&&(r[7*n+1]=t),-1==e&&(r[7*n+2]=t),r[7*n+4]=(-1==n?0:r[7*n+4])+1},t.prototype.jC=function(e,t){var n=this.lb.i,r=n[7*e+5];e=n[7*e+6],-1!=r?n[7*r+6]=e:n[7*t+1]=e,-1!=e?n[7*e+5]=r:n[7*t+2]=r,n[7*t+4]=-1===t?-1:n[7*t+4]-1},t.prototype.RZ=function(t,n){this.jC(t,n);var r=this.rl(t),i=this.pq(t),a=this.getParent(t),o=t;if(-1!=r&&-1!=i){this.fn=e.L.MB(this.fn);var s=1073741823<this.fn?this.hb(t):this.Be(t),u=this.getParent(s)==t;this.lb.PC(t,s,0),this.lb.PC(t,s,1),this.lb.PC(t,s,2),-1!=a?this.rl(a)==t?this.BC(a,s):this.FC(a,s):this.aL(s,n),u?(r==s?(this.BC(s,t),this.Wk(i,s)):i==s&&(this.FC(s,t),this.Wk(r,s)),this.Wk(t,s),a=s):(this.Wk(r,s),this.Wk(i,s),a=this.getParent(t),o=s),r=this.rl(t),i=this.pq(t),-1!=r&&this.Wk(r,t),-1!=i&&this.Wk(i,t)}r=-1!=r?r:i,-1==a?this.aL(r,n):this.rl(a)==o?this.BC(a,r):this.FC(a,r),-1!=r&&this.Wk(r,a),this.ml(t)},t.prototype.WQ=function(e,t){var n=this.lb.i;n[7*e+4]=2147483647;var r=-1,i=-1,a=-1===t?-1:n[7*t],o=a==e;if(o&&(i=n[7*a+1],-1==(r=n[7*a])&&-1==i))return this.jC(a,t),this.ml(a),void(n[7*t]=-1);this.VO(e,n),-1!=(a=n[7*e+2])&&(n[7*a]==e?n[7*a]=-1:n[7*a+1]=-1),this.jC(e,t),this.ml(e),o&&(n[7*t]=-1==r||-1!=n[7*r+2]?i:r)},t.prototype.xC=function(e,t){this.lb.P(e,3,t)},t}();e.bk=t}(J||(J={})),function(e){var t=function(){function t(e,t){void 0!==e&&this.H(e,t)}return t.prototype.H=function(e,t){this.fa=e,this.ja=t,this.normalize()},t.prototype.isIntersecting=function(e){return this.fa<=e.fa?this.ja>=e.fa:e.ja>=this.fa},t.prototype.move=function(e){this.u()||(this.fa+=e,this.ja+=e)},t.prototype.normalize=function(){if(!isNaN(this.fa)){if(this.fa>this.ja){var e=this.fa;this.fa=this.ja,this.ja=e}isNaN(this.ja)&&this.Ka()}},t.prototype.Ka=function(){this.ja=this.fa=NaN},t.prototype.u=function(){return isNaN(this.fa)},t.prototype.Nb=function(e){"number"==typeof e?this.u()?this.ja=this.fa=e:this.Sk(e):e.u()||(this.u()?(this.fa=e.fa,this.ja=e.ja):(this.fa>e.fa&&(this.fa=e.fa),this.ja<e.ja&&(this.ja=e.ja),this.fa>this.ja&&this.Ka()))},t.prototype.Sk=function(e){e<this.fa?this.fa=e:e>this.ja&&(this.ja=e)},t.prototype.contains=function(e){return"number"==typeof e?e>=this.fa&&e<=this.ja:e.fa>=this.fa&&e.ja<=this.ja},t.prototype.Ia=function(e){this.u()||e.u()?this.Ka():(this.fa<e.fa&&(this.fa=e.fa),this.ja>e.ja&&(this.ja=e.ja),this.fa>this.ja&&this.Ka())},t.prototype.O=function(e){this.u()||(this.fa-=e,this.ja+=e,this.ja<this.fa&&this.Ka())},t.prototype.Mn=function(){return this.u()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.fa)+Math.abs(this.ja)+1)},t.prototype.uC=function(e,t){e>t?(this.fa=t,this.ja=e):(this.fa=e,this.ja=t)},t.prototype.su=function(t){return e.L.Yj(t,this.fa,this.ja)},t.prototype.N=function(){return this.ja-this.fa},t.prototype.hf=function(){return.5*(this.fa+this.ja)},t.prototype.Ib=function(e){return e==this||e instanceof t&&(!(!this.u()||!e.u())||this.fa==e.fa&&this.ja==e.ja)},t.prototype.fc=function(){return e.L.Aj(e.L.Aj())},t}();e.uc=t}(J||(J={})),function(e){var t=new e.uc,n=new e.uc,r=function(){this.ue=null,this.mb=-1,this.sb=new e.zb,this.aB=55555555,this.Aw=this.Cw=!1,this.cg=new e.uc,this.cg.uC(0,0)};e.s_=r;var i=function(){function i(t,n,i){this.a=t,this.Ok=NaN,this.CI=this.cr=0,this.DI=NaN,this.qa=n,this.fr=10*n,this.EI=this.FI=NaN,this.yg=!1,this.Qm=this.Pt=this.bp=this.Ft=this.Et=-1,this.SA=i,this.DB=new r,this.MI=new r,e.L.truncate(3*t.hd/2)}return i.prototype.ZG=function(e,t,n,r){e.ue=null===r?null:r[n[5*t]],e.Aw=null!=e.ue,e.Aw||(-1!==(r=n[5*t+2])&&this.a.DX(n[5*t],n[5*r],e.sb),e.ue=e.sb,e.cg.uC(e.sb.ra,e.sb.pa),e.cg.ja+=this.qa,e.sb.hJ(),e.Cw=e.sb.ma==e.sb.na,e.Cw||(e.aB=(e.sb.pa-e.sb.ra)/(e.sb.ma-e.sb.na)))},i.prototype.YP=function(e,t){var n=e.Zr(t,this.qa,!0);return 0!=n?2==n?this.wz():this.Ei():(e.qq(Q),e.vs($),t.qq(ee),t.vs(te),X.ka(this.cr,this.Ok),Q.qb(ee)&&this.Ok==Q.y?0>$.compare(te)?X.K($):X.K(te):Q.qb(te)&&this.Ok==Q.y?0>$.compare(ee)?X.K($):X.K(ee):ee.qb($)&&this.Ok==ee.y?0>Q.compare(te)?X.K(Q):X.K(te):$.qb(te)&&this.Ok==$.y&&(0>Q.compare(ee)?X.K(Q):X.K(ee)),e.Te(X.y,X.x)<t.Te(X.y,X.x)?-1:1)},i.prototype.WP=function(e,t){if(e.sb.na==t.sb.na&&e.sb.ra==t.sb.ra)return e.sb.ma==t.sb.ma&&e.sb.pa==t.sb.pa?this.SA?this.wz():0:this.AF(e,t);if(e.sb.ma==t.sb.ma&&e.sb.pa==t.sb.pa)return this.zF(e,t);var n=this.zF(e,t);return e=this.AF(e,t),0>n&&0>e?-1:0<n&&0<e?1:this.Ei()},i.prototype.SP=function(e,t){if(e.pa>t.pa){if(t.pa>t.ra&&t.ma-t.na<2*this.qa&&e.Ci(t.pa,t.ma,this.qa))return this.Ei()}else if((t.ma-t.na)/(t.pa-t.ra)*(e.pa-e.ra)<this.fr&&t.Ci(e.pa,e.ma,this.qa))return this.Ei();return 1},i.prototype.TP=function(e,t){if(e.ra<t.ra){if(t.pa>t.ra&&t.ma-t.na<2*this.qa&&e.Ci(t.pa,t.ma,this.qa))return this.Ei()}else if((t.ma-t.na)/(t.pa-t.ra)*(e.ra-e.pa)<this.fr&&t.Ci(e.ra,e.na,this.qa))return this.Ei();return-1},i.prototype.UP=function(t,n){var r=new e.b;r.tc(n.wc(),n.ac()),r.ur(),r.normalize();var i=new e.b;i.tc(t.ac(),n.ac());var a=new e.b;a.tc(t.wc(),n.ac()),i=i.Vh(r),r=a.Vh(r),a=Math.abs(i);var o=Math.abs(r);if(a<o){if(a<this.fr&&n.Ci(t.ra,t.na,this.qa))return this.Ei()}else if(o<this.fr&&n.Ci(t.pa,t.ma,this.qa))return this.Ei();return 0>i&&0>r?-1:0<i&&0<r?1:this.Ei()},i.prototype.yF=function(e,t){return e.na==t.na&&e.ra==t.ra?this.SP(e,t):e.ma==t.ma&&e.pa==t.pa?this.TP(e,t):this.UP(e,t)},i.prototype.VP=function(e,t){return e.ma==t.ma&&e.pa==t.pa&&e.na==t.na&&e.ra==t.ra?this.SA?this.wz():0:this.Ei()},i.prototype.zF=function(e,t){var n=1;if(e.sb.na<t.sb.na){n=-1;var r=e;e=t,t=r}var i=(e=e.sb).ra-(r=t.sb).ra,a=this.fr;return i<(t=t.aB*(e.na-r.na))-a?-n:i>t+a?n:r.Ci(e.ra,e.na,this.qa)?this.Ei():i<t?-n:n},i.prototype.AF=function(e,t){var n=1;if(t.sb.ma<e.sb.ma){n=-1;var r=e;e=t,t=r}var i=(e=e.sb).pa-(r=t.sb).ra,a=this.fr;return i<(t=t.aB*(e.ma-r.na))-a?-n:i>t+a?n:r.Ci(e.pa,e.ma,this.qa)?this.Ei():i<t?-n:n},i.prototype.wz=function(){return this.yg=!0,this.Ti=new e.Od(5,this.bp,this.Pt),-1},i.prototype.Ei=function(){return this.yg=!0,this.SA?this.Ti=new e.Od(4,this.bp,this.Pt):this.Pt=this.bp=this.Ft=this.Et=-1,-1},i.prototype.XP=function(e,r,i,a){if(this.yg)return-1;var o=this.DI==this.Ok&&this.CI==this.cr;if(o&&e==this.Et)var s=this.EI;else s=NaN,this.Et=-1;return o&&r==this.Ft?o=this.FI:(o=NaN,this.Ft=-1),i.ue.QJ(t),a.ue.QJ(n),t.ja<n.fa?-1:n.ja<t.fa?1:(this.DI=this.Ok,this.CI=this.cr,isNaN(s)&&(this.Et=e,this.EI=s=e=i.ue.Te(this.Ok,this.cr)),isNaN(o)&&(this.Ft=r,this.FI=o=e=a.ue.Te(this.Ok,this.cr)),Math.abs(s-o)<=this.qa?this.YP(i.ue,a.ue):s<o?-1:s>o?1:0)},i.prototype.ks=function(){this.yg=!1},i.prototype.Dm=function(){return this.Ti},i.prototype.dL=function(e,t){this.Ok=e,this.cr=t,this.Pt=this.bp=this.Ft=this.Et=-1},i.prototype.compare=function(e,t,n){return this.yg?-1:(e=e.ga(n),this.Qm=n,this.CF(t,t,e,e))},i.prototype.CF=function(e,t,n,r){if(this.bp==t)var i=this.DB;else this.bp=t,i=this.DB,this.DB.mb=e,this.ZG(i,t,this.a.ud.i,this.a.bf);if(null==a){this.Pt=r;var a=this.MI;this.MI.mb=n,this.ZG(a,r,this.a.ud.i,this.a.bf)}return i.Aw||a.Aw?this.XP(t,r,i,a):i.cg.ja<a.cg.fa?-1:a.cg.ja<i.cg.fa?1:(e=i.Cw?1:0,0==(e|=a.Cw?2:0)?this.WP(i,a):1==e?this.yF(i.sb,a.sb):2==e?-1*this.yF(a.sb,i.sb):this.VP(i.sb,a.sb))},i}();e.CD=i}(J||(J={})),function(e){var t=function(){function t(t,n){this.a=t,this.qa=n,this.yg=!1,this.bp=-1,this.cg=new e.uc,this.$q=new e.b,this.$q.Tc(),this.qe=new e.zb,this.Qm=-1,this.kB=17976931348623157e292}return t.prototype.ks=function(){this.yg=!1,this.kB=17976931348623157e292},t.prototype.Hh=function(e){this.$q.K(e)},t.prototype.compare=function(e,t){return this.DF(t,e.ga(t))},t.prototype.DF=function(t,n){var r=null!=this.a.ec(n);if(r||(this.a.gd(n,this.qe),this.cg.uC(this.qe.ra,this.qe.pa)),r)throw e.f.Y("not implemented");if(this.$q.x+this.qa<this.cg.fa)return-1;if(this.$q.x-this.qa>this.cg.ja)return 1;if(this.qe.na==this.qe.ma)return this.Qm=t,this.yg=!0,0;this.qe.hJ(),r=this.qe.ac(),(n=new e.b).tc(this.qe.wc(),r),n.ur();var i=new e.b;return i.tc(this.$q,r),r=n.Vh(i),(r/=n.length())<10*-this.qa?-1:r>10*this.qa?1:this.qe.Zs(this.$q,this.qa)&&((n=Math.abs(r))<this.kB&&(this.Qm=t,this.kB=n),this.yg=!0,n<.25*this.qa)?0:0>r?-1:1},t}();e.hN=t}(J||(J={})),function(e){function t(e,t,n,r){n=new Float64Array(e.subarray(n,r)),e.set(n,t)}var n=function(){function n(e){this.Mb=this.wk=!1,this.i=null;var t=e;2>t&&(t=2),this.i=new Float64Array(t),this.size=e}return n.prototype.rotate=function(t,n,r){if(this.Mb)throw e.f.Y("invalid_call");if(n<t||n>r||t>r)throw e.f.I();t!=n&&r!=n&&(this.wi(t,n-t,1),this.wi(n,r-n,1),this.wi(t,r-t,1))},n.Af=function(e,t){var r=new n(e),i=r.i;if(2>e&&(e=2),0!==t)for(var a=0;a<e;a++)i[a]=t;return r},n.Vn=function(e){var t=new n(0);return t.i=new Float64Array(e.i),t.size=e.size,t},n.ms=function(e,t){var r=new n(0);return r.size=e.size,r.size>t&&(r.size=t),2>(t=r.size)&&(t=2),r.i=new Float64Array(t),r.i.set(e.i.length<=t?e.i:e.i.subarray(0,t),0),r},n.prototype.Db=function(e){0>=e||(null==this.i?this.i=new Float64Array(e):e<=this.i.length||(0<this.i.length?((e=new Float64Array(e)).set(this.i),this.i=e):this.i=new Float64Array(e)))},n.prototype.read=function(e){return this.i[e]},n.prototype.mc=function(e,t){t.x=this.i[e],t.y=this.i[e+1]},n.prototype.get=function(e){return this.i[e]},n.prototype.write=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n},n.prototype.set=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n},n.prototype.Bu=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n.x,this.i[t+1]=n.y},n.prototype.add=function(e){this.resize(this.size+1),this.i[this.size-1]=e},n.prototype.qC=function(e){return n.ms(this,e)},n.prototype.Ig=function(e){return this.read(e)},n.prototype.resize=function(t,n){if(void 0===n&&(n=0),this.wk)throw e.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");if(t<=this.size){if(30<this.i.length&&5*t/4<this.i.length){var r=new Float64Array(this.i,0,t);this.i=r}}else{t>this.i.length&&(r=e.L.truncate(64>t?Math.max(2*t,4):5*t/4),(r=new Float64Array(r)).set(this.i),this.i=r),r=this.i;for(var i=this.size;i<t;i++)r[i]=n}this.size=t},n.prototype.Gh=function(t){if((null==this.i||t>this.i.length)&&this.resize(t),this.wk)throw e.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");this.size=t},n.prototype.Mr=function(e,t){this.write(e,t)},n.prototype.Un=function(t,n,r){for(var i=this.size;n<i&&n<r;n++)t=e.L.Aj(this.read(n));return t},n.prototype.Ib=function(e,t,r){if(null==e||!(e instanceof n))return!1;var i=this.size,a=e.size;if(r>i||r>a&&i!=a)return!1;for(r>i&&(r=i);t<r;t++)if(this.read(t)!=e.read(t))return!1;return!0},n.prototype.addRange=function(t,n,r,i,a){if(this.Mb)throw e.f.Eb();if(!i&&(1>a||0!=r%a))throw e.f.I();var o=this.size;if(this.resize(o+r),i)this.i.set(t.i.subarray(n,n+r),o);else{i=r;for(var s=0;s<r;s+=a){i-=a;for(var u=0;u<a;u++)this.i[o+s+u]=t.i[n+i+u]}}},n.prototype.fo=function(n,r,i,a,o,s,u){if(this.Mb)throw e.f.Eb();if(!o&&(1>s||0!=a%s))throw e.f.I();var c=this.size-u;if(c<a&&this.resize(this.size+a-c),t(this.i,n+a,n,n+(u-n)),this.i==r.i&&n<i&&(i+=a),o)this.i.set(r.i.subarray(i,i+a),n);else for(o=a,u=0;u<a;u+=s)for(o-=s,c=0;c<s;c++)this.i[n+u+c]=r.i[i+o+c]},n.prototype.qA=function(n,r,i,a,o,s){if(this.Mb)throw e.f.Eb();if(0>s&&(s=this.size),this.size+2*a>this.i.length?this.resize(this.size+2*a):this.size+=2*a,t(this.i,n+2*a,n,n+(s-n)),o)for(o=0;o<a;o++)s=r[i++],this.i[n++]=s.x,this.i[n++]=s.y;else{o=0;for(var u=a-1;o<a;++o)this.i[n++]=(s=r[i+u]).x,this.i[n++]=s.y,u--}},n.prototype.Gm=function(n,r,i,a){if(this.Mb)throw e.f.Eb();for(t(this.i,n+(a-=n),n,n+a),a=0;a<i;a++)this.i[n+a]=r},n.prototype.Gi=function(n,r,i){if(this.Mb)throw e.f.Eb();t(this.i,n+2,n,n+(i-n)),this.i[n]=r.x,this.i[n+1]=r.y},n.prototype.cD=function(t,n,r,i,a){if(0>t||0>n||0>i)throw e.f.I();if(r.length<i+n)throw e.f.I();if(0!=n)if(this.size<n+t&&this.resize(n+t),a)this.i.set(r.subarray(i,n),t);else for(a||(t+=n-1),n=i+n;i<n;i++)this.i[t]=r[i],t--},n.prototype.Cu=function(t,n,r,i,a,o){if(0>t||0>n||0>i)throw e.f.I();if(!a&&(0>=o||0!=n%o))throw e.f.I();if(r.size<i+n)throw e.f.I();if(0!=n)if(this.size<n+t&&this.resize(n+t),r==this)this.$r(t,n,i,a,o);else if(a)for(a=0;a<n;a++)this.i[t]=r.i[i],t++,i++;else if(i=i+n-o,1==o)for(a=0;a<n;a++)this.i[t]=r.i[i],t++,i--;else for(a=0,n=e.L.truncate(n/o);a<n;a++){for(var s=0;s<o;s++)this.i[t+s]=r.i[i+s];t+=o,i-=o}},n.prototype.Xn=function(n,r,i){if(this.Mb)throw e.f.Eb();if(n+r>this.size)throw e.f.Eb();0<i-(n+r)&&t(this.i,n,n+r,n+(i-(n+r))+r),this.size-=r},n.prototype.wi=function(t,n,r){if(this.Mb)throw e.f.Eb();if(1>r||0!=n%r)throw e.f.Eb();for(var i=n>>1,a=0;a<i;a+=r){n-=r;for(var o=0;o<r;o++){var s=this.i[t+a+o];this.i[t+a+o]=this.i[t+n+o],this.i[t+n+o]=s}}},n.prototype.Xj=function(t,n,r){if(0>n||0>r||0>n||r+n>this.size)throw e.f.I();for(var i=n;i<n+r;i++)this.i[i]=t},n.prototype.$r=function(t,n,r,i,a){if(!(i&&t==r||(this.i.set(this.i.subarray(r,r+n),t),i)))for(r=t,t=t+n-a,i=0,n=e.L.truncate(n/2);i<n;i++){for(var o=0;o<a;o++){var s=this.i[r+o];this.i[r+o]=this.i[t+o],this.i[t+o]=s}r+=a,t-=a}},n.prototype.eD=function(t,n,r,i,a){if(0>t||0>n||0>i)throw e.f.I();if(0!=n)for(this.size<(n<<1)+t&&this.resize((n<<1)+t),a||(t+=n-1<<1),a=a?2:-2,n+=i;i<n;i++)this.i[t]=r[i].x,this.i[t+1]=r[i].y,t+=a},n.prototype.dD=function(t,n,r){if(0>t||0>n)throw e.f.I();if(0!=n){this.size<(n<<1)+t&&this.resize((n<<1)+t),n+=0;for(var i=0;i<n;i++)this.i[t]=r[i][0],this.i[t+1]=r[i][1],t+=2}},n.prototype.iu=function(t,n,r,i,a){if(0>t||0>n||0>i||this.size<n+t)throw e.f.I();if(a)for(a=0;a<n;a++)r[i+a]=this.i[t+a];else for(i=i+n-1;t<n;t++)r[i]=this.i[t],i--},n.prototype.dC=function(t,n,r){if(0>t||0>n||this.size<(n>>1)+t)throw e.f.I();if(0!=n){n=0+n;for(var i=0;i<n;i++)r[i][0]=this.i[t],r[i][1]=this.i[t+1],t+=2}},n.prototype.clear=function(e){e?this.resize(0):this.Gh(0)},n.prototype.Px=function(){this.wk=this.Mb=!0},n.prototype.Zd=function(e,t,n){Array.prototype.sort.call(this.i.subarray(e,t),n)},n.prototype.sl=function(){return 1},n}();e.ie=n}(J||(J={})),function(e){function t(e,t,n,r){n=new Int32Array(e.subarray(n,r)),e.set(n,t)}e.YZ=function(){this.random=1973};var n=function(){function n(e){this.Mb=this.wk=!1,this.i=null;var t=e;2>t&&(t=2),this.i=new Int32Array(t),this.size=e}return n.prototype.rotate=function(t,n,r){if(this.Mb)throw e.f.Y("invalid_call");if(n<t||n>r||t>r)throw e.f.I();t!=n&&r!=n&&(this.wi(t,n-t,1),this.wi(n,r-n,1),this.wi(t,r-t,1))},n.Af=function(e,t){var r=new n(e),i=r.i;if(2>e&&(e=2),0!==t)for(var a=0;a<e;a++)i[a]=t;return r},n.Vn=function(e){var t=new n(0);return t.i=new Int32Array(e.i),t.size=e.size,t},n.ms=function(e,t){var r=new n(0);return r.size=e.size,r.size>t&&(r.size=t),2>(t=r.size)&&(t=2),r.i=new Int32Array(t),r.i.set(e.i.length<=t?e.i:e.i.subarray(0,t),0),r},n.prototype.Db=function(e){0>=e||(null==this.i?this.i=new Int32Array(e):e<=this.i.length||(0<this.i.length?((e=new Int32Array(e)).set(this.i),this.i=e):this.i=new Int32Array(e)))},n.prototype.read=function(e){return this.i[e]},n.prototype.mc=function(e,t){t.x=this.i[e],t.y=this.i[e+1]},n.prototype.get=function(e){return this.i[e]},n.prototype.write=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n},n.prototype.set=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n},n.prototype.Bu=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n.x,this.i[t+1]=n.y},n.prototype.add=function(e){this.resize(this.size+1),this.i[this.size-1]=e},n.prototype.qC=function(e){return n.ms(this,e)},n.prototype.Ig=function(e){return this.read(e)},n.prototype.resize=function(t,n){if(void 0===n&&(n=0),this.wk)throw e.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");if(t<=this.size){if(30<this.i.length&&5*t/4<this.i.length){var r=new Int32Array(this.i,0,t);this.i=r}}else{t>this.i.length&&(r=e.L.truncate(64>t?Math.max(2*t,4):5*t/4),(r=new Int32Array(r)).set(this.i),this.i=r),r=this.i;for(var i=this.size;i<t;i++)r[i]=n}this.size=t},n.prototype.Gh=function(t){if((null==this.i||t>this.i.length)&&this.resize(t),this.wk)throw e.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");this.size=t},n.prototype.Mr=function(e,t){this.write(e,t)},n.prototype.Un=function(t,n,r){for(var i=this.size;n<i&&n<r;n++)t=e.L.Zh(this.read(n),t);return t},n.prototype.Ib=function(e,t,r){if(null==e||!(e instanceof n))return!1;var i=this.size,a=e.size;if(r>i||r>a&&i!=a)return!1;for(r>i&&(r=i);t<r;t++)if(this.read(t)!=e.read(t))return!1;return!0},n.prototype.addRange=function(t,n,r,i,a){if(this.Mb)throw e.f.Eb();if(!i&&(1>a||0!=r%a))throw e.f.I();var o=this.size;if(this.resize(o+r),i)this.i.set(t.i.subarray(n,n+r),o);else{i=r;for(var s=0;s<r;s+=a){i-=a;for(var u=0;u<a;u++)this.i[o+s+u]=t.i[n+i+u]}}},n.prototype.fo=function(n,r,i,a,o,s,u){if(this.Mb)throw e.f.Eb();if(!o&&(1>s||0!=a%s))throw e.f.I();if(t(this.i,n+a,n,n+(u-n)),this.i==r.i&&n<i&&(i+=a),o)this.i.set(r.i.subarray(i,i+a),n);else for(o=a,u=0;u<a;u+=s){o-=s;for(var c=0;c<s;c++)this.i[n+u+c]=r.i[i+o+c]}},n.prototype.qA=function(n,r,i,a,o,s){if(this.Mb)throw e.f.Eb();if(0>s&&(s=this.size),this.size+2*a>this.i.length?this.resize(this.size+2*a):this.size+=2*a,t(this.i,n+2*a,n,n+(s-n)),o)for(o=0;o<a;o++)s=r[i++],this.i[n++]=s.x,this.i[n++]=s.y;else{o=0;for(var u=a-1;o<a;++o)this.i[n++]=(s=r[i+u]).x,this.i[n++]=s.y,u--}},n.prototype.Gm=function(n,r,i,a){if(this.Mb)throw e.f.Eb();for(t(this.i,n+(a-=n),n,n+a),a=0;a<i;a++)this.i[n+a]=r},n.prototype.Gi=function(n,r,i){if(this.Mb)throw e.f.Eb();t(this.i,n+2,n,n+(i-n)),this.i[n]=r.x,this.i[n+1]=r.y},n.prototype.cD=function(t,n,r,i,a){if(0>t||0>n||0>i)throw e.f.I();if(r.length<i+n)throw e.f.I();if(0!=n)if(this.size<n+t&&this.resize(n+t),a)this.i.set(r.subarray(i,n),t);else for(a||(t+=n-1),n=i+n;i<n;i++)this.i[t]=r[i],t--},n.prototype.Cu=function(t,n,r,i,a,o){if(0>t||0>n||0>i)throw e.f.I();if(!a&&(0>=o||0!=n%o))throw e.f.I();if(r.size<i+n)throw e.f.I();if(0!=n)if(this.size<n+t&&this.resize(n+t),r==this)this.$r(t,n,i,a,o);else if(a)for(a=0;a<n;a++)this.i[t]=r.i[i],t++,i++;else if(i=i+n-o,1==o)for(a=0;a<n;a++)this.i[t]=r.i[i],t++,i--;else for(a=0,n=e.L.truncate(n/o);a<n;a++){for(var s=0;s<o;s++)this.i[t+s]=r.i[i+s];t+=o,i-=o}},n.prototype.Xn=function(n,r,i){if(this.Mb)throw e.f.Eb();if(n+r>this.size)throw e.f.Eb();0<i-(n+r)&&t(this.i,n,n+r,n+(i-(n+r))+r),this.size-=r},n.prototype.wi=function(t,n,r){if(this.Mb)throw e.f.Eb();if(1>r||0!=n%r)throw e.f.Eb();for(var i=n>>1,a=0;a<i;a+=r){n-=r;for(var o=0;o<r;o++){var s=this.i[t+a+o];this.i[t+a+o]=this.i[t+n+o],this.i[t+n+o]=s}}},n.prototype.Xj=function(t,n,r){if(0>n||0>r||0>n||r+n>this.size)throw e.f.I();for(var i=n;i<n+r;i++)this.i[i]=t},n.prototype.$r=function(t,n,r,i,a){if(!(i&&t==r||(this.i.set(this.i.subarray(r,r+n),t),i)))for(r=t,t=t+n-a,i=0,n=e.L.truncate(n/2);i<n;i++){for(var o=0;o<a;o++){var s=this.i[r+o];this.i[r+o]=this.i[t+o],this.i[t+o]=s}r+=a,t-=a}},n.prototype.eD=function(t,n,r,i,a){if(0>t||0>n||0>i)throw e.f.I();if(0!=n)for(this.size<(n<<1)+t&&this.resize((n<<1)+t),a||(t+=n-1<<1),a=a?2:-2,n+=i;i<n;i++)this.i[t]=r[i].x,this.i[t+1]=r[i].y,t+=a},n.prototype.iu=function(t,n,r,i,a){if(0>t||0>n||0>i||this.size<n+t)throw e.f.I();if(a)for(a=0;a<n;a++)r[i+a]=this.i[t+a];else for(i=i+n-1;t<n;t++)r[i]=this.i[t],i--},n.prototype.clear=function(e){e?this.resize(0):this.Gh(0)},n.prototype.Px=function(){this.wk=this.Mb=!0},n.prototype.Zd=function(e,t,r){10>t-e?n.dH(this.i,e,t,r):n.$B(this.i,e,t-1,r)},n.prototype.sl=function(){return 2},n.prototype.Gc=function(){return this.i[this.size-1]},n.prototype.Rf=function(){this.resize(this.size-1)},n.prototype.EY=function(e){this.i[this.size-1]=e},n.prototype.kX=function(e){e<this.size-1&&(this.i[e]=this.i[this.size-1]),this.resize(this.size-1)},n.prototype.ZF=function(e){for(var t=0,n=this.size;t<n;t++)if(this.i[t]==e)return t;return-1},n.prototype.UG=function(e){return 0<=this.ZF(e)},n.dH=function(e,t,n,r){for(var i=t;i<n;i++){for(var a=e[i],o=i-1;o>=t&&0<r(e[o],a);)e[o+1]=e[o],o--;e[o+1]=a}},n.$x=function(e,t,n){var r=e[n];e[n]=e[t],e[t]=r},n.$B=function(e,t,r,i){if(!(t>=r))for(;;){if(9>r-t){n.dH(e,t,r+1,i);break}var a=e[t];n.$x(e,t,r);for(var o=t,s=t;s<r;s++)0>=i(e[s],a)&&(n.$x(e,o,s),o+=1);n.$x(e,o,r),o-t<r-o?(n.$B(e,t,o-1,i),t=o+1):(n.$B(e,o+1,r,i),r=o-1)}},n}();e.ha=n}(J||(J={})),function(e){function t(e,t,n,r){n=new Int8Array(e.subarray(n,r)),e.set(n,t)}var n=function(){function n(e){this.i=null;var t=e;2>t&&(t=2),this.i=new Int8Array(t),this.size=e}return n.prototype.rotate=function(t,n,r){if(this.Mb)throw e.f.Y("invalid_call");if(n<t||n>r||t>r)throw e.f.I();t!=n&&r!=n&&(this.wi(t,n-t,1),this.wi(n,r-n,1),this.wi(t,r-t,1))},n.Af=function(e,t){var r=new n(e),i=r.i;if(2>e&&(e=2),0!==t)for(var a=0;a<e;a++)i[a]=t;return r},n.Vn=function(e){var t=new n(0);return t.i=new Int8Array(e.i),t.size=e.size,t},n.ms=function(e,t){var r=new n(0);return r.size=e.size,r.size>t&&(r.size=t),2>(t=r.size)&&(t=2),r.i=new Int8Array(t),r.i.set(e.i.length<=t?e.i:e.i.subarray(0,t),0),r},n.prototype.Db=function(e){0>=e||(null==this.i?this.i=new Int8Array(e):e<=this.i.length||(0<this.i.length?((e=new Int8Array(e)).set(this.i),this.i=e):this.i=new Int8Array(e)))},n.prototype.read=function(e){return this.i[e]},n.prototype.mc=function(e,t){t.x=this.i[e],t.y=this.i[e+1]},n.prototype.get=function(e){return this.i[e]},n.prototype.write=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n},n.prototype.set=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n},n.prototype.Bu=function(t,n){if(this.Mb)throw e.f.Eb();this.i[t]=n.x,this.i[t+1]=n.y},n.prototype.add=function(e){this.resize(this.size+1),this.i[this.size-1]=e},n.prototype.qC=function(e){return n.ms(this,e)},n.prototype.Ig=function(e){return this.read(e)},n.prototype.resize=function(t,n){if(void 0===n&&(n=0),this.wk)throw e.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");if(t<=this.size){if(30<this.i.length&&5*t/4<this.i.length){var r=new Int8Array(this.i,0,t);this.i=r}}else{t>this.i.length&&(r=e.L.truncate(64>t?Math.max(2*t,4):5*t/4),(r=new Int8Array(r)).set(this.i),this.i=r),r=this.i;for(var i=this.size;i<t;i++)r[i]=n}this.size=t},n.prototype.Gh=function(t){if((null==this.i||t>this.i.length)&&this.resize(t),this.wk)throw e.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");this.size=t},n.prototype.Mr=function(e,t){this.write(e,t)},n.prototype.Un=function(t,n,r){for(var i=this.size;n<i&&n<r;n++)t=e.L.Zh(this.read(n),t);return t},n.prototype.Ib=function(e,t,r){if(null==e||!(e instanceof n))return!1;var i=this.size,a=e.size;if(r>i||r>a&&i!=a)return!1;for(r>i&&(r=i);t<r;t++)if(this.read(t)!=e.read(t))return!1;return!0},n.prototype.addRange=function(t,n,r,i,a){if(this.Mb)throw e.f.Eb();if(!i&&(1>a||0!=r%a))throw e.f.I();var o=this.size;if(this.resize(o+r),i)this.i.set(t.i.subarray(n,n+r),o);else{i=r;for(var s=0;s<r;s+=a){i-=a;for(var u=0;u<a;u++)this.i[o+s+u]=t.i[n+i+u]}}},n.prototype.fo=function(n,r,i,a,o,s,u){if(this.Mb)throw e.f.Eb();if(!o&&(1>s||0!=a%s))throw e.f.I();if(t(this.i,n+a,n,n+(u-n)),this.i==r.i&&n<i&&(i+=a),o)this.i.set(r.i.subarray(i,i+a),n);else for(o=a,u=0;u<a;u+=s){o-=s;for(var c=0;c<s;c++)this.i[n+u+c]=r.i[i+o+c]}},n.prototype.Gm=function(n,r,i,a){if(this.Mb)throw e.f.Eb();for(t(this.i,n+(a-=n),n,n+a),a=0;a<i;a++)this.i[n+a]=r},n.prototype.qA=function(n,r,i,a,o,s){if(this.Mb)throw e.f.Eb();if(0>s&&(s=this.size),this.size+2*a>this.i.length?this.resize(this.size+2*a):this.size+=2*a,t(this.i,n+2*a,n,n+(s-n)),o)for(o=0;o<a;o++)s=r[i++],this.i[n++]=s.x,this.i[n++]=s.y;else{o=0;for(var u=a-1;o<a;++o)this.i[n++]=(s=r[i+u]).x,this.i[n++]=s.y,u--}},n.prototype.Gi=function(n,r,i){if(this.Mb)throw e.f.Eb();t(this.i,n+2,n,n+(i-n)),this.i[n]=r.x,this.i[n+1]=r.y},n.prototype.cD=function(t,n,r,i,a){if(0>t||0>n||0>i)throw e.f.I();if(r.length<i+n)throw e.f.I();if(0!=n)if(this.size<n+t&&this.resize(n+t),a)this.i.set(r.subarray(i,n),t);else for(a||(t+=n-1),n=i+n;i<n;i++)this.i[t]=r[i],t--},n.prototype.Cu=function(t,n,r,i,a,o){if(0>t||0>n||0>i)throw e.f.I();if(!a&&(0>=o||0!=n%o))throw e.f.I();if(r.size<i+n)throw e.f.I();if(0!=n)if(this.size<n+t&&this.resize(n+t),r==this)this.$r(t,n,i,a,o);else if(a)for(a=0;a<n;a++)this.i[t]=r.i[i],t++,i++;else if(i=i+n-o,1==o)for(a=0;a<n;a++)this.i[t]=r.i[i],t++,i--;else for(a=0,n=e.L.truncate(n/o);a<n;a++){for(var s=0;s<o;s++)this.i[t+s]=r.i[i+s];t+=o,i-=o}},n.prototype.Xn=function(n,r,i){if(this.Mb)throw e.f.Eb();if(n+r>this.size)throw e.f.Eb();0<i-(n+r)&&t(this.i,n,n+r,n+(i-(n+r))+r),this.size-=r},n.prototype.wi=function(t,n,r){if(this.Mb)throw e.f.Eb();if(1>r||0!=n%r)throw e.f.Eb();for(var i=n>>1,a=0;a<i;a+=r){n-=r;for(var o=0;o<r;o++){var s=this.i[t+a+o];this.i[t+a+o]=this.i[t+n+o],this.i[t+n+o]=s}}},n.prototype.Xj=function(t,n,r){if(0>n||0>r||0>n||r+n>this.size)throw e.f.I();for(var i=n;i<n+r;i++)this.i[i]=t},n.prototype.$r=function(t,n,r,i,a){if(!(i&&t==r||(this.i.set(this.i.subarray(r,r+n),t),i)))for(r=t,t=t+n-a,i=0,n=e.L.truncate(n/2);i<n;i++){for(var o=0;o<a;o++){var s=this.i[r+o];this.i[r+o]=this.i[t+o],this.i[t+o]=s}r+=a,t-=a}},n.prototype.eD=function(t,n,r,i,a){if(0>t||0>n||0>i)throw e.f.I();if(0!=n)for(this.size<(n<<1)+t&&this.resize((n<<1)+t),a||(t+=n-1<<1),a=a?2:-2,n+=i;i<n;i++)this.i[t]=r[i].x,this.i[t+1]=r[i].y,t+=a},n.prototype.iu=function(t,n,r,i,a){if(0>t||0>n||0>i||this.size<n+t)throw e.f.I();if(a)for(a=0;a<n;a++)r[i+a]=this.i[t+a];else for(i=i+n-1;t<n;t++)r[i]=this.i[t],i--},n.prototype.clear=function(e){e?this.resize(0):this.Gh(0)},n.prototype.Px=function(){this.wk=this.Mb=!0},n.prototype.Zd=function(e,t,n){t=this.i.subarray(e,t),Array.prototype.sort.call(t,n),this.i.set(t,e)},n.prototype.DK=function(t,n){if(this.Mb)throw e.f.Y("invalid call. Attribute Stream is read only.");this.i[t]|=n},n.prototype.uF=function(t,n){if(this.Mb)throw e.f.Y("invalid call. Attribute Stream is read only.");this.i[t]&=~n},n.prototype.sl=function(){return 1},n}();e.Gn=n}(J||(J={})),function(e){e.Xc=function(){function t(){}return t.ns=function(t,n){return e.Gn.Af(t,n)},t.Wn=function(t,n){return e.ie.Af(t,n)},t.zQ=function(t,n,r){switch(t){case 1:t=e.ie.Af(n,r);break;case 2:t=e.ha.Af(n,r);break;case 4:t=e.Gn.Af(n,r);break;default:throw e.f.za()}return t},t.JF=function(n,r){return t.zQ(e.oa.sl(n),r*e.oa.Sa(n),e.oa.me(n))},t.Sh=function(t,n){return e.ha.Af(t,n)},t.gJ=function(e){var t,n=[];for(t=0;t<e;t++)n.push(null);return n},t}()}(J||(J={})),function(e){e.da=function(e){void 0===e&&(e=0),this.j=e}}(J||(J={})),function(e){e.VM=function(){function t(){}return t.bind=function(n){e.Pc=n.PeDefs,e.zf=n.PeFactory,e.uD=n.PeVertcs,e.Kh=n.PeCSTransformations,e.tD=n.PeGTTransformations,e.TM=n.PeGeogtran,e.SM=n.PeFactoryCodechange,e.sD=n.PeGCSExtent,e.ng=n.PePCSInfo,e.UM=n.PeHorizon,e.RM=n.PeCoordsys,e.Dp=n.PeGTlistExtended,e.Dp.PE_GTLIST_OPTS_USE_DEFAULT=128,e.zf.initialize(null),e.ry=n.PeGTlistExtendedEntry,t.rV=e.zf.fromString(e.Pc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},t.K0=function(){},t.rV=null,t}(),e.zf=null,e.uD=null,e.RM=null,e.UM=null,e.ng=null,e.Dp=null,e.ry=null,e.sD=null,e.SM=null,e.TM=null,e.Pc=null,e.tD=null,e.Kh=null}(J||(J={})),function(e){var t=function(){function e(){}return e.ub=function(t,n){return 0<=n?e.J(t):-e.J(t)},e.J=function(e){return 0>e?-e:e},e.Ai=function(e){return 3552713678800501e-30>e},e.rD=function(t,n,r){return e.J(t-n)<=r*(1+(e.J(t)+e.J(n))/2)},e.V=function(t,n){return e.rD(t,n,3552713678800501e-30)},e.NM=function(t){return 3552713678800501e-30>=e.J(t)},e.qd=function(t){return e.NM(t)},e}();e.l=t,e.C=function(){function n(){}return n.wp=function(e,n){var r=0;return 0!=(e=t.J(e))+(n=t.J(n))&&(e>n?(r=n/e,r=e*Math.sqrt(1+r*r)):(r=e/n,r=n*Math.sqrt(1+r*r))),r},n.pr=function(e,r,i,a,o){for(var s=[0,0,0],u=[0,0,0],c=0;2>=c;c++)r[c]-=e[c],i[c]-=r[c];e=-1*((i=s[1]*u[2]-s[2]*u[1])*e[0]+(r=s[2]*u[0]-s[0]*u[2])*e[1]+(s=s[0]*u[1]-s[1]*u[0])*e[2]),a[0]=i,a[1]=r,a[2]=s,a[3]=e,u=n.Fn(a),a[0]/=u,a[1]/=u,a[2]/=u,a[3]/=u,0!=o&&(u=t.qd(s)?t.qd(e)?t.ub(1,r):-t.ub(1,e):t.ub(1,s),u*=t.ub(1,o),a[0]*=u,a[1]*=u,a[2]*=u,a[3]*=u)},n.ey=function(e,t,n){n[0]=e[1]*t[2]-t[1]*e[2],n[1]=e[2]*t[0]-t[2]*e[0],n[2]=e[0]*t[1]-t[0]*e[1]},n.Au=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},n.Fn=function(e){return n.wp(n.wp(e[0],e[1]),e[2])},n.hk=function(e,t,r,i,a,o,s,u){e=n.n(e,t,r);var c=Math.cos(r);o.j=(e+a)*c*Math.cos(i),s.j=(e+a)*c*Math.sin(i),u.j=(e*(1-t)+a)*Math.sin(r)},n.sP=function(e,r,i,a,o,s,u){var c=n.wp(r,i),l=1*Math.sqrt(1-e),h=l/1;if(t.V(c,0))s.j=0,o.j=t.ub(1.570796326794897,a),u.j=t.J(a)-l;else{s.j=Math.atan2(i,r),i=Math.atan2(1*a,l*c),s=Math.cos(i);var f=Math.sin(i);r=l*e/(1-e),e*=1,i=Math.atan2(a+r*f*f*f,c-e*s*s*s),3.141592653589793<t.J(i)&&(i=t.ub(3.141592653589793,i)-i),i=Math.atan(h*Math.tan(i)),f=Math.sin(i),s=Math.cos(i),o.j=Math.atan2(a+r*f*f*f,c-e*s*s*s),1.570796326794897<t.J(o.j)&&(o.j=t.ub(3.141592653589793,o.j)-o.j),i=Math.atan(h*Math.tan(o.j)),f=Math.sin(i),s=Math.cos(i),u.j=(a-l*f)*Math.sin(o.j)+(c-1*s)*Math.cos(o.j)}},n.n=function(e,t,n){return n=Math.sin(n),e/Math.sqrt(1-t*n*n)},n.Xt=function(e,t){return Math.atan2(Math.sin(t)*(1-e),Math.cos(t))},n.Rj=function(e,t){return Math.atan2(Math.sin(t),Math.cos(t)*(1-e))},n.kr=function(e,r){if(t.Ai(e)||0==r||t.V(t.J(r),1.570796326794897))return r;if(.006884661117170036>e){var i=Math.sqrt(1-e),a=(1-i)/(1+i),o=a*a,s=a*o,u=a*s,c=a*u,l=a*c,h=a*l,f=1.572916666666667*s-3.2578125*c+4.295068359375*h;e=2.142578125*u-6.071484375*l,i=3.129296875*c-11.249837239583334*h;var p=4.775276692708333*l,d=7.958636765252976*h,v=Math.cos(2*r);return r+Math.sin(2*r)*(1.5*a-.84375*s+.525390625*c-.2688395182291667*h-f+i-d+v*(2*(1.3125*o-1.71875*u+1.650146484375*l)-4*e+6*p+v*(4*f-12*i+24*d+v*(8*e-32*p+v*(16*i-80*d+v*(32*p+64*v*d))))))}for(i=1-e,a=e/2,s=(o=t.J(r))*n.Gv(e)/(1.570796326794897*i),u=9999,l=o,o=0;1e-16<u&&50>o;o++)h=n.gm(e,l),c=l-(f=(c=(n.XG(l,e)-a*Math.sin(2*l)/h)/i-s)/(h=1/(h*h*h))),u=t.J(f),l=c;return 0<=r?l:-l},n.WX=function(e,r){return t.Ai(r)?e:e*n.Gv(r)/1.570796326794897},n.ba=function(e){return 0>(e=n.cG(e,6.283185307179586))?e+6.283185307179586:3.141592653589793>t.J(e)||t.V(t.J(e),3.141592653589793)?e:e-6.283185307179586},n.cG=function(e,t){return e-Math.floor(e/t)*t},n.Hg=function(e,t){if(.006884661117170036>t){var r=(t=(1-(t=Math.sqrt(1-t)))/(1+t))*t,i=r*r;return e/(1+t)*(1+.25*r+.015625*i+.00390625*r*i)*1.570796326794897}return e*n.Gv(t)},n.nr=function(e,r){var i=t.ub(1,Math.sin(r));return r=1.570796326794897>=(r=t.J(n.cG(r,3.141592653589793)))?r:3.141592653589793-r,(t.V(r,1.570796326794897)?r:Math.atan(Math.sqrt(1-e)*Math.tan(r)))*i},n.q=function(e,t,r){if(.006884661117170036>t){var i=(t=(1-(t=Math.sqrt(1-t)))/(1+t))*t,a=t*i,o=t*a,s=t*o,u=t*s,c=t*u,l=-.7291666666666666*a+.2278645833333333*s+.03987630208333334*c,h=.615234375*o-.21533203125*u,f=-.54140625*s+.20302734375*c,p=.48876953125*u,d=-.4488699776785715*c,v=Math.cos(2*r);return e/(1+t)*((1+.25*i+.015625*o+.00390625*u)*r+Math.sin(2*r)*(-1.5*t+.1875*a+.0234375*s+.00732421875*c-l+f-d+v*(2*(.9375*i-.234375*o-.03662109375*u)-4*h+6*p+v*(4*l-12*f+24*d+v*(8*h-32*p+v*(16*f-80*d+v*(32*p+64*v*d)))))))}return e*(n.XG(r,t)-.5*t*Math.sin(2*r)/n.gm(t,r))},n.gm=function(e,t){return t=Math.sin(t),Math.sqrt(1-e*t*t)},n.Gv=function(e){return t.rD(e,1,2220446049250313e-31)?1:1>e?n.Ex(0,1-e)-e/3*n.Cx(0,1-e):NaN},n.XG=function(r,i){var a=t.ub(1,r);r=t.J(r);var o=Math.floor(r/1.570796326794897);if(1<i)i=0==r?0:NaN;else if(t.qd(o))i=(r=n.sin(r))*n.Ex(1-r*r,1-i*r*r)-i/3*r*r*r*n.Cx(1-r*r,1-i*r*r);else{var s=e.L.truncate(o%2),u=n.Gv(i);i=0<s?u*(o+1)-(i=(r=Math.sin(1.570796326794897*(o+1)-r))*n.Ex(1-r*r,1-i*r*r)-i/3*r*r*r*n.Cx(1-r*r,1-i*r*r)):u*o+(i=(r=Math.sin(r-1.570796326794897*o))*n.Ex(1-r*r,1-i*r*r)-i/3*r*r*r*n.Cx(1-r*r,1-i*r*r))}return i*a},n.sin=function(e){e=n.ba(e);var r=t.ub(1,e);return e=t.J(e),t.V(e,3.141592653589793)?0:t.V(e,1.570796326794897)?1*r:Math.sin(e)*r},n.Cx=function(e,n){var r,i,a,o,s=e,u=n,c=1;for(n=0,e=1;i=((r=.2*(s+u+3*c))-s)/r,a=(r-u)/r,o=(r-c)/r,!(1e-4>t.J(i)&&1e-4>t.J(a)&&1e-4>t.J(o));)o=Math.sqrt(u),n+=e/((r=Math.sqrt(c))*(c+(o=Math.sqrt(s)*(o+r)+o*r))),e*=.25,s=.25*(s+o),u=.25*(u+o),c=.25*(c+o);return u=(s=i*a)-(c=o*o),3*n+e*(1+(c=s-6*c)*(.10227272727272728*c-.2142857142857143-.1730769230769231*o*(i=c+u+u))+o*(.1666666666666667*i+o*(-.4090909090909091*u+.1153846153846154*o*s)))/(r*Math.sqrt(r))},n.Ex=function(e,n){for(var r,i,a,o,s=1;i=2-((r=(e+n+s)/3)+e)/r,a=2-(r+n)/r,o=2-(r+s)/r,!(1e-4>t.J(i)&&1e-4>t.J(a)&&1e-4>t.J(o));s=.25*(s+r))r=Math.sqrt(n),i=Math.sqrt(s),e=.25*(e+(r=Math.sqrt(e)*(r+i)+r*i)),n=.25*(n+r);return(1+(.04166666666666666*(e=i*a-o*o)-.1-.06818181818181818*(n=i*a*o))*e+.07142857142857142*n)/Math.sqrt(r)},n.wx=function(e,n){if(t.Ai(e)||0==n||t.V(t.J(n),1.570796326794897))return n;if(.006884661117170036>e){var r=e*e,i=e*r,a=e*i,o=e*a,s=e*o,u=e*s,c=-(.02708333333333333*i+.03430059523809524*a+.03149181547619048*o+.02634359154541446*s+.02156896735835538*u),l=.007669890873015873*a+.01299603174603175*o+.0148051353064374*s+.01454454953803912*u,h=-(.002275545634920635*o+.004830845032667949*s+.006558395368616723*u),f=.0006957236677288761*s+.001775193002406544*u,p=-.000217324089394402*u,d=Math.cos(2*n);return n+Math.sin(2*n)*(-(.5*e+.2083333333333333*r+.09375*i+.04878472222222222*a+.02916666666666667*o+.01938905423280423*s+.01388255931712963*u)-c+h-p+d*(2*(.1041666666666667*r+.0875*i+.06050347222222222*a+.04151785714285714*o+.02958958540013228*s+.02203667534722222*u)-4*l+6*f+d*(4*c-12*h+24*p+d*(8*l-32*f+d*(16*h-80*p+d*(32*f+64*d*p))))))}return 0==n||t.V(t.J(n),1.570796326794897)?r=n:(a=(i=Math.sqrt(e))*Math.sin(n),r=Math.tan(.7853981633974483+n/2)*Math.pow((1-a)/(1+a),i/2),r=2*Math.atan(r)-1.570796326794897),r},n.IP=function(e,n){if(t.Ai(e)||0==n||t.V(t.J(n),1.570796326794897))return n;if(.006884661117170036>e){var r=e*(f=e*(h=e*(d=e*e))),i=e*(p=e*r),a=.05833333333333333*h+.07232142857142858*f+.05634300595238095*r+.0355325796406526*p+.020235546186067*i,o=.02653149801587302*f+.04379960317460317*r+.0429211791776896*p+.03255384637546096*i,s=.01294022817460318*r+.02668104344536636*p+.03155651254609588*i,u=.00659454790965208*p+.0163075268674227*i,c=.003463473736911237*i,l=Math.cos(2*n);return n+Math.sin(2*n)*(.5*e+.2083333333333333*d+.08333333333333333*h+.03611111111111111*f+.01875*r+.01195601851851852*p+.008863673941798942*i-a+s-c+l*(2*(.1458333333333333*d+.1208333333333333*h+.07039930555555556*f+.03616071428571429*r+.01839451058201058*p+.01017113095238095*i)-4*o+6*u+l*(4*a-12*s+24*c+l*(8*o-32*u+l*(16*s-80*c+l*(32*u+64*l*c))))))}var h=Math.sqrt(e),f=h/2,p=Math.tan(.7853981633974483+n/2);e=0,a=1;for(var d=n;0!=a;d=i)r=h*Math.sin(d),i=p*Math.pow((1+r)/(1-r),f),i=2*Math.atan(i)-1.570796326794897,e++,(t.V(i,d)||3e4<e)&&(a=0);return d},n}()}(J||(J={})),function(e){var t=function(){function t(t){this.Dl=this.Ct=null,this.qw=!1,this.qB=this.rB=0,this.oB=new e.b,this.BB=new e.b,this.bx=!1,this.Oq=new e.g,this.jI=this.Zw=0,this.$w=null,this.Gk=!1,this.Yo=null,this.MA=0,this.Ze=t,this.it=e.Ab.ew(this.Ze,0,!0),this.oB.Tc(),this.BB.Tc(),this.GI=NaN;var n=t.getCode();0<n?(this.Rk=n,e.zf.getCode(t)):this.Rk=e.zf.getCode(t),0>this.Rk&&(this.Rk=0);var r=this.Ze.getType();if(this.XH=r==e.Pc.PE_TYPE_PROJCS?2:1,r==e.Pc.PE_TYPE_PROJCS&&!t.loadConstants())throw e.f.I("PeProjcs.loadConstants failed");n=r==e.Pc.PE_TYPE_GEOGCS?this.Ze:this.Ze.getGeogcs(),r!=e.Pc.PE_TYPE_GEOGCS&&e.zf.getCode(n),this.Yo=t.getUnit(),this.GI=n.getPrimem().getLongitude(),this.jI=t=n.getUnit().getUnitFactor(),t=Math.PI/(180*t),1e-10>Math.abs(t-1)&&(t=1),this.qB=t,0!=(r&e.Pc.PE_TYPE_PROJCS)?(this.rB=1/(n=this.Ze).getUnit().getUnitFactor(),this.Zw=.001/this.Ze.getUnit().getUnitFactor(),this.$w=e.ng.generate(n,e.ng.PE_PCSINFO_OPTION_NONE),this.Gk=this.$w.isPannableRectangle(),this.MA=e.Ab.BO(this.$w.getCentralMeridian(),this.qB)):(this.bx=this.Gk=!0,this.rB=0,r=1/n.getUnit().getUnitFactor(),this.Zw=.001/n.getDatum().getSpheroid().getAxis()*r,this.MA=0),this.Gk&&(this.cy(),this.KL(),this.LL(),this.JL(),this.UZ(),this.VZ())}return t.prototype.Gs=function(){return this.Rk},t.prototype.xj=function(){return this.$w},t.vz=function(e,t){return e==t||null!=e&&null!=t&&0==e.Rk&&0==t.Rk&&e.it===t.it},t.prototype.Cc=function(){return this.Gk},t.prototype.nh=function(e){e.H(this.Lo)},t.prototype.Xv=function(){return this.Lo.o},t.prototype.Wv=function(){return this.Lo.v},t.prototype.WS=function(e){e.H(this.ax)},t.prototype.UZ=function(){var t=this.Ze.getType();if(t==e.Pc.PE_TYPE_PROJCS){t=this.Ze;var n=this.xj().getCentralMeridian(),r=t.getGeogcs();if(null==r)throw e.f.Y("internal error");n=[[n+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],e.Kh.geogToProj(t,1,n),n=n[0][0],r=t.getParameters()[e.Pc.PE_PARM_X0].getValue();var i=this.sk();t=new e.g,i.s(t),n=(i=Math.abs(n-r))+r,r=-1*i+r,i=t.B,t=t.A;var a=new e.g;a.H(r,t,n,i),null==this.Lo&&(this.Lo=a)}else{if(t!=e.Pc.PE_TYPE_GEOGCS)throw e.f.Y("internal error");r=1/this.Ze.getUnit().getUnitFactor()*Math.PI,(t=new e.g).H(-r,-r/2,r,r/2),null==this.Lo&&(this.Lo=t)}},t.prototype.VZ=function(){var t=this.Ze.getType();if(t==e.Pc.PE_TYPE_PROJCS){var n=this.Ze;if(t=this.xj().getCentralMeridian(),null==(n=n.getGeogcs()))throw e.f.Y("internal error");n=1/n.getUnit().getUnitFactor()*Math.PI;var r=this.Bs(),i=new e.g;r.s(i),(r=new e.g).H(t-n,i.A,t+n,i.B),null==this.ax&&(this.ax=r)}else{if(t!=e.Pc.PE_TYPE_GEOGCS)throw e.f.Y("internal error");n=1/this.Ze.getUnit().getUnitFactor()*Math.PI,(t=new e.g).H(-n,-n/2,n,n/2),null==this.ax&&(this.ax=t)}},t.prototype.Sd=function(){return this.qB},t.prototype.Am=function(){return this.rB},t.prototype.Bs=function(){if(this.Gk)return this.Dl;var e=this.Dl;return null!=e?e:(this.cy(),this.Dl)},t.prototype.Cs=function(){return this.Gk?null:(null!=this.Dl||this.cy(),this.JH)},t.prototype.cy=function(){if(this.Ze.getType()==e.Pc.PE_TYPE_PROJCS){var t=this.Ze,n=t.getGeogcs(),r=t.horizonGcsGenerate();if(null!=r){var i=r[0].getNump(),a=r[0].getKind();t=0<r[0].getInclusive();var o=this.Sd(),s=90*o,u=360*o,c=370*o,l=180*o*e.Pc.PE_HORIZON_DELTA/Math.PI,h=new e.g,f=null;if(1<i)for(var p=1;p<i;p++)if(r[p].getKind()==e.Pc.PE_HORIZON_LINE){null==f&&(f=new e.Oa);var d=r[p].getCoord();f.Zx(d[0][0],d[0][1]),f.Cj(d[1][0],d[1][1])}if(a==e.Pc.PE_HORIZON_RECT)r=r[0].getCoord(),h.H(r[0][0],r[0][1]),h.Nb(r[1][0],r[1][1]),Math.abs(h.B-s)<1e-7*l&&(h.B=s),Math.abs(h.A+s)<1e-7*l&&(h.A=-s),h.N()>c&&h.H(r=-400*o,h.A,r+5*u,h.B),r=new e.Ih(h),null==this.Dl&&(this.Dl=r,this.qw=t);else{if(c=new e.Ga,u=this.xj().isGcsHorizonMultiOverlap(),h=e.Nu.OF(n,e.Ou.Integer64),u){for(c=new e.qM,l=e.Jh.local().U(c,h,null),p=0;p<i;p++)if(r[p].getKind()==e.Pc.PE_HORIZON_POLY){for(n=r[p].getSize(),o=r[p].getCoord(),a=[],s=0;s<n;s++)a[s]=e.b.construct(o[s][0],o[s][1]);r[p].getInclusive(),u&&((o=new e.Ga).dl(a,n-1),c.FZ(o),l.xe())}c=l.next()}else for(p=0;p<i;p++)if(r[p].getKind()==e.Pc.PE_HORIZON_POLY){for(n=r[p].getSize(),o=r[p].getCoord(),u=[],s=0;s<n;s++)u[s]=e.b.construct(o[s][0],o[s][1]);r[p].getInclusive(),c.dl(u,n-1)}t?e.ak.local().Pn(c,h,1):e.Cp.local().Pn(c,h,1),e.kj.local().Pn(c,h,1),null==this.Dl&&(this.Dl=c,this.qw=t,this.JH=f)}}}},t.prototype.Pv=function(){return this.Gk||null==this.Dl&&this.cy(),this.qw},t.prototype.KL=function(){if(2==this.XH){var t=this.Ze.horizonPcsGenerate();if(null!=t){var n=t[0].getKind();t[0].getInclusive();var r=t[0].getNump(),i=!1;if(n==e.Pc.PE_HORIZON_RECT)t=t[0].getCoord(),(r=new e.g).H(t[0][0],t[0][1]),r.Nb(t[1][0],t[1][1]),t=new e.Ih(r);else{for(n=-1,i=0;i<r;i++)t[i].getKind()==e.Pc.PE_HORIZON_POLY&&(n=i);for(i=t[n].getSize()-1,t=t[n].getCoord(),r=[],n=0;n<i;n++)r[n]=e.b.construct(t[n][0],t[n][1]);t=n=new e.Ga,n.dl(r,i),i=!0}this.xj().isDensificationNeeded()&&(r=1e5*this.Am(),t=e.im.local().U(t,r,null)),i&&(i=new e.Ih,t.qn(i),t.Pe(),t.Pb(),t.DS(),e.ak.local().Pn(t,null,1)),null==this.Ct&&(this.Ct=t)}}},t.prototype.sk=function(){if(this.Gk)return this.Ct;var e=this.Ct;return null!=e?e:(this.KL(),this.Ct)},t.prototype.LL=function(){if(this.Ze.getType()==e.Pc.PE_TYPE_PROJCS){var t=90*this.Sd();e.Kh.geogToProj(this.Ze,2,t=[[0,t],[0,-t]]);var n=this.xj(),r=n.getNorthPoleLocation()!=e.ng.PE_POLE_OUTSIDE_BOUNDARY;n=n.getSouthPoleLocation()!=e.ng.PE_POLE_OUTSIDE_BOUNDARY,this.bx||(r&&this.oB.ka(t[0][0],t[0][1]),n&&this.BB.ka(t[1][0],t[1][1]))}this.bx=!0},t.prototype.bA=function(e,t){this.Gk||this.bx||this.LL(),t.K(e?this.BB:this.oB)},t.prototype.JL=function(){if(1==this.XH){var t=400*this.Sd();this.Oq.H(-t,-t,t,t)}else t=e.ng.generate(this.Ze,e.ng.PE_PCSINFO_OPTION_DOMAIN),t=e.g.construct(t.getDomainMinx(),t.getDomainMiny(),t.getDomainMaxx(),t.getDomainMaxy()),this.Oq.u()&&this.Oq.H(t)},t.prototype.vS=function(e){this.Gk&&e.H(this.Oq),this.Oq.u()&&this.JL(),e.H(this.Oq)},t.prototype.Cm=function(){return this.GI},t.prototype.Wh=function(){return this.MA},t.prototype.Ld=function(){return this.Yo},t.prototype.Ds=function(){return this.jI},t}();e.vD=t}(J||(J={})),function(e){var t=function(){function t(t){this.cV=t,this.it=e.Ab.ew(t,0,!0);var n=t.getCode();this.$s=0<n?n:e.zf.getCode(t),0>this.$s&&(this.$s=0),this.Yo=n=this.cV.getUnit(),this.xI=1/n.getUnitFactor(),e.zf.getCode(t)}return t.vz=function(e,t){return e==t||null!=e&&null!=t&&0==e.$s&&0==t.$s&&e.it===t.it},t.prototype.Gs=function(){return this.$s},t}();e.XM=t}(J||(J={})),function(e){e.gh=function(){function t(){}return t.vb=function(t,n,r,i,a,o,s,u){if(null!=o||null!=s||null!=u){i=e.C.ba(i),n=e.C.ba(n),r=e.C.ba(r),a=e.C.ba(a),1.570796326794897<e.l.J(r)&&(r=e.l.ub(3.141592653589793,r)-r,n=e.C.ba(n+3.141592653589793)),1.570796326794897<e.l.J(a)&&(a=e.l.ub(3.141592653589793,a)-a,i=e.C.ba(i+3.141592653589793));var c=e.C.ba(i-n);if(e.l.V(r,a)&&(e.l.V(n,i)||e.l.V(e.l.J(r),1.570796326794897)))null!=o&&(o.j=0),null!=s&&(s.j=0),null!=u&&(u.j=0);else{if(e.l.V(r,-a)){if(e.l.V(e.l.J(r),1.570796326794897))return null!=o&&(o.j=3.141592653589793*t),null!=s&&(s.j=e.C.ba(0<r?3.141592653589793-e.C.ba(i):i)),void(null!=u&&(u.j=e.C.ba(0<r?i:3.141592653589793-e.C.ba(i))));if(e.l.V(e.l.J(c),3.141592653589793))return null!=o&&(o.j=3.141592653589793*t),null!=s&&(s.j=0),void(null!=u&&(u.j=0))}var l=1.570796326794897==e.l.J(r)?0:Math.cos(r),h=Math.sin(r),f=1.570796326794897==e.l.J(a)?0:Math.cos(a),p=Math.sin(a),d=1.570796326794897==e.l.J(c)?0:Math.cos(c),v=3.141592653589793==e.l.J(c)?0:Math.sin(c);if(null!=o){var y=Math.sin((a-r)/2);c=Math.sin(c/2),o.j=2*Math.asin(Math.sqrt(y*y+l*f*c*c))*t}null!=s&&(s.j=e.l.V(e.l.J(r),1.570796326794897)?0>r?i:e.C.ba(3.141592653589793-i):Math.atan2(f*v,l*p-h*f*d)),null!=u&&(e.l.V(e.l.J(a),1.570796326794897)?u.j=0>a?n:e.C.ba(3.141592653589793-n):(u.j=Math.atan2(l*v,p*l*d-f*h),u.j=e.C.ba(u.j+3.141592653589793)))}}},t.Bf=function(t,n,r,i,a,o,s){if(null!=o||null!=s){n=e.C.ba(n),r=e.C.ba(r),1.570796326794897<e.l.J(r)&&(r=e.l.ub(3.141592653589793,r)-r,n=e.C.ba(n+3.141592653589793)),e.l.V(e.l.J(r),1.570796326794897)&&(n=0),a=e.C.ba(a);var u=e.l.V(e.l.J(a),1.570796326794897)?0:Math.cos(a),c=e.l.V(e.l.J(a),3.141592653589793)?0:Math.sin(a),l=e.l.V(e.l.J(r),1.570796326794897)?0:Math.cos(r),h=Math.sin(r);i=e.l.V(e.l.J(t=i/t),1.570796326794897)?0:Math.cos(t);var f=e.l.V(e.l.J(t),3.141592653589793)?0:Math.sin(t),p=Math.asin(h*i+l*f*u);null!=s&&(s.j=p),null!=o&&(o.j=e.l.V(e.l.J(p),1.570796326794897)?e.l.V(r,-p)?0>p?a:e.C.ba(3.141592653589793-a):n:e.l.V(e.l.J(r),1.570796326794897)&&e.l.V(t,3.141592653589793)?0>r?a:e.C.ba(3.141592653589793-a):e.C.ba(n+Math.atan2(f*c,l*i-h*f*u)))}},t}()}(J||(J={})),function(e){e.$k=function(){function t(){}return t.vb=function(t,n,r,i,a,o,s,u,c){var l=new e.da(0),h=new e.da(0),f=[0,0,0],p=[0,0,0],d=[0,0,0],v=new e.da(0),y=new e.da(0),b=new e.da(0),g=new e.da(0),m=new e.da(0);if(null!=s||null!=u||null!=c)if(e.l.Ai(n))e.gh.vb(t,r,i,a,o,s,u,c);else{a=e.C.ba(a),r=e.C.ba(r);var w=e.C.ba(a-r);if(e.l.V(i,o)&&(e.l.V(r,a)||e.l.V(e.l.J(i),1.570796326794897)))null!=s&&(s.j=0),null!=u&&(u.j=0),null!=c&&(c.j=0);else{if(e.l.V(i,-o)){if(e.l.V(e.l.J(i),1.570796326794897))return null!=s&&(s.j=2*e.C.Hg(t,n)),null!=u&&(u.j=e.C.ba(0<i?3.141592653589793-e.C.ba(a):a)),void(null!=c&&(c.j=e.C.ba(0<i?a:3.141592653589793-e.C.ba(a))));e.l.V(e.l.J(w),3.141592653589793)&&(null!=s&&(s.j=2*e.C.Hg(t,n)),null!=u&&(u.j=0),null!=c&&(c.j=0))}else(e.l.V(e.l.J(i),1.570796326794897)||e.l.V(e.l.J(o),1.570796326794897))&&(e.l.V(e.l.J(i),1.570796326794897)?r=a:a=r);var O=0;if(0>w){O=1;var j=r;r=a,a=j,j=i,i=o,o=j}w=e.C.Xt(n,i);var _=e.C.Xt(n,o);null==u&&null==c||(e.gh.vb(t,r,w,a,_,null,l,h),l=Math.atan2(Math.sin(l.j)*Math.cos(i-w),Math.cos(l.j)),h=Math.atan2(Math.sin(h.j)*Math.cos(o-_),Math.cos(h.j)),0!=O&&(j=l,l=h,h=j),null!=u&&(u.j=l),null!=c&&(c.j=h)),null!=s&&(e.C.hk(1,n,i,r,0,b,g,m),f[0]=b.j,f[1]=g.j,f[2]=m.j,e.C.hk(1,n,o,a,0,b,g,m),p[0]=b.j,p[1]=g.j,p[2]=m.j,d[0]=f[1]*p[2]-p[1]*f[2],d[1]=-(f[0]*p[2]-p[0]*f[2]),d[2]=f[0]*p[1]-p[0]*f[1],n=1-e.C.gm(n,e.C.nr(n,e.C.Rj(n,Math.acos(d[2]/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]))))),n*=2-n,u=Math.atan2(-d[1],-d[0]),d=e.C.ba(u-1.570796326794897),u=e.C.ba(u+1.570796326794897),d=e.l.J(e.C.ba(r-d))<=e.l.J(e.C.ba(r-u))?d:u,e.gh.vb(1,d,0,r,w,v,null,null),e.gh.vb(1,d,0,a,_,y,null,null),3.141592653589793<v.j+y.j&&(d=e.C.ba(d+3.141592653589793),e.gh.vb(1,d,0,r,w,v,null,null),e.gh.vb(1,d,0,a,_,y,null,null)),v.j*=e.l.ub(1,i),y.j*=e.l.ub(1,o),v.j=e.C.Rj(n,v.j),y.j=e.C.Rj(n,y.j),r=e.C.q(t,n,v.j),t=e.C.q(t,n,y.j),s.j=e.l.J(t-r))}}},t.Bf=function(t,n,r,i,a,o,s,u){var c=0,l=new e.da(0),h=new e.da(0),f=[0,0,0],p=[0,0,0],d=new e.da(0),v=new e.da(0),y=new e.da(0);if(null!=s||null!=u)if(e.l.Ai(n))e.gh.Bf(t,r,i,a,o,s,u);else if(e.l.qd(a))null!=s&&(s.j=r),null!=u&&(u.j=i);else if(o=e.C.ba(o),0>a&&(a=e.l.J(a),o=e.C.ba(o+3.141592653589793)),r=e.C.ba(r),i=e.C.ba(i),1.570796326794897<e.l.J(i)&&(r=e.C.ba(r+3.141592653589793),i=e.l.ub(3.141592653589793,i)-i),e.l.V(e.l.J(i),1.570796326794897)&&(r=0),e.l.qd(i)){var b=e.l.J(1.570796326794897-e.l.J(o));b=e.C.Rj(n,b),b=1-e.C.gm(n,e.C.nr(n,b)),t=a/e.C.Hg(t,b*=2-b)*1.570796326794897,t=e.C.kr(b,t),t=e.C.Xt(b,t),e.gh.Bf(1,r,i,t,o,s,l),null!=u&&(c=l.j),null!=u&&(u.j=e.C.Rj(n,c))}else if(e.l.V(e.l.J(i),1.570796326794897))l=2*(c=e.C.Hg(t,n)),o=0<(t=e.l.ub(1.570796326794897,i))?e.C.ba(3.141592653589793-o):o,e.l.J(i=c-a)<=c?null!=s&&(s.j=o):(i=Math.floor(a/l),0==e.L.truncate(i%2)?(null!=s&&(s.j=o),a-=i*l):(null!=s&&(s.j=e.C.ba(o+3.141592653589793)),a=(i+1)*l-a),i=c-a),null!=u&&(u.j=e.C.kr(n,i/c*t));else{b=e.C.Xt(n,i),o=Math.atan2(Math.sin(o),Math.cos(o)*Math.cos(i-b));var g=e.L.truncate(e.l.ub(1,b))*(1.570796326794897>=e.l.J(o)?1:-1);o=e.C.ba(r+Math.atan(Math.tan(o)*-Math.sin(b))),e.gh.vb(t,o,0,r,b,null,h,null),b=e.l.J(1.570796326794897-e.l.J(h.j)),b=e.C.Rj(n,b),b=1-e.C.gm(n,e.C.nr(n,b)),b*=2-b,e.C.hk(1,n,0,o,0,d,v,y),f[0]=d.j,f[1]=v.j,f[2]=y.j,e.C.hk(1,n,i,r,0,d,v,y),p[0]=d.j,p[1]=v.j,p[2]=y.j,i=Math.acos((f[0]*p[0]+f[1]*p[1]+f[2]*p[2])/Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])),i=e.C.Rj(b,i),a=0<(i=e.C.q(t,b,i)+a*g)?h.j:e.C.ba(h.j+3.141592653589793),t=e.l.J(i)/e.C.Hg(t,b)*1.570796326794897,t=e.C.kr(b,t),t=e.C.Xt(b,t),e.gh.Bf(1,o,0,t,a,s,l),null!=u&&(c=l.j),null!=u&&(u.j=e.C.Rj(n,c))}},t}()}(J||(J={})),function(e){e.Ku=function(){function t(){}return t.vb=function(t,n,r,i,a,o,s,u,c){var l=0,h=0,f=0;if(null!=s||null!=u||null!=c)if(e.l.Ai(n))e.gh.vb(t,r,i,a,o,s,u,c);else{var p=e.C.ba(a-r);if(e.l.V(i,o)&&(e.l.qd(p)||e.l.V(e.l.J(i),1.570796326794897)))null!=s&&(s.j=0),null!=u&&(u.j=0),null!=c&&(c.j=0);else{if(e.l.V(i,-o)){if(e.l.V(e.l.J(i),1.570796326794897))return null!=s&&(s.j=2*e.C.Hg(t,n)),null!=u&&(u.j=e.C.ba(0<i?3.141592653589793-e.C.ba(a):a)),void(null!=c&&(c.j=e.C.ba(0<i?a:3.141592653589793-e.C.ba(a))));e.l.V(e.l.J(p),3.141592653589793)&&(null!=s&&(s.j=2*e.C.Hg(t,n)),null!=u&&(u.j=0),null!=c&&(c.j=0))}else{if(e.l.V(e.l.J(i),1.570796326794897)||e.l.V(e.l.J(o),1.570796326794897))return void e.$k.vb(t,n,r,i,a,o,s,u,c);if(e.l.qd(p)||e.l.V(e.l.J(p),3.141592653589793))return void e.$k.vb(t,n,r,i,a,o,s,u,c)}var d=1-Math.sqrt(1-n),v=n/(1-n),y=t*(1-d);t=e.C.nr(n,i);var b=e.C.nr(n,o);n=1.570796326794897==e.l.J(t)?0:Math.cos(t);var g=Math.sin(t),m=1.570796326794897==e.l.J(b)?0:Math.cos(b),w=Math.sin(b),O=p,j=Math.cos(O),_=Math.sin(O),x=1,k=0;do{var S=O,M=Math.sqrt(Math.pow(m*_,2)+Math.pow(n*w-g*m*j,2)),I=g*w+n*m*j,T=Math.atan2(M,I);if(0==M){x=0;break}var A=n*m*_/M;if(l=Math.cos(Math.asin(A)),h=I-2*g*w/(l*=l),1<e.l.J(h)&&(h=e.l.ub(1,h)),O=p+(1-(O=d/16*l*(4+d*(4-3*l))))*d*A*(T+O*M*(h+O*I*(2*(f=h*h)-1))),j=Math.cos(O),_=Math.sin(O),k++,3.141592653589793<e.l.J(O)&&30<k){x=0;break}}while(5e3>=k&&!e.l.V(S,O));if(0!=x)d=(v*=l)*(256+v*(v*(74-47*v)-128))/1024,null!=s&&(s.j=y*(1+v*(4096+v*(v*(320-175*v)-768))/16384)*(T-d*M*(h+d/4*(I*(2*f-1)-d/6*h*(4*M*M-3)*(4*f-3))))),null!=u&&(u.j=e.l.V(e.l.J(i),1.570796326794897)?0>i?a:e.C.ba(3.141592653589793-a):Math.atan2(m*_,n*w-g*m*j)),null!=c&&(e.l.V(e.l.J(o),1.570796326794897)?c.j=0>o?r:e.C.ba(3.141592653589793-r):(c.j=Math.atan2(n*_,n*w*j-g*m),c.j=e.C.ba(c.j+3.141592653589793)));else{O=e.l.ub(3.141592653589793,p),I=g*w-n*m,T=Math.acos(I),M=Math.sin(T),l=1,k=A=0;do{f=A,j=1-.25*(A=d*(l*=l)*(1+d+d*d))+.1875*(h=d*d*(j=l*l)*(1+2.25*d))-.1953125*(x=d*d*d*j*l),A=.25*A-.25*h+.29296875*x,_=.03125*h-.05859375*x,x*=.00651041666666667,1<e.l.J(h=I-2*g*w/l)&&(h=e.l.ub(1,h)),l=Math.acos(h),I=Math.cos(2*l),S=Math.cos(3*l),_=(A=e.l.V(i,-o)?e.C.ba(3.141592653589793-p)/(3.141592653589793*d*j):e.C.ba(O-p)/(d*(j*T+A*M*h+_*Math.sin(2*T)*I+x*Math.sin(3*T)*S)))*M/(n*m),O=1.570796326794897<e.l.J(p)?e.l.ub(3.141592653589793,_)-Math.asin(_):Math.asin(_),j=Math.cos(O),M=Math.sqrt(Math.pow(m*_,2)+Math.pow(n*w-g*m*j,2)),T=3.141592653589793-Math.asin(e.l.J(M)),I=Math.cos(T),l=Math.cos(Math.asin(A)),k++}while(70>=k&&!e.l.V(f,A));null!=s&&(j=1+(v*=l*=l)*(4096+v*(v*(320-175*v)-768))/16384,e.l.V(i,-o)?s.j=3.141592653589793*y*j:(h=I-2*g*w/l,l=Math.acos(h),I=Math.cos(2*l),S=Math.cos(3*l),s.j=y*(j*T+v*(v*(128+v*(35*v-60))-512)/2048*M*h+v*(5*v-4)/6144*v*v*Math.sin(2*T)*I+x*Math.sin(3*T)*S+-762939453125e-16*v*v*v*v*Math.sin(4*T)*Math.cos(4*l)))),null!=u&&(e.l.qd(i)&&e.l.qd(o)?(l=Math.sqrt(1-A*A),u.j=Math.acos(l),0>p&&(u.j*=-1)):e.l.V(e.l.J(i),1.570796326794897)?u.j=0>i?a:e.C.ba(3.141592653589793-a):(s=A/n,y=Math.sqrt(1-s*s),0>n*w-g*m*Math.cos(O)&&(y*=-1),u.j=Math.atan2(s,y),e.l.V(i,-o)&&e.l.J(e.C.ba(r-a))>3.141592653589793*(1-d*Math.cos(i))&&(0<i&&1.570796326794897>e.l.J(u.j)||0>i&&1.570796326794897<e.l.J(u.j))&&(u.j=e.l.ub(3.141592653589793,u.j)-u.j))),null!=c&&(e.l.qd(i)&&e.l.qd(o)?(l=Math.sqrt(1-A*A),c.j=Math.acos(l),0<=p&&(c.j*=-1)):e.l.V(e.l.J(o),1.570796326794897)?c.j=0>o?r:e.C.ba(3.141592653589793-r):(p=A/m,s=Math.sqrt(1-p*p),y=Math.sin(O/2),0>Math.sin(b-t)-2*n*w*y*y&&(s*=-1),c.j=Math.atan2(p,s),c.j=e.C.ba(c.j+3.141592653589793),e.l.V(i,-o)&&!e.l.qd(i)&&!e.l.V(e.l.J(i),1.570796326794897)&&e.l.J(e.C.ba(r-a))>3.141592653589793*(1-d*Math.cos(i))&&(null!=u?y=u.j:(s=A/n,y=Math.sqrt(1-s*s),0>n*w-g*m*Math.cos(O)&&(y*=-1),y=Math.atan2(s,y),e.l.V(i,-o)&&e.l.J(e.C.ba(r-a))>3.141592653589793*(1-d*Math.cos(i))&&(0<i&&1.570796326794897>e.l.J(y)||0>i&&1.570796326794897<e.l.J(y))&&(y=e.l.ub(3.141592653589793,y)-y)),1.570796326794897>=e.l.J(y)&&1.570796326794897<e.l.J(c.j)||1.570796326794897<=e.l.J(y)&&1.570796326794897>e.l.J(c.j))&&(c.j=-1*e.C.ba(c.j+3.141592653589793))))}}}},t.Bf=function(t,n,r,i,a,o,s,u){if(null!=s||null!=u)if(e.l.Ai(n))e.gh.Bf(t,r,i,a,o,s,u);else if(o=e.C.ba(o),e.l.V(e.l.J(i),1.570796326794897)||e.l.qd(o)||e.l.V(e.l.J(o),3.141592653589793))e.$k.Bf(t,n,r,i,a,o,s,u);else{var c=1.570796326794897==e.l.J(o)?0:Math.cos(o),l=3.141592653589793==e.l.J(o)?0:Math.sin(o);e.l.V(e.l.J(i),1.570796326794897)&&(r=0),o=1-Math.sqrt(1-n);var h=e.C.nr(n,i);i=1.570796326794897==e.l.J(h)?0:Math.cos(h);var f=Math.sin(h);h=Math.atan2(Math.tan(h),c);var p=i*l,d=p*p,v=1-d,y=n/(1-n)*v,b=(n=y*(256+y*(y*(74-47*y)-128))/1024)/4,g=n/6,m=a/(t*(1-o)*(1+y*(4096+y*(y*(320-175*y)-768))/16384)),w=m;do{var O=w;a=1.570796326794897==e.l.J(w)?0:Math.cos(w);var j=(y=3.141592653589793==e.l.J(w)?0:Math.sin(w))*y;w=n*y*((t=Math.cos(2*h+w))+b*(a*(2*(w=t*t)-1)-g*t*(4*j-3)*(4*w-3)))+m}while(!e.l.V(O,w));a=1.570796326794897==e.l.J(w)?0:Math.cos(w),y=3.141592653589793==e.l.J(w)?0:Math.sin(w),null!=s&&(l=Math.atan2(y*l,i*a-f*y*c),v=o/16*v*(4+o*(4-3*v)),t=Math.cos(2*h+w),s.j=e.C.ba(r+(l-(1-v)*o*p*(w+v*y*(t+v*a*(2*t*t-1)))))),null!=u&&(v=f*y-i*a*c,v=(1-o)*Math.sqrt(d+v*v),u.j=Math.atan2(f*a+i*y*c,v))}},t}()}(J||(J={})),function(e){e.wD=function(){function t(){}return t.vb=function(t,n,r,i,a,o,s,u,c){var l=e.C.ba(a-r),h=e.l.V(e.l.J(i),1.570796326794897),f=e.l.V(e.l.J(o),1.570796326794897);if(e.l.V(i,o)&&(e.l.qd(l)||h))null!=s&&(s.j=0),null!=u&&(u.j=0),null!=c&&(c.j=0);else{if(e.l.Ai(n)){var p=Math.sin(i),d=Math.sin(o);p=Math.sqrt((1+p)/(1-p)),d=Math.sqrt((1+d)/(1-d)),p=Math.log(d)-Math.log(p),p=Math.atan2(l,p),null!=s&&(s.j=e.l.V(i,o)?e.l.J(t*Math.cos(i)*l):e.l.J((t*o-t*i)/Math.cos(p)))}else d=e.C.wx(n,o),p=Math.sin(e.C.wx(n,i)),d=Math.sin(d),p=Math.sqrt((1+p)/(1-p)),d=Math.sqrt((1+d)/(1-d)),p=Math.log(d)-Math.log(p),p=Math.atan2(l,p),null!=s&&(e.l.V(i,o)?s.j=e.l.J(t*l*Math.cos(i)/e.C.gm(n,i)):(l=e.C.q(t,n,i),t=e.C.q(t,n,o),s.j=e.l.J((t-l)/Math.cos(p))));null==u&&null==c||(s=e.C.ba(p+3.141592653589793),h&&f||!h&&!f||(h?p=0>i?a:e.C.ba(3.141592653589793-a):f&&(s=0>o?r:e.C.ba(3.141592653589793-r))),null!=u&&(u.j=p),null!=c&&(c.j=s))}},t.Bf=function(t,n,r,i,a,o,s,u){o=e.C.ba(o),0>a&&(a=e.l.J(a),o=e.C.ba(o+3.141592653589793)),e.l.Ai(n)?e.l.V(e.l.J(i),1.570796326794897)?(r=0>i?o:e.C.ba(3.141592653589793-o),3.141592653589793>=(o=a/t%6.283185307179586)?t=i-e.l.ub(o,i):(r=e.C.ba(r+3.141592653589793),t=-i+e.l.ub(o-3.141592653589793,i))):e.l.V(e.l.J(o),1.570796326794897)?(r=e.C.ba(r+e.l.ub(a,o)/(t*Math.cos(i))),t=i):(t=i+a*Math.cos(o)/t,1.570796326794897<e.l.J(t)&&(t=1.570796326794897),e.l.V(e.l.J(t),1.570796326794897)&&(e.l.qd(o)||e.l.V(e.l.J(o),3.141592653589793))||(1.570796316258184<e.l.J(t)&&(t=e.l.ub(1.570796316258184,t)),n=Math.sin(i),i=Math.sin(t),n=Math.sqrt((1+n)/(1-n)),i=Math.sqrt((1+i)/(1-i)),n=Math.log(i)-Math.log(n),r=e.C.ba(r+Math.tan(o)*n))):e.l.V(e.l.J(i),1.570796326794897)?(r=0>i?o:e.C.ba(3.141592653589793-o),o=a/e.C.WX(t,n),3.141592653589793>=(o%=6.283185307179586)?t=i-e.l.ub(o,i):(r=e.C.ba(r+3.141592653589793),t=-i+e.l.ub(o-3.141592653589793,i)),t=e.C.kr(n,t)):e.l.V(e.l.J(o),1.570796326794897)?(r=e.C.ba(r+e.l.ub(a,o)*e.C.gm(n,i)/(t*Math.cos(i))),t=i):(t=1.570796326794897*(a*Math.cos(o)+e.C.q(t,n,i))/e.C.Hg(t,n),1.570796326794897<e.l.J(t)&&(t=e.l.ub(1.570796326794897,t)),t=e.C.kr(n,t),e.l.V(e.l.J(t),1.570796326794897)&&(e.l.qd(o)||e.l.V(e.l.J(o),3.141592653589793))||(a=e.C.wx(n,i),i=e.C.wx(n,t),1.570796316258184<e.l.J(i)&&(i=e.l.ub(1.570796316258184,t),t=e.C.IP(n,i)),n=Math.sin(a),i=Math.sin(i),n=Math.sqrt((1+n)/(1-n)),i=Math.sqrt((1+i)/(1-i)),n=Math.log(i)-Math.log(n),r=e.C.ba(r+Math.tan(o)*n))),null!=s&&(s.j=r),null!=u&&(u.j=t)},t}()}(J||(J={})),function(e){e.gb=function(){function t(){}return t.Cz=function(t,n,r,i,a,o,s){e.Ku.vb(t,n,r,i,a,o,null,s,null)},t.Fi=function(t,n,r,i,a,o,s,u){e.Ku.Bf(t,n,r,i,a,o,s,u)},t.Ad=function(t,n,r,i,a,o,s,u,c,l){switch(l){case 2:e.$k.vb(t,n,r,i,a,o,s,u,c);break;case 3:e.xD.vb(t,n,r,i,a,o,s,u,c);break;case 1:e.wD.vb(t,n,r,i,a,o,s,u,c);break;default:e.Ku.vb(t,n,r,i,a,o,s,u,c)}},t.tj=function(t,n,r,i,a,o,s,u,c){switch(c){case 2:e.$k.Bf(t,n,r,i,a,o,s,u);break;case 3:e.xD.Bf(t,n,r,i,a,o,s,u);break;case 1:e.wD.Bf(t,n,r,i,a,o,s,u);break;default:e.Ku.Bf(t,n,r,i,a,o,s,u)}},t}()}(J||(J={})),function(e){var t=function(){function t(){this.y=this.x=null}return t.construct=function(n){var r=new t;return r.x=new e.Wb,r.x.set(n.x),r.y=new e.Wb,r.y.set(n.y),r},t.GF=function(n,r){var i=new t;return i.x=new e.Wb,i.x.set(n),i.y=new e.Wb,i.y.set(r),i},t.prototype.xg=function(){return this.x.xg()&&this.y.xg()},t.prototype.value=function(){return e.b.construct(this.x.value(),this.y.value())},t}();e.b_=t;var n=function(){function t(){this.z=this.y=this.x=null}return t.construct=function(n){var r=new t;return r.x=new e.Wb,r.x.set(n.x),r.y=new e.Wb,r.y.set(n.y),r.z=new e.Wb,r.z.set(n.z),r},t.GF=function(n,r,i){var a=new t;return a.x=new e.Wb,a.x.set(n),a.y=new e.Wb,a.y.set(r),a.z=new e.Wb,a.z.set(i),a},t.prototype.xg=function(){return this.x.xg()&&this.y.xg()&&this.z.xg()},t.prototype.value=function(){return new e.Id(this.x.value(),this.y.value(),this.z.value())},t.prototype.Vh=function(t){var n=new e.Wb,r=new e.Wb,i=new e.Wb;return n.Ul(this.x,t.x),r.Ul(this.y,t.y),i.Ul(this.z,t.z),(t=new e.Wb).nO(n,r),t.add(i),t},t.prototype.PF=function(n){var r=new t;r.x.Ul(this.y,n.z),r.y.Ul(this.z,n.x),r.z.Ul(this.x,n.y);var i=new e.Wb,a=new e.Wb,o=new e.Wb;return i.Ul(this.z,n.y),a.Ul(this.x,n.z),o.Ul(this.y,n.x),r.x.sub(i),r.y.sub(a),r.z.sub(o),r},t}();e.c_=n,e.ty=function(){function r(){}return r.PQ=function(e,t,n){var i=t.x;t=t.y,r.hk(1,e,Math.cos(i),Math.sin(i),Math.cos(t),Math.sin(t),n)},r.OQ=function(t,n){var i=new e.Id;return r.PQ(t,n,i),i},r.Q_=function(t,n,i,a,o,s){var u=new e.Id;return r.hk(t,n,i,a,o,s,u),u},r.hk=function(e,t,n,r,i,a,o){e/=Math.sqrt(1-t*a*a),o.H(e*i*n,e*i*r,e*(1-t)*a)},r.Fv=function(t,r){var i=new e.Wb,a=new e.Wb,o=new e.Wb,s=new e.Wb;i.cos(r.x),a.sin(r.x),o.cos(r.y),s.sin(r.y);var u=new e.Wb;return u.set(s),u.Gg(s),u.ep(t),u.ep(-1),u.uO(),u.sqrt(),(r=new e.Wb).set(1),r.um(u),(u=new e.Wb).set(r),u.Gg(o),u.Gg(i),(i=new e.Wb).set(r),i.Gg(o),i.Gg(a),(a=new e.Wb).set(r),a.ep(1-t),a.Gg(s),n.GF(u,i,a)},r.tP=function(e,t,n){var r=t.x,i=t.y;n.ka(Math.atan2(i,r),Math.atan2(t.z,(1-e)*Math.sqrt(r*r+i*i)))},r.F_=function(t,n,i){return t=new e.b,r.tP(n,i,t),t},r.lU=function(n,i,a,o){if(Math.abs(i.x-a.x)>Math.PI||Math.abs(i.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(i.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&i.x!=a.x)return NaN;if(o=r.NB(o,Math.min(i.x,a.x),Math.max(i.x,a.x)),!new e.uc(i.x,a.x).contains(o))return NaN;var s=t.construct(i);if(a=t.construct(a),s=r.Fv(n,s),a=r.Fv(n,a),(a=s.PF(a)).z.xg())return i.y;var u=new e.Wb;u.set(a.x),u.um(a.z),u.ep(-1);var c=new e.Wb;c.set(a.y),c.um(a.z),c.ep(-1);var l=new e.Wb;return l.set(c),l.Gg(c),(s=new e.Wb).set(u),s.Gg(u),s.add(l),s.sqrt(),s.xg()||u.xg()&&c.xg()?i.y:(i=Math.atan2(c.value(),u.value()),i=Math.atan2(s.value()*Math.cos(i-o),1-n),o=r.OQ(n,e.b.construct(o,i)),n=new e.Id(o.x,o.y,-o.z),o=a.value().Vh(o),n=a.value().Vh(n),Math.abs(n)<Math.abs(o)&&(i=-i),i)},r.vA=function(n,i,a,o,s){if(s[0]=NaN,s[1]=NaN,Math.abs(i.x-a.x)>Math.PI||Math.abs(i.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(i.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&i.x!=a.x||Math.abs(o)>=.5*Math.PI||0<i.y&&0<a.y&&i.y>o&&a.y>o||0>i.y&&0>a.y&&i.y<o&&a.y<o)return 0;var u=t.construct(i),c=t.construct(a);u=r.Fv(n,u),c=r.Fv(n,c);var l=u.PF(c);if(l.z.xg())return new e.uc(i.y,a.y).contains(o)?(s[0]=i.x,1):0;(c=new e.Wb).set(l.x),c.um(l.z),c.ep(-1),(u=new e.Wb).set(l.y),u.um(l.z),u.ep(-1),(l=new e.Wb).set(u),l.Gg(u);var h=new e.Wb;return h.set(c),h.Gg(c),h.add(l),h.sqrt(),h.xg()||c.xg()&&u.xg()?0==o?(s[0]=i.x,s[1]=a.x,2):0:(n=(1-n)*Math.tan(o)/h.value(),1<Math.abs(n)?0:(n=Math.acos(n),l=Math.atan2(u.value(),c.value()),c=Math.min(i.x,a.x),u=Math.max(i.x,a.x),a=r.NB(l-n,c,u),n=0!=o?r.NB(l+n,c,u):a,o=0,c<=a&&a<=u&&(s[o]=a,o++),n!=a&&c<=n&&n<=u&&(s[o]=n,2==++o&&Math.abs(s[0]-i.x)>Math.abs(s[1]-i.x)&&(i=s[0],s[0]=s[1],s[1]=i)),o))},r.NB=function(e,t,n){return e>n?e-=2*(t=Math.ceil((e-n)/(2*Math.PI)))*Math.PI:e<t&&(e+=2*(t=Math.ceil((t-e)/(2*Math.PI)))*Math.PI),e},r.EA=function(e,t){t[0]>.5*Math.PI?(e[0]+=Math.PI,t[0]=Math.PI-t[0]):t[0]<-.5*Math.PI&&(e[0]-=Math.PI,t[0]=-Math.PI-t[0])},r}()}(J||(J={})),function(e){e.fM=function(){function t(){}return t.GZ=function(n,r){var i=[0,0,0,0],a=new e.b;a.K(r),a.scale(9102==e.ab.hc(n).Ld().xc()?1:e.ab.hc(n).Ld().gi/3.141592653589793*180),-180>a.x?(a.x-=a.x%360,-180>a.x&&(a.x+=360)):180<a.x&&(a.x-=a.x%360,180<a.x&&(a.x-=360)),90<a.y&&(a.y=90),-90>a.y&&(a.y=-90);for(var o=-180,s=180,u=(n=40)-1,c=(r=(n+31)/32)-1;0<=c;c--)for(var l=u-32*c,h=Math.min(32,n-32*c),f=1;f<h;f+=2){var p=.5*(s+o);a.x>=p?(i[c]|=1<<l,o=p):s=p,l-=2,u-=2}for(o=-90,s=90,u=n-2,c=r-1;0<=c;c--)for(l=u-32*c,h=Math.min(32,n-32*c),f=0;f<h;f+=2)a.y>=(p=.5*(s+o))?(i[c]|=1<<l,o=p):s=p,l-=2,u-=2;return t.kR(i,8,8)},t.kR=function(e,t,n){for(var r=[],i=0;i<t;i++)r[i]="";for(var a=i=0,o=0;o<t;o++){var s=e[i]>>a&31;if(31<(a+=5)){var u=37-a;s&=(1<<u)-1,s|=(e[++i]&(1<<(a-=32))-1)<<u}r[t-1-o]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[s]}if(n>t)for(o=0;o<n-t;o++)r.push("0");else n<t&&(r.length=n);return r.join("")},t}()}(J||(J={})),function(e){var t={gcstol:[0,2e-9,1,2.241706620489156e-9,2,2.313672246530541e-9,3,8.98240164660333e-9,4,8.982433838020134e-9,5,8.982439417325895e-9,6,8.982466029667677e-9,7,8.982476760268133e-9,8,8.982492642167149e-9,9,8.98251968292634e-9,10,8.98253685210448e-9,11,8.982546725256576e-9,12,8.982557456049832e-9,13,8.98257333682596e-9,14,8.982575482995276e-9,15,8.982578488197342e-9,16,8.982579775336987e-9,17,8.9825840676828e-9,18,8.982599090925448e-9,19,8.982605529473397e-9,20,8.982609220517402e-9,21,8.982611968030573e-9,22,8.982616260407152e-9,23,8.982620552787834e-9,24,8.982633429954492e-9,25,8.982637722351582e-9,26,8.98264416095491e-9,27,8.982646307158072e-9,28,8.982654891980968e-9,29,8.982667769246082e-9,30,8.982674207892485e-9,31,8.982680646548117e-9,32,8.982682792768713e-9,33,8.982685798042582e-9,34,8.982689231436652e-9,35,8.98269137766135e-9,36,8.98269266624163e-9,37,8.982705114087017e-9,38,8.982706830791106e-9,39,8.982711958374661e-9,40,8.982712839964735e-9,41,8.982717991496125e-9,42,8.982721424914803e-9,43,8.982723571154887e-9,44,8.982727863638127e-9,45,8.982730868942154e-9,46,8.982734302370678e-9,47,8.982745033612112e-9,48,8.982751472369276e-9,49,8.982755764879183e-9,50,8.982762203651733e-9,51,8.982764776628385e-9,52,8.982766496171896e-9,53,8.98277722749025e-9,54,8.98278152002477e-9,55,8.98279933943848e-9,56,8.9829143024805e-9,57,8.982922161948598e-9,58,8.98292327314211e-9,59,8.982925667349601e-9,60,8.982932222965576e-9,61,8.982961298941316e-9,62,8.982965524049989e-9,63,8.982994818246099e-9,64,8.982994895706967e-9,65,8.98299489597736e-9,66,8.983000733443498e-9,67,8.983055097289157e-9,68,8.983064111047368e-9,69,8.983111996941178e-9,70,8.983120447446023e-9,71,8.98312748954554e-9,72,8.983134531656096e-9,73,8.983141573777694e-9,74,8.983148615910332e-9,75,8.983152841195215e-9,76,8.983153545409748e-9,77,8.983153827095593e-9,78,8.98315396793852e-9,79,8.983154249624393e-9,80,8.983155658054012e-9,81,8.983960794340072e-9,82,8.984061344391998e-9,83,8.984072829255685e-9,84,8.984194981201908e-9,85,8.984275233099427e-9,86,8.984326127007554e-9,87,8.984330099816539e-9,88,8.98433275258421e-9,89,8.984333047023206e-9,90,8.984333885258723e-9,91,8.984337959508212e-9,92,8.984365176209457e-9,93,8.984727360418079e-9,94,8.984901041679577e-9,95,8.98542662091587e-9,96,8.98610024130669e-9,97,8.992894229037531e-9,98,8.993203677616635e-9,99,8.993206178094346e-9,100,8.993216059187305e-9,101,8.99322029394808e-9,102,8.994627867045891e-9,103,9.467559984315793e-9,104,9.46881168618118e-9,105,9.980888154931644e-9,106,9.981105353606775e-9,107,9.983807356573187e-9,108,1.687060485811522e-8,109,1.688447560354875e-8,110,2.176606011487185e-8,111,2.225078816042032e-8,112,2.348476432064694e-8,113,2.348765250187846e-8,114,2.378108974103778e-8,115,3.14559636297708e-8,116,3.297788621680806e-8,117,3.667892343788279e-8,118,4.235973644320739e-8,119,4.794625900676345e-8,120,7.262742998235812e-8,121,7.499447580246377e-8,122,7.525056410964318e-8,123,7.979913581209237e-8,124,9.662020153976783e-8,125,9.799175562353741e-8,126,9.897353517547472e-8,127,1.02313891987647e-7,128,1.081460541960784e-7,129,1.21905913857622e-7,130,2.246893314238523e-7,131,2.297344808062643e-7,132,2.42984645941825e-7,133,2.754604784282804e-7,134,2.884548130346993e-7,135,3.370339971357784e-7,136,4.307953346848296e-7,137,5.208707228462029e-7,138,5.509209568565608e-7,139,6.452227422644406e-7,140,6.740679942715567e-7,141,6.861770001566745e-7,142,7.252630318111686e-7,143,7.441010326374328e-7,144,7.742672907173287e-7,145,9.629542775307953e-7,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6.666666666666667e-9,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},n={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};e.Vr=function(){function e(){}return e.yz=function(t){!1===e.Rp&&e.ju();var n=e.RR(t);if(-1==n){var r=e.gy(t);r!=t&&(n=e.yz(r))}return-1==n&&(r=e.OL(t))!=t&&(n=e.yz(r)),n},e.RR=function(t){return void 0!==e.lx[t]?e.lx[t]:-1},e.OR=function(t){!1===e.Rp&&e.ju();var n=e.aG(t);if(1e38==n){var r=e.gy(t);if(r!=t&&(n=e.aG(r)),1e38==n)return 1e-10}return n},e.sU=function(t){if(void 0!==e.qt[t])return!0;var n=e.gy(t);return n!=t&&void 0!==e.qt[n]},e.vU=function(t){if(void 0!==e.Qo[t])return!0;var n=e.gy(t);return n!=t&&void 0!==e.Qo[n]},e.aG=function(t){return!1===e.Rp&&e.ju(),void 0!==e.qt[t]?e.qt[t]:void 0!==e.Qo[t]?e.Qo[t]:1e38},e.OL=function(t){return!1===e.Rp&&e.ju(),void 0!==e.GB[t]?e.GB[t]:t},e.gy=function(t){return!1===e.Rp&&e.ju(),void 0!==e.HB[t]?e.HB[t]:t},e.ju=function(){for(var r,i=t,a=0;a<i.pcsid.length;a+=2)e.Qo[i.pcsid[a]]=i.pcstol[2*i.pcsid[a+1]+1];for(a=0;a<i.pcsidc.length;a+=1)for(var o=(r=i.pcsidc[a])[0];o<=r[1];o++)e.Qo[o]=i.pcstol[2*r[2]+1];for(a=0;a<i.gcsid.length;a+=2)e.qt[i.gcsid[a]]=i.gcstol[2*i.gcsid[a+1]+1];for(a=0;a<i.gcsidc.length;a+=1)for(o=(r=i.gcsidc[a])[0];o<=r[1];o++)e.Qo[o]=i.gcstol[2*r[2]+1];for(a=0;a<n.c.length;a+=1)for(o=(r=n.c[a])[0];o<=r[1];o++)e.lx[o]=r[2];for(a=0;a<n.nc.length;a+=2)e.lx[n.nc[a]]=n.nc[a+1];for(n=null,a=0;a<i.newtoold.length;a+=2)e.GB[i.newtoold[a+1]]=i.newtoold[a],e.HB[i.newtoold[a]]=i.newtoold[a+1];t=null,e.Rp=!0},e.Rp=!1,e.qt=[],e.Qo=[],e.GB=[],e.HB=[],e.lx=[],e}()}(J||(J={})),function(e){function t(e){return 0===e.length?'""':'"'==e[0]||"."==e[0]||"0"<=e[0]&&"9">=e[0]?e:'"'+e.trim()+'"'}var n=[];e.FD=function(){function r(){}return r.QR=function(i){try{for(var a=0;a<n.length;a++)if(n[a].wkttext===i)return n[a].unit;for(var o,s=a="",u=!1,c=0;c<i.length;c++){var l=i[c];!0===u?'"'==l?'"'==i[c+1]?a+=l:u=u=!1:a+=l:/[\s]/.test(l)||(","==l?(s=""!==a?s+(t(a)+","):s+",",a=""):")"==l||"]"==l?(s=""!==a?s+(t(a)+"]}"):s+"]}",a=""):"("==l||"["==l?(s+='{ "entity": "'+a.toUpperCase().trim()+'", "values":[',a=""):'"'==l?(u=!0,a=""):a+=l)}o=JSON.parse(s);var h=r.$F(o);if(null===h)return null;for(o=null,l=0;l<h.values.length;l++)if("object"==typeof h.values[l]&&"UNIT"===h.values[l].entity){o=h.values[l];break}if(null===o)return null;var f=e.Uc.iQ("GEOGCS"===h.entity?1:0,o.values[1],o.values[2]);return n.push({wkttext:i,unit:f}),10<n.length&&n.shift(),f}catch(p){return null}},r.$F=function(e){if(null===e)return null;if("GEOGCS"===e.entity||"PROJCS"===e.entity)return e;for(var t=[],n=0;n<e.values.length;n++)if("object"==typeof e.values[n]&&void 0!==e.values[n].entity){if("GEOGCS"===e.values[n].entity||"PROJCS"==e.values[n].entity)return e.values[n];t.push(e.values[n])}for(e=0;e<t.length;e++)if(null!==(n=r.$F(t[e])))return n;return null},r.PR=function(e){var t=-1;if(null!=e&&0<e.length){var n=e.indexOf("PROJCS");if(0<=n){var r=0;if(0<=(n=e.lastIndexOf("UNIT"))&&0<(n=e.indexOf(",",n+4))){n++;var i=e.indexOf("]",n+1);if(0<i)try{r=parseFloat(e.substring(n,i))}catch(o){r=0}}0<r&&(t=.001/r)}else if(0<=(n=e.indexOf("GEOGCS"))){var a=0;if(r=0,0<(n=e.indexOf("SPHEROID",n+6))&&0<(n=e.indexOf(",",n+8))){if(n++,0<(i=e.indexOf(",",n+1)))try{a=parseFloat(e.substring(n,i))}catch(o){a=0}if(0<a&&0<=(n=e.indexOf("UNIT",i+1))&&0<(n=e.indexOf(",",n+4))&&(n++,0<(i=e.indexOf("]",n+1))))try{r=parseFloat(e.substring(n,i))}catch(o){r=0}}0<a&&0<r&&(t=.001/(a*r))}}return t},r}()}(J||(J={})),function(e){var t;(t=e.oM||(e.oM={}))[t.NONE=0]="NONE",t[t.LINEAR=1]="LINEAR",t[t.ANGULAR=2]="ANGULAR",function(e){e[e.enumFloat=0]="enumFloat",e[e.enumDouble=1]="enumDouble",e[e.enumInt32=2]="enumInt32",e[e.enumInt64=3]="enumInt64",e[e.enumInt8=4]="enumInt8",e[e.enumInt16=5]="enumInt16"}(e.YM||(e.YM={})),function(e){e[e.POSITION=0]="POSITION",e[e.Z=1]="Z",e[e.M=2]="M",e[e.ID=3]="ID",e[e.NORMAL=4]="NORMAL",e[e.TEXTURE1D=5]="TEXTURE1D",e[e.TEXTURE2D=6]="TEXTURE2D",e[e.TEXTURE3D=7]="TEXTURE3D",e[e.ID2=8]="ID2",e[e.MAXSEMANTICS=10]="MAXSEMANTICS"}(e.Mh||(e.Mh={}));var n=function(){function t(e,n){if(this.Dt=this.Ge=null,this.gr=this.Ca=0,this.Bh=this.hg=null,this.Fl=0,void 0!==n){for(this.Ca=n.Ca,this.gr=n.gr,this.hg=n.hg.slice(0),this.Bh=n.Bh.slice(0),this.Fl=n.Fl,this.Dt=[],e=n=0;e<this.Ca;e++)this.Dt[e]=n,n+=t.Sa(this.hg[e]);for(this.gr=n,this.Ge=[],e=0;e<this.Ca;e++){n=t.Sa(this.kd(e));for(var r=t.me(this.kd(e)),i=0;i<n;i++)this.Ge[this.Dt[e]+i]=r}}else this.gr=this.Ca=0}return t.prototype.kd=function(t){if(0>t||t>this.Ca)throw e.f.I();return this.hg[t]},t.prototype.Yf=function(e){return this.Bh[e]},t.Uz=function(e){return t.RN[e]},t.sl=function(e){return t.$N[e]},t.aT=function(e){return t.aO[e]},t.a0=function(e){return t.aT(t.sl(e))*t.Sa(e)},t.Sa=function(e){return t.zN[e]},t.tU=function(e){return 2>e},t.k0=function(e){return t.tU(t.sl(e))},t.prototype.hasAttribute=function(e){return 0<=this.Bh[e]},t.prototype.VG=function(){return this.hasAttribute(1)},t.me=function(e){return t.OD[e]},t.prototype.bT=function(e){return this.Dt[e]},t.pH=function(e,n){return t.OD[e]===n},t.$_=function(t){if(4==t)return 2;if(8==t)return 3;throw e.f.I()},t.prototype.Ib=function(e){return this===e},t.prototype.Un=function(){for(var t=e.L.Zh(this.hg[0]),n=1;n<this.Ca;n++)t=e.L.Zh(this.hg[n],t);return t},t.prototype.dk=function(e){return this.Dt[e]},t.prototype.fc=function(){return this.Fl},t.prototype.Jd=function(e){return this.hg[e]},t.OD=[0,0,NaN,0,0,0,0,0,0],t.RN=[1,1,1,0,2,1,1,1,0],t.$N=[1,1,1,2,0,0,0,0,2],t.aO=[4,8,4,8,1,2],t.zN=[2,1,1,1,3,1,2,3,2],t}();e.oa=n}(J||(J={})),function(e){function t(e,t,r){var a=t-(e=new s(e)).e,o=e.Vc;for(o.length>++t&&n(e,a,s.Lu),o[0]?r?a=t:(o=e.Vc,a=e.e+a+1):++a;o.length<a;o.push(0));return a=e.e,1===r||r&&(t<=a||a<=i)?(0>e.Fd&&o[0]?"-":"")+(1<o.length?o[0]+"."+o.join("").slice(1):o[0])+(0>a?"e":"e+")+a:e.toString()}function n(e,t,n,i){var a=e.Vc,o=e.e+t+1;if(1===n?i=5<=a[o]:2===n?i=5<a[o]||5==a[o]&&(i||0>o||void 0!==a[o+1]||1&a[o-1]):3===n?i=i||void 0!==a[o]||0>o:(i=!1,0!==n&&r("!Big.RM!")),1>o||!a[0])i?(e.e=-t,e.Vc=[1]):e.Vc=[e.e=0];else{if(a.length=o--,i)for(;9<++a[o];)a[o]=0,o--||(++e.e,a.unshift(1));for(o=a.length;!a[--o];a.pop());}return e}function r(e){throw(e=Error(e)).name="BigError",e}var i=-7,a=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,s=function(){function e(t){if(t instanceof e)this.Fd=t.Fd,this.e=t.e,this.Vc=t.Vc.slice();else{var n,i,a;for(0===t&&0>1/t?t="-0":o.test(t+="")||r(NaN),this.Fd="-"==t.charAt(0)?(t=t.slice(1),-1):1,-1<(n=t.indexOf("."))&&(t=t.replace(".","")),0<(i=t.search(/e/i))?(0>n&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):0>n&&(n=t.length),i=0;"0"==t.charAt(i);i++);if(i==(a=t.length))this.Vc=[this.e=0];else{for(;"0"==t.charAt(--a););for(this.e=n-i-1,this.Vc=[],n=0;i<=a;this.Vc[n++]=+t.charAt(i++));}}}return e.prototype.abs=function(){var t=new e(this);return t.Fd=1,t},e.prototype.cmp=function(t){var n=this.Vc,r=(t=new e(t)).Vc,i=this.Fd,a=t.Fd,o=this.e,s=t.e;if(!n[0]||!r[0])return n[0]?i:r[0]?-a:0;if(i!=a)return i;if(t=0>i,o!=s)return o>(s^t)?1:-1;for(i=-1,a=(o=n.length)<(s=r.length)?o:s;++i<a;)if(n[i]!=r[i])return n[i]>(r[i]^t)?1:-1;return o==s?0:o>(s^t)?1:-1},e.prototype.um=function(t){var i=this.Vc,a=(t=new e(t)).Vc,o=this.Fd==t.Fd?1:-1,s=e.Pr;if((s!==~~s||0>s||1e6<s)&&r("!Big.DP!"),!i[0]||!a[0])return i[0]==a[0]&&r(NaN),a[0]||r(o/0),new e(0*o);var u,c,l=a.slice(),h=u=a.length,f=i.length,p=i.slice(0,u),d=p.length,v=t,y=v.Vc=[],b=0,g=s+(v.e=this.e-t.e)+1;for(v.Fd=o,o=0>g?0:g,l.unshift(0);d++<u;p.push(0));do{for(c=0;10>c;c++){if(u!=(d=p.length))var m=u>d?1:-1;else{var w=-1;for(m=0;++w<u;)if(a[w]!=p[w]){m=a[w]>p[w]?1:-1;break}}if(!(0>m))break;for(t=d==u?a:l;d;){if(p[--d]<t[d]){for(w=d;w&&!p[--w];p[w]=9);--p[w],p[d]+=10}p[d]-=t[d]}for(;!p[0];p.shift());}y[b++]=m?c:++c,p[0]&&m?p[d]=i[h]||0:p=[i[h]]}while((h++<f||void 0!==p[0])&&o--);return y[0]||1==b||(y.shift(),v.e--),b>g&&n(v,s,e.Lu,void 0!==p[0]),v},e.prototype.AT=function(){return 0<this.cmp(0)},e.prototype.JU=function(){return 0>this.cmp(0)},e.prototype.St=function(t){var n,r=this.Fd,i=(t=new e(t)).Fd;if(r!=i)return t.Fd=-i,this.kJ(t);var a=this.Vc.slice(),o=this.e,s=t.Vc,u=t.e;if(!a[0]||!s[0])return s[0]?(t.Fd=-i,t):new e(a[0]?this:0);if(r=o-u){for((n=0>r)?(r=-r,o=a):(u=o,o=s),o.reverse(),i=r;i--;o.push(0));o.reverse()}else for(o=((n=a.length<s.length)?a:s).length,r=i=0;i<o;i++)if(a[i]!=s[i]){n=a[i]<s[i];break}if(n&&(o=a,a=s,s=o,t.Fd=-t.Fd),0<(i=(o=s.length)-(n=a.length)))for(;i--;a[n++]=0);for(i=n;o>r;){if(a[--o]<s[o]){for(n=o;n&&!a[--n];a[n]=9);--a[n],a[o]+=10}a[o]-=s[o]}for(;0==a[--i];a.pop());for(;0==a[0];)a.shift(),--u;return a[0]||(t.Fd=1,a=[u=0]),t.Vc=a,t.e=u,t},e.prototype.kJ=function(t){var n=this.Fd,r=(t=new e(t)).Fd;if(n!=r)return t.Fd=-r,this.St(t);r=this.e;var i=this.Vc,a=t.e,o=t.Vc;if(!i[0]||!o[0])return o[0]?t:new e(i[0]?this:0*n);if(i=i.slice(),n=r-a){for(0<n?(a=r,r=o):(n=-n,r=i),r.reverse();n--;r.push(0));r.reverse()}for(0>i.length-o.length&&(r=o,o=i,i=r),n=o.length,r=0;n;)r=(i[--n]=i[n]+o[n]+r)/10|0,i[n]%=10;for(r&&(i.unshift(r),++a),n=i.length;0==i[--n];i.pop());return t.Vc=i,t.e=a,t},e.prototype.pow=function(t){var n=this,i=new e(1),a=i,o=0>t;for((t!==~~t||-1e6>t||1e6<t)&&r("!pow!"),t=o?-t:t;1&t&&(a=a.Hr(n)),t>>=1;)n=n.Hr(n);return o?i.um(a):a},e.prototype.round=function(t,i){var a=this;return null==t?t=0:(t!==~~t||0>t||1e6<t)&&r("!round!"),n(a=new e(a),t,null==i?e.Lu:i),a},e.prototype.sqrt=function(){var t=this.Vc,i=this.Fd,a=this.e,o=new e("0.5");if(!t[0])return new e(this);0>i&&r(NaN),0==(i=Math.sqrt(this.toString()))||i==1/0?((i=t.join("")).length+a&1||(i+="0"),(t=new e(Math.sqrt(i).toString())).e=((a+1)/2|0)-(0>a||1&a)):t=new e(i.toString()),i=t.e+(e.Pr+=4);do{t=o.Hr((a=t).kJ(this.um(a)))}while(a.Vc.slice(0,i).join("")!==t.Vc.slice(0,i).join(""));return n(t,e.Pr-=4,e.Lu),t},e.prototype.Hr=function(t){var n=this.Vc,r=(t=new e(t)).Vc,i=n.length,a=r.length,o=this.e,s=t.e;if(t.Fd=this.Fd==t.Fd?1:-1,!n[0]||!r[0])return new e(0*t.Fd);if(t.e=o+s,i<a){var u=n;n=r,r=u,s=i,i=a,a=s}for(u=Array(s=i+a);s--;u[s]=0);for(o=a;o--;){for(a=0,s=i+o;s>o;)a=u[s]+r[o]*n[s-o-1]+a,u[s--]=a%10,a=a/10|0;u[s]=(u[s]+a)%10}for(a&&++t.e,u[0]||u.shift(),o=u.length;!u[--o];u.pop());return t.Vc=u,t},e.prototype.toString=function(){var e=this.e,t=this.Vc.join(""),n=t.length;if(e<=i||e>=a)t=t.charAt(0)+(1<n?"."+t.slice(1):"")+(0>e?"e":"e+")+e;else if(0>e){for(;++e;t="0"+t);t="0."+t}else if(0<e)if(++e>n)for(e-=n;e--;t+="0");else e<n&&(t=t.slice(0,e)+"."+t.slice(e));else 1<n&&(t=t.charAt(0)+"."+t.slice(1));return 0>this.Fd&&this.Vc[0]?"-"+t:t},e.prototype.toExponential=function(e){return null==e?e=this.Vc.length-1:(e!==~~e||0>e||1e6<e)&&r("!toExp!"),t(this,e,1)},e.prototype.toFixed=function(e){var n=i,o=a;if(i=-(a=1/0),null==e)var s=this.toString();else e===~~e&&0<=e&&1e6>=e&&(s=t(this,this.e+e),0>this.Fd&&this.Vc[0]&&0>s.indexOf("-")&&(s="-"+s));return i=n,a=o,s||r("!toFix!"),s},e.prototype.toPrecision=function(e){return null==e?this.toString():((e!==~~e||1>e||1e6<e)&&r("!toPre!"),t(this,e-1,2))},e.Pr=20,e.Lu=1,e}();e.xp=s}(J||(J={})),function(e){var t=function(){function t(e){this.vf=e}return t.prototype.Lr=function(t,n,r){var i=new e.b,a=new e.b,o=this.vf;r.Zd(t,n,(function(e,t){return o.mc(2*e,i),o.mc(2*t,a),i.compare(a)}))},t.prototype.sq=function(e){return this.vf.read(2*e+1)},t}();e.yi=function(){function n(){}return n.tq=function(t){if(t.u())return!1;var r=t.F();return 1736==r?0!=t.Pe():1607==r?(n.eF(t,!0,r=[!1]),r[0]):!(197!=r&&(!e.R.Ic(r)||t.nH()))},n.qm=function(t){var r=t.F();if(1736==r)return r=new e.Oa(t.description),t.u()||t.ND(r),r;if(1607==r)return n.eF(t,!1,null);if(197==r)return r=new e.Oa(t.description),t.u()||r.bd(t,!1),r;if(e.R.Ic(r)){if(r=new e.Hd(t.description),!t.u()&&!t.nH()){var i=new e.Ra;t.jp(i),r.add(i),t.hp(i),r.add(i)}return r}if(e.R.lo(r))return null;throw e.f.I()},n.eF=function(n,r,i){null!=i&&(i[0]=!1);var a=null;if(r||(a=new e.Hd(n.description)),!n.u()){var o=new e.ha(0);o.Db(2*n.$());for(var s=0,u=n.$();s<u;s++)if(0<n.Ha(s)&&!n.ho(s)){var c=n.ua(s);o.add(c),c=n.zc(s)-1,o.add(c)}if(0<o.size){u=new e.Eu,s=n.Va(0),u.sort(o,0,o.size,new t(s)),u=new e.b,s.mc(2*o.get(0),u),c=0;for(var l=1,h=new e.Ra,f=new e.b,p=1,d=o.size;p<d;p++)if(s.mc(2*o.get(p),f),f.qb(u))o.get(c)>o.get(p)?(o.set(c,2147483647),c=p):o.set(p,2147483647),l++;else{if(0==(1&l))o.set(c,2147483647);else if(r)return null!=i&&(i[0]=!0),null;u.K(f),c=p,l=1}if(0==(1&l))o.set(c,2147483647);else if(r)return null!=i&&(i[0]=!0),null;if(!r)for(o.Zd(0,o.size,(function(e,t){return e-t})),p=0,d=o.size;p<d&&2147483647!=o.get(p);p++)n.ne(o.get(p),h),a.add(h)}}return r?null:a},n}()}(J||(J={})),function(e){var t=function(){function t(){this.Hf=new e.ha(0),this.gt=new e.ha(0),this.uI=1,this.mt=NaN}return t.prototype.sort=function(e,t,n,r){if(32>n-t)r.Lr(t,n,e);else{var i=!0;try{for(var a=1/0,o=-1/0,s=t;s<n;s++){var u=r.sq(e.get(s));u<a&&(a=u),u>o&&(o=u)}if(this.reset(n-t,a,o,n-t)){for(s=t;s<n;s++){var c=e.get(s);u=r.sq(c);var l=this.mG(u);this.Hf.set(l,this.Hf.get(l)+1),this.gt.write(s-t,c)}var h=this.Hf.get(0);this.Hf.set(0,0),s=1;for(var f=this.Hf.size;s<f;s++){var p=this.Hf.get(s);this.Hf.set(s,h),h+=p}for(s=t;s<n;s++){c=this.gt.read(s-t),u=r.sq(c),l=this.mG(u);var d=this.Hf.get(l);e.set(d+t,c),this.Hf.set(l,d+1)}i=!1}}catch(v){this.Hf.resize(0),this.gt.resize(0)}if(i)r.Lr(t,n,e);else{for(s=n=0,f=this.Hf.size;s<f;s++)i=n,(n=this.Hf.get(s))>i&&r.Lr(t+i,t+n,e);100<this.Hf.size&&(this.Hf.resize(0),this.gt.resize(0))}}},t.prototype.reset=function(e,n,r,i){return!(2>e||r==n||(e=Math.min(t.rM,e),this.Hf.Db(e),this.Hf.resize(e),this.Hf.Xj(0,0,this.Hf.size),this.uI=n,this.gt.resize(i),this.mt=(r-n)/(e-1),0))},t.prototype.mG=function(t){return e.L.truncate((t-this.uI)/this.mt)},t.rM=65536,t}();e.Eu=t}(J||(J={})),function(e){var t,n;(n=t||(t={}))[n.enum_line=1]="enum_line",n[n.enum_arc=2]="enum_arc",n[n.enum_dummy=4]="enum_dummy",n[n.enum_concave_dip=8]="enum_concave_dip",n[n.enum_connection=3]="enum_connection";var r=function(){function t(){}return t.yv=function(n,r,i,a,o,s){var u=new t;return u.Tm=new e.b,u.hn=new e.b,u.Iw=new e.b,u.Tm.K(n),u.hn.K(r),u.Iw.K(i),u.Wo=a,u.xh=o,u.zh=s,u},t.construct=function(n,r,i,a){var o=new t;return o.Tm=new e.b,o.hn=new e.b,o.Iw=new e.b,o.Tm.K(n),o.hn.K(r),o.Iw.Tc(),o.Wo=4,o.xh=i,o.zh=a,o},t}(),i=function(){function t(e,t,n,r,i,a){this.Fw=null,this.ya=0,this.nB=e,this.RI=this.OI=0,this.La=t,this.Oj=n,this.Ck=r,this.Xq=i,this.Vb=a}return t.prototype.next=function(){for(var t=new e.Ra;;){if(this.ya==this.nB.D())return null;if(this.nB.ne(this.ya,t),this.ya++,!t.u())break}var n=!1;if(null==this.Fw&&(this.OI=t.Ce(),this.RI=t.lf(),this.Fw=s.buffer(t,this.La,this.Oj,this.Ck,this.Xq,this.Vb),n=!0),this.ya<this.nB.D()){var r=new e.Ga;this.Fw.copyTo(r)}else r=this.Fw;if(!n){n=new e.xd;var i=t.Ce()-this.OI;t=t.lf()-this.RI,n.mg(i,t),r.Qc(n)}return r},t.prototype.Fa=function(){return 0},t.prototype.xe=function(){},t}(),a=function(){function t(e,t){this.Wa=e,this.ya=0,this.Hq=t}return t.prototype.next=function(){var t=this.Wa.W;if(this.ya<t.$()){var n=this.ya;if(this.ya++,!t.ho(n))for(var r=t.xa(t.zc(n)-1);this.ya<t.$();){var i=t.xa(t.ua(this.ya));if(t.ho(this.ya))break;if(i!=r)break;r=t.xa(t.zc(this.ya)-1),this.ya++}if(1==this.ya-n)return this.Wa.XE(this.Wa.W,n,this.Hq);for((r=new e.Oa(this.Wa.W.description)).addPath(this.Wa.W,n,!0),n+=1;n<this.ya;n++)r.ds(this.Wa.W,n,0,t.$v(n),!1);return this.Wa.XE(r,0,this.Hq)}return null},t.prototype.Fa=function(){return 0},t.prototype.xe=function(){},t}(),o=function(){function e(e){this.Wa=e,this.ya=0}return e.prototype.next=function(){var e=this.Wa.W;if(this.ya<e.$()){var t=this.ya;for(e.rm(this.ya),this.ya++;this.ya<e.$()&&!(0<e.rm(this.ya));)this.ya++;return 0==t&&this.ya==e.$()?this.Wa.Vy(e,0,e.$()):this.Wa.Vy(e,t,this.ya)}return null},e.prototype.Fa=function(){return 0},e.prototype.xe=function(){},e}(),s=function(){function t(e){this.st=this.Tw=this.tt=this.Md=null,this.de=[],this.Vb=e,this.rb=this.sw=this.bV=this.La=this.bB=this.Kt=this.qa=0,this.ZA=this.Ck=-1,this.Hq=!0}return t.buffer=function(n,r,i,a,o,s){if(null==n)throw e.f.I();if(0>a)throw e.f.I();if(n.u())return new e.Ga(n.description);var u=new e.g;return n.Zb(u),0<r&&u.O(r,r),(s=new t(s)).Oj=i,s.W=n,s.qa=e.la.Qd(i,u,!0),s.Kt=e.la.Qd(null,u,!0),s.La=r,s.bV=n.F(),0>=o&&(o=96),s.rb=Math.abs(s.La),s.sw=0!=s.rb?1/s.rb:0,isNaN(a)||0==a?a=1e-5*s.rb:a>.5*s.rb&&(a=.5*s.rb),12>o&&(o=12),(n=Math.abs(r)*(1-Math.cos(Math.PI/o)))>a?a=n:(n=Math.PI/Math.acos(1-a/Math.abs(r)))<o-1&&12>(o=e.L.truncate(n))&&(o=12,a=Math.abs(r)*(1-Math.cos(Math.PI/o))),s.Ck=a,s.Xq=o,s.bB=Math.min(s.Kt,.25*a),s.YE()},t.prototype.Lv=function(){if(null==this.Md)this.Md=[];else if(0!==this.Md.length)return;var t=this.cF();t=e.L.truncate((t+3)/4);var n=.5*Math.PI/t;this.ZA=n;for(var r=0;r<4*t;r++)this.Md.push(null);var i=Math.cos(n);n=Math.sin(n);var a=e.b.construct(0,1);for(r=0;r<t;r++)this.Md[r+0*t]=e.b.construct(a.y,-a.x),this.Md[r+1*t]=e.b.construct(-a.x,-a.y),this.Md[r+2*t]=e.b.construct(-a.y,a.x),this.Md[r+3*t]=a,(a=e.b.construct(a.x,a.y)).mu(i,n)},t.prototype.YE=function(){var t=this.W.F();if(e.R.Ic(t))return(t=new e.Oa(this.W.description)).$b(this.W,!0),this.W=t,this.YE();if(this.La<=this.qa){if(!e.R.nU(t))return new e.Ga(this.W.description);if(0>=this.La&&(t=new e.g,this.W.s(t),t.N()<=2*-this.La||t.ca()<=2*this.La))return new e.Ga(this.W.description)}switch(this.W.F()){case 33:return this.$O();case 550:return this.ZO();case 1607:return this.bP();case 1736:return this.aP();case 197:return this.WO();default:throw e.f.za()}},t.prototype.bP=function(){if(this.qH(this.W)){var t=new e.Ra;this.W.ne(0,t);var n=new e.g;return this.W.s(n),t.nb(n.hf()),this.mv(t)}return this.W=this.oX(this.W),t=new a(this,this.Hq),e.Jh.local().U(t,this.Oj,this.Vb).next()},t.prototype.aP=function(){if(0==this.La)return this.W;var t=e.jm.local();if(this.Lv(),this.W=t.U(this.W,null,!1,this.Vb),0>this.La){var n=this.W;return n=this.Vy(n,0,n.$()),t.U(n,this.Oj,!1,this.Vb)}return this.qH(this.W)?(t=new e.Ra,this.W.ne(0,t),n=new e.g,this.W.s(n),t.nb(n.hf()),this.mv(t)):(t=new o(this),e.Jh.local().U(t,this.Oj,this.Vb).next())},t.prototype.Vy=function(n,r,i){for(var a=new e.Ga(n.description);r<i;r++)if(!(1>n.Ha(r))){var o=n.rm(r),s=new e.g;if(n.Sj(r,s),0<this.La){if(0<o)if(this.rH(n,r))o=new e.Ra,n.ne(n.ua(r),o),o.nb(s.hf()),this.ev(a,o);else{var u=o=new e.Oa(n.description);u=e.Gu.vH(this.W,r)||2==this.Sn(this.W,r,u,!0,1)?this.WE(n,r):this.Rn(o),a.add(u,!1)}else if(!(s.N()+this.qa<=2*this.rb||s.ca()+this.qa<=2*this.rb||(u=o=new e.Oa(n.description),this.Sn(this.W,r,u,!0,1),o.u()))){var c=new e.g;for(c.H(s),c.O(this.rb,this.rb),u.Np(c),s=1,o=(u=this.Rn(o)).$();s<o;s++)a.addPath(u,s,!0)}}else if(0<o){if(!(s.N()+this.qa<=2*this.rb||s.ca()+this.qa<=2*this.rb||(u=o=new e.Oa(n.description),this.Sn(this.W,r,u,!0,-1),o.u())))for(c=new e.g,u.Zb(c),c.O(this.rb,this.rb),u.Np(c),s=1,o=(u=this.Rn(o)).$();s<o;s++)a.addPath(u,s,!0)}else for(u=o=new e.Oa(n.description),this.Sn(this.W,r,u,!0,-1),s=0,o=(u=this.Rn(o)).$();s<o;s++)a.addPath(u,s,!0)}if(0<this.La)return 1<a.$()?a=this.Rn(a):t.Sx(a);if(n=new e.g,a.Zb(n),a.u())return t.Sx(a);for(n.O(this.rb,this.rb),a.Np(n),a=this.Rn(a),n=new e.Ga(a.description),s=1,o=a.$();s<o;s++)n.addPath(a,s,!1);return t.Sx(n)},t.prototype.$O=function(){return this.mv(this.W)},t.prototype.mv=function(t){var n=new e.Ga(this.W.description);return this.ev(n,t),this.WY(n)},t.prototype.ZO=function(){var t=new i(this.W,this.La,this.Oj,this.Ck,this.Xq,this.Vb);return e.Jh.local().U(t,this.Oj,this.Vb).next()},t.prototype.WO=function(){var t=new e.Ga(this.W.description);if(0>=this.La){if(0==this.La)t.bd(this.W,!1);else{var n=new e.Ih;this.W.qn(n),n.O(this.La,this.La),t.bd(n,!1)}return t}return t.bd(this.W,!1),this.W=t,this.WE(t,0)},t.prototype.WE=function(n,r){this.Lv();var i=new e.Ga(n.description),a=new e.b,o=new e.b,s=new e.b,u=new e.b,c=new e.b,l=new e.b,h=new e.b,f=new e.b,p=n.Ha(r),d=n.ua(r),v=0;for(r=n.Ha(r);v<r;v++){if(n.w(d+v,o),n.w(d+(v+1)%p,u),n.w(d+(v+2)%p,l),h.tc(u,o),0==h.length())throw e.f.za();if(h.pw(),h.normalize(),h.scale(this.rb),a.add(h,o),s.add(h,u),0==v?i.vu(a):i.Ii(a),i.Ii(s),f.tc(l,u),0==f.length())throw e.f.za();f.pw(),f.normalize(),f.scale(this.rb),c.add(f,u),this.sE(i,u,s,c,!1)}return t.Sx(i)},t.prototype.XE=function(t,n,r){if(this.Lv(),1>t.Ha(n))return null;if(this.rH(t,n)&&0<this.La){r=new e.Ra,t.ne(t.ua(n),r);var i=new e.g;return t.Sj(n,i),r.nb(i.hf()),this.mv(r)}if(i=new e.Oa(t.description),t.ho(n))this.Sn(t,n,i,r,1),this.Sn(t,n,i,r,-1);else{var a=new e.Oa(t.description);a.addPath(t,n,!1),a.ds(t,n,0,t.$v(n),!1),this.Sn(a,0,i,r,1)}return this.Rn(i)},t.prototype.qr=function(){if(this.Gt++,0==this.Gt%1024&&null!=this.Vb&&!this.Vb.progress(-1,-1))throw e.f.Mu("user_canceled")},t.prototype.Rn=function(t){return e.pg.Tk(t,this.Kt,!0,!0,this.Vb)},t.prototype.cF=function(){if(0==this.Ck)return this.Xq;var t=1-this.Ck*Math.abs(this.sw);return 4>(t=-1>t?4:2*Math.PI/Math.acos(t)+.5)?t=4:t>this.Xq&&(t=this.Xq),e.L.truncate(t)},t.prototype.sE=function(t,n,r,i,a){this.Lv();var o=new e.b;o.tc(r,n),o.scale(this.sw);var s=new e.b;s.tc(i,n),s.scale(this.sw),0>(o=Math.atan2(o.y,o.x)/this.ZA)&&(o=this.Md.length+o),o=this.Md.length-o,0>(s=Math.atan2(s.y,s.x)/this.ZA)&&(s=this.Md.length+s),(s=this.Md.length-s)<o&&(s+=this.Md.length);var u=e.L.truncate(s);s=e.L.truncate(Math.ceil(o)),(o=new e.b).K(this.Md[s%this.Md.length]),o.nu(this.rb,n);var c=10*this.qa;for(o.sub(r),o.length()<c&&(s+=1),o.K(this.Md[u%this.Md.length]),o.nu(this.rb,n),o.sub(i),o.length()<c&&--u,r=u-s,r++,u=0,s%=this.Md.length;u<r;u++,s=(s+1)%this.Md.length)o.K(this.Md[s]),o.nu(this.rb,n),t.Ii(o),this.qr();a&&t.Ii(i)},t.prototype.Sn=function(t,n,i,a,o){var s=new e.Yc,u=s.wO(t,n);if(s.$p(this.bB,!1,!1),2>s.D(u))return 0>o||(o=t,s=new e.Ra,o.ne(o.ua(n),s),this.ev(i,s)),1;var c=s.xa(s.Za(s.Kb(u))),l=new e.xd;if(l.mg(-c.x,-c.y),s.Qc(l),a&&(this.FR(s,u,o),2>s.D(u)))return 0>o||(o=t,s=new e.Ra,o.ne(o.ua(n),s),this.ev(i,s)),1;this.de.length=0;var h=s.Kb(u);n=s.Za(h);var f=1==o?s.Ma(n):s.T(n);t=1==o?s.T(n):s.Ma(n);var p=!0;a=new e.b,u=new e.b;var d=new e.b,v=new e.b,y=new e.b,b=new e.b,g=new e.b,m=new e.b,w=new e.b,O=new e.b,j=this.rb;h=s.Ha(h);for(var _=0;_<h;_++)s.w(t,u),p&&(s.w(n,a),s.w(f,d),m.tc(a,d),m.normalize(),O.yH(m),O.scale(j),v.add(O,a)),g.tc(u,a),g.normalize(),w.yH(g),w.scale(j),y.add(a,w),f=m.Di(g),p=m.Vh(g),0>f||0>p&&0==f?this.de.push(r.yv(v,y,a,2,this.de.length+1,this.de.length-1)):v.qb(y)||(this.de.push(r.construct(v,a,this.de.length+1,this.de.length-1,"dummy")),this.de.push(r.construct(a,y,this.de.length+1,this.de.length-1,"dummy"))),b.add(u,w),this.de.push(r.yv(y,b,a,1,this.de.length+1,this.de.length-1)),v.K(b),O.K(w),d.K(a),a.K(u),m.K(g),f=n,n=t,p=!1,t=1==o?s.T(n):s.Ma(n);return this.de[this.de.length-1].xh=0,this.de[0].zh=this.de.length-1,this.qX(i),l.mg(c.x,c.y),i.KE(l,i.$()-1),1},t.prototype.qX=function(e){for(var t=this.JP(),n=!0,r=t+1,i=t;r!=t;i=r){var a=this.de[i];r=-1!=a.xh?a.xh:(i+1)%this.de.length,0!=a.Wo&&(n&&e.vu(a.Tm),2==a.Wo?this.sE(e,a.Iw,a.Tm,a.hn,!0):e.Ii(a.hn),n=!1)}},t.prototype.JP=function(){null==this.st&&(this.st=[null,null,null,null,null,null,null,null,null]);for(var t=0,n=0,r=this.de.length;n<r;){var i=this.de[n];if(0!=(3&i.Wo)){t=n;break}n=i.xh}for(r=t+1,n=t;r!=t;n=r){r=(i=this.de[n]).xh;for(var a=1,o=null;r!=n&&0==(3&(o=this.de[r]).Wo);)r=o.xh,a++;1!=a&&1==(i.Wo&o.Wo)&&(null==this.tt&&(this.tt=new e.zb,this.Tw=new e.zb),this.tt.Fc(i.Tm),this.tt.Sc(i.hn),this.Tw.Fc(o.Tm),this.Tw.Sc(o.hn),1==this.tt.Ia(this.Tw,this.st,null,null,this.Kt)&&(i.hn.K(this.st[0]),o.Tm.K(this.st[0]),i.xh=r,o.zh=n))}return t},t.prototype.mw=function(t,n,r){var i=new e.b;if(i.tc(r,t),r=i.length(),0<(r=this.rb*this.rb-r*r*.25)){r=Math.sqrt(r),i.normalize(),i.ur();var a=new e.b;if(a.tc(n,t),a.Vh(i)+r>=this.rb)return!0}return!1},t.prototype.FR=function(t,n,r){for(var i=0;1>i;i++){var a=!1,o=t.Kb(n),s=t.Ha(o);if(0==s)break;var u=s;if(3>s)break;!t.Lb(o)&&(u=s-1),o=t.Za(o),s=0<r?t.Ma(o):t.T(o);for(var c=0<r?t.T(o):t.Ma(o),l=s,h=!0,f=new e.b,p=new e.b,d=new e.b,v=new e.b,y=new e.b,b=e.b.construct(0,0),g=new e.b,m=new e.b,w=new e.b,O=new e.b,j=this.rb,_=0,x=0;x<u&&(t.w(c,p),h&&(t.w(o,f),t.w(s,d),l=s),m.tc(f,d),m.normalize(),g.tc(p,f),g.normalize(),l!=c);){var k=m.Di(g),S=m.Vh(g),M=!0;if(0>k||0>S&&0==k||!this.mw(d,f,p)||(b.K(p),M=!1,++_,a=!0),M){if(0<_)for(;(k=0<r?t.Ma(l):t.T(l))!=o;){if(t.w(k,v),!this.mw(v,d,b)){k!=c&&this.mw(v,d,p)&&this.mw(v,f,p)&&(d.K(v),l=k,M=!1,++_);break}d.K(v),l=k,M=!1,++_}if(!M)continue;if(0<_){for(l=0<r?t.Ma(s):t.T(s),h=1;h<_;h++)M=0<r?t.Ma(l):t.T(l),t.pd(l,!0),l=M;w.tc(f,d),_=j*j-(_=w.length())*_*.25,j-(_=Math.sqrt(_))>.5*this.Ck?(y.add(d,f),y.scale(.5),w.normalize(),w.ur(),O.K(w),O.scale(j-_),y.add(O),t.wf(s,y)):t.pd(s,!0),_=0}d.K(f),l=o}f.K(p),s=o,o=c,c=0<r?t.T(o):t.Ma(o),x++,h=!1}if(0<_){for(l=0<r?t.Ma(s):t.T(s),h=1;h<_;h++)M=0<r?t.Ma(l):t.T(l),t.pd(l,!0),l=M;y.add(d,f),y.scale(.5),w.tc(f,d),_=j*j-(_=w.length())*_*.25,_=Math.sqrt(_),w.normalize(),w.ur(),O.K(w),O.scale(j-_),y.add(O),t.wf(s,y)}if(t.$p(this.bB,!1,!1),!a)break}},t.prototype.rH=function(t,n){if(1==t.Ha(n))return!0;var r=new e.g;return t.Sj(n,r),Math.max(r.N(),r.ca())<.5*this.Ck},t.prototype.qH=function(t){var n=new e.g;return t.s(n),Math.max(n.N(),n.ca())<.5*this.Ck},t.prototype.oX=function(t){for(var n=0,r=0,i=(t=e.lD.local().U(t,.25*this.Ck,!1,this.Vb)).$();r<i;r++)n=Math.max(t.Ha(r),n);return 32>n?(this.Hq=!1,t):(this.Hq=!0,e.pg.Tk(t,this.Kt,!1,!0,this.Vb))},t.prototype.ev=function(t,n){if(n=n.w(),null!=this.Md&&0!==this.Md.length){var r=new e.b;r.K(this.Md[0]),r.nu(this.rb,n),t.vu(r);for(var i=1,a=this.Md.length;i<a;i++)r.K(this.Md[i]),r.nu(this.rb,n),t.Ii(r)}else{i=this.cF(),r=e.L.truncate((i+3)/4),i=.5*Math.PI/r,a=Math.cos(i);for(var o=Math.sin(i),s=new e.b,u=3;0<=u;u--){switch(s.ka(0,this.rb),u){case 0:for(i=0;i<r;i++)t.Cj(s.x+n.x,s.y+n.y),s.mu(a,o);break;case 1:for(i=0;i<r;i++)t.Cj(-s.y+n.x,s.x+n.y),s.mu(a,o);break;case 2:for(i=0;i<r;i++)t.Cj(-s.x+n.x,-s.y+n.y),s.mu(a,o);break;default:for(t.Zx(s.y+n.x,-s.x+n.y),i=1;i<r;i++)s.mu(a,o),t.Cj(s.y+n.x,-s.x+n.y)}this.qr()}}},t.Sx=function(e){return e.Jg(1,0),e},t.prototype.WY=function(e){return e.Jg(2,this.qa),e.cl(),e},t}();e.QL=s}(J||(J={})),function(e){var t=function(){function t(t){this.Da=t,this.a=new e.Yc,this.fd=new e.ha(0)}return t.prototype.Ph=function(e,t,n){switch(t){case 0:if(e.o<n&&e.v<=n)break;return e.o>=n?1:-1;case 1:if(e.A<n&&e.B<=n)break;return e.A>=n?1:-1;case 2:if(e.o>=n&&e.v>n)break;return e.v<=n?1:-1;case 3:if(!(e.A>=n&&e.B>n))return e.B<=n?1:-1}return 0},t.prototype.fz=function(e,t){return 1736==e.F()?this.hz(e,t):this.iz(e)},t.prototype.hz=function(t,n){if(0==this.Da.N()||0==this.Da.ca())return t.Ea();var r=new e.g;t.Zb(r),this.W=this.a.Bb(t);var i=new e.g,a=new e.g,o=new e.b,s=new e.b,u=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0];new e.og;var l=new e.zb,h=new e.ha(0);h.Db(Math.min(100,t.D()));for(var f=!1,p=0;!f&&4>p;p++){var d=!1,v=0!=(1&p),y=0;switch(p){case 0:d=r.o<=(y=this.Da.o)&&r.v>=y;break;case 1:d=r.A<=(y=this.Da.A)&&r.B>=y;break;case 2:d=r.o<=(y=this.Da.v)&&r.v>=y;break;case 3:d=r.A<=(y=this.Da.B)&&r.B>=y}if(d)for(f=!0,d=this.a.Kb(this.W);-1!=d;){var b=-1,g=-1,m=this.a.Za(d),w=m;do{var O=this.a.ec(w);null==O&&(O=l,this.a.w(w,o),O.Fc(o),this.a.w(this.a.T(w),s),O.Sc(s)),O.s(i);var j=this.Ph(i,p,y),_=0,x=-1;if(-1==j){_=0<(O=O.uq(v,y,u,c))?this.a.em(w,c,O):0,_+=1;var k=w,S=this.a.T(k);for(O=0;O<_;O++){if(this.a.w(k,o),this.a.w(S,s),null==(x=this.a.ec(k))&&((x=l).Fc(o),x.Sc(s)),x.s(a),-1==(x=this.Ph(a,p,y))){if(v)(x=Math.abs(o.y-y))<(M=Math.abs(s.y-y))?(o.y=y,this.a.wf(k,o)):(s.y=y,this.a.wf(S,s));else{x=Math.abs(o.x-y);var M=Math.abs(s.x-y);x<M?(o.x=y,this.a.wf(k,o)):(s.x=y,this.a.wf(S,s))}null==(x=this.a.ec(k))&&((x=l).Fc(o),x.Sc(s)),x.s(a),x=this.Ph(a,p,y)}M=b,b=x,-1==g&&(g=b),0==M&&1==b||1==M&&0==b||0!=M||0!=b||h.add(k),1==b&&(f=!1),x=k=S,S=this.a.T(S)}}0==_&&(M=b,b=j,-1==g&&(g=b),0==M&&1==b||1==M&&0==b||0!=M||0!=b||h.add(w),1==b&&(f=!1),x=this.a.T(w)),w=x}while(w!=m);for(0==g&&0==b&&h.add(m),O=0,b=h.size;O<b;O++)g=h.get(O),this.a.pd(g,!1);h.clear(!1),d=3>this.a.Ha(d)?this.a.sr(d):this.a.Qb(d)}}return f?t.Ea():(this.pC(),0<n&&this.rz(n),this.a.ye(this.W))},t.prototype.iz=function(t){var n=new e.g,r=new e.g,i=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],o=new e.og,s=t,u=new e.g;t.Zb(u);for(var c=0;4>c;c++){var l=!1,h=0!=(1&c),f=0;switch(c){case 0:l=u.o<=(f=this.Da.o)&&u.v>=f;break;case 1:l=u.A<=(f=this.Da.A)&&u.B>=f;break;case 2:l=u.o<=(f=this.Da.v)&&u.v>=f;break;case 3:l=u.A<=(f=this.Da.B)&&u.B>=f}if(l){l=s,s=t.Ea(),(l=l.Ba()).ej();for(var p,d=new e.b;l.Ta();)for(var v,y=!0;l.Aa();){var b=l.aa();b.s(n);var g=this.Ph(n,c,f);if(-1==g){if(0<(g=b.uq(h,f,i,a))){var m=0;p=b.ac();for(var w=0;w<=g;w++)if(m!=(v=w<g?a[w]:1)){b.jh(m,v,o);var O=o.get();O.Fc(p),w<g&&(h?(d.x=i[w],d.y=f):(d.x=f,d.y=i[w]),O.Sc(d)),O.s(r);var j=this.Ph(r,c,f);if(-1==j){if(p=O.ac(),m=O.wc(),h)(j=Math.abs(p.y-f))<(_=Math.abs(m.y-f))?(p.y=f,O.Fc(p)):(m.y=f,O.Sc(m));else{j=Math.abs(p.x-f);var _=Math.abs(m.x-f);j<_?(p.x=f,O.Fc(p)):(m.x=f,O.Sc(m))}O.s(r),j=this.Ph(r,c,f)}p=O.wc(),m=v,1==(v=j)?(s.$b(O,y),y=!1):y=!0}}}else 1==(v=g)?(s.$b(b,y),y=!1):y=!0}}}return s},t.prototype.pC=function(){this.si=-1,this.fm(!1,this.Da.o),this.fm(!1,this.Da.v),this.fm(!0,this.Da.A),this.fm(!0,this.Da.B),this.fd.resize(0),this.fd.Db(100),this.si=this.a.Kd();for(var t=new e.b,n=this.a.Kb(this.W);-1!=n;n=this.a.Qb(n))for(var r=this.a.Za(n),i=0,a=this.a.Ha(n);i<a;i++,r=this.a.T(r))this.a.w(r,t),(this.Da.o==t.x||this.Da.v==t.x||this.Da.A==t.y||this.Da.B==t.y)&&(this.a.Qa(r,this.si,this.fd.size),this.fd.add(r));this.Yl(!1,this.Da.o),this.Yl(!1,this.Da.v),this.Yl(!0,this.Da.A),this.Yl(!0,this.Da.B),this.zz()},t.prototype.rz=function(t){for(var n=new e.b,r=new e.b,i=e.L.Xf(2048,0),a=this.a.Kb(this.W);-1!=a;a=this.a.Qb(a)){var o=this.a.Za(a),s=o;do{var u=this.a.T(s);this.a.w(s,n);var c=-1;if(n.x==this.Da.o?(this.a.w(u,r),r.x==this.Da.o&&(c=1)):n.x==this.Da.v&&(this.a.w(u,r),r.x==this.Da.v&&(c=1)),n.y==this.Da.A?(this.a.w(u,r),r.y==this.Da.A&&(c=0)):n.y==this.Da.B&&(this.a.w(u,r),r.y==this.Da.B&&(c=0)),-1!=c&&(c=e.b.vb(n,r),!(1>=(c=e.L.truncate(Math.min(Math.ceil(c/t),2048)))))){for(var l=1;l<c;l++)i[l-1]=1*l/c;this.a.em(s,i,c-1)}s=u}while(s!=o)}},t.prototype.fm=function(t,n){var r=this.a.Kd(),i=new e.b,a=new e.ha(0);a.Db(100);for(var o=this.a.Kb(this.W);-1!=o;o=this.a.Qb(o))for(var s=this.a.Za(o),u=0,c=this.a.Ha(o);u<c;u++){var l=this.a.T(s);this.a.w(s,i),(t?i.y==n:i.x==n)&&(this.a.w(l,i),(t?i.y==n:i.x==n)&&(1!=this.a.Na(s,r)&&(a.add(s),this.a.Qa(s,r,1)),1!=this.a.Na(l,r)&&(a.add(l),this.a.Qa(l,r,1)))),s=l}if(this.a.Xd(r),!(3>a.size)){var h=this;a.Zd(0,a.size,(function(e,t){return h.Qh(e,t)})),r=new e.b,o=new e.b,s=new e.b,o.Tc();var f=-1;u=new e.ha(0),c=new e.ha(0),l=this.a.Kd();for(var p=this.a.Kd(),d=0,v=a.size;d<v;d++){var y=a.get(d);if(this.a.w(y,i),!i.qb(o)){if(-1!=f){for(var b=f;b<d;b++){f=a.get(b);var g=this.a.T(f);y=this.a.Ma(f);var m=!1;0>this.Qh(f,g)&&(this.a.w(g,r),t?r.y==n:r.x==n)&&(u.add(f),m=!0,this.a.Qa(f,p,1)),0>this.Qh(f,y)&&(this.a.w(y,r),t?r.y==n:r.x==n)&&(m||u.add(f),this.a.Qa(f,l,1))}for(b=0,m=u.size;b<m;b++){if(f=u.get(b),y=this.a.Na(f,l),g=this.a.Na(f,p),1==y){y=this.a.Ma(f),this.a.w(y,s);var w=[0];if(w[0]=0,!s.qb(i)){var O=e.b.vb(o,s);w[0]=e.b.vb(s,i)/O,0==w[0]?w[0]=2220446049250313e-31:1==w[0]&&(w[0]=.9999999999999998),this.a.em(y,w,1),y=this.a.Ma(f),this.a.wf(y,i),c.add(y),this.a.Qa(y,l,1),this.a.Qa(y,p,-1)}}1==g&&(g=this.a.T(f),this.a.w(g,s),(w=[0])[0]=0,s.qb(i)||(O=e.b.vb(o,s),w[0]=e.b.vb(o,i)/O,0==w[0]?w[0]=2220446049250313e-31:1==w[0]&&(w[0]=.9999999999999998),this.a.em(f,w,1),y=this.a.T(f),this.a.wf(y,i),c.add(y),this.a.Qa(y,l,-1),this.a.Qa(y,p,1)))}f=u,u=c,(c=f).clear(!1)}f=d,o.K(i)}}this.a.Xd(l),this.a.Xd(p)}},t.prototype.Yl=function(t,n){var r=new e.b,i=new e.ha(0);i.Db(100);for(var a=this.a.Kd(),o=0,s=this.fd.size;o<s;o++){var u=this.fd.get(o);if(-1!=u){var c=this.a.T(u);this.a.w(u,r),(t?r.y==n:r.x==n)&&(this.a.w(c,r),(t?r.y==n:r.x==n)&&(-2!=this.a.Na(u,a)&&(i.add(u),this.a.Qa(u,a,-2)),-2!=this.a.Na(c,a)&&(i.add(c),this.a.Qa(c,a,-2))))}}if(0!=i.size){var l=this;for(i.Zd(0,i.size,(function(e,t){return l.Qh(e,t)})),o=0,s=i.size;o<s;o++){var h=i.get(o);this.a.Qa(h,a,o)}u=new e.b,(c=new e.b).Tc();var f=-1;for(o=0,s=i.size;o<s;o++)if(-1!=(h=i.get(o))&&(this.a.w(h,r),!r.qb(c))){if(-1!=f)for(;;){h=!1;for(var p=1<o-f?o-1:o,d=f;d<p;d++){var v=i.get(d);if(-1!=v){var y=-1,b=this.a.T(v);0>this.Qh(v,b)&&(this.a.w(b,u),t?u.y==n:u.x==n)&&(y=b),b=-1;var g=this.a.Ma(v);if(0>this.Qh(v,g)&&(this.a.w(g,u),t?u.y==n:u.x==n)&&(b=g),-1!=y&&-1!=b)this.Oh(v,i,a),this.a.pd(v,!1),this.Oh(y,i,a),this.a.pd(y,!1),h=!0;else if(-1!=y||-1!=b){for(g=d+1;g<o;g++){var m=i.get(g);if(-1!=m){var w=this.a.T(m),O=-1;0>this.Qh(m,w)&&(this.a.w(w,u),t?u.y==n:u.x==n)&&(O=w),w=this.a.Ma(m);var j=-1;if(0>this.Qh(m,w)&&(this.a.w(w,u),t?u.y==n:u.x==n)&&(j=w),-1!=O&&-1!=j){this.Oh(m,i,a),this.a.pd(m,!1),this.Oh(O,i,a),this.a.pd(O,!1),h=!0;break}if(-1!=y&&-1!=j){this.ku(i,v,y,m,j,a),h=!0;break}if(-1!=b&&-1!=O){this.ku(i,m,O,v,b,a),h=!0;break}}}if(h)break}}}if(!h)break}f=o,c.K(r)}}this.a.Xd(a)},t.prototype.Oh=function(e,t,n){n=this.a.Na(e,n),t.set(n,-1),n=this.a.Na(e,this.si),this.fd.set(n,-1),-1!=(t=this.a.cd(e))&&this.a.Za(t)==e&&(this.a.Sf(t,-1),this.a.dh(t,-1))},t.prototype.ku=function(e,t,n,r,i,a){this.a.Dc(t,r),this.a.Ec(r,t),this.a.Ec(n,i),this.a.Dc(i,n),this.Oh(r,e,a),this.a.ui(r,!1),this.Oh(i,e,a),this.a.ui(i,!0)},t.prototype.zz=function(){for(var e=0,t=this.fd.size;e<t;e++){var n=this.fd.get(e);-1!=n&&this.a.hj(n,-1)}for(var r=0,i=0,a=this.a.Kb(this.W);-1!=a;){var o=this.a.Za(a);if(-1==o||a!=this.a.cd(o)){var s=a;a=this.a.Qb(a),this.a.Sf(s,-1),this.a.tr(s)}else{n=o,s=0;do{this.a.hj(n,a),s++,n=this.a.T(n)}while(n!=o);2>=s?(n=this.a.Na(o,this.si),this.fd.set(n,-1),o=this.a.pd(o,!1),2==s&&(n=this.a.Na(o,this.si),this.fd.set(n,-1),this.a.pd(o,!1)),s=a,a=this.a.Qb(a),this.a.Sf(s,-1),this.a.tr(s)):(this.a.sp(a,!1),this.a.dh(a,this.a.Ma(o)),this.a.Wj(a,s),i+=s,r++,a=this.a.Qb(a))}}for(e=0,t=this.fd.size;e<t;e++)if(-1!=(n=this.fd.get(e))&&-1==(a=this.a.cd(n))){a=this.a.Ef(this.W,-1),s=0,o=n;do{this.a.hj(n,a),s++,n=this.a.T(n)}while(n!=o);2>=s?(n=this.a.Na(o,this.si),this.fd.set(n,-1),o=this.a.pd(o,!1),2==s&&(0<=(n=this.a.Na(o,this.si))&&this.fd.set(n,-1),this.a.pd(o,!1)),this.a.Sf(s=a,-1),this.a.tr(s)):(this.a.An(a,!0),this.a.Wj(a,s),this.a.Sf(a,o),this.a.dh(a,this.a.Ma(o)),this.a.sp(a,!1),i+=s,r++)}for(this.a.bm(this.W,r),this.a.Uj(this.W,i),e=0,t=this.a.ld;-1!=t;t=this.a.Ae(t))e+=this.a.D(t);this.a.JC(e)},t.gz=function(e,n,r){return new t(n).fz(e,r)},t.clip=function(n,r,i,a){if(n.u())return n;if(r.u())return n.Ea();if(33==(i=n.F()))return a=n.w(),r.contains(a)?n:n.Ea();if(197==i)return a=new e.g,n.s(a),a.Ia(r)?(r=new e.Ih,n.copyTo(r),r.mp(a),r):n.Ea();var o=new e.g;if(n.Zb(o),r.contains(o))return n;if(!r.isIntersecting(o))return n.Ea();if(null!=(o=n.ib)&&null!=(o=o.oi)){if(1==(o=o.rn(r))){if(1736!=i)throw e.f.za();return(n=new e.Ga(n.description)).Np(r),n}if(0==o)return n.Ea()}switch(i){case 550:i=null,o=n.D();for(var s=n.Va(0),u=0,c=0;c<o;c++)a=new e.b,s.mc(2*c,a),r.contains(a)||(0==u&&(i=n.Ea()),u<c&&i.yd(n,u,c),u=c+1);return 0<u&&i.yd(n,u,o),0==u?n:i;case 1736:case 1607:return t.gz(n,r,a);default:throw e.f.za()}},t.prototype.Qh=function(t,n){var r=new e.b;return this.a.w(t,r),t=new e.b,this.a.w(n,t),r.compare(t)},t}();e.Yd=t}(J||(J={})),function(e){var t=function(){function t(t,n){this.Da=t,this.a=new e.Yc,this.fd=new e.ha(0),this.nd=n}return t.prototype.Ph=function(e,t,n){switch(t){case 0:if(e.o<n&&e.v<=n)break;return e.o>=n?1:-1;case 1:if(e.A<n&&e.B<=n)break;return e.A>=n?1:-1;case 2:if(e.o>=n&&e.v>n)break;return e.v<=n?1:-1;case 3:if(!(e.A>=n&&e.B>n))return e.B<=n?1:-1}return 0},t.prototype.fz=function(e,t){return 1736==e.F()?this.hz(e,t):this.iz(e)},t.prototype.hz=function(t,n){if(0==this.Da.N()||0==this.Da.ca())return t.Ea();var r=new e.g;t.Zb(r),this.W=this.a.Bb(t);var i=new e.g,a=new e.g,o=new e.b,s=new e.b,u=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0],l=new e.zb,h=new e.ha(0);h.Db(256);for(var f=!1,p=0;!f&&4>p;p++){var d=!1,v=0!=(1&p),y=0;switch(p){case 0:d=r.o<=(y=this.Da.o)&&r.v>=y;break;case 1:d=r.A<=(y=this.Da.A)&&r.B>=y;break;case 2:d=r.o<=(y=this.Da.v)&&r.v>=y;break;case 3:d=r.A<=(y=this.Da.B)&&r.B>=y}if(d)for(f=!0,d=this.a.Kb(this.W);-1!=d;){var b=!0,g=-1,m=-1,w=this.a.Za(d),O=w;do{var j=this.a.ec(O);null==j&&(j=l,this.a.w(O,o),j.Fc(o),this.a.w(this.a.T(O),s),j.Sc(s)),j.s(i);var _=this.Ph(i,p,y),x=0,k=-1;if(-1==_){x=0<(j=j.uq(v,y,u,c))?this.a.qZ(O,c,j):0,x+=1;var S=O,M=this.a.T(S);for(j=0;j<x;j++){if(this.a.w(S,o),this.a.w(M,s),null==(k=this.a.ec(S))&&((k=l).Fc(o),k.Sc(s)),k.s(a),-1==(k=this.Ph(a,p,y))){if(v)(k=Math.abs(o.y-y))<(I=Math.abs(s.y-y))?(o.y=y,this.a.wf(S,o)):(s.y=y,this.a.wf(M,s));else{k=Math.abs(o.x-y);var I=Math.abs(s.x-y);k<I?(o.x=y,this.a.wf(S,o)):(s.x=y,this.a.wf(M,s))}null==(k=this.a.ec(S))&&((k=l).Fc(o),k.Sc(s)),k.s(a),k=this.Ph(a,p,y)}I=g,g=k,-1==m&&(m=g),0==I&&1==g||1==I&&0==g||0!=I||0!=g||h.add(S),1==g&&(b=f=!1),k=S=M,M=this.a.T(M)}}if(0==x&&(I=g,g=_,-1==m&&(m=g),0==I&&1==g||1==I&&0==g||0!=I||0!=g||h.add(O),1==g&&(b=f=!1),k=this.a.T(O)),O=k,256<=h.size){for(j=1,_=h.size-1;j<_;j++)x=h.get(j),this.a.pd(x,!1);h.set(1,h.Gc()),h.Gh(2)}}while(O!=w);if(!b)for(0==m&&0==g&&h.add(w),j=0,_=h.size;j<_;j++)x=h.get(j),this.a.pd(x,!1);h.clear(!1),d=b||0==this.a.Ha(d)?this.a.sr(d):this.a.Qb(d)}}return f?t.Ea():(this.pC(),0<n&&this.rz(n),this.a.ye(this.W))},t.prototype.iz=function(t){var n=new e.g,r=new e.g,i=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],o=new e.og,s=t,u=new e.g;t.Zb(u);for(var c=new e.b,l=new e.b,h=null,f=null,p=0;4>p;p++){var d=!1,v=0!=(1&p),y=0;switch(p){case 0:d=u.o<=(y=this.Da.o)&&u.v>=y;break;case 1:d=u.A<=(y=this.Da.A)&&u.B>=y;break;case 2:d=u.o<=(y=this.Da.v)&&u.v>=y;break;case 3:d=u.A<=(y=this.Da.B)&&u.B>=y}if(d)for(d=s,s=t.Ea(),(d=d.Ba()).ej();d.Ta();)for(var b,g=!0;d.Aa();){var m=d.aa();m.s(n);var w=this.Ph(n,p,y);if(-1==w){if(0<(w=m.uq(v,y,i,a))){var O=0;m.qq(c);for(var j=0;j<=w;j++)if(O!=(b=j<w?a[j]:1)){m.jh(O,b,o);var _=o.get();_.Fc(c),j<w&&(v?(l.x=i[j],l.y=y):(l.x=y,l.y=i[j]),_.Sc(l)),_.s(r);var x=this.Ph(r,p,y);-1==x&&(null==h&&(h=new e.b),null==f&&(f=new e.b),_.qq(h),_.vs(f),v?(O=Math.abs(h.y-y))<(x=Math.abs(f.y-y))?(h.y=y,_.Fc(h)):(f.y=y,_.Sc(f)):(O=Math.abs(h.x-y))<(x=Math.abs(f.x-y))?(h.x=y,_.Fc(h)):(f.x=y,_.Sc(f)),_.s(r),x=this.Ph(r,p,y)),_.vs(c),O=b,1==(b=x)?(s.$b(_,g),g=!1):g=!0}}}else 1==(b=w)?(s.$b(m,g),g=!1):g=!0}}return s},t.prototype.pC=function(){this.si=-1,this.fm(!1,this.Da.o),this.fm(!1,this.Da.v),this.fm(!0,this.Da.A),this.fm(!0,this.Da.B),this.fd.resize(0),this.fd.Db(100),this.si=this.a.Kd();for(var t=new e.b,n=this.a.Kb(this.W);-1!=n;n=this.a.Qb(n))for(var r=this.a.Za(n),i=0,a=this.a.Ha(n);i<a;i++,r=this.a.T(r))this.a.w(r,t),(this.Da.o==t.x||this.Da.v==t.x||this.Da.A==t.y||this.Da.B==t.y)&&(this.a.Qa(r,this.si,this.fd.size),this.fd.add(r));this.Yl(!1,this.Da.o),this.Yl(!1,this.Da.v),this.Yl(!0,this.Da.A),this.Yl(!0,this.Da.B),this.zz()},t.prototype.rz=function(t){for(var n=new e.b,r=new e.b,i=null,a=null,o=e.L.Xf(2048,0),s=this.a.Kb(this.W);-1!=s;s=this.a.Qb(s)){var u=this.a.Za(s),c=u;do{var l=this.a.T(c);this.a.w(c,n);var h=-1;if(n.x==this.Da.o?(this.a.w(l,r),r.x==this.Da.o&&(h=1)):n.x==this.Da.v&&(this.a.w(l,r),r.x==this.Da.v&&(h=1)),n.y==this.Da.A?(this.a.w(l,r),r.y==this.Da.A&&(h=0)):n.y==this.Da.B&&(this.a.w(l,r),r.y==this.Da.B&&(h=0)),-1!=h){if(null==i&&(i=new e.b),null==a&&(a=new e.b),i.K(n),a.ka(0,0),0==h){var f=n.x-this.Da.o;a.x=e.Tb.sign(r.x-n.x),i.x=t*e.Tb.hl(Math.floor(Math.abs(f/t)),f)+this.Da.o,0>i.x&&(i.x+=t)}else f=n.y-this.Da.A,a.y=e.Tb.sign(r.y-n.y),i.y=t*e.Tb.hl(Math.floor(Math.abs(f/t)),f)+this.Da.A,0>i.y&&(i.y+=t);f=0!=h?r.y-n.y:r.x-n.x;var p=Math.abs(f);if(65536<p/t)throw e.f.Y("internal error");if(0<p){p=e.L.truncate(p/t)+2,o.length<p&&(o=e.L.Xf(p));for(var d=p=0;;d++){var v=new e.b;if(v.x=i.x+a.x*d*t,v.y=i.y+a.y*d*t,1<=(v=(0!=h?v.y-n.y:v.x-n.x)/f))break;0>=v||(o[p]=v,p++)}0!=p&&this.a.em(c,o,p)}}c=l}while(c!=u)}},t.prototype.fm=function(t,n){for(var r=-1,i=new e.b,a=null,o=this.a.Kb(this.W);-1!=o;o=this.a.Qb(o))for(var s=this.a.Za(o),u=0,c=this.a.Ha(o);u<c;u++){var l=this.a.T(s);this.a.w(s,i),(t?i.y==n:i.x==n)&&(this.a.w(l,i),(t?i.y==n:i.x==n)&&(-1==r&&(r=this.a.Kd()),null==a&&(a=new e.ha(0)).Db(100),1!=this.a.Na(s,r)&&(a.add(s),this.a.Qa(s,r,1)),1!=this.a.Na(l,r)&&(a.add(l),this.a.Qa(l,r,1)))),s=l}if(-1!=r&&this.a.Xd(r),!(null==a||3>a.size)){var h=this;a.Zd(0,a.size,(function(e,t){return h.Qh(e,t)})),r=new e.b,o=new e.b,s=new e.b,o.Tc();var f=-1;u=new e.ha(0),c=new e.ha(0),l=null;for(var p=this.a.Kd(),d=this.a.Kd(),v=0,y=a.size;v<y;v++){var b=a.get(v);if(this.a.w(b,i),!i.qb(o)){if(-1!=f){for(var g=f;g<v;g++){f=a.get(g);var m=this.a.T(f);b=this.a.Ma(f);var w=!1;this.a.w(m,r),0>o.compare(r)&&(t?r.y==n:r.x==n)&&(u.add(f),w=!0,this.a.Qa(f,d,1)),this.a.w(b,r),0>o.compare(r)&&(t?r.y==n:r.x==n)&&(w||u.add(f),this.a.Qa(f,p,1))}for(g=0,w=u.size;g<w;g++){if(f=u.get(g),b=this.a.Na(f,p),m=this.a.Na(f,d),1==b&&(b=this.a.Ma(f),this.a.w(b,s),!s.qb(i))){null==l&&(l=[]);var O=e.b.vb(o,s);l[0]=e.b.vb(s,i)/O,0==l[0]?l[0]=2220446049250313e-31:1==l[0]&&(l[0]=.9999999999999998),this.a.em(b,l,1),b=this.a.Ma(f),this.a.wf(b,i),c.add(b),this.a.Qa(b,p,1),this.a.Qa(b,d,-1)}1==m&&(m=this.a.T(f),this.a.w(m,s),s.qb(i)||(null==l&&(l=[]),O=e.b.vb(o,s),l[0]=e.b.vb(o,i)/O,0==l[0]?l[0]=2220446049250313e-31:1==l[0]&&(l[0]=.9999999999999998),this.a.em(f,l,1),b=this.a.T(f),this.a.wf(b,i),c.add(b),this.a.Qa(b,p,-1),this.a.Qa(b,d,1)))}f=u,u=c,(c=f).clear(!1)}f=v,o.K(i)}}this.a.Xd(p),this.a.Xd(d)}},t.prototype.Yl=function(t,n){for(var r=new e.b,i=null,a=-1,o=0,s=this.fd.size;o<s;o++){var u=this.fd.get(o);if(-1!=u){var c=this.a.T(u);this.a.w(u,r),(t?r.y==n:r.x==n)&&(this.a.w(c,r),(t?r.y==n:r.x==n)&&(-1==a&&(a=this.a.Kd()),null==i&&(i=new e.ha(0)).Db(100),-2!=this.a.Na(u,a)&&(i.add(u),this.a.Qa(u,a,-2)),-2!=this.a.Na(c,a)&&(i.add(c),this.a.Qa(c,a,-2))))}}if(null==i)-1!=a&&this.a.Xd(a);else{var l=this;for(i.Zd(0,i.size,(function(e,t){return l.Qh(e,t)})),o=0,s=i.size;o<s;o++){var h=i.get(o);this.a.Qa(h,a,o)}u=new e.b,(c=new e.b).Tc();var f=-1;for(o=0,s=i.size;o<s;o++)if(-1!=(h=i.get(o))&&(this.a.w(h,r),!r.qb(c))){if(-1!=f)for(;;){h=!1;for(var p=1<o-f?o-1:o,d=f;d<p;d++){var v=i.get(d);if(-1!=v){var y=-1,b=this.a.T(v);this.a.w(b,u),0>c.compare(u)&&(t?u.y==n:u.x==n)&&(y=b),b=-1;var g=this.a.Ma(v);if(this.a.w(g,u),0>c.compare(u)&&(t?u.y==n:u.x==n)&&(b=g),-1!=y&&-1!=b)this.Oh(v,i,a),this.a.pd(v,!1),this.Oh(y,i,a),this.a.pd(y,!1),h=!0;else if(-1!=y||-1!=b){for(g=d+1;g<o;g++){var m=i.get(g);if(-1!=m){var w=this.a.T(m),O=-1;this.a.w(w,u),0>c.compare(u)&&(t?u.y==n:u.x==n)&&(O=w),w=this.a.Ma(m);var j=-1;if(this.a.w(w,u),0>c.compare(u)&&(t?u.y==n:u.x==n)&&(j=w),-1!=O&&-1!=j){this.Oh(m,i,a),this.a.pd(m,!1),this.Oh(O,i,a),this.a.pd(O,!1),h=!0;break}if(-1!=y&&-1!=j){this.ku(i,v,y,m,j,a),h=!0;break}if(-1!=b&&-1!=O){this.ku(i,m,O,v,b,a),h=!0;break}}}if(h)break}}}if(!h)break}f=o,c.K(r)}this.a.Xd(a)}},t.prototype.Oh=function(e,t,n){n=this.a.Na(e,n),t.set(n,-1),n=this.a.Na(e,this.si),this.fd.set(n,-1),-1!=(t=this.a.cd(e))&&this.a.Za(t)==e&&(this.a.Sf(t,-1),this.a.dh(t,-1))},t.prototype.ku=function(e,t,n,r,i,a){this.a.Dc(t,r),this.a.Ec(r,t),this.a.Ec(n,i),this.a.Dc(i,n),this.Oh(r,e,a),this.a.ui(r,!1),this.Oh(i,e,a),this.a.ui(i,!0)},t.prototype.zz=function(){for(var e=0,t=this.fd.size;e<t;e++){var n=this.fd.get(e);-1!=n&&this.a.hj(n,-1)}for(var r=0,i=0,a=this.a.Kb(this.W);-1!=a;){var o=this.a.Za(a);if(-1==o||a!=this.a.cd(o)){var s=a;a=this.a.Qb(a),this.a.Sf(s,-1),this.a.tr(s)}else{n=o,s=0;do{this.a.hj(n,a),s++,n=this.a.T(n)}while(n!=o);this.a.sp(a,!1),this.a.dh(a,this.a.Ma(o)),this.a.Wj(a,s),i+=s,r++,a=this.a.Qb(a)}}for(e=0,t=this.fd.size;e<t;e++)if(-1!=(n=this.fd.get(e))&&-1==(a=this.a.cd(n))){a=this.a.Ef(this.W,-1),s=0,o=n;do{this.a.hj(n,a),s++,n=this.a.T(n)}while(n!=o);2>=s?(n=this.a.Na(o,this.si),this.fd.set(n,-1),o=this.a.pd(o,!1),2==s&&(0<=(n=this.a.Na(o,this.si))&&this.fd.set(n,-1),this.a.pd(o,!1)),this.a.Sf(s=a,-1),this.a.tr(s)):(this.a.An(a,!0),this.a.Wj(a,s),this.a.Sf(a,o),this.a.dh(a,this.a.Ma(o)),this.a.sp(a,!1),i+=s,r++)}for(this.a.bm(this.W,r),this.a.Uj(this.W,i),e=0,t=this.a.ld;-1!=t;t=this.a.Ae(t))e+=this.a.D(t);this.a.JC(e)},t.gz=function(e,n,r,i){return new t(n,i).fz(e,r)},t.clip=function(e,n,r,i,a){return t.Tp(e,n,null,r,i,a)},t.Tp=function(n,r,i,a,o,s){var u=n.F();if(33==u)return o=n.w(),r.contains(o)?n:n.Ea();if(197==u)return o=new e.g,n.s(o),o.Ia(r)?(r=new e.Ih,n.copyTo(r),r.mp(o),r):n.Ea();if(n.u())return n;if(r.u())return n.Ea();var c=new e.g;if(n.Zb(c),r.contains(c))return n;if(!r.isIntersecting(c))return n.Ea();if((null!=i||isNaN(a))&&e.la.Yy(i,r,!1),!e.R.Rg(u))throw e.f.I();if(null!=(i=n.ib)&&null!=(i=i.oi)){if(1==(i=i.rn(r))){if(1736!=u)throw e.f.Y("internal error");return(n=new e.Ga(n.description)).Np(r),n}if(0==i)return n.Ea()}switch(u){case 550:for(s=null,u=n.D(),i=n.Va(0),a=0,o=new e.b,c=0;c<u;c++)i.mc(2*c,o),r.contains(o)||(0==a&&(s=n.Ea()),a<c&&s.yd(n,a,c),a=c+1);return 0<a&&s.yd(n,a,u),0==a?n:s;case 1736:case 1607:return t.gz(n,r,o,s);default:throw e.f.Y("internal error")}},t.prototype.Qh=function(t,n){var r=new e.b;return this.a.w(t,r),t=new e.b,this.a.w(n,t),r.compare(t)},t}();e.fh=t}(J||(J={})),function(e){var t=new e.b,n=function(){function t(t,n,r,i,a){this.bn=new e.b,this.Lk=new e.b,this.Vi=new e.b,this.a=t,this.hx=r,this.Go=i,this.bn=n,this.Hl=a,this.Lk.Tc(),this.Vi.Tc()}return t.prototype.iF=function(t){this.a.w(t,this.Lk),t=e.L.truncate((this.Lk.x-this.bn.x)*this.Go+.5);var n=e.L.truncate((this.Lk.y-this.bn.y)*this.Go+.5);return r.WG(t,n)},t.prototype.Tz=function(e){return this.a.Na(e,this.Hl)},t.prototype.vz=function(e,t){return this.a.w(e,this.Lk),this.a.w(t,this.Vi),r.jw(this.Lk.x,this.Lk.y,this.Vi.x,this.Vi.y,this.hx)},t}();e.ZZ=function(){};var r=function(){function r(){this.bn=new e.b,this.Iq=[0,0,0,0],this.ft=[0,0,0,0],this.Jo=this.Hl=-1}return r.uR=function(e,t){var n=new r;return n.a=e,n.qa=t,n.hx=t*t,n.Hw=2*t,n.Go=1/n.Hw,n.LP()},r.jw=function(e,t,n,r,i){return(e-=n)*e+(t-=r)*t<=i},r.WG=function(t,n){return e.L.Zh(n,e.L.Zh(t))},r.prototype.NP=function(n,i){this.a.Hc(n,t);for(var a=(t.y-this.bn.y)*this.Go,o=e.L.truncate((t.x-this.bn.x)*this.Go),s=e.L.truncate(a),u=a=0;1>=u;u+=1)for(var c=0;1>=c;c+=1){var l=r.WG(o+u,s+c),h=this.Gl.ES(l);-1!=h&&(this.Iq[a]=h,this.ft[a]=l,a++)}for(o=a-1;1<=o;o--)for(h=this.Iq[o],s=o-1;0<=s;s--)if(h==this.Iq[s]){this.ft[s]=-1,o!=--a&&(this.ft[o]=this.ft[a],this.Iq[o]=this.Iq[a]);break}for(s=0;s<a;s++)this.OP(n,this.ft[s],t,this.Iq[s],i)},r.prototype.OP=function(t,n,i,a,o){for(var s=new e.b;-1!=a;a=this.Gl.US(a)){var u=this.Gl.ga(a);t==u||-1!=n&&this.a.Na(u,this.Hl)!=n||(this.a.Hc(u,s),r.jw(i.x,i.y,s.x,s.y,this.hx)&&o.add(a))}},r.prototype.ln=function(e,t,n){var r=this.a.Na(e,this.Jo),i=this.a.Na(t,this.Jo);return-1==r&&(r=this.Cd.Th(),this.Cd.addElement(r,e),this.a.Qa(e,this.Jo,r)),-1==i?this.Cd.addElement(r,t):this.Cd.lz(r,i),this.a.Qa(t,this.Jo,-2),t=this.qV(e,t),n&&(n=this.Sw.iF(e),this.a.Qa(e,this.Hl,n)),t},r.oV=function(t,n,i){t.Ib(n),i=t;var a=new e.b;r.pV(t.w(),n.w(),a),i.nb(a)},r.pV=function(e,t,n){var r=e.x;e.x!=t.x&&(r=(1*e.x+1*t.x)/2);var i=e.y;e.y!=t.y&&(i=(1*e.y+1*t.y)/2),n.ka(r,i)},r.prototype.qV=function(t,n){var r=new e.b;this.a.w(t,r);var i=new e.b;this.a.w(n,i);var a=this.a.OG(t),o=a+(n=this.a.OG(n)),s=0,u=r.x;r.x!=i.x&&(u=(r.x*a+i.x*n)/o,s++);var c=r.y;return r.y!=i.y&&(c=(r.y*a+i.y*n)/o,s++),0<s&&this.a.nb(t,u,c),this.a.ZY(t,o),0!=s},r.prototype.LP=function(){var t=this.a.hd,r=this.a.uG();for(this.bn=r.Wz(),r=Math.max(r.ca(),r.N())/2147483646,this.Hw<r&&(this.Hw=r,this.Go=1/this.Hw),this.Cd=new e.Iu,this.Cd.lu(e.L.truncate(this.a.hd/3+1)),this.Cd.vn(e.L.truncate(this.a.hd/3+1)),this.Hl=this.a.Kd(),this.Jo=this.a.Kd(),this.Sw=new n(this.a,this.bn,this.hx,this.Go,this.Hl),this.Gl=new e.nM(e.L.truncate(4*t/3),this.Sw),this.Gl.fY(this.a.hd),t=!1,r=this.a.ld;-1!=r;r=this.a.Ae(r))for(var i=this.a.Kb(r);-1!=i;i=this.a.Qb(i))for(var a=this.a.Za(i),o=0,s=this.a.Ha(i);o<s;o++){var u=this.Sw.iF(a);this.a.Qa(a,this.Hl,u),this.Gl.addElement(a,u),a=this.a.T(a)}var c=new e.ha(0);for(c.Db(10),r=this.a.ld;-1!=r;r=this.a.Ae(r))for(i=this.a.Kb(r);-1!=i;i=this.a.Qb(i))for(a=this.a.Za(i),o=0,s=this.a.Ha(i);o<s;o++){if(-2!=this.a.Na(a,this.Jo))for(u=this.a.Na(a,this.Hl),this.Gl.jd(a,u);this.NP(a,c),0!=c.size;){u=!1;for(var l=0,h=c.size;l<h;l++){var f=c.get(l),p=this.Gl.ga(f);this.Gl.zd(f),u=this.ln(a,p,l+1==h)||u}if(t=t||u,c.clear(!1),!u)break}a=this.a.T(a)}return t&&this.GO(),this.Sw=this.Gl=null,this.a.Xd(this.Hl),this.a.Xd(this.Jo),t},r.prototype.GO=function(){for(var t=new e.b,n=this.Cd.re;-1!=n;n=this.Cd.$z(n)){var r=this.Cd.sc(n);for(this.a.w(this.Cd.ga(r),t),r=this.Cd.hb(r);-1!=r;r=this.Cd.hb(r))this.a.wf(this.Cd.ga(r),t)}},r}();e.Fu=r}(J||(J={})),function(e){var t=function(){function t(e){void 0===e&&(e=null),this.uf=null,this.Mb=!1,this.uf=null===e?[]:e}return t.prototype.copyTo=function(t){if(t.Mb)throw e.f.Y("CompositeGeographicTransformation is read-only");for(var n=0;n<this.uf.length;n++)t.uf.push(this.uf[n].Cf())},t.prototype.count=function(){return this.uf.length},t.prototype.GS=function(e){return this.uf[e]},t.prototype.add=function(t){if(this.Mb)throw e.f.Y("CompositeGeographicTransformation is read-only");this.uf.push(t.Cf())},t.prototype.clear=function(){if(this.Mb)throw e.f.Y("CompositeGeographicTransformation is read-only");this.uf.length=0},t.prototype.remove=function(t){if(this.Mb)throw e.f.Y("CompositeGeographicTransformation is read-only");this.uf.splice(t,1)},t.prototype.Rv=function(){for(var e=this.$d(),t=0;t<e.count();t++)e.GS(t).Xs();return e.uf=e.uf.reverse(),e},t.prototype.$d=function(){var e=new t;return this.copyTo(e),e},t.prototype.Cf=function(){return this.$d()},t.prototype.transform=function(t,n,r,i){if(t.length<n)throw e.f.Y("invalid Argument");var a=r;for(r=0;r<this.uf.length;r++){var o=this.uf[r];if(null!=o.Bm()){var s=o.no,u=s?1:0,c=s?o.Bm().getGeogcs2():o.Bm().getGeogcs1();if(c=a/(c=c.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(c-1))for(a=0;a<n;a++)t[a][0]*=c,t[a][1]*=c;e.tD.geogToGeog(o.Bm(),n,t,null,u),a=(s?o.Bm().getGeogcs1():o.Bm().getGeogcs2()).getUnit().getUnitFactor()}}if(c=a/i,3552713678800501e-30<Math.abs(c-1))for(a=0;a<n;a++)t[a][0]*=c,t[a][1]*=c;return n},t.prototype.Ib=function(e){if(e==this)return!0;if(!(e instanceof t)||this.uf.length!=e.uf.length)return!1;for(var n=0;n<this.uf.length;n++)if(!this.uf[n].Ib(e.uf[n]))return!1;return!0},t.prototype.Px=function(){this.Mb=!0},t.prototype.toString=function(){for(var e="CGT ("+this.count()+") ",t=0,n=this.count();t<n;++t)e+=this.uf[t].toString()+", ";return 200<e.length?e.substring(0,197)+"... ("+e.length.toString()+" characters)":e},t.create=function(){return new t},t.N_=function(n,r){var i=new t;return i.add(e.Hn.create(n,r)),i},t.O_=function(n,r){var i=new t;return i.add(e.Hn.LF(n,r)),i},t}();e.hy=t}(J||(J={})),function(e){var t,n=Math.PI,r=2*Math.PI,i=Math.PI/2,a=function(){function e(){}return e.cQ=function(t,n){var r=new e;return r.x=t,r.y=n,r.type=0,r.$h=0,r},e.gl=function(t){var n=new e;return n.x=t.x,n.y=t.y,n.type=0,n.$h=0,n},e.bQ=function(t){var n=new e;return n.x=t.x,n.y=t.y,n.type=t.type,n.$h=t.$h,n},e.Rd=function(t,n,r){var i=new e;return i.x=t.x+n*Math.cos(r),i.y=t.y+n*Math.sin(r),i.type=t.type,i.$h=t.$h,i},e.xv=function(t,n){var r=new e;return r.x=.5*(t.x+n.x),r.y=.5*(t.y+n.y),r.type=t.type,r.$h=t.$h,r},e.EF=function(t,n){var r=new e;return r.x=t.x+.001*(n.x-t.x),r.y=t.y+.001*(n.y-t.y),r.type=t.type,r.$h=t.$h,r},e}(),o=function(){};(t=e.pM||(e.pM={}))[t.Round=0]="Round",t[t.Bevel=1]="Bevel",t[t.Miter=2]="Miter",t[t.Square=3]="Square";var s=function(){function t(e){this.wB=this.Yb=this.Dg=null,this.nd=e}return t.U=function(n,r,i,a,o,s){if(null==n)throw e.f.I();if(1>n.pb())throw e.f.I();return 0==r||n.u()?n:((s=new t(s)).Do=n,s.La=r,s.qa=o,s.Qi=i,s.lB=a,s.wy())},t.prototype.lN=function(){var t=this.Do,n=t.ac(),r=t.wc(),i=new e.b;return i.tc(r,n),i.normalize(),i.pw(),i.scale(this.La),n.add(i),r.add(i),i=t.Ea(),t.Fc(n),t.Sc(r),i},t.prototype.kN=function(){var t=this.Do;if(0<this.La&&2!=this.Qi){var n=new e.Ga;return n.bd(t,!1),this.Do=n,this.wy()}return(t=new e.Ih(t.X)).O(this.La,this.La),t},t.prototype.xK=function(e,t,n,r){return(t.x-e.x)*(r.x-n.x)+(t.y-e.y)*(r.y-n.y)},t.prototype.jc=function(e,t){if(void 0===t)this.Yb.push(e),this.qf++;else if(0==this.qf)this.jc(e);else{var n=this.ix,r=this.Dg[0==t?n-1:t-1],o=this.Dg[t],s=this.xK(r,o,this.Yb[this.qf-1],e);0<s?this.jc(e):0>s&&(0<this.xK(r,o,o,this.Yb[this.qf-1])?(o=this.Dg[0==t?n-2:1==t?n-1:t-2],n=a.Rd(r,this.La,Math.atan2(r.y-o.y,r.x-o.x)-i),this.Yb[this.qf-1]=n,1==this.Qi||2==this.Qi?(n=a.xv(n,r),this.jc(n),n=a.Rd(r,this.La,this.rw+i),(r=a.xv(n,r)).type|=256,this.jc(r)):(n=a.Rd(r,this.La,this.rw+i)).type|=256,this.jc(n),this.jc(e,t)):(n=a.Rd(o,this.La,this.rw+i),this.jc(n),1==this.Qi||2==this.Qi?(n=a.xv(n,o),this.jc(n),n=a.Rd(o,this.La,this.LA-i),(r=a.xv(n,o)).type|=256,this.jc(r)):(n=a.Rd(o,this.La,this.LA-i)).type|=256,this.jc(n)))}},t.prototype.ZE=function(){var t,o=this.ix;this.qf=0;var s=.5*this.qa,u=0,c=0;for(t=0;t<o;t++){var l=this.Dg[t],h=0==t?this.Dg[o-1]:this.Dg[t-1],f=t==o-1?this.Dg[0]:this.Dg[t+1],p=h.x-l.x,d=h.y-l.y,v=f.x-l.x,y=f.y-l.y,b=Math.atan2(d,p),g=Math.atan2(y,v);if(this.rw=b,this.LA=g,0==t&&(u=b,c=g),p=p*y-v*d,d=g,g<b&&(g+=r),0<p*this.La)1==this.Qi||2==this.Qi?(b=a.Rd(l,this.La,b+i),this.jc(b),b=a.EF(l,b),this.jc(b),b=a.Rd(l,this.La,g-i),(l=a.EF(l,b)).type|=256,this.jc(l),this.jc(b)):(p=.5*(g-b),p=this.La/Math.abs(Math.sin(p)),b=a.Rd(l,p,.5*(b+g)),this.jc(b,t));else if(0!=(512&l.type)){for(p=1-s/Math.abs(this.La),h=1,f=0>this.La?-n:n,-1<p&&1>p&&(.017453292519943295>(d=2*Math.acos(p))&&(d=.017453292519943295),1<(h=e.L.truncate(n/d+1.5))&&(f/=h)),b=a.Rd(l,this.La,d=b+i),0==t&&(b.type|=1024),this.jc(b,t),p=this.La/Math.cos(f/2),(b=a.Rd(l,p,d+=f/2)).type|=1024,this.jc(b);0<--h;)(b=a.Rd(l,p,d+=f)).type|=1024,this.jc(b);(b=a.Rd(l,this.La,g-i)).type|=1024,this.jc(b)}else if(1==this.Qi)b=a.Rd(l,this.La,b+i),this.jc(b,t),b=a.Rd(l,this.La,g-i),this.jc(b);else if(0==this.Qi)for(p=1-s/Math.abs(this.La),h=1,f=g-i-(b+i),-1<p&&1>p&&(.017453292519943295>(d=2*Math.acos(p))&&(d=.017453292519943295),1<(h=e.L.truncate(Math.abs(f)/d+1.5))&&(f/=h)),p=this.La/Math.cos(.5*f),b=a.Rd(l,p,d=b+i+.5*f),this.jc(b,t);0<--h;)b=a.Rd(l,p,d+=f),this.jc(b);else 2==this.Qi?.99999999<(h=((p=h.x-l.x)*(v=f.x-l.x)+(d=h.y-l.y)*(y=f.y-l.y))/Math.sqrt(p*p+d*d)/Math.sqrt(v*v+y*y))?(b=a.Rd(l,1.4142135623730951*this.La,g-.25*n),this.jc(b,t),b=a.Rd(l,1.4142135623730951*this.La,g+.25*n),this.jc(b)):(h=Math.abs(this.La/Math.sin(.5*Math.acos(h))))>(f=Math.abs(this.lB*this.La))?(p=.5*(g-b),p=this.La/Math.abs(Math.sin(p)),b=a.Rd(l,p,.5*(b+g)),g=e.b.construct(b.x,b.y),b=e.b.construct(l.x,l.y),(l=new e.b).tc(g,b),(g=new e.b).mY(f/l.length(),l,b),b=(h-f)*Math.abs(this.La)/Math.sqrt(h*h-this.La*this.La),0<this.La?l.pw():l.ur(),l.scale(b/l.length()),(b=new e.b).add(g,l),(h=new e.b).tc(g,l),b=a.gl(b),this.jc(b,t),b=a.gl(h),this.jc(b)):(p=.5*(g-b),p=this.La/Math.abs(Math.sin(p)),b=a.Rd(l,p,.5*(b+g)),this.jc(b,t)):(g=d,0<this.La?(g>b&&(g-=r),h=b-g<i):(g<b&&(g+=r),h=g-b<i),h?(d=0>(p=1.4142135623730951*this.La)?b+.25*n:b+.75*n,b=a.Rd(l,p,d),this.jc(b,t),b=a.Rd(l,p,d=0>p?g-.25*n:g-.75*n),this.jc(b)):(p=.5*(g-b),p=this.La/Math.abs(Math.sin(p)),g<b&&(g+=r),b=a.Rd(l,p,(b+g)/2),this.jc(b,t)))}return this.rw=u,this.LA=c,this.jc(this.Yb[0],0),l=a.bQ(this.Yb[this.qf-1]),this.Yb[0]=l,this.bY()},t.prototype.gv=function(t,n){if(!(2>n))for(var r=0;r<n;r++){var i=this.Yb[t+r];0!=r?this.wB.Ii(e.b.construct(i.x,i.y)):this.wB.vu(e.b.construct(i.x,i.y))}},t.prototype.mN=function(e,t,n){var r=e.ua(t),i=e.zc(t);if(this.Yb=[],this.wB=n,e.Lb(t)){for(t=e.xa(r);e.xa(i-1).qb(t);)i--;if(2<=i-r){for(this.ix=i-r,this.Dg=[],t=r;t<i;t++)this.Dg.push(a.gl(e.xa(t)));this.ZE()&&this.gv(0,this.qf-1)}}else{for(t=e.xa(r);r<i&&e.xa(r+1).qb(t);)r++;for(t=e.xa(i-1);r<i&&e.xa(i-2).qb(t);)i--;if(2<=i-r){for(this.ix=2*(i-r)-2,this.Dg=[],(n=a.gl(e.xa(r))).type|=1536,this.Dg.push(n),t=r+1;t<i-1;t++)n=a.gl(e.xa(t)),this.Dg.push(n);for((n=a.gl(e.xa(i-1))).type|=512,this.Dg.push(n),t=i-2;t>=r+1;t--)(n=a.gl(e.xa(t))).type|=1024,this.Dg.push(n);if(this.ZE())if(2<=this.Yb.length){for(e=-1,(i=0!=(1024&this.Yb[this.qf-1].type))||(e=0),t=1;t<this.qf;t++)(r=0!=(1024&this.Yb[t].type))?i||1<(i=t-1)-e+1&&this.gv(e,i-e+1):i&&(e=t-1),i=r;i||1<(i=this.qf-1)-e+1&&this.gv(e,i-e+1)}else i=this.qf-1,0<=(e=0)&&1<=i-e&&this.gv(e,i-e+1)}}this.Dg=null,this.ix=0,this.Yb=null,this.qf=0},t.prototype.bY=function(){for(var e=!1,t=0;t<this.qf;t++){var n=this.Yb[t];n.xh=t+1,n.zh=t-1,this.Yb[t]=n}for((n=this.Yb[0]).zh=this.qf-2,this.Yb[0]=n,(n=this.Yb[this.qf-2]).xh=0,this.Yb[this.qf-2]=n,t=n=0;t<this.qf;t++)if(0!=(256&this.Yb[n].type)){var r=this.RQ(n);if(-1==r){e=!0;break}n=r}else n=this.Yb[n].xh;return!e&&(this.$P(n),!0)},t.prototype.RQ=function(e){for(var t,n,r=this.qf-1,i=e,a=1;a<=r-2;a++){t=i=this.Yb[i].xh,n=e;for(var o=1;o<=a;o++){if(0==(256&this.Yb[n=this.Yb[n].zh].type)&&0==(256&this.Yb[t].type)){var s=this.BT(n,t);if(-1!=s)return s}t=this.Yb[t].zh}}return-1},t.prototype.BT=function(t,n){var r=this.Yb[this.Yb[t].zh],i=this.Yb[t],a=this.Yb[this.Yb[n].zh],s=this.Yb[n];if(!this.oY(r,i,a,s))return-1;var u=new o;return this.JR(r,i,a,s,u)&&!u.OE&&e.L.fL((i.x-r.x)*(s.y-a.y)-(i.y-r.y)*(s.x-a.x))!=e.L.fL(this.La)?(r=this.Yb[t].zh,u.pn.type=i.type,u.pn.xh=n,u.pn.zh=r,this.Yb[t]=u.pn,u.pn=this.Yb[n],u.pn.zh=t,this.Yb[n]=u.pn,n):-1},t.prototype.oY=function(e,t,n,r){return Math.max(e.x,t.x)>=Math.min(n.x,r.x)&&Math.max(n.x,r.x)>=Math.min(e.x,t.x)&&Math.max(e.y,t.y)>=Math.min(n.y,r.y)&&Math.max(n.y,r.y)>=Math.min(e.y,t.y)},t.prototype.JR=function(e,t,n,r,i){i.OE=!1;var o=(t.y-e.y)*(r.x-n.x)-(t.x-e.x)*(r.y-n.y),s=(n.y-e.y)*(t.x-e.x)-(n.x-e.x)*(t.y-e.y);if(0<=(o=0==o?2:s/o)&&1>=o){var u=o;if(s=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),0<=(o=0==(o=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y))?2:s/o)&&1>=o)return i.pn=a.cQ(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)),i.pn.$h=n.$h+u*(r.$h-n.$h),0!=u&&1!=u||0!=o&&1!=o||(i.OE=!0),i.C0=o,i.D0=u,!((0==u||1==u)&&0<o&&1>o||(0==o||1==o)&&0<u&&1>u)}return!1},t.prototype.$P=function(e){for(;this.Yb[e].zh<e;)e=this.Yb[e].zh;var t=0,n=e;do{this.Yb[t]=n=this.Yb[n],n=n.xh,t++}while(n!=e);this.Yb[t]=this.Yb[0],this.qf=t+1},t.prototype.JD=function(e){var t=this.Do,n=t.Ba();if(null!=n){n.ej();for(var r=-1;n.Ta();)r++,this.mN(t,r,e)}},t.prototype.wy=function(){var t=this.Do.F();return 322==t?this.lN():197==t?this.kN():e.R.Ic(t)?((t=new e.Oa).$b(this.Do,!0),this.Do=t,this.wy()):1607==t?(t=new e.Oa,this.JD(t),t):1736==t?(t=new e.Ga,this.JD(t),t):null},t}();e.RL=s}(J||(J={})),function(e){var t=function(){function e(e){this.xk=e}return e.prototype.w=function(e,t){this.xk.a.w(e,t)},e.prototype.zd=function(e){var t=this.xk.Ja.ga(e);this.xk.Ja.zd(e,-1),this.xk.a.pd(t,!1)},e}(),n=function(){function e(e){this.xk=e}return e.prototype.w=function(e,t){this.xk.aV.w(e,t)},e.prototype.zd=function(e){this.xk.Ja.zd(e,-1)},e}(),r=function(){function e(e){this.xk=e}return e.prototype.w=function(e,t){t.K(this.xk.dV[e])},e.prototype.zd=function(e){this.xk.Ja.zd(e,-1)},e}(),i=function(){function i(i){void 0===i?(this.Ja=new e.bk,this.Ja.Le(20),this.a=new e.Yc,this.SU=this.a.Pg(550),this.At=this.a.Ef(this.SU,-1),this.ci=new t(this)):i instanceof Array?(this.Ja=new e.bk,this.Ja.Le(20),this.dV=i,this.ci=new r(this)):(this.Ja=new e.bk,this.Ja.Le(20),this.aV=i,this.ci=new n(this))}return i.prototype.Bb=function(t){var n=t.F();if(e.ly.Rg(n))this.tO(t);else if(e.Zk.Ic(n))this.zO(t);else if(197==n)this.qO(t);else{if(33!=n)throw e.f.I("invalid shape type");this.xO(t)}},i.prototype.qS=function(){var t=new e.Ra,n=this.Ja.sc(-1),r=new e.Ga(this.a.Qt);for(this.a.bj(this.Ja.ga(n),t),r.xf(t),n=this.Ja.hb(n);-1!=n;n=this.Ja.hb(n))this.a.bj(this.Ja.ga(n),t),r.lineTo(t);return r},i.aQ=function(t){var n=new i(t),r=t.D(),a=1,o=new e.b,s=new e.b,u=new e.b;for(t.w(0,o);t.w(a,s),s.xA(o)&&a<r-1;)a++;for(n.Ja.addElement(0,-1),n.Ja.Qn(a),r=a+1;r<t.D();r++)t.w(r,u),-1!=(a=n.YC(u))&&n.Ja.Tj(a,r);for(u=new e.Ra,a=n.Ja.sc(-1),r=new e.Ga(t.description),t.ne(n.Ja.ga(a),u),r.xf(u),a=n.Ja.hb(a);-1!=a;a=n.Ja.hb(a))t.ne(n.Ja.ga(a),u),r.lineTo(u);return r},i.construct=function(e,t,n){for(var r=new i(e),a=1,o=e[0];e[a].xA(o)&&a<t-1;)a++;for(r.Ja.addElement(0,-1),r.Ja.Qn(a),a+=1;a<t;a++)-1!=(o=r.YC(e[a]))&&r.Ja.Tj(o,a);for(e=0,t=r.Ja.sc(-1);-1!=t;t=r.Ja.hb(t))n[e++]=r.Ja.ga(t);return e},i.vH=function(t,n){var r=t.ua(n),a=t.zc(n);if(n=!t.Lb(n)&&t.ho(n),t=t.Va(0),a*=2,n&&(a-=2),6>a-(r*=2))return!0;n=new e.b;var o=new e.b,s=new e.b;t.mc(r,n),t.mc(r+2,o),t.mc(r+4,s);var u=i.Dv(o,s,n);if(u.Ys()||!i.Hm(u.value()))return!1;var c=e.b.construct(o.x,o.y),l=new e.b;for(r+=6;r<a;r+=2){if(l.K(o),o.K(s),t.mc(r,s),(u=i.Dv(o,s,n)).Ys()||!i.Hm(u.value()))return!1;if((u=i.Dv(c,s,n)).Ys()||!i.Hm(u.value()))return!1;if((u=i.Dv(o,s,l)).Ys()||!i.Hm(u.value()))return!1}return!0},i.prototype.tO=function(t){for(var n=new e.Ra,r=new e.b,i=0;i<t.D();i++){t.w(i,r);var a=this.cs(r);if(-1!=a){t.ne(i,n);var o=this.a.jc(this.At,n);this.Ja.Tj(a,o)}}},i.prototype.qO=function(t){for(var n=new e.Ra,r=new e.b,i=0;4>i;i++){t.Ax(i,r);var a=this.cs(r);if(-1!=a){t.Pf(i,n);var o=this.a.jc(this.At,n);this.Ja.Tj(a,o)}}},i.prototype.zO=function(t){var n=new e.Ra,r=t.ac();if(-1!=(r=this.cs(r))){t.jp(n);var i=this.a.jc(this.At,n);this.Ja.Tj(r,i)}r=t.wc(),-1!=(r=this.cs(r))&&(t.hp(n),t=this.a.jc(this.At,n),this.Ja.Tj(r,t))},i.prototype.xO=function(e){var t=e.w();-1!=(t=this.cs(t))&&(e=this.a.jc(this.At,e),this.Ja.Tj(t,e))},i.prototype.cs=function(e){var t=-1;if(0==this.Ja.size(-1))return this.Ja.addElement(-4,-1);if(1==this.Ja.size(-1)){var n=this.a.xa(this.Ja.ga(this.Ja.sc(-1)));return e.xA(n)||(t=this.Ja.Qn(-5)),t}return this.YC(e)},i.prototype.YC=function(t){var n=-1;do{var r=this.Ja.sc(-1),a=this.Ja.Gc(-1),o=this.Ja.ga(r),s=this.Ja.ga(a),u=new e.b,c=new e.b;if(this.ci.w(o,u),this.ci.w(s,c),o=e.b.fp(c,t,u),i.Hm(o))n=this.Ja.Qn(-1),(u=this.WC(t,a,r))!=r&&this.XC(t,r,this.Ja.Be(u));else if(i.oH(o)){c=this.Ja.aw(-1);var l=this.Ja.sc(-1),h=this.Ja.Gc(-1);for(o=new e.b,s=new e.b;l!=this.Ja.Be(h);){var f=this.Ja.ga(c);this.ci.w(f,o),f=e.b.fp(o,t,u),i.oH(f)?(h=c,c=this.Ja.rl(c)):(l=c,c=this.Ja.pq(c))}if(u=l,f=this.Ja.ga(c=h),l=this.Ja.ga(u),this.ci.w(f,o),this.ci.w(l,s),u!=r&&(o=e.b.fp(s,t,o),!i.Hm(o)))continue;n=this.Ja.fv(u,c,-2,!1),this.XC(t,c,a),this.WC(t,u,r)}else null==this.sb&&(this.sb=new e.zb),this.sb.Fc(c),this.sb.Sc(u),0>(u=this.sb.ae(t,!0))?(u=this.Ja.Be(a),this.Ja.zd(a,-1),n=this.Ja.Qn(-3),this.WC(t,u,r)):1<u&&(u=this.Ja.hb(r),this.Ja.zd(r,-1),n=this.Ja.fv(-1,u,-3,!1),this.XC(t,u,a))}while(0);return n},i.prototype.XC=function(t,n,r){if(n!=r){var a=this.Ja.ga(n),o=this.Ja.hb(n),s=new e.b,u=new e.b;for(this.ci.w(a,s);n!=r&&2<this.Ja.size(-1)&&(this.ci.w(this.Ja.ga(o),u),a=e.b.fp(u,t,s),!i.Hm(a));)a=n,n=o,s.K(u),o=this.Ja.hb(n),this.ci.zd(a)}},i.prototype.WC=function(t,n,r){if(n==r)return r;var a=this.Ja.ga(n),o=this.Ja.Be(n),s=new e.b,u=new e.b;for(this.ci.w(a,s);n!=r&&2<this.Ja.size(-1)&&(this.ci.w(this.Ja.ga(o),u),a=e.b.fp(s,t,u),!i.Hm(a));)a=n,n=o,s.K(u),o=this.Ja.Be(n),this.ci.zd(a);return n},i.Dv=function(t,n,r){var i=new e.Wb;i.set(n.x),i.sub(t.x);var a=new e.Wb;a.set(r.y),a.sub(t.y);var o=new e.Wb;return o.set(n.y),o.sub(t.y),(n=new e.Wb).set(r.x),n.sub(t.x),i.Gg(a),o.Gg(n),i.sub(o),i},i.Hm=function(e){return 0>e},i.oH=function(e){return 0<e},i.j0=function(e){return 0==e},i}();e.Gu=i}(J||(J={})),function(e){var t=function(){function t(e){this.a=null,this.gI=!0,this.nd=e}return t.eJ=function(t,n,r){return t=e.la.es(t),e.Fu.jw(n.Ce(),n.lf(),r.Ce(),r.lf(),e.Tb.Wx(t))},t.MP=function(t,n){var r=new e.Ra;return e.Fu.oV(t,n,r),r},t.U=function(e,n,r,i){return(r=new t(r)).a=e,r.qa=n,r.gI=i,r.MN()},t.prototype.vN=function(t){return e.Fu.uR(this.a,t)},t.prototype.AN=function(t){return e.Hu.U(this.a,t,this.nd)},t.prototype.MN=function(){var t=this.qa,n=e.la.es(t),r=1.00001*(t=e.la.CO(t));t*=1.000001;for(var i=!1,a=30<this.a.hd+10?1e3:(this.a.hd+10)*(this.a.hd+10),o=0,s=this.a.ET();;o++){if(o>a)throw e.f.Y("Internal Error: max number of iterations exceeded");var u=this.vN(n);if(i=i||u,this.gI&&(u=0!=this.a.$p(n,!0,!1),i=i||u),u=!1,(0==o||s||e.Hu.$I(!0,this.a,t,null,this.nd))&&(u=this.AN(r),i=i||u),!u)break;e.Ep.Sp(this.nd)}return i},t}();e.$j=t}(J||(J={})),function(e){var t=function(){function t(e){this.ge=this.Nc=null,this.Gt=0,this.Vb=e,this.NA=!0}return t.prototype.cw=function(e,t){var n=this.a.ec(e);if(null==n){if(!this.a.gd(e,t))return null;n=t}return n},t.prototype.qr=function(){var t;void 0===t&&(t=!1),this.Gt++,(t||0==(4095&this.Gt))&&(this.Gt=0,e.Ep.Sp(this.Vb))},t.prototype.xQ=function(){var t=this.a.rr(!1),n=!1,r=new e.zb,i=new e.zb,a=new e.g;a.Ka();var o=new e.g;o.Ka();for(var s=new e.Ra,u=new e.AD,c=t.next();-1!=c;c=t.next()){e.Ep.Sp(this.Vb);var l=null,h=!1;if(!e.R.lo(this.a.dc(t.gk))){if(null==(l=this.cw(c,r)))continue;if(l.s(a),a.O(this.qa,this.qa),l.Qg(this.qa)){if(!l.Qg(0))continue;h=!0,l=null}}var f=this.a.rr(t),p=f.next();for(-1!=p&&(p=f.next());-1!=p;p=f.next()){var d=null,v=!1;if(!e.R.lo(this.a.dc(f.gk))){if(null==(d=this.cw(p,i)))continue;if(d.s(o),d.Qg(this.qa)){if(!d.Qg(0))continue;v=!0,d=null}}var y=0,b=0;if(null!=l&&null!=d)a.tH(o)&&(u.gp(l),u.gp(d),u.Ia(this.qa,!1),0<(y=u.ul(0))+(b=u.ul(1))&&(this.a.Fr(c,u,0,!0),this.a.Fr(p,u,1,!0)),u.clear());else if(null!=l){var g=new e.b;if(this.a.w(p,g),a.contains(g)){if(u.gp(l),this.a.bj(p,s),u.rA(this.qa,s,!1),0<(y=u.ul(0)))if(this.a.Fr(c,u,0,!0),v){for(v=-1,g=this.a.T(p);-1!=g&&g!=p&&(v=g,null!=(d=this.cw(g,i))&&d.Qg(0));g=this.a.T(g));for(g=p;-1!=g&&(this.a.Hh(g,u.Jf),g!=v);g=this.a.T(g));}else this.a.Hh(p,u.Jf);u.clear()}}else{if(null==d)continue;if(g=new e.b,this.a.w(c,g),o.O(this.qa,this.qa),o.contains(g)){if(u.gp(d),this.a.bj(c,s),u.rA(this.qa,s,!1),0<(b=u.ul(0)))if(this.a.Fr(p,u,0,!0),h){for(v=-1,g=this.a.T(c);-1!=g&&g!=c&&(v=g,null!=(d=this.cw(g,i))&&d.Qg(0));g=this.a.T(g));for(g=c;-1!=g&&(this.a.Hh(g,u.Jf),g!=v);g=this.a.T(g));}else this.a.Hh(c,u.Jf);u.clear()}}if(0!=y+b){if(0!=y){if(null==(l=this.a.ec(c))){if(!this.a.gd(c,r))continue;l=r,r.s(a)}else l.s(a);if(l.Qg(this.qa))break}n=!0}}}return n},t.prototype.yQ=function(){return this.hW()},t.prototype.hW=function(){return(new e.yD).uZ(this.a,this.qa)},t.prototype.aJ=function(){var t=!1;null==this.Nc&&(this.Nc=new e.bk);var n=new e.ha(0);n.Db(this.a.hd+1);for(var r=this.a.rr(),i=r.next();-1!=i;i=r.next())n.add(i);this.a.Vx(n,n.size),n.add(-1),r=this.a.Kd(),i=this.a.Kd(),this.ge=new e.CD(this.a,this.qa,!this.NA),this.Nc.kp(this.ge);var a=new e.ha(0),o=new e.ha(0),s=0;new e.b;var u=this.a.ud;this.a.xb.rc();for(var c,l,h=this.a.xb.va[0].i,f=n.get(s++);-1!=f;){var p=c=h[2*(l=u.S(f,0))],d=l=h[2*l+1];do{var v=u.S(f,2),y=u.S(f,1);if(-1!=v){var b=u.S(v,0),g=h[2*b];0>(d<(b=h[2*b+1])?-1:d>b?1:p<g?-1:p>g?1:0)&&(o.add(f),o.add(v))}-1!=y&&(g=h[2*(b=u.S(y,0))],0>(d<(b=h[2*b+1])?-1:d>b?1:p<g?-1:p>g?1:0)&&(o.add(y),o.add(y))),-1!=(g=this.a.Na(f,r))&&(a.add(g),this.a.Qa(f,r,-1)),-1!=(g=this.a.Na(f,i))&&(a.add(g),this.a.Qa(f,i,-1)),-1!==(f=n.get(s++))&&(p=h[2*(d=u.S(f,0))],d=h[2*d+1])}while(-1!=f&&p===c&&d===l);for(p=1==a.size&&2==o.size,g=d=-1,v=0,y=a.size;v<y;v++){b=a.get(v);var m=this.Nc.Be(b);if(-1==m||a.UG(m)||(d=m),-1==(b=this.Nc.hb(b))||a.UG(b)||(g=b),-1!=d&&-1!=g)break}for(this.ge.dL(l,c),v=0,y=a.size;v<y;v++)b=a.get(v),this.Nc.zd(b,-1);if(a.clear(!1),!p&&-1!=d&&-1!=g&&this.AP(d,g)){t=!0,this.Ti=this.ge.Dm();break}for(v=0,y=o.size;v<y;v+=2){if(l=o.get(v),c=o.get(v+1),p?(l=this.Nc.fv(d,g,l,!0),p=!1):l=this.Nc.addElement(l,-1),this.ge.yg){this.Ti=this.ge.Dm(),t=!0;break}-1==this.a.Na(c,r)?this.a.Qa(c,r,l):this.a.Qa(c,i,l)}if(t)break;o.Gh(0)}return this.a.Xd(r),this.a.Xd(i),t},t.prototype.AP=function(e,t){return this.ge.compare(this.Nc,this.Nc.ga(e),t),e=this.ge.yg,this.ge.ks(),e},t.jF=function(t){for(var n=t.ld;-1!=n;n=t.Ae(n))if(e.R.Bc(t.dc(n)))return!0;return!1},t.rR=function(e,n,r,i){return!!t.jF(e)&&((n=new t(i)).a=e,n.qa=r,15>e.hd?e=n.xQ():n.yQ())},t.U=function(e,n,r){return t.rR(e,e.uG(),n,r)},t.$I=function(n,r,i,a,o){if(!t.jF(r))return!1;var s=new t(o);if(s.a=r,s.qa=i,s.NA=n,s.aJ())return null!=a&&a.Or(s.Ti),!0;var u=new e.xd;return u.HC(),r.Qc(u),(s=new t(o)).a=r,s.qa=i,s.NA=n,n=s.aJ(),u.HC(),r.Qc(u),!!n&&(null!=a&&a.Or(s.Ti),!0)},t.Wl=function(e,t){return!(16>(e=e.D()))&&2*e+Math.log(e)*Math.LOG10E/Math.log(2)*t<1*e*t},t.vQ=function(n,r,i,a){if(e.R.Bc(r.F()))return new t(a).wQ(n,r,i);throw e.f.Y("crack_A_with_B")},t.prototype.wQ=function(r,i,a){var o=new e.g;r.Zb(o);var s=new e.g;if(i.Zb(s),s.O(a,a),!s.isIntersecting(o))return r;var u=r.ib,c=null;null!=u&&(c=u.Hb),t.Wl(r,r.D())&&(c=e.la.pj(r,s));var l=null!=c?c.getIterator():null,h=i.Ba();i=r.Ba();var f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=[];h.Ta();)for(;h.Aa();){var p=h.aa();if(null!=c){for(l.wn(p,a),u=l.next();-1!=u;u=l.next())if(this.qr(),i.Rb(c.ga(u),-1),i.Aa()){var d=(u=i.aa()).Ia(p,null,f,null,a);for(u=0;u<d;++u){var v=f[u];if(0!=v&&1!=v){var y=i.wb(),b=new n;b.t=v,b.index=y,s.push(b)}}}}else{var g=new e.g;if(p.Zb(g),g.O(a,a),o.isIntersecting(g))for(i.ej();i.Ta();)for(;i.Aa();)if(this.qr(),u=i.aa(),v=new e.g,u.Zb(v),v.isIntersecting(g))for(d=u.Ia(p,null,f,null,a),u=0;u<d;++u)0!=(v=f[u])&&1!=v&&(y=i.wb(),(b=new n).t=v,b.index=y,s.push(b))}}if(0==s.length)return r;for(s=s.sort(n.ls),r=r.Ea(),i.ej();i.Ta()&&!i.Aa(););for(a=i.aa(),o=new e.og,c=-1,u=0,l=s.length;u<l;){for(f=s[u].index,h=u+1;h<l&&s[h].index==f;)++h;for(;i.wb()<f;){if(this.qr(),p=i.Aa(),v=i.Pa,(g=p||!i.io()||i.jo())&&r.$b(a,c!=v),c=v,!p)for(;i.Ta()&&!i.Aa(););a=i.aa()}for(f=0;u<h;u++)(v=s[u].t)!=f&&(a.jh(f,v,o),f=v,v=i.Pa,r.$b(o.get(),c!=v),c=v);if((g=(p=i.Aa())||!i.io()||i.jo())&&(a.jh(f,1,o),r.$b(o.get(),!1)),p)a=i.aa();else{for(;i.Ta()&&!i.Aa(););a=i.Aa()?i.aa():null}u=h}for(null!=a&&(v=i.Pa,(g=(p=i.Aa())||!i.io()||i.jo())&&r.$b(a,c!=v),c=v),p=i.Aa();;){if(!p){for(;i.Ta()&&!(p=i.Aa()););if(!p)break}a=i.aa(),v=i.Pa,(g=(p=i.Aa())||!i.io()||i.jo())&&r.$b(a,c!=v),c=v}return r},t}();e.Hu=t;var n=function(){function e(){}return e.ls=function(e,t){return e.index==t.index?e.t>t.t?1:e.t<t.t?-1:0:e.index>t.index?1:-1},e}()}(J||(J={})),function(e){var t;(t=e.TL||(e.TL={}))[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Coincident=2]="Coincident",t[t.Undefined=3]="Undefined",t[t.Uncut=4]="Uncut";var n=function(e,t,n,r,i,a,o,s,u,c,l){this.W=e,this.Jt=t,this.vt=n,this.Ag=r,this.Ym=c,this.Il=l};e.a_=n;var r=function(){function t(e,t){this.yI=e,this.Ni=t}return t.prototype.yN=function(t,n){var r=new e.b;this.Ni.w(t,r);var i=new e.b;return this.Ni.w(n,i),0!=(r=r.compare(i))?r:(t=this.Ni.Na(t,this.yI))<(n=this.Ni.Na(n,this.yI))?-1:t==n?0:1},t}(),i=function(e,t,n,r,i,a,o,s,u){this.Ag=e,this.vt=t,this.xB=n,this.JI=r,this.Ki=i,this.Il=a,this.Ym=o,this.KI=s,this.gV=u};e.$Z=i,e.UL=function(){function t(){}return t.SL=function(r,i,a,o,s,u){if(i.u())r=new n(i,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),s.push(r);else if(a.u())r=new n(i,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),s.push(r);else{var c=new e.Yc;if(c.Bb(i),c.Bb(a),e.$j.U(c,o,u,!0),0==c.hd)r=new n(i.Ea(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),s.push(r);else{for(i=0,a=c.Kd(),o=c.ld;-1!=o;o=c.Ae(o))for(u=c.Kb(o);-1!=u;u=c.Qb(u))for(var l=c.Za(u),h=0,f=c.Ha(u);h<f;l=c.T(l),h++)c.Qa(l,a,i++);i=t.PN(a,c),t.jN(r,i,c,s)}}},t.PN=function(n,i){for(var a=i.hd,o=new e.ha(0),s=i.ld;-1!=s;s=i.Ae(s))for(var u=i.Kb(s);-1!=u;u=i.Qb(u))for(var c=i.Za(u),l=0,h=i.Ha(u);l<h;c=i.T(c),l++)o.add(c);var f=new r(n,i);o.Zd(0,a,(function(e,t){return f.yN(e,t)})),n=[];var p=[],d=i.Kd(),v=i.Kd();u=i.Ae(s=i.ld),h=new e.b;var y=new e.b,b=o.get(0),g=i.cd(b),m=i.Zf(g);i.w(b,h);var w=1;for(c=0;w<a-1;){var O=!1;for(l=w;l<a;l++)if(l!=c){var j=o.get(l),_=i.cd(j),x=i.Zf(_);if(i.w(j,y),!h.qb(y))break;m==s&&x==u&&(O=t.CN(d,v,i,n,p,g,b,_,j))}if(O||c==w-1){if(O&&c==w-1&&w--,++c==a)break;b=o.get(c),g=i.cd(b),m=i.Zf(g),i.w(b,h)}O||(w=c+1)}for(a=[],s=i.ld;-1!=s;s=i.Ae(s))for(u=i.Kb(s);-1!=u;u=i.Qb(u))for(o=i.Za(u),l=0,h=i.Ha(u);l<h;o=i.T(o),l++){if(0<=(c=i.Na(o,v)))for(;c<p.length&&p[c].Ag==o;)a.push(p[c++]);if(0<=(c=i.Na(o,d)))for(;c<n.length&&n[c].Ag==o;)a.push(n[c++])}return i.Xd(d),i.Xd(v),a},t.CN=function(e,n,r,i,a,o,s,u,c){var l=r.wj(o),h=r.wj(u),f=r.Za(o),p=r.Za(u),d=r.Ma(s),v=r.Ma(c),y=!1,b=!1,g=!1,m=!1;return s!=f&&(c!=p&&(y=t.DN(e,r,i,o,d,u,v)),c!=h&&(b=t.EN(e,r,i,o,d,u,c))),s!=l&&(c!=p&&(g=t.FN(n,r,a,o,s,u,v,f)),c!=h&&(m=t.GN(n,r,a,o,s,u,c,f))),y&&b&&g?(e=i.length-1,2==a[m?a.length-2:a.length-1].Ki&&(i[e-1]=i[e],--i.length)):y&&b&&m&&2==a[a.length-1].Ki&&(a=i[i.length-1],--i.length,r.Na(a.Ag,e)==i.length&&r.Qa(a.Ag,e,-1)),y||b||g||m},t.DN=function(t,n,r,a,o,s,u){var c=new e.zb,l=new e.zb,h=[0,0],f=[0,0],p=n.ec(o);return null==p&&(n.gd(o,c),p=c),null==(c=n.ec(u))&&(n.gd(u,l),c=l),2>(p=p.Ia(c,null,h,f,0))&&(a=new i(o,a,h[0],NaN,p,u,s,f[0],NaN),r.push(a),0>(a=n.Na(o,t))&&n.Qa(o,t,r.length-1)),!0},t.EN=function(t,n,r,a,o,s,u){var c=new e.zb,l=new e.zb,h=[0,0],f=[0,0],p=n.ec(o);return null==p&&(n.gd(o,c),p=c),null==(c=n.ec(u))&&(n.gd(u,l),c=l),2>(p=p.Ia(c,null,h,f,0))&&(a=new i(o,a,h[0],NaN,p,u,s,f[0],NaN),r.push(a),0>(a=n.Na(o,t))&&n.Qa(o,t,r.length-1),!0)},t.FN=function(t,n,r,a,o,s,u,c){var l=new e.zb,h=new e.zb,f=[0,0],p=[0,0],d=n.ec(o);return null==d&&(n.gd(o,l),d=l),null==(l=n.ec(u))&&(n.gd(u,h),l=h),2==(d=d.Ia(l,null,f,p,0))?(a=new i(o,a,f[0],f[1],d,u,s,p[0],p[1]),r.push(a),0>(a=n.Na(o,t))&&n.Qa(o,t,r.length-1),!0):(h=!1,o==c&&(a=new i(o,a,f[0],NaN,d,u,s,p[0],NaN),r.push(a),0>(a=n.Na(o,t))&&n.Qa(o,t,r.length-1),h=!0),h)},t.GN=function(t,n,r,a,o,s,u,c){var l=new e.zb,h=new e.zb,f=[0,0],p=[0,0],d=n.ec(o);return null==d&&(n.gd(o,l),d=l),null==(l=n.ec(u))&&(n.gd(u,h),l=h),2==(d=d.Ia(l,null,f,p,0))?(a=new i(o,a,f[0],f[1],d,u,s,p[0],p[1]),r.push(a),0>(a=n.Na(o,t))&&n.Qa(o,t,r.length-1),!0):(h=!1,o==c&&(a=new i(o,a,f[0],NaN,d,u,s,p[0],NaN),r.push(a),0>(a=n.Na(o,t))&&n.Qa(o,t,r.length-1),h=!0),h)},t.jN=function(r,i,a,o){var s=[];s[0]=new e.b,s[1]=new e.b,s[2]=new e.b,s[3]=new e.b;var u=new e.b,c=new e.b,l=new e.b,h=new e.b,f=null;null!=o&&(f=new e.og).ps();var p=0,d=null,v=new e.zb;new e.zb;for(var y=a.Kb(a.ld);-1!=y;y=a.Qb(y)){for(var b=4,g=-1,m=-1,w=-1,O=-1,j=NaN,_=!0,x=!1,k=!0,S=!0,M=!0,I=0,T=y,A=0,C=a.Za(y),E=a.Ha(y),P=0;P<E;C=a.T(C),P++){var R=a.ec(C);if(null==R){if(!a.gd(C,v))continue;R=v}-1==m&&(m=C);for(var D=0;p<i.length&&C==i[p].Ag;){g=i[p].vt;var L=i[p].Ag,N=i[p].xB,F=i[p].Ym,z=i[p].Il,V=i[p].KI;if(2==i[p].Ki){if(x||(T=g,m=L,A=N,w=F,O=z,j=V,b=2,null!=o?d=new e.Oa:I=0,M=!1,S=!0),N=i[p].JI,V=i[p].gV,null!=o?(R.jh(D,i[p].JI,f),d.$b(f.get(),S)):I++,D=N,x=!0,S=_=!1,p+1==i.length||2!=i[p+1].Ki||i[p+1].Ag==L&&i[p+1].xB!=D){if(null!=o){var G=new n(d,2,g,L,N,b,T,m,A,F,z,V,w,O,j);o.push(G)}else null.add(I);T=g,m=L,A=N,w=F,O=z,j=V,b=2,x=_=!1,S=M=!0}}else{var U=a.T(L);if(p<i.length-1&&i[p+1].Ag==U&&i[p+1].Il==z&&2==i[p+1].Ki)N!=D&&(M&&(null!=o?d=new e.Oa:I=0),_=0<p&&i[p-1].vt==g?1==b?0:0==b?1:3:3,null!=o?(R.jh(D,N,f),d.$b(f.get(),S),G=new n(d,_,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):(I++,null.add(I)),D=N,T=g,m=L,A=N,w=F,O=z,j=V,b=_,_=k=!1,S=M=!0);else if(!t.KN(r,a,i,p,u,c)){t.HN(a,i,p,y,C,l,h);var B=!1;if(U=!1,G=!0,!(u.qb(l)||c.qb(l)||u.qb(h)||c.qb(h))){s[0].K(u),s[1].K(c),s[2].K(l),s[3].K(h),s.sort(e.b.Wr);var q=s[0],H=s[1],W=s[2],J=s[3];q.qb(u)?H.qb(c)?r?(U=B=!0,G=!1):B=!1:J.qb(c)?r?G=U=B=!0:B=!1:(B=!0,G=H.qb(l)):H.qb(u)?W.qb(c)?r?(U=B=!0,G=!1):B=!1:q.qb(c)?r?G=U=B=!0:B=!1:(B=!0,G=W.qb(l)):W.qb(u)?J.qb(c)?r?(U=B=!0,G=!1):B=!1:H.qb(c)?r?G=U=B=!0:B=!1:(B=!0,G=J.qb(l)):q.qb(c)?r?(U=B=!0,G=!1):B=!1:W.qb(c)?r?G=U=B=!0:B=!1:(B=!0,G=q.qb(l))}B&&(B=C==L,(N!=D||B&&0==D)&&(M&&(null!=o?d=new e.Oa:I=0),null!=o?(R.jh(D,N,f),d.$b(f.get(),S)):I++),G?1!=b?((N!=D||B&&0==D)&&(null!=o?(G=new n(d,1,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):null.add(I)),U?(p>=i.length-2||i[p+2].vt!=g)&&(b=0):b=1):((N!=D||B&&0==D)&&(null!=o?(G=new n(d,3,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):null.add(I)),b=1):0!=b?((N!=D||B&&0==D)&&(null!=o?(G=new n(d,0,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):null.add(I)),U?(p>=i.length-2||i[p+2].vt!=g)&&(b=1):b=0):((N!=D||B&&0==D)&&(null!=o?(G=new n(d,3,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):null.add(I)),b=0),(N!=D||B&&0==D)&&(D=N,T=g,m=L,A=N,w=F,O=z,j=V,_=k=!1,S=M=!0))}}p++}1!=D&&(M&&(null!=o?d=new e.Oa:I=0),null!=o?(R.jh(D,1,f),d.$b(f.get(),S)):I++,S=M=!1,k=!0)}k&&(N=1,L=a.wj(y),L=a.Ma(L),z=F=-1,V=NaN,_?null!=o?(G=new n(d,4,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):null.add(I):(_=1==b?0:0==b?1:3,null!=o?(G=new n(d,_,g,L,N,b,T,m,A,F,z,V,w,O,j),o.push(G)):null.add(I)))}},t.KN=function(n,r,i,a,o,s){var u=i[a].KI;if(1==u)return t.IN(n,r,i,a,o,s);if(0==u)return t.JN(n,r,i,a,o,s);throw e.f.za()},t.IN=function(t,n,r,i,a,o){var s=new e.zb,u=r[i].Ag,c=r[i].Ym,l=r[i].Il,h=-1,f=-1,p=-1,d=-1;if(!t&&0<i){var v=r[i-1];h=v.Ag,f=v.Ym,p=v.Il,d=v.Ki}var y=-1,b=-1,g=-1,m=-1;i<r.length-1&&(y=(v=r[i+1]).Ag,b=v.Ym,g=v.Il,m=v.Ki);var w=n.T(u);return v=n.T(l),t?i==r.length-1||y!=u||b!=c||g!=v||2==m?(null==(t=n.ec(l))&&(n.gd(l,s),t=s),o.K(t.qg()),a.Vt(o),o.normalize(),a.normalize(),!1):(null==(t=n.ec(l))&&(n.gd(l,s),t=s),a.K(t.qg()),null==(t=n.ec(v))&&(n.gd(v,s),t=s),o.K(t.qg()),a.lr(),o.normalize(),a.normalize(),!1):0<i&&h==u&&f==c&&p==v&&2==d||i<r.length-1&&y==w&&b==c&&g==v&&2==m?(null==(t=n.ec(l))&&(n.gd(l,s),t=s),o.K(t.qg()),a.Vt(o),o.normalize(),a.normalize(),!1):!(i<r.length-1&&y==u&&b==c&&g==v&&(null==(t=n.ec(l))&&(n.gd(l,s),t=s),a.K(t.qg()),null==(t=n.ec(v))&&(n.gd(v,s),t=s),o.K(t.qg()),a.lr(),o.normalize(),a.normalize(),1))},t.JN=function(t,n,r,i,a,o){var s=new e.zb,u=r[i].Ag,c=r[i].Ym,l=r[i].Il,h=-1,f=-1,p=-1,d=-1;if(!t&&i<r.length-1){var v=r[i+1];h=v.Ag,f=v.Ym,p=v.Il,d=v.Ki}var y=-1,b=-1,g=-1;v=-1,0<i&&(y=(v=r[i-1]).Ag,b=v.Ym,g=v.Il,v=v.Ki);var m=n.T(u),w=n.Ma(l);return t?0!=i&&y==u&&b==c&&g==w&&2!=v||(null==(t=n.ec(l))&&(n.gd(l,s),t=s),o.K(t.qg()),a.Vt(o),o.normalize(),a.normalize(),!1):!(0<i&&y==u&&b==c&&g==w&&2==v||i<r.length-1&&h==m&&f==c&&p==w&&2==d)||(null==(t=n.ec(l))&&(n.gd(l,s),t=s),o.K(t.qg()),a.Vt(o),o.normalize(),a.normalize(),!1)},t.HN=function(t,n,r,i,a,o,s){var u=new e.zb,c=t.ec(a);if(null==c&&(t.gd(a,u),c=u),n=(r=n[r]).Ag,r=r.xB,a=t.T(n),1==r)o.K(c.qg()),-1!=a&&a!=t.wj(i)?(null==(c=t.ec(a))&&(t.gd(a,u),c=u),s.K(c.qg()),null==(c=t.ec(n))&&t.gd(n,u)):s.K(o),o.lr(),s.normalize(),o.normalize();else{if(0!=r)throw e.f.za();s.K(c.qg()),o.Vt(s),s.normalize(),o.normalize()}},t}()}(J||(J={})),function(e){var t;(t=e.iN||(e.iN={}))[t.Linear=0]="Linear",t[t.Angular=1]="Angular",t[t.Area=2]="Area";var n=function(){function t(e,t,n){this.od=t,this.gi=n,this.eB=e}return t.prototype.Ib=function(e){return e instanceof t&&this.gi===e.gi},t.MG=function(e){return 0!==e.od?null:-1===e.eB?new t(-1,2,e.gi*e.gi):t.hh(s[e.eB])},t.hh=function(e){return void 0===(e=o[e])?null:e},t.iQ=function(e,n,r){var i=null;if(null!=r)try{"EPSG"===r.values[0]&&(i=t.hh(parseInt(r.values[1])))}catch(a){}return null===i&&(i=new t(-1,e,n)),i},t.prototype.xc=function(){return this.eB},t.prototype.pG=function(t){if(t.od!=this.od)throw e.f.Eb();return this.gi/t.gi},t.Rh=function(e,t,n){return t.pG(n)*e},t.IF=function(e,t,n,r,i){for(n=n.pG(r),r=0;r<t;r++)i[r]=e[r]*n},t}();e.Uc=n;for(var r=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2589998.4703195216,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988.110336,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3434528.1495040003,109458,3434290.937856,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1.244521604938272e-7,109465,1e-12,109466,1e-18],i=[1031,4.84813681109536e-9,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],s=[],u=0;u<r.length;u+=2)o[r[u]]=new n(r[u],2,r[u+1]);for(r=null,u=0;u<i.length;u+=2)o[i[u]]=new n(i[u],1,i[u+1]);for(i=null,u=0;u<a.length;u+=3)o[a[u]]=new n(a[u],0,a[u+1]),s[a[u]]=a[u+2];a=null}(J||(J={})),function(e){var t=function(){function e(){this.yb=this.mb=0}return e.prototype.set=function(e,t){void 0!==t?(this.mb=e,this.yb=t):"number"==typeof e?(this.mb=e,this.yb=0):(this.mb=e.mb,this.yb=e.yb)},e.prototype.value=function(){return this.mb},e.prototype.add=function(e){var t=this.mb+e.mb;e=this.yb+e.yb+2220446049250313e-31*Math.abs(t),this.mb=t,this.yb=e},e.prototype.uO=function(){var e=this.mb+1,t=this.yb+2220446049250313e-31*Math.abs(e);this.mb=e,this.yb=t},e.prototype.nO=function(e,t){this.mb=e.mb+t.mb,this.yb=e.yb+t.yb+2220446049250313e-31*Math.abs(this.mb)},e.prototype.sub=function(e){if("number"==typeof e){var t=this.mb-e;e=this.yb+2220446049250313e-31*Math.abs(t)}else t=this.mb-e.mb,e=this.yb+e.yb+2220446049250313e-31*Math.abs(t);this.mb=t,this.yb=e},e.prototype.Gg=function(e){var t=this.mb*e.mb;this.yb=this.yb*Math.abs(e.mb)+e.yb*Math.abs(this.mb)+this.yb*e.yb+2220446049250313e-31*Math.abs(t),this.mb=t},e.prototype.ep=function(e){var t=this.mb*e;this.yb=this.yb*Math.abs(e)+2220446049250313e-31*Math.abs(t),this.mb=t},e.prototype.Ul=function(e,t){var n=Math.abs(e.mb)*Math.abs(t.mb);this.yb=e.yb*Math.abs(t.mb)+t.yb*Math.abs(e.mb)+e.yb*t.yb+2220446049250313e-31*Math.abs(n),this.mb=n},e.prototype.um=function(e){var t=Math.abs(e.mb),n=this.mb/e.mb,r=(this.yb+Math.abs(n)*e.yb)/t;e.yb>.01*t&&(r*=1+(1+(e=e.yb/t))*e),this.mb=n,this.yb=r+2220446049250313e-31*Math.abs(n)},e.prototype.sqrt=function(){if(0<=this.mb){var e=Math.sqrt(this.mb),t=this.mb>10*this.yb?.5*this.yb/e:this.mb>this.yb?e-Math.sqrt(this.mb-this.yb):Math.max(e,Math.sqrt(this.mb+this.yb)-e);t+=2220446049250313e-31*Math.abs(e)}else this.mb<-1*this.yb?t=e=NaN:(e=0,t=Math.sqrt(this.yb));this.mb=e,this.yb=t},e.prototype.sin=function(e){var t=Math.sin(e.mb),n=Math.cos(e.mb);this.mb=t,t=Math.abs(t),this.yb=(Math.abs(n)+.5*t*e.yb)*e.yb+2220446049250313e-31*t},e.prototype.cos=function(e){var t=Math.sin(e.mb),n=Math.cos(e.mb);this.mb=n,n=Math.abs(n),this.yb=(Math.abs(t)+.5*n*e.yb)*e.yb+2220446049250313e-31*n},e.prototype.xg=function(){return Math.abs(this.mb)<=this.yb},e.prototype.Ys=function(){return this.xg()&&0!=this.yb},e}();e.Wb=t}(J||(J={}));var X=new J.b,Q=new J.b,$=new J.b,ee=new J.b,te=new J.b;!function(e){var t,n;(n=t||(t={}))[n.closedPath=1]="closedPath",n[n.exteriorPath=2]="exteriorPath",n[n.ringAreaValid=4]="ringAreaValid";var r=function(){function t(e,t,n,r,i,a,o){void 0!==t?(this.Ya=e,this.gk=t,this.il=n,this.ri=r,this.ya=a,this.TA=o,this.Ow=i):(this.Ya=e.Ya,this.gk=e.gk,this.il=e.il,this.ri=e.ri,this.ya=e.ya,this.TA=e.TA,this.Ow=e.Ow),this.PH=!0}return t.prototype.next=function(){return this.PH?(this.PH=!1,this.ri):-1!=this.ri?(this.ri=this.Ya.T(this.ri),this.ya++,-1!=this.ri&&this.ri!=this.Ow?this.ri:this.tV()):-1},t.prototype.tV=function(){for(this.il=this.Ya.Qb(this.il),this.ya=0;-1!=this.gk;){for(;-1!=this.il;this.il=this.Ya.Qb(this.il))if(this.Ow=this.ri=this.Ya.Za(this.il),-1!=this.ri)return this.ri;if(this.gk=this.Ya.Ae(this.gk),-1==this.gk)break;this.TA&&!e.R.Bc(this.Ya.dc(this.gk))||(this.il=this.Ya.Kb(this.gk))}return-1},t.LQ=function(e,n,r,i,a,o,s){return new t(e,n,r,i,a,o,s)},t}();e.f_=r,t=function(){function t(){this.Co=this.Nm=this.Dk=this.dd=this.Kk=this.Oo=this.Ui=this.md=this.hi=this.Zg=this.bf=this.Sl=null,this.Xw=this.ld=-1,this.hd=0,this.QA=!1,this.Qt=this.Rt=this.xb=null}return t.prototype.Yh=function(e){return null!=this.bf?this.bf[e]:null},t.prototype.eh=function(e,t){if(null==this.bf){if(null==t)return;this.bf=[];for(var n=0,r=this.xb.D();n<r;n++)this.bf.push(null)}this.bf[e]=t},t.prototype.rp=function(e,t){this.md.P(e,1,t)},t.prototype.qp=function(e,t){this.md.P(e,2,t)},t.prototype.DC=function(e,t){this.md.P(e,6,t)},t.prototype.mq=function(e){return this.md.S(e,6)},t.prototype.Nx=function(e,t){this.md.P(e,7,t)},t.prototype.Zv=function(e){return this.md.S(e,0)},t.prototype.SK=function(e,t){this.dd.P(e,1,t)},t.prototype.WK=function(e,t){this.dd.P(e,0,t)},t.prototype.vG=function(e){return this.dd.S(e,7)},t.prototype.op=function(e,t){this.dd.P(e,3,t)},t.prototype.pp=function(e,t){this.dd.P(e,4,t)},t.prototype.OV=function(t){null==this.dd&&(this.dd=new e.ad(8));var n=this.dd.Ke();return this.dd.P(n,2,t),this.dd.P(n,5,0),this.dd.P(n,6,0),this.dd.P(n,7,n),n},t.prototype.$R=function(e){this.dd.jd(e)},t.prototype.QV=function(t){null==this.md&&(this.md=new e.ad(8),this.ud=new e.ad(5),this.Ui=new e.ie(0),this.Oo=new e.ie(0));var n=this.md.Ke();return this.md.P(n,0,n),this.md.P(n,3,0),this.md.P(n,6,0),this.Nx(n,t),n>=this.Ui.size&&(t=16>n?16:e.L.truncate(3*n/2),this.Ui.resize(t),this.Oo.resize(t)),this.Ui.set(n,0),this.Oo.set(n,0),n},t.prototype.fG=function(e){this.md.jd(e)},t.prototype.Az=function(e){this.ud.jd(e),this.hd--},t.prototype.dJ=function(t){null==this.md&&(this.md=new e.ad(8),this.ud=new e.ad(5),this.Ui=new e.ie(0),this.Oo=new e.ie(0));var n=this.ud.Ke(),r=0<=t?t:n;if(this.ud.P(n,0,r),0>t){if(r>=this.xb.D()){if(t=16>r?16:e.L.truncate(3*r/2),this.xb.resize(t),null!=this.bf)for(var i=0;i<t;i++)this.bf.push(null);null!=this.Zg&&this.Zg.resize(t),this.Rt=this.xb.Va(0)}this.xb.nb(r,-1e38,-1e38),null!=this.bf&&(this.bf[r]=null),null!=this.Zg&&this.Zg.write(r,1)}return this.ud.P(n,4,2*r),this.hd++,n},t.prototype.Bj=function(e,t,n){var r=-1!=t?this.Ma(t):this.wj(e),i=-1!=r?this.T(r):-1,a=this.dJ(null==n?this.hd:-1),o=this.Ua(a);return null!=n&&this.xb.ru(o,n),this.hj(a,e),this.Dc(a,i),this.Ec(a,r),-1!=i&&this.Ec(i,a),-1!=r&&this.Dc(r,a),n=this.Lb(e),r=this.Za(e),-1==t&&this.dh(e,a),t==r&&this.Sf(e,a),n&&-1==i&&(this.Dc(a,a),this.Ec(a,a)),this.Wj(e,this.Ha(e)+1),e=this.Zf(e),this.Uj(e,this.D(e)+1),a},t.prototype.zm=function(){return null==this.Co&&(this.Co=new e.Ra(this.xb.description)),this.Co},t.prototype.np=function(e,t){this.dd.P(e,2,-134217729&this.dd.S(e,2)||(1==t?134217728:0))},t.prototype.$n=function(e){return 0!=(134217728&this.dd.S(e,2))?1:0},t.prototype.rO=function(e){var t=this.Pg(e.F(),e.description);return 1736==e.F()&&this.np(t,e.$n()),this.GE(t,e),t},t.prototype.sO=function(e){var t=this.Pg(e.F(),e.description);return this.HE(t,e),t},t.prototype.pX=function(t,n){null==this.md&&(this.md=new e.ad(8),this.ud=new e.ad(5),this.Ui=new e.ie(0),this.Oo=new e.ie(0)),this.md.Le(this.md.Og+t),this.ud.Le(this.ud.Og+n),this.Ui.Db(this.Ui.size+t),this.Oo.Db(this.Oo.size+t)},t.prototype.GE=function(t,n){this.pX(n.$(),n.D()),this.Sl.yd(n,0,n.D()),this.Rt=this.xb.Va(0);for(var r=null!=this.bf&&null!=n.af,i=0,a=n.$();i<a;i++)if(!(2>n.Ha(i))){var o=this.Ef(t,-1);this.An(o,n.Lb(i));for(var s=n.ua(i),u=n.zc(i);s<u;s++){var c=this.Bj(o,-1,null);if(r)if(c=this.Ua(c),0!=(1&n.KG(s)))this.eh(c,null);else{var l=new e.og;n.ec(s,l,!0),this.eh(c,l.get())}}}},t.prototype.HE=function(e,t){this.Sl.yd(t,0,t.D()),this.Rt=this.xb.Va(0),e=this.Ef(e,-1);var n=0;for(t=t.D();n<t;n++)this.Bj(e,-1,null)},t.prototype.sZ=function(t,n,r){var i=this.T(t);if(-1==i)throw e.f.za();for(var a=this.zm(),o=this.cd(t),s=0,u=n.ul(r);s<u;s++){var c=this.Ua(t),l=this.T(t),h=n.nq(r,s);0==s&&(h.jp(a),this.Hh(t,a)),322==h.F()?this.eh(c,null):this.eh(c,e.R.$d(h)),h.hp(a),s<u-1?t=this.Bj(o,l,a):this.Hh(i,a)}},t.prototype.rZ=function(t,n,r){var i=this.T(t);if(-1==i)throw e.f.za();for(var a=this.zm(),o=this.cd(t),s=0,u=n.ul(r);s<u;s++){var c=this.Ua(t),l=this.T(t),h=n.nq(r,u-s-1);0==s&&(h.hp(a),this.Hh(t,a)),322==h.F()?this.eh(c,null):this.eh(c,e.R.$d(h)),h.jp(a),s<u-1?t=this.Bj(o,l,a):this.Hh(i,a)}},t.prototype.uG=function(){var t=new e.g;t.Ka();for(var n=this.rr(),r=new e.b,i=!0,a=n.next();-1!=a;a=n.next())this.w(a,r),i?t.Nb(r.x,r.y):t.Sk(r.x,r.y),i=!1;return t},t.prototype.Bb=function(t){var n=t.F();if(e.R.Bc(n))return this.rO(t);if(550==n)return this.sO(t);throw e.f.za()},t.prototype.FO=function(t,n){var r=n.F();if(e.R.Bc(r))this.GE(t,n);else{if(550!=r)throw e.f.za();this.HE(t,n)}},t.prototype.wO=function(t,n){var r=this.Pg(1736,t.description);if(2>t.Ha(n))return r;this.Sl.yd(t,t.ua(n),t.zc(n)),this.Rt=this.xb.Va(0);var i=this.Ef(r,-1);this.An(i,t.Lb(n)||!0);var a=null!=this.bf&&null!=t.af,o=t.ua(n);for(n=t.zc(n);o<n;o++){var s=this.Bj(i,-1,null);if(a)if(s=this.Ua(s),0!=(1&t.KG(o)))this.eh(s,null);else{var u=new e.og;t.ec(o,u,!0),this.eh(s,u.get())}}return r},t.prototype.ye=function(t){var n=this.dc(t),r=e.hM.Pg(n,this.Sl.description),i=this.D(t);if(0==i)return r;if(e.R.Bc(n)){n=this.$(t);for(var a=e.Xc.Sh(n+1),o=e.Xc.ns(n+1,0),s=r.description,u=0,c=s.Ca;u<c;u++){for(var l=s.kd(u),h=e.oa.Sa(l),f=e.Xc.JF(l,i),p=this.xb.Va(l),d=0,v=0,y=0,b=this.Kb(t);-1!=b;b=this.Qb(b)){var g=0;this.Lb(b)&&(g|=1),this.rU(b)&&(g|=4),0!=g&&o.DK(v,g);var m=this.Ha(b);if(a.write(v++,y),y+=m,0==l){m=p;var w=f,O=new e.b;for(g=this.Za(b);d<y;g=this.T(g),d++){var j=this.Ua(g);m.mc(2*j,O),w.Bu(2*d,O)}}else for(g=this.Za(b);d<y;g=this.T(g),d++)for(j=this.Ua(g),w=0;w<h;w++)O=p.Ig(j*h+w),f.Mr(d*h+w,O)}r.yn(l,f),a.write(n,i)}r.TK(o),r.UK(a),r.Oc(16777215)}else if(550==n){for(s=r.description,r.resize(i),u=0,c=s.Ca;u<c;u++){for(l=s.kd(u),h=e.oa.Sa(l),f=r.Va(l),p=this.xb.Va(l),d=0,b=this.Kb(t),m=this.Ha(b),g=this.Za(b);d<m;g=this.T(g),d++)for(j=this.Ua(g),w=0;w<h;w++)O=p.Ig(j*h+w),f.Mr(d*h+w,O);r.yn(l,f)}r.Oc(16777215)}return r},t.prototype.kC=function(e){for(var t=this.Kb(e);-1!=t;t=this.sr(t));t=this.fT(e);var n=this.Ae(e);-1!=t?this.SK(t,n):this.ld=n,-1!=n?this.WK(n,t):this.Xw=t,this.$R(e)},t.prototype.Pg=function(t,n){return this.MF(t,void 0===n?e.ke.ug():n)},t.prototype.MF=function(t,n){return t=this.OV(t),null==this.xb?this.xb=this.Sl=new e.Hd(n):this.Sl.Tl(n),this.Qt=this.Sl.description,this.QA=1<this.Qt.Ca,-1==this.ld?this.ld=t:(this.WK(t,this.Xw),this.SK(this.Xw,t)),this.Xw=t},t.prototype.Ae=function(e){return this.dd.S(e,1)},t.prototype.fT=function(e){return this.dd.S(e,0)},t.prototype.dc=function(e){return 2147483647&this.dd.S(e,2)},t.prototype.LK=function(t,n,r){n=this.Dk[n],(t=this.vG(t))>=n.size&&n.resize(Math.max(e.L.truncate(1.25*t),16),-1),n.write(t,r)},t.prototype.wG=function(e,t){return(e=this.vG(e))<(t=this.Dk[t]).size?t.read(e):-1},t.prototype.NF=function(){null==this.Dk&&(this.Dk=[]);for(var t=0;t<this.Dk.length;t++)if(null==this.Dk[t])return this.Dk[t]=e.Xc.Sh(0),t;return this.Dk.push(e.Xc.Sh(0)),this.Dk.length-1},t.prototype.cY=function(e){this.Dk[e]=null},t.prototype.Kb=function(e){return this.dd.S(e,3)},t.prototype.Sv=function(e){return this.dd.S(e,4)},t.prototype.D=function(e){return this.dd.S(e,5)},t.prototype.$=function(e){return this.dd.S(e,6)},t.prototype.$p=function(t,n,r){for(var i=0,a=this.ld;-1!=a;a=this.Ae(a)){var o=this.dc(a);if(e.R.Bc(o)&&(!r||1736==o)){o=1736==this.dc(a);for(var s=this.Kb(a);-1!=s;){for(var u=0,c=this.Za(s);u<e.L.truncate(this.Ha(s)/2);){var l=this.T(c);if(-1==l)break;var h=this.Ua(c),f=this.Yh(h);null!=f?h=f.Pb():(f=this.Ua(l),h=this.xb.Yr(h,f)),h<=t?(0==h?0==i&&(i=-1):i=1,l!=this.wj(s)&&(this.UC(l,c),this.pd(l,!0))):c=this.T(c),u++}for(u=this.Za(s),c=this.Lb(s)?u:this.wj(s);0<this.Ha(s);){if(-1==(l=this.Ma(c))){this.pd(c,!0),0==i&&(i=-1);break}var p=this.Ua(l);if(null!=(f=this.Yh(p))?h=f.Pb():(h=this.Ua(c),h=this.xb.Yr(h,p)),h<=t)0==h?0==i&&(i=-1):i=1,this.UC(l,c),this.pd(l,!1),u==l&&(u=this.Za(s));else if((c=this.Ma(c))==u)break}c=this.Ha(s),n&&(o?3>c:2>c)?(s=this.sr(s),i=0<c?1:0==i?-1:i):s=this.Qb(s)}}}return i},t.prototype.UC=function(e,t){var n=this.Ua(e),r=this.Ua(t);if(null!=this.Zg&&(n=this.Zg.read(n),this.Zg.write(r,n)),null!=this.hi)for(r=0,n=this.hi.length;r<n;r++)if(null!=this.hi[r]){var i=this.Na(e,r);-1!=i&&this.Qa(t,r,i)}},t.prototype.em=function(t,n,r){var i=0,a=this.T(t);if(-1==a)throw e.f.za();for(var o=this.Ua(t),s=this.Ua(a),u=this.Yh(o),c=null==u?this.xb.Yr(o,s):u.Pb(),l=0;l<r;l++){var h=n[l];if(0<h&&1>h){var f=h;null!=u&&(f=0<c?u.zy(h)/c:0),this.xb.VD(o,s,f,this.zm());var p=this.Bj(this.cd(t),a,this.zm());if(i++,null!=u){var d=u.jl(0,h);f=this.Ua(this.Ma(p)),this.eh(f,d),this.wf(p,d.wc()),l!=r-1&&1!=n[l+1]||(h=u.jl(h,1),this.eh(f,h))}}}return i},t.prototype.qZ=function(t,n,r){var i=0,a=this.T(t);if(-1==a)throw e.f.Y("internal error");var o=this.Ua(t),s=this.Ua(a),u=this.Yh(o),c=null==u?this.xb.Yr(o,s):u.Pb(),l=0;t=this.cd(t);for(var h=0;h<r;h++){var f=n[h];if(l<f&&1>f){var p=f;if(null!=u&&(p=0<c?u.zy(f)/c:0),this.xb.VD(o,s,p,this.zm()),p=this.TT(t,a,this.zm()),i++,null!=u){l=u.jl(l,f);var d=this.Ua(this.Ma(p));this.eh(d,l),this.nb(p,l.pa,l.ma),h!=r-1&&1!=n[h+1]||(l=u.jl(f,1),p=this.Ua(p),this.eh(p,l))}}l=f}return i},t.prototype.TT=function(e,t,n){var r=-1!=t?this.Ma(t):this.wj(e),i=-1!=r?this.T(r):-1,a=this.dJ(null==n?this.hd:-1),o=this.Ua(a);return null!=n&&this.xb.ru(o,n),this.hj(a,e),this.Dc(a,i),this.Ec(a,r),-1!=i&&this.Ec(i,a),-1!=r&&this.Dc(r,a),n=this.Lb(e),r=this.Za(e),-1==t&&this.dh(e,a),t==r&&(n&&-1!=r||this.Sf(e,a)),n&&-1==i&&(this.Dc(a,a),this.Ec(a,a)),this.Wj(e,this.Ha(e)+1),e=this.Zf(e),this.Uj(e,this.D(e)+1),a},t.prototype.gF=function(t,n,r){var i=this.Ua(n),a=this.Ua(r);if(0>i||a>this.hd-1)throw e.f.I("invalid call");if(i>a&&!this.Lb(t))throw e.f.I("cannot iterate across an open path");for(t=0;n!=r;n=this.T(n))i=this.Ua(n),null!=(a=this.Yh(i))?t+=a.Pb():(a=this.Ua(this.T(n)),t+=this.xb.Yr(i,a));return t},t.prototype.Hh=function(e,t){var n=this.Ua(e);this.xb.ru(n,t),null!=(n=this.Yh(n))&&n.setStart(t),-1!=(e=this.Ma(e))&&(e=this.Ua(e),null!=this.Yh(e)&&n.setEnd(t))},t.prototype.bj=function(e,t){e=this.Ua(e),this.xb.ne(e,t)},t.prototype.wf=function(e,t){this.nb(e,t.x,t.y)},t.prototype.nb=function(e,t,n){var r=this.Ua(e);this.xb.nb(r,t,n),null!=(r=this.Yh(r))&&r.GC(t,n),-1!=(e=this.Ma(e))&&(e=this.Ua(e),null!=this.Yh(e)&&r.am(t,n))},t.prototype.w=function(e,t){this.xb.w(this.ud.S(e,0),t)},t.prototype.Hc=function(e,t){this.xb.va[0].mc(2*this.ud.S(e,0),t)},t.prototype.xa=function(t){var n=new e.b;return this.xb.w(this.ud.S(t,0),n),n},t.prototype.PG=function(e,t){this.Rt.mc(2*e,t)},t.prototype.Rc=function(e,t,n){return this.xb.Rc(e,this.Ua(t),n)},t.prototype.setAttribute=function(e,t,n,r){this.xb.setAttribute(e,this.Ua(t),n,r)},t.prototype.Ua=function(e){return this.ud.S(e,0)},t.prototype.lf=function(){var t=new e.b;return this.w(void 0,t),t.y},t.prototype.wq=function(e,t){e=this.Ua(e),t=this.Ua(t);var n=this.xb.va[0].i;return n[2*e]===n[2*t]&&n[2*e+1]===n[2*t+1]},t.prototype.kw=function(e,t){e=this.Ua(e);var n=this.xb.va[0].i;return n[2*e]===t.x&&n[2*e+1]===t.y},t.prototype.ZY=function(t,n){if(1>n&&(n=1),null==this.Zg){if(1==n)return;this.Zg=e.Xc.Wn(this.xb.D(),1)}(t=this.Ua(t))>=this.Zg.size&&this.Zg.resize(t+1,1),this.Zg.write(t,n)},t.prototype.OG=function(e){return e=this.Ua(e),null==this.Zg||e>=this.Zg.size?1:this.Zg.read(e)},t.prototype.Qa=function(e,t,n){t=this.hi[t],e=this.Ua(e),t.size<this.xb.D()&&t.resize(this.xb.D(),-1),t.write(e,n)},t.prototype.Na=function(e,t){return(e=this.Ua(e))<(t=this.hi[t]).size?t.read(e):-1},t.prototype.Kd=function(){null==this.hi&&(this.hi=[]);for(var t=0;t<this.hi.length;t++)if(null==this.hi[t])return this.hi[t]=e.Xc.Sh(0,-1),t;return this.hi.push(e.Xc.Sh(0,-1)),this.hi.length-1},t.prototype.Xd=function(e){this.hi[e]=null},t.prototype.ec=function(e){return null!=this.bf?(e=this.Ua(e),this.bf[e]):null},t.prototype.gd=function(t,n){var r=this.ud.S(t,2);if(-1==r)return!1;if(this.QA){var i=new e.Ra;this.bj(t,i),n.setStart(i),this.bj(r,i),n.setEnd(i)}else this.xb.Hc(this.ud.S(t,0),X),n.pm(0,X),this.xb.Hc(this.ud.S(r,0),X),n.pm(1,X);return!0},t.prototype.DX=function(t,n,r){if(this.QA){var i=new e.Ra;this.bj(t,i),r.setStart(i),this.bj(n,i),r.setEnd(i)}else this.xb.Hc(t,X),r.pm(0,X),this.xb.Hc(n,X),r.pm(1,X)},t.prototype.Ef=function(t,n){if(-1!=n){if(t!=this.Zf(n))throw e.f.za();var r=this.Js(n)}else r=this.Sv(t);var i=this.QV(t);return-1!=n&&this.rp(n,i),this.qp(i,n),this.rp(i,r),-1!=r?this.qp(r,i):this.op(t,i),-1==n&&this.pp(t,i),this.bm(t,this.$(t)+1),i},t.prototype.$G=function(e,t,n,r){e=this.Ef(e,-1);for(var i=0,a=t,o=!1;a==n&&(o=!0),this.hj(a,e),i++,(a=this.T(a))!=t;);return this.An(e,!0),this.Wj(e,i),o&&(t=n),this.Sf(e,t),this.dh(e,this.Ma(t)),this.sp(e,!1),null!=r&&(r[0]=o),e},t.prototype.sr=function(e){var t=this.Js(e),n=this.Qb(e),r=this.Zf(e);return-1!=t?this.qp(t,n):this.op(r,n),-1!=n?this.rp(n,t):this.pp(r,t),this.KP(e),this.bm(r,this.$(r)-1),this.fG(e),n},t.prototype.KP=function(e){var t=this.Za(e);if(-1!=t){for(var n=0,r=this.Ha(e);n<r;n++){var i=t;t=this.T(t),this.Az(i)}t=this.Zf(e),this.Uj(t,this.D(t)-this.Ha(e))}this.Wj(e,0)},t.prototype.Qb=function(e){return this.md.S(e,2)},t.prototype.Js=function(e){return this.md.S(e,1)},t.prototype.Ha=function(e){return this.md.S(e,3)},t.prototype.Lb=function(e){return 0!=(1&this.mq(e))},t.prototype.An=function(e,t){if(this.Lb(e)!=t){if(0<this.Ha(e)){var n=this.Za(e),r=this.wj(e);t?(this.Dc(r,n),this.Ec(n,r),n=this.Ua(r)):(this.Dc(r,-1),this.Ec(n,-1),n=this.Ua(r)),this.eh(n,null)}this.DC(e,(1|this.mq(e))-1|(t?1:0))}},t.prototype.Zf=function(e){return this.md.S(e,7)},t.prototype.rU=function(e){return 0!=(2&this.mq(e))},t.prototype.yC=function(e,t){this.DC(e,(2|this.mq(e))-2|(t?2:0))},t.prototype.eA=function(t){if(this.zU(t))return this.Ui.get(this.Zv(t));var n=new e.zb,r=this.Za(t);if(-1==r)return 0;var i=new e.b;this.w(r,i);for(var a=0,o=0,s=this.Ha(t);o<s;o++,r=this.T(r)){var u=this.ec(r);if(null==u){if(!this.gd(r,n))continue;u=n}a+=u.yy(i.x,i.y)}return this.sp(t,!0),this.Ui.set(this.Zv(t),a),a},t.prototype.Br=function(e,t,n){t=this.Kk[t],e=this.Zv(e),t.size<this.Ui.size&&t.resize(this.Ui.size,-1),t.write(e,n)},t.prototype.yj=function(e,t){return(e=this.Zv(e))<(t=this.Kk[t]).size?t.read(e):-1},t.prototype.oz=function(){null==this.Kk&&(this.Kk=[]);for(var t=0;t<this.Kk.length;t++)if(null==this.Kk[t])return this.Kk[t]=e.Xc.Sh(0),t;return this.Kk.push(e.Xc.Sh(0)),this.Kk.length-1},t.prototype.lC=function(e){this.Kk[e]=null},t.prototype.sV=function(t,n,r){if(-1==r)throw e.f.I();if(n!=r){var i=this.Qb(r),a=this.Js(r),o=this.Zf(r);-1==a?this.op(o,i):this.qp(a,i),-1==i?this.pp(o,a):this.rp(i,a),this.Uj(o,this.D(o)-this.Ha(r)),this.bm(o,this.$(o)-1),a=-1==n?this.Sv(t):this.Js(n),this.rp(r,a),this.qp(r,n),-1==n?this.pp(t,r):this.rp(n,r),-1==a?this.op(t,r):this.qp(a,r),this.Uj(t,this.D(t)+this.Ha(r)),this.bm(t,this.$(t)+1),this.Nx(r,t)}},t.prototype.oj=function(e,t){this.xb.ne(this.Ua(t),this.zm()),this.Bj(e,-1,this.zm())},t.prototype.pd=function(t,n){var r=this.cd(t),i=this.Ma(t),a=this.T(t);-1!=i&&this.Dc(i,a);var o=this.Ha(r);if(t==this.Za(r)&&this.Sf(r,1<o?a:-1),-1!=a&&this.Ec(a,i),t==this.wj(r)&&this.dh(r,1<o?i:-1),-1!=i&&-1!=a){i=this.Ua(i);var s=this.Ua(a);n?null!=(n=this.Yh(i))&&(i=new e.b,this.xb.w(s,i),n.Sc(i)):(s=this.Ua(t),n=this.Yh(s),this.eh(i,n),null!=n&&(i=this.xb.xa(i),n.Fc(i)))}return this.Wj(r,o-1),r=this.Zf(r),this.Uj(r,this.D(r)-1),this.Az(t),a},t.prototype.Za=function(e){return this.md.S(e,4)},t.prototype.wj=function(e){return this.md.S(e,5)},t.prototype.T=function(e){return this.ud.S(e,2)},t.prototype.Ma=function(e){return this.ud.S(e,1)},t.prototype.cd=function(e){return this.ud.S(e,3)},t.prototype.jc=function(e,t){return this.Bj(e,-1,t)},t.prototype.rr=function(t){if(void 0===t)return this.rr(!1);if(t instanceof r)return new r(t);var n,i=-1,a=-1,o=-1,s=0,u=!1;for(n=this.ld;-1!=n;n=this.Ae(n))if(!t||e.R.Bc(this.dc(n))){for(i=this.Kb(n);-1!=i;i=this.Qb(i))if(o=a=this.Za(i),s=0,-1!=a){u=!0;break}if(u)break}return r.LQ(this,n,i,a,o,s,t)},t.prototype.Qc=function(e){if(this.Sl.Qc(e),null!=this.bf)for(var t=0,n=this.bf.length;t<n;t++)null!=this.bf[t]&&this.bf[t].Qc(e)},t.prototype.Fr=function(e,t,n,r){r?this.sZ(e,t,n):this.rZ(e,t,n)},t.prototype.Ec=function(e,t){this.ud.P(e,1,t)},t.prototype.Dc=function(e,t){this.ud.P(e,2,t)},t.prototype.hj=function(e,t){this.ud.P(e,3,t)},t.prototype.Wj=function(e,t){this.md.P(e,3,t)},t.prototype.Sf=function(e,t){this.md.P(e,4,t)},t.prototype.dh=function(e,t){this.md.P(e,5,t)},t.prototype.bm=function(e,t){this.dd.P(e,6,t)},t.prototype.Uj=function(e,t){this.dd.P(e,5,t)},t.prototype.tK=function(e){var t=e;do{var n=this.T(t);this.Dc(t,this.Ma(t)),this.Ec(t,n),t=n}while(t!=e)},t.prototype.JC=function(e){this.hd=e},t.prototype.tr=function(e){var t=this.Js(e),n=this.Qb(e),r=this.Zf(e);-1!=t?this.qp(t,n):this.op(r,n),-1!=n?this.rp(n,t):this.pp(r,t),this.Sf(e,-1),this.dh(e,-1),this.fG(e)},t.prototype.ui=function(t,n){var r=this.Ma(t),i=this.T(t);if(-1!=r&&this.Dc(r,i),-1!=i&&this.Ec(i,r),-1!=r&&-1!=i)if(r=this.Ua(r),i=this.Ua(i),n){if(null!=(n=this.Yh(r))){var a=new e.b;this.xb.w(i,a),n.Sc(a)}}else n=this.Ua(t),n=this.Yh(n),this.eh(r,n),null!=n&&(a=new e.b,this.xb.w(r,a),n.Fc(a));this.Az(t)},t.prototype.zU=function(e){return 0!=(4&this.mq(e))},t.prototype.sp=function(e,t){this.DC(e,(4|this.mq(e))-4|(t?4:0))},t.prototype.Vx=function(e,t){var n=this.ud.i;this.xb.rc();var r=this.xb.va[0].i;e.Zd(0,t,(function(e,t){var i=n[5*e];e=n[5*t],t=r[2*i];var a=r[2*e];return(i=r[2*i+1])<(e=r[2*e+1])?-1:i>e?1:t<a?-1:t>a?1:0}))},t.prototype.ET=function(){for(var t=this.ld;-1!=t;t=this.Ae(t))if(!e.R.Bc(this.dc(t)))return!0;return!1},t.prototype.QC=function(e,t){for(var n=this.Kb(e),r=this.Kb(t),i=this.Sv(e),a=this.Sv(t),o=this.Kb(e);-1!=o;o=this.Qb(o))this.Nx(o,t);for(o=this.Kb(t);-1!=o;o=this.Qb(o))this.Nx(o,e);this.op(e,r),this.op(t,n),this.pp(e,a),this.pp(t,i),n=this.D(e),r=this.$(e),i=this.$(t),this.Uj(e,this.D(t)),this.Uj(t,n),this.bm(e,i),this.bm(t,r),n=this.dd.S(e,2),this.dd.P(e,2,this.dd.S(t,2)),this.dd.P(t,2,n)},t}(),e.Yc=t}(J||(J={})),function(e){var t=function(t){function n(n,r,i,a){var o=t.call(this)||this;return o.X=new e.g,void 0===n?o.FF():"number"==typeof n?o.eQ(n,r,i,a):n instanceof e.Ra?void 0!==r?o.yv(n,r,i):o.fQ(n):n instanceof e.oa?void 0!==r?o.hQ(n,r):o.gQ(n):n instanceof e.g?o.dQ(n):o.FF(),o}return Y(n,t),n.prototype.yv=function(t,n,r){this.description=e.ke.ug(),this.X.Ka(),t.u()||this.$u(t,n,r)},n.prototype.dQ=function(t){this.description=e.ke.ug(),this.X.H(t),this.X.normalize()},n.prototype.gQ=function(t){if(null==t)throw e.f.I();this.description=t,this.X.Ka()},n.prototype.hQ=function(t,n){if(null==t)throw e.f.I();this.description=t,this.X.H(n),this.X.normalize()},n.prototype.FF=function(){this.description=e.ke.ug(),this.X.Ka()},n.prototype.fQ=function(t){this.description=e.ke.ug(),this.X.Ka(),t.u()||this.$u(t)},n.prototype.eQ=function(t,n,r,i){this.description=e.ke.ug(),this.H(t,n,r,i)},n.prototype.H=function(e,t,n,r){if(this.vc(),"number"==typeof e)this.X.H(e,t,n,r);else for(this.Ka(),t=0,n=e.length;t<n;t++)this.Nb(e[t])},n.prototype.mp=function(t){if(this.vc(),!t.BU())throw e.f.I();this.X.H(t)},n.prototype.Ka=function(){this.vc(),this.X.Ka()},n.prototype.u=function(){return this.X.u()},n.prototype.N=function(){return this.X.N()},n.prototype.ca=function(){return this.X.ca()},n.prototype.lk=function(){return this.X.lk()},n.prototype.cq=function(){return this.X.cq()},n.prototype.bq=function(){return this.X.hf()},n.prototype.Nb=function(t){if(t instanceof e.b)this.vc(),this.X.Nb(t);else if(t instanceof e.g)this.vc(),this.X.Nb(t);else if(t instanceof e.Ra){if(this.vc(),!t.Ac()){var r=t.description;if(this.description!=r&&this.Tl(r),this.u())this.$u(t);else{this.X.Nb(t.w());for(var i=1,a=r.Ca;i<a;i++)for(var o=r.Jd(i),s=e.oa.Sa(o),u=0;u<s;u++){var c=t.Rc(o,u),l=this.Qf(o,u);l.Nb(c),this.setInterval(o,u,l)}}}}else if(t instanceof n&&!t.u())for((r=t.description)!=this.description&&this.Tl(r),this.X.Nb(t.X),i=1,a=r.Ca;i<a;i++)for(o=r.kd(i),s=e.oa.Sa(o),u=0;u<s;u++)c=t.Qf(o,u),(l=this.Qf(o,u)).Nb(c),this.setInterval(o,u,l)},n.prototype.$u=function(t,n,r){if(void 0!==n){this.X.H(t.w(),n,r),r=1;for(var i=(n=t.description).Ca;r<i;r++)for(var a=n.Jd(r),o=e.oa.Sa(a),s=0;s<o;s++){var u=t.Rc(a,s);this.setInterval(a,s,u,u)}}else for(this.X.H(t.ia[0],t.ia[1]),r=1,i=(n=t.description).Ca;r<i;r++)for(a=n.Jd(r),o=e.oa.Sa(a),s=0;s<o;s++)u=t.Rc(a,s),this.setInterval(a,s,u,u)},n.prototype.setInterval=function(t,n,r,i){if(r="number"==typeof r?new e.uc(r,i):r,this.vc(),0==t)if(0==n)this.X.o=r.fa,this.X.v=r.ja;else{if(1!=n)throw e.f.Gd();this.X.A=r.fa,this.X.B=r.ja}else this.gE(0,t,n,r.fa),this.gE(1,t,n,r.ja)},n.prototype.O=function(e,t){this.vc(),this.X.O(e,t)},n.prototype.Qc=function(t){if(t instanceof e.xd)this.vc(),t.VC(this.X);else if(this.vc(),!this.X.u()){var n=new e.WL;this.ip(n),n.qU()?n.Ka():t.VC(n)}},n.prototype.copyTo=function(t){if(t.F()!=this.F())throw e.f.I();if(t.vc(),t.description=this.description,t.X.H(this.X),t.ia=null,null!=this.ia){t.Vu();for(var n=0;n<2*(this.description.Ge.length-2);n++)t.ia[n]=this.ia[n]}},n.prototype.Ea=function(){return new n(this.description)},n.prototype.Pe=function(){return this.X.jG()},n.prototype.Pb=function(){return this.X.AG()},n.prototype.F=function(){return 197},n.prototype.pb=function(){return 2},n.prototype.qn=function(e){this.copyTo(e)},n.prototype.s=function(e){e.o=this.X.o,e.A=this.X.A,e.v=this.X.v,e.B=this.X.B},n.prototype.ip=function(e){e.o=this.X.o,e.A=this.X.A,e.v=this.X.v,e.B=this.X.B,e.H(this.X.o,this.X.A,this.Pd(0,1,0),this.X.v,this.X.B,this.Pd(1,1,0))},n.prototype.Qf=function(t,n){var r=new e.uc;return r.H(this.Pd(0,t,n),this.Pd(1,t,n)),r},n.prototype.Pf=function(t,n){n.rg(this.description);var r=this.description.Ca-1;switch(t){case 0:for(t=0;t<r;t++)for(var i=this.description.kd(t),a=e.oa.Sa(i),o=0;o<a;o++)n.setAttribute(i,o,this.Pd(0,i,o));n.nb(this.X.o,this.X.A);break;case 1:for(t=0;t<r;t++)for(i=this.description.kd(t),a=e.oa.Sa(i),o=0;o<a;o++)n.setAttribute(i,o,this.Pd(1,i,o));n.nb(this.X.o,this.X.B);break;case 2:for(t=0;t<r;t++)for(i=this.description.kd(t),a=e.oa.Sa(i),o=0;o<a;o++)n.setAttribute(i,o,this.Pd(0,i,o));n.nb(this.X.v,this.X.B);break;case 3:for(t=0;t<r;t++)for(i=this.description.kd(t),a=e.oa.Sa(i),o=0;o<a;o++)n.setAttribute(i,o,this.Pd(1,i,o));n.nb(this.X.v,this.X.A);break;default:throw e.f.Gd()}},n.prototype.Ax=function(e,t){e=this.X.Ax(e),t.ka(e.x,e.y)},n.prototype.yS=function(e,t){return t*(e.gr-2)},n.prototype.kG=function(t,n,r){if(this.X.u())throw e.f.Y("empty geometry");if(0==n)return 0!=t?0!=r?this.X.B:this.X.v:0!=r?this.X.A:this.X.o;if(r>=e.oa.Sa(n))throw e.f.I();var i=this.description.Yf(n);return this.Vu(),0<=i?this.ia[this.yS(this.description,t)+this.description.bT(i)-2+r]:e.oa.me(n)},n.prototype.Vu=function(){if(this.vc(),null==this.ia&&2<this.description.Ge.length){this.ia=[];for(var t=n.Mg(this.description,0),r=n.Mg(this.description,1),i=0,a=1,o=this.description.Ca;a<o;a++){var s=this.description.kd(a),u=e.oa.Sa(s);s=e.oa.me(s);for(var c=0;c<u;c++)this.ia[t+i]=s,this.ia[r+i]=s,i++}}},n.prototype.Ln=function(t){if(null!=this.ia)if(2<t.Ge.length){for(var r=e.ke.ox(t,this.description),i=[],a=n.Mg(this.description,0),o=n.Mg(this.description,1),s=n.Mg(t,0),u=n.Mg(t,1),c=0,l=1,h=t.Ca;l<h;l++){var f=t.kd(l),p=e.oa.Sa(f);if(-1==r[l]){var d=e.oa.me(f);for(f=0;f<p;f++)i[s+c]=d,i[u+c]=d,c++}else for(d=this.description.dk(r[l])-2,f=0;f<p;f++)i[s+c]=this.ia[a+d],i[u+c]=this.ia[o+d],c++,d++}this.ia=i}else this.ia=null;this.description=t},n.prototype.Pd=function(t,r,i){if(this.X.u())throw e.f.Y("This operation was performed on an Empty Geometry.");if(0==r)return 0!=t?0!=i?this.X.B:this.X.v:0!=i?this.X.A:this.X.o;if(i>=e.oa.Sa(r))throw e.f.Gd();var a=this.description.Yf(r);return 0<=a?(this.Vu(),this.ia[n.Mg(this.description,t)+this.description.dk(a)-2+i]):e.oa.me(r)},n.prototype.gE=function(t,r,i,a){if(this.vc(),0==r)0!=t?0!=i?this.X.B=a:this.X.v=a:0!=i?this.X.A=a:this.X.o=a;else{if(i>=e.oa.Sa(r))throw e.f.Gd();if(!this.hasAttribute(r)){if(e.oa.pH(r,a))return;this.le(r)}r=this.description.Yf(r),this.Vu(),this.ia[n.Mg(this.description,t)+this.description.dk(r)-2+i]=a}},n.Mg=function(e,t){return t*(e.Ge.length-2)},n.prototype.Ia=function(t){this.vc();var n=new e.g;return t.s(n),this.X.Ia(n)},n.prototype.isIntersecting=function(t){return this.X.isIntersecting(t instanceof e.g?t:t.X)},n.prototype.rv=function(e,t){this.vc(),e.u()?this.Ka():void 0!==t?this.$u(e,t,void 0):this.X.rv(e.Ce(),e.lf())},n.prototype.offset=function(e,t){this.vc(),this.X.offset(e,t)},n.prototype.normalize=function(){this.vc(),this.X.normalize()},n.prototype.hf=function(t){if(void 0===t){if(t=new e.Ra(this.description),this.u())return t;for(n=this.description.Ca,r=1;r<n;r++)for(i=this.description.Jd(r),a=e.oa.Sa(i),o=0;o<a;o++)s=.5*(this.Pd(0,i,o)+this.Pd(1,i,o)),t.setAttribute(i,o,s);return t.nb(this.X.lk(),this.X.cq()),t}if(t.rg(this.description),this.u())t.Ka();else{for(var n=this.description.Ca,r=1;r<n;r++)for(var i=this.description.kd(r),a=e.oa.Sa(i),o=0;o<a;o++){var s=.5*(this.kG(0,i,o)+this.kG(1,i,o));t.setAttribute(i,o,s)}t.nb(this.X.hf())}},n.prototype.Wz=function(){return new e.Ra(this.X.Wz())},n.prototype.contains=function(t){return t instanceof e.Ra?!t.u()&&this.X.contains(t.Ce(),t.lf()):this.X.contains(t.X)},n.prototype.nQ=function(e){return this.X.contains(e)},n.prototype.Ib=function(e){if(e==this)return!0;if(!(e instanceof n)||this.description!=e.description)return!1;if(this.u())return!!e.u();if(!this.X.Ib(e.X))return!1;for(var t=0,r=2*(this.description.Ge.length-2);t<r;t++)if(this.ia[t]!=e.ia[t])return!1;return!0},n.prototype.fc=function(){var t=this.description.fc();if(t=e.L.Zh(t,this.X.fc()),!this.u()&&null!=this.ia)for(var n=0,r=2*(this.description.Ge.length-2);n<r;n++)t=e.L.Zh(t,this.ia[n]);return t},n.prototype.Ms=function(){return this.X.o},n.prototype.Os=function(){return this.X.A},n.prototype.Ls=function(){return this.X.v},n.prototype.Ns=function(){return this.X.B},n.prototype.sg=function(){return e.yi.qm(this,null)},n.prototype.toString=function(){return this.u()?"Envelope: []":"Envelope: ["+this.X.o+", "+this.X.A+", "+this.X.v+", "+this.X.B+"]"},n}(e.R);e.Ih=t}(J||(J={})),function(e){var t=function(){function t(e,t,n,r){void 0===e?this.Ka():(this.o=e,this.A=t,this.v=n,this.B=r)}return t.construct=function(e,n,r,i){var a=new t;return a.o=e,a.A=n,a.v=r,a.B=i,a},t.prototype.H=function(n,r,i,a){"number"==typeof n?void 0!==i?(this.o=n,this.A=r,this.v=i,this.B=a,this.normalize()):(this.o=n,this.A=r,this.v=n,this.B=r):n instanceof e.b?void 0!==r?(this.o=n.x-.5*r,this.v=this.o+r,this.A=n.y-.5*i,this.B=this.A+i,this.normalize()):(this.o=n.x,this.A=n.y,this.v=n.x,this.B=n.y):n instanceof t?this.H(n.o,n.A,n.v,n.B):n instanceof e.uc&&(n.u()||r.u()?this.Ka():(this.o=n.fa,this.v=n.ja,this.A=r.fa,this.B=r.ja))},t.prototype.KS=function(e,n){var r=new t;return r.H(this.o,this.A,this.v,this.B),r.O(e,n),r},t.prototype.Ix=function(e,t){if(void 0!==t)if(0==t)this.Ka();else{this.o=e[0].x,this.A=e[0].y,this.v=this.o,this.B=this.A;for(var n=1;n<t;n++){var r=e[n];r.x<this.o?this.o=r.x:r.x>this.v&&(this.v=r.x),r.y<this.A?this.A=r.y:r.y>this.B&&(this.B=r.y)}}else if(null==e||0==e.length)this.Ka();else for(this.H((r=e[0]).x,r.y),n=1;n<e.length;n++)this.Sk((t=e[n]).x,t.y)},t.prototype.Ka=function(){this.B=this.v=this.A=this.o=NaN},t.prototype.u=function(){return isNaN(this.o)},t.prototype.Nb=function(n,r){"number"==typeof n?this.u()?(this.o=n,this.A=r,this.v=n,this.B=r):(this.o>n?this.o=n:this.v<n&&(this.v=n),this.A>r?this.A=r:this.B<r&&(this.B=r)):n instanceof e.b||n instanceof e.Id?this.Nb(n.x,n.y):n instanceof t&&!n.u()&&(this.Nb(n.o,n.A),this.Nb(n.v,n.B))},t.prototype.Sk=function(e,t){this.o>e?this.o=e:this.v<e&&(this.v=e),this.A>t?this.A=t:this.B<t&&(this.B=t)},t.prototype.O=function(e,t){this.u()||(this.o-=e,this.v+=e,this.A-=t,this.B+=t,(this.o>this.v||this.A>this.B)&&this.Ka())},t.prototype.scale=function(e){0>e&&this.Ka(),this.u()||(this.o*=e,this.v*=e,this.A*=e,this.B*=e)},t.prototype.zoom=function(e,t){this.u()||this.H(this.hf(),e*this.N(),t*this.ca())},t.prototype.isIntersecting=function(e){return!this.u()&&!e.u()&&(this.o<=e.o?this.v>=e.o:e.v>=this.o)&&(this.A<=e.A?this.B>=e.A:e.B>=this.A)},t.prototype.tH=function(e){return(this.o<=e.o?this.v>=e.o:e.v>=this.o)&&(this.A<=e.A?this.B>=e.A:e.B>=this.A)},t.prototype.Ia=function(e){return!this.u()&&!e.u()&&(e.o>this.o&&(this.o=e.o),e.v<this.v&&(this.v=e.v),e.A>this.A&&(this.A=e.A),e.B<this.B&&(this.B=e.B),(e=this.o<=this.v&&this.A<=this.B)||this.Ka(),e)},t.prototype.Ax=function(t){switch(t){case 0:return e.b.construct(this.o,this.A);case 1:return e.b.construct(this.o,this.B);case 2:return e.b.construct(this.v,this.B);case 3:return e.b.construct(this.v,this.A);default:throw e.f.Gd()}},t.prototype.XB=function(t){if(null==t||4>t.length)throw e.f.I();null!=t[0]?t[0].ka(this.o,this.A):t[0]=e.b.construct(this.o,this.A),null!=t[1]?t[1].ka(this.o,this.B):t[1]=e.b.construct(this.o,this.B),null!=t[2]?t[2].ka(this.v,this.B):t[2]=e.b.construct(this.v,this.B),null!=t[3]?t[3].ka(this.v,this.A):t[3]=e.b.construct(this.v,this.A)},t.prototype.jG=function(){return this.u()?0:this.N()*this.ca()},t.prototype.AG=function(){return this.u()?0:2*(this.N()+this.ca())},t.prototype.lk=function(){return(this.v+this.o)/2},t.prototype.cq=function(){return(this.B+this.A)/2},t.prototype.N=function(){return this.v-this.o},t.prototype.ca=function(){return this.B-this.A},t.prototype.move=function(e,t){this.u()||(this.o+=e,this.A+=t,this.v+=e,this.B+=t)},t.prototype.rv=function(t,n){if(void 0!==n)this.move(t-this.lk(),n-this.cq());else if(t instanceof e.b)this.rv(t.x,t.y);else{if(!(t instanceof e.Ra))throw e.f.I();n=(this.v-this.o)/2;var r=(this.B-this.A)/2;this.o=t.Ce()-n,this.v=t.Ce()+n,this.A=t.lf()-r,this.B=t.lf()+r}},t.prototype.offset=function(e,t){this.o+=e,this.v+=e,this.A+=t,this.B+=t},t.prototype.normalize=function(){if(!this.u()){var e=Math.min(this.o,this.v),t=Math.max(this.o,this.v);this.o=e,this.v=t,e=Math.min(this.A,this.B),t=Math.max(this.A,this.B),this.A=e,this.B=t}},t.prototype.tn=function(e){e.ka(this.o,this.A)},t.prototype.RJ=function(e){e.ka(this.v,this.A)},t.prototype.UJ=function(e){e.ka(this.o,this.B)},t.prototype.un=function(e){e.ka(this.v,this.B)},t.prototype.BU=function(){return this.u()||this.o<=this.v&&this.A<=this.B},t.prototype.hf=function(){return e.b.construct((this.v+this.o)/2,(this.B+this.A)/2)},t.prototype.Wz=function(){return e.b.construct(this.o,this.A)},t.prototype.contains=function(n,r){if(void 0!==r)return n>=this.o&&n<=this.v&&r>=this.A&&r<=this.B;if(n instanceof e.Ra)return this.contains(n.Ce(),n.lf());if(n instanceof e.b)return this.contains(n.x,n.y);if(n instanceof t)return n.o>=this.o&&n.v<=this.v&&n.A>=this.A&&n.B<=this.B;throw e.f.I()},t.prototype.sm=function(n,r){if(void 0!==r)return n>this.o&&n<this.v&&r>this.A&&r<this.B;if(n instanceof e.b)return this.sm(n.x,n.y);if(n instanceof t)return n.o>this.o&&n.v<this.v&&n.A>this.A&&n.B<this.B;throw e.f.I()},t.prototype.Ib=function(e){return e==this||e instanceof t&&(!(!this.u()||!e.u())||this.o==e.o&&this.A==e.A&&this.v==e.v&&this.B==e.B)},t.prototype.fc=function(){var t=this.o;t=e.L.truncate(t^t>>>32);var n=e.L.Zh(t);return t=e.L.truncate((t=this.v)^t>>>32),n=e.L.Zh(t,n),t=e.L.truncate((t=this.A)^t>>>32),n=e.L.Zh(t,n),t=e.L.truncate((t=this.B)^t>>>32),e.L.Zh(t,n)},t.prototype.My=function(t){var n=new e.b;return n.K(t),n.Ey()?n:this.u()?(n.iE(),n):(n.x<this.o?n.x=this.o:n.x>this.v&&(n.x=this.v),n.y<this.A?n.y=this.A:n.y>this.B&&(n.y=this.B),n.Ib(t)?(t=this.hf(),(n.x<t.x?n.x-this.o:this.v-n.x)<(n.y<t.y?n.y-this.A:this.B-n.y)?n.x=n.x<t.x?this.o:this.v:n.y=n.y<t.y?this.A:this.B,n):n)},t.prototype.Su=function(e){if(this.u())return NaN;if(e.x==this.o)return e.y-this.A;var t=this.B-this.A,n=this.v-this.o;return e.y==this.B?t+e.x-this.o:e.x==this.v?t+n+this.B-e.y:e.y==this.A?2*t+n+this.v-e.x:this.Su(this.My(e))},t.prototype.QD=function(e){if(this.u())return-1;e=this.Su(e);var t=this.B-this.A,n=this.v-this.o;return e<t?0:(e-=t)<n?1:e-n<t?2:3},t.prototype.Mn=function(){return this.u()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.o)+Math.abs(this.v)+Math.abs(this.A)+Math.abs(this.B)+1)},t.prototype.ez=function(e,n){var r=this.ck(e),i=this.ck(n);if(0!=(r&i))return 0;if(0==(r|i))return 4;var a=(0!=r?1:0)|(0!=i?2:0);do{var o=n.x-e.x,s=n.y-e.y;if(o>s?0!=(r&t.GD)?(0!=(r&t.Qu)?(e.y+=s*(this.o-e.x)/o,e.x=this.o):(e.y+=s*(this.v-e.x)/o,e.x=this.v),r=this.ck(e)):0!=(i&t.GD)?(0!=(i&t.Qu)?(n.y+=s*(this.o-n.x)/o,n.x=this.o):(n.y+=s*(this.v-n.x)/o,n.x=this.v),i=this.ck(n)):0!=r?(0!=(r&t.Ru)?(e.x+=o*(this.A-e.y)/s,e.y=this.A):(e.x+=o*(this.B-e.y)/s,e.y=this.B),r=this.ck(e)):(0!=(i&t.Ru)?(n.x+=o*(this.A-n.y)/s,n.y=this.A):(n.x+=o*(this.B-n.y)/s,n.y=this.B),i=this.ck(n)):0!=(r&t.HD)?(0!=(r&t.Ru)?(e.x+=o*(this.A-e.y)/s,e.y=this.A):(e.x+=o*(this.B-e.y)/s,e.y=this.B),r=this.ck(e)):0!=(i&t.HD)?(0!=(i&t.Ru)?(n.x+=o*(this.A-n.y)/s,n.y=this.A):(n.x+=o*(this.B-n.y)/s,n.y=this.B),i=this.ck(n)):0!=r?(0!=(r&t.Qu)?(e.y+=s*(this.o-e.x)/o,e.x=this.o):(e.y+=s*(this.v-e.x)/o,e.x=this.v),r=this.ck(e)):(0!=(i&t.Qu)?(n.y+=s*(this.o-n.x)/o,n.x=this.o):(n.y+=s*(this.v-n.x)/o,n.x=this.v),i=this.ck(n)),0!=(r&i))return 0}while(0!=(r|i));return a},t.prototype.ck=function(e){return(e.x<this.o?1:0)|(e.x>this.v?1:0)<<1|(e.y<this.A?1:0)<<2|(e.y>this.B?1:0)<<3},t.prototype.Qg=function(e){return!this.u()&&(this.N()<=e||this.ca()<=e)},t.prototype.vb=function(t){return t instanceof e.b?Math.sqrt(this.nL(t)):Math.sqrt(this.Xx(t))},t.prototype.Xx=function(e){var t=0,n=0,r=this.o-e.v;return r>t&&(t=r),(r=this.A-e.B)>n&&(n=r),(r=e.o-this.v)>t&&(t=r),(r=e.A-this.B)>n&&(n=r),t*t+n*n},t.prototype.nL=function(e){var t=0,n=0,r=this.o-e.x;return r>t&&(t=r),(r=this.A-e.y)>n&&(n=r),(r=e.x-this.v)>t&&(t=r),(r=e.y-this.B)>n&&(n=r),t*t+n*n},t.prototype.sn=function(e){this.u()?e.Ka():e.H(this.o,this.v)},t.sN=function(e,t,n,r){var i=1;return isNaN(e)||(i+=Math.abs(e)),isNaN(t)||(i+=Math.abs(t)),isNaN(n)||(i+=Math.abs(n)),isNaN(r)||(i+=Math.abs(r)),2220446049250313e-29*i},t.Qu=1,t.Ru=4,t.GD=3,t.HD=12,t}();e.g=t}(J||(J={})),function(e){var t,n;(n=t||(t={}))[n.initialize=0]="initialize",n[n.initializeRed=1]="initializeRed",n[n.initializeBlue=2]="initializeBlue",n[n.initializeRedBlue=3]="initializeRedBlue",n[n.sweep=4]="sweep",n[n.sweepBruteForce=5]="sweepBruteForce",n[n.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",n[n.sweepRedBlue=7]="sweepRedBlue",n[n.sweepRed=8]="sweepRed",n[n.sweepBlue=9]="sweepBlue",n[n.iterate=10]="iterate",n[n.iterateRed=11]="iterateRed",n[n.iterateBlue=12]="iterateBlue",n[n.iterateBruteForce=13]="iterateBruteForce",n[n.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",n[n.resetRed=15]="resetRed",n[n.resetBlue=16]="resetBlue";var r=function(){function e(e,t){this.ii=e,this.RH=t}return e.prototype.Lr=function(e,t,n){this.ii.oZ(n,e,t,this.RH)},e.prototype.sq=function(e){return this.ii.ss(e,this.RH)},e}();t=function(){function t(){this.Vw=this.Ho=this.pf=this.sd=null,this.Pq=new e.g,this.Nm=this.Kj=this.Lj=this.Ed=this.Mf=this.Nd=this.Kw=this.yo=this.rd=this.Gb=null,this.Xb=-1,this.qa=0,this.Uk()}return t.prototype.Gr=function(){this.Uk(),this.ww=!0,null==this.Gb?(this.yo=new e.ha(0),this.Gb=[]):(this.yo.Gh(0),this.Gb.length=0)},t.prototype.bd=function(t,n){if(!this.ww)throw e.f.Eb();var r=new e.g;r.H(n),this.yo.add(t),this.Gb.push(r)},t.prototype.Zp=function(){if(!this.ww)throw e.f.Eb();this.ww=!1,null!=this.Gb&&0<this.Gb.length&&(this.Xb=0,this.Jc=!1)},t.prototype.vL=function(){this.Uk(),this.vw=!0,null==this.Gb?(this.yo=new e.ha(0),this.Gb=[]):(this.yo.Gh(0),this.Gb.length=0)},t.prototype.vE=function(t,n){if(!this.vw)throw e.f.Eb();var r=new e.g;r.H(n),this.yo.add(t),this.Gb.push(r)},t.prototype.WF=function(){if(!this.vw)throw e.f.Eb();this.vw=!1,null!=this.Gb&&0<this.Gb.length&&null!=this.rd&&0<this.rd.length&&(-1==this.Xb||2==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=1),this.Jc=!1)},t.prototype.uL=function(){this.Uk(),this.uw=!0,null==this.rd?(this.Kw=new e.ha(0),this.rd=[]):(this.Kw.Gh(0),this.rd.length=0)},t.prototype.qE=function(t,n){if(!this.uw)throw e.f.Eb();var r=new e.g;r.H(n),this.Kw.add(t),this.rd.push(r)},t.prototype.VF=function(){if(!this.uw)throw e.f.Eb();this.uw=!1,null!=this.Gb&&0<this.Gb.length&&null!=this.rd&&0<this.rd.length&&(-1==this.Xb||1==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=2),this.Jc=!1)},t.prototype.next=function(){if(this.Jc)return!1;for(var t=!0;t;)switch(this.Xb){case 0:t=this.oA();break;case 1:t=this.MT();break;case 2:t=this.JT();break;case 3:t=this.LT();break;case 4:t=this.zZ();break;case 5:t=this.vZ();break;case 6:t=this.wZ();break;case 7:t=this.xZ();break;case 8:t=this.ay();break;case 9:t=this.RC();break;case 10:t=this.DA();break;case 11:t=this.FU();break;case 12:t=this.CU();break;case 13:t=this.DU();break;case 14:t=this.EU();break;case 15:t=this.oK();break;case 16:t=this.nK();break;default:throw e.f.za()}return!this.Jc},t.prototype.IC=function(e){this.qa=e},t.prototype.cA=function(e){return this.Gb[e]},t.prototype.Gz=function(e){return this.rd[e]},t.prototype.tl=function(e){return this.yo.read(e)},t.prototype.ol=function(e){return this.Kw.read(e)},t.CA=function(e){return 1==(1&e)},t.vq=function(e){return 0==(1&e)},t.prototype.Uk=function(){this.ww=this.uw=this.vw=!1,this.Kf=this.Lf=this.Xg=this.we=-1,this.Jc=!0},t.prototype.oA=function(){if(this.If=this.dg=-1,10>this.Gb.length)return this.we=this.Gb.length,this.Xb=5,!0;null==this.sd&&(this.sd=new e.Qr(!0),this.Ho=this.sd.getIterator(),this.Nd=new e.ha(0)),this.sd.Gr();for(var t=0;t<this.Gb.length;t++){var n=this.Gb[t];this.sd.bs(n.o,n.v)}for(this.sd.Zp(),this.Nd.Db(2*this.Gb.length),this.Nd.resize(0),t=0;t<2*this.Gb.length;t++)this.Nd.add(t);return this.uu(this.Nd,2*this.Gb.length,!0),this.we=2*this.Gb.length,this.Xb=4,!0},t.prototype.MT=function(){if(this.If=this.dg=-1,10>this.Gb.length||10>this.rd.length)return this.we=this.Gb.length,this.Xb=6,!0;null==this.sd&&(this.sd=new e.Qr(!0),this.Ho=this.sd.getIterator(),this.Nd=new e.ha(0)),this.sd.Gr();for(var t=0;t<this.Gb.length;t++){var n=this.Gb[t];this.sd.bs(n.o,n.v)}for(this.sd.Zp(),this.Nd.Db(2*this.Gb.length),this.Nd.resize(0),t=0;t<2*this.Gb.length;t++)this.Nd.add(t);return this.uu(this.Nd,this.Nd.size,!0),this.we=this.Nd.size,-1!=this.Lf&&(this.Ed.kh(this.Lf),this.Lj.resize(0),this.Lf=-1),this.Xb=7,this.nK()},t.prototype.JT=function(){if(this.If=this.dg=-1,10>this.Gb.length||10>this.rd.length)return this.we=this.Gb.length,this.Xb=6,!0;null==this.pf&&(this.pf=new e.Qr(!0),this.Vw=this.pf.getIterator(),this.Mf=new e.ha(0)),this.pf.Gr();for(var t=0;t<this.rd.length;t++){var n=this.rd[t];this.pf.bs(n.o,n.v)}for(this.pf.Zp(),this.Mf.Db(2*this.rd.length),this.Mf.resize(0),t=0;t<2*this.rd.length;t++)this.Mf.add(t);return this.uu(this.Mf,this.Mf.size,!1),this.Xg=this.Mf.size,-1!=this.Kf&&(this.Ed.kh(this.Kf),this.Kj.resize(0),this.Kf=-1),this.Xb=7,this.oK()},t.prototype.LT=function(){if(this.If=this.dg=-1,10>this.Gb.length||10>this.rd.length)return this.we=this.Gb.length,this.Xb=6,!0;null==this.sd&&(this.sd=new e.Qr(!0),this.Ho=this.sd.getIterator(),this.Nd=new e.ha(0)),null==this.pf&&(this.pf=new e.Qr(!0),this.Vw=this.pf.getIterator(),this.Mf=new e.ha(0)),this.sd.Gr();for(var t=0;t<this.Gb.length;t++){var n=this.Gb[t];this.sd.bs(n.o,n.v)}for(this.sd.Zp(),this.pf.Gr(),t=0;t<this.rd.length;t++)this.pf.bs((n=this.rd[t]).o,n.v);for(this.pf.Zp(),this.Nd.Db(2*this.Gb.length),this.Mf.Db(2*this.rd.length),this.Nd.resize(0),this.Mf.resize(0),t=0;t<2*this.Gb.length;t++)this.Nd.add(t);for(t=0;t<2*this.rd.length;t++)this.Mf.add(t);return this.uu(this.Nd,this.Nd.size,!0),this.uu(this.Mf,this.Mf.size,!1),this.we=this.Nd.size,this.Xg=this.Mf.size,-1!=this.Lf&&(this.Ed.kh(this.Lf),this.Lj.resize(0),this.Lf=-1),-1!=this.Kf&&(this.Ed.kh(this.Kf),this.Kj.resize(0),this.Kf=-1),this.Xb=7,!0},t.prototype.zZ=function(){var e=this.Nd.get(--this.we),n=e>>1;return t.vq(e)?(this.sd.remove(n),0!=this.we||(this.If=this.dg=-1,this.Jc=!0,!1)):(this.Ho.nC(this.Gb[n].o,this.Gb[n].v,this.qa),this.dg=n,this.Xb=10,!0)},t.prototype.vZ=function(){return-1==--this.we?(this.If=this.dg=-1,this.Jc=!0,!1):(this.Xg=this.dg=this.we,this.Xb=13,!0)},t.prototype.wZ=function(){return-1==--this.we?(this.If=this.dg=-1,this.Jc=!0,!1):(this.dg=this.we,this.Xg=this.rd.length,this.Xb=14,!0)},t.prototype.xZ=function(){var e=this.Nd.get(this.we-1),n=this.Mf.get(this.Xg-1),r=this.ss(e,!0),i=this.ss(n,!1);return r>i?this.ay():r<i?this.RC():t.CA(e)?this.ay():t.CA(n)?this.RC():this.ay()},t.prototype.ay=function(){var n=this.Nd.get(--this.we),r=n>>1;if(t.vq(n))return-1!=this.Lf&&-1!=this.Lj.get(r)?(this.Ed.jd(this.Lf,this.Lj.get(r)),this.Lj.set(r,-1)):this.sd.remove(r),0!=this.we||(this.If=this.dg=-1,this.Jc=!0,!1);if(-1!=this.Kf&&0<this.Ed.Hs(this.Kf))for(n=this.Ed.sc(this.Kf);-1!=n;){var i=this.Ed.getData(n);this.pf.Gi(i),this.Kj.set(i,-1),i=this.Ed.hb(n),this.Ed.jd(this.Kf,n),n=i}return 0<this.pf.size()?(this.Vw.nC(this.Gb[r].o,this.Gb[r].v,this.qa),this.dg=r,this.Xb=12):(-1==this.Lf&&(null==this.Ed&&(this.Ed=new e.Ap),this.Lj=new e.ha(0),this.Lj.resize(this.Gb.length,-1),this.Lj.Xj(-1,0,this.Gb.length),this.Lf=this.Ed.Th(1)),this.Lj.set(r,this.Ed.addElement(this.Lf,r)),this.Xb=7),!0},t.prototype.RC=function(){var n=this.Mf.get(--this.Xg),r=n>>1;if(t.vq(n))return-1!=this.Kf&&-1!=this.Kj.get(r)?(this.Ed.jd(this.Kf,this.Kj.get(r)),this.Kj.set(r,-1)):this.pf.remove(r),0!=this.Xg||(this.If=this.dg=-1,this.Jc=!0,!1);if(-1!=this.Lf&&0<this.Ed.Hs(this.Lf))for(n=this.Ed.sc(this.Lf);-1!=n;){var i=this.Ed.getData(n);this.sd.Gi(i),this.Lj.set(i,-1),i=this.Ed.hb(n),this.Ed.jd(this.Lf,n),n=i}return 0<this.sd.size()?(this.Ho.nC(this.rd[r].o,this.rd[r].v,this.qa),this.If=r,this.Xb=11):(-1==this.Kf&&(null==this.Ed&&(this.Ed=new e.Ap),this.Kj=new e.ha(0),this.Kj.resize(this.rd.length,-1),this.Kj.Xj(-1,0,this.rd.length),this.Kf=this.Ed.Th(0)),this.Kj.set(r,this.Ed.addElement(this.Kf,r)),this.Xb=7),!0},t.prototype.DA=function(){if(this.If=this.Ho.next(),-1!=this.If)return!1;var e=this.Nd.get(this.we)>>1;return this.sd.Gi(e),this.Xb=4,!0},t.prototype.FU=function(){if(this.dg=this.Ho.next(),-1!=this.dg)return!1;this.If=this.dg=-1;var e=this.Mf.get(this.Xg)>>1;return this.pf.Gi(e),this.Xb=7,!0},t.prototype.CU=function(){if(this.If=this.Vw.next(),-1!=this.If)return!1;var e=this.Nd.get(this.we)>>1;return this.sd.Gi(e),this.Xb=7,!0},t.prototype.DU=function(){if(-1==--this.Xg)return this.Xb=5,!0;this.Pq.H(this.Gb[this.we]);var e=this.Gb[this.Xg];return this.Pq.O(this.qa,this.qa),!this.Pq.isIntersecting(e)||(this.If=this.Xg,!1)},t.prototype.EU=function(){if(-1==--this.Xg)return this.Xb=6,!0;this.Pq.H(this.Gb[this.we]);var e=this.rd[this.Xg];return this.Pq.O(this.qa,this.qa),!this.Pq.isIntersecting(e)||(this.If=this.Xg,!1)},t.prototype.oK=function(){return null==this.sd?(this.Jc=!0,!1):(this.we=this.Nd.size,0<this.sd.size()&&this.sd.reset(),-1!=this.Lf&&(this.Ed.kh(this.Lf),this.Lj.resize(0),this.Lf=-1),this.Jc=!1,!0)},t.prototype.nK=function(){return null==this.pf?(this.Jc=!0,!1):(this.Xg=this.Mf.size,0<this.pf.size()&&this.pf.reset(),-1!=this.Kf&&(this.Ed.kh(this.Kf),this.Kj.resize(0),this.Kf=-1),this.Jc=!1,!0)},t.prototype.uu=function(t,n,i){null==this.Nm&&(this.Nm=new e.Eu),i=new r(this,i),this.Nm.sort(t,0,n,i)},t.prototype.oZ=function(e,n,r,i){var a=this;e.Zd(n,r,(function(e,n){var r=a.ss(e,i),o=a.ss(n,i);return r<o||r==o&&t.vq(e)&&t.CA(n)?-1:1}))},t.prototype.ss=function(e,n){var r=.5*this.qa;return n?(n=this.Gb[e>>1],t.vq(e)?n.A-r:n.B+r):(n=this.rd[e>>1],t.vq(e)?n.A-r:n.B+r)},t}(),e.fD=t}(J||(J={})),function(e){var t=function(){function t(){}return t.construct=function(e,n,r,i,a,o){var s=new t;return s.o=e,s.A=n,s.ef=r,s.v=i,s.B=a,s.Lg=o,s},t.prototype.Ka=function(){this.ef=this.o=NaN},t.prototype.u=function(){return isNaN(this.o)},t.prototype.qU=function(){return isNaN(this.ef)},t.prototype.H=function(e,t,n,r,i,a){void 0!==r?"number"==typeof e?(this.o=e,this.A=t,this.ef=n,this.v=r,this.B=i,this.Lg=a):(this.o=e.x-.5*t,this.v=this.o+t,this.A=e.y-.5*n,this.B=this.A+n,this.ef=e.z-.5*r,this.Lg=this.ef+r):(this.o=e,this.A=t,this.ef=n,this.v=e,this.B=t,this.Lg=n)},t.prototype.move=function(e){this.o+=e.x,this.A+=e.y,this.ef+=e.z,this.v+=e.x,this.B+=e.y,this.Lg+=e.z},t.prototype.copyTo=function(e){e.o=this.o,e.A=this.A,e.v=this.v,e.B=this.B},t.prototype.Sk=function(e,t,n){this.o>e?this.o=e:this.v<e&&(this.v=e),this.A>t?this.A=t:this.B<t&&(this.B=t),0==isNaN(this.ef)?this.ef>n?this.ef=n:this.Lg<n&&(this.Lg=n):this.Lg=this.ef=n},t.prototype.Nb=function(n,r,i){if("number"==typeof n)this.u()?(this.o=n,this.A=r,this.ef=i,this.v=n,this.B=r,this.Lg=i):this.Sk(n,r,i);else if(n instanceof e.Id)this.Nb(n.x,n.y,n.z);else{if(!(n instanceof t))throw e.f.I();n.u()||(this.Nb(n.o,n.A,n.ef),this.Nb(n.v,n.B,n.Lg))}},t.prototype.construct=function(e,t,n){e.u()||t.u()?this.Ka():(this.o=e.fa,this.v=e.ja,this.A=t.fa,this.B=t.ja,this.ef=n.fa,this.Lg=n.ja)},t.prototype.XB=function(t){if(null==t||8>t.length)throw e.f.I();t[0]=new e.Id(this.o,this.A,this.ef),t[1]=new e.Id(this.o,this.B,this.ef),t[2]=new e.Id(this.v,this.B,this.ef),t[3]=new e.Id(this.v,this.A,this.ef),t[4]=new e.Id(this.o,this.A,this.Lg),t[5]=new e.Id(this.o,this.B,this.Lg),t[6]=new e.Id(this.v,this.B,this.Lg),t[7]=new e.Id(this.v,this.A,this.Lg)},t.prototype.Ix=function(e){if(null==e||0==e.length)this.Ka();else{var t=e[0];for(this.H(t.x,t.y,t.z),t=1;t<e.length;t++){var n=e[t];this.Sk(n.x,n.y,n.z)}}},t}();e.WL=t}(J||(J={})),function(e){!function(e){e.za=function(){var e=Error();return e.message="Internal Error",e},e.Me=function(){var e=Error();return e.message="Not Implemented",e},e.al=function(){var e=Error();return e.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",e},e.Eb=function(){var e=Error();return e.message="Invalid Call",e},e.I=function(e){var t=Error();return t.message="Illegal Argument Exception",void 0!==e&&(t.message+=": "+e),t},e.Mu=function(e){var t=Error();return t.message=void 0!==e?"Runtime Exception: "+e:"Runtime Exception.",t},e.Y=function(e){var t=Error();return t.message="Geometry Exception: "+e,t},e.PL=function(){var e=Error();return e.message="Assert Failed Exception",e},e.Gd=function(){var e=Error();return e.message="IndexOutOfBoundsException",e},e.ED=function(){var e=Error();return e.message="UserCancelException",e}}(e.f||(e.f={}))}(J||(J={})),function(e){(e=e.nm||(e.nm={}))[e.forward=0]="forward",e[e.reverse=1]="reverse"}(J||(J={})),function(e){var t=function(){function t(e,t){this.Wa=e,this.vI=t,this.AI=-1,this.Al=!1}return t.prototype.xe=function(){},t.prototype.next=function(){if(++this.AI==this.vI.D())return null;var t=this.vI.xa(this.AI);t.scale(this.Wa.ic);var n=new e.Ga;return this.Wa.Xy(t,this.Al,n),n},t.prototype.Fa=function(){return 0},t}(),n=function(){function t(t,n,r){this.Wa=t,this.Yw=n,this.qo=!1,this.wo=r,this.Jw=[0],this.zk=[0],this.Pj=[0],this.ot=[0],this.Al=!1,this.Jq=new e.Ga,this.Bk=[]}return t.prototype.xe=function(){},t.prototype.next=function(){if(this.qo){this.qo=!1,this.td.aa();var t=e.R.$d(this.Jq);return e.pg.Tk(t,this.Wa.Tq,!0,!0,this.Wa.Vb)}if(null==this.td&&(this.td=this.Yw.Ba(),this.td.Ta(),null!=this.wo&&this.wo.dl(null,0)),!this.td.Aa()){if(!this.td.Ta())return null;null!=this.wo&&this.wo.dl(null,0)}t=null,this.zk[0]=0,this.pB=this.Jw[0]=0,this.ji=NaN,this.qo=!1;for(var n=this.Bk.length=0,i=new e.b,a=new e.b,o=[0];this.td.Aa()&&8>this.pB;){var s=this.td.aa();if(i.K(s.ac()),a.K(s.wc()),i.scale(this.Wa.ic),a.scale(this.Wa.ic),e.jj.vv(i,a)?i.x=a.x:e.jj.tv(i,a)&&(a.x=i.x),this.Bk.length=0,e.jj.gG(this.Wa.Ub,this.Wa.lc,this.Wa.Fe,i,a,this.Wa.zB,this.Wa.Ht,o,this.Pj,this.ot,this.Bk,this.Jw),null!=this.wo&&(s=this.Bk.slice(0),this.wo.cH(this.wo.$()-1,s,s.length-1)),e.jj.uv(i,a)?(this.Jq.Ka(),this.Wa.Xy(i,this.Al,this.Jq),this.qo=!0):(this.Jq.Ka(),this.qo=this.cz(o[0],this.Jq)),this.qo){if(this.td.ti(),this.td.mA()){this.td.ti(),this.td.aa();break}this.td.hY();break}null==t&&(t=new e.Ga).dl(null,0),this.AE(t),n++}if(this.Jw[0]=0,0<n){for(o=this.td.wb();0<n;)this.td.ti(),i.K(this.Yw.xa(this.td.wb())),a.K(this.Yw.xa(this.td.nk())),i.scale(this.Wa.ic),a.scale(this.Wa.ic),this.Al&&(e.jj.vv(i,a)?i.x=a.x:e.jj.tv(i,a)&&(a.x=i.x)),this.Bk.length=0,e.jj.gG(this.Wa.Ub,this.Wa.lc,this.Wa.Fe,a,i,this.Wa.zB,this.Wa.Ht,null,this.Pj,this.ot,this.Bk,this.Jw),this.AE(t),n--;return i.K(this.Yw.xa(this.td.wb())),i.scale(this.Wa.ic),r.hs(this.Wa.Ub,this.Wa.lc,this.Wa.ic,this.Wa.rb,i,this.ji+1.570796326794897,this.ji+4.71238898038469,this.Wa.uo,this.Al,this.zk,t,NaN,NaN),this.td.Rb(o),this.td.aa(),n=e.la.Ng(null,t,!0),e.pg.Tk(t,n,!0,!0,this.Wa.Vb)}return this.qo=!1,this.td.aa(),t=e.R.$d(this.Jq),e.pg.Tk(t,this.Wa.Tq,!0,!0,this.Wa.Vb)},t.prototype.AE=function(t){var n=this.Bk[0],i=this.Pj[0]-1.570796326794897,a=this.ot[0]+1.570796326794897;if(!isNaN(this.ji)){if(this.ji>=this.Pj[0]){var o=this.ji+1.570796326794897;i=o+3.141592653589793-(this.ji-this.Pj[0])}else i=(o=this.ji+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.ji));var s=!(this.ji>=this.Pj[0]&&3.141592653589793>=this.ji-this.Pj[0]||this.ji<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.ji),u=!1;if(Math.abs(i-o)<=.5*this.Wa.uo)if(s){var c=t.xa(t.D()-2);c.scale(this.Wa.ic);var l=new e.da(0);for(e.gb.Cz(this.Wa.Ub,this.Wa.lc,n.x,n.y,c.x,c.y,l),c=l.j;c<=o;)c+=6.283185307179586;for(;c>o;)c-=6.283185307179586;c<i&&(u=!0)}else u=!0;u?(t.mC(0,t.D()-1),this.Al||((n=new e.b).K(t.xa(t.D()-1)),n.scale(this.Wa.ic),-3.141592653589793>n.x-this.zk[0]?this.zk[0]-=6.283185307179586:3.141592653589793<n.x-this.zk[0]&&(this.zk[0]+=6.283185307179586)),s||(i=.5*(i+o))):(s?((o=new e.b).K(n),o.scale(1/this.Wa.ic),t.Ff(0,-1,o)):r.hs(this.Wa.Ub,this.Wa.lc,this.Wa.ic,this.Wa.rb,this.Bk[0],o,i,this.Wa.uo,this.Al,this.zk,t,NaN,NaN),this.pB+=1)}r.Wy(this.Wa.Ub,this.Wa.lc,this.Wa.ic,this.Wa.rb,this.Wa.Fe,this.Bk,i,a,this.Al,this.zk,t),this.ji=this.ot[0]},t.prototype.cz=function(e,t){return this.Wa.cz(this.Bk,e,this.Pj[0],this.ot[0],this.Al,t)},t.prototype.Fa=function(){return 0},t}(),r=function(){function r(){}return r.buffer=function(t,n,i,a,o,s){if(null==t)throw e.f.I("Geometry::Geodesic_bufferer::buffer");if(t.u())return new e.Ga(t.description);var u=new r;u.Wg=n,u.Kc=e.ab.hc(n);var c=e.ab.dw(u.Kc);if(u.Vb=s,u.Ub=e.ab.Nv(u.Kc),u.lc=c*(2-c),u.ic=u.Kc.Ld().gi,u.qa=u.Wg.co(),u.Tq=u.Kc.co(),u.Ht=u.Tq*u.ic,u.Sq=1.570796326794897/u.ic,u.t0=3.141592653589793/u.ic,u.rt=6.283185307179586/u.ic,u.u0=u.rt/6,u.uB=0,u.s0=1.5707963267948966*u.Ub/u.uB,4==i?(u.Fe=2,u.Dw=!0):(u.Fe=i,u.Dw=!1),u.La=a,u.rb=Math.abs(a),isNaN(o)||.001>o?u.aZ():u.to=o,i=t.F(),e.R.Ic(i)?((i=new e.Oa(t.description)).$b(t,!0),t=i,i=1607):197==i&&(i=new e.g,t.s(i),i.N()<=u.qa||i.ca()<=u.qa?((i=new e.Oa(t.description)).bd(t,!1),t=i,i=1607):((i=new e.Ga(t.description)).bd(t,!1),t=i,i=1736)),u.bZ(),e.R.lo(i)||u.cZ(),u.rb<=.5*u.to)return 1736!=i?new e.Ga(t.description):u.Dw?t:e.jj.rs(t,u.Wg,u.Fe,u.zB,-1,s);if(0>u.La&&1736!=i)return new e.Ga(t.description);if(u.Dw&&e.R.Bc(i)?(n=e.jj.rs(t,n,4,NaN,u.to,s),t=e.ab.$g(n,u.Wg,u.Kc)):t=e.ab.$g(t,u.Wg,u.Kc),(t=e.Lh.qj(t,u.Kc)).u())return new e.Ga(t.description);switch(!u.Dw&&e.R.Bc(i)&&(t=e.jj.fJ(u.ic,t)),t=r.pZ(t,u.Kc),i){case 1736:n=u.eP(t);break;case 1607:n=u.fP(t);break;case 550:n=u.cP(t);break;case 33:n=u.dP(t);break;default:throw e.f.Y("corrupted_geometry")}return(u=e.ab.$g(n,u.Kc,u.Wg)).Tl(t.description),u},r.prototype.eP=function(t){var r=new e.Ga;t=new n(this,t,r),t=e.Jh.local().U(t,this.Kc,this.Vb).next(),t=e.zp.sj(t,this.Kc,2);var i=new e.xd;return i.scale(1/this.ic,1/this.ic),r.Qc(i),r=e.zp.sj(r,this.Kc,2),0<=this.La?e.Jh.local().U(r,t,this.Kc,this.Vb):e.Cp.local().U(r,t,this.Kc,this.Vb)},r.prototype.fP=function(t){return t=new n(this,t,null),t=e.Jh.local().U(t,this.Kc,this.Vb).next(),e.zp.sj(t,this.Kc,2)},r.prototype.cP=function(n){return n=new t(this,n),n=e.Jh.local().U(n,this.Kc,this.Vb).next(),e.zp.sj(n,this.Kc,2)},r.prototype.dP=function(t){(t=t.w()).scale(this.ic);var n=new e.Ga;return this.Xy(t,!1,n),e.zp.sj(n,this.Kc,2)},r.prototype.cz=function(t,n,i,a,o,s){var u=t[0],c=t[t.length-1],l=u.y>c.y?u.y:c.y,h=e.C.q(this.Ub,this.lc,u.y<c.y?u.y:c.y);if(l=e.C.q(this.Ub,this.lc,l),.001<this.uB-(h+n+this.rb)&&.001<this.uB+(l-n-this.rb))return!1;h=(n=i-1.570796326794897)-3.141592653589793,l=n+3.141592653589793;var f=(i=a+1.570796326794897)+3.141592653589793,p=[NaN],d=[NaN],v=[NaN],y=[NaN];if(a=!1,r.VJ(this.Ub,this.lc,this.rb,u,n,h,c,i,p,d),r.VJ(this.Ub,this.lc,this.rb,c,f,i,u,h,v,y),(i<p[0]&&p[0]<f||i<d[0]&&d[0]<f)&&(a=!0),a||(h<v[0]&&v[0]<n||h<y[0]&&y[0]<n)&&(a=!0),!a&&o)return!1;for(var b=[],g=t.length-1;0<=g;g--)b.push(t[g]);return s.Ka(),s.dl(null,0),r.Wy(this.Ub,this.lc,this.ic,this.rb,this.Fe,t,n,i,o,g=[0],s),r.hs(this.Ub,this.lc,this.ic,this.rb,c,i,f,this.uo,o,g,s,p[0],d[0]),r.Wy(this.Ub,this.lc,this.ic,this.rb,this.Fe,b,f,l,o,g,s),r.hs(this.Ub,this.lc,this.ic,this.rb,u,h,n,this.uo,o,g,s,v[0],y[0]),t=!1,o||(t=this.sF(this.ic,s)),a||t},r.prototype.Xy=function(e,t,n){n.Ka(),n.dl(null,0),r.hs(this.Ub,this.lc,this.ic,this.rb,e,-this.uo,6.283185307179586,this.uo,t,[0],n,NaN,NaN),t||this.sF(this.ic,n)},r.prototype.sF=function(e,t){var n=this.FP(e,t);return e=this.GP(e,t),n||e},r.prototype.FP=function(t,n){var r=n.D(),i=!1,a=new e.g;if(n.s(a),!e.l.V(a.B*t,1.570796326794897)&&!e.l.V(a.A*t,-1.570796326794897))return!1;var o=new e.b;for(--r;0<=r;r--)n.w(r,o),(o.y==a.B&&e.l.V(o.y*t,1.570796326794897)||o.y==a.A&&e.l.V(o.y*t,-1.570796326794897))&&(i=!0,this.FJ(o,r,n));return i},r.prototype.GP=function(e,t){var n=t.xa(0),r=t.xa(t.D()-1);return 3.141592653589793<Math.abs(n.x-r.x)*e?(this.nX(t),!0):this.EP(t)},r.prototype.EP=function(e){return 0>e.Pe()&&(this.mX(e),!0)},r.prototype.FJ=function(t,n,r){var i=r.D(),a=0<n?n-1:i-1;if(i=r.xa(n<i-1?n+1:0),a=r.xa(a),!e.l.V(i.y,t.y)&&!e.l.V(i.x,t.x)){var o=new e.b;o.ka(i.x,t.y),r.nb(n,o)}e.l.V(a.y,t.y)||e.l.V(a.x,t.x)||((i=new e.b).ka(a.x,t.y),r.Ff(0,n,i))},r.prototype.nX=function(t){var n=new e.Ga,r=new e.Ga,i=new e.xd,a=t.xa(0),o=t.xa(t.D()-1),s=new e.b;a.x>o.x?(o=this.Sq,i.mg(-this.rt,0)):(o=-this.Sq,i.mg(this.rt,0)),n.add(t,!1),t.Ka(),r.add(n,!1),r.Qc(i),a=new e.g,r.s(a),a.O((this.rt-a.N())/2,0),a.A=-this.Sq,a.B=this.Sq;for(var u=0;u<r.D();u++)r.w(u,s),n.Ff(0,-1,s);for(r.Qc(i),u=0;u<r.D();u++)r.w(u,s),n.Ff(0,-1,s);r=n.xa(0),i=n.xa(n.D()-1),s.ka(i.x,o),n.Ff(0,-1,s),s.ka(.5*(i.x+r.x),o),n.Ff(0,-1,s),s.ka(r.x,o),n.Ff(0,-1,s),n=e.Lh.Ss(n,this.Kc,2,!0,a.o),n=e.Lh.Ss(n,this.Kc,2,!0,a.v),n=e.Yd.clip(n,a,this.Tq,NaN),t.add(n,!1)},r.prototype.mX=function(t){var n=new e.g;t.s(n),n.O((this.rt-n.N())/2,0),n.A=-this.Sq,n.B=this.Sq,t.dl(null,0);var r=new e.b;r.ka(n.o,n.A),t.Ff(1,-1,r),r.ka(n.o,n.B),t.Ff(1,-1,r),r.ka(.5*(n.o+n.v),n.B),t.Ff(1,-1,r),r.ka(n.v,n.B),t.Ff(1,-1,r),r.ka(n.v,n.A),t.Ff(1,-1,r),r.ka(.5*(n.o+n.v),n.A),t.Ff(1,-1,r)},r.Wy=function(t,n,i,a,o,s,u,c,l,h,f){var p=null;l||((p=new e.b).Tc(),0<f.D()&&(p.K(f.xa(f.D()-1)),p.scale(i)));var d=new e.da(0),v=new e.da(0),y=new e.da(0),b=new e.b,g=new e.b,m=s[s.length-1];i=1/i;for(var w=0;w<s.length;w++){var O=s[w];if(0==w)var j=u;else w==s.length-1?j=c:(e.gb.Ad(t,n,m.x,m.y,O.x,O.y,null,null,d,o),j=d.j-1.570796326794897);e.gb.Fi(t,n,O.x,O.y,a,j,v,y),l?g.ka(v.j,y.j):(b.ka(v.j,y.j),r.kK(O.x,b.x,p.x,h),g.ka(h[0]+b.x,b.y),p.K(g)),g.scale(i),f.Ff(0,-1,g)}},r.hs=function(t,n,i,a,o,s,u,c,l,h,f,p,d){if(!(u-s<c)){var v=new e.da(0),y=new e.da(0),b=new e.b,g=new e.b,m=null;l||((m=new e.b).Tc(),0<f.D()&&(m.K(f.xa(f.D()-1)),m.scale(i)));var w=e.L.truncate(Math.ceil(s/c)),O=w++*c;for(O==s&&(O=w++*c),i=1/i;O<u+c&&(s<p&&p<O?(O=p,w--):s<d&&d<O&&(O=d,w--),!(O>=u));)e.gb.Fi(t,n,o.x,o.y,a,O,v,y),l?g.ka(v.j,y.j):(b.ka(v.j,y.j),r.kK(o.x,b.x,m.x,h),g.ka(h[0]+b.x,b.y),m.K(g)),g.scale(i),f.Ff(0,-1,g),s=O,O=w++*c}},r.VJ=function(t,n,r,i,a,o,s,u,c,l){var h=new e.b,f=new e.b,p=new e.da(0),d=new e.da(0);for(e.gb.Fi(t,n,i.x,i.y,r,a,p,d),h.ka(p.j,d.j),e.gb.Fi(t,n,i.x,i.y,r,o,p,d),f.ka(p.j,d.j),r=new e.da(0),e.gb.Cz(t,n,s.x,s.y,h.x,h.y,r),c[0]=r.j,e.gb.Cz(t,n,s.x,s.y,f.x,f.y,r),l[0]=r.j;c[0]<=l[0];)c[0]+=6.283185307179586;for(;c[0]>l[0];)c[0]-=6.283185307179586;for(;c[0]>=u;)c[0]-=6.283185307179586,l[0]-=6.283185307179586;for(;c[0]<u;)c[0]+=6.283185307179586,l[0]+=6.283185307179586},r.kK=function(e,t,n,r){if(isNaN(n)){for(;3.141592653589793<r[0]+t-e;)r[0]-=6.283185307179586;for(;3.141592653589793<e-(r[0]+t);)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+t-n?r[0]-=6.283185307179586:3.141592653589793<n-(r[0]+t)&&(r[0]+=6.283185307179586)},r.pZ=function(t,n){var r=t.F(),i=e.R.Bc(r)?t.$():550==r?t.D():1;if(1==i)return t;var a=new e.ha(0);a.resize(i);for(var o=[],s=new e.g,u=0;u<i;u++){if(a.write(u,u),e.R.Bc(r)){t.Sj(u,s);var c=s.hf()}else c=t.xa(u);c=e.fM.GZ(n,c),o[u]=c}for(a.Zd(0,a.size,(function(e,t){return o[e]<o[t]?-1:o[e]>o[t]?1:0})),n=t.Ea(),u=0;u<i;u++)s=a.read(u),e.R.Bc(r)?n.addPath(t,s,!0):n.yd(t,s,s+1);return n},r.prototype.bZ=function(){var t=Math.min(3.141592653589793*this.Ub-this.rb,this.rb);t=Math.min(t,.39269908169872414*this.Ub);var n=new e.b;n.ka(0,10*this.ic);var r=45*this.ic,i=new e.da(0),a=new e.da(0),o=new e.da(0),s=new e.da(0),u=new e.da(0),c=new e.da(0),l=new e.da(0),h=new e.da(0),f=new e.b,p=new e.b,d=new e.b,v=new e.b;e.gb.Fi(this.Ub,this.lc,n.x,n.y,t,0,i,a),f.ka(i.j,a.j),e.gb.Fi(this.Ub,this.lc,n.x,n.y,t,r,o,s),p.ka(o.j,s.j),i=new e.da(0),a=new e.da(0);for(var y=new e.da(0);e.gb.Fi(this.Ub,this.lc,n.x,n.y,t,.5*(0+r),u,c),d.ka(u.j,c.j),e.gb.Ad(this.Ub,this.lc,f.x,f.y,p.x,p.y,i,a,null,2),e.gb.tj(this.Ub,this.lc,f.x,f.y,.5*i.j,a.j,l,h,2),v.ka(l.j,h.j),e.gb.Ad(this.Ub,this.lc,d.x,d.y,v.x,v.y,y,null,null,2),!(y.j<=this.to);)e.gb.Fi(this.Ub,this.lc,n.x,n.y,t,r*=.9,o,s),p.ka(o.j,s.j);this.uo=6.283185307179586/Math.ceil(6.283185307179586/(r-0))},r.prototype.cZ=function(){var t=Math.min(3.141592653589793*this.Ub-this.rb,this.rb);t=Math.min(t,.39269908169872414*this.Ub);var n=new e.b,r=new e.b;n.ka(0,10*this.ic),r.ka(10*this.ic,10*this.ic);var i=new e.da(0),a=new e.da(0),o=new e.da(0);e.gb.Ad(this.Ub,this.lc,n.x,n.y,r.x,r.y,o,i,a,this.Fe);var s=new e.da(0),u=new e.da(0),c=new e.da(0),l=new e.da(0),h=new e.b,f=new e.da(0),p=new e.da(0),d=new e.da(0),v=new e.da(0),y=new e.da(0),b=new e.da(0),g=new e.da(0),m=new e.da(0),w=new e.da(0),O=new e.b,j=new e.b,_=new e.b,x=new e.b,k=1;a=a.j+1.570796326794897,o=o.j,e.gb.Fi(this.Ub,this.lc,n.x,n.y,t,(i=i.j)-1.570796326794897,p,d),O.ka(p.j,d.j),e.gb.Fi(this.Ub,this.lc,r.x,r.y,t,a,v,y),j.ka(v.j,y.j),p=new e.da(0),d=new e.da(0),a=new e.da(0);for(var S=new e.da(0);e.gb.tj(this.Ub,this.lc,n.x,n.y,.5*(0+k)*o,i,s,u,this.Fe),h.ka(s.j,u.j),e.gb.Ad(this.Ub,this.lc,n.x,n.y,h.x,h.y,null,null,f,this.Fe),e.gb.Fi(this.Ub,this.lc,h.x,h.y,t,f.j+1.570796326794897,b,g),_.ka(b.j,g.j),e.gb.Ad(this.Ub,this.lc,O.x,O.y,j.x,j.y,p,d,null,2),e.gb.tj(this.Ub,this.lc,O.x,O.y,.5*p.j,d.j,m,w,2),x.ka(m.j,w.j),e.gb.Ad(this.Ub,this.lc,_.x,_.y,x.x,x.y,a,null,null,2),!(a.j<=this.to);)e.gb.tj(this.Ub,this.lc,n.x,n.y,(k*=.9)*o,i,c,l,this.Fe),r.ka(c.j,l.j),e.gb.Ad(this.Ub,this.lc,n.x,n.y,r.x,r.y,null,null,S,this.Fe),e.gb.Fi(this.Ub,this.lc,r.x,r.y,t,S.j+1.570796326794897,v,y),j.ka(v.j,y.j);1e5<(t=k*o)&&(t=1e5),this.zB=t},r.prototype.aZ=function(){var e=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/e&&(e=this.rb/500),.01>e&&(e=.01),this.to=e},r}();e.dM=r}(J||(J={})),function(e){var t=function(){function t(){}return t.Wf=function(t,n){var r=new e.b;r.K(n),t.push(r)},t.Op=function(e,t){e.add(t.x),e.add(t.y)},t.SB=function(e){e.Gh(e.size-2)},t.YB=function(e,t){t.ka(e.get(e.size-2),e.get(e.size-1))},t.rs=function(n,r,i,a,o,s){if(null==n)throw e.f.I();var u=n.F();if(n.u()||e.R.lo(u))return n;var c=new t;c.Wg=r,c.Kc=e.ab.hc(r);var l=e.ab.dw(c.Kc);if(c.Vb=s,c.Ub=e.ab.Nv(c.Kc),c.lc=l*(2-l),c.ic=c.Kc.Ld().gi,c.Tq=c.Kc.co(),c.Ht=c.Tq*c.ic,c.jB=a,c.iB=o,c.Fe=i,197==u?(i=new e.Ga(n.description)).bd(n,!1):e.R.Ic(u)?(i=new e.Oa(n.description)).$b(n,!0):i=n,4!=c.Fe){if((r=0==c.Wg.Ib(c.Kc)?e.ab.$g(i,c.Wg,c.Kc):e.Lh.qj(i,c.Kc)).u())return r;r=t.fJ(c.ic,r),r=c.Ez(r),r=e.zp.sj(r,c.Kc,c.Fe),c=e.ab.$g(r,c.Kc,c.Wg)}else{if(2==e.je.Fb(r)?(n=e.ab.sk(),(r=e.ak.local().U(i,n,r,s))==n&&(r=new e.Ga,n.copyTo(r))):r=e.Lh.qj(i,c.Kc),r.u())return r;c=c.fZ(r)}return c},t.fJ=function(n,r){var i=new e.g;if(r.Zb(i),3.141592653589793>i.N()*n)return r;var a=!1;i=r.Ba();for(var o=new e.b,s=new e.b;i.Ta();)for(;i.Aa();){var u=i.aa();if(o.K(u.ac()),s.K(u.wc()),o.scale(n),s.scale(n),3.141592653589793<Math.abs(o.x-s.x)){var c=t.uv(o,s);if(!c){a=!0;break}if(6.283185307179586<Math.abs(o.x-s.x)){a=!0;break}}}if(!a)return r;a=r.Ea();var l=1<r.description.Ca,h=new e.b,f=new e.b,p=new e.b,d=new e.b,v=new e.Ra;for(i.ej();i.Ta();)for(var y=NaN,b=[0];i.Aa();){if(u=i.aa(),o.K(u.ac()),s.K(u.wc()),o.scale(n),s.scale(n),isNaN(y)?(t.cj(o.x,NaN,b),f.K(o)):f.K(p),y=f.x,c=t.uv(o,s)){if(6.283185307179586<s.x-o.x)for(;6.283185307179586<s.x-o.x;)s.x-=6.283185307179586;if(-6.283185307179586>s.x-o.x)for(;-6.283185307179586>s.x-o.x;)s.x+=6.283185307179586;t.cj(s.x,NaN,b),p.K(s)}else h.K(s),t.TV(h),t.cj(h.x,y,b),p.ka(b[0]+h.x,h.y);.5>Math.abs(p.x-s.x)&&p.K(s),l?(u.zx(0,v),d.K(f),d.scale(1/n),v.nb(d),(c=i.Im())?a.xf(v):a.lineTo(v),i.ko()&&!r.Lb(i.Pa)&&(u.zx(1,v),d.K(p),d.scale(1/n),v.nb(d),a.lineTo(v))):((c=i.Im())&&a.pA(null,0),u=a.$()-1,d.K(f),d.scale(1/n),a.Ff(u,-1,d),i.ko()&&!r.Lb(i.Pa)&&(d.K(p),d.scale(1/n),a.Ff(u,-1,d)))}return a},t.gG=function(n,r,i,a,o,s,u,c,l,h,f,p){var d=new e.b,v=new e.b,y=0<a.compare(o);t.jK(y,a,o,d,v),t.hG(n,r,i,d,v,s,NaN,u,c,l,h,null,f,p),y&&t.OC(l,h,null,f)},t.prototype.Ez=function(n){var r=n.Ea(),i=n.Ba(),a=[],o=null,s=null,u=1<n.description.Ca;u&&(o=new e.ie(0),s=new e.og);for(var c=[0],l=new e.b,h=new e.b,f=new e.b,p=new e.b;i.Ta();)for(c[0]=0;i.Aa();){var d=i.aa();l.K(d.ac()),h.K(d.wc()),l.scale(this.ic),h.scale(this.ic);var v=0<l.compare(h);t.jK(v,l,h,f,p),a.length=0,null!=o&&o.Gh(0),0<this.jB?t.hG(this.Ub,this.lc,this.Fe,f,p,this.jB,this.iB,this.Ht,null,null,null,u?o:null,a,c):t.oS(this.Ub,this.lc,this.Fe,f,p,this.iB,this.Ht,u?o:null,a,c),v&&t.OC(null,null,u?o:null,a),a[0].K(d.ac()),a[a.length-1].K(d.wc());for(var y=1;y<a.length-1;y++)a[y].scale(1/this.ic);u?(v=t.iK(v,d,s),t.FE(i.Im(),i.ko()&&!n.Lb(i.Pa),d,v,o,a,r)):t.EE(i.Im(),i.ko()&&!n.Lb(i.Pa),a,r)}return r},t.prototype.fZ=function(n){var r=n.Ea(),i=n.Ba(),a=[],o=null,s=new e.og,u=1<n.description.Ca;for(u&&(o=new e.ie(0));i.Ta();)for(;i.Aa();){var c=i.aa(),l=c.ac(),h=c.wc();l=0<l.compare(h),h=t.iK(l,c,s),a.length=0,null!=o&&o.Gh(0),t.eZ(this.Ub,this.lc,this.ic,h,this.Wg,this.jB,this.iB,u?o:null,a),l&&t.OC(null,null,u?o:null,a),u?t.FE(i.Im(),i.ko()&&!n.Lb(i.Pa),c,h,o,a,r):t.EE(i.Im(),i.ko()&&!n.Lb(i.Pa),a,r)}return r},t.EE=function(e,t,n,r){e&&r.pA(null,0),e=r.$()-1;var i=n.slice(0);r.cH(e,i,i.length-1),t&&r.Ff(e,-1,n[n.length-1])},t.FE=function(t,n,r,i,a,o,s){var u=new e.Ra;if(r.jp(u),t?s.xf(u):s.lineTo(u),2<o.length){t=i.Pb();for(var c=1;c<o.length-1;c++){var l=i.zH(a.get(c)*t);i.zx(l,u),u.nb(o[c]),s.lineTo(u)}}n&&(r.hp(u),s.lineTo(u))},t.hG=function(n,r,i,a,o,s,u,c,l,h,f,p,d,v){var y=new e.da(0),b=new e.da(0),g=new e.da(0);e.gb.Ad(n,r,a.x,a.y,o.x,o.y,g,y,b,i),g=g.j;var m=y=y.j;0>m&&(m+=6.283185307179586),0>(b=b.j)&&(b+=6.283185307179586),null!=l&&(l[0]=g),null!=h&&(h[0]=m),null!=f&&(f[0]=b),h=l=NaN,null!=p&&(l=((h=e.C.Hg(n,r))-(f=e.C.q(n,r,a.y)))/g,h=(h+f)/g),f=t.vv(a,o),b=t.tv(a,o),m=f||b;var w=t.pF(a,o,c),O=new e.da(0),j=new e.da(0),_=new e.b,x=new e.b,k=new e.b;t.cj(a.x,NaN,v);var S=[v[0]];if(g<=s)t.Wf(d,a),t.cj(o.x,NaN,v),null!=p&&p.add(0),m?(f&&t.VB(a,o,p,d),b&&t.TB(a,o,p,d)):w?t.UB(a,o,y,l,h,p,d):0<u&&(x.ka(a.x-S[0],a.y),_.ka(o.x-v[0],o.y),t.Dz(n,r,i,a,g,y,x,_,0,1,u,p,d,S)),t.Wf(d,o);else{var M=g/((s=1+e.L.truncate(Math.ceil(g/s)))-1),I=new e.b,T=0;t.Wf(d,a),I.K(a),x.ka(a.x-v[0],a.y),null!=p&&p.add(0);for(var A=1;A<s;A++){if(A<s-1){e.gb.tj(n,r,a.x,a.y,A*M,y,O,j,i),_.ka(O.j,j.j),t.cj(_.x,I.x,v),k.ka(v[0]+_.x,_.y);var C=A/(s-1)}else t.cj(o.x,NaN,v),_.ka(o.x-v[0],o.y),k.K(o),C=1;m?(1==A&&f&&t.VB(a,k,p,d),A==s-1&&b&&t.TB(I,o,p,d)):w?t.oF(I,k,c)&&(a.x<o.x?I.x>k.x&&(v[0]+=6.283185307179586,k.ka(v[0]+_.x,_.y)):I.x<k.x&&(v[0]-=6.283185307179586,k.ka(v[0]+_.x,_.y)),t.UB(I,k,y,l,h,p,d)):0<u&&t.Dz(n,r,i,a,g,y,x,_,T,C,u,p,d,S),t.Wf(d,k),null!=p&&p.add(C),I.K(k),x.K(_),S[0]=v[0],T=C}}},t.oS=function(n,r,i,a,o,s,u,c,l,h){var f=new e.da(0),p=new e.da(0),d=new e.da(0);e.gb.Ad(n,r,a.x,a.y,o.x,o.y,d,f,p,i),p=d.j,f=f.j;var v=d=NaN;if(null!=c){v=e.C.Hg(n,r);var y=e.C.q(n,r,a.y);d=(v-y)/p,v=(v+y)/p}y=t.vv(a,o);var b=t.tv(a,o),g=y||b;u=t.pF(a,o,u);var m=t.uv(a,o);m=g||u||m,t.cj(a.x,NaN,h);var w=new e.b;t.Wf(l,a),w.K(a),null!=c&&c.add(0),m?(g?(y&&t.VB(a,o,c,l),b&&t.TB(a,o,c,l)):u&&t.UB(a,o,f,d,v,c,l),t.cj(o.x,NaN,h),t.Wf(l,o)):p<=s?(t.cj(o.x,NaN,h),t.Wf(l,o)):(d=new e.b,u=new e.b,d.K(a),u.K(o),d.x-=h[0],u.x-=h[0],-3.141592653589793>u.x?u.x+=6.283185307179586:3.141592653589793<u.x&&(u.x-=6.283185307179586),t.Dz(n,r,i,a,p,f,d,u,0,1,s,c,l,h),t.Wf(l,o),t.cj(o.x,NaN,h)),null!=c&&c.add(1)},t.Dz=function(n,r,i,a,o,s,u,c,l,h,f,p,d,v){var y=new e.b,b=new e.b;y.ka(u.x+v[0],u.y),new e.da(0),new e.da(0),new e.da(0),new e.da(0);var g=new e.da(0),m=new e.da(0),w=new e.da(0),O=new e.b,j=new e.b,_=new e.b,x=new e.b;O.K(u),j.K(c),u=new e.ie(0),c=new e.ie(0),t.Op(u,j),c.add(h);var k=new e.b,S=new e.zb,M=[];for(t.bL(4,M);0<u.size;){for(var I,T=!1,A=NaN,C=0;3>C;C++)if(e.gb.tj(n,r,a.x,a.y,(I=M[C]*h+(1-M[C])*l)*o,s,g,m,i),_.ka(g.j,m.j),0==C&&(A=I,x.K(_)),t.yY(O,_,j,S),S.cc(S.ae(_,!0),k),e.gb.Ad(n,r,_.x,_.y,k.x,k.y,w,null,null,2),w.j>f){T=!0;break}T?(j.K(x),h=A,t.Op(u,j),c.add(h)):(t.SB(u),c.Xn(c.size-1,1,c.size-1),0<u.size&&(t.cj(j.x,y.x,v),b.ka(v[0]+j.x,j.y),t.Wf(d,b),y.K(b),null!=p&&p.add(h),O.K(j),l=h,t.YB(u,j),h=c.get(c.size-1)))}},t.eZ=function(n,r,i,a,o,s,u,c,l){var h=new e.b,f=new e.b,p=new e.b,d=new e.b,v=new e.b,y=new e.b,b=new e.b,g=new e.b,m=new e.b,w=new e.b,O=new e.da(0),j=new e.da(0),_=new e.b,x=[[],[]],k=1==e.je.Fb(o);o=o.ce(0);var S=a.ac(),M=a.wc();k?(y.ka(S.x*i,S.y*i),b.ka(M.x*i,M.y*i)):(x[0][0]=S.x,x[0][1]=S.y,x[1][0]=M.x,x[1][1]=M.y,e.ab.eu(),y.x=x[0][0]*i,y.y=x[0][1]*i,b.x=x[1][0]*i,b.y=x[1][1]*i);var I=0,T=0,A=1,C=a.jo();h.K(S),f.K(M),M=new e.ie(0);var E=new e.ie(0),P=new e.ie(0);t.Op(M,f),t.Op(E,b),P.add(A),t.Wf(l,h),null!=c&&c.add(T);var R=[],D=0<u?C?5:3:C?5:1;t.bL(D,R);for(var L=new e.da(0),N=new e.da(0),F=new e.da(0),z=new e.da(0),V=new e.da(0),G=new e.da(0),U=new e.da(0);0<E.size;){var B=!1,q=NaN;for(e.gb.Ad(n,r,y.x,y.y,b.x,b.y,L,N,null,2),S=0;S<D;S++){if(0==S){if(!C&&0>=u&&L.j<=s&&3.141592653589793>Math.abs(y.x-b.x))break;if(a.zy(T,A)<=o)break}var H=R[S]*A+(1-R[S])*T;if(a.cc(H,p),k?g.ka(p.x*i,p.y*i):(x[0][0]=p.x,x[0][1]=p.y,e.ab.eu(),g.x=x[0][0]*i,g.y=x[0][1]*i),0==S&&(q=H,v.K(p),w.K(g),0<s&&(L.j>s||3.141592653589793<=Math.abs(y.x-b.x)))){B=!0;break}if(C&&0<s){if(e.gb.Ad(n,r,y.x,y.y,g.x,g.y,F,null,null,2),F.j>s||3.141592653589793<=Math.abs(y.x-g.x)){B=!0;break}}else if(0<u){if(C?(d.hU(h,f,R[S]),k?m.ka(d.x*i,d.y*i):(x[0][0]=d.x,x[0][1]=d.y,e.ab.eu(),m.x=x[0][0]*i,m.y=x[0][1]*i)):(d.K(p),m.K(g)),e.gb.Ad(n,r,y.x,y.y,m.x,m.y,z,null,null,2),!(z.j<=L.j)){B=!0;break}if(e.gb.tj(n,r,y.x,y.y,z.j,N.j,O,j,2),_.ka(O.j,j.j),e.gb.Ad(n,r,_.x,_.y,g.x,g.y,V,null,null,2),V.j>u){B=!0;break}if(C){if(e.gb.Ad(n,r,_.x,_.y,m.x,m.y,G,null,null,2),G.j>u){B=!0;break}if(e.gb.Ad(n,r,m.x,m.y,g.x,g.y,U,null,null,2),U.j>u){B=!0;break}}}}B?(f.K(v),b.K(w),A=q,t.Op(M,f),t.Op(E,b),P.add(A)):(t.SB(M),t.SB(E),P.Xn(P.size-1,1,P.size-1),t.Wf(l,f),I+=L.j,null!=c&&c.add(I),0<E.size&&(h.K(f),y.K(b),T=A,t.YB(M,f),t.YB(E,b),A=P.get(P.size-1)))}if(null!=c)for(n=1/I,S=0;S<c.size;S++)c.write(S,c.read(S)*n)},t.OC=function(e,t,n,r){r.reverse(),null!=n&&n.wi(0,n.size,1),n=null!=e?e[0]:NaN,r=null!=t?t[0]:NaN,null!=e&&(e[0]=r),null!=t&&(t[0]=n)},t.jK=function(e,t,n,r,i){e?(r.K(n),i.K(t)):(r.K(t),i.K(n))},t.iK=function(e,t,n){return e?(n.create(t.F()),t.copyTo(n.get()),n.get().reverse(),n.get()):t},t.cj=function(e,t,n){if(isNaN(t)){for(;3.141592653589793<n[0]-e;)n[0]-=6.283185307179586;for(;3.141592653589793<e-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+e-t?n[0]-=6.283185307179586:3.141592653589793<t-(n[0]+e)&&(n[0]+=6.283185307179586)},t.yY=function(e,t,n,r){3.141592653589793>Math.abs(t.x-e.x)?(r.Fc(e),r.am(3.141592653589793<=n.x-e.x?n.x-6.283185307179586:3.141592653589793<=e.x-n.x?n.x+6.283185307179586:n.x,n.y)):(r.Fc(n),r.am(3.141592653589793<=e.x-n.x?e.x-6.283185307179586:3.141592653589793<=n.x-e.x?e.x+6.283185307179586:e.x,e.y))},t.bL=function(e,t){for(var n=0;n<e;n++){var r=Math.ceil(n/2)/(e+1);0!=n%2&&(r=-r),t[n]=.5+r}},t.vv=function(t,n){return!!(e.l.V(t.y,1.570796326794897)&&!e.l.V(n.y,1.570796326794897)||e.l.V(t.y,-1.570796326794897)&&!e.l.V(n.y,-1.570796326794897))},t.tv=function(t,n){return!!(e.l.V(n.y,1.570796326794897)&&!e.l.V(t.y,1.570796326794897)||e.l.V(n.y,-1.570796326794897)&&!e.l.V(t.y,-1.570796326794897))},t.pF=function(n,r,i){return!(!t.oF(n,r,i)||e.l.V(n.y,1.570796326794897)||e.l.V(n.y,-1.570796326794897)||e.l.V(r.y,1.570796326794897)||e.l.V(r.y,-1.570796326794897))},t.oF=function(e,t,n){return Math.abs(Math.abs(e.x-t.x)-3.141592653589793)<=n},t.uv=function(t,n){return!!(e.l.V(t.y,1.570796326794897)&&e.l.V(n.y,1.570796326794897)||e.l.V(t.y,-1.570796326794897)&&e.l.V(n.y,-1.570796326794897))},t.VB=function(n,r,i,a){if(0<n.y){var o=new e.b;o.ka(r.x,1.570796326794897)}else(o=new e.b).ka(r.x,-1.570796326794897);e.l.V(n.x,o.x)||e.l.V(r.y,o.y)||(t.Wf(a,o),null!=i&&i.add(0))},t.TB=function(n,r,i,a){if(0<r.y){var o=new e.b;o.ka(n.x,1.570796326794897)}else(o=new e.b).ka(n.x,-1.570796326794897);e.l.V(r.x,o.x)||e.l.V(n.y,o.y)||(t.Wf(a,o),null!=i&&i.add(1))},t.UB=function(n,r,i,a,o,s,u){e.l.qd(i)?(0<1.570796326794897-n.y&&((i=new e.b).ka(n.x,1.570796326794897),t.Wf(u,i),null!=s&&s.add(a)),0<1.570796326794897-r.y&&((i=new e.b).ka(r.x,1.570796326794897),t.Wf(u,i),null!=s&&s.add(a))):(0<1.570796326794897+n.y&&((i=new e.b).ka(n.x,-1.570796326794897),t.Wf(u,i),null!=s&&s.add(o)),0<1.570796326794897+r.y&&((i=new e.b).ka(r.x,-1.570796326794897),t.Wf(u,i),null!=s&&s.add(o)))},t.TV=function(e){if(-3.141592653589793>e.x)for(;-3.141592653589793>e.x;)e.x+=6.283185307179586;if(3.141592653589793<e.x)for(;3.141592653589793<e.x;)e.x-=6.283185307179586},t}();e.jj=t}(J||(J={})),function(e){e.zp=function(){function t(){}return t.sj=function(n,r,i){if(null==n||null==r||!e.ab.Cc(r))throw e.f.I();if(n.u())return n;var a=n,o=a.F();if(e.R.Bc(o)){a=e.Lh.qj(n,r),n=new e.g,a.s(n),o=e.la.Qd(r,n,!1);for(var s=e.ab.nh(r),u=Math.floor((n.o-s.o)/s.N())*s.N()+s.o;u<n.v;)u>n.o+o&&u<n.v-o&&(a=e.Lh.Ss(a,r,i,!0,u)),u+=s.N()}else{if(197==o)return(n=new e.Ga(a.description)).bd(a,!1),t.sj(n,r,i);if(e.R.Ic(o))return(n=new e.Oa(a.description)).$b(a,!0),t.sj(n,r,i)}return t.Jv(a,r)},t.Jv=function(n,r){if(null==n||null==r||!e.ab.Cc(r))throw e.f.I();if(n.u())return n;var i=n.F();return 197==i?(i=new e.Ga(n.description)).bd(n,!1):e.R.Ic(i)?(i=new e.Oa(n.description)).$b(n,!0):i=n,(i=e.Lh.qj(i,r)).u()?i:1==e.je.Fb(r)?e.Lh.vm(i,r,0,i!=n,0):t.ZR(i,r,i!=n)},t.ZR=function(t,n,r){if(!e.ab.Cc(n))throw e.f.I();if(t.u())return t;var i=e.ab.Sd(n),a=-180*i;return i*=360,2==e.je.Fb(n)&&(i=(a=e.ab.nh(n)).v,i-=a=a.o),e.Lh.aq(t,a,i,n,r,0,!0)},t}()}(J||(J={})),function(e){e.bM=function(){function t(){}return t.kM=function(e,t){var n=Math.abs(e%t);return isNaN(n)||n==e||n<=Math.abs(t)/2?n:0>e?-1*(n-t):0<e?n-t:0*(n-t)},t.J=function(e){return 0>e?-e:e},t.ub=function(e,n){return 0<=n?t.J(e):-t.J(e)},t.V=function(e,n){return e==n||t.J(e-n)<=t.qD*(1+(t.J(e)+t.J(n))/2)},t.qd=function(e){return 0==e||t.J(e)<=t.qD},t.ow=function(e){return e=t.kM(e,t.py),t.J(e)<=t.Jn?e:0>e?e+t.py:e-t.py},t.EA=function(e,n){e.j=t.ow(e.j),n.j=t.ow(n.j),t.J(n.j)>t.Ju&&(e.j=t.ow(e.j+t.Jn),n.j=t.ub(t.Jn,n.j)-n.j)},t.Hg=function(e,n){var r=(n=(1-(n=Math.sqrt(1-n)))/(1+n))*n;return e/(1+n)*(1+r*(.25+r*(.015625+1/256*r)))*t.Ju},t.nS=function(n,r,i,a,o){var s,u,c,l=0,h=u=0,f=0,p=0,d=0,v=0,y=0,b=new e.da,g=new e.da;if(null!=o)if(b.j=n,g.j=r,t.EA(b,g),n=b.j,r=g.j,b.j=i,g.j=a,t.EA(b,g),a=g.j,i=t.ow((i=b.j)-n),t.V(r,a)&&(t.qd(i)||t.V(t.J(r),t.Ju)))null!=o&&(o.j=0);else{if(t.V(r,-a)){if(t.V(t.J(r),t.Ju))return void(null!=o&&(o.j=2*t.Hg(6378137,.0066943799901413165)));if(t.V(t.J(i),t.Jn))return void(null!=o&&(o.j=2*t.Hg(6378137,.0066943799901413165)))}if(t.qd(.0066943799901413165))p=Math.cos(r),d=Math.cos(a),null!=o&&(l=Math.sin((a-r)/2),u=Math.sin(i/2),y=2*Math.asin(Math.sqrt(l*l+p*d*u*u)),o.j=6378137*y);else{n=1-(b=1-Math.sqrt(.9933056200098587)),g=Math.atan(n*Math.tan(r)),r=Math.sin(g),g=Math.cos(g);var m=Math.atan(n*Math.tan(a));a=Math.sin(m),m=Math.cos(m);var w=s=i,O=0,j=1,_=i;for(c=!0;1==c;){O+=1,1==j&&(l=m*(v=Math.sin(_)),y=g*a-r*m*(u=Math.cos(_)),l=Math.sqrt(l*l+y*y),u=r*a+g*m*u,y=Math.atan2(l,u),f=1-(h=1e-15>t.J(l)?g*m*v/t.ub(1e-15,l):g*m*v/l)*h,d=(p=1e-15>t.J(f)?u-r*a/t.ub(1e-15,f)*2:u-r*a/f*2)*p,v=((-3*f+4)*b+4)*f*b/16);var x=(1-v)*b*(y+v*l*(p+u*v*(2*d-1)));1==j?1e-14>t.J((_=i+x*h)-w)?c=!1:t.J(_)>t.Jn?(j=2,_=t.Jn,0>i&&(_=-_),h=0,f=1,s=w=2,y=t.Jn-t.J(Math.atan(r/g)+Math.atan(a/m)),l=Math.sin(y),u=Math.cos(y),v=((-3*f+4)*b+4)*f*b/16,1e-14>t.J(h-s)?c=!1:d=(p=1e-15>t.J(f)?u-r*a/t.ub(1e-15,f)*2:u-r*a/f*2)*p):(0>(_-w)*(w-s)&&5<O&&(_=(2*_+3*w+s)/6),s=w,w=_):(0>((h=(_-i)/x)-w)*(w-s)&&5<O&&(h=(2*h+3*w+s)/6),s=w,w=h,f=1-h*h,v=h*l/(g*m),u=-Math.sqrt(t.J(1-v*v)),_=Math.atan2(v,u),l=m*v,y=g*a-r*m*u,l=Math.sqrt(l*l+y*y),u=r*a+g*m*u,y=Math.atan2(l,u),v=((-3*f+4)*b+4)*f*b/16,1e-14>t.J(h-s)?c=!1:d=(p=1e-15>t.J(f)?u-r*a/t.ub(1e-15,f)*2:u-r*a/f*2)*p)}null!=o&&(f=(h=((h=Math.sqrt(1+(1/(n*n)-1)*f))-1)/(h+1))*(1-.375*h*h),o.j=(1+h*h/4)/(1-h)*n*6378137*(y-f*l*(p+f/4*(u*(2*d-1)-f/6*p*(4*l*l-3)*(4*d-3)))))}}},t.Jn=3.141592653589793,t.Ju=1.5707963267948966,t.py=6.283185307179586,t.qD=3552713678800501e-30,t}()}(J||(J={})),function(e){var t=function(e){this.He=e,this.Rk=this.He.getCode(),0>this.Rk&&(this.Rk=0)};e.j_=t;var n=function(){function n(e){void 0===e&&(e=null),this.Gj=null,this.no=!1,null!==e&&(this.Gj=new t(e))}return n.prototype.xc=function(){return null!=this.Gj?this.Gj.Rk:0},n.prototype.Cf=function(){var e=new n;return this.copyTo(e),e},n.prototype.copyTo=function(e){e.Gj=this.Gj,e.no=this.no},n.prototype.Rv=function(){var e=this.Cf();return e.Xs(),e},n.prototype.Xs=function(){this.no=!this.no},n.prototype.Bm=function(){return null!=this.Gj?this.Gj.He:null},n.prototype.PK=function(n){if(0>=n)throw e.f.I();if(n!=this.xc()){if(null==(n=e.zf.geogtran(n)))throw e.f.I("Geogtran not found.");this.Gj=new t(n)}},n.prototype.jA=function(){return null==this.Gj?null:this.Gj.He.toString()},n.prototype.XY=function(n){if(null==n)throw e.f.I();var r=null;try{r=e.zf.fromString(e.Pc.PE_TYPE_GEOGTRAN,n)}catch(i){throw e.f.I()}this.Gj=new t(r)},n.prototype.Ib=function(e){return e==this||!(!(e instanceof n)||(0>=this.xc()||this.xc()!=e.xc())&&!this.Bm().isEqual(e.Bm()))&&this.no==e.no},n.prototype.toString=function(){var e="GeographicTransformation: "+this.jA();return 200<e.length?e.substring(0,197)+"... ("+e.length.toString()+" characters)":e},n.create=function(e,t){var r=new n;return r.PK(e),t&&r.Xs(),r},n.LF=function(e,t){var r=new n;return r.XY(e),t&&r.Xs(),r},n}();e.Hn=n}(J||(J={})),function(e){var t=function(){function e(){}return e.construct=function(t,n,r,i){var a=new e;return a.Um=t,a.Vm=n,a.nI=r,a.oI=i,a},e.ls=function(e,t){return e.Um==t.Um?e.Vm==t.Vm?0:e.Vm<t.Vm?-1:1:e.Um<t.Um?-1:1},e}(),n=function(){function n(){this.pI=[],this.cB=[],this.LH=this.RA=this.KH=!1,this.Jp()}return n.bo=function(){return null==n.oL&&(n.oL=new n),n.oL},n.d0=function(){return n.bo().RA},n.e0=function(){return n.bo().LH},n.l_=function(e,t){if(e==t)return null;var r=n.bo();if(r.KH){var i=n.Fy(r.cB,e,t);return null!=i?i:null}return null!=(i=n.Fy(r.cB,e,t))?i:n.Fy(r.pI,e,t)},n.CQ=function(t,n,r,i,a){var o=e.hy.create();if(0<t)try{var s=e.Hn.create(t,n);if(0==s.xc())return null;if(o.add(s),0<r){var u=e.Hn.create(r,i);if(0==u.xc())return null;o.add(u)}a&&(o=o.Rv())}catch(c){o=null}return o},n.Fy=function(e,r,i){if(r==i||0==e.length)return null;for(var a=t.construct(r,i,0,0),o=!1,s=!1,u=0,c=0,l=-1,h=0;h<e.length;h++)if(0===t.ls(a,e[h])){l=h;break}if(0>l||e[l].Um!=a.Um||e[l].Vm!=a.Vm){for(a=t.construct(i,r,0,0),r=-1,h=0;h<e.length;h++)if(0===t.ls(a,e[h])){r=h;break}0<=r&&e[r].Um==a.Um&&e[r].Vm==a.Vm&&(u=e[r].nI,c=e[r].oI,s=o=!0)}else u=e[l].nI,c=e[l].oI,o=!1,s=!0;return s?(0==u&&(u=c,c=0),a=e=!1,0>u&&(u=-u,e=!0),0>c&&(c=-c,a=!0),n.CQ(u,e,c,a,o)):null},n.prototype.Jp=function(){this.TD(this.pI)&&(this.RA=!0),this.TD(this.cB)&&(this.LH=!0),this.KH=!this.RA},n.prototype.TD=function(e){try{var n=[];n=n.sort(t.ls);for(var r=0;r<n.length;r++)e.push(n[r])}catch(i){}return!0},n.y_=function(){return null},n}();e.i_=n}(J||(J={})),function(e){var t=function(){function e(){}return e.prototype.Ky=function(e){this.oi=e},e.prototype.jE=function(e){this.Hb=e},e.prototype.kE=function(e){this.To=e},e.mF=function(e){return!(e.u()||1607!=e.F()&&1736!=e.F())},e.kF=function(e){return!(e.u()||1607!=e.F()&&1736!=e.F()||20>e.D())},e.lF=function(e){return!(e.u()||1607!=e.F()&&1736!=e.F()||20>e.D())},e}();e.Yk=t}(J||(J={})),function(e){e.bc=function(){function t(){}return t.lV=function(t){var n=new e.Ga;return n.Zx(t.Ms(),t.Os()),n.Cj(t.Ms(),t.Ns()),n.Cj(t.Ls(),t.Ns()),n.Cj(t.Ls(),t.Os()),n},t.$g=function(t,n){return null===t?null:e.Rr.local().U(t,n,null)},t.SZ=function(t,n){var r=e.Jh.local();return t=new e.$c(t),r.U(t,n,null).next()},t.tm=function(t,n,r){return e.Cp.local().U(t,n,r,null)},t.tp=function(t,n,r){return e.oy.local().U(t,n,r,null)},t.AZ=function(t,n,r){var i=e.oy.local();for(t=new e.$c(t),n=new e.$c(n),r=i.U(t,n,r,null),i=[];null!=(n=r.next());)i.push(n);return i},t.Ib=function(t,n,r){return e.kj.local().U(3,t,n,r,null)},t.dR=function(t,n,r){return e.kj.local().U(4,t,n,r,null)},t.kU=function(t,n,r){var i=e.ak.local();for(t=new e.$c(t),n=new e.$c(n),r=i.U(t,n,r,null),i=[];null!=(n=r.next());)i.push(n);return i},t.aR=function(t,n,r){var i=e.Cp.local();for(t=new e.$c(t),n=new e.$c(n),r=i.U(t,n,r,null),i=[];null!=(n=r.next());)i.push(n);return i},t.Ia=function(t,n,r){return e.ak.local().U(t,n,r,null)},t.XZ=function(t,n,r){return e.kj.local().U(2,t,n,r,null)},t.contains=function(t,n,r){return e.kj.local().U(1,t,n,r,null)},t.MQ=function(t,n,r){return e.kj.local().U(16,t,n,r,null)},t.touches=function(t,n,r){return e.kj.local().U(8,t,n,r,null)},t.WV=function(t,n,r){return e.kj.local().U(32,t,n,r,null)},t.mU=function(t,n,r){return e.kj.local().U(1073741824,t,n,r,null)},t.hC=function(t,n,r,i){return e.IM.local().U(t,n,r,i,null)},t.vb=function(t,n,r,i){var a=null;if(null!=r){if(a=r.Ld(),null!=i&&a.xc()!=i.xc()&&a.od!=i.od)throw e.f.al()}else if(null!=i)throw e.f.I();return t=e.AM.local().U(t,n,null),null!==a&&null!==i&&(t=e.Uc.Rh(t,a,i)),t},t.clip=function(t,n,r){return e.uM.local().U(t,e.g.construct(n.Ms(),n.Os(),n.Ls(),n.Ns()),r,null)},t.jl=function(t,n,r){if(null==t||null==n)return null;for(t=e.wM.local().U(!0,t,n,r,null),n=[];null!=(r=t.next());)r.u()||n.push(r);return n.slice(0)},t.XO=function(n,r,i,a,o,s,u,c){if(!0===o)return t.YO(n,r,i,a,s,u,c);if(o=i,null!=r){if(u=r.Ld(),null!=a&&u.xc()!=a.xc()){if(u.od!=a.od)throw e.f.al();e.Uc.IF(i,i.length,a,u,o=[])}}else if(null!=a)throw e.f.I();if(i=e.hD.local(),s){for(n=new e.$c(n),r=i.U(n,r,o,s,null),n=[];null!=(s=r.next());)n.push(s);s=n.slice(0)}else for(s=[],a=0;a<n.length;a++)s[a]=i.U(n[a],r,o[a],null);return s},t.YO=function(t,n,r,i,a,o,s){if(null===n)throw e.f.I();if(null==i&&(i=4326!==n.xc()?n.Ld():e.Uc.hh(9001)),0!==i.od)throw e.f.I();if(e.Uc.IF(r,r.length,i,e.Uc.hh(9001),r),i=e.mD.local(),a){for(t=new e.$c(t),n=i.U(t,n,o,r,s,!1,a,null),r=[];null!=(o=n.next());)r.push(o);a=r.slice(0)}else{a=[];for(var u=0;u<t.length;u++)a[u]=i.U(t[u],n,o,r[u],s,!1,null)}return a},t.buffer=function(t,n,r,i,a,o,s){var u=r;if(!1===a){if(null!=n){if(a=n.Ld(),null!=i&&a.xc()!=i.xc()){if(a.od!=i.od)throw e.f.al();u=e.Uc.Rh(r,i,a)}}else if(null!=i)throw e.f.I();t=e.hD.local().U(t,n,u,null)}else{if(null===n)throw e.f.I();if(null==i&&(i=4326!==n.xc()?n.Ld():e.Uc.hh(9001)),0!==i.od)throw e.f.I();u=e.Uc.Rh(r,i,e.Uc.hh(9001)),t=e.mD.local().U(t,n,o,u,s,!1,null)}return t},t.UV=function(t,n,r,i,a,o,s){if(null!=n){var u=n.Ld();if(null!=s&&u.xc()!=s.xc()){if(u.od!=s.od)throw e.f.al();r=e.Uc.Rh(r,s,u)}}else if(null!=s)throw e.f.I();for(t=new e.$c(t),n=e.pD.local().U(t,n,r,i,a,o,null),r=[];null!=(i=n.next());)r.push(i);return r.slice(0)},t.offset=function(t,n,r,i,a,o,s){if(null!=n){var u=n.Ld();if(null!=s&&u.xc()!=s.xc()){if(u.od!=s.od)throw e.f.al();r=e.Uc.Rh(r,s,u)}}else if(null!=s)throw e.f.I();return e.pD.local().U(t,n,r,i,a,o,null)},t.sQ=function(t){return e.jD.local().U(t,null)},t.tQ=function(t,n){var r=e.jD.local();for(t=new e.$c(t),n=r.U(t,n,null),r=[];null!=(t=n.next());)r.push(t);return r},t.Xz=function(t,n,r){return e.my.local().Xz(t,n,r)},t.Yz=function(t,n){return e.my.local().Yz(t,n)},t.Zz=function(t,n,r,i){return e.my.local().Zz(t,n,r,i)},t.MC=function(t,n){return e.jm.local().U(t,n,!1,null)},t.AU=function(t,n){return e.jm.local().zq(t,n,null)},t.bS=function(t,n,r,i,a){var o=e.lD.local();if(null!=n){if(n=n.Ld(),null!=a&&n.xc()!=a.xc()){if(n.od!=a.od)throw e.f.al();r=e.Uc.Rh(r,a,n)}}else if(null!=a)throw e.f.I();return o.U(t,r,i,null)},t.rs=function(t,n,r,i){var a=e.im.local();if(null!=n){if(n=n.Ld(),null!=i&&n.xc()!=i.xc()){if(n.od!=i.od)throw e.f.al();r=e.Uc.Rh(r,i,n)}}else if(null!=i)throw e.f.I();return a.U(t,r,null)},t.Bz=function(t,n,r,i,a){void 0===a&&(a=0);var o=e.CM.local();if(4==a)throw e.f.Me();if(0!==a)throw e.f.Me();if(null!==i){if(0!==i.od)throw e.f.I("Unit must be a linear unit type");r=e.Uc.Rh(r,i,e.Uc.hh(9001))}return o.U(t,r,n,a,null)},t.hS=function(n,r,i,a){if(null===n)return 0;if(4==a)throw e.f.Me();if(0!==a)throw e.f.Me();if(197==n.F())n=t.lV(n);else if(1736!=n.F())return 0;if(a=e.ab.hc(r),n=e.ab.$g(n,r,a),n=e.cM.iS([n])[0],null!==i){if(2!==i.od)throw e.f.I("Unit must be a area unit type");n=e.Uc.Rh(n,e.Uc.hh(109404),i)}return n},t.lS=function(t,n,r,i){if(t=e.EM.local().U(t,n,i,null),null!==r){if(0!==r.od)throw e.f.I("Unit must be a linear unit type");t=e.Uc.Rh(t,e.Uc.hh(9001),r)}return t},t.bW=function(t,n,r){if(null===t)return 0;var i=null;if(null!=n){if(0==(i=n.Ld()).od&&null==(i=e.Uc.MG(i))&&null!==r)throw e.f.I();if(null!=r&&i.xc()!=r.xc()&&i.od!=r.od)throw e.f.al()}else if(null!=r)throw e.f.I();return 1736==t.F()||197==t.F()?(t=t.Pe(),null!==r?e.Uc.Rh(t,i,r):t):0},t.cW=function(t,n,r){if(null===t||t.u()||1>t.pb())return 0;var i=null;if(null!=n){if(i=n.Ld(),null!=r&&i.xc()!=r.xc()&&i.od!=r.od)throw e.f.al()}else if(null!=r)throw e.f.I();1736==t.F()||197==t.F()?n=t.sg():e.R.Ic(t.F())?(n=new e.Oa(t.description)).$b(t,!0):n=t,t=0,n=n.Ba();for(var a=new e.b,o=new e.b;n.Ta();)for(;n.Aa();){var s=n.aa();s.qq(a),s.vs(o),t+=e.b.vb(a,o)}return null!==i&&null!==r&&(t=e.Uc.Rh(t,i,r)),t},t.X_=function(t,n){return e.je.kS(t,n)},t.pQ=function(e){return void 0!==e.points?t.HT(e,void 0!==e.hasZ&&e.hasZ,void 0!==e.hasM&&e.hasM):void 0!==e.rings?t.YG(e.rings,void 0!==e.hasZ&&e.hasZ,void 0!==e.hasM&&e.hasM,"P"):void 0!==e.paths?t.YG(e.paths,void 0!==e.hasZ&&e.hasZ,void 0!==e.hasM&&e.hasM,"L"):void 0!==e.x?t.IT(e):void 0!==e.xmin?t.GT(e):null},t.IT=function(t){if(null==t.x||"NaN"==t.x)return new e.Ra;var n=new e.Ra(t.x,t.y);return null!=t.z&&n.$Y(t.z),null!=t.m&&n.KY(t.m),n},t.GT=function(t){if(null==t.xmin||"NaN"==t.xmin)return new e.Ih;var n=new e.Ih(t.xmin,t.ymin,t.xmax,t.ymax);return null!=t.zmin&&n.setInterval(1,0,t.zmin,t.zmax),null!=t.mmin&&n.setInterval(2,0,t.mmin,t.mmax),n},t.HT=function(t,n,r){var i=0,a=new e.Hd,o=3*t.points.length;0!=o%2&&o++,2>o&&(o=2);var s=e.L.truncate(3*t.points.length/2);4>s?s=4:16>s&&(s=16),o=e.Xc.Wn(o,0);var u=e.Xc.Wn(s);s=e.Xc.Wn(s);for(var c=0;c<t.points.length;c++)o.write(2*c,t.points[c][0]),o.write(2*c+1,t.points[c][1]),u.write(c,n||r?t.points[c][2]:NaN),s.write(c,r&&n?t.points[c][3]:NaN),i++;return 0!=i&&(a.resize(i),a.yn(0,o)),n&&(a.le(1),a.yn(1,u)),r&&(a.le(2),a.yn(2,0==n?u:s)),a.Oc(16777215),a},t.YG=function(t,n,r,i){var a=0,o=2;if("P"==i){var s=new e.Ga;a=1,o=3}else s=new e.Oa;for(var u=e.Xc.Sh(0),c=e.Xc.ns(0),l=0,h=0,f=[],p=[],d=0;d<t.length;d++){var v=t[d].length;if(f[d]=!1,"P"===i&&t[d][0][0]===t[d][t[d].length-1][0]&&t[d][0][1]===t[d][t[d].length-1][1]){var y=0==r||t[d][0][3]===t[d][t[d].length-1][3]||void 0===t[d][0][3]&&void 0===t[d][t[d].length-1][3];(0==n||t[d][0][2]===t[d][t[d].length-1][2]||void 0===t[d][0][2]&&void 0===t[d][t[d].length-1][2])&&y&&(f[d]=!0,--v)}v>=o?(p[d]=!1,h+=1,u.add(l),c.add(a),l+=v):p[d]=!0}for(0!=(i=3*l)%2&&i++,2>i&&(i=2),4>(d=e.L.truncate(3*l/2))?d=4:16>d&&(d=16),i=e.Xc.Wn(i,0),a=e.Xc.Wn(d),o=e.Xc.Wn(d),d=v=0;d<t.length;d++)if(!1===p[d])for(y=0;y<t[d].length;y++){var b=!1;y===t[d].length-1&&!0===f[d]&&(b=!0),b||(i.write(2*v,t[d][y][0]),i.write(2*v+1,t[d][y][1]),a.write(v,n||r?t[d][y][2]:NaN),o.write(v,r&&n?t[d][y][3]:NaN),v++)}return 0!=l&&(t=s,u.resize(h),c.resize(h),0<l&&(u.add(l),c.add(0)),t.yn(0,i),t.TK(c),t.UK(u)),n&&(s.le(1),s.yn(1,a)),r&&(s.le(2),s.yn(2,0==n?a:o)),s.Oc(16777215),s},t}()}(J||(J={})),function(e){e.jy=function(){function e(){}return e.vr=function(e){var t,n=0,r=e.length,i=e[0];for(t=0;t<r-1;t++){var a=e[t+1];n+=(a[0]-i[0])*(a[1]+i[1]),i=a}return 0<=n},e.rotate=function(t,n,r){n=n*Math.PI/180;var i=Math.cos(n),a=Math.sin(n);if(void 0!==t.paths){n={paths:[]};for(var o=0;o<t.paths.length;o++){for(var s=t.paths[o],u=[],c=0;c<s.length;c++){var l=s[c].slice(0);u.push(l);var h=i*(s[c][0]-r.x)-a*(s[c][1]-r.y)+r.x,f=a*(s[c][0]-r.x)+i*(s[c][1]-r.y)+r.y;l[0]=h,l[1]=f}n.paths.push(u)}return n}if(void 0!==t.rings){for(n={rings:[]},o=0;o<t.rings.length;o++){u=[];var p=e.vr(s=t.rings[o]);for(c=0;c<s.length;c++)l=s[c].slice(0),u.push(l),f=a*(s[c][0]-r.x)+i*(s[c][1]-r.y)+r.y,l[0]=h=i*(s[c][0]-r.x)-a*(s[c][1]-r.y)+r.x,l[1]=f;e.vr(u)!==p&&u.reverse(),n.rings.push(u)}return n}if(void 0!==t.x)return n={x:i*(t.x-r.x)-a*(t.y-r.y)+r.x,y:a*(t.x-r.x)+i*(t.y-r.y)+r.y},void 0!==t.z&&(n.z=t.z),void 0!==t.m&&(n.m=t.m),n;if(void 0!==t.points){for(n={points:[]},t=t.points,c=0;c<t.length;c++)(o=t[c].slice(0))[0]=i*(t[c][0]-r.x)-a*(t[c][1]-r.y)+r.x,o[1]=a*(t[c][0]-r.x)+i*(t[c][1]-r.y)+r.y,n.points.push(o);return n}return null},e.VR=function(t,n){if(void 0!==t.paths){for(var r={paths:[]},i=0;i<t.paths.length;i++){for(var a=t.paths[i],o=[],s=0;s<a.length;s++){var u=a[s].slice(0);o.push(u);var c=n.x-a[s][0];u[0]=a[s][0]+2*c}r.paths.push(o)}return r}if(void 0!==t.rings){for(r={rings:[]},i=0;i<t.rings.length;i++){var l=e.vr(a=t.rings[i]);for(o=[],s=0;s<a.length;s++)u=a[s].slice(0),o.push(u),u[0]=a[s][0]+2*(c=n.x-a[s][0]);e.vr(o)!==l&&o.reverse(),r.rings.push(o)}return r}if(void 0!==t.x)return r={x:t.x+2*(c=n.x-t.x),y:t.y},void 0!==t.z&&(r.z=t.z),void 0!==t.m&&(r.m=t.m),r;if(void 0!==t.points){for(r={points:[]},t=t.points,s=0;s<t.length;s++)(i=t[s].slice(0))[0]+=2*(c=n.x-i[0]),r.points.push(i);return r}return void 0!==t.xmin?(r={o:t.xmin,A:t.ymin,v:t.xmax,B:t.ymax},void 0!==t.zmin&&(r.zmin=t.zmin,r.zmax=t.zmax),void 0!==t.mmin&&(r.mmin=t.mmin,r.mmax=t.mmax),r.xmax=t.xmin+2*(c=n.x-t.xmin),r.xmin=t.xmax+2*(c=n.x-t.xmax),r):null},e.WR=function(t,n){if(void 0!==t.paths){for(var r={paths:[]},i=0;i<t.paths.length;i++){for(var a=t.paths[i],o=[],s=0;s<a.length;s++){var u=a[s].slice(0);o.push(u);var c=n.y-a[s][1];u[1]=a[s][1]+2*c}r.paths.push(o)}return r}if(void 0!==t.rings){for(r={rings:[]},i=0;i<t.rings.length;i++){var l=e.vr(a=t.rings[i]);for(o=[],s=0;s<a.length;s++)u=a[s].slice(0),o.push(u),u[1]=a[s][1]+2*(c=n.y-a[s][1]);e.vr(o)!==l&&o.reverse(),r.rings.push(o)}return r}if(void 0!==t.x)return r={y:t.y+2*(c=n.y-t.y),x:t.x},void 0!==t.z&&(r.z=t.z),void 0!==t.m&&(r.m=t.m),r;if(void 0!==t.points){for(r={points:[]},t=t.points,s=0;s<t.length;s++)(i=t[s].slice(0))[1]+=2*(c=n.y-i[1]),r.points.push(i);return r}return void 0!==t.xmin?(r={o:t.xmin,A:t.ymin,v:t.xmax,B:t.ymax},void 0!==t.zmin&&(r.zmin=t.zmin,r.zmax=t.zmax),void 0!==t.mmin&&(r.mmin=t.mmin,r.mmax=t.mmax),r.ymax=t.ymin+2*(c=n.y-t.ymin),r.ymin=t.ymax+2*(c=n.y-t.ymax),r):null},e}()}(J||(J={})),function(e){e.hM=function(){function t(){}return t.Pg=function(t,n){switch(null==n&&(n=e.ke.ug()),t){case 33:return new e.Ra(n);case 322:return new e.zb(n);case 197:return new e.Ih(n);case 550:return new e.Hd(n);case 1607:return new e.Oa(n);case 1736:return new e.Ga(n);default:throw e.f.Y("invalid argument.")}},t}()}(J||(J={})),function(e){var t=function(){function t(t,n){this.Ye=e.ha.Af(t,-1),this.ta=new e.Iu,this.Fl=n}return t.prototype.fY=function(e){this.ta.lu(Math.min(this.Ye.size,e)),this.ta.vn(e)},t.prototype.addElement=function(t,n){if(void 0===n)return this.oO(t);n=e.L.truncate(n%this.Ye.size);var r=this.Ye.get(n);return-1==r&&(r=this.ta.Th(),this.Ye.set(n,r)),this.ta.addElement(r,t)},t.prototype.oO=function(t){var n=this.Fl.Tz(t);n=e.L.truncate(n%this.Ye.size);var r=this.Ye.get(n);return-1==r&&(r=this.ta.Th(),this.Ye.set(n,r)),this.ta.addElement(r,t)},t.prototype.jd=function(t,n){if(void 0===n)this.VQ(t);else{n=e.L.truncate(n%this.Ye.size);var r=this.Ye.get(n);if(-1==r)throw e.f.I();for(var i=this.ta.sc(r),a=-1;-1!=i;){var o=this.ta.hb(i);this.ta.ga(i)==t?(this.ta.jd(r,a,i),-1==this.ta.sc(r)&&(this.ta.kh(r),this.Ye.set(n,-1))):a=i,i=o}}},t.prototype.VQ=function(t){var n=this.Fl.Tz(t);n=e.L.truncate(n%this.Ye.size);var r=this.Ye.get(n);if(-1==r)throw e.f.I();for(var i=this.ta.sc(r),a=-1;-1!=i;){var o=this.ta.hb(i);this.ta.ga(i)==t?(this.ta.jd(r,a,i),-1==this.ta.sc(r)&&(this.ta.kh(r),this.Ye.set(n,-1))):a=i,i=o}},t.prototype.ES=function(t){return t=e.L.truncate(t%this.Ye.size),-1==(t=this.Ye.get(t))?-1:this.ta.sc(t)},t.prototype.US=function(e){return this.ta.hb(e)},t.prototype.zd=function(t){var n=this.Fl.Tz(this.ga(t));n=e.L.truncate(n%this.Ye.size);var r=this.Ye.get(n);if(-1==r)throw e.f.I();for(var i=this.ta.sc(r),a=-1;-1!=i;){if(i==t)return this.ta.jd(r,a,i),void(-1==this.ta.sc(r)&&(this.ta.kh(r),this.Ye.set(n,-1)));a=i,i=this.ta.hb(i)}throw e.f.I()},t.prototype.ga=function(e){return this.ta.ga(e)},t.prototype.clear=function(){this.Ye=e.ha.Af(this.Ye.size,-1),this.ta.clear()},t.prototype.size=function(){return this.ta.FG()},t}();e.nM=t}(J||(J={})),function(e){var t=function(){function t(){this.Ri=new e.ad(3),this.ta=new e.ad(6),this.NU=!1,this.re=-1}return t.prototype.ml=function(e){this.Ri.jd(e)},t.prototype.vx=function(){return this.Ri.Ke()},t.prototype.Kv=function(e){this.ta.jd(e)},t.prototype.KB=function(){return this.ta.Ke()},t.prototype.EC=function(e,t){this.Ri.P(e,1,t)},t.prototype.Mx=function(e,t){this.Ri.P(e,2,t)},t.prototype.JY=function(e,t){this.Ri.P(e,3,t)},t.prototype.CC=function(e,t){this.ta.P(e,4,t)},t.prototype.MY=function(e,t){this.ta.P(e,3,t)},t.prototype.XK=function(e,t){this.ta.P(e,2,t)},t.prototype.Th=function(e){var t=this.KB();return this.ta.P(t,3,this.re),this.ta.P(t,4,0),this.ta.P(t,5,e),-1!=this.re&&this.XK(this.re,t),this.re=t},t.prototype.kh=function(e){this.vF(e);var t=this.ta.S(e,2),n=this.ta.S(e,3);return-1!=t?this.MY(t,n):this.re=n,-1!=n&&this.XK(n,t),this.Kv(e),n},t.prototype.lu=function(e){this.ta.Le(e)},t.prototype.BG=function(e){return this.ta.S(e,5)},t.prototype.IY=function(e,t){this.ta.P(e,5,t)},t.prototype.addElement=function(e,t){return this.OT(e,t)},t.prototype.OT=function(e,t){var n=this.vx();this.Mx(n,-1),-1==this.ta.S(e,0)&&this.ta.P(e,0,n);var r=this.ta.S(e,1);return this.EC(n,r),-1!=r&&this.Mx(r,n),this.ta.P(e,1,n),this.setData(n,t),this.CC(e,this.Hs(e)+1),this.NU&&this.JY(n,e),n},t.prototype.jd=function(e,t){var n=this.Be(t),r=this.hb(t);return-1!=n?this.Mx(n,r):this.ta.P(e,0,r),-1!=r?this.EC(r,n):this.ta.P(e,1,n),this.ml(t),this.CC(e,this.Hs(e)-1),r},t.prototype.vn=function(e){this.Ri.Le(e)},t.prototype.getData=function(e){return this.Ri.S(e,0)},t.prototype.setData=function(e,t){this.Ri.P(e,0,t)},t.prototype.hb=function(e){return this.Ri.S(e,2)},t.prototype.Be=function(e){return this.Ri.S(e,1)},t.prototype.sc=function(e){return this.ta.S(e,0)},t.prototype.Gc=function(e){return this.ta.S(e,1)},t.prototype.clear=function(){for(var e=this.re;-1!=e;)e=this.kh(e)},t.prototype.vF=function(e){for(var t=this.Gc(e);-1!=t;){var n=t;t=this.Be(n),this.ml(n)}this.ta.P(e,0,-1),this.ta.P(e,1,-1),this.CC(e,0)},t.prototype.u=function(){return 0==this.Ri.size},t.prototype.FG=function(){return this.Ri.size},t.prototype.Hs=function(e){return this.ta.S(e,4)},t.prototype.$z=function(e){return this.ta.S(e,3)},t}();e.Ap=t}(J||(J={})),function(e){var t=function(){function t(t){void 0===t?(this.Bg=new e.ad(2),this.ta=new e.ad(4),this.re=-1,this.xw=!0):(this.Bg=new e.ad(2),this.ta=new e.ad(t?4:2),this.re=-1,this.xw=t)}return t.prototype.ml=function(e){this.Bg.jd(e)},t.prototype.vx=function(){return this.Bg.Ke()},t.prototype.Kv=function(e){this.ta.jd(e)},t.prototype.KB=function(){return this.ta.Ke()},t.prototype.Th=function(){var e=this.KB();return this.xw&&(this.ta.P(e,3,this.re),-1!=this.re&&this.ta.P(this.re,2,e),this.re=e),e},t.prototype.kh=function(e){for(var t=this.sc(e);-1!=t;){var n=t;t=this.hb(t),this.ml(n)}this.xw&&(t=this.ta.S(e,2),n=this.ta.S(e,3),-1!=t?this.ta.P(t,3,n):this.re=n,-1!=n&&this.ta.P(n,2,t)),this.Kv(e)},t.prototype.lu=function(e){this.ta.Le(e)},t.prototype.addElement=function(e,t){var n=this.ta.S(e,1),r=this.vx();return-1!=n?this.Bg.P(n,1,r):this.ta.P(e,0,r),this.ta.P(e,1,r),this.Bg.P(r,0,t),r},t.prototype.vn=function(e){this.Bg.Le(e)},t.prototype.jd=function(e,t,n){-1!=t?(this.Bg.P(t,1,this.Bg.S(n,1)),this.ta.S(e,1)==n&&this.ta.P(e,1,t)):(this.ta.P(e,0,this.Bg.S(n,1)),this.ta.S(e,1)==n&&this.ta.P(e,1,-1)),this.ml(n)},t.prototype.lz=function(e,t){var n=this.ta.S(e,1),r=this.ta.S(t,0);-1!=r&&(-1!=n?this.Bg.P(n,1,r):this.ta.P(e,0,r),this.ta.P(e,1,this.ta.S(t,1))),this.xw&&(e=this.ta.S(t,2),n=this.ta.S(t,3),-1!=e?this.ta.P(e,3,n):this.re=n,-1!=n&&this.ta.P(n,2,e)),this.Kv(t)},t.prototype.ga=function(e){return this.Bg.S(e,0)},t.prototype.Tj=function(e,t){this.Bg.P(e,0,t)},t.prototype.hb=function(e){return this.Bg.S(e,1)},t.prototype.sc=function(e){return this.ta.S(e,0)},t.prototype.ao=function(e){return this.ga(this.sc(e))},t.prototype.clear=function(){this.Bg.rj(!0),this.ta.rj(!0),this.re=-1},t.prototype.u=function(){return 0==this.Bg.size},t.prototype.FG=function(){return this.Bg.size},t.prototype.$z=function(e){return this.ta.S(e,3)},t}();e.Iu=t}(J||(J={})),function(e){e.la=function(){function t(){}return t.uE=function(n,r,i,a,o,s,u){var c=new e.b;c.K(n),(n=new e.b).K(r),o.My(c),o.My(n),r=o.Su(c);var l=o.Su(n);if(0==l&&(l=o.AG()),c.x!=n.x&&(c.y!=n.y||c.y!=o.A&&c.y!=o.B)||l>r!=s){r=o.QD(c),l=o.QD(n);var h=s?1:3;do{var f=o.Ax(r=r+h&3);0!=u&&(a=t.uE(c,f,i,a,o,s,u)),i[a++].ka(f.x,f.y),c=f}while((3&r)!=l);0!=u&&(a=t.uE(c,n,i,a,o,s,u))}else if((o=new e.b).ka(n.x-c.x,n.y-c.y),0!=u&&0<(u=e.L.truncate(o.ZN()/u)))for(o.scale(1/(u+1)),s=0;s<u;s++)c.add(o),i[a++].ka(c.x,c.y);return a},t.Qd=function(e,t,n){return t=t.Mn(),e=null!=e&&void 0!==e.ce?e.ce(0):0,n&&(t*=4,e*=1.1),Math.max(e,t)},t.es=function(e){return 2*Math.sqrt(2)*e},t.CO=function(e){return Math.sqrt(2)*e},t.Ng=function(n,r,i){var a=new e.g;return r.s(a),t.Qd(n,a,i)},t.hF=function(e,t,n){return t=t.Qf(1,0).Mn(),e=null!=e?e.ce(1):0,n&&(t*=4,e*=1.1),Math.max(e,t)},t.Z_=function(t,n){var r=new e.g;return t.Zb(r),r.Nb(n),r},t.Uv=function(t,n){var r=new e.g;return t.Zb(r),t=new e.g,n.Zb(t),r.Nb(t),r},t.i0=function(t,n){var r=t.JS(n),i=t.ua(n),a=t.zc(n),o=t.xa(r);return r==i?(a=t.xa(a-1),r=t.xa(i+1)):r==a-1?(a=t.xa(r-1),r=t.xa(i)):(a=t.xa(r-1),r=t.xa(r+1)),0==(o=e.b.fp(a,o,r))?0<t.rm(n):-1==o},t.iP=function(t){var n=new e.g;if(t.Zb(n),n.u())return null;var r=new e.Fp(n,8),i=-1,a=new e.g,o=!1;do{for(var s=0,u=t.$();s<u;s++){if(t.Sj(s,a),-1==(i=r.fw(s,a,i))){if(o)throw e.f.Y("internal error");t.Tn(n,!1),o=!0,r.reset(n,8);break}o=!1}}while(o);return r},t.$E=function(t){var n=new e.g;t.Zb(n);for(var r=new e.Fp(n,8),i=-1,a=t.Ba(),o=new e.g,s=!1;a.Ta();)for(;a.Aa();){var u=a.aa(),c=a.wb();if(u.s(o),-1==(i=r.fw(c,o,i))){if(s)throw e.f.za();t.Tn(n,!1),s=!0,r.reset(n,8),a.ej();break}}return r},t.pj=function(t,n){var r=new e.g;t.Zb(r);for(var i=new e.Fp(r,8),a=-1,o=new e.g,s=t.Ba(),u=!1;s.Ta();)for(;s.Aa();){var c=s.aa(),l=s.wb();if(c.s(o),o.isIntersecting(n)&&-1==(a=i.fw(l,o,a))){if(u)throw e.f.Y("internal error.");t.Tn(r,!1),u=!0,i.reset(r,8),s.ej();break}}return i},t.B_=function(t){var n=new e.g;t.Zb(n);for(var r=new e.Fp(n,8),i=new e.b,a=new e.g,o=!1,s=0;s<t.D();s++)if(t.w(s,i),a.H(i),-1==r.Gi(s,a)){if(o)throw e.f.za();t.Tn(n,!1),o=!0,r.reset(n,8),s=-1}return r},t.aF=function(t,n){for(var r=new e.Fp(n,8),i=new e.b,a=!1,o=new e.g,s=0;s<t.D();s++)if(t.w(s,i),n.contains(i)&&(o.H(i),-1==r.Gi(s,o))){if(a)throw e.f.za();a=!0,s=new e.g,t.Tn(s,!1),r.reset(s,8),s=-1}return r},t.zS=function(t,n,r){var i=new e.g,a=new e.g;t.Zb(i),n.Zb(a),i.O(r,r),a.O(r,r);var o=new e.g;o.H(i),o.Ia(a),t=t.Ba(),n=n.Ba();var s=new e.fD;s.IC(r);var u=!1;for(s.vL();t.Ta();)for(;t.Aa();)t.aa().s(i),i.isIntersecting(o)&&(u=!0,(r=new e.g).H(i),s.vE(t.wb(),r));if(s.WF(),!u)return null;for(i=!1,s.uL();n.Ta();)for(;n.Aa();)n.aa().s(a),a.isIntersecting(o)&&(i=!0,(r=new e.g).H(a),s.qE(n.wb(),r));return s.VF(),i?s:null},t.AS=function(t,n,r,i,a){var o=t.F(),s=n.F(),u=new e.g,c=new e.g;t.Zb(u),n.Zb(c),u.O(r,r),c.O(r,r);var l=new e.g;l.H(u),l.Ia(c);var h=new e.fD;h.IC(r);var f=!1;h.vL();var p=0;for(r=t.$();p<r;p++)i&&1736==o&&!t.lw(p)||(t.Sj(p,u),u.isIntersecting(l)&&(f=!0,h.vE(p,u)));if(h.WF(),!f)return null;for(t=!1,h.uL(),i=0,r=n.$();i<r;i++)a&&1736==s&&!n.lw(i)||(n.Sj(i,c),c.isIntersecting(l)&&(t=!0,h.qE(i,c)));return h.VF(),t?h:null},t.q0=function(e,t){return 0<e.rk(t)},t.A_=function(t,n){var r=new e.g;t.EX(n,r),r=new e.Fp(r,8);var i=-1,a=new e.g;if((t=t.Ba()).oC(n),t.Ta())for(;t.Aa();){n=t.aa();var o=t.wb();if(n.Zb(a),-1==(i=r.fw(o,a,i)))throw e.f.Y("internal error")}return r},t.zv=function(t,n,r){if(t!=n)for(var i=0;i<r;i++)null==t[i]?t[i]=e.b.gl(n[i]):t[i].K(n[i])},t.nz=function(e,t,n,r){var i=0;for(r+=0;i<r;n++,i++)null==e[i]&&(e[i]=[0,0]),e[i][0]=t[n].x,e[i][1]=t[n].y},t.mz=function(t,n,r,i){var a=n,o=0;for(n=i+n;a<n;o++,a++)null==t[a]?t[a]=e.b.construct(r[o][0],r[o][1]):t[a].ka(r[o][0],r[o][1])},t.uQ=function(t,n,r){if(t!=n)for(var i=0;i<r;i++)null==t[i]?t[i]=new e.Ra(n[i]):n[i].copyTo(t[i])},t.iZ=function(e,t,n,r){var i=r.fa;r=r.ja;for(var a=0;a<t;a+=n){var o=e.read(a);o<i?e.write(a,i):o>r&&e.write(a,r)}},t.hZ=function(e,t,n,r){var i=r.fa;r=r.ja;for(var a=0;a<t;a+=n){var o=e.read(a);o<i?e.write(a,i):o>r&&e.write(a,r)}},t.hL=function(n,r,i){if(n.hasAttribute(i)){var a=n.F();if(e.R.Rg(a)){var o=e.oa.sl(i);a=e.oa.Sa(i);var s=n.D();if(1==o)return n=n.Va(i),void t.iZ(n,s*a,a,r);if(2==o)return n=n.Va(i),void t.hZ(n,s*a,a,r);throw e.f.Y("snap_coordinate not implemented")}if(197==a)a=!1,(s=n.Qf(i,0)).fa<r.fa&&(a=!0,s.fa=r.fa),s.ja>r.ja&&(a=!0,s.ja=r.ja),a&&n.setInterval(i,0,s);else if(33==a)a=!1,(s=n.Rc(i,0))<r.fa&&(a=!0,s=r.fa),s>r.ja&&(a=!0,s=r.ja),a&&n.setAttribute(i,0,s);else{if(!e.R.Ic(a))throw e.f.Y("snap_coordinate not implemented");a=!1,(s=n.Ks(i,0))<r.fa&&(a=!0,s=r.fa),s>r.ja&&(a=!0,s=r.ja),a&&n.Qx(i,0,s),(s=n.us(i,0))<r.fa&&(a=!0,s=r.fa),s>r.ja&&(a=!0,s=r.ja),a&&n.Hx(i,0,s)}}},t.js=function(e,t,n,r,i){var a=0;return null!=t&&(a=t.ce(e),i&&!r||null==t||(a+=1.01*t.dA(e))),r&&(n*=4,a*=1.01),Math.max(a,n)},t.C_=function(n,r,i,a){return r=e.g.sN(r.Ce(),r.lf(),i.Ce(),i.lf()),t.js(0,n,r,a,!1)},t.Yy=function(e,n,r){return t.js(0,e,n.Mn(),r,!1)},t.D_=function(e,n,r){return t.js(1,e,n.Mn(),r,!1)},t.pP=function(n,r){var i=new e.g;return r.s(i),t.Yy(n,i,!0)},t.Zy=function(e,n){return t.js(0,e,n.Mn(),!1,!0)},t.E_=function(e,n,r){return t.js(1,e,n.Mn(),r,!0)},t.pv=function(n,r){var i=new e.g;return r.s(i),t.Zy(n,i)},t.mH=function(t,n,r,i){i*=i;var a=new e.b;if(a.tc(t,n),(t=new e.b).tc(r,n),n=a.En(),r=t.En(),n<=i&&r<=i)return!0;var o=e.Tb.Wx(a.Di(t));return(o<=i*n||o<=i*r)&&0<=a.Vh(t)},t.iL=function(t,n,r,i){for(var a=0;a<n;a++){var o=t[a].y,s=e.L.Yj(o,r,i);s!=o&&(t[a].y=s)}},t}()}(J||(J={})),function(e){var t,n,r=function(){function e(e){this.Xa=e}return e.prototype.compare=function(e,t,n){e=e.ga(n),n=this.Xa.vk(t);var r=this.Xa.vk(e);return n<r?-1:n==r?o.yq(t)&&o.nw(e)?-1:o.yq(e)&&o.nw(t)?1:0:1},e}(),i=function(){function e(e){this.Xa=e}return e.prototype.Lr=function(e,t,n){this.Xa.lZ(n,e,t)},e.prototype.sq=function(e){return this.Xa.vk(e)},e}();(n=t||(t={}))[n.initialize=0]="initialize",n[n.pIn=1]="pIn",n[n.pL=2]="pL",n[n.pR=3]="pR",n[n.pT=4]="pT",n[n.right=5]="right",n[n.left=6]="left",n[n.all=7]="all";var a=function(){function t(){this.Xa=null,this.Wi=new e.uc,this.Yg=new e.ha(0),this.zg=[0,0]}return t.prototype.vi=function(e,t){this.Wi.fa=e.fa-t,this.Wi.ja=e.ja+t,this.Yg.resize(0),this.pe=0,this.zg[0]=0},t.prototype.nC=function(t,n,r){if(t>n)throw e.f.I();this.Wi.fa=t-r,this.Wi.ja=n+r,this.Yg.resize(0),this.pe=0,this.zg[0]=0},t.prototype.wn=function(e,t){this.Wi.fa=e-t,this.Wi.ja=e+t,this.Yg.resize(0),this.pe=0,this.zg[0]=0},t.prototype.next=function(){if(!this.Xa.Eq)throw e.f.Eb();if(0>this.pe)return-1;for(var t=!0;t;)switch(this.zg[this.pe]){case 1:t=this.YV();break;case 2:t=this.ZV();break;case 3:t=this.$V();break;case 4:t=this.aW();break;case 5:t=this.lY();break;case 6:t=this.GU();break;case 7:t=this.EO();break;case 0:t=this.oA();break;default:throw e.f.za()}return-1!=this.Ug?this.hq()>>1:-1},t.J_=function(e,n,r){var i=new t;return i.Xa=e,i.Yg.Db(20),i.vi(n,r),i},t.K_=function(e,n,r){var i=new t;return i.Xa=e,i.Yg.Db(20),i.wn(n,r),i},t.construct=function(e){var n=new t;return n.Xa=e,n.Yg.Db(20),n.pe=-1,n},t.prototype.oA=function(){return this.Ug=this.iI=this.Si=this.Mc=-1,null!=this.Xa.te&&0<this.Xa.te.size?(this.zg[0]=1,this.Si=this.Xa.tf,!0):(this.pe=-1,!1)},t.prototype.YV=function(){if(this.Mc=this.Si,-1==this.Mc)return this.Ug=this.pe=-1,!1;var e=this.Xa.iq(this.Mc);return this.Wi.ja<e?(e=this.Xa.uk(this.Mc),this.Si=this.Xa.vj(this.Mc),-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=6),!0):e<this.Wi.fa?(e=this.Xa.uk(this.Mc),this.Si=this.Xa.tk(this.Mc),-1!=e&&(this.li=this.Xa.Fs(e),this.zg[++this.pe]=5),!0):(this.zg[this.pe]=2,this.iI=this.Mc,e=this.Xa.uk(this.Mc),this.Si=this.Xa.vj(this.Mc),-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7),!0)},t.prototype.ZV=function(){if(this.Mc=this.Si,-1==this.Mc)return this.zg[this.pe]=3,this.Si=this.Xa.tk(this.iI),!0;if(this.Xa.iq(this.Mc)<this.Wi.fa){var e=this.Xa.uk(this.Mc);return this.Si=this.Xa.tk(this.Mc),-1!=e&&(this.li=this.Xa.Fs(e),this.zg[++this.pe]=5),!0}return e=this.Xa.uk(this.Mc),this.Si=this.Xa.vj(this.Mc),-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7),-1!=(e=this.Xa.tk(this.Mc))&&this.Yg.add(e),!0},t.prototype.$V=function(){if(this.Mc=this.Si,-1==this.Mc)return this.zg[this.pe]=4,!0;if(this.Wi.ja<this.Xa.iq(this.Mc)){var e=this.Xa.uk(this.Mc);return this.Si=this.Xa.vj(this.Mc),-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=6),!0}return e=this.Xa.uk(this.Mc),this.Si=this.Xa.tk(this.Mc),-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7),-1!=(e=this.Xa.vj(this.Mc))&&this.Yg.add(e),!0},t.prototype.aW=function(){if(0==this.Yg.size)return this.Ug=this.pe=-1,!1;this.Mc=this.Yg.get(this.Yg.size-1),this.Yg.resize(this.Yg.size-1);var e=this.Xa.uk(this.Mc);return-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7),-1!=this.Xa.vj(this.Mc)&&this.Yg.add(this.Xa.vj(this.Mc)),-1!=this.Xa.tk(this.Mc)&&this.Yg.add(this.Xa.tk(this.Mc)),!0},t.prototype.GU=function(){return this.Ug=this.li,-1!=this.Ug&&o.yq(this.hq())&&this.Xa.vk(this.hq())<=this.Wi.ja?(this.li=this.EG(),!1):(this.pe--,!0)},t.prototype.lY=function(){return this.Ug=this.li,-1!=this.Ug&&o.nw(this.hq())&&this.Xa.vk(this.hq())>=this.Wi.fa?(this.li=this.gT(),!1):(this.pe--,!0)},t.prototype.EO=function(){return this.Ug=this.li,-1!=this.Ug&&o.yq(this.hq())?(this.li=this.EG(),!1):(this.pe--,!0)},t.prototype.EG=function(){return this.Xa.ag?this.Xa.gg.hb(this.Ug):this.Xa.Zi.hb(this.Ug)},t.prototype.gT=function(){return this.Xa.ag?this.Xa.gg.Be(this.Ug):this.Xa.Zi.Be(this.Ug)},t.prototype.hq=function(){return this.Xa.ag?this.Xa.gg.ga(this.Ug):this.Xa.Zi.getData(this.Ug)},t}();e.k_=a;var o=function(){function t(e){this.Nm=this.fi=this.gg=this.Zi=this.Xm=this.Ij=this.te=this.Jj=null,this.ag=e,this.Eq=this.zw=!1}return t.prototype.Gr=function(){this.Uk(!0)},t.prototype.bs=function(t,n){if(!this.zw)throw e.f.Eb();this.Jj.push(new e.uc(t,n))},t.prototype.Zp=function(){if(!this.zw)throw e.f.Y("invalid call");this.zw=!1,this.Eq=!0,this.ag||(this.QT(),this.Gw=this.Jj.length)},t.prototype.Gi=function(t){if(!this.ag||!this.Eq)throw e.f.I("invalid call");if(-1==this.tf){var n=this.Jj.length;if(this.UA){var r=new e.ha(0);r.Db(2*n),this.TJ(r),this.fi.Db(2*n),this.fi.resize(0),this.SJ(r),this.Xm.resize(n,-1),this.Xm.Xj(-1,0,n),this.UA=!1}else this.Xm.Xj(-1,0,n);this.tf=this.Bv()}n=this.bH(t<<1,this.tf),r=this.gg.addElement(1+(t<<1),this.fA(n)),this.ZK(n,r),this.Xm.set(t,n),this.Gw++},t.prototype.remove=function(t){if(!this.ag||!this.Eq)throw e.f.Y("invalid call");var n=this.Xm.get(t);if(-1==n)throw e.f.I("the interval does not exist in the interval tree");this.Xm.set(t,-1),this.Gw--;var r=this.fA(n),i=this.gg.qT(r);this.gg.zd(this.MS(n),r),this.gg.zd(this.jT(n),r),0==(t=this.gg.size(r))&&(this.gg.XQ(r),this.cL(i,-1)),this.Ij.jd(n),r=this.GG(i);var a=this.vj(i),o=this.tk(i);for(n=0;!(0<t||i==this.tf||-1!=a&&-1!=o);)i==this.vj(r)?-1!=a?(this.Vk(r,a),this.Vj(a,r),this.Vk(i,-1)):-1!=o?(this.Vk(r,o),this.Vj(o,r),this.Xk(i,-1)):this.Vk(r,-1):-1!=a?(this.Xk(r,a),this.Vj(a,r),this.Vk(i,-1)):-1!=o?(this.Xk(r,o),this.Vj(o,r),this.Xk(i,-1)):this.Xk(r,-1),this.Vj(i,-1),n++,t=-1!=(r=this.uk(i=r))?this.gg.size(r):0,a=this.vj(i),o=this.tk(i),r=this.GG(i)},t.prototype.reset=function(){if(!this.ag||!this.Eq)throw e.f.I("invalid call");this.Uk(!1)},t.prototype.size=function(){return this.Gw},t.prototype.getIterator=function(){return a.construct(this)},t.prototype.TJ=function(e){for(var t=this.Jj.length,n=0;n<2*t;n++)e.add(n);this.mZ(e,2*t)},t.prototype.SJ=function(e){for(var t=NaN,n=0;n<e.size;n++){var r=e.get(n),i=this.vk(r);i!=t&&(this.fi.add(r),t=i)}},t.prototype.QT=function(){var t=this.Jj.length,n=new e.ha(0);n.Db(2*t),this.TJ(n),this.fi.Db(2*t),this.fi.resize(0),this.SJ(n),this.Ij.Le(t),this.Zi.vn(2*t);var r=e.Xc.Sh(t);for(r.Xj(-1,0,t),this.tf=this.Bv(),t=0;t<n.size;t++){var i=n.get(t),a=r.get(i>>1);-1!=a?this.ZK(a,this.Zi.addElement(this.fA(a),i)):(a=this.bH(i,this.tf),r.set(i>>1,a))}},t.prototype.bH=function(t,n){var r=n,i=n,a=-1,o=0,s=this.fi.size-1,u=0,c=t>>1,l=NaN,h=NaN,f=!0,p=this.TS(c);for(c=this.QS(c);f;){o<s?(u=o+e.L.truncate((s-o)/2),-1==this.Nz(r)&&this.JK(r,this.fi.get(u),this.fi.get(u+1))):-1==this.Nz(r)&&this.JK(r,this.fi.get(o),this.fi.get(o));var d=this.iq(r);if(c<d)-1!=n&&(n==r?(i=r,l=d,h=-1!=(n=this.vj(r))?this.iq(n):NaN):h>d&&(d<l?this.Vk(i,r):this.Xk(i,r),this.Xk(r,n),this.ag&&(this.Vj(r,i),this.Vj(n,r)),i=r,l=d,n=-1,h=NaN)),-1==(s=this.NS(r))&&(s=this.Bv(),this.GY(r,s)),r=s,s=u;else if(p>d)-1!=n&&(n==r?(i=r,l=d,h=-1!=(n=this.tk(r))?this.iq(n):NaN):h<d&&(d<l?this.Vk(i,r):this.Xk(i,r),this.Vk(r,n),this.ag&&(this.Vj(r,i),this.Vj(n,r)),i=r,l=d,n=-1,h=NaN)),-1==(o=this.kT(r))&&(o=this.Bv(),this.RY(r,o)),r=o,o=u+1;else{-1==(f=this.uk(r))&&(f=this.KQ(r),this.cL(r,f));var v=this.pO(f,t);a=this.IQ(),this.UY(a,f),this.FY(a,v),r!=n&&(d<l?this.Vk(i,r):this.Xk(i,r),this.ag&&this.Vj(r,i),-1!=n&&(h<d?this.Vk(r,n):this.Xk(r,n),this.ag&&this.Vj(n,r))),f=!1}}return a},t.prototype.Bv=function(){return this.te.Ke()},t.prototype.KQ=function(e){return this.ag?this.gg.qs(e):this.Zi.Th(e)},t.prototype.IQ=function(){return this.Ij.Ke()},t.prototype.Uk=function(t){t?(this.zw=this.UA=!0,this.Eq=!1,null==this.fi?this.fi=e.Xc.Sh(0):this.fi.resize(0),null==this.Jj?this.Jj=[]:this.Jj.length=0):this.UA=!1,this.ag?null==this.Xm?(this.Xm=e.Xc.Sh(0),this.gg=new e.bk,this.gg.kp(new r(this))):this.gg.clear():null==this.Zi?this.Zi=new e.Ap:this.Zi.clear(),null==this.te?(this.Ij=new e.ad(3),this.te=new e.ad(this.ag?8:7)):(this.Ij.rj(!1),this.te.rj(!1)),this.tf=-1,this.Gw=0},t.prototype.JK=function(e,t,n){this.zY(e,t),this.AY(e,n)},t.prototype.iq=function(e){var t=this.Nz(e);return-1==t?NaN:(t=this.vk(t))==(e=this.vk(this.uS(e)))?t:.5*(t+e)},t.prototype.zY=function(e,t){this.te.P(e,0,t)},t.prototype.AY=function(e,t){this.te.P(e,1,t)},t.prototype.GY=function(e,t){this.te.P(e,3,t)},t.prototype.RY=function(e,t){this.te.P(e,4,t)},t.prototype.cL=function(e,t){this.te.P(e,2,t)},t.prototype.Vk=function(e,t){this.te.P(e,5,t)},t.prototype.Xk=function(e,t){this.te.P(e,6,t)},t.prototype.Vj=function(e,t){this.te.P(e,7,t)},t.prototype.UY=function(e,t){this.Ij.P(e,0,t)},t.prototype.pO=function(e,t){return this.ag?this.gg.addElement(t,e):this.Zi.addElement(e,t)},t.prototype.FY=function(e,t){this.Ij.P(e,1,t)},t.prototype.ZK=function(e,t){this.Ij.P(e,2,t)},t.prototype.ql=function(e){return this.ag?this.gg.sc(e):this.Zi.sc(e)},t.prototype.Fs=function(e){return this.ag?this.gg.Gc(e):this.Zi.Gc(e)},t.yq=function(e){return 0==(1&e)},t.nw=function(e){return 1==(1&e)},t.prototype.Nz=function(e){return this.te.S(e,0)},t.prototype.uS=function(e){return this.te.S(e,1)},t.prototype.uk=function(e){return this.te.S(e,2)},t.prototype.NS=function(e){return this.te.S(e,3)},t.prototype.kT=function(e){return this.te.S(e,4)},t.prototype.vj=function(e){return this.te.S(e,5)},t.prototype.tk=function(e){return this.te.S(e,6)},t.prototype.GG=function(e){return this.te.S(e,7)},t.prototype.fA=function(e){return this.Ij.S(e,0)},t.prototype.MS=function(e){return this.Ij.S(e,1)},t.prototype.jT=function(e){return this.Ij.S(e,2)},t.prototype.TS=function(e){return this.Jj[e].fa},t.prototype.QS=function(e){return this.Jj[e].ja},t.prototype.mZ=function(t,n){null==this.Nm&&(this.Nm=new e.Eu);var r=new i(this);this.Nm.sort(t,0,n,r)},t.prototype.lZ=function(e,n,r){var i=this;e.Zd(n,r,(function(e,n){var r=i.vk(e),a=i.vk(n);return r<a||r==a&&t.yq(e)&&t.nw(n)?-1:1}))},t.prototype.vk=function(e){var n=this.Jj[e>>1];return t.yq(e)?n.fa:n.ja},t}();e.Qr=o}(J||(J={})),function(e){var t=function(){function t(t){if(null==t)throw e.f.Y("Invalid arguement");this.rf=t;var n=t.BS();this.Eo=n.CT()?t.ee.uH()?e.zi.PannableFold:e.zi.Clip:e.zi.DontClip,this.cn=n.DT()?t.Je.uH()?e.zi.PannableFold:e.zi.Clip:e.zi.DontClip,this.Om=n.sv,this.$H=n.qz,this.OH=(t=this.rf.fI).Ps(2147483648),this.Bw=t.Ps(1073741824)}return t.$g=function(e,t,n){return t.dx.$g(e,n)},t.Kr=function(e,t,n,r){return e.dx.Kr(t,n,r)},t.zu=function(e,t,n,r){if((e=e.dx.Kr(t,n=0>n?t.length:n,r))==n)return e;for(var i=t=0;i<n;i++){var a=r[i];a.isNaN()||(t<i&&r[t].K(a),t++)}for(;t<n;t++)r[t].Tc();return e},t.transform=function(n,r,i,a,o){if(n.xq())return e.la.uQ(a,r,i),i;for(var s=[],u=0,c=0;c<i;){for(var l=Math.min(s.length,i-c),h=c,f=0;h<l;h++,f++)null==s[f]?s[f]=r[h].w():r[h].w(s[f]);var p=o?t.zu(n,s,l,s):t.Kr(n,s,l,s);for(f=h=0;h<p;h++,f++)null==a[c]&&(a[c]=new e.Ra(r[c])),a[c].nb(s[f]);c+=l,u+=p}return u},t.BL=function(t,n,r){if(0==r)return[];var i=new e.Hd;return i.yO(n,2*r),t=(n=this.$g(i,t,null)).Va(0),n=2*n.D(),r=e.L.Xf(n),t.iu(0,n,r,0,!0),r},t.prototype.Kr=function(t,n,r){if(this.rf.xq())return t!=r&&e.la.zv(r,t,n),n;var i=this.rf.ee,a=this.rf.Je,o=i.Fb(),s=a.Fb();if(0==o&&o===s){var u=i.qk();return a=u/(a=a.qk()),(u=new e.xd).Dr(a,a),u.NZ(t,n,r),n}if(u=e.L.lv(Math.min(n,64)),3==o){var c=i.Pi;o=(i=c.kk()).Fb(),r!=t&&e.la.zv(r,t,n),e.Ab.fl(c,r,n,!0),c.zu(e.nm.forward,r,n),e.Ab.el(c,r,n,!0)}if(3==o||3===s)throw e.f.Y("image: transform_in_place_");if(2==o)this.Eo==e.zi.Clip?(r!=t&&e.la.zv(r,t,n),t=i.sk(),e.Ab.iU(t,i,r,n)):(r!=t&&e.la.zv(r,t,n),i.Cc()&&(o=i.ce(0),c=i.be(),e.Ab.jZ(r,n,c,o),e.Ab.dG(r,n,i,0))),e.Ab.QM(i,r,n,u);else for(o=i.ce(0),c=i.be(),i=0;i<n;i++)e.Ab.kZ(t[i],c,o,r[i]);for(e.Ab.OM(this.rf,r,n,u),t=0,(s=2==s)?t=a.Wh():isNaN(this.Om)||(t=this.Om),s&&this.cn!=e.zi.Clip||e.Ab.dG(r,n,a.hc(),t),s&&(e.Ab.kH(r,n,a,this.cn),e.Ab.PM(a,r,n,u)),t=n,i=0;i<n;++i)r[i].isNaN()&&t--;return t},t.prototype.$g=function(t,n){if(this.rf.xq()||t.u())return t;if(33==t.F())return this.OJ(t);var r=this.rf.ee,i=this.rf.Je,a=r.Fb(),o=i.Fb();if(0==a&&a==o)return n=r.qk(),n/=i=i.qk(),(i=new e.xd).Dr(n,n),(t=e.R.$d(t)).Qc(i),t;switch(t.F()){case 1607:case 1736:t=this.MJ(t,n);break;case 550:t=this.wX(t,n);break;case 197:t=this.vX(t,n);break;default:throw e.f.Y("")}return t},t.prototype.OJ=function(t){var n=t.w(),r=[];return r[0]=n,this.Kr(r,1,r),(t=new e.Ra(t)).nb(r[0]),t},t.prototype.MJ=function(t,n){if(t.Fm())throw e.f.Y("curves not supported");var r=t.F();if(1736==r)return this.xX(t,n);if(1607==r)return this.yX(t,n);throw e.f.Y("projectMultiPath")},t.prototype.xX=function(n,r){var i=this.rf.ee,a=this.rf.Je,o=i.Fb(),s=a.Fb(),u=e.L.lv(Math.min(n.D(),64)),c=e.Ga.$d(n);3==o&&(o=(i=(n=i.Pi).kk()).Fb(),c=n.fl(c,!0),this.Qp(n,e.nm.forward,c),c=n.el(c,!0)),n=null,3==s&&(s=(a=(n=a.Pi).kk()).Fb());var l=2==o,h=2==s,f=h?a.hc():a,p=!h&&!this.Bw;s=!1;var d=c;if(l){if((d=e.Ab.LJ(d,i,this.Eo,r)).u())return d}else{if(c=new e.g,d.Zb(c),o=i.be(),c.A<o.A||c.B>o.B){var v=e.g.construct(c.o-1,o.A,c.v+1,o.B);if((d=e.fh.Tp(d,v,i,NaN,0,r)).u())return d}c.N()>2*o.N()&&(d=e.Ab.aq(d,-2*o.N(),2*o.N(),i,!0,0,!0,r))}c=this.$H,(o=!isNaN(c))&&(d=e.im.local().U(d,c,r)),v=h?a.xj():null;var y=NaN;l&&(y=i.Wh());var b=null!=a.Cs();if(this.OH)l&&(e.Ab.Tr(i,y,d,u),o&&(l=i.oh(),c*=(y=i.hc().oh())/l)),e.Ab.Sr(this.rf,d,p,u),o&&(l=i.hc().oh(),c*=(y=a.hc().oh())/l),i=d;else{var g=new e.Oa(d.description);g.pE(d),l&&(e.Ab.Tr(i,y,g,u),o&&(l=i.oh(),c*=(y=i.hc().oh())/l)),e.Ab.Sr(this.rf,g,p,u),o&&(l=i.hc().Am(),c*=(y=a.hc().Am())/l),p=NaN,h?(v=a.xj(),p=a.Wh()):isNaN(this.Om)||(p=this.Om),l=t.bw(i)|t.bw(a),y=10*f.ce(0),this.Bw&&(l=3,y=0),i=e.Ab.fS(d,i,g,f,p,r,l,y)}return b&&(i=e.Ab.JE(i,a,r)),h&&(s||(h=f.be().N(),i.Qf(0,0).N()>=h-f.ce(0)&&(f=v.getNorthPoleLocation(),h=v.getSouthPoleLocation(),d=v.getNorthPoleGeometry(),v=v.getSouthPoleGeometry(),p=0,d==e.ng.PE_POLE_POINT&&f!=e.ng.PE_POLE_OUTSIDE_BOUNDARY&&(p=1),v==e.ng.PE_POLE_POINT&&h!=e.ng.PE_POLE_OUTSIDE_BOUNDARY&&(p|=2),0!==p&&(s=!0))),i=e.Ab.tA(i,a,this.cn,r),o&&(i=e.im.local().U(i,c,r)),e.Ab.qy(a,i,u)),i.u()||(s&&(i=e.jm.local().U(i,a,!1,r)),null!=n&&(i=n.el(i,!1),this.Qp(n,e.nm.reverse,i),i=n.fl(i,!1))),i},t.bw=function(t){if(2!=t.Fb())return 0;var n=0,r=t.xj();t=r.getNorthPoleLocation();var i=r.getSouthPoleLocation(),a=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),a==e.ng.PE_POLE_POINT&&t!=e.ng.PE_POLE_OUTSIDE_BOUNDARY&&(n=1),r==e.ng.PE_POLE_POINT&&i!=e.ng.PE_POLE_OUTSIDE_BOUNDARY&&(n|=2),n},t.prototype.yX=function(n,r){var i=this.rf.ee,a=this.rf.Je,o=i.Fb(),s=a.Fb(),u=e.L.lv(Math.min(n.D(),64)),c=e.Oa.$d(n);3==o&&(o=(i=(n=i.Pi).kk()).Fb(),c=n.fl(c,!0),this.Qp(n,e.nm.forward,c),c=n.el(c,!0)),n=null,3==s&&(s=(a=(n=a.Pi).kk()).Fb());var l=2==o;o=(s=2==s)?a.hc():a;var h=!s&&!this.Bw;if(l){if((c=e.Ab.LJ(c,i,this.Eo,r)).u())return c}else{var f=new e.g;c.Zb(f);var p=i.be();if((f.A<p.A||f.B>p.B)&&(f=e.g.construct(f.o-1,p.A,f.v+1,p.B),(c=e.fh.Tp(c,f,i,NaN,0,r)).u()))return c}var d=NaN;l&&(d=i.Wh()),f=null!=a.Cs(),p=this.$H;var v=!isNaN(p);if(v&&(c=e.im.local().U(c,p,r)),this.OH)l&&e.Ab.Tr(i,d,c,u),v&&(l=i.oh(),p*=(d=i.hc().oh())/l),e.Ab.Sr(this.rf,c,h,u),v&&(l=i.hc().oh(),p*=(d=a.hc().oh())/l),i=c;else{var y=new e.Oa(c.description);y.pE(c),l&&(e.Ab.Tr(i,d,y,u),v&&(l=i.oh(),p*=(d=i.hc().oh())/l)),e.Ab.Sr(this.rf,y,h,u),v&&(l=i.hc().oh(),p*=(d=a.hc().oh())/l),h=NaN,s?h=a.Wh():isNaN(this.Om)||(h=this.Om),l=t.bw(i)|t.bw(a),d=10*o.ce(0),this.Bw&&(l=3,d=0),i=e.Ab.gS(c,i,y,o,h,r,l,d)}return f&&(i=e.Ab.JE(i,a,r)),s&&(i=e.Ab.tA(i,a,this.cn,r),v&&(i=e.im.local().U(i,p,r)),e.Ab.qy(a,i,u)),i.u()||null!=n&&(i=n.el(i,!1),this.Qp(n,e.nm.reverse,i),i=n.fl(i,!1)),i},t.prototype.vX=function(t,n){var r=(t.ca()+t.N())/400;return 0!=r?(r=e.im.local().U(t,r,n),r=this.MJ(r,n),n=t.Ea(),r.qn(n)):(n=new e.Ra(t.bq()),r=this.OJ(n),n=t.Ea(),r.u()?n.Ka():(t.copyTo(n),t=r.w(),n.H(t.x,t.y,t.x,t.y))),n},t.prototype.wX=function(t,n){t=e.R.$d(t);var r=this.rf.ee,i=this.rf.Je,a=r.Fb(),o=i.Fb(),s=e.L.lv(Math.min(t.D(),64));if(3==a){var u=r.Pi;a=(r=u.kk()).Fb(),t=u.el(t,!0),this.Qp(u,e.nm.forward,t),t=u.fl(t,!0)}if(2==a){if(this.Eo==e.zi.Clip?t=e.ak.local().U(t,r.sk(),r,n):r.Cc()&&(a=new e.g,t.Zb(a),r.be().contains(a)||(this.Eo==e.zi.PannableFold&&(t=e.Ab.qj(t,r)),e.Ab.tu(t,r.be(),r.ce(0),!0),t=e.Ab.vm(t,r,0,!0,0,n))),t.u())return t;e.Ab.Tr(r,0,t,s)}else e.Ab.tu(t,r.be(),r.ce(0),!0);return e.Ab.Sr(this.rf,t,!1,s),r=0,a=!1,u=null,3==o&&(a=!0,o=(i=(u=i.Pi).kk()).Fb()),(o=2==o)?r=i.Wh():isNaN(this.Om)||(r=this.Om),o&&this.cn!=e.zi.Clip||(t=e.Ab.vm(t,i.hc(),r,!1,0,n)),o&&(t=e.Ab.tA(t,i,this.cn,n),e.Ab.qy(i,t,s),t.u())||a&&(t=u.el(t,!0),this.Qp(u,e.nm.reverse,t),t=u.fl(t,!0)),t},t.prototype.Qp=function(t,n,r){var i=r.D();if(0!=i){for(var a=r.Va(0),o=e.L.Xf(200,0),s=[],u=0;u<i;){var c=Math.min(100,i-u);a.iu(2*u,2*c,o,2,!0);for(var l=0;l<c;++l)s[l]=e.b.construct(o[2*u],o[2*u+1]);t.zu(n,s,c),u+=c}r.Oc(1993)}},t.Jv=function(t,n,r){if(null==t||null==n||!n.Cc())throw e.f.Y("Invalid Arguement");if(t.u())return t;var i=t.F();return 197==i?(i=new e.Ga(t.description)).bd(t,!1):e.R.Ic(i)?(i=new e.Oa(t.description)).$b(t,!0):i=t,(i=e.Ab.qj(i,n)).u()?i:e.Ab.vm(i,n,0,i!=t,0,r)},t.sj=function(n,r,i,a){if(null==n||null==r||!r.Cc())throw e.f.Y("Invalid Arguement");if(n.u())return n;var o=n.F();if(e.R.Bc(o)){n=e.Ab.qj(n,r),o=new e.g,n.s(o);for(var s=e.la.Yy(r,o,!1),u=r.nh(),c=Math.floor((o.o-u.o)/u.N())*u.N()+u.o;c<o.v;)c>o.o+s&&c<o.v-s&&(n=e.Ab.PT(n,r,i,c)),c+=u.N()}else{if(197==o)return(o=new e.Ga(n.description)).bd(n,!1),t.sj(o,r,i,a);if(e.R.Ic(o))return(o=new e.Oa(n.description)).$b(n,!0),t.sj(o,r,i,a)}return t.Jv(n,r,a)},t.H_=function(n,r,i,a){var o=r.Fb(),s=new e.BD;if(r.FX(s),0==o)return t.wF(n,s,r,i);if(a==e.yp.foldAndClipWithHorizon&&r.Cc()&&(n=t.Jv(n,r,i)),n=t.wF(n,s,r,i),a==e.yp.clipToDomainOnly||n.u())return n;if(1==o)return a==e.yp.clipWithHorizon?(a=new e.g,n.Zb(a),s=.01*(o=r.be()).N(),a.A=o.A,a.B=o.B,a.o-=s,a.v+=s,e.fh.Tp(n,a,r,NaN,0,i)):n;if(2==o)return o=r.sk(),a==e.yp.clipWithHorizon||a==e.yp.foldAndClipWithHorizon?(r=e.ak.local().U(n,o,r,i))==o?e.R.$d(r):r:n;if(3==o)return n;throw e.f.Y("missing implementation")},t.wF=function(t,n,r,i){var a=n.uT(),o=t.hasAttribute(1),s=t.hasAttribute(2),u=new e.uc;u.Ka();var c=new e.uc;return c.Ka(),o&&(u=n.wT()),s&&(c=n.PS()),n=e.fh.Tp(t,a,r,NaN,0,i),o&&(o=n.Qf(1,0),u.contains(o)||(t==n&&(n=e.R.$d(n)),e.la.hL(n,u,1))),s&&(o=n.Qf(2,0),c.contains(o)||(t==n&&(n=e.R.$d(n)),e.la.hL(n,c,2))),n},t}();e.Bp=t}(J||(J={})),function(e){var t=function(t){function n(n,r,i,a){var o=t.call(this)||this;return void 0===n?o.description=e.ke.ug():void 0===i?o.description=n:(o.description=e.ke.ug(),o.GC(n,r),o.am(i,a)),o}return Y(n,t),n.prototype.F=function(){return 322},n.prototype.Pb=function(){var e=this.ra-this.pa,t=this.na-this.ma;return Math.sqrt(e*e+t*t)},n.prototype.Qg=function(e){var t=this.ra-this.pa,n=this.na-this.ma;return Math.sqrt(t*t+n*n)<=e},n.prototype.jo=function(){return!1},n.prototype.qg=function(){var t=new e.b;return t.tc(this.wc(),this.ac()),t},n.mQ=function(e,t){return new n(e.x,e.y,t.x,t.y)},n.prototype.qn=function(t){t.Ka(),t.rg(this.description);var n=new e.g;this.s(n),t.mp(n),n=1;for(var r=this.description.Ca;n<r;n++)for(var i=this.description.kd(n),a=e.oa.Sa(i);n<a;n++){var o=this.Qf(i,0);t.setInterval(i,0,o)}},n.prototype.s=function(e){e.H(this.ra,this.na,this.pa,this.ma),e.normalize()},n.prototype.ip=function(e){e.Ka(),e.Nb(this.ra,this.na,this.Pd(0,1,0)),e.Nb(this.pa,this.ma,this.Pd(1,1,0))},n.prototype.Qc=function(t){if(t instanceof e.xd){this.vc();var n=new e.b;n.x=this.ra,n.y=this.na,t.Zj(n,n),this.ra=n.x,this.na=n.y,n.x=this.pa,n.y=this.ma,t.Zj(n,n),this.pa=n.x,this.ma=n.y}else this.vc(),(n=new e.Id).x=this.ra,n.y=this.na,n.z=this.Pd(0,1,0),n=t.vp(n),this.ra=n.x,this.na=n.y,this.Nn(0,1,0,n.z),n.x=this.pa,n.y=this.ma,n.z=this.Pd(1,1,0),n=t.vp(n),this.pa=n.x,this.ma=n.y,this.Nn(1,1,0,n.z)},n.prototype.Ea=function(){return new n(this.description)},n.prototype.yy=function(e,t){return(this.pa-e-(this.ra-e))*(this.ma-t+(this.na-t))*.5},n.prototype.by=function(e){return e*this.Pb()},n.prototype.zH=function(e){return e/this.Pb()},n.prototype.qG=function(t){return e.Tb.Aq(this.ra,this.pa,t)},n.prototype.tS=function(t){return e.Tb.Aq(this.na,this.ma,t)},n.prototype.jl=function(t,n){var r=new e.og;return this.jh(t,n,r),r.get()},n.prototype.jh=function(t,n,r){if(null==r)throw e.f.I();r.ps(),(r=r.get()).rg(this.description);var i=new e.b;this.cc(t,i),r.GC(i.x,i.y),this.cc(n,i),r.am(i.x,i.y),i=1;for(var a=this.description.Ca;i<a;i++)for(var o=this.description.Jd(i),s=e.oa.Sa(o),u=0;u<s;u++){var c=this.Rc(t,o,u);r.Qx(o,u,c),c=this.Rc(n,o,u),r.Hx(o,u,c)}},n.prototype.Rc=function(t,n,r){if(0==n)return 0==r?this.cc(t).x:this.cc(t).y;switch(e.oa.Uz(n)){case 0:return.5>t?this.Ks(n,r):this.us(n,r);case 1:var i=this.Ks(n,r);return n=this.us(n,r),e.Tb.Aq(i,n,t);case 2:throw e.f.Y("not implemented")}throw e.f.za()},n.prototype.ae=function(e,t){var n=this.pa-this.ra,r=this.ma-this.na,i=n*n+r*r;return 0==i?.5:(e=((e.x-this.ra)*n+(e.y-this.na)*r)/i,t||(0>e?e=0:1<e&&(e=1)),e)},n.prototype.uq=function(e,t,n,r){if(e){if(0==(e=this.ma-this.na))return t==this.ma?-1:0;if(0>(t=(t-this.na)/e)||1<t)return 0;null!=n&&(n[0]=this.qG(t))}else{if(0==(e=this.pa-this.ra))return t==this.pa?-1:0;if(0>(t=(t-this.ra)/e)||1<t)return 0;null!=n&&(n[0]=this.tS(t))}return null!=r&&(r[0]=t),1},n.prototype.Te=function(e,t){var n=this.ma-this.na;return 0==n?e==this.ma?t:NaN:(t=this.qG(e=(e-this.na)/n),1==e&&(t=this.pa),t)},n.prototype.Yu=function(e,t,n){return 0<=this.Kp(e.x,e.y,t,n)},n.prototype.Ci=function(e,t,n){return 0<=this.Kp(e,t,n,!0)},n.prototype.Zs=function(e,t){return this.Yu(e,t,!1)},n.prototype.hJ=function(){if(this.ma<this.na||this.ma==this.na&&this.pa<this.ra){var e=this.ra;this.ra=this.pa,this.pa=e,e=this.na,this.na=this.ma,this.ma=e,e=0;for(var t=this.description.gr-2;e<t;e++){var n=this.ia[e];this.ia[e]=this.ia[e+t],this.ia[e+t]=n}}},n.prototype.av=function(t,n){(n=e.b.construct(t,n)).sub(this.ac());var r=new e.b;return r.tc(this.wc(),this.ac()),(t=r.Di(n))>(n=8881784197001252e-31*(Math.abs(r.x*n.y)+Math.abs(r.y*n.x)))?-1:t<-n?1:0},n.prototype.Kp=function(t,n,r,i){var a=this.ra,o=this.na,s=t-a,u=n-o;if((s=Math.sqrt(s*s+u*u))<=Math.max(r,6661338147750939e-31*s))return i&&0==s?NaN:0;if(s=t-this.pa,u=n-this.ma,(s=Math.sqrt(s*s+u*u))<=Math.max(r,6661338147750939e-31*s))return i&&0==s?NaN:1;if(s=this.pa-this.ra,u=this.ma-this.na,0<(i=Math.sqrt(s*s+u*u))){var c=1/i,l=t-a,h=n-o,f=l*(s*=c)+h*(u*=c),p=17763568394002505e-31*(Math.abs(l*s)+Math.abs(h*u)),d=s;if(s=-u,u=d,f<-(p=Math.max(r,p))||f>i+p)return NaN;if(Math.abs(l*s+h*u)<=Math.max(r,17763568394002505e-31*(Math.abs(l*s)+Math.abs(h*u)))&&(.5>=(s=e.L.Yj(f*c,0,1))?(u=this.ra+(this.pa-this.ra)*s,i=this.na+(this.ma-this.na)*s):(u=this.pa-(this.pa-this.ra)*(1-s),i=this.ma-(this.ma-this.na)*(1-s)),e.b.uz(u,i,t,n)<=r)){if(.5>s){if(e.b.uz(u,i,a,o)<=r)return 0}else if(e.b.uz(u,i,this.pa,this.ma)<=r)return 1;return s}}return NaN},n.prototype.Ib=function(e){return null!=e&&(e==this||e.constructor===this.constructor&&this.NN(e))},n.prototype.cE=function(t,n,r){var i=r?this.ra:this.pa;r=r?this.na:this.ma;var a=new e.b;return a.x=t.pa-i,a.y=t.ma-r,!(n.Vh(a)>6661338147750939e-31*n.PD(a))||(a.x=t.ra-i,a.y=t.na-r,n.Vh(a)<=6661338147750939e-31*n.PD(a))},n.prototype.bE=function(t){var n=new e.b;return n.x=this.pa-this.ra,n.y=this.ma-this.na,!!this.cE(t,n,!1)&&(n.lr(),!!this.cE(t,n,!0))},n.VN=function(e,t){var n=e.av(t.ra,t.na),r=e.av(t.pa,t.ma);return!(0>n&&0>r||0<n&&0<r)&&(n=t.av(e.ra,e.na),r=t.av(e.pa,e.ma),!(0>n&&0>r||0<n&&0<r)&&((n=e.Pb())>(r=t.Pb())?e.bE(t):t.bE(e)))},n.TN=function(t,n,r){var i=e.b.construct(NaN,NaN),a=t.pa-t.ra,o=t.ma-t.na,s=n.pa-n.ra,u=n.ma-n.na,c=s*o-a*u;if(0==c)return i;var l=8881784197001252e-31*(Math.abs(s*o)+Math.abs(a*u)),h=n.ra-t.ra,f=n.na-t.na,p=s*f-h*u,d=p/c,v=Math.abs(c);return d<-(s=(8881784197001252e-31*(Math.abs(s*f)+Math.abs(h*u))*v+l*Math.abs(p))/(c*c)+2220446049250313e-31*Math.abs(d))||d>1+s||(s=(u=a*f-h*o)/c)<-(a=(8881784197001252e-31*(Math.abs(a*f)+Math.abs(h*o))*v+l*Math.abs(u))/(c*c)+2220446049250313e-31*Math.abs(s))||s>1+a||(d=e.L.Yj(d,0,1),a=e.L.Yj(s,0,1),o=t.cc(d),c=n.cc(a),(l=new e.b).tc(o,c),l.length()>r&&(l.add(o,c),l.scale(.5),d=t.ae(l,!1),a=n.ae(l,!1),t=t.cc(d),n=n.cc(a),t.sub(n),t.length()>r)||i.ka(d,a)),i},n.WN=function(e,t,r,i){var a=0;if((e.ra==t.ra&&e.na==t.na||e.ra==t.pa&&e.na==t.ma)&&(a++,!i))return 1;if(e.pa==t.ra&&e.ma==t.na||e.pa==t.pa&&e.ma==t.ma){if(2==++a)return 2;if(!i)return 1}return t.Ci(e.ra,e.na,r)||t.Ci(e.pa,e.ma,r)||e.Ci(t.ra,t.na,r)||e.Ci(t.pa,t.ma,r)?1:i&&0!=a||0==n.VN(e,t)?0:1},n.Dy=function(t,r,i,a,o,s){var u=0,c=t.Kp(r.ra,r.na,s,!1),l=t.Kp(r.pa,r.ma,s,!1),h=r.Kp(t.ra,t.na,s,!1),f=r.Kp(t.pa,t.ma,s,!1);return isNaN(c)||(null!=a&&(a[u]=c),null!=o&&(o[u]=0),null!=i&&(i[u]=e.b.construct(r.ra,r.na)),u++),isNaN(l)||(null!=a&&(a[u]=l),null!=o&&(o[u]=1),null!=i&&(i[u]=e.b.construct(r.pa,r.ma)),u++),2==u||isNaN(h)||0==c&&0==h||0==l&&1==h||(null!=a&&(a[u]=0),null!=o&&(o[u]=h),null!=i&&(i[u]=e.b.construct(t.ra,t.na)),u++),2==u||isNaN(f)||1==c&&0==f||1==l&&1==f||(null!=a&&(a[u]=1),null!=o&&(o[u]=f),null!=i&&(i[u]=e.b.construct(r.pa,r.ma)),u++),0<u?(2==u&&null!=a&&a[0]>a[1]&&(t=a[0],a[0]=a[1],a[1]=t,null!=o&&(a=o[0],o[0]=o[1],o[1]=a),null!=i&&(o=e.b.construct(i[0].x,i[0].y),i[0]=i[1],i[1]=o)),u):(u=n.TN(t,r,s),isNaN(u.x)?0:(null!=i&&(i[0]=t.cc(u.x)),null!=a&&(a[0]=u.x),null!=o&&(o[0]=u.y),1))},n.prototype.QG=function(){return 0},n.prototype.Hp=function(){},n.prototype.toString=function(){return"Line: ["+this.ra.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.ma.toString()+"]"},n}(e.zD);e.zb=t}(J||(J={})),function(e){var t=function(){function e(){this.Wm=[],this.ya=-1}return e.prototype.Fa=function(){return this.ya},e.prototype.next=function(){if(null!=this.Wm&&0!=this.Wm.length){this.ya++;var e=this.Wm[0];return this.Wm=1>=this.Wm.length?[]:this.Wm.slice(1),e}return this.Wm=null},e.prototype.FZ=function(e){this.Wm.push(e)},e.prototype.xe=function(){},e}();e.qM=t}(J||(J={})),function(e){var t;(t=e.$M||(e.$M={}))[t.enumFillRuleOddEven=0]="enumFillRuleOddEven",t[t.enumFillRuleWinding=1]="enumFillRuleWinding";var n=function(t){function n(n,r){var i=t.call(this)||this;if(i.Gf=!1,i.Yq=null,i.Lq=0,i.Kq=0,i.Ej=null,i.Sg=!1,i.kb=null,i.jb=null,i.af=null,i.Nj=null,i.Wd=null,i.Mq=0,i.Pa=0,i.Qq=0,void 0===r)i.Gf=n,i.Sg=!1,i.Mq=0,i.Lq=0,i.Kq=0,i.sa=0,i.description=e.ke.ug();else{if(null==r)throw e.f.I();i.Gf=n,i.Sg=!1,i.Mq=0,i.Lq=0,i.Kq=0,i.sa=0,i.description=r}return i.Ej=null,i.Pa=0,i}return Y(n,t),n.prototype.Fm=function(){return 0<this.Mq},n.prototype.Cy=function(){this.vc(),null==this.Yq?this.Yq=new e.Ra(this.description):this.Yq.rg(this.description)},n.prototype.Zx=function(t,n){var r=new e.b;r.x=t,r.y=n,this.vu(r)},n.prototype.vu=function(e){this.Cy(),this.Yq.nb(e),this.Sg=!0},n.prototype.xf=function(t){if(t.u())throw e.f.I();this.Tl(t.description),this.Cy(),t.copyTo(this.Yq),this.Sg=!0},n.prototype.xy=function(){var t=1;this.Sg&&(this.Cy(),null==this.kb?(this.kb=e.Xc.Sh(2),this.kb.write(0,0),this.jb=e.Xc.ns(2,0)):(this.kb.resize(this.kb.size+1,0),this.jb.resize(this.jb.size+1,0)),this.Gf&&this.jb.write(this.jb.size-2,1),t++);var n=this.sa;this.kb.write(this.kb.size-1,this.sa+t),this.bl(n+t),this.jb.write(this.kb.size-1,0),this.Sg&&(this.ru(n,this.Yq),this.Sg=!1)},n.prototype.Cj=function(e,t){this.xy(),this.nb(this.sa-1,e,t)},n.prototype.Ii=function(e){this.xy(),this.nb(this.sa-1,e)},n.prototype.lineTo=function(e){this.xy(),this.ru(this.sa-1,e)},n.prototype.VV=function(t){if(this.vc(),this.Gf)throw e.f.za();var n=this.$();if(t>n)throw e.f.za();if(this.Lb(t)){if(null==this.jb)throw e.f.za();var r=this.sa,i=this.ua(t),a=this.zc(t);this.bl(this.sa+1),this.rc();for(var o=0,s=this.description.Ca;o<s;o++)if(null!=this.va[o]){var u=e.oa.Sa(this.description.Jd(o));this.va[o].fo(u*a,this.va[o],u*i,u,!0,1,u*r)}for(;n>t;n--)r=this.kb.read(n),this.kb.write(n,r+1);this.jb.uF(t,1)}},n.prototype.Up=function(){if(this.yu(),void 0===e){this.Sg=!1;var e=this.$()-1}var t=this.jb.read(e);this.jb.write(e,1|t),null!=this.af&&(e=this.zc(e)-1,this.af.write(e,1),this.Nj.write(e,-1))},n.c0=function(e){return n.eO[e]},n.prototype.Lb=function(e){return 0!=(1&this.jb.read(e))},n.prototype.ho=function(e){if(this.Lb(e))return!0;var t=this.ua(e);return!(t>(e=this.zc(e)-1))&&(t=this.xa(t),e=this.xa(e),t.qb(e))},n.prototype.Qs=function(e){return 0!=(2&this.jb.read(e))},n.prototype.$b=function(t,n){if(this.Tl(t.description),322!=t.F())throw e.f.za();var r=new e.Ra;(n||this.u())&&(t.jp(r),this.xf(r)),t.hp(r),this.lineTo(r)},n.prototype.Np=function(e){var t=0==this.sa;this.Zx(e.o,e.A),this.Cj(e.o,e.B),this.Cj(e.v,e.B),this.Cj(e.v,e.A),this.Up(),this.Sg=!1,t&&this.Vf(256,!1)},n.prototype.bd=function(t,n){if(!t.u()){for(var r=0==this.sa,i=new e.Ra(this.description),a=0;4>a;a++)t.Pf(n?4-a-1:a,i),0==a?this.xf(i):this.lineTo(i);this.Up(),this.Sg=!1,r&&!n&&this.Vf(256,!1)}},n.prototype.add=function(e,t){for(var n=0;n<e.$();n++)this.addPath(e,n,!t)},n.prototype.addPath=function(e,t,n){this.Ef(-1,e,t,n)},n.prototype.dl=function(e,t){this.pA(e,t)},n.prototype.ds=function(t,n,r,i,a){if(a||0!=this.$()||(a=!0),0>n&&(n=t.$()-1),n>=t.$()||0>r||0>i||i>t.$v(n))throw e.f.Y("index out of bounds");if(0!=i){var o=t.Lb(n)&&r+i==t.$v(n);if(!o||1!=i){if(this.Sg=!1,this.Tl(t.description),r=t.ua(n)+r+1,a&&(i++,r--),o&&i--,o=this.sa,this.bl(this.sa+i),this.rc(),a){if(0==i)return;this.kb.add(this.sa),a=t.jb.read(n),a&=-5,this.Gf&&(a|=1),this.jb.write(this.jb.size-1,a),this.jb.add(0)}else this.kb.write(this.jb.size-1,this.sa);a=0;for(var s=this.description.Ca;a<s;a++){var u=this.description.kd(a),c=e.oa.Sa(u),l=t.description.Yf(u);0>l||null==t.va[l]?this.va[a].Gm(c*o,e.oa.me(u),i*c,c*o):this.va[a].fo(c*o,t.va[l],c*r,i*c,!0,c,c*o)}if(this.Fm())throw e.f.za();if(t.Qs(n))throw e.f.za();this.Oc(1993)}}},n.prototype.sK=function(){for(var e=0,t=this.$();e<t;e++)this.kY(e)},n.prototype.kY=function(t){if(this.rc(),t>=this.$())throw e.f.I();var n=this.ua(t),r=this.Ha(t);t=this.Lb(t)?1:0;for(var i=0,a=this.description.Ca;i<a;i++)if(null!=this.va[i]){var o=e.oa.Sa(this.description.Jd(i));this.va[i].wi(o*(n+t),o*(r-t),o)}this.Oc(1993)},n.prototype.sr=function(t){this.rc();var n=this.$();if(0>t&&(t=n-1),t>=n)throw e.f.I();for(var r=this.ua(t),i=this.Ha(t),a=0,o=this.description.Ca;a<o;a++)if(null!=this.va[a]){var s=e.oa.Sa(this.description.Jd(a));this.va[a].Xn(s*r,s*i,s*this.sa)}for(r=t+1;r<=n;r++)a=this.kb.read(r),this.kb.write(r-1,a-i);if(null==this.jb)for(r=t+1;r<=n;r++)t=this.jb.read(r),this.jb.write(r-1,t);this.kb.resize(n),this.jb.resize(n),this.sa-=i,this.Vg-=i,this.Oc(1993)},n.prototype.Ef=function(t,n,r,i){if(n==this)throw e.f.I();if(r>=n.$())throw e.f.I();var a=this.$();if(t>a)throw e.f.I();0>t&&(t=a),0>r&&(r=n.$()-1),this.Sg=!1,this.Tl(n.description),n.rc();var o=n.ua(r),s=n.Ha(r),u=this.sa,c=n.Lb(r)&&!i?1:0;this.bl(this.sa+s),this.rc();for(var l=t<a?this.ua(t):u,h=0,f=this.description.Ca;h<f;h++){var p=this.description.Jd(h),d=n.description.Yf(p),v=e.oa.Sa(p);0<=d&&null!=n.va[d]?(0!=c&&this.va[h].fo(l*v,n.va[d],v*o,v,!0,v,v*u),this.va[h].fo((l+c)*v,n.va[d],v*(o+c),v*(s-c),i,v,v*(u+c))):this.va[h].Gm(l*v,e.oa.me(p),v*s,v*u)}for(this.kb.add(u+s),i=a;i>=t+1;i--)o=this.kb.read(i-1),this.kb.write(i,o+s);for(n.Qs(r),this.jb.add(0),i=a-1;i>=t+1;i--)a=this.jb.read(i),this.jb.write(i+1,a&=-5);a=n.ZS().read(r),a&=-5,this.Gf&&(a|=1),this.jb.write(t,a)},n.prototype.pA=function(t,n){var r=-1,i=this.$();if(r>i)throw e.f.I();0>r&&(r=i),this.Sg=!1;var a=this.sa;this.bl(this.sa+n),this.rc();var o=r<i?this.ua(r):a;if(null!=t)this.va[0].qA(2*o,t,0,n,!0,2*a);else{var s=e.oa.me(0);this.va[0].Gm(2*o,s,2*n,2*a)}t=1;for(var u=this.description.Ca;t<u;t++){s=this.description.kd(t);var c=e.oa.Sa(s);s=e.oa.me(s),this.va[t].Gm(o*c,s,c*n,c*a)}for(this.kb.add(this.sa),a=i;a>=r+1;a--)o=this.kb.read(a-1),this.kb.write(a,o+n);for(this.jb.add(0),a=i-1;a>=r+1;a--)n=this.jb.read(a),this.jb.write(a+1,n&=-5);this.Gf&&this.jb.write(r,1)},n.prototype.cH=function(t,n,r){var i=-1;if(0>t&&(t=this.$()),t>this.$()||i>this.Ha(t)||r>n.length)throw e.f.Y("index out of bounds");if(0!=r){t==this.$()&&(this.kb.add(this.sa),this.jb.add(this.Gf?1:0)),0>i&&(i=this.Ha(t)),this.rc();var a=this.sa;this.bl(this.sa+r),this.rc();for(var o=0,s=this.description.Ca;o<s;o++){var u=this.description.Jd(o),c=e.oa.Sa(u);this.va[o].Cu(c*(this.ua(t)+i+r),(a-this.ua(t)-i)*c,this.va[o],c*(this.ua(t)+i),!0,c),0==o?this.va[o].eD(c*(this.ua(t)+i),r,n,0,!0):this.va[o].Xj(e.oa.me(u),(this.ua(t)+i)*c,r*c)}for(this.Fm()&&(this.af.Cu(this.ua(t)+i+r,a-this.ua(t)-i,this.af,this.ua(t)+i,!0,1),this.Nj.Cu(this.ua(t)+i+r,a-this.ua(t)-i,this.Nj,this.ua(t)+i,!0,1),this.af.Xj(1,this.ua(t)+i,r),this.Nj.Xj(-1,this.ua(t)+i,r)),t+=1,n=this.$();t<=n;t++)this.kb.write(t,this.kb.read(t)+r)}},n.prototype.Ff=function(t,n,r){var i=this.$();if(0>t&&(t=this.$()),t>=i||n>this.Ha(t))throw e.f.Y("index out of bounds");t==this.$()&&(this.kb.add(this.sa),this.jb.add(this.Gf?1:0)),0>n&&(n=this.Ha(t));var a=this.sa;this.bl(this.sa+1),this.rc();var o=this.ua(t);this.va[0].Gi(2*(o+n),r,2*a),r=1;for(var s=this.description.Ca;r<s;r++){var u=this.description.Jd(r),c=e.oa.Sa(u);this.va[r].Gm(c*(o+n),e.oa.me(u),c,c*a)}for(t+=1;t<=i;t++)this.kb.write(t,this.kb.read(t)+1)},n.prototype.mC=function(t,n){var r=this.$();if(0>t&&(t=r-1),t>=r||n>=this.Ha(t))throw e.f.Y("index out of bounds");this.rc();var i=this.ua(t);0>n&&(n=this.Ha(t)-1),n=i+n,i=0;for(var a=this.description.Ca;i<a;i++)if(null!=this.va[i]){var o=e.oa.Sa(this.description.Jd(i));this.va[i].Xn(o*n,o,o*this.sa)}for(;r>=t+1;r--)n=this.kb.read(r),this.kb.write(r,n-1);this.sa--,this.Vg--,this.Oc(1993)},n.prototype.gF=function(t,n,r,i){if(t=this.ua(t)+n,(r=this.ua(r)+i)<t||0>t||r>this.D()-1)throw e.f.I();n=0,(i=this.Ba()).Rb(t);do{for(;i.Aa()&&(t=i.aa(),i.wb()!=r);)n+=t=t.Pb();if(i.wb()==r)break}while(i.Ta());return n},n.prototype.oP=function(t,n,r){if(n=this.ua(t)+n,r=this.ua(t)+r,0>n||r>this.D()-1)throw e.f.I();var i=this.Ba();if(n>r){if(!this.Lb(t))throw e.f.I("cannot iterate across an open path");i.tC()}var a=t=0;i.Rb(n);do{a+=t,t=i.aa().Pb()}while(i.wb()!=r);return a},n.prototype.sg=function(){return e.yi.qm(this,null)},n.prototype.eU=function(t,n,r){for(var i=t;i<r-1;i++)if(this.Lb(i))throw e.f.I("cannot interpolate across closed paths");if(1!=(i=this.description.Ca)){var a=this.gF(t,n,r,void 0);if(0!=a)for(var o=1;o<i;o++){var s=this.description.kd(o);if(2!=e.oa.Uz(s))for(var u=e.oa.Sa(s),c=0;c<u;c++)this.gU(s,t,n,r,a,c)}}},n.prototype.dU=function(t,n,r){var i=this.description.Ca;if(1!=i){var a=this.oP(t,n,r);if(0!=a)for(var o=1;o<i;o++){var s=this.description.kd(o);if(2!=e.oa.Uz(s))for(var u=e.oa.Sa(s),c=0;c<u;c++)this.fU(s,t,n,r,a,c)}}},n.prototype.gU=function(t,n,r,i,a,o){var s=this.Ba(),u=this.ua(n)+r;i=this.ua(i)+void 0,n=this.Rc(t,u,o),r=this.Rc(t,i,o);var c=n,l=0;s.Rb(u);do{if(s.Aa()){if(s.aa(),s.wb()==i)break;this.setAttribute(t,s.wb(),o,c),s.ti();do{if(u=s.aa(),s.nk()==i)return;l+=u=u.Pb(),c=e.Tb.Aq(n,r,l/a),s.io()||this.setAttribute(t,s.nk(),o,c)}while(s.Aa())}}while(s.Ta())},n.prototype.fU=function(t,n,r,i,a,o){var s=this.Ba(),u=this.ua(n)+r;if((n=this.ua(n)+i)!=u){i=this.Rc(t,u,o),r=this.Rc(t,n,o);var c=0;s.Rb(u),s.tC(),u=i;do{var l=s.aa();this.setAttribute(t,s.wb(),o,u),c+=u=l.Pb(),u=e.Tb.Aq(i,r,c/a)}while(s.nk()!=n)}},n.prototype.Ka=function(){this.Mq=0,this.Sg=!1,this.Wd=this.af=this.Nj=this.jb=this.kb=null,this.hE()},n.prototype.Qc=function(t){t instanceof e.xd?this.KE(t,-1):this.HO(t)},n.prototype.KE=function(t,n){if(!this.u()&&!t.xq()){this.rc();var r=this.va[0],i=new e.b,a=new e.b;if(0>n){var o=this.Fm(),s=0;n=this.sa}else o=this.Qs(n),s=this.ua(n),n=this.zc(n);for(;s<n;s++){if(i.x=r.read(2*s),i.y=r.read(2*s+1),o){var u=this.Nj.read(s);if(0<=u)switch(7&this.af.read(s)){case 2:a.x=this.Wd.read(u),a.y=this.Wd.read(u+1),t.Zj(a,a),this.Wd.write(u,a.x),this.Wd.write(u+1,a.y),a.x=this.Wd.read(u+3),a.y=this.Wd.read(u+4),t.Zj(a,a),this.Wd.write(u+3,a.x),this.Wd.write(u+4,a.y);break;case 4:throw e.f.za()}}t.Zj(i,i),r.write(2*s,i.x),r.write(2*s+1,i.y)}this.Oc(1993)}},n.prototype.HO=function(t){if(!this.u()){this.le(1),this.rc();for(var n=this.va[0],r=this.va[1],i=new e.Id,a=new e.Id,o=this.Fm(),s=0;s<this.sa;s++){if(i.x=n.read(2*s),i.y=n.read(2*s+1),i.z=r.read(s),o){var u=this.Nj.read(s);if(0<=u)switch(7&this.af.read(s)){case 2:a.x=this.Wd.read(u),a.y=this.Wd.read(u+1),a.z=this.Wd.read(u+2),a=t.vp(a),this.Wd.write(u,a.x),this.Wd.write(u+1,a.y),this.Wd.write(u+1,a.z),a.x=this.Wd.read(u+3),a.y=this.Wd.read(u+4),a.z=this.Wd.read(u+5),a=t.vp(a),this.Wd.write(u+3,a.x),this.Wd.write(u+4,a.y),this.Wd.write(u+5,a.z);break;case 4:throw e.f.za()}}i=t.vp(i),n.write(2*s,i.x),n.write(2*s+1,i.y),r.write(s,i.z)}this.Oc(1993)}},n.prototype.Oy=function(){null==this.kb&&(this.kb=e.Xc.Sh(1,0),this.jb=e.Xc.ns(1,0)),null!=this.af&&(this.af.resize(this.Vg,1),this.Nj.resize(this.Vg,-1))},n.prototype.Hp=function(t){t.Sg=!1,t.Mq=this.Mq,t.Qq=this.Qq,t.kb=null!=this.kb?e.ha.Vn(this.kb):null,t.jb=null!=this.jb?e.Gn.Vn(this.jb):null,t.Nj=null!=this.Nj?e.ha.Vn(this.Nj):null,t.af=null!=this.af?e.Gn.Vn(this.af):null,t.Wd=null!=this.Wd?e.ie.Vn(this.Wd):null,t.Lq=this.Lq,t.Kq=this.Kq,t.Ej=this.ek(1024)?null:this.Ej},n.prototype.Pb=function(){if(!this.ek(512))return this.Lq;for(var t=this.Ba(),n=new e.ky(0);t.Ta();)for(;t.Aa();)n.add(t.aa().Pb());return this.Lq=n.Dm(),this.Vf(512,!1),n.Dm()},n.prototype.Ib=function(e){if(e==this)return!0;if(!(e instanceof n&&t.prototype.Ib.call(this,e)))return!1;var r=this.$();return!(r!=e.$()||null!=this.kb&&!this.kb.Ib(e.kb,0,r+1)||this.Qq!=e.Qq||null!=this.jb&&!this.jb.Ib(e.jb,0,r))&&t.prototype.Ib.call(this,e)},n.prototype.Ba=function(){return new e.fN(this)},n.prototype.Ny=function(e){if(t.prototype.Ny.call(this,e),this.Fm())for(e=this.Ba();e.Ta();)e.Aa()},n.prototype.Tn=function(e,n){if(t.prototype.Tn.call(this,e,n),this.Fm())for(e=this.Ba();e.Ta();)e.Aa()},n.prototype.Gy=function(){this.sa=null==this.kb||0==this.kb.size?0:this.kb.read(this.kb.size-1)},n.prototype.Pe=function(){return this.Gf?(this.dv(),this.Kq):0},n.prototype.lw=function(e){return!!this.Gf&&(this.ek(8)?(this.dv(),0<this.Ej.read(e)):0!=(4&this.jb.read(e)))},n.prototype.rm=function(e){return this.Gf?(this.dv(),this.Ej.read(e)):0},n.prototype.dv=function(){if(this.ek(1024)){var t=this.$();null==this.Ej?this.Ej=new e.ie(t):this.Ej.size!=t&&this.Ej.resize(t),t=new e.ky(0);for(var n=new e.ky(0),r=new e.b,i=0,a=this.Ba();a.Ta();){for(n.reset(),this.w(this.ua(a.Pa),r);a.Aa();)n.add(a.aa().yy(r.x,r.y));t.add(n.Dm());var o=i++;this.Ej.write(o,n.Dm())}this.Kq=t.Dm(),this.Vf(1024,!1)}},n.prototype.VS=function(){if(this.Gf){this.cl();for(var e=this.$(),t=0;t<e;t++)this.jb.read(t)}},n.prototype.cl=function(){if(this.ek(8)){this.dv();var t=this.$();(null==this.jb||this.jb.size<t)&&(this.jb=e.Xc.ns(t+1));for(var n=1,r=0;r<t;r++){var i=this.Ej.read(r);0==r&&(n=0<i?1:-1),0<i*n?this.jb.DK(r,4):this.jb.uF(r,4)}this.Vf(8,!1)}},n.prototype.Yv=function(t){var n=this.Pa,r=this.$();if(0<=n&&n<r){if(t<this.zc(n)){if(t>=this.ua(n))return n;n--}else n++;if(0<=n&&n<r&&t>=this.ua(n)&&t<this.zc(n))return this.Pa=n}if(5>r){for(n=0;n<r;n++)if(t<this.zc(n))return this.Pa=n;throw e.f.Y("corrupted geometry")}for(n=0,--r;r>n;){var i=n+(r-n>>1);if(t<this.ua(i))r=i-1;else{if(!(t>=(n=this.zc(i))))return this.Pa=i;n=i+1}}return this.Pa=n},n.prototype.JS=function(t){var n=this.Va(0);this.$S();var r=this.zc(t),i=this.ua(t);t=-1;var a=new e.b,o=new e.b;for(a.y=-1/0,a.x=-1/0,i+=0;i<r;i++)n.mc(2*i,o),-1==a.compare(o)&&(t=i,a.K(o));return t},n.prototype.gA=function(){var e=this.D();if(!this.Gf){e-=this.$();for(var t=0,n=this.$();t<n;t++)this.Lb(t)&&e++}return e},n.prototype.$v=function(e){var t=this.Ha(e);return this.Lb(e)||t--,t},n.prototype.Ea=function(){return new n(this.Gf,this.description)},n.prototype.pb=function(){return this.Gf?2:1},n.prototype.F=function(){return this.Gf?1736:1607},n.prototype.$S=function(){this.yu()},n.prototype.UK=function(e){this.kb=e,this.Oc(16777215)},n.prototype.lT=function(){return this.yu(),this.af},n.prototype.ZS=function(){return this.yu(),this.jb},n.prototype.TK=function(e){this.jb=e,this.Oc(16777215)},n.prototype.$=function(){return null!=this.kb?this.kb.size-1:0},n.prototype.zc=function(e){return this.kb.read(e+1)},n.prototype.Ha=function(e){return this.kb.read(e+1)-this.kb.read(e)},n.prototype.ua=function(e){return this.kb.read(e)},n.prototype.Tu=function(t,n){null==this.ib&&(this.ib=new e.Yk),n=e.sy.VX(n);var r=this.ib.oi;if(null!=r){if(!(r.Pk<t||n>r.hT()))return!0;this.ib.Ky(null)}return r=e.sy.create(this,t,n),this.ib.Ky(r),!0},n.prototype.fc=function(){var e=t.prototype.fc.call(this);if(!this.Ac()){var n=this.$();null!=this.kb&&this.kb.Un(e,0,n+1),null!=this.jb&&this.jb.Un(e,0,n)}return e},n.prototype.KG=function(e){return null!=this.af?this.af.read(e):1},n.prototype.ec=function(t,n,r){var i=this.Yv(t);if(t==this.zc(i)-1&&!this.Lb(i))throw e.f.Y("index out of bounds");this.rc();var a=this.af,o=1;switch(null!=a&&(o=7&a.read(t)),o){case 1:n.ps();break;case 2:case 4:default:throw e.f.za()}if((n=n.get()).rg(r?e.ke.ug():this.description),i=t==this.zc(i)-1&&this.Lb(i)?this.ua(i):t+1,a=new e.b,this.w(t,a),n.Fc(a),this.w(i,a),n.Sc(a),!r)for(r=1,a=this.description.Ca;r<a;r++){o=this.description.Jd(r);for(var s=e.oa.Sa(o),u=0;u<s;u++){var c=this.Rc(o,t,u);n.Qx(o,u,c),c=this.Rc(o,i,u),n.Hx(o,u,c)}}},n.prototype.Sj=function(t,n){if(t>=this.$())throw e.f.I();if(this.u())n.Ka();else{if(this.Qs(t))throw e.f.Y("not implemented");var r=this.Va(0),i=new e.b,a=new e.g;a.Ka();var o=this.ua(t);for(t=this.zc(t);o<t;o++)r.mc(2*o,i),a.Nb(i);n.H(a)}},n.prototype.EX=function(t,n){if(t>=this.$())throw e.f.I();if(this.u())n.Ka();else{if(this.Qs(t))throw e.f.Y("not implemented");var r=this.Va(0),i=new e.b,a=new e.g;a.Ka();var o=this.ua(t);for(t=this.zc(t);o<t;o++)r.mc(2*o,i),a.Nb(i);n.H(a)}},n.prototype.lj=function(t){return null==this.ib&&(this.ib=new e.Yk),!(0==t||16>this.D()||(t=e.la.$E(this),this.ib.jE(t),0))},n.prototype.oN=function(){if(null==this.ib&&(this.ib=new e.Yk),null==this.ib.To){this.ib.kE(null);var t=e.la.iP(this);this.ib.kE(t)}},n.prototype.np=function(e){this.Qq=e},n.prototype.$n=function(){return this.Qq},n.prototype.pE=function(t){if(this==t)throw e.f.Y("MultiPathImpl.add");for(var n=this.$(),r=0;r<t.$();r++)this.addPath(t,r,!0),this.VV(n),n++},n.prototype.uP=function(t){var n=this.Yv(t),r=this.ua(n);if(r!=t){if(t>=(n=this.zc(n))||t<r)throw e.f.Y("change_ring_start_point");for(var i=0,a=this.description.Ca;i<a;i++){var o=this.description.kd(i);o=e.oa.Sa(o),this.va[i].rotate(r*o,t*o,n*o)}}},n.eO=[0,0,6,0,8,0],n}(e.ly);e.Zk=n}(J||(J={})),function(e){var t=function(t){function n(n){var r=t.call(this)||this;if(void 0!==n){if(null==n)throw e.f.I();r.description=n}else r.description=e.ke.ug();return r.sa=0,r}return Y(n,t),n.prototype.Ea=function(){return new n(this.description)},n.prototype.add=function(e){this.resize(this.sa+1),this.Hh(this.sa-1,e)},n.prototype.hv=function(t,n){this.resize(this.sa+1);var r=new e.b;r.ka(t,n),this.nb(this.sa-1,r)},n.prototype.yd=function(t,n,r){if(r=0>r?t.D():r,0>n||n>t.D()||r<n)throw e.f.I();if(n!=r){this.Tl(t.description);var i=this.sa;this.resize(this.sa+(r-=n)),this.rc();for(var a=0,o=t.description.Ca;a<o;a++){var s=t.description.Jd(a),u=e.oa.Sa(s),c=this.Va(s);s=t.Va(s),c.fo(i*u,s,n*u,r*u,!0,1,i*u)}}},n.prototype.tE=function(t,n){var r=t.length;if(n=0>n?r:n,0>r||0>n)throw e.f.I();if(0!=n){r=n-0,n=this.sa,this.resize(this.sa+r);for(var i=0;i<r;i++)this.nb(n+i,t[0+i])}},n.prototype.mC=function(t){if(0>t||t>=this.D())throw e.f.Y("index out of bounds");this.rc();for(var n=0,r=this.description.Ca;n<r;n++)if(null!=this.va[n]){var i=e.oa.Sa(this.description.Jd(n));this.va[n].Xn(i*t,i,i*this.sa)}this.sa--,this.Vg--,this.Oc(1993)},n.prototype.resize=function(e){this.bl(e)},n.prototype.Hp=function(){},n.prototype.Ka=function(){t.prototype.hE.call(this)},n.prototype.Qc=function(t){if(t instanceof e.xd){if(this.u())return;this.rc();for(var n=this.va[0],r=new e.b,i=0;i<this.sa;i++)r.x=n.read(2*i),r.y=n.read(2*i+1),t.Zj(r,r),n.write(2*i,r.x),n.write(2*i+1,r.y)}else{if(this.u())return;this.rc(),this.le(1),this.rc(),n=this.va[0],r=this.va[1];var a=new e.Id;for(i=0;i<this.sa;i++){a.x=n.read(2*i),a.y=n.read(2*i+1),a.z=r.read(i);var o=t.vp(a);n.write(2*i,o.x),n.write(2*i+1,o.y),r.write(i,o.z)}}this.Oc(1993)},n.prototype.pb=function(){return 0},n.prototype.F=function(){return 550},n.prototype.Pe=function(){return 0},n.prototype.Pb=function(){return 0},n.prototype.Ib=function(e){return e==this||e instanceof n&&t.prototype.Ib.call(this,e)},n.prototype.yO=function(t,n){var r=t.length;if(n=0>n?r:n,0>r||0>n)throw e.f.I();if(0!=n){if(0!=(1&(r=n-0)))throw e.f.I();n=this.sa,this.jY(this.sa+r/2),this.va[0].cD(2*n,r,t,0,!0)}},n.prototype.jY=function(t){var n=this.sa;if(this.bl(t),this.sa>n){t=1;for(var r=this.description.Ca;t<r;t++){var i=this.description.kd(t),a=e.oa.Sa(i);this.va[t].Gm(a*n,e.oa.me(i),a*(this.sa-n),a*n)}}},n.prototype.CX=function(t,n){var r=this.sa;if(r=Math.min(r,n+1e3),0>n||n>=this.sa||r<n||1e3!=t.length)throw e.f.I();var i=r-n,a=[];for(this.Va(0).iu(2*n,2*i,a,0,!0),n=0;n<i;n++)t[n]=e.b.construct(a[2*n],a[2*n+1]);return r},n.prototype.Gy=function(){},n.prototype.Oy=function(){},n.prototype.Tu=function(){return!1},n.prototype.lj=function(){return!1},n.prototype.sg=function(){return null},n}(e.ly);e.Hd=t}(J||(J={})),function(e){var t;(t=e.sM||(e.sM={}))[t.NotDetermined=0]="NotDetermined",t[t.Structure=1]="Structure",t[t.DegenerateSegments=2]="DegenerateSegments",t[t.Clustering=3]="Clustering",t[t.Cracking=4]="Cracking",t[t.CrossOver=5]="CrossOver",t[t.RingOrientation=6]="RingOrientation",t[t.RingOrder=7]="RingOrder",t[t.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",t[t.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",t[t.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var n=function(){function e(e,t,n){void 0===e?(this.pi=0,this.Rl=this.Ql=-1):(this.pi=e,this.Ql=t,this.Rl=n)}return e.prototype.Or=function(e){this.pi=e.pi,this.Ql=e.Ql,this.Rl=e.Rl},e}();e.Od=n}(J||(J={})),function(e){e.L=function(){function t(){}return t.assert=function(t){if(!1===t)throw e.f.PL()},t.fL=function(e){return isNaN(e)?NaN:0===e?e:0<e?1:-1},t.lv=function(e){var n;void 0===n&&(n=0);for(var r=[],i=0;i<e;i++)r[i]=t.Xf(2,n);return r},t.Xf=function(e,t){void 0===t&&(t=0);for(var n=[],r=0;r<e;r++)n[r]=t;return n},t.Hv=function(e,t){var n,r;for(void 0===n&&(n=0),void 0===r&&(r=e.length-1);n<=r;n++)e[n]=t},t.Yj=function(e,t,n){return e<t?t:e>n?n:e},t.H0=function(){return 4},t.Zh=function(e,t){var n=5381;return((n=((n=((n=void 0!==t?(t<<5)+t+(255&e):(n<<5)+n+(255&e))<<5)+n+(e>>8&255))<<5)+n+(e>>16&255))<<5)+n+(e>>24&255)&2147483647},t.Aj=function(){throw Error("Not Implemented")},t.y0=function(){return-1/0},t.A0=function(){return 1/0},t.h0=function(){return 2147483647},t.U_=function(){return 2220446049250313e-31},t.V_=function(){return 17976931348623157e292},t.MB=function(e){return t.uV(e)+12345&2147483647},t.IH=function(e){var n=32,r=e/t.vy|0;return 0==(n&=63)?e:(32>n?(e=(e%t.vy|0)>>>n|r<<32-n,n=r>>n):(e=r>>n-32,n=0<=r?0:-1),n*t.vy+(e>>>0))},t.uV=function(e){return(1103495168*(e|=0)|0)+(20077*e|0)|0},t.truncate=function(e){return 0>e?-1*Math.floor(Math.abs(e)):Math.floor(e)},t.MAX_SAFE_INTEGER=Math.pow(2,53)-1,t.MIN_SAFE_INTEGER=-t.MAX_SAFE_INTEGER,t.DD=65536,t.t_=16777216,t.vy=t.DD*t.DD,t}()}(J||(J={})),function(e){var t;(t=e.LM||(e.LM={}))[t.Project=0]="Project",t[t.Union=1]="Union",t[t.Difference=2]="Difference",t[t.Proximity2D=3]="Proximity2D",t[t.Relate=4]="Relate",t[t.Equals=5]="Equals",t[t.Disjoint=6]="Disjoint",t[t.Intersects=7]="Intersects",t[t.Within=8]="Within",t[t.Contains=9]="Contains",t[t.Crosses=10]="Crosses",t[t.Touches=11]="Touches",t[t.Overlaps=12]="Overlaps",t[t.Buffer=13]="Buffer",t[t.Distance=14]="Distance",t[t.Intersection=15]="Intersection",t[t.Clip=16]="Clip",t[t.Cut=17]="Cut",t[t.DensifyByLength=18]="DensifyByLength",t[t.DensifyByAngle=19]="DensifyByAngle",t[t.LabelPoint=20]="LabelPoint",t[t.GeodesicBuffer=21]="GeodesicBuffer",t[t.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",t[t.ShapePreservingDensify=23]="ShapePreservingDensify",t[t.GeodeticLength=24]="GeodeticLength",t[t.GeodeticArea=25]="GeodeticArea",t[t.Simplify=26]="Simplify",t[t.SimplifyOGC=27]="SimplifyOGC",t[t.Offset=28]="Offset",t[t.Generalize=29]="Generalize",t[t.SymmetricDifference=30]="SymmetricDifference",t[t.ConvexHull=31]="ConvexHull",t[t.Boundary=32]="Boundary",t[t.SimpleRelation=33]="SimpleRelation";var n=function(){function t(){}return t.prototype.F=function(){return null},t.prototype.Pn=function(){},t.prototype.qv=function(){return!1},t.R_=function(t){e.R.Rg(t.F())&&null!=(t=t.ib)&&(t.Ky(null),t.jE(null))},t}();e.Ne=n}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 13},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i,a){return t instanceof e.R?(a=new e.$c(t),this.U(a,n,[r],!1,i).next()):!0===i?(r=new e.iD(t,n,r,!1,a),e.Jh.local().U(r,n,a)):new e.iD(t,n,r,!1,a)},n.instance=null,n}(e.Ne);e.hD=t}(J||(J={})),function(e){var t=function(){function t(t,n,r,i,a){this.ya=-1,this.Vd=t,this.KA=n,this.kt=r,this.OU=new e.g,this.OU.Ka(),this.xo=-1,this.Vb=a}return t.prototype.next=function(){for(var e;null!=(e=this.Vd.next());)return this.ya=this.Vd.Fa(),this.xo+1<this.kt.length&&this.xo++,this.buffer(e,this.kt[this.xo]);return null},t.prototype.Fa=function(){return this.ya},t.prototype.buffer=function(t,n){return e.QL.buffer(t,n,this.KA,NaN,96,this.Vb)},t.prototype.xe=function(){},t}();e.iD=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 16},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i){return t instanceof e.R?(t=new e.$c(t),this.U(t,n,r,i).next()):new e.vM(t,n,r,i)},n.instance=null,n}(e.Ne);e.uM=t}(J||(J={})),function(e){var t=function(){function t(t,n,r){if(this.ya=-1,null==t)throw e.f.I();this.X=n,this.Fk=t,this.qa=e.la.Qd(r,n,!1)}return t.prototype.next=function(){var t;return null!=(t=this.Fk.next())?(this.ya=this.Fk.Fa(),e.Yd.clip(t,this.X,this.qa,0)):null},t.prototype.Fa=function(){return this.ya},t.prototype.xe=function(){},t}();e.vM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 31},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r){return t instanceof e.R?e.kD.dF(t):new e.kD(n,t,r)},n.instance=null,n}(e.Ne);e.jD=t}(J||(J={})),function(e){var t=function(){function t(t,n,r){if(this.dB=new e.Gu,this.ya=-1,null==n)throw e.f.I();this.QH=t,this.Jc=!1,this.Fk=n,this.Vb=r}return t.prototype.next=function(){if(this.QH){if(!this.Jc){var e=this.mP(this.Fk);return this.Jc=!0,e}return null}if(!this.Jc){if(null!=(e=this.Fk.next()))return this.ya=this.Fk.Fa(),t.dF(e);this.Jc=!0}return null},t.prototype.Fa=function(){return this.ya},t.prototype.mP=function(e){for(var t;null!=(t=e.next());)this.dB.Bb(t);return this.dB.qS()},t.prototype.xe=function(){if(!this.Jc){if(!this.QH)throw e.f.Y("Invalid call for non merging convex hull.");var t=this.Fk.next();if(null==t)throw e.f.Y("Expects a non-null geometry.");this.dB.Bb(t)}},t.dF=function(n){if(t.oU(n))return n;var r=n.F();if(e.Zk.Ic(r))return(r=new e.Oa(n.description)).$b(n,!0),r;if(550==r&&2==n.D()){var i=new e.Ra;return r=new e.Oa(n.description),n.ne(0,i),r.xf(i),n.ne(1,i),r.lineTo(i),r}return e.Gu.aQ(n)},t.oU=function(t){if(t.u())return!0;var n=t.F();return 33==n||197==n||!e.Zk.Ic(n)&&(550==n?1==t.D():1607==n?1==t.$()&&2>=t.D():1==t.$()&&(2>=t.D()||e.Gu.vH(t,0)))},t}();e.kD=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 17},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i,a){return new e.xM(t,n,r,i,a)},n.instance=null,n}(e.Ne);e.wM=t}(J||(J={})),function(e){var t=function(){function t(t,n,r,i,a){if(this.bg=null,null==n||null==r)throw e.f.Y("invalid argument");this.LU=t,this.YA=n,this.ZH=r,t=e.la.Uv(n,r),this.qa=e.la.Qd(i,t,!0),this.YH=-1,this.nd=a}return t.prototype.Fa=function(){return 0},t.prototype.next=function(){return this.cS(),++this.YH<this.bg.length?this.bg[this.YH]:null},t.prototype.cS=function(){if(null==this.bg)switch(this.bg=[],this.YA.F()){case 1607:this.eS();break;case 1736:this.dS()}},t.prototype.eS=function(){var t=new e.Oa,n=new e.Oa,r=new e.Oa;this.bg.push(t),this.bg.push(n);var i=[];e.UL.SL(this.LU,this.YA,this.ZH,this.qa,i,this.nd);for(var a=0;a<i.length;a++){var o=i[a];if(0==o.Jt)t.add(o.W,!1);else if(1==o.Jt||2==o.Jt)n.add(o.W,!1);else if(3==o.Jt)this.bg.push(o.W);else{if(4!=o.Jt)throw e.f.Y("internal");r.add(o.W,!1)}}r.u()||t.u()&&n.u()&&!(3<=this.bg.length)||this.bg.push(r),t.u()&&n.u()&&3>this.bg.length&&(this.bg.length=0)},t.prototype.dS=function(){var t=new e.ha(0),n=new e.Yc,r=n.NF(),i=n.Bb(this.YA),a=n.Bb(this.ZH),o=new e.pg;try{o.yr(n,this.qa,this.nd),o.jl(r,i,a,t);var s=n.ye(i),u=new e.Ga,c=new e.Ga;for(this.bg.length=0,this.bg.push(u),this.bg.push(c),i=0;i<t.size;i++){var l=new e.Yc,h=l.Bb(s),f=l.Bb(n.ye(t.get(i)));o.xr(l,this.nd);var p=o.hw(h,f),d=l.ye(p);if(!d.u()){var v=n.wG(t.get(i),r);2==v?u.add(d,!1):1==v?c.add(d,!1):this.bg.push(d);var y=new e.Yc;h=y.Bb(s),f=y.Bb(n.ye(t.get(i))),o.xr(y,this.nd),s=y.ye(o.tm(h,f))}}!s.u()&&0<t.size&&this.bg.push(s),u.u()&&c.u()&&(this.bg.length=0)}finally{o.ah()}},t.prototype.xe=function(){},t}();e.xM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 18},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r){if(t instanceof e.R)return t=new e.$c(t),this.U(t,n,r).next();if(0>=n)throw e.f.I();return new e.yM(t,n,r)},n.instance=null,n}(e.Ne);e.im=t}(J||(J={})),function(e){var t=function(){function t(e,t){this.ya=-1,this.Vd=e,this.xt=t}return t.prototype.Fa=function(){return this.ya},t.prototype.next=function(){var e;return null!=(e=this.Vd.next())?(this.ya=this.Vd.Fa(),this.YQ(e)):null},t.prototype.YQ=function(t){if(t.u()||1>t.pb())return t;var n=t.F();if(1736==n||1607==n)return this.sz(t);if(e.R.Ic(n))return this.$Q(t);if(197==n)return this.ZQ(t);throw e.f.za()},t.prototype.$Q=function(t){if(t.Pb()<=this.xt)return t;var n=new e.Oa(t.description);return n.$b(t,!0),this.sz(n)},t.prototype.ZQ=function(t){var n=new e.Ga(t.description);n.bd(t,!1);var r=new e.g;return t.s(r),t=r.ca(),r.N()<=this.xt&&t<=this.xt?n:this.sz(n)},t.prototype.sz=function(t){for(var n=t.Ea(),r=t.Ba();r.Ta();)for(var i=!0;r.Aa();){var a=r.aa();if(322!=a.F())throw e.f.Y("not implemented");var o=r.io(),s=a.Pb();if(s>this.xt){var u=Math.ceil(s/this.xt);s=new e.Ra(t.description),i&&(a.jp(s),n.xf(s));var c=i=1/u,l=0;for(--u;l<u;l++)a.zx(c,s),n.lineTo(s),c+=i;o?n.Up():(a.hp(s),n.lineTo(s))}else o?n.Up():n.$b(a,i);i=!1}return n},t.prototype.xe=function(){},t}();e.yM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.F=function(){return 2},n.prototype.U=function(t,n,r,i){return t instanceof e.R?(t=new e.$c(t),n=new e.$c(n),this.U(t,n,r,i).next()):new e.zM(t,n,r,i)},n.tm=function(t,r,i,a){if(t.u()||r.u())return t;var o=t.pb(),s=r.pb();if(o>s)return t;var u=t.F(),c=r.F(),l=new e.g,h=new e.g,f=new e.g;t.s(l),r.s(h),f.H(l),f.Nb(h);var p=(f=e.la.Qd(i,f,!0))*Math.sqrt(2)*1.00001,d=new e.g;if(d.H(l),d.O(p,p),!d.isIntersecting(h))return t;if(1==o&&2==s)return n.cX(t,r,c,i,a);if(33==u)switch(e.Zk.Ic(c)?(i=new e.Oa(r.description),i.$b(r,!0)):i=r,c){case 1736:return n.oW(t,i,f);case 1607:return n.pW(t,i,f);case 550:return n.mW(t,i,f);case 197:return n.lW(t,i,f);case 33:return n.nW(t,i,f);default:throw e.f.I()}else if(550==u)switch(c){case 1736:return n.HV(t,r,f);case 197:return n.FV(t,r,f);case 33:return n.GV(t,r,f)}return e.pg.tm(t,r,i,a)},n.oW=function(t,n,r){return 0==e.Zc.wH(n,t,r)?t:t.Ea()},n.pW=function(t,n,r){var i=t.w();n=n.Ba();for(var a=r*Math.sqrt(2)*1.00001,o=a*a,s=new e.g;n.Ta();)for(;n.Aa();){var u=n.aa();if(u.s(s),s.O(a,a),s.contains(i)){if(u.Zs(i,r))return t.Ea();var c=u.ac();if(e.b.oc(i,c)<=o)return t.Ea();if(c=u.wc(),e.b.oc(i,c)<=o)return t.Ea()}}return t},n.mW=function(t,n,r){var i=n.Va(0);n=n.D();var a=t.w(),o=new e.b;r=r*Math.sqrt(2)*1.00001,r*=r;for(var s=0;s<n;s++)if(i.mc(2*s,o),e.b.oc(o,a)<=r)return t.Ea();return t},n.lW=function(t,n,r){var i=new e.g;return n.s(i),i.O(r,r),n=t.w(),i.contains(n)?t.Ea():t},n.nW=function(t,n,r){r=r*Math.sqrt(2)*1.00001,r*=r;var i=t.w();return n=n.w(),e.b.oc(i,n)<=r?t.Ea():t},n.HV=function(t,n,r){var i=new e.g;n.s(i),i.O(r,r);for(var a=t.D(),o=!1,s=[],u=0;u<a;u++)s[u]=!1;var c=new e.b;for(u=0;u<a;u++)t.w(u,c),i.contains(c)&&0!=e.Zc.Td(n,c,r)&&(o=!0,s[u]=!0);if(!o)return t;for(n=t.Ea(),u=0;u<a;u++)s[u]||n.yd(t,u,u+1);return n},n.FV=function(t,n,r){var i=new e.g;n.s(i),i.O(r,r),n=t.D();var a=!1;r=[];for(var o=0;o<n;o++)r[o]=!1;var s=new e.b;for(o=0;o<n;o++)t.w(o,s),i.contains(s)&&(a=!0,r[o]=!0);if(!a)return t;for(i=t.Ea(),o=0;o<n;o++)r[o]||i.yd(t,o,o+1);return i},n.GV=function(t,n,r){var i=t.Va(0),a=t.D(),o=n.w(),s=new e.b,u=!1;n=[];for(var c=0;c<a;c++)n[c]=!1;for(r=(c=r*Math.sqrt(2)*1.00001)*c,c=0;c<a;c++)i.mc(2*c,s),e.b.oc(s,o)<=r&&(u=!0,n[c]=!0);if(!u)return t;for(i=t.Ea(),c=0;c<a;c++)n[c]||i.yd(t,c,c+1);return i},n.cX=function(t,n,r,i,a){var o=new e.Ih;t.qn(o);var s=new e.g;return n.s(s),o.Nb(s),o.O(.1*o.N(),.1*o.ca()),(s=new e.Ga).bd(o,!1),1736==r?s.add(n,!0):s.bd(n,!0),e.ak.local().U(t,s,i,a)},n.instance=null,n}(e.Ne);e.Cp=t}(J||(J={})),function(e){var t=function(){function t(e,t,n,r){this.at=null==t,this.ya=-1,this.Vd=e,this.KA=n,this.RU=t.next(),this.Vb=r}return t.prototype.next=function(){return this.at?null:null!=(t=this.Vd.next())?(this.ya=this.Vd.Fa(),e.Cp.tm(t,this.RU,this.KA,this.Vb)):null;var t},t.prototype.Fa=function(){return this.ya},t.prototype.xe=function(){},t}();e.zM=t}(J||(J={})),function(e){var t=function(){function t(t){this.nd=t,this.Fj=new e.g,this.Fj.Ka(),this.uh=new e.g,this.uh.Ka()}return t.prototype.xu=function(){var e=this.Fj.o;this.Fj.o=this.uh.o,this.uh.o=e,e=this.Fj.v,this.Fj.v=this.uh.v,this.uh.v=e,e=this.Fj.A,this.Fj.A=this.uh.A,this.uh.A=e,e=this.Fj.B,this.Fj.B=this.uh.B,this.uh.B=e},t.prototype.qR=function(t,n){if(null!=this.nd&&!this.nd.progress(-1,-1))throw e.f.Mu("user_canceled");var r=!this.Fj.isIntersecting(this.uh);return e.R.Bc(t.F())&&e.R.Bc(n.F())?t.D()>n.D()?this.TE(t,n,r):(this.xu(),t=this.TE(n,t,r),this.xu(),t):550==t.F()&&e.R.Bc(n.F())?(t=this.UE(n,t,r),this.xu(),t):550==n.F()&&e.R.Bc(t.F())?this.UE(t,n,r):550==t.F()&&550==n.F()?t.D()>n.D()?this.VE(t,n):(this.xu(),t=this.VE(n,t),this.xu(),t):0},t.prototype.TE=function(t,n,r){var i=t.Ba(),a=n.Ba(),o=new e.g,s=new e.g,u=17976931348623157e292;if(!r&&this.WZ(t,n,i,a))return 0;for(;i.Ta();)for(;i.Aa();)if((t=i.aa()).s(o),!(o.Xx(this.uh)>u)){for(;a.Ta();)for(;a.Aa();)if((n=a.aa()).s(s),o.Xx(s)<u&&(n=t.vb(n,r),(n*=n)<u)){if(0==n)return 0;u=n}a.ej()}return Math.sqrt(u)},t.prototype.UE=function(t,n,r){var i=t.Ba(),a=new e.g,o=17976931348623157e292,s=new e.b,u=n.D();for(r=!r&&1736==t.F();i.Ta();)for(;i.Aa();){var c=i.aa();if(c.s(a),!(1<u&&a.Xx(this.uh)>o)){for(var l=0;l<u;l++){if(n.w(l,s),r&&0!=e.Zc.Td(t,s,0))return 0;var h=c.ae(s,!1);if(s.sub(c.cc(h)),(h=s.En())<o){if(0==h)return 0;o=h}}r=!1}}return Math.sqrt(o)},t.prototype.VE=function(t,n){for(var r,i=17976931348623157e292,a=new e.b,o=new e.b,s=t.D(),u=n.D(),c=0;c<s;c++)if(t.w(c,a),!(1<u&&this.uh.nL(a)>i))for(var l=0;l<u;l++)if(n.w(l,o),(r=e.b.oc(a,o))<i){if(0==r)return 0;i=r}return Math.sqrt(i)},t.prototype.WZ=function(t,n,r,i){if(1736==t.F()){for(;i.Ta();)if(i.Aa()){var a=i.aa();if(0!=e.Zc.Td(t,a.wc(),0))return!0}i.ej()}if(1736==n.F()){for(;r.Ta();)if(r.Aa()&&(t=r.aa(),0!=e.Zc.Td(n,t.wc(),0)))return!0;r.ej()}return!1},t.prototype.qm=function(e,t){return e.u()||t.u()?NaN:(e.s(this.Fj),t.s(this.uh),this.qR(e,t))},t}(),n=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Y(r,n),r.prototype.U=function(n,r,i){if(null==n||null==r)throw e.f.I();if(n.u()||r.u())return NaN;var a=n.F(),o=r.F();if(33==a){if(33==o)return e.b.vb(n.w(),r.w());if(197==o)return i=new e.g,r.s(i),i.vb(n.w());(a=new e.Hd).add(n),n=a}else if(197==a){if(197==o)return o=new e.g,n.s(o),i=new e.g,r.s(i),i.vb(o);(a=new e.Ga).bd(n,!1),n=a}return 33==o?((o=new e.Hd).add(r),r=o):197==o&&((o=new e.Ga).bd(r,!1),r=o),new t(i).qm(n,r)},r.local=function(){return null===r.instance&&(r.instance=new r),r.instance},r.prototype.F=function(){return 14},r.instance=null,r}(e.Ne);e.AM=n}(J||(J={})),function(e){var t=function(){function t(e,t,n,r){this.mI=e,this.tI=t,this.nd=r,this.NH=n}return t.prototype.next=function(){var e=this.mI.next();return null==e?null:this.gD(e)},t.prototype.Fa=function(){return this.mI.Fa()},t.prototype.gD=function(t){var n=t.F();if(e.R.lo(n))return t;if(197==n)return(n=new e.Ga(t.description)).bd(t,!1),this.gD(n);if(t.u())return t;if(null==t)throw e.f.za();n=t.Ea();for(var r=new e.zb,i=0,a=t.$();i<a;i++)this.aM(t,i,n,r);return n},t.prototype.aM=function(t,n,r,i){if(!(2>t.Ha(n))){var a=t.ua(n),o=t.zc(n)-1,s=t.Va(0),u=t.Lb(n),c=new e.ha(0);c.Db(t.Ha(n)+1);var l=new e.ha(0);for(l.Db(t.Ha(n)+1),c.add(u?a:o),c.add(a),a=new e.b;1<c.size;){var h=c.Gc();c.Rf();var f=c.Gc();t.w(h,a),i.Fc(a),t.w(f,a),i.Sc(a),0<=(f=this.$L(i,a,s,h,f,o))?(c.add(f),c.add(h)):l.add(h)}if(u||l.add(c.get(0)),l.size==c.size)r.addPath(t,n,!0);else if(2<=l.size&&(!this.NH||2!=l.size||!(u||e.b.vb(t.xa(l.get(0)),t.xa(l.get(1)))<=this.tI))){for(n=new e.Ra,i=0,o=l.size;i<o;i++)t.ne(l.get(i),n),0==i?r.xf(n):r.lineTo(n);u&&(this.NH||2!=l.size||r.lineTo(n),r.Up())}}},t.prototype.$L=function(e,t,n,r,i,a){var o=i-1;for(i<=r&&(o=a),a=i=-1,r+=1;r<=o;r++){n.mc(2*r,t);var s=t.x,u=t.y;e.cc(e.ae(t,!1),t),t.x-=s,t.y-=u,(s=t.length())>this.tI&&s>a&&(i=r,a=s)}return i},t.prototype.xe=function(){},t}();e.BM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 29},n.prototype.U=function(t,n,r,i){return t instanceof e.R?(t=new e.$c(t),this.U(t,n,r,i).next()):new e.BM(t,n,r,i)},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.instance=null,n}(e.Ne);e.lD=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 21},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i,a,o,s,u){return t instanceof e.R?(u=new e.$c(t),this.U(u,n,r,[i],a,o,!1,s).next()):!0===s?(r=new e.nD(t,n,r,i,a,!1,!1,u),e.Jh.local().U(r,n,u)):new e.nD(t,n,r,i,a,!1,!1,u)},n.instance=null,n}(e.Ne);e.mD=t}(J||(J={})),function(e){var t=function(){function t(t,n,r,i,a,o,s,u){if(o)throw e.f.Me();if(null==n)throw e.f.I();this.ya=-1,this.ut=t,this.Cg=n,this.Fe=r,this.kt=i,this.to=a,this.xo=-1,this.Vb=u,this.PU=new e.g,this.PU.Ka()}return t.prototype.next=function(){for(var e;null!=(e=this.ut.next());)return this.ya=this.ut.Fa(),this.xo+1<this.kt.length&&this.xo++,this.mS(e,this.kt[this.xo]);return null},t.prototype.Fa=function(){return this.ya},t.prototype.mS=function(t,n){return e.dM.buffer(t,this.Cg,this.Fe,n,this.to,this.Vb)},t.prototype.xe=function(){},t}();e.nD=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 24},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r){if(null==n)throw e.f.I();if(t.u()||1>t.pb())return 0;if(4==r)throw e.f.Me();var i=e.ab.hc(n),a=e.ab.dw(i),o=e.ab.Nv(i);a*=2-a;var s=i.Ld().gi,u=t.F();if(1736==u||197==u)var c=t.sg();else e.R.Ic(u)?(c=new e.Oa(t.description)).$b(t,!0):c=t;if(0==i.Ib(n)){if(e.ab.Cc(n)){c=e.Lh.qj(c,n),1607==u&&c==t&&(c=e.R.$d(t)),t=new e.uc,e.ab.nh(n).sn(t),u=0;for(var l=c.D();u<l;u++){var h=c.xa(u);h.x=e.Lh.nn(h.x,t),c.nb(u,h)}}t=c.Ea(),c=e.Lh.NJ(n,i,c,t)?t:e.ab.$g(c,n,i)}return this.tR(c,r,o,a,s)},n.prototype.tR=function(t,n,r,i,a){var o=new e.da(0),s=0;for(t=t.Ba();t.Ta();)for(;t.Aa();){var u=t.aa(),c=u.ac();u=u.wc(),c.scale(a),u.scale(a),e.gb.Ad(r,i,c.x,c.y,u.x,u.y,o,null,null,n),s+=o.j}return s},n.instance=null,n}(e.Ne);e.EM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 18},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i,a){return t instanceof e.R?(t=new e.$c(t),this.U(t,n,r,i,a).next()):new e.DM(t,r,i,n,-1,-1,a)},n.instance=null,n}(e.Ne);e.CM=t}(J||(J={})),function(e){var t=function(){function t(t,n,r,i,a,o){if(0<o)throw e.f.Me();if(4!=r&&0<a)throw e.f.Me();if(null==n)throw e.f.I();this.ya=-1,this.ut=t,this.Cg=n,this.Fe=r,this.WU=i,this.VU=a}return t.prototype.next=function(){for(var e;null!=(e=this.ut.next());)return this.ya=this.ut.Fa(),this.Ez(e);return null},t.prototype.Fa=function(){return this.ya},t.prototype.Ez=function(t){return e.jj.rs(t,this.Cg,this.Fe,this.WU,this.VU,this.Vb)},t.prototype.xe=function(){},t}();e.DM=t}(J||(J={})),function(e){!function(e){e[e.Unknown=0]="Unknown",e[e.Contains=1]="Contains",e[e.Within=2]="Within",e[e.Equals=3]="Equals",e[e.Disjoint=4]="Disjoint",e[e.Touches=8]="Touches",e[e.Crosses=16]="Crosses",e[e.Overlaps=32]="Overlaps",e[e.NoThisRelation=64]="NoThisRelation",e[e.Intersects=1073741824]="Intersects",e[e.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"}(e.mM||(e.mM={})),e.FM=function(){function t(){}return t.B0=function(n,r,i,a){if(r.u()||n.u())return 4;var o,s=n.F(),u=r.F();switch(e.R.Ic(s)&&(n=o=new e.Oa(n.description),o.$b(n,!0)),e.R.Ic(u)&&(r=o=new e.Oa(r.description),o.$b(r,!0)),s){case 33:switch(u){case 33:return t.MX(n,r,i);case 197:return t.fj(t.WJ(r,n,i));case 550:return t.fj(t.ZJ(r,n,i));case 1607:return t.fj(t.hK(r,n,i,a));case 1736:return t.fj(t.dK(r,n,i))}throw e.f.za();case 197:switch(u){case 33:return t.WJ(n,r,i);case 197:return t.GX(n,r,i);case 550:return t.fj(t.XJ(r,n,i,a));case 1607:return t.fj(t.fK(r,n));case 1736:return t.fj(t.bK(r,n))}throw e.f.za();case 550:switch(u){case 33:return t.ZJ(n,r,i);case 197:return t.XJ(n,r,i,a);case 550:return t.YJ(n,r,i,a);case 1607:return t.fj(t.gK(r,n));case 1736:return t.fj(t.cK(r,n))}throw e.f.za();case 1607:switch(u){case 33:return t.hK(n,r,i,a);case 197:return t.fK(n,r);case 550:return t.gK(n,r);case 1607:return t.SX(n,r);case 1736:return t.fj(t.eK(r,n))}throw e.f.za();case 1736:switch(u){case 33:return t.dK(n,r,i);case 197:return t.bK(n,r);case 550:return t.cK(n,r);case 1607:return t.eK(n,r);case 1736:return t.PX(n,r)}throw e.f.za();default:throw e.f.za()}},t.MX=function(e,n,r){return e=e.w(),n=n.w(),t.aK(e,n,r)},t.aK=function(e,t,n){return e.sub(t),e.En()<=n*n?3:4},t.WJ=function(n,r,i){var a=new e.g;return n.s(a),n=r.w(),t.IX(a,n,i)},t.IX=function(e,t,n){return e.O(-n,-n),e.contains(t)?1:(e.O(n,n),e.contains(t)?8:4)},t.JX=function(e,t,n){return t.contains(n)?1:e.contains(n)?8:4},t.GX=function(n,r,i){var a=new e.g;return n.s(a),n=new e.g,r.s(n),t.HX(a,n,i)},t.HX=function(e,t,n){var r=0;return e.contains(t)&&(r|=1),t.contains(e)&&(r|=2),0!=r?r:(e.O(-n,-n),t.O(-n,-n),e.isIntersecting(t)?((r=e).O(n,n),r=r.contains(t)?1:0,t.O(n,n),0!=(r|=t.contains(e)?2:0)?r:32):((r=e).O(n,n),t.O(n,n),r.isIntersecting(t)?8:4))},t.ZJ=function(e,n,r){return n=n.w(),t.$J(e,n,r)},t.$J=function(e,n,r){for(var i=0,a=e.D();i<a;i++){var o=e.xa(i);if(4!=(o=t.aK(o,n,r)))return 0!=(2&o)&&1!=a?1:o}return 4},t.XJ=function(n,r,i,a){var o=new e.g;return r.s(o),t.LX(n,o,i,a)},t.LX=function(e,n,r,i){n.O(-r,-r),n.O(r,r);for(var a=r=0,o=e.D();a<o;a++){var s=e.xa(a);if(4!=(s=t.fj(t.JX(n,n,s)))&&(r|=s,4==i))return 1073741824}return 0==r?4:2==r?r:32},t.YJ=function(e,n,r,i){for(var a=0,o=0,s=n.D();o<s;o++){var u=n.xa(o);if(4!=(u=t.$J(e,u,r))&&(a++,4==i))return 1073741824}return 0<a?a==n.D()?3==i?1==(u=t.YJ(n,e,r,1))?3:0:1:32:0},t.hK=function(e,n,r,i){return n=n.w(),t.RX(e,n,r,i)},t.KX=function(e,t){var n=null;return null!=(e=e.ib)&&(n=e.oi),null==n?-1:0==(t=n.Xl(t.x,t.y))?4:1==t?1:0},t.RX=function(n,r,i,a){if(0==(1073741839&a))return 64;var o=t.KX(n,r);if(0<o)return o;for(i*=i,o=n.Ba();o.Ta();){var s=o.Pa;if(!n.Lb(s)){var u=n.Ha(s);if(s=n.ua(s),0==u)continue;if(e.b.oc(n.xa(s),r)<=i||1<u&&e.b.oc(n.xa(s+u-1),r)<=i)return 8}if(8!=a)for(;o.Aa();)if(u=(u=o.aa()).cc(u.ae(r,!1)),e.b.oc(u,r)<=i)return 0!=(1073741828&a)?1073741824:1}return 0!=(1073741828&a)?4:64},t.fK=function(n,r){var i=new e.g;return r.s(i),t.QX(n,i)},t.QX=function(e,n){return 0<(e=t.hu(e,n))?e:0},t.hu=function(e,t){return null==(e=e.ib)||null==(e=e.oi)?-1:0==(t=e.rn(t))?4:1==t?1:0},t.gK=function(n,r){var i=new e.g;return r.s(i),0<(n=t.hu(n,i))?n:0},t.Bx=function(n,r){var i=new e.g;return r.s(i),0<(i=t.hu(n,i))?i:-1==i&&(i=new e.g,n.s(i),0<(i=t.hu(r,i)))?t.fj(i):0},t.SX=function(e,n){return 0<(e=t.Bx(e,n))?e:0},t.dK=function(e,n,r){return n=n.w(),t.OX(e,n,r)},t.OX=function(t,n,r){if(0==(t=e.Zc.Td(t,n,r)))return 4;if(1==t)return 1;if(2==t)return 8;throw e.f.za()},t.bK=function(n,r){var i=new e.g;return r.s(i),t.NX(n,i)},t.NX=function(e,n){return 0<(e=t.hu(e,n))?e:0},t.cK=function(e,n){return 0<(e=t.Bx(e,n))?e:0},t.eK=function(e,n){return 0<(e=t.Bx(e,n))?e:0},t.PX=function(e,n){return 0<(e=t.Bx(e,n))?e:0},t.TX=function(t,n){var r=t.F(),i=n.F();if(e.R.Rg(r)){var a=t.ib;if(null!=a&&null!=(a=a.oi)){if(33==i){var o=n.w();a=a.Xl(o.x,o.y)}else o=new e.g,n.s(o),a=a.rn(o);if(1==a)return 1;if(0==a)return 4}}if(e.R.Rg(i)&&null!=(a=n.ib)&&null!=(a=a.oi)){if(33==r?(t=t.w(),a=a.Xl(t.x,t.y)):(n=new e.g,t.s(n),a=a.rn(n)),1==a)return 2;if(0==a)return 4}return 0},t.fj=function(e){return 0!=(1&e)&&(e=-2&e|2),0!=(2&e)&&(e=-3&e|1),e},t}()}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.F=function(){return 15},n.prototype.U=function(t,n,r,i,a){return t instanceof e.R?(t=new e.$c(t),n=new e.$c(n),this.U(t,n,r,i,a).next()):new e.oD(t,n,r,i,void 0===a?-1:a)},n.prototype.Pn=function(t,n,r){this.qv(t)&&(n=e.la.Ng(n,t,!1),t.lj(r)||t.Tu(n,r))},n.prototype.qv=function(t){return e.sy.az(t)},n.instance=null,n}(e.Ne);e.ak=t}(J||(J={})),function(e){var t=function(){function t(t,n,r,i,a){if(this.at=null==n,this.ya=-1,this.Vd=t,this.Cg=r,this.Xe=n.next(),this.Hj=this.Xe.F(),this.Vb=i,this.Li=a,-1!=this.Li&&(0>=this.Li||7<this.Li))throw e.f.I("bad dimension mask")}return t.prototype.next=function(){if(this.at)return null;if(null!=this.gx){var e=this.gx.next();if(null!=e)return e;this.gx=null}for(;null!=(e=this.Vd.next());)return this.ya=this.Vd.Fa(),-1==this.Li?e=this.Ia(e):(this.gx=this.jU(e),e=this.gx.next()),e;return null},t.prototype.Fa=function(){return this.ya},t.prototype.Ia=function(t){var n=this.GL(t);if(null!=n)return n;n=e.la.Uv(this.Xe,t);var r=e.la.Qd(this.Cg,n,!0);n=new e.g,this.Xe.s(n);var i=new e.g;return t.s(i),n.O(2*r,2*r),n.Ia(i),n.O(100*r,100*r),r=e.Yd.clip(this.Xe,n,0,0),t=e.Yd.clip(t,n,0,0),e.pg.hw(t,r,this.Cg,this.Vb)},t.prototype.GJ=function(t,n,r){var i=0;if(0!=(1&n))null==r[0]&&(r[0]=new e.Hd(t)),i++;else for(var a=0;a<r.length-1;a++)r[a]=r[a+1];if(0!=(2&n))null==r[i]&&(r[i]=new e.Oa(t)),i++;else for(a=i;a<r.length-1;a++)r[a]=r[a+1];if(0!=(4&n))null==r[i]&&(r[i]=new e.Ga(t)),i++;else for(a=i;a<r.length-1;a++)r[a]=r[a+1];if(3!=i){for(t=[],a=0;a<i;a++)t[a]=r[a];return new e.$c(t)}return new e.$c(r)},t.prototype.jU=function(t){var n=this.GL(t);if(null!=n){var r=[null,null,null];return r[n.pb()]=n,this.GJ(t.description,this.Li,r)}n=e.la.Uv(this.Xe,t),r=e.la.Qd(this.Cg,n,!0),n=new e.g,this.Xe.s(n),n.O(2*r,2*r);var i=new e.g;return t.s(i),n.Ia(i),n.O(100*r,100*r),r=e.Yd.clip(this.Xe,n,0,0),n=e.Yd.clip(t,n,0,0),r=e.pg.wA(n,r,this.Cg,this.Vb),this.GJ(t.description,this.Li,r)},t.prototype.GL=function(n){var r=e.la.Uv(n,this.Xe),i=e.la.Qd(this.Cg,r,!0);r=n.F();var a=n.u(),o=this.Xe.u();if(!(o=a||o)){o=new e.g,n.s(o);var s=new e.g;this.Xe.s(s),s.O(2*i,2*i),o=!o.isIntersecting(s)}if(!o)if(4==(s=e.FM.TX(this.Xe,n)))o=!0;else{if(0!=(2&s))return this.Xe;if(0!=(1&s))return n}if(o)return(i=e.R.Se(r))<(o=e.R.Se(this.Hj))?t.rC(n,a):i>o||0==i&&550==r&&33==this.Hj?this.rK():t.rC(n,a);if((-1==this.Li||4==this.Li)&&197==r&&197==this.Hj)return i=this.Xe,r=new e.g,n.s(r),a=new e.g,i.s(a),r.Ia(a),i=new e.Ih,n.copyTo(i),i.mp(r),i;if(197==r&&0==e.R.Se(this.Hj)||197==this.Hj&&0==e.R.Se(r))return a=197==r?n:this.Xe,n=197==r?this.Xe:n,r=new e.g,a.s(r),e.Yd.clip(n,r,i,0);if(0==e.R.Se(r)&&0<e.R.Se(this.Hj)||0<e.R.Se(r)&&0==e.R.Se(this.Hj)){if(i=e.la.Ng(this.Cg,n,!1),550==r||33==r)return e.pg.lH(n,this.Xe,i);if(550==this.Hj||33==this.Hj)return e.pg.lH(this.Xe,n,i);throw e.f.za()}return-1!=this.Li&&2!=this.Li||1607!=r||1736!=this.Hj?-1!=this.Li&&2!=this.Li||1736!=r||1607!=this.Hj?null:this.DL(this.Xe,n):this.DL(n,this.Xe)},t.prototype.DL=function(t,n){var r=t,i=n,a=e.la.Ng(this.Cg,n,!1),o=new e.g;i.s(o);var s=new e.g;r.s(s),s.O(2*a,2*a),o.Ia(s),o.O(10*a,10*a),r=t=e.Yd.clip(t,o,0,0),s=new e.ha(0);var u=-1,c=i.ib;if(null!=c){var l=c.oi;if(null!=l){u=0,s.Db(r.D()+r.$());for(var h=new e.g,f=r.Ba();f.Ta();)for(;f.Aa();){f.aa().s(h);var p=l.rn(h);1==p?s.add(1):0==p?s.add(0):(s.add(-1),u++)}}}if(5<n.D()&&(c=(i=n=e.Yd.clip(n,o,0,0)).ib),0>u&&(u=r.gA()),o=r.D()+i.D(),u*i.D()>Math.log(o)*o*4)return null;o=null,u=i.Ba(),null!=c&&null!=c.Hb&&(o=c.Hb),null==o&&20<i.D()&&(o=e.la.$E(i)),t=t.Ea(),i=null,c=r.Ba(),l=[0,0,0,0,0,0,0,0,0],h=new e.ie(0),f=new e.og,p=-1;for(var d=0,v=0,y=0<s.size,b=-1;c.Ta();){b=c.Pa;var g=0;for(p=-1,d=0;c.Aa();){var m=y?e.L.truncate(s.get(v)):-1;v++;var w=c.aa();if(0>m){if(null!=o)for(null==i?i=o.LS(w,a):i.wn(w,a),m=i.next();-1!=m;m=i.next()){u.Rb(o.ga(m)),m=u.aa();var O=w.Ia(m,null,l,null,a);for(m=0;m<O;m++)h.add(l[m])}else for(u.ej();u.Ta();)for(;u.Aa();)for(m=u.aa(),O=w.Ia(m,null,l,null,a),m=0;m<O;m++)h.add(l[m]);if(0<h.size){h.Zd(0,h.size,(function(e,t){return e-t}));var j=0;h.add(1),O=-1,m=0;for(var _=h.size;m<_;m++){var x=h.get(m);if(x!=j){var k=!1;if(0!=j||1!=x?(w.jh(j,x,f),j=f.get()):(j=w,k=!0),2<=g){if(t.ds(r,b,p,d,3==g),1!=this.CE(n,j.ac(),a)&&1!=this.DE(n,j,a))return null;t.$b(j,!1),g=1,d=0}else switch(O=this.DE(n,j,a),O){case 1:k?2>g?(p=c.wb()-r.ua(b),d=1,g=0==g?3:2):d++:(t.$b(j,0==g),g=1);break;case 0:g=0,p=-1,d=0;break;default:return null}j=x}}}else{if(0>(m=this.CE(n,w.ac(),a)))return null;1==m?(2>g&&(p=c.wb()-r.ua(b),g=0==g?3:2),d++):(p=-1,d=0)}h.clear(!1)}else 0!=m&&1==m&&(0==g?(g=3,p=c.wb()-r.ua(b)):1==g?(g=2,p=c.wb()-r.ua(b)):d++)}2<=g&&(t.ds(r,b,p,d,3==g),p=-1)}return t},t.prototype.CE=function(t,n,r){return e.Oe.Jm(t,n,r)},t.prototype.DE=function(t,n,r){var i=n.ac();n=n.wc();var a=e.Oe.Jm(t,i,r),o=e.Oe.Jm(t,n,r);return 1==a&&0==o||0==a&&1==o?-1:0==a||0==o?0:1==a||1==o?1:((a=new e.b).add(i,n),a.scale(.5),0==(t=e.Oe.Jm(t,a,r))?0:1==t?1:-1)},t.rC=function(e,t){return t?e:e.Ea()},t.prototype.rK=function(){return null==this.lI&&(this.lI=this.Xe.Ea()),this.lI},t.prototype.xe=function(){},t}();e.oD=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 28},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i,a,o,s){return t instanceof e.R?(t=new e.$c(t),this.U(t,n,r,i,a,o,s).next()):new e.GM(t,n,r,i,a,o,s)},n.instance=null,n}(e.Ne);e.pD=t}(J||(J={})),function(e){var t=function(){function t(e,t,n,r,i,a,o){this.ya=-1,this.Vd=e,this.Oj=t,this.La=n,this.Qi=r,this.lB=i,this.hI=a,this.nd=o}return t.prototype.next=function(){var e=this.Vd.next();return null!=e?(this.ya=this.Vd.Fa(),this.tM(e)):null},t.prototype.Fa=function(){return this.ya},t.prototype.tM=function(t){var n=0>=this.hI?e.la.Ng(this.Oj,t,!1):this.hI;return e.RL.U(t,this.La,this.Qi,this.lB,n,this.nd)},t.prototype.xe=function(){},t}();e.GM=t}(J||(J={})),function(e){var t;(t=e.yp||(e.yp={}))[t.clipToDomainOnly=1]="clipToDomainOnly",t[t.clipWithHorizon=2]="clipWithHorizon",t[t.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 0},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r){return t instanceof e.R?(t=new e.$c(t),this.U(t,n,r).next()):new e.HM(t,n,r)},n.prototype.transform=function(t,n,r,i){return e.Bp.transform(t,n,r,i,!0)},n.prototype.BL=function(t,n,r){return e.Bp.BL(t,n,r)},n.prototype.zu=function(t,n,r,i){return e.Bp.zu(t,n,r,i)},n.prototype.KZ=function(t,n,r,i){return e.Bp.Kr(t,n,r,i)},n.instance=null,n}(e.Ne);e.Rr=n}(J||(J={})),function(e){var t=function(){function t(e,t,n){this.ya=-1,this.Vd=e,this.eV=t,this.nd=n}return t.prototype.next=function(){var t=this.Vd.next();return null!=t?(this.ya=this.Vd.Fa(),e.Bp.$g(t,this.eV,this.nd)):null},t.prototype.Fa=function(){return this.ya},t.prototype.xe=function(){},t}();e.HM=t}(J||(J={})),function(e){var t=function(){function t(){}return t.prototype.reset=function(){this.vh=this.Ek=-1,this.ct=this.Dq=!1},t.prototype.MR=function(e,t,n){for(e.Rb(t,n);e.Aa();){var r=e.aa();if(0!=(r=r.Pb()))return e.wb()}for(e.Rb(t,n);e.mA();)if(0!=(r=(r=e.ti()).Pb()))return e.wb();return-1},t.prototype.NR=function(e,t){for(e.Rb(t,-1);e.mA();)if(0!=e.ti().Pb())return e.wb();return-1},t.prototype.LR=function(e,t){for(e.Rb(t,-1),e.aa();e.Aa();)if(0!=e.aa().Pb())return e.wb();return-1},t.prototype.KR=function(t,n,r,i){if(this.Ek=this.MR(n,r,i),-1!=this.Ek){n.Rb(this.Ek,-1);var a=n.aa(),o=a.cc(a.ae(t,!1));if(r=e.b.oc(o,t),(i=new e.b).K(o),i.sub(a.ac()),(o=new e.b).K(t),o.sub(a.ac()),this.Dq=0>i.Di(o),this.vh=this.LR(n,this.Ek),-1!=this.vh){n.Rb(this.vh,-1);var s=(a=n.aa()).ae(t,!1);s=a.cc(s);var u=e.b.oc(s,t);u>r?this.vh=-1:(i.K(s),i.sub(a.ac()),o.K(t),o.sub(a.ac()),this.ct=0>i.Di(o))}-1==this.vh&&(this.vh=this.NR(n,this.Ek),-1!=this.vh&&(n.Rb(this.vh,-1),s=(a=n.aa()).ae(t,!1),s=a.cc(s),(u=e.b.oc(s,t))>r?this.vh=-1:(i.K(s),i.sub(a.ac()),o.K(t),o.sub(a.ac()),this.ct=0>i.Di(o),t=this.Ek,this.Ek=this.vh,this.vh=t,t=this.Dq,this.Dq=this.ct,this.ct=t)))}},t.prototype.lP=function(e,t,n,r,i){return n=n.Ba(),this.KR(e,n,r,i),-1!=this.Ek&&-1==this.vh?this.Dq:-1!=this.Ek&&-1!=this.vh?this.Dq==this.ct?this.Dq:(n.Rb(this.Ek,-1),e=n.aa().qg(),n.Rb(this.vh,-1),t=n.aa().qg(),0<=e.Di(t)):t},t}(),n=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Y(r,n),r.local=function(){return null===r.instance&&(r.instance=new r),r.instance},r.prototype.F=function(){return 3},r.prototype.Xz=function(t,n,r){var i;if(void 0===i&&(i=!1),t.u())return new e.lm;n=n.w();var a=t,o=t.F();switch(197==o&&((a=new e.Ga).bd(t,!1),o=1736),o){case 33:return this.oJ(a,n);case 550:return this.ZI(a,n);case 1607:case 1736:return this.vV(a,n,r,i);default:throw e.f.Y("not implemented")}},r.prototype.Yz=function(t,n){if(t.u())return new e.lm;n=n.w();var r=t,i=t.F();switch(197==i&&((r=new e.Ga).bd(t,!1),i=1736),i){case 33:return this.oJ(r,n);case 550:case 1607:case 1736:return this.ZI(r,n);default:throw e.f.Y("not implemented")}},r.prototype.Zz=function(t,n,r,i){if(0>i)throw e.f.I();if(t.u())return[];n=n.w();var a=t,o=t.F();switch(197==o&&((a=new e.Ga).bd(t,!1),o=1736),o){case 33:return this.kW(a,n,r,i);case 550:case 1607:case 1736:return this.NV(a,n,r,i);default:throw e.f.Y("not implemented")}},r.prototype.vV=function(n,r,i,a){if(1736==n.F()&&i&&(i=new e.g,n.s(i),i=e.la.Qd(null,i,!1),0!=e.Zc.Td(n,r,a?0:i))){var o=new e.lm(r,0,0);return a&&o.$K(!0),o}var s=n.Ba();o=new e.b;for(var u=i=-1,c=17976931348623157e292,l=0;s.Ta();)for(;s.Aa();){var h=s.aa();h=h.cc(h.ae(r,!1));var f=e.b.oc(h,r);f<c?(l=1,o=h,i=s.wb(),u=s.Pa,c=f):f==c&&l++}return o=new e.lm(o,i,Math.sqrt(c)),a&&(s.Rb(i,u),h=s.aa(),a=0>e.b.fp(r,h.ac(),h.wc()),1<l&&((l=new t).reset(),a=l.lP(r,a,n,i,u)),o.$K(a)),o},r.prototype.oJ=function(t,n){return t=t.w(),n=e.b.vb(t,n),new e.lm(t,0,n)},r.prototype.ZI=function(t,n){for(var r=t.Va(0),i=t.D(),a=t=0,o=0,s=17976931348623157e292,u=0;u<i;u++){var c=new e.b;r.mc(2*u,c);var l=e.b.oc(c,n);l<s&&(a=c.x,o=c.y,t=u,s=l)}return(n=new e.lm).Jy(a,o,t,Math.sqrt(s)),n},r.prototype.kW=function(t,n,r,i){return 0==i?[]:(r*=r,t=t.w(),(n=e.b.oc(t,n))<=r?(r=[],(i=new e.lm).Jy(t.x,t.y,0,Math.sqrt(n)),r[0]=i):r=[],r)},r.prototype.NV=function(t,n,r,i){if(0==i)return[];var a=t.Va(0),o=t.D();t=[],r*=r;for(var s=0;s<o;s++){var u=a.read(2*s),c=a.read(2*s+1),l=n.x-u,h=n.y-c;(l=l*l+h*h)<=r&&((h=new e.lm).Jy(u,c,s,Math.sqrt(l)),t.push(h))}return n=t.length,t.sort((function(e,t){return e.La<t.La?-1:e.La==t.La?0:1})),i>=n||(t.length=i),t.slice(0)},r.instance=null,r}(e.Ne);e.my=n}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 4},n.prototype.U=function(t,n,r,i,a){return e.mm.hC(t,n,r,i,a)},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.qv=function(t){return e.Du.bz(t)},n.prototype.Pn=function(t,n,r){e.Du.oE(t,n,r)},n.instance=null,n}(e.Ne);e.IM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 33},n.prototype.U=function(t,n,r,i,a){return 1073741824===t?!e.wd.iC(n,r,i,4,a):e.wd.iC(n,r,i,t,a)},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.qv=function(t){return e.Du.bz(t)},n.prototype.Pn=function(t,n,r){e.Du.oE(t,n,r)},n.instance=null,n}(e.Ne);e.kj=t}(J||(J={})),function(e){var t=function(){function t(t,n,r,i){if(this.nd=i,this.MU=r,this.ya=-1,null==t)throw e.f.I();this.Fk=t,this.Oj=n}return t.prototype.next=function(){var t;if(null!=(t=this.Fk.next())){if(this.ya=this.Fk.Fa(),null!=this.nd&&!this.nd.progress(-1,-1))throw e.f.Mu("user_canceled");return this.MC(t)}return null},t.prototype.Fa=function(){return this.ya},t.prototype.MC=function(t){if(null==t)throw e.f.I();return e.ny.gL(t,this.Oj,this.MU,this.nd)},t.prototype.xe=function(){},t}();e.JM=t}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 26},n.prototype.U=function(t,n,r,i){return t instanceof e.R?(t=new e.$c(t),this.U(t,n,r,i).next()):new e.JM(t,n,r,i)},n.prototype.zq=function(t,n,r,i,a){return 0<(void 0!==i?e.ny.zq(t,n,r,i,a):e.ny.zq(t,n,!1,null,r))},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.instance=null,n}(e.Ne);e.jm=t}(J||(J={})),function(e){var t=function(){function e(){this.Rq=0}return e.prototype.QY=function(e){this.Rq&=-2,this.Rq|=e?1:0},e.prototype.oq=function(){return 0!=(1&this.Rq)},e.prototype.IG=function(){return this.oq()?0:1},e}();e.d_=t;var n=function(){},r=function(e,t,n,r){this.x=e,this.y=t,this.Hi=n,this.Km=r},i=function(){function e(e){this.Ie=e}return e.prototype.compare=function(e,t,n){return e=e.ga(n),t=this.Ie.vf.read(2*t),0>(t-=e=this.Ie.vf.read(2*e))?-1:0<t?1:0},e}(),a=function(){function e(e){this.Ie=e}return e.prototype.compare=function(e,t,n){t=this.Ie.eb[t],e=this.Ie.eb[e.ga(n)];var r=t.oq(),i=e.oq();n=t.ue.Te(this.Ie.cp,0);var a=e.ue.Te(this.Ie.cp,0);return n==a&&((r=.5*((n=Math.min(r?t.ue.na:t.ue.ma,i?e.ue.na:e.ue.ma))-this.Ie.cp)+this.Ie.cp)==this.Ie.cp&&(r=n),n=t.ue.Te(r,0),a=e.ue.Te(r,0)),n<a?-1:n>a?1:0},e}(),o=function(){function t(t,n){this.PJ=new e.b,this.parent=t,this.yT=n}return t.prototype.Lr=function(e,t,n){var r=this.parent,i=this.yT;n.Zd(e,t,(function(e,t){return r.Qh(e,t,i)}))},t.prototype.sq=function(e){return e=this.parent.ni.get(e),this.parent.vf.mc(2*(e>>1),this.PJ),this.PJ.y+(0!=(1&e)?this.parent.Qj:-this.parent.Qj)},t}(),s=function(){function s(t,n,r,i,a){this.aI=t.description,this.W=t,this.Wg=n,this.Qj=e.la.Ng(this.Wg,t,!1),this.Vo=e.la.Ng(this.Wg,t,!0),this.gB=r,this.KU=this.aI.Ca,this.eb=[],this.Io=[],this.sh=new e.Ap,this.cb=new e.bk,this.fe=new e.Od,this.MH=this.yl=a}return s.prototype.BA=function(){return this.MH=!0,(!e.R.Bc(this.W.F())||this.qF()&&this.nF(!1))&&this.wP()?e.R.Bc(this.W.F())?this.zP()?1607==this.W.F()?this.BP()?2:0:this.CP()?this.DP():0:0:2:0},s.prototype.TC=function(t,n){var r=this.vf.read(2*t);t=this.vf.read(2*t+1);var i=this.vf.read(2*n);return n=this.vf.read(2*n+1),!e.Fu.jw(r,t,i,n,this.Qj*this.Qj)||0!=this.W.pb()&&r==i&&t==n},s.prototype.qF=function(){for(var t=this.W,n=t.Gf?3:2,r=0,i=t.$();r<i;r++)if(t.Ha(r)<n)return this.fe=new e.Od(1,r,0),!1;return!0},s.prototype.nF=function(t){var n=this.W,r=n.Ba(),i=n.hasAttribute(1);for(n=i?e.la.hF(this.Wg,n,!1):0;r.Ta();)for(;r.Aa();){var a=r.aa();if(!(a.Pb()>this.Qj)){if(t&&i){var o=a.Ks(1,0);if(a=a.Ks(1,0),Math.abs(a-o)>n)continue}return this.fe=new e.Od(2,r.wb(),-1),!1}}return!0},s.prototype.wP=function(){var t=this.W,n=null;e.R.Bc(this.W.F())&&(n=this.W);var r=(this.MH||this.yl)&&null!=n,a=t.D();this.vf=t.Va(0),this.ni=new e.ha(0),this.ni.Db(2*a),this.mi=new e.ha(0),this.mi.Db(2*a),r&&(null==this.Nl&&(this.Nl=new e.ha(0)),this.Nl.Db(a));for(var s=t=0;s<a;s++)if(this.ni.add(2*s),this.ni.add(2*s+1),this.mi.add(2*s),this.mi.add(2*s+1),r){for(;s>=n.zc(t);)t++;this.Nl.add(t)}for((new e.Eu).sort(this.mi,0,2*a,new o(this,r)),this.cb.clear(),this.cb.kp(new i(this)),this.cb.Le(a),n=0,a*=2;n<a;n++)if(r=this.mi.get(n),r=(t=this.ni.get(r))>>1,0==(1&t)){if(t=this.cb.addElement(r,-1),-1!=(s=this.cb.Be(t))&&!this.TC(this.cb.ga(s),r))return this.fe=new e.Od(3,r,this.cb.ga(s)),!1;var u=this.cb.hb(t);if(-1!=u&&!this.TC(this.cb.ga(u),r))return this.fe=new e.Od(3,r,this.cb.ga(u)),!1}else if(t=this.cb.search(r,-1),s=this.cb.Be(t),u=this.cb.hb(t),this.cb.zd(t,-1),-1!=s&&-1!=u&&!this.TC(this.cb.ga(s),this.cb.ga(u)))return this.fe=new e.Od(3,this.cb.ga(s),this.cb.ga(u)),!1;return!0},s.prototype.zP=function(){return 10>this.W.D()?this.xP():this.yP()},s.prototype.yP=function(){var t=new e.Yc;t.Bb(this.W);var n=new e.Od;return!e.Hu.$I(!1,t,this.Qj,n,this.nd)||(n.Ql=t.Ua(n.Ql),n.Rl=t.Ua(n.Rl),this.fe.Or(n),!1)},s.prototype.xP=function(){var t=this.W,n=t.Ba();for(t=t.Ba();n.Ta();)for(;n.Aa();){var r=n.aa();if(!n.ko()||!n.uU()){t.gY(n);do{for(;t.Aa();){var i=t.aa();if(0!=(i=r.Zr(i,this.Qj,!0)))return this.fe=new e.Od(2==i?5:4,n.wb(),t.wb()),!1}}while(t.Ta())}}return!0},s.prototype.CP=function(){var t=this.W;this.eb.length=0,this.Io.length=0,this.fg=t.Ba(),this.fg.tC();var n=new e.ha(0);n.Db(10);var r=NaN,i=0,a=0;for(t=2*t.D();a<t;a++){var o=this.mi.get(a);if(0==(1&(o=this.ni.get(o)))){var s=this.vf.read(2*(o>>=1)),u=this.vf.read(2*o+1);if(0!=n.size&&(s!=r||u!=i)){if(!this.HJ(n))return!1;null!=n&&n.clear(!1)}n.add(o),r=s,i=u}}return!!this.HJ(n)},s.prototype.BP=function(){for(var t=this.W,r=Array(t.$()),i=0,a=t.$();i<a;i++)r[i]=t.ho(i);a=new n;var o=new e.b;i=this.mi.get(0);var s=(i=this.ni.get(i))>>1;this.vf.mc(2*s,o);var u=r[i=this.Nl.get(s)],c=t.ua(i),l=t.zc(i)-1;a.kl=s==c||s==l,a.Ty=this.yl?!u&&a.kl:a.kl,a.Hi=i,a.x=o.x,a.y=o.y,a.Km=s;for(var h=new n,f=1,p=this.mi.size;f<p;f++)if(i=this.mi.get(f),0==(1&(i=this.ni.get(i)))){this.vf.mc(2*(s=i>>1),o),(i=this.Nl.get(s))!=a.Hi&&(u=r[i],c=t.ua(i),l=t.zc(i)-1);var d=s==c||s==l,v=this.yl?!u&&a.kl:a.kl;if(h.x=o.x,h.y=o.y,h.Hi=i,h.Km=s,h.Ty=v,h.kl=d,h.x==a.x&&h.y==a.y)if(this.yl){if(!(h.Ty&&a.Ty||h.Hi==a.Hi&&(h.kl||a.kl)))return this.fe=new e.Od(8,h.Km,a.Km),!1}else if(!h.kl||!a.kl)return this.fe=new e.Od(5,h.Km,a.Km),!1;i=a,a=h,h=i}return!0},s.prototype.tF=function(){for(var t=this.W,n=[],i=-1,a=!1,o=0,s=t.$();o<s;o++)t.lw(o)&&(a=!1,i++,o<s-1&&(t.lw(o+1)||(a=!0))),n[o]=a?i:-1;a=new e.b,o=this.mi.get(0);var u=(o=this.ni.get(o))>>1;this.vf.mc(2*u,a),o=this.Nl.get(u),i=new r(a.x,a.y,o,u,n[o]),t=[];var c=1;for(s=this.mi.size;c<s;c++)if(o=this.mi.get(c),0==(1&(o=this.ni.get(o)))){if(this.vf.mc(2*(u=o>>1),a),o=this.Nl.get(u),(o=new r(a.x,a.y,o,u,n[o])).x==i.x&&o.y==i.y){if(o.Hi==i.Hi)return this.fe=new e.Od(9,o.Km,i.Km),!1;0<=n[o.Hi]&&n[o.Hi]==n[i.Hi]&&(0!=t.length&&t[t.length-1]==i||t.push(i),t.push(o))}i=o}if(0==t.length)return!0;for(o=new e.Ap(!0),e.L.Hv(n,-1),a=-1,(c=new e.b).Tc(),i=0,s=t.length;i<s;i++){(u=t[i]).x==c.x&&u.y==c.y||(a=o.Th(0),c.x=u.x,c.y=u.y);var l=n[u.Hi];-1==l&&(l=o.Th(2),n[u.Hi]=l),o.addElement(l,a),o.addElement(a,l)}for((s=new e.ha(0)).Db(10),i=o.re;-1!=i;i=o.$z(i))if(0==(1&(t=o.BG(i)))&&0!=(2&t)){for(t=-1,s.add(i),s.add(-1);0<s.size;){if(a=s.Gc(),s.Rf(),c=s.Gc(),s.Rf(),0!=(1&(u=o.BG(c)))){t=0==(2&u)?a:c;break}for(o.IY(c,1|u),u=o.sc(c);-1!=u;u=o.hb(u))(l=o.getData(u))!=a&&(s.add(l),s.add(c))}if(-1!=t){for(o=-1,i=0,s=n.length;i<s;i++)if(n[i]==t){o=i;break}return this.fe=new e.Od(10,o,-1),!1}}return!0},s.prototype.DP=function(){var t=this.W;if(0>=t.Pe())return this.fe=new e.Od(6,1==t.$()?1:-1,-1),0;if(1==t.$())return this.yl&&!this.tF()?0:2;this.Mo=e.ha.Af(t.$(),0),this.tB=e.ha.Af(t.$(),-1);for(var n=-1,r=0,i=0,o=t.$();i<o;i++){var s=t.rm(i);if(this.Mo.write(i,0>s?0:256),0<s)n=i,r=s;else{if(0==s)return this.fe=new e.Od(6,i,-1),0;if((0>n||r<Math.abs(s))&&(this.fe=new e.Od(7,i,-1),this.yl))return 0;this.tB.write(i,n)}}for(this.Lt=t.$(),this.an=new e.ha(0),this.an.Db(10),o=t.D(),this.cp=NaN,(t=new e.ha(0)).Db(10),this.jr=e.ha.Af(o,-1),this.nx=e.ha.Af(o,-1),null!=this.Dj?this.Dj.clear(!1):this.Dj=new e.ha(0),this.Dj.Db(10),this.cb.clear(),this.cb.kp(new a(this)),n=0,o*=2;0<this.Lt&&n<o;n++)if(r=this.mi.get(n),0==(1&(r=this.ni.get(r)))){if((i=this.vf.read(2*(r>>=1)+1))!=this.cp&&0!=t.size){if(!this.cu(t))return 0;null!=t&&t.clear(!1)}t.add(r),this.cp=i}return 0<this.Lt&&!this.cu(t)?0:this.yl?0==this.fe.pi&&this.tF()?2:0:0==this.fe.pi?2:1},s.prototype.HJ=function(t){if(1==t.size)return!0;for(var n=0,r=t.size;n<r;n++){var i=t.get(n);this.fg.Rb(i);var a=this.fg.ti();this.eb.push(this.Av(a,i,this.fg.Pa,!0)),this.fg.aa(),a=this.fg.aa(),this.eb.push(this.Av(a,i,this.fg.Pa,!1))}var o=this;for(this.eb.sort((function(e,t){return o.hR(e,t)})),-1==(i=this.sh.re)&&(i=this.sh.Th(0)),this.sh.vn(this.eb.length),n=0,r=this.eb.length;n<r;n++)this.sh.addElement(i,n);n=!0;for(var s=r=-1;n&&(n=!1,-1!=(a=this.sh.sc(i)));)for(var u=this.sh.hb(a);-1!=u;)if(r=this.sh.getData(a),s=this.sh.getData(u),(r=this.eb[r].ap)!=(s=this.eb[s].ap))u=this.sh.hb(a=u);else if(n=!0,this.sh.jd(i,a),a=this.sh.Be(u),-1==(u=this.sh.jd(i,u))||-1==a)break;if(n=this.sh.Hs(i),this.sh.vF(i),0<n)return this.fe=new e.Od(5,r,s),!1;for(n=0,r=t.size;n<r;n++)this.eC(this.eb[n]);return this.eb.length=0,!0},s.prototype.cu=function(t){for(var n=0,r=t.size;n<r;n++){var i=t.get(n),a=this.jr.read(i);if(-1!=a){var o=this.cb.ga(a);this.Dj.add(o),this.cb.zd(a,-1),this.eC(this.eb[o]),this.eb[o]=null,this.jr.write(i,-1)}-1!=(a=this.nx.read(i))&&(o=this.cb.ga(a),this.Dj.add(o),this.cb.zd(a,-1),this.eC(this.eb[o]),this.eb[o]=null,this.nx.write(i,-1))}for(n=0,r=t.size;n<r;n++){if(i=t.get(n),this.fg.Rb(i),(a=this.fg.ti()).na>a.ma){var s=this.fg.wb(),u=this.Av(a,i,this.fg.Pa,!0);0<this.Dj.size?(o=this.Dj.Gc(),this.Dj.Rf(),this.eb[o]=u):(o=this.eb.length,this.eb.push(u)),a=this.cb.addElement(o,-1),-1==this.jr.read(s)?this.jr.write(s,a):this.nx.write(s,a),0==(3&this.Mo.read(this.fg.Pa))&&this.an.add(a)}this.fg.aa(),(a=this.fg.aa()).na<a.ma&&(s=this.fg.nk(),u=this.Av(a,i,this.fg.Pa,!1),0<this.Dj.size?(o=this.Dj.Gc(),this.Dj.Rf(),this.eb[o]=u):(o=this.eb.length,this.eb.push(u)),a=this.cb.addElement(o,-1),-1==this.jr.read(s)?this.jr.write(s,a):this.nx.write(s,a),0==(3&this.Mo.read(this.fg.Pa))&&this.an.add(a))}for(n=0,r=this.an.size;n<r&&0<this.Lt;n++)if(a=this.an.get(n),0==(3&this.Mo.read(this.eb[this.cb.ga(a)].sB))){t=-1,i=this.cb.Be(a);var c=a;u=null,o=-1;for(var l=0;-1!=i&&(o=this.cb.ga(i),o=(u=this.eb[o]).sB,0==(3&(l=this.Mo.read(o))));)c=i,i=this.cb.Be(i);-1==i?(s=1,i=c):(t=1==(3&l)?o:this.tB.read(o),s=0!=u.IG()?0:1,i=this.cb.hb(i));do{if(o=this.cb.ga(i),o=(u=this.eb[o]).sB,0==(3&(c=this.Mo.read(o)))){if(s!=u.IG())return this.fe=new e.Od(6,o,-1),!1;if(c=252&c|(l=0==s||u.oq()?2:1),this.Mo.write(o,l),2==l&&0==this.fe.pi&&this.tB.read(o)!=t&&(this.fe=new e.Od(7,o,-1),this.yl))return!1;if(this.Lt--,0==this.Lt)return!0}1==(3&c)&&(t=o),c=i,i=this.cb.hb(i),s=0!=s?0:1}while(c!=a)}return null!=this.an?this.an.clear(!1):this.an=new e.ha(0),!0},s.prototype.Av=function(t,n,r,i){if(322!=t.F())throw e.f.za();return(t=this.DQ(t)).ap=n,t.sB=r,t.Rq=0,t.QY(i),t},s.prototype.DQ=function(n){if(0<this.Io.length){var r=this.Io[this.Io.length-1];--this.Io.length,n.copyTo(r.ue)}else(r=new t).ue=e.zD.$d(n);return r},s.prototype.eC=function(e){322==e.ue.F()&&this.Io.push(e)},s.prototype.EV=function(){for(var t=this.W.D(),n=new e.ha(0),r=0;r<t;r++)n.add(r);var i=this;for(n.Zd(0,t,(function(e,t){return i.wv(e,t)})),r=1;r<t;r++)if(0==this.wv(n.get(r-1),n.get(r)))return this.fe=new e.Od(3,n.get(r-1),n.get(r)),0;return 2},s.prototype.bX=function(){return this.qF()&&this.nF(!0)?2:0},s.prototype.HW=function(){return this.BA()},s.prototype.JV=function(){for(var t=this.W.D(),n=new e.ha(0),r=0;r<t;r++)n.add(r);var i=this;n.Zd(0,t,(function(e,t){return i.ZP(e,t)}));var a=Array(t);for(e.L.Hv(a,!1),a[n.get(0)]=!0,r=1;r<t;r++){var o=n.get(r-1),s=n.get(r);a[s]=0!=this.wv(o,s)}n=this.W.Ea(),o=this.W,s=0;var u=1;for(r=0;r<t;r++)a[r]?u=r+1:(s<u&&n.yd(o,s,u),s=r+1);return s<u&&n.yd(o,s,u),n.Jg(2,this.Vo),n},s.prototype.fX=function(){var t=this.W,n=t.Ba(),r=t.Ba(),i=this.W.Ea(),a=this.W,o=t.hasAttribute(1),s=o?e.la.hF(this.Wg,t,!0):0,u=new e.ha(0),c=new e.ha(0);for(u.Db(e.L.truncate(t.D()/2+1)),c.Db(e.L.truncate(t.D()/2+1));n.Ta();)if(r.Ta(),!(2>t.Ha(n.Pa))){r.iY();for(var l,h,f=!0;n.Aa();){var p=n.aa(),d=r.ti();if(n.wb()>r.wb())break;f&&(u.add(n.wb()),c.add(r.nk()),f=!1),h=u.Gc();var v=n.nk();if(1<v-h){var y=new e.b;y.tc(t.xa(h),t.xa(v)),l=y.length()}else l=p.Pb();h=c.Gc(),1<(v=r.wb())-h?((y=new e.b).tc(t.xa(h),t.xa(v)),h=y.length()):h=d.Pb(),l>this.Vo?u.add(n.nk()):o&&(l=t.Rc(1,u.Gc(),0),p=p.us(1,0),Math.abs(p-l)>s&&u.add(n.nk())),h>this.Vo?c.add(r.wb()):o&&(l=t.Rc(1,c.Gc(),0),p=d.us(1,0),Math.abs(p-l)>s&&c.add(r.wb()))}if(u.Gc()<c.Gc()?u.size>c.size?u.Rf():c.Rf():(u.Gc()!=c.Gc()&&c.Rf(),c.Rf()),2<=c.size+u.size){for(f=new e.Ra,d=0,p=u.size;d<p;d++)a.ne(u.get(d),f),0==d?i.xf(f):i.lineTo(f);for(d=c.size-1;0<d;d--)a.ne(c.get(d),f),i.lineTo(f);a.Lb(n.Pa)?i.Up():0<c.size&&(a.ne(c.get(0),f),i.lineTo(f))}null!=u&&u.clear(!1),null!=c&&c.clear(!1)}return i.Jg(2,this.Vo),i},s.prototype.KW=function(){return this.gZ()},s.prototype.gZ=function(){return 1736==this.W.F()&&1==this.W.$n()?e.pg.Tk(this.W,this.Vo,!0,!1,this.nd):(this.Ni=new e.Yc,this.Ni.Bb(this.W),0!=this.Ni.hd&&(1!=this.gB&&e.$j.U(this.Ni,this.Vo,this.nd,!0),1736==this.W.F()&&e.Kn.U(this.Ni,this.Ni.ld,this.gB,!1,this.nd)),this.W=this.Ni.ye(this.Ni.ld),1736==this.W.F()&&(this.W.cl(),this.W.np(0)),this.W.Jg(2,this.Vo),this.W)},s.p0=function(t,n,r,i){if(t.u())return 1;var a=t.F();if(33==a)return 1;if(197==a)return i=new e.g,t.s(i),i.Qg(e.la.Ng(n,t,!1))?0:1;if(e.R.Ic(a))throw e.f.za();if(!e.R.Rg(a))throw e.f.za();a=e.la.Ng(n,t,!1);var o=t.rk(a);return-1!=(r=r?-1:o)||(1==r&&(a=0),r=new s(t,n,r,i,!1).BA(),t.Jg(r,a)),r},s.zq=function(t,n,r,i,a){if(null!=i&&(i.pi=0,i.Ql=-1,i.Rl=-1),t.u())return 1;var o=t.F();if(33==o)return 1;var u=e.la.Ng(n,t,!1);if(197==o)return n=new e.g,t.s(n),n.Qg(u)?(null!=i&&(i.pi=2,i.Ql=-1,i.Rl=-1),0):1;if(e.R.Ic(o))return(u=new e.Oa(t.description)).$b(t,!0),s.zq(u,n,r,i,a);var c=t.rk(u);if(-1!=(r=r?-1:c))return r;if(n=new s(t,n,r,a,!1),550==o)r=n.EV();else if(1607==o)r=n.bX();else{if(1736!=o)throw e.f.za();r=n.HW()}return t.Jg(r,u),null!=i&&0==r&&i.Or(n.fe),r},s.o0=function(t,n,r,i,a){if(null!=i&&(i.pi=0,i.Ql=-1,i.Rl=-1),t.u())return 1;var o=t.F();if(33==o)return 1;var u=e.la.Ng(n,t,!1);if(197==o)return n=new e.g,t.s(n),n.Qg(u)?(null!=i&&(i.pi=2,i.Ql=-1,i.Rl=-1),0):1;if(e.R.Ic(o))return(o=new e.Oa(t.description)).$b(t,!0),s.zq(o,n,r,i,a);if(t=new s(t,n,-1,a,!0),550!=o&&1607!=o&&1736!=o)throw e.f.za();return n=t.BA(),null!=i&&i.Or(t.fe),n},s.gL=function(t,n,r,i){if(t.u())return t;var a=t.F();if(33==a)return t;var o=e.la.Ng(n,t,!1);if(197==a)return n=new e.g,t.s(n),n.Qg(o)?t.Ea():t;if(e.R.Ic(a))return(a=new e.Oa(t.description)).$b(t,!0),s.gL(a,n,r,i);if(o=t.rk(o),2==(r=r?-1:o))return t;if(t=new s(t,n,r,i,!1),550==a)t=t.JV();else if(1607==a)t=t.fX();else{if(1736!=a)throw e.f.za();t=t.KW()}return t},s.NC=function(t,n,r,i){if(t.u())return t;var a=t.F();if(33==a)return t;var o=e.la.Ng(n,t,!1);if(197==a)return n=new e.g,t.s(n),n.Qg(o)?t.Ea():t;if(e.R.Ic(a))return(o=new e.Oa(t.description)).$b(t,!0),s.NC(o,n,r,i);if(!e.R.Rg(a))throw e.f.Y("OGC simplify is not implemented for this geometry type "+a);return e.pg.NC(t,o,!1,i)},s.prototype.Qh=function(t,n,r){if(t==n)return 0;t=this.ni.get(t);var i=this.ni.get(n);n=t>>1;var a=i>>1,o=new e.b,s=new e.b;return this.vf.mc(2*n,o),o.y+=0!=(1&t)?this.Qj:-this.Qj,this.vf.mc(2*a,s),s.y+=0!=(1&i)?this.Qj:-this.Qj,0==(t=o.compare(s))&&r?0>(r=this.Nl.get(n)-this.Nl.get(a))?-1:0<r?1:0:t},s.prototype.wv=function(t,n){if(t==n)return 0;var r=this.W,i=r.xa(t),a=r.xa(n);if(i.x<a.x)return-1;if(i.x>a.x)return 1;if(i.y<a.y)return-1;if(i.y>a.y)return 1;for(i=1;i<this.KU;i++){a=this.aI.kd(i);for(var o=e.oa.Sa(a),s=0;s<o;s++){var u=r.Rc(a,t,s),c=r.Rc(a,n,s);if(u<c)return-1;if(u>c)return 1}}return 0},s.prototype.ZP=function(e,t){var n=this.wv(e,t);return 0==n?e<t?-1:1:n},s.prototype.hR=function(e,t){if(e===t)return 0;var n=e.ue.qg();e.oq()&&n.lr(),e=t.ue.qg(),t.oq()&&e.lr(),t=n.Xu();var r=e.Xu();return r==t?(t=n.Di(e),Math.abs(t)<=8881784197001252e-31*(Math.abs(e.x*n.y)+Math.abs(e.y*n.x))&&(t--,t++),0>t?1:0<t?-1:0):t<r?-1:1},s}();e.ny=s}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 30},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.prototype.U=function(t,n,r,i){return t instanceof e.R?(t=new e.$c(t),n=new e.$c(n),this.U(t,n,r,i).next()):new e.KM(t,n,r,i)},n.tp=function(t,r,i,a){var o=t.pb(),s=r.pb();if(t.u()&&r.u())return o>s?t:r;if(t.u())return r;if(r.u())return t;var u=new e.g,c=new e.g,l=new e.g;return t.s(u),r.s(c),l.H(u),l.Nb(c),u=e.la.Qd(i,l,!0),c=t.F(),l=r.F(),33==c&&33==l?n.sW(t,r,u):c!=l?0<o||0<s?o>s?t:r:550==c?n.YI(t,r,u):n.YI(r,t,u):e.pg.tp(t,r,i,a)},n.sW=function(t,n,r){r=r*Math.sqrt(2)*1.00001,r*=r;var i=t.w(),a=n.w(),o=new e.Hd(t.description);return e.b.oc(i,a)>r&&(o.add(t),o.add(n)),o},n.YI=function(t,n,r){var i=t.Va(0),a=t.D(),o=n.w(),s=t.Ea();r=r*Math.sqrt(2)*1.00001;var u=new e.g;if(t.s(u),u.O(r,r),u.contains(o)){r*=r,u=!1;for(var c=[],l=0;l<a;l++)c[l]=!1;for(l=0;l<a;l++){var h=i.read(2*l),f=i.read(2*l+1);(h-=o.x)*h+(f-=o.y)*f<=r&&(u=!0,c[l]=!0)}if(u)for(l=0;l<a;l++)c[l]||s.yd(t,l,l+1);else s.yd(t,0,a),s.add(n)}else s.yd(t,0,a),s.add(n);return s},n.instance=null,n}(e.Ne);e.oy=t}(J||(J={})),function(e){var t=function(){function t(e,t,n,r){this.at=null==t,this.ya=-1,this.Vd=e,this.Cg=n,this.fV=t.next(),this.Vb=r}return t.prototype.next=function(){return this.at?null:null!=(t=this.Vd.next())?(this.ya=this.Vd.Fa(),e.oy.tp(t,this.fV,this.Cg,this.Vb)):null;var t},t.prototype.Fa=function(){return this.ya},t.prototype.xe=function(){},t}();e.KM=t}(J||(J={})),function(e){var t=function(){function e(){}return e.prototype.nA=function(){this.Fz=null,this.fy=-1,this.HL=!1},e}(),n=function(){function e(){this.gs=0,this.uj=[]}return e.prototype.AO=function(e){this.gs+=e.fy,this.uj.push(e)},e.prototype.lX=function(){this.gs-=this.uj[this.uj.length-1].fy,--this.uj.length},e.prototype.Sy=function(){return this.uj[this.uj.length-1]},e.prototype.Ib=function(e){return e===this},e}(),r=function(){function r(e,t,n){this.ya=-1,this.Jc=!1,this.qI=[!1,!1,!1,!1],this.Nq=[0,0,0,0],this.VA=!1,this.Hk=-1,this.Bq=0,this.vo=-1,this.Xo=[],this.Vd=e,this.Cg=t,this.Vb=n}return r.QE=function(e){var t=[],n=0;for(e=Object.keys(e);n<e.length;n++)t.push(Number(e[n]));return t.sort((function(e,t){return e-t})),t},r.prototype.SG=function(t){var n=this.Xo[t],i=r.QE(n)[0],a=n[i],o=a.Sy().Fz;return a=a.Sy().HL,delete n[i],a&&(o=e.jm.local().U(o,this.Cg,!1,this.Vb),0==t&&33==o.F()&&(t=new e.Hd(o.description),o.u()||t.add(o),o=t)),o},r.prototype.next=function(){if(this.Jc&&this.vo==this.Hk)return null;for(;!this.wL(););if(-1==this.Hk)return null;if(this.VA){for(this.vo++;;){if(this.vo>this.Hk||0>this.vo)throw e.f.za();if(this.qI[this.vo])break}return this.ya++,this.SG(this.vo)}return this.ya=0,this.vo=this.Hk,this.SG(this.Hk)},r.prototype.Fa=function(){return this.ya},r.prototype.wL=function(){if(this.Jc)return!0;var t=null;if(null!=this.Vd&&null==(t=this.Vd.next())&&(this.Jc=!0,this.Vd=null),e.Ep.Sp(this.Vb),null!=t){var n=t.pb();this.qI[n]=!0,n>=this.Hk&&!this.VA&&(this.zE(n,!1,t),n>this.Hk&&!this.VA&&this.eY(n))}if(0<this.Bq)for(n=0;n<=this.Hk;n++)for(;1<this.Nq[n]&&0!=(t=this.PP(n)).length;)t=e.pg.fR(t,this.Cg,this.Vb),this.zE(n,!0,t);return this.Jc},r.prototype.PP=function(e){for(var t=[],n=[],i=this.Xo[e],a=r.QE(i),o=0;o<a.length;o++){var s=a[o],u=i[s];if(this.Jc||1e4<u.gs&&1<u.uj.length){for(this.Nq[e]-=u.uj.length,this.Bq-=u.uj.length;0<u.uj.length;)t.push(u.Sy().Fz),u.lX();n.push(s)}}for(o=0;o<n.length;o++)delete i[n[o]];return t},r.prototype.eY=function(e){for(var t=0;t<e;t++)this.Xo[t]=[],this.Bq-=this.Nq[t],this.Nq[t]=0},r.prototype.zE=function(e,i,a){var o=new t;if(o.nA(),o.Fz=a,a=r.zT(a),o.fy=a,a=r.xT(a),e+1>this.Xo.length)for(var s=0,u=Math.max(2,e+1);s<u;s++)this.Xo.push([]);void 0===(s=this.Xo[e][a])&&(s=new n,this.Xo[e][a]=s),o.HL=i,s.AO(o),this.Nq[e]++,this.Bq++,this.Hk=Math.max(this.Hk,e)},r.xT=function(t){return 0<t?e.L.truncate(Math.log(t)/Math.log(4)+.5):0},r.zT=function(t){var n=t.F();if(e.R.Rg(n))return t.D();if(33==n)return 1;if(197==n)return 4;if(e.R.Ic(n))return 2;throw e.f.za()},r.prototype.xe=function(){this.wL()},r}();e.MM=r}(J||(J={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.F=function(){return 1},n.prototype.U=function(t,n,r,i){return void 0===i?new e.MM(t,n,r):this.sR(t,n,r,i)},n.prototype.sR=function(t,n,r,i){return t=new e.$c([t,n]),this.U(t,r,i).next()},n.local=function(){return null===n.instance&&(n.instance=new n),n.instance},n.instance=null,n}(e.Ne);e.Jh=t}(J||(J={})),function(e){var t,n;(n=t||(t={}))[n.nextPath=0]="nextPath",n[n.nextSegment=1]="nextSegment",n[n.iterate=2]="iterate",t=function(){function t(t,n,r,i){this.Bt=new e.g,this.ZU=t,this.$U=n,this.Fq=i,this.No=-1,this.zl=!1;var a=t.ib;null!=a&&null!=(a=i?a.To:a.Hb)&&(this.Jc=!1,this.qa=r,this.Hb=a,this.ex=this.Hb.getIterator(),this.Gq=this.zl=!0,this.Xb=0,i?this.No=n.$():this.td=n.Ba()),this.zl||null!=(a=n.ib)&&null!=(a=i?a.To:a.Hb)&&(this.Jc=!1,this.qa=r,this.Hb=a,this.ex=this.Hb.getIterator(),this.zl=!0,this.Gq=!1,this.Xb=0,i?this.No=t.$():this.td=t.Ba()),this.zl||(this.ii=i?e.la.AS(t,n,r,1<=t.rk(0),1<=n.rk(0)):e.la.zS(t,n,r))}return t.prototype.next=function(){if(this.zl){if(this.Jc)return!1;for(var t=!0;t;)switch(this.Xb){case 0:t=this.RV();break;case 1:t=this.SV();break;case 2:t=this.DA();break;default:throw e.f.Y("internal error")}return!this.Jc}return null!=this.ii&&this.ii.next()},t.prototype.tl=function(){return this.zl?this.Gq?this.Hb.ga(this.nt):this.Fq?this.No:this.td.wb():this.ii.tl(this.ii.dg)},t.prototype.ol=function(){return this.zl?this.Gq?this.Fq?this.No:this.td.wb():this.Hb.ga(this.nt):this.ii.ol(this.ii.If)},t.prototype.cA=function(){if(!this.Fq)throw e.f.Y("internal error");return this.zl?this.Gq?this.Hb.sG(this.nt):this.Bt:this.ii.cA(this.ii.dg)},t.prototype.Gz=function(){if(!this.Fq)throw e.f.Y("internal error");return this.zl?this.Gq?this.Bt:this.Hb.sG(this.nt):this.ii.Gz(this.ii.If)},t.prototype.RV=function(){return this.Fq?-1==--this.No?(this.Jc=!0,!1):(this.Gq?this.$U.Sj(this.No,this.Bt):this.ZU.Sj(this.No,this.Bt),this.ex.vi(this.Bt,this.qa),this.Xb=2,!0):this.td.Ta()?(this.Xb=1,!0):(this.Jc=!0,!1)},t.prototype.SV=function(){if(!this.td.Aa())return this.Xb=0,!0;var e=this.td.aa();return this.ex.wn(e,this.qa),this.Xb=2,!0},t.prototype.DA=function(){return this.nt=this.ex.next(),-1==this.nt&&(this.Xb=this.Fq?0:1,!0)},t}(),e.km=t}(J||(J={})),function(e){(e=e.WM||(e.WM={}))[e.enumClosed=1]="enumClosed",e[e.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",e[e.enumOGCStartPolygon=4]="enumOGCStartPolygon",e[e.enumCalcMask=4]="enumCalcMask"}(J||(J={})),function(e){e.xD=function(){function t(){}return t.vb=function(n,r,i,a,o,s,u,c,l){var h=[0,0,0],f=[0,0,0],p=[0,0,0],d=[0,0,0,0],v=new e.da(0),y=new e.da(0),b=new e.da(0);if(null!=u||null!=c||null!=l)if(e.l.Ai(r))e.gh.vb(n,i,a,o,s,u,c,l);else{o=e.C.ba(o),i=e.C.ba(i);var g=e.C.ba(o-i);if(e.l.V(a,s)&&(e.l.V(i,o)||e.l.V(e.l.J(a),1.570796326794897)))null!=u&&(u.j=0),null!=c&&(c.j=0),null!=l&&(l.j=0);else{if(e.l.V(a,-s)){if(e.l.V(e.l.J(a),1.570796326794897))return null!=u&&(u.j=2*e.C.Hg(n,r)),null!=c&&(c.j=e.C.ba(0<a?3.141592653589793-e.C.ba(o):o)),void(null!=l&&(l.j=e.C.ba(0<a?o:3.141592653589793-e.C.ba(o))));e.l.V(e.l.J(g),3.141592653589793)&&(null!=u&&(u.j=2*e.C.Hg(n,r)),null!=c&&(c.j=0),null!=l&&(l.j=0))}else{if(e.l.V(e.l.J(a),1.570796326794897)||e.l.V(e.l.J(s),1.570796326794897))return void e.$k.vb(n,r,i,a,o,s,u,c,l);if(e.l.V(i,o)||e.l.V(e.l.J(g),3.141592653589793))return void e.$k.vb(n,r,i,a,o,s,u,c,l);if(e.l.qd(a))return void e.$k.vb(n,r,i,a,o,s,u,c,l)}var m=Math.sqrt(1-r);o=e.C.ba(o-i),e.C.hk(1,r,a,i=0,0,v,y,b),h[0]=v.j,h[1]=y.j,h[2]=b.j,e.C.hk(1,r,s,o,0,v,y,b),f[0]=v.j,f[1]=y.j,f[2]=b.j,p[0]=0,p[1]=0,p[2]=-1*r*e.C.n(1,r,a)*Math.sin(a),0>o?e.C.pr(p,f,h,d,0):e.C.pr(p,h,f,d,0),y=[0,0,0],b=[0,0,0];var w=[0,0,0];h=[0,0,0],v=[0,0,0];var O=Math.acos(d[2]/1),j=1-r,_=Math.tan(O),x=1+_*_/j,k=2*p[2]*_/j;for(j=(-k+(_=Math.sqrt(k*k-4*x*(p[2]*p[2]/j-1))))/(x*=2),k=(-k-_)/x,p=((x=(_=Math.tan(O))*j+p[2])+(_*k+p[2]))/2,_=e.C.wp(j-(O=(j+k)/2),x-p),j=p/m*1.570796326794897,k=0;100>k&&(x=(x=e.C.gm(r,j))*x/Math.cos(j)*(Math.sin(j)-p*x/(1-r)),!e.l.qd(x));k++)j-=x;p=e.C.n(1,r,j)*Math.cos(j),_=1-_/(p=Math.sqrt((p-O)*(p+O))),_*=2-_,x=e.C.Fn(y),O=e.C.Fn(b),j=e.C.Fn(w);var S=e.C.Au(w,y);k=e.C.Au(w,b),e.C.ey(w,y,h),e.C.ey(w,b,v),y=Math.acos(S/(j*x)),b=Math.acos(k/(j*O)),b*=e.l.ub(1,e.C.Au(h,v)),(1.570796326794897<=e.l.J(y)&&1.570796326794897<=e.l.J(b)||3.141592653589793<e.l.J(y-b))&&(y=(3.141592653589793-e.l.J(y))*e.l.ub(1,y),b=(3.141592653589793-e.l.J(b))*e.l.ub(1,b)),h=e.C.Rj(_,b),v=e.C.q(p,_,e.C.Rj(_,y)),h=e.C.q(p,_,h),h=e.l.J(h-v)*n,y=new e.da(0),b=new e.da(0),w=d[1]/1,w*=-e.l.ub(1,g),v=Math.acos(w)*e.l.ub(1,g),t.Bf(n,r,i,a,h,v,y,b),e.l.V(o,y.j)&&e.l.V(s,b.j)||(_=e.C.wp(e.C.ba(o-y.j),s-b.j),t.Bf(n,r,i,a,h,e.C.ba(v+3.141592653589793),y,b),(x=e.C.wp(e.C.ba(o-y.j),s-b.j))<_&&(v=e.C.ba(v+3.141592653589793))),y=[0,0,0,0],b=[0,0,0,0],_=[0,0,0],n=[0,0,0],i=[0,0,0],a=[0,0,0],w=[0,0,0],(p=[0,0,0])[0]=0,p[1]=0,p[2]=m,_[0]=0,_[1]=0,_[2]=0,e.C.pr(_,p,f,y,0),e.l.qd(s)?(n[0]=f[0],n[1]=f[1],n[2]=1,i[0]=1*Math.cos(o)-1*Math.sin(o),i[1]=1*Math.sin(o)+1*Math.cos(o)):(r=e.C.n(1,r,s)*Math.cos(s),n[0]=0,n[1]=0,f[2]+=Math.tan(1.570796326794897-e.l.J(s))*r*e.l.ub(1,s),i[0]=r*Math.cos(o)-r*Math.sin(o),i[1]=r*Math.sin(o)+r*Math.cos(o)),i[2]=f[2],e.C.pr(f,i,n,b,1),e.C.ey(b,y,a),e.C.ey(b,d,w),w=e.C.Au(a,w)/(e.C.Fn(a)*e.C.Fn(w)),w*=e.l.ub(1,g),o=Math.acos(w)*-e.l.ub(1,g),(0<v&&0<o||0>v&&0>o)&&(o=e.C.ba(o+3.141592653589793)),null!=u&&(u.j=h),null!=c&&(c.j=v),null!=l&&(l.j=o)}}},t.Bf=function(t,n,r,i,a,o,s,u){var c=[0,0,0],l=[0,0,0],h=[0,0,0],f=[0,0,0],p=[0,0,0],d=[0,0,0],v=[0,0,0],y=[0,0,0,0],b=new e.da(0),g=new e.da(0),m=new e.da(0),w=new e.da(0),O=new e.da(0),j=new e.da(0);if(null!=s&&null!=u)if(e.l.Ai(n))e.gh.Bf(t,r,i,a,o,s,u);else if(e.l.qd(a))null!=s&&(s.j=r),null!=u&&(u.j=i);else if(o=e.C.ba(o),0>a&&(a=e.l.J(a),o=e.C.ba(o+3.141592653589793)),r=e.C.ba(r),i=e.C.ba(i),1.570796326794897<e.l.J(i)&&(r=e.C.ba(r+3.141592653589793),i=e.l.ub(3.141592653589793,i)-i),e.l.V(e.l.J(i),1.570796326794897)||e.l.qd(i)||e.l.qd(o)||e.l.V(e.l.J(o),3.141592653589793))e.$k.Bf(t,n,r,i,a,o,s,u);else{var _=Math.sqrt(1-n);for(t=a/t,e.C.hk(1,n,i,0,0,w,O,j),c[0]=w.j,c[1]=O.j,c[2]=O.j,v[0]=0,v[1]=0,v[2]=-1*n*e.C.n(1,n,i)*Math.sin(i),w=e.C.n(1,n,i),O=e.C.ba(1.570796326794897-o),j=Math.sin(O),a=Math.cos(i),i=Math.sin(i),p[0]=w*a-i*j,p[1]=Math.cos(O),p[2]=(1-n)*w*i+a*j,0>o?e.C.pr(v,p,c,y,0):e.C.pr(v,c,p,y,0),c=Math.acos(y[2]/1),y=Math.atan2(-y[1],-y[0]),i=1-n,O=1+(p=Math.tan(c))*p/i,i=(-(w=2*v[2]*p/i)+(p=Math.sqrt(w*w-4*O*(v[2]*v[2]/i-1))))/(O*=2),w=(-w-p)/O,v=((O=(p=Math.tan(c))*i+v[2])+(p*w+v[2]))/2,p=e.C.wp(i-(c=(i+w)/2),O-v),_=v/_*1.570796326794897,i=0;100>i&&(w=(w=e.C.gm(n,_))*w/Math.cos(_)*(Math.sin(_)-v*w/(1-n)),!e.l.qd(w));i++)_-=w;_=e.C.n(1,n,_)*Math.cos(_),v=1-p/(_=Math.sqrt((_-c)*(_+c))),v*=2-v,d=Math.acos(e.C.Au(d,l)/(e.C.Fn(d)*e.C.Fn(l))),d*=e.l.ub(1,l[0]),o=(e.C.q(_,v,e.C.Rj(v,d))+t*e.l.ub(1,o))/e.C.Hg(_,v),o=e.C.ba(1.570796326794897*o),o=e.C.kr(v,o),e.C.n(_,v,o),p=e.C.ba(y+r),r=Math.cos(p),o=Math.sin(p),h[0]=f[0]*r+f[1]*-o,h[1]=f[0]*o+f[1]*r,h[2]=f[2],e.C.sP(n,h[0],h[1],h[2],m,g,b),null!=s&&(s.j=g.j),null!=u&&(u.j=m.j)}},t}()}(J||(J={})),function(e){var t=function(){function t(t){this.Xa=null,this.fu=new e.b,this.gu=new e.b,this.a=t}return t.prototype.compare=function(e,t,n){return this.a.Hc(t,this.fu),this.a.Hc(e.ga(n),this.gu),this.fu.compare(this.gu)},t}(),n=function(){function t(t){this.Jf=new e.b,this.Lk=new e.b,this.a=t}return t.prototype.Hh=function(e){this.Jf.K(e)},t.prototype.compare=function(e,t){return this.a.Hc(e.ga(t),this.Lk),this.Jf.compare(this.Lk)},t}(),r=function(e){function t(t){var n=e.call(this,t.a,t.qa,!1)||this;return n.Ya=t,n}return Y(t,e),t.prototype.compare=function(e,t,n){if(this.yg)return-1;var r=this.Ya.Ud.ao(this.Ya.Xh(t));e=e.ga(n);var i=this.Ya.Ud.ao(this.Ya.Xh(e));return this.Qm=n,this.CF(t,r,e,i)},t}(e.CD),i=function(e){function t(t){var n=e.call(this,t.a,t.qa)||this;return n.Ya=t,n}return Y(t,e),t.prototype.compare=function(e,t){return this.yg?-1:(e=this.Ya.Ud.ao(this.Ya.Xh(e.ga(t))),this.Qm=t,this.DF(t,e))},t}(e.hN),a=function(){function a(){this.Nc=this.nf=this.Co=this.Ud=this.rh=this.Cd=this.eb=this.a=null,this.Tg=!1,this.Ch=this.$m=this.qe=this.Nk=this.th=this.Ik=this.Nf=this.ge=null,this.Eh=this.br=this.EB=this.qa=0,this.Ew=this.po=!1,this.So=new e.b,this.Vi=new e.b,this.eb=new e.ad(8),this.Cd=new e.ad(5),this.rh=new e.Iu,this.Ud=new e.Iu,this.Tg=!1,this.Ch=new e.b,this.Ch.ka(0,0),this.qa=0,this.Eh=-1,this.po=!1,this.a=null,this.nf=new e.bk,this.Nc=new e.bk,this.th=new e.ha(0),this.Nk=new e.AD,this.Nf=new e.ha(0),this.Ik=new e.ha(0),this.Co=new e.Ra}return a.prototype.uZ=function(t,n){var r=new e.xd;return r.HC(),t.Qc(r),this.zr(t),this.po=!1,this.qa=n,this.EB=n*n,n=this.SC(),t.Qc(r),n||(this.CR(),n||this.SC()),-1!=this.Eh&&(this.a.Xd(this.Eh),this.Eh=-1),this.a=null,this.po},a.prototype.yZ=function(e,t){this.zr(e),this.po=!1,this.qa=t,this.EB=t*t,this.Tg=!1,this.SC(),this.Tg||(this.Tg=1==e.$p(t,!0,!1)),-1!=this.Eh&&(this.a.Xd(this.Eh),this.Eh=-1),this.a=null},a.prototype.vg=function(e,t){return this.eb.S(e,0+t)},a.prototype.vC=function(e,t,n){this.eb.P(e,0+t,n)},a.prototype.Xh=function(e){return this.eb.S(e,2)},a.prototype.BY=function(e,t){this.eb.P(e,2,t)},a.prototype.DG=function(e,t){return this.eb.S(e,3+t)},a.prototype.kq=function(e){return this.eb.S(e,7)},a.prototype.$l=function(e,t){this.eb.P(e,7,t)},a.prototype.lq=function(e,t){return this.eb.S(e,3+this.jq(e,t))},a.prototype.Ar=function(e,t,n){this.eb.P(e,3+this.jq(e,t),n)},a.prototype.dT=function(e,t){return this.eb.S(e,5+this.jq(e,t))},a.prototype.Cr=function(e,t,n){this.eb.P(e,5+this.jq(e,t),n)},a.prototype.ts=function(e){return this.Cd.S(e,0)},a.prototype.xY=function(e,t){this.Cd.P(e,0,t)},a.prototype.Kz=function(e){return this.Cd.S(e,4)},a.prototype.wr=function(e,t){this.Cd.P(e,4,t)},a.prototype.pl=function(e){return this.Cd.S(e,1)},a.prototype.Bn=function(e,t){this.Cd.P(e,1,t)},a.prototype.Jz=function(e){return this.Cd.S(e,3)},a.prototype.pu=function(e,t){this.Cd.P(e,3,t)},a.prototype.mn=function(e){var t=this.Cd.Ke(),n=this.rh.Th();return this.xY(t,n),-1!=e?(this.rh.addElement(n,e),this.a.Qa(e,this.Eh,t),this.wr(t,this.a.Ua(e))):this.wr(t,-1),t},a.prototype.SQ=function(e){this.Cd.jd(e)},a.prototype.xE=function(e,t){this.rh.addElement(this.ts(e),t),this.a.Qa(t,this.Eh,e)},a.prototype.Wt=function(e){var t=this.eb.Ke(),n=this.Ud.Th();return this.BY(t,n),-1!=e&&this.Ud.addElement(n,e),t},a.prototype.yE=function(e,t){this.Ud.addElement(this.Xh(e),t)},a.prototype.Cv=function(e){this.eb.jd(e),0<=(e=this.th.ZF(e))&&this.th.kX(e)},a.prototype.nj=function(t,n){if(-1==this.vg(t,0))this.vC(t,0,n);else{if(-1!=this.vg(t,1))throw e.f.za();this.vC(t,1,n)}this.Qy(t,n)},a.prototype.Qy=function(e,t){var n=this.pl(t);if(-1!=n){var r=this.lq(n,t);this.Cr(r,t,e),this.Ar(e,t,r),this.Ar(n,t,e),this.Cr(e,t,n)}else this.Cr(e,t,e),this.Ar(e,t,e),this.Bn(t,e)},a.prototype.jq=function(e,t){return this.vg(e,0)==t?0:1},a.prototype.ln=function(e,t){var n,r=this.Jz(t);if(-1!=r&&(this.nf.zd(r,-1),this.pu(t,-1)),-1!=(r=this.pl(t))){var i=n=r;do{var a=!1,o=this.jq(n,t),s=this.DG(n,o);if(this.vg(n,o+1&1)==e){if(this.Ev(n),this.Ud.kh(this.Xh(n)),this.Cv(n),n==s){r=-1;break}r==n&&(r=this.pl(t),i=s,a=!0)}n=s}while(n!=i||a);if(-1!=r){do{o=this.jq(n,t),s=this.DG(n,o),this.vC(n,o,e),n=s}while(n!=i);-1!=(n=this.pl(e))?(i=this.lq(n,e),a=this.lq(r,e),i==n?(this.Bn(e,r),this.Qy(n,e),this.Bn(e,n)):a==r&&this.Qy(r,e),this.Ar(r,e,i),this.Cr(i,e,r),this.Ar(n,e,a),this.Cr(a,e,n)):this.Bn(e,r)}}for(r=this.ts(e),n=this.ts(t),i=this.rh.sc(n);-1!=i;i=this.rh.hb(i))this.a.Qa(this.rh.ga(i),this.Eh,e);this.rh.lz(r,n),this.SQ(t)},a.prototype.mV=function(e,t){var n=this.vg(e,0),r=this.vg(e,1),i=this.vg(t,0),a=this.vg(t,1);this.Ud.lz(this.Xh(e),this.Xh(t)),t==this.pl(n)&&this.Bn(n,e),t==this.pl(r)&&this.Bn(r,e),this.Ev(t),this.Cv(t),n==i&&r==a||r==i&&n==a||(this.Zn(n,this.So),this.Zn(i,this.Vi),this.So.qb(this.Vi)?(n!=i&&this.ln(n,i),r!=a&&this.ln(r,a)):(r!=i&&this.ln(r,i),n!=a&&this.ln(n,a)))},a.prototype.Ev=function(e){var t=this.vg(e,1);this.QF(e,this.vg(e,0)),this.QF(e,t)},a.prototype.QF=function(e,t){var n=this.lq(e,t),r=this.dT(e,t),i=this.pl(t);n!=e?(this.Ar(r,t,n),this.Cr(n,t,r),i==e&&this.Bn(t,n)):this.Bn(t,-1)},a.prototype.IE=function(e,t,n){var r=this.Ud.sc(e),i=this.Ud.ga(r);e=this.Qe(i);var a=this.Qe(this.a.T(i));for(this.a.Fr(i,t,n,!0),r=this.Ud.hb(r);-1!=r;r=this.Ud.hb(r)){i=this.Ud.ga(r);var o=this.Qe(i)==e;this.a.Fr(i,t,n,o)}r=t.nq(n,0).ac(),t=t.nq(n,t.ul(n)-1).wc(),this.IL(e,r),this.IL(a,t)},a.prototype.KF=function(e,t,n){var r=this.Xh(e),i=this.vg(e,0),a=this.vg(e,1),o=this.Wt(-1);for(this.th.add(o),this.$l(o,-3),this.Nf.add(o),this.nj(o,i),e=1,t=t.ul(n);e<t;e++)n=this.mn(-1),this.Ik.add(n),this.Nf.add(n),this.nj(o,n),o=this.Wt(-1),this.th.add(o),this.$l(o,-3),this.Nf.add(o),this.nj(o,n);for(this.nj(o,a),r=this.Ud.sc(r);-1!=r;r=this.Ud.hb(r))if(a=this.Ud.ga(r),this.Qe(a)==i){e=0;do{0<e&&(o=this.Nf.get(e-1),this.xE(o,a),-1==this.Kz(o)&&this.wr(o,this.a.Ua(a))),o=this.Nf.get(e),e+=2,this.yE(o,a),a=this.a.T(a)}while(e<this.Nf.size)}else{e=this.Nf.size-1;do{e<this.Nf.size-2&&(o=this.Nf.get(e+1),this.xE(o,a),0>this.Kz(o)&&this.wr(o,this.a.Ua(a))),o=this.Nf.get(e),e-=2,this.yE(o,a),a=this.a.T(a)}while(0<=e)}this.Nf.clear(!1)},a.prototype.Qe=function(e){return this.a.Na(e,this.Eh)},a.prototype.KJ=function(t,n,r){var i=this.vg(n,0),a=new e.b;this.Zn(i,a);var o=new e.b,s=this.vg(n,1);this.Zn(s,o);var u=r.ul(t),c=r.nq(t,0),l=new e.b;if(c.qq(l),!a.qb(l)){if(!this.Tg){var h=a.compare(this.Ch);0>h*(l=l.compare(this.Ch))&&(this.Tg=!0)}this.iG(i,this.Nf),this.Ik.add(i)}for(!this.Tg&&1<u&&(h=a.compare(o),c=c.wc(),(a.compare(c)!=h||c.compare(o)!=h||0>c.compare(this.Ch))&&(this.Tg=!0)),t=(c=r.nq(t,u-1)).wc(),o.qb(t)||(this.Tg||0>(h=o.compare(this.Ch))*(l=t.compare(this.Ch))&&(this.Tg=!0),this.iG(s,this.Nf),this.Ik.add(s)),this.Nf.add(n),o=0,s=this.Nf.size;o<s;o++)t=this.Nf.get(o),r=this.kq(t),e.ad.xH(r)&&(this.Nc.zd(r,-1),this.$l(t,-1)),t!=n&&-3!=this.kq(t)&&(this.th.add(t),this.$l(t,-3));this.Nf.clear(!1)},a.prototype.vP=function(e,t){this.ge.compare(this.Nc,this.Nc.ga(e),t),this.ge.yg&&(this.ge.ks(),this.bG(e,t))},a.prototype.bG=function(t,n){this.po=!0,t=this.Nc.ga(t),n=this.Nc.ga(n);var r=this.Ud.ao(this.Xh(t)),i=this.Ud.ao(this.Xh(n)),a=this.a.ec(r);null==a&&(null==this.qe&&(this.qe=new e.zb),this.a.gd(r,this.qe),a=this.qe),null==(r=this.a.ec(i))&&(null==this.$m&&(this.$m=new e.zb),this.a.gd(i,this.$m),r=this.$m),this.Nk.gp(a),this.Nk.gp(r),this.Nk.Ia(this.qa,!0)&&(this.Tg=!0),this.mL(t,n,-1,this.Nk),this.Nk.clear()},a.prototype.SR=function(t,n){this.po=!0,n=this.Nc.ga(n);var r=this.Ud.ao(this.Xh(n)),i=this.a.ec(r);null==i&&(null==this.qe&&(this.qe=new e.zb),this.a.gd(r,this.qe),i=this.qe),r=this.oG(t),this.Nk.gp(i),this.a.bj(r,this.Co),this.Nk.rA(this.qa,this.Co,!0),this.mL(n,-1,t,this.Nk),this.Nk.clear()},a.prototype.ST=function(){if(0!=this.th.size)for(;0!=this.th.size;){if(this.th.size>Math.max(100,this.a.hd)){this.th.clear(!1),this.Tg=!0;break}var e=this.th.Gc();this.th.Rf(),this.$l(e,-1),-1!=this.pU(e)&&this.RT(e),this.oo=!1}},a.prototype.RT=function(e){if(this.oo){var t=this.Nc.fv(this.BI,this.wI,e,!0);this.oo=!1}else t=this.Nc.wE(e);-1==t?this.mV(this.Nc.ga(this.Nc.rG()),e):(this.$l(e,t),this.ge.yg&&(this.ge.ks(),this.bG(this.ge.Qm,t)))},a.prototype.pU=function(t){var n=this.vg(t,0);if(t=this.vg(t,1),this.Zn(n,this.So),this.Zn(t,this.Vi),e.b.oc(this.So,this.Vi)<=this.EB)return this.Tg=!0,-1;var r=this.So.compare(this.Ch),i=this.Vi.compare(this.Ch);return 0>=r&&0<i?t:0>=i&&0<r?n:-1},a.prototype.AR=function(){var t=new e.ha(0);t.Db(this.a.hd);for(var n=this.a.rr(),r=n.next();-1!=r;r=n.next())-1!=this.a.Na(r,this.Eh)&&t.add(r);this.a.Vx(t,t.size),this.BR(t)},a.prototype.BR=function(n){this.nf.clear(),this.nf.Le(n.size),this.nf.kp(new t(this.a));var r=new e.b;r.Tc();for(var i=-1,a=new e.b,o=0,s=n.size;o<s;o++){var u=n.get(o);this.a.Hc(u,a),a.qb(r)?(u=this.a.Na(u,this.Eh),this.ln(i,u)):(i=this.Qe(u),this.a.Hc(u,r),u=this.nf.Qn(u),this.pu(i,u))}},a.prototype.CR=function(){var t=new e.ha(0);t.Db(this.a.hd);for(var n=this.nf.sc(-1);-1!=n;n=this.nf.hb(n))t.add(this.nf.ga(n));this.nf.clear(),this.a.Vx(t,t.size),n=0;for(var r=t.size;n<r;n++){var i=t.get(n),a=this.Qe(i);i=this.nf.Qn(i),this.pu(a,i)}},a.prototype.iG=function(t,n){var r=this.pl(t);if(-1!=r){var i=r;do{e.ad.xH(this.kq(i))&&n.add(i),i=this.lq(i,t)}while(i!=r)}},a.prototype.IL=function(e,t){for(e=this.rh.sc(this.ts(e));-1!=e;e=this.rh.hb(e))this.a.wf(this.rh.ga(e),t)},a.prototype.mL=function(e,t,n,r){this.Ev(e),-1!=t&&this.Ev(t),this.KJ(0,e,r),-1!=t&&this.KJ(1,t,r),-1!=n&&(r.Jf.w(this.So),this.Zn(n,this.Vi),this.Vi.qb(this.So)||this.Ik.add(n)),n=0;for(var i=this.Ik.size;n<i;n++){var a=this.Ik.get(n),o=this.Jz(a);-1!=o&&(this.nf.zd(o,-1),this.pu(a,-1))}for(n=this.Xh(e),i=-1!=t?this.Xh(t):-1,this.IE(n,r,0),-1!=t&&this.IE(i,r,1),this.KF(e,r,0),-1!=t&&this.KF(t,r,1),this.Ud.kh(n),this.Cv(e),-1!=t&&(this.Ud.kh(i),this.Cv(t)),n=0,i=this.Ik.size;n<i;n++)(a=this.Ik.get(n))==this.br&&(this.Ew=!0),-1==(o=this.Jz(a))&&(-1==(o=this.nf.wE(this.oG(a)))?(e=this.Qe(this.nf.ga(this.nf.rG())),this.ln(e,a)):this.pu(a,o));this.Ik.clear(!1)},a.prototype.Zn=function(e,t){this.a.PG(this.Kz(e),t)},a.prototype.oG=function(e){return this.rh.ao(this.ts(e))},a.prototype.SC=function(){this.Ew=!1,this.br=-1,null==this.ge&&(this.Nc.yw=!1,this.ge=new r(this),this.Nc.so=this.ge);var t=new e.ha(0),a=null,o=null;this.wI=this.BI=-1,this.oo=!1;for(var s=this.nf.sc(-1);-1!=s;){this.oo=!1;var u=this.nf.ga(s);this.br=this.Qe(u),this.a.Hc(u,this.Ch),this.ge.dL(this.Ch.y,this.Ch.x);var c=this.pl(this.br),l=-1==c;if(!l){u=c;do{var h=this.kq(u);-1==h?(this.th.add(u),this.$l(u,-3)):-3!=h&&t.add(h),u=this.lq(u,this.br)}while(u!=c)}if(0<t.size){for(this.oo=1==t.size&&1==this.th.size,l=0,c=t.size;l<c;l++)u=this.Nc.ga(t.get(l)),this.$l(u,-2);var f=-2,p=-2;for(l=0,c=t.size;l<c;l++){if(h=t.get(l),-2==f){var d=this.Nc.Be(h);-1!=d?(u=this.Nc.ga(d),-2!=(u=this.kq(u))&&(f=d)):f=-1}if(-2==p&&(-1!=(h=this.Nc.hb(h))?(u=this.Nc.ga(h),-2!=(u=this.kq(u))&&(p=h)):p=-1),-2!=f&&-2!=p)break}for(l=0,c=t.size;l<c;l++)h=t.get(l),u=this.Nc.ga(h),this.Nc.zd(h,-1),this.$l(u,-1);t.clear(!1),this.BI=-1!=f?f:-1,this.wI=-1!=p?p:-1,-1!=f&&-1!=p?this.oo||this.vP(f,p):-1==f&&-1==p&&(this.oo=!1)}else l&&(null==a&&(a=new i(this)),a.Hh(this.Ch),this.Nc.yK(a),a.yg&&(a.ks(),this.SR(this.br,a.Qm)));this.ST(),this.Ew?(this.Ew=!1,null==o&&(o=new n(this.a)),o.Hh(this.Ch),s=this.nf.yK(o)):s=this.nf.hb(s)}return this.po},a.prototype.zr=function(t){for(this.a=t,this.Eh=this.a.Kd(),this.eb.Le(t.hd+32),this.Cd.Le(t.hd),this.rh.lu(t.hd),this.rh.vn(t.hd),this.Ud.lu(t.hd+32),this.Ud.vn(t.hd+32),t=this.a.ld;-1!=t;t=this.a.Ae(t))if(e.R.Bc(this.a.dc(t)))for(u=this.a.Kb(t);-1!=u;u=this.a.Qb(u)){var n=this.a.Ha(u),r=this.a.Za(u),i=this.mn(r),a=this.Wt(r);for(this.nj(a,i),c=this.a.T(r),r=0,n-=2;r<n;r++){var o=this.a.T(c),s=this.mn(c);this.nj(a,s),a=this.Wt(c),this.nj(a,s),c=o}this.a.Lb(u)?(s=this.mn(c),this.nj(a,s),a=this.Wt(c),this.nj(a,s),this.nj(a,i)):(s=this.mn(c),this.nj(a,s))}else for(var u=this.a.Kb(t);-1!=u;u=this.a.Qb(u)){var c=this.a.Za(u);for(i=0,n=this.a.Ha(u);i<n;i++)this.mn(c),c=this.a.T(c)}this.AR()},a}();e.yD=a}(J||(J={})),function(e){var t=function(t){function n(r,i,a){var o=t.call(this)||this;if(void 0!==r)if(void 0!==a){o.description=e.ke.ug();var s=new e.Id;s.H(r,i,a),o.LC(s)}else if(void 0!==i)o.description=e.ke.ug(),o.nb(r,i);else if(r instanceof e.oa)o.description=r;else if(r instanceof e.b)o.description=e.ke.ug(),o.nb(r);else{if(!(r instanceof n))throw e.f.I();o.description=r.description,o.nb(r.Ce(),r.lf()),null!==r.ia&&(o.ia=r.ia.slice(0))}else o.description=e.ke.ug();return o}return Y(n,t),n.prototype.w=function(t){if(void 0===t){if(this.Ac())throw e.f.Y("This operation should not be performed on an empty geometry.");return(t=new e.b).ka(this.ia[0],this.ia[1]),t}if(this.Ac())throw e.f.Y("This operation should not be performed on an empty geometry.");t.ka(this.ia[0],this.ia[1])},n.prototype.nb=function(e,t){"number"==typeof e?(this.vc(),null==this.ia&&this.Mp(),this.ia[0]=e,this.ia[1]=t):(this.vc(),this.nb(e.x,e.y))},n.prototype.kA=function(){if(this.Ac())throw e.f.Y("This operation should not be performed on an empty geometry.");var t=new e.Id;return t.x=this.ia[0],t.y=this.ia[1],t.z=this.description.VG()?this.ia[2]:e.oa.me(1),t},n.prototype.LC=function(t){this.vc();var n=this.hasAttribute(1);n||e.oa.pH(1,t.z)||(this.le(1),n=!0),null==this.ia&&this.Mp(),this.ia[0]=t.x,this.ia[1]=t.y,n&&(this.ia[2]=t.z)},n.prototype.Ce=function(){if(this.Ac())throw e.f.Y("This operation should not be performed on an empty geometry.");return this.ia[0]},n.prototype.KC=function(e){this.setAttribute(0,0,e)},n.prototype.lf=function(){if(this.Ac())throw e.f.Y("This operation should not be performed on an empty geometry.");return this.ia[1]},n.prototype.eL=function(e){this.setAttribute(0,1,e)},n.prototype.vT=function(){return this.Rc(1,0)},n.prototype.$Y=function(e){this.setAttribute(1,0,e)},n.prototype.OS=function(){return this.Rc(2,0)},n.prototype.KY=function(e){this.setAttribute(2,0,e)},n.prototype.xc=function(){return this.lG(3,0)},n.prototype.PK=function(e){this.setAttribute(3,0,e)},n.prototype.Rc=function(t,n){var r=this.description.Yf(t);return 0<=r?this.ia[this.description.dk(r)+n]:e.oa.me(t)},n.prototype.lG=function(t,n){var r=this.description.Yf(t);return 0<=r?this.ia[this.description.dk(r)+n]:e.oa.me(t)},n.prototype.setAttribute=function(e,t,n){this.vc();var r=this.description.Yf(e);0>r&&(this.le(e),r=this.description.Yf(e)),null==this.ia&&this.Mp(),this.ia[this.description.dk(r)+t]=n},n.prototype.F=function(){return 33},n.prototype.pb=function(){return 0},n.prototype.Ka=function(){this.vc(),null!=this.ia&&(this.ia[0]=NaN,this.ia[1]=NaN)},n.prototype.Ln=function(t){if(null!=this.ia){for(var n=e.ke.ox(t,this.description),r=[],i=0,a=0,o=t.Ca;a<o;a++){var s=t.kd(a),u=e.oa.Sa(s);if(-1==n[a]){var c=e.oa.me(s);for(s=0;s<u;s++)r[i]=c,i++}else for(c=this.description.dk(n[a]),s=0;s<u;s++)r[i]=this.ia[c],i++,c++}this.ia=r}this.description=t},n.prototype.Mp=function(){this.pK(this.description.Ge.length),n.PE(this.description.Ge,this.ia,this.description.Ge.length),this.ia[0]=NaN,this.ia[1]=NaN},n.prototype.Qc=function(t){if(t instanceof e.xd){if(!this.Ac()){var n=this.w();t.Zj(n,n),this.nb(n)}}else this.Ac()||(this.le(1),n=this.kA(),this.LC(t.vp(n)))},n.prototype.copyTo=function(t){if(33!=t.F())throw e.f.I();t.vc(),null==this.ia?(t.Ka(),t.ia=null,t.rg(this.description)):(t.rg(this.description),t.pK(this.description.Ge.length),n.PE(this.ia,t.ia,this.description.Ge.length))},n.prototype.Ea=function(){return new n(this.description)},n.prototype.u=function(){return this.Ac()},n.prototype.Ac=function(){return null==this.ia||isNaN(this.ia[0])||isNaN(this.ia[1])},n.prototype.qn=function(e){e.Ka(),this.description!=e.description&&e.rg(this.description),e.Nb(this)},n.prototype.s=function(e){this.Ac()?e.Ka():(e.o=this.ia[0],e.A=this.ia[1],e.v=this.ia[0],e.B=this.ia[1])},n.prototype.ip=function(e){if(this.Ac())e.Ka();else{var t=this.kA();e.o=t.x,e.A=t.y,e.ef=t.z,e.v=t.x,e.B=t.y,e.Lg=t.z}},n.prototype.Qf=function(t,n){var r=new e.uc;return this.Ac()?(r.Ka(),r):(t=this.Rc(t,n),r.fa=t,r.ja=t,r)},n.prototype.pK=function(t){if(null==this.ia)this.ia=e.L.Xf(t);else if(this.ia.length<t){for(var n=this.ia.slice(0),r=this.ia.length;r<t;r++)n[r]=0;this.ia=n}},n.PE=function(e,t,n){if(0<n)for(n=0;n<e.length;n++)t[n]=e[n]},n.prototype.Ib=function(e){if(e==this)return!0;if(!(e instanceof n)||this.description!=e.description)return!1;if(this.Ac())return!!e.Ac();for(var t=0,r=this.description.Ge.length;t<r;t++)if(this.ia[t]!=e.ia[t])return!1;return!0},n.prototype.fc=function(){var t=this.description.fc();if(!this.Ac())for(var n=0,r=this.description.Ge.length;n<r;n++){var i=this.ia[n];i=e.L.truncate(i^i>>>32),t=e.L.Zh(i,t)}return t},n.prototype.sg=function(){return null},n}(e.R);e.Ra=t}(J||(J={})),function(e){var t=function(){function e(e,t,n){void 0!==e&&(this.x=e,this.y=t,this.z=n)}return e.construct=function(t,n,r){var i=new e;return i.x=t,i.y=n,i.z=r,i},e.prototype.H=function(e,t,n){this.x=e,this.y=t,this.z=n},e.prototype.Tx=function(){this.z=this.y=this.x=0},e.prototype.normalize=function(){var e=this.length();0==e&&(this.x/=e,this.y/=e,this.z/=e)},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.Gg=function(t){new e(this.x*t,this.y*t,this.z*t)},e.prototype.iE=function(){this.x=NaN},e.prototype.Ey=function(){return isNaN(this.x)},e.prototype.Vh=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e}();e.Id=t}(J||(J={})),function(e){var t=function(){function t(e,t,n){this.mx=this.mB=null,this.eg=t,this.YU=t.y-n,this.XU=t.y+n,this.ir=0,this.OA=e,this.qa=n,this.jV=n*n,this.PA=0!=n,this.tw=!1}return t.prototype.result=function(){return 0!=this.ir?1:0},t.prototype.hO=function(t){return t=t.cc(t.ae(this.eg,!1)),e.b.oc(t,this.eg)<=this.jV},t.prototype.TF=function(e){if(!this.PA&&(this.OA&&this.eg.qb(e.ac())||this.eg.qb(e.wc())))this.tw=!0;else if(e.na==this.eg.y&&e.na==e.ma){if(this.OA&&!this.PA){var t=Math.max(e.ra,e.pa);this.eg.x>Math.min(e.ra,e.pa)&&this.eg.x<t&&(this.tw=!0)}}else{var n=!1;if(t=Math.max(e.ra,e.pa),this.eg.x>t?n=!0:this.eg.x>=Math.min(e.ra,e.pa)&&(n=0<e.uq(!0,this.eg.y,this.mx,null)&&this.mx[0]<=this.eg.x),n){if(this.eg.y==e.ac().y){if(this.eg.y<e.wc().y)return}else if(this.eg.y==e.wc().y&&this.eg.y<e.ac().y)return;this.ir=this.OA?1^this.ir:this.ir+(e.ac().y>e.wc().y?1:-1)}}},t.prototype.du=function(e){var t=e.Qf(0,1);if(t.fa>this.XU||t.ja<this.YU)return!1;if(this.PA&&this.hO(e))return!0;if(t.fa>this.eg.y||t.ja<this.eg.y)return!1;if(null==this.mB&&(this.mB=[null,null,null,null,null]),null==this.mx&&(this.mx=[0,0,0]),0<(t=e.QG()))for(e=0;e<t;e++){var n=this.mB[e].get();if(this.TF(n),this.tw)return!0}else if(this.TF(e),this.tw)return!0;return!1},t.WD=function(e,n,r){for(n=new t(0==e.$n(),n,r),e=e.Ba();e.Ta();)for(;e.Aa();)if(r=e.aa(),n.du(r))return-1;return n.result()},t.XN=function(n,r,i,a){var o=new e.g;n.Zb(o),o.O(a,a);var s=new t(0==n.$n(),i,a);n=n.Ba();var u=new e.g;for(u.H(o),u.v=i.x+a,u.A=i.y-a,u.B=i.y+a,a=(i=r.Vz(u,a)).next();-1!=a;a=i.next())if(n.Rb(r.ga(a)),n.Aa()&&(a=n.aa(),s.du(a)))return-1;return s.result()},t.Jm=function(n,r,i){if(n.u())return 0;var a=new e.g;if(n.Zb(a),a.O(i,i),!a.contains(r))return 0;if(null!=(a=n.ib)){var o=a.oi;if(null!=o){if(1==(o=o.Xl(r.x,r.y)))return 1;if(0==o)return 0}if(null!=(a=a.Hb))return t.XN(n,a,r,i)}return t.WD(n,r,i)},t.yU=function(n,r,i,a){if(n.u())return 0;var o=new e.g;if(n.Zb(o),o.O(a,a),!o.contains(r,i))return 0;if(null!=(o=n.ib)&&null!=(o=o.oi)){if(1==(o=o.Xl(r,i)))return 1;if(0==o)return 0}return t.WD(n,e.b.construct(r,i),a)},t.wU=function(e,n,r){return n.u()?0:t.Jm(e,n.w(),r)},t.zA=function(n,r,i,a,o){var s=new e.g;if(n.Zb(s),s.O(a,a),!s.contains(i))return 0;var u=new t(!0,i,a);if(null!=o){var c=new e.g;for(c.H(s),c.v=i.x+a,c.A=i.y-a,c.B=i.y+a,n=n.Ba(),c=(a=o.Vz(c,a)).next();-1!=c;c=a.next())if(n.Rb(o.ga(c),r),n.Aa()&&n.Pa==r&&(c=n.aa(),u.du(c)))return-1}else if((n=n.Ba()).oC(r),n.Ta())for(;n.Aa();)if(c=n.aa(),u.du(c))return-1;return u.result()},t.yA=function(n,r,i){var a=new e.g;if(n.Zb(a),a.O(i,i),!a.contains(r))return 0;for(r=new t(!1,r,i),i=n.Ba();i.Ta();)if(!(0>n.rm(i.Pa))){for(r.ir=0;i.Aa();)if(a=i.aa(),r.du(a))return-1;if(0!=r.ir)return 1}return r.result()},t.x_=function(n,r,i,a,o){var s=n.Ba();if(s.oC(r),!s.Ta()||!s.Aa())throw e.f.Y("corrupted geometry");for(r=2;2==r&&s.Aa();)r=s.aa().cc(.5),r=t.zA(n,i,r,a,o);if(2==r)throw e.f.Y("internal error");return 1==r},t.Wl=function(e,t){return!(16>(e=e.D()))&&2*e+Math.log(e)/Math.log(2)*t<1*e*t},t}();e.Oe=t}(J||(J={})),function(e){var t=function(e){function t(t){return e.call(this,!0,t)||this}return Y(t,e),t.prototype.Ea=function(){return new t(this.description)},t.prototype.pb=function(){return 2},t.prototype.F=function(){return 1736},t.prototype.jH=function(e,t,n){this.dU(e,t,n)},t.prototype.DS=function(){this.VS()},t}(e.Zk);e.Ga=t}(J||(J={})),function(e){!function(e){e[e.PiPOutside=0]="PiPOutside",e[e.PiPInside=1]="PiPInside",e[e.PiPBoundary=2]="PiPBoundary"}(e.ZM||(e.ZM={})),e.Zc=function(){function t(){}return t.wH=function(t,n,r){return 0==(t=e.Oe.wU(t,n,r))?0:1==t?1:2},t.Td=function(t,n,r){return 0==(t=e.Oe.Jm(t,n,r))?0:1==t?1:2},t.xU=function(t,n,r,i){return 0==(t=e.Oe.yU(t,n,r,i))?0:1==t?1:2},t.n0=function(t,n,r,i){return 0==e.Oe.zA(t,n,r,i,null)?0:1},t.yA=function(t,n,r){return 0==e.Oe.yA(t,n,r)?0:1},t.BZ=function(n,r,i,a,o){if(r.length<i||o.length<i)throw e.f.I();for(var s=0;s<i;s++)o[s]=t.Td(n,r[s],a)},t.CZ=function(n,r,i,a,o){if(r.length/2<i||o.length<i)throw e.f.I();for(var s=0;s<i;s++)o[s]=t.xU(n,r[2*s],r[2*s+1],a)},t.yL=function(n,r,i,a,o){if(1736==n.F())t.BZ(n,r,i,a,o);else{if(197!=n.F())throw e.f.Y("invalid_call");var s=new e.g;n.s(s),t.iO(s,r,i,a,o)}},t.J0=function(n,r,i,a,o){if(1736==n.F())t.CZ(n,r,i,a,o);else{if(197!=n.F())throw e.f.Eb();var s=new e.g;n.s(s),t.jO(s,r,i,a,o)}},t.iO=function(t,n,r,i,a){if(n.length<r||a.length<r)throw e.f.I();if(t.u())for(i=0;i<r;i++)a[i]=0;else for(t.O(.5*-i,.5*-i),t.O(.5*i,.5*i),i=0;i<r;i++)a[i]=t.contains(n[i])?1:t.contains(n[i])?2:0},t.jO=function(t,n,r,i,a){if(n.length/2<r||a.length<r)throw e.f.I();if(t.u())for(i=0;i<r;i++)a[i]=0;else for(t.O(.5*-i,.5*-i),t.O(.5*i,.5*i),i=0;i<r;i++)a[i]=t.contains(n[2*i],n[2*i+1])?1:t.contains(n[2*i],n[2*i+1])?2:0},t.EZ=function(e,t,n,r,i){for(var a=0;a<n;a++)i[a]=e.Zs(t[a],r)?2:0},t.DZ=function(e,t,n,r,i){var a=e.ib,o=null;null!=a&&(o=a.oi),a=n;for(var s=0;s<n;s++)if(i[s]=1,null!=o){var u=t[s];0==o.Xl(u.x,u.y)&&(i[s]=0,a--)}if(0!=a)for(e=e.Ba();e.Ta()&&0!=a;)for(;e.Aa()&&0!=a;)for(o=e.aa(),s=0;s<n&&0!=a;s++)1==i[s]&&o.Zs(t[s],r)&&(i[s]=2,a--);for(s=0;s<n;s++)1==i[s]&&(i[s]=0)},t.zL=function(n,r,i,a,o){var s=n.F();if(1607==s)t.DZ(n,r,i,a,o);else{if(!e.R.Ic(s))throw e.f.Y("Invalid call.");t.EZ(n,r,i,a,o)}},t}()}(J||(J={})),function(e){var t=function(e){function t(t,n){if(2==arguments.length){var r=e.call(this,!1,t.description)||this;r.xf(t),r.lineTo(n)}else r=e.call(this,!1,t)||this;return r}return Y(t,e),t.prototype.Ea=function(){return new t(this.description)},t.prototype.pb=function(){return 1},t.prototype.F=function(){return 1607},t.prototype.jH=function(e,t,n){this.eU(e,t,n)},t}(e.Zk);e.Oa=t}(J||(J={})),function(e){var t=function(){function t(){}return t.prototype.progress=function(){return!0},t.Sp=function(t){if(null!=t&&!t.progress(-1,-1))throw e.f.ED()},t}();e.Ep=t}(J||(J={})),function(e){var t;(t=e.XL||(e.XL={}))[t.clipWithInputHorizon=1]="clipWithInputHorizon",t[t.clipWithOutputHorizon=2]="clipWithOutputHorizon";var n=function(){function e(){this.ll=3,this.qz=this.sv=NaN}return e.prototype.CT=function(){return this.Ps(1)},e.prototype.DT=function(){return this.Ps(2)},e.prototype.Ps=function(e){return 0!=(this.ll&e)},e.prototype.Cf=function(){var t=new e;return t.sv=this.sv,t.qz=this.qz,t.ll=this.ll,t},e}();e.g_=n,function(e){e[e.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",e[e.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(e.YL||(e.YL={}));var r=function(){function e(){this.ll=0}return e.prototype.Ps=function(e){return 0!=(this.ll&e)},e.$d=function(t){var n=new e;return n.ll=t.ll,n},e.prototype.uN=function(e){this.ll=e.ll},e}();e.h_=r;var i=function(){function t(t,n,r){this.ee=t,this.Je=n,this.cg=new e.g,this.cg.H(r),this.TU=t.fc()+n.fc()+this.cg.fc().toString()}return t.prototype.fc=function(){return this.TU},t.prototype.Ib=function(e){return this==e||this.ee.Ib(e.ee)&&this.Je.Ib(e.Je)&&this.cg.Ib(e.cg)},t}();e.p_=i,i=function(){function t(){this.Je=this.ee=null,this.eI=new n,this.fI=new r,this.dx=this.He=null,this.Wq=this.xl=!0}return t.os=function(e,n,r,i){var a;void 0===i&&(i=null),void 0===a&&(a=null);var o=new t;return o.Jp(e,n,r,i,a),o},t.prototype.Jp=function(t,n,r,i,a){if(null==t||null==n)throw e.f.Y("invalidArgument");if(this.ee=t,this.Je=n,this.Wq=this.xl=!1,null!=i&&(this.eI=i.Cf()),null!=a&&this.fI.uN(a),a=!1,1==n.Fb()&&null!=i&&(i=i.sv,isNaN(i)||0==i||(a=!0)),t==n)this.xl=!a,this.Wq=!0;else{i=t.Fb();var o=n.Fb();if(0==i||0==o){if(null!=r)throw e.f.I();null!=t.Ld()&&null!=n.Ld()&&(this.xl=t.Ld().Ib(n.Ld()))}else this.xl=3==i||3==o?t.Ib(n):!!this.ee.FT(this.Je)&&!a,this.He=r,null!=this.He&&this.He.Px(),this.Wq=(null==this.He||0==this.He.count())&&this.ee.hc().Ib(this.Je.hc())}this.ML()},t.prototype.Rv=function(){var e=new t;return e.ee=this.Je,e.Je=this.ee,null!=this.He&&(e.He=this.He.Rv()),e.xl=this.xl,e.Wq=this.Wq,e.ML(),e},t.prototype.xq=function(){return this.xl},t.prototype.BS=function(){return this.eI.Cf()},t.prototype.Ib=function(e){return e==this||!!(e instanceof t&&this.ee.Ib(e.ee)&&this.Je.Ib(e.Je))&&(this.He==e.He||!(null==this.He||null==e.He||!this.He.Ib(e.He)))},t.prototype.ML=function(){this.dx=new e.Bp(this)},t.I0={},t}(),e.Ur=i}(J||(J={})),function(e){var t=function(){function t(){}return t.Wp=function(e){return e*t.UX},t.Ux=function(e,n){return t.qQ(n-e)},t.rQ=function(t){return-360<=t&&720>t?(0>t?t+=360:360<=t&&(t-=360),t):(0>(t=e.Tb.ZL(t))&&(t+=360),t)},t.qQ=function(e){return 180<(e=t.rQ(e))&&(e-=360),e},t.S_=.0174532925199433,t.UX=57.29577951308232,t}();e.Nr=t,e.Lh=function(){function n(){}return n.qj=function(t,n){var r=new e.g;t.s(r);var i=e.ab.nh(n),a=new e.g;return a.H(i),a.o=r.o,a.v=r.v,a.O(.01*a.ca(),0),n=e.la.Qd(n,r,!1),a.contains(r)?t:e.Yd.clip(t,a,n,0)},n.Ss=function(t,r,i,a,o){if(!e.ab.Cc(r))throw e.f.I();var s=e.la.Ng(r,t,!1),u=e.ab.nh(r),c=e.ab.hc(r),l=c.Ld().gi,h=e.ab.dw(c);c=e.ab.Nv(c),h*=2-h;var f=new e.uc;u.sn(f);var p=[[0,0],[0,0]];if(2==e.je.Fb(r)?a?(p[0][0]=n.nn(o,f),p[0][1]=u.cq(),e.ab.eu(),u=p[0][0]*l):(p[0][0]=u.lk(),p[0][1]=o,e.ab.eu(),u=p[0][1]*l):u=o*l,!a&&0!=u)throw e.f.I();var d=new e.da,v=new e.Yc;t=v.Bb(t);for(var y=[0],b=new e.b,g=new e.b,m=new e.b,w=new e.b,O=new e.b,j=new e.b,_=v.Kb(t);-1!=_;_=v.Qb(_)){var x=v.Za(_);v.w(x,m);for(var k=!1,S=x=v.T(x);-1!=S;S=v.T(S)){if(S==x){if(k)break;k=!0}if(v.w(S,w),a&&s<o-m.x&&w.x-o>s||s<o-w.x&&m.x-o>s||!a&&s<-m.y&&w.y>s||s<-w.y&&m.y>s)do{if(!(Math.abs(m.x-w.x)>=.5*f.N())){if(2==e.je.Fb(r)?(p[0][0]=n.nn(m.x,f),p[0][1]=m.y,p[1][0]=n.nn(w.x,f),p[1][1]=w.y,e.ab.uX(),O.x=p[0][0]*l,O.y=p[0][1]*l,j.x=p[1][0]*l,j.y=p[1][1]*l):(O.x=m.x*l,O.y=m.y*l,j.x=w.x*l,j.y=w.y*l),j.x=6.283185307179586*(w.x-m.x)/f.N()+O.x,a){if(g.x=u,g.y=n.uA(c,h,O,j,u,i),isNaN(g.y))break}else{if(g.x=n.sA(c,h,O,j,i),isNaN(g.x))break;g.y=0}e.gb.Ad(c,h,O.x,O.y,j.x,j.y,d,null,null,i);var M=d.j;e.gb.Ad(c,h,O.x,O.y,g.x,g.y,d,null,null,i);var I=d.j;2==e.je.Fb(r)?(p[0][0]=g.x/l,p[0][1]=g.y/l,e.ab.pS(),a?(b.y=p[0][1],b.x=o):(b.x=n.Ws(p[0][0],m.x,w.x,f),b.y=o)):a?(b.x=o,b.y=g.y/l):(b.x=n.Ws(g.x/l,m.x,w.x,f),b.y=o),y[0]=0<M?e.L.Yj(I/M,0,1):.5,0!=y[0]&&1!=y[0]&&(M=v.Ma(S),v.em(M,y,1),v.nb(v.T(M),b.x,b.y))}}while(0);m.K(w)}}return v.ye(t)},n.vm=function(t,r,i,a,o){if(t.u())return t;var s=e.ab.Sd(r);return n.aq(t,i-180*s,360*s,r,a,o,!0)},n.uA=function(t,r,i,a,o,s){if(3.141592653589793<=Math.abs(i.x-a.x)||!n.mo(i.x,a.x,o))return NaN;if(i.x>a.x)var u=a;else u=i,i=a;a=new e.da(0);var c=new e.da(0),l=new e.da(0);e.gb.Ad(t,r,u.x,u.y,i.x,i.y,c,a,null,s);var h=c.j,f=0,p=1,d=new e.b;for(d.K(u);h*(p-f)>1e-12*t;){var v=.5*(f+p);if(e.gb.tj(t,r,u.x,u.y,h*v,a.j,c,l,s),d.x=c.j,d.y=l.j,d.x==o)break;if(n.mo(u.x,d.x,o))p=v;else{if(!n.mo(i.x,d.x,o))return NaN;f=v}}return d.y},n.mo=function(e,n,r){return e=t.Wp(e),n=t.Ux(e,t.Wp(n)),0==(r=t.Ux(e,t.Wp(r)))||0<n&&0<r&&r<=n||0>n&&0>r&&r>=n},n.nn=function(e,t){var n=t.ja-t.fa;return t.su(e-Math.floor((e-t.fa)/n)*n)},n.Ws=function(t,n,r,i){var a=new e.uc;for(a.H(n,r),r=i.N(),t=Math.floor((t-n)/r)*r+t,a=a.hf();Math.abs(t-a)>Math.abs(t+r-a);)t+=r;return t},n.sA=function(t,n,r,i,a){if(r.y>i.y)var o=i;else o=r,r=i;if((i=new e.uc).H(o.y,r.y),!i.contains(0)||3.141592653589793<=Math.abs(o.x-r.x))return NaN;if(o.x==r.x)return o.x;var s=new e.da(0),u=new e.da(0),c=new e.da(0);e.gb.Ad(t,n,o.x,o.y,r.x,r.y,u,s,null,a);var l=u.j,h=0,f=1,p=new e.b;for(p.K(o);l*(f-h)>1e-12*t;){var d=.5*(h+f);if(e.gb.tj(t,n,o.x,o.y,l*d,s.j,u,c,a),p.x=u.j,p.y=c.j,i.H(o.y,p.y),0==p.y)break;if(i.contains(0))f=d;else{if(i.H(r.y,p.y),!i.contains(0))return NaN;h=d}}return p.x},n.aq=function(t,n,r,i,a,o,s){var u=new e.g;if(t.s(u),u.u())return t;var c=new e.uc;u.sn(c);var l=new e.uc;if(l.H(n,n+r),l.contains(c)&&l.ja!=c.ja)return t;var h=new e.g;h.H(u);var f=t.F();if(33==f)return((u=(h=a?t:t.Cf()).Ce())<l.fa||u>=l.ja||s&&u==l.ja)&&(u+=Math.ceil((l.fa-u)/r)*r,u=l.su(u),h.KC(u)),h;if(550==f){for(i=(h=a?t:t.Cf()).Va(0),f=2*h.D(),t=!1,a=0;a<f;a+=2)((u=i.read(a))<l.fa||u>=l.ja||s&&u==l.ja)&&(t=!0,u+=Math.ceil((l.fa-u)/r)*r,u=l.su(u),i.write(a,u));return t&&h.Oc(1993),h}if(l.contains(c))return t;if(197==f)return r=a?t:t.Cf(),u.Ia(h),r.mp(u),r;var p=.1*Math.max(u.ca(),u.N());for(h.O(0,p),s=t,l=i.ce(0),t=e.Jh.local(),a=new e.xd;;){var d=Math.floor((c.fa-n)/r),v=Math.ceil((c.ja-n)/r);if(!(3<v-d))break;d=Math.floor(.5*(v+d)),h.o=u.o-p,h.v=n+r*d;var y=e.Yd.clip(s,h,l,o);h.o=h.v,h.v=u.v+p;var b=e.Yd.clip(s,h,l,o);a.mg((d-v)*r,0),b.Qc(a),1736==f?s=t.U(y,b,i,null):(s=y).add(b,!1),s.s(u),u.sn(c)}for(h.o=n,h.v=n+r,(n=new e.g).H(h),n.O(l,0),0!=(n=Math.floor((u.o-h.o)/r)*r)?(h.move(n,0),a.mg(-n,0)):a.zC(),n=1607==f?new e.Oa(s.description):new e.Ga(s.description),o=new e.g,c=new e.g;u.v>h.o;)(p=e.Yd.clip(s,h,l,0)).s(c),(1607==f?!p.u()&&(c.N()>l||c.ca()>l):!p.u()&&(1736!=f||c.N()>l))&&(p.Qc(a),p.s(c),n.s(o),o.O(l,l),o.isIntersecting(c)&&1736==f?n=t.U(n,p,i,null):n.add(p,!1)),h.move(r,0),a.shift(-r,0);return n},n.NJ=function(t,n,r,i){var a=new e.Hd(r.description);a.yd(r,0,-1),a=e.ab.$g(a,t,n);var o=r.D();if(i.Ka(),!e.ab.Cc(t)||o!=a.D())return!1;var s=new e.g;r.s(s);var u=new e.g;if(a.s(u),s=s.N(),u=u.N(),0!=s&&0!=u){if(u/=s,t=e.ab.nh(n).N()/e.ab.nh(t).N(),1e-10<Math.abs(u/t-1))return!1}else if(0!=s||0!=u)return!1;for(i.add(r,!1),r=0;r<o;r++)t=a.xa(r),i.nb(r,t);return!0},n.vA=function(){throw e.f.Me()},n}()}(J||(J={})),function(e){var t,n,r;(n=t=e.zi||(e.zi={}))[n.Clip=0]="Clip",n[n.DontClip=1]="DontClip",n[n.PannableFold=2]="PannableFold",function(e){e[e.Geodesic=0]="Geodesic",e[e.Loxodrome=1]="Loxodrome",e[e.GreatElliptic=2]="GreatElliptic",e[e.NormalSection=3]="NormalSection",e[e.ShapePreserving=4]="ShapePreserving"}(r=e.eM||(e.eM={})),e.Ab=function(){function n(){}return n.ew=function(t,n,r){if(r||0<n){for(t=t.toString(e.Pc.PE_STR_NAME_CANON|e.Pc.PE_STR_AUTH_NONE),n=[],r=0;r<t.length;r++)n[r]="a"<=t[r]&&"z">=t[r]?n[r]=t[r].toUpperCase():t[r];return n.join()}return t.toString(e.Pc.PE_STR_AUTH_TOP)},n.Tr=function(t,n,r,i){var a=i.length,o=r.D();if(0!=o){var s=r.Va(0),u=Math.min(o,a),c=0,l=t.wg();isNaN(n)&&(n=0);for(var h=t.Cc(),f=179*(t=h?t.hc().be().N():0)/360;0<o;){if(s.dC(c<<1,u,i),e.Kh.projToGeogCenter(l,u,i,n),h)for(var p=0;p<u;p++){var d=i[p][0]-n,v=e.Tb.sign(d),y=s.read(2*(c+p));0>v*e.Tb.sign(y)&&Math.abs(d)>f&&(i[p][0]+=-v*t)}s.dD(c<<1,u,i),c+=u,o-=u,u=Math.min(o,a)}r.Oc(1993)}},n.o_=function(t,n,r,i){var a=t.wg();isNaN(n)&&(n=0);var o=r.Ce();i[0][0]=o,i[0][1]=r.lf(),e.Kh.projToGeogCenter(a,1,i,n),t.Cc()&&0>(n=e.Tb.sign(i[0][0]-n))*e.Tb.sign(o)&&(t=t.hc().be().N(),Math.abs(i[0][0])>179*t/360&&(i[0][0]-=n*t)),r.nb(i[0][0],i[0][1])},n.QM=function(t,n,r,i){var a=0,o=t.wg();isNaN(a)&&(a=0);var s=t.Cc(),u=t.Sd();t=360*u,u*=179;for(var c=i.length,l=0;l<r;){for(var h=l;h<r&&n[h].isNaN();++h)l++;var f=Math.min(c,r-l);if(0<f){h=1;for(var p=l+1;h<f;++h,++p)if(n[p].isNaN()){f=h;break}if(e.la.nz(i,n,l,f),e.Kh.projToGeogCenter(o,f,i,a),s)for(h=0,p=l;h<f;++h,++p){var d=n[p].x,v=i[h][0]-a,y=e.Tb.sign(v);0>y*e.Tb.sign(d)&&Math.abs(v)>u&&(i[h][0]-=y*t)}e.la.mz(n,l,i,f),l+=f}}},n.qy=function(t,n,r){var i=r.length,a=n.D();if(!(1>a)){var o=n.Va(0),s=Math.min(a,i),u=0,c=t.wg(),l=t.Cc(),h=l?t.be().N():0,f=179*h/360,p=0;for(l&&(p=t.Wh());0<a;){if(o.dC(u<<1,s,r),e.Kh.geogToProj(c,s,r),l)for(t=0;t<s;t++){var d=r[t][0],v=e.Tb.sign(d),y=o.read(2*(u+t))-p;0>v*e.Tb.sign(y)&&Math.abs(d)>f&&(r[t][0]+=-v*h)}o.dD(u<<1,s,r),u+=s,a-=s,s=Math.min(a,i)}n.Oc(1993)}},n.n_=function(t,n,r){if(!n.u()){var i=t.wg();if(r[0][0]=n.Ce(),r[0][1]=n.lf(),e.Kh.geogToProj(i,1,r),t.Cc()){i=e.Tb.sign(r[0][0]);var a=t.Wh();0>i*e.Tb.sign(n.Ce()-a)&&(t=t.be().N(),Math.abs(r[0][0])>179*t/360&&(r[0][0]-=i*t))}n.nb(r[0][0],r[0][1])}},n.PM=function(t,n,r,i){if(0!=r){var a=t.wg(),o=t.Cc(),s=o?t.be().N():0,u=179*s/360,c=0;for(o&&(c=t.Wh()),t=0;t<r;){for(var l=t;l<r&&n[l].isNaN();++l)t++;var h=Math.min(i.length,r-t);if(0<h){l=1;for(var f=t+1;l<h;++l,++f)if(n[f].isNaN()){h=l;break}if(e.la.nz(i,n,t,h),e.Kh.geogToProj(a,h,i),o)for(l=0,f=t;l<h;l++){var p=i[l][0],d=e.Tb.sign(p);0>d*e.Tb.sign(n[f].x-c)&&Math.abs(p)>u&&(i[l][0]-=d*s)}e.la.mz(n,t,i,h),t+=h}}}},n.Sr=function(t,n,r,i){var a=n.D();if(0!=a){var o=n.Va(0),s=t.ee,u=t.Je,c=s.hc().qk(),l=u.hc().qk(),h=s.Sd(),f=u.Sd();if(null==(t=t.He)||0==t.count()){for(r=c/l,i=(s.Cm()-u.Cm())*f,l=-90*h,t=90*h,c=!1,f=1,s=2*a;f<s;)h=o.get(f),(u=e.L.Yj(h,l,t))!=h&&(o.set(f,u),c=!0),f+=2;if(0!=i||1!=r)for(c=!0,l=new e.b,f=0;f<a;f++)o.mc(2*f,l),l.x*=r,l.x+=i,l.y*=r,o.Bu(2*f,l);c&&n.Oc(1993)}else{s=i.length,u=Math.min(a,s);var p=e.L.Xf(u),d=null,v=0,y=NaN,b=NaN,g=360*f,m=f/h;r&&(b=90*f,y=89.9*h,d=e.L.Xf(u));for(var w=!0,O=0;0!=a;){for(h=!1,o.dC(v<<1,u,i),f=0;f<u;f++)p[f]=i[f][0];if(r)for(f=0;f<u;f++){var j=Math.abs(i[f][1])-y;0<j&&(i[f][1]=e.Tb.hl(y,h=i[f][1]),d[f]=e.Tb.hl(j,h),h=!0)}for(f=i[0][0],t.transform(i,u,c,l),w&&(O=i[0][0]-m*f,w=!1),f=0;f<u;f++)j=i[f][0]-p[f]*m-O,200<Math.abs(j)&&(i[f][0]=0<j?i[f][0]-g:i[f][0]+g);if(h){for(f=0;f<u;f++)0!=d[f]&&(i[f][1]+=m*d[f],i[f][1]>b?i[f][1]=b:i[f][1]<-b&&(i[f][1]=-b));for(h=0;h<u;h++)d[h]=0}o.dD(v<<1,u,i),v+=u,a-=u,u=Math.min(a,s)}n.Oc(1993)}}},n.m_=function(t,n,r,i){if(n.u())return!1;var a=t.ee,o=t.Je,s=t.He,u=a.hc().qk(),c=o.hc().qk();if(i[0][0]=n.Ce(),i[0][1]=n.lf(),null!=s&&0<s.count()){t=!0;var l=!1,h=NaN,f=0,p=1;r&&(r=a.Sd(),p=(h=o.Sd())/r,h*=90,a=89.9*r,0<(o=Math.abs(i[0][1])-a)&&(i[0][1]=e.Tb.hl(a,l=i[0][1]),f=e.Tb.hl(o,l),l=!0)),s.transform(i,1,u,c),l&&0!=f&&(i[0][1]+=p*f,i[0][1]>h?i[0][1]=h:i[0][1]<-h&&(i[0][1]=-h)),n.nb(i[0][0],i[0][1])}else r=a.Sd(),t=e.L.Yj(i[0][1],-90*r,90*r)!=i[0][1],h=o.Sd(),s=(a.Cm()-o.Cm())*h,1==(u/=c)&&0==s||(t=!0,i[0][0]*=u,i[0][0]+=s,i[0][1]*=u),t&&n.nb(i[0][0],i[0][1]);return t},n.OM=function(t,n,r,i){if(t.Wq)i=90*t.ee.Sd(),e.la.iL(n,r,-i,i);else{var a=t.He,o=t.ee,s=t.Je;t=o.Ds();var u=s.Ds(),c=o.Sd(),l=90*c,h=s.Sd();if(null==a||0==a.count()){if(i=t/u,a=(o.Cm()-s.Cm())*h,e.la.iL(n,r,-l,l),0!=a||1!=i)for(h=0;h<r;h++)n[h].x*=i,n[h].x+=a,n[h].y*=i}else{o=Math.min(r,i.length),l=e.L.Xf(o),s=360*h,c=h/c;for(var f=!0,p=0,d=0;0!=r;){for(h=0;h<o;h++)l[h]=n[h+d].x;for(h=n[0].x,e.la.nz(i,n,d,o),a.transform(i,o,t,u),e.la.mz(n,d,i,o),f&&(p=n[0].x-c*h,f=!1),h=0;h<o;h++){var v=n[d+h].x-l[h]*c-p;200<Math.abs(v)&&(n[d+h].x=0<v?n[d+h].x-s:n[d+h].x+s)}d+=o,r-=o,o=Math.min(r,i.length)}}}},n.W_=function(e,t,r,i){return n.vm(e,t,isNaN(r)?0:r,!0,i,null)},n.Mv=function(e,t){return e=e.nh(),isNaN(t)||e.rv(t,0),e},n.fS=function(t,r,i,a,o,s,u,c){for(var l=n.Mv(a,o),h=l.N(),f=h/360,p=n.bF*f,d=t.Va(0),v=r.Cc(),y=v?h/r.be().N():0,b=!1,g=new e.Ga(i.description),m=0,w=i.$();m<w;++m){var O=v,j=new e.Oa(i.description);if(j.addPath(i,m,!0),0!=u){var _=n.BE(!0,j,l.B-c,l.B,u);(b=b||_)&&(O=!1)}var x=-1;O&&(x=t.ua(m));var k=j.Va(0),S=j.D(),M=0,I=k.read(0),T=0;_=3*a.ce(0);var A=!1,C=new e.b;C.Tc();var E=new e.b;E.Tc();for(var P=!1,R=1;R<S;++R){var D=e.b.construct(k.Ig(2*R),k.Ig(2*R+1)),L=D.x,N=L+M,F=N-I;if(D.x=N,Math.abs(F)>p){if(O){var z=x+(R+1<S?R:0),V=d.read(2*(x+R-1));z=(d.read(2*z)-V)*y,Math.abs(F-z)>1*f&&(O=!1)}O||(N=L+(M-=e.Tb.hl(h,N-I)),++T,P=0!=M,D.x=N)}else A||e.la.mH(E,C,D,_)&&(A=!0);P&&k.write(2*R,N),I=N,E.K(C),C.K(D)}0<T&&j.Oc(1993),O=j.xa(0),S=j.xa(S-1),j=e.b.vb(O,S)<_?n.GR(j,a,o,s,A):n.HR(t,m,j,a,o),g.add(j,!1)}return o=a.ce(0),i=l.N()/180,n.tu(g,l,.1*o,!1),g=g!=(o=e.fh.clip(g,l,o,i,s)),t=t.Pe(),u=0,0<(c=o.Pe())&&0>t?u=1:0>=c&&0<t&&(0==c?(c=NaN,2==r.Fb()?c=r.sk().Pe():1==r.Fb()&&(c=r.be().jG()),t>.99*c&&(u=-1)):u=-1),0!=u&&((r=new e.Ga(o.description)).Np(l),(r=e.im.local().U(r,i,s)).add(o,!1),g=!0,o=r),g&&(o=e.jm.local().U(o,a,!1,s)),o},n.HR=function(t,r,i,a,o){var s=i.D(),u=i.xa(0),c=i.xa(s-1);o=(a=n.Mv(a,o)).N(),u=e.Tb.sign(c.x-u.x);var l=new e.g;i.Zb(l);var h=a.lk();if(c=h-o,h+=o,0<=u){var f=Math.ceil((c-l.o)/o);for(f*=o;c>l.o+f;)f+=o;for(;c<l.v+f;)f-=o;var p=f;720<l.N()&&(h=c+360*Math.ceil(l.N()/360))}else{for(f=Math.ceil((h-l.v)/o),f*=o;h<l.v+f;)f-=o;for(;h>l.o+f;)f+=o;p=f,720<l.N()&&(c=h-360*Math.ceil(l.N()/360))}f=u*o;var d=e.g.construct(l.o,l.A,l.v,l.B);d.move(p,0);var v=new e.xd;v.mg(p,0),i.Qc(v),(l=new e.Oa(i.description)).add(i,!1),p=i.xa(s-1),o=0;for(var y=l.xa(0).x;0<u?d.v<h:d.o>c;)d.move(f,0),v.Ob=f,i.Qc(v),a.o<=(y+=f)&&a.v>=y&&(o=l.D()-1),i.nb(0,p),p=i.xa(s-1),l.ds(i,0,0,s-1,!1);return i=new e.Ga(l.description),s=0<t.rm(r),i.add(l,!1),t=l.xa(0),c=l.xa(l.D()-1),r=i.$()-1,(0>u?s:!s)?(u=e.b.construct(c.x,a.B),i.Ii(u),u=e.b.construct(a.lk(),a.B),i.Ii(u),a=e.b.construct(t.x,a.B)):(u=e.b.construct(c.x,a.A),i.Ii(u),u=e.b.construct(a.lk(),a.A),i.Ii(u),a=e.b.construct(t.x,a.A)),i.Ii(a),i.jH(0,r,0),i.uP(o),i},n.GR=function(t,r,i,a,o){var s=new e.Ga(t.description);s.add(t,!1),s.mC(0,s.D()-1);var u=new e.g;s.Zb(u);var c=(i=n.Mv(r,i)).N(),l=Math.ceil((i.o-u.o)/c);for(l*=c;i.o>u.o+l;)l+=c;for(;i.o<u.v+l;)l-=c;if(0!=(l+=c)){u.move(l,0);var h=new e.xd;h.mg(l,0),s.Qc(h)}if(i.o<=u.o&&i.v>u.v)return o&&(o=s.Pe(),r=(s=e.jm.local().U(s,r,!0,a)).Pe(),(r=e.Tb.sign(o)!=e.Tb.sign(r))&&s.sK()),s;for((t=new e.Ga(t.description)).add(s,!1),o=o||u.N()>c-r.ce(0);u.o<i.v;)u.move(c,0),(h=new e.xd).mg(c,0),s.Qc(h),t.add(s,!1);return o&&(o=t.Pe(),t.np(1),r=(t=e.jm.local().U(t,r,!0,a)).Pe(),(r=e.Tb.sign(o)!=e.Tb.sign(r))&&t.sK()),t},n.BE=function(t,n,r,i,a){for(var o=n.Va(0),s=n.D(),u=!1,c=0;c<s;c++){var l=e.b.construct(o.Ig(2*c),o.Ig(2*c+1));if(0!=(1&a)&&l.y>=r){u=!0;break}if(0!=(2&a)&&l.y<=-r){u=!0;break}}if(!u)return!1;o=!1,t&&(o=n.ho(0)),s=(t=new e.Yc).Bb(n),u=t.Kb(s);var h=-1,f=!0,p=new e.b;p.Tc(),c=new e.Ra;for(var d=-1,v=t.Za(u);-1!=v;v=t.T(v)){l=t.xa(v);var y=0!=(1&a)&&90<=l.y?1:0;if(y|=0!=(2&a)&&l.y<=-r?2:0,0<h&&h!=y){if(p.x!=l.x){p.x=l.x,t.bj(t.Ma(v),c);var b=t.Bj(u,v,c);t.wf(b,p)}if(o)for(d=-1!=d?t.T(d):t.Za(u),b=t.Ma(v);d!=b;)d=t.pd(d,!1);d=-1}0<y&&(l.y=e.Tb.hl(i,l.y),t.wf(v,l),f||h==y||(l.x!=p.x?(t.bj(v,c),b=t.Bj(u,v,c),t.nb(b,p.x,l.y),d=b):d=v)),h=y,p=l,f=!1}if(o){if(-1!=d)for(d=t.T(d);-1!=d;)d=t.pd(d,!1);r=t.Za(u),t.wq(r,t.wj(u))||(t.bj(r,c),t.Bj(u,-1,c))}return t.ye(s).copyTo(n),!0},n.G0=function(e,t){var n=0,r=e.Ha(t);t+=1;for(var i=e.$();t<i&&!(0<e.rm(t));++t)n++;return 64<r&&3<=n},n.tA=function(r,i,a,o){var s=r;if(s.u()||a==t.DontClip)return s;var u=s.F();if(33==u)return s=[(o=s).w()],n.kH(s,1,i,a),s[0].isNaN()?o.Ka():o.nb(s[0]),r;var c=(r=i.hc()).Sd(),l=90*c,h=180*c,f=360*c,p=i.Wh(),d=.5*c,v=new e.g;s.s(v);var y=i.Bs(),b=i.aS(),g=197==y.F();if(i=new e.g,y.s(i),a==t.PannableFold&&(a=r.be().N(),i.o=p-.5*a,i.v=i.o+a),v.A<-l||v.B>l){if((new e.g).H(v.o-c,-l,v.v+c,l),(s=e.fh.Tp(s,i,r,NaN,0,o)).u())return s;s.s(v)}if(b&&(i.B<v.A||i.A>v.B))return s.Ea();if(v.N()>f&&(s=n.aq(s,p-h,f,r,!0,0,!0,o)).s(v),0!=(l=n.nP(v.o,v.v,i.o,i.v,f))&&v.move(l,0),v.v>i.v||v.o<i.o){if(v.v>i.v)for(;v.o>=i.v;)v.move(-f,0),l-=f;for(;v.o<i.v-f;)v.move(f,0),l+=f}if(a=e.la.pv(r,y),0!=l&&((c=new e.xd).mg(l,0),s.Qc(c)),b){if(g&&i.contains(v))return s;for(b=[null,null],l=0;2>l;l++){if(g?c=e.R.Bc(u)?e.fh.clip(s,i,a,d,o):e.fh.clip(s,i,a,0,o):(c=e.ak.local().U(s,y,r,o))==y&&(c=e.R.$d(c)),i.o<=v.o&&i.v>=v.v||i.o>=v.o&&i.v<=v.v)return c;b[l]=c,0==l&&(v.move(-f,0),(c=new e.xd).mg(-f,0),s.Qc(c))}if(550==u)b[0].yd(b[1],0,-1);else if(e.R.Bc(u))b[0].add(b[1],!1);else{if(33!=u)throw e.f.Y("intersect_with_GCS_horizon: unexpected geometry type");b[0].u()&&(b[0]=b[1])}return b[0]}if(i.B<v.A||i.A>v.B)return s;for(u=0;!s.u()&&v.v>i.o;)0!=u&&((c=new e.xd).mg(u,0),s.Qc(c)),e.kj.local().U(4,s,y,r,o)||y==(s=e.Cp.local().U(s,y,r,o))&&(s=e.R.$d(s)),0!=u&&((d=new e.xd).mg(-u,0),s.Qc(d)),u-=f,v.move(-f,0);return s},n.kH=function(r,i,a,o){if(0!=i&&o!=t.DontClip)if(o==t.PannableFold){o=a.XS();for(var s=i,u=0;u<i;u++)(r[u].y>o.B||r[u].y<o.A)&&(r[u].Tc(),s--);0!=s&&n.Iv(r,i,o.o,o.N())}else{var c=90*(o=a.Sd()),l=180*o;for(o*=360,s=i,u=0;u<i;u++)(r[u].y>c||r[u].y<-c)&&(r[u].Tc(),s--);if(0!=s){(s=new e.g).Ix(r,i),c=a.Bs();var h=a.Pv();u=197==c.F();var f=new e.g;if(c.s(f),!h||!(f.B<s.A||f.A>s.B))if(h)if(n.Iv(r,i,f.lk()-l,o),s=i,u)for(u=0;u<i;u++)f.contains(r[u])||(r[u].Tc(),s--);else for(a=e.la.pv(a.hc(),c),u=0;u<i;u++)(l=0!=e.Zc.Td(c,r[u],a))||(r[u].Tc(),s--);else for(n.Iv(r,i,-l,o),s=i,a=e.la.pv(a.hc(),c),u=0;u<i;u++)(l=r[u]).isNaN()&&s--,h=n.fF(l.x,f.o,f.v,o),l.x+=h,(l=0!=e.Zc.Td(c,l,a))&&(r[u].Tc(),s--)}}},n.b0=function(t,n,r){if(0<=n&&!t.Lb(n))return 0;var i=0;if(1==r.Fb())return n=90*r.Sd(),n-=2*n/Math.PI*e.Pc.PE_HORIZON_DELTA,r=new e.g,t.s(r),r.B>=n&&(i=1),r.A<=-n&&(i|=2),i;var a=r.xj();if(null==a)return 0;var o=null;0<=n&&(o=t);for(var s=0;2>s;s++)if((0<s?a.getSouthPoleLocation():a.getNorthPoleLocation())!=e.ng.PE_POLE_OUTSIDE_BOUNDARY){var u=r.bA(0<s);u.isNaN()||(i|=(u=0>n?e.Oe.yA(t,u,0):e.Oe.zA(o,n,u,0,null))<<s)}return i},n.aq=function(t,n,r,i,a,o,s,u){var c=t.F(),l=n+r;if(33===c){var h=(i=a?t:t.Cf()).Ce();return(h<n||h>=l||s&&h==l)&&(h+=Math.ceil((n-h)/r)*r,h=e.L.Yj(h,n,l),i.KC(h)),i}if(t.u())return t;if(h=new e.g,t.s(h),h.u())return t;var f=new e.uc;h.sn(f);var p=new e.uc;if(p.H(n,l),p.contains(f))return t;if((l=new e.g).H(h),550===c){for(u=(i=a?t:t.Cf()).Va(0),c=2*i.D(),l=!1,n=0;n<c;n+=2)((h=u.read(n))<p.fa||h>=p.ja||s&&h==p.ja)&&(l=!0,h+=Math.ceil((p.fa-h)/r)*r,h=p.su(h),u.write(n,h));return l&&i.Oc(1993),i}if(197==c)return r=a?t:t.Cf(),h.Ia(l),r.mp(h),r;var d=.1*Math.max(h.ca(),h.N());for(l.O(0,d),s=t,p=i.ce(0),t=e.Jh.local(),a=new e.xd;;){var v=Math.floor((f.fa-n)/r),y=Math.ceil((f.ja-n)/r);if(!(3<y-v))break;v=Math.floor(.5*(y+v)),l.o=h.o-d,l.v=n+r*v;var b=e.fh.clip(s,l,p,o,u);l.o=l.v,l.v=h.v+d;var g=e.fh.clip(s,l,p,o,u);a.mg((v-y)*r,0),g.Qc(a),1736==c?s=t.U(b,g,i,null):(s=b).add(g,!1),s.s(h),h.sn(f)}for(l.o=n,l.v=n+r,(n=new e.g).H(l),n.O(p,0),0!=(n=Math.floor((h.o-l.o)/r)*r)?(l.move(n,0),a.mg(-n,0)):a.zC(),n=1607==c?new e.Oa(s.description):new e.Ga(s.description),o=new e.g,f=new e.g;h.v>l.o;)(d=e.fh.clip(s,l,p,0,u)).s(f),(1607==c?!d.u()&&(f.N()>p||f.ca()>p):!d.u()&&(1736!=c||f.N()>p))&&(d.Qc(a),d.s(f),n.s(o),o.O(p,p),o.isIntersecting(f)&&1736==c?n=t.U(n,d,i,null):n.add(d,!1)),l.move(r,0),a.shift(-r,0);return n},n.Iv=function(t,n,r,i){for(var a=r+i,o=0;o<n;o++){var s=t[o].x;r<=s&&s<a||!(s<r||s>a||s==a)||(s+=Math.ceil((r-s)/i)*i,s=e.L.Yj(s,r,a),t[o].x=s)}},n.vm=function(t,r,i,a,o,s){if(!r.Cc())throw e.f.Y("fold_into_360_degree_range");if(t.u())return t;if(2==r.Fb()){i=r.Xv();var u=r.Wv()-i}else{var c=r.Sd();u=360*c,i-=180*c}return n.aq(t,i,u,r,a,o,!0,s)},n.dG=function(e,t,r,i){if(2==r.Fb())i=r.Xv(),r=r.Wv()-i;else{var a=r.Sd();r=360*a,i-=180*a}n.Iv(e,t,i,r)},n.qj=function(t,n){var r=n.be();if(33==t.F()){var i=t.lf();return r.A<=i&&i<=r.B?t:t.Ea()}i=new e.g,t.s(i);var a=new e.g;return a.H(r),a.o=i.o,a.v=i.v,a.O(.01*a.ca(),0),r=e.la.Zy(n,i),a.contains(i)?t:e.fh.clip(t,a,r,0,null)},n.Er=function(e,t,n){return e>t.v&&e-t.v<n?t.v:e<t.o&&t.o-e<n?t.o:e},n.kZ=function(e,t,r,i){i.x=n.Er(e.x,t,r),i.y=e.y},n.jZ=function(e,t,r,i){for(var a=0;a<t;a++)e[a].y<r.A||e[a].y>r.B?e[a].Tc():e[a].x=n.Er(e[a].x,r,i)},n.tu=function(t,r,i,a){if(!t.u()){var o=t.F();if(!a||1736!=o)if(e.R.Rg(o)){a=t.Va(0),o=0;for(var s=t.D();o<s;o++){var u=a.read(2*o),c=n.Er(u,r,i);c!=u&&a.write(2*o,c)}t.Oc(1993)}else if(197==o)a=new e.g,t.s(a),a.o=n.Er(a.o,r,i),a.v=n.Er(a.v,r,i),t.mp(a);else{if(33!=o)throw e.f.Y("internal error");t.KC(n.Er(t.Ce(),r,i))}}},n.PT=function(t,r,i,a){var o=new e.Yc,s=o.Bb(t);return t=e.la.pv(r,t),n.Ss(o,s,r,t,i,!0,a),o.ye(s)},n.Ss=function(t,i,a,o,s,u,c){if(!a.Cc())throw e.f.I("invalid call");var l=a.be(),h=a.hc(),f=h.wg().getDatum().getSpheroid();h=h.Ld().gi;var p=f.getFlattening();f=f.getAxis(),p*=2-p;var d=new e.uc;l.sn(d);var v=null,y=[[0,0],[0,0]];if(2==a.Fb()?(v=a.wg(),u?(y[0][0]=n.nn(c,d),y[0][1]=l.cq(),e.Kh.projToGeog(v,1,y),l=y[0][0]*h):(y[0][0]=l.lk(),y[0][1]=c,e.Kh.projToGeog(v,1,y),l=y[0][1]*h)):l=c*h,!u&&0!=l&&s!=r.GreatElliptic)throw e.f.Y("invalid argument");var b=new e.da,g=[0],m=new e.b,w=new e.b,O=new e.b,j=[null,null],_=new e.b,x=new e.b,k=new e.b,S=new e.b;for(i=t.Kb(i);-1!=i;i=t.Qb(i)){var M=t.Za(i);t.w(M,_);for(var I=!1,T=M=t.T(M);-1!=T;T=t.T(T)){if(T==M){if(I)break;I=!0}if(t.w(T,x),u&&(o<c-_.x&&x.x-c>o||o<c-x.x&&_.x-c>o)||!u&&(0!=c||o<-_.y&&x.y>o||o<-x.y&&_.y>o))do{if(!(Math.abs(_.x-x.x)>=.5*d.N())){if(2==a.Fb()?(y[0][0]=n.nn(_.x,d),y[0][1]=_.y,y[1][0]=n.nn(x.x,d),y[1][1]=x.y,e.Kh.projToGeogCenter(v,2,y,0),k.x=y[0][0]*h,k.y=y[0][1]*h,S.y=y[1][1]*h):(k.x=_.x*h,k.y=_.y*h,S.y=x.y*h),S.x=2*(x.x-_.x)*Math.PI/d.N()+k.x,u){if(w.x=l,w.y=n.uA(f,p,k,S,l,s),isNaN(w.y))break;j[0]=w;var A=1}else if(s==r.GreatElliptic){var C=[0,0];if(0==(A=e.ty.vA(p,k,S,l,C)))break;w.x=C[0],w.y=l,j[0]=w,2==A&&(O.x=C[1],O.y=l,j[1]=O)}else{if(w.x=n.sA(f,p,k,S,s),isNaN(w.x))break;w.y=0,j[0]=w,A=1}var E=-1;for(C=0;C<A;C++){e.gb.Ad(f,p,k.x,k.y,S.x,S.y,b,null,null,s);var P=b.j;e.gb.Ad(f,p,k.x,k.y,j[C].x,j[C].y,b,null,null,s);var R=b.j;if(2==a.Fb()?(y[0][0]=j[C].x/h,y[0][1]=j[C].y/h,e.Kh.geogToProj(v,1,y),u?(m.y=y[0][1],m.x=c):(m.x=n.Ws(y[0][0],_.x,x.x,d),m.y=c)):u?(m.x=c,m.y=j[C].y/h):(m.x=n.Ws(j[C].x/h,_.x,x.x,d),m.y=c),g[0]=0<P?e.L.Yj(R/P,0,1):.5,0==g[0]||1==g[0])break;E>g[0]||(E=t.Ma(T),t.em(E,g,1),t.nb(t.T(E),m.x,m.y),E=g[0])}}}while(0);_.K(x)}}},n.nn=function(e,t){var n=t.ja-t.fa;return t.su(e-Math.floor((e-t.fa)/n)*n)},n.Ws=function(t,n,r,i){var a=new e.uc;for(a.H(n,r),r=i.N(),t=Math.floor((t-n)/r)*r+t,a=a.hf();Math.abs(t-a)>Math.abs(t+r-a);)t+=r;return t},n.mo=function(t,n,r){return t=e.Nr.Wp(t),n=e.Nr.Ux(t,e.Nr.Wp(n)),0==(r=e.Nr.Ux(t,e.Nr.Wp(r)))||0<n&&0<r&&r<=n||0>n&&0>r&&r>=n},n.uA=function(t,i,a,o,s,u){if(u==r.GreatElliptic)return e.ty.lU(i,a,o,s);if(Math.abs(a.x-o.x)>=Math.PI||!n.mo(a.x,o.x,s))return NaN;if(a.x>o.x)var c=o;else c=a,a=o;o=new e.da;var l=new e.da,h=new e.da;e.gb.Ad(t,i,c.x,c.y,a.x,a.y,l,o,null,u);var f=l.j,p=0,d=1,v=new e.b;for(v.K(c);f*(d-p)>1e-12*t;){var y=.5*(p+d);if(e.gb.tj(t,i,c.x,c.y,f*y,o.j,l,h,u),v.x=l.j,v.y=h.j,v.x==s)break;if(n.mo(c.x,v.x,s))d=y;else{if(!n.mo(a.x,v.x,s))return NaN;p=y}}return v.y},n.sA=function(t,n,i,a,o){if(o==r.GreatElliptic)return e.ty.vA(n,i,a,0,t=[0,0]),t[0];if(i.y>a.y)var s=a;else s=i,i=a;if((a=new e.uc).H(s.y,i.y),!a.contains(0)||Math.abs(s.x-i.x)>=Math.PI)return NaN;if(s.x==i.x)return s.x;var u=new e.da,c=new e.da,l=new e.da;e.gb.Ad(t,n,s.x,s.y,i.x,i.y,c,u,null,o);var h=c.j,f=0,p=1,d=new e.b;for(d.K(s);h*(p-f)>1e-12*t;){var v=.5*(f+p);if(e.gb.tj(t,n,s.x,s.y,h*v,u.j,c,l,o),d.x=c.j,d.y=l.j,a.H(s.y,d.y),0==d.y)break;if(a.contains(0))p=v;else{if(a.H(i.y,d.y),!a.contains(0))return NaN;f=v}}return d.x},n.L0=function(t,n,r,i,a,o){if(n==a&&r!=o)throw e.f.I();if(0>=i)return 0;if(t.xq()){o*=2;var s=2*r;for(t=2*i,r=0;r<t;r++)a[o+r]=n[s+r];return i}if(2>=i){for(o=[new e.b,new e.b],s=0;s<i;s++)o[s].ka(n[2*s],n[2*s+1]);for(n=e.Rr.local().KZ(t,o,i,o),s=0;s<i;s++)a[2*s]=o[s].x,a[2*s+1]=o[s].y;return n}var u=t.ee;s=t.Je;var c=u.Fb(),l=s.Fb();if(0==c&&c==l)return s=(t=u.qk())/(s=s.qk()),(t=new e.xd).Dr(s,s),t.LZ(n,r,a,o,i),i;(c=new e.Hd).le(3),c.resize(i),l=c.Va(0);var h=c.Va(3);s=0;for(var f=2*r,p=2*o;s<i;s++,p+=2){r=n[f++],u=n[f++];var d=p;(isNaN(r)||isNaN(u))&&(u=r=0,d=-1),h.write(s,d),l.write(2*s,r),l.write(2*s+1,u)}for(c.Oc(1993),n=e.Rr.local().U(c,t,null),s=0,o*=2;s<i;s++,o+=2)a[o]=NaN,a[o+1]=NaN;if(n.u())return 0;for(o=n.Va(3),t=n.Va(0),s=c=0,i=n.D();s<i;s++)-1!=(n=o.read(s))&&(r=t.read(2*s),u=t.read(2*s+1),a[n]=r,a[n+1]=u,c++);return c},n.NJ=function(t,n,r,i){if(!t.ee.Cc())return!1;var a=new e.Hd(n.description);if(a.yd(n,0,-1),i=e.Rr.local().U(a,t,i),a=n.D(),r.Ka(),a!=i.D())return!1;var o=new e.g;n.s(o);var s=new e.g;if(i.s(s),o=o.N(),s=s.N(),0!=o&&0!=s){if(s/=o,t=t.Je.nh().N()/t.ee.nh().N(),1e-10<Math.abs(s/t-1))return!1}else if(0!=o||0!=s)return!1;for(r.add(n,!1),n=new e.b,t=0;t<a;t++)i.w(t,n),r.nb(t,n);return!0},n.BO=function(e,t){return(e%=360*t)>=180*t&&(e-=360*t),e},n.LJ=function(r,i,a,o){if(a==t.Clip){var s=i.sk();197==s.F()?(a=new e.g,s.s(a),s=e.la.Zy(i,a),r=e.fh.clip(r,a,s,5e4*i.Am(),o)):e.kj.local().U(1,s,r,i,o)||(r=e.ak.local().U(r,s,i,o))==s&&(r=e.Zk.$d(r))}else i.Cc()&&(o=new e.g,r.Zb(o),i.be().contains(o)||(n.tu(r,i.be(),i.ce(0),!0),a==t.PannableFold&&(r=n.qj(r,i)),r=n.vm(r,i,0,!0,1e5*i.Am(),null)));return r},n.JE=function(t,n,r){var i=n.Cs();if(null==i)return t;var a=(n=n.hc()).be().N(),o=new e.g;t.Zb(o);var s=new e.uc;o.sn(s),o=i.Ba(),i=null;for(var u=new e.xd;o.Ta();)for(;o.Aa();){var c=o.aa(),l=c.Qf(0,0),h=new e.uc;for(h.H(l.fa,l.ja),l=0;h.ja>s.fa;)h.move(-a),--l;for(;h.fa<=s.ja;){if(h.isIntersecting(s)){null==i&&(i=new e.Oa);var f=e.zb.mQ(c.ac(),c.wc());0!=l&&(u.mg(l*a,0),f.Qc(u)),i.$b(f,!0)}h.move(a),++l}}return null!=i?(n=e.la.pP(n,i),n=e.la.es(n),e.Hu.vQ(t,i,n,r)):t},n.nP=function(e,t,r,i,a){return e>=r&&t<=i?0:n.fF(.5*(t+e),r,i,a)},n.fF=function(t,n,r,i){return e.Tb.round((.5*(r+n)-t)/i)*i},n.gS=function(t,r,i,a,o,s,u,c){var l=n.Mv(a,o),h=l.N(),f=h/360,p=n.bF*f,d=t.Va(0),v=r.Cc(),y=v?h/r.be().N():0;r=t.Ea();for(var b=0,g=i.$();b<g;++b){var m=v,w=new e.Oa(i.description);w.addPath(i,b,!0);var O=i.Lb(b);0!=u&&(O=n.BE(O,w,l.B-c,l.B,u))&&(m=!1);var j=-1;O=w.D();var _=!1;m&&(j=t.ua(b),_=t.Lb(b));var x=w.Va(0),k=0,S=x.read(0),M=0,I=3*a.ce(0),T=!1,A=new e.b;A.Tc();var C=new e.b;C.Tc();for(var E=!1,P=1;P<O;++P){var R=e.b.construct(x.Ig(2*P),x.Ig(2*P+1)),D=R.x,L=D+k,N=L-S;if(R.x=L,Math.abs(N)>p){if(m){var F=j+P-1,z=j;(!_||P+1<O)&&(z+=P),F=d.read(2*F),z=(d.read(2*z)-F)*y,Math.abs(N-z)>1*f&&(v=!1)}m||(L=D+(k-=e.Tb.hl(h,L-S)),++M,E=0!=k,R.x=L)}else T||e.la.mH(A,C,R,I)&&(T=!0);E&&x.write(2*P,L),S=L,A.K(C),C.K(R)}0!=M&&w.Oc(1993),m=w.xa(0),O=w.xa(O-1),e.b.vb(m,O),w=n.IR(w,a,isNaN(o)?0:o,s),r.add(w,!1)}return t=a.ce(0),i=l.N()/180,n.tu(r,l,.1*t,!1),e.fh.clip(r,l,t,i,s)},n.IR=function(e,t,r,i){return n.vm(e,t,r,!0,0,i)},n.iU=function(t,n,r,i){var a=t.F();if(1736==a)for(n=null!=n?n.ce(0):0,a=0;a<i;a++)1!=e.Zc.Td(t,r[a],n)&&r[a].Tc();else{if(197!=a)throw e.f.I();for(a=0;a<i;a++)t.nQ(r[a])||r[a].Tc()}},n.fl=function(t,n,r,i){if(32>r)for(var a=new e.Ra,o=0;o<r;o++)a.nb(n[o]),t.fl(a,i).w(n[o]);else{var s=new e.Hd;for(s.le(3),s.tE(n,r),a=s.Va(3),o=0;o<r;o++)a.write(o,o);for(o=t.fl(s,i),t=o.Va(0),a=o.Va(3),i=e.b.construct(NaN,NaN),s=0;s<r;s++)n[s]=i;for(r=o.D(),o=0;o<r;o++)i=a.read(o),t.mc(2*o,n[i])}},n.el=function(t,n,r,i){if(32>r)for(var a=new e.Ra,o=0;o<r;o++)a.nb(n[o]),t.el(a,i).w(n[o]);else{var s=new e.Hd;for(s.le(3),s.tE(n,r),a=s.Va(3),o=0;o<r;o++)a.write(o,o);for(o=t.el(s,i),t=o.Va(0),a=o.Va(3),i=e.b.construct(NaN,NaN),s=0;s<r;s++)n[s]=i;for(r=o.D(),o=0;o<r;o++)i=a.read(o),t.mc(2*o,n[i])}},n.G_="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n.bF=210,n}()}(J||(J={})),function(e){var t;(t=e.bN||(e.bN={}))[t.rightSide=1]="rightSide";var n=function(){function t(t,n,r){this.jt=new e.b,void 0===t?this.ap=-1:(this.jt.K(t),this.ap=n,this.La=r,this.Uw=0)}return t.prototype.$K=function(e){this.Uw=e?1|this.Uw:-2&this.Uw},t.prototype.u=function(){return 0>this.ap},t.prototype.Lz=function(){if(this.u())throw e.f.Y("invalid call");return new e.Ra(this.jt.x,this.jt.y)},t.prototype.Ua=function(){if(this.u())throw e.f.Y("invalid call");return this.ap},t.prototype.Oz=function(){if(this.u())throw e.f.Y("invalid call");return this.La},t.prototype.AA=function(){return 0!=(1&this.Uw)},t.prototype.Jy=function(e,t,n,r){this.jt.x=e,this.jt.y=t,this.ap=n,this.La=r},t}();e.lm=n}(J||(J={})),function(e){var t=function(){function t(){}return t.prototype.wn=function(t,n){this.Ah.resize(0),this.Oi.length=0,this.Ak=-1,t.Zb(this.Mk),this.Mk.O(n,n),this.Mk.isIntersecting(this.Hb.Da)?((this.dt=e.R.Ic(t.F()))?(this.II=t.ac(),this.HI=t.wc(),this.qa=n):this.qa=NaN,this.Ah.add(this.Hb.tf),this.Oi.push(this.Hb.Da),this.yt=this.Hb.As(this.Hb.tf)):this.yt=-1},t.prototype.vi=function(e,t){this.Ah.resize(0),this.Oi.length=0,this.Ak=-1,this.Mk.H(e),this.Mk.O(t,t),this.qa=NaN,this.Mk.isIntersecting(this.Hb.Da)?(this.Ah.add(this.Hb.tf),this.Oi.push(this.Hb.Da),this.yt=this.Hb.As(this.Hb.tf),this.dt=!1):this.yt=-1},t.prototype.next=function(){if(0==this.Ah.size)return-1;this.Ak=this.yt;var t=null,r=null,i=null,a=null;this.dt&&(t=new e.b,r=new e.b,i=new e.g);for(var o=!1;!o;){for(;-1!=this.Ak;){var s=this.Hb.Hz(this.Hb.Ov(this.Ak));if(s.isIntersecting(this.Mk)){if(!this.dt){o=!0;break}if(t.K(this.II),r.K(this.HI),i.H(s),i.O(this.qa,this.qa),0<i.ez(t,r)){o=!0;break}}this.Ak=this.Hb.Vv(this.Ak)}if(-1==this.Ak){s=this.Ah.Gc();var u=this.Oi[this.Oi.length-1];for(null==a&&((a=[])[0]=new e.g,a[1]=new e.g,a[2]=new e.g,a[3]=new e.g),n.IK(u,a),this.Ah.Rf(),--this.Oi.length,u=0;4>u;u++){var c=this.Hb.fq(s,u);if(-1!=c&&0<this.Hb.mT(c)&&a[u].isIntersecting(this.Mk))if(this.dt){if(t.K(this.II),r.K(this.HI),i.H(a[u]),i.O(this.qa,this.qa),0<i.ez(t,r)){var l=new e.g;l.H(a[u]),this.Ah.add(c),this.Oi.push(l)}}else(l=new e.g).H(a[u]),this.Ah.add(c),this.Oi.push(l)}if(0==this.Ah.size)return-1;this.Ak=this.Hb.As(this.Ah.get(this.Ah.size-1))}}return this.yt=this.Hb.Vv(this.Ak),this.Ak},t.lQ=function(n,r,i){var a=new t;return a.Hb=n,a.Mk=new e.g,a.Ah=new e.ha(0),a.Oi=[],a.wn(r,i),a},t.kQ=function(n,r,i){var a=new t;return a.Hb=n,a.Mk=new e.g,a.Ah=new e.ha(0),a.Oi=[],a.vi(r,i),a},t.jQ=function(n){var r=new t;return r.Hb=n,r.Mk=new e.g,r.Ah=new e.ha(0),r.Oi=[],r},t}();e.q_=t;var n=function(){function n(t,n){this.sf=new e.ad(11),this.ei=new e.ad(5),this.et=[],this.Qw=new e.ha(0),this.Da=new e.g,this.Uk(t,n)}return n.prototype.reset=function(e,t){this.sf.rj(!1),this.ei.rj(!1),this.et.length=0,this.Qw.clear(!1),this.Uk(e,t)},n.prototype.Gi=function(e,t){return this.gw(e,t,0,this.Da,this.tf,!1,-1)},n.prototype.fw=function(e,t,n){n=-1==n?this.tf:this.HG(n);var r=this.ca(n),i=this.CS(n);return this.gw(e,t,r,i,n,!1,-1)},n.prototype.ga=function(e){return this.xS(e)},n.prototype.sG=function(e){return this.Hz(this.Ov(e))},n.prototype.ca=function(e){return this.Qv(e)},n.prototype.CS=function(t){var n=new e.g;n.H(this.Da);var r=this.Qv(t);t=this.CG(t);for(var i=0;i<2*r;i+=2){var a=e.L.truncate(3&t>>i);0==a?(n.o=.5*(n.o+n.v),n.A=.5*(n.A+n.B)):1==a?(n.v=.5*(n.o+n.v),n.A=.5*(n.A+n.B)):(2==a?n.v=.5*(n.o+n.v):n.o=.5*(n.o+n.v),n.B=.5*(n.A+n.B))}return n},n.prototype.mT=function(e){return this.iA(e)},n.prototype.LS=function(e,n){return t.lQ(this,e,n)},n.prototype.Vz=function(e,n){return t.kQ(this,e,n)},n.prototype.getIterator=function(){return t.jQ(this)},n.prototype.Uk=function(t,n){if(0>n||32<2*n)throw e.f.I("invalid height");this.UU=n,this.Da.H(t),this.tf=this.sf.Ke(),this.Rx(this.tf,0),this.Kx(this.tf,0),this.RK(this.tf,0),this.OK(this.tf,0)},n.prototype.gw=function(t,r,i,a,o,s,u){if(!a.contains(r))return 0==i?-1:this.gw(t,r,0,this.Da,this.tf,s,u);if(!s)for(var c=o;-1!=c;c=this.YS(c))this.Rx(c,this.iA(c)+1);(c=new e.g).H(a),a=o;var l=[];for(l[0]=new e.g,l[1]=new e.g,l[2]=new e.g,l[3]=new e.g;i<this.UU&&this.rP(a);i++){n.IK(c,l);for(var h=!1,f=0;4>f;f++)if(l[f].contains(r)){h=!0;var p=this.fq(a,f);-1==p&&(p=this.BQ(a,f)),this.Rx(p,this.iA(p)+1),a=p,c.H(l[f]);break}if(!h)break}return this.NT(t,r,i,c,a,s,o,u)},n.prototype.NT=function(e,t,n,r,i,a,o,s){var u=this.yG(i);if(a){if(i==o)return s;this.cR(s),a=s}else a=this.EQ(),this.xC(a,e),this.pY(this.Ov(a),t);return this.PY(a,i),-1!=u?(this.Ox(a,u),this.Lx(u,a)):this.KK(i,a),this.AC(i,a),this.Kx(i,this.Tv(i)+1),this.qP(i)&&this.YR(n,r,i),a},n.prototype.cR=function(e){var t=this.HG(e),n=this.yG(t),r=this.eT(e),i=this.Vv(e);this.As(t)==e?(-1!=i?this.Ox(i,-1):this.AC(t,-1),this.KK(t,i)):n==e?(this.Lx(r,-1),this.AC(t,r)):(this.Ox(i,r),this.Lx(r,i)),this.Ox(e,-1),this.Lx(e,-1),this.Kx(t,this.Tv(t)-1)},n.IK=function(e,t){var n=.5*(e.o+e.v),r=.5*(e.A+e.B);t[0].H(n,r,e.v,e.B),t[1].H(e.o,r,n,e.B),t[2].H(e.o,e.A,n,r),t[3].H(n,e.A,e.v,r)},n.prototype.qP=function(e){return 8==this.Tv(e)&&!this.TG(e)},n.prototype.YR=function(e,t,n){var r=this.As(n);do{var i=this.Ov(r),a=this.ei.S(r,0);i=this.Hz(i),this.gw(a,i,e,t,n,!0,r),r=a=this.Vv(r)}while(-1!=r)},n.prototype.rP=function(e){return 8<=this.Tv(e)||this.TG(e)},n.prototype.TG=function(e){return-1!=this.fq(e,0)||-1!=this.fq(e,1)||-1!=this.fq(e,2)||-1!=this.fq(e,3)},n.prototype.BQ=function(e,t){var n=this.sf.Ke();return this.tY(e,t,n),this.Rx(n,0),this.Kx(n,0),this.Wk(n,e),this.OK(n,this.Qv(e)+1),this.RK(n,t<<2*this.Qv(e)|this.CG(e)),n},n.prototype.EQ=function(){var t=this.ei.Ke();if(0<this.Qw.size){var n=this.Qw.Gc();this.Qw.Rf()}else n=this.et.length,this.et.push(new e.g);return this.qY(t,n),t},n.prototype.fq=function(e,t){return this.sf.S(e,t)},n.prototype.tY=function(e,t,n){this.sf.P(e,t,n)},n.prototype.As=function(e){return this.sf.S(e,4)},n.prototype.KK=function(e,t){this.sf.P(e,4,t)},n.prototype.yG=function(e){return this.sf.S(e,5)},n.prototype.AC=function(e,t){this.sf.P(e,5,t)},n.prototype.CG=function(e){return this.sf.S(e,6)},n.prototype.RK=function(e,t){this.sf.P(e,6,t)},n.prototype.Tv=function(e){return this.sf.S(e,7)},n.prototype.iA=function(e){return this.sf.S(e,8)},n.prototype.Kx=function(e,t){this.sf.P(e,7,t)},n.prototype.Rx=function(e,t){this.sf.P(e,8,t)},n.prototype.YS=function(e){return this.sf.S(e,9)},n.prototype.Wk=function(e,t){this.sf.P(e,9,t)},n.prototype.Qv=function(e){return this.sf.S(e,10)},n.prototype.OK=function(e,t){this.sf.P(e,10,t)},n.prototype.xS=function(e){return this.ei.S(e,0)},n.prototype.xC=function(e,t){this.ei.P(e,0,t)},n.prototype.eT=function(e){return this.ei.S(e,1)},n.prototype.Vv=function(e){return this.ei.S(e,2)},n.prototype.Ox=function(e,t){this.ei.P(e,1,t)},n.prototype.Lx=function(e,t){this.ei.P(e,2,t)},n.prototype.HG=function(e){return this.ei.S(e,3)},n.prototype.PY=function(e,t){this.ei.P(e,3,t)},n.prototype.Ov=function(e){return this.ei.S(e,4)},n.prototype.qY=function(e,t){this.ei.P(e,4,t)},n.prototype.Hz=function(e){return this.et[e]},n.prototype.pY=function(e,t){this.et[e].H(t)},n}();e.Fp=n}(J||(J={})),function(e){var t;(t=e.jM||(e.jM={}))[t.Outside=0]="Outside",t[t.Inside=1]="Inside",t[t.Border=2]="Border";var n=function(){function e(e,t){this.hV=t,this.ai=e}return e.prototype.Gx=function(e,t){this.WH!=t&&e.flush(),this.WH=t},e.prototype.UF=function(e,t){for(var n=0;n<t;)for(var r=e[n++],i=e[n++],a=e[n++]*this.hV;r<i;r++)this.ai[a+(r>>4)]|=this.WH<<2*(15&r)},e}();e.r_=n;var r=function(){function t(e,t,n){this.ai=null,this.CB=this.Pk=this.SI=this.QI=this.mt=this.dI=this.Of=this.gn=0,this.Xi=this.Qk=this.El=null,this.nA(e,t,n)}return t.create=function(n,r,i){if(!t.az(n))throw e.f.I();return t.GQ(n,r,i)},t.P_=function(n,r,i){if(!t.az(n))throw e.f.I();return t.HQ(n,r,i)},t.VX=function(t){switch(t){case 0:t=1024;break;case 1:t=16384;break;case 2:t=262144;break;default:throw e.f.Y("Internal Error")}return t},t.az=function(e){return!(e.u()||1607!=e.F()&&1736!=e.F())},t.prototype.DR=function(t,n){n=n.Ba();for(var r=new e.b,i=new e.b;n.Ta();)for(;n.Aa();){var a=n.aa();if(322!=a.F())throw e.f.Y("Internal Error");t.Zj(a.ac(),r),t.Zj(a.wc(),i),this.Xi.Py(r.x,r.y,i.x,i.y)}this.Xi.mK(e.uy.iy)},t.prototype.ER=function(){throw e.f.Y("Internal Error")},t.prototype.xz=function(t,n){for(var r=1;4>r;r++)t.Py(n[r-1].x,n[r-1].y,n[r].x,n[r].y);t.Py(n[3].x,n[3].y,n[0].x,n[0].y),this.Xi.mK(e.uy.iy)},t.prototype.xL=function(t,n,r){for(var i=[null,null,null,null],a=0;a<i.length;a++)i[a]=new e.b;n=n.Ba(),r=this.Qk.MZ(r)+1.5,a=new e.b;for(var o=new e.b,s=new e.b,u=new e.b,c=new e.b,l=new e.g,h=new e.b;n.Ta();){var f=!1,p=!0;for(h.ka(0,0);n.Aa();){var d=n.aa();if(u.x=d.ra,u.y=d.na,c.x=d.pa,c.y=d.ma,l.Ka(),l.Nb(u.x,u.y),l.Sk(c.x,c.y),this.El.tH(l)){this.Qk.Zj(c,c),p?(this.Qk.Zj(u,u),h.K(u),p=!1):u.K(h),a.tc(c,u);var v=.5>(d=a.length());0==d?a.ka(1,0):(v||h.K(c),a.scale(r/d),o.ka(-a.y,a.x),s.ka(a.y,-a.x),u.sub(a),c.add(a),i[0].add(u,o),i[1].add(u,s),i[2].add(c,s),i[3].add(c,o),v?f=!0:this.xz(t,i))}else f&&(this.xz(t,i),f=!1),p=!0}f&&this.xz(t,i)}},t.prototype.aD=function(t){return e.L.truncate(t*this.dI+this.QI)},t.prototype.bD=function(t){return e.L.truncate(t*this.mt+this.SI)},t.GQ=function(e,n,r){return new t(e,n,r)},t.HQ=function(e,n,r){return new t(e,n,r)},t.prototype.nA=function(t,r,i){this.Of=Math.max(e.L.truncate(2*Math.sqrt(i)+.5),64),this.gn=e.L.truncate((2*this.Of+31)/32),this.El=new e.g,this.Pk=r,i=0;for(var a=this.Of,o=this.gn;8<=a;)i+=a*o,a=e.L.truncate(a/2),o=e.L.truncate((2*a+31)/32);this.ai=e.L.Xf(i,0),this.Xi=new e.uy,i=new n(this.ai,this.gn,this),this.Xi.dZ(this.Of,this.Of,i),t.s(this.El),this.El.O(r,r),a=new e.g;var s=r*(o=e.g.construct(1,1,this.Of-2,this.Of-2)).N();switch(r*=o.ca(),a.H(this.El.hf(),Math.max(s,this.El.N()),Math.max(r,this.El.ca())),this.CB=this.Pk,this.Qk=new e.xd,this.Qk.KT(a,o),new e.xd,t.F()){case 550:i.Gx(this.Xi,2),this.ER();break;case 1607:i.Gx(this.Xi,2),this.xL(this.Xi,t,this.CB);break;case 1736:i.Gx(this.Xi,1),this.DR(this.Qk,t),i.Gx(this.Xi,2),this.xL(this.Xi,t,this.CB)}this.dI=this.Qk.fb,this.mt=this.Qk.bb,this.QI=this.Qk.Ob,this.SI=this.Qk.Sb,this.hP()},t.prototype.hP=function(){this.Xi.flush();for(var t=0,n=this.Of*this.gn,r=this.Of,i=e.L.truncate(this.Of/2),a=this.gn,o=e.L.truncate((2*i+31)/32);8<r;){for(r=0;r<i;r++)for(var s=2*r,u=2*r+1,c=0;c<i;c++){var l=2*c,h=2*c+1,f=l>>4,p=h>>4,d=this.ai[t+a*s+f]>>(l=2*(15&l))&3;d|=this.ai[t+a*s+p]>>(h=2*(15&h))&3,d|=this.ai[t+a*u+f]>>l&3,this.ai[n+o*r+(c>>4)]|=(d|=this.ai[t+a*u+p]>>h&3)<<2*(15&c)}a=o,t=n,i=e.L.truncate((r=i)/2),o=e.L.truncate((2*i+31)/32),n=t+a*r}},t.prototype.Xl=function(e,t){return this.El.contains(e,t)?(e=this.aD(e),t=this.bD(t),0>e||e>=this.Of||0>t||t>=this.Of||0==(t=this.ai[this.gn*t+(e>>4)]>>2*(15&e)&3)?0:1==t?1:2):0},t.prototype.rn=function(t){if(!t.Ia(this.El))return 0;var n=this.aD(t.o),r=this.aD(t.v),i=this.bD(t.A);if(t=this.bD(t.B),0>n&&(n=0),0>i&&(i=0),r>=this.Of&&(r=this.Of-1),t>=this.Of&&(t=this.Of-1),n>r||i>t)return 0;for(var a=Math.max(r-n,1)*Math.max(t-i,1),o=0,s=this.gn,u=this.Of,c=0;;){if(32>a||16>u){for(a=i;a<=t;a++)for(var l=n;l<=r;l++)if(1<(c=this.ai[o+s*a+(l>>4)]>>2*(15&l)&3))return 2;if(0==c)return 0;if(1==c)return 1}o+=s*u,u=e.L.truncate(u/2),s=e.L.truncate((2*u+31)/32),n=e.L.truncate(n/2),i=e.L.truncate(i/2),r=e.L.truncate(r/2),t=e.L.truncate(t/2),a=Math.max(r-n,1)*Math.max(t-i,1)}},t.prototype.hT=function(){return this.Of*this.gn},t}();e.sy=r}(J||(J={})),function(e){var t;(t=e.cN||(e.cN={}))[t.contains=1]="contains",t[t.within=2]="within",t[t.equals=3]="equals",t[t.disjoint=4]="disjoint",t[t.touches=8]="touches",t[t.crosses=16]="crosses",t[t.overlaps=32]="overlaps",t[t.unknown=0]="unknown",t[t.intersects=1073741824]="intersects";var n=function(){function e(){}return e.construct=function(t,n,r,i,a,o,s,u){var c=new e;return c.Ww=t,c.Zm=n,c.Mj=r,c.Yi=i,c.rI=a,c.v0=o,c.w0=s,c.x0=u,c},e}();e.Du=function(){function t(){}return t.oE=function(n,r,i){if(t.bz(n)){var a=e.la.Ng(r,n,!1);r=!1,e.Yk.mF(n)&&(r=r||n.Tu(a,i)),1736!=(a=n.F())&&1607!=a||!e.Yk.kF(n)||0==i||(r=r||n.lj(i)),1736!=a&&1607!=a||!e.Yk.lF(n)||0==i||r||n.oN()}},t.bz=function(t){return e.Yk.mF(t)||e.Yk.kF(t)||e.Yk.lF(t)},t}();var r=function(){function t(){this.yh=[]}return t.iC=function(n,r,i,a,o){var s=n.F(),u=r.F();if(197==s){if(197==u)return t.ZX(n,r,i,a);if(33==u)return 2==a?a=1:1==a&&(a=2),t.lK(r,n,i,a)}else if(33==s){if(197==u)return t.lK(n,r,i,a);if(33==u)return t.aY(n,r,i,a)}if(n.u()||r.u())return 4==a;var c=new e.g;n.s(c);var l=new e.g;r.s(l);var h=new e.g;if(h.H(c),h.Nb(l),i=e.la.Qd(i,h,!1),t.ik(c,l,i))return 4==a;switch(c=!1,e.Zk.Ic(s)&&((s=new e.Oa(n.description)).$b(n,!0),n=s,s=1607),e.Zk.Ic(u)&&((u=new e.Oa(r.description)).$b(r,!0),r=u,u=1607),197!=s&&197!=u?(n.pb()<r.pb()||33==s&&550==u)&&(2==a?a=1:1==a&&(a=2)):1736!=s&&197!=u&&(2==a?a=1:1==a&&(a=2)),s){case 1736:switch(u){case 1736:c=t.$t(n,r,i,a,o);break;case 1607:c=t.on(n,r,i,a,o);break;case 33:c=t.Zt(n,r,i,a);break;case 550:c=t.Yt(n,r,i,a,o);break;case 197:c=t.xJ(n,r,i,a,o)}break;case 1607:switch(u){case 1736:c=t.on(r,n,i,a,o);break;case 1607:c=t.RB(n,r,i,a,o);break;case 33:c=t.bu(n,r,i,a,o);break;case 550:c=t.au(n,r,i,a,o);break;case 197:c=t.DJ(n,r,i,a)}break;case 33:switch(u){case 1736:c=t.Zt(r,n,i,a);break;case 1607:c=t.bu(r,n,i,a,o);break;case 550:c=t.Ut(r,n,i,a)}break;case 550:switch(u){case 1736:c=t.Yt(r,n,i,a,o);break;case 1607:c=t.au(r,n,i,a,o);break;case 550:c=t.JB(n,r,i,a,o);break;case 33:c=t.Ut(n,r,i,a);break;case 197:c=t.XI(n,r,i,a)}break;case 197:switch(u){case 1736:c=t.xJ(r,n,i,a,o);break;case 1607:c=t.DJ(r,n,i,a);break;case 550:c=t.XI(r,n,i,a)}}return c},t.ZX=function(n,r,i,a){if(n.u()||r.u())return 4==a;var o=new e.g,s=new e.g,u=new e.g;switch(n.s(o),r.s(s),u.H(o),u.Nb(s),n=e.la.Qd(i,u,!1),a){case 4:return t.ik(o,s,n);case 2:return t.XF(s,o,n);case 1:return t.XF(o,s,n);case 3:return t.jk(o,s,n);case 8:return t.nR(o,s,n);case 32:return t.mR(o,s,n);case 16:return t.lR(o,s,n)}return!1},t.lK=function(n,r,i,a){if(n.u()||r.u())return 4==a;n=n.w();var o=new e.g,s=new e.g;switch(r.s(o),s.H(n),s.Nb(o),r=e.la.Qd(i,s,!1),a){case 4:return t.xx(n,o,r);case 2:return t.PB(n,o,r);case 1:return t.iW(n,o,r);case 3:return t.mJ(n,o,r);case 8:return t.OB(n,o,r)}return!1},t.aY=function(n,r,i,a){if(n.u()||r.u())return 4==a;n=n.w(),r=r.w();var o=new e.g;switch(o.H(n),o.Nb(r),i=e.la.Qd(i,o,!1),a){case 4:return t.jW(n,r,i);case 2:return t.lJ(r,n,i);case 1:return t.lJ(n,r,i);case 3:return t.nJ(n,r,i)}return!1},t.$t=function(e,n,r,i,a){switch(i){case 4:return t.DW(e,n,r);case 2:return t.yx(n,e,r,a);case 1:return t.yx(e,n,r,a);case 3:return t.GW(e,n,r);case 8:return t.OW(e,n,r);case 32:return t.JW(e,n,r,a)}return!1},t.on=function(e,n,r,i,a){switch(i){case 4:return t.EW(e,n,r);case 1:return t.QB(e,n,r,a);case 8:return t.PW(e,n,r,a);case 16:return t.yW(e,n,r)}return!1},t.Zt=function(e,n,r,i){switch(i){case 4:return t.BW(e,n,r);case 1:return t.vW(e,n,r);case 8:return t.NW(e,n,r)}return!1},t.Yt=function(e,n,r,i){switch(i){case 4:return t.AW(e,n,r);case 1:return t.uW(e,n,r);case 8:return t.MW(e,n,r);case 16:return t.xW(e,n,r)}return!1},t.xJ=function(e,n,r,i,a){if(t.zW(e,n,r))return 4==i;if(4==i)return!1;switch(i){case 2:return t.QW(e,n,r);case 1:return t.tW(e,n,r);case 3:return t.FW(e,n,r);case 8:return t.LW(e,n,r,a);case 32:return t.IW(e,n,r,a);case 16:return t.wW(e,n,r,a)}return!1},t.RB=function(e,n,r,i){switch(i){case 4:return t.ZW(e,n,r);case 2:return t.BJ(n,e,r);case 1:return t.BJ(e,n,r);case 3:return t.aX(e,n,r);case 8:return t.EJ(e,n,r);case 32:return t.eX(e,n,r);case 16:return t.CJ(e,n,r)}return!1},t.bu=function(e,n,r,i){switch(i){case 4:return t.YW(e,n,r);case 1:return t.TW(e,n,r);case 8:return t.iX(e,n,r)}return!1},t.au=function(e,n,r,i){switch(i){case 4:return t.XW(e,n,r);case 1:return t.SW(e,n,r);case 8:return t.hX(e,n,r);case 16:return t.VW(e,n,r)}return!1},t.DJ=function(e,n,r,i){if(t.WW(e,n,r))return 4==i;if(4==i)return!1;switch(i){case 2:return t.jX(e,n,r);case 1:return t.RW(e,n,r);case 3:return t.$W(e,n,r);case 8:return t.gX(e,n,r);case 32:return t.dX(e,n,r);case 16:return t.UW(e,n,r)}return!1},t.JB=function(e,n,r,i){switch(i){case 4:return t.AV(e,n,r);case 2:return t.UI(n,e,r);case 1:return t.UI(e,n,r);case 3:return t.CV(e,n,r);case 32:return t.IV(e,n,r)}return!1},t.Ut=function(e,n,r,i){switch(i){case 4:return t.VI(e,n,r);case 2:return t.MV(e,n,r);case 1:return t.xV(e,n,r);case 3:return t.tx(e,n,r)}return!1},t.XI=function(e,n,r,i){switch(i){case 4:return t.zV(e,n,r);case 2:return t.LV(e,n,r);case 1:return t.wV(e,n,r);case 3:return t.BV(e,n,r);case 8:return t.KV(e,n,r);case 16:return t.yV(e,n,r)}return!1},t.GW=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!!t.jk(a,o,i)&&4!=(a=t.qc(n,r,!1))&&1!=a&&2!=a&&(!!t.TI(n,r,i)||(a=n.Pb(),o=r.Pb(),!(Math.abs(a-o)>4*Math.max(n.D(),r.D())*i)&&t.GA(n,r,i,!0)))},t.DW=function(e,n,r){var i=t.qc(e,n,!0);return 4==i||1!=i&&2!=i&&1073741824!=i&&t.vJ(e,n,r)},t.OW=function(e,n,r){var i=t.qc(e,n,!1);return 4!=i&&1!=i&&2!=i&&t.zJ(e,n,r,null)},t.JW=function(e,n,r,i){var a=t.qc(e,n,!1);return 4!=a&&1!=a&&2!=a&&t.wJ(e,n,r,i)},t.yx=function(n,r,i,a){var o=new e.g,s=new e.g;return n.s(o),r.s(s),!!t.yc(o,s,i)&&4!=(o=t.qc(n,r,!1))&&2!=o&&(1==o||t.sJ(n,r,i,a))},t.EW=function(e,n,r){var i=t.qc(e,n,!0);return 4==i||1!=i&&1073741824!=i&&t.vJ(e,n,r)},t.PW=function(e,n,r,i){var a=t.qc(e,n,!1);return 4!=a&&1!=a&&t.AJ(e,n,r,i)},t.yW=function(e,n,r){var i=t.qc(e,n,!1);return 4!=i&&1!=i&&t.uJ(e,n,r,null)},t.QB=function(n,r,i,a){var o=new e.g,s=new e.g;return n.s(o),r.s(s),!!t.yc(o,s,i)&&4!=(o=t.qc(n,r,!1))&&(1==o||t.tJ(n,r,i,a))},t.BW=function(t,n,r){return 0==e.Zc.wH(t,n,r)},t.NW=function(e,n,r){return n=n.w(),t.yJ(e,n,r)},t.vW=function(e,n,r){return n=n.w(),t.rJ(e,n,r)},t.AW=function(n,r,i){var a=t.qc(n,r,!1);if(4==a)return!0;if(1==a)return!1;a=new e.g,n.s(a),a.O(i,i);for(var o=new e.b,s=0;s<r.D();s++)if(r.w(s,o),a.contains(o)){var u=e.Zc.Td(n,o,i);if(1==u||2==u)return!1}return!0},t.MW=function(t,n,r){var i=this.qc(t,n,!1);if(4==i||1==i)return!1;i=new e.g,t.s(i),i.O(r,r);for(var a=!1,o=t,s=!1,u=0;u<n.D();u++){var c=n.xa(u);if(i.contains(c))if(2==(c=e.Zc.Td(o,c,r)))a=!0;else if(1==c)return!1;s||(!e.Oe.Wl(t,n.D()-1)||null!=t.ib&&null!=t.ib.Hb?o=t:(o=new e.Ga,t.copyTo(o),o.lj(1)),s=!0)}return!!a},t.xW=function(t,n,r){var i=this.qc(t,n,!1);if(4==i||1==i)return!1;var a=new e.g;i=new e.g;var o=new e.g;t.s(a),n.s(o),i.H(a),i.O(r,r),o=a=!1;for(var s=t,u=!1,c=0;c<n.D();c++){var l=n.xa(c);if(i.contains(l)?0==(l=e.Zc.Td(s,l,r))?o=!0:1==l&&(a=!0):o=!0,a&&o)return!0;u||(!e.Oe.Wl(t,n.D()-1)||null!=t.ib&&null!=t.ib.Hb?s=t:(s=new e.Ga,t.copyTo(s),s.lj(1)),u=!0)}return!1},t.uW=function(t,n,r){var i=new e.g,a=new e.g;if(t.s(i),n.s(a),!this.yc(i,a,r))return!1;if(4==(a=this.qc(t,n,!1)))return!1;if(1==a)return!0;a=!1;for(var o=t,s=!1,u=0;u<n.D();u++){var c=n.xa(u);if(!i.contains(c))return!1;if(1==(c=e.Zc.Td(o,c,r)))a=!0;else if(0==c)return!1;s||(!e.Oe.Wl(t,n.D()-1)||null!=t.ib&&null!=t.ib.Hb?o=t:(o=new e.Ga,t.copyTo(o),o.lj(1)),s=!0)}return a},t.FW=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!!t.jk(a,o,i)&&((a=new e.Ga).bd(r,!1),t.GA(n,a,i,!0))},t.zW=function(n,r,i){var a=t.qc(n,r,!1);if(4==a)return!0;if(1==a||2==a)return!1;var o=new e.g;if(a=new e.g,n.s(o),r.s(a),t.yc(a,o,i))return!1;if(o=new e.b,a.tn(o),0!=(r=e.Zc.Td(n,o,i)))return!1;if(a.RJ(o),0!=(r=e.Zc.Td(n,o,i)))return!1;if(a.un(o),0!=(r=e.Zc.Td(n,o,i)))return!1;if(a.UJ(o),0!=(r=e.Zc.Td(n,o,i)))return!1;r=n.Va(0),(o=new e.g).H(a),o.O(i,i);for(var s=0,u=n.D();s<u;s++){var c=r.read(2*s),l=r.read(2*s+1);if(o.contains(c,l))return!1}return!t.EH(n,a,i)},t.LW=function(n,r,i,a){var o=t.qc(n,r,!1);if(4==o||1==o||2==o)return!1;o=new e.g;var s=new e.g;return n.s(o),r.s(s),!t.yc(s,o,i)&&(s.N()<=i&&s.ca()<=i?(r=r.bq(),t.yJ(n,r,i)):s.N()<=i||s.ca()<=i?(o=new e.Oa,s=new e.Ra,r.Pf(0,s),o.xf(s),r.Pf(2,s),o.lineTo(s),t.AJ(n,o,i,a)):((o=new e.Ga).bd(r,!1),t.zJ(n,o,i,a)))},t.IW=function(n,r,i,a){var o=t.qc(n,r,!1);if(4==o||1==o||2==o)return!1;o=new e.g;var s=new e.g;return n.s(o),r.s(s),!(t.yc(s,o,i)||s.N()<=i||s.ca()<=i)&&((o=new e.Ga).bd(r,!1),t.wJ(n,o,i,a))},t.QW=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),t.yc(o,a,i)},t.tW=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!!t.yc(a,o,i)&&4!=(a=t.qc(n,r,!1))&&2!=a&&(1==a||(o.N()<=i&&o.ca()<=i?(r=r.bq(),t.rJ(n,r,i)):o.N()<=i||o.ca()<=i?(o=new e.Oa,a=new e.Ra,r.Pf(0,a),o.xf(a),r.Pf(2,a),o.lineTo(a),t.tJ(n,o,i,null)):((o=new e.Ga).bd(r,!1),t.sJ(n,o,i,null))))},t.wW=function(n,r,i,a){var o=new e.g,s=new e.g;return n.s(o),r.s(s),!(t.yc(s,o,i)||s.ca()>i&&s.N()>i||s.ca()<=i&&s.N()<=i)&&(o=new e.Oa,s=new e.Ra,r.Pf(0,s),o.xf(s),r.Pf(2,s),o.lineTo(s),t.uJ(n,o,i,a))},t.aX=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(!t.jk(a,o,i)||4==t.qc(n,r,!1))&&(!!t.TI(n,r,i)||t.GA(n,r,i,!1))},t.ZW=function(t,n,r){return 4==this.qc(t,n,!1)||!!new e.km(t,n,r,!0).next()&&!this.FH(t,n,r)},t.EJ=function(n,r,i){if(4==t.qc(n,r,!1))return!1;var a=new e.ie(0);if(0!=t.HA(n,r,i,a))return!1;for(var o=new e.Hd,s=0;s<a.size;s+=2){var u=a.read(s),c=a.read(s+1);o.hv(u,c)}return n=n.sg(),r=r.sg(),n.yd(r,0,r.D()),t.sx(n,o,i)},t.CJ=function(n,r,i){if(4==t.qc(n,r,!1))return!1;var a=new e.ie(0);if(0!=t.HA(n,r,i,a))return!1;for(var o=new e.Hd,s=0;s<a.size;s+=2){var u=a.read(s),c=a.read(s+1);o.hv(u,c)}return n=n.sg(),r=r.sg(),n.yd(r,0,r.D()),!t.sx(n,o,i)},t.eX=function(e,n,r){return 4!=t.qc(e,n,!1)&&t.HH(e,n,r)},t.BJ=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(!t.yc(a,o,i)||4==t.qc(n,r,!1))&&t.Lm(r,n,i,!1)},t.YW=function(e,n,r){return 4==t.qc(e,n,!1)||(n=n.w(),!t.IA(e,n,r))},t.iX=function(e,n,r){return 4!=t.qc(e,n,!1)&&(n=n.w(),t.JA(e,n,r))},t.TW=function(e,n,r){return 4!=t.qc(e,n,!1)&&(n=n.w(),t.DH(e,n,r))},t.XW=function(e,n,r){return 4==t.qc(e,n,!1)||!t.GH(e,n,r,!1)},t.hX=function(t,n,r){if(4==this.qc(t,n,!1))return!1;var i=t.Ba(),a=new e.g,o=new e.g,s=new e.g;t.s(a),n.s(o),a.O(r,r),o.O(r,r),s.H(a),s.Ia(o),a=null;var u=t.ib;if(null!=u){var c=u.Hb;a=u.To,null==c&&(c=u=e.la.pj(t,s))}else c=u=e.la.pj(t,s);var l=c.getIterator(),h=null;null!=a&&(h=a.getIterator());var f=new e.b,p=new e.b,d=!1,v=r*r;for(a=new e.Gn(n.D()),u=0;u<n.D();u++)a.write(u,0);for(u=0;u<n.D();u++)if(n.w(u,f),s.contains(f)){if(o.H(f.x,f.y,f.x,f.y),null!=h&&(h.vi(o,r),-1==h.next()))continue;l.vi(o,r);for(var y=l.next();-1!=y;y=l.next())if(i.Rb(c.ga(y)),(y=i.aa()).cc(y.ae(f,!1),p),e.b.oc(f,p)<=v){a.write(u,1),d=!0;break}}if(!d)return!1;for(t=t.sg(),i=new e.Hd,o=new e.b,u=0;u<n.D();u++)0!=a.read(u)&&(n.w(u,o),i.hv(o.x,o.y));return this.sx(t,i,r)},t.VW=function(t,n,r){if(4==this.qc(t,n,!1))return!1;var i=t.Ba(),a=new e.g,o=new e.g,s=new e.g;t.s(a),n.s(o),a.O(r,r),o.O(r,r),s.H(a),s.Ia(o),a=null;var u=t.ib;if(null!=u){var c=u.Hb;a=u.To,null==c&&(c=u=e.la.pj(t,s))}else c=u=e.la.pj(t,s);var l=c.getIterator(),h=null;null!=a&&(h=a.getIterator());var f=new e.b,p=new e.b,d=!1,v=!1,y=r*r;for(a=new e.Gn(n.D()),u=0;u<n.D();u++)a.write(u,0);for(u=0;u<n.D();u++)if(n.w(u,f),s.contains(f)){if(o.H(f.x,f.y,f.x,f.y),null!=h&&(h.vi(o,r),-1==h.next())){v=!0;continue}l.vi(o,r);for(var b=!1,g=l.next();-1!=g;g=l.next())if(i.Rb(c.ga(g)),(g=i.aa()).cc(g.ae(f,!1),p),e.b.oc(f,p)<=y){a.write(u,1),b=d=!0;break}b||(v=!0)}else v=!0;if(!d||!v)return!1;for(t=t.sg(),i=new e.Hd,o=new e.b,u=0;u<n.D();u++)0!=a.read(u)&&(n.w(u,o),i.hv(o.x,o.y));return!this.sx(t,i,r)},t.SW=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(!t.yc(a,o,i)||4==t.qc(n,r,!1)||!t.GH(n,r,i,!0)||(n=n.sg(),t.WI(n,r,i)))},t.$W=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(o.ca()>i&&o.N()>i)&&t.jk(a,o,i)},t.WW=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!t.yc(o,a,i)&&!t.EH(n,o,i)},t.gX=function(n,r,i){var a=new e.g,o=new e.g;if(n.s(a),r.s(o),o.ca()<=i&&o.N()<=i)return o=r.bq(),t.JA(n,o,i);if(o.ca()<=i||o.N()<=i)return o=new e.Oa,a=new e.Ra,r.Pf(0,a),o.xf(a),r.Pf(2,a),o.lineTo(a),t.EJ(n,o,i);n=n.Ba(),r=new e.g,a=new e.g,r.H(o),a.H(o),r.O(-i,-i),a.O(i,i),o=!1;for(var s=new e.g,u=new e.g;n.Ta();)for(;n.Aa();){if(n.aa().s(s),u.H(r),u.Ia(s),!u.u()&&(u.ca()>i||u.N()>i))return!1;u.H(a),u.Ia(s),u.u()||(o=!0)}return o},t.dX=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(t.yc(a,o,i)||t.yc(o,a,i)||t.yc(o,a,i)||o.ca()>i&&o.N()>i||o.ca()<=i&&o.N()<=i)&&(a=new e.Oa,o=new e.Ra,r.Pf(0,o),a.xf(o),r.Pf(2,o),a.lineTo(o),t.HH(n,a,i))},t.jX=function(n,r,i){var a=new e.g,o=new e.g;if(n.s(a),r.s(o),!t.yc(o,a,i)||o.ca()<=i&&o.N()<=i)return!1;if(o.ca()<=i||o.N()<=i)return t.yc(o,a,i);n=n.Ba(),(r=new e.g).H(o),r.O(-i,-i),o=!1,a=new e.g;for(var s=new e.g;n.Ta();)for(;n.Aa();)n.aa().s(a),r.sm(a)?o=!0:(s.H(r),s.Ia(a),!s.u()&&(s.ca()>i||s.N()>i)&&(o=!0));return o},t.RW=function(n,r,i){var a=new e.g,o=new e.g;return r.s(o),n.s(a),!(!t.yc(a,o,i)||o.ca()>i&&o.N()>i)&&(o.ca()<=i&&o.N()<=i?(r=r.bq(),t.DH(n,r,i)):(a=new e.Oa,o=new e.Ra,r.Pf(0,o),a.xf(o),r.Pf(2,o),a.lineTo(o),t.Lm(a,n,i,!1)))},t.UW=function(n,r,i){var a=new e.g,o=new e.g;if(n.s(a),r.s(o),t.yc(o,a,i)||o.ca()<=i&&o.N()<=i)return!1;if(o.ca()<=i||o.N()<=i)return a=new e.Oa,o=new e.Ra,r.Pf(0,o),a.xf(o),r.Pf(2,o),a.lineTo(o),t.CJ(n,a,i);n=n.Ba(),r=new e.g,(a=new e.g).H(o),r.H(o),a.O(-i,-i),r.O(i,i);for(var s=o=!1,u=new e.g,c=new e.g;n.Ta();)for(;n.Aa();)if(n.aa().s(u),s||r.contains(u)||(s=!0),o||(c.H(a),c.Ia(u),!c.u()&&(c.ca()>i||c.N()>i)&&(o=!0)),o&&s)return!0;return!1},t.CV=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!!t.jk(a,o,i)&&(!!t.DV(n,r,i)||t.IB(n,r,i,!1,!0,!1))},t.AV=function(e,n,r){return!t.WI(e,n,r)},t.IV=function(e,n,r){return t.IB(e,n,r,!1,!1,!0)},t.UI=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!!t.yc(a,o,i)&&t.IB(r,n,i,!0,!1,!1)},t.sx=function(t,n,r){r*=r;for(var i=new e.b,a=new e.b,o=0;o<n.D();o++){n.w(o,a);for(var s=!1,u=0;u<t.D();u++)if(t.w(u,i),e.b.oc(i,a)<=r){s=!0;break}if(!s)return!1}return!0},t.tx=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),t.jk(a,o,i)},t.VI=function(e,n,r){return n=n.w(),t.Tt(e,n,r)},t.MV=function(e,n,r){return t.tx(e,n,r)},t.xV=function(e,n,r){return!t.VI(e,n,r)},t.BV=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(o.ca()>i||o.N()>i)&&t.jk(a,o,i)},t.zV=function(n,r,i){var a=new e.g,o=new e.g;if(n.s(a),r.s(o),t.yc(o,a,i))return!1;for((r=new e.g).H(o),r.O(i,i),i=new e.b,o=0;o<n.D();o++)if(n.w(o,i),r.contains(i))return!1;return!0},t.KV=function(t,n,r){var i=new e.g,a=new e.g,o=new e.g;if(n.s(i),i.ca()<=r&&i.N()<=r)return!1;if(i.ca()<=r||i.N()<=r){n=new e.b;var s=!1;a.H(i),o.H(i),a.O(r,r),i.ca()>r?o.O(0,-r):o.O(-r,0);for(var u=0;u<t.D();u++)if(t.w(u,n),a.contains(n)){if(i.ca()>r){if(n.y>o.A&&n.y<o.B)return!1}else if(n.x>o.o&&n.x<o.v)return!1;s=!0}return s}for(a.H(i),o.H(i),a.O(r,r),o.O(-r,-r),n=new e.b,s=!1,u=0;u<t.D();u++)if(t.w(u,n),a.contains(n)){if(o.sm(n))return!1;s=!0}return s},t.LV=function(n,r,i){var a=new e.g,o=new e.g;if(n.s(a),r.s(o),!t.yc(o,a,i))return!1;if(o.ca()<=i&&o.N()<=i)return t.jk(a,o,i);if(o.ca()<=i||o.N()<=i){r=!1,a=new e.g;var s=new e.g;a.H(o),s.H(o),o.ca()>i?a.O(0,-i):a.O(-i,0),s.O(i,i);for(var u=new e.b,c=0;c<n.D();c++){if(n.w(c,u),!s.contains(u))return!1;o.ca()>i?u.y>a.A&&u.y<a.B&&(r=!0):u.x>a.o&&u.x<a.v&&(r=!0)}return r}for(r=!1,a=new e.g,s=new e.g,a.H(o),s.H(o),a.O(-i,-i),s.O(i,i),u=new e.b,c=0;c<n.D();c++){if(n.w(c,u),!s.contains(u))return!1;a.sm(u)&&(r=!0)}return r},t.wV=function(n,r,i){var a=new e.g,o=new e.g;return n.s(a),r.s(o),!(!t.yc(a,o,i)||o.ca()>i||o.N()>i||(r=r.bq(),t.Tt(n,r,i)))},t.yV=function(n,r,i){var a=new e.g,o=new e.g;if(n.s(a),r.s(o),t.yc(o,a,i)||o.ca()<=i&&o.N()<=i)return!1;if(o.ca()<=i||o.N()<=i){r=new e.g,a=new e.g,r.H(o),o.ca()>i?r.O(0,-i):r.O(-i,0),a.H(o),a.O(i,i);for(var s=new e.b,u=!1,c=!1,l=0;l<n.D();l++)if(n.w(l,s),u||(o.ca()>i?s.y>r.A&&s.y<r.B&&(u=!0):s.x>r.o&&s.x<r.v&&(u=!0)),c||a.contains(s)||(c=!0),u&&c)return!0;return!1}for(r=new e.g,a=new e.g,r.H(o),r.O(-i,-i),a.H(o),a.O(i,i),s=new e.b,c=u=!1,l=0;l<n.D();l++)if(n.w(l,s),!u&&r.sm(s)&&(u=!0),c||a.contains(s)||(c=!0),u&&c)return!0;return!1},t.nJ=function(t,n,r){return e.b.oc(t,n)<=r*r},t.jW=function(t,n,r){return e.b.oc(t,n)>r*r},t.lJ=function(e,n,r){return t.nJ(e,n,r)},t.mJ=function(n,r,i){var a=new e.g;return a.H(n),t.jk(a,r,i)},t.xx=function(t,n,r){var i=new e.g;return i.H(n),i.O(r,r),!i.contains(t)},t.OB=function(t,n,r){if(n.ca()<=r&&n.N()<=r)return!1;var i=new e.g,a=new e.g;if(i.H(n),i.O(r,r),!i.contains(t))return!1;if(n.ca()<=r||n.N()<=r){if(a.H(n),n.ca()>r?a.O(0,-r):a.O(-r,0),n.ca()>r){if(t.y>a.A&&t.y<a.B)return!1}else if(t.x>a.o&&t.x<a.v)return!1;return!0}return a.H(n),a.O(-r,-r),!a.sm(t)},t.PB=function(t,n,r){if(n.ca()<=r&&n.N()<=r)return!0;if(n.ca()<=r||n.N()<=r){var i=new e.g;i.H(n),n.ca()>r?i.O(0,-r):i.O(-r,0);var a=!1;return n.ca()>r?t.y>i.A&&t.y<i.B&&(a=!0):t.x>i.o&&t.x<i.v&&(a=!0),a}return(i=new e.g).H(n),i.O(-r,-r),i.sm(t)},t.iW=function(e,n,r){return t.mJ(e,n,r)},t.jk=function(e,n,r){return t.yc(e,n,r)&&t.yc(n,e,r)},t.ik=function(t,n,r){var i=new e.g;return i.H(n),i.O(r,r),!t.isIntersecting(i)},t.nR=function(n,r,i){if(n.ca()<=i&&n.N()<=i){var a=n.hf();return t.OB(a,r,i)}if(r.ca()<=i&&r.N()<=i)return a=r.hf(),t.OB(a,n,i);if(n.ca()>i&&n.N()>i&&(r.ca()<=i||r.N()<=i)?a=r:(a=n,n=r),a.ca()<=i||a.N()<=i){if(n.ca()<=i||n.N()<=i){r=new e.zb;var o=new e.zb,s=[0,0],u=[0,0],c=new e.b;return a.tn(c),r.Fc(c),a.un(c),r.Sc(c),n.tn(c),o.Fc(c),n.un(c),o.Sc(c),r.Ia(o,null,s,u,i),1==r.Ia(o,null,null,null,i)&&(0==s[0]||1==s[1]||0==u[0]||1==u[1])}return r=new e.g,o=new e.g,r.H(n),r.O(-i,-i),o.H(r),o.Ia(a),!(!o.u()&&(o.ca()>i||o.N()>i))}return n.O(i,i),(o=new e.g).H(a),o.Ia(n),!(o.u()||!o.u()&&o.ca()>i&&o.N()>i)},t.mR=function(n,r,i){if(t.yc(n,r,i)||t.yc(r,n,i)||n.ca()<=i&&n.N()<=i||r.ca()<=i&&r.N()<=i)return!1;if(n.ca()<=i||n.N()<=i){if(r.ca()>i&&r.N()>i)return!1;var a=new e.zb,o=new e.zb,s=[0,0],u=[0,0],c=new e.b;return n.tn(c),a.Fc(c),n.un(c),a.Sc(c),r.tn(c),o.Fc(c),r.un(c),o.Sc(c),a.Ia(o,null,s,u,i),2==a.Ia(o,null,null,null,i)&&(0<s[0]||1>s[1])&&(0<u[0]||1>u[1])}return!(r.ca()<=i||r.N()<=i||((a=new e.g).H(n),a.Ia(r),a.u()||a.ca()<=i||a.N()<=i))},t.XF=function(n,r,i){if(!t.yc(n,r,i))return!1;if(n.ca()<=i&&n.N()<=i)return n=n.hf(),t.PB(n,r,i);if(r.ca()<=i&&r.N()<=i)return r=r.hf(),t.PB(r,n,i);if(n.ca()<=i||n.N()<=i)return t.yc(n,r,i);if(r.ca()<=i||r.N()<=i){var a=new e.g;return a.H(n),a.O(-i,-i),!(!a.sm(r)&&((n=new e.g).H(a),n.Ia(r),n.u()||n.ca()<=i&&n.N()<=i))}return t.yc(n,r,i)},t.lR=function(n,r,i){if(t.yc(n,r,i)||t.yc(r,n,i)||n.ca()<=i&&n.N()<=i||r.ca()<=i&&r.N()<=i||r.ca()>i&&r.N()>i&&n.ca()>i&&n.N()>i)return!1;if(n.ca()>i&&n.N()>i)var a=r;else a=n,n=r;if(n.ca()>i&&n.N()>i){r=new e.g;var o=new e.g;return o.H(n),o.O(-i,-i),r.H(o),r.Ia(a),!(r.u()||r.ca()<=i&&r.N()<=i)}r=new e.zb,o=new e.zb;var s=[0,0],u=[0,0],c=new e.b;return a.tn(c),r.Fc(c),a.un(c),r.Sc(c),n.tn(c),o.Fc(c),n.un(c),o.Sc(c),r.Ia(o,null,s,u,i),1==r.Ia(o,null,null,null,i)&&0<s[0]&&1>s[1]&&0<u[0]&&1>u[1]},t.vJ=function(t,n,r){var i=new e.g,a=new e.g,o=new e.km(t,n,r,!0);if(!o.next())return!0;if(this.FH(t,n,r))return!1;var s=t,u=null;1736==n.F()&&(u=n);var c=!1,l=!1;do{var h=o.tl(),f=o.ol();if(f=n.xa(n.ua(f)),i.H(o.cA()),i.O(r,r),i.contains(f)&&0!=(f=e.Zc.Td(s,f,0))||1736==n.F()&&(h=t.xa(t.ua(h)),a.H(o.Gz()),a.O(r,r),a.contains(h)&&0!=(f=e.Zc.Td(u,h,0))))return!1;c||(!e.Oe.Wl(t,n.$()-1)||null!=t.ib&&null!=t.ib.Hb?s=t:(s=new e.Ga,t.copyTo(s),s.lj(1)),c=!0),1736!=n.F()||l||(!e.Oe.Wl(l=n,t.$()-1)||null!=n.ib&&null!=n.ib.Hb?u=n:(u=new e.Ga,l.copyTo(u),u.lj(1)),l=!0)}while(o.next());return!0},t.yc=function(t,n,r){var i=new e.g;return i.H(t),i.O(r,r),i.contains(n)},t.Ts=function(t,n,r){var i=new e.g;return i.H(n),i.O(r,r),n=new e.b,t.tn(n),!(i.contains(n)&&(t.RJ(n),i.contains(n)&&(t.UJ(n),i.contains(n)&&(t.un(n),i.contains(n)))))},t.TI=function(t,n,r){if(t.$()!=n.$()||t.D()!=n.D())return!1;var i=new e.b,a=new e.b,o=!0;r*=r;for(var s=0;s<t.$();s++){if(t.zc(s)!=n.zc(s)){o=!1;break}for(var u=t.ua(s);u<n.zc(s);u++)if(t.w(u,i),n.w(u,a),e.b.oc(i,a)>r){o=!1;break}if(!o)break}return!!o},t.DV=function(t,n,r){if(t.D()!=n.D())return!1;var i=new e.b,a=new e.b,o=!0;r*=r;for(var s=0;s<t.D();s++)if(t.w(s,i),n.w(s,a),e.b.oc(i,a)>r){o=!1;break}return!!o},t.IB=function(t,n,r,i,a,o){var s=!1;if(t.D()>n.D()){i&&(i=!1,s=!0);var u=n}else u=t,t=n;if(n=null,a||o||s){n=new e.Gn(t.D());for(var c=0;c<t.D();c++)n.write(c,0)}c=new e.g;var l=new e.g,h=new e.g;u.s(c),t.s(l),c.O(r,r),l.O(r,r),h.H(c),h.Ia(l),l=new e.b;for(var f=new e.b,p=!0,d=e.la.aF(t,h),v=d.getIterator(),y=r*r,b=0;b<u.D();b++)if(u.w(b,l),h.contains(l)){var g=!1;c.H(l.x,l.y,l.x,l.y),v.vi(c,r);for(var m=v.next();-1!=m&&(m=d.ga(m),t.w(m,f),!(e.b.oc(l,f)<=y&&((a||o||s)&&n.write(m,1),g=!0,i)));m=v.next());if(!g&&(p=!1,a||i))return!1}else{if(a||i)return!1;p=!1}if(o&&p)return!1;if(i)return!0;for(c=0;c<t.D();c++)if(1==n.read(c)){if(o)return!0}else if(a||s)return!1;return!o},t.WI=function(t,n,r){if(t.D()>n.D())var i=n;else i=t,t=n;n=new e.g;var a=new e.g,o=new e.g;i.s(n),t.s(a),n.O(r,r),a.O(r,r),o.H(n),o.Ia(a),a=new e.b;for(var s=new e.b,u=r*r,c=e.la.aF(t,o),l=c.getIterator(),h=0;h<i.D();h++)if(i.w(h,a),o.contains(a)){n.H(a.x,a.y,a.x,a.y),l.vi(n,r);for(var f=l.next();-1!=f;f=l.next())if(t.w(c.ga(f),s),e.b.oc(a,s)<=u)return!0}return!1},t.GA=function(e,n,r,i){return t.Lm(e,n,r,i)&&t.Lm(n,e,r,i)},t.Lm=function(r,i,a,o){function s(e,t){return p.BF(e,t)}var u,c=[0,0],l=[0,0],h=0,f=new e.ha(0),p=new t,d=new e.g,v=new e.g,y=new e.g;r.s(d),i.s(v),d.O(a,a),v.O(a,a),y.H(d),y.Ia(v),r=r.Ba(),v=i.Ba();var b=null,g=b=null,m=i.ib;for(null!=m?(g=m.To,null==(b=m.Hb)&&(b=e.la.pj(i,y))):b=e.la.pj(i,y),i=b.getIterator(),m=null,null!=g&&(m=g.getIterator());r.Ta();)for(;r.Aa();){var w=!1,O=r.aa();if(O.s(d),!d.isIntersecting(y))return!1;if(null!=m&&(m.vi(d,a),-1==m.next()))return!1;for(g=O.Pb(),i.wn(O,a),u=i.next();-1!=u;u=i.next()){v.Rb(b.ga(u)),u=v.aa();var j=O.Ia(u,null,c,l,a);if(2==j&&(!o||l[0]<=l[1])){var _=c[1],x=l[0],k=l[1];if((j=c[0])*g<=a&&(1-_)*g<=a){w=!0,h=0,f.resize(0),p.yh.length=0;var S=r.wb();for(x=!0;x;){if(r.Aa()){if(g=(O=r.aa()).Pb(),2==(j=O.Ia(u,null,c,l,a))&&(!o||l[0]<=l[1])&&(_=c[1],(j=c[0])*g<=a&&(1-_)*g<=a)){S=r.wb();continue}if(v.Aa()&&(u=v.aa(),2==(j=O.Ia(u,null,c,l,a))&&(!o||l[0]<=l[1])&&(_=c[1],(j=c[0])*g<=a&&(1-_)*g<=a))){S=r.wb();continue}}x=!1}S!=r.wb()&&(r.Rb(S),r.aa());break}S=r.wb(),u=n.construct(S,r.Pa,j,_,v.wb(),v.Pa,x,k),p.yh.push(u),f.add(f.size)}}if(!w){if(h==p.yh.length)return!1;for(1<f.size-h&&f.Zd(h,f.size,s),w=0;h<p.yh.length;h++)if(!((u=p.yh[f.get(h)]).Mj<w&&u.Yi<w)){if(g*(u.Mj-w)>a)return!1;if(g*(1-(w=u.Yi))<=a||1==w)break}if(g*(1-w)>a)return!1;h=0,f.resize(0),p.yh.length=0}}return!0},t.HH=function(n,r,i){if(1>t.HA(n,r,i,null))return!1;var a=new e.g,o=new e.g;n.s(a),r.s(o);var s=t.Ts(a,o,i);return a=t.Ts(o,a,i),!((!s||!a)&&(s&&!a?t.Lm(r,n,i,!1):a&&!s?t.Lm(n,r,i,!1):t.Lm(n,r,i,!1)||t.Lm(r,n,i,!1)))},t.HA=function(r,i,a,o){function s(e,t){return v.BF(e,t)}if(r.gA()>i.gA())var u=i,c=r;else u=r,c=i;r=u.Ba(),i=c.Ba();var l=[0,0],h=[0,0],f=-1,p=0,d=new e.ha(0),v=new t,y=new e.g,b=new e.g,g=new e.g;u.s(y),c.s(b),y.O(a,a),b.O(a,a),g.H(y),g.Ia(b),u=null,null!=o&&(u=new e.b);var m=b=b=null,w=c.ib;for(null!=w?(m=w.To,null==(b=w.Hb)&&(b=e.la.pj(c,g))):b=e.la.pj(c,g),c=b.getIterator(),w=null,null!=m&&(w=m.getIterator());r.Ta();)for(m=0;r.Aa();){var O=r.aa();if(O.s(y),y.isIntersecting(g)){if(null!=w&&(w.vi(y,a),-1==w.next()))continue;var j=O.Pb();c.wn(O,a);for(var _=c.next();-1!=_;_=c.next()){var x=b.ga(_);i.Rb(x);var k=i.aa(),S=k.Pb(),M=O.Ia(k,null,l,h,a);if(0<M){_=l[0],f=h[0];var I=2==M?l[1]:NaN,T=2==M?h[1]:NaN;if(2==M){if(j*(I-_)>a)return 1;var A=j*(I-_);if(i.Aa()){if(k=i.aa(),2==(M=O.Ia(k,null,l,null,a))){var C=l[1];if(A+(M=j*(C-(M=l[0])))>a)return 1}i.Rb(x),i.aa()}if(!i.Im()){if(i.ti(),k=i.ti(),2==(M=O.Ia(k,null,l,null,a))&&A+(M=j*((C=l[1])-(M=l[0])))>a)return 1;i.Rb(x),i.aa()}if(r.Aa()){if(x=r.wb(),2==(M=(O=r.aa()).Ia(k,null,l,null,a))&&A+(M=j*((C=l[1])-(M=l[0])))>a)return 1;r.Rb(x),r.aa()}if(!r.Im()){if(x=r.wb(),r.ti(),2==(M=(O=r.ti()).Ia(k,null,l,null,a))&&A+(M=S*((C=l[1])-(M=l[0])))>a)return 1;r.Rb(x),r.aa()}k=n.construct(r.wb(),r.Pa,_,I,i.wb(),i.Pa,f,T),v.yh.push(k),d.add(d.size)}f=0,null!=o&&(O.cc(_,u),o.add(u.x),o.add(u.y))}}if(p<v.yh.length){for(d.Zd(p,d.size,s),O=0,_=v.yh[d.get(p)].Zm;p<v.yh.length;p++)if(!((k=v.yh[d.get(p)]).Mj<O&&k.Yi<O))if(j*(k.Mj-O)>a)m=j*(k.Yi-k.Mj),O=k.Yi,_=k.Zm;else{if(k.Zm!=_?(m=j*(k.Yi-k.Mj),_=k.Zm):m+=j*(k.Yi-k.Mj),m>a)return 1;if(1==(O=k.Yi))break}j*(1-O)>a&&(m=0),p=0,d.resize(0),v.yh.length=0}}}return f},t.FH=function(t,n,r){var i=t.Ba(),a=n.Ba();for(t=new e.km(t,n,r,!1);t.next();){n=t.tl();var o=t.ol();if(i.Rb(n),a.Rb(o),n=i.aa(),0<a.aa().Ia(n,null,null,null,r))return!0}return!1},t.GH=function(t,n,r,i){var a=t.Ba(),o=new e.g,s=new e.g,u=new e.g;t.s(o),n.s(s),o.O(r,r),o.contains(s),s.O(r,r),u.H(o),u.Ia(s),null!=(o=t.ib)?null==(o=o.Hb)&&(o=e.la.pj(t,u)):o=e.la.pj(t,u),t=o.getIterator();for(var c=new e.b,l=new e.b,h=r*r,f=0;f<n.D();f++)if(n.w(f,c),u.contains(c)){s.H(c.x,c.y,c.x,c.y),t.vi(s,r);for(var p=!1,d=t.next();-1!=d;d=t.next())if(a.Rb(o.ga(d)),(d=a.aa()).cc(d.ae(c,!1),l),e.b.oc(l,c)<=h){p=!0;break}if(i){if(!p)return!1}else if(p)return!0}return!!i},t.IA=function(t,n,r){var i=new e.b,a=r*r,o=t.Ba();if(null!=(t=t.ib)&&null!=(t=t.Hb)){var s=new e.g;for(s.H(n),s=(r=t.Vz(s,r)).next();-1!=s;s=r.next())if(o.Rb(t.ga(s)),o.Aa()){var u=(s=o.aa()).ae(n,!1);if(s.cc(u,i),e.b.oc(n,i)<=a)return!0}return!1}for(t=new e.g;o.Ta();)for(;o.Aa();)if((s=o.aa()).s(t),t.O(r,r),t.contains(n)&&(u=s.ae(n,!1),s.cc(u,i),e.b.oc(n,i)<=a))return!0;return!1},t.DH=function(e,n,r){return t.IA(e,n,r)&&!t.JA(e,n,r)},t.JA=function(e,n,r){return e=e.sg(),!t.Tt(e,n,r)},t.EH=function(t,n,r){if(t.Fm()){var i=new e.zb(n.o,n.A,n.o,n.B),a=new e.zb(n.o,n.B,n.v,n.B),o=new e.zb(n.v,n.B,n.v,n.A);for(n=new e.zb(n.v,n.A,n.o,n.A),t=t.Ba();t.Ta();)for(;t.Aa();){var s=t.aa();if(s.isIntersecting(i,r)||s.isIntersecting(a,r)||s.isIntersecting(o,r)||s.isIntersecting(n,r))return!0}}else{(i=new e.g).H(n),i.O(r,r),r=t.Va(0),a=new e.b,o=new e.b,n=new e.b,s=new e.b;for(var u=0,c=t.$();u<c;u++)for(var l=!0,h=t.ua(u),f=t.zc(u);h<f;h++)if(l)r.mc(2*h,o),l=!1;else{if(r.mc(2*h,a),n.K(o),s.K(a),0!=i.ez(n,s))return!0;o.K(a)}}return!1},t.qc=function(n,r,i){var a=n.F(),o=r.F();if(e.R.Rg(a)){var s=n.ib;if(null!=s&&null!=(s=s.oi))if(33==o){var u=r.w();if(1==(u=s.Xl(u.x,u.y)))return 1;if(0==u)return 4}else{if(u=new e.g,r.s(u),1==(u=s.rn(u)))return 1;if(0==u)return 4;if(i&&e.R.Rg(o)&&t.rF(r,s))return 1073741824}}if(e.R.Rg(o)&&null!=(s=r.ib)&&null!=(s=s.oi))if(33==a){if(n=n.w(),1==(u=s.Xl(n.x,n.y)))return 2;if(0==u)return 4}else{if(r=new e.g,n.s(r),1==(u=s.rn(r)))return 2;if(0==u)return 4;if(i&&e.R.Rg(a)&&t.rF(n,s))return 1073741824}return 0},t.rF=function(t,n){for(var r=t.D(),i=new e.b,a=0;a<r;a++)if(t.w(a,i),1==n.Xl(i.x,i.y))return!0;return!1},t.zJ=function(t,n,r,i){for(var a=1<=t.rk(0)&&1<=n.rk(0),o=t.Ba(),s=n.Ba(),u=[0,0],c=[0,0],l=new e.km(t,n,r,!1),h=!1;l.next();){var f=l.tl(),p=l.ol();if(o.Rb(f),s.Rb(p),f=o.aa(),2==(p=s.aa().Ia(f,null,c,u,r))){if(h=u[0],p=u[1],f=f.Pb(),a&&(p-h)*f>r)return!1;h=!0}else if(0!=p){if(f=c[0],0<(h=u[0])&&1>h&&0<f&&1>f)return!1;h=!0}}return!!h&&(o=new e.g,s=new e.g,a=new e.g,t.s(o),n.s(s),o.O(1e3*r,1e3*r),s.O(1e3*r,1e3*r),a.H(o),a.Ia(s),!(10<t.D()&&(t=e.Yd.clip(t,a,r,0),t.u())||10<n.D()&&(n=e.Yd.clip(n,a,r,0),n.u()))&&e.mm.$t(t,n,r,"F********",i))},t.wJ=function(n,r,i,a){var o=1<=n.rk(0)&&1<=r.rk(0),s=new e.g,u=new e.g,c=new e.g;n.s(s),r.s(u);for(var l=!1,h=t.Ts(s,u,i),f=t.Ts(u,s,i),p=n.Ba(),d=r.Ba(),v=[0,0],y=[0,0],b=new e.km(n,r,i,!1);b.next();){var g=b.tl(),m=b.ol();if(p.Rb(g),d.Rb(m),m=p.aa(),2==(g=d.aa().Ia(m,null,y,v,i))){g=v[0];var w=v[1];if(m=m.Pb(),o&&(w-g)*m>i&&(l=!0,h&&f))return!0}else if(0!=g&&(m=y[0],0<(g=v[0])&&1>g&&0<m&&1>m))return!0}if(o=new e.g,p=new e.g,o.H(s),o.O(1e3*i,1e3*i),p.H(u),p.O(1e3*i,1e3*i),c.H(o),c.Ia(p),s="",s=l?s+"**":s+"T*",h){if(10<r.D()&&(r=e.Yd.clip(r,c,i,0)).u())return!1;s+="****"}else s+="T***";if(f){if(10<n.D()&&(n=e.Yd.clip(n,c,i,0)).u())return!1;s+="***"}else s+="T**";return e.mm.$t(n,r,i,s.toString(),a)},t.sJ=function(n,r,i,a){var o=[!1],s=t.qJ(n,r,i,o);return o[0]?s:(o=new e.g,r.s(o),o.O(1e3*i,1e3*i),!(10<n.D()&&(n=e.Yd.clip(n,o,i,0),n.u()))&&e.mm.yx(n,r,i,a))},t.qJ=function(t,n,r,i){i[0]=!1;for(var a=t.Ba(),o=n.Ba(),s=[0,0],u=[0,0],c=new e.km(t,n,r,!1),l=!1;c.next();){var h=c.tl(),f=c.ol();if(a.Rb(h,-1),o.Rb(f,-1),h=a.aa(),0!=(h=o.aa().Ia(h,null,u,s,r))&&(l=!0,1==h&&(f=u[0],0<(h=s[0])&&1>h&&0<f&&1>f)))return i[0]=!0,!1}if(!l){for(i[0]=!0,s=new e.g,t.s(s),s.O(r,r),c=t,l=!1,u=new e.g,i=0,a=n.$();i<a;i++)if(0<n.Ha(i)){if(n.Sj(i,u),!s.isIntersecting(u))return!1;if(o=n.xa(n.ua(i)),0==(o=e.Oe.Jm(c,o,0)))return!1;l||(!e.Oe.Wl(t,n.$()-1)||null!=t.ib&&null!=t.ib.Hb?c=t:(o=new e.Ga,t.copyTo(o),o.lj(1),c=o),l=!0)}if(1==t.$()||1607==n.F())return!0;for(s=new e.g,n.s(s),s.O(r,r),u=n,c=!1,r=new e.g,i=0,a=t.$();i<a;i++)if(0<t.Ha(i)){if(t.Sj(i,r),s.isIntersecting(r)&&(o=t.xa(t.ua(i)),1==(o=e.Oe.Jm(u,o,0))))return!1;c||(!e.Oe.Wl(n,t.$()-1)||null!=n.ib&&null!=n.ib.Hb?u=n:(o=new e.Ga,n.copyTo(o),o.lj(1),u=o),c=!0)}return!0}return!1},t.AJ=function(t,n,r,i){for(var a=t.Ba(),o=n.Ba(),s=[0,0],u=[0,0],c=new e.km(t,n,r,!1),l=!1;c.next();){var h=c.tl(),f=c.ol();if(a.Rb(h),o.Rb(f),h=a.aa(),2==(h=o.aa().Ia(h,null,u,s,r)))l=!0;else if(0!=h){if(h=u[0],0<(l=s[0])&&1>l&&0<h&&1>h)return!1;l=!0}}return!!l&&(o=new e.g,s=new e.g,a=new e.g,t.s(o),n.s(s),o.O(1e3*r,1e3*r),s.O(1e3*r,1e3*r),a.H(o),a.Ia(s),!(10<t.D()&&(t=e.Yd.clip(t,a,r,0),t.u())||10<n.D()&&(n=e.Yd.clip(n,a,r,0),n.u()))&&e.mm.on(t,n,r,"F********",i))},t.uJ=function(n,r,i,a){for(var o=n.Ba(),s=r.Ba(),u=[0,0],c=[0,0],l=new e.km(n,r,i,!1),h=!1;l.next();){var f=l.tl(),p=l.ol();if(o.Rb(f),s.Rb(p),f=o.aa(),2==(f=s.aa().Ia(f,null,c,u,i)))h=!0;else if(0!=f){if(f=c[0],0<(h=u[0])&&1>h&&0<f&&1>f)return!0;h=!0}}return!!h&&(s=new e.g,u=new e.g,c=new e.g,l=new e.g,o=new e.g,n.s(s),r.s(u),t.Ts(u,s,i)?(c.H(s),c.O(1e3*i,1e3*i),l.H(u),l.O(1e3*i,1e3*i),o.H(c),o.Ia(l),!(10<n.D()&&(n=e.Yd.clip(n,o,i,0),n.u())||10<r.D()&&(r=e.Yd.clip(r,o,i,0),r.u()))&&(i=e.mm.on(n,r,i,"T********",a))):i=e.mm.on(n,r,i,"T*****T**",a))},t.tJ=function(n,r,i,a){var o=[!1],s=t.qJ(n,r,i,o);return o[0]?s:(o=new e.g,r.s(o),o.O(1e3*i,1e3*i),!(10<n.D()&&(n=e.Yd.clip(n,o,i,0),n.u()))&&e.mm.QB(n,r,i,a))},t.rJ=function(t,n,r){return 1==e.Zc.Td(t,n,r)},t.yJ=function(t,n,r){return 2==e.Zc.Td(t,n,r)},t.Tt=function(t,n,r){var i=new e.b;r*=r;for(var a=0;a<t.D();a++)if(t.w(a,i),e.b.oc(i,n)<=r)return!1;return!0},t.prototype.BF=function(e,t){return(e=this.yh[e]).Zm<(t=this.yh[t]).Zm||e.Zm==t.Zm&&(e.Ww<t.Ww||e.Ww==t.Ww&&(e.Mj<t.Mj||e.Mj==t.Mj&&(e.Yi<t.Yi||e.Yi==t.Yi&&e.rI<t.rI)))?-1:1},t}();e.wd=r}(J||(J={})),function(e){var t,n,r;(n=t||(t={}))[n.InteriorInterior=0]="InteriorInterior",n[n.InteriorBoundary=1]="InteriorBoundary",n[n.InteriorExterior=2]="InteriorExterior",n[n.BoundaryInterior=3]="BoundaryInterior",n[n.BoundaryBoundary=4]="BoundaryBoundary",n[n.BoundaryExterior=5]="BoundaryExterior",n[n.ExteriorInterior=6]="ExteriorInterior",n[n.ExteriorBoundary=7]="ExteriorBoundary",n[n.ExteriorExterior=8]="ExteriorExterior",function(e){e[e.AreaAreaPredicates=0]="AreaAreaPredicates",e[e.AreaLinePredicates=1]="AreaLinePredicates",e[e.LineLinePredicates=2]="LineLinePredicates",e[e.AreaPointPredicates=3]="AreaPointPredicates",e[e.LinePointPredicates=4]="LinePointPredicates",e[e.PointPointPredicates=5]="PointPointPredicates"}(r||(r={})),t=function(){function t(){this.se=0,this.h=new e.Pu,this.G=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.en=this.cx=-1}return t.hC=function(t,n,r,i,a){if(9!=i.length)throw e.f.Y("relation string length has to be 9 characters");for(var o=0;9>o;o++){var s=i.charAt(o);if("*"!=s&&"T"!=s&&"F"!=s&&"0"!=s&&"1"!=s&&"2"!=s)throw e.f.Y("relation string")}if(0!=(o=this.cT(i,t.pb(),n.pb())))return e.wd.iC(t,n,r,o,a);o=new e.g,t.s(o),s=new e.g,n.s(s);var u=new e.g;if(u.H(o),u.Nb(s),r=e.la.Qd(r,u,!1),t=this.HF(t,r),n=this.HF(n,r),t.u()||n.u())return this.$X(t,n,i);switch(o=n.F(),s=!1,t.F()){case 1736:switch(o){case 1736:s=this.$t(t,n,r,i,a);break;case 1607:s=this.on(t,n,r,i,a);break;case 33:s=this.Zt(t,n,r,i);break;case 550:s=this.Yt(t,n,r,i,a)}break;case 1607:switch(o){case 1736:s=this.on(n,t,r,this.rq(i),a);break;case 1607:s=this.RB(t,n,r,i,a);break;case 33:s=this.bu(t,n,r,i,a);break;case 550:s=this.au(t,n,r,i,a)}break;case 33:switch(o){case 1736:s=this.Zt(n,t,r,this.rq(i));break;case 1607:s=this.bu(n,t,r,this.rq(i),a);break;case 33:s=this.rW(t,n,r,i);break;case 550:s=this.Ut(n,t,r,this.rq(i))}break;case 550:switch(o){case 1736:s=this.Yt(n,t,r,this.rq(i),a);break;case 1607:s=this.au(n,t,r,this.rq(i),a);break;case 550:s=this.JB(t,n,r,i,a);break;case 33:s=this.Ut(t,n,r,i)}break;default:s=!1}return s},t.$t=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.BK();var u=new e.g,c=new e.g;return n.s(u),r.s(c),a=!1,e.wd.ik(u,c,i)&&(s.iv(n,r),a=!0),a||(4==(u=e.wd.qc(n,r,!1))?(s.iv(n,r),a=!0):1==u?(s.Ry(r),a=!0):2==u&&(s.LE(n),a=!0)),a||(n=(a=new e.Yc).Bb(n),r=a.Bb(r),s.lp(a,i,o),s.Vp(n,r),s.h.ah()),t.lg(s.G,s.Wc)},t.yx=function(n,r,i,a){var o=new t;o.dj(),o.ij("T*****F**"),o.BK();var s=new e.g,u=new e.g;n.s(s),r.s(u);var c=!1;return e.wd.ik(s,u,i)&&(o.iv(n,r),c=!0),c||(4==(s=e.wd.qc(n,r,!1))?(o.iv(n,r),c=!0):1==s?(o.Ry(r),c=!0):2==s&&(o.LE(n),c=!0)),c?this.lg(o.G,o.Wc):(n=(c=new e.Yc).Bb(n),s=c.Bb(r),e.$j.U(c,i,a,!1),i=c.ye(s).sg(),c.$p(0,!0,!0),e.Kn.U(c,n,-1,!1,a),0!=c.D(n)&&(e.Kn.U(c,s,-1,!1,a),o.zr(c,a),(r=0==c.D(s))||(o.Vp(n,s),o.h.ah(),s=this.lg(o.G,o.Wc))?(n=c.ye(n),n=(c=new e.Yc).Bb(n),s=c.Bb(i),o.zr(c,a),o.se=0,o.dj(),o.ij(r?"T*****F**":"******F**"),o.sC(),o.Vp(n,s),o.h.ah(),this.lg(o.G,o.Wc)):s))},t.on=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.sC();var u=new e.g,c=new e.g;return n.s(u),r.s(c),a=!1,e.wd.ik(u,c,i)&&(s.jv(n,r),a=!0),a||(4==(u=e.wd.qc(n,r,!1))?(s.jv(n,r),a=!0):1==u&&(s.ME(r),a=!0)),a||(n=(a=new e.Yc).Bb(n),r=a.Bb(r),s.lp(a,i,o),s.qh=s.h.Xp(),t.px(r,s.h,s.qh),s.Vp(n,r),s.h.Yp(s.qh),s.h.ah()),t.lg(s.G,s.Wc)},t.QB=function(n,r,i,a){var o=new t;o.dj(),o.ij("T*****F**"),o.sC();var s=new e.g,u=new e.g;n.s(s),r.s(u);var c=!1;return e.wd.ik(s,u,i)&&(o.jv(n,r),c=!0),c||(4==(s=e.wd.qc(n,r,!1))?(o.jv(n,r),c=!0):1==s&&(o.ME(r),c=!0)),c?this.lg(o.G,o.Wc):(n=(c=new e.Yc).Bb(n),r=c.Bb(r),o.lp(c,i,a),0!=c.D(n)&&(o.Vp(n,r),o.h.ah(),this.lg(o.G,o.Wc)))},t.Yt=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.CK();var u=new e.g,c=new e.g;return n.s(u),r.s(c),a=!1,e.wd.ik(u,c,i)&&(s.kv(n),a=!0),a||(4==(u=e.wd.qc(n,r,!1))?(s.kv(n),a=!0):1==u&&(s.KO(),a=!0)),a||(n=(a=new e.Yc).Bb(n),r=a.Bb(r),s.lp(a,i,o),s.kz(n,r),s.h.ah()),t.lg(s.G,s.Wc)},t.RB=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.HY(),a=new e.g;var u=new e.g;n.s(a),r.s(u);var c=!1;return e.wd.ik(a,u,i)&&(s.BH(n,r),c=!0),c||4!=e.wd.qc(n,r,!1)||(s.BH(n,r),c=!0),c||(n=(a=new e.Yc).Bb(n),r=a.Bb(r),s.lp(a,i,o),s.di=s.h.Xp(),s.qh=s.h.Xp(),t.px(n,s.h,s.di),t.px(r,s.h,s.qh),s.Vp(n,r),s.h.Yp(s.di),s.h.Yp(s.qh),s.h.ah()),t.lg(s.G,s.Wc)},t.au=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.QK(),a=new e.g;var u=new e.g;n.s(a),r.s(u);var c=!1;return e.wd.ik(a,u,i)&&(s.FA(n),c=!0),c||4!=e.wd.qc(n,r,!1)||(s.FA(n),c=!0),c||(n=(a=new e.Yc).Bb(n),r=a.Bb(r),s.lp(a,i,o),s.di=s.h.Xp(),t.px(n,s.h,s.di),s.kz(n,r),s.h.Yp(s.di),s.h.ah()),t.lg(s.G,s.Wc)},t.JB=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.VK(),a=new e.g;var u=new e.g;n.s(a),r.s(u);var c=!1;return e.wd.ik(a,u,i)&&(s.pJ(),c=!0),c||(n=(a=new e.Yc).Bb(n),r=a.Bb(r),s.lp(a,i,o),s.kz(n,r),s.h.ah()),t.lg(s.G,s.Wc)},t.Zt=function(n,r,i,a){var o=new t;o.dj(),o.ij(a),o.CK();var s=new e.g;n.s(s),r=r.w();var u=!1;return e.wd.xx(r,s,i)&&(o.kv(n),u=!0),u||(1==(i=e.Zc.Td(n,r,i))?(o.G[0]=0,o.G[2]=2,o.G[3]=-1,o.G[5]=1,o.G[6]=-1):2==i?(o.G[6]=-1,0!=n.Pe()?(o.G[0]=-1,o.G[3]=0,o.G[2]=2,o.G[5]=1):(o.G[0]=0,o.G[3]=-1,o.G[5]=-1,i=new e.g,n.s(i),o.G[2]=0==i.ca()&&0==i.N()?-1:1)):o.kv(n)),this.lg(o.G,a)},t.bu=function(n,r,i,a,o){var s=new t;s.dj(),s.ij(a),s.QK();var u=new e.g;n.s(u),a=r.w();var c=!1;if(e.wd.xx(a,u,i)&&(s.FA(n),c=!0),!c){u=null;var l=c=!1;(s.ea[0]||s.ea[6])&&(e.wd.IA(n,a,i)?(s.ea[0]&&(u=e.yi.qm(n,o),l=!e.wd.Tt(u,a,i),c=!0,s.G[0]=l?-1:0),s.G[6]=-1):(s.G[0]=-1,s.G[6]=0)),s.ea[3]&&(null!=u&&u.u()?s.G[3]=-1:(c||(null==u&&(u=e.yi.qm(n,o)),l=!e.wd.Tt(u,a,i),c=!0),s.G[3]=l?0:-1)),s.ea[5]&&(null!=u&&u.u()?s.G[5]=-1:c&&!l?s.G[5]=0:(null==u&&(u=e.yi.qm(n,o)),o=e.wd.tx(u,r,i),s.G[5]=o?-1:0)),s.ea[2]&&(0!=n.Pb()?s.G[2]=1:((o=new e.Hd(n.description)).yd(n,0,n.D()),n=e.wd.tx(o,r,i),s.G[2]=n?-1:0))}return this.lg(s.G,s.Wc)},t.Ut=function(n,r,i,a){var o=new t;o.dj(),o.ij(a),o.VK();var s=new e.g;n.s(s),r=r.w();var u=!1;if(e.wd.xx(r,s,i)&&(o.pJ(),u=!0),!u){s=!1,u=!0,i*=i;for(var c=0;c<n.D();c++){var l=n.xa(c);if(e.b.oc(l,r)<=i?s=!0:u=!1,s&&!u)break}s?(o.G[0]=0,o.G[2]=u?-1:0,o.G[6]=-1):(o.G[0]=-1,o.G[2]=0,o.G[6]=0)}return t.lg(o.G,a)},t.rW=function(n,r,i,a){n=n.w(),r=r.w();for(var o=[],s=0;9>s;s++)o[s]=-1;return e.b.oc(n,r)<=i*i?o[0]=0:(o[2]=0,o[6]=0),o[8]=2,t.lg(o,a)},t.lg=function(e,t){for(var n=0;9>n;n++)switch(t.charAt(n)){case"T":if(-1==e[n])return!1;break;case"F":if(-1!=e[n])return!1;break;case"0":if(0!=e[n])return!1;break;case"1":if(1!=e[n])return!1;break;case"2":if(2!=e[n])return!1}return!0},t.$X=function(t,n,r){var i=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(t.u()&&n.u()){for(var a=0;9>a;a++)i[a]=-1;return this.lg(i,r)}return a=!1,t.u()&&(t=n,a=!0),i[0]=-1,i[1]=-1,i[3]=-1,i[4]=-1,i[6]=-1,i[7]=-1,i[8]=2,n=t.F(),e.R.Bc(n)?1736==n?0!=t.Pe()?(i[2]=2,i[5]=1):(i[5]=-1,n=new e.g,t.s(n),i[2]=0==n.ca()&&0==n.N()?0:1):(n=0!=t.Pb(),i[2]=n?1:0,i[5]=e.yi.tq(t)?0:-1):(i[2]=0,i[5]=-1),a&&this.CL(i),this.lg(i,r)},t.cT=function(e,n,r){return t.oR(e)?3:t.eR(e)?4:t.JZ(e,n,r)?8:t.NQ(e,n,r)?16:t.oQ(e)?1:t.XV(e,n,r)?32:0},t.oR=function(e){return"T"==e.charAt(0)&&"*"==e.charAt(1)&&"F"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"F"==e.charAt(5)&&"F"==e.charAt(6)&&"F"==e.charAt(7)&&"*"==e.charAt(8)},t.eR=function(e){return"F"==e.charAt(0)&&"F"==e.charAt(1)&&"*"==e.charAt(2)&&"F"==e.charAt(3)&&"F"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8)},t.JZ=function(e,t,n){return(0!=t||0!=n)&&((2!=t||2!=n)&&("F"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"T"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8)||1==t&&1==n&&"F"==e.charAt(0)&&"T"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8))||0!=n&&"F"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"T"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8))},t.NQ=function(e,t,n){return t>n?"T"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"T"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8):1==t&&1==n&&"0"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8)},t.oQ=function(e){return"T"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"F"==e.charAt(6)&&"F"==e.charAt(7)&&"*"==e.charAt(8)},t.XV=function(e,t,n){if(t==n){if(1!=t)return"T"==e.charAt(0)&&"*"==e.charAt(1)&&"T"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"T"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8);if("1"==e.charAt(0)&&"*"==e.charAt(1)&&"T"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"T"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8))return!0}return!1},t.px=function(e,t,n){e=t.Fa(e);for(var r=t.We;-1!=r;r=t.$f(r))if(0!=(t.Bd(r)&e)){var i=t.Re(r);if(-1==i)t.Dn(r,n,0);else{var a=i,o=0;do{0!=(t.lh(a)&e)&&o++,a=t.kc(t.wa(a))}while(a!=i);t.Dn(r,n,o)}}},t.rq=function(e){var t=""+e.charAt(0);return t+=e.charAt(3),t+=e.charAt(6),t+=e.charAt(1),t+=e.charAt(4),t+=e.charAt(7),t+=e.charAt(2),(t+=e.charAt(5))+e.charAt(8)},t.prototype.dj=function(){for(var e=0;9>e;e++)this.G[e]=-2,this.$a[e]=-2},t.CL=function(e){var t=e[1],n=e[2],r=e[5];e[1]=e[3],e[2]=e[6],e[5]=e[7],e[3]=t,e[6]=n,e[7]=r},t.prototype.ij=function(e){for(this.Wc=e,e=0;9>e;e++)"*"!=this.Wc.charAt(e)?(this.ea[e]=!0,this.se++):this.ea[e]=!1},t.prototype.YK=function(){for(var e=0;9>e;e++)this.ea[e]&&-2==this.G[e]&&(this.G[e]=-1,this.ea[e]=!1)},t.prototype.pc=function(e){return!(-2==this.G[e]||(-1==this.G[e]?(this.ea[e]=!1,this.se--,0):"T"!=this.Wc.charAt(e)&&"F"!=this.Wc.charAt(e)&&this.G[e]<this.$a[e]||(this.ea[e]=!1,this.se--,0)))},t.prototype.BK=function(){this.cx=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)},t.prototype.sC=function(){this.cx=1,this.en=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)},t.prototype.HY=function(){this.cx=2,this.en=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)},t.prototype.CK=function(){this.en=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.ea[1]&&(this.G[1]=-1,this.ea[1]=!1,this.se--),this.ea[4]&&(this.G[4]=-1,this.ea[4]=!1,this.se--),this.ea[7]&&(this.G[7]=-1,this.ea[7]=!1,this.se--),this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)},t.prototype.QK=function(){this.en=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.ea[1]&&(this.G[1]=-1,this.ea[1]=!1,this.se--),this.ea[4]&&(this.G[4]=-1,this.ea[4]=!1,this.se--),this.ea[7]&&(this.G[7]=-1,this.ea[7]=!1,this.se--),this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)},t.prototype.VK=function(){this.en=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.ea[1]&&(this.G[1]=-1,this.ea[1]=!1,this.se--),this.ea[3]&&(this.G[3]=-1,this.ea[3]=!1,this.se--),this.ea[4]&&(this.G[4]=-1,this.ea[4]=!1,this.se--),this.ea[5]&&(this.G[5]=-1,this.ea[5]=!1,this.se--),this.ea[7]&&(this.G[7]=-1,this.ea[7]=!1,this.se--),this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)},t.prototype.IO=function(e,t,n){var r=!0;return this.ea[0]&&(this.XT(e,t,n),r=r&&this.pc(0)),this.ea[1]&&(this.eH(e,t,1),r=r&&this.pc(1)),this.ea[2]&&(this.fH(e,t,n,2),r=r&&this.pc(2)),this.ea[3]&&(this.eH(e,n,3),r=r&&this.pc(3)),this.ea[4]&&(this.MO(e,t,n),r=r&&this.pc(4)),this.ea[5]&&(this.RE(e,n,5),r=r&&this.pc(5)),this.ea[6]&&(this.fH(e,n,t,6),r=r&&this.pc(6)),this.ea[7]&&(this.RE(e,t,7),r=r&&this.pc(7)),r},t.prototype.iv=function(e,t){this.G[0]=-1,this.G[1]=-1,this.G[3]=-1,this.G[4]=-1,this.fs(e,this.ea[2]?2:-1,this.Wc.charAt(2),this.ea[5]?5:-1,this.Wc.charAt(5)),this.fs(t,this.ea[6]?6:-1,this.Wc.charAt(6),this.ea[7]?7:-1,this.Wc.charAt(7))},t.prototype.fs=function(t,n,r,i,a){-1==n&&-1==i||(("T"!=r&&"F"!=r&&-1!=n||"T"!=a&&"F"!=a&&-1!=i)&&0==t.Pe()?(-1!=i&&(this.G[i]=-1),-1!=n&&(r=new e.g,t.s(r),this.G[n]=0==r.ca()&&0==r.N()?0:1)):(-1!=n&&(this.G[n]=2),-1!=i&&(this.G[i]=1)))},t.prototype.Ry=function(e){this.G[2]=2,this.G[3]=-1,this.G[4]=-1,this.G[5]=1,this.G[6]=-1,this.G[7]=-1,this.fs(e,this.ea[0]?0:-1,this.Wc.charAt(0),this.ea[1]?1:-1,this.Wc.charAt(1))},t.prototype.LE=function(e){this.Ry(e),t.CL(this.G)},t.prototype.jv=function(t,n){if(this.G[0]=-1,this.G[1]=-1,this.G[3]=-1,this.G[4]=-1,this.ea[6]){var r=this.Wc.charAt(6);r="T"==r||"F"==r||0!=n.Pb(),this.G[6]=r?1:0}this.ea[7]&&(n=e.yi.tq(n),this.G[7]=n?0:-1),this.fs(t,this.ea[2]?2:-1,this.Wc.charAt(2),this.ea[5]?5:-1,this.Wc.charAt(5))},t.prototype.ME=function(t){if(this.ea[0]){var n=this.Wc.charAt(0);n="T"==n||"F"==n||0!=t.Pb(),this.G[0]=n?1:0}this.ea[1]&&(t=e.yi.tq(t),this.G[1]=t?0:-1),this.G[2]=2,this.G[3]=-1,this.G[4]=-1,this.G[5]=1,this.G[6]=-1,this.G[7]=-1},t.prototype.kv=function(e){this.G[0]=-1,this.G[3]=-1,this.G[6]=0,this.fs(e,this.ea[2]?2:-1,this.Wc.charAt(2),this.ea[5]?5:-1,this.Wc.charAt(5))},t.prototype.KO=function(){this.G[0]=0,this.G[2]=2,this.G[3]=-1,this.G[5]=1,this.G[6]=-1},t.prototype.BH=function(t,n){if(this.G[0]=-1,this.G[1]=-1,this.G[3]=-1,this.G[4]=-1,this.ea[2]){var r=this.Wc.charAt(2);r="T"==r||"F"==r||0!=t.Pb(),this.G[2]=r?1:0}this.ea[5]&&(t=e.yi.tq(t),this.G[5]=t?0:-1),this.ea[6]&&(r="T"==(r=this.Wc.charAt(6))||"F"==r||0!=n.Pb(),this.G[6]=r?1:0),this.ea[7]&&(n=e.yi.tq(n),this.G[7]=n?0:-1)},t.prototype.FA=function(t){if(this.G[0]=-1,this.G[3]=-1,this.ea[2]){var n=this.Wc.charAt(2);n="T"==n||"F"==n||0!=t.Pb(),this.G[2]=n?1:0}this.ea[5]&&(t=e.yi.tq(t),this.G[5]=t?0:-1),this.G[6]=0},t.prototype.pJ=function(){this.G[0]=-1,this.G[2]=0,this.G[6]=0},t.prototype.JO=function(e,t,n){var r=!0;return this.ea[0]&&(this.YT(e,t),r=r&&this.pc(0)),this.ea[1]&&(this.UT(e,t,n,this.qh),r=r&&this.pc(1)),this.ea[2]&&(this.VT(e,t),r=r&&this.pc(2)),this.ea[3]&&(this.QO(e,t,n,this.qh),r=r&&this.pc(3)),this.ea[4]&&(this.NO(e,t,n,this.qh),r=r&&this.pc(4)),this.ea[5]&&(this.OO(e,t,n),r=r&&this.pc(5)),this.ea[6]&&(this.xR(e,t),r=r&&this.pc(6)),this.ea[7]&&(this.wR(e,t,n,this.qh),r=r&&this.pc(7)),r},t.prototype.IU=function(e,t,n){var r=!0;return this.ea[0]&&(this.aU(e,t,n,this.di,this.qh),r=r&&this.pc(0)),this.ea[1]&&(this.gH(e,t,n,this.di,this.qh,1),r=r&&this.pc(1)),this.ea[2]&&(this.hH(e,t,n,2),r=r&&this.pc(2)),this.ea[3]&&(this.gH(e,n,t,this.qh,this.di,3),r=r&&this.pc(3)),this.ea[4]&&(this.SO(e,t,n,this.di,this.qh),r=r&&this.pc(4)),this.ea[5]&&(this.SE(e,n,this.di,5),r=r&&this.pc(5)),this.ea[6]&&(this.hH(e,n,t,6),r=r&&this.pc(6)),this.ea[7]&&(this.SE(e,t,this.qh,7),r=r&&this.pc(7)),r},t.prototype.NE=function(e,t,n){var r=!0;return this.ea[0]&&(this.ZT(e,t),r=r&&this.pc(0)),this.ea[2]&&(this.WT(e,t),r=r&&this.pc(2)),this.ea[3]&&(this.RO(e,t,n),r=r&&this.pc(3)),this.ea[5]&&(this.PO(e,t),r=r&&this.pc(5)),this.ea[6]&&(this.yR(e,t),r=r&&this.pc(6)),r},t.prototype.CH=function(e,t,n){var r=!0;return this.ea[0]&&(this.bU(e,t,n,this.di),r=r&&this.pc(0)),this.ea[2]&&(this.$T(e,n),r=r&&this.pc(2)),this.ea[3]&&(this.UO(e,t,n,this.di),r=r&&this.pc(3)),this.ea[5]&&(this.TO(e,t,n,this.di),r=r&&this.pc(5)),this.ea[6]&&(this.zR(e,t,n),r=r&&this.pc(6)),r},t.prototype.qW=function(e,t,n){var r=!0;return this.ea[0]&&(this.cU(e,t,n),r=r&&this.pc(0)),this.ea[2]&&(this.iH(e,t,n,2),r=r&&this.pc(2)),this.ea[6]&&(this.iH(e,n,t,6),r=r&&this.pc(6)),r},t.prototype.XT=function(e,t,n){2!=this.G[0]&&0!=((e=this.h.kf(e))&t)&&0!=(e&n)&&(this.G[0]=2)},t.prototype.eH=function(e,t,n){if(1!=this.G[n]){var r=this.h.kf(this.h.wa(e));0!=(this.h.kf(e)&t)&&0!=(r&t)&&(this.G[n]=1)}},t.prototype.fH=function(e,t,n,r){2!=this.G[r]&&0!=((e=this.h.kf(e))&t)&&0==(e&n)&&(this.G[r]=2)},t.prototype.MO=function(e,t,n){if(1!=this.G[4]){var r=this.h.lh(e);0!=(r&t)&&0!=(r&n)?this.G[4]=1:0!=this.G[4]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)&&0!=((e=this.h.Bd(this.h.Df(e)))&t)&&0!=(e&n)&&(this.G[4]=0)}},t.prototype.RE=function(e,t,n){if(1!=this.G[n]){var r=this.h.kf(this.h.wa(e));0==(this.h.kf(e)&t)&&0==(r&t)&&(this.G[n]=1)}},t.prototype.YT=function(e,t){if(1!=this.G[0]){var n=this.h.kf(this.h.wa(e));0!=(this.h.kf(e)&t)&&0!=(n&t)&&(this.G[0]=1)}},t.prototype.UT=function(e,t,n,r){if(0!=this.G[1]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)){var i=this.h.Df(e),a=this.h.Bd(i);0==(a&t)&&0!=(this.h.kf(e)&t)&&(e=this.h.tg(i,r),0!=(a&n)&&0!=e%2&&(this.G[1]=0))}},t.prototype.VT=function(e,t){2!=this.G[2]&&0!=(this.h.lh(e)&t)&&(this.G[2]=2)},t.prototype.QO=function(e,t,n,r){if(1!=this.G[3]){var i=this.h.lh(e);0!=(i&t)&&0!=(i&n)?this.G[3]=1:0!=this.G[3]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)&&(i=this.h.Df(e),0!=((e=this.h.Bd(i))&t)&&(t=this.h.tg(i,r),0!=(e&n)&&0==t%2&&(this.G[3]=0)))}},t.prototype.NO=function(e,t,n,r){if(0!=this.G[4]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)){var i=this.h.Df(e);0!=((e=this.h.Bd(i))&t)&&(t=this.h.tg(i,r),0!=(e&n)&&0!=t%2&&(this.G[4]=0))}},t.prototype.OO=function(e,t,n){1!=this.G[5]&&0!=((e=this.h.lh(e))&t)&&0==(e&n)&&(this.G[5]=1)},t.prototype.xR=function(e,t){if(1!=this.G[6]){var n=this.h.kf(this.h.wa(e));0==(this.h.kf(e)&t)&&0==(n&t)&&(this.G[6]=1)}},t.prototype.wR=function(e,t,n,r){if(0!=this.G[7]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)){var i=this.h.Df(e),a=this.h.Bd(i);0==(a&t)&&0==(this.h.kf(e)&t)&&(e=this.h.tg(i,r),0!=(a&n)&&0!=e%2&&(this.G[7]=0))}},t.prototype.aU=function(e,t,n,r,i){if(1!=this.G[0]){var a=this.h.lh(e);0!=(a&t)&&0!=(a&n)?this.G[0]=1:0!=this.G[0]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)&&(e=this.h.Df(e),0!=((a=this.h.Bd(e))&t)&&0!=(a&n)&&(t=this.h.tg(e,r),i=this.h.tg(e,i),0==t%2&&0==i%2&&(this.G[0]=0)))}},t.prototype.gH=function(e,t,n,r,i,a){if(0!=this.G[a]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)){e=this.h.Df(e);var o=this.h.Bd(e);0!=(o&t)&&0!=(o&n)&&(t=this.h.tg(e,r),i=this.h.tg(e,i),0==t%2&&0!=i%2&&(this.G[a]=0))}},t.prototype.hH=function(e,t,n,r){1!=this.G[r]&&0!=((e=this.h.lh(e))&t)&&0==(e&n)&&(this.G[r]=1)},t.prototype.SO=function(e,t,n,r,i){if(0!=this.G[4]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)){e=this.h.Df(e);var a=this.h.Bd(e);0!=(a&t)&&0!=(a&n)&&(t=this.h.tg(e,r),i=this.h.tg(e,i),0!=t%2&&0!=i%2&&(this.G[4]=0))}},t.prototype.SE=function(e,t,n,r){0!=this.G[r]&&1!=this.h.Cb(this.h.ze(this.h.wa(e)),this.aj)&&(e=this.h.Df(e),0==(this.h.Bd(e)&t)&&0!=this.h.tg(e,n)%2&&(this.G[r]=0))},t.prototype.ZT=function(e,t){0!=this.G[0]&&0==(this.h.Bd(e)&t)&&0!=(this.h.mk(this.h.Iz(e))&t)&&(this.G[0]=0)},t.prototype.WT=function(e,t){2!=this.G[2]&&0!=(this.h.Bd(e)&t)&&(this.G[2]=2)},t.prototype.RO=function(e,t,n){0!=this.G[3]&&0!=((e=this.h.Bd(e))&t)&&0!=(e&n)&&(this.G[3]=0)},t.prototype.PO=function(e,t){1!=this.G[5]&&0!=(this.h.Bd(e)&t)&&(this.G[5]=1)},t.prototype.yR=function(e,t){0!=this.G[6]&&0==(this.h.Bd(e)&t)&&0==(this.h.mk(this.h.Iz(e))&t)&&(this.G[6]=0)},t.prototype.bU=function(e,t,n,r){if(0!=this.G[0]){var i=this.h.Bd(e);0!=(i&t)&&0!=(i&n)&&0==this.h.tg(e,r)%2&&(this.G[0]=0)}},t.prototype.$T=function(e,t){1!=this.G[2]&&(-1!=this.h.Re(e)?this.G[2]=1:0!=this.G[2]&&0==(this.h.Bd(e)&t)&&(this.G[2]=0))},t.prototype.UO=function(e,t,n,r){if(0!=this.G[3]){var i=this.h.Bd(e);0!=(i&t)&&0!=(i&n)&&0!=this.h.tg(e,r)%2&&(this.G[3]=0)}},t.prototype.TO=function(e,t,n,r){if(0!=this.G[5]){var i=this.h.Bd(e);0!=(i&t)&&0==(i&n)&&0!=this.h.tg(e,r)%2&&(this.G[5]=0)}},t.prototype.zR=function(e,t,n){0!=this.G[6]&&0==((e=this.h.Bd(e))&t)&&0!=(e&n)&&(this.G[6]=0)},t.prototype.cU=function(e,t,n){0!=this.G[0]&&0!=((e=this.h.Bd(e))&t)&&0!=(e&n)&&(this.G[0]=0)},t.prototype.iH=function(e,t,n,r){0!=this.G[r]&&0!=((e=this.h.Bd(e))&t)&&0==(e&n)&&(this.G[r]=0)},t.prototype.Vp=function(t,n){var r=!1;t=this.h.Fa(t),n=this.h.Fa(n),this.aj=this.h.ih();for(var i=this.h.We;-1!=i;i=this.h.$f(i)){var a=this.h.Re(i);if(-1==a){if(-1!=this.en)switch(this.en){case 3:r=this.NE(i,t,n);break;case 4:r=this.CH(i,t,n);break;default:throw e.f.Y("internal error")}}else{var o=a;do{var s=o;if(1!=this.h.Cb(s,this.aj))do{switch(this.cx){case 0:r=this.IO(s,t,n);break;case 1:r=this.JO(s,t,n);break;case 2:r=this.IU(s,t,n);break;default:throw e.f.Y("internal error")}if(r)break;this.h.Jb(s,this.aj,1),s=this.h.kc(s)}while(s!=o&&!r);if(r)break;o=this.h.kc(this.h.wa(s))}while(o!=a);if(r)break}}r||this.YK(),this.h.Uh(this.aj)},t.prototype.kz=function(t,n){var r=!1;t=this.h.Fa(t),n=this.h.Fa(n);for(var i=this.h.We;-1!=i;i=this.h.$f(i)){switch(this.en){case 3:r=this.NE(i,t,n);break;case 4:r=this.CH(i,t,n);break;case 5:r=this.qW(i,t,n);break;default:throw e.f.za()}if(r)break}r||this.YK()},t.prototype.zr=function(e,t){this.h.xr(e,t)},t.prototype.lp=function(e,t,n){this.iR(e,t,n),this.zr(e,n)},t.prototype.iR=function(t,n,r){for(e.$j.U(t,n,r,!1),t.$p(0,!0,!0),n=t.ld;-1!=n;n=t.Ae(n))1736==t.dc(n)&&e.Kn.U(t,n,-1,!1,r)},t.HF=function(t,n){var r=t.F();return e.R.Ic(r)?((n=new e.Oa(t.description)).$b(t,!0),n):197==r?(r=new e.g,t.s(r),r.ca()<=n&&r.N()<=n?(n=new e.Ra(t.description),t.hf(n),n):r.ca()<=n||r.N()<=n?(n=new e.Oa(t.description),r=new e.Ra,t.Pf(0,r),n.xf(r),t.Pf(2,r),n.lineTo(r),n):((n=new e.Ga(t.description)).bd(t,!1),n)):t},t}(),e.mm=t}(J||(J={})),function(e){var t=function(){function t(t){this.Rm=new e.ha(0),this.Lw=new e.ha(0),this.fu=new e.b,this.gu=new e.b,this.a=t,this.pt=-1}return t.prototype.ec=function(e){return this.a.ec(this.hA(e))},t.prototype.iw=function(e){var t=this.Pz(e);if(e=this.tG(e),this.a.Ma(t)==e){var n=t;t=e,e=n}return this.a.Hc(t,this.fu),this.a.Hc(e,this.gu),this.fu.y<this.gu.y},t.prototype.hA=function(e){var t=this.Pz(e);return e=this.tG(e),this.a.T(t)==e?t:e},t.prototype.Pz=function(e){return this.Rm.get(e)},t.prototype.tG=function(e){return this.Lw.get(e)},t.prototype.eG=function(e){this.Rm.set(e,this.pt),this.pt=e},t.prototype.cJ=function(t){if(-1!=this.pt){var n=this.pt;return this.pt=this.Rm.get(n),this.Rm.set(n,t),this.Lw.set(n,this.a.T(t)),n}return null==this.Rm&&(this.Rm=new e.ha(0),this.Lw=new e.ha(0)),n=this.Rm.size,this.Rm.add(t),this.Lw.add(this.a.T(t)),n},t.prototype.aA=function(e){return this.a.cd(this.Pz(e))},t}();e.e_=t;var n=function(){function t(t){this.Ie=t,this.qe=new e.zb,this.$m=new e.zb,this.sI=0,this.Uo=null,this.hB=-1}return t.prototype.compare=function(e,t,n){n=e.ga(n);var r=this.Ie.eb;if(this.hB==t)var i=this.sI;else this.Uo=r.ec(t),null==this.Uo?((e=r.a).gd(r.hA(t),this.qe),this.Uo=this.qe,i=this.qe.Te(this.Ie.Fh,0)):i=this.Uo.Te(this.Ie.Fh,0),this.sI=i,this.hB=t;if(null==(e=r.ec(n))){(e=r.a).gd(r.hA(n),this.$m),e=this.$m;var a=this.$m.Te(this.Ie.Fh,0)}else a=e.Te(this.Ie.Fh,0);return i==a&&(t=r.iw(t),n=r.iw(n),(t=.5*((n=Math.min(t?this.Uo.ma:this.Uo.na,n?e.ma:e.na))+this.Ie.Fh))==this.Ie.Fh&&(t=n),i=this.Uo.Te(t,0),a=e.Te(t,0)),i<a?-1:i>a?1:0},t.prototype.reset=function(){this.hB=-1},t}(),r=function(){function r(){this.kn=this.Ol=null,this.cb=new e.bk,this.cb.bR(),this.ge=new n(this),this.cb.kp(this.ge)}return r.prototype.TR=function(){var t=!1;if(this.Pw&&(t=this.UR()),1==this.a.$(this.W)){var n=this.a.Kb(this.W);return t=this.a.eA(n),this.a.yC(n,!0),0>t&&(t=this.a.Za(n),this.a.tK(t),this.a.dh(n,this.a.Ma(t)),!0)}for(this.Ml=this.a.oz(),this.Po=this.a.oz(),n=this.a.Kb(this.W);-1!=n;n=this.a.Qb(n))this.a.Br(n,this.Ml,0),this.a.Br(n,this.Po,-1);n=new e.ha(0),this.Fh=NaN;var r=new e.b;this.Mt=this.a.$(this.W),this.Ko=this.a.Kd(),this.zt=this.a.Kd();for(var i=this.Ol.sc(this.Ol.re);-1!=i;i=this.Ol.hb(i)){var a=this.Ol.getData(i);if(this.a.Hc(a,r),r.y!=this.Fh&&0!=n.size&&(t=this.cu(n)||t,this.ge.reset(),n.clear(!1)),n.add(a),this.Fh=r.y,0==this.Mt)break}for(0<this.Mt&&(t=this.cu(n)||t,n.clear(!1)),this.a.Xd(this.Ko),this.a.Xd(this.zt),n=this.a.Kb(this.W);-1!=n;)if(3==this.a.yj(n,this.Ml)){for(this.a.yC(n,!0),r=n,n=this.a.yj(n,this.Po);-1!=n;)i=this.a.yj(n,this.Po),this.a.sV(this.W,this.a.Qb(r),n),r=n,n=i;n=this.a.Qb(r)}else this.a.yC(n,!1),n=this.a.Qb(n);return this.a.lC(this.Ml),this.a.lC(this.Po),t},r.prototype.cu=function(e){return this.sX(e)},r.prototype.sX=function(n){var r=!1;null==this.eb&&(this.eb=new t(this.a)),null==this.kn?(this.kn=new e.ha(0),this.kn.Db(16)):this.kn.clear(!1),this.rX(n);for(var i=0,a=n.size;i<a;i++){var o=n.get(i);-1!=o&&this.aH(o,-1)}for(i=0;i<this.kn.size&&0<this.Mt;i++)if(n=this.kn.get(i),o=this.eb.aA(this.cb.ga(n)),a=-1,0==this.a.yj(o,this.Ml)){o=this.cb.Be(n);for(var s,u=n;-1!=o;){var c=this.cb.ga(o),l=this.eb.aA(c),h=this.a.yj(l,this.Ml);if(0!=h){a=l;break}u=o,o=this.cb.Be(o)}-1==o?(s=!0,o=u):(c=this.cb.ga(o),s=this.eb.iw(c),o=this.cb.hb(o),s=!s);do{if(c=this.cb.ga(o),l=this.eb.aA(c),0==(h=this.a.yj(l,this.Ml))&&(s!=this.eb.iw(c)&&(r=this.a.Za(l),this.a.tK(r),this.a.dh(l,this.a.Ma(r)),r=!0),this.a.Br(l,this.Ml,s?3:2),s||(u=this.a.yj(a,this.Po),this.a.Br(a,this.Po,l),this.a.Br(l,this.Po,u)),this.Mt--,0==this.Mt))return r;a=l,u=o,o=this.cb.hb(o),s=!s}while(u!=n)}return r},r.prototype.rX=function(e){for(var t=0,n=e.size;t<n;t++){var r=e.get(t),i=this.a.Na(r,this.Ko),a=this.a.Na(r,this.zt);if(-1!=i){var o=this.cb.ga(i);this.eb.eG(o),this.a.Qa(r,this.Ko,-1)}-1!=a&&(o=this.cb.ga(a),this.eb.eG(o),this.a.Qa(r,this.zt,-1)),o=-1,-1!=i&&-1!=a?(this.cb.zd(i,-1),this.cb.zd(a,-1),e.set(t,-1)):o=-1!=i?i:a,-1!=o&&(this.aH(r,o)||this.cb.zd(o,-1),e.set(t,-1))}},r.prototype.aH=function(t,n){var r=new e.b,i=new e.b;this.a.Hc(t,r);var a=this.a.T(t);this.a.Hc(a,i);var o=!1;if(r.y<i.y){o=!0;var s=this.eb.cJ(t);if(-1==n)var u=this.cb.addElement(s,-1);else this.cb.Tj(u=n,s);-1==(s=this.a.Na(a,this.Ko))?this.a.Qa(a,this.Ko,u):this.a.Qa(a,this.zt,u),a=this.a.cd(t),0==this.a.yj(a,this.Ml)&&this.kn.add(u)}return a=this.a.Ma(t),this.a.Hc(a,i),r.y<i.y&&(o=!0,s=this.eb.cJ(a),-1==n?u=this.cb.addElement(s,-1):this.cb.Tj(u=n,s),-1==(s=this.a.Na(a,this.Ko))?this.a.Qa(a,this.Ko,u):this.a.Qa(a,this.zt,u),a=this.a.cd(t),0==this.a.yj(a,this.Ml)&&this.kn.add(u)),o},r.U=function(e,t,n,i){var a=new r;return a.a=e,a.W=t,a.Ol=n,a.Pw=i,a.TR()},r.prototype.UR=function(){var t=new e.ha(0),n=new e.ha(0),r=-1,i=-1,a=new e.b;a.Tc();for(var o=-1,s=-1,u=-1,c=new e.b,l=this.Ol.sc(this.Ol.re);-1!=l;l=this.Ol.hb(l)){var h=this.Ol.getData(l);this.a.Hc(h,c);var f=this.a.cd(h);a.qb(c)&&s==f?(-1==i&&(r=this.a.oz(),i=this.a.Kd()),-1==u&&(this.a.Qa(o,i,u=n.size),n.add(1),-1==this.a.yj(f,r)&&(this.a.Br(f,r,o),t.add(f))),this.a.Qa(h,i,u),n.EY(n.Gc()+1)):(u=-1,a.K(c)),o=h,s=f}if(0==t.size)return!1;for(a=new e.ha(0),o=new e.ha(0),s=0,u=t.size;s<u;s++){f=t.get(s);var p=this.a.yj(f,r);for(h=this.a.Na(p,i),a.clear(!1),o.clear(!1),a.add(p),o.add(h),h=this.a.T(p);h!=p;h=this.a.T(h)){var d=h;if(-1!=(c=this.a.Na(d,i)))if(0==o.size)o.add(c),a.add(d);else if(o.Gc()==c){l=a.Gc();var v=this.a.T(l);p=this.a.T(d),this.a.Dc(l,p),this.a.Ec(p,l),this.a.Dc(d,v),this.a.Ec(v,d),d=[!1],v=this.a.$G(this.W,v,this.a.Za(f),d),this.a.Qa(h,i,-1),d[0]&&this.a.Sf(f,p),h=this.a.Ha(f),h-=p=this.a.Ha(v),this.a.Wj(f,h),n.set(c,n.get(c)-1),1==n.get(c)&&(n.set(c,0),o.Rf(),a.Rf()),h=p=l}else a.add(h),o.add(c)}}return this.a.lC(r),this.a.Xd(i),!0},r}();e.dN=r}(J||(J={})),function(e){var t=function(){function t(){}return t.prototype.og=function(){this.yB=this.sb=null},t.prototype.get=function(){return this.yB},t.prototype.set=function(t){if(this.yB=t,null!=t)throw 322==t.F()&&(this.sb=t),e.f.za()},t.prototype.create=function(t){if(322!=t)throw e.f.Y("Not Implemented");this.ps()},t.prototype.ps=function(){null==this.sb&&(this.sb=new e.zb),this.yB=this.sb},t}();e.og=t}(J||(J={})),function(e){(e=e.eN||(e.eN={}))[e.enumLineSeg=1]="enumLineSeg",e[e.enumBezierSeg=2]="enumBezierSeg",e[e.enumArcSeg=4]="enumArcSeg",e[e.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",e[e.enumSegmentMask=7]="enumSegmentMask",e[e.enumDensified=8]="enumDensified"}(J||(J={})),function(e){var t=function(e){this.gj=e,this.ZC=this.$C=1,this.bC=this.aC=this.cC=0},n=function(){function n(){this.Zq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Jk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Jf=new e.Ra,this.qa=this.kx=0,this.Fo=[],this.It=[],this.fx=[],this.ar=[],this.vB=[]}return n.prototype.fC=function(e){if(null!=e){for(var t=0,n=e.length;t<n;t++)this.XX(e[t]);e.length=0}},n.prototype.XX=function(e){e.gj=null,this.ar.push(e)},n.prototype.ux=function(e){if(0===this.ar.length)var n=new t(e);else(n=this.ar[this.ar.length-1]).gj=e,--this.ar.length;return n},n.prototype.iT=function(e,t){return 0==e?this.It[t]:this.fx[t]},n.prototype.LB=function(){this.kx>=this.vB.length&&this.vB.push(new e.og);var t=this.vB[this.kx];return this.kx++,t},n.prototype.clear=function(){this.fC(this.Fo),this.fC(this.It),this.fC(this.fx),this.kx=0},n.prototype.gp=function(e){this.Fo.push(this.ux(e))},n.prototype.ul=function(e){return 0==e?this.It.length:this.fx.length},n.prototype.nq=function(e,t){return this.iT(e,t).gj},n.prototype.Ia=function(t,n){if(2!=this.Fo.length)throw e.f.za();this.qa=t;var r=e.Tb.Wx(.01*t),i=!1,a=this.Fo[0],o=this.Fo[1];if(n||0!=(5&a.gj.Zr(o.gj,t,!0))){if(322==a.gj.F()){var s=a.gj;if(322==o.gj.F()){var u=e.zb.Dy(s,n=o.gj,null,this.Zq,this.Jk,t);if(0==u)throw e.zb.Dy(s,n,null,this.Zq,this.Jk,t),e.f.za();t=Array(9),e.L.Hv(t,null);for(var c=0;c<u;c++){var l=this.Zq[c],h=this.Jk[c],f=a.bC,p=1;0==l?(f=a.cC,p=a.$C):1==l&&(f=a.aC,p=a.ZC);var d=o.bC,v=1;0==h?(d=o.cC,v=o.$C):1==h&&(d=o.aC,v=o.ZC);var y=new e.b;f==d?(f=new e.b,s.cc(l,f),l=new e.b,n.cc(h,l),v/=h=p+v,e.Tb.AH(f,l,v,y),e.b.oc(y,f)+e.b.oc(y,l)>r&&(i=!0)):f>d?(s.cc(l,y),l=new e.b,n.cc(h,l),e.b.oc(y,l)>r&&(i=!0)):(n.cc(h,y),f=new e.b,s.cc(l,f),e.b.oc(y,f)>r&&(i=!0)),t[c]=y}for(a=0,o=-1,c=0;c<=u;c++)(v=c<u?this.Zq[c]:1)!=a&&(r=this.LB(),s.jh(a,v,r),-1!=o&&r.get().Fc(t[o]),c!=u&&r.get().Sc(t[c]),a=v,this.It.push(this.ux(r.get()))),o=c;for(s=[0,0,0,0,0,0,0,0,0],c=0;c<u;c++)s[c]=c;for(1<u&&this.Jk[0]>this.Jk[1]&&(v=this.Jk[0],this.Jk[0]=this.Jk[1],this.Jk[1]=v,c=s[0],s[0]=s[1],s[1]=c),a=0,o=-1,c=0;c<=u;c++)(v=c<u?this.Jk[c]:1)!=a&&(r=this.LB(),n.jh(a,v,r),-1!=o&&(a=s[o],r.get().Fc(t[a])),c!=u&&(a=s[c],r.get().Sc(t[a])),a=v,this.fx.push(this.ux(r.get()))),o=c;return i}}throw e.f.za()}return!1},n.prototype.rA=function(t,n,r){if(n.copyTo(this.Jf),1!=this.Fo.length)throw e.f.za();this.qa=t;var i=this.Fo[0];if(r||i.gj.Yu(n.w(),t,!0)){if(322!=i.gj.F())throw e.f.za();var a=(t=i.gj).ae(n.w(),!1);this.Zq[0]=a;var o=i.bC;for(r=1,0==a?(o=i.cC,r=i.$C):1==a&&(o=i.aC,r=i.ZC),i=new e.b,0==o?(o=new e.b,t.cc(a,o),n=n.w(),e.Tb.AH(o,n,1/(r+1),i)):0<o?(i=new e.b,t.cc(a,i)):i=n.w(),r=0,a=-1,o=0;1>=o;o++){if((n=1>o?this.Zq[o]:1)!=r){var s=this.LB();t.jh(r,n,s),-1!=a&&s.get().Fc(i),1!=o&&s.get().Sc(i),r=n,this.It.push(this.ux(s.get()))}a=o}this.Jf.nb(i)}},n}();e.AD=n}(J||(J={})),function(e){var t=function(){function t(t){this.lt=this.yk=this.sb=null,this.Ll=this.$e=0,this.wl=this.Mm=!1,this.Ue=-1,this.ki=this.ed=0,this.Pa=-1,this.Ya=t,this.$e=this.Xr(this.ki),this.Mm=!1,this.yk=null,this.Ll=-1,this.wl=!1,this.lt=new e.b}return t.M_=function(n,r){if(0>r||r>=n.D())throw e.f.Gd();var i=new t(n),a=n.Yv(r);return i.ed=r-n.ua(a),i.ki=a+1,i.Pa=a,i.$e=i.Xr(i.Pa),i.Ll=i.Ya.ua(i.Pa),i.wl=i.Ya.Lb(i.Pa),i},t.L_=function(n,r,i){if(0>r||r>=n.$()||0>i)throw e.f.Gd();var a=n.Lb(r)?0:1;if(i>=n.Ha(r)-a)throw e.f.Gd();return(n=new t(n)).Ue=-1,n.ed=i,n.Pa=r,n.ki=n.ed+1,n.$e=n.Xr(n.ki),n.Ll=n.Ya.ua(n.Pa),n.wl=n.Ya.Lb(n.Pa),n},t.prototype.gY=function(t){if(this.Ya!=t.Ya)throw e.f.Eb();this.Ue=t.Ue,this.ed=t.ed,this.Pa=t.Pa,this.ki=t.ki,this.$e=t.$e,this.Mm=t.Mm,this.Ll=t.Ll,this.yk=null,this.wl=t.wl},t.prototype.aa=function(){if(this.Ue!=this.ed&&this.nE(),this.Mm)this.ed=(this.ed+1)%this.$e;else{if(this.ed==this.$e)throw e.f.Gd();this.ed++}return this.yk},t.prototype.ti=function(){if(this.Mm)this.ed=(this.$e+this.ed-1)%this.$e;else{if(0==this.ed)throw e.f.Gd();this.ed--}return this.ed!=this.Ue&&this.nE(),this.yk},t.prototype.hY=function(){this.Ue=-1,this.ed=0},t.prototype.iY=function(){this.ed=this.$e,this.Ue=-1},t.prototype.Rb=function(e,t){if(void 0===t&&(t=-1),0<=this.Pa&&this.Pa<this.Ya.$()){var n=this.QN();if(e>=n&&e<this.Ya.zc(this.Pa))return this.Ue=-1,void(this.ed=e-n)}t=0<=t&&t<this.Ya.$()&&e>=this.Ya.ua(t)&&e<this.Ya.zc(t)?t:this.Ya.Yv(e),this.ki=t+1,this.Pa=t,this.Ue=-1,this.ed=e-this.Ya.ua(t),this.$e=this.Xr(t),this.Ll=this.Ya.ua(this.Pa),this.wl=this.Ya.Lb(this.Pa)},t.prototype.Ta=function(){return this.Pa=this.ki,!(this.Pa>=this.Ya.$()||(this.Ue=-1,this.ed=0,this.$e=this.Xr(this.Pa),this.Ll=this.Ya.ua(this.Pa),this.wl=this.Ya.Lb(this.Pa),this.ki++,0))},t.prototype.ej=function(){this.$e=this.ed=this.Ue=-1,this.ki=0,this.Pa=-1,this.wl=!1,this.Ll=-1},t.prototype.oC=function(t){if(0>t)throw e.f.Gd();this.ki=t,this.Ll=this.$e=this.ed=this.Ue=this.Pa=-1,this.wl=!1},t.prototype.Xr=function(e){if(this.Ya.Ac())return 0;var t=1;return this.Ya.Lb(e)&&(t=0),this.Ya.Ha(e)-t},t.prototype.io=function(){return this.Ue==this.$e-1&&this.Ya.Lb(this.Pa)},t.prototype.tC=function(){this.Mm=!0},t.prototype.wb=function(){return this.Ya.kb.i[this.Pa]+this.Ue},t.prototype.QN=function(){return this.Ya.ua(this.Pa)},t.prototype.nk=function(){return this.io()?this.Ya.ua(this.Pa):this.wb()+1},t.prototype.Im=function(){return 0==this.Ue},t.prototype.ko=function(){return this.Ue==this.$e-1},t.prototype.Aa=function(){return this.ed<this.$e},t.prototype.mA=function(){return 0<this.ed},t.prototype.Cf=function(){var e=new t(this.Ya);return e.Ue=this.Ue,e.ed=this.ed,e.$e=this.$e,e.Pa=this.Pa,e.ki=this.ki,e.Ya=this.Ya,e.Mm=this.Mm,e},t.prototype.nE=function(){if(0>this.ed||this.ed>=this.$e)throw e.f.Gd();this.Ue=this.ed;var t=this.wb();this.Ya.rc();var n=this.Ya.af,r=1;switch(null!=n&&(r=7&n.read(t)),n=this.Ya.description,r){case 1:null==this.sb&&(this.sb=new e.zb),this.yk=this.sb;break;case 2:throw e.f.Y("internal error");case 4:default:throw e.f.za()}this.yk.rg(n),r=this.nk(),this.Ya.Hc(t,this.lt),this.yk.Fc(this.lt),this.Ya.Hc(r,this.lt),this.yk.Sc(this.lt);for(var i=1,a=n.Ca;i<a;i++)for(var o=n.kd(i),s=e.oa.Sa(o),u=0;u<s;u++){var c=this.Ya.Rc(o,t,u);this.yk.Qx(o,u,c),c=this.Ya.Rc(o,r,u),this.yk.Hx(o,u,c)}},t.prototype.uU=function(){return this.Pa==this.Ya.$()-1},t.prototype.jo=function(){var e=this.Ya.lT();return null!=e&&1!=(7&e.read(this.Ue))},t}();e.fN=t}(J||(J={})),function(e){var t=function(){function t(t){t instanceof e.R?(this.kI=t,this.ya=-1,this.Ki=1):(this.QU=t.slice(0),this.ya=-1,this.Ki=t.length)}return t.prototype.Fa=function(){return this.ya},t.prototype.next=function(){return this.ya<this.Ki-1?(this.ya++,null!=this.kI?this.kI:this.QU[this.ya]):null},t.prototype.xe=function(){},t}();e.$c=t}(J||(J={})),function(e){var t=function(){this.next=null},n=function(){function n(){this.mr=this.qx=this.rx=0,this.YF=!1,this.lL=0,this.xn=this.Tf=this.hm=this.Nh=null,this.Zl=0,this.$y=null,this.vl=this.xi=-1}return n.prototype.dZ=function(t,n,r){this.xi=t,this.vl=n,this.Nh=this.hm=null,this.mr=0,this.$y=r,null==this.xn&&(this.xn=e.L.Xf(384,0)),this.tL()},n.prototype.N=function(){return this.xi},n.prototype.ca=function(){return this.vl},n.prototype.flush=function(){0<this.Zl&&(this.$y.UF(this.xn,this.Zl),this.Zl=0)},n.prototype.tL=function(){if(0<this.mr){for(var e=0;e<this.vl;e++){for(var t=this.hm[e];null!=t;){var n=t;t=t.next,n.next=null}this.hm[e]=null}this.Nh=null}this.rx=this.vl,this.qx=-1,this.mr=0},n.prototype.mK=function(e){for(this.YF=e==n.iy,e=this.rx;e<=this.qx;e++)this.DO(),this.vO(e),this.jR();this.tL()},n.prototype.Py=function(n,r,i,a){if(r!=a){var o=1;if(r>a&&(o=n,n=i,i=o,o=r,r=a,a=o,o=-1),!(0>a||r>=this.vl)){0>n&&0>i?i=n=-1:n>=this.xi&&i>=this.xi&&(i=n=this.xi);var s=(i-n)/(a-r);a>this.vl&&(i=s*((a=this.vl)-r)+n),0>r&&(n=s*(0-r)+n,r=0);var u=Math.max(this.xi+1,8388607);-8388607>n?(r=(0-n)/s+r,n=0):n>u&&(r=(this.xi-n)/s+r,n=this.xi),-8388607>i?a=(0-n)/s+r:i>u&&(a=(this.xi-n)/s+r),(r=e.L.truncate(r))!=(a=e.L.truncate(a))&&((i=new t).x=e.L.truncate(4294967296*n),i.y=r,i.B=a,i.gR=e.L.truncate(4294967296*s),i.dir=o,null==this.hm&&(this.hm=e.L.Xf(this.vl,null)),i.next=this.hm[i.y],this.hm[i.y]=i,i.y<this.rx&&(this.rx=i.y),i.B>this.qx&&(this.qx=i.B),this.mr++)}}},n.prototype.DO=function(){if(null!=this.Nh){for(var e=!1,t=null,n=this.Nh;null!=n;)if(n.y++,n.y==n.B){var r=n;n=n.next,null!=t?t.next=n:this.Nh=n,r.next=null}else n.x+=n.gR,null!=t&&t.x>n.x&&(e=!0),t=n,n=n.next;e&&(this.Nh=this.kL(this.Nh))}},n.prototype.vO=function(e){if(!(e>=this.vl)){var t=this.hm[e];if(null!=t){this.hm[e]=null,t=this.kL(t),this.mr-=this.lL,e=this.Nh;for(var n=!0,r=t,i=null;null!=e&&null!=r;)e.x>r.x?(n&&(this.Nh=r),n=r.next,r.next=e,null!=i&&(i.next=r),i=r,r=n):(n=e.next,e.next=r,null!=i&&(i.next=e),i=e,e=n),n=!1;null==this.Nh&&(this.Nh=t)}}},n.jL=function(e,t){return 0>e?0:e>t?t:e},n.prototype.jR=function(){if(null!=this.Nh)for(var t=0,r=this.Nh,i=e.L.truncate(e.L.IH(r.x)),a=r.next;null!=a;a=a.next)if(t=this.YF?1^t:t+a.dir,a.x>r.x){var o=e.L.truncate(e.L.IH(a.x));0!=t&&(r=n.jL(i,this.xi),(i=n.jL(o,this.xi))>r&&r<this.xi&&(this.xn[this.Zl++]=r,this.xn[this.Zl++]=i,this.xn[this.Zl++]=a.y,this.Zl==this.xn.length&&(this.$y.UF(this.xn,this.Zl),this.Zl=0))),r=a,i=o}},n.prototype.kL=function(t){for(var r=0,i=t;null!=i;i=i.next)r++;if(this.lL=r,1==r)return t;null==this.Tf?this.Tf=e.L.Xf(Math.max(r,16),null):this.Tf.length<r&&(this.Tf=e.L.Xf(Math.max(r,2*this.Tf.length),null));var a=0;for(i=t;null!=i;i=i.next)this.Tf[a++]=i;for(2==r?this.Tf[0].x>this.Tf[1].x&&(t=this.Tf[0],this.Tf[0]=this.Tf[1],this.Tf[1]=t):n.LO(this.Tf,r,(function(e,t){return e==t?0:e.x<t.x?-1:e.x>t.x?1:0})),t=this.Tf[0],this.Tf[0]=null,i=t,a=1;a<r;a++)i.next=this.Tf[a],i=this.Tf[a],this.Tf[a]=null;return i.next=null,t},n.LO=function(e,t,n){if(t==e.length)e.sort(n);else{var r=e.slice(0,0),i=e.slice(t);t=e.slice(0,t).sort(n),e.length=0,e.push.apply(e,r.concat(t).concat(i))}},n.iy=0,n.v_=1,n}();e.uy=n}(J||(J={})),function(e){var t=function(){function t(){}return t.prototype.Bi=function(e,t){var n=this.a.Na(e,this.hr);if(this.Kl==n&&(this.Kl=this.ve.hb(this.Kl)),this.zo==n&&(this.zo=this.ve.hb(this.zo)),this.ve.jd(this.AB,n),this.fk(e),t&&-1!=(t=this.a.cd(e))&&this.a.Za(t)==e){var r=this.a.T(e);if(r!=e){if((n=this.a.cd(r))==t)return void this.a.Sf(t,r);if((r=this.a.Ma(e))!=e&&(n=this.a.cd(r))==t)return void this.a.Sf(t,r)}this.a.Sf(t,-1),this.a.dh(t,-1)}},t.prototype.aE=function(){for(var t=!1,n=new e.b;;){null==this.bi?(this.bi=new e.ha(0),this.ht=new e.ha(0),this.De=new e.ha(0)):(this.bi.clear(!1),this.ht.clear(!1),this.De.clear(!1));for(var r=this.zo,i=0,a=!0;r!=this.Kl;){var o=this.ve.getData(r),s=new e.b;this.a.Hc(o,s),a&&(this.a.Hc(o,n),a=!1),s=this.a.Ma(o);var u=this.a.T(o);-559038737!=this.a.Na(s,this.Fg)&&(this.bi.add(s),this.a.Qa(s,this.Fg,-559038737),this.ht.add(o),this.De.add(i++)),-559038737!=this.a.Na(u,this.Fg)&&(this.bi.add(u),this.a.Qa(u,this.Fg,-559038737),this.ht.add(o),this.De.add(i++)),r=this.ve.hb(r)}if(2>this.bi.size)break;var c=this;for(this.De.Zd(0,this.De.size,(function(e,t){return c.xN(e,t)})),r=0,i=this.De.size;r<i;r++)a=this.De.get(r),a=this.bi.get(a),this.a.Qa(a,this.Fg,r),s=new e.b,this.a.Hc(a,s);for(s=this.bO(n),r=0,i=this.De.size;r<i;r++)-1!=(a=this.De.get(r))&&(a=this.bi.get(a),this.a.Qa(a,this.Fg,-1));if(!s)break;t=!0}return t},t.prototype.bO=function(e){for(var t=!1,n=!0;n;){n=!1;var r=0;-1==this.De.get(r)&&(r=this.om(r));for(var i=this.om(r),a=0,o=this.De.size;a<o&&-1!=r&&-1!=i&&r!=i;a++){var s=this.De.get(r);i=this.De.get(i),s=this.bi.get(s),i=this.bi.get(i);var u=this.a.T(s);this.a.kw(u,e)||(u=this.a.Ma(s));var c=this.a.T(i);this.a.kw(c,e)||(c=this.a.Ma(i));var l=this.Wu(u,s),h=this.Wu(c,i),f=l?this.a.Ma(u):this.a.T(u),p=h?this.a.Ma(c):this.a.T(c),d=!1;(this.Lp(u)||this.Lp(c)||this.Lp(s)||this.Lp(i)||this.Lp(f)||this.Lp(p))&&(d=!0),!d&&this.a.wq(s,i)&&(d=!0,this.eE(l,h,u,s,c,i)),!d&&this.a.wq(f,p)&&(d=!0,this.eE(!l,!h,u,f,c,p)),d&&(t=!0),n=n||d,r=this.om(r),i=this.om(r)}}if(!t)for(-1==this.De.get(r=0)&&(r=this.om(r)),i=this.om(r),a=0,o=this.De.size;a<o&&-1!=r&&-1!=i&&r!=i;a++)s=this.De.get(r),i=this.De.get(i),s=this.bi.get(s),i=this.bi.get(i),u=this.a.T(s),this.a.kw(u,e)||(u=this.a.Ma(s)),c=this.a.T(i),this.a.kw(c,e)||(c=this.a.Ma(i)),l=this.Wu(u,s),h=this.Wu(c,i),f=l?this.a.Ma(u):this.a.T(u),p=h?this.a.Ma(c):this.a.T(c),this.LN(l,h,s,u,f,i,c,p)&&(t=!0),r=this.om(r),i=this.om(r);return t},t.prototype.fO=function(){1736==this.a.dc(this.W)&&1==this.a.$n(this.W)&&(new e.pg).dW(this.Pw,this.a,this.W,this.nd);var t=!1,n=!0;this.Fg=this.hr=-1;var r=this.a.D(this.W),i=new e.ha(0);i.Db(r);for(var a=this.a.Kb(this.W);-1!=a;a=this.a.Qb(a))for(var o=this.a.Za(a),s=0,u=this.a.Ha(a);s<u;s++)i.add(o),o=this.a.T(o);var c=this.a.ud.i,l=this.a.ud.Uf;this.a.xb.rc();var h=this.a.xb.va[0].i;for(i.Zd(0,r,(function(e,t){var n=c[l*e],r=c[l*t],i=h[2*n],a=h[2*r];return 0==(i=(n=h[2*n+1])<(r=h[2*r+1])?-1:n>r?1:i<a?-1:i>a?1:0)&&(i=(e=c[l*e+3])<(t=c[l*t+3])?-1:e==t?0:1),i})),this.hr=this.a.Kd(),this.ve=new e.Ap,this.AB=this.ve.Th(0),this.ve.vn(r),a=0;a<r;a++)o=i.get(a),s=this.ve.addElement(this.AB,o),this.a.Qa(o,this.hr,s);for(this.Fg=this.a.Kd(),this.Kl=-1,this.MD()&&(t=!0);n;){n=!1,r=0,i=!1;do{i=!1,this.zo=-1,u=0,a=new e.b,s=new e.b;for(var f=this.ve.sc(this.AB);-1!=f;)o=this.ve.getData(f),-1!=this.zo?(this.a.Hc(o,s),a.qb(s)?u++:(a.K(s),this.Kl=f,0<u&&(o=this.aE())&&(i=!0,-1!=this.Kl&&(o=this.ve.getData(this.Kl),this.a.Hc(o,a))),this.zo=f=this.Kl,u=0)):(this.zo=f,this.a.Hc(this.ve.getData(f),a),u=0),-1!=f&&(f=this.ve.hb(f));if(this.Kl=-1,0<u&&(o=this.aE())&&(i=!0),10<r++)throw e.f.za();i&&this.ON(),this.MD()&&(i=!0),n=n||i&&!1,t=t||i}while(i)}return this.a.Xd(this.hr),this.a.Xd(this.Fg),e.dN.U(this.a,this.W,this.ve,this.Pw)||t},t.prototype.Wu=function(e,t){return this.a.T(t)!=e},t.prototype.LN=function(e,t,n,r,i,a,o,s){if(r==o)return this.fk(n),this.fk(a),!1;var u=this.a.Na(n,this.Fg),c=this.a.Na(i,this.Fg),l=this.a.Na(a,this.Fg),h=this.a.Na(s,this.Fg),f=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,f[0]=u,n[1]=0,f[1]=c,n[2]=1,f[2]=l,n[3]=1,f[3]=h,u=1;4>u;u++){for(c=f[u],l=n[u],h=u-1;0<=h&&f[h]>c;)f[h+1]=f[h],n[h+1]=n[h],h--;f[h+1]=c,n[h+1]=l}return f=0,0!=n[0]&&(f|=1),0!=n[1]&&(f|=2),0!=n[2]&&(f|=4),0!=n[3]&&(f|=8),(5==f||10==f)&&(e==t?e?(this.a.Dc(s,r),this.a.Ec(r,s),this.a.Dc(i,o),this.a.Ec(o,i)):(this.a.Ec(s,r),this.a.Dc(r,s),this.a.Ec(i,o),this.a.Dc(o,i)):e?(this.a.Ec(r,a),this.a.Dc(a,r),this.a.Ec(o,i),this.a.Dc(i,o)):(this.a.Dc(r,a),this.a.Ec(a,r),this.a.Dc(o,i),this.a.Ec(i,o)),!0)},t.prototype.eE=function(e,t,n,r,i,a){this.r0?this.dO():this.cO(e,t,n,r,i,a)},t.prototype.dO=function(){throw e.f.Y("not implemented.")},t.prototype.cO=function(e,t,n,r,i,a){if(e!=t)e?(this.a.Dc(n,i),this.a.Ec(i,n),this.a.Dc(a,r),this.a.Ec(r,a),this.On(i,n),this.Bi(i,!0),this.a.ui(i,!0),this.fk(n),this.On(a,r),this.Bi(a,!0),this.a.ui(a,!1)):(this.a.Dc(i,n),this.a.Ec(n,i),this.a.Dc(r,a),this.a.Ec(a,r),this.On(i,n),this.Bi(i,!0),this.a.ui(i,!1),this.fk(n),this.On(a,r),this.Bi(a,!0),this.a.ui(a,!0)),this.fk(r);else{var o=e?n:r,s=t?i:a;for(e=e?r:n,t=t?a:i,i=!1,this.a.Dc(o,s),this.a.Dc(s,o),this.a.Ec(e,t),this.a.Ec(t,e),a=t;a!=s;)n=this.a.Ma(a),r=this.a.T(a),this.a.Ec(a,r),this.a.Dc(a,n),i=i||a==o,a=r;i||(n=this.a.Ma(s),r=this.a.T(s),this.a.Ec(s,r),this.a.Dc(s,n)),this.On(s,o),this.Bi(s,!0),this.a.ui(s,!1),this.fk(o),this.On(t,e),this.Bi(t,!0),this.a.ui(t,!1),this.fk(e)}},t.prototype.MD=function(){for(var e=!1,t=this.a.Kb(this.W);-1!=t;){for(var n=this.a.Za(t),r=0,i=this.a.Ha(t);r<i&&1<i;){var a=this.a.Ma(n),o=this.a.T(n);this.a.wq(a,o)?(e=!0,this.Bi(n,!1),this.a.pd(n,!0),this.Bi(o,!1),this.a.pd(o,!0),n=a,r=0,i=this.a.Ha(t)):(n=o,r++)}if(2>this.a.Ha(t)){for(e=this.a.Za(t),r=0,i=this.a.Ha(t);r<i;r++)this.Bi(e,!1),e=this.a.T(e);t=this.a.sr(t),e=!0}else t=this.a.Qb(t)}return e},t.prototype.Lp=function(e){for(var t=!1;;){var n=this.a.T(e),r=this.a.Ma(e);if(n==e)return this.Bi(e,!0),this.a.ui(e,!1),!0;if(!this.a.wq(n,r))break;if(t=!0,this.fk(r),this.fk(n),this.Bi(e,!0),this.a.ui(e,!1),this.On(n,r),this.Bi(n,!0),this.a.ui(n,!0),n==r)break;e=r}return t},t.prototype.ON=function(){for(var e=0,t=this.ve.sc(this.ve.re);-1!=t;t=this.ve.hb(t)){var n=this.ve.getData(t);this.a.hj(n,-1)}for(var r=0,i=this.a.Kb(this.W);-1!=i;)if(-1==(t=this.a.Za(i))||-1!=this.a.cd(t))n=i,i=this.a.Qb(i),this.a.tr(n);else{this.a.hj(t,i);var a=1;for(n=this.a.T(t);n!=t;n=this.a.T(n))this.a.hj(n,i),a++;this.a.sp(i,!1),this.a.Wj(i,a),this.a.dh(i,this.a.Ma(t)),r+=a,e++,i=this.a.Qb(i)}for(t=this.ve.sc(this.ve.re);-1!=t;t=this.ve.hb(t))n=this.ve.getData(t),-1==this.a.cd(n)&&(i=this.a.$G(this.W,n,n,null),r+=this.a.Ha(i),e++);for(this.a.bm(this.W,e),this.a.Uj(this.W,r),e=0,r=this.a.ld;-1!=r;r=this.a.Ae(r))e+=this.a.D(r);this.a.JC(e)},t.prototype.om=function(e){for(var t=0,n=this.De.size-1;t<n;t++)if(-1!=this.De.get(e=(e+1)%this.De.size))return e;return-1},t.prototype.On=function(e,t){var n=this.a.Na(t,this.hr),r=this.a.Na(t,this.Fg);this.a.UC(e,t),this.a.Qa(t,this.hr,n),this.a.Qa(t,this.Fg,r)},t.prototype.fk=function(e){var t=this.a.Na(e,this.Fg);-1!=t&&(this.De.set(t,-1),this.a.Qa(e,this.Fg,-1))},t.U=function(e,n,r,i,a){var o=new t;return o.a=e,o.W=n,o.gB=r,o.Pw=i,o.nd=a,o.fO()},t.prototype.xN=function(t,n){var r=this.bi.get(t),i=new e.b;this.a.Hc(r,i),r=new e.b;var a=this.bi.get(n);return this.a.Hc(a,r),i.qb(r)?0:(a=this.ht.get(t),t=new e.b,this.a.Hc(a,t),a=this.ht.get(n),n=new e.b,this.a.Hc(a,n),(a=new e.b).tc(i,t),(i=new e.b).tc(r,n),e.b.Wr(a,i))},t}();e.Kn=t}(J||(J={})),function(e){var t;(t=e.gN||(e.gN={}))[t.Local=0]="Local",t[t.Geographic=1]="Geographic",t[t.Projected=2]="Projected",t[t.Image=3]="Image",t[t.Unknown=4]="Unknown",function(e){e[e.Integer32=0]="Integer32",e[e.Integer64=1]="Integer64",e[e.FloatingPoint=2]="FloatingPoint"}(e.aN||(e.aN={}));var n=function(){function t(){this.Ip="",this.Zu=null,this.jg=0,this.NI=this.$o=-1,this.Dh=null}return t.prototype.xc=function(){return this.jg},t.prototype.xs=function(){return 0},t.prototype.ys=function(){return 0},t.prototype.zs=function(){return 0},t.prototype.ws=function(){return 0},t.prototype.Rz=function(){return 57295779513.082306},t.prototype.Sz=function(){return 1e3},t.prototype.Qz=function(){return 1e3},t.prototype.Is=function(){return 1},t.prototype.ce=function(){var t=.001;return 0!=this.jg?t=e.Vr.OR(this.jg):null!=this.Dh&&(t=e.FD.PR(this.Dh)),t},t.prototype.jA=function(){return this.Dh},t.prototype.Ld=function(){return 0!=this.jg?e.Uc.hh(e.Vr.yz(this.jg)):null!=this.Dh?e.FD.QR(this.Dh):void 0},t.Fb=function(t){if(0!=t.jg){if(!0===e.Vr.sU(t.jg))return 1;if(!0===e.Vr.vU(t.jg))return 2}return 4},t.prototype.Gs=function(){var t=this.xc();return-1!=this.$o?this.$o:(this.$o=e.Vr.OL(t),-1!=this.$o?this.$o:t)},t.create=function(n){if(0>=n)throw e.f.I("Invalid or unsupported wkid: "+n);var r=new t;return r.jg=n,r},t.AQ=function(n){if(null==n||0==n.length)throw e.f.I("Cannot create SpatialReference from null or empty text.");var r=new t;return r.Dh=n,r},t.prototype.Ib=function(e){return this==e||null!=e&&this.constructor==e.constructor&&this.jg==e.jg&&(0!=this.jg||this.Dh===e.Dh)},t.kS=function(t,n){var r=Math.PI/180,i=new e.da;return e.bM.nS(t.w().x*r,t.w().y*r,n.w().x*r,n.w().y*r,i),i.j},t.prototype.toString=function(){return"[ tol: "+this.co()+"; wkid: "+this.xc()+"; wkt: "+this.jA()+"]"},t.prototype.fc=function(){if(""!==this.Ip)return this.Ip;var e=this.toString();if(Array.prototype.reduce)return this.Ip="S"+e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0);var t=0;if(0===e.length)return"";for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return this.Ip="S"+t},t.prototype.co=function(){return this.ce(0)},t.prototype.mh=function(){return null!==this.Zu?this.Zu:this.Zu=e.Nu.JQ(this)},t.z0=!0,t.nv=2147483645,t.ov=9007199254740990,t}();e.je=n}(J||(J={})),function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Pi=null,n.kV=null,n.Ro=new e.BD,n.Yo=null,n.Rw=null,n}return Y(n,t),n.JQ=function(t){var r=new n;if(r.jg=t.jg,r.$o=t.$o,r.NI=t.NI,r.Dh=t.Dh,""!==r.Dh&&null!==r.Dh){t=n.rN(r.Dh);var i=n.pN(r.Dh);r.Ro.By(t,i,e.Ou.Integer64),r.Iy(t),r.Ly(i),r.jg=t.Gs()}else t=n.qN(r.jg),r.Iy(t),r.Ly(null),r.Ro.By(t,null,e.Ou.Integer64);return r},n.prototype.ce=function(e){return this.Ro.co(e)},n.pN=function(t){if(0>=t.length)throw e.f.I();var r=null;try{r=e.uD.fromString(t)}catch(i){r=null}return null==r?null:n.LD(r,!0)},n.prototype.Iy=function(e){this.Dd=e,this.Yo=this.Dd.Ld()},n.prototype.Ly=function(e){this.zI=e,this.kV=null!=this.zI?this.zI.Yo:null},n.prototype.Cc=function(){return 0!=this.Fb()&&3!=this.Fb()&&this.Dd.Cc()},n.prototype.uH=function(){return 0!=this.Fb()&&(3==this.Fb()?this.Pi.kk().Cc():this.Dd.Cc())},n.prototype.wg=function(){return null!=this.Dd?this.Dd.Ze:null},n.prototype.Am=function(){return this.Dd.Am()},n.prototype.Sd=function(){return this.Dd.Sd()},n.prototype.oh=function(){return null!=this.Dd?this.Dd.Zw:NaN},n.prototype.Cm=function(){return this.Dd.Cm()},n.prototype.Cs=function(){return this.Dd.Cs()},n.prototype.xj=function(){return this.Dd.xj()},n.prototype.FT=function(t){return e.vD.vz(this.Dd,t.Dd)},n.prototype.sk=function(){return this.Dd.sk()},n.prototype.Bs=function(){return this.Dd.Bs()},n.prototype.Wh=function(){return 3==this.Fb()?this.Pi.kk().Wh():this.Dd.Wh()},n.prototype.nh=function(){if(!this.Cc())throw e.f.I("!isPannable()");var t=new e.g;return this.Dd.nh(t),t},n.prototype.be=function(){if(!this.Cc())throw e.f.I("!isPannable()");return this.Dd.Lo},n.prototype.XS=function(){if(!this.Cc())throw e.f.I("!isPannable()");var t=new e.g;return this.Dd.WS(t),t},n.prototype.Xv=function(){if(!this.Cc())throw e.f.I("!isPannable()");return this.Dd.Xv()},n.prototype.Wv=function(){if(!this.Cc())throw e.f.I("!isPannable()");return this.Dd.Wv()},n.prototype.Ds=function(){return null!=this.Pi?this.Pi.kk().Ds():this.Dd.Ds()},n.prototype.aS=function(){return this.Dd.Pv()},n.prototype.FX=function(e){e.assign(this.Ro)},n.prototype.qk=function(){return this.Yo.getUnitFactor()},n.prototype.dA=function(e){return this.Ro.dA(e)},n.prototype.hc=function(){var t=this.Fb();if(1==t)return this;if(3==t)return this.Pi.kk().hc();if(0==t)throw e.f.Y("invalid call");if(4===t)throw e.f.Y("invalid call");if(null!==this.Rw)return this.Rw;if(null==(t=this.wg().getGeogcs()))throw e.f.za();return this.Rw=n.OF(t,this.Ro.Is())},n.OF=function(t,r){if(null==t)throw e.f.I("null pointer.");var i=new n;return t=n.Uu(t,!0),i.Ro.By(t,null,r),i.Iy(t),i.Ly(null),i.jg=t.Gs(),i},n.prototype.Fb=function(){var t=this.wg();if(null!=t)switch(t.getType()){case e.Pc.PE_TYPE_GEOGCS:return 1;case e.Pc.PE_TYPE_PROJCS:return 2}return 4},n.prototype.bA=function(t){var n=new e.b;return this.Dd.bA(t,n),n},n.prototype.Pv=function(){return this.Dd.Pv()},n.Uu=function(t,r){var i=t.getCode();if(0>=i&&0<(i=e.zf.getCode(t))){if(null==(t=e.zf.coordsys(i)))throw e.f.I("Text to wkid mapping had failed: "+i);return n.Uu(t,r)}return r&&0<i&&(r=n.Yx[i])?r:(r=e.Ab.ew(t,i,!1),n.rL[r]||(t=0>=i?t:e.zf.coordsys(i),t=new e.vD(t),n.rL[r]=t,0<i&&(n.Yx[i]=t),t))},n.qN=function(t){if(0>=t)throw e.f.I("Invalid or unsupported wkid: "+t);var r=n.Yx[t];if(null!=r)return r;if(null==(r=e.zf.coordsys(t)))throw e.f.I("Invalid or unsupported wkid: "+t);return(r=n.Uu(r,!1)).Gs()!=t&&(n.Yx[t]=r),r},n.rN=function(t){if(null==t||void 0===t||0==t.length)throw e.f.I("Cannot create SpatialReference from null or empty text.");var r=null;try{r=e.zf.fromString(e.Pc.PE_TYPE_COORDSYS,t)}catch(i){throw e.f.I("Cannot create SpatialReference from text. "+i.message)}if(null===r)throw e.f.I("Cannot create SpatialReference from text. ");return n.Uu(r,!0)},n.LD=function(t,r){var i,a=t.getCode();if(0>=a&&0<(a=e.zf.getCode(t))){if(null===(a=e.zf.vertcs(a)))throw e.f.I();return n.LD(a,r)}if(r&&0<a&&(r=n.qL[a]))return r;if(t=e.Ab.ew(t,a,!1),r=n.sL[t])return r;if(0>=a||(i=e.zf.vertcs(a)),null===i)throw e.f.I();return i=new e.XM(i),n.sL[t]=i,0<a&&(n.qL[a]=i),i},n.iJ=function(t,n){if(null===n||n.u())return null;var r=new e.g;if(null!==n&&1!=t.Fb()){var i=t.hc(),a=i.wg();t=e.Ur.os(t,i,null,null),(n=e.Rr.local().U(n,t,null)).s(r)}else a=t.wg(),n.s(r);return n=a.getPrimem().getLongitude(),a=a.getUnit().getUnitFactor(),new e.sD(r.o,r.A,r.v,r.B,n,a)},n.XD=function(e){var t={name:"",steps:[],_pt:null,_entry:null},n=0;for(e=e.getEntries();n<e.length;n++){var r=e[n],i={l0:!1,N0:"",M0:-1,geogtran:null};i.isInverse=0!==r.getDirection();var a=r.getGeogtran().getCode();-1<a?i.wkid=a:i.wkt=r.getGeogtran().toString(),t.steps.push(i)}return t},n.nT=function(t,r,i,a){return void 0===i&&(i=null),i=n.iJ(a,i),t=e.Dp.getGTlist(t.wg(),r.wg(),2,e.Dp.PE_GTLIST_OPTS_COMMON,i,1),r=null,t&&0<t.length&&(r=this.XD(t[0]),e.ry.destroy(t)),null!==i&&i.destroy(),r},n.oT=function(t,r,i,a){var o;if(void 0===i&&(i=null),void 0===a&&(a=null),void 0===o&&(o=30),i=n.iJ(a,i),t=e.Dp.getGTlist(t.wg(),r.wg(),2,e.Dp.PE_GTLIST_OPTS_COMMON,i,o),r=[],t&&0<t.length){for(o=0;o<t.length;o++)r.push(this.XD(t[o]));e.ry.destroy(t)}return null!==i&&i.destroy(),r},n.Yx={},n.rL={},n.qL={},n.sL={},n}(e.je);e.Nu=t}(J||(J={})),function(e){var t,n;(n=t=e.Ou||(e.Ou={}))[n.Integer32=0]="Integer32",n[n.Integer64=1]="Integer64",n[n.FloatingPoint=2]="FloatingPoint";var r=function(){function n(){this.Jp()}return n.prototype.assign=function(e){this.Bl=e.Bl,this.Cl=e.Cl,this.$i=e.$i,this.Nw=e.Nw,this.jn=e.jn,this.Mw=e.Mw,this.jx=e.jx,this.Pk=e.Pk,this.er=e.er,this.dr=e.dr,this.dn=e.dn},n.prototype.xs=function(){return this.Bl},n.prototype.ys=function(){return this.Cl},n.prototype.zs=function(){return this.Nw},n.prototype.ws=function(){return this.Mw},n.prototype.Rz=function(){return this.$i},n.prototype.Sz=function(){return this.jn},n.prototype.Qz=function(){return this.jx},n.prototype.Is=function(){return this.dn},n.prototype.Jp=function(){this.Cl=this.Bl=0,this.$i=1,this.Nw=0,this.jn=1,this.Mw=0,this.jx=1,this.dr=this.er=this.Pk=2220446049250313e-29,this.dn=t.FloatingPoint},n.prototype.By=function(n,r,i){if(this.Jp(),this.dn=i,i!=t.FloatingPoint){var a=new e.g;n.vS(a),this.Bl=a.o,this.Cl=a.A}else this.Cl=this.Bl=-17976931348623157e292;(a=n.Ze.getType())==e.Pc.PE_TYPE_GEOGCS?(a=(i==t.Integer64?1e-9:1/18e5)*n.Sd(),this.$i=1/a):a==e.Pc.PE_TYPE_PROJCS&&(a=(i==t.Integer64?1e-4:.001)*n.Am(),this.$i=1/a),this.jn=null!=r?1/(a=(i==t.Integer32?.001:1e-4)*r.xI):1e4,this.jx=1e4,this.gO(),this.Pk=n.Zw,this.er=null!=r?.001*r.xI:.001,this.dr=2220446049250313e-29},n.prototype.gO=function(){if(this.dn!=t.FloatingPoint){var n=this.dn==t.Integer64?e.je.ov:e.je.nv,r=n/this.$i,i=this.Bl+r,a=e.L.truncate((i-this.Bl)*this.$i);a>n&&(this.$i=n/(i-this.Bl)),(a=e.L.truncate(((r=this.Cl+r)-this.Cl)*this.$i))>n&&(this.$i=n/(r-this.Cl))}},n.prototype.IC=function(e){switch(e){case 0:this.Pk=void 0;case 1:this.er=void 0;case 2:this.dr=void 0}},n.prototype.co=function(e){switch(e){case 0:return this.Pk;case 1:return this.er;case 2:return this.dr}return 0},n.prototype.uT=function(){var n=new e.g;switch(this.Is()){case t.Integer32:var r=e.je.nv/this.Rz();n.H(this.xs(),this.ys(),this.xs()+r,this.ys()+r);break;case t.Integer64:r=e.je.ov/this.Rz(),n.H(this.xs(),this.ys(),this.xs()+r,this.ys()+r);break;case t.FloatingPoint:n.H(-17976931348623157e292,-17976931348623157e292,17976931348623157e292,17976931348623157e292);break;default:throw e.f.Y("internal error")}return n},n.prototype.wT=function(){var n=new e.uc;switch(this.Is()){case t.Integer32:var r=e.je.nv/this.Sz();n.H(this.zs(),this.zs()+r);break;case t.Integer64:r=e.je.ov/this.Sz(),n.H(this.zs(),this.zs()+r);break;case t.FloatingPoint:n.H(-17976931348623157e292,17976931348623157e292);break;default:throw e.f.Y("internal error")}return n},n.prototype.PS=function(){var n=new e.uc;switch(this.Is()){case t.Integer32:var r=e.je.nv/this.Qz();n.H(this.ws(),this.ws()+r);break;case t.Integer64:r=e.je.ov/this.Qz(),n.H(this.ws(),this.ws()+r);break;case t.FloatingPoint:n.H(-17976931348623157e292,17976931348623157e292);break;default:throw e.f.Y("internal error")}return n},n.prototype.dA=function(e){if(this.dn==t.FloatingPoint)return 0;switch(e){case 0:return 1/this.$i;case 1:case 2:return 1/this.jn;default:return 0}},n.prototype.toString=function(){var e="SRPD [m_toleranceXY: "+this.Pk.toString();return(e=(e=(e=(e=(e=(e=(e=(e=(e=e+";m_falseX: "+this.Bl.toString())+";m_falseY: "+this.Cl.toString())+";m_unitsXY: "+this.$i.toString())+";m_falseZ: "+this.Nw.toString())+";m_unitsZ: "+this.jn.toString())+";m_falseM: "+this.Mw.toString())+";m_toleranceZ: "+this.er.toString())+";m_toleranceM: "+this.dr.toString())+";m_precision: "+this.dn.toString())+"] "},n}();e.BD=r}(J||(J={})),function(e){function t(e,t){return 89.99999<t?t=89.99999:-89.99999>t&&(t=-89.99999),t*=.017453292519943,[111319.49079327169*e,3189068.5*Math.log((1+Math.sin(t))/(1-Math.sin(t)))]}function n(e,t,n){return e=e/6378137*57.29577951308232,n?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]}function r(t,n,r){var i=t.Cf();if(33===t.F())n=n(i.Ce(),i.lf()),i.nb(n[0],n[1]);else if(197===t.F()){var a=n(t.Ms(),t.Os(),r);n=n(t.Ls(),t.Ns(),r),i.H(a[0],a[1],n[0],n[1])}else for(a=new e.b,t=0;t<i.D();t++){i.w(t,a);var o=n(a.x,a.y,r);a.ka(o[0],o[1]),i.nb(t,a)}return i}function i(e){return r(e,n,!0)}function a(e){return r(e,t,!0)}var o=Math.PI/180;e.cM=function(){function t(){}return t.bv=function(t){var n=Math.sqrt(.006694379990197414),r=Math.sin(t.y*o);return e.b.construct(6378137*t.x*o,3167719.6636462314*(r/(1-.006694379990197414*r*r)-1/(2*n)*Math.log((1-n*r)/(1+n*r))))},t.Ay=function(t,n,r,i){var a=1/298.257223563,s=Math.sin(r);r=Math.cos(r);var u=(1-a)*Math.tan(t),c=u*(t=1/Math.sqrt(1+u*u)),l=Math.atan2(u,r),h=(u=t*s)*u,f=1-h,p=272331606107.54688*f/40408299984661.45,d=1+p/16384*(4096+p*(p*(320-175*p)-768)),v=p/1024*(256+p*(p*(74-47*p)-128));p=i/(6356752.31424518*d);for(var y,b,g,m=2*Math.PI;1e-12<Math.abs(p-m);)g=Math.cos(2*l+p),m=p,p=i/(6356752.31424518*d)+v*(y=Math.sin(p))*(g+v/4*((b=Math.cos(p))*(2*g*g-1)-v/6*g*(4*y*y-3)*(4*g*g-3)));return i=c*y-t*b*r,f=a/16*f*(4+a*(4-3*f)),e.b.construct((n+(Math.atan2(y*s,t*b-c*y*r)-(1-f)*a*u*(p+f*y*(g+f*b*(2*g*g-1)))))/o,Math.atan2(c*b+t*y*r,(1-a)*Math.sqrt(h+i*i))/o)},t.UN=function(e,t,n,r){var i=1/298.257223563,a=r-t,o=Math.atan((1-i)*Math.tan(e)),s=Math.atan((1-i)*Math.tan(n)),u=Math.sin(o);o=Math.cos(o);var c=Math.sin(s);s=Math.cos(s);var l=a,h=1e3;do{var f=Math.sin(l),p=Math.cos(l),d=Math.sqrt(s*f*s*f+(o*c-u*s*p)*(o*c-u*s*p));if(0===d)return 0;p=u*c+o*s*p;var v=Math.atan2(d,p),y=o*s*f/d,b=1-y*y;f=p-2*u*c/b,isNaN(f)&&(f=0);var g=i/16*b*(4+i*(4-3*b)),m=l;l=a+(1-g)*i*y*(v+g*d*(f+g*p*(2*f*f-1)))}while(1e-12<Math.abs(l-m)&&0<--h);return 0===h?(u=r-t,{azimuth:Math.atan2(Math.sin(u)*Math.cos(n),Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(u)),geodesicDistance:6371008.771415059*Math.acos(Math.sin(e)*Math.sin(n)+Math.cos(e)*Math.cos(n)*Math.cos(r-t))}):(t=(e=272331606107.54688*b/40408299984661.45)/1024*(256+e*(e*(74-47*e)-128)),{azimuth:Math.atan2(s*Math.sin(l),o*c-u*s*Math.cos(l)),jS:6356752.31424518*(1+e/16384*(4096+e*(e*(320-175*e)-768)))*(v-t*d*(f+t/4*(p*(2*f*f-1)-t/6*f*(4*d*d-3)*(4*f*f-3)))),F0:Math.atan2(o*Math.sin(l),o*c*Math.cos(l)-u*s)})},t.vR=function(t){var n=t.hasAttribute(1),r=t.hasAttribute(2),i=[],a=t.$(),o=null,s=null;n&&(o=t.Va(1)),r&&(s=t.Va(2));for(var u=new e.b,c=0;c<a;c++){for(var l=t.ua(c),h=t.Ha(c),f=0,p=0,d=NaN,v=NaN,y=NaN,b=NaN,g=t.Lb(c),m=[],w=l;w<l+h;w++){t.w(w,u),b=y=NaN;var O=[u.x,u.y];n&&(y=o.get(w),O.push(y)),r&&(a=s.get(w),O.push(b)),w==l&&g&&(f=u.x,p=u.y,d=y,v=b),m.push(O)}!g||f==u.x&&p==u.y&&(!n||isNaN(d)&&isNaN(y)||d==y)&&(!r||isNaN(v)&&isNaN(b)||v==b)||m.push(m[0].slice(0)),i.push(m)}return i},t.Bz=function(e,n){e=t.vR(e),637.100877141506>n&&(n=637.100877141506);for(var r,i=[],a=0;a<e.length;a++){var s,u,c=e[a];i.push(r=[]),r.push([c[0][0],c[0][1]]);var l=c[0][0]*o,h=c[0][1]*o;for(s=0;s<c.length-1;s++){var f=c[s+1][0]*o,p=c[s+1][1]*o;if(l!==f||h!==p){f=(p=t.UN(h,l,p,f)).azimuth;var d=(p=p.jS)/n;if(1<d){for(u=1;u<=d-1;u++){var v=t.Ay(h,l,f,u*n);r.push([v.x,v.y])}u=t.Ay(h,l,f,(p+Math.floor(d-1)*n)/2),r.push([u.x,u.y])}h=t.Ay(h,l,f,p),r.push([h.x,h.y]),l=h.x*o,h=h.y*o}}}return{uK:i}},t.iS=function(n){for(var r=[],i=0;i<n.length;i++){var a=n[i];a=t.Bz(a,1e4),r.push(a)}n=[];for(var o=0;o<r.length;o++){a=r[o];var s=0;for(i=0;i<a.uK.length;i++){var u,c=a.uK[i],l=t.bv(e.b.construct(c[0][0],c[0][1])),h=t.bv(e.b.construct(c[c.length-1][0],c[c.length-1][1])),f=h.x*l.y-l.x*h.y;for(u=0;u<c.length-1;u++)l=t.bv(e.b.construct(c[u+1][0],c[u+1][1])),f+=(h=t.bv(e.b.construct(c[u][0],c[u][1]))).x*l.y-l.x*h.y;s+=f}n.push((s/=1)/-2)}return n},t}(),e.ab=function(){function t(){}return t.gC=function(e,n,r,i,a,o,s){t.RD[e.fc()]=n,0==isNaN(r)&&(t.YD[e.fc()]=r),0==isNaN(i)&&(t.lE[e.fc()]=i),0==isNaN(a)&&(t.KD[e.fc()]=a),t.ZD[e.fc()]=o,null!==s&&(t.$D[e.fc()]=s)},t.Dx=function(e,n,r){t.dE[e.fc()+"-"+n.fc()]=r},t.hc=function(n){if(null==(n=t.RD[n.fc()]))throw e.f.Me();return n},t.Sd=function(n){if(null==(n=t.YD[n.fc()]))throw e.f.Me();return n},t.dw=function(n){if(null==(n=t.lE[n.fc()]))throw e.f.Me();return n},t.Nv=function(n){if(null==(n=t.KD[n.fc()]))throw e.f.Me();return n},t.nh=function(n){if(null==(n=t.$D[n.fc()]))throw e.f.Me();return e.g.construct(n[0],n[1],n[2],n[3])},t.Cc=function(n){if(null==(n=t.ZD[n.fc()]))throw e.f.Me();return n},t.$g=function(n,r,i){if(r.Ib(i))return n;var a=t.dE[r.fc()+"-"+i.fc()];if(void 0!==a)return a(n,r,i);throw e.f.Me()},t.eu=function(){throw e.f.Me()},t.pS=function(){throw e.f.Me()},t.uX=function(){throw e.f.Me()},t.sk=function(){throw e.f.Me()},t.YX=function(){var t=e.je.create(102100),n=e.je.create(3857),r=e.je.create(4326);e.ab.gC(t,r,NaN,NaN,NaN,!1,null),e.ab.gC(r,r,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),e.ab.gC(n,r,NaN,NaN,NaN,!1,null),e.ab.Dx(t,r,i),e.ab.Dx(r,t,a),e.ab.Dx(n,r,i),e.ab.Dx(r,n,a)},t.RD=[],t.YD=[],t.lE=[],t.KD=[],t.ZD=[],t.$D=[],t.dE=[],t}()}(J||(J={})),J.ab.YX(),function(e){var t=function(){function t(e){this.i=new Int32Array(0),this.Ao=-1,this.Og=this.size=this.Jl=0,this.Uf=e}return t.prototype.jd=function(e){e<this.Jl?(this.i[e*this.Uf]=this.Ao,this.Ao=e):this.Jl--,this.size--},t.prototype.S=function(e,t){return this.i[e*this.Uf+t]},t.prototype.P=function(e,t,n){this.i[e*this.Uf+t]=n},t.prototype.Ke=function(){var t=this.Ao;if(-1==t){if(this.Jl==this.Og){if(2147483647<(t=0!=this.Og?e.L.truncate(3*(this.Og+1)/2):1)&&(t=2147483647),t==this.Og)throw e.f.Gd();this.lA(t)}t=this.Jl,this.Jl++}else this.Ao=this.i[t*this.Uf];this.size++;for(var n=t*this.Uf;n<t*this.Uf+this.Uf;n++)this.i[n]=-1;return t},t.prototype.Vl=function(t){var n=this.Ao;if(-1==n){if(this.Jl==this.Og){if(2147483647<(n=0!=this.Og?e.L.truncate(3*(this.Og+1)/2):1)&&(n=2147483647),n==this.Og)throw e.f.Gd();this.lA(n)}n=this.Jl,this.Jl++}else this.Ao=this.i[n*this.Uf];this.size++;for(var r=n*this.Uf,i=0;i<t.length;i++)this.i[r+i]=t[i];return n},t.prototype.rj=function(e){this.Ao=-1,this.size=this.Jl=0,e&&(this.i=null,this.Og=0)},t.prototype.Le=function(e){e>this.Og&&this.lA(e)},t.prototype.$x=function(e,t){e*=this.Uf,t*=this.Uf;for(var n=0;n<this.Uf;n++){var r=this.i[t+n];this.i[t+n]=this.i[e+n],this.i[e+n]=r}},t.prototype.PC=function(e,t,n){var r=this.i[this.Uf*t+n];this.i[this.Uf*t+n]=this.i[this.Uf*e+n],this.i[this.Uf*e+n]=r},t.f0=function(){return-2},t.g0=function(){return-3},t.xH=function(e){return 0<=e},t.prototype.lA=function(e){null==this.i&&(this.i=new Int32Array(0));var t=new Int32Array(this.Uf*e);t.set(this.i,0),this.i=t,this.Og=e},t}();e.ad=t}(J||(J={})),function(e){var t,n;(n=t||(t={}))[n.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",n[n.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",n[n.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",n[n.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var r=function(){function t(t){this.Ie=t,this.Fh=NaN,this.SH=new e.og,this.TH=new e.og,this.Us=new e.uc,this.Vs=new e.uc}return t.prototype.compare=function(e,t,n){if(e=e.ga(n),this.Ie.ZB(t,this.SH),this.Ie.ZB(e,this.TH),t=this.SH.get(),e=this.TH.get(),this.Us.H(t.ra,t.pa),this.Vs.H(e.ra,e.pa),this.Us.ja<this.Vs.fa)return-1;if(this.Us.fa>this.Vs.ja)return 1;var r=e.na==e.ma;if((n=t.na==t.ma)||r){if(n&&r)return 0;if(t.na==e.na&&t.ra==e.ra)return n?1:-1;if(t.ma==e.ma&&t.pa==e.pa)return n?-1:1}return(n=t.Te(this.Fh,this.Us.fa))==(r=e.Te(this.Fh,this.Vs.fa))&&((r=.5*((n=Math.min(t.ma,e.ma))+this.Fh))==this.Fh&&(r=n),n=t.Te(r,this.Us.fa),r=e.Te(r,this.Vs.fa)),n<r?-1:n>r?1:0},t.prototype.eL=function(e){this.Fh=e},t}(),i=function(){function t(t){this.Ya=t,this.LI=new e.og,this.Jf=new e.b,this.fB=new e.uc}return t.prototype.NY=function(e){this.Jf.K(e)},t.prototype.compare=function(e,t){return this.Ya.ZB(e.ga(t),this.LI),e=this.LI.get(),this.fB.H(e.ra,e.pa),this.Jf.x<this.fB.fa?-1:this.Jf.x>this.fB.ja?1:(e=e.Te(this.Jf.y,this.Jf.x),this.Jf.x<e?-1:this.Jf.x>e?1:0)},t}();t=function(){function t(){this.VH=this.Ji=this.Mi=this.WA=this.ro=this.Ee=this.Lc=this.ph=this.oe=null,this.Zo=this.Eg=-1,this.UH=!0,this.$A=!1,this.XA=NaN,this.Ti=new e.Od,this.kP=2147483647,this.jP=e.L.truncate(-2147483648),this.ig=this.he=this.Pl=this.Vq=this.Pm=this.Uq=this.wt=this.We=-1,this.sa=0}return t.prototype.dz=function(e){this.XA=e},t.prototype.mn=function(){null==this.oe&&(this.oe=new e.ad(8));var t=this.oe.Ke();return this.oe.P(t,1,0),t},t.prototype.PV=function(){null==this.Lc&&(this.Lc=new e.ad(8));var t=this.Lc.Ke();this.Lc.P(t,2,0),this.Lc.P(t,3,0);var n=this.Lc.Ke();return this.Lc.P(n,2,0),this.Lc.P(n,3,0),this.NK(t,n),this.NK(n,t),t},t.prototype.bJ=function(){null==this.Ee&&(this.Ee=new e.ad(8));var t=this.Ee.Ke();return this.Ee.P(t,2,0),t},t.prototype.wY=function(e,t){this.oe.P(e,7,t)},t.prototype.Cn=function(e,t){this.oe.P(e,2,t)},t.prototype.vY=function(e,t){this.oe.P(e,1,t)},t.prototype.OY=function(e,t){this.oe.P(e,3,t)},t.prototype.LY=function(e,t){this.oe.P(e,4,t)},t.prototype.wr=function(e,t){this.oe.P(e,5,t)},t.prototype.sS=function(e){return this.oe.S(e,5)},t.prototype.uY=function(e,t){this.oe.P(e,6,t)},t.prototype.mO=function(e,t){this.uY(t,e)},t.prototype.MK=function(e,t){this.Lc.P(e,1,t)},t.prototype.NK=function(e,t){this.Lc.P(e,4,t)},t.prototype.dm=function(e,t){this.Lc.P(e,5,t)},t.prototype.cm=function(e,t){this.Lc.P(e,6,t)},t.prototype.CY=function(e,t){this.Lc.P(e,2,t)},t.prototype.Jx=function(e,t){this.Lc.P(e,3,t)},t.prototype.xG=function(e){return this.Lc.S(e,3)},t.prototype.qu=function(e,t){this.Lc.P(e,7,t)},t.prototype.NL=function(e,t){if(-1!=this.ym(e))for(t=t?-1:e,e=this.ym(e);-1!=e;e=this.Rs(e))this.a.Qa(this.zj(e),this.Vq,t)},t.prototype.dy=function(e,t){-1!=e&&(this.NL(e,t),this.NL(this.wa(e),t))},t.prototype.ou=function(e,t){this.Ee.P(e,1,t)},t.prototype.bh=function(e,t){this.Ee.P(e,2,t)},t.prototype.zn=function(e,t){this.Ee.P(e,3,t),this.sY(e,this.rS(t)),this.rY(t,e)},t.prototype.rY=function(e,t){this.Ee.P(e,4,t)},t.prototype.sY=function(e,t){this.Ee.P(e,5,t)},t.prototype.HK=function(e,t){this.Ee.P(e,6,t)},t.prototype.FK=function(e,t){this.Ee.P(e,7,t)},t.prototype.EK=function(e,t){this.ro.write(e,t)},t.prototype.GK=function(e,t){this.WA.write(e,t)},t.prototype.TZ=function(t){var n=0,r=0,i=this.nG(t),a=new e.b,o=new e.b,s=new e.b;this.Es(i,a),o.K(a);var u=i;do{this.xm(u,s),r+=e.b.vb(o,s),this.jf(this.wa(u))!=t&&(n+=(s.x-a.x-(o.x-a.x))*(s.y-a.y+(o.y-a.y))*.5),o.K(s),u=this.kc(u)}while(u!=i);this.ro.write(t,n),this.WA.write(t,r)},t.prototype.gW=function(t,n){var a=new r(this),o=new e.bk;o.Le(e.L.truncate(this.sa/2)),o.kp(a);for(var s=new e.ha(0),u=this.ih(),c=null,l=0,h=new e.b,f=this.We;-1!=f;f=this.$f(f)){if(0==(255&++l)&&null!=n&&!n.progress(-1,-1))throw e.f.ED();var p=this.Re(f);if(-1!=p){if(s.Gh(0),!this.PZ(o,u,s,p)){this.w(f,h),a.eL(h.y);var d=p;do{var v=this.Cb(d,u);-1!=v&&(o.zd(v,-1),this.Jb(d,u,-2)),d=this.kc(this.wa(d))}while(p!=d);d=p;do{-1==(v=this.Cb(d,u))&&(v=o.addElement(d,-1),s.add(v)),d=this.kc(this.wa(d))}while(p!=d)}for(p=s.size-1;0<=p;p--)v=s.get(p),d=o.ga(v),this.Jb(this.wa(d),u,v),this.fW(o,v,t)}else-1==this.Iz(f)&&(null==c&&(c=new i(this)),this.w(f,h),c.NY(h),d=o.nY(c),p=this.Pl,-1!=d&&(v=o.ga(d),this.jf(v)==this.jf(this.wa(v))&&(v=this.zG(o,d)),-1!=v&&(p=this.jf(v))),this.mO(p,f))}this.Uh(u)},t.prototype.fW=function(e,t,n){var r=e.ga(t),i=this.jf(r);if(-1==this.Yn(i)){var a=this.zG(e,t),o=this.wa(r),s=this.jf(o);this.eq(i),this.eq(s);var u=this.Yn(i),c=this.Yn(s);if(-1==a&&-1==u&&(s==i?(this.zn(s,this.Pl),u=c=this.Pl):(-1==c&&(this.zn(s,this.Pl),c=this.Pl),this.zn(i,s),u=s)),-1!=a){var l=this.jf(a);-1==c&&(0>=this.eq(l)?(c=this.Yn(l),this.zn(s,c)):(this.zn(s,l),c=l),s==i&&(u=c))}-1==u&&this.QZ(i,s),0==n?this.AX(e,t,r,a,i,s):5==n?this.BX(e,t,r,o,i,s):4==n&&this.zX(r,a,i,s)}},t.prototype.AX=function(e,t,n,r,i,a){var o=this.mk(i);if(-1!=r){var s=this.mk(a),u=this.mk(this.jf(r));r=o&s&u,u^=u&this.lh(n),0!=(u|=r)&&(this.bh(a,s|u),this.bh(i,u|o),o=o||u)}for(t=e.hb(t);-1!=t&&(r=e.ga(t),n=this.jf(this.wa(r)),i=this.mk(n),a=this.lh(r),s=this.jf(r),r=i&(u=this.mk(s))&o,o^=o&a,0!=(o|=r));t=e.hb(t))this.bh(n,i|o),this.bh(s,u|o)},t.prototype.BX=function(t,n,r,i,a,o){if(a!=o){r=this.Cb(r,this.ig),r+=this.Cb(i,this.ig),i=0;var s=new e.ha(0),u=new e.ha(0);u.add(0);for(var c=t.sc(-1);c!=n;c=t.hb(c)){var l=t.ga(c),h=this.wa(l),f=this.jf(l),p=this.jf(h);if(f!=p){if(l=this.Cb(l,this.ig),i+=l+=this.Cb(h,this.ig),h=!1,0!=s.size&&s.Gc()==p&&(u.Rf(),s.Rf(),h=!0),-1==this.Yn(p))throw e.f.za();h&&this.Yn(p)==f||(u.add(i),s.add(f))}}i+=r,0!=s.size&&s.Gc()==o&&(u.Rf(),s.Rf()),0!=i?0==u.Gc()&&(t=this.Fa(t=this.a.ld),this.bh(a,t)):0!=u.Gc()&&(t=this.Fa(t=this.a.ld),this.bh(a,t))}},t.prototype.zX=function(e,t,n,r){var i=this.Fa(this.a.ld);if(-1==t)this.bh(r,this.Zo),0!=(1&(e=this.Cb(e,this.Eg)))?this.bh(n,i):this.bh(n,this.Zo);else{var a=this.mk(r);0==a?(a=this.mk(this.jf(t)),this.bh(r,a),0!=(1&(e=this.Cb(e,this.Eg)))?this.bh(n,a==i?this.Zo:i):this.bh(n,a)):0!=(1&(e=this.Cb(e,this.Eg)))?this.bh(n,a==i?this.Zo:i):this.bh(n,a)}},t.prototype.PZ=function(e,t,n,r){var i=r,a=-1,o=-1,s=0;do{if(2==s)return!1;var u=this.Cb(i,t);if(-1!=u){if(-1!=a)return!1;a=u}else{if(-1!=o)return!1;o=i}s++,i=this.kc(this.wa(i))}while(r!=i);return-1!=o&&-1!=a&&(this.Jb(e.ga(a),t,-2),e.Tj(a,o),n.add(a),!0)},t.prototype.QZ=function(e,t){var n=this.eq(e);if(0!=n){var r=this.eq(t);(0<n&&0>r||0>n&&0<r||-1!=(t=this.Yn(t)))&&this.zn(e,t)}},t.prototype.FQ=function(t,n){this.Vq=this.a.Kd();for(var r=0,i=n.size;r<i;r++){var a=n.get(r),o=this.a.Na(a,this.Pm),s=this.a.Zf(this.a.cd(a)),u=this.a.dc(s);if(e.R.Bc(u)){var c=this.a.T(a);if(-1!=c){var l=this.a.Na(c,this.Pm);if(o!=l){var h=this.PV(),f=this.wa(h),p=this.ph.Ke();this.ph.P(p,0,a),this.ph.P(p,1,-1),this.qu(h,p),this.MK(h,o),-1==(p=this.Re(o))?(this.Cn(o,h),this.dm(h,f),this.cm(f,h)):(o=this.ze(p),this.dm(p,f),this.cm(f,p),this.cm(o,h),this.dm(h,o)),this.MK(f,l),-1==(o=this.Re(l))?(this.Cn(l,f),this.cm(h,f),this.dm(f,h)):(l=this.ze(o),this.dm(o,h),this.cm(h,o),this.cm(l,f),this.dm(f,l)),s=this.Fa(s),0==t?(this.Jb(f,this.he,0),this.Jb(h,this.he,1736==u?s:0)):5==t?(l=new e.b,this.a.w(a,l),a=new e.b,this.a.w(c,a),o=c=0,0>l.compare(a)?c=1:o=-1,this.Jb(f,this.he,0),this.Jb(h,this.he,0),this.Jb(h,this.ig,c),this.Jb(f,this.ig,o)):7==t?(this.Jb(f,this.he,this.Zo),this.Jb(h,this.he,1736==u?s:0)):4==t&&(this.Jb(f,this.he,0),this.Jb(h,this.he,0),this.Jb(h,this.Eg,1),this.Jb(f,this.Eg,1)),this.Jx(h,s|(u=1736==u?this.jP:0)),this.Jx(f,s|u)}}}}},t.prototype.nV=function(e,t){var n=this.ym(t);if(-1!=n){var r=this.ym(e);this.ph.P(n,1,r),this.qu(e,n),this.qu(t,-1)}e=this.wa(e),t=this.wa(t),-1!=(n=this.ym(t))&&(r=this.ym(e),this.ph.P(n,1,r),this.qu(e,n),this.qu(t,-1))},t.prototype.nZ=function(t){function n(e,t){return i.RP(e,t)}var r=new e.ha(0);r.Db(10);for(var i=this,a=this.We;-1!=a;a=this.$f(a)){r.clear(!1);var o=this.Re(a);if(-1!=o){var s=o;do{r.add(s),s=this.kc(this.wa(s))}while(s!=o);if(1<r.size){if(s=!0,2<r.size)r.Zd(0,r.size,n),r.add(r.get(0));else if(0<this.QP(r.get(0),r.get(1))){var u=r.get(0);r.set(0,r.get(1)),r.set(1,u)}else s=!1;for(var c=u=r.get(0),l=this.Df(c),h=this.wa(c),f=-1,p=1,d=r.size;p<d;p++){var v=r.get(p),y=this.wa(v),b=this.pk(y);if(b==l&&v!=c){if(0==t)f=this.xG(c)|this.xG(v),this.Jx(c,f),this.Jx(h,f),this.Jb(c,this.he,this.Cb(c,this.he)|this.Cb(v,this.he)),this.Jb(h,this.he,this.Cb(h,this.he)|this.Cb(y,this.he));else if(-1!=this.ig)f=this.Cb(c,this.ig)+this.Cb(v,this.ig),y=this.Cb(h,this.ig)+this.Cb(y,this.ig),this.Jb(c,this.ig,f),this.Jb(h,this.ig,y);else{if(7==t)return void(this.Ti=new e.Od(5,a,-1));-1!=this.Eg&&(f=this.Cb(c,this.Eg)+this.Cb(v,this.Eg),y=this.Cb(h,this.Eg)+this.Cb(y,this.Eg),this.Jb(c,this.Eg,f),this.Jb(h,this.Eg,y))}this.nV(c,v),this.pz(v),f=c,r.set(p,-1),v==u&&(r.set(0,-1),u=-1)}else this.dy(f,!1),f=-1,c=v,l=b,h=y}if(this.dy(f,!1),f=-1,s){for(u=-1,p=0,d=r.size;p<d;p++)if(-1!=(v=r.get(p)))if(-1==u)c=u=v,l=this.Df(c),h=this.wa(c);else if(v!=c&&(y=this.wa(v),b=this.pk(y),this.cm(h,v),this.dm(v,h),c=v,l=b,h=y,7==t&&(this.Cb(v,this.he)|this.Cb(this.ze(v),this.he))==(1|this.Zo)))return void(this.Ti=new e.Od(5,a,-1));this.Cn(a,u)}else{for(u=-1,p=0,d=r.size;p<d;p++)if(-1!=(v=r.get(p))){u=v;break}o!=u&&this.Cn(a,u)}}}}},t.prototype.gP=function(){for(var t=-1,n=this.ih(),r=this.We;-1!=r;r=this.$f(r)){var i=this.Re(r);if(-1!=i){var a=i;do{if(1!=this.Cb(a,n)){var o=this.bJ();this.ou(o,a),this.FK(o,t),-1!=t&&this.HK(t,o),t=o;var s=0,u=a;do{s|=this.Cb(u,this.he),this.CY(u,o),this.Jb(u,n,1),u=this.kc(u)}while(u!=a);this.bh(o,s)}a=this.kc(this.wa(a))}while(a!=i)}}o=this.bJ(),this.ou(o,-1),this.FK(o,t),-1!=t&&this.HK(t,o),this.Pl=o,this.ro=e.ie.Af(this.Ee.size,NaN),this.WA=e.ie.Af(this.Ee.size,NaN),this.EK(this.Pl,1/0),this.GK(this.Pl,1/0),this.Uh(n)},t.prototype.FS=function(e,t,n){if(-1==(t=-1!=t?t:this.Re(e)))return-1;for(e=t;;){if(1!=this.Cb(t,n))return t;if((t=this.kc(this.wa(t)))==e)return-1}},t.prototype.dY=function(){for(var e=this.ih(),t=this.We;-1!=t;t=this.$f(t))for(var n=-1;;){var r=this.FS(t,n,e);if(-1==r)break;n=this.kc(this.wa(r));for(var i=r;;){var a=this.kc(i),o=this.ze(i),s=this.wa(i);if(o==s){if(this.TQ(i),n!=i&&n!=s||(n=-1),i==r||o==r){if(i==(r=a)||o==r)break;i=a;continue}}else this.Jb(i,e,1);if((i=a)==r)break}}},t.prototype.wC=function(t,n,r,i,a){this.ah(),this.UH=a,this.a=t,this.Uq=this.a.NF(),(t=new e.ha(0)).Db(null!=r?this.a.D(r.get(0)):this.a.hd);var o=0,s=1,u=null!=r?r.get(0):this.a.ld;for(a=1;-1!=u;){this.a.LK(u,this.Uq,s),s<<=1;for(var c=this.a.Kb(u);-1!=c;c=this.a.Qb(c))for(var l=this.a.Za(c),h=0,f=this.a.Ha(c);h<f;h++)t.add(l),l=this.a.T(l);e.R.lo(this.a.dc(u))||(o+=this.a.$(u)),null!=r?(u=a<r.size?r.get(a):-1,a++):u=this.a.Ae(u)}for(this.Zo=s,this.sa=t.size,this.a.Vx(t,this.sa),null==this.ph&&(this.ph=new e.ad(2),this.oe=new e.ad(8),this.Lc=new e.ad(8),this.Ee=new e.ad(8)),this.ph.Le(this.sa),e.Ep.Sp(i),this.oe.Le(this.sa+10),this.Lc.Le(2*this.sa+32),this.Ee.Le(Math.max(32,o)),this.Pm=this.a.Kd(),r=new e.b,a=0,o=new e.b,r.Tc(),s=0;s<=this.sa;s++)if(s<this.sa?(l=t.get(s),this.a.w(l,o)):o.Tc(),!r.qb(o)){if(a<s){for(l=this.mn(),f=h=-1;a<s;a++)f=t.get(a),this.a.Qa(f,this.Pm,l),u=this.ph.Ke(),this.ph.P(u,0,f),this.ph.P(u,1,h),h=u,c=this.a.cd(f),u=this.a.Zf(c),u=this.Fa(u),this.vY(l,this.Bd(l)|u);this.wY(l,h),this.wr(l,this.a.Ua(f)),-1!=this.wt&&this.LY(this.wt,l),this.OY(l,this.wt),this.wt=l,-1==this.We&&(this.We=l)}a=s,r.K(o)}e.Ep.Sp(i),this.he=this.ih(),5==n&&(this.ig=this.ih()),4==n&&(this.Eg=this.ih()),this.FQ(n,t),0==this.Ti.pi&&(this.nZ(n),0==this.Ti.pi&&(isNaN(this.XA)||this.HP()?(this.gP(),0==this.Ti.pi&&(this.Uh(this.he),this.he=-1,this.UH&&this.gW(n,i))):this.$A=!0))},t.prototype.pz=function(e){var t=this.kc(e),n=this.ze(e),r=this.wa(e),i=this.kc(r),a=this.ze(r);t!=r&&(this.cm(a,t),this.dm(t,a)),n!=r&&(this.cm(n,i),this.dm(i,n)),n=this.pk(e),this.Re(n)==e&&this.Cn(n,i!=e?i:-1),i=this.pk(r),this.Re(i)==r&&this.Cn(i,t!=r?t:-1),this.Lc.jd(e),this.Lc.jd(r)},t.prototype.zG=function(e,t){for(;;){if(-1==(t=e.Be(t)))return-1;var n=e.ga(t);if(this.jf(n)!=this.jf(this.wa(n)))return n}},t.prototype.xr=function(e,t){var n;void 0===n&&(n=!0),this.wC(e,0,null,t,n)},t.prototype.zK=function(t,n,r){var i=new e.ha(0);i.add(n),this.wC(t,4,i,r,1736==t.dc(n))},t.prototype.AK=function(t,n,r){var i=new e.ha(0);i.add(n),this.wC(t,5,i,r,!0)},t.prototype.ah=function(){null!=this.a&&(-1!=this.Uq&&(this.a.cY(this.Uq),this.Uq=-1),-1!=this.Pm&&(this.a.Xd(this.Pm),this.Pm=-1),-1!=this.Vq&&(this.a.Xd(this.Vq),this.Vq=-1),-1!=this.he&&(this.Uh(this.he),this.he=-1),-1!=this.ig&&(this.Uh(this.ig),this.ig=-1),-1!=this.Eg&&(this.Uh(this.Eg),this.Eg=-1),this.a=null,this.oe.rj(!0),this.ph.rj(!0),this.wt=this.We=-1,null!=this.Lc&&this.Lc.rj(!0),null!=this.Mi&&(this.Mi.length=0),null!=this.Ji&&(this.Ji.length=0),null!=this.VH&&(this.VH.length=0),null!=this.Ee&&this.Ee.rj(!0),this.Pl=-1,this.ro=null)},t.prototype.Re=function(e){return this.oe.S(e,2)},t.prototype.w=function(e,t){this.a.PG(this.sS(e),t)},t.prototype.Bd=function(e){return this.oe.S(e,1)},t.prototype.$f=function(e){return this.oe.S(e,4)},t.prototype.Iz=function(e){return this.oe.S(e,6)},t.prototype.wm=function(e){return this.oe.S(e,7)},t.prototype.Rs=function(e){return this.ph.S(e,1)},t.prototype.zj=function(e){return this.ph.S(e,0)},t.prototype.tg=function(e,t){return(t=this.Ji[t]).size<=e?-1:t.read(e)},t.prototype.Dn=function(e,t,n){(t=this.Ji[t]).size<=e&&t.resize(this.oe.size,-1),t.write(e,n)},t.prototype.Xp=function(){null==this.Ji&&(this.Ji=[]);for(var t=e.ha.Af(this.oe.Og,-1),n=0,r=this.Ji.length;n<r;n++)if(null==this.Ji[n])return this.Ji[n]=t,n;return this.Ji.push(t),this.Ji.length-1},t.prototype.Yp=function(e){this.Ji[e]=null},t.prototype.pk=function(e){return this.Lc.S(e,1)},t.prototype.Df=function(e){return this.pk(this.wa(e))},t.prototype.wa=function(e){return this.Lc.S(e,4)},t.prototype.ze=function(e){return this.Lc.S(e,5)},t.prototype.kc=function(e){return this.Lc.S(e,6)},t.prototype.jf=function(e){return this.Lc.S(e,2)},t.prototype.kf=function(e){return this.mk(this.Lc.S(e,2))},t.prototype.ym=function(e){return this.Lc.S(e,7)},t.prototype.Es=function(e,t){this.w(this.pk(e),t)},t.prototype.xm=function(e,t){this.w(this.Df(e),t)},t.prototype.lh=function(e){return this.Lc.S(e,3)&this.kP},t.prototype.Cb=function(e,t){return(t=this.Mi[t]).size<=e?-1:t.read(e)},t.prototype.Jb=function(e,t,n){(t=this.Mi[t]).size<=e&&t.resize(this.Lc.size,-1),t.write(e,n)},t.prototype.ih=function(){null==this.Mi&&(this.Mi=[]);for(var t=e.ha.Af(this.Lc.Og,-1),n=0,r=this.Mi.length;n<r;n++)if(null==this.Mi[n])return this.Mi[n]=t,n;return this.Mi.push(t),this.Mi.length-1},t.prototype.Uh=function(e){this.Mi[e]=null},t.prototype.TQ=function(e){var t=this.jf(e),n=this.kc(e);n==this.wa(e)&&(n=this.kc(n))==e&&(n=-1),this.nG(t)==e&&this.ou(t,n),n=this.ro.read(t),isNaN(n)||(this.EK(t,NaN),this.GK(t,NaN)),this.dy(e,!0),this.pz(e)},t.prototype.UQ=function(e){for(var t=0,n=e.size;t<n;t++){var r=e.get(t),i=this.jf(this.wa(r));this.ou(this.jf(r),-1),this.ou(i,-1),this.dy(r,!0),this.pz(r)}},t.prototype.nG=function(e){return this.Ee.S(e,1)},t.prototype.mk=function(e){return this.Ee.S(e,2)},t.prototype.Yn=function(e){return this.Ee.S(e,3)},t.prototype.rS=function(e){return this.Ee.S(e,4)},t.prototype.eq=function(e){var t=this.ro.read(e);return isNaN(t)&&(this.TZ(e),t=this.ro.read(e)),t},t.prototype.Fa=function(e){return this.a.wG(e,this.Uq)},t.prototype.Qe=function(e){return this.a.Na(e,this.Pm)},t.prototype.IS=function(e){return this.a.Na(e,this.Vq)},t.prototype.HS=function(e,t){var n=this.Re(e);if(-1==n)return-1;var r=n,i=-1,a=-1;do{if(this.Df(r)==t)return r;if(-1==i){if(-1==(i=this.Re(t)))break;a=i}if(this.Df(a)==e)return this.wa(a);r=this.kc(this.wa(r)),a=this.kc(this.wa(a))}while(r!=n&&a!=i);return-1},t.prototype.ZB=function(t,n){n.ps(),n=n.get();var r=new e.b;this.Es(t,r),n.Fc(r),this.xm(t,r),n.Sc(r)},t.prototype.RP=function(t,n){if(t==n)return 0;var r=new e.b;this.xm(t,r);var i=new e.b;return this.xm(n,i),r.qb(i)?0:(n=new e.b,this.Es(t,n),(t=new e.b).tc(r,n),(r=new e.b).tc(i,n),e.b.Wr(t,r))},t.prototype.QP=function(t,n){if(t==n)return 0;var r=new e.b;this.xm(t,r);var i=new e.b;return this.xm(n,i),r.qb(i)?0:(n=new e.b,this.Es(t,n),(t=new e.b).tc(r,n),(r=new e.b).tc(i,n),0<=r.y&&0<t.y?e.b.Wr(t,r):0)},t.prototype.HP=function(){for(var t=e.Tb.Wx(this.XA),n=new e.b,r=new e.b,i=new e.b,a=new e.b,o=new e.b,s=this.We;-1!=s;s=this.$f(s)){var u=this.Re(s);if(-1!=u){var c=u;this.Es(c,n),this.xm(c,r),o.tc(r,n);var l=o.En();do{var h=c;if((c=this.kc(this.wa(c)))!=h){this.xm(c,i),a.tc(i,n),h=a.En();var f=a.Di(o);if(f*f/(h*l)*Math.min(h,l)<=t)return!1;o.K(a),l=h,r.K(i)}}while(c!=u)}}return!0},t}(),e.Pu=t}(J||(J={})),function(e){var t=function(){function t(){this.h=null,this.bI=new e.b,this.cI=new e.b,this.wh=null,this.bt=!1,this.Bo=-1}return t.prototype.mf=function(e){return e<this.wh.length&&this.wh[e]},t.prototype.jl=function(t,n,r,i){var a=e.R.Se(this.h.a.dc(r));if(2!=e.R.Se(this.h.a.dc(n))||1!=a)throw e.f.za();this.QQ(t,n,r,i)},t.prototype.xr=function(t,n){null==this.h&&(this.h=new e.Pu),this.h.xr(t,n)},t.prototype.yr=function(t,n,r){for(e.$j.U(t,n,r,!0),n=t.ld;-1!=n;n=t.Ae(n))1736==t.dc(n)&&e.Kn.U(t,n,-1,this.bt,r);this.xr(t,r)},t.prototype.xF=function(e,t,n,r,i){var a=this.h.a;if(1736==a.dc(e))for(e=a.Kb(e);-1!=e;e=a.Qb(e)){var o=a.Za(e);this.h.Qe(o),this.h.Qe(a.T(o));var s=this.h.IS(o);if(-1!=s){var u=this.h.Cb(s,n);if(1!=u&&2!=u)if(this.mf(this.h.kf(s))){this.h.Jb(s,n,1),u=a.Ef(t,-1);var c=s,l=this.h.Qe(o),h=1;do{var f=this.Em(o,i);a.oj(u,f),-1!=r&&this.h.Dn(l,r,1),this.h.Jb(c,n,1),c=this.h.kc(c);do{var p=-1!=(f=1==h?a.T(o):a.Ma(o))?this.h.Qe(f):-1}while(p==l);var d=this.h.pk(c);if(d!=p){do{p=-1!=(f=1==h?a.Ma(o):a.T(o))?this.h.Qe(f):-1}while(p==l);d!=p?f=this.h.zj(this.h.wm(p=d)):h=-h}l=p,o=f}while(c!=s);a.An(u,!0)}else this.h.Jb(s,n,2)}}},t.prototype.SF=function(){for(var t=this.h.ih(),n=new e.ha(0),r=this.h.We;-1!=r;r=this.h.$f(r)){var i=this.h.Re(r),a=i;if(-1!=i)do{if(1!=this.h.Cb(a,t)){var o=this.h.wa(a);this.h.Jb(o,t,1),this.h.Jb(a,t,1),this.mf(this.h.kf(a))&&this.mf(this.h.kf(o))&&n.add(a)}a=this.h.kc(this.h.wa(a))}while(a!=i)}this.h.Uh(t),this.h.UQ(n)},t.prototype.Em=function(e,t){return-1==t?e:this.tT(e,t)},t.prototype.tT=function(e,t){var n=this.h.a,r=this.h.wm(this.h.Qe(e));do{var i=this.h.zj(r);if(n.Zf(n.cd(i))==t)return i;r=this.h.Rs(r)}while(-1!=r);return e},t.prototype.Ir=function(t,n,r){this.SF();var i=this.h.a,a=i.Pg(1736),o=this.h.ih();return this.AL(t,n,a,r,o,-1),this.h.Uh(o),e.Kn.U(i,a,1,this.bt,null),a},t.prototype.AL=function(e,t,n,r,i,a){for(this.xF(e,n,i,a,r),-1!=t&&this.xF(t,n,i,a,r),e=this.h.a,t=this.h.We;-1!=t;t=this.h.$f(t)){var o=this.h.Re(t);if(-1!=o){var s=o;do{var u=this.h.Cb(s,i);if(1!=u&&2!=u)if(this.mf(this.h.kf(s))){u=e.Ef(n,-1);var c=s;do{var l=this.h.ym(c);-1!=l?l=this.h.zj(l):(l=this.h.zj(this.h.ym(this.h.wa(c))),l=this.h.a.T(l)),l=this.Em(l,r),e.oj(u,l),this.h.Jb(c,i,1),-1!=a&&(l=this.h.Qe(l),this.h.Dn(l,a,1)),c=this.h.kc(c)}while(c!=s);e.An(u,!0)}else this.h.Jb(s,i,2);s=this.h.kc(this.h.wa(s))}while(s!=o)}}},t.prototype.HZ=function(t,n,r){var i=this.h.a,a=i.Pg(1736),o=i.Pg(1607),s=i.Pg(550);this.SF();var u=-1,c=this.h.ih(),l=this.h.Xp();for(this.AL(t,n,a,r,c,l),t=this.h.We;-1!=t;t=this.h.$f(t))if(-1!=(n=this.h.Re(t))){var h=n;do{var f=this.h.Cb(h,c),p=this.h.Cb(this.h.wa(h),c);if(2==(f|=p))if(f=this.h.lh(h),this.mf(f)){var d=i.Ef(o,-1),v=h;f=this.Fx(t,i),f=this.Em(f,r),i.oj(d,f),this.h.Dn(t,l,1);do{if(f=this.h.Df(v),p=this.Fx(f,i),p=this.Em(p,r),i.oj(d,p),this.h.Jb(v,c,1),this.h.Jb(this.h.wa(v),c,1),this.h.Dn(f,l,1),v=this.h.kc(v),f=this.h.Cb(v,c),2!=(f|=p=this.h.Cb(this.h.wa(v),c)))break;if(f=this.h.lh(v),!this.mf(f)){this.h.Jb(v,c,1),this.h.Jb(this.h.wa(v),c,1);break}}while(v!=h)}else this.h.Jb(h,c,1),this.h.Jb(this.h.wa(h),c,1);h=this.h.kc(this.h.wa(h))}while(h!=n)}for(t=this.h.We;-1!=t;t=this.h.$f(t))1!=(f=this.h.tg(t,l))&&(f=this.h.Bd(t),this.mf(f)&&(-1==u&&(u=i.Ef(s,-1)),-1!=(n=this.h.wm(t))&&(n=this.h.zj(n),f=this.Em(n,r),i.oj(u,f))));return this.h.Yp(l),this.h.Uh(c),e.Kn.U(i,a,1,this.bt,null),(r=[])[0]=s,r[1]=o,r[2]=a,r},t.prototype.Fx=function(e,t){var n=-1;for(e=this.h.wm(e);-1!=e;e=this.h.Rs(e)){var r=this.h.zj(e);-1==n&&(n=r);var i=this.h.Fa(t.Zf(t.cd(r)));if(this.mf(i)){n=r;break}}return n},t.prototype.WB=function(t,n){for(var r=this.h.pk(n),i=this.h.Df(n),a=0,o=0,s=this.h.wm(r);-1!=s;s=this.h.Rs(s)){var u=this.h.zj(s),c=t.cd(u),l=this.h.Fa(t.Zf(c)),h=t.T(u),f=t.Ma(u);(c=t.Za(c))==u&&(this.Bo=n),-1!=h&&this.h.Qe(h)==i?(a++,this.mf(l)&&(c==h&&(this.Bo=this.h.kc(n)),o++)):-1!=f&&this.h.Qe(f)==i&&(a--,this.mf(l)&&(c==f&&(this.Bo=this.h.kc(n)),o--))}return this.h.w(r,this.bI),this.h.w(i,this.cI),(0!=o?o:a)*e.b.vb(this.bI,this.cI)},t.prototype.gq=function(e){return this.h.lh(e)|this.h.kf(e)|this.h.kf(this.h.wa(e))},t.prototype.EL=function(e){for(var t=this.h.wa(this.h.ze(e)),n=-1;t!=e;){if(this.mf(this.gq(t))){if(-1!=n)return-1;n=t}t=this.h.wa(this.h.ze(t))}return-1!=n?this.h.wa(n):-1},t.prototype.FL=function(e){for(var t=this.h.wa(this.h.kc(e)),n=-1;t!=e;){if(this.mf(this.gq(t))){if(-1!=n)return-1;n=t}t=this.h.wa(this.h.kc(t))}return-1!=n?this.h.wa(n):-1},t.prototype.qK=function(t,n,r,i,a){var o=this.h.a,s=t,u=this.h.wa(s);this.h.Jb(s,r,1),this.h.Jb(u,r,1);var c=this.WB(o,s);this.Bo=-1;for(var l=s,h=-1,f=!1,p=1;;){var d=this.h.ze(s);if(d==u)break;if(u=this.h.kc(u),this.h.wa(d)!=u){if(-1==(s=this.EL(s)))break;f=!0,u=this.h.wa(s)}else s=d;if(s==t){h=t;break}if(d=this.gq(s),!this.mf(d))break;this.h.Jb(s,r,1),this.h.Jb(u,r,1),l=s,c+=this.WB(o,s),p++}if(-1==h)for(u=this.h.wa(s=t),h=s;(t=this.h.kc(s))!=u;){if(u=this.h.ze(u),this.h.wa(t)!=u){if(-1==(s=this.FL(s))){f=!0;break}u=this.h.wa(s)}else s=t;if(d=this.gq(s),!this.mf(d))break;this.h.Jb(s,r,1),this.h.Jb(u,r,1),h=s,c+=this.WB(o,s),p++}else if(-1!=this.Bo&&(l=this.Bo,h=this.h.ze(this.Bo),this.h.wa(h)!=this.h.kc(this.h.wa(l))&&-1==(h=this.EL(l))))throw e.f.za();for(0<=c||(s=h,h=this.h.wa(l),l=this.h.wa(s)),r=o.Ef(n,-1),s=l,l=this.h.pk(l),f=this.h.Df(h)==l&&f,c=this.Fx(l,o),c=this.Em(c,a),o.oj(r,c),-1!=i&&this.h.Dn(l,i,1),l=0,p=f?e.L.truncate((p+1)/2):-1;t=this.h.Df(s),c=this.Fx(t,o),c=this.Em(c,a),o.oj(r,c),l++,-1!=i&&this.h.Dn(t,i,1),f&&l==p&&(r=o.Ef(n,-1),o.oj(r,c)),s!=h;)if(t=this.h.kc(s),this.h.ze(this.h.wa(s))!=this.h.wa(t)){if(-1==(s=this.FL(s)))throw e.f.za()}else s=t},t.prototype.Jr=function(e){for(var t=this.h.a.Pg(1607),n=this.h.ih(),r=this.h.We;-1!=r;r=this.h.$f(r)){var i=this.h.Re(r),a=i;do{1!=this.h.Cb(a,n)&&this.mf(this.gq(a))&&this.qK(a,t,n,-1,e),a=this.h.kc(this.h.wa(a))}while(a!=i)}return this.h.Uh(n),t},t.prototype.IZ=function(e){for(var t=this.h.a,n=t.Pg(1607),r=t.Pg(550),i=this.h.ih(),a=this.h.Xp(),o=-1,s=this.h.We;-1!=s;s=this.h.$f(s)){var u=this.h.Re(s),c=u;do{var l=this.h.Cb(c,i);1!=l&&(l=this.gq(c),this.mf(l)&&this.qK(c,n,i,a,e)),c=this.h.kc(this.h.wa(c))}while(c!=u)}for(s=this.h.We;-1!=s;s=this.h.$f(s))1!=(l=this.h.tg(s,a))&&(l=this.h.Bd(s),this.mf(l)&&(-1==o&&(o=t.Ef(r,-1)),-1!=(u=this.h.wm(s))&&(u=this.h.zj(u),u=this.Em(u,e),t.oj(o,u))));return this.h.Uh(i),this.h.Yp(a),(e=[])[0]=r,e[1]=n,e},t.prototype.up=function(){for(var e=this.h.a,t=e.Pg(550),n=e.Ef(t,-1),r=this.h.We;-1!=r;r=this.h.$f(r))if(this.mf(this.h.Bd(r))){for(var i=-1,a=this.h.wm(r);-1!=a;a=this.h.Rs(a)){var o=this.h.zj(a);-1==i&&(i=o);var s=this.h.Fa(e.Zf(e.cd(o)));if(this.mf(s)){i=o;break}}e.oj(n,i)}return t},t.prototype.eo=function(e){this.wh=[];for(var t=0;t<e;t++)this.wh[t]=!1},t.IJ=function(t,n,r,i){var a=t.Ea(),o=Array(1e3);e.L.Hv(o,null);var s=e.L.Xf(1e3,0),u=t.D(),c=!0,l=2==n.pb();if(1!=n.pb()&&2!=n.pb())throw e.f.za();for(var h=0;h<u;){var f=e.L.truncate(t.CX(o,h)-h);l?e.Zc.yL(n,o,f,r,s):e.Zc.zL(n,o,f,r,s);for(var p=0,d=0;d<f;d++){var v=0==s[d];i||(v=!v),v&&(c&&(c=!1,a.yd(t,0,h)),p!=d&&a.yd(t,h+p,h+d),p=d+1)}c||p==f||a.yd(t,h+p,h+f),h+=f}return c?t:a},t.lH=function(n,r,i){return n instanceof e.Hd?t.IJ(n,r,i,!0):r instanceof e.Ra?n.u()||r.u()?n.Ea():e.$j.eJ(i,n,r)?e.$j.MP(n,r):n.Ea():t.JJ(n,r,i,!0)},t.hw=function(n,r,i,a){var o=new e.g;n.s(o);var s=new e.g;r.s(s);var u=new e.g;if(u.H(o),u.Nb(s),i=e.la.Qd(i,u,!0),(u=new e.g).H(s),s=e.la.es(i),u.O(s,s),!o.isIntersecting(u)){if(n.pb()<=r.pb())return t.kg(t.vd(n.Ea()),n,"&");if(n.pb()>r.pb())return t.kg(t.vd(r.Ea()),n,"&")}return s=new t,u=(o=new e.Yc).Bb(t.vd(n)),r=o.Bb(t.vd(r)),s.yr(o,i,a),a=s.hw(u,r),n=t.kg(o.ye(a),n,"&"),e.R.Bc(n.F())&&(n.Jg(2,i),1736==n.F()&&n.cl()),n},t.JJ=function(t,n,r,i){if(t.u())return t.Ea();if(n.u())return i?t.Ea():null;var a=[null],o=[0],s=2==n.pb();if(1!=n.pb()&&2!=n.pb())throw e.f.za();return a[0]=t.w(),s?e.Zc.yL(n,a,1,r,o):e.Zc.zL(n,a,1,r,o),n=0==o[0],i||(n=!n),n?t.Ea():t},t.T_=function(n,r,i){return n instanceof e.Hd?t.IJ(n,r,i,!1):r instanceof e.Ra?n.u()?n.Ea():r.u()?n:e.$j.eJ(i,n,r)?n.Ea():n:t.JJ(n,r,i,!1)},t.prototype.jJ=function(t,n,r,i,a){if(t.u())return t;var o=new e.Yc;return t=o.Bb(t),this.Tk(o,t,n,r,i,a)},t.prototype.eW=function(t,n,r,i,a,o){if(a&&550!=t.dc(n)){var s=new e.yD;s.yZ(t,r),s.Tg?(e.$j.U(t,r,o,!0),a=!1):this.h.dz(r)}else e.$j.U(t,r,o,!0),a=!1;if(i&&550!=t.dc(n)?this.h.AK(t,n,o):this.h.zK(t,n,o),this.h.$A)return this.h.ah(),this.h=null,this.Tk(t,n,r,i,!1,o);if(this.h.dz(NaN),o=this.h.Fa(n),this.eo(o+1),this.wh[o]=!0,1736==t.dc(n)||i&&550!=t.dc(n))return t.np(n,0),n=this.Ir(n,-1,-1),(t=t.ye(n)).np(0),a?t.Jg(1,0):(t.Jg(2,r),t.cl()),t;if(1607==t.dc(n))return n=this.Jr(-1),t=t.ye(n),a||t.Jg(2,r),t;if(550==t.dc(n))return n=this.up(),t=t.ye(n),a||t.Jg(2,r),t;throw e.f.za()},t.prototype.Tk=function(t,n,r,i,a,o){this.h=new e.Pu;try{return this.eW(t,n,r,i,a,o)}finally{this.h.ah()}},t.Tk=function(e,n,r,i,a){return(new t).jJ(e,n,r,i,a)},t.prototype.dW=function(t,n,r,i){this.bt=t,this.h=new e.Pu,t=n.$n(r);var a=n.dc(r);if(1!=t||550==a?this.h.zK(n,r,i):this.h.AK(n,r,i),!this.h.$A)if(this.h.dz(NaN),i=this.h.Fa(r),this.eo(i+1),this.wh[i]=!0,1736==n.dc(r)||1==t&&550!=n.dc(r))n.np(r,0),i=this.Ir(r,-1,-1),n.QC(i,r),n.kC(i);else if(1607==n.dc(r))i=this.Jr(-1),n.QC(i,r),n.kC(i);else{if(550!=n.dc(r))throw e.f.Y("internal error");i=this.up(),n.QC(i,r),n.kC(i)}},t.NC=function(e,n,r,i){var a=new t;return a.bt=!0,a.jJ(e,n,!1,r,i)},t.prototype.tm=function(t,n){var r=e.R.Se(this.h.a.dc(t)),i=e.R.Se(this.h.a.dc(n));if(r>i)return t;var a=this.h.Fa(t),o=this.h.Fa(n);if(this.eo(1+(a|o)),this.wh[this.h.Fa(t)]=!0,2==r&&2==i)return this.Ir(t,n,-1);if(1==r&&2==i||1==r&&1==i)return this.Jr(-1);if(0==r)return this.up();throw e.f.za()},t.prototype.RF=function(t,n){var r=e.R.Se(this.h.a.dc(t)),i=e.R.Se(this.h.a.dc(n));if(r>i)return t;if(r<i)return n;var a=this.h.Fa(t),o=this.h.Fa(n);if(this.eo(1+(a|o)),this.wh[this.h.Fa(t)]=!0,this.wh[this.h.Fa(n)]=!0,this.wh[this.h.Fa(t)|this.h.Fa(n)]=!0,2==r&&2==i)return this.Ir(t,n,-1);if(1==r&&1==i)return this.Jr(-1);if(0==r&&0==i)return this.up();throw e.f.za()},t.prototype.hw=function(t,n){var r=e.R.Se(this.h.a.dc(t)),i=e.R.Se(this.h.a.dc(n)),a=this.h.Fa(t),o=this.h.Fa(n);if(this.eo(1+(a|o)),this.wh[this.h.Fa(t)|this.h.Fa(n)]=!0,a=-1,1<this.h.a.Qt.Ca&&(a=t),2==r&&2==i)return this.Ir(t,n,a);if(1==r&&0<i||1==i&&0<r)return this.Jr(a);if(0==r||0==i)return this.up();throw e.f.za()},t.prototype.wA=function(t,n){var r=e.R.Se(this.h.a.dc(t)),i=e.R.Se(this.h.a.dc(n)),a=this.h.Fa(t),o=this.h.Fa(n);if(this.eo(1+(a|o)),this.wh[this.h.Fa(t)|this.h.Fa(n)]=!0,a=-1,1<this.h.a.Qt.Ca&&(a=t),2==r&&2==i)return this.HZ(t,n,a);if(1==r&&0<i||1==i&&0<r)return this.IZ(a);if(0==r||0==i)return(t=[])[0]=this.up(),t;throw e.f.za()},t.prototype.tp=function(t,n){var r=e.R.Se(this.h.a.dc(t)),i=e.R.Se(this.h.a.dc(n)),a=this.h.Fa(t),o=this.h.Fa(n);if(this.eo(1+(a|o)),this.wh[this.h.Fa(t)]=!0,this.wh[this.h.Fa(n)]=!0,2==r&&2==i)return this.Ir(t,n,-1);if(1==r&&1==i)return this.Jr(-1);if(0==r&&0==i)return this.up();throw e.f.za()},t.vd=function(t){var n=t.F();return 197==n?(n=new e.Ga(t.description),t.u()||n.bd(t,!1),n):33==n?(n=new e.Hd(t.description),t.u()||n.add(t),n):322==n?(n=new e.Oa(t.description),t.u()||n.$b(t,!0),n):t},t.kg=function(t,n,r){var i=t.F();return 197==i?(n=new e.Ga(t.description),t.u()||n.bd(t,!1),n):33!=i||"|"!=r&&"^"!=r?322==i?(n=new e.Oa(t.description),t.u()||n.$b(t,!0),n):33==i&&"-"==r&&33==n.F()||550==i&&"&"==r&&33==n.F()?(n=new e.Ra(t.description),t.u()||t.ne(0,n),n):t:(n=new e.Hd(t.description),t.u()||n.add(t),n)},t.tm=function(n,r,i,a){if(n.u()||r.u()||n.pb()>r.pb())return t.kg(t.vd(n),n,"-");var o=new e.g;n.s(o);var s=new e.g;if(r.s(s),!o.isIntersecting(s))return t.kg(t.vd(n),n,"-");var u=new e.g;return u.H(o),u.Nb(s),i=e.la.Qd(i,u,!0),s=new t,u=(o=new e.Yc).Bb(t.vd(n)),r=o.Bb(t.vd(r)),s.yr(o,i,a),a=s.tm(u,r),a=o.ye(a),n=t.kg(a,n,"-"),e.R.Bc(n.F())&&(n.Jg(2,i),1736==n.F()&&n.cl()),n},t.RF=function(n,r){if(n.pb()>r.pb())return t.kg(t.vd(n),n,"|");if(n.pb()<r.pb()||n.u())return t.kg(t.vd(r),n,"|");if(r.u())return t.kg(t.vd(n),n,"|");var i=new e.g;n.s(i);var a=new e.g;r.s(a);var o=new e.g;if(o.H(i),o.Nb(a),o=e.la.Qd(void 0,o,!0),!i.isIntersecting(a.KS(o,o)))switch(n=t.vd(n),o=t.vd(r),n.F()){case 550:return(n=e.R.$d(n)).yd(o,0,-1),n;case 1607:case 1736:return(n=e.R.$d(n)).add(o,!1),n;default:throw e.f.za()}a=new t;var s=(i=new e.Yc).Bb(t.vd(n));return r=i.Bb(t.vd(r)),a.yr(i,o,void 0),r=a.RF(s,r),n=t.kg(i.ye(r),n,"|"),e.R.Bc(n.F())&&(n.Jg(2,o),1736==n.F()&&n.cl()),n},t.fR=function(n,r,i){if(2>n.length)throw e.f.I("not enough geometries to dissolve");for(var a=0,o=0,s=n.length;o<s;o++)a=Math.max(n[o].pb(),a);var u=new e.g;u.Ka();var c=new e.Yc,l=-1,h=0,f=-1;for(o=0,s=n.length;o<s;o++)if(n[o].pb()==a)if(n[o].u())-1==f&&(f=o);else{f=o,-1==l?l=c.Bb(t.vd(n[o])):c.FO(l,t.vd(n[o]));var p=new e.g;n[o].Zb(p),u.Nb(p),h++}return 2>h?t.vd(n[f]):(n=2==a,r=e.la.Qd(0==a?r:null,u,!0),(new t).Tk(c,l,r,n,!0,i))},t.wA=function(n,r,i,a){var o=[null,null,null],s=new e.g;n.s(s);var u=new e.g;r.s(u);var c=new e.g;if(c.H(s),c.Nb(u),i=e.la.Qd(i,c,!0),(c=new e.g).H(u),u=e.la.es(i),c.O(u,u),!s.isIntersecting(c)){if(n.pb()<=r.pb())return o[(n=t.kg(t.vd(n.Ea()),n,"&")).pb()]=n,o;if(n.pb()>r.pb())return o[(n=t.kg(t.vd(r.Ea()),n,"&")).pb()]=n,o}for(u=new t,c=(s=new e.Yc).Bb(t.vd(n)),r=s.Bb(t.vd(r)),u.yr(s,i,a),a=u.wA(c,r),r=0;r<a.length;r++)u=t.kg(s.ye(a[r]),n,"&"),e.R.Bc(u.F())&&(u.Jg(2,i),1736==u.F()&&u.cl()),o[u.pb()]=u;return o},t.tp=function(n,r,i,a){if(n.pb()>r.pb())return t.kg(t.vd(n),n,"^");if(n.pb()<r.pb()||n.u())return t.kg(t.vd(r),n,"^");if(r.u())return t.kg(t.vd(n),n,"^");var o=new e.g;n.s(o);var s=new e.g;r.s(s);var u=new e.g;return u.H(o),u.Nb(s),i=e.la.Qd(i,u,!0),s=new t,u=(o=new e.Yc).Bb(t.vd(n)),r=o.Bb(t.vd(r)),s.yr(o,i,a),a=s.tp(u,r),n=t.kg(o.ye(a),n,"^"),e.R.Bc(n.F())&&(n.Jg(2,i),1736==n.F()&&n.cl()),n},t.w_=function(t,n,r){return n=n.F(),r=r.F(),550==t.F()&&(33==n||33==r)&&1>=t.D()?(r=new e.Ra(t.description),t.u()||t.ne(0,r),r):t},t.prototype.XR=function(e,t){var n=this.h.a;e=n.Ef(e,-1);for(var r=t.size,i=0;i<r;i++){var a=t.get(i);n.oj(e,a)}n.An(e,!0)},t.prototype.DY=function(e,t){for(var n=this.h.a,r=n.ld;-1!=r;r=n.Ae(r))if(r==t)for(var i=n.Kb(r);-1!=i;i=n.Qb(i)){var a=n.Za(i);if(-1!=a)for(var o=n.T(a);-1!=o;){a=this.h.Qe(a);var s=this.h.Qe(o);-1!=(a=this.h.HS(a,s))&&(s=this.h.wa(a),this.h.Jb(a,e,1),this.h.Jb(s,e,2)),o=n.T(a=o)}}},t.prototype.tX=function(t,n,r,i){r=this.h.Fa(r),i=this.h.Fa(i);var a=new e.ha(0);a.Db(256);for(var o=this.h.a,s=this.h.ih(),u=this.h.We;-1!=u;u=this.h.$f(u)){var c=this.h.Re(u);if(-1!=c){var l=c;do{if(1!=this.h.Cb(l,s)){var h=l,f=l,p=!1,d=0;do{if(this.h.Jb(h,s,1),!p){var v=this.h.lh(h);0!=(v&i)&&0!=(this.h.kf(h)&r)&&(f=h,p=!0)}p&&(a.add(this.h.zj(this.h.wm(this.h.pk(h)))),-1!=t&&0!=((v=this.h.lh(h))&i)&&(d|=v=this.h.Cb(h,t))),h=this.h.kc(h)}while(h!=f);p&&0<this.h.eq(this.h.jf(f))&&(h=o.Pg(1736),this.XR(h,a),-1!=n&&o.LK(h,n,d)),a.clear(!1)}l=this.h.kc(this.h.wa(l))}while(l!=c)}}this.h.Uh(s)},t.prototype.QQ=function(e,t,n,r){this.h.dY();var i=-1;-1!=e&&(i=this.h.ih(),this.DY(i,n)),this.tX(i,e,t,n);var a=this.h.a;for(e=0,i=a.ld;-1!=i;i=a.Ae(i))i!=t&&i!=n&&(r.add(i),e++);r.Zd(0,e,(function(e,t){return(e=a.eA(a.Kb(e)))<(t=a.eA(a.Kb(t)))?-1:e==t?0:1}))},t.prototype.ah=function(){null!=this.h&&(this.h.ah(),this.h=null)},t}();e.pg=t}(J||(J={})),function(e){var t=function(){function t(e){void 0!==e?this.Dr(e):this.zC()}return t.prototype.Tx=function(){this.Sb=this.Ob=this.tb=this.ob=this.bb=this.fb=0},t.prototype.Ib=function(e){return this==e||e instanceof t&&this.fb==e.fb&&this.ob==e.ob&&this.Ob==e.Ob&&this.tb==e.tb&&this.bb==e.bb&&this.Sb==e.Sb},t.prototype.fc=function(){return e.L.Aj(),e.L.Aj(),e.L.Aj(),e.L.Aj(),e.L.Aj(),e.L.Aj()},t.prototype.Zj=function(e,t){var n=this.tb*e.x+this.bb*e.y+this.Sb;t.x=this.fb*e.x+this.ob*e.y+this.Ob,t.y=n},t.prototype.LZ=function(e,t,n,r,i){var a=2*t;for(r*=2,t=2*(t+i);a<t;a+=2,r+=2){var o=e[a+1];n[r]=this.fb*(i=e[a])+this.ob*o+this.Ob,n[r+1]=this.tb*i+this.bb*o+this.Sb}},t.prototype.NZ=function(t,n,r){for(var i=0;i<n;i++){var a=t[i].x,o=t[i].y,s=this.fb*a+this.ob*o+this.Ob;a=this.tb*a+this.bb*o+this.Sb,null!=r[i]?r[i].ka(s,a):r[i]=e.b.construct(s,a)}},t.prototype.multiply=function(e){t.multiply(this,e,this)},t.multiply=function(e,t,n){var r=e.fb*t.fb+e.tb*t.ob,i=e.ob*t.fb+e.bb*t.ob,a=e.Ob*t.fb+e.Sb*t.ob+t.Ob,o=e.fb*t.tb+e.tb*t.bb,s=e.ob*t.tb+e.bb*t.bb;e=e.Ob*t.tb+e.Sb*t.bb+t.Sb,n.fb=r,n.ob=i,n.Ob=a,n.tb=o,n.bb=s,n.Sb=e},t.prototype.Cf=function(){var e=new t;return e.fb=this.fb,e.ob=this.ob,e.Ob=this.Ob,e.tb=this.tb,e.bb=this.bb,e.Sb=this.Sb,e},t.prototype.VC=function(t){if(!t.u()){for(var n=[],r=0;4>r;r++)n[r]=new e.b;t.XB(n),this.OZ(n,n),t.Ix(n,4)}},t.prototype.OZ=function(t,n){for(var r=0;r<t.length;r++){var i=new e.b,a=t[r];i.x=this.fb*a.x+this.ob*a.y+this.Ob,i.y=this.tb*a.x+this.bb*a.y+this.Sb,n[r]=i}},t.prototype.KT=function(e,t){e.u()||t.u()||0==e.N()||0==e.ca()?this.Tx():(this.ob=this.tb=0,this.fb=t.N()/e.N(),this.bb=t.ca()/e.ca(),this.Ob=t.o-e.o*this.fb,this.Sb=t.A-e.A*this.bb)},t.prototype.MZ=function(t){var n=new e.b,r=new e.b;n.ka(this.fb,this.tb),r.ka(this.ob,this.bb),n.sub(n);var i=.5*n.En();return n.ka(this.fb,this.tb),r.ka(this.ob,this.bb),n.add(r),t*(i>(n=.5*n.En())?Math.sqrt(i):Math.sqrt(n))},t.prototype.zC=function(){this.fb=1,this.tb=this.Ob=this.ob=0,this.bb=1,this.Sb=0},t.prototype.xq=function(){return 1==this.fb&&1==this.bb&&0==this.ob&&0==this.Ob&&0==this.tb&&0==this.Sb},t.prototype.Qg=function(e){return Math.abs(this.fb*this.bb-this.tb*this.ob)<=2*e*(Math.abs(this.fb*this.bb)+Math.abs(this.tb*this.ob))},t.prototype.mg=function(e,t){this.fb=1,this.ob=0,this.Ob=e,this.tb=0,this.bb=1,this.Sb=t},t.prototype.Dr=function(e,t){void 0!==t?(this.fb=e,this.tb=this.Ob=this.ob=0,this.bb=t,this.Sb=0):this.Dr(e,e)},t.prototype.HC=function(){this.fb=0,this.ob=1,this.Ob=0,this.tb=1,this.Sb=this.bb=0},t.prototype.SY=function(e){this.TY(Math.cos(e),Math.sin(e))},t.prototype.TY=function(e,t){this.fb=e,this.ob=-t,this.Ob=0,this.tb=t,this.bb=e,this.Sb=0},t.prototype.shift=function(e,t){this.Ob+=e,this.Sb+=t},t.prototype.scale=function(e,t){this.fb*=e,this.ob*=e,this.Ob*=e,this.tb*=t,this.bb*=t,this.Sb*=t},t.prototype.rotate=function(e){var n=new t;n.SY(e),this.multiply(n)},t.prototype.inverse=function(e){if(void 0!==e){var t=this.fb*this.bb-this.ob*this.tb;0==t?e.Tx():(e.Ob=(this.ob*this.Sb-this.Ob*this.bb)*(t=1/t),e.Sb=(this.Ob*this.tb-this.fb*this.Sb)*t,e.fb=this.bb*t,e.ob=-this.ob*t,e.tb=-this.tb*t,e.bb=this.fb*t)}else this.inverse(this)},t}();e.xd=t}(J||(J={})),function(e){var t=function(){function t(){}return t.prototype.Tx=function(){this.Kg=this.Sb=this.Ob=this.gf=this.df=this.cf=this.ff=this.bb=this.ob=this.yf=this.tb=this.fb=0},t.prototype.Dr=function(e,t){this.fb=e,this.ob=this.yf=this.tb=0,this.bb=t,this.df=this.cf=this.ff=0,this.gf=void 0,this.Kg=this.Sb=this.Ob=0},t.prototype.translate=function(e,t,n){this.Ob+=e,this.Sb+=t,this.Kg+=n},t.prototype.VC=function(t){if(!t.u()){for(var n=new e.Id[8],r=0;8>r;r++)n[r]=new e.Id;t.XB(n),this.transform(n,8,n),t.Ix(n)}},t.prototype.transform=function(t,n,r){for(var i=0;i<n;i++){var a=new e.Id,o=t[i];a.x=this.fb*o.x+this.ob*o.y+this.cf*o.z+this.Ob,a.y=this.tb*o.x+this.bb*o.y+this.df*o.z+this.Sb,a.z=this.yf*o.x+this.ff*o.y+this.gf*o.z+this.Kg,r[i]=a}},t.prototype.vp=function(t){var n=new e.Id;return n.x=this.fb*t.x+this.ob*t.y+this.cf*t.z+this.Ob,n.y=this.tb*t.x+this.bb*t.y+this.df*t.z+this.Sb,n.z=this.yf*t.x+this.ff*t.y+this.gf*t.z+this.Kg,n},t.prototype.Gg=function(e){t.multiply(this,e,this)},t.multiply=function(e,t,n){var r=e.fb*t.fb+e.tb*t.ob+e.yf*t.cf,i=e.fb*t.tb+e.tb*t.bb+e.yf*t.df,a=e.fb*t.yf+e.tb*t.ff+e.yf*t.gf,o=e.ob*t.fb+e.bb*t.ob+e.ff*t.cf,s=e.ob*t.tb+e.bb*t.bb+e.ff*t.df,u=e.ob*t.yf+e.bb*t.ff+e.ff*t.gf,c=e.cf*t.fb+e.df*t.ob+e.gf*t.cf,l=e.cf*t.tb+e.df*t.bb+e.gf*t.df,h=e.cf*t.yf+e.df*t.ff+e.gf*t.gf,f=e.Ob*t.fb+e.Sb*t.ob+e.Kg*t.cf+t.Ob,p=e.Ob*t.tb+e.Sb*t.bb+e.Kg*t.df+t.Sb;e=e.Ob*t.yf+e.Sb*t.ff+e.Kg*t.gf+t.Kg,n.fb=r,n.tb=i,n.yf=a,n.ob=o,n.bb=s,n.ff=u,n.cf=c,n.df=l,n.gf=h,n.Ob=f,n.Sb=p,n.Kg=e},t.inverse=function(t,n){var r=t.fb*(t.bb*t.gf-t.ff*t.df)-t.tb*(t.ob*t.gf-t.ff*t.cf)+t.yf*(t.ob*t.df-t.bb*t.cf);if(0==r)throw e.f.Y("math singularity");var i=1/r,a=-(t.ob*t.gf-t.ff*t.cf)*i,o=(t.ob*t.df-t.bb*t.cf)*i,s=-(t.tb*t.gf-t.df*t.yf)*i,u=(t.fb*t.gf-t.yf*t.cf)*i,c=-(t.fb*t.df-t.tb*t.cf)*i,l=(t.tb*t.ff-t.yf*t.bb)*i,h=-(t.fb*t.ff-t.yf*t.ob)*i,f=-(t.Ob*(r=(t.bb*t.gf-t.ff*t.df)*i)+t.Sb*a+t.Kg*o),p=-(t.Ob*s+t.Sb*u+t.Kg*c);t=-(t.Ob*l+t.Sb*h+t.Kg*(i*=t.fb*t.bb-t.tb*t.ob)),n.fb=r,n.tb=s,n.yf=l,n.ob=a,n.bb=u,n.ff=h,n.cf=o,n.df=c,n.gf=i,n.Ob=f,n.Sb=p,n.Kg=t},t.prototype.Cf=function(){var e=new t;return e.fb=this.fb,e.tb=this.tb,e.yf=this.yf,e.ob=this.ob,e.bb=this.bb,e.ff=this.ff,e.cf=this.cf,e.df=this.df,e.gf=this.gf,e.Ob=this.Ob,e.Sb=this.Sb,e.Kg=this.Kg,e},t}();e.u_=t}(J||(J={})),function(e){var t=function(t){function r(e){if(void 0!==e)e=t.call(this,e.fc(),e)||this;else{(e=t.call(this)||this).hg=[],e.hg[0]=0,e.Ca=1,e.Bh=[];for(var n=0;10>n;n++)e.Bh[n]=-1;e.Bh[e.hg[0]]=0}return e.Cq=!0,e}return Y(r,t),r.prototype.le=function(e){this.hasAttribute(e)||(this.Bh[e]=0,this.UD())},r.prototype.removeAttribute=function(t){if(0==t)throw e.f.I("Position attribue cannot be removed");this.hasAttribute(t)&&(this.Bh[t]=-1,this.UD())},r.prototype.reset=function(){this.hg[0]=0,this.Ca=1;for(var e=0;e<this.Bh.length;e++)this.Bh[e]=-1;this.Bh[this.hg[0]]=0,this.Cq=!0},r.prototype.Mz=function(){return n.bo().add(this)},r.ug=function(){return n.bo().rT()},r.Y_=function(){return n.bo().sT()},r.prototype.BN=function(){var t=this.fc();return new e.oa(t,this)},r.prototype.UD=function(){for(var e=this.Ca=0,t=0;10>e;e++)0<=this.Bh[e]&&(this.hg[t]=e,this.Bh[e]=t,t++,this.Ca++);this.Cq=!0},r.prototype.fc=function(){return this.Cq&&(this.Fl=this.Un(),this.Cq=!1),this.Fl},r.prototype.Ib=function(e){if(null==e)return!1;if(e==this)return!0;if(!(e instanceof r)||e.Ca!=this.Ca)return!1;for(var t=0;t<this.Ca;t++)if(this.hg[t]!=e.hg[t])return!1;return this.Cq==e.Cq},r.prototype.sH=function(e){if(e.Ca!=this.Ca)return!1;for(var t=0;t<this.Ca;t++)if(this.hg[t]!=e.hg[t])return!1;return!0},r.ox=function(e,t){for(var n=[],r=0;r<e.Ca;r++)n[r]=-1;r=0;for(var i=e.Ca;r<i;r++)n[r]=t.Yf(e.kd(r));return n},r.RS=function(e,t){return(e=new r(e)).le(t),e.Mz()},r.SS=function(e,t){for(var n=null,i=0;10>i;i++)!e.hasAttribute(i)&&t.hasAttribute(i)&&(null==n&&(n=new r(e)),n.le(i));return null!=n?n.Mz():e},r.E0=function(e,t){return(e=new r(e)).removeAttribute(t),e.Mz()},r}(e.oa);e.ke=t;var n=function(){function e(){this.map=[];var e=new t;this.add(e),(e=new t).le(1),this.add(e)}return e.bo=function(){return e.lM},e.prototype.rT=function(){return e.Nt},e.prototype.sT=function(){return e.Ot},e.prototype.add=function(t){var n=t.fc();if(null!=e.Nt&&e.Nt.fc()==n&&t.sH(e.Nt))return e.Nt;if(null!=e.Ot&&e.Ot.fc()==n&&t.sH(e.Ot))return e.Ot;var r=null;return void 0!==this.map[n]&&(r=this.map[n]),null==r&&(1==(r=t.BN()).Ca?e.Nt=r:2==r.Ca&&1==r.kd(1)?e.Ot=r:this.map[n]=r),r},e.lM=new e,e}()}(J||(J={}));var ne={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},re={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},ie=new(function(){function e(){this.YN=50,this.Gp=new Map,this.mj=[]}return e.prototype.clear=function(){this.mj.length=0,this.Gp.clear()},e.prototype.delete=function(e){return!!this.Gp.delete(e)&&(this.mj.splice(this.mj.indexOf(e),1),!0)},e.prototype.get=function(e){var t=this.Gp.get(e);if(void 0!==t)return this.mj[0]!==e&&(this.mj.splice(this.mj.indexOf(e),1),this.mj.unshift(e)),t},e.prototype.has=function(e){return this.Gp.has(e)},e.prototype.set=function(e,t){return void 0!==this.get(e)&&this.delete(e),this.mj.unshift(e),this.Gp.set(e,t),this.wN(),this},e.prototype.wN=function(){for(;this.mj.length&&this.mj.length>this.YN;){var e=this.mj.pop();this.Gp.delete(e)}},e}()),ae=((W={}).convertJSONToGeometry=function(e){return J.bc.pQ(e)},W.hasM=function(e){return e.hasAttribute(J.Mh.M)},W.hasZ=function(e){return e.hasAttribute(J.Mh.Z)},W.getPointX=function(e){return e.Ce()},W.getPointY=function(e){return e.lf()},W.getPointZ=function(e){return e.vT()},W.getPointM=function(e){return e.OS()},W.getXMin=function(e){return e.Ms()},W.getYMin=function(e){return e.Os()},W.getXMax=function(e){return e.Ls()},W.getYMax=function(e){return e.Ns()},W.getZExtent=function(e){return e.Qf(J.Mh.Z,0)},W.getMExtent=function(e){return e.Qf(J.Mh.M,0)},W.exportPaths=function(e){var t=[],n=e.$(),r=null,i=null,a=e.hasAttribute(J.Mh.Z),o=e.hasAttribute(J.Mh.M);a&&(r=e.Va(J.Mh.Z)),o&&(i=e.Va(J.Mh.M));for(var s=new J.b,u=0;u<n;u++){for(var c=e.ua(u),l=e.Ha(u),h=0,f=0,p=NaN,d=NaN,v=NaN,y=NaN,b=e.Lb(u),g=[],m=c;m<c+l;m++){e.w(m,s),y=v=NaN;var w=[s.x,s.y];a&&(v=r.get(m),w.push(v)),o&&(y=i.get(m),w.push(y)),m==c&&b&&(h=s.x,f=s.y,p=v,d=y),g.push(w)}!b||h==s.x&&f==s.y&&(!a||isNaN(p)&&isNaN(v)||p==v)&&(!o||isNaN(d)&&isNaN(y)||d==y)||g.push(g[0].slice(0)),t.push(g)}return t},W.exportPathsFlat=function(){},W.exportPoints=function(e){var t=e.hasAttribute(J.Mh.Z),n=e.hasAttribute(J.Mh.M),r=null,i=null;t&&(r=e.Va(J.Mh.Z)),n&&(i=e.Va(J.Mh.M));for(var a=new J.b,o=e.D(),s=[],u=0;u<o;u++){e.w(u,a);var c=[a.x,a.y];t&&c.push(r.get(u)),n&&c.push(i.get(u)),s.push(c)}return s},W.exportPointsFlat=function(){},W);return function(){function e(){}return e.buffer=I,e.clip=u,e.contains=l,e.convexHull=j,e.crosses=h,e.cut=c,e.densify=D,e.difference=_,e.disjoint=b,e.distance=f,e.equals=p,e.extendedSpatialReferenceInfo=s,e.generalize=R,e.geodesicArea=z,e.geodesicBuffer=T,e.geodesicDensify=L,e.geodesicLength=V,e.intersect=k,e.intersects=d,e.isSimple=w,e.nearestCoordinate=C,e.nearestVertex=E,e.nearestVertices=P,e.offset=M,e.overlaps=g,e.planarArea=N,e.planarLength=F,e.relate=m,e.simplify=O,e.symmetricDifference=x,e.touches=v,e.union=S,e.within=y,e.rotate=J.jy.rotate,e.flipHorizontal=J.jy.VR,e.flipVertical=J.jy.WR,e._enableProjection=G,e._project=q,e._getTransformation=U,e._getTransformationBySuitability=B,e}()}();void 0!==n&&(e.exports=n)})),a=Object.freeze(Object.assign(Object.create(null),i,{default:i}))},"9iar":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),u=n("fX31"),c=n("jWBI"),l=s.a.ofType(c.a);i.a.getLogger("esri.support.GraphicsCollection");var h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).on("before-add",(function(e){e.item||e.preventDefault()})),r.on("after-add",(function(e){return r._own(e.item)})),r.on("after-remove",(function(e){e.item.layer=null})),r}return Zt(n,[{key:"destroy",value:function(){this._unownAll()}},{key:"owner",get:function(){return this._get("owner")},set:function(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}},{key:"_createNewInstance",value:function(e){return new l(e)}},{key:"_ownAll",value:function(){var e=this;this.items.forEach((function(t){return e._own(t)}))}},{key:"_own",value:function(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}},{key:"_unownAll",value:function(){var e=this;this.items.forEach((function(t){return e._unown(t)}))}},{key:"_unown",value:function(e){e.layer===this.owner&&(e.layer=null)}}]),n}(l);Object(r.a)([Object(a.b)()],h.prototype,"owner",null),h=Object(r.a)([Object(o.a)("esri.support.GraphicsCollection")],h);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"graphics";return{type:h,cast:u.a,set:function(t){var n=Object(u.b)(t,this._get(e),h);n.owner=this,this._set(e,n)}}};t.b=h},"9lTW":function(e,t,n){"use strict";var r=n("MgzW");function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n("MCLT"),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c="foo"===(function(){}).name;function l(e){return Object.prototype.toString.call(e)}function h(e){return!a(e)&&"function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var f=e.exports=g,p=/\s*function\s+([^\(\s]*)\s*/;function d(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(p);return t&&t[1]}}function v(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(c||!o.isFunction(e))return o.inspect(e);var t=d(e);return"[Function"+(t?": "+t:"")+"]"}function b(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function g(e,t){e||b(e,!0,t,"==",f.ok)}function m(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(h(e)&&h(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=w(e),a=w(t);if(i&&!a||!i&&a)return!1;if(i)return m(e=u.call(e),t=u.call(t),n);var s,c,l=_(e),h=_(t);if(l.length!==h.length)return!1;for(l.sort(),h.sort(),c=l.length-1;c>=0;c--)if(l[c]!==h[c])return!1;for(c=l.length-1;c>=0;c--)if(!m(e[s=l[c]],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function O(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function j(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&b(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!e&&i&&!n;if((!e&&o.isError(i)&&a&&O(i,n)||s)&&b(i,n,"Got unwanted exception"+r),e&&i&&n&&!O(i,n)||!e&&i)throw i}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return v(y(e.actual),128)+" "+e.operator+" "+v(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=d(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},o.inherits(f.AssertionError,Error),f.fail=b,f.ok=g,f.equal=function(e,t,n){e!=t&&b(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&b(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){m(e,t,!1)||b(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){m(e,t,!0)||b(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){m(e,t,!1)&&b(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){m(t,n,!0)&&b(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&b(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&b(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){j(!0,e,t,n)},f.doesNotThrow=function(e,t,n){j(!1,e,t,n)},f.ifError=function(e){if(e)throw e},f.strict=r((function e(t,n){t||b(t,!0,n,"==",e)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var _=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}},"9pTf":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return h}));var r=n("f4Nx"),i=n("WZb1"),a=n("IlWj");function o(e){return new i.a({wkt:'GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",'.concat(e.radius,',0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]')})}var s=o(a.a),u=o(a.b),c=o(a.c),l=new i.a({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",'.concat(a.a.radius,',298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]')});function h(e){return e&&(Object(r.g)(e)||e===u)?u:e&&(Object(r.h)(e)||e===c)?c:s}function f(e){return e&&(Object(r.g)(e)||e===u)?a.b:e&&(Object(r.h)(e)||e===c)?a.c:a.a}function p(e){return Object(r.k)(e)?a.b:Object(r.l)(e)?a.c:a.a}},"9quj":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("nvBr"),c=n("qRWG"),l=n("XACZ"),h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).color=new u.a([0,0,0,1]),r.extensionLength=0,r.size=Object(c.i)(1),r}return Zt(n,[{key:"clone",value:function(){}},{key:"cloneProperties",value:function(){return{color:Object(i.a)(this.color),size:this.size,extensionLength:this.extensionLength}}}]),n}(s.a);Object(r.a)([Object(a.b)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],h.prototype,"type",void 0),Object(r.a)([Object(a.b)(l.a)],h.prototype,"color",void 0),Object(r.a)([Object(a.b)(Nt(Nt({},l.b),{},{json:{write:{overridePolicy:function(e){return{enabled:!!e}}}}}))],h.prototype,"extensionLength",void 0),Object(r.a)([Object(a.b)(l.b)],h.prototype,"size",void 0);var f,p=h=Object(r.a)([Object(o.a)("esri.symbols.edges.Edges3D")],h),d=n("RI0u"),v=f=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="sketch",r}return Zt(n,[{key:"clone",value:function(){return new f(this.cloneProperties())}}]),n}(p);Object(r.a)([Object(d.a)({sketch:"sketch"},{readOnly:!0})],v.prototype,"type",void 0);var y,b=v=f=Object(r.a)([Object(o.a)("esri.symbols.edges.SketchEdges3D")],v),g=y=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="solid",r}return Zt(n,[{key:"clone",value:function(){return new y(this.cloneProperties())}}]),n}(p);Object(r.a)([Object(d.a)({solid:"solid"},{readOnly:!0})],g.prototype,"type",void 0);var m={types:{key:"type",base:p,typeMap:{solid:g=y=Object(r.a)([Object(o.a)("esri.symbols.support.SolidEdges3D")],g),sketch:b}},json:{write:!0}}},"9w8m":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u}));var r=n("WZb1"),i=n("UhwK"),a=n("qatw"),o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.a.WebMercator}),minus180Line:new i.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.a({paths:[[[180,-180],[180,180]]],spatialReference:r.a.WGS84}),minus180Line:new i.a({paths:[[[-180,-180],[-180,180]]],spatialReference:r.a.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){var n,r=Vt(c(e));try{for(r.s();!(n=r.n()).done;){var i,a=Vt(n.value);try{for(a.s();!(i=a.n()).done;){i.value[0]+=t}}catch(o){a.e(o)}finally{a.f()}}}catch(o){r.e(o)}finally{r.f()}return e}function c(e){return Object(a.g)(e)?e.rings:e.paths}function l(e){var t=(null==e?void 0:e.isWebMercator)?102100:4326;return[o[t].minX,o[t].maxX]}},ACSY:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),s=n("qatw"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).geometries=null,r.outSpatialReference=null,r.transformation=null,r.transformForward=null,r}return Zt(n,[{key:"toJSON",value:function(){var e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],n={};return n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),n.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),n.geometries=JSON.stringify({geometryType:Object(s.c)(t),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(n.transformForward=this.transformForward),n}}]),n}(o.a);Object(r.a)([Object(i.b)()],u.prototype,"geometries",void 0),Object(r.a)([Object(i.b)({json:{read:{source:"outSR"}}})],u.prototype,"outSpatialReference",void 0),Object(r.a)([Object(i.b)()],u.prototype,"transformation",void 0),Object(r.a)([Object(i.b)()],u.prototype,"transformForward",void 0),u=Object(r.a)([Object(a.a)("esri.tasks.support.ProjectParameters")],u),t.a=u},ACjl:function(e,t,n){"use strict";var r=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),$t(a=t.call(this,e,r,i))instanceof n?Qt(a):Qt(a,new n(e,r,i))}return n}(n("NCOb").a);r.prototype.type="warning",t.a=r},ACyv:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ae}));var r=n("srIe"),i=n("OKTS"),a=n("Cy1f"),o=n("5DEt"),s=n("gYg2"),u=n("D8Ta"),c=n("dXfX"),l=n("QmHG"),h=n("8JEK"),f=n("yvcr"),p=n("qRWG"),d=n("15Hh"),v=n("kYAx"),y=n("2uVf"),b=n("r+FG"),g=n("AvGH"),m=n("HJJS"),w=n("M0lq"),O=n("/ADo"),j=n("EVMh"),_=n("EDiM"),x=n("tiP8"),k=n("2hxh"),S=n("aK8v"),M=n("fFEv"),I=n("NbNv"),T=n("WVfK"),A=n("DZYy"),C=n("pO5D"),E=n("w6Td"),P=n("ypgp"),R=n("2jVe"),D=n("+h6m"),L=n("jjdI"),N=n("GJyJ"),F=n("jpeq"),z=n("0nJL"),V=n("L5gG"),G=n("0MsP"),U=n("lhfp"),B=n("cHlT"),q=n("agdK"),H=n("viRi"),W=n("F7CJ"),J=n("dDjh"),Z=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build({output:r.output,FrontFacePass:2===r.transparencyPassType,viewingMode:e.viewingMode,occlusionTestEnabled:r.occlusionTestEnabled,signedDistanceFieldEnabled:r.sdf,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,debugDrawBorder:r.debugDrawBorder,binaryHighlightOcclusionEnabled:r.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:r.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:r.screenSizePerspective,verticalOffsetEnabled:r.verticalOffset,pixelSnappingEnabled:r.pixelSnappingEnabled,vvSize:r.vvSize,vvColor:r.vvColor,vvInstancingEnabled:!1,isDraped:r.isDraped,multipassGeometryEnabled:r.multipassGeometryEnabled});return new L.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),D.a)}},{key:"bindPass",value:function(e,t,n){F.a.bindProjectionMatrix(this.program,n.camera.projectionMatrix),this.program.setUniform1f("cameraGroundRelative",n.camera.aboveGround?1:-1),this.program.setUniform1f("perDistancePixelRatio",Math.tan(n.camera.fovY/2)/(n.camera.fullViewport[2]/2)),this.program.setUniformMatrix4fv("viewNormal",n.camera.viewInverseTransposeMatrix),this.program.setUniform1f("polygonOffset",t.shaderPolygonOffset),W.a.bindUniforms(this.program,t,n),V.a.bindUniforms(this.program,t),this.program.setUniform1f("pixelRatio",n.camera.pixelRatio||1),F.a.bindViewport(this.program,n),6===this.configuration.output?(B.a.bindUniforms(this.program),this.program.setUniform2fv("cameraNearFar",n.camera.nearFar),this.program.setUniform2fv("inverseViewport",n.inverseViewport),Object(U.a)(this.program,e,n)):(G.a.bindUniforms(this.program,n),A.a.bindUniforms(this.program,t,n.camera.pixelRatio||1),H.a.bindUniforms(this.program,t),this.configuration.occlusionTestEnabled&&G.a.bindVisibilityTexture(e,this.program,n)),4===this.configuration.output&&q.a.bindOutputHighlight(e,this.program,n)}},{key:"bindDraw",value:function(e){F.a.bindView(this.program,e),F.a.bindCamPosition(this.program,e.origin,e.camera.viewInverseTransposeMatrix),z.a.bindUniformsWithOrigin(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e){var t=this.configuration,n=3===e,r=this.configuration.polygonOffsetEnabled&&K,i=!n&&2!==e||4===t.output?null:(t.depthEnabled||6===t.output)&&N.c;return Object(N.d)({blending:0===t.output||7===t.output||4===t.output?n?Y:Object(J.a)(e):null,depthTest:{func:515},depthWrite:i,colorWrite:N.b,polygonOffset:r})}},{key:"initializePipeline",value:function(){return this.setPipelineState(this.configuration.transparencyPassType)}},{key:"primitiveType",get:function(){return 6===this.configuration.output?0:4}}]),n}(P.a);Z.shader=new E.a(A.b,(function(){return n.e(40).then(n.bind(null,"b6MZ"))}));var K={factor:0,units:-4},Y=Object(N.f)(1,771),X=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).output=0,e.occlusionTestEnabled=!0,e.sdf=!1,e.vvSize=!1,e.vvColor=!1,e.verticalOffset=!1,e.screenSizePerspective=!1,e.screenCenterOffsetUnitsEnabled=0,e.debugDrawBorder=!0,e.binaryHighlightOcclusion=!0,e.slicePlaneEnabled=!1,e.polygonOffsetEnabled=!1,e.depthEnabled=!0,e.transparencyPassType=3,e.pixelSnappingEnabled=!0,e.isDraped=!1,e.multipassGeometryEnabled=!1,e}return n}(R.a);Object(C.a)([Object(R.b)({count:8})],X.prototype,"output",void 0),Object(C.a)([Object(R.b)()],X.prototype,"occlusionTestEnabled",void 0),Object(C.a)([Object(R.b)()],X.prototype,"sdf",void 0),Object(C.a)([Object(R.b)()],X.prototype,"vvSize",void 0),Object(C.a)([Object(R.b)()],X.prototype,"vvColor",void 0),Object(C.a)([Object(R.b)()],X.prototype,"verticalOffset",void 0),Object(C.a)([Object(R.b)()],X.prototype,"screenSizePerspective",void 0),Object(C.a)([Object(R.b)({count:2})],X.prototype,"screenCenterOffsetUnitsEnabled",void 0),Object(C.a)([Object(R.b)()],X.prototype,"debugDrawBorder",void 0),Object(C.a)([Object(R.b)()],X.prototype,"binaryHighlightOcclusion",void 0),Object(C.a)([Object(R.b)()],X.prototype,"slicePlaneEnabled",void 0),Object(C.a)([Object(R.b)()],X.prototype,"polygonOffsetEnabled",void 0),Object(C.a)([Object(R.b)()],X.prototype,"depthEnabled",void 0),Object(C.a)([Object(R.b)({count:4})],X.prototype,"transparencyPassType",void 0),Object(C.a)([Object(R.b)()],X.prototype,"pixelSnappingEnabled",void 0),Object(C.a)([Object(R.b)()],X.prototype,"isDraped",void 0),Object(C.a)([Object(R.b)()],X.prototype,"multipassGeometryEnabled",void 0);var Q=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e,we)).techniqueConfig=new X,r}return Zt(n,[{key:"getTechniqueConfig",value:function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.verticalOffset=!!this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective,this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0,this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig.isDraped=this.params.isDraped,this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest,this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled,this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField,this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled,this.techniqueConfig.vvColor=!!this.params.vvColorEnabled,0===e&&(this.techniqueConfig.debugDrawBorder=!!this.params.debugDrawBorder),4===e&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion),this.techniqueConfig.depthEnabled=this.params.depthEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassGeometryEnabled=!!t&&t.multipassGeometryEnabled,this.techniqueConfig}},{key:"intersect",value:function(e,t,n,r,i,a,o,s,u){u?this.intersectDrapedHudGeometry(e,a,o,s):this.intersectHudGeometry(e,t,n,r,o,s)}},{key:"intersectDrapedHudGeometry",value:function(e,t,n,i){var a=e.vertexAttributes.get("position"),o=e.vertexAttributes.get("size"),s=this.params,u=Object(A.d)(s),c=1,l=1;if(Object(r.k)(i)){var h=i(ve);c=h[0],l=h[5]}c*=e.screenToWorldRatio,l*=e.screenToWorldRatio;for(var f=be*e.screenToWorldRatio,p=0;p<a.data.length/a.size;p++){var d=p*a.size,v=a.data[d],y=a.data[d+1],b=p*o.size,g=void 0;ge[0]=o.data[b]*c,ge[1]=o.data[b+1]*l,s.textureIsSignedDistanceField&&(g=s.outlineSize*e.screenToWorldRatio/2),ne(t,v,y,ge,f,g,s,u)&&n()}}},{key:"intersectHudGeometry",value:function(e,t,n,i,s,u){if(i.options.selectionMode&&i.options.hud&&!Object(x.d)(t)){var c=this.params,l=1,h=1;if(Object(m.d)(le,n),Object(r.k)(u)){var f=u(ve);l=f[0],h=f[5],function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=1/Math.sqrt(t*t+n*n+r*r),h=1/Math.sqrt(i*i+a*a+o*o),f=1/Math.sqrt(s*s+u*u+c*c);e[0]=t*l,e[1]=n*l,e[2]=r*l,e[3]=i*h,e[4]=a*h,e[5]=o*h,e[6]=s*f,e[7]=u*f,e[8]=c*f}(le)}var p=e.vertexAttributes.get("position"),v=e.vertexAttributes.get("size"),y=e.vertexAttributes.get("normal"),b=e.vertexAttributes.get("auxpos1");Object(j.a)(p.size>=3);var g=i.point,w=i.camera,O=Object(A.d)(c);l*=w.pixelRatio,h*=w.pixelRatio;for(var _="screen"===this.params.centerOffsetUnits,S=0;S<p.data.length/p.size;S++){var M=S*p.size;Object(o.v)(ae,p.data[M],p.data[M+1],p.data[M+2]),Object(o.l)(ae,ae,n);var I=S*v.size;ge[0]=v.data[I]*l,ge[1]=v.data[I+1]*h,Object(o.l)(ae,ae,w.viewMatrix);var T=S*b.size;if(Object(o.v)(pe,b.data[T+0],b.data[T+1],b.data[T+2]),!_&&(ae[0]+=pe[0],ae[1]+=pe[1],0!==pe[2])){var C=pe[2];Object(o.q)(pe,ae),Object(o.i)(ae,ae,Object(o.d)(pe,pe,C))}var E=S*y.size;if(Object(o.v)(oe,y.data[E],y.data[E+1],y.data[E+2]),this.normalAndViewAngle(oe,le,w,de),this.applyVerticalOffsetTransformationView(ae,de,w,re),w.applyProjection(ae,se),se[0]>-1){var P=void 0,R=Math.floor(se[0])+this.params.screenOffset[0],D=Math.floor(se[1])+this.params.screenOffset[1];if(_&&(R+=pe[0],0!==pe[1]&&(D+=Object(k.b)(pe[1],re.factorAlignment))),Object(k.a)(ge,re.factor,ge),c.textureIsSignedDistanceField&&(P=c.outlineSize*w.pixelRatio/2),ne(g,R,D,ge,ye*w.pixelRatio,P,c,O)){var L=i.ray;if(Object(o.l)(ce,ae,Object(d.a)(fe,w.viewMatrix)),se[0]=g[0],se[1]=g[1],w.unprojectFromRenderScreen(se,ae)){var N=Object(a.e)();Object(o.j)(N,L.direction);var F=1/Object(o.o)(N);Object(o.d)(N,N,F),s(Object(o.n)(L.origin,ae)*F,N,-1,1,!0,ce)}}}}}}},{key:"computeAttachmentOrigin",value:function(e,t){var n=e.vertexAttributes;if(!n)return!1;var r=n.get("position"),i=e.indices.get("position");return Object(_.b)(r,i,t)}},{key:"createBufferWriter",value:function(){return new je(this)}},{key:"normalAndViewAngle",value:function(e,t,n,r){return function(e){return(t=e)instanceof Float32Array&&t.length>=16||function(e){return Array.isArray(e)&&e.length>=16}(e);var t}(t)&&(t=Object(m.d)(he,t)),Object(o.w)(r.normal,e,t),Object(o.l)(r.normal,r.normal,n.viewInverseTransposeMatrix),r.cosAngle=Object(o.g)(ue,me),r}},{key:"updateScaleInfo",value:function(e,t,n){var r=this.params;r.screenSizePerspective?Object(k.c)(n,t,r.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minPixelSize=0,e.factor.paddingPixels=0),r.screenSizePerspectiveAlignment?Object(k.c)(n,t,r.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minPixelSize=e.factor.minPixelSize,e.factorAlignment.paddingPixels=e.factor.paddingPixels)}},{key:"applyShaderOffsetsView",value:function(e,t,n,r,i,a,o){var s=this.normalAndViewAngle(t,n,i,de);return this.applyVerticalGroundOffsetView(e,s,i,o),this.applyVerticalOffsetTransformationView(o,s,i,a),this.applyPolygonOffsetView(o,s,r[3],i,o),this.applyCenterOffsetView(o,r,o),o}},{key:"applyShaderOffsetsNDC",value:function(e,t,n,i,a){return this.applyCenterOffsetNDC(e,t,n,i),Object(r.k)(a)&&Object(o.j)(a,i),this.applyPolygonOffsetNDC(i,t,n,i),i}},{key:"applyPolygonOffsetView",value:function(e,t,n,r,a){var s=r.aboveGround?1:-1,u=Object(i.o)(n);0===u&&(u=s);var c=s*u;if(this.params.shaderPolygonOffset<=0)return Object(o.j)(a,e);var l=Object(i.c)(Math.abs(t.cosAngle),.01,1),h=1-Math.sqrt(1-l*l)/l/r.viewport[2];return Object(o.d)(a,e,c>0?h:1/h),a}},{key:"applyVerticalGroundOffsetView",value:function(e,t,n,r){var i=Object(o.o)(e),a=n.aboveGround?1:-1,s=.5*n.computeRenderPixelSizeAtDist(i),u=Object(o.d)(ae,t.normal,a*s);return Object(o.e)(r,e,u),r}},{key:"applyVerticalOffsetTransformationView",value:function(e,t,n,r){var i=this.params;if(!i.verticalOffset||!i.verticalOffset.screenLength){if(i.screenSizePerspective||i.screenSizePerspectiveAlignment){var a=Object(o.o)(e);this.updateScaleInfo(r,a,t.cosAngle)}else r.factor.scale=1,r.factorAlignment.scale=1;return e}var s=Object(o.o)(e),u=i.screenSizePerspectiveAlignment||i.screenSizePerspective,c=Object(M.g)(n,s,i.verticalOffset,t.cosAngle,u);return this.updateScaleInfo(r,s,t.cosAngle),Object(o.d)(t.normal,t.normal,c),Object(o.e)(e,e,t.normal)}},{key:"applyCenterOffsetView",value:function(e,t,n){var r="screen"!==this.params.centerOffsetUnits;return n!==e&&Object(o.j)(n,e),r&&(n[0]+=t[0],n[1]+=t[1],t[2]&&(Object(o.q)(oe,n),Object(o.e)(n,n,Object(o.d)(oe,oe,t[2])))),n}},{key:"applyCenterOffsetNDC",value:function(e,t,n,r){var i="screen"!==this.params.centerOffsetUnits;return r!==e&&Object(o.j)(r,e),i||(r[0]+=t[0]/n.fullWidth*2,r[1]+=t[1]/n.fullHeight*2),r}},{key:"applyPolygonOffsetNDC",value:function(e,t,n,r){var a=this.params.shaderPolygonOffset;if(e!==r&&Object(o.j)(r,e),a){var s=n.aboveGround?1:-1,u=s*Object(i.o)(t[3]);r[2]-=(u||s)*a}return r}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output?new ee(e):4===e.output?new te(e):void 0}},{key:"calculateRelativeScreenBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(v.g)();return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ie;Object(w.c)(r,e.anchorPos),r[0]*=-t[0],r[1]*=-t[1],r[0]+=e.screenOffset[0]*n,r[1]+=e.screenOffset[1]*n}(this.params,e,t,n),n[2]=n[0]+e[0],n[3]=n[1]+e[1],n}}]),n}(I.a),$=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,Nt(Nt({},e),e.material.params))).updateParameters(),r}return Zt(n,[{key:"beginSlot",value:function(e){return e===(this.material.params.drawInSecondSlot?19:18)}},{key:"updateParameters",value:function(e){this.updateTexture(this.material.params.textureId),this.selectProgram(e)}},{key:"selectProgram",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(Z,this.material.getTechniqueConfig(this.output,e),this.technique)}},{key:"ensureParameters",value:function(e){this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.bindTexture(e,this.technique.program),this.bindTextureScale(e,this.technique.program),this.technique.bindPass(e,this.material.params,t)}}]),n}(S.a),ee=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).isOcclusionSlot=!1,r}return Zt(n,[{key:"beginSlot",value:function(e){var t=this.material.params.drawInSecondSlot?19:18;return this.material.params.occlusionTest?(this.isOcclusionSlot=12===e,12===e||e===t):(this.isOcclusionSlot=!1,e===t)}},{key:"getTechnique",value:function(){return this.isOcclusionSlot?this.occlusionTechnique:this.technique}},{key:"selectProgram",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(Z,this.material.getTechniqueConfig(this.output,e),this.technique),this.occlusionTechnique=this.techniqueRep.acquireAndReleaseExisting(Z,this.material.getTechniqueConfig(6,e),this.occlusionTechnique)}},{key:"bind",value:function(e,t){var n=this.getTechnique();e.bindProgram(n.program),this.isOcclusionSlot||(this.bindTexture(e,n.program),this.bindTextureScale(e,n.program)),n.bindPass(e,this.material.params,t)}}]),n}($),te=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,Nt(Nt({},e),{},{output:4}))}return n}($);function ne(e,t,n,r,i,a,o,s){var u=t-i-(s[0]>0?r[0]*s[0]:0),c=u+r[0]+2*i,l=n-i-(s[1]>0?r[1]*s[1]:0),h=l+r[1]+2*i;if(o.textureIsSignedDistanceField){var f=o.distanceFieldBoundingBox;u+=r[0]*f[0],l+=r[1]*f[1],c-=r[0]*(1-f[2]),h-=r[1]*(1-f[3]),u-=a,c+=a,l-=a,h+=a}return e[0]>u&&e[0]<c&&e[1]>l&&e[1]<h}var re={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},ie=Object(g.a)(),ae=Object(a.e)(),oe=Object(a.e)(),se=Object(p.e)(),ue=Object(a.e)(),ce=Object(a.e)(),le=Object(y.a)(),he=Object(y.a)(),fe=Object(b.b)(),pe=Object(a.e)(),de={normal:ue,cosAngle:0},ve=Object(b.b)(),ye=1,be=2,ge=[0,0],me=Object(a.g)(0,0,1),we=Nt({texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:Object(g.e)(.5,.5),shaderPolygonOffset:1e-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1},I.b),Oe=Object(O.a)().vec3f("position").vec3f("normal").vec2f("uv0").vec4u8("color").vec2f("size").vec4f("auxpos1").vec4f("auxpos2"),je=function(){function e(t){Wt(this,e),this.material=t,this.vertexBufferLayout=Oe}return Zt(e,[{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){return 6*e.indices.get("position").length}},{key:"write",value:function(e,t,n,r){Object(T.e)(t.indices.get("position"),t.vertexAttributes.get("position").data,e.transformation,n.position,r,6),Object(T.d)(t.indices.get("normal"),t.vertexAttributes.get("normal").data,e.invTranspTransformation,n.normal,r,6);var i,a,o,s,u=t.vertexAttributes.get("uv0").data;if(null==u||u.length<4){var c=this.material.params;i=0,a=0,o=c.texCoordScale[0],s=c.texCoordScale[1]}else i=u[0],a=u[1],o=u[2],s=u[3];o=Math.min(1.99999,o+1),s=Math.min(1.99999,s+1);for(var l=t.indices.get("position").length,h=n.uv0,f=r,p=0;p<l;++p)h.set(f,0,i),h.set(f,1,a),f+=1,h.set(f,0,o),h.set(f,1,a),f+=1,h.set(f,0,o),h.set(f,1,s),f+=1,h.set(f,0,o),h.set(f,1,s),f+=1,h.set(f,0,i),h.set(f,1,s),f+=1,h.set(f,0,i),h.set(f,1,a),f+=1;Object(T.b)(t.indices.get("color"),t.vertexAttributes.get("color").data,4,n.color,r,6);for(var d=t.indices.get("size"),v=t.vertexAttributes.get("size").data,y=d.length,b=n.size,g=r,m=0;m<y;++m)for(var w=v[2*d[m]],O=v[2*d[m]+1],j=0;j<6;++j)b.set(g,0,w),b.set(g,1,O),g+=1;t.indices.get("auxpos1")&&t.vertexAttributes.get("auxpos1")&&Object(T.a)(t.indices.get("auxpos1"),t.vertexAttributes.get("auxpos1").data,n.auxpos1,r,6),t.indices.get("auxpos2")&&t.vertexAttributes.get("auxpos2")&&Object(T.a)(t.indices.get("auxpos2"),t.vertexAttributes.get("auxpos2").data,n.auxpos2,r,6)}}]),e}(),_e=n("Lg+x"),xe=n("Drlb");function ke(e,t){for(var n=e,r=new Uint8Array(4*n*n),i=n/2-.5,a=t/2,o=0;o<n;o++)for(var s=0;s<n;s++){var u=s+n*o,c=s-i,l=o-i,h=Math.sqrt(c*c+l*l)-a;h=h/e+.5,Object(j.h)(h,r,4*u)}return r}function Se(e,t,n){n&&(t/=Math.SQRT2);for(var r=new Uint8Array(4*e*e),i=0;i<e;i++)for(var a=0;a<e;a++){var o=a-.5*e+.25,s=.5*e-i-.75,u=i*e+a;if(n){var c=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=c}var l=Math.max(Math.abs(o),Math.abs(s))-.5*t;l=l/e+.5,Object(j.h)(l,r,4*u)}return r}function Me(e,t,n){n&&(t*=Math.SQRT2);for(var r=.5*t,i=new Uint8Array(4*e*e),a=0;a<e;a++)for(var o=0;o<e;o++){var s=o-.5*e,u=.5*e-a-1,c=a*e+o;if(n){var l=(s+u)/Math.SQRT2;u=(u-s)/Math.SQRT2,s=l}var h=void 0;h=(h=(s=Math.abs(s))>(u=Math.abs(u))?s>r?Math.sqrt((s-r)*(s-r)+u*u):u:u>r?Math.sqrt(s*s+(u-r)*(u-r)):s)/e+.5,Object(j.h)(h,i,4*c)}return i}n("wSAH");var Ie=n("Hizz"),Te=n("3WMd"),Ae=function(){function e(t){var n=this;Wt(this,e),this.view=null,this._geometry=null,this._size=3,this._color=Object(u.d)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=Object(u.d)(1,1,1,1),this._elevationInfo=null,this.resources=new Te.a({view:t.view,createResources:function(e){return n.createResources(e)},recreateGeometry:function(e,t){return e.geometry=n.recreateGeometry(t,e.material),Object(r.k)(e.geometry)?[e.geometry]:[]}});var i=!0;for(var a in t)a in this?"attached"===a?i=t[a]:this[a]=t[a]:console.error("Cannot set unknown property",a);this.attached=i}return Zt(e,[{key:"destroy",value:function(){this.resources.destroy()}},{key:"visible",get:function(){return this.resources.visible},set:function(e){this.resources.visible=e}},{key:"attached",get:function(){return this.resources.attached},set:function(e){this.resources.attached=e}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(e){if(e!==this._size){var t=this.preferredTextureSize;this._size=e,t<this.preferredTextureSize?Object(r.k)(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(e){Object(c.g)(e,this._color)||(Object(c.c)(this._color,e),this.updateMaterial())}},{key:"pixelSnappingEnabled",get:function(){return this._pixelSnappingEnabled},set:function(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this.updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(e){this._primitive!==e&&(this._primitive=e,Object(r.k)(this.resources)&&this.resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(e){e!==this._outlineSize&&(this._outlineSize=e,this.updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(e){Object(c.g)(e,this._outlineColor)||(Object(c.c)(this._outlineColor,e),this.updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(e){this._elevationInfo=e,this.resources&&this.resources.recreateGeometry()}},{key:"updateMaterial",value:function(){var e=this.resources.resources;Object(r.j)(e)||e.material.setParameterValues(this.materialParameters(e.texture.id))}},{key:"updateSizeAttribute",value:function(){var e=this.resources.resources,t=this.resources.object;if(!Object(r.j)(e)&&!Object(r.j)(t)){var n=e.geometry;if(!Object(r.j)(n)){var i=n.getMutableAttribute("size").data,a=this.geometrySize;i[0]=a,i[1]=a,t.geometryVertexAttrsUpdated(0)}}}},{key:"materialParameters",value:function(e){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:Ee,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:e,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}}},{key:"geometrySize",get:function(){return this._size/Ce}},{key:"recreateGeometry",value:function(e,t){var n=this.createRenderGeometry();return Object(r.k)(n)&&e.addGeometry(n,t),n}},{key:"createResources",value:function(e){var t=this.createTexture(),n=new Q(this.materialParameters(t.id)),i=this.recreateGeometry(e,n);return{material:n,texture:t,geometry:i,forEach:function(e){e(t),e(n),Object(r.k)(this.geometry)&&e(this.geometry)}}}},{key:"preferredTextureSize",get:function(){return Object(i.c)(Object(i.l)(2*this.geometrySize),16,128)}},{key:"createTexture",value:function(){var e=this.preferredTextureSize;return new Ie.a(function(e,t,n){switch(e){case"circle":return ke(t,n);case"square":return function(e,t){return Se(e,t,!1)}(t,n);case"cross":return function(e,t){return Me(e,t,!1)}(t,n);case"x":return function(e,t){return Me(e,t,!0)}(t,n);case"kite":return function(e,t){return Se(e,t,!0)}(t,n);case"triangle":return function(e,t){for(var n=new Uint8Array(4*e*e),r=Math.sqrt(1.25),i=(e-t)/2,a=0;a<e;a++)for(var o=0;o<e;o++){var s=a*e+o,u=(o-i)/t,c=(a-i+.75)/t,l=Math.max(-(1*u+-.5*c)/r,(1*(u-1)+-.5*-c)/r,-c);Object(j.h)(l*t/e+.5,n,4*s)}return n}(t,n);default:return ke(t,n)}}(this._primitive,e,e*Ce),{mipmap:!1,wrap:{s:33071,t:33071},width:e,height:e,components:4,noUnpackFlip:!0})}},{key:"calculateMapBounds",value:function(e){if(Object(r.j)(this.resources.resources)||Object(r.j)(this.resources.resources.geometry))return!1;var t=this.resources.resources.geometry.vertexAttributes.get("position");return Object(s.r)(t.data,this.view.renderCoordsHelper.spatialReference,Pe,this.view.spatialReference),Object(l.h)(e,Pe),!0}},{key:"createRenderGeometry",value:function(){var e=this.geometry;if(Object(r.j)(e))return null;var t=this.view,n=t.renderCoordsHelper,i=t.elevationProvider,a=Object(_e.c)(e,i,xe.a.fromElevationInfo(this.elevationInfo),n),u=Object(o.v)(h.d.get(),e.x,e.y,a),c=h.d.get();Object(s.r)(u,e.spatialReference,c,n.spatialReference);var l=this.geometrySize;return f.a.createPointGeometry(null,c,null,[l,l],[0,0,0,1])}}]),e}(),Ce=.5,Ee=[Ce/2,Ce/2,1-Ce/2,1-Ce/2],Pe=Object(a.e)()},"AD+e":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("8uAX"),i=function(){function e(){Wt(this,e),this.id=Object(r.a)()}return Zt(e,[{key:"unload",value:function(){}}]),e}()},AIxD:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return _}));var r=n("qatw"),i=function(e,t,n){return[t,n]},a=function(e,t,n){return[t,n,e[2]]},o=function(e,t,n){return[t,n,e[2],e[3]]};function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function u(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function c(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function l(e,t,n){for(var r,i,a,o,s=[],l=0;l<n.length;l++){var h=n[l];l>0?(a=u(e,h[0]),o=c(e,h[1]),a===r&&o===i||(s.push(t(h,a-r,o-i)),r=a,i=o)):(r=u(e,h[0]),i=c(e,h[1]),s.push(t(h,r,i)))}return s.length>0?s:null}function h(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function f(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function p(e,t,n){var r=new Array(n.length);if(!n.length)return r;var i=zt(e.scale,2),a=i[0],o=i[1],s=h(e,n[0][0]),u=f(e,n[0][1]);r[0]=t(n[0],s,u);for(var c=1;c<n.length;c++){var l=n[c];s+=l[0]*a,u-=l[1]*o,r[c]=t(l,s,u)}return r}function d(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=p(e,t,n[i]);return r}function v(e,t,n,r,s){return t.points=function(e,t,n,r){return l(e,n?r?o:a:r?a:i,t)}(e,n.points,r,s),t}function y(e,t,n,r,i){return t.x=u(e,n.x),t.y=c(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function b(e,t,n,r,s){var u=function(e,t,n,r){for(var s=[],u=n?r?o:a:r?a:i,c=0;c<t.length;c++){var h=l(e,u,t[c]);h&&h.length>=3&&s.push(h)}return s.length?s:null}(e,n.rings,r,s);return u?(t.rings=u,t):null}function g(e,t,n,r,s){var u=function(e,t,n,r){for(var s=[],u=n?r?o:a:r?a:i,c=0;c<t.length;c++){var h=l(e,u,t[c]);h&&h.length>=2&&s.push(h)}return s.length?s:null}(e,n.paths,r,s);return u?(t.paths=u,t):null}function m(e,t){return e&&t?Object(r.f)(t)?y(e,{},t,!1,!1):Object(r.h)(t)?g(e,{},t,!1,!1):Object(r.g)(t)?b(e,{},t,!1,!1):Object(r.e)(t)?v(e,{},t,!1,!1):Object(r.d)(t)?((i={}).xmin=u(n=e,(a=t).xmin),i.ymin=c(n,a.ymin),i.xmax=u(n,a.xmax),i.ymax=c(n,a.ymax),i):null:null;var n,i,a}function w(e,t,n,r,s){return t.points=function(e,t,n,r){return p(e,n?r?o:a:r?a:i,t)}(e,n.points,r,s),t}function O(e,t,n,r,i){return t.x=h(e,n.x),t.y=f(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function j(e,t,n,r,s){return t.rings=function(e,t,n,r){return d(e,n?r?o:a:r?a:i,t)}(e,n.rings,r,s),t}function _(e,t,n,r,s){return t.paths=function(e,t,n,r){return d(e,n?r?o:a:r?a:i,t)}(e,n.paths,r,s),t}},AMWc:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),s=n("LE9a"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).floorField=null,r.viewAllMode=!1,r.viewAllLevelIds=new s.a,r}return n}(o.a);Object(r.a)([Object(i.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],u.prototype,"floorField",void 0),Object(r.a)([Object(i.b)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),Object(r.a)([Object(i.b)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=Object(r.a)([Object(a.a)("esri.layers.support.LayerFloorInfo")],u),t.a=u},ATu9:function(e,t,n){"use strict";var r=n("wSAH"),i=n("7Nfj"),a=4294967296,o=Object(r.a)("esri-text-decoder")?new TextDecoder("utf-8"):null,s=Object(r.a)("safari")||Object(r.a)("ios")?6:Object(r.a)("ff")?12:32,u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.byteLength:0;Wt(this,e),this._tag=0,this._dataType=99,this.init(t,n,r,i)}return Zt(e,[{key:"init",value:function(e,t,n,r){this._data=e,this._dataView=t,this._pos=n,this._end=r}},{key:"clone",value:function(){return new e(this._data,this._dataView,this._pos,this._end)}},{key:"pos",value:function(){return this._pos}},{key:"move",value:function(e){this._pos=e}},{key:"nextTag",value:function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}},{key:"next",value:function(){if(this._pos===this._end)return!1;var e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}},{key:"empty",value:function(){return this._pos>=this._end}},{key:"tag",value:function(){return this._tag}},{key:"getInt32",value:function(){return this._decodeVarint()}},{key:"getInt64",value:function(){return this._decodeVarint()}},{key:"getUInt32",value:function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}},{key:"getUInt64",value:function(){return this._decodeVarint()}},{key:"getSInt32",value:function(){var e=this.getUInt32();return e>>>1^-(1&e)|0}},{key:"getSInt64",value:function(){return this._decodeSVarint()}},{key:"getBool",value:function(){var e=0!==this._data[this._pos];return this._skip(1),e}},{key:"getEnum",value:function(){return this._decodeVarint()}},{key:"getFixed64",value:function(){var e=this._dataView,t=this._pos,n=e.getUint32(t,!0)+e.getUint32(t+4,!0)*a;return this._skip(8),n}},{key:"getSFixed64",value:function(){var e=this._dataView,t=this._pos,n=e.getUint32(t,!0)+e.getInt32(t+4,!0)*a;return this._skip(8),n}},{key:"getDouble",value:function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}},{key:"getFixed32",value:function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}},{key:"getSFixed32",value:function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}},{key:"getFloat",value:function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}},{key:"getString",value:function(){var e=this._getLength(),t=this._pos,n=this._toString(this._data,t,t+e);return this._skip(e),n}},{key:"getBytes",value:function(){var e=this._getLength(),t=this._pos,n=this._toBytes(this._data,t,t+e);return this._skip(e),n}},{key:"getLength",value:function(){return this._getLengthUnsafe()}},{key:"processMessageWithArgs",value:function(e,t,n,r){var i=this.getMessage(),a=e(i,t,n,r);return i.release(),a}},{key:"processMessage",value:function(e){var t=this.getMessage(),n=e(t);return t.release(),n}},{key:"getMessage",value:function(){var t=this._getLength(),n=e.pool.acquire();return n.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),n}},{key:"release",value:function(){e.pool.release(this)}},{key:"dataType",value:function(){return this._dataType}},{key:"skip",value:function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}},{key:"skipLen",value:function(e){this._skip(e)}},{key:"_skip",value:function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}},{key:"_decodeVarint",value:function(){var e,t=this._data,n=this._pos,r=0;if(this._end-n>=10)do{if(r|=127&(e=t[n++]),0==(128&e))break;if(r|=(127&(e=t[n++]))<<7,0==(128&e))break;if(r|=(127&(e=t[n++]))<<14,0==(128&e))break;if(r|=(127&(e=t[n++]))<<21,0==(128&e))break;if(r+=268435456*(127&(e=t[n++])),0==(128&e))break;if(r+=34359738368*(127&(e=t[n++])),0==(128&e))break;if(r+=4398046511104*(127&(e=t[n++])),0==(128&e))break;if(r+=562949953421312*(127&(e=t[n++])),0==(128&e))break;if(r+=72057594037927940*(127&(e=t[n++])),0==(128&e))break;if(r+=0x8000000000000000*(127&(e=t[n++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var i=1;n!==this._end&&0!=(128&(e=t[n]));)++n,r+=(127&e)*i,i*=128;if(n===this._end)throw new Error("Varint overrun!");++n,r+=e*i}return this._pos=n,r}},{key:"_decodeSVarint",value:function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2}},{key:"_getLength",value:function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}},{key:"_getLengthUnsafe",value:function(){return this.getUInt32()}},{key:"_toString",value:function(e,t,n){if((n=Math.min(this._end,n))-t>s&&o){var r=e.subarray(t,n);return o.decode(r)}for(var i="",a="",u=t;u<n;++u){var c=e[u];128&c?a+="%"+c.toString(16):(i+=decodeURIComponent(a)+String.fromCharCode(c),a="")}return a.length&&(i+=decodeURIComponent(a)),i}},{key:"_toBytes",value:function(e,t,n){return n=Math.min(this._end,n),new Uint8Array(e.buffer,t,n-t)}}]),e}();u.pool=new i.a(u,null,(function(e){e._data=null,e._dataView=null})),t.a=u},AY31:function(e,t,n){"use strict";var r=n("f4Nx"),i=n("rlSK");function a(e,t){return[e,t]}function o(e,t,n){return e[0]=t,e[1]=n,e}var s=new i.a("0/0/0/0"),u=function(){function e(t,n,r,i,a,o,s,u,c,l,h,f){Wt(this,e),this.level=t,this.resolution=n,this.scale=r,this.origin=i,this.first=a,this.last=o,this.size=s,this.norm=u,this.worldStart=c,this.worldEnd=l,this.worldSize=h,this.wrap=f}return Zt(e,[{key:"normalizeCol",value:function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}},{key:"denormalizeCol",value:function(e,t){return this.wrap?this.worldSize[0]*t+e:e}},{key:"getWorldForColumn",value:function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}},{key:"getFirstColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]}},{key:"getLastColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}},{key:"getColumnForX",value:function(e){return(e-this.origin[0])/this.norm[0]}},{key:"getXForColumn",value:function(e){return this.origin[0]+e*this.norm[0]}},{key:"getRowForY",value:function(e){return(this.origin[1]-e)/this.norm[1]}},{key:"getYForRow",value:function(e){return this.origin[1]-e*this.norm[1]}},{key:"getTileBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.set(t);var r=n?s.col:this.denormalizeCol(s.col,s.world),i=s.row;return function(e,t,n,r,i){e[0]=t,e[1]=n,e[2]=r,e[3]=i}(e,this.getXForColumn(r),this.getYForRow(i+1),this.getXForColumn(r+1),this.getYForRow(i)),e}},{key:"getTileCoords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.set(t);var r=n?s.col:this.denormalizeCol(s.col,s.world);return Array.isArray(e)?o(e,this.getXForColumn(r),this.getYForRow(s.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(s.row)),e}}],[{key:"create",value:function(t,n,i){var s,u,c,l,h=Object(r.d)(t.spatialReference),f=a(t.origin.x,t.origin.y),p=a(t.size[0]*n.resolution,t.size[1]*n.resolution),d=a(-1/0,-1/0),v=a(1/0,1/0),y=a(1/0,1/0);return i&&(o(d,Math.max(0,Math.floor((i.xmin-f[0])/p[0])),Math.max(0,Math.floor((f[1]-i.ymax)/p[1]))),o(v,Math.max(0,Math.floor((i.xmax-f[0])/p[0])),Math.max(0,Math.floor((f[1]-i.ymin)/p[1]))),o(y,v[0]-d[0]+1,v[1]-d[1]+1)),t.isWrappable?(s=a(Math.ceil(Math.round((h.valid[1]-h.valid[0])/n.resolution)/t.size[0]),y[1]),u=a(Math.floor((h.origin[0]-f[0])/p[0]),d[1]),c=a(s[0]+u[0]-1,v[1]),l=!0):(u=d,c=v,s=y,l=!1),new e(n.level,n.resolution,n.scale,f,d,v,y,p,u,c,s,l)}}]),e}(),c=n("umoc"),l=function e(t,n,r){Wt(this,e),this.row=t,this.colFrom=n,this.colTo=r},h=new i.a("0/0/0/0"),f=function(){function e(t,n,r,i,a,o,s,u){Wt(this,e),this.x=t,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=a,this.rightAdjust=o,this.leftBound=s,this.rightBound=u}return Zt(e,[{key:"incrRow",value:function(){this.x+=this.invM}},{key:"getLeftCol",value:function(){return Math.max(this.x+this.leftAdjust,this.leftBound)}},{key:"getRightCol",value:function(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}],[{key:"create",value:function(t,n){var r;t[1]>n[1]&&(t=(r=[n,t])[0],n=r[1]);var i=zt(t,2),a=i[0],o=i[1],s=zt(n,2),u=s[0],c=s[1],l=u-a,h=c-o,f=0!==h?l/h:0,p=(Math.ceil(o)-o)*f,d=(Math.floor(o)-o)*f;return new e(a,Math.floor(o),Math.ceil(c),f,l<0?p:d,l<0?d:p,l<0?u:a,l<0?a:u)}}]),e}(),p=[[0,0],[0,0],[0,0],[0,0]];t.a=function(){function e(t,n){var r=this;Wt(this,e),this.tileInfo=t,this.fullExtent=n,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};var i=t.lods.slice();i.sort((function(e,t){return t.scale-e.scale}));var a=this._lodInfos=i.map((function(e){return u.create(t,e,n)}));i.forEach((function(e,t){r._infoByLevel[e.level]=a[t],r._infoByScale[e.scale]=a[t],r.scales[t]=e.scale}),this),this._wrap=t.isWrappable}return Zt(e,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}},{key:"getLODInfoAt",value:function(e){return this._infoByLevel["number"==typeof e?e:e.level]}},{key:"getTileBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.set(t);var r=this._infoByLevel[h.level];return r?r.getTileBounds(e,h,n):e}},{key:"getTileCoords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.set(t);var r=this._infoByLevel[h.level];return r?r.getTileCoords(e,h,n):e}},{key:"getTileCoverage",value:function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:192,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"closest",o="closest"===a?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=c.a.pool.acquire(o),u=this._wrap,h=1/0,d=-1/0,v=s.spans;p[0][0]=p[0][1]=p[1][1]=p[3][0]=-i,p[1][0]=p[2][0]=e.size[0]+i,p[2][1]=p[3][1]=e.size[1]+i;var y,b=Vt(p);try{for(b.s();!(y=b.n()).done;){var g=y.value;e.toMap(g,g),g[0]=o.getColumnForX(g[0]),g[1]=o.getRowForY(g[1])}}catch(A){b.e(A)}finally{b.f()}for(var m=[],w=3,O=0;O<4;O++)if(p[O][1]!==p[w][1]){var j=f.create(p[O],p[w]);h=Math.min(j.ymin,h),d=Math.max(j.ymax,d),void 0===m[j.ymin]&&(m[j.ymin]=[]),m[j.ymin].push(j),w=O}else w=O;if(null==h||null==d||d-h>100)return null;var _=[];for(t=h;t<d;){null!=m[t]&&(_=_.concat(m[t])),n=1/0,r=-1/0;for(var x=_.length-1;x>=0;x--){var k=_[x];n=Math.min(n,k.getLeftCol()),r=Math.max(r,k.getRightCol())}if(n=Math.floor(n),r=Math.floor(r),t>=o.first[1]&&t<=o.last[1])if(u)if(o.size[0]<o.worldSize[0])for(var S=Math.floor(r/o.worldSize[0]),M=Math.floor(n/o.worldSize[0]);M<=S;M++)v.push(new l(t,Math.max(o.getFirstColumnForWorld(M),n),Math.min(o.getLastColumnForWorld(M),r)));else v.push(new l(t,n,r));else n>o.last[0]||r<o.first[0]||(n=Math.max(n,o.first[0]),r=Math.min(r,o.last[0]),v.push(new l(t,n,r)));t+=1;for(var I=_.length-1;I>=0;I--){var T=_[I];T.ymax>=t?T.incrRow():_.splice(I,1)}}return s}},{key:"getTileParentId",value:function(e){h.set(e);var t=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;return t<0?null:(this._getTileIdAtLOD(h,this._lodInfos[t],h),h.id)}},{key:"getTileResolution",value:function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}},{key:"getTileScale",value:function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1}},{key:"intersects",value:function(e,t){h.set(t);var n=this._infoByLevel[h.level],r=e.lodInfo;if(r.resolution>n.resolution){this._getTileIdAtLOD(h,r,h);var i,a=r.denormalizeCol(h.col,h.world),o=Vt(e.spans);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.row===h.row&&s.colFrom<=a&&s.colTo>=a)return!0}}catch(w){o.e(w)}finally{o.f()}}if(r.resolution<n.resolution){var u=zt(e.spans.reduce((function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e}),[1/0,-1/0,1/0,-1/0]),4),c=u[0],l=u[1],f=u[2],p=u[3],d=n.denormalizeCol(h.col,h.world),v=r.getColumnForX(n.getXForColumn(d)),y=r.getRowForY(n.getYForRow(h.row)),b=r.getColumnForX(n.getXForColumn(d+1))-1,g=r.getRowForY(n.getYForRow(h.row+1))-1;return!(v>p||b<f||y>l||g<c)}var m=r.denormalizeCol(h.col,h.world);return e.spans.some((function(e){return e.row===h.row&&e.colFrom<=m&&e.colTo>=m}))}},{key:"normalizeBounds",value:function(e,t,n){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var i=Object(r.d)(this.tileInfo.spatialReference),a=-n*(i.valid[1]-i.valid[0]);e[0]+=a,e[2]+=a}return e}},{key:"getSmallestInfoForScale",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(var n=1;n<t.length-1;n++)if(e>t[n]+1e-6)return this._infoByScale[t[n-1]];return this._infoByScale[t[t.length-1]]}},{key:"getClosestInfoForScale",value:function(e){var t=this.scales;return this._infoByScale[e]||(e=t.reduce((function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t}),t[0])),this._infoByScale[e]}},{key:"scaleToLevel",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var n=t.length-1;n>=0;n--)if(e<t[n])return n===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[n]].level+(t[n]-e)/(t[n]-t[n+1]);return this._infoByScale[t[0]].level}},{key:"scaleToZoom",value:function(e){return this.tileInfo.scaleToZoom(e)}},{key:"_getTileIdAtLOD",value:function(e,t,n){var r=this._infoByLevel[n.level];return e.set(n),t.resolution<r.resolution?null:(t.resolution===r.resolution||(e.level=t.level,e.col=Math.floor(n.col*r.resolution/t.resolution+.01),e.row=Math.floor(n.row*r.resolution/t.resolution+.01)),e)}}]),e}()},"AiS/":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("EyXx")),a=n("srIe"),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("r88o"),c=n("04ZG"),l=n("zlDU"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),f=n("ag7Y"),p=n("OvF4"),d=n("IDUf"),v=n("975N"),y=n("Lqtk"),b=(n("G48n"),n("bV/r")),g=n("6aRp"),m=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).nextQueryParams=null,r.queryParams=null,r.results=null,r.total=null,r}return n}(n("/CmD").a);Object(r.a)([Object(s.b)()],m.prototype,"nextQueryParams",void 0),Object(r.a)([Object(s.b)()],m.prototype,"queryParams",void 0),Object(r.a)([Object(s.b)()],m.prototype,"results",void 0),Object(r.a)([Object(s.b)()],m.prototype,"total",void 0);var w,O,j=m=Object(r.a)([Object(c.a)("esri.portal.PortalQueryResult")],m),_=n("gYW1"),x={PortalGroup:function(){return Promise.resolve().then(n.bind(null,"8aRT"))},PortalItem:function(){return Promise.resolve().then(n.bind(null,"p+Gi"))},PortalUser:function(){return Promise.resolve().then(n.bind(null,"gYW1"))}},k=w=function(e){Kt(b,e);var t,r,s,u,c,f,p=Xt(b);function b(e){var t;return Wt(this,b),(t=p.call(this,e)).access=null,t.allSSL=!1,t.authMode="auto",t.authorizedCrossOriginDomains=null,t.basemapGalleryGroupQuery=null,t.bingKey=null,t.canListApps=!1,t.canListData=!1,t.canListPreProvisionedItems=!1,t.canProvisionDirectPurchase=!1,t.canSearchPublic=!0,t.canShareBingPublic=!1,t.canSharePublic=!1,t.canSignInArcGIS=!1,t.canSignInIDP=!1,t.colorSetsGroupQuery=null,t.commentsEnabled=!1,t.created=null,t.culture=null,t.customBaseUrl=null,t.defaultBasemap=null,t.defaultExtent=null,t.defaultVectorBasemap=null,t.description=null,t.eueiEnabled=null,t.featuredGroups=null,t.featuredItemsGroupQuery=null,t.galleryTemplatesGroupQuery=null,t.livingAtlasGroupQuery=null,t.hasCategorySchema=!1,t.helperServices=null,t.homePageFeaturedContent=null,t.homePageFeaturedContentCount=null,t.httpPort=null,t.httpsPort=null,t.id=null,t.ipCntryCode=null,t.isPortal=!1,t.isReadOnly=!1,t.layerTemplatesGroupQuery=null,t.maxTokenExpirationMinutes=null,t.modified=null,t.name=null,t.portalHostname=null,t.portalMode=null,t.portalProperties=null,t.region=null,t.rotatorPanels=null,t.showHomePageDescription=!1,t.sourceJSON=null,t.supportsHostedServices=!1,t.symbolSetsGroupQuery=null,t.templatesGroupQuery=null,t.units=null,t.url=i.a.portalUrl,t.urlKey=null,t.user=null,t.useStandardizedQuery=!1,t.useVectorBasemaps=!1,t.vectorBasemapGalleryGroupQuery=null,t}return Zt(b,[{key:"normalizeCtorArgs",value:function(e){return"string"==typeof e?{url:e}:e}},{key:"destroy",value:function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}},{key:"readAuthorizedCrossOriginDomains",value:function(e){if(e){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1===i.a.request.trustedServers.indexOf(r)&&i.a.request.trustedServers.push(r)}}catch(a){n.e(a)}finally{n.f()}}return e}},{key:"readDefaultBasemap",value:function(e){if(e){var t=O.fromJSON(e);return t.portalItem={portal:this},t}return null}},{key:"readDefaultVectorBasemap",value:function(e){if(e){var t=O.fromJSON(e);return t.portalItem={portal:this},t}return null}},{key:"extraQuery",get:function(){return this.id&&this.user&&this.user.orgId&&!this.canSearchPublic?" AND orgid:"+this.id:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){var e=this.url;if(e){var t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}},{key:"thumbnailUrl",get:function(){var e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}},{key:"readUrlKey",value:function(e){return e?e.toLowerCase():e}},{key:"readUser",value:function(e){var t=null;return e&&((t=_.default.fromJSON(e)).portal=this),t}},{key:"load",value:function(e){var t=this,r=Promise.resolve().then(n.bind(null,"YZ0+")).then((function(t){var n=t.default;Object(h.u)(e),O=n})).then((function(){return t.sourceJSON?t.sourceJSON:t._fetchSelf(t.authMode,!1,e)})).then((function(e){if(v.b){var n=v.b;t.credential=n.findCredential(t.restUrl),t.credential||t.authMode!==w.AUTH_MODE_AUTO||(t._esriId_credentialCreateHandle=n.on("credential-create",(function(){n.findCredential(t.restUrl)&&t._signIn()})))}t.sourceJSON=e,t.read(e)}));return this.addResolvingPromise(r),Promise.resolve(this)}},{key:"createClosestFacilityTask",value:(f=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("closestFacility"),e.next=6,Promise.all([n.e(0),n.e(172)]).then(n.bind(null,"t0D6"));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"createElevationLayers",value:(c=Ut(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperService("defaultElevationLayers"),e.next=5,Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"8g7C"));case 5:return r=e.sent.default,e.abrupt("return",t?t.map((function(e){return new r({id:e.id,url:e.url})})):[]);case 7:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"createGeometryService",value:(u=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("geometry"),e.next=6,Promise.resolve().then(n.bind(null,"1E6V"));case 6:return e.t0=e.sent.default,e.t1={url:t},e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"createPrintTask",value:(s=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("printTask"),e.next=6,Promise.resolve().then(n.bind(null,"9XlO"));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"createRouteTask",value:(r=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("route"),e.next=6,Promise.all([n.e(0),n.e(173)]).then(n.bind(null,"mL23"));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"createServiceAreaTask",value:(t=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("serviceArea"),e.next=6,Promise.all([n.e(0),n.e(174)]).then(n.bind(null,"IIJ+"));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"fetchBasemaps",value:function(e,t){var n=new g.a;return n.query=e||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),n.disableExtraQuery=!0,this.queryGroups(n,t).then((function(e){if(n.num=100,n.query='type:"Web Map" -type:"Web Application"',e.total){var r=e.results[0];return n.sortField=r.sortField||"name",n.sortOrder=r.sortOrder||"desc",r.queryItems(n,t)}return null})).then((function(e){return e&&e.total?e.results.filter((function(e){return"Web Map"===e.type})).map((function(e){return new O({portalItem:e})})):[]}))}},{key:"fetchCategorySchema",value:function(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((function(e){return e.categorySchema})):Object(h.n)(e)?Promise.reject(Object(h.e)()):Promise.resolve([])}},{key:"fetchFeaturedGroups",value:function(e){var t=this.featuredGroups,n=new g.a;if(n.num=100,n.sortField="title",t&&t.length){var r,i=[],a=Vt(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push('(title:"'.concat(o.title,'" AND owner:').concat(o.owner,")"))}}catch(s){a.e(s)}finally{a.f()}return n.query=i.join(" OR "),this.queryGroups(n,e).then((function(e){return e.results}))}return Object(h.n)(e)?Promise.reject(Object(h.e)()):Promise.resolve([])}},{key:"fetchRegions",value:function(e){var t=this.user&&this.user.culture||this.culture||Object(d.b)();return this._request(this.restUrl+"/portals/regions",Nt(Nt({},e),{},{query:{culture:t}}))}},{key:"queryGroups",value:function(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}},{key:"queryItems",value:function(e,t){return this._queryPortal("/search",e,"PortalItem",t)}},{key:"queryUsers",value:function(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}},{key:"toJSON",value:function(){throw new l.a("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}},{key:"_getHelperService",value:function(e){var t=this.helperServices&&this.helperServices[e];if(!t)throw new l.a("portal:service-not-found",'The `helperServices` do not include an entry named "'.concat(e,'"'));return t}},{key:"_getHelperServiceUrl",value:function(e){var t=this._getHelperService(e);if(!t.url)throw new l.a("portal:service-url-not-found",'The `helperServices` entry "'.concat(e,'" does not include a `url` value'));return t.url}},{key:"_fetchSelf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.authMode,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.restUrl+"/portals/self",i=Nt({authMode:e,query:{culture:Object(d.b)().toLowerCase()}},n);return"auto"===i.authMode&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this._request(r,i)}},{key:"_queryPortal",value:function(e,t,n,r){var i=this,a=Object(o.m)(g.a,t),s=function(t){return i._request(i.restUrl+e,Nt(Nt({},a.toRequestOptions(i)),r)).then((function(e){var n=a.clone();return n.start=e.nextStart,new j({nextQueryParams:n,queryParams:a,total:e.total,results:w._resultsToTypedArray(t,{portal:i},e,r)})})).then((function(e){return Promise.all(e.results.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return e}),(function(t){return Object(h.t)(t),e}))}))};return n&&x[n]?x[n]().then((function(e){var t=e.default;return Object(h.u)(r),s(t)})):s()}},{key:"_signIn",value:function(){var e=this;if(this.authMode===w.AUTH_MODE_ANONYMOUS)return Promise.reject(new l.a("portal:invalid-auth-mode",'Current "authMode"\' is "'.concat(this.authMode,'"')));if("failed"===this.loadStatus)return Promise.reject(this.loadError);var t=function(t){return Promise.resolve().then((function(){return"not-loaded"===e.loadStatus?(t||(e.authMode="immediate"),e.load().then((function(){return null}))):"loading"===e.loadStatus?e.load().then((function(){return e.credential?null:(e.credential=t,e._fetchSelf("immediate"))})):e.user&&e.credential===t?null:(e.credential=t,e._fetchSelf("immediate"))})).then((function(t){t&&(e.sourceJSON=t,e.read(t))}))};return v.b?v.b.getCredential(this.restUrl).then((function(e){return t(e)})):t(this.credential)}},{key:"_normalizeSSL",value:function(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}},{key:"_normalizeUrl",value:function(e){var t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}},{key:"_requestToTypedArray",value:function(e,t,n){var r=this;return this._request(e,t).then((function(e){var t=w._resultsToTypedArray(n,{portal:r},e);return Promise.all(t.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return t}),(function(){return t}))}))}},{key:"_request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Nt({f:"json"},t.query),r=t.authMode,i=void 0===r?this.authMode===w.AUTH_MODE_ANONYMOUS?"anonymous":"auto":r,a=t.body,o=void 0===a?null:a,s=t.cacheBust,u=void 0!==s&&s,c=t.method,l=void 0===c?"auto":c,h=t.responseType,f=void 0===h?"json":h,p=t.signal,d={authMode:i,body:o,cacheBust:u,method:l,query:n,responseType:f,timeout:0,signal:p};return Object(y.default)(this._normalizeSSL(e),d).then((function(e){return e.data}))}}],[{key:"getDefault",value:function(){return w._default&&!w._default.destroyed||(w._default=new w),w._default}},{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new w({sourceJSON:e})}},{key:"_resultsToTypedArray",value:function(e,t,n,r){var i;if(n){var o=Object(a.k)(r)?r.signal:null;i=n.listings||n.notifications||n.userInvitations||n.tags||n.items||n.groups||n.comments||n.provisions||n.results||n.relatedItems||n,(e||t)&&(i=i.map((function(n){var r=Object.assign(e?e.fromJSON(n):n,t);return"function"==typeof r.load&&r.load(o),r})))}else i=[];return i}}]),b}(Object(f.b)(b.a));k.AUTH_MODE_ANONYMOUS="anonymous",k.AUTH_MODE_AUTO="auto",k.AUTH_MODE_IMMEDIATE="immediate",Object(r.a)([Object(s.b)()],k.prototype,"access",void 0),Object(r.a)([Object(s.b)()],k.prototype,"allSSL",void 0),Object(r.a)([Object(s.b)()],k.prototype,"authMode",void 0),Object(r.a)([Object(s.b)()],k.prototype,"authorizedCrossOriginDomains",void 0),Object(r.a)([Object(u.a)("authorizedCrossOriginDomains")],k.prototype,"readAuthorizedCrossOriginDomains",null),Object(r.a)([Object(s.b)()],k.prototype,"basemapGalleryGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"bingKey",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canListApps",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canListData",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canListPreProvisionedItems",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canProvisionDirectPurchase",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canSearchPublic",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canShareBingPublic",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canSharePublic",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canSignInArcGIS",void 0),Object(r.a)([Object(s.b)()],k.prototype,"canSignInIDP",void 0),Object(r.a)([Object(s.b)()],k.prototype,"colorSetsGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"commentsEnabled",void 0),Object(r.a)([Object(s.b)({type:Date})],k.prototype,"created",void 0),Object(r.a)([Object(s.b)()],k.prototype,"credential",void 0),Object(r.a)([Object(s.b)()],k.prototype,"culture",void 0),Object(r.a)([Object(s.b)()],k.prototype,"currentVersion",void 0),Object(r.a)([Object(s.b)()],k.prototype,"customBaseUrl",void 0),Object(r.a)([Object(s.b)()],k.prototype,"defaultBasemap",void 0),Object(r.a)([Object(u.a)("defaultBasemap")],k.prototype,"readDefaultBasemap",null),Object(r.a)([Object(s.b)({type:p.a})],k.prototype,"defaultExtent",void 0),Object(r.a)([Object(s.b)()],k.prototype,"defaultVectorBasemap",void 0),Object(r.a)([Object(u.a)("defaultVectorBasemap")],k.prototype,"readDefaultVectorBasemap",null),Object(r.a)([Object(s.b)()],k.prototype,"description",void 0),Object(r.a)([Object(s.b)()],k.prototype,"eueiEnabled",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],k.prototype,"extraQuery",null),Object(r.a)([Object(s.b)()],k.prototype,"featuredGroups",void 0),Object(r.a)([Object(s.b)()],k.prototype,"featuredItemsGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"galleryTemplatesGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"livingAtlasGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"hasCategorySchema",void 0),Object(r.a)([Object(s.b)()],k.prototype,"helpBase",void 0),Object(r.a)([Object(s.b)()],k.prototype,"helperServices",void 0),Object(r.a)([Object(s.b)()],k.prototype,"helpMap",void 0),Object(r.a)([Object(s.b)()],k.prototype,"homePageFeaturedContent",void 0),Object(r.a)([Object(s.b)()],k.prototype,"homePageFeaturedContentCount",void 0),Object(r.a)([Object(s.b)()],k.prototype,"httpPort",void 0),Object(r.a)([Object(s.b)()],k.prototype,"httpsPort",void 0),Object(r.a)([Object(s.b)()],k.prototype,"id",void 0),Object(r.a)([Object(s.b)()],k.prototype,"ipCntryCode",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],k.prototype,"isOrganization",null),Object(r.a)([Object(s.b)()],k.prototype,"isPortal",void 0),Object(r.a)([Object(s.b)()],k.prototype,"isReadOnly",void 0),Object(r.a)([Object(s.b)()],k.prototype,"layerTemplatesGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"maxTokenExpirationMinutes",void 0),Object(r.a)([Object(s.b)({type:Date})],k.prototype,"modified",void 0),Object(r.a)([Object(s.b)()],k.prototype,"name",void 0),Object(r.a)([Object(s.b)()],k.prototype,"portalHostname",void 0),Object(r.a)([Object(s.b)()],k.prototype,"portalMode",void 0),Object(r.a)([Object(s.b)()],k.prototype,"portalProperties",void 0),Object(r.a)([Object(s.b)()],k.prototype,"region",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],k.prototype,"restUrl",null),Object(r.a)([Object(s.b)()],k.prototype,"rotatorPanels",void 0),Object(r.a)([Object(s.b)()],k.prototype,"showHomePageDescription",void 0),Object(r.a)([Object(s.b)()],k.prototype,"sourceJSON",void 0),Object(r.a)([Object(s.b)()],k.prototype,"staticImagesUrl",void 0),Object(r.a)([Object(s.b)()],k.prototype,"stylesGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"supportsHostedServices",void 0),Object(r.a)([Object(s.b)()],k.prototype,"symbolSetsGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"templatesGroupQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"thumbnail",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],k.prototype,"thumbnailUrl",null),Object(r.a)([Object(s.b)()],k.prototype,"units",void 0),Object(r.a)([Object(s.b)()],k.prototype,"url",void 0),Object(r.a)([Object(s.b)()],k.prototype,"urlKey",void 0),Object(r.a)([Object(u.a)("urlKey")],k.prototype,"readUrlKey",null),Object(r.a)([Object(s.b)()],k.prototype,"user",void 0),Object(r.a)([Object(u.a)("user")],k.prototype,"readUser",null),Object(r.a)([Object(s.b)()],k.prototype,"useStandardizedQuery",void 0),Object(r.a)([Object(s.b)()],k.prototype,"useVectorBasemaps",void 0),Object(r.a)([Object(s.b)()],k.prototype,"vectorBasemapGalleryGroupQuery",void 0),k=w=Object(r.a)([Object(c.a)("esri.portal.Portal")],k),t.a=k},Alwt:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n("srIe"),i=n("qRWG"),a=n("9AiD"),o=n("GlSV"),s=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Wt(this,e),this.elevationInfo=t,this.defaultZ=n,this.view=r,this.excludeGraphics=i}return Zt(e,[{key:"screenToMap",value:function(e){if(Object(r.k)(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(i.g)(e.x,e.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);var t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(i.g)(e.x,e.y),this.elevationInfo,0,this.excludeGraphics);return Object(r.k)(t)&&(t.z=void 0),t}},{key:"mapToScreen",value:function(e){var t=Object(o.d)(e.x,e.y,Object(a.a)(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}]),e}(),u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Wt(this,e),this.view=t,this.elevationInfo=n,this.exclude=r}return Zt(e,[{key:"screenToMap",value:function(e){var t=this.view.toMap(e,{exclude:this.exclude});return Object(r.k)(t)&&(t.z=Object(a.f)(t,this.view,this.elevationInfo)),t}},{key:"mapToScreen",value:function(e){var t=e;return Object(r.k)(this.elevationInfo)&&(t=Object(o.d)(e.x,e.y,Object(a.a)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}}]),e}()},Ango:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("srIe"),i=n("EVMh"),a=n("ikTR"),o=n("Cy1f"),s=n("5DEt"),u=function(){function e(t,n,r,a){Wt(this,e),this.primitiveIndices=t,this._numIndexPerPrimitive=n,this.indices=r,this.position=a,this.center=Object(o.e)(),Object(i.a)(t.length>=1),Object(i.a)(r.length%this._numIndexPerPrimitive==0),Object(i.a)(r.length>=t.length*this._numIndexPerPrimitive),Object(i.a)(3===a.size||4===a.size);var u=a.data,l=a.size,h=t.length,f=l*r[this._numIndexPerPrimitive*t[0]];c.clear(),c.push(f),this.bbMin=Object(o.g)(u[f],u[f+1],u[f+2]),this.bbMax=Object(o.d)(this.bbMin);for(var p=0;p<h;++p)for(var d=this._numIndexPerPrimitive*t[p],v=0;v<this._numIndexPerPrimitive;++v){f=l*r[d+v],c.push(f);var y=u[f];this.bbMin[0]=Math.min(y,this.bbMin[0]),this.bbMax[0]=Math.max(y,this.bbMax[0]),y=u[f+1],this.bbMin[1]=Math.min(y,this.bbMin[1]),this.bbMax[1]=Math.max(y,this.bbMax[1]),y=u[f+2],this.bbMin[2]=Math.min(y,this.bbMin[2]),this.bbMax[2]=Math.max(y,this.bbMax[2])}Object(s.h)(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);for(var b=this.radius*this.radius,g=0;g<c.length;++g){var m=u[f=c.getItemAt(g)]-this.center[0],w=u[f+1]-this.center[1],O=u[f+2]-this.center[2],j=m*m+w*w+O*O;if(!(j<=b)){var _=Math.sqrt(j),x=.5*(_-this.radius);this.radius=this.radius+x,b=this.radius*this.radius;var k=x/_;this.center[0]+=m*k,this.center[1]+=w*k,this.center[2]+=O*k}}c.clear()}return Zt(e,[{key:"getCenter",value:function(){return this.center}},{key:"getBSRadius",value:function(){return this.radius}},{key:"getBBMin",value:function(){return this.bbMin}},{key:"getBBMax",value:function(){return this.bbMax}},{key:"getChildren",value:function(){if(this._children)return this._children;if(Object(s.k)(this.bbMin,this.bbMax)>1){for(var t=Object(s.h)(Object(o.e)(),this.bbMin,this.bbMax,.5),n=this.primitiveIndices.length,r=new Uint8Array(n),i=new Array(8),a=0;a<8;++a)i[a]=0;for(var u=this.position,c=u.data,l=u.size,h=0;h<n;++h){for(var f=0,p=this._numIndexPerPrimitive*this.primitiveIndices[h],d=l*this.indices[p],v=c[d],y=c[d+1],b=c[d+2],g=1;g<this._numIndexPerPrimitive;++g){var m=c[d=l*this.indices[p+g]],w=c[d+1],O=c[d+2];m<v&&(v=m),w<y&&(y=w),O<b&&(b=O)}v<t[0]&&(f|=1),y<t[1]&&(f|=2),b<t[2]&&(f|=4),r[h]=f,++i[f]}for(var j=0,_=0;_<8;++_)i[_]>0&&++j;if(j<2)return;for(var x=new Array(8),k=0;k<8;++k)x[k]=i[k]>0?new Uint32Array(i[k]):void 0;for(var S=0;S<8;++S)i[S]=0;for(var M=0;M<n;++M){var I=r[M];x[I][i[I]++]=this.primitiveIndices[M]}this._children=new Array(8);for(var T=0;T<8;++T)void 0!==x[T]&&(this._children[T]=new e(x[T],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}}],[{key:"prune",value:function(){c.prune()}}]),e}(),c=new a.a({deallocator:null}),l=n("AD+e"),h=n("EDiM"),f=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Wt(this,n),(r=t.call(this))._primitiveType=a,r.edgeIndicesLength=o,r.type=2,r._vertexAttributes=new Map,r._indices=new Map,r._boundingInfo=null;var s,u=Vt(e);try{for(u.s();!(s=u.n()).done;){var c=zt(s.value,2),l=c[0],f=c[1];f&&r._vertexAttributes.set(l,Nt({},f))}}catch(x){u.e(x)}finally{u.f()}if(null==i||0===i.length){var d=function(e){var t=e.values().next().value;return null==t?0:t.data.length/t.size}(r._vertexAttributes),v=Object(h.d)(d);r.edgeIndicesLength=r.edgeIndicesLength<0?d:r.edgeIndicesLength;var y,b=Vt(r._vertexAttributes.keys());try{for(b.s();!(y=b.n()).done;){var g=y.value;r._indices.set(g,v)}}catch(x){b.e(x)}finally{b.f()}}else{var m,w=Vt(i);try{for(w.s();!(m=w.n()).done;){var O=zt(m.value,2),j=O[0],_=O[1];_&&(r._indices.set(j,p(_)),"position"===j&&(r.edgeIndicesLength=r.edgeIndicesLength<0?r._indices.get(j).length:r.edgeIndicesLength))}}catch(x){w.e(x)}finally{w.f()}}return r}return Zt(n,[{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"getMutableAttribute",value:function(e){var t=this._vertexAttributes.get(e);return t&&!t.exclusive&&(t.data=Array.from(t.data),t.exclusive=!0),t}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",get:function(){var e=this._indices.values().next().value;return e?e.length:0}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){return Object(r.j)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}},{key:"computeAttachmentOrigin",value:function(e){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(e):this.computeAttachmentOriginPoints(e)}},{key:"computeAttachmentOriginTriangles",value:function(e){var t=this.indices.get("position"),n=this.vertexAttributes.get("position");return Object(h.c)(n,t,e)}},{key:"computeAttachmentOriginPoints",value:function(e){var t=this.indices.get("position"),n=this.vertexAttributes.get("position");return Object(h.b)(n,t,e)}},{key:"invalidateBoundingInfo",value:function(){this._boundingInfo=null}},{key:"_calculateBoundingInfo",value:function(){var e=this.indices.get("position");if(0===e.length)return null;var t=0===this.primitiveType?3:1;Object(i.a)(e.length%t==0,"Indexing error: "+e.length+" not divisible by "+t);var n=Object(h.d)(e.length/t),r=this.vertexAttributes.get("position");return new u(n,t,e,r)}}]),n}(l.a);function p(e){if(e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return e;var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){if(t.value>=65536)return e}}catch(r){n.e(r)}finally{n.f()}return new Uint16Array(e)}},AtWh:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=n("OvF4");n("4GrV");var h=new s.a({upperLeft:"upper-left",lowerLeft:"lower-left"}),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).extent=null,r.mode="view",r.originPosition="upper-left",r.tolerance=1,r}return Zt(n,[{key:"clone",value:function(){return new r(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),n}(c.a);Object(i.a)([Object(o.b)({type:l.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],f.prototype,"extent",void 0),Object(i.a)([Object(o.b)({type:["view","edit"],json:{write:!0}})],f.prototype,"mode",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:h.read,write:h.write}})],f.prototype,"originPosition",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],f.prototype,"tolerance",void 0),f=r=Object(i.a)([Object(u.a)("esri.tasks.support.QuantizationParameters")],f),t.a=f},AvGH:function(e,t,n){"use strict";function r(){return[0,0]}function i(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=[0,0],n=Math.min(2,e.length),r=0;r<n;++r)t[r]=e[r];return t}function s(e,t){return new Float64Array(e,t,2)}function u(){return a(1,1)}function c(){return a(1,0)}function l(){return a(0,1)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a}));var h=u(),f=c(),p=l();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:function(){return[0,0]},ones:u,unitX:c,unitY:l,ZEROS:[0,0],ONES:h,UNIT_X:f,UNIT_Y:p})},"B/RK":function(e,t,n){"use strict";var r=n("vn/o");function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);i(c);var l=new Array(60);i(l);var h=new Array(512);i(h);var f=new Array(256);i(f);var p=new Array(29);i(p);var d,v,y,b=new Array(30);function g(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function m(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?h[e]:h[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function j(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function _(e,t,n){j(e,n[2*t],n[2*t+1])}function x(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function k(e,t,n){var r,i,a=new Array(16),o=0;for(r=1;r<=15;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=x(a[s]++,s))}}function S(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){e.bi_valid>8?O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function T(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&I(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!I(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function A(e,t,n){var r,i,s,u,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?_(e,i,t):(_(e,(s=f[i])+256+1,t),0!==(u=a[s])&&j(e,i-=p[s],u),_(e,s=w(--r),n),0!==(u=o[s])&&j(e,r-=b[s],u))}while(c<e.last_lit);_(e,256,t)}function C(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)T(e,a,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],T(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,T(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,v=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)>d&&(a=d,v++),u[2*r+1]=a,r>c||(e.bl_count[a]++,o=0,r>=p&&(o=f[r-p]),e.opt_len+=(s=u[2*r])*(a+o),h&&(e.static_len+=s*(l[2*r+1]+o)));if(0!==v){do{for(a=d-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(a=d;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>c||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}}(e,t),k(a,c,e.bl_count)}function E(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<u&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))}function P(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<u&&i===o)){if(s<c)do{_(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(_(e,i,e.bl_tree),s--),_(e,16,e.bl_tree),j(e,s-3,2)):s<=10?(_(e,17,e.bl_tree),j(e,s-3,3)):(_(e,18,e.bl_tree),j(e,s-11,7));s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}}i(b);var R=!1;function D(e,t,n,i){j(e,0+(i?1:0),3),function(e,t,n,i){M(e),O(e,n),O(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}t._tr_init=function(e){R||(function(){var e,t,n,r,i,u=new Array(16);for(n=0,r=0;r<28;r++)for(p[r]=n,e=0;e<1<<a[r];e++)f[n++]=r;for(f[n-1]=r,i=0,r=0;r<16;r++)for(b[r]=i,e=0;e<1<<o[r];e++)h[i++]=r;for(i>>=7;r<30;r++)for(b[r]=i<<7,e=0;e<1<<o[r]-7;e++)h[256+i++]=r;for(t=0;t<=15;t++)u[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,u[8]++;for(;e<=255;)c[2*e+1]=9,e++,u[9]++;for(;e<=279;)c[2*e+1]=7,e++,u[7]++;for(;e<=287;)c[2*e+1]=8,e++,u[8]++;for(k(c,287,u),e=0;e<30;e++)l[2*e+1]=5,l[2*e]=x(e,5);d=new g(c,a,257,286,15),v=new g(l,o,0,30,15),y=new g(new Array(0),s,0,19,7)}(),R=!0),e.l_desc=new m(e.dyn_ltree,d),e.d_desc=new m(e.dyn_dtree,v),e.bl_desc=new m(e.bl_tree,y),e.bi_buf=0,e.bi_valid=0,S(e)},t._tr_stored_block=D,t._tr_flush_block=function(e,t,n,r){var i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),C(e,e.l_desc),C(e,e.d_desc),o=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),C(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(a=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?D(e,t,n,r):4===e.strategy||a===i?(j(e,2+(r?1:0),3),A(e,c,l)):(j(e,4+(r?1:0),3),function(e,t,n,r){var i;for(j(e,t-257,5),j(e,n-1,5),j(e,r-4,4),i=0;i<r;i++)j(e,e.bl_tree[2*u[i]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),A(e,e.dyn_ltree,e.dyn_dtree)),S(e),r&&M(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(f[n]+256+1)]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){j(e,2,3),_(e,256,c),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},B81a:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),s=n("M0lq"),u=n("tUFA"),c=new Set,l=[],h=new Map,f=[0,0],p=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._keyToItem=new Map,r.concurrency=6,r.strategy="scale-first",r.tileInfoView=null,r}return Zt(n,[{key:"initialize",value:function(){var e=this,t=this.concurrency,n=this.process,r=this.strategy;this._queue=new u.a({concurrency:t,process:function(t,r){var i=e._keyToItem.get(t);return n(i,{signal:r})},peeker:"scale-first"===r?function(t){return e._peekByScaleFirst(t)}:function(t){return e._peekByCenterFirst(t)}})}},{key:"destroy",value:function(){this.clear(),this._queue.destroy(),this._queue=null}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return this.length>0||this.onGoingCount>0}},{key:"abort",value:function(e){this._queue.abort("string"==typeof e?e:e.id)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}},{key:"has",value:function(e){return this._keyToItem.has("string"==typeof e?e:e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e){var t=this,n=e.key.id;if(this.has(n))return this.get(n);var r=this._queue.push(n),i=function(){t._keyToItem.delete(n),t.notifyChange("updating")};return this._keyToItem.set(n,e),r.then(i,i),this.notifyChange("updating"),r}},{key:"reset",value:function(){this._queue.reset(),this.notifyChange("updating")}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((function(e){var n=t._keyToItem.get(e),a=t.tileInfoView.getTileScale(n.key);h.has(a)||(h.set(a,[]),r=Math.max(a,r),i=Math.min(a,i)),h.get(a).push(n.key),c.add(a)}));var a=this.state.scale;h.has(a)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(l,c),l.sort(),a=l.reduce((function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}),l[0])),a=Math.min(a,r),a=Math.max(a,i);var o=h.get(a),s=n.getClosestInfoForScale(a),u=s.getColumnForX(this.state.center[0]),f=s.getRowForY(this.state.center[1]);return o.sort((function(e,t){var n=s.denormalizeCol(e.col,e.world),r=s.denormalizeCol(t.col,t.world);return Math.sqrt((u-n)*(u-n)+(f-e.row)*(f-e.row))-Math.sqrt((u-r)*(u-r)+(f-t.row)*(f-t.row))})),c.clear(),h.clear(),o[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=this.state.center,i=Number.POSITIVE_INFINITY,a=null;return e.forEach((function(e){var o=t._keyToItem.get(e);n.getTileCoords(f,o.key);var u=Object(s.i)(f,r);u<i&&(i=u,a=o.key)})),a.id}}]),n}(o.a);Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"concurrency",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"process",void 0),Object(r.a)([Object(i.b)()],p.prototype,"state",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"strategy",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],p.prototype,"updating",null),p=Object(r.a)([Object(a.a)("esri.views.2d.tiling.TileQueue")],p),t.a=p},BPBZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return A}));var r=n("Cy1f"),i=n("QhKk"),a=n("5DEt"),o=n("2uVf"),s=n("sTkM"),u=n("dXfX");function c(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function l(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>i.a?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function h(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*l+o*s+i*c-a*u,e[1]=i*l+o*u+a*s-r*c,e[2]=a*l+o*c+r*u-i*s,e[3]=o*l-r*s-i*u-a*c,e}function f(e,t,n,r){var a,o,s,u,c,l=t[0],h=t[1],f=t[2],p=t[3],d=n[0],v=n[1],y=n[2],b=n[3];return(o=l*d+h*v+f*y+p*b)<0&&(o=-o,d=-d,v=-v,y=-y,b=-b),1-o>i.a?(a=Math.acos(o),s=Math.sin(a),u=Math.sin((1-r)*a)/s,c=Math.sin(r*a)/s):(u=1-r,c=r),e[0]=u*l+c*d,e[1]=u*h+c*v,e[2]=u*f+c*y,e[3]=u*p+c*b,e}function p(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function d(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function v(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*a+o]-t[3*o+a])*n,e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}var y=u.c,b=u.l,g=u.a,m=h,w=u.b,O=u.d,j=u.j,_=u.e,x=_,k=u.f,S=k,M=u.k,I=u.g,T=u.h;function A(e,t,n){var r=Object(a.g)(t,n);return r<-.999999?(Object(a.f)(C,E,t),Object(a.m)(C)<1e-6&&Object(a.f)(C,P,t),Object(a.q)(C,C),c(e,C,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(a.f)(C,t,n),e[0]=C[0],e[1]=C[1],e[2]=C[2],e[3]=1+r,M(e,e))}var C=Object(r.e)(),E=Object(r.g)(1,0,0),P=Object(r.g)(0,1,0),R=Object(s.a)(),D=Object(s.a)(),L=Object(o.a)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:c,getAxisAngle:l,multiply:h,rotateX:function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e},rotateY:function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e},rotateZ:function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e},calculateW:function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},slerp:f,random:function(e){var t=Object(i.b)(),n=Object(i.b)(),r=Object(i.b)(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*n),e[1]=a*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e},invert:p,conjugate:d,fromMat3:v,fromEuler:function(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return e[0]=a*u*l-o*s*c,e[1]=o*s*l+a*u*c,e[2]=o*u*c-a*s*l,e[3]=o*u*l+a*s*c,e},str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:y,set:b,add:g,mul:m,scale:w,dot:O,lerp:j,length:_,len:x,squaredLength:k,sqrLen:S,normalize:M,exactEquals:I,equals:T,rotationTo:A,sqlerp:function(e,t,n,r,i,a){return f(R,t,i,a),f(D,n,r,a),f(e,R,D,2*a*(1-a)),e},setAxes:function(e,t,n,r){var i=L;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=r[0],i[4]=r[1],i[7]=r[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],M(e,v(e,i))}})},BVSY:function(e,t,n){"use strict";function r(e,t,n,r){var i=3*e,a=3*(n-e)-i,o=1-i-a,s=3*t,u=3*(r-t)-s,c=1-s-u;function l(e){return((o*e+a)*e+i)*e}function h(e){return(3*o*e+2*a)*e+i}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;return function(e){return((c*e+u)*e+s)*e}(function(e,t){var n,r,i,a,o,s;for(i=e,s=0;s<8;s++){if(a=l(i)-e,Math.abs(a)<t)return i;if(o=h(i),Math.abs(o)<1e-6)break;i-=a/o}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(a=l(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i}(e,t))}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var i=/^cubic-bezier\((.*)\)/,a={};function o(e){var t=a[e]||null;if(!t){var n=i.exec(e);if(n){var o=n[1].split(",").map((function(e){return parseFloat(e.trim())}));4!==o.length||o.some((function(e){return isNaN(e)}))||(t=r.apply(r,o))}}return t}a.ease=r(.25,.1,.25,1),a.linear=r(0,0,1,1),a.easeIn=a["ease-in"]=r(.42,0,1,1),a.easeOut=a["ease-out"]=r(0,0,.58,1),a.easeInOut=a["ease-in-out"]=r(.42,0,.58,1)},Bbcg:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n("nR38"),i=n("zlDU"),a=n("7MGP"),o=n("o9qb"),s=n("kbDD"),u={key:"type",base:a.a,typeMap:{selection:s.a}};function c(e,t){var n=(t=t.layerDefinition||t).featureReduction;if(n)switch(n.type){case"selection":return s.a.fromJSON(n);case"cluster":return o.a.fromJSON(n)}return null}function l(e,t,n,a){var o=function(e,t,n){return e?"selection"!==e.type?(n.messages&&n.messages.push(new i.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:n})),null):e.write({},n):null}(e,0,a);o&&Object(r.c)(n,o,t)}},BcU2:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("lh0l")),l=n("9quj"),h=n("o685"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="extrude",r.size=1,r.material=null,r.castShadows=!0,r.edges=null,r}return Zt(n,[{key:"clone",value:function(){return new r({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:Object(a.k)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}}]),n}(c.a);Object(i.a)([Object(s.a)({Extrude:"extrude"},{readOnly:!0})],f.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],f.prototype,"size",void 0),Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],f.prototype,"material",void 0),Object(i.a)([Object(o.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],f.prototype,"castShadows",void 0),Object(i.a)([Object(o.b)(l.a)],f.prototype,"edges",void 0),f=r=Object(i.a)([Object(u.a)("esri.symbols.ExtrudeSymbol3DLayer")],f),t.a=f},BkZU:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return j}));var r=n("f/qv"),i=n("TDcG"),a=n("nZ3f"),o=n("VW+2"),s=n("e31P"),u=n("WBXD"),c=n("nvss"),l=function(){function e(){Wt(this,e),this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}return Zt(e,[{key:"acquire",value:function(t,n,r,a,o){this.target=t,this.path=n,this.oldValue=r,this.callback=a,this.getValue=o,this.propertyPath=Object(i.g)(n),this.uid=++e.uid,this.removed=!1}},{key:"release",value:function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++e.uid,this.removed=!0}}]),e}();l.pool=new s.a(l),l.uid=0;var h,f=new o.a,p=new Set,d=f.acquire();function v(e){p.has(e)?d.splice(d.indexOf(e),1):p.add(e),d.push(e),h||(h=Object(u.b)(m))}function y(e){if(!e.removed){var t=e.callback,n=e.path,r=e.oldValue,i=e.target,a=e.getValue();b(r,a)&&(e.oldValue=a,t.call(i,a,r,n,i))}}function b(e,t){return!Object(r.b)(e,t)}function g(e){for(var t=0;t<d.length;t++){var n=d[t];n.target===e&&(n.removed=!0)}}function m(){for(var e=10;h&&e--;){h=null;var t=d;d=f.acquire(),p.clear();var n,r=f.acquire(),i=Vt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.uid;y(a),o===a.uid&&a.removed&&r.push(a)}}catch(v){i.e(v)}finally{i.f()}for(var s=0;s<d.length;s++){var u=d[s];u.removed&&(r.push(u),p.delete(u),d.splice(s,1),s-=1)}for(var c=0;c<r.length;c++)l.pool.release(r[c]);f.release(t),f.release(r),w.forEach((function(e){return e()}))}}var w=new Set;function O(e){return w.add(e),{remove:function(){w.delete(e)}}}function j(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!e.__accessor__||e.__accessor__.destroyed?{remove:function(){}}:r?function(e,t,n){var r=Object(i.e)(e,t,n,(function(e,t,n){var i=!1;return Object(c.a)((function(){return Object(a.c)(e,t)}),(function(a,o){e.__accessor__.destroyed?r.remove():i||(i=!0,b(o,a)&&n.call(e,a,o,t,e),i=!1)}))}));return r}(e,t,n):function(e,t,n){var r=Object(i.e)(e,t,n,(function(e,t,n){var o,s,u=Object(c.b)((function(){return Object(a.c)(e,t)}),(function(i,a){e.__accessor__.destroyed||o&&o.uid!==s?r.remove():(o||(o=l.pool.acquire(e,t,i,n,a),s=o.uid),v(o))}));return{remove:Object(i.d)((function(){u.remove(),o&&(o.uid!==s||o.removed||(o.removed=!0,v(o)),o=null),r=u=null}))}}));return r}(e,t,n)}function _(e){return d.some((function(t){return t.oldValue===e}))}},By9p:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("+X7O");function i(e,t){var n=Object(r.a)(e,t),i=n.queryResult.featureResult,a=n.queryResult.queryGeometry,o=n.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){var s,u=i.objectIdFieldName,c=Vt(i.features);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.attributes&&(l.objectId=l.attributes[u])}}catch(h){c.e(h)}finally{c.f()}}return i&&(i.queryGeometry=a,i.queryGeometryType=o),i}},C4aV:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("nR38"),i=n("6S2I"),a=n("evjZ"),o=n("ACjl"),s=n("dL0i"),u=i.a.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function c(e,t,n){var i,a,o;e&&(!n&&!t.read||null!=(i=t.read)&&i.reader||!1===(null==(a=t.read)?void 0:a.enabled)||("types"in(o=e)?y(o.types):v(o.type))&&Object(r.c)("read.reader",l(e),t))}function l(e){var t,n=null!=(t=e.ndimArray)?t:0;if(n>1)return function(e){var t,n=h(e),r=f.bind(null,n),i=null!=(t=e.ndimArray)?t:0;return function(e,t,n){if(null==e)return e;e=r(e,n,i);for(var a=i,o=e;a>0&&Array.isArray(o);)a--,o=o[0];if(void 0!==o)for(var s=0;s<a;s++)e=[e];return e}}(e);if(1===n)return p(e);if("type"in e&&d(e.type)){var r,i,a=null==(r=e.type.prototype)||null==(i=r.itemType)?void 0:i.Type,o=p("function"==typeof a?{type:a}:{types:a});return function(t,n,r){var i=o(t,n,r);return i?new e.type(i):i}}return h(e)}function h(e){return"type"in e?function(e){return e.prototype.read?function(t,n,r){if(null==t)return t;var i=typeof t;if("object"===i){var a=new e;return a.read(t,r),a}u.error("Expected JSON value of type 'object' to deserialize type '".concat(e.prototype.declaredClass,"', but got '").concat(i,"'"))}:e.fromJSON}(e.type):function(e){var t,n=null,r=null!=(t=e.errorContext)?t:"type";return function(t,i,s){if(null==t)return t;var c=typeof t;if("object"===c){n||(n=function(e){var t={};for(var n in e.typeMap){var r,i,o=e.typeMap[n],s=Object(a.a)(o.prototype);if("function"!=typeof e.key){var u=s.properties[e.key];if(u){null!=(r=u.json)&&r.type&&Array.isArray(u.json.type)&&1===u.json.type.length&&"string"==typeof u.json.type[0]&&(t[u.json.type[0]]=o);var c=null==(i=u.json)?void 0:i.write;if(c&&c.writer){var l=c.target,h="string"==typeof l?l:e.key,f={};c.writer(n,f,h),f[h]&&(t[f[h]]=o)}else t[n]=o}}}return t}(e));var l=e.key;if("string"==typeof l){var h=t[l],f=h?n[h]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!f){var p="Type '".concat(h||"unknown","' is not supported");return s&&s.messages&&t&&s.messages.push(new o.a(r+":unsupported",p,{definition:t,context:s})),void u.error(p)}var d=new f;return d.read(t,s),d}}else u.error("Expected JSON value of type 'object' to deserialize, but got '".concat(c,"'"))}}(e.types)}function f(e,t,n,r){return 0!==r&&Array.isArray(t)?t.map((function(t){return f(e,t,n,r-1)})):e(t,void 0,n)}function p(e){var t=h(e);return function(e,n,r){if(null==e)return e;if(Array.isArray(e)){var i,a=[],o=Vt(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=t(s,void 0,r);void 0!==u&&a.push(u)}}catch(l){o.e(l)}finally{o.f()}return a}var c=t(e,void 0,r);return void 0!==c?[c]:void 0}}function d(e){if(!Object(s.a)(e))return!1;var t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?v(t.Type):y(t.Type))}function v(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||d(e))}function y(e){for(var t in e.typeMap)if(!v(e.typeMap[t]))return!1;return!0}},CLyZ:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("RI0u"),c=n("r88o"),l=n("04ZG"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),f=n("SuVq"),p=(n("4GrV"),n("nvBr")),d=n("21Ip"),v=n("N+cL"),y=n("Tcmu"),b=(n("H9eC"),n("jWBI")),g=n("TzeZ"),m=n("0pea"),w=n("w/y1"),O=n("vk02"),j=n("8RtG"),_=n("tCO6"),x=n("qNUd"),k=n("Gdt4"),S=n("rI4C"),M=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),I=new s.a({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),T=new s.a({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),A=new s.a({flow_from:"flow-from",flow_to:"flow-to"}),C=r=function(e){Kt(o,e);var t,n,i=Xt(o);function o(e){var t;return Wt(this,o),(t=i.call(this,e)).attributeField="Magnitude",t.flowRepresentation="flow-from",t.rotationType="arithmetic",t.style="single-arrow",t.symbolTileSize=50,t.type="vector-field",t}return Zt(o,[{key:"readInputUnit",value:function(e,t){return M.has(e)?I.fromJSON(e):null}},{key:"readOutputUnit",value:function(e,t){return M.has(e)?I.fromJSON(e):null}},{key:"styleRenderer",get:function(){var e=this.attributeField,t=this._createStyleRenderer(this.style);return t.field=e,t}},{key:"sizeVariables",get:function(){var e=[];if(this.visualVariables){var t,n=Vt(this.visualVariables);try{for(n.s();!(t=n.n()).done;){var r=t.value;"size"===r.type&&e.push(r)}}catch(a){n.e(a)}finally{n.f()}}if(0===e.length){var i=new w.a({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(i):this._set("visualVariables",[i]),e.push(i)}return e}},{key:"rotationVariables",get:function(){var e=[];if(this.visualVariables){var t,n=Vt(this.visualVariables);try{for(n.s();!(t=n.n()).done;){var r=t.value;"rotation"===r.type&&e.push(r)}}catch(a){n.e(a)}finally{n.f()}}if(0===e.length){var i=new g.a({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(i):this._set("visualVariables",[i]),e.push(i)}return e}},{key:"clone",value:function(){return new r({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:Object(a.a)(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}},{key:"getGraphicsFromPixelData",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,p,d,v,y,g,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=m.length>1&&void 0!==m[1]&&m[1],r=[],i=Object(k.c)(this.inputUnit,this.outputUnit),a=n?Object(k.a)(t.pixelBlock,"vector-uv",this.rotationType,i):Object(k.b)(t.pixelBlock,"vector-magdir",i),o=t.extent,s=a.mask&&a.mask.length>0,c=0,l=(o.xmax-o.xmin)/a.width,h=(o.ymax-o.ymin)/a.height,p=0;case 5:if(!(p<a.height)){e.next=22;break}d=0;case 7:if(!(d<a.width)){e.next=19;break}if(u=[o.xmin+d*l+l/2,o.ymax-p*h-h/2],s&&!a.mask[c]||!u||2!==u.length){e.next=16;break}return v={Magnitude:a.pixels[0][c],Direction:a.pixels[1][c]},y=new f.a({x:u[0],y:u[1],spatialReference:o.spatialReference}),e.next=13,Object(x.a)(y);case 13:y=e.sent[0],(g=new b.a({geometry:{type:"point",x:y.x,y:y.y,spatialReference:o.spatialReference},attributes:v})).symbol=this._getVisualVariablesAppliedSymbol(g),r.push(g);case 16:d++,c++,e.next=7;break;case 19:p++,e.next=5;break;case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"getSymbols",value:function(){return[]}},{key:"getClassBreakInfos",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.classBreakInfos}},{key:"getDefaultSymbol",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.defaultSymbol}},{key:"_getDefaultSymbol",value:function(e){return new y.a({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new d.a({width:0}),size:20,color:e||new p.a([0,92,230])})}},{key:"_getVisualVariablesAppliedSymbol",value:function(e){if(e){var t=this.styleRenderer&&this.styleRenderer.getSymbol(e);t=t.clone();var n=this.sizeVariables,r=this.rotationVariables;if(n&&n.length&&this.sizeVariables.forEach((function(n){return Object(S.d)(t,Object(m.getAllSizes)([n],e))})),r&&r.length){var i=e.attributes.Direction;e.attributes.Direction="flow-from"===this.flowRepresentation?i:i+180,this.rotationVariables.forEach((function(n){return Object(S.c)(t,Object(m.getRotationAngle)(n,e),n.axis)}))}return t}}},{key:"_createStyleRenderer",value:function(e){var t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new _.a(t)}},{key:"_createSingleArrowRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol()}}},{key:"_createBeaufortKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}},{key:"_createBeaufortMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortFeetRenderer",value:function(){var e=this._getDefaultSymbol(new p.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.28084*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortMilesRenderer",value:function(){var e=this._getDefaultSymbol(new p.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 2.23694*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortKilometersRenderer",value:function(){var e=this._getDefaultSymbol(new p.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.6*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createCurrentMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}},{key:"_createCurrentKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}},{key:"_createClassifiedArrowRenderer",value:function(){var e,t=this._getDefaultSymbol(new p.a([56,168,0])),n=[0,1e-6,3.5,7,10.5,14];if(null!=(e=this.sizeVariables)&&e.length){var r=this.sizeVariables[0].minDataValue,i=this.sizeVariables[0].maxDataValue;if(r&&i){var a=(i-r)/5;n=Array.from(Array(6).keys()).map((function(e){return r+a*e}))}}return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(n,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}},{key:"_createSimpleScalarRenderer",value:function(){return{defaultSymbol:v.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}},{key:"_createWindBarbsRenderer",value:function(){var e=Array.from(Array(31).keys()).map((function(e){return 5*e})),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],n=v.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),r=e.map((function(r,i){var a;if(i!==e.length-1)if(0===i)a={minValue:r,maxValue:e[i+1],symbol:n};else{var o=v.a.fromJSON({type:"esriPMS",imageData:t[i].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});a={minValue:r,maxValue:e[i+1],symbol:o}}return new j.a(a)}));return{defaultSymbol:n,classBreakInfos:r}}},{key:"_getClassBreaks",value:function(e,t){var n=this;return t.map((function(t,r){return new j.a({minValue:e[r],maxValue:e[r+1],symbol:n._getDefaultSymbol(new p.a(t))})}))}}]),o}(Object(O.a)(h.a));Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],C.prototype,"attributeField",void 0),Object(i.a)([Object(o.b)({type:A.apiValues,json:{type:A.jsonValues,read:{reader:A.read},write:{writer:A.write}}})],C.prototype,"flowRepresentation",void 0),Object(i.a)([Object(o.b)({type:["geographic","arithmetic"],json:{write:!0}})],C.prototype,"rotationType",void 0),Object(i.a)([Object(o.b)({type:T.apiValues,json:{type:T.jsonValues,read:{reader:T.read},write:{writer:T.write}}})],C.prototype,"style",void 0),Object(i.a)([Object(o.b)({json:{write:!0}})],C.prototype,"symbolTileSize",void 0),Object(i.a)([Object(o.b)({type:I.apiValues,json:{type:I.jsonValues,write:{writer:I.write}}})],C.prototype,"inputUnit",void 0),Object(i.a)([Object(c.a)("inputUnit")],C.prototype,"readInputUnit",null),Object(i.a)([Object(o.b)({type:I.apiValues,json:{type:I.jsonValues,read:{reader:I.read},write:{writer:I.write}}})],C.prototype,"outputUnit",void 0),Object(i.a)([Object(c.a)("outputUnit")],C.prototype,"readOutputUnit",null),Object(i.a)([Object(u.a)({vectorField:"vector-field"})],C.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:_.a})],C.prototype,"styleRenderer",null),Object(i.a)([Object(o.b)({type:w.a})],C.prototype,"sizeVariables",null),Object(i.a)([Object(o.b)({type:g.a})],C.prototype,"rotationVariables",null),C=r=Object(i.a)([Object(l.a)("esri.renderers.VectorFieldRenderer")],C),t.a=C},CPZo:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r=n("nvBr"),i=new r.a("white"),a=(new r.a("black"),new r.a([255,255,255,0]));function o(e){return 0===e.r&&0===e.g&&0===e.b}},"CR/Q":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("04ZG"),u=n("zlDU"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WZb1")),l=n("Lqtk"),h=n("5pQd"),f=n("uRH/"),p=n("mXvl"),d=n("3/ME"),v=n("OvF4"),y=n("pqNC"),b=n("kYAx"),g=n("jhcG"),m=n("WmKv"),w={id:"0/0/0",level:0,row:0,col:0,extent:null},O=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).tileInfo=d.a.create({spatialReference:c.a.WebMercator,size:256}),e.type="base-tile",e.fullExtent=new v.a(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,c.a.WebMercator),e.spatialReference=c.a.WebMercator,e}return Zt(n,[{key:"getTileBounds",value:function(e,t,n,r){var i=r||Object(b.g)();return w.level=e,w.row=t,w.col=n,w.extent=i,this.tileInfo.updateTileInfo(w),w.extent=null,i}},{key:"fetchTile",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.signal,a=r.timestamp,o=this.getTileUrl(e,t,n),s={responseType:"image",signal:i};return null!=a&&(s.query={_ts:r.timestamp}),Object(l.default)(o,s).then((function(e){return e.data}))}},{key:"getTileUrl",value:function(){throw new u.a("basetilelayer:gettileurl-not-implemented","getTileUrl() is not implemented")}}]),n}(Object(p.a)(Object(m.a)(Object(g.a)(y.a))));Object(r.a)([Object(a.b)({type:d.a})],O.prototype,"tileInfo",void 0),Object(r.a)([Object(a.b)({type:["show","hide"]})],O.prototype,"listMode",void 0),Object(r.a)([Object(a.b)({readOnly:!0,value:"base-tile"})],O.prototype,"type",void 0),Object(r.a)([Object(a.b)()],O.prototype,"fullExtent",void 0),Object(r.a)([Object(a.b)()],O.prototype,"spatialReference",void 0);var j=O=Object(r.a)([Object(s.a)("esri.layers.BaseTileLayer")],O),_=new o.a({BingMapsAerial:"aerial",BingMapsRoad:"road",BingMapsHybrid:"hybrid"}),x=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e)).type="bing-maps",t.tileInfo=new d.a({size:[256,256],dpi:96,origin:{x:-20037508.342787,y:20037508.342787,spatialReference:c.a.WebMercator},spatialReference:c.a.WebMercator,lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.1492910708238085,scale:564.248588}]}),t.key=null,t.style="road",t.culture="en-US",t.region=null,t.portalUrl=null,t.hasAttributionData=!0,t}return Zt(r,[{key:"bingMetadata",get:function(){return this._get("bingMetadata")},set:function(e){this._set("bingMetadata",e)}},{key:"copyright",get:function(){return Object(i.k)(this.bingMetadata)?this.bingMetadata.copyright:null}},{key:"operationalLayerType",get:function(){return _.toJSON(this.style)}},{key:"bingLogo",get:function(){return Object(i.k)(this.bingMetadata)?this.bingMetadata.brandLogoUri:null}},{key:"load",value:function(e){var t=this;return this.addResolvingPromise(this.key?this._getMetadata():this.portalUrl?this._getPortalBingKey().then((function(){return t._getMetadata()})):Promise.reject(new u.a("bingmapslayer:load","Bing layer must have bing key."))),Promise.resolve(this)}},{key:"getTileUrl",value:function(e,t,n){if(!this.loaded||Object(i.j)(this.bingMetadata))return null;var r=this.bingMetadata.resourceSets[0].resources[0],a=r.imageUrlSubdomains[t%r.imageUrlSubdomains.length],o=this._getQuadKey(e,t,n);return r.imageUrl.replace("{subdomain}",a).replace("{quadkey}",o)}},{key:"fetchAttributionData",value:(t=Ut(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load().then((function(){return Object(i.j)(t.bingMetadata)?null:{contributors:t.bingMetadata.resourceSets[0].resources[0].imageryProviders.map((function(e){return{attribution:e.attribution,coverageAreas:e.coverageAreas.map((function(e){return{zoomMin:e.zoomMin,zoomMax:e.zoomMax,score:1,bbox:[e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]]}}))}}))}})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_getMetadata",value:function(){var e=this,t={road:"roadOnDemand",aerial:"aerial",hybrid:"aerialWithLabelsOnDemand"}[this.style];return Object(l.default)("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+t,{responseType:"json",query:{include:"ImageryProviders",uriScheme:"https",key:this.key,suppressStatus:!0,output:"json",culture:this.culture,userRegion:this.region}}).then((function(t){var n=t.data;if(200!==n.statusCode)throw new u.a("bingmapslayer:getmetadata",n.statusDescription);if(e.bingMetadata=n,0===e.bingMetadata.resourceSets.length)throw new u.a("bingmapslayer:getmetadata","no bing resourcesets");if(0===e.bingMetadata.resourceSets[0].resources.length)throw new u.a("bingmapslayer:getmetadata","no bing resources")})).catch((function(e){throw new u.a("bingmapslayer:getmetadata",e.message)}))}},{key:"_getPortalBingKey",value:function(){var e=this;return Object(l.default)(this.portalUrl,{responseType:"json",authMode:"no-prompt",query:{f:"json"}}).then((function(t){if(!t.data.bingKey)throw new u.a("bingmapslayer:getportalbingkey","The referenced Portal does not contain a valid bing key");e.key=t.data.bingKey})).catch((function(e){throw new u.a("bingmapslayer:getportalbingkey",e.message)}))}},{key:"_getQuadKey",value:function(e,t,n){for(var r="",i=e;i>0;i--){var a=0,o=1<<i-1;0!=(n&o)&&(a+=1),0!=(t&o)&&(a+=2),r+=a.toString()}return r}}]),r}(Object(p.a)(Object(f.a)(Object(h.a)(j))));Object(r.a)([Object(a.b)({json:{read:!1,write:!1},value:null})],x.prototype,"bingMetadata",null),Object(r.a)([Object(a.b)({json:{read:!1,write:!1},value:"bing-maps",readOnly:!0})],x.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:d.a})],x.prototype,"tileInfo",void 0),Object(r.a)([Object(a.b)({type:String,readOnly:!0,json:{read:!1,write:!1}})],x.prototype,"copyright",null),Object(r.a)([Object(a.b)({type:String,json:{write:!1,read:!1}})],x.prototype,"key",void 0),Object(r.a)([Object(a.b)({type:_.apiValues,nonNullable:!0,json:{read:{source:"layerType",reader:_.read}}})],x.prototype,"style",void 0),Object(r.a)([Object(a.b)({type:["BingMapsAerial","BingMapsHybrid","BingMapsRoad"]})],x.prototype,"operationalLayerType",null),Object(r.a)([Object(a.b)({type:String,json:{write:!1,read:!1}})],x.prototype,"culture",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!1,read:!1}})],x.prototype,"region",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0,read:!0}})],x.prototype,"portalUrl",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:!1,read:!1}})],x.prototype,"hasAttributionData",void 0),Object(r.a)([Object(a.b)({type:String,readOnly:!0})],x.prototype,"bingLogo",null),x=Object(r.a)([Object(s.a)("esri.layers.BingMapsLayer")],x),t.default=x},CWQl:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h}));var r=n("TDcG"),i=n("nZ3f"),a=n("ftD4");function o(e,t,n){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;var r=e.read.source;if("string"==typeof r){if(r===t)return!0;if(r.indexOf(".")>-1&&0===r.indexOf(t)&&Object(i.a)(r,n))return!0}else{var a,o=Vt(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s===t)return!0;if(s.indexOf(".")>-1&&0===s.indexOf(t)&&Object(i.a)(s,n))return!0}}catch(u){o.e(u)}finally{o.f()}}return!1}function s(e,t,n,r,i){var s=Object(a.c)(t[n],i);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(s)&&(e[n]=!0);var u,c=Vt(Object.getOwnPropertyNames(t));try{for(c.s();!(u=c.n()).done;){var l=u.value;o(s=Object(a.c)(t[l],i),n,r)&&(e[l]=!0)}}catch(h){c.e(h)}finally{c.f()}}function u(e,t,n,r){var i=n.metadatas,o=Object(a.b)(i[t],"any",r),s=o&&o.default;if(void 0!==s){var u="function"==typeof s?s.call(e,t,r):s;void 0!==u&&n.set(t,u)}}var c={origin:"service"};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;if(t&&"object"==typeof t){var o,l=Object(r.a)(e),h=l.metadatas,f={},p=Vt(Object.getOwnPropertyNames(t));try{for(p.s();!(o=p.n()).done;){var d=o.value;s(f,h,d,t,n)}}catch(x){p.e(x)}finally{p.f()}l.setDefaultOrigin(n.origin);var v,y=Vt(Object.getOwnPropertyNames(f));try{for(y.s();!(v=y.n()).done;){var b=v.value,g=Object(a.c)(h[b],n).read,m=g&&g.source,w=void 0;w=m&&"string"==typeof m?Object(i.c)(t,m):t[b],g&&g.reader&&(w=g.reader.call(e,w,t,n)),void 0!==w&&l.set(b,w)}}catch(x){y.e(x)}finally{y.f()}if(!n||!n.ignoreDefaults){var O,j=Vt(Object.getOwnPropertyNames(h));try{for(j.s();!(O=j.n()).done;){var _=O.value;f[_]||u(e,_,l,n)}}catch(x){j.e(x)}finally{j.f()}}l.setDefaultOrigin("user")}}function h(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c,a=Nt(Nt({},i),{},{messages:[]});n(a),null==(r=a.messages)||r.forEach((function(t){"warning"!==t.type||e.loaded?i&&i.messages&&i.messages.push(t):e.loadWarnings.push(t)}))}},Cduq:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("nR38"),i=n("WbKI");function a(e,t,n){var a,o;return void 0===t?(o=e,a=[void 0]):"string"!=typeof t?(o=e,a=[void 0],n=t):(o=t,a=Array.isArray(e)?e:[e]),function(e,t){var s=e.constructor.prototype;a.forEach((function(a){var u=Object(i.c)(e,a,o);u.write&&"object"!=typeof u.write&&(u.write={}),n&&Object(r.c)("write.target",n,u),Object(r.c)("write.writer",s[t],u)}))}}},Cfhm:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("quSY"),i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e instanceof r.a&&"function"==typeof e.unsubscribe})).forEach((function(e){return e.unsubscribe()}))}},Cy1f:function(e,t,n){"use strict";function r(){return[0,0,0]}function i(e){return[e[0],e[1],e[2]]}function a(e,t,n){return[e,t,n]}function o(e){for(var t=[0,0,0],n=Math.min(3,e.length),r=0;r<n;++r)t[r]=e[r];return t}function s(e,t){return new Float64Array(e,t,3)}function u(){return a(1,1,1)}function c(){return a(1,0,0)}function l(){return a(0,1,0)}function h(){return a(0,0,1)}n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a}));var f=[0,0,0],p=u(),d=c(),v=l(),y=h();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:function(){return[0,0,0]},ones:u,unitX:c,unitY:l,unitZ:h,ZEROS:f,ONES:p,UNIT_X:d,UNIT_Y:v,UNIT_Z:y})},"D/0F":function(e,t,n){"use strict";var r=function(){var e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e}(),i=function(){var e=[].concat(r);return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e}(),a=function(){var e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e}(),o=new Map;o.set("EXIFIFD",i),o.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]),t.a={TIFF_TAGS:r,ifdTags:o,GEO_KEYS:a,getTagName:function(e,t){var n=(t||r)[e];return void 0===n&&(n="unknown"+String(e)),n}}},D5Sn:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return c}));var r=n("OKTS"),i=n("AvGH"),a=n("M0lq");function o(e,t){return e[0]*t[1]-e[1]*t[0]}function s(e,t,n){return Math.abs((t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0]))/Object(a.i)(t,n)}function u(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;return Object(a.d)(y,r,n),Object(a.d)(g,t,i),function(e,t,n){var r=Object(a.g)(n,t)/Object(a.p)(n);Object(a.a)(e,n,r)}(m,g,y),Object(a.h)(e,i,m)}function c(e,t,n,r){Object(a.d)(y,r,n),Object(a.d)(g,t,n);var i=Object(a.g)(y,g)/Object(a.p)(y);return i>0?Object(a.o)(e,n,y,i):Object(a.c)(e,n)}function l(e,t,n,r){Object(a.d)(y,t,n);var i=r/Object(a.l)(y);return Object(a.o)(e,n,y,i)}function h(e,t){return u(g,t,e.start,e.end),Object(r.e)(g[0],t[0])&&Object(r.e)(g[1],t[1])?[Object(i.b)(t)]:[]}function f(e,t,n){return l(g,n,e,t),Object(r.e)(g[0],n[0])&&Object(r.e)(g[1],n[1])?[Object(i.b)(n)]:[]}function p(e,t){var n=e.start,r=e.end,i=t.start,s=t.end,u=Object(a.d)(y,r,n),c=Object(a.d)(b,s,i),l=o(u,c);if(Math.abs(l)<=v)return[];var h=Object(a.d)(g,n,i),f=o(c,h)/l,p=o(u,h)/l;if(f>=0){if(p>=0||1===t.type)return[Object(a.o)(m,n,u,f)]}else if(1===e.type&&(p>=0||1===t.type))return[Object(a.o)(m,n,u,f)];return[]}function d(e,t,n){var r=[],i=Object(a.d)(y,e.end,e.start),o=Object(a.d)(b,e.start,t),s=Object(a.p)(i),u=2*Object(a.g)(i,o),c=u*u-4*s*(Object(a.p)(o)-n*n);if(0===c){var l=-u/(2*s);(1===e.type||l>=0)&&r.push(Object(a.o)(m,e.start,i,l))}else if(c>0){var h=Math.sqrt(c),f=(-u+h)/(2*s);(1===e.type||f>=0)&&r.push(Object(a.o)(m,e.start,i,f));var p=(-u-h)/(2*s);(1===e.type||p>=0)&&r.push(Object(a.o)(g,e.start,i,p))}return r}var v=1e-6,y=Object(i.a)(),b=Object(i.a)(),g=Object(i.a)(),m=Object(i.a)()},D6bk:function(e,t,n){"use strict";var r=n("srIe"),i=n("hTmG");t.a=function(){function e(t,n,r,i,a){Wt(this,e),this._context=t,this._locations=n,this._layout=r,this._buffers=i,this._indexBuffer=a,this._glName=null,this._initialized=!1,t.instanceCounter.increment(2,this)}return Zt(e,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){var e=this;return Object.keys(this._buffers).reduce((function(t,n){return t+e._buffers[n].size}),this._indexBuffer?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._context){var t=this._context.capabilities.vao;if(t&&this._glName&&(t.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(var n in this._buffers)this._buffers[n].dispose(),delete this._buffers[n];this._indexBuffer=Object(r.f)(this._indexBuffer)}this._context.instanceCounter.decrement(2,this),this._context=null}}},{key:"initialize",value:function(){if(!this._initialized){var e=this._context.capabilities.vao;if(e){var t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}}},{key:"bind",value:function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}},{key:"_bindLayout",value:function(){var e=this._buffers,t=!!this._context.capabilities.vao,n=this._layout,r=this._indexBuffer;e||console.error("Vertex buffer dictionary is empty!");var a=this._context.gl;for(var o in e){var s=e[o];s||console.error("Vertex buffer is uninitialized!");var u=n[o];u||console.error("Vertex element descriptor is empty!"),Object(i.a)(this._context,this._locations,s,u)}r&&(t?a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r.glName):this._context.bindBuffer(r))}},{key:"unbind",value:function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()}},{key:"_unbindLayout",value:function(){var e=this._buffers,t=this._layout;for(var n in e||console.error("Vertex buffer dictionary is empty!"),e){var r=e[n];r||console.error("Vertex buffer is uninitialized!");var a=t[n];Object(i.e)(this._context,this._locations,r,a)}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}]),e}()},D8Ta:function(e,t,n){"use strict";function r(){return[0,0,0,0]}function i(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,n,r){return[e,t,n,r]}function o(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),r=0;r<n;++r)t[r]=e[r];return t}function s(e,t){return new Float64Array(e,t,4)}function u(){return a(1,1,1,1)}function c(){return a(1,0,0,0)}function l(){return a(0,1,0,0)}function h(){return a(0,0,1,0)}function f(){return a(0,0,0,1)}n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return o}));var p=[0,0,0,0],d=u(),v=c(),y=l(),b=h(),g=f();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:function(){return[0,0,0,0]},ones:u,unitX:c,unitY:l,unitZ:h,unitW:f,ZEROS:p,ONES:d,UNIT_X:v,UNIT_Y:y,UNIT_Z:b,UNIT_W:g})},DC2l:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("fXoL"),i=n("ofXK");n("X8NZ"),n("/WmU");var a,o=((a=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||a)},a.\u0275mod=r.dc({type:a}),a.\u0275inj=r.cc({}),a);n("I0c2");var s,u,c=((u=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||u)},u.\u0275mod=r.dc({type:u}),u.\u0275inj=r.cc({}),u),l=((s=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||s)},s.\u0275mod=r.dc({type:s}),s.\u0275inj=r.cc({imports:[[i.c,o,c]]}),s)},DDWL:function(e,t,n){e.exports.structure=n("rhQU")},DKHk:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("+opI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=new a.a({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.type=null,r}return n}(s.a);Object(r.a)([Object(i.b)({type:String,json:{write:!0}})],c.prototype,"description",void 0),Object(r.a)([Object(i.b)({type:String,json:{read:u.read,write:u.write}})],c.prototype,"type",void 0),c=Object(r.a)([Object(o.a)("esri.tasks.support.GPMessage")],c),t.a=c},DLk3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n("srIe"),i=n("GlSV");function a(e){return"array"in e}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if(Object(i.c)(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,n);if(a(t)){var o=t.offset;return e.getElevation(t.array[o++],t.array[o++],t.array[o]||0,Object(r.r)(t.spatialReference,e.spatialReference),n)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,n)}},DWcW:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n("mrSG"),i=n("fXoL"),a=n("9XlO"),o=n("R3GT"),s=n("97vc"),u=n("zgsL"),c=n("W9Wu"),l=n("U/i9"),h=n("FzwJ"),f=n("/GVf"),p=n("h2Da"),d=n("CR/Q"),v=n("3Pt+"),y=n("1wtQ"),b=n("NVId"),g=n("V51X"),m=n("8WOb"),w=n("kmnG"),O=n("qFsG"),j=n("ihCf"),_=n("ofXK"),x=n("X8NZ"),k=["printMapModal"],S=["errorModal"],M=["modalMapViewNode"];function I(e,t){if(1&e&&(i.kc(0,"span",26),i.Tc(1),i.jc()),2&e){var n=i.vc();i.Tb(1),i.Vc(" Maximum of ",n.MAXLINES," line breaks are allowed. ")}}var T=function(){return{standalone:!0}},A=function(){function e(){Wt(this,e)}return Zt(e,[{key:"isErrorState",value:function(e){return!!(e&&e.invalid&&e.dirty)}}]),e}(),C=function(){var e=function(){function e(t,n,r,i){Wt(this,e),this.formBuilder=t,this.config=n,this.loaderService=r,this.notificationService=i,this.MAX=200,this.MAXLINES=5,this.showCurrentDate=!0,this.matcher=new A,this.printTask=new a.default({url:this.config.printGPServiceURL})}return Zt(e,[{key:"showPrintMapPreview",value:function(){var e=this;this.printMapModal.closeOnEscape=!1,this.printMapModal.show(),setTimeout((function(){e.initializeMap()}),10)}},{key:"createLayer",value:function(e){var t,n,r,i,a,o,s,u=e.id,v=e.minScale;switch(e.type){case"map-image":s=new l.default;break;case"feature":s=new c.default({source:null===(t=e)||void 0===t?void 0:t.source,url:null===(n=e)||void 0===n?void 0:n.url,objectIdField:null===(r=e)||void 0===r?void 0:r.objectIdField,fields:null===(i=e)||void 0===i?void 0:i.fields,renderer:null===(a=e)||void 0===a?void 0:a.renderer,labelingInfo:null===(o=e)||void 0===o?void 0:o.labelingInfo,labelsVisible:!0,outFields:["*"]});break;case"vector-tile":s=new h.default;break;case"imagery":s=new f.default;break;case"wms":s=new p.default({customParameters:e.customParameters});break;case"bing-maps":s=new d.default({style:e.style,key:e.key})}return s.id=u+"popup","bing-maps"!==e.type&&(s.url=e.url),s.visible=e.visible,null!==v&&(s.minScale=v),s}},{key:"copyLayers",value:function(){var e=this,t=[];return this.mapView.map.layers.forEach((function(n){if("graphics"===n.type){var r=n.graphics;if(r.length>0){var i=new u.a({id:n.id+"popup"});r.forEach((function(e){i.add(e.clone())})),t.push(i)}}else if(["map-image","feature","vector-tile","imagery","wms","bing-maps"].includes(n.type)){var a=e.createLayer(n);t.push(a)}else t.push(n)})),t}},{key:"initializeMap",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,i,a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"active"===this.sketchVM.state&&this.sketchVM.cancel(),t=this.copyLayers(),r={basemap:this.mapView.map.basemap,layers:t},e.next=6,Promise.resolve().then(n.bind(null,"bRsD"));case 6:return e.t0=e.sent.default,e.t1=r,i=new e.t0(e.t1),a={container:this.mapViewEl.nativeElement,map:i,snapToZoom:!1,constraints:{rotationEnabled:!1},center:this.mapView.center.clone(),zoom:parseInt(""+this.mapView.zoom),spatialReference:this.mapView.spatialReference.clone()},e.next=12,Promise.resolve().then(n.bind(null,"phGV"));case 12:return o=e.sent,e.abrupt("return",(this.popupMapView=new o.default(a),setTimeout((function(){s.popupMapView.extent=s.mapView.extent.clone()}),20),this.popupMapView));case 16:e.prev=16,e.t2=e.catch(0),console.error("Esri: ",e.t2);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})))}},{key:"generatePDF",value:function(e){var t,n;return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.loaderService.isLoading.next(!0),i=new o.a({view:this.popupMapView,extraParameters:{comments:null===(t=this.printForm.get("comments"))||void 0===t?void 0:t.value,title:null===(n=this.printForm.get("title"))||void 0===n?void 0:n.value,Layout_Template:"MMP",Format:e,showCurrentDate:""+this.showCurrentDate}}),r.next=5,this.printTask.execute(i);case 5:a=r.sent,u=a.url,window.open(u,"_blank"),this.printMapModal.hide(),r.next=13;break;case 10:throw r.prev=10,r.t0=r.catch(0),Object(s.a)("Failed to print your map. Please try again.",r.t0.message,"print-tool:165");case 13:return r.prev=13,this.loaderService.isLoading.next(!1),r.finish(13);case 16:case"end":return r.stop()}}),r,this,[[0,10,13,16]])})))}},{key:"previewClosed",value:function(){var e=this;this.popupMapView.map.layers.forEach((function(t){e.popupMapView.map.remove(t)}))}},{key:"ngOnInit",value:function(){var e,t;this.printForm=this.formBuilder.group({title:[""],comments:["",{validators:[(t=this.MAX,function(e){return e.value&&e.value.length>t?{commentsInvalid:!0}:null}),(e=this.MAXLINES,function(t){return t.value&&t.value.split("\n").length>e?{commentsLineBreaksInvalid:!0}:null})],updateOn:"change"}]})}},{key:"comments",get:function(){return this.printForm.get("comments")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.fc(v.c),i.fc(y.a),i.fc(b.a),i.fc(g.a))},e.\u0275cmp=i.Zb({type:e,selectors:[["app-print-tool"]],viewQuery:function(e,t){var n;(1&e&&(i.Xc(k,1),i.Xc(S,1),i.Xc(M,3)),2&e)&&(i.Ic(n=i.sc())&&(t.printMapModal=n.first),i.Ic(n=i.sc())&&(t.errorModal=n.first),i.Ic(n=i.sc())&&(t.mapViewEl=n.first))},inputs:{mapView:"mapView",sketchVM:"sketchVM"},decls:48,vars:20,consts:[[1,"py-3"],[3,"header","itemName"],[3,"formGroup"],["appearance","outline",1,"fullWidthInput"],["matInput","","placeholder","Enter title","type","text","formControlName","title","aria-label","Enter Map title"],["appearance","outline",1,"fullWidthInput","my-form-field"],["matInput","","placeholder","Enter comments","type","text","aria-label","Enter Map title","id","comments","formControlName","comments","cdkTextareaAutosize","","maxlength","300","cdkAutosizeMinRows","3","cdkAutosizeMaxRows","6",3,"errorStateMatcher"],[2,"float","right"],["style","color: red; font-size: 10px",4,"ngIf"],[1,"centerAlign"],[1,"inline-flex","items-center","mt-3"],["type","checkbox",1,"m-auto","form-checkbox","h-5","w-5","text-pmlo_secondary","cursor-pointer",3,"ngModel","ngModelOptions","ngModelChange"],[1,"ml-2","text-black"],[1,"centerAlign","flex"],["type","button",1,"pmlo-btn","pmlo-secondary","generalBtn",3,"disabled","click"],[3,"maximizable","backdrop","showFooter","headerBackgroundColor","closeModal"],["printMapModal",""],[1,"app-modal-header"],[1,"app-modal-body"],[1,"mapViewNode"],["modalMapViewNode",""],[1,"app-modal-footer"],[1,"footer"],["type","button",1,"pmlo-btn","pmlo-secondary","printBtn",3,"click"],[3,"maximizable","backdrop","headerBackgroundColor"],["errorModal",""],[2,"color","red","font-size","10px"]],template:function(e,t){1&e&&(i.kc(0,"div",0),i.gc(1,"app-help-button",1),i.gc(2,"br"),i.kc(3,"form",2),i.kc(4,"strong"),i.Tc(5,"Title"),i.jc(),i.gc(6,"br"),i.kc(7,"mat-form-field",3),i.gc(8,"input",4),i.jc(),i.gc(9,"br"),i.kc(10,"strong"),i.Tc(11,"Comments"),i.jc(),i.gc(12,"br"),i.kc(13,"mat-form-field",5),i.gc(14,"textarea",6),i.jc(),i.kc(15,"span",7),i.Tc(16),i.jc(),i.Sc(17,I,2,1,"span",8),i.gc(18,"br"),i.gc(19,"br"),i.kc(20,"div",9),i.kc(21,"label",10),i.kc(22,"input",11),i.rc("ngModelChange",(function(e){return t.showCurrentDate=e})),i.jc(),i.kc(23,"span",12),i.Tc(24,"Show Current Date"),i.jc(),i.jc(),i.jc(),i.gc(25,"br"),i.kc(26,"div",13),i.kc(27,"button",14),i.rc("click",(function(){return t.showPrintMapPreview()})),i.Tc(28," Preview "),i.jc(),i.jc(),i.jc(),i.jc(),i.kc(29,"app-modal",15,16),i.rc("closeModal",(function(){return t.previewClosed()})),i.ic(31,17),i.Tc(32,"Map Preview"),i.hc(),i.ic(33,18),i.gc(34,"div",19,20),i.hc(),i.ic(36,21),i.kc(37,"div",22),i.kc(38,"button",23),i.rc("click",(function(){return t.generatePDF("pdf")})),i.Tc(39," Generate PDF "),i.jc(),i.kc(40,"button",23),i.rc("click",(function(){return t.generatePDF("png")})),i.Tc(41," Generate PNG "),i.jc(),i.jc(),i.hc(),i.jc(),i.kc(42,"app-modal",24,25),i.ic(44,17),i.Tc(45,"Error"),i.hc(),i.ic(46,18),i.Tc(47," An error occured while printing your map. Please try again. "),i.hc(),i.jc()),2&e&&(i.Tb(1),i.Bc("header","Export Map to PDF")("itemName","exportMap"),i.Tb(2),i.Bc("formGroup",t.printForm),i.Tb(11),i.Bc("errorStateMatcher",t.matcher),i.Tb(1),i.Pc("color",(null==t.printForm?null:t.printForm.controls.comments.value.length)>t.MAX?"red":"black"),i.Tb(1),i.Wc(" ",null==t.printForm?null:t.printForm.controls.comments.value.length,"/",t.MAX," "),i.Tb(1),i.Bc("ngIf",null==t.comments||null==t.comments.errors?null:t.comments.errors.commentsLineBreaksInvalid),i.Tb(5),i.Bc("ngModel",t.showCurrentDate)("ngModelOptions",i.Dc(19,T)),i.Tb(5),i.Bc("disabled",t.printForm.invalid),i.Tb(2),i.Bc("maximizable",!1)("backdrop",!0)("showFooter",!0)("headerBackgroundColor","#353535"),i.Tb(13),i.Bc("maximizable",!1)("backdrop",!0)("headerBackgroundColor","red"))},directives:[m.a,v.t,v.k,v.e,w.b,O.a,v.b,v.j,v.d,j.b,v.g,_.m,v.a,v.m,x.a],styles:[".task-header{background-color:transparent;padding:0 5px;height:20px}.mapPopupHeader{background-color:grey}.printMapBtn{width:140px;position:absolute;top:4px;margin:auto;left:0;right:0}.my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em!important}.mapViewNode{height:500px;width:600px;position:relative}@media (max-width:640px){.mapViewNode{width:90vw}}.footer{display:flex;justify-content:center}.printBtn{width:150px;margin:0 40px}"],encapsulation:2}),e}()},DXYb:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("RI0u"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),h=n("21Ip"),f=n("KVkv"),p=new s.a({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"}),d=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).color=new l.a([0,0,0,.25]),e.outline=new h.a,e.type="simple-fill",e.style="solid",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n){if(e&&"string"!=typeof e)return e;var r={};return e&&(r.style=e),t&&(r.outline=t),n&&(r.color=n),r}},{key:"clone",value:function(){return new r({color:Object(a.a)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}},{key:"hash",value:function(){return"".concat(Dt(en(n.prototype),"hash",this).call(this)).concat(this.style,".").concat(this.color&&this.color.hash())}}]),n}(f.a);Object(i.a)([Object(o.b)()],d.prototype,"color",void 0),Object(i.a)([Object(o.b)()],d.prototype,"outline",void 0),Object(i.a)([Object(u.a)({esriSFS:"simple-fill"},{readOnly:!0})],d.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:p.apiValues,json:{read:p.read,write:p.write}})],d.prototype,"style",void 0),d=r=Object(i.a)([Object(c.a)("esri.symbols.SimpleFillSymbol")],d),t.a=d},"DZ/s":function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return T})),n("wSAH");var r=n("6S2I"),i=n("OKTS"),a=n("Cy1f"),o=n("5DEt"),s=n("aAs6"),u=n("15Hh"),c=n("IRkY"),l=n("r+FG"),h=n("8JEK"),f=n("IEcw"),p=n("jZU2"),d=n("QFRQ"),v=n("cKtl"),y=r.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return{plane:Object(v.c)(e.plane),origin:Object(a.d)(e.origin),basis1:Object(a.d)(e.basis1),basis2:Object(a.d)(e.basis2)}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();return m(e.origin,e.basis1,e.basis2,t)}function m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b();return Object(o.j)(r.origin,e),Object(o.j)(r.basis1,t),Object(o.j)(r.basis2,n),w(r),function(e,t){Math.abs(Object(o.g)(e.basis1,e.basis2)/(Object(o.o)(e.basis1)*Object(o.o)(e.basis2)))>1e-6&&y.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(Object(o.g)(e.basis1,C(e)))>1e-6&&y.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(o.g)(C(e),e.origin)-e.plane[3])>1e-6&&y.warn(t,"Plane offset is not consistent with plane origin")}(r,"fromValues()"),r}function w(e){Object(v.f)(e.basis2,e.basis1,e.origin,e.plane)}function O(e,t,n){e!==n&&g(e,n);var r=Object(o.d)(h.d.get(),C(e),t);return Object(o.e)(n.origin,n.origin,r),n.plane[3]-=t,n}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b(),n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return Object(o.v)(t.origin,e[0]+n,e[1]+r,0),Object(o.v)(t.basis1,n,0,0),Object(o.v)(t.basis2,0,r,0),Object(v.b)(0,0,1,0,t.plane),t}function _(e,t,n){return!!Object(v.i)(e.plane,t,n)&&E(e,n)}function x(e,t,n){var r=N.get();D(e,t,r,N.get());var a,u=Number.POSITIVE_INFINITY,c=Vt(G);try{for(c.s();!(a=c.n()).done;){var l=R(e,a.value,F.get()),f=h.d.get();if(Object(v.d)(r,l,f)){var p=Object(s.d)(h.d.get(),t.origin,f),d=Math.abs(Object(i.a)(Object(o.g)(t.direction,p)));d<u&&(u=d,Object(o.j)(n,f))}}}catch(y){c.e(y)}finally{c.f()}return u===Number.POSITIVE_INFINITY?k(e,t,n):n}function k(e,t,n){if(_(e,t,n))return n;var r=N.get(),i=N.get();D(e,t,r,i);var a,s=Number.POSITIVE_INFINITY,u=Vt(G);try{for(u.s();!(a=u.n()).done;){var c=R(e,a.value,F.get()),l=h.d.get();if(Object(v.e)(r,c,l)){var f=Object(d.c)(t,l);if(!Object(v.g)(i,l))continue;f<s&&(s=f,Object(o.j)(n,l))}}}catch(p){u.e(p)}finally{u.f()}return I(e,t.origin)<s&&S(e,t.origin,n),n}function S(e,t,n){var r=Object(v.p)(e.plane,t,h.d.get()),i=Object(p.e)(P(e,e.basis1),r,-1,1,h.d.get()),a=Object(p.e)(P(e,e.basis2),r,-1,1,h.d.get());return Object(o.i)(n,Object(o.e)(h.d.get(),i,a),e.origin),n}function M(e,t,n){var r=e.origin,i=e.basis1,a=e.basis2,s=Object(o.i)(h.d.get(),t,r),u=Object(f.c)(i,s),c=Object(f.c)(a,s),l=Object(f.c)(C(e),s);return Object(o.v)(n,u,c,l)}function I(e,t){var n=M(e,t,h.d.get()),r=e.basis1,i=e.basis2,a=Object(o.o)(r),s=Object(o.o)(i),u=Math.max(Math.abs(n[0])-a,0),c=Math.max(Math.abs(n[1])-s,0),l=n[2];return u*u+c*c+l*l}function T(e,t){return Object(v.g)(e.plane,t)&&E(e,t)}function A(e,t){var n=-e.plane[3];return Object(f.c)(C(e),t)-n}function C(e){return Object(v.n)(e.plane)}function E(e,t){var n=Object(o.i)(h.d.get(),t,e.origin),r=Object(o.r)(e.basis1),i=Object(o.r)(e.basis2),a=Object(o.g)(e.basis1,n),s=Object(o.g)(e.basis2,n);return-a-r<0&&a-r<0&&-s-i<0&&s-i<0}function P(e,t){var n=F.get();return Object(o.j)(n.origin,e.origin),Object(o.j)(n.vector,t),n}function R(e,t,n){var r=e.basis1,i=e.basis2,a=e.origin,s=Object(o.d)(h.d.get(),r,t.origin[0]),u=Object(o.d)(h.d.get(),i,t.origin[1]);Object(o.e)(n.origin,s,u),Object(o.e)(n.origin,n.origin,a);var c=Object(o.d)(h.d.get(),r,t.direction[0]),l=Object(o.d)(h.d.get(),i,t.direction[1]);return Object(o.d)(n.vector,Object(o.e)(c,c,l),2),n}function D(e,t,n,r){var i=C(e);Object(v.f)(i,t.direction,t.origin,n),Object(v.f)(Object(v.n)(n),i,t.origin,r)}var L={plane:Object(v.c)(),origin:Object(a.g)(0,0,0),basis1:Object(a.g)(1,0,0),basis2:Object(a.g)(0,1,0)},N=new c.a(v.c),F=new c.a(p.a),z=Object(a.e)(),V=new c.a((function(){return{origin:null,basis1:null,basis2:null,plane:null}})),G=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],U=Object(l.b)(),B=Object(l.b)(),q=Object.freeze({__proto__:null,BoundedPlaneClass:function e(){Wt(this,e),this.plane=Object(v.c)(),this.origin=Object(a.e)(),this.basis1=Object(a.e)(),this.basis2=Object(a.e)()},create:b,wrap:function(e,t,n){var r=V.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=Object(v.s)(0,0,0,0),w(r),r},copy:g,copyWithoutVerify:function(e,t){Object(o.j)(t.origin,e.origin),Object(o.j)(t.basis1,e.basis1),Object(o.j)(t.basis2,e.basis2),Object(v.a)(e.plane,t.plane)},fromValues:m,updateUnboundedPlane:w,elevate:O,setExtent:function(e,t,n){return j(t,n),O(n,A(e,e.origin),n),n},fromAABoundingRect:j,intersectRay:_,intersectRayClosestSilhouette:function(e,t,n){if(_(e,t,n))return n;var r=x(e,t,h.d.get());return Object(o.e)(n,t.origin,Object(o.d)(h.d.get(),t.direction,Object(o.n)(t.origin,r)/Object(o.o)(t.direction))),n},closestPointOnSilhouette:x,closestPoint:k,projectPoint:S,projectPointLocal:M,distance2:I,distance:function(e,t){return Math.sqrt(I(e,t))},distanceToSilhouette:function(e,t){var n,r=Number.NEGATIVE_INFINITY,i=Vt(G);try{for(i.s();!(n=i.n()).done;){var a=R(e,n.value,F.get()),o=Object(p.b)(a,t);o>r&&(r=o)}}catch(s){i.e(s)}finally{i.f()}return Math.sqrt(r)},extrusionContainsPoint:T,axisAt:function(e,t,n,r){return function(e,t,n){switch(t){case 0:Object(o.j)(n,e.basis1),Object(o.q)(n,n);break;case 1:Object(o.j)(n,e.basis2),Object(o.q)(n,n);break;case 2:Object(o.j)(n,C(e))}return n}(e,n,r)},altitudeAt:A,setAltitudeAt:function(e,t,n,r){var i=A(e,t),a=Object(o.d)(z,C(e),n-i);return Object(o.e)(r,t,a),r},equals:function(e,t){return Object(o.p)(e.basis1,t.basis1)&&Object(o.p)(e.basis2,t.basis2)&&Object(o.p)(e.origin,t.origin)},transform:function(e,t,n){return e!==n&&g(e,n),Object(u.a)(U,t),Object(u.b)(U,U),Object(o.l)(n.basis1,e.basis1,U),Object(o.l)(n.basis2,e.basis2,U),Object(o.l)(Object(v.n)(n.plane),Object(v.n)(e.plane),U),Object(o.l)(n.origin,e.origin,t),Object(v.r)(n.plane,n.origin,n.plane),n},rotate:function(e,t,n,r){return e!==r&&g(e,r),Object(u.q)(B,Object(u.i)(B),t,n),Object(o.l)(r.basis1,e.basis1,B),Object(o.l)(r.basis2,e.basis2,B),w(r),r},normal:C,UP:L})},DZP5:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("+opI"),o=n("r88o"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("nvBr"),l=new a.a({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),h=0,f=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e)).id="sym"+h++,t.type=null,t}return Zt(r,[{key:"color",set:function(e){this._set("color",e)}},{key:"readColor",value:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}},{key:"collectRequiredFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"hash",value:function(){return JSON.stringify(this.toJSON())}},{key:"clone",value:function(){}}]),r}(u.a);Object(r.a)([Object(i.b)({type:l.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:l.write}}})],f.prototype,"type",void 0),Object(r.a)([Object(i.b)({type:c.a,value:new c.a([0,0,0,1]),json:{write:{allowNull:!0}}})],f.prototype,"color",null),Object(r.a)([Object(o.a)("color")],f.prototype,"readColor",null),f=Object(r.a)([Object(s.a)("esri.symbols.Symbol")],f),t.a=f},DZYy:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return w}));var r,i=n("AvGH"),a=n("D8Ta"),o=n("M0lq"),s=n("OIYi"),u=n("aQrP"),c=n("Q3fD"),l=n("fB0p"),h=n("0nJL"),f=n("L5gG"),p=n("0MsP"),d=n("UBvB"),v=n("cHlT"),y=n("agdK"),b=n("viRi"),g=n("69UF");function m(e){var t=new u.a,n=e.signedDistanceFieldEnabled;if(t.include(l.a),t.include(p.a,e),t.include(h.a,e),6===e.output)return t.include(v.b,e),t;t.include(f.a),t.fragment.include(d.a),t.fragment.include(c.a),t.include(b.a,e),t.varyings.add("vcolor","vec4"),t.varyings.add("vtc","vec2"),t.varyings.add("vsize","vec2"),e.binaryHighlightOcclusionEnabled&&t.varyings.add("voccluded","float"),t.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4"),n&&t.vertex.uniforms.add("outlineColor","vec4"),e.screenSizePerspectiveEnabled&&t.vertex.uniforms.add("screenSizePerspective","vec4"),(e.debugDrawBorder||e.binaryHighlightOcclusionEnabled)&&t.varyings.add("debugBorderCoords","vec4"),t.attributes.add("uv0","vec2"),t.attributes.add("color","vec4"),t.attributes.add("size","vec2"),t.attributes.add("auxpos2","vec4"),t.vertex.code.add(s.a(_||(_=Rt(["\n    void main(void) {\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n\n      if (rejectBySlice(projectAux.posModel)) {\n        // Project outside of clip plane\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n        return;\n      }\n      vec2 inputSize;\n      ","\n\n      ","\n\n      vec2 combinedSize = inputSize * pixelRatio;\n      vec4 quadOffset = vec4(0.0);\n\n      ","\n\n      ","\n    "])),e.screenSizePerspectiveEnabled?s.a(x||(x=Rt(["\n      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n         "]))):s.a(k||(k=Rt(["\n      inputSize = size;\n      vec2 screenOffsetScaled = screenOffset;"]))),e.vvSize?"inputSize *= vvScale(auxpos2).xx;":"",e.occlusionTestEnabled||e.binaryHighlightOcclusionEnabled?"bool visible = testVisibilityHUD(posProj);":"",e.binaryHighlightOcclusionEnabled?"voccluded = visible ? 0.0 : 1.0;":""));var r=s.a(S||(S=Rt(["\n      vec2 uv01 = floor(uv0);\n      vec2 uv = uv0 - uv01;\n      quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;\n  "]))),i=e.pixelSnappingEnabled?n?s.a(M||(M=Rt(["\n  posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;"]))):s.a(I||(I=Rt(["\n  posProj += quadOffset;\n  if (inputSize.x == size.x) {\n    posProj = alignToPixelOrigin(posProj, viewport.zw);\n  }"]))):s.a(T||(T=Rt(["posProj += quadOffset;"])));t.vertex.code.add(s.a(A||(A=Rt(["\n      ","\n      ","\n      ","\n\n      bool alphaDiscard = vcolor.a < ",";\n      ",'\n      if (alphaDiscard) {\n        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent\n        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        return;\n      } else {\n        ',"\n        gl_Position = posProj;\n      }\n\n      vtc = uv * textureCoordinateScaleFactor;\n\n      ","\n      vsize = inputSize;\n      ","\n    }\n    "])),e.occlusionTestEnabled?"if (visible) {":"",r,e.vvColor?"vcolor = vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor = color / 255.0 * materialColor;",s.a.float(g.c),n?"alphaDiscard = alphaDiscard && outlineColor.a < ".concat(s.a.float(g.c),";"):"",i,e.debugDrawBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":"",e.occlusionTestEnabled?s.a(C||(C=Rt(["} else { vtc = vec2(0.0);\n        ",""])),e.debugDrawBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"):"")),t.fragment.uniforms.add("tex","sampler2D"),n&&(t.fragment.uniforms.add("outlineColor","vec4"),t.fragment.uniforms.add("outlineSize","float"));var a=e.debugDrawBorder?s.a(E||(E=Rt(["(isBorder > 0.0 ? 0.0 : ",")"])),s.a.float(g.b)):s.a.float(g.b),o=s.a(P||(P=Rt(["\n    ","\n\n    ","\n\n    ","\n  "])),e.debugDrawBorder?s.a(R||(R=Rt(["\n      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));"]))):"",n?s.a(D||(D=Rt(["\n      vec4 fillPixelColor = vcolor;\n\n      // Attempt to sample texel centers to avoid that thin cross outlines\n      // disappear with large symbol sizes.\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041\n      const float txSize = 128.0;\n      const float texelSize = 1.0 / txSize;\n      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel\n      vec2 scaleFactor = (vsize - txSize) * texelSize;\n      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;\n\n      // Get distance and map it into [-0.5, 0.5]\n      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;\n\n      // Distance in output units (i.e. pixels)\n      float dist = d * vsize.x;\n\n      // Create smooth transition from the icon into its outline\n      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);\n      fillPixelColor.a *= fillAlphaFactor;\n\n      if (outlineSize > 0.25) {\n        vec4 outlinePixelColor = outlineColor;\n        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);\n\n        // Create smooth transition around outline\n        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n        outlinePixelColor.a *= outlineAlphaFactor;\n\n        if (\n          outlineAlphaFactor + fillAlphaFactor < "," ||\n          fillPixelColor.a + outlinePixelColor.a < ","\n        ) {\n          discard;\n        }\n\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)\n        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +\n          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n\n        gl_FragColor = vec4(compositeColor, compositeAlpha);\n      } else {\n        if (fillAlphaFactor < ",") {\n          discard;\n        }\n\n        gl_FragColor = premultiplyAlpha(fillPixelColor);\n      }\n\n      // visualize SDF:\n      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);\n      "])),a,s.a.float(g.c),a):s.a(L||(L=Rt(["\n          vec4 texColor = texture2D(tex, vtc, -0.5);\n          if (texColor.a < ",") {\n            discard;\n          }\n          gl_FragColor = texColor * premultiplyAlpha(vcolor);\n          "])),a),e.debugDrawBorder?s.a(N||(N=Rt(["gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);"]))):"");return 7===e.output&&t.fragment.code.add(s.a(F||(F=Rt(["\n      void main() {\n        ","\n        gl_FragColor = vec4(gl_FragColor.a);\n      }\n      "])),o)),0===e.output&&t.fragment.code.add(s.a(z||(z=Rt(["\n    void main() {\n      ","\n      ","\n    }\n    "])),o,e.FrontFacePass?"gl_FragColor.rgb /= gl_FragColor.a;":"")),4===e.output&&(t.include(y.a),t.fragment.code.add(s.a(V||(V=Rt(["\n    void main() {\n      ","\n      ","\n    }\n    "])),o,e.binaryHighlightOcclusionEnabled?s.a(G||(G=Rt(["\n          if (voccluded == 1.0) {\n            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n          } else {\n            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n          }"]))):"outputHighlight();"))),t}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;return e.textureIsSignedDistanceField?function(e,t,n){n[0]=e[0]*(t[2]-t[0])+t[0],n[1]=e[1]*(t[3]-t[1])+t[1]}(e.anchorPos,e.distanceFieldBoundingBox,t):Object(o.c)(t,e.anchorPos),t}(r||(r={})).bindUniforms=function(e,t,n){e.setUniform4fv("materialColor",t.color),t.textureIsSignedDistanceField&&(t.outlineColor[3]<=0||t.outlineSize<=0?(e.setUniform4fv("outlineColor",a.b),e.setUniform1f("outlineSize",0)):(e.setUniform4fv("outlineColor",t.outlineColor),e.setUniform1f("outlineSize",t.outlineSize))),e.setUniform2f("screenOffset",2*t.screenOffset[0]*n,2*t.screenOffset[1]*n),e.setUniform2fv("anchorPos",w(t))};var O=Object(i.a)(),j=Object.freeze({__proto__:null,build:m,get HUDMaterial(){return r},calculateAnchorPosForRendering:w})},DbUH:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("r88o"),s=n("04ZG"),u=n("Cduq"),c=n("zlDU"),l=n("4EHJ"),h=(n("ju1D"),n("9AIY"),n("9MzC")),f=n("AiS/"),p=n("p+Gi"),d=i.a.getLogger("esri.layers.mixins.PortalLayer"),v=function(e){var t=function(e){Kt(i,e);var t,r=Xt(i);function i(){var e;return Wt(this,i),(e=r.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e}return Zt(i,[{key:"destroy",value:function(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,n){if(t.itemId)return new p.default({id:t.itemId,portal:n&&n.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:(t=Ut(regeneratorRuntime.mark((function e(t,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,Promise.all([n.e(0),n.e(159)]).then(n.bind(null,"O5Ly"));case 4:return i=e.sent,Object(h.u)(r),e.next=8,i.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),Object(h.m)(e.t0)||d.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e,n){return t.apply(this,arguments)})},{key:"read",value:function(e,t){t&&(t.layer=this),Dt(en(i.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var n=t&&t.portal,r=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||f.a.getDefault());return n&&r&&!Object(l.r)(r.restUrl,n.restUrl)?(t.messages&&t.messages.push(new c.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer"),{layer:this})),null):Dt(en(i.prototype),"write",this).call(this,e,Nt(Nt({},t),{},{layer:this}))}}]),i}(e);return Object(r.a)([Object(a.b)({type:p.default})],t.prototype,"portalItem",null),Object(r.a)([Object(o.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(r.a)([Object(u.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(r.a)([Object(a.b)()],t.prototype,"resourceReferences",void 0),t=Object(r.a)([Object(s.a)("esri.layers.mixins.PortalLayer")],t),t}},Drlb:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("srIe"),i=n("gHbr"),a=n("6S2I"),o=(n("gvqN"),n("08/N")),s=a.a.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function u(e){return null!=e.cachedResult}var c=function(){function e(){Wt(this,e),this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}return Zt(e,[{key:"featureExpressionInfoContext",get:function(){return this._featureExpressionInfoContext}},{key:"meterUnitOffset",get:function(){return this._meterUnitOffset}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e,this._metersPerElevationInfoUnit=Object(i.a)(e)}},{key:"reset",value:function(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}},{key:"offsetMeters",set:function(e){this._meterUnitOffset=e,this._renderUnitOffset=0}},{key:"offsetElevationInfoUnits",set:function(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}},{key:"addOffsetRenderUnits",value:function(e){this._renderUnitOffset+=e}},{key:"geometryZWithOffset",value:function(e,t){var n=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?n:e+n}},{key:"calculateOffsetRenderUnits",value:function(e){var t=this._meterUnitOffset,n=this.featureExpressionInfoContext;return null!=n&&(t+=function(e){if(null!=e){if(u(e))return e.cachedResult;var t=e.arcade,n=e.arcade.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof n&&(e.cachedResult=0,n=0),n}return 0}(n)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}},{key:"setFromElevationInfo",value:function(e){this.mode=e.mode,this.unit=Object(i.c)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=Object(r.r)(e.offset,0)}},{key:"updateFeatureExpressionInfoContext",value:function(e,t,n){if(Object(r.j)(e))this._featureExpressionInfoContext=null;else{var i,a=e&&e.arcade;a&&Object(r.k)(t)&&Object(r.k)(n)?(this._featureExpressionInfoContext={cachedResult:(i=e).cachedResult,arcade:i.arcade?{func:i.arcade.func,context:i.arcade.modules.arcadeUtils.createExecContext(null,{sr:i.arcade.context.spatialReference}),modules:i.arcade.modules}:null},function(e,t){if(null!=e&&!u(e)){if(!t||!e.arcade)return void s.errorOncePerTick("Arcade support required but not provided");var n=t;n._geometry&&(n._geometry=Object(o.b)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}(this._featureExpressionInfoContext,function(e,t,n){return e.arcadeUtils.createFeature(t.attributes,t.geometry,n)}(a.modules,t,n))):this._featureExpressionInfoContext=e}}}],[{key:"fromElevationInfo",value:function(t){var n=new e;return Object(r.k)(t)&&n.setFromElevationInfo(t),n}}]),e}()},Dxa7:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n("FWf1"),o=n("IKal"),s=n("aJGj");t.take=function(e){return function(t){return 0===e?s.empty():t.lift(new u(e))}};var u=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return i(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(a.Subscriber)},DxxZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n("srIe"),i=n("TDcG"),a=n("/CmD"),o=n("LE9a"),s=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u(e){return e instanceof a.a}function c(e){return e instanceof o.a?Object.keys(e.items):u(e)?Object(i.a)(e).keys():e?Object.keys(e):[]}function l(e,t){return e instanceof o.a?e.items[t]:e[t]}function h(e){return e?e.declaredClass:null}function f(e,t){if(Object(r.j)(e))return!1;var n,i=e,a=Vt(t.split("."));try{for(a.s();!(n=a.n()).done;){var o=n.value;if("complete"===i.type)return!0;if("partial"!==i.type)return!1;var s=i.diff[o];if(!s)return!1;i=s}}catch(u){a.e(u)}finally{a.f()}return!0}function p(e,t){var n,r=Vt(t);try{for(r.s();!(n=r.n()).done;){if(f(e,n.value))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}function d(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&h(e)!==h(t)?{type:"complete",oldValue:e,newValue:t}:function e(t,n){var i=t.diff;if(i&&"function"==typeof i)return i(t,n);var a=c(t),o=c(n);if(0!==a.length||0!==o.length){if(!a.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(t,n))return{type:"complete",oldValue:t,newValue:n};var f,p=o.filter((function(e){return-1===a.indexOf(e)})),d=a.filter((function(e){return-1===o.indexOf(e)})),v=a.filter((function(e){return o.indexOf(e)>-1&&l(t,e)!==l(n,e)})).concat(p,d).sort(),y=h(t);if(y&&s.indexOf(y)>-1&&v.length)return{type:"complete",oldValue:t,newValue:n};var b,g=u(t)&&u(n),m=Vt(v);try{for(m.s();!(b=m.n()).done;){var w=b.value,O=l(t,w),j=l(n,w),_=void 0;(g||"function"!=typeof O&&"function"!=typeof j)&&O!==j&&(null==O&&null==j||(_=i&&i[w]&&"function"==typeof i[w]?i[w](O,j):"object"==typeof O&&"object"==typeof j&&h(O)===h(j)?e(O,j):{type:"complete",oldValue:O,newValue:j},Object(r.k)(_)&&(Object(r.k)(f)?f.diff[w]=_:f={type:"partial",diff:Ft({},w,_)})))}}catch(x){m.e(x)}finally{m.f()}return f}}(e,t)}},E4HC:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,i,a,o=n("xkkJ"),s=n("SuVq"),u=n("UhwK"),c=(n("4GrV"),n("TKwc")),l=n("qRWG"),h=n("21Ip"),f=n("Tcmu"),p=(n("H9eC"),n("jWBI")),d=n("Cy1f"),v=n("AvGH"),y=n("M0lq"),b=n("d3n7"),g=n("yftL"),m=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"visualizeIntersectionPoint",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new s.a({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:j,context:t})}},{key:"visualizePoint",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new s.a({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:_,context:t})}},{key:"visualizeLine",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new u.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:x,context:t})}},{key:"visualizeParallelSign",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new u.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:k,context:t})}},{key:"visualizeRightAngleQuad",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new u.a({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),symbol:T(e),context:t})}},{key:"_visualizeSnappingIndicator",value:function(e){var t=e.geometry,n=e.symbol,r=e.context,i=new p.a({geometry:t,symbol:n});return r.view.graphics.add(i),Object(o.c)((function(){r.view.graphics.remove(i)}))}}]),n}(n("ZadS").a),w=b.a.main.toArray(),O=[].concat(Bt(b.a.main.toRgb()),[100]),j=new f.a({outline:new h.a({width:1.5,color:w}),size:15,color:[0,0,0,0]}),_=new f.a({outline:{width:.5,color:[0,0,0,1]},size:10,color:w}),x=new c.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(l.i)(g.a.lineHintWidthTarget),color:w}]}}}),k=new c.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),S=function(e){return new c.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(l.i)(g.a.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(l.i)(g.a.rightAngleHintOutlineSize),color:w},{type:"CIMSolidFill",enable:!0,color:O}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})},M=S(45),I=S(225),T=(r=Object(v.a)(),i=Object(v.a)(),a=Object(d.e)(),function(e){return Object(y.d)(r,e.centerVertex,e.previousVertex),Object(y.d)(i,e.nextVertex,e.previousVertex),Object(y.f)(a,r,i),a[2]<0?M:I})},EDiM:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c}));var r=n("Cy1f"),i=n("5DEt"),a=n("oSUa"),o=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),s=new Uint16Array([0]),u=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function c(e){if(1===e)return s;if(e<u.length)return new Uint16Array(u.buffer,0,e);if(e>o.length){var t=Math.max(2*o.length,e);o=new Uint32Array(t);for(var n=0;n<o.length;n++)o[n]=n}return new Uint32Array(o.buffer,0,e)}function l(e,t,n){if(!e)return!1;var r=e.size,o=e.data;Object(i.v)(n,0,0,0),Object(i.v)(y,0,0,0);for(var s=0,u=0,c=0;c<t.length-2;c+=3){var l=t[c+0]*r,h=t[c+1]*r,f=t[c+2]*r;Object(i.v)(p,o[l+0],o[l+1],o[l+2]),Object(i.v)(d,o[h+0],o[h+1],o[h+2]),Object(i.v)(v,o[f+0],o[f+1],o[f+2]);var b=Object(a.a)(p,d,v);b?(Object(i.e)(p,p,d),Object(i.e)(p,p,v),Object(i.d)(p,p,1/3*b),Object(i.e)(n,n,p),s+=b):(Object(i.e)(y,y,p),Object(i.e)(y,y,d),Object(i.e)(y,y,v),u+=3)}return!(0===u&&0===s||(0!==s?(Object(i.d)(n,n,1/s),0):0===u||(Object(i.d)(n,y,1/u),0)))}function h(e,t,n){if(!e||!t)return!1;var r=e.size,a=e.data;Object(i.v)(n,0,0,0);for(var o=-1,s=0,u=0;u<t.length;u++){var c=t[u]*r;o!==c&&(n[0]+=a[c+0],n[1]+=a[c+1],n[2]+=a[c+2],s++),o=c}return s>1&&Object(i.d)(n,n,1/s),s>0}function f(e,t,n,r){if(!e)return!1;var a=e.size,o=e.data;Object(i.v)(r,0,0,0),Object(i.v)(y,0,0,0);for(var s=0,u=0,c=t?t.length-1:o.length/a-1,l=c+(n?2:0),h=0;h<l;h+=2){var f=h<c?h:c,v=h<c?h+1:0,b=(t?t[f]:f)*a,g=(t?t[v]:v)*a;p[0]=o[b+0],p[1]=o[b+1],p[2]=o[b+2],d[0]=o[g+0],d[1]=o[g+1],d[2]=o[g+2],Object(i.d)(p,Object(i.e)(p,p,d),.5);var m=Object(i.z)(p,d);m>0?(Object(i.e)(r,r,Object(i.d)(p,p,m)),s+=m):(Object(i.e)(y,y,p),u++)}return 0!==s?(Object(i.d)(r,r,1/s),!0):0!==u&&(Object(i.d)(r,y,1/u),!0)}var p=Object(r.e)(),d=Object(r.e)(),v=Object(r.e)(),y=Object(r.e)()},EOvV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wkZP"),i=/\[([^\[\]]+)\]/gi;function a(e,t,n){var a=this;return e?e.map((function(e){var o=new r.a;if(o.read(e,n),o.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||a.fields;o.labelExpression=o.labelExpression.replace(i,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var n=e.toLowerCase(),r=0;r<t.length;r++){var i=t[r].name;if(i.toLowerCase()===n)return i}return e}(t,s),"]")}))}return o})):null}},EVMh:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return y}));var r=n("OKTS"),i=(n("Cy1f"),n("15Hh"),n("AvGH"),n("D8Ta")),a=n("M0lq");n("dXfX"),Object(i.c)();var o=function(){function e(t){Wt(this,e),this.message=t}return Zt(e,[{key:"toString",value:function(){return"AssertException: "+this.message}}]),e}();function s(e,t){if(!e){t=t||"assert";var n=new Error(t);throw n.stack&&console.log(n.stack),new o(t)}}function u(e,t,n,r){var i,a=(n[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];a>o&&(i=a,a=o,o=i);var s=(n[1]-e[1])/t[1],u=(r[1]-e[1])/t[1];if(s>u&&(i=s,s=u,u=i),a>u||s>o)return!1;s>a&&(a=s),u<o&&(o=u);var c=(n[2]-e[2])/t[2],l=(r[2]-e[2])/t[2];return c>l&&(i=c,c=l,l=i),!(a>l||c>o||(l<o&&(o=l),o<0))}function c(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}function l(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function h(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/t)}function f(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/n)}function p(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+n*n))}function d(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/Math.sqrt(t*t+n*n))}function v(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Object(r.c)(e,0,m),a=0;a<4;a++)t[n+a]=Math.floor(256*w(i*b[a]))}function y(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,r=0;r<4;r++)n+=e[t+r]*g[r];return n}var b=[1,256,65536,16777216],g=[1/256,1/65536,1/16777216,1/4294967296],m=y(new Uint8ClampedArray([255,255,255,255]));function w(e){return e-Math.floor(e)}function O(e,t,n,r,i){var o=e;0===e[11]?(r[0]=2/(t*o[0]),r[1]=2/(n*o[5]),r[2]=(1+o[12])/o[0],r[3]=(1+o[13])/o[5],Object(a.r)(i,0,1)):(r[0]=-2/(t*o[0]),r[1]=-2/(n*o[5]),r[2]=(1-o[8])/o[0],r[3]=(1-o[9])/o[5],Object(a.r)(i,1,0))}},Ehki:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WZb1")),l=n("N2DF"),h=n("l4ZG"),f=n("SuVq"),p=n("IXLn"),d=n("PNY3"),v=n("OvF4"),y=n("NyNm"),b=n("Mu3I"),g=n("V+VG"),m=n("+NQI");function w(e){return!Array.isArray(e[0])}var O=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).rings=[],e.type="polygon",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t){var n,r,i,a=null;return e&&!Array.isArray(e)?(a=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),n=e.hasZ,r=e.hasM):a=e,(a=a||[]).length&&a[0]&&null!=a[0][0]&&"number"==typeof a[0][0]&&(a=[a]),(i=a[0]&&a[0][0])&&(void 0===n&&void 0===r?(n=i.length>2,r=!1):void 0===n?n=!r&&i.length>3:void 0===r&&(r=!n&&i.length>3)),{rings:a,spatialReference:t=t||c.a.WGS84,hasZ:n,hasM:r}}},{key:"cache",get:function(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"centroid",get:function(){var e=Object(g.a)(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;var t=new f.a;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}},{key:"extent",get:function(){var e=this.spatialReference,t=Object(m.b)(this);if(!t)return null;var n=new v.a(t);return n.spatialReference=e,n}},{key:"isSelfIntersecting",get:function(){return Object(d.c)(this.rings)}},{key:"writeRings",value:function(e,t){t.rings=Object(a.a)(this.rings)}},{key:"addRing",value:function(e){if(e){var t=this.rings,n=t.length;if(w(e)){for(var r=[],i=0,a=e.length;i<a;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.concat();return this.notifyChange("rings"),this}}},{key:"clone",value:function(){var e=new r;return e.spatialReference=this.spatialReference,e.rings=Object(a.a)(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}},{key:"contains",value:function(e){return!!e&&(Object(h.a)(e,this.spatialReference)&&(e=Object(h.d)(e,this.spatialReference)),Object(p.g)(this,e))}},{key:"isClockwise",value:function(e){var t,n=this;return t=w(e)?e.map((function(e){return n.hasZ?n.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]})):e,Object(b.g)(t,this.hasM,this.hasZ)}},{key:"getPoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=this.rings[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new f.a(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new f.a(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new f.a(n[0],n[1],n[2],n[3],this.spatialReference):new f.a(n[0],n[1],this.spatialReference)}},{key:"insertPoint",value:function(e,t,n){return this._validateInputs(e,t,!0)?(Object(y.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e].splice(t,0,n),this.notifyChange("rings"),this):this}},{key:"removePoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=new f.a(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),n}},{key:"removeRing",value:function(e){if(!this._validateInputs(e,null))return null;var t=this.rings.splice(e,1)[0],n=this.spatialReference,r=t.map((function(e){return new f.a(e,n)}));return this.notifyChange("rings"),r}},{key:"setPoint",value:function(e,t,n){return this._validateInputs(e,t)?(Object(y.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e][t]=n,this.notifyChange("rings"),this):this}},{key:"_validateInputs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){var r=this.rings[e];if(n&&(t<0||t>r.length))return!1;if(!n&&(t<0||t>=r.length))return!1}return!0}},{key:"toJSON",value:function(e){return this.write(null,e)}}],[{key:"fromExtent",value:function(e){var t=e.clone().normalize(),n=e.spatialReference,i=!1,a=!1;t.map((function(e){e.hasZ&&(i=!0),e.hasM&&(a=!0)}));var o={rings:t.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i&&e.hasZ)for(var n=e.zmin+.5*(e.zmax-e.zmin),r=0;r<t.length;r++)t[r].push(n);if(a&&e.hasM)for(var o=e.mmin+.5*(e.mmax-e.mmin),s=0;s<t.length;s++)t[s].push(o);return t})),spatialReference:n};return i&&(o.hasZ=!0),a&&(o.hasM=!0),new r(o)}}]),n}(l.a);Object(i.a)([Object(o.b)({readOnly:!0})],O.prototype,"cache",null),Object(i.a)([Object(o.b)({readOnly:!0})],O.prototype,"centroid",null),Object(i.a)([Object(o.b)({readOnly:!0})],O.prototype,"extent",null),Object(i.a)([Object(o.b)({readOnly:!0})],O.prototype,"isSelfIntersecting",null),Object(i.a)([Object(o.b)({type:[[[Number]]],json:{write:{isRequired:!0}}})],O.prototype,"rings",void 0),Object(i.a)([Object(u.a)("rings")],O.prototype,"writeRings",null),(O=r=Object(i.a)([Object(s.a)("esri.geometry.Polygon")],O)).prototype.toJSON.isDefaultToJSON=!0,t.a=O},Ehpe:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=n("WbKI"),o=n("Gj5k"),s=n("4gt3"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D")),l=(n("9AIY"),n("wNOj")),h=n("9MzC"),f=n("yyYK"),p=n("zm0L"),d=n("IDUf"),v=n("YyOG"),y=(n("G48n"),n("+rMe")),b=n("r0DZ"),g=n("N5XI"),m=n("z5yp"),w=n("cCpn"),O=(n("5sKF"),n("aelY")),j=i.a.getLogger("esri.widgets.Widget"),_=0,x=Object(O.a)(),k=!1,S=function(e){Kt(r,e);var t,n=Xt(r);function r(e,t){var i;Wt(this,r),(i=n.call(this,e,t))._attached=!1,i._internalHandles=new b.a,i._projector=x,i.domNode=null,i.iconClass="esri-icon-checkbox-unchecked",i.label=i.declaredClass.split(".").pop(),i.visible=!0,i._loadLocale=Object(h.i)(Ut(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i._messageBundleProps||!i._messageBundleProps.length){e.next=6;break}return e.next=3,Object(h.j)(i._messageBundleProps.map(function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bundlePath,r=t.propertyName,e.next=3,Object(v.a)(n);case 3:i[r]=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:t=e.sent,n=Vt(t);try{for(n.s();!(r=n.n()).done;)(a=r.value).error&&j.error("widget-intl:locale-error",i.declaredClass,a.error)}catch(o){n.e(o)}finally{n.f()}case 6:return e.next=8,i.loadLocale();case 8:case"end":return e.stop()}}),e)}))));var a=Object(w.d)()||"light";["light","dark"].includes(a)||Object(s.a)(j,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});var o="esri-widget-uid-"+Object(c.a)(),u=i.render.bind($t(i)),p=!1;i._trackingTarget=new f.a((function(){return i.scheduleRender()}));var d=function(){if(!p||i.destroyed)return null;var e=u();return e.properties?e.properties.key||(e.properties.key=o):e.properties={key:o},e};return i.render=function(){if(k)return d();var e;i._trackingTarget.clear(),k=!0;try{e=Object(l.b)(i._trackingTarget,d)}finally{k=!1}return e},i.addResolvingPromise(i._resourcesFetch=i.beforeFirstRender().then((function(){p=!0,i._postInitialize()}))),i}return Zt(r,[{key:"normalizeCtorArgs",value:function(e,t){var n=Nt({},e);return t&&(n.container=t),n}},{key:"postInitialize",value:function(){}},{key:"beforeFirstRender",value:function(){return this._loadLocale().catch(h.v)}},{key:"loadLocale",value:(t=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.destroyed||(this._trackingTarget.destroy(),this._trackingTarget=null,this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=function(){return null},this._projector=null)}},{key:"container",set:function(e){this._get("container")||this._set("container",e)}},{key:"castContainer",value:function(e){return Object(m.a)(e)}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+_++},set:function(e){e&&this._set("id",e)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"render",value:function(){throw new Error("not implemented")}},{key:"scheduleRender",value:function(){this.destroyed||this._projector.scheduleRender()}},{key:"classes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.a.apply(this,t)}},{key:"own",value:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}},{key:"renderNow",value:function(){this._projector.renderNow()}},{key:"_postInitialize",value:function(){var e,t=this;this.destroyed||(this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(Object(g.init)(this,"viewModel",(function(e,n){n&&t._internalHandles.remove("delegated-events"),e&&t._internalHandles.add(t._delegatedEventNames.map((function(n){return e.on(n,(function(e){t.emit(n,e)}))})),"delegated-events")}))),this.postInitialize(),this._internalHandles.add(Object(d.c)(Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._loadLocale().catch(h.v);case 2:t.scheduleRender();case 3:case"end":return e.stop()}}),e)}))))),this._internalHandles.add(Object(g.whenOnce)(this,"container",function(){var e=Ut(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.destroyed||t._attach(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},{key:"_attach",value:function(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}},{key:"_detach",value:function(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}}]),r}(Object(y.b)(p.a.EventedAccessor));Object(r.a)([Object(a.b)({value:null})],S.prototype,"container",null),Object(r.a)([Object(o.a)("container")],S.prototype,"castContainer",null),Object(r.a)([Object(a.b)({aliasOf:"container"})],S.prototype,"domNode",void 0),Object(r.a)([Object(a.b)()],S.prototype,"iconClass",void 0),Object(r.a)([Object(a.b)()],S.prototype,"id",null),Object(r.a)([Object(a.b)()],S.prototype,"label",void 0),Object(r.a)([Object(a.b)()],S.prototype,"renderable",null),Object(r.a)([Object(a.b)()],S.prototype,"viewModel",void 0),Object(r.a)([Object(a.b)()],S.prototype,"visible",void 0),S=Object(r.a)([Object(u.a)("esri.widgets.Widget")],S),t.a=S},EoK7:function(e,t){e.exports.enlarge=function(e,t){return t[0]<e.xmin&&(e.xmin=t[0]),t[0]>e.xmax&&(e.xmax=t[0]),t[1]<e.ymin&&(e.ymin=t[1]),t[1]>e.ymax&&(e.ymax=t[1]),e},e.exports.enlargeExtent=function(e,t){return t.xmax>e.xmax&&(e.xmax=t.xmax),t.xmin<e.xmin&&(e.xmin=t.xmin),t.ymax>e.ymax&&(e.ymax=t.ymax),t.ymin<e.ymin&&(e.ymin=t.ymin),e},e.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}},Eonp:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("p6dn")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.displayType=null,r.title=null,r.type="attachments",r}return Zt(n,[{key:"clone",value:function(){return new r({description:this.description,displayType:this.displayType,title:this.title})}}]),n}(s.a);Object(i.a)([Object(a.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],u.prototype,"description",void 0),Object(i.a)([Object(a.b)({type:["preview","list"],json:{write:!0}})],u.prototype,"displayType",void 0),Object(i.a)([Object(a.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],u.prototype,"title",void 0),Object(i.a)([Object(a.b)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0),u=r=Object(i.a)([Object(o.a)("esri.popup.content.AttachmentsContent")],u),t.a=u},EyXx:function(e,t,n){"use strict";var r=n("3r0u"),i=(n("wSAH"),n("nR38")),a={apiKey:void 0,applicationUrl:r.a.location&&r.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};r.a.esriConfig&&(Object(i.a)(a,r.a.esriConfig,!0),delete a.has),a.assetsPath||(a.assetsPath="https://js.arcgis.com/".concat("4.19.0".slice(0,-2),"/@arcgis/core/assets")),a.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(a,"baseUrl",{set:function(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),a.request.corsEnabledServers=[],a.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=a},"F/6a":function(e,t,n){"use strict";var r=n("LrR4"),i=n("9aYe"),a=n("VJTW"),o=n("tkqm"),s=n("Mi3D");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(e,t,n){return function(){var r=e.index;e.setIndex(t);var i=e.readData(n);return e.setIndex(r),i}},prepareContent:function(e,t,n,r,a){return function(){var e=i.transformTo(r.uncompressInputType,this.getCompressedContent()),t=r.uncompress(e);if(t.length!==a)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(t=i.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readData(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=new r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),n=e.readInt(2),r=e.readString(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=s.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new r(e.value);return 1!==t.readInt(1)||o.crc32(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new r(e.value);return 1!==t.readInt(1)||o.crc32(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readString(e.length-5))}return null}},e.exports=u},F7CJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("OIYi"),i=n("L5gG");function a(e,t){var n=e.vertex.code;t.verticalOffsetEnabled?(e.vertex.uniforms.add("verticalOffset","vec4"),t.screenSizePerspectiveEnabled&&(e.include(i.a),e.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),n.add(r.a(U||(U=Rt(["\n    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n      ","\n      ","\n      // Screen sized offset in world space, used for example for line callouts\n      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n      return worldNormal * worldOffset;\n    }\n\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n    }\n    "])),1===t.viewingMode?r.a(B||(B=Rt(["vec3 worldNormal = normalize(worldPos + localOrigin);"]))):r.a(q||(q=Rt(["vec3 worldNormal = vec3(0.0, 0.0, 1.0);"]))),t.screenSizePerspectiveEnabled?r.a(H||(H=Rt(["\n          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));\n          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);"]))):r.a(W||(W=Rt(["\n          float verticalOffsetScreenHeight = verticalOffset.x;"])))))):n.add(r.a(J||(J=Rt(["\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }\n    "]))))}function o(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s;return r.screenLength=e.screenLength,r.perDistance=Math.tan(.5*t)/(.5*n),r.minWorldLength=e.minWorldLength,r.maxWorldLength=e.maxWorldLength,r}(a||(a={})).bindUniforms=function(e,t,n){if(t.verticalOffset){var r=o(t.verticalOffset,n.camera.fovY,n.camera.fullViewport[3]);e.setUniform4f("verticalOffset",r.screenLength*(n.camera.pixelRatio||1),r.perDistance,r.minWorldLength,r.maxWorldLength)}};var s={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0}},F9Ye:function(e,t,n){var r=n("EoK7");e.exports.write=function(e,t,n,r){var i=100,a=0,o=0;e.forEach((function(e,t){n.setInt32(a,t),n.setInt32(a+4,10),n.setInt32(a+8,1,!0),n.setFloat64(a+12,e[0],!0),n.setFloat64(a+20,e[1],!0),r.setInt32(o,i/2),r.setInt32(o+4,10),o+=8,a+=28,i+=28}))},e.exports.extent=function(e){return e.reduce((function(e,t){return r.enlarge(e,t)}),r.blank())},e.exports.parts=function(e,t){return e.length},e.exports.shxLength=function(e){return 8*e.length},e.exports.shpLength=function(e){return 28*e.length}},FFFX:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return k}));var r=n("zlDU"),i=n("Piei"),a=n("X2wA"),o=n("xMJK"),s=n("9MzC"),u=function(){function e(t){Wt(this,e),t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}return Zt(e,[{key:"decode",value:function(t,n,i){var a=this;if(!t||t.byteLength<10)throw new r.a("imagecanvasdecoder: decode","required a valid encoded data as input.");var o=n.width,u=n.height,c=n.format,l=n.applyJpegMask;if(l&&(!o||!u))throw new r.a("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((function(r,h){var f=null;"jpg"===c&&l&&(f=e.getMask(t,n));var p,d=new Blob([new Uint8Array(t)],{type:"image/"+c=="jpg"?"jpeg":c}),v=URL.createObjectURL(d),y=new Image;y.src=v,y.onload=function(){if(URL.revokeObjectURL(v),Object(s.n)(i))h(Object(s.e)());else{o=y.width,u=y.height,a.canvas?(a.canvas.width===o&&a.canvas.height===u||(a.canvas.width=o,a.canvas.height=u),a.ctx.clearRect(0,0,o,u)):(a.canvas=document.createElement("canvas"),a.canvas.width=o,a.canvas.height=u,a.ctx=a.canvas.getContext("2d")),a.ctx.drawImage(y,0,0);var e,t=a.ctx.getImageData(0,0,o,u);if(p=t.data,n.renderOnCanvas){if(f)for(e=0;e<f.length;e++)p[4*e+3]=f[e]?255:0;return a.ctx.putImageData(t,0,0),void r(null)}var c=o*u,l=new Uint8Array(c),d=new Uint8Array(c),b=new Uint8Array(c);if(f)for(e=0;e<c;e++)l[e]=p[4*e],d[e]=p[4*e+1],b[e]=p[4*e+2];else for(f=new Uint8Array(c),e=0;e<c;e++)l[e]=p[4*e],d[e]=p[4*e+1],b[e]=p[4*e+2],f[e]=p[4*e+3];r({width:o,height:u,pixels:[l,d,b],mask:f,pixelType:"u8"})}},y.onerror=function(){URL.revokeObjectURL(v),h("cannot load image")}}))}}],[{key:"getMask",value:function(e,t){var n=null;try{var r=new Uint8Array(e),i=Math.ceil(r.length/2),a=0,s=r.length-2;for(a=i;a<s&&(255!==r[a]||217!==r[a+1]);a++);if((a+=2)<r.length-1){var u=new o.a(r.subarray(a)).getBytes();n=new Uint8Array(t.width*t.height);for(var c=0,l=0;l<u.length;l++)for(var h=7;h>=0;h--)n[c++]=u[l]>>h&1}}catch(r){}return n}}]),e}(),c=n("6Q66"),l=n("svfg"),h=function(e,t){return Math.floor(e.byteLength/(t.width*t.height*f(t.pixelType)))},f=function(e){var t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},p=n("5VpP"),d=n("bT0G"),v=Object(a.b)((function(e){var t;void 0!==(t=function(){var e=function(e,t,n,r,i,a,o,s){var u,c,l,h,f,p=(1<<n)-1,d=0,v=0,y=4*e.length-Math.ceil(n*r/8);if(e[e.length-1]<<=8*y,i)for(u=0;u<r;u++)0===v&&(l=e[d++],v=32),v>=n?(c=l>>>v-n&p,v-=n):(c=(l&p)<<(h=n-v)&p,c+=(l=e[d++])>>>(v=32-h)),t[u]=i[c];else for(f=Math.ceil((s-a)/o),u=0;u<r;u++)0===v&&(l=e[d++],v=32),v>=n?(c=l>>>v-n&p,v-=n):(c=(l&p)<<(h=n-v)&p,c+=(l=e[d++])>>>(v=32-h)),t[u]=c<f?a+c*o:s},t=function(e,t,n,r,i,a,o,s){var u,c,l,h,f=(1<<n)-1,p=0,d=0,v=0;if(i)for(u=0;u<r;u++)0===d&&(l=e[p++],d=32,v=0),d>=n?(c=l>>>v&f,d-=n,v+=n):(c=l>>>v&f,d=32-(h=n-d),c|=((l=e[p++])&(1<<h)-1)<<n-h,v=h),t[u]=i[c];else{var y=Math.ceil((s-a)/o);for(u=0;u<r;u++)0===d&&(l=e[p++],d=32,v=0),d>=n?(c=l>>>v&f,d-=n,v+=n):(c=l>>>v&f,d=32-(h=n-d),c|=((l=e[p++])&(1<<h)-1)<<n-h,v=h),t[u]=c<y?a+c*o:s}return t},n={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,n=65535,r=e.length,i=Math.floor(r/2),a=0;i;){var o=i>=359?359:i;i-=o;do{t+=e[a++]<<8,n+=t+=e[a++]}while(--o);t=(65535&t)+(t>>>16),n=(65535&n)+(n>>>16)}return 1&r&&(n+=t+=e[a]<<8),((n=(65535&n)+(n>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var n=t.ptr,r=new Uint8Array(e,n,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,r),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;n+=6;var a=new DataView(e,n,8),o=a.getInt32(0,!0);if(i.fileVersion=o,n+=4,o>=3&&(i.checksum=a.getUint32(4,!0),n+=4),a=new DataView(e,n,12),i.height=a.getUint32(0,!0),i.width=a.getUint32(4,!0),n+=8,o>=4?(i.numDims=a.getUint32(8,!0),n+=4):i.numDims=1,a=new DataView(e,n,40),i.numValidPixel=a.getUint32(0,!0),i.microBlockSize=a.getInt32(4,!0),i.blobSize=a.getInt32(8,!0),i.imageType=a.getInt32(12,!0),i.maxZError=a.getFloat64(16,!0),i.zMin=a.getFloat64(24,!0),i.zMax=a.getFloat64(32,!0),n+=40,t.headerInfo=i,t.ptr=n,o>=3&&this.computeChecksumFletcher32(new Uint8Array(e,n-(o>=4?52:48),i.blobSize-14))!==i.checksum)throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var n=t.headerInfo,r=this.getDataTypeArray(n.imageType),i=n.numDims*this.getDataTypeSize(n.imageType),a=this.readSubArray(e,t.ptr,r,i),o=this.readSubArray(e,t.ptr+i,r,i);t.ptr+=2*i;var s,u=!0;for(s=0;s<n.numDims;s++)if(a[s]!==o[s]){u=!1;break}return n.minValues=a,n.maxValues=o,u},readSubArray:function(e,t,n,r){var i;if(n===Uint8Array)i=new Uint8Array(e,t,r);else{var a=new ArrayBuffer(r);new Uint8Array(a).set(new Uint8Array(e,t,r)),i=new n(a)}return i},readMask:function(e,t){var n,r,i=t.ptr,a=t.headerInfo,o=a.width*a.height,s=a.numValidPixel,u=new DataView(e,i,4),c={};if(c.numBytes=u.getUint32(0,!0),i+=4,(0===s||o===s)&&0!==c.numBytes)throw"invalid mask";if(0===s)n=new Uint8Array(Math.ceil(o/8)),c.bitset=n,r=new Uint8Array(o),t.pixels.resultMask=r,i+=c.numBytes;else if(c.numBytes>0){n=new Uint8Array(Math.ceil(o/8));var l=(u=new DataView(e,i,c.numBytes)).getInt16(0,!0),h=2,f=0,p=0;do{if(l>0)for(;l--;)n[f++]=u.getUint8(h++);else for(p=u.getUint8(h++),l=-l;l--;)n[f++]=p;l=u.getInt16(h,!0),h+=2}while(h<c.numBytes);if(-32768!==l||f<n.length)throw"Unexpected end of mask RLE encoding";r=new Uint8Array(o);var d=0,v=0;for(v=0;v<o;v++)7&v?(d=n[v>>3],d<<=7&v):d=n[v>>3],128&d&&(r[v]=1);t.pixels.resultMask=r,c.bitset=n,i+=c.numBytes}return t.ptr=i,t.mask=c,!0},readDataOneSweep:function(e,t,r){var i,a=t.ptr,o=t.headerInfo,s=o.numDims,u=o.width*o.height,c=o.numValidPixel*n.getDataTypeSize(o.imageType)*s,l=t.pixels.resultMask;if(r===Uint8Array)i=new Uint8Array(e,a,c);else{var h=new ArrayBuffer(c);new Uint8Array(h).set(new Uint8Array(e,a,c)),i=new r(h)}if(i.length===u*s)t.pixels.resultPixels=i;else{t.pixels.resultPixels=new r(u*s);var f=0,p=0,d=0,v=0;if(s>1)for(d=0;d<s;d++)for(v=d*u,p=0;p<u;p++)l[p]&&(t.pixels.resultPixels[v+p]=i[f++]);else for(p=0;p<u;p++)l[p]&&(t.pixels.resultPixels[p]=i[f++])}return t.ptr=a+=c,!0},readHuffmanTree:function(e,t){var i=this.HUFFMAN_LUT_BITS_MAX,a=new DataView(e,t.ptr,16);if(t.ptr+=16,a.getInt32(0,!0)<2)throw"unsupported Huffman version";var o=a.getInt32(4,!0),s=a.getInt32(8,!0),u=a.getInt32(12,!0);if(s>=u)return!1;var c=new Uint32Array(u-s);n.decodeBits(e,t,c);var l,h,f,p,d=[];for(l=s;l<u;l++)d[h=l-(l<o?0:o)]={first:c[l-s],second:null};var v=e.byteLength-t.ptr,y=Math.ceil(v/4),b=new ArrayBuffer(4*y);new Uint8Array(b).set(new Uint8Array(e,t.ptr,v));var g,m=new Uint32Array(b),w=0,O=0;for(g=m[0],l=s;l<u;l++)(p=d[h=l-(l<o?0:o)].first)>0&&(d[h].second=g<<w>>>32-p,32-w>=p?32===(w+=p)&&(w=0,g=m[++O]):(g=m[++O],d[h].second|=g>>>32-(w+=p-32)));var j,_=0,x=new r;for(l=0;l<d.length;l++)void 0!==d[l]&&(_=Math.max(_,d[l].first));j=_>=i?i:_;var k,S,M,I,T,A=[];for(l=s;l<u;l++)if((p=d[h=l-(l<o?0:o)].first)>0)if(k=[p,h],p<=j)for(S=d[h].second<<j-p,M=1<<j-p,f=0;f<M;f++)A[S|f]=k;else for(S=d[h].second,T=x,I=p-1;I>=0;I--)S>>>I&1?(T.right||(T.right=new r),T=T.right):(T.left||(T.left=new r),T=T.left),0!==I||T.val||(T.val=k[1]);return{decodeLut:A,numBitsLUTQick:j,numBitsLUT:_,tree:x,stuffedData:m,srcPtr:O,bitPos:w}},readHuffman:function(e,t,n){var r,i,a,o,s,u,c,l,h,f=t.headerInfo,p=f.numDims,d=t.headerInfo.height,v=t.headerInfo.width,y=v*d,b=this.readHuffmanTree(e,t),g=b.decodeLut,m=b.tree,w=b.stuffedData,O=b.srcPtr,j=b.bitPos,_=b.numBitsLUTQick,x=b.numBitsLUT,k=0===t.headerInfo.imageType?128:0,S=t.pixels.resultMask,M=0;j>0&&(O++,j=0);var I,T=w[O],A=1===t.encodeMode,C=new n(y*p),E=C;for(I=0;I<f.numDims;I++){if(p>1&&(E=new n(C.buffer,y*I,y),M=0),t.headerInfo.numValidPixel===v*d)for(l=0,u=0;u<d;u++)for(c=0;c<v;c++,l++){if(i=0,s=o=T<<j>>>32-_,32-j<_&&(s=o|=w[O+1]>>>64-j-_),g[s])i=g[s][1],j+=g[s][0];else for(s=o=T<<j>>>32-x,32-j<x&&(s=o|=w[O+1]>>>64-j-x),r=m,h=0;h<x;h++)if(!(r=o>>>x-h-1&1?r.right:r.left).left&&!r.right){i=r.val,j=j+h+1;break}j>=32&&(j-=32,T=w[++O]),a=i-k,A?(a+=c>0?M:u>0?E[l-v]:M,E[l]=a&=255,M=a):E[l]=a}else for(l=0,u=0;u<d;u++)for(c=0;c<v;c++,l++)if(S[l]){if(i=0,s=o=T<<j>>>32-_,32-j<_&&(s=o|=w[O+1]>>>64-j-_),g[s])i=g[s][1],j+=g[s][0];else for(s=o=T<<j>>>32-x,32-j<x&&(s=o|=w[O+1]>>>64-j-x),r=m,h=0;h<x;h++)if(!(r=o>>>x-h-1&1?r.right:r.left).left&&!r.right){i=r.val,j=j+h+1;break}j>=32&&(j-=32,T=w[++O]),a=i-k,A?(a+=c>0&&S[l-1]?M:u>0&&S[l-v]?E[l-v]:M,E[l]=a&=255,M=a):E[l]=a}t.ptr=t.ptr+4*(O+1)+(j>0?4:0)}t.pixels.resultPixels=C},decodeBits:function(n,r,i,a,o){var s=r.headerInfo,u=s.fileVersion,c=0,l=new DataView(n,r.ptr,n.byteLength-r.ptr>=5?5:n.byteLength-r.ptr),h=l.getUint8(0);c++;var f=h>>6,p=0===f?4:3-f,d=(32&h)>0,v=31&h,y=0;if(1===p)y=l.getUint8(c),c++;else if(2===p)y=l.getUint16(c,!0),c+=2;else{if(4!==p)throw"Invalid valid pixel count type";y=l.getUint32(c,!0),c+=4}var b,g,m,w,O,j,_,x,k,S=2*s.maxZError,M=s.numDims>1?s.maxValues[o]:s.zMax;if(d){for(r.counter.lut++,x=l.getUint8(c),c++,w=Math.ceil((x-1)*v/8),O=Math.ceil(w/4),g=new ArrayBuffer(4*O),m=new Uint8Array(g),r.ptr+=c,m.set(new Uint8Array(n,r.ptr,w)),_=new Uint32Array(g),r.ptr+=w,k=0;x-1>>>k;)k++;w=Math.ceil(y*k/8),O=Math.ceil(w/4),g=new ArrayBuffer(4*O),(m=new Uint8Array(g)).set(new Uint8Array(n,r.ptr,w)),b=new Uint32Array(g),r.ptr+=w,j=u>=3?function(e,t,n,r,i,a){var o,s=(1<<t)-1,u=0,c=0,l=0,h=0,f=0,p=0,d=[],v=Math.ceil((a-r)/i);for(c=0;c<n;c++)0===h&&(o=e[u++],h=32,p=0),h>=t?(f=o>>>p&s,h-=t,p+=t):(f=o>>>p&s,h=32-(l=t-h),f|=((o=e[u++])&(1<<l)-1)<<t-l,p=l),d[c]=f<v?r+f*i:a;return d.unshift(r),d}(_,v,x-1,a,S,M):function(e,t,n,r,i,a){var o,s=(1<<t)-1,u=0,c=0,l=0,h=0,f=0,p=[],d=4*e.length-Math.ceil(t*n/8);e[e.length-1]<<=8*d;var v=Math.ceil((a-r)/i);for(c=0;c<n;c++)0===h&&(o=e[u++],h=32),h>=t?(f=o>>>h-t&s,h-=t):(f=(o&s)<<(l=t-h)&s,f+=(o=e[u++])>>>(h=32-l)),p[c]=f<v?r+f*i:a;return p.unshift(r),p}(_,v,x-1,a,S,M),u>=3?t(b,i,k,y,j):e(b,i,k,y,j)}else r.counter.bitstuffer++,k=v,r.ptr+=c,k>0&&(w=Math.ceil(y*k/8),O=Math.ceil(w/4),g=new ArrayBuffer(4*O),(m=new Uint8Array(g)).set(new Uint8Array(n,r.ptr,w)),b=new Uint32Array(g),r.ptr+=w,u>=3?null==a?function(e,t,n,r){var i,a,o,s,u=(1<<n)-1,c=0,l=0,h=0;for(i=0;i<r;i++)0===l&&(o=e[c++],l=32,h=0),l>=n?(a=o>>>h&u,l-=n,h+=n):(a=o>>>h&u,l=32-(s=n-l),a|=((o=e[c++])&(1<<s)-1)<<n-s,h=s),t[i]=a}(b,i,k,y):t(b,i,k,y,!1,a,S,M):null==a?function(e,t,n,r){var i,a,o,s,u=(1<<n)-1,c=0,l=0,h=4*e.length-Math.ceil(n*r/8);for(e[e.length-1]<<=8*h,i=0;i<r;i++)0===l&&(o=e[c++],l=32),l>=n?(a=o>>>l-n&u,l-=n):(a=(o&u)<<(s=n-l)&u,a+=(o=e[c++])>>>(l=32-s)),t[i]=a}(b,i,k,y):e(b,i,k,y,!1,a,S,M))},readTiles:function(e,t,r){var i=t.headerInfo,a=i.width,o=i.height,s=i.microBlockSize,u=i.imageType,c=n.getDataTypeSize(u),l=Math.ceil(a/s),h=Math.ceil(o/s);t.pixels.numBlocksY=h,t.pixels.numBlocksX=l,t.pixels.ptr=0;var f,p,d,v,y,b,g,m,w,O,j=0,_=0,x=0,k=0,S=0,M=0,I=0,T=0,A=0,C=0,E=0,P=0,R=0,D=0,L=new r(s*s),N=o%s||s,F=a%s||s,z=i.numDims,V=t.pixels.resultMask,G=t.pixels.resultPixels,U=i.fileVersion>=5?14:15,B=i.zMax;for(x=0;x<h;x++)for(S=x!==h-1?s:N,k=0;k<l;k++)for(A=x*a*s+k*s,C=a-(M=k!==l-1?s:F),m=0;m<z;m++){if(z>1?(O=G,A=x*a*s+k*s,G=new r(t.pixels.resultPixels.buffer,a*o*m*c,a*o),B=i.maxValues[m]):O=null,p={},D=0,D++,T=(I=(f=new DataView(e,t.ptr,Math.min(10,e.byteLength-t.ptr))).getUint8(0))>>6&255,(I>>2&U)!=(k*s>>3&U))throw"integrity issue";if((w=i.fileVersion>=5?4&I:0)&&0===m)throw"integrity issue";if((y=3&I)>3)throw t.ptr+=D,"Invalid block encoding ("+y+")";if(2!==y)if(0===y){if(w)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=D,E=(E=S*M*c)<(P=e.byteLength-t.ptr)?E:P,d=new ArrayBuffer(E%c==0?E:E+c-E%c),new Uint8Array(d).set(new Uint8Array(e,t.ptr,E)),v=new r(d),R=0,V)for(j=0;j<S;j++){for(_=0;_<M;_++)V[A]&&(G[A]=v[R++]),A++;A+=C}else for(j=0;j<S;j++){for(_=0;_<M;_++)G[A++]=v[R++];A+=C}t.ptr+=R*c}else if(b=n.getDataTypeUsed(w&&u<6?4:u,T),g=n.getOnePixel(p,D,b,f),D+=n.getDataTypeSize(b),3===y)if(t.ptr+=D,t.counter.constantoffset++,V)for(j=0;j<S;j++){for(_=0;_<M;_++)V[A]&&(G[A]=w?Math.min(B,O[A]+g):g),A++;A+=C}else for(j=0;j<S;j++){for(_=0;_<M;_++)G[A]=w?Math.min(B,O[A]+g):g,A++;A+=C}else if(t.ptr+=D,n.decodeBits(e,t,L,g,m),D=0,w)if(V)for(j=0;j<S;j++){for(_=0;_<M;_++)V[A]&&(G[A]=L[D++]+O[A]),A++;A+=C}else for(j=0;j<S;j++){for(_=0;_<M;_++)G[A]=L[D++]+O[A],A++;A+=C}else if(V)for(j=0;j<S;j++){for(_=0;_<M;_++)V[A]&&(G[A]=L[D++]),A++;A+=C}else for(j=0;j<S;j++){for(_=0;_<M;_++)G[A++]=L[D++];A+=C}else{if(w)if(V)for(j=0;j<S;j++)for(_=0;_<M;_++)V[A]&&(G[A]=O[A]),A++;else for(j=0;j<S;j++)for(_=0;_<M;_++)G[A]=O[A],A++;t.counter.constant++,t.ptr+=D}}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:n.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var t=e.headerInfo.zMax,n=e.headerInfo.numDims,r=e.headerInfo.height*e.headerInfo.width,i=0,a=0,o=0,s=e.pixels.resultMask,u=e.pixels.resultPixels;if(s)if(n>1)for(i=0;i<n;i++)for(o=i*r,t=e.headerInfo.maxValues[i],a=0;a<r;a++)s[a]&&(u[o+a]=t);else for(a=0;a<r;a++)s[a]&&(u[a]=t);else if(n>1)for(i=0;i<n;i++)for(o=i*r,t=e.headerInfo.maxValues[i],a=0;a<r;a++)u[o+a]=t;else for(a=0;a<r;a++)u[a]=t},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var n;switch(e){case 0:n=t>=-128&&t<=127;break;case 1:n=t>=0&&t<=255;break;case 2:n=t>=-32768&&t<=32767;break;case 3:n=t>=0&&t<=65536;break;case 4:n=t>=-2147483648&&t<=2147483647;break;case 5:n=t>=0&&t<=4294967296;break;case 6:n=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:n=t>=5e-324&&t<=17976931348623157e292;break;default:n=!1}return n},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var n=e;switch(e){case 2:case 4:n=e-t;break;case 3:case 5:n=e-2*t;break;case 6:n=0===t?e:1===t?2:1;break;case 7:n=0===t?e:e-2*t+1;break;default:n=e}return n},getOnePixel:function(e,t,n,r){var i=0;switch(n){case 0:i=r.getInt8(t);break;case 1:i=r.getUint8(t);break;case 2:i=r.getInt16(t,!0);break;case 3:i=r.getUint16(t,!0);break;case 4:i=r.getInt32(t,!0);break;case 5:i=r.getUInt32(t,!0);break;case 6:i=r.getFloat32(t,!0);break;case 7:i=r.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i}},r=function(e,t,n){this.val=e,this.left=t,this.right=n};return{decode:function(e,t){var r=(t=t||{}).noDataValue,i=0,a={};if(a.ptr=t.inputOffset||0,a.pixels={},n.readHeaderInfo(e,a)){var o=a.headerInfo,s=o.fileVersion,u=n.getDataTypeArray(o.imageType);if(s>5)throw"unsupported lerc version 2."+s;n.readMask(e,a),o.numValidPixel===o.width*o.height||a.pixels.resultMask||(a.pixels.resultMask=t.maskData);var c,l=o.width*o.height;if(a.pixels.resultPixels=new u(l*o.numDims),a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0},0!==o.numValidPixel)if(o.zMax===o.zMin)n.constructConstantSurface(a);else if(s>=4&&n.checkMinMaxRanges(e,a))n.constructConstantSurface(a);else{var h=new DataView(e,a.ptr,2),f=h.getUint8(0);if(a.ptr++,f)n.readDataOneSweep(e,a,u);else if(s>1&&o.imageType<=1&&Math.abs(o.maxZError-.5)<1e-5){var p=h.getUint8(1);if(a.ptr++,a.encodeMode=p,p>2||s<4&&p>1)throw"Invalid Huffman flag "+p;p?n.readHuffman(e,a,u):n.readTiles(e,a,u)}else n.readTiles(e,a,u)}a.eofOffset=a.ptr,t.inputOffset?(c=a.headerInfo.blobSize+t.inputOffset-a.ptr,Math.abs(c)>=1&&(a.eofOffset=t.inputOffset+a.headerInfo.blobSize)):(c=a.headerInfo.blobSize-a.ptr,Math.abs(c)>=1&&(a.eofOffset=a.headerInfo.blobSize));var d={width:o.width,height:o.height,pixelData:a.pixels.resultPixels,minValue:o.zMin,maxValue:o.zMax,validPixelCount:o.numValidPixel,dimCount:o.numDims,dimStats:{minValues:o.minValues,maxValues:o.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&n.isValidPixelValue(o.imageType,r)){var v=a.pixels.resultMask;for(i=0;i<l;i++)v[i]||(d.pixelData[i]=r);d.noDataValue=r}return a.noDataValue=r,t.returnFileInfo&&(d.fileInfo=n.formatFileInfo(a)),d}},getBandCount:function(e){for(var t=0,r=0,i={ptr:0,pixels:{}};r<e.byteLength-58;)n.readHeaderInfo(e,i),t++,i.ptr=r+=i.headerInfo.blobSize;return t}}}())&&(e.exports=t)})),y=function(e){var t,n,r;function i(e){var t,n,r,i,a,o,s,u,c,l,h,f;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),s=(function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),n=this.readUInt16()||100,i.delay=1e3*r/n,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===s&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,l=0;0<=t?l<t:l>t;0<=t?++l:--l)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(u=255-this.transparency.indexed.length)>0)for(h=0;0<=u?h<u:h>u;0<=u?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":a=(c=this.read(t)).indexOf(0),o=String.fromCharCode.apply(String,c.slice(0,a)),this.text[o]=String.fromCharCode.apply(String,c.slice(a+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return i.load=function(e,t,n){var r;return"function"==typeof t&&(n=t),(r=new XMLHttpRequest).open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e;return e=new i(new Uint8Array(r.response||r.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof n?n(e):void 0},r.send(null)},i.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(e){var t,n,r,i,a,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new o.a(e)).getBytes(),y=(f=this.pixelBitlength/8)*this.width,p=new Uint8Array(y*this.height),s=e.length,v=0,d=0,n=0;d<s;){switch(e[d++]){case 0:for(i=m=0;m<y;i=m+=1)p[n++]=e[d++];break;case 1:for(i=w=0;w<y;i=w+=1)t=e[d++],a=i<f?0:p[n-f],p[n++]=(t+a)%256;break;case 2:for(i=O=0;O<y;i=O+=1)t=e[d++],r=(i-i%f)/f,p[n++]=((b=v&&p[(v-1)*y+r*f+i%f])+t)%256;break;case 3:for(i=j=0;j<y;i=j+=1)t=e[d++],r=(i-i%f)/f,a=i<f?0:p[n-f],b=v&&p[(v-1)*y+r*f+i%f],p[n++]=(t+Math.floor((a+b)/2))%256;break;case 4:for(i=_=0;_<y;i=_+=1)t=e[d++],r=(i-i%f)/f,0===v?b=g=0:(b=p[(v-1)*y+r*f+i%f],g=r&&p[(v-1)*y+(r-1)*f+i%f]),u=(a=i<f?0:p[n-f])+b-g,c=Math.abs(u-a),l=Math.abs(u-b),h=Math.abs(u-g),p[n++]=(t+(c<=l&&c<=h?a:l<=h?b:g))%256;break;default:throw new Error("Invalid filter algorithm: "+e[d-1])}v++}return p},i.prototype.decodePalette=function(){var e,t,n,r,i,a,o,s,u;for(n=this.palette,a=this.transparency.indexed||[],i=new Uint8Array((a.length||0)+n.length),r=0,e=0,t=o=0,s=n.length;o<s;t=o+=3)i[r++]=n[t],i[r++]=n[t+1],i[r++]=n[t+2],i[r++]=null!=(u=a[e++])?u:255;return i},i.prototype.copyToImageData=function(e,t){var n,r,i,a,o,s,u,c,l,h,f;if(r=this.colors,l=null,n=this.hasAlphaChannel,this.palette.length&&(l=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(i=e.data||e).length,o=l||t,a=s=0,1===r)for(;a<c;)u=l?4*t[a/4]:s,h=o[u++],i[a++]=h,i[a++]=h,i[a++]=h,i[a++]=n?o[u++]:this.transparency.grayscale&&this.transparency.grayscale===h?0:255,s=u;else for(;a<c;)u=l?4*t[a/4]:s,i[a++]=o[u++],i[a++]=o[u++],i[a++]=o[u++],i[a++]=n?o[u++]:this.transparency.rgb&&this.transparency.rgb[1]===o[u-3]&&this.transparency.rgb[3]===o[u-2]&&this.transparency.rgb[5]===o[u-1]?0:255,s=u},i.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},n=e.document&&e.document.createElement("canvas"),r=n&&n.getContext("2d"),t=function(e){var t;return r.width=e.width,r.height=e.height,r.clearRect(0,0,e.width,e.height),r.putImageData(e,0,0),(t=new Image).src=n.toDataURL(),t},i.prototype.decodeFrames=function(e){var n,r,i,a,o,s,u,c;if(this.animation){for(c=[],r=o=0,s=(u=this.animation.frames).length;o<s;r=++o)i=e.createImageData((n=u[r]).width,n.height),a=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,a),n.imageData=i,c.push(n.image=t(i));return c}},i.prototype.renderFrame=function(e,t){var n,r,i;return n=(r=this.animation.frames)[t],i=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(e){var t,n,r,i,a,o,s=this;return n=0,i=(o=this.animation).numFrames,r=o.frames,a=o.numPlays,(t=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var o,u;if(o=n++%i,u=r[o],s.renderFrame(e,o),i>1&&n/i<a)return s.animation._timeout=setTimeout(t,u.delay)})))()},i.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},i.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},i}(self),b=new Set(["jpg","png","bmp","gif"]);function g(e,t){if(!p.a)throw new r.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var n,a,o=t.width,s=t.height,u=t.pixelType,c=x(u),h=c.pixelTypeCtor,f=null==t.noDataValue?c.noDataValue:t.noDataValue,d=0,v=0,y=e.byteLength-10;v<y;){var b=Object(l.a)(e,{inputOffset:v,encodedMaskData:n,returnMask:0===d,returnEncodedMask:0===d,returnFileInfo:!0,pixelType:h,noDataValue:f});if(o&&s&&(b.width!==o||b.height!==s))throw new r.a("rasterCoded:decode","lerc decoded result has width or height different from specified in options");if(v=b.fileInfo.eofOffset,0===d&&(n=b.encodedMaskData,a=new i.a({width:b.width,height:b.height,pixels:[],pixelType:u,mask:b.maskData,statistics:[]})),d++,a.addData({pixels:b.pixelData,statistics:{minValue:b.minValue,maxValue:b.maxValue,noDataValue:b.noDataValue}}),y-v>10){var g=String.fromCharCode.apply(null,new Uint8Array(e,v,10));v=v+g.indexOf("CntZ")>-1?g.indexOf("CntZ"):0}}return a}function m(e,t){if(!p.a)throw new r.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var n,a,o,s=0,u=0,c=0,l=e.byteLength-10,h=[],f=t.width,d=t.height,y=0;u<l;){var b;if(a=v.decode(e,{inputOffset:u,maskData:n,returnFileInfo:!0}),f&&d&&(a.width!==f||a.height!==d))throw new r.a("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");if(u=a.fileInfo.eofOffset,n=a.maskData,0===s&&(c=a.fileInfo.numValidPixel,o=new i.a({width:a.width,height:a.height,pixels:[],pixelType:a.fileInfo.pixelType,mask:n,statistics:[]})),a.fileInfo.mask&&a.fileInfo.mask.numBytes>0&&y++,n&&h.push(n),a.dimCount>1&&(null==(b=a.pixelData)?void 0:b.length)===a.width*a.height*a.dimCount){var g,m,w,O;a.pixelData=a.pixelData.slice(-a.width*a.height);var j=null==(g=a.dimStats)||null==(m=g.minValues)?void 0:m[a.dimCount-1],_=null==(w=a.dimStats)||null==(O=w.maxValues)?void 0:O[a.dimCount-1];null!=j&&null!=_&&(a.minValue=j,a.maxValue=_)}if(s++,o.addData({pixels:a.pixelData,statistics:{minValue:a.minValue,maxValue:a.maxValue}}),l-u>10){var x=String.fromCharCode.apply(null,new Uint8Array(e,u,10));u+=x.indexOf("Lerc")>-1?x.indexOf("Lerc"):0}}var k=0,S=0,M=0;if(y>1){for(M=o.width*o.height,(n=new Uint8Array(M)).set(h[0]),k=1;k<h.length;k++){var I=h[k];for(S=0;S<M;S++)n[S]=n[S]&I[S]}for(c=0,S=0;S<M;S++)c+=n[S];o.mask=n}return o.validPixelCount=c,o}function w(e){var t=Object(d.a)(e),n=new i.a({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),mask:t.mask,statistics:null});return n.updateStatistics(),n}function O(e){var t=function(){function e(){Wt(this,e)}return Zt(e,null,[{key:"decode",value:function(e){var t=new Uint8Array(e),n=new c.a;n.parse(t);var r,i=n.width,a=n.height,s=n.numComponents,u=n.eof,l=n.getData(i,a,!0),h=i*a,f=0,p=0,d=0;if(u<t.length-1){var v=new o.a(t.subarray(u)).getBytes();r=new Uint8Array(h);var y=0;for(f=0;f<v.length;f++)for(d=7;d>=0;d--)r[y++]=v[f]>>d&1}var b,g=null;if(1===s)g=[l,l,l];else{for(g=[],f=0;f<3;f++)b=new Uint8Array(h),g.push(b);for(d=0,p=0;p<h;p++)for(f=0;f<3;f++)g[f][p]=l[d++]}return{width:i,height:a,pixels:g,mask:r}}}]),e}().decode(e),n=new i.a({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});return n.updateStatistics(),n}function j(e,t){var n,r=new Uint8Array(e),a=new y(r),o=t.width,s=t.height,u=o*s,c=a.decode(),l=0,h=0,f=new Uint8Array(u);for(l=0;l<u;l++)f[l]=c[4*l+3];var p=new i.a({width:o,height:s,pixels:[],pixelType:"U8",mask:f,statistics:[]});for(l=0;l<3;l++){for(n=new Uint8Array(u),h=0;h<u;h++)n[h]=c[4*h+l];p.addData({pixels:n})}return p.updateStatistics(),p}function _(e){if(null==e)throw new r.a("rasterCodec:decode","parameter encodeddata is required.");var t=new Uint8Array(e,0,10),n="";return 255===t[0]&&216===t[1]?n="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?n="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?n="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?n="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&43===t[3]?n="tiff":71===t[0]&&73===t[1]&&70===t[2]?n="gif":66===t[0]&&77===t[1]?n="bmp":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(n="error"),n}function x(e){var t=null,n=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":n=255,t=Uint8Array;break;case"u16":n=n||65535,t=Uint16Array;break;case"u32":n=n||Math.pow(2,32)-1,t=Uint32Array;break;case"s8":n=n||-128,t=Int8Array;break;case"s16":n=n||-32768,t=Int16Array;break;case"s32":n=n||0-Math.pow(2,31),t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:n}}function k(e){var t=_(e);return"lerc2"===t?t="lerc":"error"===t&&(t=""),t}function S(e,t,n){return M.apply(this,arguments)}function M(){return(M=Ut(regeneratorRuntime.mark((function e(t,n,a){var o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new r.a("rasterCodec:decode","missing encodeddata parameter.");case 2:if(null!=n&&null!=n.width&&null!=n.height){e.next=4;break}throw new r.a("rasterCodec:decode","requires width and height in options parameter.");case 4:if("tiff"!==(c=n.format&&n.format.toLowerCase())||!n.customOptions){e.next=9;break}e.t0=function(e,t){var n=Object(d.b)(e,t.customOptions),r=new i.a({width:n.width,height:n.height,pixels:n.pixels,pixelType:n.pixelType.toLowerCase(),mask:n.mask,statistics:null});return r.updateStatistics(),r}(t,n),e.next=18;break;case 9:if((!c||"bsq"!==c&&"bip"!==c)&&(c=_(t)),!n.useCanvas||!b.has(c)){e.next=16;break}return e.next=13,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r,a){var o,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new u,s=Nt({applyJpegMask:!1,format:n},r),e.next=4,o.decode(t,s,a);case 4:return c=e.sent,l=new i.a(c),e.abrupt("return",(l.updateStatistics(),l));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,c,n,a);case 13:s=e.sent,e.next=17;break;case 16:o=function(e){var t=null;switch(e){case"lerc":t=g;break;case"lerc2":t=m;break;case"jpg":t=O;break;case"png":t=j;break;case"bsq":case"bip":t=function(t,n){return function(e,t,n){var r=x(t.pixelType).pixelTypeCtor,a=(0,function(){function e(){Wt(this,e)}return Zt(e,null,[{key:"decode",value:function(e,t){var n,r,i,a,o,s=t.pixelType,u=[],c=t.width*t.height,l=h(e,t),p=t.bandIds,d=t.format,v=p&&p.length||h(e,t),y=e.byteLength-e.byteLength%(c*f(s)),b=new s(e,0,c*l);if("bip"===d)for(n=0;n<v;n++){for(a=new s(c),o=p?p[n]:n,r=0;r<c;r++)a[r]=b[r*l+o];u.push(a)}else if("bsq"===d)for(n=0;n<v;n++)o=p?p[n]:n,u.push(b.subarray(o*c,(o+1)*c));return y<e.byteLength-1&&(i=function(e,t){if(8*e.byteLength<t)return null;var n=new Uint8Array(e,0,Math.ceil(t/8)),r=new Uint8Array(t),i=0,a=0,o=0,s=0;for(o=0;o<n.length-1;o++)for(a=n[o],s=7;s>=0;s--)r[i++]=a>>s&1;for(s=7;i<t-1;)a=n[n.length-1],r[i++]=a>>s&1,s--;return r}(e.slice(y),c)),{pixels:u,mask:i}}}]),e}().decode)(e,{width:t.width,height:t.height,pixelType:r,format:n}),o=new i.a({width:t.width,height:t.height,pixels:a.pixels,pixelType:t.pixelType,mask:a.mask,statistics:null});return o.updateStatistics(),o}(t,n,e)};break;case"tiff":t=w;break;case"error":t=function(){throw new r.a("rasterCodec:decode","input data contains error")};break;default:t=function(){throw new r.a("rasterCodec:decode","unsupported raster format")}}return t}(c),n.isPoint&&((n=Nt({},n)).width++,n.height++),s=o(t,n),n.isPoint&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e){var n=e.pixels,r=e.width,a=e.height,o=e.mask;if(n&&0!==n.length){var s,u,c,l,h,f,p,d=n.length,v=r-1,y=a-1,b=[],g=i.a.getPixelArrayConstructor(e.pixelType);if(0===t){for(s=0;s<d;s++){for(h=n[s],f=new g(v*y),u=0;u<y;u++)for(l=u*r,c=0;c<v;c++)f[u*v+c]=h[l+c];b.push(f)}if(o)for(p=new Uint8Array(v*y),u=0;u<y;u++)for(l=u*r,c=0;c<v;c++)p[u*v+c]=o[l+c]}else{for(s=0;s<d;s++){for(h=n[s],f=new g(v*y),u=0;u<y;u++)for(l=u*r,c=0;c<v;c++)f[u*v+c]=(h[l+c]+h[l+c+1]+h[l+r+c]+h[l+r+c+1])/4;b.push(f)}if(o)for(p=new Uint8Array(v*y),u=0;u<y;u++)for(l=u*r,c=0;c<v;c++)p[u*v+c]=Math.min.apply(null,[o[l+c],o[l+c+1],o[l+r+c],o[l+r+c+1]])}e.width=v,e.height=y,e.mask=p,e.pixels=b}}}(s);case 17:e.t0=s;case 18:return e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},FWf1:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n("pshJ"),o=n("GiSu"),s=n("zB/H"),u=n("p//D"),c=n("n3uD"),l=n("MkmW"),h=function(e){function t(n,r,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.empty;break;case 1:if(!n){a.destination=o.empty;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new f(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new f(a,n,r,i)}return a}return i(t,e),t.prototype[u.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s.Subscription);t.Subscriber=h;var f=function(e){function t(t,n,r,i){var s,u=e.call(this)||this;u._parentSubscriber=t;var c=u;return a.isFunction(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==o.empty&&(c=Object.create(n),a.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=r,u._complete=i,u}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(l.hostReportError(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(h);t.SafeSubscriber=f},FXzB:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;return Wt(this,n),(o=t.call(this,e)).dx=r,o.dy=i,o.dz=a,o}return Zt(n,[{key:"move",value:function(e,t,n,r){this.helper.addDelta(e.pos,t,n,r)}},{key:"apply",value:function(e){this.move(e,this.dx,this.dy,this.dz)}},{key:"undo",value:function(e){this.move(e,-this.dx,-this.dy,-this.dz)}},{key:"canAccumulate",value:function(e){return e instanceof n}},{key:"accumulate",value:function(e,t){this.move(e,t.dx,t.dy,t.dz)}},{key:"accumulateParams",value:function(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}]),n}(n("NPIS").a)},Fewv:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("4EHJ"),i=n("AiS/");function a(e){return{origin:"portal-item",url:Object(r.J)(e.itemUrl),portal:e.portal||i.a.getDefault(),portalItem:e,readResourcePaths:[]}}},FhEM:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("fXoL"),i=n("ofXK"),a=(n("8WOb"),n("OFbc")),o=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c,a.a]]}),e}()},Fjfq:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).name=null,r.title=null,r.expression=null,r.returnType=null,r}return Zt(n,[{key:"clone",value:function(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"title",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"expression",void 0),Object(i.a)([Object(a.b)({type:["string","number"],json:{write:!0}})],u.prototype,"returnType",void 0),u=r=Object(i.a)([Object(o.a)("esri.popup.ExpressionInfo")],u),t.a=u},Fpx9:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("+opI"),i=n("qatw"),a=new r.a({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function o(e){var t=e.toJSON(),n=t.geometries,r=t.deviationUnit,o={maxDeviation:t.maxDeviation};return n&&n.length&&(o.geometries=JSON.stringify({geometryType:Object(i.c)(n[0]),geometries:n}),o.sr=JSON.stringify(n[0].spatialReference)),a.write(r,o,"deviationUnit"),o}},FuAX:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("RI0u"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),h=n("lh0l"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).color=p.clone(),r.type="water",r.waterbodySize="medium",r.waveDirection=null,r.waveStrength="moderate",r}return Zt(n,[{key:"clone",value:function(){return new r({color:Object(a.a)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}}]),n}(h.a);Object(i.a)([Object(s.b)({type:l.a,nonNullable:!0,json:{type:[o.a],write:function(e,t,n){return t[n]=e.toArray(1)},default:function(){return p.clone()},defaultEquals:function(e){return e.toCss(!0)===p.toCss(!0)}}})],f.prototype,"color",void 0),Object(i.a)([Object(u.a)({Water:"water"},{readOnly:!0})],f.prototype,"type",void 0),Object(i.a)([Object(s.b)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],f.prototype,"waterbodySize",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0,default:null}})],f.prototype,"waveDirection",void 0),Object(i.a)([Object(s.b)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],f.prototype,"waveStrength",void 0),f=r=Object(i.a)([Object(c.a)("esri.symbols.WaterSymbol3DLayer")],f);var p=new l.a([0,119,190]);t.a=f},Fym7:function(e,t,n){"use strict";var r,i=n("3r0u"),a=(r=i.a,{setTimeout:function(e,t){var n=r.setTimeout(e,t);return{remove:function(){return r.clearTimeout(n)}}}});t.a=a},FzwJ:function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=n("3r0u"),a=(n("wSAH"),n("f/qv")),o=n("6S2I"),s=(n("zqDF"),n("WbKI")),u=n("r88o"),c=n("04ZG"),l=n("Cduq"),h=n("zlDU"),f=n("4EHJ"),p=(n("ju1D"),n("9AIY"),n("9MzC")),d=n("WZb1"),v=n("OvF4"),y=n("Lqtk"),b=n("pqNC"),g=n("5pQd"),m=n("uRH/"),w=n("PVlI"),O=n("mXvl"),j=n("DbUH"),_=n("WmKv"),x=n("3/ME"),k=n("llFo"),S=n("tIWS"),M=o.a.getLogger("esri.layers.support.SpriteSource"),I=n("EyXx"),T=n("q2iW"),A=n("JYLa"),C=I.a.defaults&&I.a.defaults.io.corsEnabledServers;function E(e){if(e){var t=Object(f.m)(e);C&&-1===C.indexOf(t)&&C.push(t)}}function P(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(Object(f.v)(n[i])){if(e){var a=e.split("://")[0];e=a+":"+n[i].trim()}}else e=Object(f.s)(n[i])?n[i]:Object(f.y)(e,n[i]);return Object(f.H)(e)}function R(e,t,n,r,i){return D.apply(this,arguments)}function D(){return(D=Ut(regeneratorRuntime.mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.u)(a),"string"!=typeof r){e.next=11;break}return E(c=Object(f.C)(r)),l=Object(f.J)(c),e.next=6,Object(y.default)(l.path,Nt({query:{f:"json"},responseType:"json"},a));case 6:u=e.sent,o=c,s=c,e.next=12;break;case 11:u={data:r},o=r.jsonUrl||null,s=i;case 12:return h=u.data,e.abrupt("return",(u.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),s&&(s=s.replace(/^http:/i,"https:"))),L(h)?(t.styleUrl=o||null,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r?Object(f.F)(r):f.f,t.styleBase=a,t.style=n,t.styleUrl&&E(t.styleUrl),n["sprite-format"]&&"webp"===n["sprite-format"].toLowerCase()&&(t.spriteFormat="webp"),o=[],!n.sources||!n.sources.esri){e.next=11;break}if(!(s=n.sources.esri).url){e.next=10;break}return e.next=8,R(t,"esri",P(a,s.url),void 0,i);case 8:e.next=11;break;case 10:o.push(R(t,"esri",s,a,i));case 11:for(u=0,c=Object.keys(n.sources);u<c.length;u++)"esri"!==(l=c[u])&&"vector"===n.sources[l].type&&(n.sources[l].url?o.push(R(t,l,P(a,n.sources[l].url),void 0,i)):n.sources[l].tiles&&o.push(R(t,l,n.sources[l],a,i)));return e.next=14,Promise.all(o);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,h,s,a)):function(e){return!L(e)}(h)?t.sourceUrl?N(t,h,s,!1,n,a):(t.sourceUrl=o||null,N(t,h,s,!0,n,a)):Promise.reject("You must specify the URL or the JSON for a service or for a style.")));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return!!e.sources}function N(e,t,n,r,i,a){return F.apply(this,arguments)}function F(){return(F=Ut(regeneratorRuntime.mark((function e(t,n,r,i,o,s){var u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r?Object(f.H)(r)+"/":f.f,c=function(e,t){if(e.hasOwnProperty("tileInfo"))return e;for(var n={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},r=78271.51696400007,i=295828763.7957775,a=[],o=e.hasOwnProperty("minzoom")?parseFloat(e.minzoom):0,s=e.hasOwnProperty("maxzoom")?parseFloat(e.maxzoom):22,u=0;u<=s;u++)u>=o&&a.push({level:u,scale:i,resolution:r}),r/=2,i/=2;var c,l=Vt(e.tiles);try{for(l.s();!(c=l.n()).done;){E(P(t,c.value))}}catch(h){l.e(h)}finally{l.f()}return{capabilities:"TilesOnly",initialExtent:n,fullExtent:n,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:a,spatialReference:{wkid:102100}}}}(n,u),l=new(function(){function e(t,n,r){Wt(this,e),this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=t,this.sourceUrl=n,n&&(this.parsedUrl=Object(f.J)(this.sourceUrl));var i=this.parsedUrl.path,o=this.parsedUrl.query?"?"+Object(f.D)(this.parsedUrl.query):"",s=Object(a.a)(r),u=s.tiles;n&&u.forEach((function(e,t){Object(f.s)(e)||(u[t]=Object(f.y)(i,e)+o)})),this.tileServers=u,r.tileMap&&(this.tileMapURL=Object(f.y)(n,r.tileMap));var c=r.capabilities&&r.capabilities.split(",").map((function(e){return e.toLowerCase().trim()})),l=!!r.exportTilesAllowed,h=!!c&&-1!==c.indexOf("tilemap"),p=l&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:l,supportsTileMap:h},exportTiles:l?{maxExportTilesCount:+p}:null},this.tileInfo=Object(T.a)(s.tileInfo,s,null,{ignoreMinMaxLOD:!0}),h&&(this.type="vector-tile",this.tilemapCache=new k.a({layer:this}),this.tilemapCache&&(this.tileIndex=new A.a(this.tilemapCache))),this.fullExtent=v.a.fromJSON(r.fullExtent)}return Zt(e,[{key:"getRefKey",value:function(e,t){return this.tileIndex?this.tileIndex.dataKey(e,t):Promise.resolve(e)}},{key:"getSourceTileUrl",value:function(e,t,n){var r=this.tileServers[t%this.tileServers.length];return r=r.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,n.toString())}},{key:"isCompatibleWith",value:function(e){var t=this.tileInfo,n=e.tileInfo;if(!t.spatialReference.equals(n.spatialReference))return!1;if(!t.origin.equals(n.origin))return!1;if(Math.round(t.dpi)!==Math.round(n.dpi))return!1;for(var r=t.lods,i=n.lods,a=Math.min(r.length,i.length),o=0;o<a;o++){var s=r[o],u=i[o];if(s.level!==u.level||Math.round(s.scale)!==Math.round(u.scale))return!1}return!0}}]),e}())(o,u,c),i||!(t.primarySourceName in t.sourceNameToSource)){e.next=6;break}if((h=t.sourceNameToSource[t.primarySourceName]).isCompatibleWith(l)){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:null!=l.fullExtent&&(null!=h.fullExtent?h.fullExtent.union(l.fullExtent):h.fullExtent=l.fullExtent.clone()),h.tileInfo.lods.length<l.tileInfo.lods.length&&(h.tileInfo=l.tileInfo);case 6:if(i?(t.sourceBase=u,t.source=n,t.validatedSource=c,t.primarySourceName=o,t.sourceUrl&&E(t.sourceUrl)):E(u),t.sourceNameToSource[o]=l,t.style){e.next=8;break}return e.abrupt("return",null==n.defaultStyles?Promise.reject():"string"==typeof n.defaultStyles?R(t,"",P(u,n.defaultStyles,"root.json"),void 0,s):R(t,"",n.defaultStyles,P(u,"root.json"),s));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=n("Fewv"),V=n("UOZ4"),G=function(){function e(t,n){Wt(this,e),this.lockedSchemaPixelSize=t,this.isGCS=n}return Zt(e,[{key:"getLevelRowColumn",value:function(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e}},{key:"adjustLevel",value:function(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e}},{key:"getShift",value:function(e,t){var n=0,r=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(n=t),e[1]%2&&(r=t)),[n,r]}},{key:"getScale",value:function(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2}}],[{key:"create256x256CompatibleTileInfo",value:function(e){if(!e)return null;if(256===e.size[0]&&256===e.size[1])return e;for(var t=e.spatialReference.isGeographic,n=[],r=e.lods.length,i=0;i<r;i++){var a=e.lods[i];n.push(new V.a({level:a.level,scale:a.scale,resolution:t?a.resolution:2*a.resolution}))}return new x.a({size:[256,256],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:n})}},{key:"create512x512CompatibleTileInfo",value:function(e){if(!e)return null;if(256===e.size[0]||256===e.size[1])return null;for(var t=[],n=e.lods.length,r=0;r<n;r++){var i=e.lods[r];t.push(new V.a({level:i.level,scale:i.scale,resolution:.5*i.resolution}))}return new x.a({size:[512,512],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:t})}}]),e}();function U(e,t){if(e===t)return!0;if(!e&&null!=t)return!1;if(null!=e&&!t)return!1;if(!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;var n,r,i=e.origin,a=t.origin;if(Math.abs(i.x-a.x)>=1e-6||Math.abs(i.y-a.y)>=1e-6)return!1;e.lods[0].scale>t.lods[0].scale?(n=e,r=t):(r=e,n=t);for(var o=n.lods[0].scale;o>=r.lods[r.lods.length-1].scale-1e-6;o/=2)if(Math.abs(o-r.lods[0].scale)<1e-6)return!0;return!1}function B(e,t){if(e===t)return e;if(!e&&null!=t)return t;if(null!=e&&!t)return e;for(var n=e.size[0],r=e.format,i=e.dpi,a={x:e.origin.x,y:e.origin.y},o=e.spatialReference.toJSON(),s=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],u=(e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1]).scale,c=[],l=s.scale,h=s.resolution,f=0;l>u;)c.push({level:f,resolution:h,scale:l}),f++,l/=2,h/=2;return new x.a({size:[n,n],dpi:i,format:r||"pbf",origin:a,lods:c,spatialReference:o})}var q=n("kB7V"),H=n("sq/B"),W=function(e){Kt(c,e);var t,n,r,o,s,u=Xt(c);function c(){var e;Wt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=u.call.apply(u,[this].concat(n)))._spriteSourceMap=new Map,e.currentStyleInfo=null,e.style=null,e.isReference=null,e.operationalLayerType="VectorTileLayer",e.type="vector-tile",e.url=null,e}return Zt(c,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Nt({url:e},t):e}},{key:"destroy",value:function(){this._spriteSourceMap.clear()}},{key:"prefetchResources",value:(s=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSpriteSource(i.a.devicePixelRatio||1,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"load",value:function(e){var t=this,n=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).then(Ut(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.portalItem&&t.portalItem.id){n.next=2;break}return n.abrupt("return");case 2:return r=t.portalItem.itemUrl+"/resources/styles/root.json",n.next=5,Object(y.default)(r,Nt(Nt({},e),{},{query:{f:"json"}}));case 5:if(n.t0=n.sent.data,!n.t0){n.next=8;break}t.read({url:r},Object(z.a)(t.portalItem));case 8:case"end":return n.stop()}}),n)})))).then((function(){return t._loadStyle(e)}),(function(){return t._loadStyle(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"attributionDataUrl",get:function(){var e=this.currentStyleInfo,t=e&&e.serviceUrl&&Object(f.J)(e.serviceUrl);return t?this._getDefaultAttribution(t.path):null}},{key:"capabilities",get:function(){var e=this._getPrimarySource();return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){var e=this._getPrimarySource();return e?e.fullExtent:null}},{key:"parsedUrl",get:function(){return this.serviceUrl?Object(f.J)(this.serviceUrl):null}},{key:"serviceUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"writeStyleUrl",value:function(e,t){e&&Object(f.v)(e)&&(e="https:"+e),t.styleUrl=e}},{key:"tileIndexType",get:function(){var e=this._getPrimarySource();return e?e.type:""}},{key:"tileIndexUrl",get:function(){var e=this._getPrimarySource();return e?e.tileMapURL:""}},{key:"tileInfo",get:function(){var e,t=[];for(var n in this.sourceNameToSource)t.push(this.sourceNameToSource[n]);var r=(null==(e=this._getPrimarySource())?void 0:e.tileInfo)||new x.a;if(t.length>1)for(var i=0;i<t.length;i++)U(r,t[i].tileInfo)&&(r=B(r,t[i].tileInfo));return r}},{key:"tilemapCache",get:function(){var e=this._getPrimarySource();return e&&e.capabilities.operations.supportsTileMap?e.tilemapCache:null}},{key:"tileServers",get:function(){var e=this._getPrimarySource();return e?e.tileServers:[]}},{key:"readVersion",value:function(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}},{key:"compatibleTileInfo256",get:function(){return G.create256x256CompatibleTileInfo(this.tileInfo)}},{key:"compatibleTileInfo512",get:function(){return G.create512x512CompatibleTileInfo(this.tileInfo)}},{key:"loadSpriteSource",value:(o=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:1,n=a.length>1?a[1]:void 0,this._spriteSourceMap.has(t)){e.next=7;break}return r=Object(H.a)(),i=new(function(){function e(t,n,r,i){Wt(this,e),this.baseURL=t,this.devicePixelRatio=n,this.maxTextureSize=r,this._spriteImageFormat=i,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}var t;return Zt(e,[{key:"spriteNames",get:function(){var e=[];for(var t in this._spritesData)e.push(t);return e.sort(),e}},{key:"getSpriteInfo",value:function(e){return this._spritesData[e]}},{key:"load",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.baseURL){e.next=13;break}return this.loadStatus="loading",e.prev=2,e.next=5,this._loadSprites(t);case 5:this.loadStatus="loaded",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.loadStatus="failed";case 11:e.next=14;break;case 13:this.loadStatus="failed";case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return t.apply(this,arguments)})},{key:"_loadSprites",value:function(e){var t=this;this._isRetina=this.devicePixelRatio>1.15;var n=Object(f.J)(this.baseURL),r=n.query?"?"+Object(f.D)(n.query):"",i=this._isRetina?"@2x":"",a="".concat(n.path).concat(i,".").concat(this._spriteImageFormat).concat(r),o="".concat(n.path).concat(i,".json").concat(r);return Promise.all([Object(y.default)(o,e),Object(y.default)(a,Nt({responseType:"image"},e))]).then((function(e){var r=zt(e,2),i=r[0],a=r[1],o=Object.keys(i.data);if(!o||0===o.length||1===o.length&&"_ssl"===o[0]||!a||!a.data)return t._spritesData=t.image=null,t.width=t.height=0,Promise.resolve(null);t._spritesData=i.data;var s=a.data,u=Math.max(t.maxTextureSize,4096);if(s.width>u||s.height>u){var c="Sprite resource for style ".concat(n.path," is bigger than the maximum allowed of ").concat(u," pixels}");throw M.error(c),new h.a("SpriteSource",c)}t.width=s.width,t.height=s.height;var l=document.createElement("canvas"),f=l.getContext("2d");l.width=s.width,l.height=s.height,f.drawImage(s,0,0,s.width,s.height);for(var p,d=f.getImageData(0,0,s.width,s.height),v=new Uint8Array(d.data),y=0;y<v.length;y+=4)p=v[y+3]/255,v[y]=v[y]*p,v[y+1]=v[y+1]*p,v[y+2]=v[y+2]*p;t.image=v}))}}]),e}())(this.styleRepository.sprite,t,r.maxTextureSize,this.currentStyleInfo.spriteFormat),e.next=6,i.load(n);case 6:this._spriteSourceMap.set(t,i);case 7:return e.abrupt("return",Promise.resolve(this._spriteSourceMap.get(t)));case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"loadStyle",value:(r=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t||this.style||this.url,!this._loadingPromise||"string"!=typeof r||this.url!==r||Object(p.n)(this._abortController)){e.next=3;break}return e.abrupt("return",this._loadingPromise);case 3:return(i=this._abortController)&&i.abort(),a=Object(p.d)(),e.abrupt("return",(this._loadingPromise=new Promise((function(e,t){var i={signal:a.signal};o._spriteSourceMap.clear(),o._getSourceAndStyle(r,i).then(e,t),Object(p.p)(n,(function(){a.abort()}))})),this._abortController=a,this._loadingPromise));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getStyleLayerId",value:function(e){return this.styleRepository.getStyleLayerId(e)}},{key:"getStyleLayerIndex",value:function(e){return this.styleRepository.getStyleLayerIndex(e)}},{key:"getPaintProperties",value:function(e){return Object(a.a)(this.styleRepository.getPaintProperties(e))}},{key:"setPaintProperties",value:function(e,t){var n=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);var r=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layerName:e,paint:t,isDataDriven:n||r})}},{key:"getStyleLayer",value:function(e){return Object(a.a)(this.styleRepository.getStyleLayer(e))}},{key:"setStyleLayer",value:function(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}},{key:"deleteStyleLayer",value:function(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layerName:e})}},{key:"getLayoutProperties",value:function(e){return Object(a.a)(this.styleRepository.getLayoutProperties(e))}},{key:"setLayoutProperties",value:function(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}},{key:"setStyleLayerVisibility",value:function(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}},{key:"getStyleLayerVisibility",value:function(e){return this.styleRepository.getStyleLayerVisibility(e)}},{key:"getTileUrl",value:function(e,t,n){var r=this.tileServers[t%this.tileServers.length];return r=r.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,n.toString())}},{key:"write",value:function(e,t){return t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new h.a("vectortilelayer:unsupported","VectorTileLayer (".concat(this.title,", ").concat(this.id,") with style defined by JSON only are not supported"),{layer:this})),null):Dt(en(c.prototype),"write",this).call(this,e,t)}},{key:"_getSourceAndStyle",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("invalid style!");case 2:return e.next=4,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},i="string"==typeof t?[t,null]:[null,t.jsonUrl],a=zt(i,2),o=a[0],s=a[1],u=o?Object(f.J)(o):null,e.next=3,R(r,"esri",t,s,n);case 3:return c={layerDefinition:r.validatedSource,url:o,parsedUrl:u,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&P(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&P(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName},e.abrupt("return",(E(c.spriteUrl),E(c.glyphsUrl),c));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:if(r=e.sent,e.t0="webp"===r.spriteFormat,!e.t0){e.next=12;break}return e.next=9,new Promise((function(e){var t=new Image;t.onload=function(){t.onload=t.onerror=null,e(t.width>0&&t.height>0)},t.onerror=function(){t.onload=t.onerror=null,e(!1)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}));case 9:if(e.t1=e.sent,e.t1){e.next=12;break}r.spriteFormat="png";case 12:this._set("currentStyleInfo",Nt({},r)),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySourceName",r.primarySourceName),this._set("styleRepository",new q.a(r.style,r)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style",{});case 19:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_getDefaultAttribution",value:function(e){var t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(t){var n=t[2]&&t[2].toLowerCase();if(n)for(var r=t[1]||"",i=0,a=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];i<a.length;i++){var o=a[i];if(o.toLowerCase().indexOf(n)>-1)return Object(f.C)("//static.arcgis.com/attribution/Vector".concat(r,"/").concat(o))}}}},{key:"_getPrimarySource",value:function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null}},{key:"_loadStyle",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._loadingPromise?this._loadingPromise:this.loadStyle(null,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),c}(Object(O.a)(Object(_.a)(Object(S.a)(Object(w.a)(Object(m.a)(Object(j.a)(Object(g.a)(b.a))))))));Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"attributionDataUrl",null),Object(r.a)([Object(s.b)({type:["show","hide"]})],W.prototype,"listMode",void 0),Object(r.a)([Object(s.b)({readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"],json:{read:!1}})],W.prototype,"capabilities",null),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"currentStyleInfo",void 0),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0,type:v.a})],W.prototype,"fullExtent",null),Object(r.a)([Object(s.b)()],W.prototype,"style",void 0),Object(r.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],W.prototype,"isReference",void 0),Object(r.a)([Object(s.b)({type:["VectorTileLayer"]})],W.prototype,"operationalLayerType",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"parsedUrl",null),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"serviceUrl",null),Object(r.a)([Object(s.b)({type:d.a,readOnly:!0})],W.prototype,"spatialReference",null),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"styleRepository",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"sourceNameToSource",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"primarySourceName",void 0),Object(r.a)([Object(s.b)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],W.prototype,"styleUrl",null),Object(r.a)([Object(l.a)(["portal-item","web-document"],"styleUrl")],W.prototype,"writeStyleUrl",null),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileIndexType",null),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileIndexUrl",null),Object(r.a)([Object(s.b)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:x.a})],W.prototype,"tileInfo",null),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0,type:k.a})],W.prototype,"tilemapCache",null),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileServers",null),Object(r.a)([Object(s.b)({json:{read:!1},readOnly:!0,value:"vector-tile"})],W.prototype,"type",void 0),Object(r.a)([Object(s.b)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],W.prototype,"url",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"version",void 0),Object(r.a)([Object(u.a)("version",["version","currentVersion"])],W.prototype,"readVersion",null),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"compatibleTileInfo256",null),Object(r.a)([Object(s.b)({readOnly:!0})],W.prototype,"compatibleTileInfo512",null),W=Object(r.a)([Object(c.a)("esri.layers.VectorTileLayer")],W),t.default=W},G48n:function(e,t,n){"use strict";n("IDUf"),n("RlM3"),n("IeLS"),n("JV2H");var r=n("YyOG"),i=n("3r0u"),a=n("srIe"),o=n("zlDU"),s=n("Lqtk");function u(e){return c.apply(this,arguments)}function c(){return(c=Ut(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(a.k)(l.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",l.fetchBundleAsset(t));case 2:return e.next=4,Object(s.default)(t,{responseType:"text"});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l={},h=n("ss0y");Object(r.c)(new(function(){function e(t){var n,r=t.base,a=void 0===r?"":r,o=t.pattern,s=t.location,u=void 0===s?new URL(window.location.href):s;Wt(this,e),n="string"==typeof u?function(e){return new URL(e,new URL(u,i.a.location)).href}:u instanceof URL?function(e){return new URL(e,u).href}:u,this.pattern="string"==typeof o?new RegExp("^"+o):o,this.getAssetUrl=n,a=a?a.endsWith("/")?a:a+"/":"",this.matcher=new RegExp("^".concat(a,"(?:(.*)/)?(.*)$"))}return Zt(e,[{key:"fetchMessageBundle",value:function(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n,i,a){var s,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.exec(i)){e.next=3;break}throw new o.a("esri-intl:invalid-bundle",'Bundle id "'.concat(i,'" is not compatible with the pattern "').concat(n,'"'));case 3:return c=s[1]?s[1]+"/":"",l=s[2],h=Object(r.b)(a),f="".concat(c).concat(l,".json"),p=h?"".concat(c).concat(l,"_").concat(h,".json"):f,e.prev=4,e.next=7,u(t(p));case 7:d=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),p!==f){e.next=14;break}throw new o.a("intl:unknown-bundle",'Bundle "'.concat(i,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,u(t(f));case 17:d=e.sent,e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(14),new o.a("intl:unknown-bundle",'Bundle "'.concat(i,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",d);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),function(e,t,r,i){return n.apply(this,arguments)})(this.getAssetUrl,this.matcher,e,t);var n}}]),e}())({pattern:"esri/",location:h.a}))},GFPt:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n("srIe"),i=n("LE9a"),a=n("bV/r"),o=n("eSsm");function s(e,t){return u.apply(this,arguments)}function u(){return(u=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return e.abrupt("return",c(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t){return l.apply(this,arguments)}function l(){return(l=Ut(regeneratorRuntime.mark((function e(t,n){var s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],n((function e(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var u=0,c=n;u<c.length;u++){var l=c[u];Object(r.j)(l)||(Array.isArray(l)?e.apply(void 0,Bt(l)):i.a.isCollection(l)?l.forEach((function(t){return e(t)})):a.a.isLoadable(l)&&s.push(l))}})),u=null,e.next=5,Object(o.b)(s,function(){var e=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t1=!1,e.next=3,Object(o.c)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(t)?t.loadAll():t.load());case 3:if(e.t2=e.sent.ok,e.t0=e.t1!==e.t2,e.t0){e.next=7;break}e.t0=u;case 7:if(e.t3=e.t0,e.t3){e.next=10;break}u=t;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!u){e.next=7;break}throw u.loadError;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},GJyJ:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32774,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:e,srcAlpha:e,dstRgb:t,dstAlpha:t,opRgb:n,opAlpha:n,color:{r:r[0],g:r[1],b:r[2],a:r[3]}}}function i(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32774,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:32774,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:e,srcAlpha:t,dstRgb:n,dstAlpha:r,opRgb:i,opAlpha:a,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r}));var a={zNear:0,zFar:1},o={r:!0,g:!0,b:!0,a:!0};function s(e){return g.intern(e)}function u(e){return w.intern(e)}function c(e){return j.intern(e)}function l(e){return x.intern(e)}function h(e){return S.intern(e)}function f(e){return I.intern(e)}function p(e){return A.intern(e)}function d(e){return E.intern(e)}function v(e){return R.intern(e)}var y=function(){function e(t,n){Wt(this,e),this.makeKey=t,this.makeRef=n,this.interns=new Map}return Zt(e,[{key:"intern",value:function(e){if(!e)return null;var t=this.makeKey(e),n=this.interns;return n.has(t)||n.set(t,this.makeRef(e)),n.get(t)}}]),e}();function b(e){return"["+e.join(",")+"]"}var g=new y(m,(function(e){return Nt({__tag:"Blending"},e)}));function m(e){return e?b([e.srcRgb,e.srcAlpha,e.dstRgb,e.dstAlpha,e.opRgb,e.opAlpha,e.color.r,e.color.g,e.color.b,e.color.a]):null}var w=new y(O,(function(e){return Nt({__tag:"Culling"},e)}));function O(e){return e?b([e.face,e.mode]):null}var j=new y(_,(function(e){return Nt({__tag:"PolygonOffset"},e)}));function _(e){return e?b([e.factor,e.units]):null}var x=new y(k,(function(e){return Nt({__tag:"DepthTest"},e)}));function k(e){return e?b([e.func]):null}var S=new y(M,(function(e){return Nt({__tag:"StencilTest"},e)}));function M(e){return e?b([e.function.func,e.function.ref,e.function.mask,e.operation.fail,e.operation.zFail,e.operation.zPass]):null}var I=new y(T,(function(e){return Nt({__tag:"DepthWrite"},e)}));function T(e){return e?b([e.zNear,e.zFar]):null}var A=new y(C,(function(e){return Nt({__tag:"ColorWrite"},e)}));function C(e){return e?b([e.r,e.g,e.b,e.a]):null}var E=new y(P,(function(e){return Nt({__tag:"StencilWrite"},e)}));function P(e){return e?b([e.mask]):null}var R=new y((function(e){return e?b([m(e.blending),O(e.culling),_(e.polygonOffset),k(e.depthTest),M(e.stencilTest),T(e.depthWrite),C(e.colorWrite),P(e.stencilWrite)]):null}),(function(e){return{blending:s(e.blending),culling:u(e.culling),polygonOffset:c(e.polygonOffset),depthTest:l(e.depthTest),stencilTest:h(e.stencilTest),depthWrite:f(e.depthWrite),colorWrite:p(e.colorWrite),stencilWrite:d(e.stencilWrite)}})),D=function(){function e(t){Wt(this,e),this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}return Zt(e,[{key:"setPipeline",value:function(e){(this._pipelineInvalid||e!==this._pipeline)&&(this.setBlending(e.blending),this.setCulling(e.culling),this.setPolygonOffset(e.polygonOffset),this.setDepthTest(e.depthTest),this.setStencilTest(e.stencilTest),this.setDepthWrite(e.depthWrite),this.setColorWrite(e.colorWrite),this.setStencilWrite(e.stencilWrite),this._pipeline=e),this._pipelineInvalid=!1}},{key:"invalidateBlending",value:function(){this._blendingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateCulling",value:function(){this._cullingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidatePolygonOffset",value:function(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthTest",value:function(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilTest",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthWrite",value:function(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateColorWrite",value:function(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilWrite",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"setBlending",value:function(e){this._blending=this.setSubState(e,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}},{key:"setCulling",value:function(e){this._culling=this.setSubState(e,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}},{key:"setPolygonOffset",value:function(e){this._polygonOffset=this.setSubState(e,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}},{key:"setDepthTest",value:function(e){this._depthTest=this.setSubState(e,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}},{key:"setStencilTest",value:function(e){this._stencilTest=this.setSubState(e,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}},{key:"setDepthWrite",value:function(e){this._depthWrite=this.setSubState(e,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}},{key:"setColorWrite",value:function(e){this._colorWrite=this.setSubState(e,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}},{key:"setStencilWrite",value:function(e){this._stencilWrite=this.setSubState(e,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}},{key:"setSubState",value:function(e,t,n,r){return(n||e!==t)&&(r(e),this._pipelineInvalid=!0),e}}]),e}()},GL98:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("p6dn")),l=n("n5EF"),h=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.fieldInfos=null,r.title=null,r.type="fields",r}return Zt(n,[{key:"writeFieldInfos",value:function(e,t){t.fieldInfos=e&&e.map((function(e){return e.toJSON()}))}},{key:"clone",value:function(){return new r({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?Object(a.a)(this.fieldInfos):null,title:this.title})}}]),n}(c.a);Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],h.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:[l.a]})],h.prototype,"fieldInfos",void 0),Object(i.a)([Object(u.a)("fieldInfos")],h.prototype,"writeFieldInfos",null),Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],h.prototype,"title",void 0),Object(i.a)([Object(o.b)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=r=Object(i.a)([Object(s.a)("esri.popup.content.FieldsContent")],h),t.a=h},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GVa1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n("wSAH");var r=n("6S2I");function i(e){}n("zlDU"),r.a.getLogger("esri/views/webgl")},GWL5:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return d}));var r=n("OIYi"),i=n("Tbkp"),a=n("aQrP"),o=n("Q3fD"),s=n("0nJL"),u=n("0Ect"),c=n("agdK"),l=n("69UF"),h=n("xtdb"),f=n("wtEh"),p=n("bVvB");function d(e){var t=new a.a,n=1===e.output;return t.include(i.a,{linearDepth:n}),t.include(p.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.attributes.add("position","vec3"),t.varyings.add("vpos","vec3"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),n&&(t.include(f.a,e),t.vertex.uniforms.add("cameraNearFar","vec2"),t.varyings.add("linearDepth","float")),t.vertex.code.add(r.a(Z||(Z=Rt(["\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      ","\n      gl_Position = ","\n    }\n  "])),e.multipassTerrainEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",n?r.a(K||(K=Rt(["transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);"]))):r.a(Y||(Y=Rt(["transformPosition(proj, view, vpos);"]))))),t.include(s.a,e),t.fragment.include(o.a),e.multipassTerrainEnabled&&(t.fragment.include(u.a),t.include(h.b,e)),t.fragment.uniforms.add("eColor","vec4"),4===e.output&&t.include(c.a),t.fragment.code.add(r.a(X||(X=Rt(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    vec4 color = ","\n\n    if (color.a < ",") {\n      discard;\n    }\n\n    ","\n\n    ","\n    ",";\n    ",";\n  }\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",e.attributeColor?"vColor * eColor;":"eColor;",r.a.float(l.c),7===e.output?r.a(Q||(Q=Rt(["gl_FragColor = vec4(color.a);"]))):"",0===e.output?r.a($||($=Rt(["gl_FragColor = highlightSlice(color, vpos); ",""])),e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""):"",4===e.output?r.a(ee||(ee=Rt(["outputHighlight();"]))):"",1===e.output?r.a(te||(te=Rt(["outputDepth(linearDepth);"]))):"")),t}var v=Object.freeze({__proto__:null,build:d})},Gbm8:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return h}));var r=n("5DEt"),i=n("IRkY"),a=n("8JEK"),o=n("QFRQ");function s(e){return e?{ray:Object(o.b)(e.ray),c0:e.c0,c1:e.c1}:{ray:Object(o.b)(),c0:0,c1:Number.MAX_VALUE}}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s();return Object(o.a)(e,r.ray),r.c0=t,r.c1=n,r}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return Object(o.a)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s(),i=Object(r.o)(e.vector);return Object(o.d)(e.origin,t,n.ray),n.c0=0,n.c1=i,n}function h(e,t){return p(e,e.c0,t)}function f(e,t){return p(e,e.c1,t)}function p(e,t,n){return Object(r.e)(n,e.ray.origin,Object(r.d)(n,e.ray.direction,t))}var d=new i.a((function(){return{c0:0,c1:0,ray:null}})),v=Object.freeze({__proto__:null,create:s,wrap:function(e,t,n){var r=d.get();return r.ray=e,r.c0=t,r.c1=n,r},copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return u(e.ray,e.c0,e.c1,t)},fromValues:u,fromRay:c,fromLineSegment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return l(e,Object(r.q)(a.d.get(),e.vector),t)},fromLineSegmentAndDirection:l,getStart:h,getEnd:f,getAt:p})},Gdt4:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d}));var r=n("srIe"),i=n("Piei"),a=180/Math.PI,o=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},s=new Map;function u(e,t){return s.get(e)/s.get(t)||1}function c(e){return(450-e)%360}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",n=zt(e,2),r=n[0],i=n[1],o=Math.sqrt(r*r+i*i),s=Math.atan2(i,r)*a;return s=(360+s)%360,"geographic"===t&&(s=c(s)),[o,s]}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",n=e[1];"geographic"===t&&(n=c(n)),n%=360;var r=e[0];return[r*Math.cos(n/a),r*Math.sin(n/a)]}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!o(e))return e;for(var a=e.pixels,s=e.width,u=e.height,c=s*u,f=a[0],p=a[1],d=i.a.createEmptyBand(e.pixelType,c),v=i.a.createEmptyBand(e.pixelType,c),y=0,b=0;b<u;b++)for(var g=0;g<s;g++){var m,w;"vector-uv"===t?(m=zt(l([f[y],p[y]],n),2),d[y]=m[0],v[y]=m[1],d[y]*=r):(w=zt(h([f[y],p[y]],n),2),d[y]=w[0],v[y]=w[1],d[y]*=r,v[y]*=r),y++}var O=new i.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[d,v]});return O.updateStatistics(),O}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===n||!o(e))return e;for(var r=e.clone(),i=r.pixels,a=r.width,s=r.height,u=i[0],c=i[1],l=0,h=0;h<s;h++)for(var f=0;f<a;f++)"vector-uv"===t?(u[l]*=n,c[l]*=n):u[l]*=n,l++;return r.updateStatistics(),r}function d(e,t,n,i,a){if(!Object(r.k)(a)||!a.spatialReference.equals(e.spatialReference))return{extent:e,width:t,height:n};var o=a.xmin,s=a.ymax;i=Math.max(i||0,30);var u=Math.ceil(t*(1/i)),c=Math.ceil(n*(1/i)),l=((e.xmax-e.xmin)/u+(e.ymax-e.ymin)/c)/2;return e.xmin=o+Math.floor((e.xmin-o)/l)*l,e.xmax=o+Math.ceil((e.xmax-o)/l)*l,e.ymin=s+Math.floor((e.ymin-s)/l)*l,e.ymax=s+Math.ceil((e.ymax-s)/l)*l,{extent:e,width:Math.round(e.width/l),height:Math.round(e.height/l)}}s.set("meter-per-second",1),s.set("kilometer-per-hour",.277778),s.set("knots",.514444),s.set("feet-per-second",.3048),s.set("mile-per-hour",.44704)},GeAh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new(n("+opI").a)({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function i(e){var t=e.toJSON(),n=t.extendHow,i=t.polylines,a=t.trimExtendTo,o={};return o.extendHow=r.toJSON(n),i&&i.length&&(o.polylines=JSON.stringify(i),o.sr=JSON.stringify(i[0].spatialReference)),a&&(o.trimExtendTo=JSON.stringify(a)),o}},GiSu:function(e,t,n){"use strict";var r=n("n3uD"),i=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(r.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},Gj5k:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("zqDF"),i=n("evjZ"),a=Object.prototype.toString;function o(e){var t="__accessorMetadata__"in e?Object(r.m)(e):e;return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.push(t),"number"==typeof n[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return s.apply(this,n)}}function s(e,t,n,r){Object(i.b)(e,t).cast=r}function u(){if(3!==arguments.length||"string"!=typeof(arguments.length<=1?void 0:arguments[1]))return 1===arguments.length&&"[object Function]"===a.call(arguments.length<=0?void 0:arguments[0])?o(arguments.length<=0?void 0:arguments[0]):1===arguments.length&&"string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],function(t,n){Object(i.b)(t,e).cast=t[n]}):void 0;var e}},"Gl+1":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("RI0u"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),h=n("gmIG"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).algorithm=null,r.fromColor=null,r.toColor=null,r.type="algorithmic",r}return Zt(n,[{key:"clone",value:function(){return new r({fromColor:Object(a.a)(this.fromColor),toColor:Object(a.a)(this.toColor),algorithm:this.algorithm})}}]),n}(h.a);Object(i.a)([Object(u.a)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],f.prototype,"algorithm",void 0),Object(i.a)([Object(s.b)({type:l.a,json:{type:[o.a],write:!0}})],f.prototype,"fromColor",void 0),Object(i.a)([Object(s.b)({type:l.a,json:{type:[o.a],write:!0}})],f.prototype,"toColor",void 0),Object(i.a)([Object(s.b)({type:["algorithmic"]})],f.prototype,"type",void 0),f=r=Object(i.a)([Object(c.a)("esri.tasks.support.AlgorithmicColorRamp")],f),t.a=f},GlSV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n("wSAH"),n("ohva"),n("srIe"),n("WZb1"),n("dOLD"),n("8uAX");var r=n("kYAx"),i=(n("ofM5"),n("8Lmx"),n("QmHG"));n("AIxD"),n("NWPx");var a=function e(t,n,r){Wt(this,e),this.uid=t,this.geometry=n,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null},o=function e(){Wt(this,e),this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null};function s(e){return"point"===e.type}function u(e,t,n,r){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}Object(i.d)(),Object(r.g)()},Gxlu:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("m501")),u=n("f/qv"),c=n("ag7Y"),l=n("qPMW"),h=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).fields=[],r.normalizeField=null,r.series=[],r.tooltipField=null,r}return Zt(n,[{key:"clone",value:function(){return new r({fields:Object(u.a)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}}]),n}(c.a);Object(i.a)([Object(a.b)({type:[String],json:{write:!0}})],h.prototype,"fields",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],h.prototype,"normalizeField",void 0),Object(i.a)([Object(a.b)({type:[l.a],json:{read:!1}})],h.prototype,"series",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],h.prototype,"tooltipField",void 0);var f=h=r=Object(i.a)([Object(o.a)("esri.popup.content.support.ChartMediaInfoValue")],h),p=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type=null,r.value=null,r}return n}(s.a);Object(i.a)([Object(a.b)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:f,json:{write:!0}})],p.prototype,"value",void 0),p=Object(i.a)([Object(o.a)("esri.popup.content.mixins.ChartMediaInfo")],p),t.a=p},H7XF:function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],s=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),l=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(e,o,o+16383>s?s:o+16383));return 1===i?a.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&a.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a=[],o=t;o<n;o+=3)a.push(r[(i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},H9eC:function(e,t,n){"use strict";n.d(t,"a",(function(){return A.a})),n.d(t,"b",(function(){return C.a})),n.d(t,"c",(function(){return B})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return F})),n.d(t,"g",(function(){return L})),n.d(t,"h",(function(){return N})),n.d(t,"i",(function(){return V})),n.d(t,"j",(function(){return U})),n.d(t,"k",(function(){return z})),n.d(t,"l",(function(){return G}));var r,i=n("zqDF"),a=n("C4aV"),o=n("DZP5"),s=n("TKwc"),u=(n("lh0l"),n("BcU2"),n("21Ip")),c=n("KVkv"),l=n("wSjz"),h=(n("l4eh"),n("YAUP"),n("jWZj"),n("4bvo"),n("OteC"),n("qVey"),n("FuAX"),n("xSgX")),f=(n("jwe7"),n("0oj5"),n("Mzq3"),n("n6tj")),p=n("bgch"),d=(n("bk1R"),n("pO5D")),v=(n("wSAH"),n("f/qv")),y=(n("6S2I"),n("WbKI")),b=n("RI0u"),g=n("04ZG");n("4EHJ"),n("ju1D"),n("9AIY");var m=n("LE9a").a.ofType({base:null,key:"type",typeMap:{fill:l.a}}),w=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).symbolLayers=new m,r.type="mesh-3d",r}return Zt(n,[{key:"clone",value:function(){return new r({styleOrigin:Object(v.a)(this.styleOrigin),symbolLayers:Object(v.a)(this.symbolLayers),thumbnail:Object(v.a)(this.thumbnail)})}}]),n}(h.a);Object(d.a)([Object(y.b)({type:m})],w.prototype,"symbolLayers",void 0),Object(d.a)([Object(b.a)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],w.prototype,"type",void 0);var O,j=w=r=Object(d.a)([Object(g.a)("esri.symbols.MeshSymbol3D")],w),_=n("qRWG"),x=n("sONG"),k=O=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).type="picture-fill",e.url=null,e.xscale=1,e.yscale=1,e.width=12,e.height=12,e.xoffset=0,e.yoffset=0,e.source=null,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;var i={};return e&&(i.url=e),t&&(i.outline=t),null!=n&&(i.width=Object(_.k)(n)),null!=r&&(i.height=Object(_.k)(r)),i}},{key:"clone",value:function(){var e=new O({color:Object(v.a)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",Object(v.a)(this.source)),e}},{key:"hash",value:function(){var e;return"".concat(Dt(en(n.prototype),"hash",this).call(this),".").concat(null==(e=this.color)?void 0:e.hash(),".").concat(this.height,".").concat(this.url,".").concat(this.width,".").concat(this.xoffset,".").concat(this.xscale,".").concat(this.yoffset,".").concat(this.yscale)}}]),n}(c.a);Object(d.a)([Object(b.a)({esriPFS:"picture-fill"},{readOnly:!0})],k.prototype,"type",void 0),Object(d.a)([Object(y.b)(x.b)],k.prototype,"url",void 0),Object(d.a)([Object(y.b)({type:Number,json:{write:!0}})],k.prototype,"xscale",void 0),Object(d.a)([Object(y.b)({type:Number,json:{write:!0}})],k.prototype,"yscale",void 0),Object(d.a)([Object(y.b)({type:Number,cast:_.k,json:{write:!0}})],k.prototype,"width",void 0),Object(d.a)([Object(y.b)({type:Number,cast:_.k,json:{write:!0}})],k.prototype,"height",void 0),Object(d.a)([Object(y.b)({type:Number,cast:_.k,json:{write:!0}})],k.prototype,"xoffset",void 0),Object(d.a)([Object(y.b)({type:Number,cast:_.k,json:{write:!0}})],k.prototype,"yoffset",void 0),Object(d.a)([Object(y.b)(x.a)],k.prototype,"source",void 0);var S=k=O=Object(d.a)([Object(g.a)("esri.symbols.PictureFillSymbol")],k),M=n("N+cL"),I=n("dTMb"),T=n("NckZ"),A=n("DXYb"),C=n("Tcmu"),E=n("Ibpv"),P=n("3cLA");function R(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function D(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}var L={base:o.a,key:"type",typeMap:{"simple-fill":A.a,"picture-fill":S,"picture-marker":M.a,"simple-line":u.a,"simple-marker":C.a,text:E.a,"label-3d":f.a,"line-3d":p.a,"mesh-3d":j,"point-3d":I.a,"polygon-3d":T.a,"web-style":P.a,cim:s.a},errorContext:"symbol"},N={base:o.a,key:"type",typeMap:{"picture-marker":M.a,"simple-marker":C.a,text:E.a,"web-style":P.a,cim:s.a},errorContext:"symbol"},F=Object(a.b)({types:L}),z={base:o.a,key:"type",typeMap:{"simple-fill":A.a,"picture-fill":S,"picture-marker":M.a,"simple-line":u.a,"simple-marker":C.a,text:E.a,"line-3d":p.a,"mesh-3d":j,"point-3d":I.a,"polygon-3d":T.a,"web-style":P.a,cim:s.a},errorContext:"symbol"},V={base:o.a,key:"type",typeMap:{text:E.a,"label-3d":f.a},errorContext:"symbol"},G={base:o.a,key:"type",typeMap:{"line-3d":p.a,"mesh-3d":j,"point-3d":I.a,"polygon-3d":T.a,"web-style":P.a},errorContext:"symbol"},U={base:o.a,key:"type",typeMap:{"label-3d":f.a},errorContext:"symbol"},B=Object(i.k)(L)},HE3w:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),u=n("srIe"),c=n("SuVq"),l=(n("4GrV"),n("r0DZ")),h=n("JYnY"),f=n("QS+a"),p=n("9MzC"),d=n("zm0L"),v=n("qRWG"),y=n("GlSV"),b=n("E4HC"),g=n("ixpo"),m=n("aunz"),w=n("J9+3"),O=n("Hxwb"),j=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i;return Wt(this,n),(r=t.call(this,e))._hasZ=null,r._snappingTask=null,r._stagedVertex=null,r._stagedVertexUnsnapped=null,r._lastVertexUnsnapped=null,r._nativeEventHistory={undoStack:[],redoStack:[]},r.interactiveUndoDisabled=!1,r.history=[],r.redoHistory=[],r.snapToScene=!1,r.view=null,r.elevationInfo=null,r.defaultZ=0,r._coordinateHelper=Object(g.a)(e.hasZ,!1,e.view.spatialReference,"local"),r._snappingManager=e.snappingManager,r._editGeometry=new w.a(new m.c(r._coordinateHelper),null!=(i=e.editGeometryType)?i:"polygon"),r._snappingContext=new O.a({geometry:r._editGeometry,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new b.a}),r._activeComponent=new m.a(r._editGeometry.editGeometry),r._editGeometry.editGeometry.components.push(r._activeComponent),r}return Zt(n,[{key:"destroy",value:function(){this._snappingTask=Object(u.a)(this._snappingTask),Object(u.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.destroy()}},{key:"_committedVertices",get:function(){return this._editGeometry.editGeometry.components[0].vertices.map((function(e){return e.pos}))}},{key:"vertices",get:function(){return Object(u.k)(this._stagedVertex)?[].concat(Bt(this._committedVertices),[this._coordinateHelper.pointToArray(this._stagedVertex)]):this._committedVertices}},{key:"hasZ",get:function(){return Object(u.k)(this._hasZ)?this._hasZ:"3d"===this.view.type},set:function(e){this._hasZ=e,this.notifyChange("hasZ")}},{key:"canUndo",value:function(){return this._editGeometry.editGeometry.canUndo}},{key:"canRedo",value:function(){return this._editGeometry.editGeometry.canRedo}},{key:"undo",value:function(){this.canUndo()&&this._editGeometry.undo()}},{key:"redo",value:function(){this.canRedo()&&this._editGeometry.redo()}},{key:"getCoordsFromScreenPoint",value:function(e){var t=this.screenToMap(e);return Object(u.k)(t)?t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]:null}},{key:"getCoordsAndPointFromScreenPoint",value:function(e){var t=this.screenToMap(e);return Object(u.k)(t)?t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}:null}},{key:"_pushCursorVertex",value:function(e){var t=this,n=Object(y.d)(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=n,Object(u.j)(this._snappingManager)?this._stagedVertex=n:(this._stagedVertex=this._snappingManager.update(n,this._snappingContext),this._snappingTask=Object(p.h)(function(){var e=Ut(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(u.k)(t._snappingManager)){e.next=5;break}return e.next=3,t._snappingManager.snap(n,t._snappingContext,r);case 3:return i=e.sent,e.abrupt("return",(i.valid&&(t._stagedVertex=i.apply(),t.notifyChange("vertices")),i));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"_popCursorVertex",value:function(){this._stagedVertex=null,this._stagedVertexUnsnapped=null,this.notifyChange("vertices")}},{key:"getGeometryZValue",value:function(){return this.defaultZ}},{key:"screenToMap",value:function(e){var t=null;if("3d"===this.view.type)if(this.hasZ){var n=Object(u.r)(this.elevationInfo,_);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(v.g)(e.x,e.y),n,this.getGeometryZValue())}else{var r=Object(u.r)(this.elevationInfo,x);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(v.g)(e.x,e.y),r,0),Object(u.k)(t)&&(t.z=void 0)}else t=this.view.toMap(e),Object(u.k)(t)&&(t.z=this.hasZ?this.getGeometryZValue():void 0);return t}},{key:"_isDuplicateOfLastVertex",value:function(e){var t=this._editGeometry.editGeometry.components[0].getLastVertex();if(Object(u.k)(t)&&e[0]===t[0]&&e[1]===t[1])return!0;var n=this._coordinateHelper.createDehydratedPoint(e),r=n.x,i=n.y;return!(!Object(u.k)(this._lastVertexUnsnapped)||r!==this._lastVertexUnsnapped.x||i!==this._lastVertexUnsnapped.y)}}]),n}(d.a.EventedAccessor);Object(r.a)([Object(a.b)({readOnly:!0})],j.prototype,"vertices",null),Object(r.a)([Object(a.b)({type:Boolean,nonNullable:!0})],j.prototype,"interactiveUndoDisabled",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],j.prototype,"history",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],j.prototype,"redoHistory",void 0),Object(r.a)([Object(a.b)()],j.prototype,"snapToScene",void 0),Object(r.a)([Object(a.b)()],j.prototype,"view",void 0),Object(r.a)([Object(a.b)()],j.prototype,"elevationInfo",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],j.prototype,"defaultZ",void 0),Object(r.a)([Object(a.b)()],j.prototype,"hasZ",null),j=Object(r.a)([Object(o.a)("esri.views.draw.DrawAction")],j);var _={mode:"absolute-height",offset:0},x={mode:"on-the-ground",offset:0},k=j,S=function(){function e(t,n,r,i){Wt(this,e),this.view=t,this.native=n,this.vertexIndex=r,this.vertices=i,this.defaultPrevented=!1,this.type="vertex-add"}return Zt(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),M=function(){function e(t,n,r,i){Wt(this,e),this.view=t,this.native=n,this.vertexIndex=r,this.vertices=i,this.defaultPrevented=!1,this.type="vertex-remove"}return Zt(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),I=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Wt(this,e),this.view=t,this.native=n,this.vertexIndex=r,this.vertices=i,this.mapPoint=a,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===i.length?i[0]:null}return Zt(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),T=function(){function e(t,n){Wt(this,e),this.native=t,this.vertices=n,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===n.length?n[0]:null}return Zt(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),A=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._popVertexOnPointerMove=!1,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new l.a,r._undoRedoHandles=new l.a,r}return Zt(n,[{key:"initialize",value:function(){this._addViewHandles(),this._addUndoRedoHandles()}},{key:"destroy",value:function(){this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy(),this.emit("destroy")}},{key:"undo",value:function(){Dt(en(n.prototype),"undo",this).call(this),this.notifyChange("vertices")}},{key:"redo",value:function(){Dt(en(n.prototype),"redo",this).call(this),this.notifyChange("vertices")}},{key:"complete",value:function(){this._completeDrawing()}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(f.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),h.b.TOOL),this.view.on("pointer-move",(function(t){e._popVertexOnPointerMove&&(e.undo(),e._popVertexOnPointerMove=!1),e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),h.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp?e._vertexAddHandler(t):e._updateCursor(t.native,"touch"===t.pointerType))}),h.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("double-click",(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),h.b.TOOL),this.view.on("double-click",["Control"],(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),h.b.TOOL),this.view.on("key-down",(function(t){var n=t.key,r=t.repeat;"f"===n&&!r&&e._cursorScreenPoint?(t.stopPropagation(),e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler(t)):"c"===n&&!r&&e._cursorScreenPoint&&e.vertices.length>2?(t.stopPropagation(),e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler(t),e._drawCompleteHandler(t)):"z"!==n||e.interactiveUndoDisabled||r?"r"!==n||e.interactiveUndoDisabled||r?" "!==n||r||t.stopPropagation():(t.stopPropagation(),e.redo()):(t.stopPropagation(),e.undo())}),h.b.TOOL),this.view.on("key-up",(function(e){" "===e.key&&e.stopPropagation()}),h.b.TOOL)])}},{key:"_addUndoRedoHandles",value:function(){var e=this;this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(function(t){if(e.notifyChange("vertices"),"undo"===t.operation){var n=e._nativeEventHistory.undoStack.pop();e._nativeEventHistory.redoStack.push(n);var r=Bt(e._committedVertices);Object(u.k)(e._stagedVertex)&&r.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("undo",new M(e.view,n,t.vertices[0].index,r))}})),this._editGeometry.on("vertex-add",(function(t){if(e.notifyChange("vertices"),"apply"===t.operation){var n=new S(e.view,e._nativeEventHistory.undoStack[e._nativeEventHistory.undoStack.length],e._committedVertices.length-1,e.vertices);e.emit("vertex-add",n),n.defaultPrevented&&(e._popVertexOnPointerMove=!0)}else if("redo"===t.operation){var r=e._nativeEventHistory.redoStack.pop();e._nativeEventHistory.undoStack.push(r);var i=Bt(e._committedVertices);Object(u.k)(e._stagedVertex)&&i.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("redo",new S(e.view,r,t.vertices[0].index,i))}}))])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_removeUndoRedoHandles",value:function(){this._undoRedoHandles.removeAll()}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n);var r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(u.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new I(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(u.k)(t._stagedVertex)?new c.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(u.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(u.a)(this._snappingTask),Object(u.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<2)){var t=new T(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(u.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(u.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(u.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(k);A=Object(r.a)([Object(o.a)("esri.views.draw.MultipointDrawAction")],A),Object.freeze({__proto__:null,get MultipointDrawAction(){return A}});var C=n("4gt3"),E=n("ZGlk"),P=n("Alwt"),R=n("R3Kl"),D=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).drawOperation=null,r.hasZ=!0,r.defaultZ=0,r.elevationInfo=null,r.snapToScene=null,r.mode=null,r.geometryType=null,r.type="draw-3d",r}return Zt(n,[{key:"initialize",value:function(){var e=this,t=Object(u.r)(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new E.a({view:this.view,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,snappingDrawSurface:new P.b(this.view,t),elevationDrawSurface:new P.a(t,this.defaultZ,this.view),hasM:!1,elevationInfo:t}),this.drawOperation.on("vertex-add",(function(t){return e.onVertexAdd(t)})),this.drawOperation.on("vertex-remove",(function(t){return e.onVertexRemove(t)})),this.drawOperation.on("vertex-update",(function(t){return e.onVertexUpdate(t)})),this.drawOperation.on("cursor-update",(function(t){return e.onCursorUpdate(t)})),this.drawOperation.on("complete",(function(t){return e.onComplete(t)}))}},{key:"destroy",value:function(){this.drawOperation.destroy(),this.drawOperation=null,this._set("view",null)}},{key:"onInputEvent",value:function(e){this.drawOperation.onInputEvent(e)}},{key:"enabled",set:function(e){this.drawOperation.interactive=e,this._set("enabled",e)}},{key:"reset",value:function(){}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"redo",value:function(){this.drawOperation.redo()}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}},{key:"undo",value:function(){this.drawOperation.undo()}},{key:"completeCreateOperation",value:function(){this.drawOperation.complete()}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){this.drawOperation.isCompleted||this.drawOperation.cancel()}},{key:"getVertexCoords",value:function(){return this.drawOperation.vertices}},{key:"onVertexAdd",value:function(e){this.emit("vertex-add",e)}},{key:"onVertexRemove",value:function(e){this.emit("vertex-remove",e)}},{key:"onVertexUpdate",value:function(e){this.emit("vertex-update",e)}},{key:"onCursorUpdate",value:function(e){this.emit("cursor-update",e)}},{key:"onComplete",value:function(e){this.emit("complete",e)}}]),n}(d.a.EventedMixin(R.a));Object(r.a)([Object(a.b)({constructOnly:!0,nonNullable:!0})],D.prototype,"view",void 0),Object(r.a)([Object(a.b)({value:!0})],D.prototype,"enabled",null),Object(r.a)([Object(a.b)({constructOnly:!0})],D.prototype,"hasZ",void 0),Object(r.a)([Object(a.b)({constructOnly:!0,nonNullable:!0})],D.prototype,"defaultZ",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],D.prototype,"elevationInfo",void 0),Object(r.a)([Object(a.b)()],D.prototype,"snapToScene",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],D.prototype,"mode",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],D.prototype,"geometryType",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],D.prototype,"type",void 0),D=Object(r.a)([Object(o.a)("esri.views.3d.interactive.editingTools.draw.DrawTool")],D);var L=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new l.a,r}return Zt(n,[{key:"initialize",value:function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"coordinates",get:function(){return Object(C.c)(i.a.getLogger("esri.views.draw.PointDrawAction"),"coordinates",{replacement:"vertices",version:"4.19"}),this.vertices[0]}},{key:"complete",value:function(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(f.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),h.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),h.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp?(t.stopPropagation(),e._vertexAddHandler()):e._updateCursor(t.native,"touch"===t.pointerType))}),h.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("key-down",(function(t){"c"===t.key&&e._cursorScreenPoint&&(e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler())}),h.b.TOOL)])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new D({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new I(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new T(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(u.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}},{key:"_addVertex",value:function(e){var t=this._coordinateHelper.fromArray(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(t),this.notifyChange("vertices"))}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(u.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new I(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(u.k)(t._stagedVertex)?new c.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(u.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(u.a)(this._snappingTask),Object(u.k)(this._snappingManager)&&this._snappingManager.doneSnapping();var t=new T(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(u.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(){var e=Object(u.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(u.k)(e)&&(this._addVertex(e),this._completeDrawing())}}]),n}(k);Object(r.a)([Object(a.b)({readOnly:!0})],L.prototype,"coordinates",null),L=Object(r.a)([Object(o.a)("esri.views.draw.PointDrawAction")],L);var N=n("SuoU"),F=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._panEnabled=!1,r._popVertexOnPointerMove=!1,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new l.a,r._undoRedoHandles=new l.a,r.mode=N.a,r}return Zt(n,[{key:"initialize",value:function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}},{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"undo",value:function(){Dt(en(n.prototype),"undo",this).call(this),this.notifyChange("vertices")}},{key:"redo",value:function(){Dt(en(n.prototype),"redo",this).call(this),this.notifyChange("vertices")}},{key:"complete",value:function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"getGeometryZValue",value:function(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(f.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),h.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(u.a)(e._snappingTask),e._popVertexOnPointerMove&&(e.undo(),e._popVertexOnPointerMove=!1),e._cursorScreenPoint=Object(f.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),h.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),e._dragEnabled&&!e._panEnabled?e._vertexAddHandler(t):e._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(function(t){if(e._shouldHandlePointerEvent(t))if(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp){if(!e._clickEnabled)return 1===e.vertices.length&&e.vertices.pop(),void e._drawCompleteHandler(t);e._vertexAddHandler(t)}else e._updateCursor(t.native,"touch"===t.pointerType)}),h.b.TOOL),this.view.on("drag",(function(t){e._dragEnabled&&Object(u.k)(e._activePointerId)&&!e._panEnabled&&t.stopPropagation()}),h.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("double-click",(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),h.b.TOOL),this.view.on("double-click",["Control"],(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),h.b.TOOL),this.view.on("key-down",(function(t){var n=t.key,r=t.repeat;"f"===n&&!r&&e._cursorScreenPoint?(t.stopPropagation(),e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler(t)):"c"===n&&!r&&e._cursorScreenPoint&&e.vertices.length>2?(t.stopPropagation(),e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler(t),e._drawCompleteHandler(t)):"z"!==n||e.interactiveUndoDisabled||r?"r"!==n||e.interactiveUndoDisabled||r?" "!==n||r||(t.stopPropagation(),e._panEnabled=!0):(t.stopPropagation(),e.redo()):(t.stopPropagation(),e.undo())}),h.b.TOOL),this.view.on("key-up",(function(t){" "===t.key&&(t.stopPropagation(),e._panEnabled=!1)}),h.b.TOOL)])}},{key:"_addUndoRedoHandles",value:function(){var e=this;this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(function(t){if(e.notifyChange("vertices"),"undo"===t.operation){var n=e._nativeEventHistory.undoStack.pop();e._nativeEventHistory.redoStack.push(n);var r=Bt(e._committedVertices);Object(u.k)(e._stagedVertex)&&r.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("undo",new M(e.view,n,t.vertices[0].index,r))}})),this._editGeometry.on("vertex-add",(function(t){if(e.notifyChange("vertices"),"apply"===t.operation){var n=new S(e.view,e._nativeEventHistory.undoStack[e._nativeEventHistory.undoStack.length],e._committedVertices.length-1,e.vertices);e.emit("vertex-add",n),n.defaultPrevented&&(e._popVertexOnPointerMove=!0)}else if("redo"===t.operation){var r=e._nativeEventHistory.redoStack.pop();e._nativeEventHistory.undoStack.push(r);var i=Bt(e._committedVertices);Object(u.k)(e._stagedVertex)&&i.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("redo",new S(e.view,r,t.vertices[0].index,i))}}))])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_removeUndoRedoHandles",value:function(){this._undoRedoHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new D({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(function(e){1===e.vertices.length&&t.emit("vertex-add",new S(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new I(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new T(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(u.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n);var r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(u.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new I(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(u.k)(t._stagedVertex)?new c.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(u.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(u.a)(this._snappingTask),Object(u.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<3)){var t=new T(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(u.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(u.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(u.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(k);Object(r.a)([Object(a.b)()],F.prototype,"_dragEnabled",null),Object(r.a)([Object(a.b)()],F.prototype,"_clickEnabled",null),Object(r.a)([Object(a.b)({type:N.b})],F.prototype,"mode",void 0),F=Object(r.a)([Object(o.a)("esri.views.draw.PolygonDrawAction")],F);var z=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._panEnabled=!1,r._popVertexOnPointerMove=!1,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new l.a,r._undoRedoHandles=new l.a,r.mode=N.a,r}return Zt(n,[{key:"initialize",value:function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}},{key:"undo",value:function(){Dt(en(n.prototype),"undo",this).call(this),this.notifyChange("vertices")}},{key:"redo",value:function(){Dt(en(n.prototype),"redo",this).call(this),this.notifyChange("vertices")}},{key:"complete",value:function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&!e._panEnabled&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(f.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),h.b.TOOL),this.view.on("pointer-move",(function(t){e._popVertexOnPointerMove&&(e.undo(),e._popVertexOnPointerMove=!1),e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),h.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),e._dragEnabled&&!e._panEnabled?e._vertexAddHandler(t):e._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(function(t){if(e._shouldHandlePointerEvent(t))if(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp){if(!e._clickEnabled)return 1===e.vertices.length&&e.vertices.pop(),void e._drawCompleteHandler(t);e._vertexAddHandler(t)}else e._updateCursor(t.native,"touch"===t.pointerType)}),h.b.TOOL),this.view.on("drag",(function(t){e._dragEnabled&&Object(u.k)(e._activePointerId)&&!e._panEnabled&&t.stopPropagation()}),h.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),h.b.TOOL),this.view.on("double-click",(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),h.b.TOOL),this.view.on("double-click",["Control"],(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),h.b.TOOL),this.view.on("key-down",(function(t){var n=t.key,r=t.repeat;"f"===n&&!r&&e._cursorScreenPoint?(t.stopPropagation(),e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler(t)):"c"===n&&!r&&e._cursorScreenPoint&&e.vertices.length>1?(t.stopPropagation(),e._snappingTask=Object(u.a)(e._snappingTask),e._vertexAddHandler(t),e._drawCompleteHandler(t)):"z"!==n||e.interactiveUndoDisabled||r?"r"!==n||e.interactiveUndoDisabled||r?" "!==n||r||(t.stopPropagation(),e._panEnabled=!0):(t.stopPropagation(),e.redo()):(t.stopPropagation(),e.undo())}),h.b.TOOL),this.view.on("key-up",(function(t){" "===t.key&&(t.stopPropagation(),e._panEnabled=!1)}),h.b.TOOL)])}},{key:"_addUndoRedoHandles",value:function(){var e=this;this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(function(t){if(e.notifyChange("vertices"),"undo"===t.operation){var n=e._nativeEventHistory.undoStack.pop();e._nativeEventHistory.redoStack.push(n);var r=Bt(e._committedVertices);Object(u.k)(e._stagedVertex)&&r.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("undo",new M(e.view,n,t.vertices[0].index,r))}})),this._editGeometry.on("vertex-add",(function(t){if(e.notifyChange("vertices"),"apply"===t.operation){var n=new S(e.view,e._nativeEventHistory.undoStack[e._nativeEventHistory.undoStack.length],e._committedVertices.length-1,e.vertices);e.emit("vertex-add",n),n.defaultPrevented&&(e._popVertexOnPointerMove=!0)}else if("redo"===t.operation){var r=e._nativeEventHistory.redoStack.pop();e._nativeEventHistory.undoStack.push(r);var i=Bt(e._committedVertices);Object(u.k)(e._stagedVertex)&&i.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("redo",new S(e.view,r,t.vertices[0].index,i))}}))])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_removeUndoRedoHandles",value:function(){this._undoRedoHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new D({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(function(e){1===e.vertices.length&&t.emit("vertex-add",new S(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new I(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new T(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(u.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool=Object(u.e)(this._drawTool))}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n);var r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(u.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new I(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(u.k)(t._stagedVertex)?new c.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(u.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(u.a)(this._snappingTask),Object(u.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<2)){var t=new T(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(u.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(u.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(u.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(k);Object(r.a)([Object(a.b)()],z.prototype,"_clickEnabled",null),Object(r.a)([Object(a.b)()],z.prototype,"_dragEnabled",null),Object(r.a)([Object(a.b)({type:N.b})],z.prototype,"mode",void 0),z=Object(r.a)([Object(o.a)("esri.views.draw.PolylineDrawAction")],z);var V=n("pUVe"),G=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._isDragging=!1,r._panEnabled=!1,r._cursorScreenPoint=null,r._viewHandles=new l.a,r._activePointerId=null,r._addVertexOnPointerUp=!1,r.viewAlignedCoordinateSystem=null,r.mode="freehand",r}return Zt(n,[{key:"initialize",value:function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"complete",value:function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"getGeometryZValue",value:function(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}},{key:"_addViewHandles",value:function(){this._removeViewHandles(),this._viewHandles.add("click"===this.mode?this._getClickModeViewHandles():this._getDragModeViewHandles())}},{key:"_getDragModeViewHandles",value:function(){var e=this;return[this.view.on("immediate-click",(function(t){if(t.stopPropagation(),t.mapPoint&&!e._panEnabled){var n=e.getCoordsFromScreenPoint(Object(f.a)(t));Object(u.k)(n)&&(e._vertexAddHandler(t),e._drawCompleteHandler(t))}}),h.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._panEnabled||(e._resetGeometry(),e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(f.a)(t),e._activePointerId=t.pointerId,e._vertexAddHandler(t),e._isDragging=!1,"touch"===t.pointerType&&e._updateCursor(t.native)))}),h.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(u.a)(e._snappingTask),Object(u.j)(e._activePointerId)&&"touch"!==t.pointerType&&(e._cursorScreenPoint=Object(f.a)(t),e._updateCursor(t.native))}),h.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._isDragging=!0,e._cursorScreenPoint=Object(f.a)(t),e._updateCursor(t.native))}),h.b.TOOL),this.view.on("pointer-up",(function(t){e._shouldHandlePointerEvent(t)&&e._addVertexOnPointerUp&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=null,e._isDragging&&e._vertexAddHandler(t),2===e._committedVertices.length&&e._drawCompleteHandler(t),e._isDragging=!1)}),h.b.TOOL),this.view.on("key-down",(function(t){"c"===t.key&&e._cursorScreenPoint?(e._snappingTask=Object(u.a)(e._snappingTask),e._drawCompleteHandler(t)):" "===t.key&&(e._panEnabled=!0)}),h.b.TOOL),this.view.on("key-up",(function(t){" "===t.key&&(e._panEnabled=!1)}),h.b.TOOL),this.view.on("drag",(function(t){Object(u.k)(e._activePointerId)&&t.stopPropagation()}),h.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),h.b.TOOL)]}},{key:"_getClickModeViewHandles",value:function(){var e=this;return[this.view.on("pointer-down",(function(t){e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),e._activePointerId=t.pointerId,e._isDragging=!1,"touch"===t.pointerType&&e._updateCursor(t.native)}),h.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(u.a)(e._snappingTask),e._cursorScreenPoint=Object(f.a)(t),Object(u.j)(e._activePointerId)&&"touch"!==t.pointerType&&e._updateCursor(t.native)}),h.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._isDragging=!0)}),h.b.TOOL),this.view.on("pointer-up",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(u.a)(e._snappingTask),e._activePointerId=null,t.stopPropagation(),e._isDragging||e._vertexAddHandler(t),2!==e.vertices.length||e._isDragging||e._drawCompleteHandler(t),e._isDragging=!1)}),h.b.TOOL),this.view.on("key-down",(function(t){"f"===t.key&&e._cursorScreenPoint&&(e._vertexAddHandler(t),2===e.vertices.length&&e._drawCompleteHandler(t)),"c"===t.key&&e._cursorScreenPoint&&2===e.vertices.length&&e._drawCompleteHandler(t)}),h.b.TOOL)]}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new D({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(function(e){1===e.vertices.length&&t.emit("vertex-add",new S(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new I(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new T(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(u.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=Object(V.a)(this.view,this._committedVertices[0]));var r=new S(this.view,t,this._committedVertices.length-1,this.vertices);this.emit("vertex-add",r)}}},{key:"_updateCursor",value:function(e){var t=this;if(this._popCursorVertex(),this._cursorScreenPoint){var n=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(u.k)(n)){this._pushCursorVertex(n.vertex);var r=function(){return new I(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(u.k)(t._stagedVertex)?new c.a(t._stagedVertex):null)};this.emit("cursor-update",r()),Object(u.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",r())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._snappingTask=Object(u.a)(this._snappingTask),Object(u.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<1)){var t=new T(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_resetGeometry",value:function(){this._editGeometry.destroy(),this._editGeometry=new w.a(new m.c(this._coordinateHelper),"polygon"),this._activeComponent=new m.a(this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent)}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(u.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(u.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(u.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(k);Object(r.a)([Object(a.b)({type:["freehand","click"]})],G.prototype,"mode",void 0),G=Object(r.a)([Object(o.a)("esri/views/2d/engine/markup/SegmentDrawAction")],G);var U=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).activeAction=null,e.type="draw",e.view=null,e}return Zt(n,[{key:"destroy",value:function(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}},{key:"create",value:function(e,t){this.reset();var n=Nt({view:this.view},t);switch(e){case"point":n.editGeometryType="point",this.activeAction=new L(n);break;case"polyline":n.editGeometryType="polyline",this.activeAction=new z(n);break;case"multipoint":n.editGeometryType="polygon",this.activeAction=new A(n);break;case"polygon":n.editGeometryType="polygon",this.activeAction=new F(n);break;case"rectangle":case"circle":case"ellipse":case"triangle":n.editGeometryType="polygon",this.activeAction=new G(n)}return this.activeAction}},{key:"complete",value:function(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}},{key:"reset",value:function(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}}]),n}(s.a);Object(r.a)([Object(a.b)()],U.prototype,"activeAction",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],U.prototype,"type",void 0),Object(r.a)([Object(a.b)()],U.prototype,"view",void 0),U=Object(r.a)([Object(o.a)("esri.views.draw.Draw")],U),t.a=U},HEKD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n("zgsL"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"userGraphicsLayer";return new r.a({id:e})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"userTextGraphicsLayer";return new r.a({id:e})},o=function(e){return e.graphics.filter((function(e){return"polygon"===e.geometry.type}))},s=function(e,t){return e.graphics.find((function(e){return e.attributes.id===t}))}},HJJS:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return a}));var r=n("QhKk");function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e,t,n,r,i,a,o,s,u,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=c,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=n[0],p=n[1],d=n[2],v=n[3],y=n[4],b=n[5],g=n[6],m=n[7],w=n[8];return e[0]=f*r+p*o+d*c,e[1]=f*i+p*s+d*l,e[2]=f*a+p*u+d*h,e[3]=v*r+y*o+b*c,e[4]=v*i+y*s+b*l,e[5]=v*a+y*u+b*h,e[6]=g*r+m*o+w*c,e[7]=g*i+m*s+w*l,e[8]=g*a+m*u+w*h,e}function u(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=f*r+p*o+c,e[7]=f*i+p*s+l,e[8]=f*a+p*u+h,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*i+f*s,e[2]=p*a+f*u,e[3]=p*o-f*r,e[4]=p*s-f*i,e[5]=p*u-f*a,e[6]=c,e[7]=l,e[8]=h,e}function l(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=a*t[6],e[7]=a*t[7],e[8]=a*t[8],e}function h(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function f(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],c=t[9],l=t[10],h=l*o-s*c,f=-l*a+s*u,p=c*a-o*u,d=n*h+r*f+i*p;if(!d)return null;var v=1/d;return e[0]=h*v,e[1]=(-l*r+i*c)*v,e[2]=(s*r-i*o)*v,e[3]=f*v,e[4]=(l*n-i*u)*v,e[5]=(-s*n+i*a)*v,e[6]=p*v,e[7]=(-c*n+r*u)*v,e[8]=(o*n-r*a)*v,e}function p(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],v=t[13],y=t[14],b=t[15],g=n*s-r*o,m=n*u-i*o,w=n*c-a*o,O=r*u-i*s,j=r*c-a*s,_=i*c-a*u,x=l*v-h*d,k=l*y-f*d,S=l*b-p*d,M=h*y-f*v,I=h*b-p*v,T=f*b-p*y,A=g*T-m*I+w*M+O*S-j*k+_*x;return A?(A=1/A,e[0]=(s*T-u*I+c*M)*A,e[1]=(u*S-o*T-c*k)*A,e[2]=(o*I-s*S+c*x)*A,e[3]=(i*I-r*T-a*M)*A,e[4]=(n*T-i*S+a*k)*A,e[5]=(r*S-n*I-a*x)*A,e[6]=(v*_-y*j+b*O)*A,e[7]=(y*w-d*_-b*m)*A,e[8]=(d*j-v*w+b*g)*A,e):null}function d(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}Object.freeze({__proto__:null,fromMat4:i,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:a,identity:o,transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=l*o-s*c,f=-l*a+s*u,p=c*a-o*u,d=n*h+r*f+i*p;return d?(d=1/d,e[0]=h*d,e[1]=(-l*r+i*c)*d,e[2]=(s*r-i*o)*d,e[3]=f*d,e[4]=(l*n-i*u)*d,e[5]=(-s*n+i*a)*d,e[6]=p*d,e[7]=(-c*n+r*u)*d,e[8]=(o*n-r*a)*d,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=o*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*o,e[3]=s*u-a*l,e[4]=n*l-i*u,e[5]=i*a-n*s,e[6]=a*c-o*u,e[7]=r*u-n*c,e[8]=n*o-r*a,e},determinant:function(e){var t=e[3],n=e[4],r=e[5],i=e[6],a=e[7],o=e[8];return e[0]*(o*n-r*a)+e[1]*(-o*t+r*i)+e[2]*(a*t-n*i)},multiply:s,translate:u,rotate:c,scale:l,scaleByVec2:h,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,p=i*s,d=i*u,v=a*o,y=a*s,b=a*u;return e[0]=1-h-d,e[3]=l-b,e[6]=f+y,e[1]=l+b,e[4]=1-c-d,e[7]=p-v,e[2]=f-y,e[5]=p+v,e[8]=1-c-h,e},normalFromMat4Legacy:f,normalFromMat4:p,projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},subtract:d,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=t[0],p=t[1],d=t[2],v=t[3],y=t[4],b=t[5],g=t[6],m=t[7],w=t[8];return Math.abs(n-f)<=r.a*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-p)<=r.a*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=r.a*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-v)<=r.a*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-y)<=r.a*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-b)<=r.a*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-g)<=r.a*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-m)<=r.a*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(h-w)<=r.a*Math.max(1,Math.abs(h),Math.abs(w))},mul:s,sub:d})},HM2S:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return V}));var r=n("srIe"),i=n("nvBr"),a=(n("gEht"),n("Gl+1"),n("n9Od")),o=n("c8tJ"),s=(n("8RtG"),n("tCO6"),n("fG4V")),u=n("MWLC"),c=(n("aPP3"),n("bvrg")),l=n("mfMX"),h=n("2gBT"),f=n("CLyZ"),p=(n("ukD5"),n("ofM5")),d=n("pPNP"),v=n("pO5D"),y=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),b=n("+opI"),g=n("04ZG"),m=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),w=n("DZP5"),O=n("SE0f"),j=new b.a({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"}),_=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).baseSymbol=null,e.colorRamp=null,e.type=null,e}return n}(m.a);Object(v.a)([Object(y.b)({type:w.a,json:{write:!0}})],_.prototype,"baseSymbol",void 0),Object(v.a)([Object(y.b)({types:O.b,json:{read:{reader:O.a},write:!0}})],_.prototype,"colorRamp",void 0),Object(v.a)([Object(y.b)({json:{read:j.read,write:j.write}})],_.prototype,"type",void 0);var x=_=Object(v.a)([Object(g.a)("esri.tasks.support.ClassificationDefinition")],_),k=new b.a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),S=new b.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),M=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).breakCount=null,e.classificationField=null,e.classificationMethod=null,e.normalizationField=null,e.normalizationType=null,e.type="class-breaks-definition",e}return Zt(n,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]),n}(x);Object(v.a)([Object(y.b)({json:{write:!0}})],M.prototype,"breakCount",void 0),Object(v.a)([Object(y.b)({json:{write:!0}})],M.prototype,"classificationField",void 0),Object(v.a)([Object(y.b)({type:String,json:{read:k.read,write:k.write}})],M.prototype,"classificationMethod",void 0),Object(v.a)([Object(y.b)({json:{write:!0}})],M.prototype,"normalizationField",void 0),Object(v.a)([Object(y.b)({json:{read:S.read,write:S.write}})],M.prototype,"normalizationType",void 0),Object(v.a)([Object(y.b)({value:null,json:{write:!0}})],M.prototype,"standardDeviationInterval",null),Object(v.a)([Object(y.b)({value:null,json:{write:!0}})],M.prototype,"definedInterval",null),Object(v.a)([Object(y.b)()],M.prototype,"type",void 0),M=Object(v.a)([Object(g.a)("esri.tasks.support.ClassBreaksDefinition")],M);var I=a.a.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),T=a.a.fromJSON(s.a[0]);function A(e,t){var n=e.attributeTable,a=e.colormap,p=e.dataType;if("vector-uv"===p||"vector-magdir"===p){var v=F(e)?new f.a:null;if(Object(r.k)(v))return v}if(Object(r.k)(a)){var y=function(e){if(!N(e))return null;var t,n=e.attributeTable,i=e.colormap;if(Object(r.k)(n)){var a=D(n,"value"),o=R(n);"string"===o.type&&(t={},n.features.forEach((function(e){var n=e.attributes;t[n[a.name]]=o?n[o.name]:n[a.name]})))}return u.a.createFromColormap(Object(r.q)(i),t)}(e);if(Object(r.k)(y))return y}if(Object(r.k)(n)){var b=function(e,t,n,a){if(!L(e,t))return null;var u=e.attributeTable,c=e.statistics,f=R(u,t),p=D(u,"red"),d=D(u,"green"),v=D(u,"blue"),y=new o.a,b=[],g=new Set,m=!!(p&&d&&v);if(Object(r.k)(u))u.features.forEach((function(e){var t=e.attributes[f.name];g.has(e.attributes[f.name])||null==t||(g.add(t),b.push(new l.a({value:e.attributes[f.name],label:e.attributes[f.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a(m?[e.attributes[p.name],e.attributes[d.name],e.attributes[v.name],1]:[0,0,0,0])}})))}));else if(null!=c&&c[0])for(var w=c[0].min;w<=c[0].max;w++)b.push(new l.a({value:w,label:w.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a([0,0,0,0])}}));if(b.sort((function(e,t){return e.value&&"string"==typeof e.value.valueOf()?0:e.value>t.value?1:-1})),!m){var O=Object(s.b)(T,b.length);b.forEach((function(e,t){return e.symbol.color=new i.a(O[t].slice(1,4))})),y.colorRamp=T}return new h.a({field:f.name,uniqueValueInfos:b,authoringInfo:y})}(e);if(Object(r.k)(b))return b}return function(e,t){var n,i,a,o,s=(e=function(e,t){if(null==t)return e;var n=Object(r.q)(e.statistics),i=Object(r.q)(e.histograms),a=e.multidimensionalInfo;if(t&&Object(r.k)(a)){var o=a.variables.find((function(e){return e.name===t})),s=o.statistics,u=o.histograms;null!=s&&s.length&&(n=s),null!=u&&u.length&&(i=u)}return d.a.fromJSON(Nt(Nt({},e.toJSON()),{},{statistics:n,histograms:i}))}(e,null==t?void 0:t.variableName)).bandCount,u=t||{},l=u.bandIds,h=u.stretchType;null!=(n=l)&&n.some((function(e){return e>=s}))&&(l=null);var f,p=Object(r.q)(e.statistics),v=Object(r.q)(e.histograms);s>1?(l=null!=(f=l)&&f.length?l:P(e),p=null==p?null:l.map((function(e){return p[e]})),v=null==v?null:l.map((function(e){return v[e]}))):l=[0],null==h&&(h=function(e){var t="percent-clip",n=e.pixelType,i=e.dataType,a=e.histograms,o=e.statistics;return"u8"!==n||"processed"!==i&&Object(r.k)(a)&&Object(r.k)(o)?"u8"===n||"elevation"===i||"scientific"===i?t="min-max":Object(r.k)(a)?t="percent-clip":Object(r.k)(o)&&(t="min-max",t="min-max"):t="none",t}(e));var y=!1;switch(h){case"none":y=!1;break;case"percent-clip":y=!(null!=(i=v)&&i.length);break;default:y=!(null!=(a=p)&&a.length)}var b=1===(null==(o=l)?void 0:o.length)&&"scientific"===e.dataType?I:null,g=new c.a({stretchType:h,dynamicRangeAdjustment:y,colorRamp:b,outputMin:0,outputMax:255,gamma:1===l.length?[1]:[1,1,1],useGamma:!1});return"percent-clip"===h?g.maxPercent=g.minPercent=.25:"standard-deviation"===h&&(g.numberOfStandardDeviations=2),y||("percent-clip"===h?g.histograms=v:"min-max"!==h&&"standard-deviation"!==h||(g.statistics=p)),g}(e,t)}function C(e){var t=["raster-stretch"];return N(e)&&t.push("raster-colormap"),L(e)&&t.push("unique-value"),function(e){var t=e.attributeTable;return 1===e.bandCount&&(Object(r.k)(t)||Object(r.k)(e.histograms))}(e)&&t.push("class-breaks"),function(e){return"elevation"===e.dataType}(e)&&t.push("raster-shaded-relief"),F(e)&&t.push("vector-field"),t}function E(e,t,n){var r=["nearest","bilinear","cubic","majority"].find((function(e){return e===(null==n?void 0:n.toLowerCase())}));return"Map"===t?null!=r?r:"bilinear":"thematic"===e.dataType||e.attributeTable||e.colormap?"nearest"===r||"majority"===r?r:"nearest":null!=r?r:"bilinear"}function P(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var n,r=e.keyProperties&&e.keyProperties.BandProperties;if(r&&r.length===t){var i=function(e){for(var t={},n=0;n<e.length;n++){var r,i=e[n],a=null==(r=i.BandName)?void 0:r.toLowerCase();if("red"===a)t.red=n;else if("green"===a)t.green=n;else if("blue"===a)t.blue=n;else if("nearinfrared"===a||"nearinfrared_1"===a||"nir"===a)t.nir=n;else if(i.WavelengthMax&&i.WavelengthMin){var o=i.WavelengthMin,s=i.WavelengthMax;null==t.blue&&o>=410&&o<=480&&s>=480&&s<=540?t.blue=n:null==t.green&&o>=490&&o<=560&&s>=560&&s<=610?t.green=n:null==t.red&&o>=595&&o<=670&&s>=660&&s<=730?t.red=n:null==t.nir&&o>=700&&o<=860&&s>=800&&s<=950&&(t.nir=n)}}return t}(r),a=i.red,o=i.green,s=i.blue,u=i.nir;null!=a&&null!=o&&null!=s?n=[a,o,s]:null!=u&&null!=a&&null!=o&&(n=[u,a,o])}return!n&&t>=3&&(n=[0,1,2]),n}function R(e,t){var n;return Object(r.k)(e)?(n=e.fields.find(t?function(e){return t.toLowerCase()===e.name.toLowerCase()}:function(e){return"string"===e.type&&e.name.toLowerCase().indexOf("class")>-1}))||((n=e.fields.find((function(e){return"string"===e.type})))||(n=D(e,"value"))):n=new p.a({name:"value"}),n}function D(e,t){return Object(r.k)(e)?e.fields.find((function(e){return e.name.toLowerCase()===t})):null}function L(e,t){var n=e.attributeTable,i=e.bandCount;return!((Object(r.k)(n)||!function(e){var t,n,r;return["u8","s8"].indexOf(e.pixelType)>-1&&null!=(null==(t=e.statistics)||null==(n=t[0])?void 0:n.min)&&null!=(null==(r=e.statistics[0])?void 0:r.max)&&1===e.bandCount}(e))&&(!Object(r.k)(n)||i>1||t&&null==n.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))))}function N(e){var t=e.bandCount,n=e.colormap;return Object(r.k)(n)&&n.length&&1===t}function F(e){var t=e.dataType;return"vector-uv"===t||"vector-magdir"===t}function z(e){var t;return{color:null==(t=e.symbolLayers[0].material)?void 0:t.color,type:"esriSFS",style:"esriSFSSolid"}}function V(e){if("uniqueValue"===e.type){var t,n=e.uniqueValueInfos,r=n[0].symbol;return null!=r&&null!=(t=r.symbolLayers)&&t.length&&(e.uniqueValueInfos=n.map((function(e){return{value:e.value,label:e.label,symbol:e.symbol?z(e.symbol):null}}))),e}if("classBreaks"===e.type){var i,a=e.classBreakInfos,o=a[0].symbol;return null!=o&&null!=(i=o.symbolLayers)&&i.length&&(e.classBreakInfos=a.map((function(e){return{classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?z(e.symbol):null}}))),e}return e}},Hizz:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r,i=n("bJda"),a=n("ohva"),o=n("srIe"),s=n("zlDU"),u=n("4EHJ"),c=n("9MzC"),l=n("zm0L"),h=n("OKTS"),f=n("Ioo4"),p=n("LbAs"),d=n("EVMh"),v=n("AD+e"),y=n("xRQN"),b=n("of9L"),g=n("hTmG"),m=n("1ff1"),w=n("0meK"),O=n("ss0y"),j=null,_=null,x=n("6S2I").a.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil");function k(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var S=k("DXT1"),M=k("DXT3"),I=k("DXT5"),T=function(e){Kt(k,e);var t,v=Xt(k);function k(e,t){var n;return Wt(this,k),(n=v.call(this)).data=e,n.type=4,n.glTexture=null,n.powerOfTwoStretchInfo=null,n.loadingPromise=null,n.loadingController=null,n.events=new l.a,n.params=t||{},n.params.mipmap=!1!==n.params.mipmap,n.params.noUnpackFlip=n.params.noUnpackFlip||!1,n.params.preMultiplyAlpha=n.params.preMultiplyAlpha||!1,n.params.wrap=n.params.wrap||{s:10497,t:10497},n.params.powerOfTwoResizeMode=n.params.powerOfTwoResizeMode||1,n.estimatedTexMemRequired=k.estimateTexMemRequired(n.data,n.params),n.startPreload(),n}return Zt(k,[{key:"startPreload",value:function(){var e=this.data;Object(o.j)(e)||(e instanceof HTMLVideoElement?this.startPreloadVideoElement(e):e instanceof HTMLImageElement&&this.startPreloadImageElement(e))}},{key:"startPreloadVideoElement",value:function(e){Object(u.t)(e.src)||"auto"===e.preload&&e.crossOrigin||(e.preload="auto",e.crossOrigin="anonymous",e.src=e.src)}},{key:"startPreloadImageElement",value:function(e){Object(u.u)(e.src)||Object(u.t)(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}},{key:"dispose",value:function(){this.data=void 0}},{key:"width",get:function(){return this.params.width}},{key:"height",get:function(){return this.params.height}},{key:"createDescriptor",value:function(e){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.mipmap&&!this.params.disableAnisotropy?e.parameters.maxMaxAnisotropy:void 0}}},{key:"load",value:function(e,t){if(Object(o.k)(this.glTexture))return this.glTexture;if(Object(o.k)(this.loadingPromise))return this.loadingPromise;var n=this.data;return Object(o.j)(n)?(this.glTexture=new b.a(e,this.createDescriptor(e),null),e.bindTexture(this.glTexture,0),this.glTexture):"string"==typeof n?this.loadFromURL(e,t,n):n instanceof Image?this.loadFromImageElement(e,t,n):n instanceof HTMLVideoElement?this.loadFromVideoElement(e,t,n):n instanceof ImageData||n instanceof HTMLCanvasElement?this.loadFromImage(e,n,t):(Object(a.c)(n)||Object(a.k)(n))&&this.params.encoding===k.DDS_ENCODING?this.loadFromDDSData(e,n):(Object(a.c)(n)||Object(a.k)(n))&&this.params.encoding===k.BASIS_ENCODING?this.loadFromBasis(e,n):Object(a.k)(n)?this.loadFromPixelData(e,n):Object(a.c)(n)?this.loadFromPixelData(e,new Uint8Array(n)):null}},{key:"requiresFrameUpdates",get:function(){return this.data instanceof HTMLVideoElement}},{key:"frameUpdate",value:function(e,t,n){if(!(this.data instanceof HTMLVideoElement)||Object(o.j)(this.glTexture))return n;if(this.data.readyState<2||n===this.data.currentTime)return n;if(Object(o.k)(this.powerOfTwoStretchInfo)){var r=this.powerOfTwoStretchInfo,i=r.framebuffer,a=r.vao,s=r.sourceTexture;s.setData(this.data),this.drawStretchedTexture(e,t,i,a,s,this.glTexture)}else{var u=this.data,c=u.width,l=u.height,h=this.glTexture.descriptor,f=h.width,p=h.height;c!==f||l!==p?this.glTexture.updateData(0,0,0,Math.min(c,f),Math.min(l,p),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}},{key:"loadFromDDSData",value:function(e,t){return this.glTexture=function(e,t,n,r){var i=function(e,t){var n=new Int32Array(e,0,31);if(542327876!==n[0])return x.error("Invalid magic number in DDS header"),null;if(!(4&n[20]))return x.error("Unsupported format, must contain a FourCC code"),null;var r,i,a=n[21];switch(a){case S:r=8,i=33776;break;case M:r=16,i=33778;break;case I:r=16,i=33779;break;default:return x.error("Unsupported FourCC code:",function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(a)),null}var o=1,s=n[4],u=n[3];0==(3&s)&&0==(3&u)||(x.warn("Rounding up compressed texture size to nearest multiple of 4."),s=s+3&-4,u=u+3&-4);var c,l,f=s,p=u;131072&n[2]&&!1!==t&&(o=Math.max(1,n[7])),1===o||Object(h.h)(s)&&Object(h.h)(u)||(x.warn("Ignoring mipmaps of non power of two sized compressed texture."),o=1);for(var d=n[1]+4,v=[],y=0;y<o;++y)l=(s+3>>2)*(u+3>>2)*r,c=new Uint8Array(e,d,l),v.push(c),d+=l,s=Math.max(1,s>>1),u=Math.max(1,u>>1);return{textureData:{type:"compressed",levels:v},internalFormat:i,width:f,height:p}}(n,r),a=i.textureData,o=i.internalFormat,s=i.width,u=i.height;t.samplingMode=a.levels.length>1?9987:9729,t.hasMipmap=a.levels.length>1,t.internalFormat=o,t.width=s,t.height=u;var c=new b.a(e,t,a);return e.bindTexture(c,0),c}(e,this.createDescriptor(e),t,this.params.mipmap),e.bindTexture(this.glTexture,0),this.glTexture}},{key:"loadFromBasis",value:function(e,t){var i=this;return this.loadAsync((function(){return(a=Ut(regeneratorRuntime.mark((function e(t,i,a){var s,u,c,l,h,f,p,d,v,y,g,m,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Object(o.j)(j),!e.t0){e.next=5;break}return e.next=4,Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Object(o.j)(_),!e.t0){e.next=6;break}return _=function(){if(Object(o.j)(r)){var e=function(e){return Object(O.a)("esri/libs/basisu/"+e)};r=Promise.all([n.e(0),n.e(69)]).then(n.bind(null,"pY8p")).then((function(e){return e.b})).then((function(t){return(0,t.default)({locateFile:e}).then((function(e){return e.initializeBasis(),delete e.then,e}))}))}return r}(),e.next=5,_;case 5:j=e.sent;case 6:return e.abrupt("return",_);case 7:case"end":return e.stop()}}),e)})))();case 4:j=e.sent;case 5:if(!((s=new j.BasisFile(new Uint8Array(a))).getNumImages()<1)){e.next=8;break}return e.abrupt("return",null);case 8:for(u=s.getNumLevels(0),c=s.getHasAlpha(),l=s.getImageWidth(0,0),h=s.getImageHeight(0,0),f=t.capabilities,p=f.compressedTextureETC,d=f.compressedTextureS3TC,v=zt(p?c?[1,37496]:[0,37492]:d?c?[3,33779]:[2,33776]:[13,6408],2),y=v[0],g=v[1],s.startTranscoding(),m=[],w=0;w<u;w++)m.push(new Uint8Array(s.getImageTranscodedSizeInBytes(0,w,y))),s.transcodeImage(m[w],0,w,y,0,0);return s.close(),s.delete(),x=Nt(Nt({},i),{},{samplingMode:u>1?9987:9729,hasMipmap:u>1,internalFormat:g,width:l,height:h}),e.abrupt("return",new b.a(t,x,{type:"compressed",levels:m}));case 15:case"end":return e.stop()}}),e)}))),function(e,t,n){return a.apply(this,arguments)})(e,i.createDescriptor(e),t).then((function(e){return i.glTexture=e,e}));var a}))}},{key:"loadFromPixelData",value:function(e,t){Object(d.a)(this.params.width>0&&this.params.height>0);var n=this.createDescriptor(e);return n.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,n.width=this.params.width,n.height=this.params.height,this.glTexture=new b.a(e,n,t),e.bindTexture(this.glTexture,0),this.glTexture}},{key:"loadAsync",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(c.d)(),this.loadingController=n,r=t(n.signal),this.loadingPromise=r,i=function(){a.loadingController===n&&(a.loadingController=null),a.loadingPromise===r&&(a.loadingPromise=null)},e.abrupt("return",(r.then(i,i),r));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"loadFromURL",value:function(e,t,n){var r=this;return this.loadAsync(function(){var i=Ut(regeneratorRuntime.mark((function i(a){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(p.a)(n,{signal:a});case 2:return o=i.sent,i.abrupt("return",r.loadFromImage(e,o,t));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},{key:"loadFromImageElement",value:function(e,t,n){var r=this;return n.complete?this.loadFromImage(e,n,t):this.loadAsync(function(){var i=Ut(regeneratorRuntime.mark((function i(a){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(f.a)(n,n.src,!1,a);case 2:return o=i.sent,i.abrupt("return",r.loadFromImage(e,o,t));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},{key:"loadFromVideoElement",value:function(e,t,n){return n.readyState>=2?this.loadFromImage(e,n,t):this.loadFromVideoElementAsync(e,t,n)}},{key:"loadFromVideoElementAsync",value:function(e,t,n){var r=this;return this.loadAsync((function(i){return new Promise((function(a,u){var l=function(){n.removeEventListener("loadeddata",h),n.removeEventListener("error",f),Object(o.k)(p)&&p.remove()},h=function(){n.readyState>=2&&(l(),a(r.loadFromImage(e,n,t)))},f=function(e){l(),u(e||new s.a("Failed to load video"))};n.addEventListener("loadeddata",h),n.addEventListener("error",f);var p=Object(c.p)(i,(function(){return f(Object(c.e)())}))}))}))}},{key:"loadFromImage",value:function(e,t,n){var r=k.getDataDimensions(t);this.params.width=r.width,this.params.height=r.height;var i=this.createDescriptor(e);return i.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(e,i)||Object(h.h)(r.width)&&Object(h.h)(r.height)?(i.width=r.width,i.height=r.height,this.glTexture=new b.a(e,i,t),e.bindTexture(this.glTexture,0),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(e,t,r,i,n),e.bindTexture(this.glTexture,0),this.glTexture)}},{key:"requiresPowerOfTwo",value:function(e,t){var n=33071,r="number"==typeof t.wrapMode?t.wrapMode===n:t.wrapMode.s===n&&t.wrapMode.t===n;return!Object(y.a)(e.gl)&&(t.hasMipmap||!r)}},{key:"makePowerOfTwoTexture",value:function(e,t,n,r,a){var o,s=n.width,u=n.height,c=Object(h.l)(s),l=Object(h.l)(u);switch(r.width=c,r.height=l,this.params.powerOfTwoResizeMode){case 2:r.textureCoordinateScaleFactor=[s/c,u/l],(o=new b.a(e,r)).updateData(0,0,0,s,u,t);break;case 1:case null:case void 0:o=this.stretchToPowerOfTwo(e,t,r,a);break;default:Object(i.a)(this.params.powerOfTwoResizeMode)}return r.hasMipmap&&o.generateMipmap(),o}},{key:"stretchToPowerOfTwo",value:function(e,t,n,r){var i=new b.a(e,n),a=new w.a(e,{colorTarget:0,depthStencilTarget:0},i),o=new b.a(e,{target:3553,pixelFormat:n.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!n.flipped,maxAnisotropy:8,preMultiplyAlpha:n.preMultiplyAlpha},t),s=Object(m.b)(e);return this.drawStretchedTexture(e,r,a,s,o,i),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:s,sourceTexture:o,framebuffer:a}:(s.dispose(!0),o.dispose(),a.detachColorTexture(),e.bindFramebuffer(null),a.dispose()),i}},{key:"drawStretchedTexture",value:function(e,t,n,r,i,a){e.bindFramebuffer(n);var o=e.getViewport();e.setViewport(0,0,a.descriptor.width,a.descriptor.height);var s=t.program;e.bindProgram(s),s.setUniform4f("color",1,1,1,1),s.setUniform1i("tex",0),e.bindTexture(i,0),e.bindVAO(r),e.setPipelineState(t.pipeline),e.drawArrays(5,0,Object(g.f)(r,"geometry")),e.bindFramebuffer(null),e.setViewport(o.x,o.y,o.width,o.height)}},{key:"unload",value:function(){if(Object(o.k)(this.powerOfTwoStretchInfo)){var e=this.powerOfTwoStretchInfo,t=e.framebuffer,n=e.vao,r=e.sourceTexture;n.dispose(!0),r.dispose(),t.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(Object(o.k)(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),Object(o.k)(this.loadingController)){var i=this.loadingController;this.loadingController=null,this.loadingPromise=null,i.abort()}this.events.emit("unloaded")}}],[{key:"getDataDimensions",value:function(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}},{key:"estimateTexMemRequired",value:function(e,t){if(Object(o.j)(e))return 0;if(Object(a.c)(e)||Object(a.k)(e))return t.encoding===k.BASIS_ENCODING?function(e){if(Object(o.j)(j))return e.byteLength;var t=new j.BasisFile(new Uint8Array(e));if(t.getNumImages()<1)return 0;var n=t.getNumLevels(0),r=t.getHasAlpha(),i=t.getImageWidth(0,0),a=t.getImageHeight(0,0);t.close(),t.delete();var s=Object(g.b)(r?37496:37492);return Math.ceil(i*a*s*((Math.pow(4,n)-1)/(3*Math.pow(4,n-1))))}(e):e.byteLength;var n=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?k.getDataDimensions(e):t,r=n.width,i=n.height;return(t.mipmap?4/3:1)*r*i*(t.components||4)||0}}]),k}(v.a);T.DDS_ENCODING="image/vnd-ms.dds",T.BASIS_ENCODING="image/x.basis"},Hxwb:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t){Wt(this,e),this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.geometry=t.geometry,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer}return Zt(e,[{key:"coordinateHelper",get:function(){return this.geometry.editGeometry.coordinateHelper}}]),e}()},I0c2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fXoL"),i=n("jH8C"),a=function(){var e=function(){function e(t,n){Wt(this,e),this.element=t,this.ngZone=n,this.dragEnabled=!0,this.dragX=!0,this.dragY=!0,this.dragStart=new r.t,this.dragMove=new r.t,this.dragEnd=new r.t,this.globalListeners=new Map}return Zt(e,[{key:"ngOnChanges",value:function(e){this.dragEnabled&&e.dragEventTarget&&e.dragEventTarget.currentValue&&this.onMousedown(this.dragEventTarget)}},{key:"ngOnDestroy",value:function(){this.removeEventListener()}},{key:"onMousedown",value:function(e){if(Object(i.c)(e)&&(this.dragX||this.dragY)){var t=Object(i.b)(e);this.initDrag(t.pageX,t.pageY),this.addEventListeners(e),this.dragStart.emit(e)}}},{key:"onMousemove",value:function(e){var t=Object(i.b)(e);this.onDrag(t.pageX,t.pageY),this.dragMove.emit(e)}},{key:"onMouseup",value:function(e){this.endDrag(),this.removeEventListener();var t=this.element.nativeElement.style;this.dragEnd.emit({left:t.left,top:t.top})}},{key:"addEventListeners",value:function(e){var t=this,n=e.type.startsWith("touch"),r=n?"touchend":"mouseup";this.globalListeners.set(n?"touchmove":"mousemove",{handler:this.onMousemove.bind(this),options:!1}).set(r,{handler:this.onMouseup.bind(this),options:!1}),this.ngZone.runOutsideAngular((function(){t.globalListeners.forEach((function(e,t){window.document.addEventListener(t,e.handler,e.options)}))}))}},{key:"removeEventListener",value:function(){this.globalListeners.forEach((function(e,t){window.document.removeEventListener(t,e.handler,e.options)}))}},{key:"initDrag",value:function(e,t){this.isDragging=!0,this.lastPageX=e,this.lastPageY=t,this.element.nativeElement.classList.add("dragging"),this.elementWidth=this.element.nativeElement.offsetWidth,this.elementHeight=this.element.nativeElement.offsetHeight,this.vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),this.vh=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}},{key:"onDrag",value:function(e,t){if(this.isDragging){var n=e-this.lastPageX,r=t-this.lastPageY,i=this.element.nativeElement.getBoundingClientRect(),a=i.left+n,o=i.top+r,s=!this.inViewport||o>=0&&o+this.elementHeight<=this.vh;(!this.inViewport||a>=0&&a+this.elementWidth<=this.vw)&&(this.lastPageX=e),s&&(this.lastPageY=t),this.inViewport&&(a<0&&(a=0),a+this.elementWidth>this.vw&&(a=this.vw-this.elementWidth),o<0&&(o=0),o+this.elementHeight>this.vh&&(o=this.vh-this.elementHeight)),this.element.nativeElement.style.left=a+"px",this.element.nativeElement.style.top=o+"px"}}},{key:"endDrag",value:function(){this.isDragging=!1,this.element.nativeElement.classList.remove("dragging")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(r.r),r.fc(r.M))},e.\u0275dir=r.ac({type:e,selectors:[["","appDraggable",""]],inputs:{dragEnabled:"dragEnabled",dragEventTarget:"dragEventTarget",dragX:"dragX",dragY:"dragY",inViewport:"inViewport"},outputs:{dragStart:"dragStart",dragMove:"dragMove",dragEnd:"dragEnd"},features:[r.Rb]}),e}()},IDUf:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f}));var r,i,a,o,s=n("3r0u"),u=null!=(r=null==(i=s.a.esriConfig)?void 0:i.locale)?r:null==(a=s.a.dojoConfig)?void 0:a.locale;function c(){var e,t;return null!=(e=null!=u?u:null==(t=s.a.navigator)?void 0:t.language)?e:"en"}function l(){return void 0===o&&(o=c()),o}var h=[];function f(e){return h.push(e),{remove:function(){h.splice(h.indexOf(e),1)}}}var p=[];function d(e){return p.push(e),{remove:function(){h.splice(p.indexOf(e),1)}}}null==s.a.addEventListener||s.a.addEventListener("languagechange",(function(){var e=c();o!==e&&(o=e,[].concat(p).forEach((function(t){t.call(null,e)})),[].concat(h).forEach((function(t){t.call(null,e)})))}))},IEcw:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return h}));var r=n("OKTS"),i=n("Cy1f"),a=n("5DEt");function o(e,t){return Object(a.g)(e,t)/Object(a.o)(e)}function s(e,t){var n=Object(a.g)(e,t)/(Object(a.o)(e)*Object(a.o)(t));return-Object(r.a)(n)}function u(e,t,n){Object(a.q)(c,e),Object(a.q)(l,t);var i=Object(a.g)(c,l),o=Object(r.a)(i),s=Object(a.f)(c,c,l);return Object(a.g)(s,n)<0?2*Math.PI-o:o}var c=Object(i.e)(),l=Object(i.e)(),h=Object.freeze({__proto__:null,projectPoint:function(e,t,n){var r=Object(a.g)(e,t)/Object(a.g)(e,e);return Object(a.d)(n,e,r)},projectPointSignedLength:o,angle:s,angleAroundAxis:u})},IIzr:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function(){function e(){Wt(this,e),this.year=(new Date).getFullYear()}return Zt(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["app-site-policies"]],decls:7,vars:1,consts:[[1,"sitePolicies","my-2"],[1,"text-center"],["href","https://tfsweb.tamu.edu/sitepolicies/","target","_blank","rel","noopener noreferrer",1,"hover:underline"]],template:function(e,t){1&e&&(r.kc(0,"div",0),r.kc(1,"p",1),r.Tc(2),r.gc(3,"br"),r.kc(4,"span"),r.kc(5,"a",2),r.Tc(6,"Accessibility, Site Policies & Public Notices"),r.jc(),r.jc(),r.jc(),r.jc()),2&e&&(r.Tb(2),r.Vc(" \xa9 ",t.year," Texas A&M Forest Service"))},styles:[".sitePolicies[_ngcontent-%COMP%]{font-size:.8125em;color:#dad2d2}"]}),e}()},IKal:function(e,t,n){"use strict";t.ArgumentOutOfRangeError=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},IQQX:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("fXoL"),i=n("8prj"),a=n("LE+W"),o=n("1E6V"),s=n("VVTu"),u=n("lNcg"),c=n("jWBI"),l=n("tk/3"),h=n("1wtQ"),f=function(){var e=function(){function e(t,n){Wt(this,e),this.http=t,this.appConfig=n,this.showTableModal=new r.t,this.shareMultiSoils=new r.t,this.selectPolygonFromTable=new r.t,this.updateSliderValue=new r.t,this.soilsGLHasPolygons=new r.t}return Zt(e,[{key:"identifySoil",value:function(e,t){var n=this;return new Promise((function(r,i){n.http.get("assets/soilQueries/"+t+"SoilQuery.txt",{responseType:"text"}).subscribe((function(t){var a=t.toString().replace("zzLon",e.longitude.toString()).replace("zzLat",e.latitude.toString());try{n.http.post(n.appConfig.ssurgoTabularURL,{query:a,format:"json"}).subscribe((function(e){r(e)}))}catch(o){i(o)}}))}))}},{key:"getSoils",value:function(e){var t=this;return new Promise((function(n){var r=new i.default;r.features=[e];var o={"Area of interest":r,queryFileName:"PMLOSoilsQuery"},s=new a.a({url:t.appConfig.clipSoilsGPServiceURL});s.submitJob(o).then((function(e){s.waitForJobCompletion(e.jobId).then((function(e){"job-succeeded"===e.jobStatus&&Promise.all([s.getResultData(e.jobId,"out_multipartSoils"),s.getResultData(e.jobId,"out_singlepartSoils")]).then((function(e){n(e)}))}),(function(e){n([]),console.error(e)}))}))}))}},{key:"addSoilsToMap",value:function(e,t,n,r,i){var a=(100-r)/100,o=[],c=Object(s.a)(a);this.shareMultiSoils.emit(t.value.features),t.value.features.forEach((function(e){var t;i?(c=Object(s.c)(),t=Object(s.f)(e,0)):t=Object(s.f)(e,a),e.symbol=Object(u.a)(c,t),e.setAttribute("boundaryId",n),o.push(e)})),e.addMany(o)}},{key:"addSoilLabelsToMap",value:function(e,t,n,r,i){var a=(100-r)/100,u=new o.default({url:this.appConfig.geometryServiceURL});if(t.value.features.length>0){var l=t.value.features.map((function(e){return e.geometry})),h=a;i&&(h=1),u.labelPoints(l).then((function(r){var a=r.map((function(e,r){return new c.a({geometry:e,symbol:Object(s.g)(t.value.features[r].attributes.musym,i,h),attributes:{boundaryId:n}})}));e.addMany(a)}))}}},{key:"updateGraphicsOpacity",value:function(e,t,n,r,i){var a=(100-n)/100;i?!1===r?(this.setSymbolColor(e,!1,a),this.setSymbolColor(t,!1,a)):(this.setSymbolColor(e,!0,0),this.setSymbolColor(t,!0,a)):(this.setSymbolColor(e,!1,a),this.setSymbolColor(t,!0,0))}},{key:"setSymbolColor",value:function(e,t,n){e.graphics.forEach((function(e){var r,i,a;switch(e.geometry.type){case"polygon":i=!1===t?Object(s.a)(n):Object(s.c)(),a=Object(s.f)(e,n),r=Object(u.a)(i,a);break;case"point":!0===t&&(n=1),r=Object(s.g)(e.symbol.text,t,n)}e.symbol=r}))}},{key:"clearSoilGLayers",value:function(e,t){t.removeAll(),e.removeAll(),this.showTableModal.emit(!1),this.shareMultiSoils.emit([])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.oc(l.a),r.oc(h.a))},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},IRkY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("srIe"),i=n("KrcW"),a=function(){function e(t){var n=this;Wt(this,e),this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=i.a.before((function(){return n.reset()})),this.grow()}return Zt(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(r.o)(this.tickHandle)),this.items=Object(r.o)(this.items)}},{key:"get",value:function(){return 0===this.itemsPtr&&Object(i.a)((function(){})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}},{key:"reset",value:function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}},{key:"grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,o));e++)this.items.push(this.allocator())}}]),e}(),o=1024},ITmb:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("fXoL"),i=n("ofXK"),a=(n("/rtH"),n("3Pt+")),o=n("FhEM"),s=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c,a.f,o.a]]}),e}()},IXLn:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return l}));var r=[0,0];function i(e,t){return c(e,t.x,t.y,t.z)}function a(e,t){if(!t.points||t.points.length)return!1;var n,r=Vt(t.points);try{for(r.s();!(n=r.n()).done;){if(!s(e,n.value))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}function o(e,t){var n=t.xmin,r=t.ymin,i=t.zmin,a=t.xmax,o=t.ymax,s=t.zmax;return e.hasZ&&t.hasZ?c(e,n,r,i)&&c(e,n,o,i)&&c(e,a,o,i)&&c(e,a,r,i)&&c(e,n,r,s)&&c(e,n,o,s)&&c(e,a,o,s)&&c(e,a,r,s):c(e,n,r)&&c(e,n,o)&&c(e,a,o)&&c(e,a,r)}function s(e,t){return c(e,t[0],t[1])}function u(e,t){return c(e,t[0],t[1],t[2])}function c(e,t,n,r){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax&&(null==r||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function l(e,t){return r[1]=t.y,r[0]=t.x,h(e,r)}function h(e,t){return function(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return f(!1,e,t);for(var n=!1,r=0,i=e.length;r<i;r++)n=f(n,e[r],t);return n}(e.rings,t)}function f(e,t,n){for(var r=zt(n,2),i=r[0],a=r[1],o=e,s=0,u=0,c=t.length;u<c;u++){++s===c&&(s=0);var l=zt(t[u],2),h=l[0],f=l[1],p=zt(t[s],2),d=p[0],v=p[1];(f<a&&v>=a||v<a&&f>=a)&&h+(a-f)/(v-f)*(d-h)<i&&(o=!o)}return o}},IZ5B:function(e,t,n){"use strict";var r=n("3j3K");function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(i){return a.reject(e,i)}r===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,a.reject(e,t))}function i(t){n||(n=!0,a.resolve(e,t))}var o=d((function(){t(i,r)}));"error"===o.status&&r(o.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}e.exports=c,c.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){a.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=d(f,t);if("error"===n.status)return a.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=s,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,u=-1,c=new this(i);++u<n;)l(e[u],u);return c;function l(e,i){t.resolve(e).then((function(e){o[i]=e,++s!==n||r||(r=!0,a.resolve(c,o))}),(function(e){r||(r=!0,a.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r=-1,o=new this(i);++r<t;)this.resolve(e[r]).then((function(e){n||(n=!0,a.resolve(o,e))}),(function(e){n||(n=!0,a.reject(o,e))}));return o}},Ibpv:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("WbKI")),s=n("Gj5k"),u=n("RI0u"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),f=n("DZP5"),p=n("qRWG"),d=n("l4eh"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).backgroundColor=null,e.borderLineColor=null,e.borderLineSize=null,e.font=new d.a,e.horizontalAlignment="center",e.kerning=!0,e.haloColor=null,e.haloSize=null,e.rightToLeft=null,e.rotated=!1,e.text="",e.type="text",e.verticalAlignment=null,e.xoffset=0,e.yoffset=0,e.angle=0,e.width=null,e.lineWidth=192,e.lineHeight=1,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n){if(e&&"string"!=typeof e)return e;var r={};return e&&(r.text=e),t&&(r.font=t),n&&(r.color=n),r}},{key:"writeLineWidth",value:function(e,t,n,r){r&&"string"!=typeof r||(t[n]=e)}},{key:"castLineWidth",value:function(e){return Object(p.k)(e)}},{key:"writeLineHeight",value:function(e,t,n,r){r&&"string"!=typeof r||(t[n]=e)}},{key:"clone",value:function(){return new r({angle:this.angle,backgroundColor:Object(a.a)(this.backgroundColor),borderLineColor:Object(a.a)(this.borderLineColor),borderLineSize:this.borderLineSize,color:Object(a.a)(this.color),font:this.font&&this.font.clone(),haloColor:Object(a.a)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}},{key:"hash",value:function(){return"".concat(this.backgroundColor&&this.backgroundColor.hash(),".").concat(this.borderLineColor,".").concat(this.borderLineSize,".").concat(this.color.hash(),".").concat(this.font&&this.font.hash(),".").concat(this.haloColor&&this.haloColor.hash(),".").concat(this.haloSize,".").concat(this.horizontalAlignment,".").concat(this.kerning,".").concat(this.rightToLeft,".").concat(this.rotated,".").concat(this.text,".").concat(this.verticalAlignment,".").concat(this.width,".").concat(this.xoffset,".").concat(this.yoffset,".").concat(this.lineHeight,".").concat(this.lineWidth,".").concat(this.angle)}}]),n}(f.a);Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],v.prototype,"backgroundColor",void 0),Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],v.prototype,"borderLineColor",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],v.prototype,"borderLineSize",void 0),Object(i.a)([Object(o.b)({type:d.a,json:{write:!0}})],v.prototype,"font",void 0),Object(i.a)([Object(o.b)({type:["left","right","center","justify"],json:{write:!0}})],v.prototype,"horizontalAlignment",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],v.prototype,"kerning",void 0),Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],v.prototype,"haloColor",void 0),Object(i.a)([Object(o.b)({type:Number,cast:p.k,json:{write:!0}})],v.prototype,"haloSize",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],v.prototype,"rightToLeft",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],v.prototype,"rotated",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],v.prototype,"text",void 0),Object(i.a)([Object(u.a)({esriTS:"text"},{readOnly:!0})],v.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:["baseline","top","middle","bottom"],json:{write:!0}})],v.prototype,"verticalAlignment",void 0),Object(i.a)([Object(o.b)({type:Number,cast:p.k,json:{write:!0}})],v.prototype,"xoffset",void 0),Object(i.a)([Object(o.b)({type:Number,cast:p.k,json:{write:!0}})],v.prototype,"yoffset",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:function(e){return e&&-1*e},write:function(e,t){return t.angle=e&&-1*e}}})],v.prototype,"angle",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],v.prototype,"width",void 0),Object(i.a)([Object(o.b)({type:Number})],v.prototype,"lineWidth",void 0),Object(i.a)([Object(l.a)("lineWidth")],v.prototype,"writeLineWidth",null),Object(i.a)([Object(s.a)("lineWidth")],v.prototype,"castLineWidth",null),Object(i.a)([Object(o.b)({type:Number})],v.prototype,"lineHeight",void 0),Object(i.a)([Object(l.a)("lineHeight")],v.prototype,"writeLineHeight",null),v=r=Object(i.a)([Object(c.a)("esri.symbols.TextSymbol")],v),t.a=v},IeLS:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("srIe"),i=n("IDUf"),a={ar:"ar-u-nu-latn"},o=new WeakMap,s={};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function c(e,t){return function(e){var t=e||s;if(!o.has(t)){var n=Object(i.b)(),u=a[Object(i.b)()]||n;o.set(t,new Intl.NumberFormat(u,e))}return Object(r.d)(o.get(t))}(t).format(e)}Object(i.a)((function(){o=new WeakMap,s={}}))},IlWj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r=function(){function e(t,n,r,i){Wt(this,e),this.semiMajorAxis=t,this.flattening=n,this.outerAtmosphereRimWidth=r,this.semiMinorAxis=this.semiMajorAxis*(1-this.flattening),this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}return Zt(e,[{key:"radius",get:function(){return this.semiMajorAxis}}]),e}(),i=new r(6378137,1/298.257223563,3e5,.006694379990137799),a=new r(3396190,1/169.8944472236118,23e4),o=new r(1737400,0,0)},Ilhi:function(e,t,n){"use strict";function r(e,t,n){return t.flatten((function(e){return e.sublayers})).length!==e.length||!!e.some((function(e){return e.originIdOf("minScale")>n||e.originIdOf("maxScale")>n||e.originIdOf("renderer")>n||e.originIdOf("labelingInfo")>n||e.originIdOf("opacity")>n||e.originIdOf("labelsVisible")>n||e.originIdOf("source")>n}))||!a(e,t)}function i(e,t,n){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===n.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!a(e,t)}function a(e,t){if(!e||!e.length)return!0;var n=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>n.length)return!1;var r,i=0,a=n.length,o=Vt(e);try{for(o.s();!(r=o.n()).done;){for(var s=r.value.id;i<a&&n[i]!==s;)i++;if(i>=a)return!1}}catch(u){o.e(u)}finally{o.f()}return!0}function o(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}))},Ioo4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wSAH"),i=n("srIe"),a=n("9MzC");function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return new Promise((function(u,c){if(Object(a.n)(o))c(s());else{var l=function(){p(),c(new Error("Unable to load "+t))},h=function(){var t=e;p(),u(t)},f=function(){if(e){var t=e;p(),t.src="",c(s())}},p=function(){Object(r.a)("esri-image-decode")||(e.removeEventListener("error",l),e.removeEventListener("load",h)),l=null,h=null,e=null,Object(i.k)(o)&&o.removeEventListener("abort",f),f=null,n&&URL.revokeObjectURL(t)};Object(i.k)(o)&&o.addEventListener("abort",f),Object(r.a)("esri-image-decode")?e.decode().then(h,l):(e.addEventListener("error",l),e.addEventListener("load",h))}}))}function s(){try{return new DOMException("Aborted","AbortError")}catch(t){var e=new Error;return e.name="AbortError",e}}},Ip4x:function(e,t,n){"use strict";n.d(t,"a",(function(){return we})),n.d(t,"b",(function(){return xe})),n.d(t,"c",(function(){return Oe})),n.d(t,"d",(function(){return ke})),n.d(t,"e",(function(){return je})),n.d(t,"f",(function(){return _e})),n.d(t,"g",(function(){return Se}));var r=n("XvKw"),i=n("rgtN"),a=function(){function e(t){Wt(this,e),this._color=Object(r.b)(),this._key=t}return Zt(e,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return 7&this._key}},{key:"defines",value:function(){return[]}},{key:"getStride",value:function(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}},{key:"getAttributeLocations",value:function(){return this._locations||this._buildAttributesInfo(),this._locations}},{key:"getLayoutInfo",value:function(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}},{key:"getEncodingInfos",value:function(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}},{key:"getUniforms",value:function(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}},{key:"getShaderHeader",value:function(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}},{key:"getShaderMain",value:function(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}},{key:"setDataUniforms",value:function(e,t,n,r){var i=this.getUniforms();for(var a in i){var o=i[a];switch(o.type){case"float":e.setUniform1f(o.name,o.getValue(n,t,r));break;case"vec2":e.setUniform2fv(o.name,o.getValue(n,t,r));break;case"vec4":var s=o.getValue(n,t,r),u=s[3];this._color[0]=u*s[0],this._color[1]=u*s[1],this._color[2]=u*s[2],this._color[3]=u,e.setUniform4fv(o.name,this._color)}}}},{key:"encodeAttributes",value:function(e,t,n){for(var r=this.attributesInfo(),i=this.getEncodingInfos(),a=[],o=0,s=Object.keys(i);o<s.length;o++){var u,c,l=s[o],h=i[l],f=r[l],p=f.type,d=f.precisionFactor,v=f.isLayout?n.getLayoutProperty(l):n.getPaintProperty(l),y=null==(u=v.interpolator)?void 0:u.getInterpolationRange(t),b=0,g=Vt(h);try{for(g.s();!(c=g.n()).done;){var m=c.value;m.dataIndex>=a.length&&a.push(0);var w=v.getValue(y?y[b]:t,e);switch(p){case 0:a[m.dataIndex]|=this._encodeByte(w*(d||1),8*m.offset);break;case 1:a[m.dataIndex]|=this._encodeByte(w*(d||1)+128,8*m.offset);break;case 2:a[m.dataIndex]=this._encodeColor(w);break;default:throw new Error("Unsupported encoding type")}++b}}catch(O){g.e(O)}finally{g.f()}}return a}},{key:"getAtributeState",value:function(e){var t=0,n=3+2*e;return t|=this._bit(n),t|=this._bit(n+1)<<1}},{key:"_buildAttributesInfo",value:function(){var t,n=[],r={},i={},a=-1,o=this.attributesInfo(),s=-1,u=Vt(this.attributes());try{for(u.s();!(t=u.n()).done;){var c=t.value;++s;var l=this.getAtributeState(s);if(0!==l){var h=o[c],f=[];r[c]=f;for(var p=h.type,d=0;d<l;++d){var v=e._encodingInfo[p],y=v.dataType,b=v.bytesPerElement,g=v.count,m=v.normalized,w=y<<2|g,O=i[w];O&&4!==O.offset||(++a,i[w]=O={dataIndex:a,offset:0},n.push({location:-1,name:"a_data_"+a,count:4/b,type:y,normalized:m})),f.push({dataIndex:O.dataIndex,offset:O.offset}),O.offset+=b*g}}}}catch(T){u.e(T)}finally{u.f()}this._buildVertexBufferLayout(n);var j,_={},x=0,k=Vt(this._layoutInfo.geometry);try{for(k.s();!(j=k.n()).done;){_[j.value.name]=x++}}catch(T){k.e(T)}finally{k.f()}var S=this._layoutInfo.opacity;if(S){var M,I=Vt(S);try{for(I.s();!(M=I.n()).done;){_[M.value.name]=x++}}catch(T){I.e(T)}finally{I.f()}}this._buildShaderInfo(n,r),this._propertyEncodingInfo=r,this._locations=_}},{key:"_buildVertexBufferLayout",value:function(e){var t={},n=this.geometryInfo(),r=n[0].stride;if(0===e.length)t.geometry=n;else{var i=[],a=r;r+=4*e.length;var s,u=Vt(n);try{for(u.s();!(s=u.n()).done;){var c=Nt({},s.value);c.stride=r,i.push(c)}}catch(p){u.e(p)}finally{u.f()}var l,h=Vt(e);try{for(h.s();!(l=h.n()).done;){var f=l.value;i.push({name:f.name,count:f.count,type:f.type,offset:a,stride:r,normalized:f.normalized||!1,divisor:0}),a+=o(f.type)*f.count}}catch(p){h.e(p)}finally{h.f()}t.geometry=i}this.opacityInfo()&&(t.opacity=this.opacityInfo()),this._layoutInfo=t,this._stride=r}},{key:"_buildShaderInfo",value:function(t,n){var r,i=this,a="\n",o="\n",s=[],u=Vt(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;a+="attribute ".concat(this._getType(c.count)," ").concat(c.name,";\n")}}catch(y){u.e(y)}finally{u.f()}var l,h=this.attributes(),f=this.attributesInfo(),p=-1,d=Vt(h);try{var v=function(){var t=l.value;++p;var r=f[t],u=r.name,c=r.type,h=r.precisionFactor,d=r.isLayout,v=h&&1!==h?" * "+1/h:"",y=e._encodingInfo[c],b=y.bytesPerElement,g=y.count,m=function(e){return"a_data_".concat(e.dataIndex).concat(2===c?"":"[".concat(e.offset/b,"]"))};switch(i.getAtributeState(p)){case 0:var w=i._getType(g),O="u_"+u;s.push({name:O,type:w,getValue:function(e,n){return d?e.getLayoutValue(t,n):e.getPaintValue(t,n)}}),a+="uniform ".concat(w," ").concat(O,";\n"),o+="".concat(w," ").concat(u," = ").concat(O,";\n");break;case 1:var j=m(n[t][0]);o+="".concat(i._getType(g)," ").concat(u," = ").concat(j).concat(v,";\n");break;case 2:var _="u_t_"+u;s.push({name:_,type:"float",getValue:function(e,n,r){return(d?e.getLayoutProperty(t):e.getPaintProperty(t)).interpolator.interpolationUniformValue(r,n)}}),a+="uniform float ".concat(_,";\n");var x=m(n[t][0]),k=m(n[t][1]);o+="".concat(i._getType(g)," ").concat(u," = mix(").concat(x).concat(v,", ").concat(k).concat(v,", ").concat(_,");\n")}};for(d.s();!(l=d.n()).done;)v()}catch(y){d.e(y)}finally{d.f()}this._shaderHeader=a,this._shaderMain=o,this._uniforms=s}},{key:"_bit",value:function(e){return(this._key&1<<e)>>e}},{key:"_getType",value:function(e){switch(e){case 1:return"float";case 2:return"vec2";case 4:return"vec4"}throw new Error("Invalid count")}},{key:"_encodeColor",value:function(e){var t=255*e[3];return i.a.i8888to32(e[0]*t,e[1]*t,e[2]*t,t)}},{key:"_encodeByte",value:function(e,t){return(255&e)<<t}}]),e}();a._encodingInfo=[{dataType:5121,bytesPerElement:1,count:1,normalized:!1},{dataType:5121,bytesPerElement:1,count:1,normalized:!1},{dataType:5121,bytesPerElement:1,count:4,normalized:!0}];var o=function(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1}},s=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(a);s.ATTRIBUTES=[],s.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}],s.ATTRIBUTES_INFO={};var u=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(a);u.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],u.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}],u.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:0},"circle-color":{name:"color",type:2},"circle-opacity":{name:"opacity",type:0,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:0,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:2},"circle-stroke-opacity":{name:"stroke_opacity",type:0,precisionFactor:100},"circle-blur":{name:"blur",type:0,precisionFactor:32}};var c=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(a);c.ATTRIBUTES=["fill-color","fill-opacity"],c.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}],c.ATTRIBUTES_INFO={"fill-color":{name:"color",type:2},"fill-opacity":{name:"opacity",type:0,precisionFactor:100}};var l=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e)).usefillColor=r,i}return Zt(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return this.usefillColor?n.ATTRIBUTES_FILL:n.ATTRIBUTES_OUTLINE}},{key:"attributesInfo",value:function(){return this.usefillColor?n.ATTRIBUTES_INFO_FILL:n.ATTRIBUTES_INFO_OUTLINE}}]),n}(a);l.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],l.ATTRIBUTES_FILL=["fill-color","fill-opacity"],l.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}],l.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:2},"fill-opacity":{name:"opacity",type:0,precisionFactor:100}},l.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:2},"fill-opacity":{name:"opacity",type:0,precisionFactor:100}};var h=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(a);h.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width"],h.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:8,stride:12,normalized:!1,divisor:0}],h.ATTRIBUTES_INFO={"line-width":{name:"width",type:0,precisionFactor:2},"line-gap-width":{name:"gap_width",type:0,precisionFactor:2},"line-offset":{name:"offset",type:1,precisionFactor:2},"line-color":{name:"color",type:2},"line-opacity":{name:"opacity",type:0,precisionFactor:100},"line-blur":{name:"blur",type:0,precisionFactor:4}};var f=[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_texAngleRange",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}],p=[{name:"a_opacityInfo",count:1,type:5121,offset:0,stride:1,normalized:!1,divisor:0}],d=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"geometryInfo",value:function(){return f}},{key:"opacityInfo",value:function(){return p}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(a);d.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],d.ATTRIBUTES_INFO={"icon-color":{name:"color",type:2},"icon-opacity":{name:"opacity",type:0,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:2},"icon-halo-width":{name:"halo_width",type:0,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:0,precisionFactor:4},"icon-size":{name:"size",type:0,precisionFactor:32,isLayout:!0}};var v=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"geometryInfo",value:function(){return f}},{key:"opacityInfo",value:function(){return p}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(a);v.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],v.ATTRIBUTES_INFO={"text-color":{name:"color",type:2},"text-opacity":{name:"opacity",type:0,precisionFactor:100},"text-halo-color":{name:"halo_color",type:2},"text-halo-width":{name:"halo_width",type:0,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:0,precisionFactor:4},"text-size":{name:"size",type:0,isLayout:!0}};var y=n("nvBr"),b={kind:"null"},g={kind:"number"},m={kind:"string"},w={kind:"boolean"},O={kind:"color"},j={kind:"object"},_={kind:"value"};function x(e,t){return{kind:"array",itemType:e,n:t}}var k=[b,g,m,w,O,j,x(_)];function S(e){if("array"===e.kind){var t=S(e.itemType);return"number"==typeof e.n?"array<".concat(t,", ").concat(e.n,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}function M(e){if(null===e)return b;if("string"==typeof e)return m;if("boolean"==typeof e)return w;if("number"==typeof e)return g;if(e instanceof y.a)return O;if(Array.isArray(e)){var t,n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){var i=M(n.value);if(t){if(t!==i){t=_;break}}else t=i}}catch(a){r.e(a)}finally{r.f()}return x(t||_,e.length)}return"object"==typeof e?j:_}function I(e,t){if("array"===t.kind)return"array"===e.kind&&(0===e.n&&"value"===e.itemType.kind||I(e.itemType,t.itemType))&&("number"!=typeof t.n||t.n===e.n);if("value"===t.kind){var n,r=Vt(k);try{for(r.s();!(n=r.n()).done;){if(I(e,n.value))return!0}}catch(i){r.e(i)}finally{r.f()}}return t.kind===e.kind}function T(e){if(null===e)return"";var t=typeof e;return"string"===t?e:"number"===t||"boolean"===t?String(e):e instanceof y.a?e.toString():JSON.stringify(e)}var A=n("0ynT"),C=n("BVSY"),E=n("OxmL"),P=function(){function e(t){Wt(this,e),this.parent=t,this.vars={}}return Zt(e,[{key:"add",value:function(e,t){this.vars[e]=t}},{key:"get",value:function(e){return this.vars[e]?this.vars[e]:this.parent?this.parent.get(e):null}}]),e}(),R=function(){function e(){Wt(this,e),this.type=_}return Zt(e,[{key:"evaluate",value:function(e,t){return e.id||null}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new e}}]),e}(),D=function(){function e(){Wt(this,e),this.type=m}return Zt(e,[{key:"evaluate",value:function(e,t){switch(e.type){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";default:return null}}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new e}}]),e}(),L=function(){function e(){Wt(this,e),this.type=j}return Zt(e,[{key:"evaluate",value:function(e,t){return e.values}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new e}}]),e}(),N=function(){function e(){Wt(this,e),this.type=g}return Zt(e,[{key:"evaluate",value:function(e,t){return t}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new e}}]),e}(),F=function(){function e(t,n,r){Wt(this,e),this.lhs=t,this.rhs=n,this.compare=r,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){return this.compare(this.lhs.evaluate(e,t),this.rhs.evaluate(e,t))}}],[{key:"parse",value:function(t,n,r){if(3!==t.length&&4!==t.length)throw new Error('"'.concat(t[0],'" expects 2 or 3 arguments'));if(4===t.length)throw new Error('"'.concat(t[0],'" collator not supported'));return new e(pe(t[1],n),pe(t[2],n),r)}}]),e}(),z=function(){function e(t){Wt(this,e),this.arg=t,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){return!this.arg.evaluate(e,t)}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"!" expects 1 argument');return new e(pe(t[1],n))}}]),e}(),V=function(){function e(t){Wt(this,e),this.args=t,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){var n,r=Vt(this.args);try{for(r.s();!(n=r.n()).done;){if(!n.value.evaluate(e,t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}}],[{key:"parse",value:function(t,n){for(var r=[],i=1;i<t.length;i++)r.push(pe(t[i],n));return new e(r)}}]),e}(),G=function(){function e(t){Wt(this,e),this.args=t,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){var n,r=Vt(this.args);try{for(r.s();!(n=r.n()).done;){if(n.value.evaluate(e,t))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}}],[{key:"parse",value:function(t,n){for(var r=[],i=1;i<t.length;i++)r.push(pe(t[i],n));return new e(r)}}]),e}(),U=function(){function e(t){Wt(this,e),this.args=t,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){var n,r=Vt(this.args);try{for(r.s();!(n=r.n()).done;){if(n.value.evaluate(e,t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}}],[{key:"parse",value:function(t,n){for(var r=[],i=1;i<t.length;i++)r.push(pe(t[i],n));return new e(r)}}]),e}(),B=function(){function e(t,n,r){Wt(this,e),this.type=t,this.args=n,this.fallback=r}return Zt(e,[{key:"evaluate",value:function(e,t){var n,r=Vt(this.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.condition.evaluate(e,t))return i.output.evaluate(e,t)}}catch(a){r.e(a)}finally{r.f()}return this.fallback.evaluate(e,t)}}],[{key:"parse",value:function(t,n,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');for(var i,a=[],o=1;o<t.length-1;o+=2){var s=pe(t[o],n),u=pe(t[o+1],n,r);i||(i=u.type),a.push({condition:s,output:u})}var c=pe(t[t.length-1],n,r);return i||(i=c.type),new e(i,a,c)}}]),e}(),q=function(){function e(t,n){Wt(this,e),this.type=t,this.args=n}return Zt(e,[{key:"evaluate",value:function(e,t){var n,r=Vt(this.args);try{for(r.s();!(n=r.n()).done;){var i=n.value.evaluate(e,t);if(null!==i)return i}}catch(a){r.e(a)}finally{r.f()}return null}}],[{key:"parse",value:function(t,n){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');for(var r,i=[],a=1;a<t.length;a++){var o=pe(t[a],n);r||(r=o.type),i.push(o)}return new e(r,i)}}]),e}(),H=function(){function e(t,n,r,i,a){Wt(this,e),this.type=t,this.input=n,this.labels=r,this.outputs=i,this.fallback=a}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.input.evaluate(e,t);return(this.outputs[this.labels[n]]||this.fallback).evaluate(e,t)}}],[{key:"parse",value:function(t,n){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');for(var r,i,a=pe(t[1],n),o=[],s={},u=2;u<t.length-1;u+=2){var c=t[u];Array.isArray(c)||(c=[c]);var l,h=Vt(c);try{for(h.s();!(l=h.n()).done;){var f=l.value,p=typeof f;if("string"!==p&&"number"!==p)throw new Error('"match" requires string or number literal as labels');if(i){if(p!==i)throw new Error('"match" requires labels to have the same type')}else i=p;s[f]=o.length}}catch(v){h.e(v)}finally{h.f()}var d=pe(t[u+1],n);r||(r=d.type),o.push(d)}return new e(r,a,s,o,pe(t[t.length-1],n))}}]),e}(),W=function(){function e(t,n,r,i,a){Wt(this,e),this.operator=t,this.type=n,this.interpolation=r,this.input=i,this.stops=a}return Zt(e,[{key:"evaluate",value:function(t,n){var r=this.stops;if(1===r.length)return r[0][1].evaluate(t,n);var i=this.input.evaluate(t,n);if(i<=r[0][0])return r[0][1].evaluate(t,n);if(i>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,n);for(var a=0;++a<r.length&&!(i<r[a][0]););var o=e.interpolationRatio(this.interpolation,i,r[a-1][0],r[a][0]),s=r[a-1][1].evaluate(t,n),u=r[a][1].evaluate(t,n);if("interpolate"===this.operator){if("array"===this.type.kind&&Array.isArray(s)&&Array.isArray(u))return s.map((function(e,t){return Object(E.e)(e,u[t],o)}));if("color"===this.type.kind&&s instanceof y.a&&u instanceof y.a){var c=new y.a(s),l=new y.a(u);return new y.a([Object(E.e)(c.r,l.r,o),Object(E.e)(c.g,l.g,o),Object(E.e)(c.b,l.b,o),Object(E.e)(c.a,l.a,o)])}if("number"===this.type.kind&&"number"==typeof s&&"number"==typeof u)return Object(E.e)(s,u,o);throw new Error('"'.concat(this.operator,'" cannot interpolate type ').concat(S(this.type)))}if("interpolate-hcl"===this.operator){var h=Object(A.d)(s),f=Object(A.d)(u),p=f.h-h.h,d=Object(A.e)({h:h.h+o*(p>180||p<-180?p-360*Math.round(p/360):p),c:Object(E.e)(h.c,f.c,o),l:Object(E.e)(h.l,f.l,o)});return new y.a(Nt({a:Object(E.e)(s.a,u.a,o)},d))}if("interpolate-lab"===this.operator){var v=Object(A.c)(s),b=Object(A.c)(u),g=Object(A.e)({l:Object(E.e)(v.l,b.l,o),a:Object(E.e)(v.a,b.a,o),b:Object(E.e)(v.b,b.b,o)});return new y.a(Nt({a:Object(E.e)(s.a,u.a,o)},g))}throw new Error('Unexpected operator "'.concat(this.operator,'"'))}},{key:"interpolationUniformValue",value:function(t,n){var r=this.stops;if(1===r.length)return 0;if(t>=r[r.length-1][0])return 0;for(var i=0;++i<r.length&&!(t<r[i][0]););return e.interpolationRatio(this.interpolation,n,r[i-1][0],r[i][0])}},{key:"getInterpolationRange",value:function(e){var t=this.stops;if(1===t.length){var n=t[0][0];return[n,n]}var r=t[t.length-1][0];if(e>=r)return[r,r];for(var i=0;++i<t.length&&!(e<t[i][0]););return[t[i-1][0],t[i][0]]}}],[{key:"parse",value:function(t,n,r){var i=t[0];if(t.length<5)throw new Error('"'.concat(i,'" expects at least 4 arguments'));var a=t[1];if(!Array.isArray(a)||0===a.length)throw new Error('"'.concat(a,'" is not a valid interpolation'));switch(a[0]){case"linear":if(1!==a.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==a.length||"number"!=typeof a[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==a.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var o=1;o<5;o++){var s=a[o];if("number"!=typeof s||s<0||s>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error('"'.concat(t[0],'" unknown interpolation type "').concat(a[0],'"'))}if(t.length%2!=1)throw new Error('"'.concat(i,'" expects an even number of arguments'));var u,c=pe(t[2],n,g);"interpolate-hcl"===i||"interpolate-lab"===i?u=O:r&&"value"!==r.kind&&(u=r);for(var l=[],h=3;h<t.length;h+=2){var f=t[h];if("number"!=typeof f)throw new Error('"'.concat(i,'" requires stop inputs as literal numbers'));if(l.length&&l[l.length-1][0]>=f)throw new Error('"'.concat(i,'" requires strictly ascending stop inputs'));var p=pe(t[h+1],n,u);u||(u=p.type),l.push([f,p])}if(u&&u!==O&&u!==g&&("array"!==u.kind||u.itemType!==g))throw new Error('"'.concat(i,'" cannot interpolate type ').concat(S(u)));return new e(i,u,a,c,l)}},{key:"interpolationRatio",value:function(t,n,r,i){var a=0;return"linear"===t[0]?a=e.exponentialInterpolationRatio(n,1,r,i):"exponential"===t[0]?a=e.exponentialInterpolationRatio(n,t[1],r,i):"cubic-bezier"===t[0]&&(a=Object(C.c)(t[1],t[2],t[3],t[4])(e.exponentialInterpolationRatio(n,1,r,i),1e-5)),a<0?a=0:a>1&&(a=1),a}},{key:"exponentialInterpolationRatio",value:function(e,t,n,r){var i=r-n;if(0===i)return 0;var a=e-n;return 1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}}]),e}(),J=function(){function e(t,n,r){Wt(this,e),this.type=t,this.input=n,this.stops=r}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.stops;if(1===n.length)return n[0][1].evaluate(e,t);for(var r=this.input.evaluate(e,t),i=0;++i<n.length&&!(r<n[i][0]););return this.stops[i-1][1].evaluate(e,t)}}],[{key:"parse",value:function(t,n){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');var r,i=pe(t[1],n,g),a=[];a.push([-1/0,pe(t[2],n)]);for(var o=3;o<t.length;o+=2){var s=t[o];if("number"!=typeof s)throw new Error('"step" requires stop inputs as literal numbers');if(a.length&&a[a.length-1][0]>=s)throw new Error('"step" requires strictly ascending stop inputs');var u=pe(t[o+1],n);r||(r=u.type),a.push([s,u])}return new e(r,i,a)}}]),e}(),Z=function(){function e(t,n){Wt(this,e),this.type=t,this.output=n}return Zt(e,[{key:"evaluate",value:function(e,t){return this.output.evaluate(e,t)}}],[{key:"parse",value:function(t,n,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');for(var i=new P(n),a=1;a<t.length-1;a+=2){var o=t[a];if("string"!=typeof o)throw new Error('"let" requires a string to define variable names - found '+o);i.add(o,pe(t[a+1],n))}var s=pe(t[t.length-1],i,r);return new e(s.type,s)}}]),e}(),K=function(){function e(t,n){Wt(this,e),this.type=t,this.output=n}return Zt(e,[{key:"evaluate",value:function(e,t){return this.output.evaluate(e,t)}}],[{key:"parse",value:function(t,n,r){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');var i=n.get(t[1]);if(!i)throw new Error(t[1]+' must be defined before being used in a "var" expression');return new e(r||_,i)}}]),e}(),Y=function(){function e(t,n,r){Wt(this,e),this.type=t,this.index=n,this.array=r}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.index.evaluate(e,t),r=this.array.evaluate(e,t);if(n<0||n>=r.length)throw new Error('"at" index out of bounds');if(n!==Math.floor(n))throw new Error('"at" index must be an integer');return r[n]}}],[{key:"parse",value:function(t,n){if(3!==t.length)throw new Error('"at" expects 2 arguments');var r=pe(t[1],n,g),i=pe(t[2],n);return new e(i.type.itemType,r,i)}}]),e}(),X=function(){function e(t,n){Wt(this,e),this.key=t,this.obj=n,this.type=_}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.key.evaluate(e,t);return this.obj?this.obj.evaluate(e,t)[n]:e.values[n]}}],[{key:"parse",value:function(t,n){switch(t.length){case 2:return new e(pe(t[1],n));case 3:return new e(pe(t[1],n),pe(t[2],n));default:throw new Error('"get" expects 1 or 2 arguments')}}}]),e}(),Q=function(){function e(t,n){Wt(this,e),this.key=t,this.obj=n,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.key.evaluate(e,t);return this.obj?n in this.obj.evaluate(e,t):void 0!==e.values[n]}}],[{key:"parse",value:function(t,n){switch(t.length){case 2:return new e(pe(t[1],n));case 3:return new e(pe(t[1],n),pe(t[2],n));default:throw new Error('"has" expects 1 or 2 arguments')}}}]),e}(),$=function(){function e(t,n){Wt(this,e),this.key=t,this.vals=n,this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.key.evaluate(e,t);return-1!==this.vals.evaluate(e,t).indexOf(n)}}],[{key:"parse",value:function(t,n){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new e(pe(t[1],n),pe(t[2],n))}}]),e}(),ee=function(){function e(t,n,r){Wt(this,e),this.item=t,this.array=n,this.from=r,this.type=g}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.item.evaluate(e,t),r=this.array.evaluate(e,t);if(this.from){var i=this.from.evaluate(e,t);if(i!==Math.floor(i))throw new Error('"index-of" index must be an integer');return r.indexOf(n,i)}return r.indexOf(n)}}],[{key:"parse",value:function(t,n){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');var r=pe(t[1],n),i=pe(t[2],n);return 4===t.length?new e(r,i,pe(t[3],n,g)):new e(r,i)}}]),e}(),te=function(){function e(t){Wt(this,e),this.arg=t,this.type=g}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.arg.evaluate(e,t);if("string"==typeof n)return n.length;if(Array.isArray(n))return n.length;throw new Error('"length" expects string or array')}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"length" expects 2 arguments');return new e(pe(t[1],n))}}]),e}(),ne=function(){function e(t,n,r,i){Wt(this,e),this.type=t,this.array=n,this.from=r,this.to=i}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this.array.evaluate(e,t);if(!Array.isArray(n)&&"string"!=typeof n)throw new Error('"slice" input must be an array or a string');var r=this.from.evaluate(e,t);if(r<0||r>=n.length)throw new Error('"slice" index out of bounds');if(r!==Math.floor(r))throw new Error('"slice" index must be an integer');if(this.to){var i=this.to.evaluate(e,t);if(i<0||i>=n.length)throw new Error('"slice" index out of bounds');if(i!==Math.floor(i))throw new Error('"slice" index must be an integer');return n.slice(r,i)}return n.slice(r)}}],[{key:"parse",value:function(t,n){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');var r=pe(t[1],n),i=pe(t[2],n,g);if(i.type!==g)throw new Error('"slice" index must return a number');if(4===t.length){var a=pe(t[3],n,g);if(a.type!==g)throw new Error('"slice" index must return a number');return new e(r.type,r,i,a)}return new e(r.type,r,i)}}]),e}(),re=function(){function e(){Wt(this,e),this.type=w}return Zt(e,[{key:"evaluate",value:function(e,t){return void 0!==e.id}}],[{key:"parse",value:function(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new e}}]),e}(),ie=function(){function e(t,n){Wt(this,e),this.args=t,this.calculate=n,this.type=g}return Zt(e,[{key:"evaluate",value:function(e,t){var n;return this.args&&(n=this.args.map((function(n){return n.evaluate(e,t)}))),this.calculate(n)}}],[{key:"parse",value:function(t,n,r){return new e(t.slice(1).map((function(e){return pe(e,n)})),r)}}]),e}(),ae=function(){function e(t,n){Wt(this,e),this.args=t,this.calculate=n,this.type=g}return Zt(e,[{key:"evaluate",value:function(e,t){var n;return this.args&&(n=this.args.map((function(n){return n.evaluate(e,t)}))),this.calculate(n)}}],[{key:"parse",value:function(t,n){return new e(t.slice(1).map((function(e){return pe(e,n)})),e.ops[t[0]])}}]),e}();ae.ops={abs:function(e){return Math.abs(e[0])},acos:function(e){return Math.acos(e[0])},asin:function(e){return Math.asin(e[0])},atan:function(e){return Math.atan(e[0])},ceil:function(e){return Math.ceil(e[0])},cos:function(e){return Math.cos(e[0])},e:function(){return Math.E},floor:function(e){return Math.floor(e[0])},ln:function(e){return Math.log(e[0])},ln2:function(){return Math.LN2},log10:function(e){return Math.log(e[0])/Math.LN10},log2:function(e){return Math.log(e[0])/Math.LN2},max:function(e){return Math.max.apply(Math,Bt(e))},min:function(e){return Math.min.apply(Math,Bt(e))},pi:function(){return Math.PI},round:function(e){return Math.round(e[0])},sin:function(e){return Math.sin(e[0])},sqrt:function(e){return Math.sqrt(e[0])},tan:function(e){return Math.tan(e[0])}};var oe=function(){function e(t){Wt(this,e),this.args=t,this.type=m}return Zt(e,[{key:"evaluate",value:function(e,t){return this.args.map((function(n){return n.evaluate(e,t)})).join("")}}],[{key:"parse",value:function(t,n){return new e(t.slice(1).map((function(e){return pe(e,n)})))}}]),e}(),se=function(){function e(t,n){Wt(this,e),this.arg=t,this.calculate=n,this.type=m}return Zt(e,[{key:"evaluate",value:function(e,t){return this.calculate(this.arg.evaluate(e,t))}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error(t[0]+" expects 1 argument");return new e(pe(t[1],n),e.ops[t[0]])}}]),e}();se.ops={downcase:function(e){return e.toLowerCase()},upcase:function(e){return e.toUpperCase()}};var ue=function(){function e(t){Wt(this,e),this.args=t,this.type=O}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this._validate(this.args[0].evaluate(e,t)),r=this._validate(this.args[1].evaluate(e,t)),i=this._validate(this.args[2].evaluate(e,t));return new y.a({r:n,g:r,b:i})}},{key:"_validate",value:function(e){if("number"!=typeof e||e<0||e>255)throw new Error(e+": invalid color component");return Math.round(e)}}],[{key:"parse",value:function(t,n){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');return new e(t.slice(1).map((function(e){return pe(e,n)})))}}]),e}(),ce=function(){function e(t){Wt(this,e),this.args=t,this.type=O}return Zt(e,[{key:"evaluate",value:function(e,t){var n=this._validate(this.args[0].evaluate(e,t)),r=this._validate(this.args[1].evaluate(e,t)),i=this._validate(this.args[2].evaluate(e,t)),a=this._validateAlpha(this.args[3].evaluate(e,t));return new y.a({r:n,g:r,b:i,a:a})}},{key:"_validate",value:function(e){if("number"!=typeof e||e<0||e>255)throw new Error(e+": invalid color component");return Math.round(e)}},{key:"_validateAlpha",value:function(e){if("number"!=typeof e||e<0||e>1)throw new Error(e+": invalid alpha color component");return e}}],[{key:"parse",value:function(t,n){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');return new e(t.slice(1).map((function(e){return pe(e,n)})))}}]),e}(),le=function(){function e(t){Wt(this,e),this.color=t,this.type=x(g,4)}return Zt(e,[{key:"evaluate",value:function(e,t){return new y.a(this.color.evaluate(e,t)).toRgba()}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');return new e(pe(t[1],n))}}]),e}(),he=function(){function e(t,n){Wt(this,e),this.type=t,this.args=n}return Zt(e,[{key:"evaluate",value:function(e,t){var n,r,i=Vt(this.args);try{for(i.s();!(r=i.n()).done;){var a=r.value.evaluate(e,t);if(I(n=M(a),this.type))return a}}catch(o){i.e(o)}finally{i.f()}throw new Error("Expected ".concat(S(this.type)," but got ").concat(S(n)))}}],[{key:"parse",value:function(t,n){var r=t[0];if(t.length<2)throw new Error(r+" expects at least one argument");var i,a=1;if("array"===r){if(t.length>2){switch(t[1]){case"string":i=m;break;case"number":i=g;break;case"boolean":i=w;break;default:throw new Error('"array" type argument must be string, number or boolean')}a++}else i=_;var o;if(t.length>3){if(null!==(o=t[2])&&("number"!=typeof o||o<0||o!==Math.floor(o)))throw new Error('"array" length argument must be a positive integer literal');a++}i=x(i,o)}else switch(r){case"string":i=m;break;case"number":i=g;break;case"boolean":i=w;break;case"object":i=j}for(var s=[];a<t.length;a++){var u=pe(t[a],n);s.push(u)}return new e(i,s)}}]),e}(),fe=function(){function e(t,n){Wt(this,e),this.type=t,this.args=n}return Zt(e,[{key:"evaluate",value:function(t,n){if(this.type===w)return Boolean(this.args[0].evaluate(t,n));if(this.type===m)return T(this.args[0].evaluate(t,n));if(this.type===g){var r,i=Vt(this.args);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=Number(a.evaluate(t,n));if(!isNaN(o))return o}}catch(h){i.e(h)}finally{i.f()}return null}if(this.type===O){var s,u=Vt(this.args);try{for(u.s();!(s=u.n()).done;){var c=s.value;try{var l=e.toColor(c.evaluate(t,n));if(l instanceof y.a)return l}catch(f){}}}catch(h){u.e(h)}finally{u.f()}return null}}}],[{key:"parse",value:function(t,n){var r=t[0],i=e.types[r];if(i===w||i===m){if(2!==t.length)throw new Error(r+" expects one argument")}else if(t.length<2)throw new Error(r+" expects at least one argument");for(var a=[],o=1;o<t.length;o++){var s=pe(t[o],n);a.push(s)}return new e(i,a)}},{key:"toBoolean",value:function(e){return Boolean(e)}},{key:"toString",value:function(e){return T(e)}},{key:"toNumber",value:function(e){var t=Number(e);if(isNaN(t))throw new Error('"'.concat(e,'" is not a number'));return t}},{key:"toColor",value:function(e){if(e instanceof y.a)return e;if("string"==typeof e){var t=y.a.fromString(e);if(t)return t;throw new Error('"'.concat(e,'" is not a color'))}if(Array.isArray(e))return y.a.fromArray(e);throw new Error('"'.concat(e,'" is not a color'))}}]),e}();function pe(e,t,n){var r=typeof e;if("string"===r||"boolean"===r||"number"===r||null===e){if(n)switch(n.kind){case"string":"string"!==r&&(e=fe.toString(e));break;case"number":"number"!==r&&(e=fe.toNumber(e));break;case"color":e=fe.toColor(e)}e=["literal",e]}if(!Array.isArray(e)||0===e.length)throw new Error("Expression must be a non empty array");var i=e[0];if("string"!=typeof i)throw new Error("First element of expression must be a string");var a=de[i];if(void 0===a)throw new Error('Invalid expression operator "'.concat(i,'"'));if(!a)throw new Error('Unimplemented expression operator "'.concat(i,'"'));return a.parse(e,t,n)}fe.types={"to-boolean":w,"to-color":O,"to-number":g,"to-string":m};var de={array:he,boolean:he,collator:null,format:null,image:null,literal:function(){function e(t){Wt(this,e),this.val=t,this.type=M(t)}return Zt(e,[{key:"evaluate",value:function(e,t){return this.val}}],[{key:"parse",value:function(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new e(t[1])}}]),e}(),number:he,"number-format":null,object:he,string:he,"to-boolean":fe,"to-color":fe,"to-number":fe,"to-string":fe,typeof:function(){function e(t){Wt(this,e),this.arg=t,this.type=m}return Zt(e,[{key:"evaluate",value:function(e,t){return S(M(this.arg.evaluate(e,t)))}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new e(pe(t[1],n))}}]),e}(),accumulated:null,"feature-state":null,"geometry-type":D,id:R,"line-progress":null,properties:L,at:Y,get:X,has:Q,in:$,"index-of":ee,length:te,slice:ne,"!":z,"!=":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return F.parse(e,t,(function(e,t){return e!==t}))}}]),n}(F),"<":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return F.parse(e,t,(function(e,t){return e<t}))}}]),n}(F),"<=":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return F.parse(e,t,(function(e,t){return e<=t}))}}]),n}(F),"==":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return F.parse(e,t,(function(e,t){return e===t}))}}]),n}(F),">":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return F.parse(e,t,(function(e,t){return e>t}))}}]),n}(F),">=":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return F.parse(e,t,(function(e,t){return e>=t}))}}]),n}(F),all:V,any:G,case:B,coalesce:q,match:H,within:null,interpolate:W,"interpolate-hcl":W,"interpolate-lab":W,step:J,let:Z,var:K,concat:oe,downcase:se,"is-supported-script":null,"resolved-locale":null,upcase:se,rgb:ue,rgba:ce,"to-rgba":le,"-":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){switch(e.length){case 2:return ie.parse(e,t,(function(e){return-e[0]}));case 3:return ie.parse(e,t,(function(e){return e[0]-e[1]}));default:throw new Error('"-" expects 1 or 2 arguments')}}}]),n}(ie),"*":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return ie.parse(e,t,(function(e){var t,n=1,r=Vt(e);try{for(r.s();!(t=r.n()).done;){n*=t.value}}catch(i){r.e(i)}finally{r.f()}return n}))}}]),n}(ie),"/":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){if(3===e.length)return ie.parse(e,t,(function(e){return e[0]/e[1]}));throw new Error('"/" expects 2 arguments')}}]),n}(ie),"%":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){if(3===e.length)return ie.parse(e,t,(function(e){return e[0]%e[1]}));throw new Error('"%" expects 2 arguments')}}]),n}(ie),"^":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){if(3===e.length)return ie.parse(e,t,(function(e){return Math.pow(e[0],e[1])}));throw new Error('"^" expects 1 or 2 arguments')}}]),n}(ie),"+":function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,null,[{key:"parse",value:function(e,t){return ie.parse(e,t,(function(e){var t,n=0,r=Vt(e);try{for(r.s();!(t=r.n()).done;){n+=t.value}}catch(i){r.e(i)}finally{r.f()}return n}))}}]),n}(ie),abs:ae,acos:ae,asin:ae,atan:ae,ceil:ae,cos:ae,e:ae,floor:ae,ln:ae,ln2:ae,log10:ae,log2:ae,max:ae,min:ae,pi:ae,round:ae,sin:ae,sqrt:ae,tan:ae,zoom:N,"heatmap-density":null,"has-id":re,none:U},ve=function(){function e(t){Wt(this,e),this._expression=t}return Zt(e,[{key:"filter",value:function(e,t){if(!this._expression)return!0;try{return this._expression.evaluate(e,t)}catch(n){return console.log(n.message),!0}}}],[{key:"createFilter",value:function(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{var n;return new e(pe(t,null,w))}catch(n){return console.log(n.message),null}}},{key:"isLegacyFilter",value:function(e){if(!Array.isArray(e))return!0;if(0===e.length)return!0;switch(e[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===e.length&&"string"==typeof e[1]&&!Array.isArray(e[2]);case"in":return e.length>=3&&"string"==typeof e[1]&&!Array.isArray(e[2]);case"!in":return!0;case"any":case"all":for(var t=1;t<e.length;t++)if(!this.isLegacyFilter(e[1]))return!1;return!0;case"none":return!0;case"has":return 2===e.length&&("$id"===e[1]||"$type"===e[1]);case"!has":return!0;default:return!1}}},{key:"convertLegacyFilter",value:function(t){if(!Array.isArray(t)||0===t.length)return!0;var n=t[0];if(1===t.length)return"any"!==n;switch(n){case"==":return e.convertComparison("==",t[1],t[2]);case"!=":return e.negate(e.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return e.convertComparison(n,t[1],t[2]);case"in":return e.convertIn(t[1],t.slice(2));case"!in":return e.negate(e.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return e.convertCombining(n,t.slice(1));case"has":return e.convertHas(t[1]);case"!has":return e.negate(e.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}},{key:"convertComparison",value:function(e,t,n){switch(t){case"$type":return[e,["geometry-type"],n];case"$id":return[e,["id"],n];default:return[e,["get",t],n]}}},{key:"convertIn",value:function(e,t){switch(e){case"$type":return["in",["geometry-type"],["literal",t]];case"$id":return["in",["id"],["literal",t]];default:return["in",["get",e],["literal",t]]}}},{key:"convertHas",value:function(e){switch(e){case"$type":return!0;case"$id":return["has-id"];default:return["has",e]}}},{key:"convertCombining",value:function(e,t){return[e].concat(t.map(this.convertLegacyFilter))}},{key:"negate",value:function(e){return["!",e]}}]),e}(),ye=function e(){Wt(this,e)};ye.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},ye.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},ye.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"line-cap":{type:"enum",values:["butt","round","square"],default:0},"line-join":{type:"enum",values:["bevel","round","miter"],default:2},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},ye.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:0},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:2},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:0},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[0]}},ye.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},ye.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},ye.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},ye.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"line-width":{type:"number",minimum:0,default:1}},ye.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},ye.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},ye.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};var be=function(){function e(t,n){var r;switch(Wt(this,e),this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r="number"===t.value;break;default:r=!1}if(null==n&&(n=t.default),Array.isArray(n)&&n.length>0&&de[n[0]]){var i={number:g,color:O,string:m,boolean:w,enum:m};try{var a=pe(n,null,"array"===t.type?x(i[t.value]||_,t.length):i[t.type]);this.getValue=this._buildExpression(a,t),this.isDataDriven=!0,a instanceof W&&a.input instanceof N&&(this.interpolator=a)}catch(l){console.log(l.message),this.getValue=this._buildSimple(t.default)}}else{r&&"interval"===n.type&&(r=!1);var o=n&&n.stops&&n.stops.length>0;if(o){var s,u=Vt(n.stops);try{for(u.s();!(s=u.n()).done;){var c=s.value;c[1]=this._validate(c[1],t)}}catch(h){u.e(h)}finally{u.f()}}if(this.isDataDriven=!!n&&!!n.property,this.isDataDriven)if(void 0!==n.default&&(n.default=this._validate(n.default,t)),o)switch(n.type){case"identity":this.getValue=this._buildIdentity(n,t);break;case"categorical":this.getValue=this._buildCategorical(n,t);break;default:this.getValue=r?this._buildInterpolate(n,t):this._buildInterval(n,t)}else this.getValue=this._buildIdentity(n,t);else o?this.getValue=r?this._buildZoomInterpolate(n):this._buildZoomInterval(n):(n=this._validate(n,t),this.getValue=this._buildSimple(n))}}return Zt(e,[{key:"_validate",value:function(t,n){if("number"===n.type){if(t<n.minimum)return n.minimum;if(t>n.maximum)return n.maximum}else"color"===n.type?t=e._parseColor(t):"enum"===n.type?"string"==typeof t&&(t=n.values.indexOf(t)):"array"===n.type&&"enum"===n.value?t=t.map((function(e){return"string"==typeof t?n.values.indexOf(e):e})):"string"===n.type&&(t=T(t));return t}},{key:"_buildSimple",value:function(e){return function(){return e}}},{key:"_buildExpression",value:function(e,t){var n=this;return function(r,i){try{var a=e.evaluate(i,r);return void 0===a?t.default:n._validate(a,t)}catch(a){return console.log(a.message),t.default}}}},{key:"_buildIdentity",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),void 0!==a?n._validate(a,t):void 0!==e.default?e.default:t.default}}},{key:"_buildCategorical",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),void 0!==(a=n._categorical(a,e.stops))?a:void 0!==e.default?e.default:t.default}}},{key:"_buildInterval",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),"number"==typeof a?n._interval(a,e.stops):void 0!==e.default?e.default:t.default}}},{key:"_buildInterpolate",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),"number"==typeof a?n._interpolate(a,e.stops,e.base||1):void 0!==e.default?e.default:t.default}}},{key:"_buildZoomInterpolate",value:function(e){var t=this;return function(n){return t._interpolate(n,e.stops,e.base||1)}}},{key:"_buildZoomInterval",value:function(e){var t=this;return function(n){return t._interval(n,e.stops)}}},{key:"_categorical",value:function(e,t){for(var n=t.length,r=0;r<n;r++)if(t[r][0]===e)return t[r][1]}},{key:"_interval",value:function(e,t){for(var n=t.length,r=0,i=0;i<n&&t[i][0]<=e;i++)r=i;return t[r][1]}},{key:"_interpolate",value:function(e,t,n){for(var r,i,a=t.length,o=0;o<a;o++){var s=t[o];if(!(s[0]<=e)){i=s;break}r=s}if(r&&i){var u=i[0]-r[0],c=e-r[0],l=1===n?c/u:(Math.pow(n,c)-1)/(Math.pow(n,u)-1);if(Array.isArray(r[1])){for(var h=r[1],f=i[1],p=[],d=0;d<h.length;d++)p.push(Object(E.e)(h[d],f[d],l));return p}return Object(E.e)(r[1],i[1],l)}return r?r[1]:i?i[1]:void 0}}],[{key:"_isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"_parseColor",value:function(e){return Array.isArray(e)?e:("string"==typeof e&&(e=new y.a(e)),e instanceof y.a?this._isEmpty(e)?void 0:y.a.toUnitRGBA(e):e)}}]),e}(),ge=n("jIHu"),me=function(){function e(t,n,r,i){switch(Wt(this,e),this.type=t,this.typeName=n.type,this.id=n.id,this.source=n.source,this.sourceLayer=n["source-layer"],this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,this.filter=n.filter,this.layout=n.layout,this.paint=n.paint,this.z=r,this.uid=i,t){case 0:this._layoutDefinition=ye.backgroundLayoutDefinition,this._paintDefinition=ye.backgroundPaintDefinition;break;case 1:this._layoutDefinition=ye.fillLayoutDefinition,this._paintDefinition=ye.fillPaintDefinition;break;case 2:this._layoutDefinition=ye.lineLayoutDefinition,this._paintDefinition=ye.linePaintDefinition;break;case 3:this._layoutDefinition=ye.symbolLayoutDefinition,this._paintDefinition=ye.symbolPaintDefinition;break;case 4:this._layoutDefinition=ye.circleLayoutDefinition,this._paintDefinition=ye.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return Zt(e,[{key:"getFeatureFilter",value:function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=ve.createFilter(this.filter)}},{key:"getLayoutProperty",value:function(e){return this._layoutProperties[e]}},{key:"getPaintProperty",value:function(e){return this._paintProperties[e]}},{key:"getLayoutValue",value:function(e,t,n){var r,i=this._layoutProperties[e];return i&&(r=i.getValue(t,n)),void 0===r&&(r=this._layoutDefinition[e].default),r}},{key:"getPaintValue",value:function(e,t,n){var r,i=this._paintProperties[e];return i&&(r=i.getValue(t,n)),void 0===r&&(r=this._paintDefinition[e].default),r}},{key:"isPainterDataDriven",value:function(){var e=this._paintProperties;if(e)for(var t in e)if(e[t].isDataDriven)return!0;return!1}},{key:"_parseLayout",value:function(e){var t={};for(var n in e){var r=this._layoutDefinition[n];r&&(t[n]=new be(r,e[n]))}return t}},{key:"_parsePaint",value:function(e){var t={};for(var n in e){var r=this._paintDefinition[n];r&&(t[n]=new be(r,e[n]))}return t}},{key:"computeAttributesKey",value:function(e,t){var n,r=0,i=0,a=Vt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s="icon-size"===o||"text-size"===o?this.getLayoutProperty(o):this.getPaintProperty(o);i|=(null!=s&&s.interpolator?2:null!=s&&s.isDataDriven?1:0)<<r,r+=2}}catch(u){a.e(u)}finally{a.f()}return i<<3|e}}]),e}(),we=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;return Wt(this,n),(o=t.call(this,e,r,i,a)).backgroundMaterial=new s(o.computeAttributesKey(0,s.ATTRIBUTES)),o}return n}(me),Oe=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;Wt(this,n);var s=(o=t.call(this,e,r,i,a)).getPaintProperty("fill-color"),u=o.getPaintProperty("fill-opacity"),h=o.getPaintProperty("fill-pattern");o.hasDataDrivenColor=null==s?void 0:s.isDataDriven,o.hasDataDrivenOpacity=null==u?void 0:u.isDataDriven,o.hasDataDrivenFill=o.hasDataDrivenColor||o.hasDataDrivenOpacity||(null==h?void 0:h.isDataDriven);var f=o.getPaintProperty("fill-outline-color");return o.outlineUsesFillColor=!f,o.hasDataDrivenOutlineColor=null==f?void 0:f.isDataDriven,o.hasDataDrivenOutline=f?f.isDataDriven:!!s&&s.isDataDriven,o.hasDataDrivenOutline=(f?o.hasDataDrivenOutlineColor:o.hasDataDrivenColor)||o.hasDataDrivenOpacity,o.fillMaterial=new c(o.computeAttributesKey(1,c.ATTRIBUTES)),o.outlineMaterial=new l(o.computeAttributesKey(2,o.outlineUsesFillColor?l.ATTRIBUTES_FILL:l.ATTRIBUTES_OUTLINE),o.outlineUsesFillColor),o}return n}(me),je=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o,s,u,c,l,f,p,d;Wt(this,n),(o=t.call(this,e,r,i,a)).lineMaterial=new h(o.computeAttributesKey(3,h.ATTRIBUTES)),o.hasDataDrivenLine=(null==(s=o.getPaintProperty("line-blur"))?void 0:s.isDataDriven)||(null==(u=o.getPaintProperty("line-color"))?void 0:u.isDataDriven)||(null==(c=o.getPaintProperty("line-gap-width"))?void 0:c.isDataDriven)||(null==(l=o.getPaintProperty("line-offset"))?void 0:l.isDataDriven)||(null==(f=o.getPaintProperty("line-opacity"))?void 0:f.isDataDriven)||(null==(p=o.getPaintProperty("line-pattern"))?void 0:p.isDataDriven)||(null==(d=o.getPaintProperty("line-width"))?void 0:d.isDataDriven);var v=r.paint["line-width"];v||(v=ye.linePaintDefinition["line-width"].default);var y=o.getPaintProperty("line-width");return o.isThinLine=!(null!=y&&y.isDataDriven)&&"number"==typeof v&&v<ge.D,o}return n}(me),_e=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o,s,u,c,l,h,f,p,y,b,g,m,w;return Wt(this,n),(o=t.call(this,e,r,i,a)).iconMaterial=new d(o.computeAttributesKey(4,d.ATTRIBUTES)),o.textMaterial=new v(o.computeAttributesKey(6,v.ATTRIBUTES)),o.hasDataDrivenIcon=(null==(s=o.getPaintProperty("icon-color"))?void 0:s.isDataDriven)||(null==(u=o.getPaintProperty("icon-halo-blur"))?void 0:u.isDataDriven)||(null==(c=o.getPaintProperty("icon-halo-color"))?void 0:c.isDataDriven)||(null==(l=o.getPaintProperty("icon-halo-width"))?void 0:l.isDataDriven)||(null==(h=o.getPaintProperty("icon-opacity"))?void 0:h.isDataDriven)||(null==(f=o.getLayoutProperty("icon-size"))?void 0:f.isDataDriven),o.hasDataDrivenText=(null==(p=o.getPaintProperty("text-color"))?void 0:p.isDataDriven)||(null==(y=o.getPaintProperty("text-halo-blur"))?void 0:y.isDataDriven)||(null==(b=o.getPaintProperty("text-halo-color"))?void 0:b.isDataDriven)||(null==(g=o.getPaintProperty("text-halo-width"))?void 0:g.isDataDriven)||(null==(m=o.getPaintProperty("text-opacity"))?void 0:m.isDataDriven)||(null==(w=o.getLayoutProperty("text-size"))?void 0:w.isDataDriven),o}return n}(me),xe=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;return Wt(this,n),(o=t.call(this,e,r,i,a)).circleMaterial=new u(o.computeAttributesKey(5,u.ATTRIBUTES)),o}return n}(me),ke=function(){function e(t,n,r){var i,a,o,s,u,c;Wt(this,e),this.allowOverlap=t.getLayoutValue("icon-allow-overlap",n),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",n),this.keepUpright=t.getLayoutValue("icon-keep-upright",n),this.optional=t.getLayoutValue("icon-optional",n),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1),null!=(i=c=t.getLayoutProperty("icon-anchor"))&&i.isDataDriven?this._anchorProp=c:this.anchor=t.getLayoutValue("icon-anchor",n),null!=(a=c=t.getLayoutProperty("icon-offset"))&&a.isDataDriven?this._offsetProp=c:this.offset=t.getLayoutValue("icon-offset",n),null!=(o=c=t.getLayoutProperty("icon-padding"))&&o.isDataDriven?this._paddingProp=c:this.padding=t.getLayoutValue("icon-padding",n),null!=(s=c=t.getLayoutProperty("icon-rotate"))&&s.isDataDriven?this._rotateProp=c:this.rotate=t.getLayoutValue("icon-rotate",n),null!=(u=c=t.getLayoutProperty("icon-size"))&&u.isDataDriven?this._sizeProp=c:this.size=t.getLayoutValue("icon-size",n)}return Zt(e,[{key:"update",value:function(e,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,t)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,t)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,t)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,t)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,t))}}]),e}(),Se=function(){function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,v;Wt(this,e),this.allowOverlap=t.getLayoutValue("text-allow-overlap",n),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",n),this.keepUpright=t.getLayoutValue("text-keep-upright",n),this.optional=t.getLayoutValue("text-optional",n),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1),null!=(i=v=t.getLayoutProperty("text-anchor"))&&i.isDataDriven?this._anchorProp=v:this.anchor=t.getLayoutValue("text-anchor",n),null!=(a=v=t.getLayoutProperty("text-justify"))&&a.isDataDriven?this._justifyProp=v:this.justify=t.getLayoutValue("text-justify",n),null!=(o=v=t.getLayoutProperty("text-letter-spacing"))&&o.isDataDriven?this._letterSpacingProp=v:this.letterSpacing=t.getLayoutValue("text-letter-spacing",n),null!=(s=v=t.getLayoutProperty("text-line-height"))&&s.isDataDriven?this._lineHeightProp=v:this.lineHeight=t.getLayoutValue("text-line-height",n),null!=(u=v=t.getLayoutProperty("text-max-angle"))&&u.isDataDriven?this._maxAngleProp=v:this.maxAngle=t.getLayoutValue("text-max-angle",n),null!=(c=v=t.getLayoutProperty("text-max-width"))&&c.isDataDriven?this._maxWidthProp=v:this.maxWidth=t.getLayoutValue("text-max-width",n),null!=(l=v=t.getLayoutProperty("text-offset"))&&l.isDataDriven?this._offsetProp=v:this.offset=t.getLayoutValue("text-offset",n),null!=(h=v=t.getLayoutProperty("text-padding"))&&h.isDataDriven?this._paddingProp=v:this.padding=t.getLayoutValue("text-padding",n),null!=(f=v=t.getLayoutProperty("text-rotate"))&&f.isDataDriven?this._rotateProp=v:this.rotate=t.getLayoutValue("text-rotate",n),null!=(p=v=t.getLayoutProperty("text-size"))&&p.isDataDriven?this._sizeProp=v:this.size=t.getLayoutValue("text-size",n),null!=(d=v=t.getLayoutProperty("text-writing-mode"))&&d.isDataDriven?this._writingModeProp=v:this.writingMode=t.getLayoutValue("text-writing-mode",n)}return Zt(e,[{key:"update",value:function(e,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,t)),this._justifyProp&&(this.justify=this._justifyProp.getValue(e,t)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(e,t)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(e,t)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(e,t)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(e,t)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,t)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,t)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,t)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,t)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(e,t))}}]),e}()},IpYs:function(e,t,n){"use strict";var r=n("9aYe"),i=function(e){this.data=new Uint8Array(e),this.index=0};i.prototype={append:function(e){0!==e.length&&(e=r.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},e.exports=i},IvSi:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return d}));var r=n("TDcG"),i=n("/PL2"),a=n("xHih"),o=n("WZb1"),s=n("OvF4"),u=n("Qr4e"),c=n("ZYtI"),l=n("/RTN"),h={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;Object(r.a)(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,n,r){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||Object(a.a)(this,"screenSizePerspectiveEnabled",{},r))&&(t[n]=e)}}}}}},f={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:function(e,t){return!t.disablePopup}},write:{enabled:!0,writer:function(e,t,n){t[n]=!e}}}},p={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},d={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:i.f}}},v={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},y={value:null,type:l.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function b(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}var g={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},m=Nt(Nt({},g),{},{json:Nt(Nt({},g.json),{},{origins:{"web-document":Nt(Nt({},g.json.origins["web-document"]),{},{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,n){return n&&"service"!==n.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(u.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(u.b)(t.drawingInfo.transparency)}}})}),w={type:c.a,readOnly:!0,get:function(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;var n=null==(t=this.view)?void 0:t.timeExtent,r=this.layer.timeExtent,i=this.layer.useViewTime?n&&r?n.intersection(r):n||r:r;if(!i||i.isEmpty)return i;var a=this.layer.timeOffset,o=a?i.offset(-a.value,a.unit):i,s=this._get("timeExtent");return o.equals(s)?s:o}},O={type:s.a,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:function(e,t){var n=s.a.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(n.spatialReference=o.a.fromJSON(t.spatialReference)),n}}}},read:!1}},j={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},_={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},x={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},J3K2:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.render}function i(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n("cCpn"),n("h1D1"),n("dV4Z"),n("wSAH"),n("6S2I"),n("4gt3"),n("/quj"),n("Jv1m")},J7T7:function(e,t){function n(e,t){return function(n){var o,s=n.features.filter((o=e,function(e){return e.geometry.type===o}));return{geometries:s.map("POLYGON"===t||"POLYLINE"===t?i:r),properties:s.map(a),type:t}}}function r(e){return void 0!==e.geometry.coordinates[0]&&void 0!==e.geometry.coordinates[0][0]&&void 0!==e.geometry.coordinates[0][0][0]?e.geometry.coordinates[0]:e.geometry.coordinates}function i(e){return void 0!==e.geometry.coordinates[0]&&void 0!==e.geometry.coordinates[0][0]&&void 0!==e.geometry.coordinates[0][0][0]?[e.geometry.coordinates[0]]:[e.geometry.coordinates]}function a(e){return e.properties}e.exports.point=n("Point","POINT"),e.exports.line=n("LineString","POLYLINE"),e.exports.polygon=n("Polygon","POLYGON")},"J9+3":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("zm0L"),i=n("aunz"),a=n("Z35e"),o=n("NPIS"),s=n("srIe"),u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Wt(this,e),this.editGeometry=t,this.removedVertices=null,this._minNumberOfVertices=0,this.vertices=n,this._minNumberOfVertices=r}return Zt(e,[{key:"apply",value:function(){var e=this,t="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach((function(t){var n=e._removeVertex(t);Object(s.k)(n)&&e.removedVertices.push(n)})),t="apply"):this.removedVertices.forEach((function(t){e._redoRemoveVertex(t)})),this.editGeometry.emit("change",{removedVertices:this.vertices,operation:t})}},{key:"undo",value:function(){var e=this;this.removedVertices.forEach((function(t){e._undoRemoveVertex(t)})),this.editGeometry.emit("change",{addedVertices:this.vertices,operation:"undo"})}},{key:"accumulate",value:function(e){return!1}},{key:"_removeVertex",value:function(e){var t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;var n={removedVertex:e,createdEdge:null},r=e.left,a=e.right;return t.vertices.splice(t.vertices.indexOf(e),1),r&&(t.edges.splice(t.edges.indexOf(r),1),r.left.right=null),a&&(t.edges.splice(t.edges.indexOf(a),1),a.right.left=null),0===e.index&&a&&this.vertices.length>0&&t.swapVertices(t.vertices.indexOf(a.right),0),r&&a&&(n.createdEdge=new i.b(t,r.left,a.right),t.edges.push(n.createdEdge)),a&&t.updateVertexIndex(a.right,a.right.index-1),n}},{key:"_redoRemoveVertex",value:function(e){console.warn("redo remove vertex not implemented yet")}},{key:"_undoRemoveVertex",value:function(e){var t=e.removedVertex,n=e.removedVertex.component,r=t.left,i=t.right;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(t),r&&(n.edges.push(r),r.left.right=r),i&&(n.edges.push(i),i.right.left=i),n.updateVertexIndex(t,t.index)}}]),e}(),c=function(){function e(t,n,r){Wt(this,e),this.editGeometry=t,this.edge=n,this.t=r,this.createdVertex=null,this.left=null,this.right=null}return Zt(e,[{key:"apply",value:function(){var e="redo",t=this.edge,n=t.component,r=t.component.data,a=t.left,o=t.right;n.edges.splice(n.edges.indexOf(t),1),Object(s.j)(this.createdVertex)&&(e="apply",this.createdVertex=new i.d(t.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=r.coordinateHelper.lerp(t.left.pos,t.right.pos,this.t,r.coordinateHelper.createNew()),Object(s.j)(this.left)&&(this.left=new i.b(n,a,this.createdVertex)),this.left.left.left?n.edges.push(this.left):n.edges.unshift(this.left),a.right=this.left,Object(s.j)(this.right)&&(this.right=new i.b(n,this.createdVertex,o)),n.edges.push(this.right),o.left=this.right,n.updateVertexIndex(this.createdVertex,a.index+1),this.editGeometry.emit("change",{addedVertices:[this.createdVertex],operation:e})}},{key:"undo",value:function(){if(Object(s.j)(this.createdVertex)||Object(s.j)(this.left)||Object(s.j)(this.right))return null;var e=this.edge,t=e.component,n=this.createdVertex.left.left,r=this.createdVertex.right.right;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this.left),1),t.edges.splice(t.edges.indexOf(this.right),1),this.edge.left.left?t.edges.push(this.edge):t.edges.unshift(this.edge),n.right=e,r.left=e,t.updateVertexIndex(n,n.index),this.editGeometry.emit("change",{removedVertices:[this.createdVertex],operation:"undo"})}},{key:"accumulate",value:function(e){return!1}}]),e}(),l=n("FXzB"),h=n("4eAd"),f=n("+9DA"),p=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this)).editGeometry=e,i.type=r,i._geometry=null,i._dirty=!0,i._listener=i.editGeometry.on("change",(function(e){e.addedVertices&&i.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&i.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&i.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation}),i._dirty=!0})),i}return Zt(n,[{key:"destroy",value:function(){this._listener.remove()}},{key:"splitEdge",value:function(e,t){var n=new c(this.editGeometry,e,t);return this.editGeometry.apply(n),n}},{key:"updateVertices",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new o.b(this.editGeometry,e,t);return this.editGeometry.apply(r,n),r}},{key:"moveVertices",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return this.updateVertices(e,new l.a(this.editGeometry.coordinateHelper,t,n,r),i)}},{key:"scaleVertices",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return this.updateVertices(e,new f.a(this.editGeometry.coordinateHelper,t,n,r,i,o),a)}},{key:"rotateVertices",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.updateVertices(e,new h.a(this.editGeometry.coordinateHelper,t,n,i),r)}},{key:"removeVertices",value:function(e){var t=0;switch(this.type){case"point":t=1;break;case"polyline":t=2;break;case"polygon":t=3}var n=new u(this.editGeometry,e,t);return this.editGeometry.apply(n),n}},{key:"appendVertex",value:function(e){if(0===this.editGeometry.components.length)return null;var t=new a.a(this.editGeometry,this.editGeometry.components[0],e);return this.editGeometry.apply(t),t}},{key:"canRemoveVertex",value:function(){var e=0;switch(this.type){case"point":e=1;break;case"polyline":e=2;break;case"polygon":e=3}return this.editGeometry.components[0].vertices.length>e}},{key:"undo",value:function(){return this.editGeometry.undo()}},{key:"canUndo",get:function(){return this.editGeometry.canUndo}},{key:"redo",value:function(){return this.editGeometry.redo()}},{key:"canRedo",get:function(){return this.editGeometry.canRedo}},{key:"geometry",get:function(){if(this._dirty){switch(this.type){case"point":this._geometry=this.editGeometry.toPoint();break;case"polyline":this._geometry=this.editGeometry.toPolyline();break;case"polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}}]),n}(r.a)},JAyX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("wSAH");var r=n("srIe"),i=n("tI4m"),a=n("9AiD");function o(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;var n=e.geometry;if(Object(r.j)(n))return 2;switch(n.type){case"polygon":if(n instanceof i.a)return 3;break;case"polyline":break;case"point":case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(a.e)(e)&&Object(a.g)(e)?4:0}},"JD/0":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n("wSAH");var r=n("srIe"),i=n("9AiD");function a(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(r.j)(e.geometry))return 2;switch(e.geometry.type){case"polygon":case"point":case"polyline":break;case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(i.e)(e)&&Object(i.g)(e)?4:0}},JSRQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("nR38"),i=n("dL0i");function a(e,t){var n;if(t.write&&!t.write.writer&&(!1!==t.write.enabled||t.write.overridePolicy)){var a,s=null!=(n=null==e?void 0:e.ndimArray)?n:0;t.write.writer=e&&(1===s||"type"in e&&Object(i.a)(e.type))?c:s>1?(a=s,function(e,t,n,i){var o;if(null===e)o=null;else{o=l(e,i,a);for(var s=a,u=o;s>0&&Array.isArray(u);)s--,u=u[0];if(void 0!==u)for(var c=0;c<s;c++)o=[o]}Object(r.c)(n,o,t)}):o}}function o(e,t,n,i){Object(r.c)(n,s(e,i),t)}function s(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?u(e):e}function u(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function c(e,t,n,i){var a;null===e?a=null:e&&"function"==typeof e.map?"function"==typeof(a=e.map((function(e){return s(e,i)}))).toArray&&(a=a.toArray()):a=[s(e,i)],Object(r.c)(n,a,t)}function l(e,t,n){return 0!==n&&Array.isArray(e)?e.map((function(e){return l(e,t,n-1)})):s(e,t)}},JV2H:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("nR38"),i=n("s7YA"),a=n("6S2I"),o=n("RlM3"),s=n("IeLS"),u=a.a.getLogger("esri.intl");function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.format,o=void 0===a?{}:a;return Object(i.c)(e,(function(e){return function(e,t,n){var i,a,o=e.indexOf(":");if(-1===o?i=e.trim():(i=e.slice(0,o).trim(),a=e.slice(o+1).trim()),!i)return"";var s=Object(r.b)(i,t);if(null==s)return"";var u=n[a]||n[i];return u?l(s,u):a?h(s,a):f(s)}(e,t,o)}))}function l(e,t){switch(t.type){case"date":return Object(o.b)(e,t.intlOptions);case"number":return Object(s.b)(e,t.intlOptions);default:return u.warn("missing format descriptor for key {key}"),f(e)}}function h(e,t){switch(t.toLowerCase()){case"dateformat":return Object(o.b)(e);case"numberformat":return Object(s.b)(e);default:return u.warn("inline format is unsupported since 4.12: "+t),/^(dateformat|datestring)/i.test(t)?Object(o.b)(e):/^numberformat/i.test(t)?Object(s.b)(e):f(e)}}function f(e){switch(typeof e){case"string":return e;case"number":return Object(s.b)(e);case"boolean":return""+e;default:return e instanceof Date?Object(o.b)(e):""}}},JYLa:function(e,t,n){"use strict";var r=n("9MzC"),i=n("llFo"),a=n("rlSK");t.a=function(){function e(t){if(Wt(this,e),t instanceof i.a)this._tilemapCache=t;else{if(!t||!("index"in t))throw new Error("Invalid tilemap!");this._tilemap=t.index}}return Zt(e,[{key:"dataKey",value:function(e,t){if(this._tilemapCache){var n=e.level,i=e.row,o=e.col,s=new a.a(e);return this._tilemapCache.fetchAvailabilityUpsample(n,i,o,s,t).then((function(){return s.world=e.world,s})).catch((function(e){if(Object(r.m)(e))throw e;return null}))}return this._getIndexedDataKey(e)}},{key:"forEach",value:function(e,t,n,r,i){this._callback=i,this._maxLevel=t+e,this._forEach(this._tilemap,t,n,r)}},{key:"_forEach",value:function(e,t,n,r){0!==e&&(this._callback(t,n,r),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*n,2*r),this._forEach(e[1],t+1,2*n,2*r+1),this._forEach(e[2],t+1,2*n+1,2*r),this._forEach(e[3],t+1,2*n+1,2*r+1)))}},{key:"_getIndexedDataKey",value:function(e){var t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);for(var n=e;0!==n.level;)n=new a.a(n.level-1,n.row>>1,n.col>>1,n.world),t.push(n);var r,i,o=this._tilemap,s=t.pop();if(1===o)return Promise.resolve(s);for(;t.length;)if(i=(1&(r=t.pop()).col)+((1&r.row)<<1),o){if(0===o[i]){s=null;break}if(1===o[i]){s=r;break}s=r,o=o[i]}return Promise.resolve(s)}}]),e}()},JYnY:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),u=n("jKdI"),c=n("dn0f"),l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,!0))._onChange=e,r._value="mouse",r.registerIncoming("pointer-down",(function(e){r._setValue("touch"===e.data.native.pointerType?"touch":"mouse")})),r._moveHandler=r.registerIncoming("pointer-move",(function(e){r._setValue("touch"===e.data.native.pointerType?"touch":"mouse")})),r._moveHandler.pause(),r}return Zt(n,[{key:"_setValue",value:function(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e))}}]),n}(n("cWSj").a),h=i.a.getLogger("esri.views.input.InputManager"),f=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._pointerCaptures=new Map,r._nameToGroup={},r._handlers=[],r._currentPropagation=null,r._sourceEvents=new Set,r._keyModifiers=new Set,r._activeKeyModifiers=new Set,r._stoppedPropagationEventIds=new Set,r.primaryKey=c.c,r.latestPointerType="mouse",r.test={timestamp:void 0,hasCurrentPropagation:function(){return!!r._currentPropagation}},r}return Zt(n,[{key:"initialize",value:function(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}},{key:"destroy",value:function(){for(var e=0,t=Object.keys(this._nameToGroup);e<t.length;e++){var n=t[e];this.uninstallHandlers(n)}this.eventSource=null,this._currentPropagation=null}},{key:"hasPendingInputs",get:function(){return this._handlers.some((function(e){return e.handler.hasPendingInputs}))}},{key:"installHandlers",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.INTERNAL;if(this._nameToGroup[e])h.error("There is already an InputHandler group registered under the name `"+e+"`");else if(0!==t.length){var i={name:e,handlers:t.map((function(e){return{handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}}))};this._nameToGroup[e]=i;for(var a=function(e){var t=i.handlers[e];n._handlers.push(t),t.handler.onInstall({updateDependencies:function(){n.updateDependencies()},emit:function(e,r,i,a,o){n._emitInputEvent(t.priorityIndex+1,e,r,i,o,a)},setPointerCapture:function(e,r){n._setPointerCapture(i,t,e,r)},setEventCallback:function(e){t.eventCallback=e},setUninstallCallback:function(e){t.uninstallCallback=e},refreshHasPendingInputs:function(){n.notifyChange("hasPendingInputs")}})},o=i.handlers.length-1;o>=0;o--)a(o);this.updateDependencies()}else h.error("Can't register a group of zero handlers")}},{key:"uninstallHandlers",value:function(e){var t=this._nameToGroup[e];t?(t.handlers.forEach((function(e){e.removed=!0,e.uninstallCallback()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):h.error("There is no InputHandler group registered under the name `"+e+"`")}},{key:"hasHandlers",value:function(e){return void 0!==this._nameToGroup[e]}},{key:"updateDependencies",value:function(){var e=new Set,t=new Set;this._handlersPriority=[];for(var n=this._handlers.length-1;n>=0;n--){var r=this._handlers[n];r.priorityIndex=n,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(var i=this._handlersPriority.length-1;i>=0;i--){var a=this._handlersPriority[i];a.priorityIndex=i;var o=a.handler.hasSideEffects;if(!o){var s,u=Vt(a.handler.outgoingEventTypes);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(e.has(l)){o=!0;break}}}catch(b){u.e(b)}finally{u.f()}}if(o){var h,f=Vt(a.handler.incomingEventMatches);try{for(f.s();!(h=f.n()).done;){var p=h.value;e.add(p.eventType);var d,v=Vt(p.keyModifiers);try{for(v.s();!(d=v.n()).done;){var y=d.value;Object(c.b)(y)||t.add(y)}}catch(b){v.e(b)}finally{v.f()}}}catch(b){f.e(b)}finally{f.f()}}a.active=o}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}},{key:"_setLatestPointerType",value:function(e){this._set("latestPointerType",e)}},{key:"_onEventReceived",value:function(e,t){"pointer-capture-lost"===e&&this._pointerCaptures.delete(t.native.pointerId),this._updateKeyModifiers(e,t),this._emitInputEventFromSource(e,t,null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,t.native?t.native.cancelable:void 0)}},{key:"_updateKeyModifiers",value:function(e,t){var n=this;if(t){var r=!1,i=function(){if(!r){var e=new Set;n._activeKeyModifiers.forEach((function(t){e.add(t)})),n._activeKeyModifiers=e,r=!0}},a=function(e,t){t&&!n._activeKeyModifiers.has(e)?(i(),n._activeKeyModifiers.add(e)):!t&&n._activeKeyModifiers.has(e)&&(i(),n._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){var o=t.key;this._keyModifiers.has(o)&&a(o,"key-down"===e)}var s=t.native;a("Alt",!(!s||!s.altKey)),a("Ctrl",!(!s||!s.ctrlKey)),a("Shift",!(!s||!s.shiftKey)),a("Meta",!(!s||!s.metaKey)),a("Primary",this._activeKeyModifiers.has(this.primaryKey))}}},{key:"_installRecognizers",value:function(){var e=this;this._latestPointerTypeHandler=new l((function(t){return e._setLatestPointerType(t)})),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,d.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],d.INTERNAL)}},{key:"_setPointerCapture",value:function(e,t,n,r){var i=e.name+"-"+t.priorityIndex,a=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,a),r?(a.add(i),1===a.size&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):a.has(i)&&(a.delete(i),0===a.size&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}},{key:"_garbageCollectRemovedHandlers",value:function(){this._handlers=this._handlers.filter((function(e){return!e.removed})),this.updateDependencies()}},{key:"_emitInputEventFromSource",value:function(e,t,n,r){this._emitInputEvent(0,e,t,n,r)}},{key:"_emitInputEvent",value:function(e,t,n,r,i,a){var o=void 0!==r?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),s={event:new p(t,n,o,a||this._activeKeyModifiers,void 0!==i&&i),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(s):this._doNewPropagation(s)}},{key:"_doNewPropagation",value:function(e){this._currentPropagation={events:new u.a,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}},{key:"_continuePropagation",value:function(){var e=this,t=this._currentPropagation;if(t){for(;this._currentPropagation.events.length>0;){var n=this._currentPropagation.events.pop(),r=n.event,i=n.priorityIndex,a=r.data&&r.data.eventId;if(null==a||!this._stoppedPropagationEventIds.has(a))for(t.currentHandler=this._handlersPriority[i];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!r.shouldStopPropagation()&&t.currentHandler.eventCallback(r),r.shouldStopPropagation()){null!=a&&this._stoppedPropagationEventIds.add(a);break}if(r.shouldPausePropagation((function(){return e._continuePropagation()})))return void this._pausePropagation({event:r,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null}}},{key:"_pausePropagation",value:function(e){var t=new u.a;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}},{key:"_compareHandlerPriority",value:function(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;var n,r=Vt(e.handler.incomingEventMatches);try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=Vt(t.handler.incomingEventMatches);try{var s=function(){var e=i.value;if(a.eventType!==e.eventType)return"continue";var t=a.keyModifiers.filter((function(t){return-1!==e.keyModifiers.indexOf(t)}));return t.length===a.keyModifiers.length!=(t.length===e.keyModifiers.length)?{v:a.keyModifiers.length>e.keyModifiers.length?-1:1}:void 0};for(o.s();!(i=o.n()).done;){var u=s();if("continue"!==u&&"object"==typeof u)return u.v}}catch(c){o.e(c)}finally{o.f()}}}catch(c){r.e(c)}finally{r.f()}return e.priorityIndex>t.priorityIndex?-1:1}},{key:"_sortHandlersPriority",value:function(e){var t,n=[],r=Vt(e);try{for(r.s();!(t=r.n()).done;){for(var i=t.value,a=0;a<n.length&&this._compareHandlerPriority(i,n[a])>=0;)a++;n.splice(a,0,i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"debug",get:function(){var e=this,t=function(t){var n=e._setPointerCapture;e._setPointerCapture=function(){},t(),e._setPointerCapture=n};return{injectEvent:function(n,r){t((function(){e._onEventReceived(n,r)}))},disablePointerCapture:t}}}]),n}(s.a);Object(r.a)([Object(a.b)({readOnly:!0})],f.prototype,"hasPendingInputs",null),Object(r.a)([Object(a.b)()],f.prototype,"eventSource",void 0),Object(r.a)([Object(a.b)()],f.prototype,"recognizers",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],f.prototype,"latestPointerType",void 0),f=Object(r.a)([Object(o.a)("esri.views.input.InputManager")],f);var p=function(){function e(t,n,r,i,a){Wt(this,e),this.type=t,this.data=n,this.timestamp=r,this.modifiers=i,this.cancelable=a,this._propagationState=0,this._resumeCallback=null}return Zt(e,[{key:"stopPropagation",value:function(){this._propagationState|=1}},{key:"shouldStopPropagation",value:function(){return 0!=(1&this._propagationState)}},{key:"async",value:function(e){var t=this;this._propagationState|=2;var n=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){t._propagationState&=-3;var r=t._resumeCallback;if(t._resumeCallback=null,r&&r(),n)throw e;return e}));return("function"==typeof e?e():e).then((function(e){return n(e,!1)}),(function(e){return n(e,!0)}))}},{key:"shouldPausePropagation",value:function(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}},{key:"preventDefault",value:function(){this.data.native.preventDefault()}}]),e}(),d={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}},JhoD:function(e,t,n){"use strict";n.r(t);var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=n("s7YA"),u=n("6S2I"),c=(n("zqDF"),n("WbKI")),l=n("04ZG"),h=n("Cduq"),f=n("zlDU"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),d=n("gvqN"),v=n("wdpY"),y=n("nvBr"),b=n("TKwc"),g=n("Lqtk"),m=n("ZnuT"),w=n("vk02"),O=n("wk6I"),j=u.a.getLogger("esri.renderers.DictionaryRenderer"),_={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},x=r=function(e){Kt(h,e);var t,n,i,u,c,l=Xt(h);function h(e){var t;return Wt(this,h),(t=l.call(this,e))._ongoingRequests=new Map,t._symbolCache=new O.a(100),t.config=null,t.fieldMap=null,t.scaleExpression=null,t.scaleExpressionTitle=null,t.url=null,t.type="dictionary",t}return Zt(h,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,n,r){null!=r&&r.origin||Dt(en(h.prototype),"writeVisualVariables",this).call(this,e,t,n,r)}},{key:"clone",value:function(){return new r({config:Object(a.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(a.a)(this.fieldMap),url:Object(a.a)(this.url),visualVariables:Object(a.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:(c=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,u,c,l,h,f,d,v,b,g,m,w,O,j,_,x,k,S,M,I,T,A,C,E=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(n)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:r=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(p.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(i={},this.fieldMap){a=Vt(this._symbolFields);try{for(a.s();!(u=a.n()).done;)c=u.value,l=this.fieldMap[c],i[c]=l&&null!=t.attributes[l]?""+t.attributes[l]:""}catch(P){a.e(P)}finally{a.f()}}if((h=r(i,n))&&"string"==typeof h){e.next=16;break}return e.abrupt("return",null);case 16:if(f=Object(s.b)(h).toString(),!(d=this._symbolCache.get(f))){e.next=19;break}return e.abrupt("return",(d.catch((function(){E._symbolCache.pop(f)})),d));case 19:v=h.split(";"),b=[],g=[],m=Vt(v);try{for(m.s();!(w=m.n()).done;)if((O=w.value)&&0!==O.length)if(-1===O.indexOf("po:"))if(-1!==O.indexOf("|")){j=Vt(O.split("|"));try{for(j.s();!(_=j.n()).done;)x=_.value,this._itemNames.has(x)&&b.push(x)}catch(P){j.e(P)}finally{j.f()}}else this._itemNames.has(O)&&b.push(O);else 3===(k=O.substr(3).split("|")).length&&(S=k[0],M=k[1],I=k[2],"DashTemplate"===M?I=I.split(" ").map((function(e){return Number(e)})):"Color"===M?(T=new y.a(I).toRgba(),I=[T[0],T[1],T[2],255*T[3]]):I=Number(I),g.push({primitiveName:S,propertyName:M,value:I}))}catch(P){m.e(P)}finally{m.f()}return A=!Object(o.k)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,C=this._cimPartsToCIMSymbol(b,g,A,n),e.abrupt("return",(this._symbolCache.put(f,C,1),C));case 24:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e,t){return c.apply(this,arguments)})},{key:"collectRequiredFields",value:(u=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,n);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(v.a)(t,n,this.scaleExpression);case 6:for(i in r=n.map((function(e){return e.name})),this.fieldMap)r.indexOf(this.fieldMap[i])<0||t.add(this.fieldMap[i]);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:(i=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,l,h,p,v,y,b,m,w,O,_,x=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void j.error("no valid URL!"));case 4:return n=Object(o.k)(t)?t.abortOptions:null,r=Object(g.default)(this.url+"/resources/styles/dictionary-info.json",Nt({responseType:"json",query:{f:"json"}},n)),e.next=8,Promise.all([r,Object(d.e)()]);case 8:if(i=e.sent,a=zt(i,1),s=a[0].data){e.next=13;break}throw this._dictionaryPromise=null,new f.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(u=s.expression,c=s.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(s.itemsNames),this._symbolFields=c.symbol,l={},this.config)for(p in h=this.config)l[p]=h[p];if(c.configuration){v=Vt(c.configuration);try{for(v.s();!(y=v.n()).done;)b=y.value,l.hasOwnProperty(b.name)||(l[b.name]=b.value)}catch(k){v.e(k)}finally{v.f()}}if(m=[],Object(o.k)(t)&&t.fields&&this.fieldMap){w=Vt(this._symbolFields);try{for(_=function(){var e=O.value,n=x.fieldMap[e],r=t.fields.filter((function(e){return e.name===n}));r.length>0&&m.push(Nt(Nt({},r[0]),{},{name:e}))},w.s();!(O=w.n()).done;)_()}catch(k){w.e(k)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(d.b)(u,Object(o.k)(t)?t.spatialReference:null,m,l).then((function(e){var t={scale:0};return function(n,r){var i=e.repurposeFeature({geometry:null,attributes:n});return t.scale=Object(o.k)(r)?r.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((function(e){return j.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=Object(g.default)(r,Nt({responseType:"json",query:{f:"json"}},n)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e,t){return n.apply(this,arguments)})},{key:"_combineSymbolParts",value:function(e,t,n){if(!e||0===e.length)return null;var r=Nt({},e[0]);if(e.length>1){r.symbolLayers=[];var i,a=Vt(e);try{for(a.s();!(i=a.n()).done;){var o,s=i.value;(o=r.symbolLayers).unshift.apply(o,Bt(s.symbolLayers))}}catch(u){a.e(u)}finally{a.f()}}return n&&(r.callout=_),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new Array(t.length),o=0;o<t.length;o++)a[o]=this._getSymbolPart(t[o],i);return e.next=4,Promise.all(a);case 4:return s=e.sent,e.abrupt("return",new b.a({data:this._combineSymbolParts(s,n,r)}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})}]),h}(Object(w.a)(m.a));Object(i.a)([Object(c.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],x.prototype,"config",void 0),Object(i.a)([Object(c.b)({type:Object,json:{write:!0}})],x.prototype,"fieldMap",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],x.prototype,"scaleExpression",void 0),Object(i.a)([Object(h.a)("scaleExpression")],x.prototype,"writeData",null),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],x.prototype,"scaleExpressionTitle",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"url",void 0),Object(i.a)([Object(h.a)("visualVariables")],x.prototype,"writeVisualVariables",null),x=r=Object(i.a)([Object(l.a)("esri.renderers.DictionaryRenderer")],x),t.default=x},JiAY:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("fXoL"),i=n("3Pt+"),a=n("ofXK"),o=n("bTqV"),s=n("zVIQ"),u=n("RGY+");function c(e,t){if(1&e&&(r.kc(0,"option",10),r.Tc(1),r.jc()),2&e){var n=t.$implicit;r.Bc("ngValue",n),r.Tb(1),r.Uc(n)}}var l=function(e){return{buttonActive:e}},h=function(){var e=function(){function e(){var t=this;Wt(this,e),this.fontFamilyOptions=["Arial","Montserrat","Noto Sans","Noto Serif","Ubuntu"],this.fontSize=18,this.textProps={color:{r:255,g:255,b:0,a:1},font:{size:this.fontSize+"px",family:"Arial",weight:"normal",decoration:"none",style:"normal"}},this.textStyle={type:"simple-marker",style:"circle",size:6,color:[0,255,255,1],outline:{color:[50,50,50,1],width:1}},this.bold=!0,this.changeFontSize=function(e){if(t.fontSize=e,t.selectedTextGraphics.length>0){var n=document.getElementById(t.selectedTextGraphics[0].graphic.attributes.id);n.setAttribute("fontSize",t.fontSize+"px"),n.style.fontSize=t.fontSize+"px"}t.textProps.font.size=t.fontSize+"px"},this._textSymbol={type:"text",color:"white",haloColor:"black",haloSize:"1px",text:"test",xoffset:0,yoffset:0,font:this.textProps.font},this.changeFontFamily=function(){if(t.selectedTextGraphics.length>0){var e=document.getElementById(t.selectedTextGraphics[0].graphic.attributes.id);e.setAttribute("fontFamily",t.textProps.font.family),e.style.fontFamily=t.textProps.font.family}},this.changeTextColor=function(e){if(t.textProps.color=e,t.selectedTextGraphics.length>0){var n=t.textProps.color,r=document.getElementById(t.selectedTextGraphics[0].graphic.attributes.id);r.setAttribute("fontColor",JSON.stringify(t.textProps.color)),r.style.color="rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a,")")}},this.toggleFontWeight=function(){if(t.textProps.font.weight="bold"===t.textProps.font.weight?"normal":"bold",t.selectedTextGraphics.length>0){var e=document.getElementById(t.selectedTextGraphics[0].graphic.attributes.id);e.setAttribute("fontWeight",t.textProps.font.weight),e.style.fontWeight=t.textProps.font.weight}},this.toggleFontDecoration=function(){if(t.textProps.font.decoration="underline"===t.textProps.font.decoration?"none":"underline",t.selectedTextGraphics.length>0){var e=document.getElementById(t.selectedTextGraphics[0].graphic.attributes.id);e.setAttribute("textDecoration",t.textProps.font.decoration),e.style.textDecoration=t.textProps.font.decoration}},this.toggleFontStyle=function(){if(t.textProps.font.style="italic"===t.textProps.font.style?"normal":"italic",t.selectedTextGraphics.length>0){var e=document.getElementById(t.selectedTextGraphics[0].graphic.attributes.id);e.setAttribute("textStyle",t.textProps.font.style),e.style.fontStyle=t.textProps.font.style}}}return Zt(e,[{key:"selectedTextGraphics",get:function(){return this._selectedTextGraphics},set:function(e){if(this._selectedTextGraphics=e,e.length>0){var t=e[0].graphic.attributes.symbol;this.fontSize=t.font.size.split("px")[0],this.textProps.font.size=this.fontSize+"px",this.textProps.font.weight=t.font.weight,this.textProps.font.decoration=t.font.decoration,this.textProps.font.style=t.font.style,this.textProps.color=t.color}}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["app-textcontrols"]],inputs:{selectedTextGraphics:"selectedTextGraphics"},decls:28,vars:17,consts:[[1,"flex","verticalCenter"],[3,"ngModel","ngModelChange","selectionChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"flex","fontStyle"],["mat-raised-button","",1,"fontButtons",3,"ngClass","click"],[1,"flex","colorDiv","verticalCenter"],[3,"color","opacity","colorSelected"],[1,"marginTop10px"],[1,"widthSliderContainer"],[1,"widthSlider",3,"value","min","max","onChange"],[3,"ngValue"]],template:function(e,t){1&e&&(r.kc(0,"fieldset"),r.kc(1,"legend"),r.Tc(2,"Text Style"),r.jc(),r.kc(3,"div",0),r.kc(4,"div"),r.Tc(5," Font:"),r.jc(),r.kc(6,"select",1),r.rc("ngModelChange",(function(e){return t.textProps.font.family=e}))("selectionChange",(function(){return t.changeFontFamily()})),r.Sc(7,c,2,2,"option",2),r.jc(),r.jc(),r.kc(8,"div",3),r.kc(9,"button",4),r.rc("click",(function(){return t.toggleFontWeight()})),r.kc(10,"b"),r.Tc(11,"B"),r.jc(),r.jc(),r.kc(12,"button",4),r.rc("click",(function(){return t.toggleFontDecoration()})),r.kc(13,"u"),r.Tc(14,"U"),r.jc(),r.jc(),r.kc(15,"button",4),r.rc("click",(function(){return t.toggleFontStyle()})),r.kc(16,"i"),r.Tc(17,"I"),r.jc(),r.jc(),r.jc(),r.kc(18,"div",5),r.Tc(19,"Color: "),r.kc(20,"app-color-picker",6),r.rc("colorSelected",(function(e){return t.changeTextColor(e)})),r.jc(),r.jc(),r.kc(21,"div",7),r.Tc(22),r.gc(23,"br"),r.kc(24,"div",8),r.Tc(25," 5 \xa0"),r.kc(26,"app-slider",9),r.rc("onChange",(function(e){return t.changeFontSize(e)})),r.jc(),r.Tc(27," \xa050 "),r.jc(),r.jc(),r.jc()),2&e&&(r.Tb(6),r.Bc("ngModel",t.textProps.font.family),r.Tb(1),r.Bc("ngForOf",t.fontFamilyOptions),r.Tb(2),r.Bc("ngClass",r.Ec(11,l,"bold"===t.textProps.font.weight)),r.Tb(3),r.Bc("ngClass",r.Ec(13,l,"underline"===t.textProps.font.decoration)),r.Tb(3),r.Bc("ngClass",r.Ec(15,l,"italic"===t.textProps.font.style)),r.Tb(5),r.Bc("color",t.textProps.color)("opacity",100*t.textProps.color.a),r.Tb(2),r.Vc(" Font Size: ",t.textProps.font.size,""),r.Tb(4),r.Bc("value",t.fontSize)("min",5)("max",50))},directives:[i.s,i.j,i.m,a.l,o.a,a.k,s.a,u.a,i.n,i.u],styles:["fieldset[_ngcontent-%COMP%]{position:relative;padding-top:12px}.widthSlider[_ngcontent-%COMP%]{width:80%;height:20px}.widthSlider[_ngcontent-%COMP%] > .slidecontainer[_ngcontent-%COMP%]{width:200px}.widthSliderContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;line-height:15px}.buttonActive[_ngcontent-%COMP%]{background-color:#d3d3d3;border:2px solid #0ff;color:#000}.fontButtons[_ngcontent-%COMP%]{min-width:unset!important;width:50px;margin:2px;outline:none}.fontStyle[_ngcontent-%COMP%]{justify-content:center;margin-top:10px}.verticalCenter[_ngcontent-%COMP%]{align-items:center}.matSelect[_ngcontent-%COMP%]{margin-left:10px}.colorDiv[_ngcontent-%COMP%], .marginTop10px[_ngcontent-%COMP%]{margin-top:10px}legend[_ngcontent-%COMP%]{font-weight:600}select[_ngcontent-%COMP%]{border:1px solid #000;height:30px;border-radius:5px;width:160px;margin-left:10px}"]}),e}()},Jpjp:function(e,t,n){"use strict";function r(e){return e&&"getAtOrigin"in e&&"originOf"in e}n.d(t,"a",(function(){return r}))},Js3Z:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).SCHEDULER_LOG_SLOW_TASKS=!1,e.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1,e}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")).a);Object(r.a)([Object(i.b)()],o.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(r.a)([Object(i.b)()],o.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);var s=new(o=Object(r.a)([Object(a.a)("esri.views.support.DebugFlags")],o));t.a=s},Jv1m:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=function e(t,n){for(var r=0,i=t.length;r<i;r++){var a=t[r];Array.isArray(a)?e(a,n):null!=a&&!1!==a&&(a.hasOwnProperty("vnodeSelector")||(a={vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}),n.push(a))}},i=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(1===n.length&&"string"==typeof n[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:n[0],domNode:null};var a=[];return r(n,a),{vnodeSelector:e,properties:t||void 0,children:a,text:void 0,domNode:null}}},K5Jr:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("1Mqo"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).value=0,r.unit="milliseconds",r}return Zt(n,[{key:"toMilliseconds",value:function(){return this.value*u.b[this.unit]}},{key:"clone",value:function(){return new r({value:this.value,unit:this.unit})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),Object(i.a)([Object(a.b)({type:u.d.apiValues,json:{type:u.d.jsonValues,read:u.d.read,write:u.d.write},nonNullable:!0})],c.prototype,"unit",void 0),c=r=Object(i.a)([Object(o.a)("esri.TimeInterval")],c),t.a=c},KAcK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fXoL"),i=n("ofXK");n("aCCJ");var a=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c]]}),e}()},KKCa:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},KLE9:function(e,t,n){"use strict";function r(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function i(e){return void 0!==e.points}function a(e){return void 0!==e.x&&void 0!==e.y}function o(e){return void 0!==e.paths}function s(e){return void 0!==e.rings}function u(e){return function(t,n){return null==t?n:null==n?t:e(t,n)}}n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return p}));var c=u(Math.min),l=u(Math.max);function h(e,t){return o(t)?p(e,t.paths,!1,!1):s(t)?p(e,t.rings,!1,!1):i(t)?v(e,t.points,!1,!1,!1,!1):r(t)?d(e,t):(a(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function f(e,t){return o(t)?p(e,t.paths,!0,!1):s(t)?p(e,t.rings,!0,!1):i(t)?v(e,t.points,!0,!1,!0,!1):r(t)?d(e,t,0,0,!0,!1):(a(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function p(e,t,n,r){var i=n?3:2;if(!t.length||!t[0].length)return null;for(var a,o,s,u,h=zt(t[0][0],2),f=h[0],p=h[1],d=zt(t[0][0],2),v=d[0],y=d[1],b=0;b<t.length;b++)for(var g=t[b],m=0;m<g.length;m++){var w=g[m],O=zt(w,2),j=O[0],_=O[1];if(f=c(f,j),p=c(p,_),v=l(v,j),y=l(y,_),n&&w.length>2){var x=w[2];a=c(a,x),o=l(o,x)}if(r&&w.length>i){var k=w[i];s=c(a,k),u=l(o,k)}}return n?r?(e[0]=f,e[1]=p,e[2]=a,e[3]=s,e[4]=v,e[5]=y,e[6]=o,e[7]=u,e.length=8,e):(e[0]=f,e[1]=p,e[2]=a,e[3]=v,e[4]=y,e[5]=o,e.length=6,e):r?(e[0]=f,e[1]=p,e[2]=s,e[3]=v,e[4]=y,e[5]=u,e.length=6,e):(e[0]=f,e[1]=p,e[2]=v,e[3]=y,e.length=4,e)}function d(e,t,n,r,i,a){var o=t.xmin,s=t.xmax,u=t.ymin,c=t.ymax,l=t.zmin,h=t.zmax,f=t.mmin,p=t.mmax;return i?(l=l||0,h=h||0,a?(f=f||0,p=p||0,e[0]=o,e[1]=u,e[2]=l,e[3]=f,e[4]=s,e[5]=c,e[6]=h,e[7]=p,e):(e[0]=o,e[1]=u,e[2]=l,e[3]=s,e[4]=c,e[5]=h,e)):a?(f=f||0,p=p||0,e[0]=o,e[1]=u,e[2]=f,e[3]=s,e[4]=c,e[5]=p,e):(e[0]=o,e[1]=u,e[2]=s,e[3]=c,e)}function v(e,t,n,r,i,a){var o=n?3:2,s=r&&a,u=n&&i;if(!t.length||!t[0].length)return null;for(var h,f,p,d,v=zt(t[0],2),y=v[0],b=v[1],g=zt(t[0],2),m=g[0],w=g[1],O=0;O<t.length;O++){var j=t[O],_=zt(j,2),x=_[0],k=_[1];if(y=c(y,x),b=c(b,k),m=l(m,x),w=l(w,k),u&&j.length>2){var S=j[2];h=c(h,S),f=l(f,S)}if(s&&j.length>o){var M=j[o];p=c(h,M),d=l(f,M)}}return i?(h=h||0,f=f||0,a?(p=p||0,d=d||0,e[0]=y,e[1]=b,e[2]=h,e[3]=p,e[4]=m,e[5]=w,e[6]=f,e[7]=d,e):(e[0]=y,e[1]=b,e[2]=h,e[3]=m,e[4]=w,e[5]=f,e)):a?(p=p||0,d=d||0,e[0]=y,e[1]=b,e[2]=p,e[3]=m,e[4]=w,e[5]=d,e):(e[0]=y,e[1]=b,e[2]=m,e[3]=w,e)}},KMCJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG");n("4EHJ"),n("ju1D"),n("9AIY");var o=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).goToOverride=null,e.view=null,e}return Zt(n,[{key:"callGoTo",value:function(e){var t=this.view;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}}]),n}(e);return Object(r.a)([Object(i.b)()],t.prototype,"goToOverride",void 0),Object(r.a)([Object(i.b)()],t.prototype,"view",void 0),t=Object(r.a)([Object(a.a)("esri.widgets.support.GoTo")],t)}},KOts:function(e,t,n){"use strict";function r(e,t){var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){var i=zt(n.value,2),a=i[0];if(t(i[1],a))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}n.d(t,"a",(function(){return r}))},KUQ1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Math.random().toString(36).substr(2,9)}},KVkv:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("DZP5")),s=n("21Ip"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).outline=null,r.type=null,r}return Zt(n,[{key:"hash",value:function(){return"".concat(this.type,".").concat(this.outline&&this.outline.hash())}}]),n}(o.a);Object(r.a)([Object(i.b)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":s.a}},json:{default:null,write:!0}})],u.prototype,"outline",void 0),Object(r.a)([Object(i.b)({type:["simple-fill","picture-fill"],readOnly:!0})],u.prototype,"type",void 0),u=Object(r.a)([Object(a.a)("esri.symbols.FillSymbol")],u),t.a=u},Kq27:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e){e.attributes.add("position","vec2"),e.varyings.add("uv","vec2"),e.vertex.code.add(r.a(ne||(ne=Rt(["\n    void main(void) {\n      gl_Position = vec4(position, 0.0, 1.0);\n      uv = position * 0.5 + vec2(0.5);\n    }\n  "]))))}},KrcW:function(e,t,n){"use strict";var r=n("3r0u"),i=r.a.queueMicrotask?r.a.queueMicrotask:function(e){r.a.Promise.resolve().then(e)},a=[],o=[];function s(e){a.push(e),1===a.length&&i((function(){var e,t=Vt(o);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(s){t.e(s)}finally{t.f()}var n=a.slice();a.length=0;var r,i=Vt(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)()}}catch(s){i.e(s)}finally{i.f()}}))}(s||(s={})).before=function(e){return o.push(e),{remove:function(){o=o.filter((function(t){return t!==e}))}}},t.a=s},Kww6:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fXoL"),i=n("ofXK");n("j/Vj"),n("iy1n");var a=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c]]}),e}()},"L+uT":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("6S2I"),i=n("wdpY"),a=n("ofM5"),o=r.a.getLogger("esri.layers.support.fieldProperties");function s(){return{fields:{type:[a.a],value:null},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Object(i.p)(this.fields,r)||o.error("field-attributes-layer:invalid-field","Invalid field ".concat(r," found in outFields"),{layer:this,outFields:e})}}catch(a){n.e(a)}finally{n.f()}return Object(i.i)(this.fields,e)}}}}},"L/MW":function(e,t,n){"use strict";t.a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:29;Wt(this,e),this.name=t,this._counter=0,this._items=new Array(n)}return Zt(e,[{key:"record",value:function(e){this._items[++this._counter%this._items.length]=e}},{key:"median",get:function(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}},{key:"average",get:function(){return this._items.reduce((function(e,t){return e+t}),0)/this._items.length}},{key:"last",get:function(){return this._items[this._counter%this._items.length]}}]),e}()},L1EH:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ZuQG")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).type="rect",e.left=null,e.right=null,e.top=null,e.bottom=null,e}return Zt(n,[{key:"clone",value:function(){return new r({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}},{key:"version",get:function(){return(this._get("version")||0)+1}}]),n}(s.a);Object(i.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],u.prototype,"left",void 0),Object(i.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],u.prototype,"right",void 0),Object(i.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],u.prototype,"top",void 0),Object(i.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],u.prototype,"bottom",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],u.prototype,"version",null),u=r=Object(i.a)([Object(o.a)("esri.views.layers.support.ClipRect")],u),t.a=u},L5gG:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("OIYi"),i=n("fFEv");function a(e){e.vertex.code.add(r.a(re||(re=Rt(["\n    float screenSizePerspectiveMinSize(float size, vec4 factor) {\n      float nonZeroSize = 1.0 - step(size, 0.0);\n\n      return (\n        factor.z * (\n          1.0 +\n          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding\n          nonZeroSize *\n          2.0 * factor.w / (\n            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1\n          )\n        )\n      );\n    }\n  "])))),e.vertex.code.add(r.a(ie||(ie=Rt(["\n    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\n      return absCosAngle * absCosAngle * absCosAngle;\n    }\n  "])))),e.vertex.code.add(r.a(ae||(ae=Rt(["\n    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\n      return vec4(\n        min(params.x / (distanceToCamera - params.y), 1.0),\n        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),\n        params.z,\n        params.w\n      );\n    }\n  "])))),e.vertex.code.add(r.a(oe||(oe=Rt(["\n    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\n      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n    }\n  "])))),e.vertex.code.add(r.a(se||(se=Rt(["\n    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\n      return applyScreenSizePerspectiveScaleFactorFloat(\n        size,\n        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n      );\n    }\n  "])))),e.vertex.code.add(r.a(ue||(ue=Rt(["\n    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\n      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n    }\n  "])))),e.vertex.code.add(r.a(ce||(ce=Rt(["\n    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\n      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n    }\n  "]))))}(a||(a={})).bindUniforms=function(e,t){if(t.screenSizePerspective){Object(i.a)(t.screenSizePerspective,e,"screenSizePerspective");var n=t.screenSizePerspectiveAlignment||t.screenSizePerspective;Object(i.a)(n,e,"screenSizePerspectiveAlignment")}}},LAbW:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("fXoL"),i=n("ofXK"),a=(n("DWcW"),n("qFsG")),o=n("kmnG"),s=n("3Pt+"),u=n("zJym"),c=n("tk/3"),l=n("DC2l"),h=n("Kww6"),f=n("FhEM"),p=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c,s.f,a.b,o.d,u.a,s.r,c.b,l.a,h.a,f.a]]}),e}()},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},"LE+W":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WZb1")),u=n("OvF4"),c=n("kglp"),l=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).outSpatialReference=null,e.processExtent=null,e.processSpatialReference=null,e.returnFeatureCollection=!1,e.returnM=!1,e.returnZ=!1,e}return n}(n("/CmD").a);Object(r.a)([Object(a.b)({type:s.a})],l.prototype,"outSpatialReference",void 0),Object(r.a)([Object(a.b)({type:u.a})],l.prototype,"processExtent",void 0),Object(r.a)([Object(a.b)({type:s.a})],l.prototype,"processSpatialReference",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],l.prototype,"returnFeatureCollection",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],l.prototype,"returnM",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],l.prototype,"returnZ",void 0),(l=Object(r.a)([Object(o.a)("esri/rest/geoprocessor/GPOptions")],l)).from=Object(i.m)(l);var h=l,f=n("DKHk"),p=n("Lqtk"),d=n("qNUd"),v=n("ofM5"),y=n("8prj"),b=n("u3Ia"),g=n("ag7Y"),m=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).extent=null,e.height=null,e.href=null,e.opacity=1,e.rotation=0,e.scale=null,e.visible=!0,e.width=null,e}return n}(g.a);Object(r.a)([Object(a.b)({type:u.a})],m.prototype,"extent",void 0),Object(r.a)([Object(a.b)()],m.prototype,"height",void 0),Object(r.a)([Object(a.b)()],m.prototype,"href",void 0),Object(r.a)([Object(a.b)()],m.prototype,"opacity",void 0),Object(r.a)([Object(a.b)()],m.prototype,"rotation",void 0),Object(r.a)([Object(a.b)()],m.prototype,"scale",void 0),Object(r.a)([Object(a.b)()],m.prototype,"visible",void 0),Object(r.a)([Object(a.b)()],m.prototype,"width",void 0);var w=m=Object(r.a)([Object(o.a)("esri.layer.support.MapImage")],m),O=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).itemId=null,r.url=null,r}return n}(g.a);Object(r.a)([Object(a.b)({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],O.prototype,"itemId",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"url",void 0);var j=O=Object(r.a)([Object(o.a)("esri.tasks.support.DataFile")],O),_=n("+opI"),x=new _.a({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1}),k=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).distance=0,r.units=null,r}return n}(g.a);Object(r.a)([Object(a.b)({json:{write:!0}})],k.prototype,"distance",void 0),Object(r.a)([Object(a.b)({json:{read:x.read,write:x.write}})],k.prototype,"units",void 0);var S=k=Object(r.a)([Object(o.a)("esri/tasks/support/LinearUnit")],k),M=new _.a({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"}),I=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).dataType=null,r.value=null,r}return n}(g.a);Object(r.a)([Object(a.b)({json:{read:M.read,write:M.write}})],I.prototype,"dataType",void 0),Object(r.a)([Object(a.b)()],I.prototype,"value",void 0);var T=I=Object(r.a)([Object(o.a)("esri.tasks.support.ParameterValue")],I),A=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).format=null,r.itemId=null,r.url=null,r}return n}(g.a);Object(r.a)([Object(a.b)()],A.prototype,"format",void 0),Object(r.a)([Object(a.b)({json:{read:{source:"itemID"},write:{target:"itemID"}}})],A.prototype,"itemId",void 0),Object(r.a)([Object(a.b)()],A.prototype,"url",void 0);var C=A=Object(r.a)([Object(o.a)("esri/tasks/support/RasterData")],A);function E(e,t,n,r,i){return P.apply(this,arguments)}function P(){return(P=Ut(regeneratorRuntime.mark((function e(t,n,r,i,a){var o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},s={},u=[],e.abrupt("return",(function(e,t,n){for(var r in e){var i=e[r];if(i&&"object"==typeof i&&i instanceof y.default){var a=i.features;n[r]=[t.length,t.length+a.length],a.forEach((function(e){t.push(e.geometry)}))}}}(i,u,o),Object(d.a)(u).then((function(e){var u=r.outSpatialReference,c=r.processExtent,l=r.processSpatialReference,h=r.returnFeatureCollection,f=r.returnM,d=r.returnZ,v=Object(b.c)(t).path;for(var y in o){var g=o[y];s[y]=e.slice(g[0],g[1])}var m=u?u.wkid||u:null,w=l?l.wkid||l:null,O="execute"===n?{returnFeatureCollection:h||void 0,returnM:f||void 0,returnZ:d||void 0}:null,j=D(Nt(Nt(Nt(Nt({},c?{context:{extent:c,outSR:m,processSR:w}}:{"env:outSR":m,"env:processSR":w}),i),O),{},{f:"json"}),null,s),_=Nt(Nt({},a),{},{query:j});return Object(p.default)("".concat(v,"/").concat(n),_)}))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=e.dataType,n=T.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":return n;case"GPDate":n.value=new Date(n.value);break;case"GPDataFile":n.value=j.fromJSON(n.value);break;case"GPLinearUnit":n.value=S.fromJSON(n.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":n.value=e.value.url?j.fromJSON(n.value):y.default.fromJSON(n.value);break;case"GPRasterData":case"GPRasterDataLayer":var r=e.value.mapImage;n.value=r?w.fromJSON(r):C.fromJSON(n.value);break;case"GPField":n.value=v.a.fromJSON(n.value);break;case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return n;case"GPMultiValue:GPDate":n.value=n.value.map((function(e){return new Date(e)}));break;case"GPMultiValue:GPDataFile":n.value=n.value.map((function(e){return j.fromJSON(e)}));break;case"GPMultiValue:GPLinearUnit":n.value=n.value.map((function(e){return S.fromJSON(e)}));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":n.value=n.value.map((function(e){return y.default.fromJSON(e)}));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":n.value=n.value.map((function(e){return e?w.fromJSON(e):C.fromJSON(n.value)}));break;case"GPMultiValue:GPField":n.value=n.value.map((function(e){return v.a.fromJSON(e)}))}return n}function D(e,t,n){for(var r in e){var i=e[r];Array.isArray(i)?e[r]=JSON.stringify(i.map((function(e){return D({item:e},!0).item}))):i instanceof Date&&(e[r]=i.getTime())}return Object(b.b)(e,t,n)}var L,N=n("9MzC"),F=new _.a({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"}),z=L=function(e){Kt(a,e);var t,r,i=Xt(a);function a(e){var t;return Wt(this,a),(t=i.call(this,e)).jobId=null,t.jobStatus=null,t.messages=null,t.requestOptions=null,t.sourceUrl=null,t._timer=null,t}return Zt(a,[{key:"cancelJob",value:function(e){var t=this,n=this.jobId,r=this.sourceUrl,i=Object(b.c)(r).path,a=Nt(Nt(Nt({},this.requestOptions),e),{},{query:{f:"json"}});return this._clearTimer(),Object(p.default)("".concat(i,"/jobs/").concat(n,"/cancel"),a).then((function(e){var n=L.fromJSON(e.data);return t.messages=n.messages,t.jobStatus=n.jobStatus,t}))}},{key:"destroy",value:function(){clearInterval(this._timer)}},{key:"checkJobStatus",value:function(e){var t=this,n=Object(b.c)(this.sourceUrl).path,r=Nt(Nt(Nt({},this.requestOptions),e),{},{query:{f:"json"}}),i="".concat(n,"/jobs/").concat(this.jobId);return Object(p.default)(i,r).then((function(e){var n=e.data,r=L.fromJSON(n);return t.messages=r.messages,t.jobStatus=r.jobStatus,t}))}},{key:"fetchResultData",value:function(e,t,n){var r=t=h.from(t),i=r.returnFeatureCollection,a=r.returnM,o=r.returnZ,s=r.outSpatialReference,u=Object(b.c)(this.sourceUrl).path,c=D({returnFeatureCollection:i||void 0,returnM:a||void 0,returnZ:o||void 0,outSR:s,returnType:"data",f:"json"},null),l=Nt(Nt(Nt({},this.requestOptions),n),{},{query:c}),f="".concat(u,"/jobs/").concat(this.jobId,"/results/").concat(e);return Object(p.default)(f,l).then((function(e){return R(e.data)}))}},{key:"fetchResultImage",value:function(e,t,n){var r=Object(b.c)(this.sourceUrl).path,i=D(Nt(Nt({},t.toJSON()),{},{f:"json"})),a=Nt(Nt(Nt({},this.requestOptions),n),{},{query:i}),o="".concat(r,"/jobs/").concat(this.jobId,"/results/").concat(e);return Object(p.default)(o,a).then((function(e){return R(e.data)}))}},{key:"fetchResultMapImageLayer",value:(r=Ut(regeneratorRuntime.mark((function e(){var t,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(b.c)(this.sourceUrl),r=t.path,i=r.indexOf("/GPServer/"),a="".concat(r.substring(0,i),"/MapServer/jobs/").concat(this.jobId),e.next=4,Promise.resolve().then(n.bind(null,"U/i9"));case 4:return e.t0=e.sent.default,e.t1={url:a},e.abrupt("return",new e.t0(e.t1));case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"waitForJobCompletion",value:(t=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.interval,r=void 0===n?1e3:n,i=t.signal,a=t.statusCallback,e.abrupt("return",new Promise((function(e,t){Object(N.p)(i,(function(){o._clearTimer(),t(Object(N.e)())})),o._clearTimer();var n=setInterval((function(){o._timer||t(Object(N.e)()),o.checkJobStatus(o.requestOptions).then((function(n){var r=n.jobStatus;switch(o.jobStatus=r,r){case"job-succeeded":o._clearTimer(),e(o);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":a&&a(o);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":o._clearTimer(),t(o)}}))}),r);o._timer=n})));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"_clearTimer",value:function(){this._timer&&(clearInterval(this._timer),this._timer=null)}}]),a}(g.a);Object(r.a)([Object(a.b)()],z.prototype,"jobId",void 0),Object(r.a)([Object(a.b)({json:{read:F.read}})],z.prototype,"jobStatus",void 0),Object(r.a)([Object(a.b)({type:[f.a]})],z.prototype,"messages",void 0),Object(r.a)([Object(a.b)()],z.prototype,"requestOptions",void 0),Object(r.a)([Object(a.b)({json:{write:!0}})],z.prototype,"sourceUrl",void 0);var V=z=L=Object(r.a)([Object(o.a)("esri.tasks.support.JobInfo")],z),G=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e))._jobs=new Map,t.outSpatialReference=null,t.processExtent=null,t.processSpatialReference=null,t.returnFeatureCollection=!1,t.returnM=!1,t.returnZ=!1,t}return Zt(r,[{key:"destroy",value:function(){this._jobs.forEach((function(e){return e.destroy()})),this._jobs.clear()}},{key:"cancelJob",value:function(e,t){var n=this._jobs.get(e),r=Nt(Nt({},this.requestOptions),t);return n.cancelJob(r)}},{key:"checkJobStatus",value:function(e,t){var n=this._jobs.get(e),r=Nt(Nt({},this.requestOptions),t);return n.checkJobStatus(r)}},{key:"execute",value:function(e,t){var n,r=new h({outSpatialReference:this.outSpatialReference,processExtent:this.processExtent,processSpatialReference:this.processSpatialReference,returnFeatureCollection:this.returnFeatureCollection,returnM:this.returnM,returnZ:this.returnZ}),i=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t,"execute",r=h.from(r),n,i).then((function(e){var t=e.data.messages||[];return{results:(e.data.results||[]).map(R),messages:t.map((function(e){return f.a.fromJSON(e)}))}})));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r,i){return n.apply(this,arguments)})(this.url,e,r,i)}},{key:"getResultData",value:function(e,t,n){var r=this._jobs.get(e),i=this.returnFeatureCollection,a=this.returnM,o=this.returnZ,s=this.outSpatialReference,u=new h({returnFeatureCollection:i,returnM:a,returnZ:o,outSpatialReference:s,url:this.url}),c=Nt(Nt({},this.requestOptions),n);return r.fetchResultData(t,u,c)}},{key:"getResultImage",value:function(e,t,n,r){var i=this._jobs.get(e),a=Nt(Nt({},this.requestOptions),r);return i.fetchResultImage(t,n,a)}},{key:"getResultMapImageLayer",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._jobs.get(t).fetchResultMapImageLayer());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"submitJob",value:function(e,t){var n,r=this,i=new h({outSpatialReference:this.outSpatialReference,processExtent:this.processExtent,processSpatialReference:this.processSpatialReference,returnFeatureCollection:this.returnFeatureCollection,returnM:this.returnM,returnZ:this.returnZ}),a=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r=h.from(r),E(t,"submitJob",r,n,i).then((function(e){var n=V.fromJSON(e.data);return n.sourceUrl=t,n}))));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r,i){return n.apply(this,arguments)})(this.url,e,i,a).then((function(e){return e.sourceUrl=r.url,r._jobs.set(e.jobId,e),e}))}},{key:"waitForJobCompletion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._jobs.get(e).waitForJobCompletion(t)}}]),r}(c.a);Object(r.a)([Object(a.b)({type:s.a})],G.prototype,"outSpatialReference",void 0),Object(r.a)([Object(a.b)({type:u.a})],G.prototype,"processExtent",void 0),Object(r.a)([Object(a.b)({type:s.a})],G.prototype,"processSpatialReference",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],G.prototype,"returnFeatureCollection",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],G.prototype,"returnM",void 0),Object(r.a)([Object(a.b)({nonNullable:!0})],G.prototype,"returnZ",void 0),G=Object(r.a)([Object(o.a)("esri/tasks/Geoprocessor")],G),t.a=G},LE9a:function(e,t,n){"use strict";var r,i=n("pO5D"),a=n("f/qv"),o=n("srIe"),s=n("zqDF"),u=n("WbKI"),c=n("04ZG"),l=n("7Nfj"),h=n("wNOj"),f=n("VW+2"),p=n("WBXD"),d=n("zm0L"),v=n("m4bB"),y=function(){function e(){Wt(this,e),this._observers=new Set}return Zt(e,[{key:"observe",value:function(e){return new v.a(this._observers.add(e),e)}},{key:"notify",value:function(){var e,t=this._observers,n=this._observers.size,r=new Array(n),i=0,a=Vt(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;r[i++]=o}}catch(u){a.e(u)}finally{a.f()}for(var s=0;s<n;s++)r[s].notify()}}]),e}(),b=new l.a(function(){function e(){Wt(this,e),this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}return Zt(e,[{key:"preventDefault",value:function(){this.cancellable&&(this.defaultPrevented=!0)}},{key:"reset",value:function(e){this.defaultPrevented=!1,this.item=e}}]),e}(),void 0,(function(e){e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),g=function(){};function m(e){return e?e instanceof M?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function w(e){if(e&&e.length)return e[0]}function O(e,t,n,r){for(var i=Math.min(e.length-n,t.length-r),a=0;a<i&&e[n+a]===t[r+a];)a++;return a}var j=new Set,_=new Set,x=new Set,k=new Map,S=0,M=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._chgListeners=[],r._notifications=null,r._timer=null,r._observable=new y,r.length=0,r._items=[],Object.defineProperty($t(r),"uid",{value:S++}),r}return Zt(n,[{key:"normalizeCtorArgs",value:function(e){return e?Array.isArray(e)||e instanceof r?{items:e}:e:{}}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.items,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"items",get:function(){return Object(h.c)(this._observable),this._items}},{key:"items",set:function(e){this._emitBeforeChanges(1)||(this._splice.apply(this,[0,this.length].concat(Bt(m(e)))),this._emitAfterChanges(1))}},{key:"hasEventListener",value:function(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}},{key:"on",value:function(e,t){if("change"===e){var n=this._chgListeners,r={removed:!1,callback:t};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),{remove:function(){this.remove=g,r.removed=!0,n.splice(n.indexOf(r),1)}}}return this._emitter.on(e,t)}},{key:"once",value:function(e,t){var n=this.on(e,t);return{remove:function(){n.remove()}}}},{key:"add",value:function(e,t){if(Object(h.c)(this._observable),this._emitBeforeChanges(1))return this;var n=this.getNextIndex(null!=t?t:null);return this._splice(n,0,e),this._emitAfterChanges(1),this}},{key:"addMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._items.length;if(Object(h.c)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;var n=this.getNextIndex(t);return this._splice.apply(this,[n,0].concat(Bt(m(e)))),this._emitAfterChanges(1),this}},{key:"removeAll",value:function(){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(2))return[];var e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}},{key:"clone",value:function(){return Object(h.c)(this._observable),this._createNewInstance({items:this._items.map(a.a)})}},{key:"concat",value:function(){var e;Object(h.c)(this._observable);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map(m);return this._createNewInstance({items:(e=this._items).concat.apply(e,Bt(i))})}},{key:"drain",value:function(e,t){if(Object(h.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){for(var n=Object(o.d)(this._splice(0,this.length)),r=n.length,i=0;i<r;i++)e.call(t,n[i],i,n);this._emitAfterChanges(2)}}},{key:"every",value:function(e,t){return Object(h.c)(this._observable),this._items.every(e,t)}},{key:"filter",value:function(e,t){var n;return Object(h.c)(this._observable),n=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:n})}},{key:"find",value:function(e,t){return Object(h.c)(this._observable),this._items.find(e,t)}},{key:"findIndex",value:function(e,t){return Object(h.c)(this._observable),this._items.findIndex(e,t)}},{key:"flatten",value:function(e,t){Object(h.c)(this._observable);var n=[];return function e(t,n,r,i){n&&n.forEach((function(n,a,o){t.push(n),e(t,r.call(i,n,a,o),r,i)}))}(n,this,e,t),new r(n)}},{key:"forEach",value:function(e,t){return Object(h.c)(this._observable),this._items.forEach(e,t)}},{key:"getItemAt",value:function(e){return Object(h.c)(this._observable),this._items[e]}},{key:"getNextIndex",value:function(e){Object(h.c)(this._observable);var t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}},{key:"includes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(h.c)(this._observable),this._items.includes(e,t)}},{key:"indexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(h.c)(this._observable),this._items.indexOf(e,t)}},{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",";return Object(h.c)(this._observable),this._items.join(e)}},{key:"lastIndexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length-1;return Object(h.c)(this._observable),this._items.lastIndexOf(e,t)}},{key:"map",value:function(e,t){Object(h.c)(this._observable);var n=this._items.map(e,t);return new r({items:n})}},{key:"reorder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length-1;Object(h.c)(this._observable);var n=this.indexOf(e);if(-1!==n){if(t<0?t=0:t>=this.length&&(t=this.length-1),n!==t){if(this._emitBeforeChanges(4))return e;this._splice(n,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}},{key:"pop",value:function(){if(Object(h.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){var e=w(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}}},{key:"push",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(h.c)(this._observable),this._emitBeforeChanges(1)||(this._splice.apply(this,[this.length,0].concat(t)),this._emitAfterChanges(1)),this.length}},{key:"reduce",value:function(e,t){Object(h.c)(this._observable);var n=this._items;return 2===arguments.length?n.reduce(e,t):n.reduce(e)}},{key:"reduceRight",value:function(e,t){Object(h.c)(this._observable);var n=this._items;return 2===arguments.length?n.reduceRight(e,t):n.reduceRight(e)}},{key:"remove",value:function(e){return Object(h.c)(this._observable),this.removeAt(this.indexOf(e))}},{key:"removeAt",value:function(e){if(Object(h.c)(this._observable),!(e<0||e>=this.length||this._emitBeforeChanges(2))){var t=w(this._splice(e,1));return this._emitAfterChanges(2),t}}},{key:"removeMany",value:function(e){if(Object(h.c)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];for(var t=e instanceof r?e.toArray():e,n=this._items,i=[],a=t.length,o=0;o<a;o++){var s=n.indexOf(t[o]);if(s>-1){var u=1+O(t,n,o+1,s+1),c=this._splice(s,u);c&&c.length>0&&i.push.apply(i,c),o+=u-1}}return this._emitAfterChanges(2),i}},{key:"reverse",value:function(){if(Object(h.c)(this._observable),this._emitBeforeChanges(4))return this;var e=this._splice(0,this.length);return e&&(e.reverse(),this._splice.apply(this,[0,0].concat(Bt(e)))),this._emitAfterChanges(4),this}},{key:"shift",value:function(){if(Object(h.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){var e=w(this._splice(0,1));return this._emitAfterChanges(2),e}}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Object(h.c)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}},{key:"some",value:function(e,t){return Object(h.c)(this._observable),this._items.some(e,t)}},{key:"sort",value:function(e){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(4))return this;var t=Object(o.d)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice.apply(this,[0,0].concat(Bt(t))),this._emitAfterChanges(4),this}},{key:"splice",value:function(e,t){Object(h.c)(this._observable);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(a))return[];var o=this._splice.apply(this,[e,t].concat(r))||[];return this._emitAfterChanges(a),o}},{key:"toArray",value:function(){return Object(h.c)(this._observable),this._items.slice()}},{key:"toJSON",value:function(){return Object(h.c)(this._observable),this.toArray()}},{key:"toLocaleString",value:function(){return Object(h.c)(this._observable),this._items.toLocaleString()}},{key:"toString",value:function(){return Object(h.c)(this._observable),this._items.toString()}},{key:"unshift",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(h.c)(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice.apply(this,[0,0].concat(t)),this._emitAfterChanges(1)),this.length}},{key:"_createNewInstance",value:function(e){return new this.constructor(e)}},{key:"_splice",value:function(e,t){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o,s,u=this._items,c=this.constructor.prototype.itemType;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Object(p.b)((function(){return n._dispatchChange()}))),t){if(s=u.splice(e,t),this.hasEventListener("before-remove")){var l=b.acquire();l.target=this,l.cancellable=!0;for(var h=0,f=s.length;h<f;h++)o=s[h],l.reset(o),this.emit("before-remove",l),l.defaultPrevented&&(s.splice(h,1),u.splice(e,0,o),e+=1,h-=1,f-=1);b.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){var d=b.acquire();d.target=this,d.cancellable=!1;for(var v=s.length,y=0;y<v;y++)d.reset(s[y]),this.emit("after-remove",d);b.release(d)}}if(i&&i.length){if(c){var g,m=[],w=Vt(i);try{for(w.s();!(g=w.n()).done;){var O=g.value,j=c.ensureType(O);null==j&&null!=O||m.push(j)}}catch(R){w.e(R)}finally{w.f()}i=m}var _=this.hasEventListener("before-add"),x=this.hasEventListener("after-add"),k=e===this.length;if(_||x){var S=b.acquire();S.target=this,S.cancellable=!0;var M=b.acquire();M.target=this,M.cancellable=!1;var I,T=Vt(i);try{for(T.s();!(I=T.n()).done;){var A=I.value;_?(S.reset(A),this.emit("before-add",S),S.defaultPrevented||(k?u.push(A):u.splice(e++,0,A),this._set("length",u.length),x&&(M.reset(A),this.emit("after-add",M)))):(k?u.push(A):u.splice(e++,0,A),this._set("length",u.length),M.reset(A),this.emit("after-add",M))}}catch(R){T.e(R)}finally{T.f()}b.release(M),b.release(S)}else{if(k){var C,E=Vt(i);try{for(E.s();!(C=E.n()).done;){var P=C.value;u.push(P)}}catch(R){E.e(R)}finally{E.f()}}else u.splice.apply(u,[e,0].concat(Bt(i)));this._set("length",u.length)}}return(i&&i.length||s&&s.length)&&this._notifyChangeEvent(i,s),s}},{key:"_emitBeforeChanges",value:function(e){var t=!1;if(this.hasEventListener("before-changes")){var n=b.acquire();n.target=this,n.cancellable=!0,n.type=e,this.emit("before-changes",n),t=n.defaultPrevented,b.release(n)}return t}},{key:"_emitAfterChanges",value:function(e){if(this.hasEventListener("after-changes")){var t=b.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),b.release(t)}this._observable.notify()}},{key:"_notifyChangeEvent",value:function(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}},{key:"_dispatchChange",value:function(){var e=this;if(this._timer&&(this._timer.remove(),this._timer=null),this._notifications){var t=this._notifications;this._notifications=null;var n,r=Vt(t);try{var i=function(){var t=n.value,r=t.changes;j.clear(),_.clear(),x.clear();var i,a=Vt(r);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.added,u=o.removed;if(s)if(0===x.size&&0===_.size){var c,l=Vt(s);try{for(l.s();!(c=l.n()).done;){var h=c.value;j.add(h)}}catch(R){l.e(R)}finally{l.f()}}else{var p,d=Vt(s);try{for(d.s();!(p=d.n()).done;){var v=p.value;_.has(v)?(x.add(v),_.delete(v)):x.has(v)||j.add(v)}}catch(R){d.e(R)}finally{d.f()}}if(u)if(0===x.size&&0===j.size){var y,b=Vt(u);try{for(b.s();!(y=b.n()).done;){var g=y.value;_.add(g)}}catch(R){b.e(R)}finally{b.f()}}else{var m,w=Vt(u);try{for(w.s();!(m=w.n()).done;){var O=m.value;j.has(O)?j.delete(O):(x.delete(O),_.add(O))}}catch(R){w.e(R)}finally{w.f()}}}}catch(R){a.e(R)}finally{a.f()}var k=f.a.acquire();j.forEach((function(e){k.push(e)}));var S=f.a.acquire();_.forEach((function(e){S.push(e)}));var M=e._items,I=t.items,T=f.a.acquire();if(x.forEach((function(e){I.indexOf(e)!==M.indexOf(e)&&T.push(e)})),t.listeners&&(k.length||S.length||T.length))for(var A={target:e,added:k,removed:S,moved:T},C=t.listeners.length,E=0;E<C;E++){var P=t.listeners[E];P.removed||P.callback.call(e,A)}f.a.release(k),f.a.release(S),f.a.release(T)};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}j.clear(),_.clear(),x.clear()}}}],[{key:"isCollection",value:function(e){return null!=e&&e instanceof r}}]),n}(d.a.EventedAccessor);M.ofType=function(e){if(!e)return r;if(k.has(e))return k.get(e);var t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(var n in e.typeMap){var a=e.typeMap[n].prototype.declaredClass;t?t+=" | "+a:t=a}var o=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(r);o=Object(i.a)([Object(c.a)("esri.core.Collection<".concat(t,">"))],o);var u={Type:e,ensureType:"function"==typeof e?Object(s.m)(e):Object(s.k)(e)};return Object.defineProperty(o.prototype,"itemType",{value:u}),k.set(e,o),o},Object(i.a)([Object(u.b)()],M.prototype,"length",void 0),Object(i.a)([Object(u.b)()],M.prototype,"items",null),M=r=Object(i.a)([Object(c.a)("esri.core.Collection")],M),t.a=M},LGNZ:function(e,t,n){"use strict";function r(){var e=new Float32Array(6);return e[0]=1,e[3]=1,e}function i(e,t,n,r){var i=t[r],a=t[r+1];e[r]=n[0]*i+n[2]*a+n[4],e[r+1]=n[1]*i+n[3]*a+n[5]}function a(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,s=a||t.length/o,u=r;u<s;u++)i(e,t,n,u*o)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),Object.freeze({__proto__:null,create:r,clone:function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,n,r,i,a){var o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o},createView:function(e,t){return new Float32Array(e,t,6)},transform:i,transformMany:a})},LIH3:function(e,t,n){"use strict";var r,i={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(r=2e3;r<=2045;r++)i[r]=0;for(r=2056;r<=2065;r++)i[r]=0;for(r=2067;r<=2135;r++)i[r]=0;for(r=2137;r<=2154;r++)i[r]=0;for(r=2161;r<=2170;r++)i[r]=0;for(r=2172;r<=2193;r++)i[r]=0;for(r=2195;r<=2198;r++)i[r]=0;for(r=2200;r<=2203;r++)i[r]=0;for(r=2205;r<=2217;r++)i[r]=0;for(r=2222;r<=2224;r++)i[r]=1;for(r=2225;r<=2250;r++)i[r]=2;for(r=2251;r<=2253;r++)i[r]=1;for(r=2257;r<=2264;r++)i[r]=2;for(r=2274;r<=2279;r++)i[r]=2;for(r=2280;r<=2282;r++)i[r]=1;for(r=2283;r<=2289;r++)i[r]=2;for(r=2290;r<=2292;r++)i[r]=0;for(r=2308;r<=2313;r++)i[r]=0;for(r=2315;r<=2491;r++)i[r]=0;for(r=2494;r<=2866;r++)i[r]=0;for(r=2867;r<=2869;r++)i[r]=1;for(r=2870;r<=2888;r++)i[r]=2;for(r=2891;r<=2895;r++)i[r]=2;for(r=2896;r<=2898;r++)i[r]=1;for(r=2902;r<=2908;r++)i[r]=2;for(r=2915;r<=2920;r++)i[r]=2;for(r=2921;r<=2923;r++)i[r]=1;for(r=2924;r<=2930;r++)i[r]=2;for(r=2931;r<=2962;r++)i[r]=0;for(r=2964;r<=2968;r++)i[r]=2;for(r=2969;r<=2973;r++)i[r]=0;for(r=2975;r<=2991;r++)i[r]=0;for(r=2995;r<=3051;r++)i[r]=0;for(r=3054;r<=3079;r++)i[r]=0;for(r=3081;r<=3088;r++)i[r]=0;for(r=3092;r<=3101;r++)i[r]=0;for(r=3106;r<=3138;r++)i[r]=0;for(r=3146;r<=3151;r++)i[r]=0;for(r=3153;r<=3166;r++)i[r]=0;for(r=3168;r<=3172;r++)i[r]=0;for(r=3174;r<=3203;r++)i[r]=0;for(r=3294;r<=3358;r++)i[r]=0;for(r=3367;r<=3403;r++)i[r]=0;for(r=3408;r<=3416;r++)i[r]=0;for(r=3417;r<=3438;r++)i[r]=2;for(r=3441;r<=3446;r++)i[r]=2;for(r=3447;r<=3450;r++)i[r]=0;for(r=3451;r<=3459;r++)i[r]=2;for(r=3460;r<=3478;r++)i[r]=0;for(r=3554;r<=3559;r++)i[r]=0;for(r=3560;r<=3570;r++)i[r]=2;for(r=3571;r<=3581;r++)i[r]=0;for(r=3594;r<=3597;r++)i[r]=0;for(r=3601;r<=3604;r++)i[r]=0;for(r=3637;r<=3639;r++)i[r]=0;for(r=3665;r<=3667;r++)i[r]=0;for(r=3693;r<=3695;r++)i[r]=0;for(r=3701;r<=3727;r++)i[r]=0;for(r=3728;r<=3739;r++)i[r]=2;for(r=3740;r<=3751;r++)i[r]=0;for(r=3753;r<=3760;r++)i[r]=2;for(r=3761;r<=3773;r++)i[r]=0;for(r=3775;r<=3777;r++)i[r]=0;for(r=3779;r<=3781;r++)i[r]=0;for(r=3783;r<=3785;r++)i[r]=0;for(r=3788;r<=3791;r++)i[r]=0;for(r=3797;r<=3802;r++)i[r]=0;for(r=3814;r<=3816;r++)i[r]=0;for(r=3825;r<=3829;r++)i[r]=0;for(r=3832;r<=3841;r++)i[r]=0;for(r=3844;r<=3852;r++)i[r]=0;for(r=3873;r<=3885;r++)i[r]=0;for(r=3890;r<=3893;r++)i[r]=0;for(r=3907;r<=3912;r++)i[r]=0;for(r=3942;r<=3950;r++)i[r]=0;for(r=3968;r<=3970;r++)i[r]=0;for(r=3973;r<=3976;r++)i[r]=0;for(r=3986;r<=3989;r++)i[r]=0;for(r=3994;r<=3997;r++)i[r]=0;for(r=4048;r<=4051;r++)i[r]=0;for(r=4056;r<=4063;r++)i[r]=0;for(r=4093;r<=4096;r++)i[r]=0;for(r=4390;r<=4398;r++)i[r]=0;for(r=4399;r<=4413;r++)i[r]=2;for(r=4418;r<=4433;r++)i[r]=2;for(r=4455;r<=4457;r++)i[r]=2;for(r=4484;r<=4489;r++)i[r]=0;for(r=4491;r<=4554;r++)i[r]=0;for(r=4568;r<=4589;r++)i[r]=0;for(r=4652;r<=4656;r++)i[r]=0;for(r=4766;r<=4800;r++)i[r]=0;for(r=5014;r<=5016;r++)i[r]=0;for(r=5069;r<=5072;r++)i[r]=0;for(r=5105;r<=5130;r++)i[r]=0;for(r=5173;r<=5188;r++)i[r]=0;for(r=5253;r<=5259;r++)i[r]=0;for(r=5269;r<=5275;r++)i[r]=0;for(r=5292;r<=5311;r++)i[r]=0;for(r=5329;r<=5331;r++)i[r]=0;for(r=5343;r<=5349;r++)i[r]=0;for(r=5355;r<=5357;r++)i[r]=0;for(r=5387;r<=5389;r++)i[r]=0;for(r=5459;r<=5463;r++)i[r]=0;for(r=5479;r<=5482;r++)i[r]=0;for(r=5518;r<=5520;r++)i[r]=0;for(r=5530;r<=5539;r++)i[r]=0;for(r=5550;r<=5552;r++)i[r]=0;for(r=5562;r<=5583;r++)i[r]=0;for(r=5623;r<=5625;r++)i[r]=2;for(r=5631;r<=5639;r++)i[r]=0;for(r=5649;r<=5653;r++)i[r]=0;for(r=5663;r<=5680;r++)i[r]=0;for(r=5682;r<=5685;r++)i[r]=0;for(r=5875;r<=5877;r++)i[r]=0;for(r=5896;r<=5899;r++)i[r]=0;for(r=5921;r<=5940;r++)i[r]=0;for(r=6050;r<=6125;r++)i[r]=0;for(r=6244;r<=6275;r++)i[r]=0;for(r=6328;r<=6348;r++)i[r]=0;for(r=6350;r<=6356;r++)i[r]=0;for(r=6366;r<=6372;r++)i[r]=0;for(r=6381;r<=6387;r++)i[r]=0;for(r=6393;r<=6404;r++)i[r]=0;for(r=6480;r<=6483;r++)i[r]=0;for(r=6511;r<=6514;r++)i[r]=0;for(r=6579;r<=6581;r++)i[r]=0;for(r=6619;r<=6624;r++)i[r]=0;for(r=6625;r<=6627;r++)i[r]=2;for(r=6628;r<=6632;r++)i[r]=0;for(r=6634;r<=6637;r++)i[r]=0;for(r=6669;r<=6692;r++)i[r]=0;for(r=6707;r<=6709;r++)i[r]=0;for(r=6720;r<=6723;r++)i[r]=0;for(r=6732;r<=6738;r++)i[r]=0;for(r=6931;r<=6933;r++)i[r]=0;for(r=6956;r<=6959;r++)i[r]=0;for(r=7005;r<=7007;r++)i[r]=0;for(r=7057;r<=7070;r++)i[r]=2;for(r=7074;r<=7082;r++)i[r]=0;for(r=7109;r<=7118;r++)i[r]=0;for(r=7119;r<=7127;r++)i[r]=1;for(r=7374;r<=7376;r++)i[r]=0;for(r=7528;r<=7586;r++)i[r]=0;for(r=7587;r<=7645;r++)i[r]=2;for(r=7692;r<=7696;r++)i[r]=0;for(r=7755;r<=7787;r++)i[r]=0;for(r=7791;r<=7795;r++)i[r]=0;for(r=7799;r<=7801;r++)i[r]=0;for(r=7803;r<=7805;r++)i[r]=0;for(r=7825;r<=7831;r++)i[r]=0;for(r=7845;r<=7859;r++)i[r]=0;for(r=8013;r<=8032;r++)i[r]=0;for(r=8065;r<=8068;r++)i[r]=1;for(r=8518;r<=8529;r++)i[r]=2;for(r=8533;r<=8536;r++)i[r]=2;for(r=8538;r<=8540;r++)i[r]=2;for(r=8677;r<=8679;r++)i[r]=0;for(r=8836;r<=8840;r++)i[r]=0;for(r=8857;r<=8859;r++)i[r]=0;for(r=8908;r<=8910;r++)i[r]=0;for(r=9154;r<=9159;r++)i[r]=0;for(r=9205;r<=9218;r++)i[r]=0;for(r=9271;r<=9273;r++)i[r]=0;for(r=9295;r<=9297;r++)i[r]=0;for(r=20002;r<=20032;r++)i[r]=0;for(r=20062;r<=20092;r++)i[r]=0;for(r=20135;r<=20138;r++)i[r]=0;for(r=20248;r<=20258;r++)i[r]=0;for(r=20348;r<=20358;r++)i[r]=0;for(r=20436;r<=20440;r++)i[r]=0;for(r=20822;r<=20824;r++)i[r]=0;for(r=20934;r<=20936;r++)i[r]=0;for(r=21035;r<=21037;r++)i[r]=0;for(r=21095;r<=21097;r++)i[r]=0;for(r=21148;r<=21150;r++)i[r]=0;for(r=21413;r<=21423;r++)i[r]=0;for(r=21453;r<=21463;r++)i[r]=0;for(r=21473;r<=21483;r++)i[r]=0;for(r=21780;r<=21782;r++)i[r]=0;for(r=21891;r<=21894;r++)i[r]=0;for(r=21896;r<=21899;r++)i[r]=0;for(r=22171;r<=22177;r++)i[r]=0;for(r=22181;r<=22187;r++)i[r]=0;for(r=22191;r<=22197;r++)i[r]=0;for(r=22234;r<=22236;r++)i[r]=0;for(r=22521;r<=22525;r++)i[r]=0;for(r=22991;r<=22994;r++)i[r]=0;for(r=23028;r<=23038;r++)i[r]=0;for(r=23830;r<=23853;r++)i[r]=0;for(r=23866;r<=23872;r++)i[r]=0;for(r=23877;r<=23884;r++)i[r]=0;for(r=23886;r<=23894;r++)i[r]=0;for(r=23946;r<=23948;r++)i[r]=0;for(r=24311;r<=24313;r++)i[r]=0;for(r=24342;r<=24347;r++)i[r]=0;for(r=24370;r<=24374;r++)i[r]=10;for(r=24375;r<=24381;r++)i[r]=0;for(r=24718;r<=24721;r++)i[r]=0;for(r=24817;r<=24821;r++)i[r]=0;for(r=24877;r<=24882;r++)i[r]=0;for(r=24891;r<=24893;r++)i[r]=0;for(r=25391;r<=25395;r++)i[r]=0;for(r=25828;r<=25838;r++)i[r]=0;for(r=26191;r<=26195;r++)i[r]=0;for(r=26391;r<=26393;r++)i[r]=0;for(r=26701;r<=26722;r++)i[r]=0;for(r=26729;r<=26799;r++)i[r]=2;for(r=26801;r<=26803;r++)i[r]=2;for(r=26811;r<=26813;r++)i[r]=2;for(r=26847;r<=26870;r++)i[r]=2;for(r=26891;r<=26899;r++)i[r]=0;for(r=26901;r<=26923;r++)i[r]=0;for(r=26929;r<=26946;r++)i[r]=0;for(r=26948;r<=26998;r++)i[r]=0;for(r=27037;r<=27040;r++)i[r]=0;for(r=27205;r<=27232;r++)i[r]=0;for(r=27258;r<=27260;r++)i[r]=0;for(r=27391;r<=27398;r++)i[r]=0;for(r=27561;r<=27564;r++)i[r]=0;for(r=27571;r<=27574;r++)i[r]=0;for(r=27581;r<=27584;r++)i[r]=0;for(r=27591;r<=27594;r++)i[r]=0;for(r=28191;r<=28193;r++)i[r]=0;for(r=28348;r<=28358;r++)i[r]=0;for(r=28402;r<=28432;r++)i[r]=0;for(r=28462;r<=28492;r++)i[r]=0;for(r=29118;r<=29122;r++)i[r]=0;for(r=29168;r<=29172;r++)i[r]=0;for(r=29177;r<=29185;r++)i[r]=0;for(r=29187;r<=29195;r++)i[r]=0;for(r=29900;r<=29903;r++)i[r]=0;for(r=30161;r<=30179;r++)i[r]=0;for(r=30491;r<=30494;r++)i[r]=0;for(r=30729;r<=30732;r++)i[r]=0;for(r=31251;r<=31259;r++)i[r]=0;for(r=31265;r<=31268;r++)i[r]=0;for(r=31275;r<=31279;r++)i[r]=0;for(r=31281;r<=31297;r++)i[r]=0;for(r=31461;r<=31469;r++)i[r]=0;for(r=31491;r<=31495;r++)i[r]=0;for(r=31917;r<=31922;r++)i[r]=0;for(r=31965;r<=32e3;r++)i[r]=0;for(r=32001;r<=32003;r++)i[r]=2;for(r=32005;r<=32031;r++)i[r]=2;for(r=32033;r<=32060;r++)i[r]=2;for(r=32064;r<=32067;r++)i[r]=2;for(r=32074;r<=32077;r++)i[r]=2;for(r=32081;r<=32086;r++)i[r]=0;for(r=32107;r<=32130;r++)i[r]=0;for(r=32133;r<=32158;r++)i[r]=0;for(r=32164;r<=32167;r++)i[r]=2;for(r=32180;r<=32199;r++)i[r]=0;for(r=32201;r<=32260;r++)i[r]=0;for(r=32301;r<=32360;r++)i[r]=0;for(r=32601;r<=32662;r++)i[r]=0;for(r=32664;r<=32667;r++)i[r]=2;for(r=32701;r<=32761;r++)i[r]=0;for(r=53001;r<=53004;r++)i[r]=0;for(r=53008;r<=53019;r++)i[r]=0;for(r=53021;r<=53032;r++)i[r]=0;for(r=53034;r<=53037;r++)i[r]=0;for(r=53042;r<=53046;r++)i[r]=0;for(r=53074;r<=53080;r++)i[r]=0;for(r=54001;r<=54004;r++)i[r]=0;for(r=54008;r<=54019;r++)i[r]=0;for(r=54021;r<=54032;r++)i[r]=0;for(r=54034;r<=54037;r++)i[r]=0;for(r=54042;r<=54046;r++)i[r]=0;for(r=54048;r<=54053;r++)i[r]=0;for(r=54074;r<=54080;r++)i[r]=0;for(r=54098;r<=54101;r++)i[r]=0;for(r=102001;r<=102040;r++)i[r]=0;for(r=102042;r<=102063;r++)i[r]=0;for(r=102065;r<=102067;r++)i[r]=0;for(r=102070;r<=102117;r++)i[r]=0;for(r=102122;r<=102216;r++)i[r]=0;for(r=102221;r<=102377;r++)i[r]=0;for(r=102382;r<=102388;r++)i[r]=0;for(r=102389;r<=102398;r++)i[r]=2;for(r=102399;r<=102444;r++)i[r]=0;for(r=102445;r<=102447;r++)i[r]=2;for(r=102448;r<=102458;r++)i[r]=0;for(r=102459;r<=102468;r++)i[r]=2;for(r=102469;r<=102499;r++)i[r]=0;for(r=102500;r<=102519;r++)i[r]=1;for(r=102520;r<=102524;r++)i[r]=0;for(r=102525;r<=102529;r++)i[r]=2;for(r=102530;r<=102588;r++)i[r]=0;for(r=102590;r<=102598;r++)i[r]=0;for(r=102601;r<=102603;r++)i[r]=0;for(r=102605;r<=102628;r++)i[r]=0;for(r=102629;r<=102646;r++)i[r]=2;for(r=102648;r<=102700;r++)i[r]=2;for(r=102701;r<=102703;r++)i[r]=0;for(r=102707;r<=102730;r++)i[r]=2;for(r=102733;r<=102758;r++)i[r]=2;for(r=102767;r<=102900;r++)i[r]=0;for(r=102965;r<=102969;r++)i[r]=0;for(r=102971;r<=102973;r++)i[r]=0;for(r=102975;r<=102989;r++)i[r]=0;for(r=102990;r<=102992;r++)i[r]=1;for(r=102997;r<=103002;r++)i[r]=0;for(r=103003;r<=103008;r++)i[r]=2;for(r=103009;r<=103011;r++)i[r]=0;for(r=103012;r<=103014;r++)i[r]=2;for(r=103019;r<=103021;r++)i[r]=0;for(r=103022;r<=103024;r++)i[r]=2;for(r=103029;r<=103031;r++)i[r]=0;for(r=103032;r<=103034;r++)i[r]=2;for(r=103065;r<=103068;r++)i[r]=0;for(r=103074;r<=103076;r++)i[r]=0;for(r=103077;r<=103079;r++)i[r]=1;for(r=103080;r<=103082;r++)i[r]=0;for(r=103083;r<=103085;r++)i[r]=2;for(r=103090;r<=103093;r++)i[r]=0;for(r=103097;r<=103099;r++)i[r]=0;for(r=103100;r<=103102;r++)i[r]=2;for(r=103107;r<=103109;r++)i[r]=0;for(r=103110;r<=103112;r++)i[r]=2;for(r=103113;r<=103116;r++)i[r]=0;for(r=103117;r<=103120;r++)i[r]=2;for(r=103153;r<=103157;r++)i[r]=0;for(r=103158;r<=103162;r++)i[r]=2;for(r=103163;r<=103165;r++)i[r]=0;for(r=103166;r<=103168;r++)i[r]=1;for(r=103169;r<=103171;r++)i[r]=2;for(r=103186;r<=103188;r++)i[r]=0;for(r=103189;r<=103191;r++)i[r]=2;for(r=103192;r<=103195;r++)i[r]=0;for(r=103196;r<=103199;r++)i[r]=2;for(r=103200;r<=103224;r++)i[r]=0;for(r=103225;r<=103227;r++)i[r]=1;for(r=103232;r<=103237;r++)i[r]=0;for(r=103238;r<=103243;r++)i[r]=2;for(r=103244;r<=103246;r++)i[r]=0;for(r=103247;r<=103249;r++)i[r]=2;for(r=103254;r<=103256;r++)i[r]=0;for(r=103257;r<=103259;r++)i[r]=2;for(r=103264;r<=103266;r++)i[r]=0;for(r=103267;r<=103269;r++)i[r]=2;for(r=103300;r<=103375;r++)i[r]=0;for(r=103381;r<=103383;r++)i[r]=0;for(r=103384;r<=103386;r++)i[r]=1;for(r=103387;r<=103389;r++)i[r]=0;for(r=103390;r<=103392;r++)i[r]=2;for(r=103397;r<=103399;r++)i[r]=0;for(r=103400;r<=103471;r++)i[r]=2;for(r=103476;r<=103478;r++)i[r]=0;for(r=103479;r<=103481;r++)i[r]=2;for(r=103486;r<=103488;r++)i[r]=0;for(r=103489;r<=103491;r++)i[r]=2;for(r=103492;r<=103495;r++)i[r]=0;for(r=103496;r<=103499;r++)i[r]=2;for(r=103528;r<=103543;r++)i[r]=0;for(r=103544;r<=103548;r++)i[r]=2;for(r=103549;r<=103551;r++)i[r]=0;for(r=103552;r<=103554;r++)i[r]=1;for(r=103555;r<=103557;r++)i[r]=2;for(r=103558;r<=103560;r++)i[r]=0;for(r=103571;r<=103573;r++)i[r]=0;for(r=103574;r<=103576;r++)i[r]=2;for(r=103577;r<=103580;r++)i[r]=0;for(r=103581;r<=103583;r++)i[r]=2;for(r=103595;r<=103694;r++)i[r]=0;for(r=103696;r<=103699;r++)i[r]=0;for(r=103700;r<=103793;r++)i[r]=2;for(r=103794;r<=103872;r++)i[r]=0;for(r=103900;r<=103971;r++)i[r]=2;t.a=i},LOvY:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},LXJO:function(e,t){e.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'},LbAs:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("Lqtk");function i(e,t){return a.apply(this,arguments)}function a(){return(a=Ut(regeneratorRuntime.mark((function e(t,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.default)(t,Nt({responseType:"image"},n));case 2:return i=e.sent,a=i.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},LdQC:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n("wSAH");var r=n("6S2I"),i=n("nZ3f");function a(e,t,n){if(e&&t)if("object"==typeof t){var r,o=Vt(Object.getOwnPropertyNames(t));try{for(o.s();!(r=o.n()).done;){var s=r.value;a(e,s,t[s])}}catch(l){o.e(l)}finally{o.f()}}else{if(-1!==t.indexOf(".")){var u=t.split("."),c=u.splice(u.length-1,1)[0];return void a(Object(i.b)(e,u),c,n)}e[t]=n}}r.a.getLogger("esri.core.accessorSupport.set")},"Lg+x":function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return v}));var r,i,a=n("bJda"),o=n("srIe"),s=n("Cy1f"),u=n("15Hh"),c=n("gYg2"),l=n("r+FG"),h=n("GlSV"),f=n("DLk3"),p=n("uljd");function d(e,t,n,r,i,a,o,s,u,l,h){var f,p,d=b[h.mode],v=0;if(Object(c.k)(e,t,n,r,u.spatialReference,i,s))return d.requiresAlignment(h)?(v=d.applyElevationAlignmentBuffer(r,i,a,o,s,u,l,h),f=a,p=o):(f=r,p=i),Object(c.k)(f,u.spatialReference,p,a,l.spatialReference,o,s)?v:void 0}function v(e,t,n,r,i){var s=(Object(h.c)(e)?e.z:Object(f.b)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":var u=Object(o.r)(Object(f.a)(t,e,"ground"),0);return i&&(i.verticalDistanceToGround=0,i.sampledElevation=u),u;case"relative-to-ground":var c=Object(o.r)(Object(f.a)(t,e,"ground"),0),l=n.geometryZWithOffset(s,r);return i&&(i.verticalDistanceToGround=l,i.sampledElevation=c),l+c;case"relative-to-scene":var p=Object(o.r)(Object(f.a)(t,e,"scene"),0),d=n.geometryZWithOffset(s,r);return i&&(i.verticalDistanceToGround=d,i.sampledElevation=p),d+p;case"absolute-height":var v=n.geometryZWithOffset(s,r);if(i){var y=Object(o.r)(Object(f.a)(t,e,"ground"),0);i.verticalDistanceToGround=v-y,i.sampledElevation=y}return v;default:return Object(a.a)(n.mode),0}}function y(e,t,n,r,i){var a=v(t,n,i,r,m);Object(p.b)(e,m.verticalDistanceToGround);var o=m.sampledElevation,s=Object(u.c)(g,e.transformation);return w[0]=t.x,w[1]=t.y,w[2]=a,Object(c.d)(t.spatialReference,w,s,r.spatialReference)?e.transformation=s:console.warn("Could not locate symbol object properly, it might be misplaced"),o}(i=r||(r={}))[i.NONE=0]="NONE",i[i.UPDATE=1]="UPDATE",i[i.RECREATE=2]="RECREATE";var b={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a,o,s){var u=s.calculateOffsetRenderUnits(o),c=s.featureExpressionInfoContext;t*=3,r*=3;for(var l=0;l<i;++l){var h=e[t+1],f=e[t+2];n[r+0]=e[t+0],n[r+1]=h,n[r+2]=null==c?f+u:u,t+=3,r+=3}return 0},requiresAlignment:function(e){return 0!==e.meterUnitOffset||null!=e.featureExpressionInfoContext}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a){var s=0,u=a.spatialReference;t*=3,r*=3;for(var c=0;c<i;++c){var l=e[t+0],h=e[t+1],f=e[t+2],p=Object(o.r)(a.getElevation(l,h,f,u,"ground"),0);s+=p,n[r+0]=l,n[r+1]=h,n[r+2]=p,t+=3,r+=3}return s/i},requiresAlignment:function(){return!0}},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a,s,u){var c=0,l=u.calculateOffsetRenderUnits(s),h=u.featureExpressionInfoContext,f=a.spatialReference;t*=3,r*=3;for(var p=0;p<i;++p){var d=e[t+0],v=e[t+1],y=e[t+2],b=Object(o.r)(a.getElevation(d,v,y,f,"ground"),0);c+=b,n[r+0]=d,n[r+1]=v,n[r+2]=null==h?y+b+l:b+l,t+=3,r+=3}return c/i},requiresAlignment:function(){return!0}},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a,s,u){var c=0,l=u.calculateOffsetRenderUnits(s),h=u.featureExpressionInfoContext,f=a.spatialReference;t*=3,r*=3;for(var p=0;p<i;++p){var d=e[t+0],v=e[t+1],y=e[t+2],b=Object(o.r)(a.getElevation(d,v,y,f,"scene"),0);c+=b,n[r+0]=d,n[r+1]=v,n[r+2]=null==h?y+b+l:b+l,t+=3,r+=3}return c/i},requiresAlignment:function(){return!0}}},g=Object(l.b)(),m={verticalDistanceToGround:0,sampledElevation:0},w=Object(s.e)()},LoQE:function(e,t,n){"use strict";var r=n("vXsN");function i(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}(i.prototype=new r).readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},Lqtk:function(e,t,n){"use strict";n.r(t);var r,i=n("3r0u"),a=n("wSAH"),o=n("f/qv"),s=n("EyXx"),u=n("srIe"),c=n("zlDU"),l=n("4EHJ"),h=n("9MzC"),f=n("975N"),p=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"],d=n("Ioo4");function v(e,t){return y.apply(this,arguments)}function y(){return(y=Ut(regeneratorRuntime.mark((function e(t,o){var d,y,m,w,O,k,I,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=Object(l.u)(t),(y=Object(l.t)(t))||d||(t=Object(l.C)(t)),m={url:t,requestOptions:Nt({},Object(u.q)(o))},!(w=Object(l.l)(t))){e.next=11;break}return e.next=7,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.responseData){e.next=2;break}return e.abrupt("return",t.responseData);case 2:if(t.headers&&(n.requestOptions.headers=Nt(Nt({},n.requestOptions.headers),t.headers)),t.query&&(n.requestOptions.query=Nt(Nt({},n.requestOptions.query),t.query)),!t.before){e.next=15;break}return e.prev=3,e.next=6,t.before(n);case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),r=_("request:interceptor",e.t0,n);case 12:if((i instanceof Error||i instanceof c.a)&&(r=_("request:interceptor",i,n)),!r){e.next=14;break}throw t.error&&t.error(r),r;case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}()(w,m);case 7:if(null==(O=e.sent)){e.next=10;break}return e.abrupt("return",{data:O,getHeader:j,requestOptions:m.requestOptions,url:m.url});case 10:w.after||w.error||(w=null);case 11:if(t=m.url,"image"!==(o=m.requestOptions).responseType){e.next=16;break}if(!Object(a.a)("host-webworker")&&!Object(a.a)("host-node")){e.next=14;break}throw _("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),m);case 14:e.next=18;break;case 16:if(!d){e.next=18;break}throw _("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+o.responseType),m);case 18:if("head"!==o.method){e.next=23;break}if(!o.body){e.next=21;break}throw _("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),m);case 21:if(!d&&!y){e.next=23;break}throw _("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),m);case 23:return e.next=25,Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(a.a)("host-webworker")){e.next=8;break}if(e.t0=r,e.t0){e.next=6;break}return e.next=5,n.e(113).then(n.bind(null,"ZsKd"));case 5:r=e.sent;case 6:e.next=9;break;case 8:v._abortableFetch||(v._abortableFetch=i.a.fetch.bind(i.a));case 9:case"end":return e.stop()}}),e)})))();case 25:if(!r){e.next=27;break}return e.abrupt("return",r.execute(t,o));case 27:return k=Object(h.d)(),Object(h.p)(o,(function(){return k.abort()})),I={controller:k,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:w,params:m,redoRequest:!1,useIdentity:b.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},e.next=32,function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n,r,a,o,u,c,d,y,m,w,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n,r,a,o,u,c,d,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.url,r=t.params.requestOptions,a=t.controller.signal,o=r.body,u=null,c=null,d=null,g&&"HTMLFormElement"in i.a&&(o instanceof FormData?u=o:o instanceof HTMLFormElement&&(c=o,u=new FormData(c))),"string"==typeof o&&(d=o),t.fetchOptions={cache:r.cacheBust&&!v._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:a},(u||d)&&(t.fetchOptions.body=u||d),"anonymous"===r.authMode&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(n)||r.query&&r.query.token||u&&u.get&&u.get("token")||c&&c.elements.token),!t.hasToken&&s.a.apiKey&&function(e){var t=Object(l.m)(e,!0);return t&&t.endsWith(".arcgis.com")&&!p.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}(n)&&(r.query||(r.query={}),r.query.token=s.a.apiKey,t.hasToken=!0),!t.useIdentity||t.hasToken||t.credentialToken||S(n)||Object(h.n)(a)){e.next=23;break}if("immediate"!==r.authMode){e.next=12;break}return e.next=6,x();case 6:return e.next=8,f.b.getCredential(n,{signal:a});case 8:y=e.sent,t.credential=y,e.next=22;break;case 12:if("no-prompt"!==r.authMode){e.next=21;break}return e.next=15,x();case 15:return e.next=17,f.b.getCredential(n,{prompt:!1,signal:a}).catch((function(){}));case 17:y=e.sent,t.credential=y,e.next=22;break;case 21:f.b&&(y=f.b.findCredential(n));case 22:y&&(t.credentialToken=y.token,t.useSSL=!!y.ssl);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:e.prev=2;case 3:return e.next=5,M(t);case 5:a=e.sent,o=zt(a,2),n=o[0],r=o[1];case 9:return e.next=11,A(t,n,r);case 11:if(!e.sent){e.next=3;break}case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(2),(u=_("request:server",e.t0,t.params,n)).details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(u),u;case 18:return c=t.params.url,/\/sharing\/rest\/(accounts|portals)\/self/i.test(c)&&!t.hasToken&&!t.credentialToken&&r&&r.user&&r.user.username&&!Object(l.x)(c)&&(d=Object(l.m)(c,!0))&&b.trustedServers.push(d),(y=t.credential)&&f.b&&(m=f.b.findServerInfo(y.server),(w=m&&m.owningSystemUrl)&&(w=w.replace(/\/?$/,"/sharing"),(O=f.b.findCredential(w,y.userId))&&-1===f.b._getIdenticalSvcIdx(w,O)&&O.resources.unshift(w))),e.abrupt("return",{data:r,getHeader:n?function(e){return n.headers.get(e)}:j,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url});case 23:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}()(I);case 32:return T=e.sent,e.abrupt("return",(w&&w.after&&w.after(T),T));case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=s.a.request,g="FormData"in i.a,m=[499,498,403,401],w=["COM_0056","COM_0057","SB_0008"],O=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],j=function(){return null};function _(e,t,n,r){var i="Error",a={url:n.url,requestOptions:n.requestOptions,getHeader:j,ssl:!1};if(t instanceof c.a)return t.details?(t.details=Object(o.a)(t.details),t.details.url=n.url,t.details.requestOptions=n.requestOptions):t.details=a,t;if(t){var s=r&&function(e){return r.headers.get(e)},u=r&&r.status,l=t.message;l&&(i=l),s&&(a.getHeader=s),a.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||u||0,a.subCode=t.subcode,a.messageCode=t.messageCode,a.messages="string"==typeof t.details?[t.details]:t.details}return Object(h.m)(t)?Object(h.e)():new c.a(e,i,a)}function x(){return k.apply(this,arguments)}function k(){return(k=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=f.b,e.t0){e.next=4;break}return e.next=4,n.e(124).then(n.bind(null,"2ByA"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return O.some((function(t){return t.test(e)}))}function M(e){return I.apply(this,arguments)}function I(){return(I=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,u,c,p,d,y,m,w,O,j,x,k,S,M,I,A,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.url,r=t.params.requestOptions,i=t.fetchOptions,o=Object(l.t)(n)||Object(l.u)(n),s=r.responseType||"json",u=o?0:null!=r.timeout?r.timeout:b.timeout,c=!1,o){e.next=23;break}if(t.useSSL&&(n=Object(l.I)(n)),r.cacheBust&&"default"===i.cache&&(n=Object(l.d)(n,"request.preventCache",Date.now())),p=Nt({},r.query),t.credentialToken&&(p.token=t.credentialToken),d=Object(l.D)(p),Object(a.a)("esri-url-encodes-apostrophe")&&(d=d.replace(/'/g,"%27")),y=n.length+1+d.length,c="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||y>b.maxUrlLength,(w=r.useProxy||!!Object(l.o)(n))&&(O=Object(l.p)(n),m=O.path,!c&&m.length+1+y>b.maxUrlLength&&(c=!0),O.query&&(p=Nt(Nt({},O.query),p))),"HEAD"!==i.method||!c&&!w){e.next=20;break}if(!c){e.next=18;break}if(!(y>b.maxUrlLength)){e.next=17;break}throw _("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params);case 17:throw _("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);case 18:if(!w){e.next=20;break}throw _("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params);case 20:c?(i.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?n=Object(l.e)(n,p):(i.body=Object(l.D)(p),i.headers["Content-Type"]="application/x-www-form-urlencoded")):n=Object(l.e)(n,p),w&&(t.useProxy=!0,n="".concat(m,"?").concat(n)),p.token&&g&&i.body instanceof FormData&&((j=i.body).set?j.set("token",p.token):j.append("token",p.token)),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:Object(l.q)(n,l.g)||(Object(l.x)(n)||f.b&&(x=f.b.findServerInfo(n))&&x.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(i.credentials="include");case 23:if(M=0,I=!1,u>0&&(M=setTimeout((function(){I=!0,t.controller.abort()}),u)),e.prev=25,"image"===r.responseType&&"default"===i.cache&&"GET"===i.method&&!c&&!function(e){if(e){var t,n=Vt(Object.getOwnPropertyNames(e));try{for(n.s();!(t=n.n()).done;){if(e[t.value])return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}(r.headers)&&(o||t.useProxy||!b.proxyUrl||function(e){var t=Object(l.m)(e);return!t||t.endsWith(".arcgis.com")||-1!==v._corsServers.indexOf(t)||Object(l.x)(t)}(n))){e.next=79;break}return e.next=29,v._abortableFetch(n,i);case 29:if(k=e.sent,t.useProxy||function(e){if(!Object(l.t)(e)&&!Object(l.u)(e)){var t=Object(l.m)(e);t&&-1===v._corsServers.indexOf(t)&&v._corsServers.push(t)}}(n),!k.ok||"HEAD"===i.method){e.next=77;break}e.t0=s,e.next="array-buffer"===e.t0?35:"blob"===e.t0||"image"===e.t0?39:43;break;case 35:return e.next=37,k.arrayBuffer();case 37:return S=e.sent,e.abrupt("break",46);case 39:return e.next=41,k.blob();case 41:return S=e.sent,e.abrupt("break",46);case 43:return e.next=45,k.text();case 45:S=e.sent;case 46:if(M&&(clearTimeout(M),M=0),"json"!==s&&"xml"!==s&&"document"!==s){e.next=59;break}if(!S){e.next=58;break}e.t1=s,e.next="json"===e.t1?51:"xml"===e.t1?53:"document"===e.t1?55:56;break;case 51:return S=JSON.parse(S),e.abrupt("break",56);case 53:return S=T(S,"application/xml"),e.abrupt("break",56);case 55:S=T(S,"text/html");case 56:e.next=59;break;case 58:S=null;case 59:if(!S){e.next=77;break}if("array-buffer"!==s&&"blob"!==s){e.next=72;break}if(A=k.headers.get("Content-Type"),!(/application\/json|text\/plain/i.test(A)&&S["blob"===s?"size":"byteLength"]<=750)){e.next=72;break}return e.prev=63,e.next=66,new Response(S).json();case 66:(C=e.sent).error&&(S=C),e.next=72;break;case 70:e.prev=70,e.t2=e.catch(63);case 72:if(e.t3="image"===s&&S instanceof Blob,!e.t3){e.next=77;break}return e.next=76,E(URL.createObjectURL(S),t,!0);case 76:S=e.sent;case 77:e.next=82;break;case 79:return e.next=81,E(n,t);case 81:S=e.sent;case 82:e.next=93;break;case 84:if(e.prev=84,e.t4=e.catch(25),"AbortError"!==e.t4.name){e.next=90;break}if(!I){e.next=89;break}throw new Error("Timeout exceeded");case 89:throw Object(h.e)("Request canceled");case 90:if(!k&&e.t4 instanceof TypeError&&b.proxyUrl&&!r.body&&"delete"!==r.method&&"head"!==r.method&&"post"!==r.method&&"put"!==r.method&&!t.useProxy){e.next=92;break}throw e.t4;case 92:t.redoRequest=!0,Object(l.c)({proxyUrl:b.proxyUrl,urlPrefix:Object(l.F)(Object(l.J)(n).path)});case 93:return e.prev=93,M&&clearTimeout(M),e.finish(93);case 96:return e.abrupt("return",[k,S]);case 97:case"end":return e.stop()}}),e,null,[[25,84,93,96],[63,70]])})))).apply(this,arguments)}function T(e,t){var n;try{n=(new DOMParser).parseFromString(e,t)}catch(r){}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}function A(e,t,n){return C.apply(this,arguments)}function C(){return(C=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.redoRequest){e.next=2;break}return e.abrupt("return",(t.redoRequest=!1,!1));case 2:if(n){e.next=4;break}return e.abrupt("return",!0);case 4:if(n.ok){e.next=6;break}throw new Error("Unable to load ".concat(n.url," status: ").concat(n.status));case 6:if(r&&r.error&&(i=Object.assign(new Error,r.error)),i&&(a=Number(i.code),o=i.hasOwnProperty("subcode")?Number(i.subcode):null,s=(s=i.messageCode)&&s.toUpperCase()),u=t.params.requestOptions.authMode,403!==a||!(4===o||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&-1===i.message.toLowerCase().indexOf("permission"))){e.next=13;break}if(t.useSSL){e.next=11;break}return e.abrupt("return",(t.useSSL=!0,!1));case 11:e.next=28;break;case 13:if(t.hasToken||!t.useIdentity||"no-prompt"===u&&498!==a||-1===m.indexOf(a)||S(t.params.url)||!(403!==a||-1===w.indexOf(s)&&(null==o||2===o&&t.credentialToken))){e.next=28;break}return e.next=16,x();case 16:return e.prev=16,e.next=19,f.b.getCredential(t.params.url,{error:_("request:server",i,t.params),prompt:"no-prompt"!==u,signal:t.controller.signal,token:t.credentialToken});case 19:return c=e.sent,e.abrupt("return",(t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1));case 23:if(e.prev=23,e.t0=e.catch(16),"no-prompt"!==u){e.next=27;break}return e.abrupt("return",(t.credential=null,t.credentialToken=null,!1));case 27:i=e.t0;case 28:if(!i){e.next=30;break}throw i;case 30:return e.abrupt("return",!0);case 31:case"end":return e.stop()}}),e,null,[[16,23]])})))).apply(this,arguments)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.controller.signal,i=new Image;return i.crossOrigin=t.withCredentials?"use-credentials":"anonymous",i.alt="",i.src=e,Object(d.a)(i,e,n,r)}v._abortableFetch=null,v._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],t.default=v},LrR4:function(e,t,n){"use strict";var r=n("vWU8"),i=n("9aYe");function a(e,t){this.data=e,t||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}(a.prototype=new r).byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=a},"Lrt+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={divisor:0};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Nt(Nt({},r),t);var n=e.stride;return e.fieldNames.filter((function(t){var n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((function(r){var i=e.fields.get(r),o=i.constructor.ElementCount,s=a(i.constructor.ElementType);return{name:r,stride:n,count:o,type:s,offset:i.offset,normalized:!(!i.optional||!i.optional.glNormalized),divisor:t.divisor}}))}function a(e){var t=o[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}var o={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},M0lq:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return j})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return x})),n.d(t,"r",(function(){return a})),n.d(t,"s",(function(){return _})),n.d(t,"t",(function(){return l})),n.d(t,"u",(function(){return h}));var r=n("QhKk");function i(e,t){return e[0]=t[0],e[1]=t[1],e}function a(e,t,n){return e[0]=t,e[1]=n,e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function c(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function l(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function h(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function f(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function p(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function d(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function v(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function y(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function b(e){var t=e[0],n=e[1];return t*t+n*n}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e}function m(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]}function O(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function j(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function _(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function x(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=i*s-a*o+n[0],e[1]=i*o+a*s+n[1],e}function k(e,t){return e[0]===t[0]&&e[1]===t[1]}var S=s;Object.freeze({__proto__:null,copy:i,set:a,add:o,subtract:s,multiply:u,divide:c,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:l,max:h,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:f,scaleAndAdd:p,distance:d,squaredDistance:v,length:y,squaredLength:b,negate:g,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:m,dot:w,cross:O,lerp:j,random:function(e,t){t=t||1;var n=2*Object(r.b)()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},transformMat2:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},transformMat2d:_,transformMat3:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},transformMat4:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},rotate:x,angle:function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:k,equals:function(e,t){var n=e[0],i=e[1],a=t[0],o=t[1];return Math.abs(n-a)<=r.a*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.a*Math.max(1,Math.abs(i),Math.abs(o))},len:y,sub:S,mul:u,div:c,dist:d,sqrDist:v,sqrLen:b})},MCLT:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),u=r[n];n<a;u=r[++n])v(u)||!w(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(e,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&_(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=l(e,i,r)),i}var a=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),j(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(n);if(0===o.length){if(_(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(m(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(j(n))return h(n)}var u,c="",w=!1,x=["{","}"];return p(n)&&(w=!0,x=["[","]"]),_(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),m(n)&&(c=" "+RegExp.prototype.toString.call(n)),O(n)&&(c=" "+Date.prototype.toUTCString.call(n)),j(n)&&(c=" "+h(n)),0!==o.length||w&&0!=n.length?r<0?m(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=w?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)I(t,String(o))?a.push(f(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(f(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return f(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,c,x)):x[0]+c+x[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=e.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),g(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function g(e){return void 0===e}function m(e){return w(e)&&"[object RegExp]"===x(e)}function w(e){return"object"==typeof e&&null!==e}function O(e){return w(e)&&"[object Date]"===x(e)}function j(e){return w(e)&&("[object Error]"===x(e)||e instanceof Error)}function _(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(g(a)&&(a=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=process.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=d,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=m,t.isObject=w,t.isDate=O,t.isError=j,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",M(),t.format.apply(t,arguments))},t.inherits=n("KKCa"),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(o){n(o)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return r.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(a,null,e)}),(function(e){process.nextTick(A,e,a)}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},MD9Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("r88o"),o=n("04ZG"),s=n("4EHJ"),u=(n("ju1D"),n("9AIY"),n("9MzC")),c=n("WZb1"),l=n("OvF4"),h=n("Lqtk"),f=n("VJrH"),p=n("IvSi"),d=function(e){var t=function(e){Kt(i,e);var t,n,r=Xt(i);function i(){var e;return Wt(this,i),(e=r.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=null,e}return Zt(i,[{key:"readCapabilities",value:function(e,t){var n=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!n)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var r=this.type,i=-1!==n.indexOf("query"),a=-1!==n.indexOf("map"),o=!!t.exportTilesAllowed,s=-1!==n.indexOf("tilemap"),u="tile"!==r&&!!t.supportsDynamicLayers,c="tile"!==r&&(!t.tileInfo||u),l="tile"!==r&&(!t.tileInfo||u),h="tile"!==r,p=!!t.cimVersion&&f.a.parse(t.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:a,supportsExportTiles:o,supportsTileMap:s},exportMap:a?{supportsArcadeExpressionForLabeling:p,supportsSublayersChanges:h,supportsDynamicLayers:u,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:l}:null,exportTiles:o?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var n=t.currentVersion;return n||(n=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}},{key:"fetchSublayerInfo",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(n);case 2:return e.abrupt("return",this._allLayersAndTablesMap.get(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"fetchAllLayersAndTables",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(h.default)(Object(s.J)(this.url).path+"/layers",{responseType:"json",query:Nt({f:"json"},this.customParameters)}).then((function(e){r._allLayersAndTablesMap=new Map;var t,n=Vt(e.data.layers);try{for(n.s();!(t=n.n()).done;){var i=t.value;r._allLayersAndTablesMap.set(i.id,i)}}catch(a){n.e(a)}finally{n.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(n=e.sent,Object(u.u)(t),!("result"in n)){e.next=8;break}return e.abrupt("return",n.result);case 8:throw n.error;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(e);return Object(r.a)([Object(i.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(r.a)([Object(a.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(r.a)([Object(i.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(r.a)([Object(i.b)({type:l.a})],t.prototype,"fullExtent",void 0),Object(r.a)([Object(i.b)(p.c)],t.prototype,"id",void 0),Object(r.a)([Object(i.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(r.a)([Object(i.b)(p.j)],t.prototype,"popupEnabled",void 0),Object(r.a)([Object(i.b)({type:c.a})],t.prototype,"spatialReference",void 0),Object(r.a)([Object(i.b)()],t.prototype,"version",void 0),Object(r.a)([Object(a.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(r.a)([Object(o.a)("esri.layers.mixins.ArcGISMapService")],t)}},"MG+P":function(e,t,n){"use strict";var r=n("9MzC"),i=function e(t,n,r,i){Wt(this,e),this.resolve=t,this.reject=n,this.callback=r,this.signal=i};t.a=function(){function e(){Wt(this,e),this._tasks=new Array}return Zt(e,[{key:"length",get:function(){return this._tasks.length}},{key:"push",value:function(e,t){var n=this;return new Promise((function(r,a){return n._tasks.push(new i(r,a,e,t))}))}},{key:"unshift",value:function(e,t){var n=this;return new Promise((function(r,a){return n._tasks.unshift(new i(r,a,e,t))}))}},{key:"process",value:function(){if(0===this._tasks.length)return!1;var e=this._tasks.shift();try{Object(r.u)(e.signal);var t=e.callback();t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(t){e.reject(t)}return!0}},{key:"cancelAll",value:function(){var e,t=Object(r.e)(),n=Vt(this._tasks);try{for(n.s();!(e=n.n()).done;){e.value.reject(t)}}catch(i){n.e(i)}finally{n.f()}this._tasks.length=0}}]),e}()},MQ6a:function(e,t,n){"use strict";var r=n("p5/s");r.default&&(r=r.default);var i=n("UiC3"),a=n("m0vG"),o=n("NlTZ"),s=n("sF98"),u=n("IZ5B"),c=n("RzfO"),l=n("tjlA").Buffer,h=new c({max:20});function f(e){if(!e)throw new Error("forgot to pass buffer");return l.isBuffer(e)?e:e instanceof global.ArrayBuffer?l.from(e):e.buffer instanceof global.ArrayBuffer?l.from(1===e.BYTES_PER_ELEMENT?e:e.buffer):void 0}function p(e,t){return"string"==typeof e&&h.has(e)?u.resolve(h.get(e)):p.getShapefile(e,t).then((function(t){return"string"==typeof e&&h.set(e,t),t}))}p.combine=function(e){for(var t={type:"FeatureCollection",features:[]},n=0,r=e[0].length;n<r;)t.features.push({type:"Feature",geometry:e[0][n],properties:e[1][n]}),n++;return t},p.parseZip=function(e,t){var n;e=f(e);var a=i(e),u=[];for(n in t=t||[],a)-1===n.indexOf("__MACOSX")&&("shp"===n.slice(-3).toLowerCase()?(u.push(n.slice(0,-4)),a[n.slice(0,-3)+n.slice(-3).toLowerCase()]=a[n]):"prj"===n.slice(-3).toLowerCase()?a[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r(a[n]):"json"===n.slice(-4).toLowerCase()||t.indexOf(n.split(".").pop())>-1?u.push(n.slice(0,-3)+n.slice(-3).toLowerCase()):"dbf"!==n.slice(-3).toLowerCase()&&"cpg"!==n.slice(-3).toLowerCase()||(a[n.slice(0,-3)+n.slice(-3).toLowerCase()]=a[n]));if(!u.length)throw new Error("no layers founds");var c=u.map((function(e){var n,r,i=e.lastIndexOf(".");return i>-1&&e.slice(i).indexOf("json")>-1?(n=JSON.parse(a[e])).fileName=e.slice(0,i):t.indexOf(e.slice(i+1))>-1?(n=a[e]).fileName=e:(a[e+".dbf"]&&(r=s(a[e+".dbf"],a[e+".cpg"])),(n=p.combine([o(a[e+".shp"],a[e+".prj"]),r])).fileName=e),n}));return 1===c.length?c[0]:c},p.getShapefile=function(e,t){return"string"==typeof e?".zip"===e.slice(-4).toLowerCase()?function(e,t){return a(e).then((function(e){return p.parseZip(e,t)}))}(e,t):u.all([u.all([a(e+".shp"),a(e+".prj")]).then((function(e){return o(e[0],!!e[1]&&r(e[1]))})),u.all([a(e+".dbf"),a(e+".cpg")]).then((function(e){return s(e[0],e[1])}))]).then(p.combine):new u((function(t){t(p.parseZip(e))}))},p.parseShp=function(e,t){return e=f(e),l.isBuffer(t)&&(t=t.toString()),"string"==typeof t?(t=r(t),o(e,t)):o(e)},p.parseDbf=function(e,t){return e=f(e),s(e,t)},e.exports=p},MWLC:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("RI0u"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("nvBr"),l=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).value=null,e.label=null,e.color=null,e}return n}(u.a);Object(r.a)([Object(a.b)({type:Number,json:{write:!0}})],l.prototype,"value",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"label",void 0),Object(r.a)([Object(a.b)({type:c.a,json:{type:[i.a],write:!0}})],l.prototype,"color",void 0);var h,f=l=Object(r.a)([Object(s.a)("esri.renderers.support.ColormapInfo")],l),p=n("fG4V"),d=h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).colormapInfos=null,r.type="raster-colormap",r}return Zt(n,[{key:"clone",value:function(){return new h({colormapInfos:this.colormapInfos.map((function(e){return e.toJSON()}))})}},{key:"extractColormap",value:function(){return this.colormapInfos.map((function(e){return[e.value,e.color.r,e.color.g,e.color.b,e.color.a>1?e.color.a:255*e.color.a&255]})).sort((function(e,t){return e[0]-t[0]}))}}],[{key:"createFromColormap",value:function(e,t){if(!e)return null;function n(e){return t?t[e]||"":String(e[0])}var r=5===e[0].length,i=e.sort((function(e){return e[0][0]-e[1][0]})).map(r?function(e){return f.fromJSON({value:e[0],color:e.slice(1,5),label:n(e[0])})}:function(e){return f.fromJSON({value:e[0],color:e.slice(1,4).concat([255]),label:n(e[0])})});return new h({colormapInfos:i})}},{key:"createFromColorramp",value:function(e){var t=Object(p.b)(e,256);return h.createFromColormap(t)}}]),n}(u.a);Object(r.a)([Object(a.b)({type:[f],json:{write:!0}})],d.prototype,"colormapInfos",void 0),Object(r.a)([Object(o.a)({rasterColormap:"raster-colormap"})],d.prototype,"type",void 0),d=h=Object(r.a)([Object(s.a)("esri.renderers.RasterColormapRenderer")],d),t.a=d},MdMo:function(e,t,n){"use strict";for(var r=n("9aYe"),i=n("Mi3D"),a=n("z//S"),o=new Array(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;o[254]=o[254]=1;var u=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t},c=function(e){var t,n,i,a,s=e.length,u=new Array(2*s);for(n=0,t=0;t<s;)if((i=e[t++])<128)u[n++]=i;else if((a=o[i])>4)u[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&t<s;)i=i<<6|63&e[t++],a--;a>1?u[n++]=65533:i<65536?u[n++]=i:(u[n++]=55296|(i-=65536)>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)};t.utf8encode=function(e){return i.nodebuffer?a(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),o=0,a=0;o<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){if(i.nodebuffer)return r.transformTo("nodebuffer",e).toString("utf-8");for(var t=[],n=0,a=(e=r.transformTo(i.uint8array?"uint8array":"array",e)).length;n<a;){var o=u(e,Math.min(n+65536,a));t.push(c(i.uint8array?e.subarray(n,o):e.slice(n,o))),n=o}return t.join("")}},MgzW:function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},Mi3D:function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var n=new ArrayBuffer(0);try{t.blob=0===new Blob([n],{type:"application/zip"}).size}catch(i){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);r.append(n),t.blob=0===r.getBlob("application/zip").size}catch(i){t.blob=!1}}}}).call(this,n("tjlA").Buffer)},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},Mu3I:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return d}));var r=n("f4Nx");function i(e){if(!e)return null;if(Array.isArray(e))return e;var t=e.hasZ,n=e.hasM;if("point"===e.type)return n&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:n?[e.x,e.y,e.m]:[e.x,e.y];if("polygon"===e.type)return e.rings.slice(0);if("polyline"===e.type)return e.paths.slice(0);if("multipoint"===e.type)return e.points.slice(0);if("extent"===e.type){var r=e.clone().normalize();if(!r)return null;var i=!1,a=!1;return r.forEach((function(e){e.hasZ&&(i=!0),e.hasM&&(a=!0)})),r.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i&&e.hasZ)for(var n=.5*(e.zmax-e.zmin),r=0;r<t.length;r++)t[r].push(n);if(a&&e.hasM)for(var o=.5*(e.mmax-e.mmin),s=0;s<t.length;s++)t[s].push(o);return t}))}return null}function a(e,t){var n=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){var i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function o(e,t,n){var r=e[0]+n*(t[0]-e[0]),i=e[1]+n*(t[1]-e[1]);return e.length>2&&t.length>2?[r,i,e[2]+n*(t[2]-e[2])]:[r,i]}function s(e,t,n,r){var i=zt(t,2),a=i[0],o=i[1],s=zt(n[r],2),u=s[0],c=s[1],l=zt(n[r+1],2),h=l[0]-u,f=l[1]-c,p=Math.min(1,Math.max(0,((a-u)*h+(o-c)*f)/(h*h+f*f)));return e[0]=u+h*p,e[1]=c+f*p,e}function u(e,t){return o(e,t,.5)}function c(e){for(var t=e.length,n=0,r=0;r<t-1;++r)n+=a(e[r],e[r+1]);return n}function l(e,t){if(t<=0)return e[0];for(var n=e.length,r=0,i=0;i<n-1;++i){var s=a(e[i],e[i+1]);if(t-r<s)return o(e[i],e[i+1],(t-r)/s);r+=s}return e[n-1]}function h(e,t,n){for(var r=e.length,i=0,a=0,o=0,s=0;s<r;s++){var u=e[s],c=e[(s+1)%r],l=2;i+=u[0]*c[1]-c[0]*u[1],u.length>2&&c.length>2&&n&&(a+=u[0]*c[2]-c[0]*u[2],l=3),u.length>l&&c.length>l&&t&&(o+=u[0]*c[l]-c[0]*u[l])}return i<=0&&a<=0&&o<=0}function f(e){if("rings"in e){var t,n=Vt(e.rings);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.length<3||r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push([r[0][0],r[0][1]])}}catch(a){n.e(a)}finally{n.f()}if(e.rings.length>0&&!h(e.rings[0],e.hasM,e.hasZ))for(var i=0;i<e.rings.length;++i)e.rings[i]=e.rings[i].reverse()}}function p(e){return"polygon"!==e.type&&"polyline"!==e.type||d("polygon"===e.type?e.rings:e.paths,e.spatialReference),e}function d(e,t){var n=Object(r.d)(t);if(n){var i,a=n.valid[0],o=n.valid[1],s=o-a,u=Vt(e);try{var c=function(){var e=i.value,t=1/0,n=-1/0;e.forEach((function(e){for(var r=e[0];r<a;)r+=s;for(;r>o;)r-=s;t=Math.min(t,r),n=Math.max(n,r),e[0]=r}));var r=n-t;s-r<r&&e.forEach((function(e){e[0]<0&&(e[0]+=s)}))};for(u.s();!(i=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}}}},Mzq3:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("XACZ"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).screenLength=0,e.minWorldLength=0,e}return Zt(n,[{key:"clone",value:function(){return new r({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}}]),n}(s.a);Object(i.a)([Object(a.b)(u.b)],c.prototype,"screenLength",void 0),Object(i.a)([Object(a.b)({type:Number,json:{write:!0,default:0}})],c.prototype,"minWorldLength",void 0),Object(i.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"maxWorldLength",void 0),c=r=Object(i.a)([Object(o.a)("esri.symbols.support.Symbol3DVerticalOffset")],c),t.a=c},"N+cL":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("r88o"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("qRWG")),h=n("bk1R"),f=n("sONG"),p=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).color=null,e.type="picture-marker",e.url=null,e.source=null,e.height=12,e.width=12,e.size=null,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n){if(e&&"string"!=typeof e&&null==e.imageData)return e;var r={};return e&&(r.url=e),null!=t&&(r.width=Object(l.k)(t)),null!=n&&(r.height=Object(l.k)(n)),r}},{key:"readHeight",value:function(e,t){return t.size||e}},{key:"readWidth",value:function(e,t){return t.size||e}},{key:"clone",value:function(){var e=new r({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",Object(a.a)(this.source)),e}},{key:"hash",value:function(){return"".concat(Dt(en(n.prototype),"hash",this).call(this),".").concat(this.height,".").concat(this.url,".").concat(this.width)}}]),n}(h.a);Object(i.a)([Object(o.b)({json:{write:!1}})],p.prototype,"color",void 0),Object(i.a)([Object(s.a)({esriPMS:"picture-marker"},{readOnly:!0})],p.prototype,"type",void 0),Object(i.a)([Object(o.b)(f.b)],p.prototype,"url",void 0),Object(i.a)([Object(o.b)(f.a)],p.prototype,"source",void 0),Object(i.a)([Object(o.b)({type:Number,cast:l.k,json:{write:!0}})],p.prototype,"height",void 0),Object(i.a)([Object(u.a)("height",["height","size"])],p.prototype,"readHeight",null),Object(i.a)([Object(o.b)({type:Number,cast:l.k,json:{write:!0}})],p.prototype,"width",void 0),Object(i.a)([Object(o.b)({json:{write:!1}})],p.prototype,"size",void 0),p=r=Object(i.a)([Object(c.a)("esri.symbols.PictureMarkerSymbol")],p),t.a=p},N2DF:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("r88o"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("WZb1"),c=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).type=null,e.hasM=!1,e.hasZ=!1,e.spatialReference=u.a.WGS84,e}return Zt(n,[{key:"cache",get:function(){return this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){return null}},{key:"readSpatialReference",value:function(e,t){if(e instanceof u.a)return e;if(null!=e){var n=new u.a;return n.read(e,t),n}return e}},{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}},{key:"clearCache",value:function(){this.notifyChange("cache")}},{key:"getCacheValue",value:function(e){return this.cache[e]}},{key:"setCacheValue",value:function(e,t){this.cache[e]=t}}]),n}(s.a);Object(r.a)([Object(i.b)()],c.prototype,"type",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],c.prototype,"cache",null),Object(r.a)([Object(i.b)({readOnly:!0})],c.prototype,"extent",null),Object(r.a)([Object(i.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],c.prototype,"hasM",void 0),Object(r.a)([Object(i.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],c.prototype,"hasZ",void 0),Object(r.a)([Object(i.b)({type:u.a,json:{write:!0}})],c.prototype,"spatialReference",void 0),Object(r.a)([Object(a.a)("spatialReference")],c.prototype,"readSpatialReference",null),c=Object(r.a)([Object(o.a)("esri.geometry.Geometry")],c),t.a=c},N2Uj:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("f/qv"),i=n("nR38"),a=n("srIe"),o=n("JSRQ"),s=n("zlDU"),u=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile"]),c=new Set(["csv","feature","geo-rss","group","imagery","imagery-tile","kml","map-image","map-notes","tile","unknown","unsupported","vector-tile","web-tile"]);function l(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function h(e,t){if(t.restrictedWebMapWriting){var n=function(e){return"basemap"===e.layerContainerType?u:"operational-layers"===e.layerContainerType?c:null}(t);return!Object(a.k)(n)||n.has(e.type)&&!l(e)}return!0}function f(e,t){"maxScale"in e&&(t.maxScale=Object(o.b)(e.maxScale)),"minScale"in e&&(t.minScale=Object(o.b)(e.minScale))}function p(e,t,n){if(!("write"in e)||!e.write)return n&&n.messages&&n.messages.push(new s.a("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted"),{layer:e})),null;if(h(e,n)){var u={};return e.write(u,n)?u:null}return Object(a.k)(t)&&function(e,t){if(function(e,t){if(l(e)){var n=Object(i.b)("featureCollection.layers",t),r=n&&n[0]&&n[0].layerDefinition;r&&f(e,r)}else"stream"===e.type?f(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&f(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=Object(o.b)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(l(e)){var n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}(e,t=Object(r.a)(t)),t}},N5Jl:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("zgsL"),i=function(e,t){return new r.a({id:e,opacity:t})}},N5XI:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return v})),n.d(t,"on",(function(){return P})),n.d(t,"once",(function(){return b})),n.d(t,"pausable",(function(){return E})),n.d(t,"watch",(function(){return y})),n.d(t,"when",(function(){return g})),n.d(t,"whenDefined",(function(){return S})),n.d(t,"whenDefinedOnce",(function(){return M})),n.d(t,"whenEqual",(function(){return A})),n.d(t,"whenEqualOnce",(function(){return C})),n.d(t,"whenFalse",(function(){return x})),n.d(t,"whenFalseOnce",(function(){return k})),n.d(t,"whenNot",(function(){return w})),n.d(t,"whenNotOnce",(function(){return O})),n.d(t,"whenOnce",(function(){return m})),n.d(t,"whenTrue",(function(){return j})),n.d(t,"whenTrueOnce",(function(){return _})),n.d(t,"whenUndefined",(function(){return I})),n.d(t,"whenUndefinedOnce",(function(){return T})),n.d(t,"whenValidOnce",(function(){return s}));var r=n("f/qv"),i=n("nYOO"),a=n("9MzC");function o(e,t,n,r,i){var a=e.watch(t,(function(t,i,a,o){n&&!n(t)||null==r||r.call(e,t,i,a,o)}),i);if(Array.isArray(t)){var o,s=Vt(t);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=e.get(u);n&&n(c)&&(null==r||r.call(e,c,c,t,e))}}catch(h){s.e(h)}finally{s.f()}}else{var l=e.get(t);n&&n(l)&&(null==r||r.call(e,l,l,t,e))}return a}function s(e,t,n,r,i){var s="function"==typeof r?r:null,u="object"==typeof r?r:null;"boolean"==typeof r&&(i=r);var c,l=!1;function h(){c&&(c.remove(),c=null)}var f=Object(a.f)();Object(a.p)(u,(function(){h(),f.reject(Object(a.e)())}));var p={then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:h};return Object.freeze(p),c=o(e,t,n,(function(t,n,r,i){l=!0,h(),s&&s.call(e,t,n,r,i),f.resolve({value:t,oldValue:n,propertyName:r,target:i})}),i),l&&h(),p}function u(e){return!!e}function c(e){return!e}function l(e){return!0===e}function h(e){return!1===e}function f(e){return void 0!==e}function p(e){return void 0===e}var d=/\?(\.|$)/g;function v(e,t,n,r){var i,a=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=y(e,t,n,r),s=Vt(a);try{for(s.s();!(i=s.n()).done;){var u=i.value.trim().replace(d,"$1"),c=e.get(u);n.call(e,c,c,u,e)}}catch(l){s.e(l)}finally{s.f()}return o}function y(e,t,n,r){return e.watch(t,n,r)}function b(e,t,n,r){return s(e,t,null,n,r)}function g(e,t,n,r){return o(e,t,u,n,r)}function m(e,t,n,r){return s(e,t,u,n,r)}function w(e,t,n,r){return o(e,t,c,n,r)}function O(e,t,n,r){return s(e,t,c,n,r)}function j(e,t,n,r){return o(e,t,l,n,r)}function _(e,t,n,r){return s(e,t,l,n,r)}function x(e,t,n,r){return o(e,t,h,n,r)}function k(e,t,n,r){return s(e,t,h,n,r)}function S(e,t,n,r){return o(e,t,f,n,r)}function M(e,t,n,r){return s(e,t,f,n,r)}function I(e,t,n,r){return o(e,t,p,n,r)}function T(e,t,n,r){return s(e,t,p,n,r)}function A(e,t,n,i,a){return o(e,t,(function(e){return Object(r.b)(n,e)}),i,a)}function C(e,t,n,i,a){return s(e,t,(function(e){return Object(r.b)(n,e)}),i,a)}function E(e,t,n,r){var i=!1,a=e.watch(t,(function(t,r,a,o){i||n.call(e,t,r,a,o)}),r);return{remove:function(){a.remove()},pause:function(){i=!0},resume:function(){i=!1}}}function P(e,t,n,r,a,o,s){var u={};function c(t){var r=u[t];r&&(o&&o(r.target,t,e,n),r.handle.remove(),delete u[t])}var l=v(e,t,(function(t,o,s){c(s),Object(i.b)(t)&&(u[s]={handle:Object(i.c)(t,n,r),target:t},a&&a(t,s,e,n))}),s);return{remove:function(){for(var e in l.remove(),u)c(e)}}}},NCOb:function(e,t,n){"use strict";var r=n("nR38"),i=function(){function e(t,n,i){Wt(this,e),this.name=t,this.details=i,this.message=void 0,this instanceof e&&(this.message=n&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return"$";var i=Object(r.b)(n,t),a=null==i?"":i;if(void 0===a)throw new Error('could not find key "'.concat(n,'" in template'));return a.toString()}))}(n,i)||"")}return Zt(e,[{key:"toString",value:function(){return"["+this.name+"]: "+this.message}}]),e}();t.a=i},NDpP:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return y})),n.d(t,"fetchSymbolFromStyle",(function(){return g})),n.d(t,"resolveWebStyleSymbol",(function(){return b})),n.d(t,"styleNameFromItem",(function(){return w}));var r=n("zlDU"),i=n("4EHJ"),a=n("/PL2"),o=n("Lqtk"),s=n("6aRp"),u=n("AiS/"),c=n("tyRe"),l=n("UFqC"),h=n("H9eC"),f=n("YXST"),p=n("SbiP"),d=n("wSAH"),v={};function y(e,t,n){return e.styleUrl?function(e,t){return O(e,t).then((function(t){return{data:t.data,baseUrl:Object(i.F)(e),styleUrl:e}}))}(e.styleUrl,n):e.styleName?function(e,t,n){var i,a=t.portal||u.a.getDefault(),o="".concat(a.url," - ").concat(a.user&&a.user.username," - ").concat(e);return v[o]||(v[o]=function(e,t,n){return t.load(n).then((function(){var r=new s.a({disableExtraQuery:!0,query:"owner:".concat(j," AND type:").concat(_,' AND typekeywords:"').concat(e,'"')});return t.queryItems(r,n)})).then((function(t){var i=t.results,a=null,o=e.toLowerCase();if(i&&Array.isArray(i)){var s,u=Vt(i);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(c.typeKeywords.some((function(e){return e.toLowerCase()===o}))&&c.type===_&&c.owner===j){a=c;break}}}catch(l){u.e(l)}finally{u.f()}}if(!a)throw new r.a("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return a.load(n)}))}(e,a,n).then((function(e){return i=e,e.fetchData()})).then((function(t){return{data:t,baseUrl:i.itemUrl,styleName:e}}))),v[o]}(e.styleName,t,n):Promise.reject(new r.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function b(e,t,n,a){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){var r=x.replace(/\{SymbolName\}/gi,e.name);return O(r,n).then((function(e){var n=m(e.data);return Object(f.a)(n,{portal:t.portal,url:Object(i.J)(Object(i.F)(r)),origin:"portal-item"})}))}(e,t,a):y(e,t,a).then((function(r){return g(r,e.name,t,n,a)})):Promise.reject(new r.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function g(e,t,n,o,s){var u=e.data,v={portal:n.portal,url:Object(i.J)(e.baseUrl),origin:"portal-item"},y=u.items.find((function(e){return e.name===t}));if(!y)return Promise.reject(new r.a("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(t,"' could not be found"),{symbolName:t}));var b=Object(a.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!Object(d.a)("enable-feature:force-wosr")){var n,r=Vt(e.formatInfos);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("gltf"===i.type)return i.href}}catch(a){r.e(a)}finally{r.f()}}return e.webRef}(y,o),v),g=y.thumbnail&&y.thumbnail.href,w=y.thumbnail&&y.thumbnail.imageData;Object(p.b)()&&(b=Object(p.a)(b),g=Object(p.a)(g));var j={portal:n.portal,url:Object(i.J)(Object(i.F)(b)),origin:"portal-item"};return O(b,s).then((function(r){var i="cimRef"===o?m(r.data):r.data,s=Object(f.a)(i,j);if(s&&Object(h.e)(s)){if(g){var u=Object(a.a)(g,v);s.thumbnail=new l.a({url:u})}else w&&(s.thumbnail=new l.a({url:"data:image/png;base64,"+w}));e.styleUrl?s.styleOrigin=new c.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new c.a({portal:n.portal,styleName:e.styleName,name:t}))}return s}))}function m(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function w(e){var t,n=Vt(e.typeKeywords);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(/^Esri.*Style$/.test(r)&&"Esri Style"!==r)return r}}catch(i){n.e(i)}finally{n.f()}}function O(e,t){var n=Nt({responseType:"json",query:{f:"json"}},t);return Object(o.default)(Object(i.C)(e),n)}var j="esri_en",_="Style",x="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},NPIS:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r=function(){function e(t,n,r){Wt(this,e),this.editGeometry=t,this.vertices=n,this.operation=r,this.undone=!1}return Zt(e,[{key:"apply",value:function(){var e=this;this.vertices.forEach((function(t){return e.operation.apply(t)})),this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()})),this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:this.undone?"redo":"apply"})}},{key:"undo",value:function(){var e=this;this.vertices.forEach((function(t){e.operation.undo(t)})),this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:"undo"}),this.undone=!0}},{key:"canAccumulate",value:function(e){if(this.undone)return!1;if(e.vertices.length!==this.vertices.length)return!1;for(var t=0;t<e.vertices.length;++t)if(e.vertices[t]!==this.vertices[t])return!1;return this.operation.canAccumulate(e.operation)}},{key:"accumulate",value:function(t){var n=this;return!!(t instanceof e&&this.canAccumulate(t))&&(this.vertices.forEach((function(e){return n.operation.accumulate(e,t.operation)})),this.operation.accumulateParams(t.operation),this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()})),this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:"apply"}),!0)}}]),e}(),i=function e(t){Wt(this,e),this.helper=t}},NRDM:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("srIe"),i=n("9MzC"),a=n("kwW8"),o=n("NWPx"),s=n("Hxwb"),u=n("wg3g"),c=function(){function e(){Wt(this,e),this.next=new u.a}return Zt(e,[{key:"createSnapDragEventPipelineStep",value:function(e){var t=this,n=e.predicate,c=void 0===n?function(){return!0}:n,l=e.cancel,h=e.snappingManager,f=e.snappingContext;if(Object(r.j)(h))return function(e){return e};var p=null,d=null,v=function(){p=Object(r.a)(p),h.doneSnapping(),Object(r.k)(d)&&d.frameTask.remove(),d=null};return l.next((function(e){return v(),e})),this.next=new u.a,function(e){if(!c(e))return e;if(p=Object(r.a)(p),"start"===e.action){var n="3d"===h.view.type?h.view.resourceController.scheduler.registerTask(a.b.SNAPPING,(function(e){return Object(r.q)(n).processQueue(e)}),(function(){return!1})):a.a;d={context:new s.a({geometry:f.geometry,elevationInfo:f.elevationInfo,pointer:f.pointer,vertexHandle:Object(r.k)(e.info)?e.info.handle:null,excludeFeature:f.excludeFeature,visualizer:f.visualizer}),originalPos:Object(r.k)(e.snapOrigin)?f.coordinateHelper.createDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:n}}if(Object(r.k)(d)){var u=d.context.coordinateHelper.createDehydratedPoint(d.context.coordinateHelper.fromArray([d.originalPos.x,d.originalPos.y,d.originalPos.z]));u.x+=e.mapEnd.x-e.mapStart.x,u.y+=e.mapEnd.y-e.mapStart.y;var l=e.mapStart.x-d.originalPos.x,y=e.mapStart.y-d.originalPos.y,b=Nt(Nt({},e),{},{action:"udpate"}),g=d.context,m=h.update(u,d.context);if(e.mapEnd.x=m.x+l,e.mapEnd.y=m.y+y,"end"!==e.action){var w=d.frameTask;p=Object(i.h)(function(){var e=Ut(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.schedule((function(){return h.snap(u,g,n)}),n);case 2:if(!(r=e.sent).valid){e.next=8;break}return e.next=6,w.schedule((function(){return r.apply()}),n);case 6:i=e.sent,Object(o.a)(i,m)||(b.mapEnd.x=i.x+l,b.mapEnd.y=i.y+y,t.next.execute(b));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}return"end"===e.action&&v(),e}}}]),e}()},NWPx:function(e,t,n){"use strict";function r(e,t){return!!function(e,t){return e===t||e&&t&&e.equals(t)}(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}n.d(t,"a",(function(){return r})),n("wSAH"),n("srIe")},NbNv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n("srIe"),i=n("+h6m"),a=n("AD+e"),o=n("fFEv"),s=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var a;return Wt(this,n),(a=t.call(this)).type=3,a.supportsEdges=!1,a._visible=!0,a._renderPriority=0,a._insertOrder=0,a._vertexAttributeLocations=i.a,a._params=Object(o.c)(e,r),a.validateParameterValues(a._params),a}return Zt(n,[{key:"dispose",value:function(){}},{key:"params",get:function(){return this._params}},{key:"update",value:function(e){return!1}},{key:"setParameterValues",value:function(e){Object(o.f)(this._params,e)&&(this.validateParameterValues(this._params),this.parametersChanged())}},{key:"validateParameterValues",value:function(e){}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this.parametersChanged())}},{key:"isVisibleInPass",value:function(e){return!0}},{key:"renderOccluded",get:function(){return this.params.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(e){e!==this._renderPriority&&(this._renderPriority=e,this.parametersChanged())}},{key:"insertOrder",get:function(){return this._insertOrder},set:function(e){e!==this._insertOrder&&(this._insertOrder=e,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}},{key:"isVisible",value:function(){return this._visible}},{key:"parametersChanged",value:function(){Object(r.k)(this.materialRepository)&&this.materialRepository.materialChanged(this)}}]),n}(a.a);function u(e,t){return e.isVisible()&&e.isVisibleInPass(t.pass)&&0!=(e.renderOccluded&t.renderOccludedMask)}var c={renderOccluded:1}},NckZ:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("RI0u"),c=n("04ZG"),l=n("Cduq"),h=n("zlDU"),f=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),p=n("BcU2"),d=n("wSjz"),v=n("YAUP"),y=n("jWZj"),b=n("4bvo"),g=n("qVey"),m=n("FuAX"),w=n("xSgX"),O=f.a.ofType({base:null,key:"type",typeMap:{extrude:p.a,fill:d.a,icon:v.a,line:y.a,object:b.a,text:g.a,water:m.a}}),j=f.a.ofType({base:null,key:"type",typeMap:{extrude:p.a,fill:d.a,icon:v.a,line:y.a,object:b.a,water:m.a}}),_=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).symbolLayers=new O,r.type="polygon-3d",r}return Zt(n,[{key:"writeSymbolLayers",value:function(e,t,n,r){var i=e.filter((function(e){return"text"!==e.type}));if(r&&r.messages&&i.length<e.length){var a=e.find((function(e){return"text"===e.type}));r.messages.push(new h.a("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a}))}t[n]=i.map((function(e){return e.write({},r)})).toArray()}},{key:"clone",value:function(){return new r({styleOrigin:Object(a.a)(this.styleOrigin),symbolLayers:Object(a.a)(this.symbolLayers),thumbnail:Object(a.a)(this.thumbnail)})}}],[{key:"fromJSON",value:function(e){var t=new r;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.getItemAt(0).type&&"line"===t.symbolLayers.getItemAt(1).type){var n=t.symbolLayers.getItemAt(0),i=t.symbolLayers.getItemAt(1);!i.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(n.outline={size:i.size,color:Object(o.k)(i.material)?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}},{key:"fromSimpleFillSymbol",value:function(e){return new r({symbolLayers:[d.a.fromSimpleFillSymbol(e)]})}}]),n}(w.a);Object(i.a)([Object(s.b)({type:O,json:{type:j}})],_.prototype,"symbolLayers",void 0),Object(i.a)([Object(l.a)("web-scene","symbolLayers")],_.prototype,"writeSymbolLayers",null),Object(i.a)([Object(u.a)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],_.prototype,"type",void 0),_=r=Object(i.a)([Object(c.a)("esri.symbols.PolygonSymbol3D")],_),t.a=_},NlTZ:function(e,t,n){"use strict";function r(e,t){return!function(e){for(var t,n,r=0,i=1,a=e.length;i<a;)t=n||e[0],r+=((n=e[i])[0]-t[0])*(n[1]+t[1]),i++;return r>0}(t)&&e.length?e[e.length-1].push(t):e.push([t]),e}a.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}},a.prototype.parseZPoint=function(e){var t=this.parsePoint(e);return t.coordinates.push(e.readDoubleLE(16)),t},a.prototype.parsePointArray=function(e,t,n){for(var r=[],i=0;i<n;)r.push(this.parseCoord(e,t)),t+=16,i++;return r},a.prototype.parseZPointArray=function(e,t,n,r){for(var i=0;i<n;)r[i].push(e.readDoubleLE(t)),i++,t+=8;return r},a.prototype.parseArrayGroup=function(e,t,n,r,i){for(var a,o,s=[],u=0,c=0;u<r;)a=c,(o=(c=++u===r?i:e.readInt32LE(n+=4))-a)&&(s.push(this.parsePointArray(e,t,o)),t+=o<<4);return s},a.prototype.parseZArrayGroup=function(e,t,n,r){for(var i=0;i<n;)r[i]=this.parseZPointArray(e,t,r[i].length,r[i]),t+=r[i].length<<3,i++;return r},a.prototype.parseMultiPoint=function(e){var t={},n=this.parseCoord(e,0),r=this.parseCoord(e,16);t.bbox=[n[0],n[1],r[0],r[1]];var i=e.readInt32LE(32,!0);return 1===i?(t.type="Point",t.coordinates=this.parseCoord(e,36)):(t.type="MultiPoint",t.coordinates=this.parsePointArray(e,36,i)),t},a.prototype.parseZMultiPoint=function(e){var t,n=this.parseMultiPoint(e);return"Point"===n.type?(n.coordinates.push(e.readDoubleLE(72)),n):(n.coordinates=this.parseZPointArray(e,52+((t=n.coordinates.length)<<4),t,n.coordinates),n)},a.prototype.parsePolyline=function(e){var t={},n=this.parseCoord(e,0),r=this.parseCoord(e,16);t.bbox=[n[0],n[1],r[0],r[1]];var i=e.readInt32LE(32),a=e.readInt32LE(36);return 1===i?(t.type="LineString",t.coordinates=this.parsePointArray(e,44,a)):(t.type="MultiLineString",t.coordinates=this.parseArrayGroup(e,40+(i<<2),40,i,a)),t},a.prototype.parseZPolyline=function(e){var t=this.parsePolyline(e),n=t.coordinates.length;if("LineString"===t.type)return t.coordinates=this.parseZPointArray(e,60+(n<<4),n,t.coordinates),t;var r=t.coordinates.reduce((function(e,t){return e+t.length}),0);return t.coordinates=this.parseZArrayGroup(e,56+(r<<4)+(n<<2),n,t.coordinates),t},a.prototype.polyFuncs=function(e){return"LineString"===e.type?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=e.coordinates.reduce(r,[]),1===e.coordinates.length?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e))},a.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))},a.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};var i={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function a(e,t){if(!(this instanceof a))return new a(e,t);this.buffer=e,this.shpFuncs(t),this.rows=this.getRows()}a.prototype.shpFuncs=function(e){var t,n=this.getShpCode();if(n>20&&(n-=20),!(n in i))throw new Error("I don't know that shp type");this.parseFunc=this[i[n]],this.parseCoord=(t=e)?function(e,n){return t.inverse([e.readDoubleLE(n),e.readDoubleLE(n+8)])}:function(e,t){return[e.readDoubleLE(t),e.readDoubleLE(t+8)]}},a.prototype.getShpCode=function(){return this.parseHeader().shpCode},a.prototype.parseHeader=function(){var e=this.buffer.slice(0,100);return{length:e.readInt32BE(24),version:e.readInt32LE(28),shpCode:e.readInt32LE(32),bbox:[e.readDoubleLE(36),e.readDoubleLE(44),e.readDoubleLE(52),e.readDoubleLE(52)]}},a.prototype.getRows=function(){for(var e,t=100,n=this.buffer.byteLength,r=[];t<n;)e=this.getRow(t),t+=8,t+=e.len,e.type&&r.push(this.parseFunc(e.data));return r},a.prototype.getRow=function(e){var t=this.buffer.slice(e,e+12),n=t.readInt32BE(4)<<1,r=this.buffer.slice(e+12,e+n+8);return{id:t.readInt32BE(0),len:n,data:r,type:t.readInt32LE(8)}},e.exports=function(e,t){return new a(e,t).rows}},NoDi:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function(){function e(){Wt(this,e),this.disableSketchSelection=new r.t}return Zt(e,[{key:"changeSketchSelectionMode",value:function(e,t){this.disableSketchSelection.emit({toolName:e,status:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},NrhG:function(e,t,n){"use strict";function r(e,t,n,r){return"function"==typeof e?e(t,n,r):e}function i(e){return[e.r,e.g,e.b,e.a]}function a(e,t,n){var r=function(e){for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},i=[],a=0,s=-1;do{if((s=t.indexOf("[",a))>=a){if(s>a){var u=t.substr(a,s-a);i.push([u,null,r(u)])}if(a=s+1,(s=t.indexOf("]",a))>=a){if(s>a){var c=e[t.substr(a,s-a)];c&&i.push([null,c,!1])}a=s+1}}}while(-1!==s);if(a<t.length-1){var l=t.substr(a);i.push([l,null,r(l)])}return function(e){var t,r="",a=null,s=Vt(i);try{for(s.s();!(t=s.n()).done;){var u=zt(t.value,3),c=u[0],l=u[1],h=u[2];if(c)h?a=c:(a&&(r+=a,a=null),r+=c);else{var f=e.attributes[l];f&&(a&&(r+=a,a=null),r+=f)}}}catch(p){s.e(p)}finally{s.f()}return o(r,n)}}function o(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function s(e,t,n,r,i,a){for(var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=t/i,u=n/a,c=Math.ceil(s/2),l=Math.ceil(u/2),h=0;h<a;h++)for(var f=0;f<i;f++){for(var p=4*(f+(o?a-h-1:h)*i),d=0,v=0,y=0,b=0,g=0,m=0,w=0,O=(h+.5)*u,j=Math.floor(h*u);j<(h+1)*u;j++)for(var _=Math.abs(O-(j+.5))/l,x=(f+.5)*s,k=_*_,S=Math.floor(f*s);S<(f+1)*s;S++){var M=Math.abs(x-(S+.5))/c,I=Math.sqrt(k+M*M);I>=-1&&I<=1&&((d=2*I*I*I-3*I*I+1)>0&&(w+=d*e[(M=4*(S+j*t))+3],y+=d,e[M+3]<255&&(d=d*e[M+3]/250),b+=d*e[M],g+=d*e[M+1],m+=d*e[M+2],v+=d))}r[p]=b/v,r[p+1]=g/v,r[p+2]=m/v,r[p+3]=w/y}}function u(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function c(e){var t;return null==(t=e.data)?void 0:t.symbol}function l(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function h(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function p(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return c}))},Nvf0:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("qatw"),c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).geometries1=null,r.geometries2=null,r.relation=null,r.relationParameter=null,r}return n}(s.a);Object(r.a)([Object(a.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(u.a)(e)})):null}},write:{writer:function(e,t){t.geometries1=e.map((function(e){return e.toJSON()}))}}}})],c.prototype,"geometries1",void 0),Object(r.a)([Object(a.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(u.a)(e)})):null}},write:{writer:function(e,t){t.geometries2=e.map((function(e){return e.toJSON()}))}}}})],c.prototype,"geometries2",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"relation",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"relationParameter",void 0),(c=Object(r.a)([Object(o.a)("esri.tasks.support.RelationParameters")],c)).from=Object(i.m)(c),t.a=c},NyNm:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.hasM,i=e.hasZ;Array.isArray(t)?4!==t.length||r||i?3===t.length&&n&&!r?(i=!0,r=!1):3===t.length&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=r}n.d(t,"a",(function(){return r}))},"O/nn":function(e,t,n){var r=n("fXKp").StringDecoder;function i(e){var t=new r;return(t.write(e)+t.end()).replace(/\0/g,"").trim()}e.exports=function(e){if(!e)return i;try{new TextDecoder(e.trim())}catch(t){a.exec(e)&&(e="UTF-8")}return function(t){var n=new TextDecoder(e);return(n.decode(t,{stream:!0})+n.decode()).replace(/\0/g,"").trim()}};var a=/^(?:ANSI\s)?(\d+)$/m},OIYi:function(e,t,n){"use strict";function r(e){for(var t="",n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t+=e[n]+(n+1<1||arguments.length<=n+1?void 0:arguments[n+1]);return t+=e[e.length-1]}n.d(t,"a",(function(){return r})),function(e){e.int=function(e){return Math.round(e).toString()},e.float=function(e){return e.toPrecision(8)}}(r||(r={}))},OKTS:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return f}));var r=new Float32Array(1),i=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},a=Number.isNaN||function(e){return e!=e};function o(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}function s(e,t,n){return e<t?t:e>n?n:e}function u(e,t,n){return Math.min(Math.max(e,t),n)}function c(e){return 0==(e&e-1)}function l(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function h(e){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(e)))}var f=Math.sign||function(e){return+(e>0)-+(e<0)||+e},p=Math.log2||function(e){return Math.log(e)/Math.LN2};function d(e,t,n){return e+(t-e)*n}function v(e){return e*Math.PI/180}function y(e){return 180*e/Math.PI}function b(e){return Math.acos(s(e,-1,1))}function g(e){return Math.asin(s(e,-1,1))}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return!a(e)&&!a(t)&&(e>t?e-t:t-e)<=n}r[0]=34028234663852886e22},"OL/Y":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("cPYn"),i=n("0oj5");function a(e){if(!e)return!1;var t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function o(e){if(!e)return!1;if(!e.supportsCallout||!e.supportsCallout())return!1;var t=e.callout;return!!t&&!!t.visible&&!!a(e)}var s={types:{key:"type",base:r.a,typeMap:{line:i.a}},json:{write:!0}}},OteC:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("r88o"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("lh0l")),h=n("o685"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).material=null,r.castShadows=!0,r.type="path",r.profile="circle",r.join="miter",r.cap="butt",r.width=void 0,r.height=void 0,r.anchor="center",r.profileRotation="all",r}return Zt(n,[{key:"size",get:function(){return this.width&&this.height?this.width===this.height?this.width:void 0:this.width?this.width:this.height?this.height:void 0},set:function(e){this.width=e,this.height=e}},{key:"readSize",value:function(e,t){return t.height||t.width?e:t.size}},{key:"clone",value:function(){return new r({enabled:this.enabled,material:Object(a.k)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],f.prototype,"material",void 0),Object(i.a)([Object(o.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],f.prototype,"castShadows",void 0),Object(i.a)([Object(s.a)({Path:"path"},{readOnly:!0})],f.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:Number})],f.prototype,"size",null),Object(i.a)([Object(u.a)("size")],f.prototype,"readSize",null),Object(i.a)([Object(o.b)({type:["circle","quad"],json:{write:!0,default:"circle"}})],f.prototype,"profile",void 0),Object(i.a)([Object(o.b)({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],f.prototype,"join",void 0),Object(i.a)([Object(o.b)({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],f.prototype,"cap",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],f.prototype,"width",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"height",void 0),Object(i.a)([Object(o.b)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],f.prototype,"anchor",void 0),Object(i.a)([Object(o.b)({type:["heading","all"],json:{write:!0,default:"all"}})],f.prototype,"profileRotation",void 0),f=r=Object(i.a)([Object(c.a)("esri.symbols.PathSymbol3DLayer")],f),t.a=f},OvF4:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=n("s7YA"),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("f4Nx")),l=n("WZb1"),h=n("N2DF"),f=n("l4ZG"),p=n("SuVq"),d=n("IXLn"),v=n("PNY3");function y(e,t,n){return null==t?n:null==n?t:e(t,n)}var b=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).type="extent",e.xmin=0,e.ymin=0,e.mmin=void 0,e.zmin=void 0,e.xmax=0,e.ymax=0,e.mmax=void 0,e.zmax=void 0,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r,i){return function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof e?(e.spatialReference=null==e.spatialReference?l.a.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:n,ymax:r,spatialReference:null==i?l.a.WGS84:i}}},{key:"cache",get:function(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}},{key:"center",get:function(){var e=new p.a({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}},{key:"extent",get:function(){return this.clone()}},{key:"hasM",get:function(){return null!=this.mmin&&null!=this.mmax}},{key:"hasZ",get:function(){return null!=this.zmin&&null!=this.zmax}},{key:"height",get:function(){return Math.abs(this.ymax-this.ymin)}},{key:"width",get:function(){return Math.abs(this.xmax-this.xmin)}},{key:"centerAt",value:function(e){var t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}},{key:"clone",value:function(){var e=new r;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}},{key:"contains",value:function(e){if(!e)return!1;var t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Object(f.a)(t,n)&&(e=t.isWebMercator?Object(f.b)(e):Object(f.e)(e,!0)),"point"===e.type?Object(d.e)(this,e):"extent"===e.type&&Object(d.c)(this,e)}},{key:"equals",value:function(e){if(!e)return!1;var t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Object(f.a)(t,n)&&(e=t.isWebMercator?Object(f.b)(e):Object(f.e)(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}},{key:"expand",value:function(e){var t=.5*(1-e),n=this.width*t,r=this.height*t;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){var i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){var a=(this.mmax-this.mmin)*t;this.mmin+=a,this.mmax-=a}return this}},{key:"intersects",value:function(e){if(Object(a.j)(e))return!1;"mesh"===e.type&&(e=e.extent);var t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Object(f.a)(t,n)&&(e=t.isWebMercator?Object(f.b)(e):Object(f.e)(e,!0)),Object(v.b)(e.type)(this,e)}},{key:"normalize",value:function(){var e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}},{key:"offset",value:function(e,t,n){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=n&&(this.zmin+=n,this.zmax+=n),this}},{key:"shiftCentralMeridian",value:function(){return this._normalize(!0)}},{key:"union",value:function(e){return this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=y(Math.min,this.zmin,e.zmin),this.zmax=y(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=y(Math.min,this.mmin,e.mmin),this.mmax=y(Math.max,this.mmax,e.mmax)),this}},{key:"intersection",value:function(e){return this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=y(Math.max,this.zmin,e.zmin),this.zmax=y(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=y(Math.max,this.mmin,e.mmin),this.mmax=y(Math.min,this.mmax,e.mmax)),this):null}},{key:"toJSON",value:function(e){return this.write(null,e)}},{key:"_shiftCM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.d)(this.spatialReference);if(!e||!this.spatialReference)return this;var t=this.spatialReference,n=this._getCM(e);if(n){var r=t.isWebMercator?Object(f.e)(n):n;this.xmin-=n.x,this.xmax-=n.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new l.a(Object(o.c)(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}},{key:"_getCM",value:function(e){var t=null,n=zt(e.valid,2),r=n[0],i=n[1],a=this.xmin,o=this.xmax;return a>=r&&a<=i&&o>=r&&o<=i||(t=this.center),t}},{key:"_normalize",value:function(e,t,n){var r=this.spatialReference;if(!r)return this;if(!(n=n||Object(c.d)(r)))return this;var i=this._getParts(n).map((function(e){return e.extent}));if(i.length<2)return i[0]||this;if(i.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return i;var a=!0,o=!0;return i.forEach((function(e){e.hasZ||(a=!1),e.hasM||(o=!1)})),{rings:i.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(a)for(var n=(e.zmax-e.zmin)/2,r=0;r<t.length;r++)t[r].push(n);if(o)for(var i=(e.mmax-e.mmin)/2,s=0;s<t.length;s++)t[s].push(i);return t})),hasZ:a,hasM:o,spatialReference:r}}},{key:"_getParts",value:function(e){var t=this.cache._parts;if(!t){t=[];var n,i=this.ymin,a=this.ymax,o=this.spatialReference,s=this.width,u=this.xmin,l=this.xmax,h=zt((e=e||Object(c.d)(o)).valid,2),f=h[0],p=h[1],d=(n=this._normalizeX(this.xmin,e)).x,v=n.frameId,y=(n=this._normalizeX(this.xmax,e)).x,b=n.frameId,g=d===y&&s>0;if(s>2*p){var m=new r(u<l?d:y,i,p,a,o),w=new r(f,i,u<l?y:d,a,o),O=new r(0,i,p,a,o),j=new r(f,i,0,a,o),_=[],x=[];m.contains(O)&&_.push(v),m.contains(j)&&x.push(v),w.contains(O)&&_.push(b),w.contains(j)&&x.push(b);for(var k=v+1;k<b;k++)_.push(k),x.push(k);t.push({extent:m,frameIds:[v]},{extent:w,frameIds:[b]},{extent:O,frameIds:_},{extent:j,frameIds:x})}else d>y||g?t.push({extent:new r(d,i,p,a,o),frameIds:[v]},{extent:new r(f,i,y,a,o),frameIds:[b]}):t.push({extent:new r(d,i,y,a,o),frameIds:[v]});this.cache._parts=t}var S=this.hasZ,M=this.hasM;if(S||M){var I={};S&&(I.zmin=this.zmin,I.zmax=this.zmax),M&&(I.mmin=this.mmin,I.mmax=this.mmax);for(var T=0;T<t.length;T++)t[T].extent.set(I)}return t}},{key:"_normalizeX",value:function(e,t){var n,r=zt(t.valid,2),i=r[0],a=r[1],o=2*a,s=0;return e>a?(e-=(n=Math.ceil(Math.abs(e-a)/o))*o,s=n):e<i&&(e+=(n=Math.ceil(Math.abs(e-i)/o))*o,s=-n),{x:e,frameId:s}}}],[{key:"fromBounds",value:function(e,t){return new r({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}}]),n}(h.a);Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"cache",null),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"center",null),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"extent",null),Object(i.a)([Object(s.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null),Object(i.a)([Object(s.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"height",null),Object(i.a)([Object(s.b)({readOnly:!0})],b.prototype,"width",null),Object(i.a)([Object(s.b)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],b.prototype,"xmin",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],b.prototype,"ymin",void 0),Object(i.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmin",void 0),Object(i.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmin",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],b.prototype,"xmax",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],b.prototype,"ymax",void 0),Object(i.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmax",void 0),Object(i.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmax",void 0),(b=r=Object(i.a)([Object(u.a)("esri.geometry.Extent")],b)).prototype.toJSON.isDefaultToJSON=!0,t.a=b},OxmL:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l}));var r=Number.POSITIVE_INFINITY,i=Math.PI,a=2*i,o=128/i,s=i/180,u=1/Math.LN2;function c(e,t){return(e%=t)>=0?e:e+t}function l(e){return c(e*o,256)}function h(e){return Math.log(e)*u}function f(e,t,n){return e*(1-n)+t*n}},P2CQ:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=n("nvBr"),h=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).color=null,r.label=null,r.value=null,r}return Zt(n,[{key:"writeValue",value:function(e,t,n){t[n]=null==e?0:e}},{key:"clone",value:function(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}}]),n}(c.a);Object(i.a)([Object(o.b)({type:l.a,json:{type:[a.a],write:!0}})],h.prototype,"color",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{allowNull:!0}}})],h.prototype,"value",void 0),Object(i.a)([Object(u.a)("value")],h.prototype,"writeValue",null),h=r=Object(i.a)([Object(s.a)("esri.renderers.visualVariables.support.ColorStop")],h),t.a=h},PKzc:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("r88o"),u=n("04ZG"),c=n("Cduq"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("p6dn")),h=n("4frj"),f=n("eHpU"),p=n("+pD8"),d=n("SZUe"),v=n("7ZHn"),y=n("Z1nw"),b=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).activeMediaInfoIndex=null,r.description=null,r.mediaInfos=null,r.title=null,r.type="media",r}return Zt(n,[{key:"readMediaInfos",value:function(e){return e&&e.map((function(e){return"image"===e.type?p.a.fromJSON(e):"barchart"===e.type?h.a.fromJSON(e):"columnchart"===e.type?f.a.fromJSON(e):"linechart"===e.type?d.a.fromJSON(e):"piechart"===e.type?v.a.fromJSON(e):void 0})).filter(Boolean)}},{key:"writeMediaInfos",value:function(e,t){t.mediaInfos=e&&e.map((function(e){return e.toJSON()}))}},{key:"clone",value:function(){return new r({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?Object(a.a)(this.mediaInfos):null,title:this.title})}}]),n}(l.a);Object(i.a)([Object(o.b)()],b.prototype,"activeMediaInfoIndex",void 0),Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"description",void 0),Object(i.a)([Object(o.b)({types:[y.a]})],b.prototype,"mediaInfos",void 0),Object(i.a)([Object(s.a)("mediaInfos")],b.prototype,"readMediaInfos",null),Object(i.a)([Object(c.a)("mediaInfos")],b.prototype,"writeMediaInfos",null),Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"title",void 0),Object(i.a)([Object(o.b)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=r=Object(i.a)([Object(u.a)("esri.popup.content.MediaContent")],b),t.a=b},PNY3:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return g}));var r=n("IXLn");function i(e,t){return Object(r.e)(e,t)}function a(e,t){var n,r,i;if(e.xmin<=t.xmin){if(n=t.xmin,e.xmax<n)return!1}else if(n=e.xmin,t.xmax<n)return!1;if(e.ymin<=t.ymin){if(r=t.ymin,e.ymax<r)return!1}else if(r=e.ymin,t.ymax<r)return!1;if(e.hasZ&&t.hasZ&&t.hasZ)if(e.zmin<=t.zmin){if(i=t.zmin,e.zmax<i)return!1}else if(i=e.zmin,t.zmax<i)return!1;return!0}function o(e,t){var n,i=t.points,a=t.hasZ?r.b:r.a,o=Vt(i);try{for(o.s();!(n=o.n()).done;){if(a(e,n.value))return!0}}catch(s){o.e(s)}finally{o.f()}return!1}var s=[0,0],u=[0,0],c=[0,0],l=[0,0],h=[s,u,c,l],f=[[c,s],[s,u],[u,l],[l,c]];function p(e,t){s[0]=e.xmin,s[1]=e.ymax,u[0]=e.xmax,u[1]=e.ymax,c[0]=e.xmin,c[1]=e.ymin,l[0]=e.xmax,l[1]=e.ymin;var n,i=Vt(h);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(Object(r.f)(t,a))return!0}}catch(m){i.e(m)}finally{i.f()}var o,p=Vt(t.rings);try{for(p.s();!(o=p.n()).done;){var d=o.value;if(d.length){var v=d[0];if(Object(r.a)(e,v))return!0;for(var y=1;y<d.length;y++){var g=d[y];if(Object(r.a)(e,g)||b(v,g,f))return!0;v=g}}}}catch(m){p.e(m)}finally{p.f()}return!1}function d(e,t){s[0]=e.xmin,s[1]=e.ymax,u[0]=e.xmax,u[1]=e.ymax,c[0]=e.xmin,c[1]=e.ymin,l[0]=e.xmax,l[1]=e.ymin;var n,i=t.paths,a=Vt(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i.length){var h=o[0];if(Object(r.a)(e,h))return!0;for(var p=1;p<o.length;p++){var d=o[p];if(Object(r.a)(e,d)||b(h,d,f))return!0;h=d}}}}catch(v){a.e(v)}finally{a.f()}return!1}var v=[0,0];function y(e){for(var t=0;t<e.length;t++){for(var n=e[t],r=0;r<n.length-1;r++)for(var i=n[r],a=n[r+1],o=t+1;o<e.length;o++)for(var s=0;s<e[o].length-1;s++){var u=e[o][s],c=e[o][s+1];if(g(i,a,u,c,v)&&!(v[0]===i[0]&&v[1]===i[1]||v[0]===u[0]&&v[1]===u[1]||v[0]===a[0]&&v[1]===a[1]||v[0]===c[0]&&v[1]===c[1]))return!0}var l=n.length;if(!(l<=4))for(var h=0;h<l-3;h++){var f=l-1;0===h&&(f=l-2);for(var p=n[h],d=n[h+1],y=h+2;y<f;y++){var b=n[y],m=n[y+1];if(g(p,d,b,m,v)&&!(v[0]===p[0]&&v[1]===p[1]||v[0]===b[0]&&v[1]===b[1]||v[0]===d[0]&&v[1]===d[1]||v[0]===m[0]&&v[1]===m[1]))return!0}}}return!1}function b(e,t,n){for(var r=0;r<n.length;r++)if(g(e,t,n[r][0],n[r][1]))return!0;return!1}function g(e,t,n,r,i){var a=zt(e,2),o=a[0],s=a[1],u=zt(t,2),c=u[0],l=u[1],h=zt(n,2),f=h[0],p=h[1],d=zt(r,2),v=d[0]-f,y=o-f,b=c-o,g=d[1]-p,m=s-p,w=l-s,O=g*b-v*w;if(0===O)return!1;var j=(v*m-g*y)/O,_=(b*m-w*y)/O;return j>=0&&j<=1&&_>=0&&_<=1&&(i&&(i[0]=o+j*(c-o),i[1]=s+j*(l-s)),!0)}function m(e){switch(e){case"esriGeometryEnvelope":case"extent":return a;case"esriGeometryMultipoint":case"multipoint":return o;case"esriGeometryPoint":case"point":return i;case"esriGeometryPolygon":case"polygon":return p;case"esriGeometryPolyline":case"polyline":return d;case"mesh":return a}}},PVlI:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=n("6S2I"),o=(n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("VLTf")),c=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(u.e)(this.url);if(Object(i.k)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(u.g)(e,a.a.getLogger(this.declaredClass)))}}]),n}(e);return Object(r.a)([Object(o.b)()],t.prototype,"title",null),Object(r.a)([Object(o.b)({type:String})],t.prototype,"url",null),t=Object(r.a)([Object(s.a)("esri.layers.mixins.ArcGISService")],t)}},PcLj:function(e,t,n){"use strict";n.d(t,"b",(function(){return y}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("RI0u"),u=n("r88o"),c=n("04ZG"),l=n("Cduq"),h=n("4EHJ"),f=(n("ju1D"),n("9AIY"),n("/PL2")),p=n("ag7Y"),d=Object(o.b)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"}),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"readHref",value:function(e,t,n){return e?Object(f.a)(e,n):t.dataURI}},{key:"writeHref",value:function(e,t,n,r){e&&(Object(h.u)(e)?t.dataURI=e:(t.href=Object(f.e)(e,r),Object(h.s)(t.href)&&(t.href=Object(h.C)(t.href))))}},{key:"clone",value:function(){return new r({href:this.href,primitive:this.primitive})}}]),n}(p.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],v.prototype,"href",void 0),Object(i.a)([Object(u.a)("href")],v.prototype,"readHref",null),Object(i.a)([Object(l.a)("href",{href:{type:String},dataURI:{type:String}})],v.prototype,"writeHref",null),Object(i.a)([Object(s.a)(d)],v.prototype,"primitive",void 0),v=r=Object(i.a)([Object(c.a)("esri.symbols.support.IconSymbol3DLayerResource")],v);var y="circle";t.a=v},PhHr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){return n.listen(t.nativeElement,"keydown",(function(t){if(document.activeElement.className.includes("esri-view-surface")&&document.activeElement.firstChild instanceof HTMLCanvasElement){var n=t.key.toLowerCase();(t.ctrlKey&&"z"===n||t.metaKey&&"z"===n)&&e.undo(),(t.ctrlKey&&"y"===n||t.metaKey&&"y"===n)&&e.redo(),"delete"!==n&&"backspace"!==n||e.delete()}}))}},Piei:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=n("6S2I"),u=n("WbKI"),c=n("Gj5k"),l=n("04ZG"),h=n("zlDU"),f=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),p=s.a.getLogger("esri.layers.support.PixelBlock"),d=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).width=null,r.height=null,r.pixelType="f32",r.validPixelCount=null,r.mask=null,r.maskIsAlpha=!1,r.pixels=null,r.statistics=null,r}return Zt(n,[{key:"castPixelType",value:function(e){if(!e)return"f32";var t=e.toLowerCase();return["u1","u2","u4"].indexOf(t)>-1?t="u8":-1===["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].indexOf(t)&&(t="f32"),t}},{key:"getPlaneCount",value:function(){return this.pixels&&this.pixels.length}},{key:"addData",value:function(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new h.a("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics||{minValue:null,maxValue:null})}},{key:"getAsRGBA",value:function(){var e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}},{key:"getAsRGBAFloat",value:function(){var e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}},{key:"updateStatistics",value:function(){var e=this;this.statistics=this.pixels.map((function(t){return e._calculateBandStatistics(t,e.mask)}));var t=this.mask,n=0;if(t)for(var r=0;r<t.length;r++)t[r]&&n++;else n=this.width*this.height;this.validPixelCount=n}},{key:"clamp",value:function(e){if(e&&"f64"!==e&&"f32"!==e){var t;switch(e){case"u8":t=[0,255];break;case"u16":t=[0,65535];break;case"u32":t=[0,4294967295];break;case"s8":t=[-128,127];break;case"s16":t=[-32768,32767];break;case"s32":t=[-2147483648,2147483647];break;default:t=[-34e38,34e38]}for(var n,i,a,o=zt(t,2),s=o[0],u=o[1],c=this.pixels,l=this.width*this.height,h=c.length,f=[],p=0;p<h;p++){a=r.createEmptyBand(e,l),n=c[p];for(var d=0;d<l;d++)i=n[d],a[d]=i>u?u:i<s?s:i;f.push(a)}this.pixels=f,this.pixelType=e}}},{key:"extractBands",value:function(e){var t=this;if(Object(o.j)(e)||0===e.length||null==this.pixels||0===this.pixels.length)return this;var n=this.pixels.length,i=e.some((function(e){return e>=t.pixels.length})),a=n===e.length&&!e.some((function(e,t){return e!==t}));return i||a?this:new r({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map((function(e){return t.pixels[e]})),statistics:this.statistics&&e.map((function(e){return t.statistics[e]}))})}},{key:"clone",value:function(){var e,t=new r({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(t.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));var n=r.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];var i=this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=i?this.pixels[e].slice(0,this.pixels[e].length):new n(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=Object(a.a)(this.statistics[e]);return t}},{key:"_fillFrom8Bit",value:function(e){var t=this.mask,n=this.maskIsAlpha,r=this.pixels;if(e&&r&&r.length){var i,a,o,s;i=a=o=r[0],r.length>=3?(a=r[1],o=r[2]):2===r.length&&(a=r[1]);var u=new Uint32Array(e),c=this.width*this.height;if(i.length===c)if(t&&t.length===c)if(n)for(s=0;s<c;s++)t[s]&&(u[s]=t[s]<<24|o[s]<<16|a[s]<<8|i[s]);else for(s=0;s<c;s++)t[s]&&(u[s]=255<<24|o[s]<<16|a[s]<<8|i[s]);else for(s=0;s<c;s++)u[s]=255<<24|o[s]<<16|a[s]<<8|i[s];else p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFromNon8Bit",value:function(e){var t=this.pixels,n=this.mask,r=this.statistics;if(e&&t&&t.length){var i=this.pixelType,a=1,o=0;if(r&&r.length>0)o=r.map((function(e){return e.minValue})).reduce((function(e,t){return Math.min(e,t)})),a=255/r.map((function(e){return e.maxValue-e.minValue})).reduce((function(e,t){return Math.max(e,t)}));else{var s=255;"s8"===i?(o=-128,s=127):"u16"===i?s=65535:"s16"===i?(o=-32768,s=32767):"u32"===i?s=4294967295:"s32"===i?(o=-2147483648,s=2147483647):"f32"===i?(o=-34e38,s=34e38):"f64"===i&&(o=-Number.MAX_VALUE,s=Number.MAX_VALUE),a=255/(s-o)}var u,c,l,h,f,d=new Uint32Array(e),v=this.width*this.height;if((u=c=l=t[0]).length!==v)return p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(c=t[1],t.length>=3&&(l=t[2]),n&&n.length===v)for(h=0;h<v;h++)n[h]&&(d[h]=255<<24|(l[h]-o)*a<<16|(c[h]-o)*a<<8|(u[h]-o)*a);else for(h=0;h<v;h++)d[h]=255<<24|(l[h]-o)*a<<16|(c[h]-o)*a<<8|(u[h]-o)*a;else if(n&&n.length===v)for(h=0;h<v;h++)f=(u[h]-o)*a,n[h]&&(d[h]=255<<24|f<<16|f<<8|f);else for(h=0;h<v;h++)f=(u[h]-o)*a,d[h]=255<<24|f<<16|f<<8|f}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFrom32Bit",value:function(e){var t,n,r,i,a=this.pixels,o=this.mask;if(!e||!a||!a.length)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");t=n=r=a[0],a.length>=3?(n=a[1],r=a[2]):2===a.length&&(n=a[1]);var s=this.width*this.height;if(t.length!==s)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var u=0;if(o&&o.length===s)for(i=0;i<s;i++)e[u++]=t[i],e[u++]=n[i],e[u++]=r[i],e[u++]=1&o[i];else for(i=0;i<s;i++)e[u++]=t[i],e[u++]=n[i],e[u++]=r[i],e[u++]=1}},{key:"_calculateBandStatistics",value:function(e,t){var n,r=1/0,i=-1/0,a=e.length,o=0;if(t)for(n=0;n<a;n++)t[n]&&(r=(o=e[n])<r?o:r,i=o>i?o:i);else for(n=0;n<a;n++)r=(o=e[n])<r?o:r,i=o>i?o:i;return{minValue:r,maxValue:i}}}],[{key:"createEmptyBand",value:function(e,t){return new(r.getPixelArrayConstructor(e))(t)}},{key:"getPixelArrayConstructor",value:function(e){var t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"u32":t=Uint32Array;break;case"f32":t=Float32Array;break;case"f64":t=Float64Array;break;case"c64":case"c128":case"unknown":t=Float32Array}return t}}]),n}(f.a);Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"width",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"height",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"pixelType",void 0),Object(i.a)([Object(c.a)("pixelType")],d.prototype,"castPixelType",null),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"validPixelCount",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"mask",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"maskIsAlpha",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"pixels",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],d.prototype,"statistics",void 0),d=r=Object(i.a)([Object(l.a)("esri.layers.support.PixelBlock")],d),t.a=d},Pns9:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),s=n("M0lq"),u=n("tUFA"),c=new Set,l=[],h=new Map,f=[0,0],p=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._keyToItem=new Map,r.concurrency=6,r.strategy="scale-first",r.tileInfoView=null,r}return Zt(n,[{key:"initialize",value:function(){var e=this,t=this.concurrency,n=this.process;this._queue=new u.a({concurrency:t,process:function(t,r){var i=e._keyToItem.get(t);return n(i,{signal:r})},peeker:function(e){return e.values().next().value}})}},{key:"destroy",value:function(){this.clear(),this._queue.destroy(),this._queue=null}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return this.length>0||this.onGoingCount>0}},{key:"abort",value:function(e){this._queue.abort("string"==typeof e?e:e.id)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}},{key:"has",value:function(e){return this._keyToItem.has("string"==typeof e?e:e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e,t){var n=this,r=e.key.id+"-"+t;if(this.has(r))return this.get(r);var i=this._queue.push(r),a=function(){n._keyToItem.delete(r),n.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(a,a),this.notifyChange("updating"),i}},{key:"reset",value:function(){this._queue.reset(),this.notifyChange("updating")}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((function(e){var n=t._keyToItem.get(e),a=t.tileInfoView.getTileScale(n.key);h.has(a)||(h.set(a,[]),r=Math.max(a,r),i=Math.min(a,i)),h.get(a).push(n.key),c.add(a)}));var a=this.state.scale;h.has(a)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(l,c),l.sort(),a=l.reduce((function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}),l[0])),a=Math.min(a,r),a=Math.max(a,i);var o=h.get(a),s=n.getClosestInfoForScale(a),u=s.getColumnForX(this.state.center[0]),f=s.getRowForY(this.state.center[1]);return o.sort((function(e,t){var n=s.denormalizeCol(e.col,e.world),r=s.denormalizeCol(t.col,t.world);return Math.sqrt((u-n)*(u-n)+(f-e.row)*(f-e.row))-Math.sqrt((u-r)*(u-r)+(f-t.row)*(f-t.row))})),c.clear(),h.clear(),o[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=this.state.center,i=Number.POSITIVE_INFINITY,a=null;return e.forEach((function(e){var o=t._keyToItem.get(e);n.getTileCoords(f,o.key);var u=Object(s.i)(f,r);u<i&&(i=u,a=o.key)})),a.id}}]),n}(o.a);Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"concurrency",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"process",void 0),Object(r.a)([Object(i.b)()],p.prototype,"state",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"strategy",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],p.prototype,"updating",null),p=Object(r.a)([Object(a.a)("esri.views.2d.tiling.PagedTileQueue")],p)},"Pt/X":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("gEht"),i={readOnly:!0,get:function(){var e="metric",t=this.view;if(!t)return e;var n=t.get("map.portalItem.portal");if(n)switch(n.get("user.units")||n.units){case e:return e;case"english":return"imperial"}return Object(r.d)(t.spatialReference)||e}}},"Q+DB":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return h}));var r=n("AvGH"),i=n("M0lq"),a=n("yftL"),o=n("ZwYu"),s=n("D5Sn"),u=function e(t){Wt(this,e),this.coordinateHelper=t},c=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e)).point=r,i}return Zt(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Object(o.d)(this.point,e.point)}},{key:"check",value:function(e){return Object(i.j)(e,this.point)<a.a.pointThreshold}},{key:"closestTo",value:function(){return this.coordinateHelper.clone(this.point)}},{key:"intersect",value:function(e){var t=this,n=[];return e instanceof l?n.push.apply(n,Bt(Object(s.b)({start:e.start,end:e.end,type:e instanceof f?1:0},this.point))):e instanceof d&&n.push.apply(n,Bt(Object(s.a)(e.center,e.radius,this.point))),n.map((function(n){return new p(t.coordinateHelper,n,t,e)}))}}]),n}(u),l=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),(a=t.call(this,e)).start=r,a.end=i,a}return Zt(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Object(o.d)(this.start,e.start)&&Object(o.d)(this.end,e.end)}},{key:"intersect",value:function(e){var t=this,r=[];return e instanceof c?r.push.apply(r,Bt(Object(s.b)({start:this.start,end:this.end,type:this instanceof f?1:0},e.point))):e instanceof n?r.push.apply(r,Bt(Object(s.c)({start:this.start,end:this.end,type:this instanceof f?1:0},{start:e.start,end:e.end,type:e instanceof f?1:0}))):e instanceof d&&r.push.apply(r,Bt(Object(s.d)({start:this.start,end:this.end,type:this instanceof f?1:0},e.center,e.radius))),r.map((function(n){return new p(t.coordinateHelper,n,t,e)}))}}]),n}(u),h=function(e){Kt(n,e);var t=Xt(n);function n(e,i,a){var o;return Wt(this,n),(o=t.call(this,e,i,a)).dir=Object(r.a)(),o.p=Object(r.a)(),o}return Zt(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Dt(en(n.prototype),"objectEqual",this).call(this,e)}},{key:"check",value:function(e){return Object(i.d)(this.dir,this.end,this.start),Object(i.d)(this.p,e,this.start),Object(i.g)(this.dir,this.p)>=0&&Object(s.e)(e,this.start,this.end)<a.a.pointOnLineThreshold}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(s.h)(t,e,this.start,this.end),t}}]),n}(l),f=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){return Wt(this,n),t.call(this,e,r,i)}return Zt(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Dt(en(n.prototype),"objectEqual",this).call(this,e)}},{key:"check",value:function(e){return Object(s.e)(e,this.start,this.end)<a.a.pointOnLineThreshold}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(s.g)(t,e,this.start,this.end),t}}]),n}(l),p=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;return Wt(this,n),(o=t.call(this,e)).intersection=r,o.first=i,o.second=a,o}return Zt(n,[{key:"objectEqual",value:function(e){return e instanceof n&&this.first.objectEqual(e.first)&&this.second.objectEqual(e.second)}},{key:"check",value:function(){return!1}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(i.c)(t,this.intersection),t}},{key:"intersect",value:function(){return[]}}]),n}(u),d=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),(a=t.call(this,e)).center=r,a.radius=i,a}return Zt(n,[{key:"objectEqual",value:function(e){return e instanceof n&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}},{key:"check",value:function(){return!1}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(s.f)(t,e,this.center,this.radius),t}},{key:"intersect",value:function(e){var t=this,n=[];return e instanceof l?n.push.apply(n,Bt(Object(s.d)({start:e.start,end:e.end,type:e instanceof f?1:0},this.center,this.radius))):e instanceof c&&n.push.apply(n,Bt(Object(s.a)(this.center,this.radius,e.point))),n.map((function(n){return new p(t.coordinateHelper,n,t,e)}))}}]),n}(u)},Q1FS:function(e,t,n){"use strict";var r=n("yx2s"),i=n("Xwq/"),a=n("zfKp"),o=n("9AGB"),s=n("n3uD");function u(e){if(e||(e=s.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,a=i.toSubscriber(e,t,n);if(a.add(r?r.call(a,this.source):this.source||s.config.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),s.config.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),r.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=u(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:o.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=u(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}()},Q3fD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e){e.code.add(r.a(le||(le=Rt(["\n    vec4 premultiplyAlpha(vec4 v) {\n      return vec4(v.rgb * v.a, v.a);\n    }\n\n    // Note: the min in the last line has been added to fix an instability in chrome.\n    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911\n    // With proper floating point handling, the value could never be >1.\n    vec3 rgb2hsv(vec3 c) {\n      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n      float d = q.x - min(q.w, q.y);\n      float e = 1.0e-10;\n      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n    }\n\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n\n    float rgb2v(vec3 c) {\n      return max(c.x, max(c.y, c.z));\n    }\n  "]))))}},QFRQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return w}));var r=n("srIe"),i=n("qRWG"),a=n("Cy1f"),o=n("5DEt"),s=n("IRkY"),u=n("M0lq"),c=n("8JEK");function l(e){return e?{origin:Object(a.d)(e.origin),direction:Object(a.d)(e.direction)}:{origin:Object(a.e)(),direction:Object(a.e)()}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return f(e.origin,e.direction,t)}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return Object(o.j)(n.origin,e),Object(o.j)(n.direction,t),n}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l(),a=Object(i.b)(Object(u.c)(c.d.get(),t));if(a[2]=0,!e.unprojectFromRenderScreen(a,n.origin))return null;var s=Object(i.b)(Object(u.c)(c.d.get(),t));s[2]=1;var h=e.unprojectFromRenderScreen(s,c.d.get());return Object(r.j)(h)?null:(Object(o.i)(n.direction,h,n.origin),n)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return v(e,e.screenToRender(t,Object(i.b)(c.d.get())),n)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();Object(o.j)(n.origin,e.eye);var i=Object(o.v)(c.d.get(),t[0],t[1],1),a=e.unprojectFromRenderScreen(i,c.d.get());return Object(r.j)(a)?null:(Object(o.i)(n.direction,a,n.origin),n)}function y(e,t){var n=Object(o.f)(c.d.get(),Object(o.q)(c.d.get(),e.direction),Object(o.i)(c.d.get(),t,e.origin));return Object(o.g)(n,n)}function b(e,t,n){var r=Object(o.g)(e.direction,Object(o.i)(n,t,e.origin));return Object(o.e)(n,e.origin,Object(o.d)(n,e.direction,r)),n}function g(){return{origin:null,direction:null}}var m=new s.a(g),w=Object.freeze({__proto__:null,create:l,wrap:function(e,t){var n=m.get();return n.origin=e,n.direction=t,n},copy:h,fromPoints:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return Object(o.j)(n.origin,e),Object(o.i)(n.direction,t,e),n},fromValues:f,fromScreen:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return p(e,e.screenToRender(t,Object(i.b)(c.d.get())),n)},fromRender:p,fromScreenAtEye:d,fromRenderAtEye:v,distance2:y,distance:function(e,t){return Math.sqrt(y(e,t))},closestPoint:b,createWrapper:g})},QLbw:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return f}));var r=n("zlDU"),i=n("WZb1"),a=(n("SuVq"),n("Ehki")),o=n("UhwK"),s=(n("4GrV"),n("gEht")),u=n("1jaj");function c(e){if(!e)return null;if(e.isGeographic&&e.wkid){var t=u.c[e.wkid];if(t)return t}if(e.wkt){var n=u.a.exec(e.wkt);if(!n||2!==n.length)return null;var r=n[1].split(",");if(!r||r.length<3)return null;var i=parseFloat(r[1]),a=parseFloat(r[2]);return isNaN(i)||isNaN(a)?null:{a:i,f:0===a?0:1/a}}return null}function l(e){var t=c(e||i.a.WGS84);if(function(e){return"b"in e&&"eSq"in e&&"radius"in e}(t))return t;var n=t.a*(1-t.f);return Object.assign(t,{b:n,eSq:1-Math.pow(n/t.a,2),radius:(2*t.a+n)/3,densificationRatio:1e4/((2*t.a+n)/3)})}function h(e,t,n){var r,i=l(n),a=i.a,o=i.eSq,s=Math.sqrt(o),c=Math.sin(t[1]*u.d),h=a*t[0]*u.d;return r=o>0?a*((1-o)*(c/(1-o*(c*c))-1/(2*s)*Math.log((1-s*c)/(1+s*c))))*.5:a*c,e[0]=h,e[1]=r,e}function f(e){return null!==c(e)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"square-meters";if(e.some((function(e){return!f(e.spatialReference)})))throw new r.a("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var n=[],i=0;i<e.length;i++){var a=e[i],o=a.spatialReference,u=l(o),c=u.radius,p=u.densificationRatio;n.push(v(a,c*p))}for(var d=[],y=[0,0],b=[0,0],g=0;g<n.length;g++){for(var m=n[g],w=m.rings,O=m.spatialReference,j=0,_=0;_<w.length;_++){var x=w[_];h(y,x[0],O),h(b,x[x.length-1],O);for(var k=b[0]*y[1]-y[0]*b[1],S=0;S<x.length-1;S++)h(y,x[S+1],O),h(b,x[S],O),k+=b[0]*y[1]-y[0]*b[1];j+=k}j=Object(s.c)(j,"square-meters",t),d.push(j/-2)}return d}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=e,i=e;if(!n&&!i)throw new r.a("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(n?n.some((function(e){return!f(e.spatialReference)})):i.some((function(e){return!f(e.spatialReference)})))throw new r.a("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var a=[],o=0;o<e.length;o++){for(var u=e[o],c=u.spatialReference,l="polyline"===u.type?u.paths:u.rings,h=0,p=0;p<l.length;p++){for(var d=l[p],v=0,y=1;y<d.length;y++){var g=d[y-1][0],m=d[y][0],w=d[y-1][1],O=d[y][1];if(w!==O||g!==m){var j={distance:null};b(j,[g,w],[m,O],c),v+=j.distance}}h+=v}h=Object(s.c)(h,"meters",t),a.push(h)}return a}function v(e,t){if("polyline"!==e.type&&"polygon"!==e.type)throw new r.a("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");var n=e.spatialReference;if(!f(n))throw new r.a("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var i,s=[],u=[0,0],c={distance:null},l=Vt("polyline"===e.type?e.paths:e.rings);try{for(l.s();!(i=l.n()).done;){var h=i.value,p=[];s.push(p),p.push([h[0][0],h[0][1]]);for(var d=void 0,v=void 0,g=h[0][0],m=h[0][1],w=0;w<h.length-1;w++)if(d=h[w+1][0],v=h[w+1][1],g!==d||m!==v){var O=[g,m];b(c,[g,m],[d,v],n);var j=c.azimuth,_=c.distance,x=_/t;if(x>1){for(var k=1;k<=x-1;k++)y(u,O,j,k*t,n),p.push(u.slice(0));y(u,O,j,(_+Math.floor(x-1)*t)/2,n),p.push(u.slice(0))}y(u,O,j,_,n),p.push(u.slice(0)),g=u[0],m=u[1]}}}catch(S){l.e(S)}finally{l.f()}return"polyline"===e.type?new o.a({paths:s,spatialReference:n}):new a.a({rings:s,spatialReference:n})}function y(e,t,n,r,i){for(var a,o,s,c=t[0]*u.d,h=t[1]*u.d,f=n*u.d,p=l(i),d=p.a,v=p.b,y=p.f,b=Math.sin(f),g=Math.cos(f),m=(1-y)*Math.tan(h),w=1/Math.sqrt(1+m*m),O=m*w,j=Math.atan2(m,g),_=w*b,x=_*_,k=1-x,S=k*(d*d-v*v)/(v*v),M=1+S/16384*(4096+S*(S*(320-175*S)-768)),I=S/1024*(256+S*(S*(74-47*S)-128)),T=r/(v*M),A=2*Math.PI;Math.abs(T-A)>1e-12;)s=Math.cos(2*j+T),A=T,T=r/(v*M)+I*(a=Math.sin(T))*(s+I/4*((o=Math.cos(T))*(2*s*s-1)-I/6*s*(4*a*a-3)*(4*s*s-3)));var C=O*a-w*o*g,E=Math.atan2(O*o+w*a*g,(1-y)*Math.sqrt(x+C*C)),P=Math.atan2(a*b,w*o-O*a*g),R=y/16*k*(4+y*(4-3*k)),D=E/u.d;return e[0]=(c+(P-(1-R)*y*_*(T+R*a*(s+R*o*(2*s*s-1)))))/u.d,e[1]=D,e}function b(e,t,n,r){var i,a,o,s,c,h,f,p,d,v,y=t[0]*u.d,b=t[1]*u.d,g=n[0]*u.d,m=n[1]*u.d,w=l(r),O=w.a,j=w.b,_=w.f,x=w.radius,k=g-y,S=Math.atan((1-_)*Math.tan(b)),M=Math.atan((1-_)*Math.tan(m)),I=Math.sin(S),T=Math.cos(S),A=Math.sin(M),C=Math.cos(M),E=1e3,P=k;do{if(f=Math.sin(P),p=Math.cos(P),0===(o=Math.sqrt(C*f*(C*f)+(T*A-I*C*p)*(T*A-I*C*p))))return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;c=I*A+T*C*p,h=Math.atan2(o,c),s=c-2*I*A/(a=1-(d=T*C*f/o)*d),isNaN(s)&&(s=0),i=P,P=k+(1-(v=_/16*a*(4+_*(4-3*a))))*_*d*(h+v*o*(s+v*c*(2*s*s-1)))}while(Math.abs(P-i)>1e-12&&--E>0);if(0===E){var R=x,D=Math.acos(Math.sin(b)*Math.sin(m)+Math.cos(b)*Math.cos(m)*Math.cos(g-y))*R,L=g-y,N=Math.sin(L)*Math.cos(m),F=Math.cos(b)*Math.sin(m)-Math.sin(b)*Math.cos(m)*Math.cos(L),z=Math.atan2(N,F);return e.azimuth=z/u.d,e.distance=D,e.reverseAzimuth=void 0,e}var V=a*(O*O-j*j)/(j*j),G=V/1024*(256+V*(V*(74-47*V)-128)),U=j*(1+V/16384*(4096+V*(V*(320-175*V)-768)))*(h-G*o*(s+G/4*(c*(2*s*s-1)-G/6*s*(4*o*o-3)*(4*s*s-3)))),B=Math.atan2(C*Math.sin(P),T*A-I*C*Math.cos(P)),q=Math.atan2(T*Math.sin(P),T*A*Math.cos(P)-I*C);return e.azimuth=B/u.d,e.distance=U,e.reverseAzimuth=q/u.d,e}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"meters";if(!e||!t)throw new r.a("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!e.spatialReference||!t.spatialReference)throw new r.a("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!e.spatialReference.equals(t.spatialReference))throw new r.a("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");var i=e.spatialReference;if(!f(i))throw new r.a("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(e.equals(t))return{distance:0,azimuth:0,reverseAzimuth:0};var a={distance:null};return b(a,[e.x,e.y],[t.x,t.y],i),a.distance=Object(s.c)(a.distance,"meters",n),a}},QQZE:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).name=null,r.code=null,r}return Zt(n,[{key:"clone",value:function(){return new r({name:this.name,code:this.code})}}]),n}(c.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"name",void 0),Object(i.a)([Object(o.b)({type:[String,Number],json:{write:!0}})],l.prototype,"code",void 0);var h,f=l=r=Object(i.a)([Object(u.a)("esri.layers.support.CodedValue")],l),p=n("Qzg2"),d=h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).codedValues=null,r.type="coded-value",r}return Zt(n,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var n=String(e);this.codedValues.some((function(e){return String(e.code)===n&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new h({codedValues:Object(a.a)(this.codedValues),name:this.name})}}]),n}(p.a);Object(i.a)([Object(o.b)({type:[f],json:{write:!0}})],d.prototype,"codedValues",void 0),Object(i.a)([Object(s.a)({codedValue:"coded-value"})],d.prototype,"type",void 0),d=h=Object(i.a)([Object(u.a)("esri.layers.support.CodedValueDomain")],d),t.a=d},"QS+a":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n("wSAH");var r=n("qRWG");function i(e){return Object(r.f)(e.x,e.y)}function a(e,t){var n=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Object(r.f)(t.clientX-n.left,t.clientY-n.top)}function o(e,t){return t instanceof Event?a(e,t):i(t)}function s(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;case"key-down":case"key-up":case"gamepad":case"focus":case"blur":default:return!1}return!1}},QSbz:function(e,t,n){"use strict";var r=n("oXfm"),i=n("vn/o"),a=n("eydS"),o=n("Tcbo"),s=n("iTZm"),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var l;if(l="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,l)))throw new Error(o[n]);this._dict_set=!0}}function l(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}c.prototype.push=function(e,t){var n,o,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,s.input="string"==typeof e?a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,o))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||this.onData("string"===this.options.to?a.buf2binstring(i.shrinkBuf(s.output,s.next_out)):i.shrinkBuf(s.output,s.next_out))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),s.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=c,t.deflate=l,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,l(e,t)}},QhKk:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s}));var r=1e-6,i=Math.random,a=Math.PI/180,o=180/Math.PI;function s(e){return e*a}function u(e){return e*o}Object.freeze({__proto__:null,EPSILON:r,RANDOM:i,toRadian:s,toDegree:u,equals:function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))}})},QmHG:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return a})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return v})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return O})),n.d(t,"r",(function(){return w})),n.d(t,"s",(function(){return m})),n.d(t,"t",(function(){return d}));var r=n("srIe");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,n,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i();return s[0]=e,s[1]=t,s[2]=n,s[3]=r,s[4]=a,s[5]=o,s}function o(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function s(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function u(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length/3,i=e[0],a=e[1],o=e[2],s=e[3],u=e[4],c=e[5],l=0;l<r;l++)i=Math.min(i,t[n+3*l]),a=Math.min(a,t[n+3*l+1]),o=Math.min(o,t[n+3*l+2]),s=Math.max(s,t[n+3*l]),u=Math.max(u,t[n+3*l+1]),c=Math.max(c,t[n+3*l+2]);e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=u,e[5]=c}function c(e,t,n){var r=t.length,i=e[0],a=e[1],o=e[2],s=e[3],u=e[4],c=e[5];if(n)for(var l=0;l<r;l++){var h=t[l];i=Math.min(i,h[0]),a=Math.min(a,h[1]),o=Math.min(o,h[2]),s=Math.max(s,h[0]),u=Math.max(u,h[1]),c=Math.max(c,h[2])}else for(var f=0;f<r;f++){var p=t[f];i=Math.min(i,p[0]),a=Math.min(a,p[1]),s=Math.max(s,p[0]),u=Math.max(u,p[1])}e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=u,e[5]=c}function l(e){return e[0]>=e[3]?0:e[3]-e[0]}function h(e){return e[1]>=e[4]?0:e[4]-e[1]}function f(e){return e[2]>=e[5]?0:e[5]-e[2]}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=e[0]+l(e)/2,t[1]=e[1]+h(e)/2,t[2]=e[2]+f(e)/2,t}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=l(e),t[1]=h(e),t[2]=f(e),t}function v(e){return Math.max(l(e),f(e),h(e))}function y(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=e[0]+l(e)/2,i=e[1]+h(e)/2,a=e[2]+f(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=a+(e[2]-a)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=a+(e[5]-a)*t,n}function g(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function j(e){return e?O(e,M):i(M)}function _(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function x(e){return 6===e.length}function k(e){return 0===l(e)&&0===h(e)&&0===f(e)}function S(e,t,n){if(Object(r.j)(e)||Object(r.j)(t))return e===t;if(!x(e)||!x(t))return!1;if(n){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}n("OvF4"),n("kYAx");var M=[1/0,1/0,1/0,-1/0,-1/0,-1/0],I=[0,0,0,0,0,0];i()},Qr4e:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("zqDF");function i(e){var t=Object(r.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function a(e){return Math.max(0,Math.min(1-e/100,1))}},Qzg2:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("+opI"),o=n("RI0u"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=new a.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).name=null,r.type=null,r}return n}(u.a);Object(r.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"name",void 0),Object(r.a)([Object(o.a)(c)],l.prototype,"type",void 0),l=Object(r.a)([Object(s.a)("esri.layers.support.Domain")],l),t.a=l},"R/jG":function(e,t,n){"use strict";function r(){return new Float32Array(3)}function i(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}function o(){return r()}function s(){return a(1,1,1)}function u(){return a(1,0,0)}function c(){return a(0,1,0)}function l(){return a(0,0,1)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var h=o(),f=s(),p=u(),d=c(),v=l();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:function(e,t){return new Float32Array(e,t,3)},zeros:o,ones:s,unitX:u,unitY:c,unitZ:l,ZEROS:h,ONES:f,UNIT_X:p,UNIT_Y:d,UNIT_Z:v})},R3GT:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).extent=null,r.extraParameters=null,r.outSpatialReference=null,r.template=null,r.view=null,r}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")).a);Object(r.a)([Object(i.b)()],o.prototype,"extent",void 0),Object(r.a)([Object(i.b)()],o.prototype,"extraParameters",void 0),Object(r.a)([Object(i.b)()],o.prototype,"outSpatialReference",void 0),Object(r.a)([Object(i.b)()],o.prototype,"template",void 0),Object(r.a)([Object(i.b)()],o.prototype,"view",void 0),o=Object(r.a)([Object(a.a)("esri.tasks.support.PrintParameters")],o),t.a=o},R3Kl:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),s=n("/CmD"),u=n("Tl51"),c=n("4EdQ"),l=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).attached=!1,r.created=!1,r.completed=!1,r.manipulators=new c.a,r.deferCreation=!1,r._editableFlags=new Array,r._creationResolver=Object(o.g)(),r}return Zt(n,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"isSupported",get:function(){return!0}},{key:"visible",set:function(e){this._set("visible",e),e||Object(u.d)(this,!1),this.attached&&(e?this._show():this._hide())}},{key:"editable",get:function(){return this.hasEditableFlag(0)},set:function(e){this.setEditableFlag(0,e)}},{key:"attach",value:function(){!this.attached&&this.isSupported&&(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}},{key:"detach",value:function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))}},{key:"handleInputEvent",value:function(e){this.attached&&this.onInputEvent(e)}},{key:"handleInputEventAfter",value:function(e){this.attached&&this.onInputEventAfter(e)}},{key:"destroy",value:function(){this.manipulators.destroy(),this._set("view",null),this._set("created",!1),this._set("completed",!1)}},{key:"setEditableFlag",value:function(e,t){this._editableFlags[e]=t,this.manipulators.isToolEditable=this._editableFlags.every((function(e){return null==e||e})),this._updateManipulatorAttachment(),0===e&&this.notifyChange("editable"),this.onEditableChange()}},{key:"hasEditableFlag",value:function(e){var t=this._editableFlags[e];return null==t||t}},{key:"when",value:function(){return this._creationResolver.promise}},{key:"rejectCreation",value:function(e){this._creationResolver.reject(e)}},{key:"initialize",value:function(){this.deferCreation||this.complete()}},{key:"onAttach",value:function(){}},{key:"onDetach",value:function(){}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){}},{key:"onEditableChange",value:function(){}},{key:"onInputEvent",value:function(e){}},{key:"onInputEventAfter",value:function(e){}},{key:"internallyEditable",get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}},{key:"create",value:function(){this.created||(this._set("created",!0),this._creationResolver.resolve(this))}},{key:"complete",value:function(){this.create(),this._set("completed",!0)}},{key:"_show",value:function(){this._updateManipulatorAttachment(),this.onShow()}},{key:"_hide",value:function(){this._updateManipulatorAttachment(),this.onHide()}},{key:"_updateManipulatorAttachment",value:function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}}]),n}(s.a);Object(r.a)([Object(i.b)({constructOnly:!0})],l.prototype,"view",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],l.prototype,"active",null),Object(r.a)([Object(i.b)({value:!0})],l.prototype,"visible",null),Object(r.a)([Object(i.b)({value:!0})],l.prototype,"editable",null),Object(r.a)([Object(i.b)({readOnly:!0})],l.prototype,"attached",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],l.prototype,"created",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],l.prototype,"completed",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],l.prototype,"manipulators",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],l.prototype,"deferCreation",void 0),l=Object(r.a)([Object(a.a)("esri.views.interactive.InteractiveToolBase")],l)},R4xK:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("wdpY")),l=n("nvBr"),h=n("ZnuT"),f=n("ag7Y"),p=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).color=null,r.ratio=null,r}return Zt(n,[{key:"clone",value:function(){return new r({color:this.color,ratio:this.ratio})}}]),n}(f.a);Object(i.a)([Object(o.b)({type:l.a,json:{write:!0}})],p.prototype,"color",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],p.prototype,"ratio",void 0);var d,v=p=r=Object(i.a)([Object(u.a)("esri.renderers.support.HeatmapColorStop")],p),y=d=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e)).blurRadius=10,t.colorStops=[new v({ratio:0,color:new l.a("rgba(255, 140, 0, 0)")}),new v({ratio:.75,color:new l.a("rgba(255, 140, 0, 1)")}),new v({ratio:.9,color:new l.a("rgba(255, 0,   0, 1)")})],t.field=null,t.fieldOffset=0,t.maxPixelIntensity=100,t.minPixelIntensity=0,t.type="heatmap",t}return Zt(r,[{key:"collectRequiredFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.field)&&"string"==typeof r&&Object(c.d)(t,n,r);case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new d({blurRadius:this.blurRadius,colorStops:Object(a.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),r}(h.a);Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],y.prototype,"blurRadius",void 0),Object(i.a)([Object(o.b)({type:[v],json:{write:!0}})],y.prototype,"colorStops",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],y.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{overridePolicy:function(e,t,n){return{enabled:null==n}}}}})],y.prototype,"fieldOffset",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],y.prototype,"maxPixelIntensity",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],y.prototype,"minPixelIntensity",void 0),Object(i.a)([Object(s.a)({heatmap:"heatmap"})],y.prototype,"type",void 0),y=d=Object(i.a)([Object(u.a)("esri.renderers.HeatmapRenderer")],y),t.a=y},R4yR:function(e,t,n){"use strict";var r=n("IZ5B"),i=n("tjlA").Buffer;e.exports=function(e){return new r((function(t,n){var r=e.slice(-3),a=new XMLHttpRequest;a.open("GET",e,!0),"prj"!==r&&"cpg"!==r&&(a.responseType="arraybuffer"),a.addEventListener("load",(function(){return a.status>399?"prj"===r||"cpg"===r?t(!1):n(new Error(a.status)):t("prj"!==r&&"cpg"!==r?i.from(a.response):a.response)}),!1),a.send()}))}},RI0u:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("WbKI"),i=n("+opI");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreUnknown:!0},n=e instanceof i.a?e:new i.a(e,t),a={type:null!=t&&t.ignoreUnknown?n.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:n.jsonValues,read:(null==t||!t.readOnly)&&{reader:n.read},write:{writer:n.write}}};return void 0!==(null==t?void 0:t.default)&&(a.json.default=t.default),Object(r.b)(a)}},RaGr:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("srIe"),i=n("Cy1f"),a=n("5DEt"),o=n("r0DZ"),s=n("15Hh"),u=n("r+FG"),c=n("dXfX"),l=n("XvKw"),h=n("8JEK"),f=n("Ango"),p=n("yvcr"),d=n("hrr/"),v=n("024p"),y=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._handles=new o.a,r._quadMaterial=null,r._outlineMaterial=null,r._maxSize=0,r._position=Object(i.e)(),r._up=Object(i.e)(),r._right=Object(i.e)(),r._renderOccluded=4,r._color=Object(l.c)(1,0,0,1),r._outlineColor=Object(l.c)(0,0,0,1),r._outlineSize=0,r._size=32,r._outlineRenderOccluded=16,r.applyProps(e),r}return Zt(n,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(e){Object(c.c)(this._color,e),this._updateQuadMaterial()}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(e){Object(c.c)(this._outlineColor,e),this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(e){var t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(e){e!==this._size&&(this._size=e,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},set:function(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}},{key:"geometry",set:function(e){var t=e.previous,n=e.center,r=e.next;this._maxSize=Math.min(Object(a.n)(n,t),Object(a.n)(n,r))/3,Object(a.q)(this._up,Object(a.i)(this._up,t,n)),Object(a.q)(this._right,Object(a.i)(this._right,r,n)),Object(a.j)(this._position,n),this.recreateGeometry()}},{key:"createExternalResources",value:function(){var e=this;this._quadMaterial=new v.a(this.quadMaterialParameters),this._outlineMaterial=new d.a(this.outlineMaterialParameters),this._handles.add(this.view.state.watch("camera",(function(){return e._updateTransform()})))}},{key:"destroyExternalResources",value:function(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}},{key:"forEachExternalMaterial",value:function(e){e(this._quadMaterial),e(this._outlineMaterial)}},{key:"createGeometries",value:function(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}},{key:"_createQuadGeometry",value:function(e){var t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}},{key:"_createOutlineGeometry",value:function(e){if(0!==this._outlineSize){var t=Object(a.e)(h.d.get(),this._up,this._right),n=p.a.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(n,this._outlineMaterial)}}},{key:"_updateTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.object,t=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position),n=Math.min(this._maxSize,t);Object(s.i)(b),Object(s.s)(b,b,this._position),Object(s.r)(b,b,[n,n,n]),Object(r.k)(e)&&(e.transformation=b)}},{key:"_quadGeometryData",value:function(e,t){var n=Object(a.e)(h.d.get(),e,t);return new f.a([["position",{size:3,data:[0,0,0].concat(Bt(t),Bt(e),Bt(n)),exclusive:!0}]],[["position",new Uint16Array([0,1,2,1,2,3])]])}},{key:"quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},{key:"_updateQuadMaterial",value:function(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}},{key:"outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}},{key:"_updateOutlineMaterial",value:function(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}]),n}(n("X668").a),b=Object(u.b)()},RlM3:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return b}));var r=n("+opI"),i=n("IDUf"),a={year:"numeric",month:"numeric",day:"numeric"},o={year:"numeric",month:"long",day:"numeric"},s={year:"numeric",month:"short",day:"numeric"},u={year:"numeric",month:"long",weekday:"long",day:"numeric"},c={hour:"numeric",minute:"numeric"},l=Nt(Nt({},c),{},{second:"numeric"}),h={"short-date":a,"short-date-short-time":Nt(Nt({},a),c),"short-date-short-time-24":Nt(Nt(Nt({},a),c),{},{hour12:!1}),"short-date-long-time":Nt(Nt({},a),l),"short-date-long-time-24":Nt(Nt(Nt({},a),l),{},{hour12:!1}),"short-date-le":a,"short-date-le-short-time":Nt(Nt({},a),c),"short-date-le-short-time-24":Nt(Nt(Nt({},a),c),{},{hour12:!1}),"short-date-le-long-time":Nt(Nt({},a),l),"short-date-le-long-time-24":Nt(Nt(Nt({},a),l),{},{hour12:!1}),"long-month-day-year":o,"long-month-day-year-short-time":Nt(Nt({},o),c),"long-month-day-year-short-time-24":Nt(Nt(Nt({},o),c),{},{hour12:!1}),"long-month-day-year-long-time":Nt(Nt({},o),l),"long-month-day-year-long-time-24":Nt(Nt(Nt({},o),l),{},{hour12:!1}),"day-short-month-year":s,"day-short-month-year-short-time":Nt(Nt({},s),c),"day-short-month-year-short-time-24":Nt(Nt(Nt({},s),c),{},{hour12:!1}),"day-short-month-year-long-time":Nt(Nt({},s),l),"day-short-month-year-long-time-24":Nt(Nt(Nt({},s),l),{},{hour12:!1}),"long-date":u,"long-date-short-time":Nt(Nt({},u),c),"long-date-short-time-24":Nt(Nt(Nt({},u),c),{},{hour12:!1}),"long-date-long-time":Nt(Nt({},u),l),"long-date-long-time-24":Nt(Nt(Nt({},u),l),{},{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":c,"long-time":l},f=Object(r.b)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),p=(f.toJSON.bind(f),f.fromJSON.bind(f),{ar:"ar-u-nu-latn-ca-gregory"}),d=new WeakMap,v=h["short-date-short-time"];function y(e){return h[e]||null}function b(e,t){return function(e){var t=e||v;if(!d.has(t)){var n=Object(i.b)(),r=p[Object(i.b)()]||n;d.set(t,new Intl.DateTimeFormat(r,t))}return d.get(t)}(t).format(e)}Object(i.a)((function(){d=new WeakMap,v=h["short-date-short-time"]}))},RxWC:function(e,t,n){var r=n("EoK7"),i=n("wsls");function a(e,t){var n=1;return t!==i.geometries.POLYGON&&t!==i.geometries.POLYLINE||(n=e.reduce((function(e,t){return e+=t.length,Array.isArray(t[0][0][0])&&(e+=t.reduce((function(e,t){return e+t.length-1}),0)),e}),0)),n}function o(e,t){return void 0===t&&(t=[]),"object"==typeof e[0][0]?e.reduce((function(e,t){return e.concat(o(t))}),t):e}e.exports.write=function(e,t,n,i,s){var u=0,c=0,l=100;e.forEach((function(e,t){var h=o(e),f=a([e],s),p=16*h.length+48+4*(f-1),d=h.reduce((function(e,t){return r.enlarge(e,t)}),r.blank());i.setInt32(c,l/2),i.setInt32(c+4,p/2),c+=8,l+=p+8,n.setInt32(u,t+1),n.setInt32(u+4,p/2),n.setInt32(u+8,s,!0),n.setFloat64(u+12,d.xmin,!0),n.setFloat64(u+20,d.ymin,!0),n.setFloat64(u+28,d.xmax,!0),n.setFloat64(u+36,d.ymax,!0),n.setInt32(u+44,f,!0),n.setInt32(u+48,h.length,!0),n.setInt32(u+52,0,!0);for(var v=e.reduce((function(e,t){return Array.isArray(t[0][0])?e=e.concat(t):e.push(t),e}),[]),y=1;y<f;y++)n.setInt32(u+52+4*y,v.reduce((function(e,t,n){return n<y?e+t.length:e}),0),!0);h.forEach((function(e,t){n.setFloat64(u+56+16*t+4*(f-1),e[0],!0),n.setFloat64(u+56+16*t+4*(f-1)+8,e[1],!0)})),u+=p+8}))},e.exports.shpLength=function(e){return 56*e.length+16*o(e).length},e.exports.shxLength=function(e){return 8*e.length},e.exports.extent=function(e){return o(e).reduce((function(e,t){return r.enlarge(e,t)}),r.blank())},e.exports.parts=a},RzfO:function(e,t,n){!function(){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(){return 1}e.exports?e.exports=a:this.LRUCache=a;var r=!1;function i(e){r||"string"==typeof e||"number"==typeof e||(r=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof e).stack))}function a(e){if(!(this instanceof a))return new a(e);"number"==typeof e&&(e={max:e}),e||(e={}),this._max=e.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=e.length||n,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=n),this._allowStale=e.stale||!1,this._maxAge=e.maxAge||null,this._dispose=e.dispose,this.reset()}function o(e,t,n){i(t);var r=e._cache[t];return r&&(s(e,r)?(l(e,r),e._allowStale||(r=void 0)):n&&function(e,t){c(e,t),t.lu=e._mru++,e._lruList[t.lu]=t}(e,r),r&&(r=r.value)),r}function s(e,t){if(!t||!t.maxAge&&!e._maxAge)return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e._maxAge&&n>e._maxAge}function u(e){for(;e._lru<e._mru&&e._length>e._max;)l(e,e._lruList[e._lru])}function c(e,t){for(delete e._lruList[t.lu];e._lru<e._mru&&!e._lruList[e._lru];)e._lru++}function l(e,t){t&&(e._dispose&&e._dispose(t.key,t.value),e._length-=t.length,e._itemCount--,delete e._cache[t.key],c(e,t))}function h(e,t,n,r,i,a){this.key=e,this.value=t,this.lu=n,this.length=r,this.now=i,a&&(this.maxAge=a)}Object.defineProperty(a.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this._max=e,this._length>this._max&&u(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(a.prototype,"lengthCalculator",{set:function(e){if("function"!=typeof e)for(var t in this._lengthCalculator=n,this._length=this._itemCount,this._cache)this._cache[t].length=1;else for(var t in this._lengthCalculator=e,this._length=0,this._cache)this._cache[t].length=this._lengthCalculator(this._cache[t].value),this._length+=this._cache[t].length;this._length>this._max&&u(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(a.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),a.prototype.forEach=function(e,t){t=t||this;for(var n=0,r=this._itemCount,i=this._mru-1;i>=0&&n<r;i--)if(this._lruList[i]){n++;var a=this._lruList[i];s(this,a)&&(l(this,a),this._allowStale||(a=void 0)),a&&e.call(t,a.value,a.key,this)}},a.prototype.keys=function(){for(var e=new Array(this._itemCount),t=0,n=this._mru-1;n>=0&&t<this._itemCount;n--)this._lruList[n]&&(e[t++]=this._lruList[n].key);return e},a.prototype.values=function(){for(var e=new Array(this._itemCount),t=0,n=this._mru-1;n>=0&&t<this._itemCount;n--)this._lruList[n]&&(e[t++]=this._lruList[n].value);return e},a.prototype.reset=function(){if(this._dispose&&this._cache)for(var e in this._cache)this._dispose(e,this._cache[e].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},a.prototype.dump=function(){for(var e=[],t=0,n=this._mru-1;n>=0&&t<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];s(this,r)||(++t,e.push({k:r.key,v:r.value,e:r.now+(r.maxAge||0)}))}return e},a.prototype.dumpLru=function(){return this._lruList},a.prototype.set=function(e,n,r){r=r||this._maxAge,i(e);var a=r?Date.now():0,o=this._lengthCalculator(n);if(t(this._cache,e))return o>this._max?(l(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=a,this._cache[e].maxAge=r,this._cache[e].value=n,this._length+=o-this._cache[e].length,this._cache[e].length=o,this.get(e),this._length>this._max&&u(this),!0);var s=new h(e,n,this._mru++,o,a,r);return s.length>this._max?(this._dispose&&this._dispose(e,n),!1):(this._length+=s.length,this._lruList[s.lu]=this._cache[e]=s,this._itemCount++,this._length>this._max&&u(this),!0)},a.prototype.has=function(e){return i(e),!!t(this._cache,e)&&!s(this,this._cache[e])},a.prototype.get=function(e){return i(e),o(this,e,!0)},a.prototype.peek=function(e){return i(e),o(this,e,!1)},a.prototype.pop=function(){var e=this._lruList[this._lru];return l(this,e),e||null},a.prototype.del=function(e){i(e),l(this,this._cache[e])},a.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n];i(r.k);var a=r.e||0;if(0===a)this.set(r.k,r.v);else{var o=a-t;o>0&&this.set(r.k,r.v,o)}}}}()},S4iY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fXoL"),i=n("ofXK");n("IIzr");var a=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c]]}),e}()},SE0f:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("gmIG"),i=n("Gl+1"),a=n("n9Od"),o={key:"type",base:r.a,typeMap:{algorithmic:i.a,multipart:a.a}};function s(e){return e&&e.type?"algorithmic"===e.type?i.a.fromJSON(e):"multipart"===e.type?a.a.fromJSON(e):null:null}},SFah:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("6S2I"),s=n("zqDF"),u=n("WbKI"),c=n("Gj5k"),l=n("r88o"),h=n("04ZG"),f=n("Cduq"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),d=n("ag7Y"),v=n("LE9a"),y=n("wdpY"),b=n("p6dn"),g=n("Eonp"),m=n("ack/"),w=n("n5EF"),O=n("GL98"),j=n("Z1nw"),_=n("PKzc"),x=n("0OnR"),k={base:null,key:"type",typeMap:{attachment:g.a,media:_.a,text:x.a,field:O.a}},S=n("Fjfq"),M=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).returnTopmostRaster=null,r.showNoDataRecords=null,r}return Zt(n,[{key:"clone",value:function(){return new r({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}}]),n}(d.a);Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],M.prototype,"returnTopmostRaster",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],M.prototype,"showNoDataRecords",void 0);var I,T=M=r=Object(i.a)([Object(h.a)("esri.popup.LayerOptions")],M),A=n("ouUy"),C=I=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).showRelatedRecords=null,r.orderByFields=null,r}return Zt(n,[{key:"clone",value:function(){return new I({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Object(a.a)(this.orderByFields):null})}}]),n}(d.a);Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],C.prototype,"showRelatedRecords",void 0),Object(i.a)([Object(u.b)({type:[A.a],json:{write:!0}})],C.prototype,"orderByFields",void 0);var E,P=C=I=Object(i.a)([Object(h.a)("esri.popup.RelatedRecordsInfo")],C),R=n("WYax"),D=n("d+vO"),L=n("zq8J"),N=v.a.ofType({key:"type",defaultKeyValue:"button",base:R.a,typeMap:{button:D.a,toggle:L.a}}),F={base:b.a,key:"type",typeMap:{media:_.a,custom:m.a,text:x.a,attachments:g.a,fields:O.a}},z="esri.PopupTemplate",V=o.a.getLogger(z),G=["attachments","fields","media","text"],U=E=function(e){Kt(o,e);var t,n,r,i=Xt(o);function o(){var e;return Wt(this,o),(e=i.apply(this,arguments)).actions=null,e.content="",e.expressionInfos=null,e.fieldInfos=null,e.layerOptions=null,e.lastEditInfoEnabled=!0,e.outFields=null,e.overwriteActions=!1,e.returnGeometry=!1,e.title="",e.relatedRecordsInfo=null,e}return Zt(o,[{key:"castContent",value:function(e){return Array.isArray(e)?e.map((function(e){return Object(s.k)(F,e)})):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||Object(p.o)(e)?e:(V.error("content error","unsupported content value",{value:e}),null)}},{key:"readContent",value:function(e,t){var n=t.popupElements;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}},{key:"writeContent",value:function(e,t,n,r){var i=this;"string"!=typeof e?Array.isArray(e)&&(t.popupElements=e.filter((function(e){return-1!==G.indexOf(e.type)})).map((function(e){return e&&e.toJSON(r)})),t.popupElements.forEach((function(e){"attachments"===e.type?i._writeAttachmentContent(t):"media"===e.type?i._writeMediaContent(e,t):"text"===e.type&&i._writeTextContent(e,t)}))):t.description=e}},{key:"writeFieldInfos",value:function(e,t,n,r){var i=this.content,a=Array.isArray(i)?i:null;if(e){var o=a?a.filter((function(e){return"fields"===e.type})):[],s=o.length&&o.every((function(e){var t;return null==(t=e.fieldInfos)?void 0:t.length}));t.fieldInfos=e.filter(Boolean).map((function(e){var t=e.toJSON(r);return s&&(t.visible=!1),t}))}if(a){var u,c=Vt(a);try{for(c.s();!(u=c.n()).done;){var l=u.value;"fields"===l.type&&this._writeFieldsContent(l,t)}}catch(h){c.e(h)}finally{c.f()}}}},{key:"writeLayerOptions",value:function(e,t,n,r){t[n]=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON(r)}},{key:"writeTitle",value:function(e,t){t.title=e||""}},{key:"clone",value:function(){var e=this.actions,t=e?Object(a.a)(e.toArray()):[];return new E({actions:t,content:Array.isArray(this.content)?Object(a.a)(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?Object(a.a)(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?Object(a.a)(this.fieldInfos):null,layerOptions:this.layerOptions?Object(a.a)(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?Object(a.a)(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?Object(a.a)(this.relatedRecordsInfo):null})}},{key:"collectRequiredFields",value:(r=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._collectExpressionInfoFields(t,n,this.expressionInfos);case 2:Object(y.e)(t,n,[].concat(Bt(this.outFields||[]),Bt(this._getActionsFields(this.actions)),Bt(this._getTitleFields(this.title)),Bt(this._getContentFields(this.content))));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getRequiredFields",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set,e.next=3,this.collectRequiredFields(n,t);case 3:return e.abrupt("return",Bt(n).sort());case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_writeFieldsContent",value:function(e,t){if(Array.isArray(e.fieldInfos)&&e.fieldInfos.length){var n=Object(a.a)(e.fieldInfos);Array.isArray(t.fieldInfos)?n.forEach((function(e){var n=t.fieldInfos.find((function(t){return t.fieldName.toLowerCase()===e.fieldName.toLowerCase()}));n?n.visible=!0:t.fieldInfos.push(e)})):t.fieldInfos=n}}},{key:"_writeAttachmentContent",value:function(e){e.showAttachments||(e.showAttachments=!0)}},{key:"_writeTextContent",value:function(e,t){!t.description&&e.text&&(t.description=e.text)}},{key:"_writeMediaContent",value:function(e,t){if(Array.isArray(e.mediaInfos)&&e.mediaInfos.length){var n=Object(a.a)(e.mediaInfos);t.mediaInfos=Array.isArray(t.mediaInfos)?[].concat(Bt(t.mediaInfos),Bt(n)):n}}},{key:"_readPopupInfoElements",value:function(e){var t=e.description,n=e.mediaInfos,r=e.popupElements,i={description:!1,mediaInfos:!1};return r.map((function(e){return"media"===e.type?(e.mediaInfos||!n||i.mediaInfos||(e.mediaInfos=n,i.mediaInfos=!0),_.a.fromJSON(e)):"text"===e.type?(e.text||!t||i.description||(e.text=t,i.description=!0),x.a.fromJSON(e)):"attachments"===e.type?g.a.fromJSON(e):"fields"===e.type?O.a.fromJSON(e):void 0})).filter(Boolean)}},{key:"_readPopupInfo",value:function(e){var t=e.description,n=e.mediaInfos,r=e.showAttachments,i=[];return i.push(t?new x.a({text:t}):new O.a),Array.isArray(n)&&n.length&&i.push(_.a.fromJSON({mediaInfos:n})),r&&i.push(g.a.fromJSON({displayType:"list"})),i.length?i:t}},{key:"_getContentElementFields",value:function(e){var t=this;return e&&"attachments"!==e.type?"custom"===e.type?e.outFields||[]:"fields"===e.type?this._getFieldInfoFields(e.fieldInfos||this.fieldInfos):"media"===e.type?(e.mediaInfos||[]).reduce((function(e,n){return[].concat(Bt(e),Bt(t._getMediaInfoFields(n)))}),[]):"text"===e.type?this._extractFieldNames(e.text):void 0:[]}},{key:"_getMediaInfoFields",value:function(e){var t=e.caption,n=e.title,r=e.value||{},i=r.fields,a=void 0===i?[]:i,o=r.normalizeField,s=r.tooltipField,u=r.sourceURL,c=r.linkURL,l=[].concat(Bt(this._extractFieldNames(n)),Bt(this._extractFieldNames(t)),Bt(this._extractFieldNames(u)),Bt(this._extractFieldNames(c)),Bt(a));return o&&l.push(o),s&&l.push(s),l}},{key:"_getContentFields",value:function(e){var t=this;return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce((function(e,n){return[].concat(Bt(e),Bt(t._getContentElementFields(n)))}),[]):[]}},{key:"_collectExpressionInfoFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=4;break}return e.next=4,Promise.all(r.map((function(e){return Object(y.a)(t,n,e.expression)})));case 4:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_getFieldInfoFields",value:function(e){return e?e.filter((function(e){return void 0===e.visible||!!e.visible})).map((function(e){return e.fieldName})).filter((function(e){return-1===e.indexOf("relationships/")&&-1===e.indexOf("expression/")})):[]}},{key:"_getActionsFields",value:function(e){var t=this;return e?e.toArray().reduce((function(e,n){return[].concat(Bt(e),Bt(t._getActionFields(n)))}),[]):[]}},{key:"_getActionFields",value:function(e){var t=e.className,n=e.title,r=e.type,i="button"===r||"toggle"===r?e.image:"";return[].concat(Bt(this._extractFieldNames(n)),Bt(this._extractFieldNames(t)),Bt(this._extractFieldNames(i)))}},{key:"_getTitleFields",value:function(e){return"string"==typeof e?this._extractFieldNames(e):[]}},{key:"_extractFieldNames",value:function(e){if(!e||"string"!=typeof e)return[];var t=e.match(/{[^}]*}/g);if(!t)return[];var n=/\{(\w+):.+\}/,r=t.filter((function(e){return!(0===e.indexOf("{relationships/")||0===e.indexOf("{expression/"))})).map((function(e){return e.replace(n,"{$1}")}));return r?r.map((function(e){return e.slice(1,-1)})):[]}}]),o}(d.a);Object(i.a)([Object(u.b)({type:N})],U.prototype,"actions",void 0),Object(i.a)([Object(u.b)()],U.prototype,"content",void 0),Object(i.a)([Object(c.a)("content")],U.prototype,"castContent",null),Object(i.a)([Object(l.a)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],U.prototype,"readContent",null),Object(i.a)([Object(f.a)("content",{popupElements:{type:v.a.ofType(k)},showAttachments:{type:Boolean},mediaInfos:{type:v.a.ofType(j.a)},description:{type:String}})],U.prototype,"writeContent",null),Object(i.a)([Object(u.b)({type:[S.a],json:{write:!0}})],U.prototype,"expressionInfos",void 0),Object(i.a)([Object(u.b)({type:[w.a]})],U.prototype,"fieldInfos",void 0),Object(i.a)([Object(f.a)("fieldInfos")],U.prototype,"writeFieldInfos",null),Object(i.a)([Object(u.b)({type:T})],U.prototype,"layerOptions",void 0),Object(i.a)([Object(f.a)("layerOptions")],U.prototype,"writeLayerOptions",null),Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],U.prototype,"lastEditInfoEnabled",void 0),Object(i.a)([Object(u.b)()],U.prototype,"outFields",void 0),Object(i.a)([Object(u.b)()],U.prototype,"overwriteActions",void 0),Object(i.a)([Object(u.b)()],U.prototype,"returnGeometry",void 0),Object(i.a)([Object(u.b)({json:{type:String}})],U.prototype,"title",void 0),Object(i.a)([Object(f.a)("title")],U.prototype,"writeTitle",null),Object(i.a)([Object(u.b)({type:P,json:{write:!0}})],U.prototype,"relatedRecordsInfo",void 0),U=E=Object(i.a)([Object(h.a)(z)],U),t.a=U},SFo0:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).x=0,e.y=0,e}return Zt(n,[{key:"clone",value:function(){return new r({x:this.x,y:this.y})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:Number})],u.prototype,"x",void 0),Object(i.a)([Object(a.b)({type:Number})],u.prototype,"y",void 0),u=r=Object(i.a)([Object(o.a)("esri.symbols.support.Symbol3DAnchorPosition2D")],u),t.b=u},SZUe:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("Gxlu")),u=n("sI4m"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="line-chart",r}return Zt(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:u.a.write}})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(o.a)("esri.popup.content.LineChartMediaInfo")],c),t.a=c},SaAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("gEht");function i(e,t){var n=t||e.extent,i=e.width,a=Object(r.f)(n&&n.spatialReference);return n&&i?n.width/i*a*r.j*96:0}function a(e,t){var n=e.extent,i=e.width,a=function(e,t){return e/(Object(r.f)(t)*r.j*96)}(t,n.spatialReference);return n.clone().expand(a*i/n.width)}},SbiP:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("3r0u");function i(e){return e=e||r.a.location.hostname,l.some((function(t){var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function a(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(o)||null!=t.match(u)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(s)||null!=t.match(c)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}var o=/^devext.arcgis.com$/,s=/^qaext.arcgis.com$/,u=/^[\w-]*\.mapsdevext.arcgis.com$/,c=/^[\w-]*\.mapsqa.arcgis.com$/,l=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,o,s,/^jsapps.esri.com$/,u,c]},Sfqt:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="20210423",i="33983ad14c009689ffdf09d4145a0b9e63420892"},Snp0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){Wt(this,e),this._names=new Map}return Zt(e,[{key:"begin",value:function(e){this._names.has(e)||(this._names.set(e,!1),-1!==e.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri.".concat(e,".Start")))}},{key:"end",value:function(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark("Esri.".concat(e,".End")))}},{key:"record",value:function(e){this._names.has(e)||(this._names.set(e,!0),performance.mark("Esri."+e))}}]),e}()},Stxv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("WbKI");function i(e,t){var n=t?Nt(Nt({},t),{},{source:e}):e;return Object(r.b)({aliasOf:n})}},SuVq:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I")),o=n("zqDF"),s=n("WbKI"),u=n("Gj5k"),c=n("r88o"),l=n("04ZG"),h=n("Cduq"),f=(n("4EHJ"),n("ju1D"),n("9AIY"),n("f4Nx")),p=n("WZb1"),d=n("N2DF"),v=n("l4ZG"),y=[0,0];function b(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}var g=a.a.getLogger("esri.geometry.Point"),m=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).x=0,e.y=0,e.z=void 0,e.m=void 0,e.type="point",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r,i){var a;if(Array.isArray(e))i=t,e=(a=e)[0],t=a[1],n=a[2],r=a[3];else if(e&&"object"==typeof e){if(e=null!=(a=e).x?a.x:a.longitude,t=null!=a.y?a.y:a.latitude,n=a.z,r=a.m,(i=a.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new p.a(i)),null!=a.longitude||null!=a.latitude)if(null==a.longitude)g.warn(".longitude=","Latitude was defined without longitude");else if(null==a.latitude)g.warn(".latitude=","Longitude was defined without latitude");else if(!a.declaredClass&&i&&i.isWebMercator){var o=Object(v.c)(a.longitude,a.latitude,y);e=o[0],t=o[1]}}else b(n)?(i=n,n=null):b(r)&&(i=r,r=null);var s={x:e,y:t};return null==s.x&&null!=s.y?g.warn(".y=","Y coordinate was defined without an X coordinate"):null==s.y&&null!=s.x&&g.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(s.spatialReference=i),null!=n&&(s.z=n),null!=r&&(s.m=r),s}},{key:"cache",get:function(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}},{key:"hasM",get:function(){return void 0!==this.m},set:function(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}},{key:"hasZ",get:function(){return void 0!==this.z},set:function(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}},{key:"latitude",get:function(){var e=this.spatialReference,t=this.x,n=this.y;if(e){if(e.isWebMercator)return Object(v.f)(t,n,y)[1];if(e.isGeographic)return n}return null},set:function(e){var t=this.spatialReference,n=this.x;t&&(t.isWebMercator?this._set("y",Object(v.c)(n,e,y)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}},{key:"longitude",get:function(){var e=this.x,t=this.y,n=this.spatialReference;if(n){if(n.isWebMercator)return Object(v.f)(e,t,y)[0];if(n.isGeographic)return e}return NaN},set:function(e){var t=this.y,n=this.spatialReference;n&&(n.isWebMercator?this._set("x",Object(v.c)(e,t,y)[0]):n.isGeographic&&this._set("x",e),this._set("longitude",e))}},{key:"writeX",value:function(e,t,n){t[n]=isNaN(e)?"NaN":e}},{key:"readX",value:function(e){return"string"==typeof e?NaN:e}},{key:"clone",value:function(){var e=new r;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}},{key:"copy",value:function(e){return r.copy(e,this),this}},{key:"equals",value:function(e){var t;if(!e)return!1;var n=this.x,r=this.y,i=this.z,a=this.m,o=this.spatialReference,s=e.z,u=e.m,c=e.x,l=e.y,h=e.spatialReference;if(!o.equals(h))if(o.isWebMercator&&h.isWGS84)c=(t=zt(Object(v.c)(c,l),2))[0],l=t[1],h=o;else{var f;if(!o.isWGS84||!h.isWebMercator)return!1;c=(f=zt(Object(v.f)(c,l),2))[0],l=f[1],h=o}return n===c&&r===l&&i===s&&a===u&&o.wkid===h.wkid}},{key:"offset",value:function(e,t,n){return function(e,t,n,r){return e.x=e.x+t,e.y=e.y+n,null!=r&&null!=e.z&&(e.z=e.z+r),e}(this,e,t,n)}},{key:"normalize",value:function(){if(!this.spatialReference)return this;var e=Object(f.d)(this.spatialReference);if(!e)return this;var t=this.x,n=zt(e.valid,2),r=n[0],i=n[1],a=2*i;return t>i?t-=Math.ceil(Math.abs(t-i)/a)*a:t<r&&(t+=Math.ceil(Math.abs(t-r)/a)*a),this._set("x",t),this}},{key:"distance",value:function(e){return n=e,r=(t=this).x-n.x,i=t.y-n.y,a=t.hasZ&&n.hasZ?t.z-n.z:0,Math.sqrt(r*r+i*i+a*a);var t,n,r,i,a}},{key:"toArray",value:function(){var e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}},{key:"toJSON",value:function(e){return this.write(null,e)}}],[{key:"copy",value:function(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));var n=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(n)?n:n.clone())}}]),n}(d.a);Object(i.a)([Object(s.b)({readOnly:!0})],m.prototype,"cache",null),Object(i.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],m.prototype,"hasM",null),Object(i.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],m.prototype,"hasZ",null),Object(i.a)([Object(s.b)({type:Number})],m.prototype,"latitude",null),Object(i.a)([Object(s.b)({type:Number})],m.prototype,"longitude",null),Object(i.a)([Object(s.b)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Object(u.a)((function(e){return isNaN(e)?e:Object(o.i)(e)}))],m.prototype,"x",void 0),Object(i.a)([Object(h.a)("x")],m.prototype,"writeX",null),Object(i.a)([Object(c.a)("x")],m.prototype,"readX",null),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],m.prototype,"y",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],m.prototype,"z",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],m.prototype,"m",void 0),(m=r=Object(i.a)([Object(l.a)("esri.geometry.Point")],m)).prototype.toJSON.isDefaultToJSON=!0,t.a=m},SuoU:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r=["freehand","hybrid","click"],i="click"},T6IO:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var r=n("mQzU"),i=n("fXoL"),a=n("IzEk"),o=n("VcUc"),s=n("lNcg"),u=n("KUQ1"),c=function(e,t){var n=0,r=0,i=0,a=0,o=document.getElementById(e+"_container"),s=function(){document.onmouseup=null,document.onmousemove=null},u=function(e){(e=e||window.event).preventDefault(),n=i-e.clientX,r=a-e.clientY,i=e.clientX,a=e.clientY;var s=o.offsetLeft-n,u=o.offsetTop-r,c=document.getElementById(t);s>0&&s<c.offsetWidth-o.offsetWidth&&u>0&&u<c.offsetHeight-o.offsetHeight&&(o.style.top=u+"px",o.style.left=s+"px")};document.getElementById(e+"_header")&&(document.getElementById(e+"_header").onmousedown=function(e){(e=e||window.event).preventDefault(),i=e.clientX,a=e.clientY,document.onmouseup=s,document.onmousemove=u})},l=n("8Vgs"),h=n("jWBI"),f=n("SuVq"),p=n("QLbw"),d=n("4GrV"),v=n("l4ZG"),y=n("krU8"),b=n("l7P3"),g=n("2Vo4"),m=n("6lH3");function w(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var O,j,_=function(e,t,n,r){var i=t.color;return e.classList.add("mapTextInput"),e.style.fontWeight=t.font.weight,e.style.fontStyle=t.font.style,e.style.textDecoration=t.font.decoration,e.style.fontFamily=t.font.family,e.style.color="rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(i.a,")"),e.style.fontSize=t.font.size,e.style.lineHeight=t.font.size,e.setAttribute("id",r),e.setAttribute("mapX",n.x),e.setAttribute("mapY",n.y),e},x=function(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstElementChild},k=function(e,t){return{mapX:e.getAttribute("mapX"),mapY:e.getAttribute("mapY"),textSymbol:function(e,t){if(null!==e.getAttribute("fontSize")&&(t.font.size=e.getAttribute("fontSize")),null!==e.getAttribute("fontWeight")&&(t.font.weight=e.getAttribute("fontWeight")),null!==e.getAttribute("textDecoration")&&(t.font.decoration=e.getAttribute("textDecoration")),null!==e.getAttribute("textStyle")){var n=e.getAttribute("textStyle");t.font.style="none"===n?"normal":n}null!==e.getAttribute("fontFamily")&&(t.font.family=e.getAttribute("fontFamily")),null!==e.getAttribute("fontColor")&&(t.color=JSON.parse(e.getAttribute("fontColor")));var r=parseInt(t.font.size.split("px")[0]);return{type:"text",color:t.color,text:e.value,yoffset:-r/3,font:t.font,lineWidth:"500px"}}(e,t)}},S=((O=function(){function e(){Wt(this,e),this.WIDTH=200,this.PADDING=10,this._textGraphicState=new g.a(!1),this.textGraphicState$=this._textGraphicState.asObservable(),this.creatGeomLabelGraphic=function(e,t,n){var r,i,a=JSON.parse(JSON.stringify(t));return a.color.a=1,"polygon"===n.geometry.type?a.text=(r=n,(i=Object(m.geodesicArea)(r.geometry,"acres"))<.1?w(Math.round(100*i)/100)+" acres":i>1e3?w(Math.round(i))+" acres":w(Math.round(10*i)/10)+" acres"):"polyline"===n.geometry.type&&(a.text=function(e){var t="miles",n=Object(m.geodesicLength)(e.geometry,t);return n<3?(t="feet",n=Object(m.geodesicLength)(e.geometry,t),w(Math.round(10*n)/10)+" "+t):w(Math.round(100*n)/100)+" "+t}(n)),new h.a({geometry:e,symbol:a,attributes:{id:Object(u.a)(),symbol:a,parentId:n.attributes.id,readonly:!0,geometryType:"text"}})}}return Zt(e,[{key:"HideOnlyTextGraphics",value:function(e,t,n,i){"userTextGraphicsLayer"===t.id&&n.dispatch(Object(r.c)({ids:[e.attributes.id]})),e.geometry=void 0,t.add(e),i()}},{key:"AddTextToMap",value:function(e,t,n,i,a,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8?arguments[8]:void 0,l=new h.a({geometry:{type:"point",x:n,y:i,spatialReference:{wkid:102100}},symbol:a,attributes:{id:t,symbol:a,parentId:e?e.attributes.parentId:0,readonly:u,geometryType:"text"}}),f=l.toJSON();if(c&&"userTextGraphicsLayer"!==c.id)return c.graphics.add(l),void this._textGraphicState.next(null);f.symbol=a,f.geometry.type="point",o.dispatch(s?Object(r.d)({graphics:JSON.stringify([f])}):Object(r.a)({graphics:[JSON.stringify(f)]})),this._textGraphicState.next(null)}},{key:"createInput",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=parseInt(i.font.size.split("px")[0])+2*this.PADDING,o=document.createElement("input");(o=_(o,i,e.mapPoint,n)).style.width="auto",o.style.height=a+"px";var s=document.getElementById("parent").clientWidth,u=document.getElementById("parent").clientHeight,c=e.x,l=e.y;this.WIDTH/2<c&&c<s-this.WIDTH/2?o.style.left=c-this.WIDTH/2+"px":(c<this.WIDTH/2&&(o.style.left="0px"),s<c+this.WIDTH/2&&(o.style.right="0px")),a/2<l&&l<u-a/2?o.style.top=l-a/2+"px":(l<a/2&&(o.style.top="0px"),u<l+a/2&&(o.style.bottom="0px"));var h=function(e){13===e.keyCode&&p(e.target)};this.windowListener=function(e){if("object"==typeof e&&0===e.button){var t=document.getElementById(n);e.target!==t&&t&&p(t)}};var f=function(e){e.remove(),window.removeEventListener("click",t.windowListener),o.removeEventListener("keyup",h)},p=function(e){if(""!==e.value){var n=k(e,i);t.AddTextToMap(null,e.id,n.mapX,n.mapY,n.textSymbol,r,!1,!1,null)}f(e)};return o.addEventListener("keyup",h),window.addEventListener("click",this.windowListener,{once:!0}),o}}]),e}()).\u0275fac=function(e){return new(e||O)},O.\u0275prov=i.bc({token:O,factory:O.\u0275fac,providedIn:"root"}),O),M=n("2uI/"),I=((j=function(){function e(t){Wt(this,e),this.TextService=t,this.WIDTH=200,this.PADDING=10}return Zt(e,[{key:"createInputWithFrame",value:function(e,t,n,r,i,a,o){var s=this,u=t.attributes.id;this.frame=x('<div id="'.concat(u,'_container" class="mapTextInputContainer">\n\n    </div>'));var c=x("<div><div class='textBoxHeaderDrag' id=\"".concat(u,"_header\"><span class='sep'>|</span><span>..<br></span><span>..<br></span><span>..<br></span></div>\n        </div>\n        "));this.deleteBtn=x('<div class="deleteBTN" id="'.concat(u,'_delete" style="position: absolute; top: 0px; right: -43px; line-height: 38px; background: #ffffff8a; border-radius: 5px; padding: 0 10px;">\n    <svg aria-hidden="true" focusable="false" style="height:38px; width: 20px" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></svg>\n    </div>'));var l=parseInt(n.font.size.split("px")[0])+2*this.PADDING;this._input=document.createElement("input"),t.attributes.readonly&&this._input.setAttribute("readonly",!0),this._input.style.height=l+"px",this._input=_(this._input,n,t.geometry,u),this._input.value=n.text,this._input.style.lineHeight=n.font.size;var h=function(e){var o=document.getElementById(u+"_container"),c=i.toMap({x:o.offsetLeft+e.clientWidth/2,y:o.offsetTop+e.clientHeight/2});e.setAttribute("mapX",c.x),e.setAttribute("mapY",c.y);var l=k(e,n);s.TextService.AddTextToMap(t,e.id,l.mapX,l.mapY,l.textSymbol,r,!0,!1,a),s.inputBox=e,s.CleanupListenerForInputFrame(e)};return this.enterKeylistener=function(e){13===e.keyCode&&h(e.target)},this.windowListener=function(e){if("object"==typeof e&&0===e.button){var t=document.getElementById(u);e.target!==t&&e.target.classList.contains("esri-view-surface")&&t&&h(t)}},this.deleteListener=function(){var e=document.getElementById(u);s.TextService.HideOnlyTextGraphics(t,a,r,o),s.CleanupListenerForInputFrame(e)},this.deleteBtn.addEventListener("click",this.deleteListener),this._input.addEventListener("keyup",this.enterKeylistener),window.addEventListener("click",this.windowListener),this.frame.appendChild(this._input),this.frame.appendChild(c),this.frame.appendChild(this.deleteBtn),this.frame.style.left=e.x-this.WIDTH/2+this.PADDING+"px",this.frame.style.width=this.WIDTH+"px",this.frame.style.top=e.y-l/2+"px",this}},{key:"CleanupListenerForInputFrame",value:function(e){var t=this;setTimeout((function(){var n=document.getElementById(e.id+"_container");n&&n.remove(),e.remove(),window.removeEventListener("click",t.windowListener),t._input.removeEventListener("keyup",t.enterKeylistener)}),10)}}]),e}()).\u0275fac=function(e){return new(e||j)(i.oc(S))},j.\u0275prov=i.bc({token:j,factory:j.\u0275fac,providedIn:"root"}),j),T=n("NoDi"),A=n("8WOb"),C=n("ofXK"),E=n("0DCJ"),P=n("3Pt+"),R=n("Tc+0"),D=n("YbY9"),L=n("JiAY"),N=n("OFbc"),F=n("zVIQ"),z=["radiusInput"],V=["textcontrols"],G=["pointcontrol"],U=["fillstyle"],B=["linestyle"],q=function(){return{"width.px":25,fill:"black"}};function H(e,t){if(1&e){var n=i.lc();i.kc(0,"label"),i.kc(1,"input",20),i.rc("ngModelChange",(function(e){return i.Lc(n),i.vc().drawingTool=e}))("ngModelChange",(function(e){return i.Lc(n),i.vc().startDrawingGraphics(e,!0)})),i.jc(),i.kc(2,"span"),i.gc(3,"svg-icon",21),i.jc(),i.jc()}if(2&e){var r=t.$implicit,a=i.vc();i.Tb(1),i.Bc("value",r)("ngModel",a.drawingTool),i.Tb(2),i.Bc("src","assets/icons/"+r+".svg")("svgStyle",i.Dc(4,q))}}function W(e,t){if(1&e){var n=i.lc();i.kc(0,"button",22),i.rc("click",(function(){return i.Lc(n),i.vc().clearDrawTools()})),i.Tc(1,"Cancel Drawing"),i.jc()}}function J(e,t){if(1&e){var n=i.lc();i.kc(0,"div",0),i.kc(1,"input",23),i.rc("change",(function(){return i.Lc(n),i.vc().toggleLabels()})),i.jc(),i.kc(2,"label",24),i.Tc(3,"\xa0\xa0 Area/Distance labels"),i.jc(),i.gc(4,"br"),i.jc()}}function Z(e,t){if(1&e){var n=i.lc();i.kc(0,"div"),i.gc(1,"br"),i.Tc(2," Color of the selected label: "),i.kc(3,"app-color-picker",25),i.rc("colorSelected",(function(e){return i.Lc(n),i.vc().changeLabelsColor(e)})),i.jc(),i.jc()}if(2&e){var r=i.vc();i.Tb(3),i.Bc("color",r.selectedLabelsGraphics[0].graphic.attributes.symbol.color)("opacity",100*r.selectedLabelsGraphics[0].graphic.symbol.color.a)("autoClose",!0)}}function K(e,t){1&e&&(i.kc(0,"span"),i.Tc(1,"Radius"),i.jc())}function Y(e,t){if(1&e&&(i.kc(0,"span"),i.Tc(1),i.wc(2,"titlecase"),i.jc()),2&e){var n=i.vc().$implicit;i.Tb(1),i.Uc(i.xc(2,1,n))}}var X=function(e,t){return{drLabelSelected:e,drHidden:t}};function Q(e,t){if(1&e){var n=i.lc();i.kc(0,"label",26),i.kc(1,"input",27),i.rc("ngModelChange",(function(e){return i.Lc(n),i.vc().drawingMode=e}))("ngModelChange",(function(e){return i.Lc(n),i.vc().changeDrawingMode(e)})),i.jc(),i.Sc(2,K,2,0,"span",6),i.Sc(3,Y,3,3,"span",6),i.jc()}if(2&e){var r=t.$implicit,a=i.vc();i.Bc("ngClass",i.Fc(5,X,r===a.drawingMode,"hybrid"===r&&"circle"===a.drawingTool)),i.Tb(1),i.Bc("value",r)("ngModel",a.drawingMode),i.Tb(1),i.Bc("ngIf","circle"===a.drawingTool&&"click"===r),i.Tb(1),i.Bc("ngIf",!("circle"===a.drawingTool&&"click"===r))}}var $,ee=function(){return["polygon","circle","polyline"]},te=(($=function(){function e(t,n,i,b,g){var m=this;Wt(this,e),this.store=t,this.textService=n,this.esriMapService=i,this.TextSelectionService=b,this.sketchSelectionService=g,this.selectedGraphics=[],this.selectedTextGraphics=[],this.selectedLabelsGraphics=[],this.drawToolOptions=["polygon","circle","polyline","point","text"],this.drawingMode="click",this.drawModes=["click","freehand","hybrid"],this.drawingTool="",this.selectedGraphicsGeometry=this.selectedGraphics.length>0?this.selectedGraphics[0].attributes.geometryType:"",this.graphics$=this.store.select((function(e){return e.app.graphics})),this.selectionState=!0,this.id=function(){return Math.random().toString(36).substr(2,9)},this.changeLabelsColor=function(e){var t=m.selectedLabelsGraphics[0].graphic.toJSON(),n=JSON.parse(JSON.stringify(e));t.symbol.color=n,t.attributes.symbol.color=n;var r=h.a.fromJSON(t);m.geomLabelsGraphicsLayer.add(r);var i=document.getElementById(t.attributes.id);m.selectedInputBox.CleanupListenerForInputFrame(i),m.selectedLabelsGraphics=[]},this.cleanupSelection=function(){m.selectedLabelsGraphics=[],m.selectedTextGraphics=[]},this.changeGraphicsStyle=function(){if(m.selectedGraphics&&m.selectedGraphics.length>0){var e=m.selectedGraphics[0].attributes.geometryType;["polygon","circle","polyline"].includes(e)&&(m.sketchVM.updateGraphics.getItemAt(0).symbol=m.getUpdatedGraphicsStyle(e),m.selectedGraphics[0].attributes.symbol=m.getUpdatedGraphicsStyle(e))}},this.getUpdatedGraphicsStyle=function(e){return["polygon","circle"].includes(e)?Object(s.a)(m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps):"polyline"===e?Object(s.b)(m.lineStyleElmRef.lineProps):null},this.initSketchVMCreate=function(){m.sketchVM.on(["create"],(function(e){var t;["polyline","circle","polygon"].includes(e.tool)&&m.sketchVM.createGraphic&&(m.sketchVM.createGraphic.symbol=m.getUpdatedGraphicsStyle(e.tool)),"complete"===e.state&&("circle"===e.tool&&(t=Object(o.b)(e,m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps)),["polygon","polyline"].indexOf(e.tool)>-1&&((t=e.graphic).attributes={id:m.id(),symbol:t.symbol,geometryType:e.tool,radius:0},t="polygon"===e.tool?Object(o.d)(t,m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps):Object(o.f)(t,m.lineStyleElmRef.lineProps)),"point"===e.tool&&(t=Object(o.c)(e.graphic,m.pointControlElmRef.markerProps)),m.sketchVM.createCircleFromPoint&&(t=Object(o.g)(e,m.radius,m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps)),m.store.dispatch(Object(r.a)({graphics:[JSON.stringify(t)]})),m.drawingTool="")}))},this.initSketchVMUpdate=function(){m.sketchVM.on("update",(function(e){if("cancel"===e.state||e.aborted)m.selectedGraphics=[];else{if("text"===e.graphics[0].attributes.geometryType)return m.sketchVM.cancel(),void m.sketchVM.complete();if("start"===e.state||"active"===e.state)m.selectedGraphics=e.graphics,c("mydiv","parent"),m.selectedGraphicsChanged(),["polyline","circle","polygon"].includes(e.tool)&&(m.sketchVM.updateGraphics.getItemAt(0).symbol=m.getUpdatedGraphicsStyle(e.tool),m.selectedGraphics[0].attributes.symbol=m.getUpdatedGraphicsStyle(e.tool));else if("complete"===e.state){m.mapView.graphics.removeAll();var t=e.graphics;"circle"===t[0].attributes.geometryType&&(t=[Object(o.a)(e.graphics[0],m.radius,m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps)]),"polygon"===t[0].attributes.geometryType&&(t=[Object(o.d)(e.graphics[0],m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps)]),"polyline"===t[0].attributes.geometryType&&(t=[Object(o.f)(e.graphics[0],m.lineStyleElmRef.lineProps)]),"point"===t[0].attributes.geometryType&&(t=[Object(o.c)(e.graphics[0],m.pointControlElmRef.markerProps)]),m.store.select((function(e){return e.app.graphics})).pipe(Object(a.a)(1)).subscribe((function(e){if(!(e.length<1)){for(var n=!1,i=0;i<e.length;i++){var a=JSON.parse(e[i]);if(t[0].attributes.id===a.attributes.id){n=Object(l.a)(a,t[0]);break}}n||m.store.dispatch(Object(r.d)({graphics:JSON.stringify(t)})),m.selectedGraphics=[]}}))}}}))},this.updateCircleRadius=function(){if(m.selectedGraphics.length>0){var e=m.selectedGraphics[0].toJSON();(e=Object(o.e)(e,m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps)).toJSON=void 0,e.geometry=Object(y.c)(m.selectedGraphics[0].geometry.centroid,m.radius).asJSON(),e.attributes.radius=e.geometry.radius,m.store.dispatch(Object(r.d)({graphics:JSON.stringify([e])})),m.sketchVM.cancel(),m.radiusElmRef.nativeElement.blur(),m.selectedGraphicsGeometry="",m.selectedGraphics=[]}},this.radiusChangedEnter=function(){m.updateCircleRadius()},this.openDrawPanel=function(){m.esriMapService.closeAllPanelsExcept.emit("Draw")},this.selectedGraphicsChanged=function(){if(1===m.selectedGraphics.length){m.openDrawPanel();var e=m.selectedGraphics[0];if(m.selectedGraphicsGeometry=m.selectedGraphics.length>0?m.selectedGraphics[0].attributes.geometryType:"","circle"===m.selectedGraphicsGeometry){m.radius=e.attributes.radius,m.lineStyleElmRef.lineProps.style=e.attributes.symbol.outline.style;var t=m.selectedGraphics[0].attributes.symbol.outline.color;m.lineStyleElmRef.lineProps.color=t,m.lineStyleElmRef.lineProps.width=e.attributes.symbol.outline.width,m.lineStyleElmRef.lineProps.opacity=100*t.a}}},this.ResetDrawControls=function(){m.drawingTool="",m.drawingMode=""},this.clearDrawTools=function(){m.sketchVM.cancel(),m.clickToAddTextboxHandler&&(m.clickToAddTextboxHandler.remove(),m.clickToAddTextboxHandler=void 0),m.ResetDrawControls()},this.startDrawingGraphics=function(e,t){if("active"===m.sketchVM.state&&(m.sketchVM.cancel(),m.drawingTool=e),m.clickToAddTextboxHandler&&(m.clickToAddTextboxHandler.remove(),m.clickToAddTextboxHandler=void 0),m.sketchVM.createCircleFromPoint=!1,m.sketchVM.pointSymbol=m.pointControlElmRef.markerProps,"circle"===e&&t&&(m.drawingMode="freehand"),["circle","polygon","polyline"].indexOf(e)>-1&&(m.sketchVM.polylineSymbol=Object(s.b)(m.lineStyleElmRef.lineProps),m.drawingMode||(m.drawingMode="click")),["circle","polygon"].indexOf(e)>-1){var n=Object(s.a)(m.lineStyleElmRef.lineProps,m.fillStyleElmRef.fillProps);if(m.sketchVM.polygonSymbol=n,"circle"===e&&"click"===m.drawingMode&&m.radius&&m.radius>0)return m.sketchVM.createCircleFromPoint=!0,void m.sketchVM.create("point")}"text"===e?m.ClickToAddTextbox():m.sketchVM.create(e,"circle"===e&&"freehand"===m.drawingMode?{mode:"click",type:e}:{mode:m.drawingMode,type:e})},this.radiusBlurred=function(){m.selectedGraphics&&m.updateCircleRadius(),m.radius>0&&"circle"===m.drawingTool&&m.startDrawingGraphics("circle",!1)},this.changeDrawingMode=function(e){m.drawingMode=e,""!==m.drawingTool&&m.startDrawingGraphics(m.drawingTool,!1)},this.listenToGraphicsStore=function(){return m.graphics$.subscribe((function(e){if(e.length>0){var t=e.map((function(e){var t=JSON.parse(e);return new h.a(t)})),n=t.filter((function(e){return"text"!==e.attributes.geometryType})),r=t.filter((function(e){return"text"===e.attributes.geometryType}));m.polygonGraphicsLayer.graphics=n,m.textGraphicsLayer.graphics=r}else m.polygonGraphicsLayer.removeAll(),m.textGraphicsLayer.removeAll();!function(e,t,n,r){var i=[];e.graphics.length<1?t.removeAll():(e.graphics.forEach((function(e){var n;if(["polygon","polyline"].includes(e.geometry.type)){if("polygon"===e.geometry.type)n=e.geometry.centroid;else{var a=e.geometry.paths[0][0];n=new f.a({x:a[0],y:a[1],spatialReference:e.geometry.spatialReference})}var o=t.graphics.filter((function(t){return t.attributes.parentId===e.attributes.id}));if(o.length<1){var s=function(e){var t=0,n=0;if("polyline"===e.geometry.type){var r=e.geometry.paths[0],i=v.f(r[0][0],r[0][1]),a=v.f(r[1][0],r[1][1]),o=p.d(new d.a({x:i[0],y:i[1]}),new d.a({x:a[0],y:a[1]}));o.azimuth<0?Math.abs(o.azimuth)<90?(t=5,n=-20):(t=5,n=10):o.azimuth<=90?(t=-5,n=-10):o.azimuth<=180&&(t=-5,n=10)}return{type:"text",color:"polyline"===e.geometry.type?e.attributes.symbol.color:e.attributes.symbol.outline.color,text:"0",xoffset:t,yoffset:n,font:{decoration:"none",family:"Arial",size:"18px",style:"normal",weight:"normal"}}}(e),u=r.creatGeomLabelGraphic(n,s,e);i.push(u)}else{var c=o.getItemAt(0);if(void 0===c.geometry)i.push(c);else{var l=r.creatGeomLabelGraphic(n,c.attributes.symbol,e);i.push(l.geometry.latitude===c.geometry.latitude&&l.geometry.longitude===c.geometry.longitude&&l.symbol.text===c.symbol.text?c:l)}}}})),t.removeAll(),t.addMany(i))}(m.polygonGraphicsLayer,m.geomLabelsGraphicsLayer,0,m.textService)}))},this.ClickToAddTextbox=function(){m.clickToAddTextboxHandler&&(m.clickToAddTextboxHandler=void 0),m.clickToAddTextboxHandler=m.mapView.on("click",(function(e){var t=document.getElementById("textboxes"),n=m.textService.createInput(e,Object(u.a)(),m.store,m.textcontrolsElmRef.textProps);t.appendChild(n),n.focus(),m.clickToAddTextboxHandler.remove(),m.ResetDrawControls()}))},this.CreateDraggableTextbox=function(e,t){var n=m.mapView.toScreen(e.geometry);m.selectedInputBox=m.TextSelectionService.createInputWithFrame(n,e,e.attributes.symbol,m.store,m.mapView,t,m.cleanupSelection),t.remove(e),document.getElementById("textboxes").appendChild(m.selectedInputBox.frame),c(e.attributes.id,"parent")},this.detectTextGraphics=function(){m.mapView.on("click",(function(e){m.selectionState&&"active"!==m.sketchVM.state&&"active"!==m.generalSketchVM.state&&"disabled"!==m.sketchVM.state&&(m.generalSketchVM.layer.graphics.length>0||m.mapView.hitTest(e).then((function(e){if(e.results.length<1)m.selectedGraphics.length>0&&(m.selectedTextGraphics=[]);else if(m.openDrawPanel(),m.selectedTextGraphics=e.results.filter((function(e){return e.graphic.layer===m.textGraphicsLayer})),m.selectedLabelsGraphics=e.results.filter((function(e){return e.graphic.layer===m.geomLabelsGraphicsLayer})),m.selectedLabelsGraphics.length>0&&m.CreateDraggableTextbox(m.selectedLabelsGraphics[0].graphic,m.geomLabelsGraphicsLayer),m.selectedTextGraphics.length>0){var t=m.selectedTextGraphics[0].graphic;m.mapView.extent.clone().expand(.85).contains(t.geometry)?m.CreateDraggableTextbox(t,m.textGraphicsLayer):m.mapView.goTo(t).then((function(){m.CreateDraggableTextbox(t,m.textGraphicsLayer)}))}})))}))}}return Zt(e,[{key:"toggleLabels",value:function(){this.geomLabelsGraphicsLayer.visible=!this.geomLabelsGraphicsLayer.visible}},{key:"ngOnInit",value:function(){var e=this;this.sketchVM&&(this.sketchVM.on("update",(function(t){"complete"===t.state&&e.ResetDrawControls()})),this.sketchVM.on("create",(function(t){"complete"===t.state&&e.ResetDrawControls()})),this.initSketchVMCreate(),this.initSketchVMUpdate(),this.detectTextGraphics()),this.textSubscription=this.textService.textGraphicState$.subscribe((function(t){null===t&&(e.selectedTextGraphics=[],e.selectedLabelsGraphics=[],e.clearDrawTools())}))}},{key:"ngAfterViewInit",value:function(){var e=this;this.graphicsSubcription$=this.listenToGraphicsStore(),this.selectionStateSubcription$=this.sketchSelectionService.disableSketchSelection.subscribe((function(t){e.sketchVM.updateOnGraphicClick=t.status,e.selectionState=t.status}))}},{key:"ngOnDestroy",value:function(){this.textSubscription.unsubscribe(),this.graphicsSubcription$.unsubscribe(),this.selectionStateSubcription$.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||$)(i.fc(b.h),i.fc(S),i.fc(M.a),i.fc(I),i.fc(T.a))},$.\u0275cmp=i.Zb({type:$,selectors:[["app-drawtools"]],viewQuery:function(e,t){var n;1&e&&(i.Xc(z,1),i.Xc(V,1),i.Xc(G,1),i.Xc(U,1),i.Xc(B,1)),2&e&&(i.Ic(n=i.sc())&&(t.radiusElmRef=n.first),i.Ic(n=i.sc())&&(t.textcontrolsElmRef=n.first),i.Ic(n=i.sc())&&(t.pointControlElmRef=n.first),i.Ic(n=i.sc())&&(t.fillStyleElmRef=n.first),i.Ic(n=i.sc())&&(t.lineStyleElmRef=n.first))},inputs:{sketchVM:"sketchVM",generalSketchVM:"generalSketchVM",geomLabelsSketchVM:"geomLabelsSketchVM",geomLabelsGraphicsLayer:"geomLabelsGraphicsLayer",mapView:"mapView",textGraphicsLayer:"textGraphicsLayer",polygonGraphicsLayer:"polygonGraphicsLayer"},decls:35,vars:19,consts:[[1,"centerAlign"],[3,"header","itemName"],[1,"toggleRadios"],[4,"ngFor","ngForOf"],["class","pmlo-btn pmlo-secondary clearDrawTools",3,"click",4,"ngIf"],["class","centerAlign",4,"ngIf"],[4,"ngIf"],[3,"selectedGraphics","hidden"],["pointcontrol",""],[3,"hidden"],[1,"centerAlign","toggle-buttons"],["class","drLabels",3,"ngClass",4,"ngFor","ngForOf"],[1,"radiusDiv",3,"hidden"],["type","number","aria-label","radius",1,"radiusInput",3,"ngModel","ngModelChange","keyup.enter","blur"],["radiusInput",""],[3,"selectedGraphics","drawingTool","changedGraphicsStyle"],["linestyle",""],["fillstyle",""],[3,"selectedTextGraphics","hidden"],["textcontrols",""],["type","radio","name","shapes","aria-label","tes",3,"value","ngModel","ngModelChange"],[3,"src","svgStyle"],[1,"pmlo-btn","pmlo-secondary","clearDrawTools",3,"click"],["type","checkbox","value","show","id","toggleLabels","checked","","aria-label","show/hide area labels",1,"m-auto","form-checkbox","h-5","w-5","text-pmlo_secondary","cursor-pointer",3,"change"],["for","toggleLables"],[3,"color","opacity","autoClose","colorSelected"],[1,"drLabels",3,"ngClass"],["type","radio","name","drawingMode","aria-label","draw mode",3,"value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.kc(0,"div"),i.kc(1,"div",0),i.gc(2,"app-help-button",1),i.gc(3,"br"),i.Tc(4," Select a drawing tool:"),i.gc(5,"br"),i.kc(6,"div",2),i.Sc(7,H,4,5,"label",3),i.jc(),i.Sc(8,W,2,0,"button",4),i.jc(),i.gc(9,"br"),i.Sc(10,J,5,0,"div",5),i.Sc(11,Z,4,3,"div",6),i.gc(12,"app-pointcontrol",7,8),i.kc(14,"div",9),i.gc(15,"br"),i.kc(16,"fieldset"),i.kc(17,"legend"),i.Tc(18,"Drawing Mode"),i.jc(),i.kc(19,"div",10),i.Sc(20,Q,4,8,"label",11),i.jc(),i.jc(),i.jc(),i.kc(21,"div"),i.kc(22,"div",0),i.kc(23,"div",12),i.Tc(24," Radius: \xa0\xa0 "),i.kc(25,"input",13,14),i.rc("ngModelChange",(function(e){return t.radius=e}))("keyup.enter",(function(){return t.radiusChangedEnter()}))("blur",(function(){return t.radiusBlurred()})),i.jc(),i.Tc(27," \xa0 Miles "),i.jc(),i.jc(),i.jc(),i.kc(28,"app-linestyle",15,16),i.rc("changedGraphicsStyle",(function(){return t.changeGraphicsStyle()})),i.jc(),i.kc(30,"app-fillstyle",15,17),i.rc("changedGraphicsStyle",(function(){return t.changeGraphicsStyle()})),i.jc(),i.gc(32,"br"),i.gc(33,"app-textcontrols",18,19),i.jc()),2&e&&(i.Tb(2),i.Bc("header","Draw")("itemName","draw"),i.Tb(5),i.Bc("ngForOf",t.drawToolOptions),i.Tb(1),i.Bc("ngIf",""!==t.drawingTool),i.Tb(2),i.Bc("ngIf",!("point"===t.drawingTool||"text"===t.drawingTool)),i.Tb(1),i.Bc("ngIf",t.selectedLabelsGraphics.length>0),i.Tb(1),i.Bc("selectedGraphics",t.selectedGraphics)("hidden",!(t.selectedGraphics.length>0&&"point"===t.selectedGraphics[0].geometry.type||"point"===t.drawingTool)),i.Tb(2),i.Bc("hidden",!(i.Dc(18,ee).indexOf(t.drawingTool)>-1)),i.Tb(6),i.Bc("ngForOf",t.drawModes),i.Tb(3),i.Bc("hidden",!("circle"===t.drawingTool&&"click"===t.drawingMode||"circle"===t.selectedGraphicsGeometry&&t.selectedGraphics.length>0)),i.Tb(2),i.Bc("ngModel",t.radius),i.Tb(3),i.Bc("selectedGraphics",t.selectedGraphics)("drawingTool",t.drawingTool),i.Tb(2),i.Bc("selectedGraphics",t.selectedGraphics)("drawingTool",t.drawingTool),i.Tb(3),i.Bc("selectedTextGraphics",t.selectedTextGraphics)("hidden",!(t.selectedTextGraphics.length>0||"text"===t.drawingTool)))},directives:[A.a,C.l,C.m,E.a,P.o,P.b,P.j,P.m,R.a,D.a,L.a,P.p,N.b,F.a,C.k],pipes:[C.t],styles:["fieldset[_ngcontent-%COMP%]{position:relative;padding-top:12px}.widthSlider[_ngcontent-%COMP%]{width:80%;height:20px}.widthSlider[_ngcontent-%COMP%] > .slidecontainer[_ngcontent-%COMP%]{width:200px}.widthSliderContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;line-height:15px}.buttonActive[_ngcontent-%COMP%]{background-color:#d3d3d3;border:2px solid #0ff;color:#000}.fontButtons[_ngcontent-%COMP%]{min-width:unset!important;width:50px;margin:2px;outline:none}.fontStyle[_ngcontent-%COMP%]{justify-content:center;margin-top:10px}.verticalCenter[_ngcontent-%COMP%]{align-items:center}.matSelect[_ngcontent-%COMP%]{margin-left:10px}.colorDiv[_ngcontent-%COMP%], .marginTop10px[_ngcontent-%COMP%]{margin-top:10px}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:left;width:40px;height:40px;margin:2px;background-color:#efefef;border-radius:4px;border:1px solid #d0d0d0;overflow:auto}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;width:100%;overflow:hidden}.toggleRadios[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.toggleRadios[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:#7d7b7b;color:#f7f7f7}.toggleRadios[_ngcontent-%COMP%]{display:inline-block}.mat-option[_ngcontent-%COMP%]{padding:0!important}.toggleRadios[_ngcontent-%COMP%]{margin-top:10px}.radiusInput[_ngcontent-%COMP%]{width:80px;border:1px solid #000;padding-left:5px}.clearDrawTools[_ngcontent-%COMP%]{margin-top:1rem;width:9rem}.radiusDiv[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center;align-items:center}.radiusDiv[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{margin-bottom:-1.25em!important}legend[_ngcontent-%COMP%]{font-weight:600}.toggle-buttons[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.toggle-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.toggle-buttons[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;background-color:#fff;font-size:1rem;cursor:pointer;width:76px;height:2.5rem;line-height:1.5rem;text-align:center;float:left;border:1px solid #d3d3d3;padding:5px 3px}.toggle-buttons[_ngcontent-%COMP%]   .drLabelSelected[_ngcontent-%COMP%]{background-color:#bbb;border:2px solid #000}.drHidden[_ngcontent-%COMP%]{display:none!important}"]}),$)},"TCJ/":function(e,t,n){"use strict";var r=n("LrR4"),i=n("qSf1"),a=n("LoQE"),o=n("vXsN"),s=n("9aYe"),u=n("er0w"),c=n("F/6a"),l=n("Mi3D");function h(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}n("tkqm"),h.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.transformTo(l.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===u.CENTRAL_FILE_HEADER;)(e=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip : can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,u.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){var t=s.getTypeOf(e);if(s.checkSupport(t),"string"!==t||l.uint8array)if("nodebuffer"===t)this.reader=new i(e);else if(l.uint8array)this.reader=new a(s.transformTo("uint8array",e));else{if(!l.array)throw new Error("Unexpected error: unsupported type '"+t+"'");this.reader=new o(s.transformTo("array",e))}else this.reader=new r(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},TDcG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c}));var r=n("f/qv"),i=n("srIe"),a=n("xkkJ");function o(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function s(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}function u(e,t,n){return function e(t,n,a){return n?Object.keys(n).reduce((function(t,o){var s=null,u="merge";if(a&&(s=a.path?"".concat(a.path,".").concat(o):o,u=a.policy(s)),"replace"===u)return t[o]=n[o],t;if(void 0===t[o])return t[o]=Object(r.a)(n[o]),t;var c=t[o],l=n[o];if(c===l)return t;if(Array.isArray(l)||Array.isArray(t))c=t[o]=c?Array.isArray(c)?c.concat():[c]:[],l&&(Array.isArray(l)||(l=[l]),l.forEach((function(e){-1===c.indexOf(e)&&c.push(e)})));else if(l&&"object"==typeof l)if(a){var h=a.path;a.path=Object(i.d)(s),t[o]=e(c,l,a),a.path=h}else t[o]=e(c,l,null);else t.hasOwnProperty(o)&&!n.hasOwnProperty(o)||(t[o]=l);return t}),t||{}):t}(e,t,n?{policy:n,path:""}:null)}function c(e){return e?"string"==typeof e&&-1===e.indexOf(".")?e:l(e):e}function l(e){return Array.isArray(e)?e:e.split(".")}function h(e){return e.indexOf(",")>-1?e.split(",").map((function(e){return e.trim()})):[e.trim()]}function f(e,t,n,r){var i=function(e){if(Array.isArray(e)){var t,n=[],r=Vt(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push.apply(n,Bt(h(i)))}}catch(a){r.e(a)}finally{r.f()}return n}return h(e)}(t);if(1!==i.length){var o=i.map((function(t){return r(e,t,n)}));return Object(a.b)(o)}return r(e,i[0],n)}function p(e){var t=!1;return function(){t||(t=!0,e())}}},TKwc:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("s7YA"),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("RI0u"),c=n("r88o"),l=n("04ZG"),h=n("Cduq"),f=(n("4EHJ"),n("ju1D"),n("9AIY"),n("wdpY")),p=n("DZP5"),d=r=function(e){Kt(i,e);var t,n=Xt(i);function i(e){var t;return Wt(this,i),(t=n.call(this,e)).data=null,t.type="cim",t}return Zt(i,[{key:"readData",value:function(e,t){return t}},{key:"writeData",value:function(e,t){if(e)for(var n in e)t[n]=e[n]}},{key:"collectRequiredFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CIMSymbolReference"!==this.data.type){e.next=6;break}if(!(r=this.data.primitiveOverrides)){e.next=6;break}return i=r.map((function(e){var r=e.valueExpressionInfo;return Object(f.a)(t,n,r.expression)})),e.next=6,Promise.all(i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"clone",value:function(){return new r({data:Object(a.a)(this.data)})}},{key:"hash",value:function(){return Object(o.b)(JSON.stringify(this.data)).toString()}}]),i}(p.a);Object(i.a)([Object(s.b)({json:{write:!1}})],d.prototype,"color",void 0),Object(i.a)([Object(s.b)({json:{write:!0}})],d.prototype,"data",void 0),Object(i.a)([Object(c.a)("data",["symbol"])],d.prototype,"readData",null),Object(i.a)([Object(h.a)("data")],d.prototype,"writeData",null),Object(i.a)([Object(u.a)({CIMSymbolReference:"cim"},{readOnly:!0})],d.prototype,"type",void 0),d=r=Object(i.a)([Object(l.a)("esri.symbols.CIMSymbol")],d),t.a=d},TRCY:function(e,t,n){"use strict";var r=n("pO5D"),i=n("WbKI"),a=n("04ZG"),o=n("LE9a"),s=n("r0DZ"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._handles=new s.a,r.root=null,r}return Zt(n,[{key:"initialize",value:function(){var e=this;this._handles.add(this.rootCollectionNames.map((function(t){return e.watch("root."+t,(function(){return e.updateCollections()}),!0)}))),this.updateCollections()}},{key:"destroy",value:function(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null}},{key:"updateCollections",value:function(){var e=this;this._collections=this.rootCollectionNames.map((function(t){return e.get("root."+t)})).filter((function(e){return null!=e})),this.refresh()}},{key:"refresh",value:function(){var e=this,t=this._handles;t.remove("collections");var n,r=new Array,i=0,a=Vt(this._collections);try{for(a.s();!(n=a.n()).done;){var o=n.value;i=this._processCollection(r,i,o)}}catch(l){a.e(l)}finally{a.f()}this.splice(i,this.length);for(var s=0,u=r;s<u.length;s++){var c=u[s];t.add(c.on("after-changes",(function(){return e.refresh()})),"collections")}}},{key:"_createNewInstance",value:function(e){return new o.a(e)}},{key:"_processCollection",value:function(e,t,n){var r=this;return n?(e.push(n),n.forEach((function(n){if(n){if(!r.itemFilterFunction||r.itemFilterFunction(n)){var i=r.indexOf(n,t);i>=0?i!==t&&r.reorder(n,t):r.add(n,t),++t}r.getChildrenFunction&&(t=r._processCollection(e,t,r.getChildrenFunction(n)))}})),t):t}}]),n}(o.a);Object(r.a)([Object(i.b)()],u.prototype,"rootCollectionNames",void 0),Object(r.a)([Object(i.b)()],u.prototype,"root",void 0),Object(r.a)([Object(i.b)()],u.prototype,"getChildrenFunction",void 0),Object(r.a)([Object(i.b)()],u.prototype,"itemFilterFunction",void 0),u=Object(r.a)([Object(a.a)("esri.core.CollectionFlattener")],u),t.a=u},TYL1:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return a}));var r=n("/GVf"),i="https://imagery.tnris.org/server/rest/services/",a=new(n("h2Da").default)({url:"https://txgi.tnris.org/login/path/normal-citizen-medical-trick/wms?",id:"TX Google 6-inch",customParameters:{version:"1.1.1",visibleLayers:["texas"],layers:["texas"]}}),o={mosaicRule:{method:"none"},popupEnabled:!1,legendEnabled:!1,listMode:"hide"},s=new r.default(Object.assign({url:i+"TOP/TOP96_CIR_1m/ImageServer",id:"TX TOP 1996"},o)),u=new r.default(Object.assign({url:i+"NAIP/NAIP04_CIR_1m/ImageServer",id:"TX NAIP 2004"},o)),c=new r.default(Object.assign({url:i+"TOP/TOP08_NC_50cm/ImageServer",id:"TXw TOP 2008"},o)),l=new r.default(Object.assign({url:i+"TOP/TOP09_NC_50cm/ImageServer",id:"TXe TOP 2009"},o)),h=new r.default(Object.assign({url:i+"NAIP/NAIP10_NCCIR_1m/ImageServer",id:"TX NAIP 2010"},o)),f=new r.default(Object.assign({url:i+"NAIP/NAIP12_NCCIR_1m/ImageServer",id:"TX NAIP 2012"},o)),p=new r.default(Object.assign({url:i+"NAIP/NAIP14_NCCIR_1m/ImageServer",id:"TX NAIP 2014"},o)),d=new r.default(Object.assign({url:i+"TOP/TOP15_NCCIR_50cm/ImageServer",id:"TX TOP 2015"},o)),v=new r.default(Object.assign({url:i+"NAIP/NAIP16_NCCIR_1m/ImageServer",id:"TX NAIP 2016"},o)),y=new r.default(Object.assign({url:i+"NAIP/NAIP18_NCCIR_60cm/ImageServer",id:"TX NAIP 2018"},o)),b=["TX Google 6-inch","TX NAIP 2018","TX NAIP 2016","TX TOP 2015","TX NAIP 2014","TX NAIP 2012","TX NAIP 2010","TXe TOP 2009","TXw TOP 2008","TX NAIP 2004","TX TOP 1996"],g={"TX Google 6-inch":a,"TX NAIP 2018":y,"TX NAIP 2016":v,"TX TOP 2015":d,"TX NAIP 2014":p,"TX NAIP 2012":f,"TX NAIP 2010":h,"TXe TOP 2009":l,"TXw TOP 2008":c,"TX NAIP 2004":u,"TX TOP 1996":s}},Tbkp:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e,t){e.vertex.code.add(t.linearDepth?r.a(he||(he=Rt(["\n    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\n      vec4 eye = view * vec4(pos, 1.0);\n      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n      return proj * eye;\n    }\n    "]))):r.a(fe||(fe=Rt(["\n    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\n      // Make sure the order of operations is the same as in transformPositionWithDepth.\n      return proj * (view * vec4(pos, 1.0));\n    }\n    "]))))}},"Tc+0":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("fXoL"),i=n("lNcg"),a=n("d3UM"),o=n("3Pt+"),s=n("ofXK"),u=n("zVIQ"),c=n("RGY+"),l=n("OFbc"),h=n("FKr1");function f(e,t){if(1&e&&r.gc(0,"svg-icon",11),2&e){var n=r.vc();r.Bc("src","assets/linesymbols/symbols-sls-"+n.lineProps.style+".svg")("svgStyle",n.lineSvgStyle)}}function p(e,t){1&e&&(r.kc(0,"span"),r.Tc(1,"None"),r.jc())}function d(e,t){if(1&e&&r.gc(0,"svg-icon",11),2&e){var n=r.vc().$implicit,i=r.vc();r.Bc("src","assets/linesymbols/symbols-sls-"+n+".svg")("svgStyle",i.lineSvgStyle)}}function v(e,t){1&e&&(r.kc(0,"span"),r.Tc(1,"None"),r.jc())}function y(e,t){if(1&e&&(r.kc(0,"mat-option",12),r.Sc(1,d,1,2,"svg-icon",4),r.Sc(2,v,2,0,"span",5),r.jc()),2&e){var n=t.$implicit;r.Bc("value",n),r.Tb(1),r.Bc("ngIf","none"!==n),r.Tb(1),r.Bc("ngIf","none"===n)}}var b=function(){var e=function(){function e(){var t=this;Wt(this,e),this.geomType="",this.lineStyles=i.d,this.changedGraphicsStyle=new r.t,this.lineProps={style:"solid",color:{r:255,g:255,b:0,a:1},width:2},this.lineSvgStyle={"width.px":150,fill:"black"},this.changeLineColor=function(e){t.lineProps.color=e,t.changedGraphicsStyle.emit()},this.changeGraphicsStyle=function(){t.changedGraphicsStyle.emit()},this.changeLineWidth=function(e){t.lineProps.width=e,t.changeGraphicsStyle()},this.changeLineWidthComplete=function(e){t.lineProps.width=e,t.changeGraphicsStyle()}}return Zt(e,[{key:"selectedGraphics",get:function(){return this._selectedGraphics},set:function(e){if(!(this._selectedGraphics=e,this.geomType="",void 0===e||e.length<1||(this.geomType=e[0].geometry.type,"circle"!==this.geomType&&"polygon"!==this.geomType&&"polyline"!==this.geomType))){var t="polyline"===this.geomType?e[0].attributes.symbol:e[0].attributes.symbol.outline;this.lineProps.style=t.style,this.lineProps.color=t.color,this.lineProps.width=t.width}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["app-linestyle"]],inputs:{drawingTool:"drawingTool",selectedGraphics:"selectedGraphics"},outputs:{changedGraphicsStyle:"changedGraphicsStyle"},decls:23,vars:11,consts:[[3,"hidden"],[2,"display","flex"],[2,"flex-grow","1"],[1,"matSelect",3,"ngModel","ngModelChange","selectionChange"],[3,"src","svgStyle",4,"ngIf"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"color","opacity","colorSelected"],[1,"marginTop10px"],[1,"widthSliderContainer"],[1,"widthSlider",3,"value","min","max","onChange","onChangeCompleted"],[3,"src","svgStyle"],[3,"value"]],template:function(e,t){1&e&&(r.kc(0,"div",0),r.gc(1,"br"),r.kc(2,"fieldset"),r.kc(3,"legend"),r.Tc(4,"Line Style"),r.jc(),r.kc(5,"div",1),r.kc(6,"div",2),r.Tc(7," Line type:"),r.gc(8,"br"),r.kc(9,"mat-select",3),r.rc("ngModelChange",(function(e){return t.lineProps.style=e}))("selectionChange",(function(){return t.changeGraphicsStyle()})),r.kc(10,"mat-select-trigger"),r.Sc(11,f,1,2,"svg-icon",4),r.Sc(12,p,2,0,"span",5),r.jc(),r.Sc(13,y,3,3,"mat-option",6),r.jc(),r.jc(),r.kc(14,"div"),r.kc(15,"app-color-picker",7),r.rc("colorSelected",(function(e){return t.changeLineColor(e)})),r.jc(),r.jc(),r.jc(),r.kc(16,"div",8),r.Tc(17),r.gc(18,"br"),r.kc(19,"div",9),r.Tc(20," 1 \xa0"),r.kc(21,"app-slider",10),r.rc("onChange",(function(e){return t.changeLineWidth(e)}))("onChangeCompleted",(function(e){return t.changeLineWidthComplete(e)})),r.jc(),r.Tc(22," \xa010 "),r.jc(),r.jc(),r.jc(),r.jc()),2&e&&(r.Bc("hidden",!(t.selectedGraphics.length>0&&("polygon"===t.geomType||"circle"===t.geomType||"polyline"===t.geomType)||"polygon"===t.drawingTool||"circle"===t.drawingTool||"polyline"===t.drawingTool)),r.Tb(9),r.Bc("ngModel",t.lineProps.style),r.Tb(2),r.Bc("ngIf","none"!==t.lineProps.style),r.Tb(1),r.Bc("ngIf","none"===t.lineProps.style),r.Tb(1),r.Bc("ngForOf",t.lineStyles),r.Tb(2),r.Bc("color",t.lineProps.color)("opacity",100*t.lineProps.color.a),r.Tb(2),r.Vc(" Width: ",t.lineProps.width,"px"),r.Tb(4),r.Bc("value",t.lineProps.width)("min",1)("max",10))},directives:[a.a,o.j,o.m,a.c,s.m,s.l,u.a,c.a,l.b,h.e],styles:["fieldset[_ngcontent-%COMP%]{position:relative;padding-top:12px}.widthSlider[_ngcontent-%COMP%]{width:80%;height:20px}.widthSlider[_ngcontent-%COMP%] > .slidecontainer[_ngcontent-%COMP%]{width:200px}.widthSliderContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;line-height:15px}.buttonActive[_ngcontent-%COMP%]{background-color:#d3d3d3;border:2px solid #0ff;color:#000}.fontButtons[_ngcontent-%COMP%]{min-width:unset!important;width:50px;margin:2px;outline:none}.fontStyle[_ngcontent-%COMP%]{justify-content:center;margin-top:10px}.verticalCenter[_ngcontent-%COMP%]{align-items:center}.matSelect[_ngcontent-%COMP%]{margin-left:10px}.colorDiv[_ngcontent-%COMP%], .marginTop10px[_ngcontent-%COMP%]{margin-top:10px}legend[_ngcontent-%COMP%]{font-weight:600}"]}),e}()},TcGo:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return i})),n("wSAH");var r=n("OKTS");function i(e,t){var n=function(e,t){var n=e||{},i=n.format,a=n.quality,o=n.rotation,s=n.disableDecorations,u=h(e,t.padding),c=function(e,t){var n={x:0,y:0,width:t.width,height:t.height};if(e&&e.area){null!=e.area.x&&(n.x=Math.floor(e.area.x)),null!=e.area.y&&(n.y=Math.floor(e.area.y));var r=null!=e.area.width?Math.floor(e.area.width):null,i=null!=e.area.height?Math.floor(e.area.height):null;if(n.width=t.width-n.x,n.height=t.height-n.y,null!=r&&null!=i)n.width=Math.min(n.width,r),n.height=Math.min(n.height,i);else if(null==r&&null!=i){var a=Math.min(n.width,r);n.height=a/n.width*n.height,n.width=a}else if(null!=r&&null==i){var o=Math.min(n.height,i);n.width=o/n.height*n.width,n.height=o}}return function(e,t){var n=Math.floor(Math.max(e.x,0)),r=Math.floor(Math.max(e.y,0)),i={x:n,y:r,width:Math.floor(Math.min(e.width,t.width-n)),height:Math.floor(Math.min(e.height,t.height-r))},a=i.width/i.height,o=e.width/e.height;if(o===a)return i;if(o>a){var s=Math.floor(i.width/o);return{x:i.x,y:Math.floor(i.y+(i.height-s)/2),width:i.width,height:s}}var u=Math.floor(i.height*o);return{x:Math.floor(i.x+(i.width-u)/2),y:i.y,width:u,height:i.height}}(function(e,t){if(!t||null==t.width||null==t.height)return e;var n=t.width/t.height,r=e.width/e.height;if(r===n)return e;if(r<n){var i=Math.floor(e.height*n);return e.x-=(i-e.width)/2,e.width=i,e}var a=Math.floor(e.width/n);return e.y-=(a-e.height)/2,e.height=a,e}(n,e),t)}(e,{width:t.width-u.left-u.right,height:t.height-u.top-u.bottom}),l=function(e,t){if(!e)return t;var n=e.width,r=e.height;if(null!=n&&null!=r)return{width:Math.floor(n),height:Math.floor(r)};if(null==n&&null==r)return t;var i=t.width/t.height;return null==r?{width:Math.floor(n),height:Math.floor(n/i)}:{width:Math.floor(r*i),height:Math.floor(r)}}(e,c),f=l.width,v=l.height,y=function(e){switch(e){case"png":case"jpg":case"jpeg":return e;case null:case void 0:default:return p}}(i),b=d[y];return{format:y,quality:Object(r.c)(null!=a?a:b,0,100),area:c,width:f,height:v,rotation:o,disableDecorations:!!s,ignoreBackground:!(!e||!e.ignoreBackground),ignorePadding:!(!e||!e.ignorePadding)}}(e,t),i=n.area,a=n.width/i.width,o=h(n,t.padding),s=o.left+o.right,u=o.top+o.bottom,c=t.height-u,l=Math.floor((t.width-s)*a+s),f=Math.floor(c*a+u),v=e&&e.layers?e.layers:[],y=n.ignoreBackground,b=n.ignorePadding;return{framebufferWidth:l,framebufferHeight:f,region:{x:Math.floor(i.x*a)+o.left,y:Math.floor(i.y*a)+o.top,width:n.width,height:n.height},format:n.format,quality:n.quality,rotation:n.rotation,pixelRatio:a,layers:v,disableDecorations:n.disableDecorations,ignoreBackground:y,ignorePadding:b}}function a(e,t,n,r){r.premultipliedAlpha&&function(e){for(var t=e.data,n=t.length,r=0;r<n;r+=4){var i=t[r+3];if(i>0){var a=i/255;t[r+0]=t[r+0]/a,t[r+1]=t[r+1]/a,t[r+2]=t[r+2]/a}}}(e),n.width=e.width,n.height=e.height;var i=n.getContext("2d");i.putImageData(e,0,0),r.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(i);var a=i.getImageData(0,0,e.width,e.height),o=function(e,t){return e.toDataURL(f[t.format],t.quality/100)}(n,t);return n.width=0,n.height=0,{dataUrl:o,data:a}}function o(e,t,n){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(e,t)}catch(r){l=!1}return function(e,t,n){return n||(c||((c=document.createElement("canvas")).width=1,c.height=1),n=c),n.getContext("2d").createImageData(e,t)}(e,t,n)}function s(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.width-r,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.height-i,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=e.data,c=t.width,l=t.height,h=t.data,f=a/c,p=o/l,d=Math.ceil(f/2),v=Math.ceil(p/2),y=e.width,b=0;b<l;b++)for(var g=0;g<c;g++){for(var m=4*(g+(s?l-b-1:b)*c),w=0,O=0,j=0,_=0,x=0,k=0,S=(b+.5)*p,M=Math.floor(b*p);M<(b+1)*p;M++)for(var I=Math.abs(S-(M+.5))/v,T=(g+.5)*f,A=I*I,C=Math.floor(g*f);C<(g+1)*f;C++){var E=Math.abs(T-(C+.5))/d,P=Math.sqrt(A+E*E);if(!(P>=1)){var R=2*P*P*P-3*P*P+1,D=4*(r+C+(i+M)*y);k+=R*u[D+3],O+=R,!n&&u[D+3]<255&&(R=R*u[D+3]/255),j+=R*u[D],_+=R*u[D+1],x+=R*u[D+2],w+=R}}h[m]=j/w,h[m+1]=_/w,h[m+2]=x/w,h[m+3]=k/O}return t}function u(e,t,n){if(!t)return e;var r=e.framebufferWidth,i=e.framebufferHeight,a=e.pixelRatio,o=e.region,s=h(e,n),u=s.left+s.right,c=s.top+s.bottom,l=r-u,f=i-c,p=Math.min(8,Math.min((2048-u)/l,(2048-c)/f));return p<1.5?e:Nt(Nt({},e),{},{framebufferWidth:Math.round(l*p)+u,framebufferHeight:Math.round(f*p)+c,pixelRatio:a*p,resample:{region:{x:Math.round((o.x-s.left)*p)+s.left,y:Math.round((o.y-s.top)*p)+s.top,width:Math.round(o.width*p),height:Math.round(o.height*p)},width:r,height:i}})}var c=null,l=!0;function h(e,t){return!t||e&&e.ignorePadding?v:t}var f={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},p="png",d={png:100,jpg:98,jpeg:98},v={top:0,right:0,bottom:0,left:0}},Tcbo:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},Tcmu:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("RI0u"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),f=n("qRWG"),p=n("21Ip"),d=n("bk1R"),v=new s.a({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"}),y=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).color=new h.a([255,255,255,.25]),e.type="simple-marker",e.size=12,e.style="circle",e.outline=new p.a,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"string"!=typeof e)return e;var i={};return e&&(i.style=e),null!=t&&(i.size=Object(f.k)(t)),n&&(i.outline=n),r&&(i.color=r),i}},{key:"writeColor",value:function(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)}},{key:"path",set:function(e){this.style="path",this._set("path",e)}},{key:"clone",value:function(){return new r({angle:this.angle,color:Object(a.a)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}},{key:"hash",value:function(){var e;return"".concat(Dt(en(n.prototype),"hash",this).call(this),".").concat(this.color&&this.color.hash(),".").concat(this.path,".").concat(this.style,".").concat(null==(e=this.outline)?void 0:e.hash())}}]),n}(d.a);Object(i.a)([Object(o.b)()],y.prototype,"color",void 0),Object(i.a)([Object(l.a)("color")],y.prototype,"writeColor",null),Object(i.a)([Object(u.a)({esriSMS:"simple-marker"},{readOnly:!0})],y.prototype,"type",void 0),Object(i.a)([Object(o.b)()],y.prototype,"size",void 0),Object(i.a)([Object(o.b)({type:v.apiValues,json:{read:v.read,write:v.write}})],y.prototype,"style",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],y.prototype,"path",null),Object(i.a)([Object(o.b)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":p.a}},json:{default:null,write:!0}})],y.prototype,"outline",void 0),y=r=Object(i.a)([Object(c.a)("esri.symbols.SimpleMarkerSymbol")],y),t.a=y},Tl51:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var r=n("srIe"),i=n("LE9a"),a=n("eqZM");function o(e,t){var n=e.view;n&&(t&&n.ready&&n.activeTool!==e?(n.activeTool=e,Object(a.b)(n)&&n.focus()):t||n.activeTool!==e||(n.activeTool=null))}function s(e,t,n){var i=e.activeTool;t!==i&&(Object(r.k)(i)&&i.deactivate&&i.deactivate(),n(t),Object(r.k)(t)&&t.activate&&t.activate())}function u(){var e=new i.a;return e.on("after-add",(function(e){var t=e.item;t.view&&t.view.ready&&t.attach()})),e.on("after-remove",(function(e){var t=e.item;o(t,!1),t.destroyed||t.detach()})),e}function c(e){return!1!==e.visible&&!1!==e.editable&&(null==e.hasEditableFlag||e.hasEditableFlag(1))}function l(e){return Object(r.j)(e)?{}:"function"==typeof e?e():e}},TzeZ:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=n("Cduq"),u=n("zlDU"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("XdUx")),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).axis=null,r.type="rotation",r.rotationType="geographic",r.valueExpressionTitle=null,r}return Zt(n,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"writeValueExpressionTitleWebScene",value:function(e,t,n,r){r&&r.messages&&r.messages.push(new u.a("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"visualVariables[".concat(this.index,"].valueExpressionTitle"),context:r}))}},{key:"clone",value:function(){return new r({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}}]),n}(c.a);Object(i.a)([Object(a.b)({readOnly:!0})],l.prototype,"cache",null),Object(i.a)([Object(a.b)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],l.prototype,"axis",void 0),Object(i.a)([Object(a.b)({type:["rotation"],json:{type:["rotationInfo"]}})],l.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],l.prototype,"rotationType",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"valueExpressionTitle",void 0),Object(i.a)([Object(s.a)("web-scene","valueExpressionTitle")],l.prototype,"writeValueExpressionTitleWebScene",null),l=r=Object(i.a)([Object(o.a)("esri.renderers.visualVariables.RotationVariable")],l),t.a=l},"U/i9":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=(n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("r88o"),u=n("04ZG"),c=n("Cduq"),l=n("zlDU"),h=(n("4EHJ"),n("ju1D"),n("ku/q")),f=(n("9AIY"),n("9MzC")),p=n("OvF4"),d=n("Lqtk"),v=n("GFPt"),y=n("pqNC"),b=n("ZYtI"),g=n("5pQd"),m=n("IvSi"),w=n("uRH/"),O=n("PVlI"),j=n("mXvl"),_=n("iyhF"),x=n("DbUH"),k=n("jhcG"),S=n("WmKv"),M=n("YBpl"),I=n("kJYu"),T=n("SaAm"),A=n("MD9Z"),C=n("6dDx"),E=n("Ilhi"),P=n("1Ana"),R=n("cM4j"),D=function(e){Kt(o,e);var t,n,r,a=Xt(o);function o(){var e;Wt(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).alwaysRefetch=!1,e.dpi=96,e.gdbVersion=null,e.imageFormat="png24",e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.isReference=null,e.labelsVisible=!1,e.operationalLayerType="ArcGISMapServiceLayer",e.sourceJSON=null,e.sublayers=null,e.type="map-image",e.url=null,e}return Zt(o,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Nt({url:e},t):e}},{key:"load",value:function(e){var t=this,n=Object(i.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((function(){return t._fetchService(n)}),(function(){return t._fetchService(n)}))),Promise.resolve(this)}},{key:"readImageFormat",value:function(e,t){var n=t.supportedImageFormatTypes;return n&&n.indexOf("PNG32")>-1?"png32":"png24"}},{key:"writeSublayers",value:function(e,t,n,r){if(this.loaded&&e){var i=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),a=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){var o=Object(h.d)(r.origin);if(3===o){var s=this.createSublayersForOrigin("service").sublayers;a=Object(E.c)(i,s,2)}else if(o>3){var u=this.createSublayersForOrigin("portal-item");a=Object(E.c)(i,u.sublayers,Object(h.d)(u.origin))}}var c=[],l=Nt({writeSublayerStructure:a},r),f=a;i.forEach((function(e){var t=e.write({},l);c.push(t),f=f||"user"===e.originOf("visible")})),c.some((function(e){return Object.keys(e).length>1}))&&(t.layers=c),f&&(t.visibleLayers=i.filter((function(e){return e.visible})).map((function(e){return e.id})))}}},{key:"createExportImageParameters",value:function(e,t,n,r){var i=r&&r.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var a=new R.a({layer:this,scale:Object(T.b)({extent:e,width:t})*i}),o=a.toJSON();a.destroy();var s=!r||!r.rotation||this.version<10.3?{}:{rotation:-r.rotation},u=e&&e.spatialReference,c=u.wkid||JSON.stringify(u.toJSON());o.dpi*=i;var l={};if(null!=r&&r.timeExtent){var h=r.timeExtent.toJSON(),f=h.start,p=h.end;l.time=f&&p&&f===p?""+f:"".concat(null==f?"null":f,",").concat(null==p?"null":p)}else this.timeInfo&&!this.timeInfo.hasLiveData&&(l.time="null,null");return Nt(Nt(Nt({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:t+","+n},o),s),l)}},{key:"fetchImage",value:(r=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={responseType:"image"},i&&i.timestamp&&(a.query=Nt(Nt({},a.query),{},{_ts:i.timestamp})),i&&i.signal&&(a.signal=i.signal),this.customParameters&&Object.keys(this.customParameters).length&&(a.query=Nt(Nt({},this.customParameters),a.query)),o=this.parsedUrl.path+"/export",s=Nt(Nt(Nt({},this.parsedUrl.query),this.createExportImageParameters(t,n,r,i)),{},{f:"image",_ts:this.alwaysRefetch?Date.now():null}),e.abrupt("return",null==s.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(a.query=a.query?Nt(Nt({},s),a.query):s,Object(d.default)(o,a).then((function(e){return e.data})).catch((function(e){if(Object(f.m)(e))throw e;throw new l.a("mapimagelayer:image-fetch-error","Unable to load image: "+o,{error:e})}))):Promise.reject(new l.a("mapimagelayer:dynamiclayer-not-supported","service ".concat(this.url," doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source."),{query:s})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"fetchRecomputedExtents",value:(n=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=Nt(Nt({},t),{},{query:{returnUpdates:!0,f:"json"}}),e.next=4,Object(d.default)(this.url,n);case 4:return r=e.sent,i=r.data,a=i.extent,o=i.fullExtent,s=i.timeExtent,u=a||o,e.abrupt("return",{fullExtent:u&&p.a.fromJSON(u),timeExtent:s&&b.a.fromJSON({start:s[0],end:s[1]})});case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadAll",value:function(){var e=this;return Object(v.a)(this,(function(t){t(e.allSublayers)}))}},{key:"_fetchService",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}));case 2:return e.next=4,Object(d.default)(this.parsedUrl.path,{query:Nt(Nt({f:"json"},this.parsedUrl.query),this.customParameters),signal:t});case 4:n=e.sent,r=n.data,n.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r,this.read(r,{origin:"service",url:this.parsedUrl});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(Object(j.a)(Object(M.a)(Object(S.a)(Object(k.a)(Object(P.a)(Object(A.a)(Object(O.a)(Object(w.a)(Object(x.a)(Object(g.a)(Object(_.a)(Object(I.b)(y.a)))))))))))));Object(r.a)([Object(o.b)()],D.prototype,"alwaysRefetch",void 0),Object(r.a)([Object(o.b)()],D.prototype,"dpi",void 0),Object(r.a)([Object(o.b)()],D.prototype,"gdbVersion",void 0),Object(r.a)([Object(o.b)()],D.prototype,"imageFormat",void 0),Object(r.a)([Object(s.a)("imageFormat",["supportedImageFormatTypes"])],D.prototype,"readImageFormat",null),Object(r.a)([Object(o.b)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],D.prototype,"imageMaxHeight",void 0),Object(r.a)([Object(o.b)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],D.prototype,"imageMaxWidth",void 0),Object(r.a)([Object(o.b)()],D.prototype,"imageTransparency",void 0),Object(r.a)([Object(o.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],D.prototype,"isReference",void 0),Object(r.a)([Object(o.b)({json:{read:!1,write:!1}})],D.prototype,"labelsVisible",void 0),Object(r.a)([Object(o.b)({type:["ArcGISMapServiceLayer"]})],D.prototype,"operationalLayerType",void 0),Object(r.a)([Object(o.b)({json:{read:!1,write:!1}})],D.prototype,"popupEnabled",void 0),Object(r.a)([Object(o.b)()],D.prototype,"sourceJSON",void 0),Object(r.a)([Object(o.b)({json:{write:{ignoreOrigin:!0}}})],D.prototype,"sublayers",void 0),Object(r.a)([Object(c.a)("sublayers",{layers:{type:[C.a]},visibleLayers:{type:[a.a]}})],D.prototype,"writeSublayers",null),Object(r.a)([Object(o.b)({type:["show","hide","hide-children"]})],D.prototype,"listMode",void 0),Object(r.a)([Object(o.b)({json:{read:!1},readOnly:!0,value:"map-image"})],D.prototype,"type",void 0),Object(r.a)([Object(o.b)(m.n)],D.prototype,"url",void 0),D=Object(r.a)([Object(u.a)("esri.layers.MapImageLayer")],D),t.default=D},UBvB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e){e.code.add(r.a(pe||(pe=Rt(["\n    // This is the maximum float value representable as 32bit fixed point,\n    // it is rgba2float(vec4(1)) inlined.\n    const float MAX_RGBA_FLOAT =\n      255.0 / 256.0 +\n      255.0 / 256.0 / 256.0 +\n      255.0 / 256.0 / 256.0 / 256.0 +\n      255.0 / 256.0 / 256.0 / 256.0 / 256.0;\n\n    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)\n    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\n    vec4 float2rgba(const float value) {\n      // Make sure value is in the domain we can represent\n      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\n\n      // Decompose value in 32bit fixed point parts represented as\n      // uint8 rgba components. Decomposition uses the fractional part after multiplying\n      // by a power of 256 (this removes the bits that are represented in the previous\n      // component) and then converts the fractional part to 8bits.\n      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\n\n      // Convert uint8 values (from 0 to 255) to floating point representation for\n      // the shader\n      const float toU8AsFloat = 1.0 / 255.0;\n\n      return fixedPointU8 * toU8AsFloat;\n    }\n\n    // Factors to convert rgba back to float\n    const vec4 RGBA_2_FLOAT_FACTORS = vec4(\n      255.0 / (256.0),\n      255.0 / (256.0 * 256.0),\n      255.0 / (256.0 * 256.0 * 256.0),\n      255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n    );\n\n    float rgba2float(vec4 rgba) {\n      // Convert components from 0->1 back to 0->255 and then\n      // add the components together with their corresponding\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\n      return dot(rgba, RGBA_2_FLOAT_FACTORS);\n    }\n  "]))))}},UFqC:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"clone",value:function(){return new r({url:this.url})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String})],u.prototype,"url",void 0),u=r=Object(i.a)([Object(o.a)("esri.symbols.support.Thumbnail")],u),t.a=u},"UH+o":function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("qatw"),c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).deviationUnit=null,r.geometries=null,r.maxDeviation=null,r}return n}(s.a);Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"deviationUnit",void 0),Object(r.a)([Object(a.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(u.a)(e)})):null}},write:{writer:function(e,t){t.geometries=e.map((function(e){return e.toJSON()}))}}}})],c.prototype,"geometries",void 0),Object(r.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"maxDeviation",void 0),(c=Object(r.a)([Object(o.a)("esri.tasks.support.GeneralizeParameters")],c)).from=Object(i.m)(c),t.a=c},UOZ4:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).level=0,r.levelValue=null,r.resolution=0,r.scale=0,r}return Zt(n,[{key:"clone",value:function(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}}]),n}(u.a);Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],c.prototype,"level",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=r=Object(i.a)([Object(s.a)("esri.layers.support.LOD")],c),t.a=c},Udcy:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p}));var r=n("6S2I"),i=n("zqDF"),a=n("4EHJ"),o=n("LE9a"),s=n("wEd+"),u=n("YZ0+"),c=r.a.getLogger("esri.support.basemapUtils");function l(){return{}}function h(e){for(var t in e){var n=e[t];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[t]}}function f(e,t){var n,r;if("string"==typeof e){if(!(e in s.a)){var a=Object.keys(s.a).map((function(e){return'"'.concat(e,'"')})).join(", ");return c.warn("Unable to find basemap definition for: ".concat(e,". Try one of these: ").concat(a)),null}t&&(r=t[e]),r||(r=u.default.fromId(e),t&&(t[e]=r))}else r=Object(i.m)(u.default,e);return null!=(n=r)&&n.destroyed&&(c.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function p(e){var t=null,n=function(e){return e?!e.loaded&&e.resourceInfo?y(e.resourceInfo.data):{baseLayers:d(e.baseLayers),referenceLayers:d(e.referenceLayers)}:null}(e),r=!n.baseLayers.length;for(var i in s.a){var a=g(n,y(s.a[i]),{mustMatchReferences:r});if("equal"===a){t=i;break}"base-layers-equal"===a&&(t=i)}return t}function d(e){return(o.a.isCollection(e)?e.toArray():e).map(v)}function v(e){return{type:e.type,url:O("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function y(e){return e?{baseLayers:b(e.baseMapLayers.filter((function(e){return!e.isReference}))),referenceLayers:b(e.baseMapLayers.filter((function(e){return e.isReference})))}:null}function b(e){return e.map((function(e){return function(e){var t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:O(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)}))}function g(e,t,n){return null!=e!=(null!=t)?"not-equal":e?m(e.baseLayers,t.baseLayers)?m(e.referenceLayers,t.referenceLayers)?"equal":n.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function m(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!w(e[n],t[n]))return!1;return!0}function w(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function O(e){return e?Object(a.C)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},UhwK:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WZb1")),l=n("N2DF"),h=n("SuVq"),f=n("OvF4"),p=n("NyNm"),d=n("+NQI"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).paths=[],e.type="polyline",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t){var n,r,i,a=null;return e&&!Array.isArray(e)?(a=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),n=e.hasZ,r=e.hasM):a=e,(a=a||[]).length&&a[0]&&null!=a[0][0]&&"number"==typeof a[0][0]&&(a=[a]),(i=a[0]&&a[0][0])&&(void 0===n&&void 0===r?(n=i.length>2,r=!1):void 0===n?n=!r&&i.length>3:void 0===r&&(r=!n&&i.length>3)),{paths:a,spatialReference:t=t||c.a.WGS84,hasZ:n,hasM:r}}},{key:"cache",get:function(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){var e=this.spatialReference,t=Object(d.c)(this);if(!t)return null;var n=new f.a(t);return n.spatialReference=e,n}},{key:"writePaths",value:function(e,t){t.paths=Object(a.a)(this.paths)}},{key:"addPath",value:function(e){if(e){var t=this.paths,n=t.length;if(function(e){return!Array.isArray(e[0])}(e)){for(var r=[],i=0,a=e.length;i<a;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.concat();return this.notifyChange("paths"),this}}},{key:"clone",value:function(){var e=new r;return e.spatialReference=this.spatialReference,e.paths=Object(a.a)(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}},{key:"getPoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=this.paths[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new h.a(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new h.a(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new h.a(n[0],n[1],n[2],n[3],this.spatialReference):new h.a(n[0],n[1],this.spatialReference)}},{key:"insertPoint",value:function(e,t,n){return this._validateInputs(e,t,!0)?(Object(p.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e].splice(t,0,n),this.notifyChange("paths"),this):this}},{key:"removePath",value:function(e){if(!this._validateInputs(e,null))return null;var t=this.paths.splice(e,1)[0],n=this.spatialReference,r=t.map((function(e){return new h.a(e,n)}));return this.notifyChange("paths"),r}},{key:"removePoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=new h.a(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),n}},{key:"setPoint",value:function(e,t,n){return this._validateInputs(e,t)?(Object(p.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e][t]=n,this.notifyChange("paths"),this):this}},{key:"_validateInputs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){var r=this.paths[e];if(n&&(t<0||t>r.length))return!1;if(!n&&(t<0||t>=r.length))return!1}return!0}},{key:"toJSON",value:function(e){return this.write(null,e)}}]),n}(l.a);Object(i.a)([Object(o.b)({readOnly:!0})],v.prototype,"cache",null),Object(i.a)([Object(o.b)({readOnly:!0})],v.prototype,"extent",null),Object(i.a)([Object(o.b)({type:[[[Number]]],json:{write:{isRequired:!0}}})],v.prototype,"paths",void 0),Object(i.a)([Object(u.a)("paths")],v.prototype,"writePaths",null),(v=r=Object(i.a)([Object(s.a)("esri.geometry.Polyline")],v)).prototype.toJSON.isDefaultToJSON=!0,t.a=v},UiC3:function(e,t,n){"use strict";var r=n("fDnD");e.exports=function(e){var t=new r(e).file(/.+/),n={};return t.forEach((function(e){n[e.name]="shp"===e.name.slice(-3).toLowerCase()||"dbf"===e.name.slice(-3).toLowerCase()?e.asNodeBuffer():e.asText()})),n}},"V+VG":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("Mu3I");function i(e){return e?a(e.rings,e.hasZ):null}function a(e,t){if(!e||!e.length)return null;for(var n=[],i=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0],s=0,u=e.length;s<u;s++){var c=o(e[s],t,a);c&&i.push(c)}if(i.sort((function(e,n){var r=e[2]-n[2];return 0===r&&t&&(r=e[4]-n[4]),r})),i.length){var l=6*i[0][2];n[0]=i[0][0]/l,n[1]=i[0][1]/l,t&&(l=6*i[0][4],n[2]=0!==l?i[0][3]/l:0),(n[0]<a[0]||n[0]>a[1]||n[1]<a[2]||n[1]>a[3]||t&&(n[2]<a[4]||n[2]>a[5]))&&(n.length=0)}if(!n.length){var h=e[0]&&e[0].length?function(e,t){for(var n=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0],a=0,o=0,s=0,u=0,c=0,l=e.length;c<l-1;c++){var h=e[c],f=e[c+1];if(h&&f){n[0]=h[0],n[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(n[2]=h[2],i[2]=f[2]);var p=Object(r.c)(n,i);if(p){a+=p;var d=Object(r.d)(h,f);o+=p*d[0],s+=p*d[1],t&&d.length>2&&(u+=p*d[2])}}}return a>0?t?[o/a,s/a,u/a]:[o/a,s/a]:e.length?e[0]:null}(e[0],t):null;if(!h)return null;n[0]=h[0],n[1]=h[1],t&&h.length>2&&(n[2]=h[2])}return n}function o(e,t,n){for(var r=0,i=0,a=0,o=0,s=0,u=0;u<e.length;u++){var c=e[u],l=zt(c,3),h=l[0],f=l[1],p=l[2],d=e[(u+1)%e.length],v=zt(d,3),y=v[0],b=v[1],g=v[2],m=h*b-y*f;o+=m,r+=(h+y)*m,i+=(f+b)*m,t&&c.length>2&&d.length>2&&(a+=(p+g)*(m=h*g-y*p),s+=m),h<n[0]&&(n[0]=h),h>n[1]&&(n[1]=h),f<n[2]&&(n[2]=f),f>n[3]&&(n[3]=f),t&&(p<n[4]&&(n[4]=p),p>n[5]&&(n[5]=p))}if(o>0&&(o*=-1),s>0&&(s*=-1),!o)return null;var w=[r,i,.5*o];return t&&(w[3]=a,w[4]=.5*s),w}},V9wi:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("N2DF")),l=n("SuVq"),h=n("OvF4"),f=n("NyNm");function p(e){return function(t,n){return null==t?n:null==n?t:e(t,n)}}var d=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).points=[],e.type="multipoint",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t){if(!e&&!t)return null;var n={};Array.isArray(e)?(n.points=e,n.spatialReference=t):function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?n.spatialReference=e:(e.points&&(n.points=e.points),e.spatialReference&&(n.spatialReference=e.spatialReference),e.hasZ&&(n.hasZ=e.hasZ),e.hasM&&(n.hasM=e.hasM));var r=n.points&&n.points[0];return r&&(void 0===n.hasZ&&void 0===n.hasM?(n.hasZ=r.length>2,n.hasM=!1):void 0===n.hasZ?n.hasZ=r.length>3:void 0===n.hasM&&(n.hasM=r.length>3)),n}},{key:"cache",get:function(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){var e=this.points;if(!e.length)return null;for(var t,n,r,i,a=new h.a,o=this.hasZ,s=this.hasM,u=o?3:2,c=e[0],l=p(Math.min),f=p(Math.max),d=zt(c,2),v=d[0],y=d[1],b=zt(c,2),g=b[0],m=b[1],w=0,O=e.length;w<O;w++){var j=e[w],_=zt(j,2),x=_[0],k=_[1];if(v=l(v,x),y=l(y,k),g=f(g,x),m=f(m,k),o&&j.length>2){var S=j[2];t=l(t,S),r=f(r,S)}if(s&&j.length>u){var M=j[u];n=l(n,M),i=f(i,M)}}return a.xmin=v,a.ymin=y,a.xmax=g,a.ymax=m,a.spatialReference=this.spatialReference,o?(a.zmin=t,a.zmax=r):(a.zmin=null,a.zmax=null),s?(a.mmin=n,a.mmax=i):(a.mmin=null,a.mmax=null),a}},{key:"writePoints",value:function(e,t){t.points=Object(a.a)(this.points)}},{key:"addPoint",value:function(e){return Object(f.a)(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}},{key:"clone",value:function(){var e={points:Object(a.a)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new r(e)}},{key:"getPoint",value:function(e){if(!this._validateInputs(e))return null;var t=this.points[e],n={x:t[0],y:t[1],spatialReference:this.spatialReference},r=2;return this.hasZ&&(n.z=t[2],r=3),this.hasM&&(n.m=t[r]),new l.a(n)}},{key:"removePoint",value:function(e){if(!this._validateInputs(e))return null;var t=new l.a(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}},{key:"setPoint",value:function(e,t){return this._validateInputs(e)?(Object(f.a)(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}},{key:"toJSON",value:function(e){return this.write(null,e)}},{key:"_validateInputs",value:function(e){return null!=e&&e>=0&&e<this.points.length}}]),n}(c.a);Object(i.a)([Object(o.b)({readOnly:!0})],d.prototype,"cache",null),Object(i.a)([Object(o.b)()],d.prototype,"extent",null),Object(i.a)([Object(o.b)({type:[[Number]],json:{write:{isRequired:!0}}})],d.prototype,"points",void 0),Object(i.a)([Object(u.a)("points")],d.prototype,"writePoints",null),(d=r=Object(i.a)([Object(s.a)("esri.geometry.Multipoint")],d)).prototype.toJSON.isDefaultToJSON=!0,t.a=d},VJTW:function(e,t,n){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=r},VJrH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("zlDU"),i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Wt(this,e),this.major=t,this.minor=n,this._context=r}return Zt(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major)throw new r.a((this._context&&this._context+":")+"unsupported-version","Required major ".concat(this._context&&this._context+" ","version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("."),a=zt(i,2),o=a[0],s=a[1],u=/^\s*\d+\s*$/;if(!o||!o.match||!o.match(u))throw new r.a((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(u))throw new r.a((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var c=parseInt(o,10),l=parseInt(s,10);return new e(c,l,n)}}]),e}()},VLTf:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return g}));var r=n("srIe"),i=n("4EHJ"),a=n("/PL2"),o=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],s=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),u=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=/(.*)\/(\d+)\/?$/i;function l(e){return!!s.test(e)}function h(e){var t=Object(i.J)(e),n=t.path.match(s)||t.path.match(u);if(!n)return null;var r=zt(n,5),a=r[1],o=r[2],c=r[3],l=r[4],h=o.indexOf("/");return{title:p(-1!==h?o.slice(h+1):o),serverType:c,sublayer:null!=l&&""!==l?parseInt(l,10):null,url:{path:a}}}function f(e){var t=Object(i.J)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function p(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function d(e,t){var n=[];if(e){var i=h(e);Object(r.k)(i)&&i.title&&n.push(i.title)}if(t){var a=p(t);n.push(a)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function v(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),n=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&n}function y(e,t){return e?Object(i.H)(Object(i.G)(e,t)):e}function b(e){var t=e.url;if(!t)return{url:t};t=Object(i.G)(t,e.logger);var n,a=Object(i.J)(t),o=h(a.path);if(Object(r.k)(o))null!=o.sublayer&&null==e.layer.layerId&&(n=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=f(a.path);Object(r.k)(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:Object(i.H)(t),layerId:n}}function g(e,t,n,r,o){Object(a.f)(t,r,"url",o),r.url&&null!=e.layerId&&(r.url=Object(i.y)(r.url,n,e.layerId.toString()))}function m(e){if(!e)return!1;var t=e.toLowerCase(),n=-1!==t.indexOf("/services/"),r=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return n&&(r||i||a)}},VVTu:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return f}));var r=n("sq3C"),i={r:240,g:165,b:45,a:1},a=function(e,t){var n=e.getAttribute("HexColor");"W"===e.getAttribute("musym")&&(n=c);var i=Object(r.a)(n);return{color:{r:i.r,g:i.g,b:i.b,a:t},style:"solid",opacity:100}},o=function(){return{style:"solid",color:i,opacity:100,width:1}},s=function(e,t,n){return{type:"text",text:e,color:t?i:{r:0,g:0,b:0,a:n},font:{size:"12px",family:"arial",weight:"bold"}}},u=function(e){return{style:"solid",color:{r:105,g:105,b:105,a:e},opacity:100,width:1}},c="#7ab6f5",l=function(){return{color:{r:0,g:0,b:0,a:1},style:"diagonal-cross",opacity:100}},h=function(){return{style:"solid",color:{r:0,g:255,b:0,a:1},opacity:100,width:2}},f=function(e,t){var n={r:0,g:0,b:0,a:t};switch(null!==e.attributes.drclassdcd?e.attributes.drclassdcd.toLowerCase():null){case"excessively drained":n={r:140,g:81,b:10};break;case"somewhat excessively drained":n={r:216,g:179,b:101};break;case"well drained":n={r:246,g:232,b:195};break;case"moderately well drained":n={r:255,g:255,b:255};break;case"somewhat poorly drained":n={r:199,g:234,b:229};break;case"poorly drained":n={r:90,g:180,b:172};break;case"very poorly drained":n={r:1,g:102,b:94};break;default:n={r:192,g:192,b:192}}return{color:{r:n.r,g:n.g,b:n.b,a:t},style:"solid",opacity:100}}},"VW+2":function(e,t,n){"use strict";var r=n("7Nfj"),i=Array.prototype.splice;function a(e){e.length=0}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;Wt(this,e),this._pool=new r.a(Array,void 0,a,n,t)}return Zt(e,[{key:"acquire",value:function(){return this._pool.acquire()}},{key:"copy",value:function(e){var t=this.acquire();return e.unshift(0,0),i.apply(t,e),e.splice(0,2),t}},{key:"release",value:function(e){this._pool.release(e)}},{key:"prune",value:function(){this._pool.prune(0)}}],[{key:"acquire",value:function(){return s.acquire()}},{key:"copy",value:function(e){return s.copy(e)}},{key:"release",value:function(e){return s.release(e)}},{key:"prune",value:function(){s.prune()}}]),e}(),s=new o(100);t.a=o},VcUc:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return p}));var r=n("4GrV"),i=n("jWBI"),a=n("lNcg"),o=n("krU8"),s=function(){return Math.random().toString(36).substr(2,9)},u=function(e,t,n){var r=Object(a.a)(t,n);return e.symbol=r,e.symbol.outline.color=r.outline.color,e.attributes.symbol=r,e},c=function(e,t,n){var r=e.toJSON();return r.symbol=Object(a.a)(t,n),r.attributes.symbol=r.symbol,r.toJSON=void 0,r.geometry=new o.e({rings:e.geometry.rings,spatialReference:e.geometry.spatialReference}).asJSON(),r},l=function(e,t){var n=e.toJSON();return n.symbol=Object(a.b)(t),n.attributes.symbol=n.symbol,n.toJSON=void 0,n.geometry=new o.f({paths:e.geometry.paths,spatialReference:e.geometry.spatialReference}).asJSON(),n},h=function(e,t,n){var r=e.graphic.toJSON();return r.attributes={id:s(),symbol:r.symbol,geometryType:e.tool,radius:0},r.geometry=Object(o.a)(e.graphic).asJSON(),(r=u(r,t,n)).attributes.radius=r.geometry.radius,r},f=function(e,t,n,r){var i=e.graphic.toJSON();return i.attributes={id:s(),symbol:i.symbol,geometryType:e.tool,radius:0},i.geometry=Object(o.c)(e.graphic.geometry,t).asJSON(),(i=u(i,n,r)).attributes.geometryType="circle",i.attributes.radius=i.geometry.radius,i},p=function(e,t,n,r){var s=(new i.a).toJSON(),c=e.geometry.centroid,l=e.attributes.id,h=Object(a.a)(n,r);return s.geometry=Object(o.c)(c,t).asJSON(),s.attributes={id:l,symbol:h,geometryType:"circle",radius:t},(s=u(s,n,r)).attributes.geometryType="circle",s.attributes.radius=s.geometry.radius,s},d=function(e,t){var n=e.toJSON();n.symbol=t;var r=n.attributes.id?n.attributes.id:s();return n.attributes={id:r,geometryType:"point",symbol:n.symbol},n.geometry.type="point",n},v=function(e){return JSON.parse(e).map((function(e){var t=JSON.parse(e);t.symbol=void 0;var n=i.a.fromJSON(t);return"circle"===t.attributes.geometryType&&(n.geometry=new r.b({rings:t.geometry.rings,spatialReference:{wkid:t.geometry.spatialReference.wkid}})),"polyline"===t.attributes.geometryType&&(n.geometry=new r.c({paths:t.geometry.paths,spatialReference:{wkid:t.geometry.spatialReference.wkid}})),n}))}},VcYX:function(e,t,n){"use strict";n.d(t,"a",(function(){return yn})),n.d(t,"b",(function(){return bn}));var r=n("bRsD"),i=n("phGV"),a=n("pO5D"),o=n("wSAH"),s=n("s7YA"),u=n("6S2I"),c=n("zqDF"),l=n("WbKI"),h=n("Stxv"),f=n("04ZG"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nYOO")),d=n("9MzC"),v=n("JV2H"),y=(n("G48n"),n("r0DZ")),b=n("N5XI"),g=n("cCpn"),m=n("dV4Z"),w=n("/quj"),O=n("Jv1m"),j=n("Ehpe"),_=n("EyXx"),x=n("srIe"),k=n("zlDU"),S=n("/CmD"),M=n("WZb1"),I=n("SuVq"),T=n("zm0L"),A=n("LE9a"),C=n("IDUf"),E=n("SFah"),P=n("21Ip"),R=n("YyOG"),D=n("ss0y"),L=n("AiS/"),N=n("N+cL"),F=n("DXYb"),z=n("Tcmu"),V=n("Ibpv"),G=n("jWBI"),U=n("XnA0"),B=n("KMCJ"),q=n("nvBr"),H=n("f/qv"),W=(n("gvqN"),n("YZ0+")),J=n("Udcy"),Z={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z;for(var n in t)if(t[n].indexOf(e)>-1)return n}function Y(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;return"string"==typeof e&&t.indexOf(e)>-1?r=e:e instanceof W.default&&(r=Object(J.d)(e)),n?r||"gray":r}var X=function(){function e(t){Wt(this,e),this.name=null,this.label=null,this.description=null,this.supportedBasemaps=null,this.basemapGroups=null,this.schemes=null;var n=t.name,r=t.label,i=t.description,a=t.schemes;this.name=n,this.label=r,this.description=i,this.schemes=a;var o=t.basemapGroups||Z,s=[];if(o)for(var u in o)s=s.concat(o[u]);this.supportedBasemaps=s,this.basemapGroups=o}return Zt(e,[{key:"isBasemapSupported",value:function(e){var t=Y(e,this.supportedBasemaps);return!!(t&&this.supportedBasemaps.indexOf(t)>-1)}},{key:"getRawSchemes",value:function(e){var t=function(e,t,n){var r=null,i=null;if(t&&(r=Y(t,e,!1))){var a=K(r);Object(x.k)(a)&&(i=a)}return!r&&n&&(r="dark"===n?"dark-gray":"gray",i=n),r||i||(r="gray",i="light"),{basemapId:r,basemapTheme:i}}(this.supportedBasemaps,e.basemap,e.basemapTheme),n=t.basemapId,r=t.basemapTheme,i=r;if(n){var a=K(n,this.basemapGroups);Object(x.k)(a)&&(i=a)}var o=e.geometryType;"multipoint"===o?o="point":"mesh"===o&&(o="polygon");var s=this.schemes[o]||this.schemes.default;return{schemesInfo:Object(H.a)(s[i]),basemapId:n,basemapTheme:r}}}]),e}(),Q=n("qRWG");function $(e,t){return Math.ceil(function(e){var t=e.width,n=e.height,r=e.pixelSizeAt(e.toMap(Object(Q.f)(.5*t,.5*n),{exclude:[]}));if(r<=0&&(r=e.pixelSizeAt(e.toMap(Object(Q.f)(.5*t,.95*n),{exclude:[]})))<=0){var i=e.camera.position.clone();i.z=0,r=2*e.pixelSizeAt(i)}return r}(t)*Object(Q.h)(Object(Q.k)(e)))}[].concat(["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"]).concat(["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]);var ee=function(e){var t={default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}},n=new Map;for(var r in t)n.set(r,new X(t[r]));return n}();function te(e){var t=function(e){var t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:ee.get("default")});if(t){var n=t.schemesInfo,r=t.basemapId,i=t.basemapTheme;return{primaryScheme:ne(e,n.primary),secondarySchemes:n.secondary.map((function(t){return ne(e,t)})).filter(Boolean),basemapId:r,basemapTheme:i}}}function ne(e,t){var n="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":return function(e,t){return{color:new q.a(e.color),outline:{color:new q.a(e.outline.color),width:e.outline.width},size:t?$(e.size,t):e.size,opacity:1}}({color:t.color,outline:Nt({},t.outline),size:t.size},n);case"polyline":return function(e,t){return{color:new q.a(e.color),width:t?$(e.width,t):e.width,opacity:1}}({color:t.color,width:t.width},n);case"polygon":return function(e,t){return{color:new q.a(e.color),outline:{color:new q.a(e.outline.color),width:e.outline.width},size:t?$(e.size,t):e.size,opacity:e.opacity}}({size:t.size,color:t.color,outline:Nt({},t.outline),opacity:t.opacity},n);case"mesh":return function(e){return{color:new q.a(e.color),opacity:e.opacity}}({color:t.color,opacity:t.opacity})}}Object.freeze({__proto__:null,getThemes:function(e){return t=e,n=[],ee.forEach((function(e){e.isBasemapSupported(t)&&n.push({name:e.name,label:e.label,description:e.description,basemaps:Bt(e.supportedBasemaps)})})),n;var t,n},getSchemes:te,cloneScheme:function(e){if(e){var t=Nt({},e);return t.color&&(t.color=new q.a(t.color)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new q.a(t.outline.color),width:t.outline.width}),t}}});var re=n("ag7Y"),ie=n("pdg3"),ae=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).autoNavigate=null,r.filter=null,r.getResults=null,r.getSuggestions=null,r.maxResults=null,r.maxSuggestions=null,r.minSuggestCharacters=null,r.outFields=null,r.placeholder="",r.popupEnabled=null,r.popupTemplate=null,r.prefix="",r.resultGraphicEnabled=null,r.resultSymbol=null,r.suggestionsEnabled=null,r.suffix="",r.withinViewEnabled=!1,r.zoomScale=null,r}return n}(Object(ie.a)(re.a));Object(a.a)([Object(l.b)()],ae.prototype,"autoNavigate",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"filter",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"getResults",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"getSuggestions",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"maxResults",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"maxSuggestions",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"minSuggestCharacters",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"outFields",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"placeholder",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"popupEnabled",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"popupTemplate",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"prefix",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"resultGraphicEnabled",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"resultSymbol",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"suggestionsEnabled",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"suffix",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"withinViewEnabled",void 0),Object(a.a)([Object(l.b)()],ae.prototype,"zoomScale",void 0);var oe=ae=Object(a.a)([Object(f.a)("esri.widgets.Search.SearchSource")],ae),se=n("OvF4"),ue=(n("4GrV"),n("SaAm")),ce=u.a.getLogger("esri.widgets.Search.support.geometryUtils");function le(e,t){var n,r;if(!t)return ce.error("missing-parameter: view is missing."),Promise.reject(new k.a("searchgeometryutils:missing-parameter","view is missing."));if(!e)return ce.error("missing-parameter: point is missing."),Promise.reject(new k.a("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);var i=null==t||null==(n=t.map)?void 0:n.ground;return i&&i.layers.length?i.queryElevation(e,{cache:null==(r=t.basemapTerrain)?void 0:r.elevationQueryCache}).then((function(e){return e.geometry})):Promise.resolve(e)}function he(e){if(Object(x.j)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function fe(e,t,n){return Object(x.j)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?de(e,t,n):void 0}function pe(e,t,n){return Object(x.j)(e)||Object(x.j)(t)?null:de(e.center,t,n)}function de(e,t,n){var r=e.hasZ?e.z:void 0;return t&&t.map?(n?Object(ue.a)(t,n):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new se.a({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}var ve,ye=n("Ehki"),be=n("RlM3"),ge=n("gEht"),me=/https?:\/\/services.*\.arcgis\.com/i,we=/(?:\{([^}]+)\})/g,Oe=u.a.getLogger("esri.widgets.Search.support.layerSearchUtils");function je(e,t){var n=e.filter,r=e.withinViewEnabled,i=t&&t.extent;return n&&n.geometry||(r&&i?i:void 0)}function _e(e){return e&&-1!==e.indexOf("*")}function xe(e){return ke.apply(this,arguments)}function ke(){return(ke=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=4;break}return e.next=4,t.load();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){var t,n,r;return null!=(t=null==e||null==(n=e.capabilities)||null==(r=n.query)?void 0:r.supportsPagination)&&t}function Me(e){return e.displayField||e.layer.displayField||function(e){var t="";if(e){var n=e.fields;n&&n.some((function(e){return"string"===e.type&&(t=e.name,!0)}))}return t}(e.layer)}function Ie(e,t){return!(!e||!t)&&t.every((function(t){return Te(e,t)}))}function Te(e,t){return!!e.getField(t)}function Ae(e){return e.replace(/\'/g,"''")}function Ce(e,t){var n=t&&t.where;return n?"(".concat(e,") AND (").concat(n,")"):e}function Ee(e,t,n,r,i){var a=t.definitionExpression,o="";if(e){var s=me.test(t.url)&&function(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(e)?"N":"";n&&n.forEach((function(n){var a=t.getField(n),u="function"==typeof t.getFieldDomain&&t.getFieldDomain(n),c=(u&&"coded-value"===u.type?function(e,t,n){var r=null,i=e.codedValues;return i&&i.some((function(e){var i=e.name,a=n?i:i.toLowerCase();return(n?t:t.toLowerCase())===a&&(r=e.code.toString(),!0)})),r}(u,e,i):null)||e||null;if(null!==c){var l=function(e,t,n,r,i){var a=t.type,o=t.name;if("string"===a||"date"===a||"global-id"===a)return Ce(i?"".concat(o," = ").concat(n,"'").concat(e,"'"):"UPPER(".concat(o,") LIKE ").concat(n,"'%").concat(e.toUpperCase(),"%'"),r);if("oid"===a||"small-integer"===a||"integer"===a||"single"===a||"double"===a){var s=Number(e);return isNaN(s)?null:Ce("".concat(o," = ").concat(s),r)}return Ce("".concat(o," = ").concat(e),r)}(c,a,s,r,i);l&&(o+=function(e,t){return e?" OR (".concat(t,")"):"(".concat(t,")")}(o,l))}}))}return a?"(".concat(a,") AND (").concat(o,")"):o}function Pe(e,t,n){var r=e.sourceLayer,i=e.attributes,a="function"==typeof r.getFieldDomain&&r.getFieldDomain(n);if(t)return Object(v.a)(t,i);if(n&&i){var o=r.getField(n),s=function(e,t){return e[Object.keys(e).find((function(e){return e.toLowerCase()===t.toLowerCase()}))]}(i,n);return null==s?"":a&&"coded-value"===a.type?function(e,t){var n=null,r=e.codedValues;return r&&r.length&&r.some((function(e){return e.code===t&&(n=e.name,!0)})),n}(a,s):"date"===(null==o?void 0:o.type)?Object(be.b)(new Date(s)):"number"==typeof s?s.toString():"string"!=typeof s?"":s.trim()}return""}var Re=ve=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).displayField=null,e.exactMatch=null,e.orderByFields=null,e.searchFields=null,e.searchTemplate=null,e.suggestionTemplate=null,e.getResults=function(t,n){return function(e,t){var n=e.exactMatch,r=void 0!==n&&n,i=e.location,a=e.maxResults,o=e.spatialReference,s=e.source,u=e.sourceIndex,c=e.suggestResult,l=e.view,h=s.layer,f=s.filter,p=s.zoomScale,d=l&&l.scale,v=je(s,l),y=t&&t.signal;return xe(h).then((function(){var e=h.popupTemplate;return e?e.getRequiredFields(h.fields):null})).then((function(e){var t,n,b=h.objectIdField,g=h.returnZ,m=Me(s);if(!Te(h,m))throw Oe.error("invalid-field: displayField is invalid."),new k.a("getResults():invalid-field","displayField is invalid.");var w=s.outFields||(e&&e.length?e:[m]),O=_e(w);if(-1!==w.indexOf(b)||O||w.push(b),!O&&!Ie(h,w))throw Oe.error("invalid-field: outField is invalid."),new k.a("getResults():invalid-field","outField is invalid.");var j=h.createQuery(),_=s.orderByFields;if(_&&(j.orderByFields=_),o){j.outSpatialReference=o;var S=1/Object(ge.f)(o);S&&(j.maxAllowableOffset=S)}var M="mesh"===h.geometryType||"multipatch"===h.geometryType,I=(null==(t=h.capabilities)||null==(n=t.data)?void 0:n.supportsZ)&&!M;if(j.returnZ=I&&!1!==g,j.returnGeometry=!0,j.multipatchOption=M?"xyFootprint":null,w&&(j.outFields=w),i)j.geometry=i;else if(c.key)j.objectIds=[parseInt(c.key,10)];else{var T=s.searchFields||[m];if(!Ie(h,T))throw Oe.error("invalid-field: search field is invalid."),new k.a("getResults():invalid-field","search field is invalid.");if(Se(h)&&(j.num=a),v&&(j.geometry=v),!c.text.trim())return[];var A=s.prefix,C=void 0===A?"":A,E=s.suffix,P=void 0===E?"":E,R=Ee(Ae("".concat(C).concat(c.text).concat(P)),h,T,f,r);if(!R)return[];j.where=R}return h.queryFeatures(j,{signal:y}).then((function(e){return function(e,t,n,r,i,a,o){return e.features.map((function(e){return function(e,t,n,r,i,a,o){var s=e.clone(),u=e.sourceLayer,c=u&&u.objectIdField,l=c&&e.attributes[c],h=Pe(e,n.searchTemplate,i),f=fe(s.geometry,t,a),p="number"==typeof o?pe(Object(H.a)(f),t,o):f,d=e.clone();return Object(x.k)(p)&&(d.geometry=ye.a.fromExtent(p)),{extent:p,target:d,feature:s,key:l,name:h,sourceIndex:r}}(e,t,n,r,i,a,o)}))}(e,l,s,u,m,d,p)}))}))}(Nt({source:$t(e)},t),n)},e.getSuggestions=function(t,n){return function(e,t){var n=e.source,r=e.spatialReference,i=e.view,a=e.suggestTerm,o=e.maxSuggestions,s=e.sourceIndex,u=n.layer,c=n.filter,l=t&&t.signal,h=je(n,i);return xe(u).then((function(){if(!Se(u))return[];var e=Me(n),t=n.searchFields||[e],i=[];n.suggestionTemplate?n.suggestionTemplate.replace(we,(function(e,t){return i.push(t),e})):i.push(e);var f=_e(i);-1!==i.indexOf(u.objectIdField)||f||i.push(u.objectIdField);var p=Te(u,e),d=f||Ie(u,i),v=Ie(u,t);if(!p)throw Oe.error("invalid-field: displayField is invalid."),new k.a("getSuggestions():invalid-field","displayField is invalid.");if(!d)throw Oe.error("invalid-field: outField is invalid."),new k.a("getSuggestions():invalid-field","outField is invalid.");if(!v)throw Oe.error("invalid-field: search field is invalid."),new k.a("getSuggestions():invalid-field","search field is invalid.");var y=u.createQuery(),b=n.orderByFields;if(b&&(y.orderByFields=b),y.outSpatialReference=r,y.returnGeometry=!1,y.num=o,y.outFields=i,h&&(y.geometry=h),!a.trim())return[];var g=n.prefix,m=void 0===g?"":g,w=n.suffix,O=void 0===w?"":w,j=Ee(Ae("".concat(m).concat(a).concat(O)),u,t,c,!1);return j?(y.where=j,u.queryFeatures(y,{signal:l}).then((function(t){return function(e,t,n,r){return e.features.map((function(e){return function(e,t,n,r){var i=e.sourceLayer,a=e.attributes[i.objectIdField];return{text:Pe(e,t.suggestionTemplate,r),key:a,sourceIndex:n}}(e,t,n,r)}))}(t,n,s,e)}))):[]}))}(Nt({source:$t(e)},t),n)},e}return Zt(n,[{key:"layer",set:function(e){this._set("layer",e),e&&e.load().catch((function(){}))}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(e){void 0!==e?this._override("name",e):this._clearOverride("name")}},{key:"clone",value:function(){return new ve({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(H.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?Object(H.a)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}},{key:"_getFirstStringField",value:function(){var e=this.layer,t="";return e&&e.fields&&e.fields.some((function(e){return"string"===e.type&&(t=e.name,!0)})),t}},{key:"_getDisplayField",value:function(){return this.displayField||this.layer.displayField||this._getFirstStringField()}},{key:"_getSearchFieldsString",value:function(){var e=this.layer,t=this.searchFields;return e.loaded?": "+(t||[this._getDisplayField()]).map((function(t){var n=e.getField(t);return n&&n.alias||t})).join(", "):""}},{key:"_getLayerTitle",value:function(){var e=this.layer;if(e){var t=e.title;return t?"".concat(t).concat(this._getSearchFieldsString()):void 0}}}]),n}(oe);Object(a.a)([Object(l.b)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Re.prototype,"displayField",void 0),Object(a.a)([Object(l.b)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Re.prototype,"exactMatch",void 0),Object(a.a)([Object(l.b)({value:null})],Re.prototype,"layer",null),Object(a.a)([Object(l.b)()],Re.prototype,"name",null),Object(a.a)([Object(l.b)({type:[String],json:{write:!0}})],Re.prototype,"orderByFields",void 0),Object(a.a)([Object(l.b)()],Re.prototype,"searchFields",void 0),Object(a.a)([Object(l.b)()],Re.prototype,"searchTemplate",void 0),Object(a.a)([Object(l.b)()],Re.prototype,"suggestionTemplate",void 0);var De=Re=ve=Object(a.a)([Object(f.a)("esri.widgets.Search.LayerSearchSource")],Re),Le={type:String,json:{read:{source:"token"},write:{target:"token"}}},Ne=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).address=null,r.apiKey=null,r.categories=null,r.countryCode=null,r.forStorage=null,r.location=null,r.locationType=null,r.magicKey=null,r.maxLocations=null,r.outFields=null,r.outSpatialReference=null,r.searchExtent=null,r}return n}(re.a);Object(a.a)([Object(l.b)({type:Object,json:{write:!0}})],Ne.prototype,"address",void 0),Object(a.a)([Object(l.b)(Le)],Ne.prototype,"apiKey",void 0),Object(a.a)([Object(l.b)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Ne.prototype,"categories",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],Ne.prototype,"countryCode",void 0),Object(a.a)([Object(l.b)({type:Boolean,json:{write:!0}})],Ne.prototype,"forStorage",void 0),Object(a.a)([Object(l.b)({type:I.a,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],Ne.prototype,"location",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],Ne.prototype,"locationType",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],Ne.prototype,"magicKey",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],Ne.prototype,"maxLocations",void 0),Object(a.a)([Object(l.b)({type:[String],json:{write:{writer:function(e,t){t.outFields=e?e.join(","):null}}}})],Ne.prototype,"outFields",void 0),Object(a.a)([Object(l.b)({type:M.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ne.prototype,"outSpatialReference",void 0),Object(a.a)([Object(l.b)({type:se.a,json:{write:{writer:function(e,t){var n=e?e.shiftCentralMeridian():null;t.searchExtent=n}}}})],Ne.prototype,"searchExtent",void 0),(Ne=Object(a.a)([Object(f.a)("esri.tasks.support.AddressToLocationsParameters")],Ne)).from=Object(c.m)(Ne);var Fe=Ne,ze=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).apiKey=null,r.location=null,r.locationType=null,r.outSpatialReference=null,r}return n}(re.a);Object(a.a)([Object(l.b)(Le)],ze.prototype,"apiKey",void 0),Object(a.a)([Object(l.b)({type:I.a,json:{write:{writer:function(e,t){var n=e?e.clone().normalize():null;t.location=void 0!==n?n:null}}}})],ze.prototype,"location",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],ze.prototype,"locationType",void 0),Object(a.a)([Object(l.b)({type:M.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ze.prototype,"outSpatialReference",void 0),(ze=Object(a.a)([Object(f.a)("esri.tasks.support.LocationToAddressParameters")],ze)).from=Object(c.m)(ze);var Ve=ze,Ge=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).apiKey=null,r.categories=null,r.countryCode=null,r.location=null,r.maxSuggestions=null,r.outSpatialReference=null,r.searchExtent=null,r.text=null,r}return n}(re.a);Object(a.a)([Object(l.b)(Le)],Ge.prototype,"apiKey",void 0),Object(a.a)([Object(l.b)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Ge.prototype,"categories",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],Ge.prototype,"countryCode",void 0),Object(a.a)([Object(l.b)({type:I.a,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],Ge.prototype,"location",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],Ge.prototype,"maxSuggestions",void 0),Object(a.a)([Object(l.b)({type:M.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ge.prototype,"outSpatialReference",void 0),Object(a.a)([Object(l.b)({type:se.a,json:{write:{writer:function(e,t){var n=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(n)}}}})],Ge.prototype,"searchExtent",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],Ge.prototype,"text",void 0),(Ge=Object(a.a)([Object(f.a)("esri.tasks.support.SuggestLocationsParameters")],Ge)).from=Object(c.m)(Ge);var Ue=Ge;function Be(e){var t=null==e?void 0:e.scale;return"number"==typeof t&&t<=3e5?e.get("extent.center"):null}function qe(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function He(e,t){var n=e.filter,r=e.withinViewEnabled,i=t&&t.extent;return fe(n&&n.geometry,t,t&&t.scale)||(r&&i?i:void 0)}function We(e,t){return e.map((function(e){return function(e,t){var n=t.key,r=t.scale,i=t.sourceIndex,a=t.view,o=t.zoomScale,s=t.defaultZoomScale,u=e.attributes,c=e.extent,l=e.location,h=e.address,f=new G.a({geometry:l,attributes:u}),p=c||l,d=fe(p,a,r),v="number"==typeof o?pe(d,a,o):"number"==typeof s&&"point"===p.type?pe(d,a,s):d,y=h||(l?"".concat(l.x,",").concat(l.y):""),b=f.clone();return Object(x.k)(v)&&(b.geometry=ye.a.fromExtent(v)),{extent:v,feature:f,target:b,key:n,name:y,sourceIndex:i}}(e,t)}))}var Je=n("r88o"),Ze=n("Cduq"),Ke=n("kglp"),Ye=n("Lqtk"),Xe=n("u3Ia"),Qe=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).address=null,r.attributes=null,r.extent=null,r.location=null,r.score=null,r}return n}(re.a);Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],Qe.prototype,"address",void 0),Object(a.a)([Object(l.b)({type:Object,json:{write:!0}})],Qe.prototype,"attributes",void 0),Object(a.a)([Object(l.b)({type:se.a,json:{write:!0}})],Qe.prototype,"extent",void 0),Object(a.a)([Object(l.b)({type:I.a,json:{write:!0}})],Qe.prototype,"location",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],Qe.prototype,"score",void 0);var $e=Qe=Object(a.a)([Object(f.a)("esri.tasks.support.AddressCandidate")],Qe);function et(e){var t=e.data;if(!t)return[];var n=t.candidates,r=t.spatialReference;return n?n.map((function(e){if(e){var t,n=e.extent,i=e.location,a=!n||(t=n)&&"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax;return function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y}(i)&&a?(n&&(n.spatialReference=r),i.spatialReference=r,$e.fromJSON(e)):void 0}})):[]}var tt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).addresses=null,r.categories=null,r.countryCode=null,r.locationType=null,r.outSpatialReference=null,r}return n}(re.a);Object(a.a)([Object(l.b)({type:[Object],json:{read:{reader:function(e){return e&&e.records?e.records.map((function(e){return e.attributes})):null}},write:{writer:function(e,t){var n=[];Array.isArray(e)&&e.forEach((function(e){n.push({attributes:e})})),t.addresses={records:n}}}}})],tt.prototype,"addresses",void 0),Object(a.a)([Object(l.b)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],tt.prototype,"categories",void 0),Object(a.a)([Object(l.b)({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],tt.prototype,"countryCode",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],tt.prototype,"locationType",void 0),Object(a.a)([Object(l.b)({type:M.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],tt.prototype,"outSpatialReference",void 0),(tt=Object(a.a)([Object(f.a)("esri.tasks.support.AddressesToLocationsParameters")],tt)).from=Object(c.m)(tt);var nt=tt;function rt(e){var t=e.data;if(!t)return[];var n=t.locations,r=t.spatialReference;return n?n.map((function(e){var t=e.location;return t&&(t.spatialReference=r),$e.fromJSON(e)})):[]}function it(e){var t=e.data;if(t){var n=t.address,r=t.location;return $e.fromJSON({address:n&&n.Match_addr||"",attributes:n||{},location:r,score:100})}}var at=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).isCollection=null,r.magicKey=null,r.text=null,r}return n}(re.a);Object(a.a)([Object(l.b)({type:Boolean,json:{write:!0}})],at.prototype,"isCollection",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],at.prototype,"magicKey",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],at.prototype,"text",void 0);var ot=at=Object(a.a)([Object(f.a)("esri.tasks.support.SuggestionCandidate")],at);function st(e){var t=e.data;if(!t)return[];var n=t.suggestions;return n?n.map((function(e){return new ot(e)})):[]}var ut=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).outSpatialReference=null,r.url=null,r}return Zt(n,[{key:"addressToLocations",value:function(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);var n,r=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fe.from(n),i=Object(Xe.c)(t),a=n.toJSON(),o=a.address,s=Pt(a,["address"]),u=Nt(Nt(Nt({},o),s),{},{f:"json"}),c=Object(Xe.b)(Nt(Nt({},i.query),u)),l=Object(Xe.a)(c,r),h=i.path+"/findAddressCandidates",e.abrupt("return",Object(Ye.default)(h,l).then(et));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}},{key:"suggestLocations",value:function(e,t){var n,r=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Xe.c)(t),a=Nt(Nt({},(n=Ue.from(n)).toJSON()),{},{f:"json"}),o=Object(Xe.b)(Nt(Nt({},i.query),a)),s=Object(Xe.a)(o,r),u=i.path+"/suggest",e.abrupt("return",Object(Ye.default)(u,s).then(st));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}},{key:"addressesToLocations",value:function(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);var n,r=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nt.from(n),i=Object(Xe.c)(t),a=Nt(Nt({},n.toJSON()),{},{f:"json"}),o=Object(Xe.b)(Nt(Nt({},i.query),a)),s=Object(Xe.a)(o,r),u=i.path+"/geocodeAddresses",e.abrupt("return",Object(Ye.default)(u,s).then(rt));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}},{key:"locationToAddress",value:function(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);var n,r=Nt(Nt({},this.requestOptions),t);return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ve.from(n),i=Object(Xe.c)(t),a=Nt(Nt({},n.toJSON()),{},{f:"json"}),o=Object(Xe.b)(Nt(Nt({},i.query),a)),s=Object(Xe.a)(o,r),u=i.path+"/reverseGeocode",e.abrupt("return",Object(Ye.default)(u,s).then(it));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this.url,e,r)}}]),n}(Ke.a);Object(a.a)([Object(l.b)({type:M.a})],ut.prototype,"outSpatialReference",void 0),Object(a.a)([Object(l.b)()],ut.prototype,"url",void 0);var ct,lt=ut=Object(a.a)([Object(f.a)("esri.tasks.Locator")],ut),ht=ct=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).apiKey=null,e.categories=null,e.countryCode=null,e.defaultZoomScale=null,e.locator=null,e.locationType=null,e.name="",e.placeholder="",e.searchTemplate="",e.singleLineFieldName=null,e.suggestionsEnabled=null,e.zoomScale=null,e.getResults=function(t,n){return function(e,t){return e.location?function(e,t){var n=e.source,r=e.spatialReference,i=e.location,a=e.sourceIndex,o=e.view,s=n.apiKey,u=n.locator,c=n.zoomScale,l=n.defaultZoomScale,h=o&&o.scale,f=t&&t.signal,p=new Ve;return p.location=i,s&&(p.apiKey=s),r&&(p.outSpatialReference=r),u.locationToAddress(p,{signal:f}).then((function(e){return We([e],{sourceIndex:a,scale:h,view:o,zoomScale:c,defaultZoomScale:l})}))}(e,t):function(e,t){var n=e.source,r=e.suggestResult,i=e.spatialReference,a=e.view,o=e.maxResults,s=e.sourceIndex,u=n&&n.zoomScale,c=n&&n.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);var l="".concat(!r.key&&n.prefix?n.prefix:"").concat(r.text).concat(!r.key&&n.suffix?n.suffix:""),h=new Fe,f=n.apiKey,p=n.locator,d=a&&a.scale,v=He(n,a),y=t&&t.signal;if(f&&(h.apiKey=f),!p)return Promise.resolve(null);n.categories&&(h.categories=n.categories),n.locationType&&(h.locationType=n.locationType),i&&(h.outSpatialReference=i);var b=Be(a);b&&(h.location=b),h.maxLocations=o,v&&(h.searchExtent=Object(x.q)(v)),n.countryCode&&(h.countryCode=n.countryCode);var g=r.key;return g&&(h.magicKey=g),h.address={},h.address[n.singleLineFieldName||"Single Line Input"]=l,n.outFields&&(h.outFields=n.outFields),p.addressToLocations(h,{signal:y}).then((function(e){return We(e,{key:g,scale:d,sourceIndex:s,view:a,zoomScale:u,defaultZoomScale:c})}))}(e,t)}(Nt({source:$t(e)},t),n)},e.getSuggestions=function(t,n){return function(e,t){var n=e.source,r=e.spatialReference,i=e.view,a=e.suggestTerm,o=e.maxSuggestions,s=e.sourceIndex,u=new Ue,c=n.apiKey,l=n.locator,h=He(n,i),f=t&&t.signal;if(!l)return Promise.resolve(null);c&&(u.apiKey=c),n.categories&&(u.categories=n.categories),r&&(u.outSpatialReference=r);var p=Be(i);if(p&&(u.location=p),!a.trim())return Promise.resolve(null);var d=n.prefix,v=void 0===d?"":d,y=n.suffix,b=void 0===y?"":y;return u.text="".concat(v).concat(a).concat(b),h&&(u.searchExtent=Object(x.q)(h)),u.maxSuggestions=o,n.countryCode&&(u.countryCode=n.countryCode),l.suggestLocations(u,{signal:f}).then((function(e){return function(e,t){return e.map((function(e){return function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)}))}(e,s)}))}(Nt({source:$t(e)},t),n)},e}return Zt(n,[{key:"readLocator",value:function(e,t){var n=t.url;return n?new lt({url:n}):null}},{key:"writeLocator",value:function(e,t){t.url=e?e.url:null}},{key:"clone",value:function(){return new ct({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(H.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?Object(H.a)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}}]),n}(oe);Object(a.a)([Object(l.b)()],ht.prototype,"apiKey",void 0),Object(a.a)([Object(l.b)()],ht.prototype,"categories",void 0),Object(a.a)([Object(l.b)()],ht.prototype,"countryCode",void 0),Object(a.a)([Object(l.b)({json:{write:!0}})],ht.prototype,"defaultZoomScale",void 0),Object(a.a)([Object(l.b)({type:lt})],ht.prototype,"locator",void 0),Object(a.a)([Object(Je.a)("locator",["url"])],ht.prototype,"readLocator",null),Object(a.a)([Object(Ze.a)("locator")],ht.prototype,"writeLocator",null),Object(a.a)([Object(l.b)()],ht.prototype,"locationType",void 0),Object(a.a)([Object(l.b)({json:{write:!0}})],ht.prototype,"name",void 0),Object(a.a)([Object(l.b)({json:{write:!0}})],ht.prototype,"placeholder",void 0),Object(a.a)([Object(l.b)()],ht.prototype,"searchTemplate",void 0),Object(a.a)([Object(l.b)({json:{write:!0}})],ht.prototype,"singleLineFieldName",void 0),Object(a.a)([Object(l.b)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],ht.prototype,"suggestionsEnabled",void 0),Object(a.a)([Object(l.b)({json:{write:!0}})],ht.prototype,"zoomScale",void 0);var ft=ht=ct=Object(a.a)([Object(f.a)("esri.widgets.Search.LocatorSearchSource")],ht),pt=(n("N2DF"),n("l4ZG")),dt=(n("V9wi"),n("UhwK")),vt=n("ACSY"),yt=(n("vaBp"),n("Fpx9"),n("UH+o"),n("2jrz"),n("1lHr"),n("xazm"),n("jksI"),n("rJHQ"));n("fQPN"),n("Nvf0"),n("GeAh"),n("5SEJ");var bt=u.a.getLogger("esri.widgets.support.geolocationUtils"),gt={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function mt(){return(t=Object(o.a)("esri-geolocation"))||bt.warn("geolocation-unsupported","Geolocation unsupported."),t&&((e=window.isSecureContext)||bt.warn("insecure-context","Geolocation requires a secure origin."),e);var e,t}function wt(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}var Ot=u.a.getLogger("esri.widgets.Search.SearchViewModel"),jt="highlight",_t=A.a.ofType({key:function(e){return e.layer?"layer":"locator"},base:oe,typeMap:{layer:De,locator:ft}}),xt=M.a.WGS84,kt=/<(?:.|\s)*?>/g,St=function(e){Kt(u,e);var t,n,r,i,a,s=Xt(u);function u(e){var t;return Wt(this,u),(t=s.call(this,e))._handles=new y.a,t._gotoController=null,t._searching=null,t.autoNavigate=!0,t.autoSelect=!0,t.defaultPopupTemplate=null,t.defaultSources=new _t,t.defaultSymbol=new N.a({url:Object(D.a)(Object(o.a)("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),t.includeDefaultSources=!0,t.maxInputLength=128,t.maxResults=6,t.maxSuggestions=6,t.messages=null,t.minSuggestCharacters=1,t.popupEnabled=!0,t.popupTemplate=null,t.portal=L.a.getDefault(),t.resultCount=null,t.resultGraphicEnabled=!0,t.resultGraphic=null,t.results=null,t.selectedSuggestion=null,t.searchAllEnabled=!0,t.selectedResult=null,t.sources=new _t,t.suggestionDelay=150,t.suggestionCount=null,t.suggestions=null,t.suggestionsEnabled=!0,t.view=null,t}return Zt(u,[{key:"initialize",value:function(){var e=this,t=function(){var t=Ut(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)("esri/widgets/Search/t9n/Search");case 2:n=t.sent,e.messages=n,e.defaultPopupTemplate=new E.a({title:n.searchResult,content:"{Match_addr}"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),this._handles.add([Object(b.on)(this,["defaultSources","sources"],"change",(function(){return e.notifyChange("allSources")})),Object(b.init)(this,["includeDefaultSources","view","portal"],(function(){return e._update()})),Object(C.c)(t)])}},{key:"destroy",value:function(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}},{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}},{key:"allPlaceholder",get:function(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder},set:function(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){var e=this.sources,t=this.defaultSources,n=this.includeDefaultSources,r="function"==typeof n?n.call(null,{sources:e,defaultSources:t}):n?t.concat(e):e,i=this._get("allSources")||new _t;return i.removeAll(),i.addMany(r.filter(Boolean)),i}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||mt()},set:function(e){if(void 0!==e){var t=mt();if(e&&!t){var n=new k.a("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Ot.error(n)}this._override("locationEnabled",e&&t)}else this._clearOverride("locationEnabled")}},{key:"placeholder",get:function(){var e=this.allSources,t=this.activeSourceIndex,n=this.allPlaceholder;if(-1===t)return n;var r=e.getItemAt(t);return r?r.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}},{key:"clear",value:function(){this.searchTerm=""}},{key:"clearGraphics",value:function(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}},{key:"search",value:function(e,t){var n=this;this.emit("search-start"),this.clearGraphics();var r=this._createSuggestionForSearch(e),i=this.when().then((function(){return n._getResultsFromSources(r,t).then((function(e){var t={activeSourceIndex:n.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};n._formatResponse(t,e,r);var i=n._getFirstResult(t.results),a=(r.location&&i?i.name:r.text).replace(kt,"");return n._set("searchTerm",a),(r.key&&"number"==typeof r.sourceIndex||r.location)&&n._set("selectedSuggestion",r),n._set("results",t.results),n._set("resultCount",t.results.reduce((function(e,t){return e+t.results.length}),0)),n.emit("search-complete",t),n._selectFirstResult(i).then((function(){return t}))}))})).then((function(e){return n._clearSearching(),e}),(function(e){throw n._clearSearching(),e}));return this._searching=i,this.notifyChange("state"),i}},{key:"searchNearby",value:function(e){var t=this;if(!this.locationEnabled){var n=new k.a("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Ot.error(n),Promise.reject(n)}var r=function(e){return e||(e=gt),new Promise((function(t,n){setTimeout((function(){return n(new k.a("geolocation:timeout","getting the current geolocation position timed out"))}),15e3),navigator.geolocation.getCurrentPosition(t,n,e)}))}().then((function(n){return function(e,t){var n=e.view;return function(e,t,n){if(!t)return Promise.resolve(e);var r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(Object(pt.b)(e)):function(e){if(_.a.geometryServiceUrl)return Promise.resolve(_.a.geometryServiceUrl);var t=L.a.getDefault();return t.load(e).catch((function(){})).then((function(){return t.get("helperServices.geometry.url")}))}(n).then((function(t){if(!t)throw new k.a("geometry-service:missing-url","Geometry service URL is missing");var i=new vt.a({geometries:[e],outSpatialReference:r});return Object(yt.a)(t,i,n).then((function(e){return e[0]}))}))}(function(e){var t=e&&e.coords;return t?new I.a({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){var t=e&&e.coords||{};return e?{coords:{accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed},timestamp:e.timestamp}:e}(e.position)),n,t)}({position:n,view:t.view},e)})).then((function(n){return t.search(n,e)}));return this._searching=r,this.notifyChange("state"),r.catch((function(){})).then((function(){return t._clearSearching()})),r}},{key:"select",value:function(e){var t=this;if(this.clearGraphics(),!e){var n=new k.a("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Ot.error(n),Promise.reject(n)}var r=this.view,i=wt(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),a=this.allSources.getItemAt(i);if(!a){var o=new k.a("select:missing-source","Cannot select without a source.",{source:a});return Ot.error(o),Promise.reject(o)}var s=a instanceof De?this._getLayerSourcePopupTemplate(a):a.popupTemplate,u=a.resultSymbol||this._getDefaultSymbol(e),c=wt(a,"resultGraphicEnabled")?a.resultGraphicEnabled:this.resultGraphicEnabled,l=wt(a,"autoNavigate")?a.autoNavigate:this.autoNavigate,h=wt(a,"popupEnabled")?a.popupEnabled:this.popupEnabled,f=h?s||this.popupTemplate||this.defaultPopupTemplate:null,p=e.feature;if(!p){var v=new k.a("select:missing-feature","Cannot select without a feature.",{feature:p});return Ot.error(v),Promise.reject(v)}var y=p.attributes,b=p.geometry,g=p.layer,m=p.sourceLayer,w=he(b),O={layerViewQuery:this._getLayerView(p),elevationQuery:r&&Object(x.k)(w)?le(w,r).catch((function(){return w})):Promise.resolve(w)};return Object(d.j)(O).then((function(n){var o=n.layerViewQuery.value,s=n.elevationQuery.value;u instanceof V.a&&(u.text=e.name);var d=r&&l?e.target||e.extent:null;return(Object(x.k)(d)?t._goToSearchResult(d):Promise.resolve()).then((function(){var n,l=o?p:new G.a({geometry:b,symbol:u,attributes:y,layer:g,sourceLayer:m,popupTemplate:f}),d=h&&(null==(n=t.view)?void 0:n.popup),v=d&&l.getEffectivePopupTemplate(d.defaultPopupTemplateEnabled);return v&&r.popup.open({features:[l],location:s}),o&&Object(U.a)(o)&&!v&&t._highlightFeature({graphic:l,layerView:o}),!o&&c&&r&&r.graphics.push(l),t._set("selectedResult",e),t._set("resultGraphic",l),t.emit("select-result",{result:e,source:a,sourceIndex:i}),e}))}))}},{key:"suggest",value:function(e,t,n){var r=this,i=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:i}),this._suggestTimer(t,n).then((function(){return r._suggestImmediate(i,n).then((function(e){return r._set("suggestions",e.results),r._set("suggestionCount",e.results.reduce((function(e,t){return e+t.results.length}),0)),r.emit("suggest-complete",e),e}))}))}},{key:"when",value:(a=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.whenFalseOnce)(this,"updating");case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_update",value:(i=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.portal,n=this.view,!this.includeDefaultSources){e.next=10;break}if(r=this._updatingPromise=Object(d.j)([null==t?void 0:t.load(),null==n?void 0:n.when()]),!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:return this.notifyChange("updating"),e.next=8,r;case 8:if(r===this._updatingPromise){e.next=10;break}return e.abrupt("return");case 10:if(this._updatingPromise=null,this.notifyChange("updating"),i=Object(b.whenOnce)(this,"messages"),e.t0=this.destroyed,e.t0){e.next=18;break}return this._handles.add(i),e.next=17,i;case 17:this._updateDefaultSources();case 18:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_clearSearching",value:function(){this._searching=null,this.notifyChange("state")}},{key:"_convertHelperServices",value:function(){var e,t,n=this,r=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;return r?r.map((function(e){var t;if(!1!==e.placefinding){var r=_.a.apiKey&&qe(e.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,i=ft.fromJSON(Nt(Nt({},e),r)),a=null==(t=i.locator)?void 0:t.url;return(qe(a)||function(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}(a)||function(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}(a))&&i.set({singleLineFieldName:"SingleLine",outFields:i.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:i.placeholder||n.messages.placeholder,defaultZoomScale:"number"==typeof i.defaultZoomScale?i.defaultZoomScale:2500}),i.singleLineFieldName?i:void 0}})).filter(Boolean):[]}},{key:"_getLayerSources",value:function(e,t){var n,r=this,i=null==(n=this.view)?void 0:n.map;return e.map((function(e){var n=i.findLayerById(e.id);if(n){var a=r._getLayerJSON(e),o=De.fromJSON(a);return o.placeholder=t,r._getLayer(n,a).then((function(e){o.layer=e})),o}})).filter(Boolean).toArray()}},{key:"_getTableSources",value:function(e,t){var n,r=this,i=null==(n=this.view)?void 0:n.map;return e.map((function(e){var n=i.findTableById(e.id);if(n){var a=r._getLayerJSON(e),o=De.fromJSON(a);return o.placeholder=t,r._getLayer(n,a).then((function(e){o.layer=e})),o}})).filter(Boolean).toArray()}},{key:"_convertApplicationProperties",value:function(){var e,t,n,r=null==(e=this.view)?void 0:e.map,i=null==r||null==(t=r.applicationProperties)||null==(n=t.viewing)?void 0:n.search;if(!i)return[];var a=i.enabled,o=i.hintText,s=i.layers,u=i.tables;return a?[].concat(Bt(this._getLayerSources(s,o)),Bt(this._getTableSources(u,o))):[]}},{key:"_getSubLayer",value:function(e,t){return e.load().then((function(){if(!e.allSublayers)return Promise.reject();var n=e.allSublayers.find((function(e){return e.id===t.subLayer}));return n?n.createFeatureLayer():Promise.reject()}))}},{key:"_getBuildingSubLayer",value:(r=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if("building-component"===(null==(r=t.allSublayers.find((function(e){return e.id===n.subLayer})))?void 0:r.type)){e.next=7;break}e.t0=Promise.reject(),e.next=17;break;case 7:return e.next=9,r.load();case 9:if(null!=r.associatedLayer){e.next=13;break}e.t1=Promise.reject(),e.next=16;break;case 13:return e.next=15,r.associatedLayer.load();case 15:e.t1=r;case 16:e.t0=e.t1;case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"_getLayer",value:function(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((function(){var t=new k.a("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Ot.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}},{key:"_getLayerJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():e}},{key:"_updateDefaultSources",value:function(){var e=this.defaultSources,t=this.includeDefaultSources;e.removeAll(),t&&e.addMany([].concat(Bt(this._convertApplicationProperties()),Bt(this._convertHelperServices()))),this.notifyChange("allSources")}},{key:"_abortGoTo",value:function(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}},{key:"_clear",value:function(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}},{key:"_closePopup",value:function(){var e,t=null==(e=this.view)?void 0:e.popup,n=this.resultGraphic;if(t&&n){var r=t.selectedFeature;r&&r===n&&t.close()}}},{key:"_suggestTimer",value:function(e,t){var n=null!=e?e:this.suggestionDelay;return Object(d.a)(n,null,t&&t.signal)}},{key:"_createLocationForSearch",value:function(e){return e instanceof G.a?he(e.geometry):e instanceof I.a?e:Array.isArray(e)&&2===e.length?new I.a({longitude:e[0],latitude:e[1]}):null}},{key:"_createSuggestionForSearch",value:function(e){if(e&&wt(e,"key")&&wt(e,"text")&&wt(e,"sourceIndex"))return e;var t=this._createLocationForSearch(e),n="string"==typeof e?e:this.searchTerm,r=this.selectedSuggestion,i=this.selectedResult,a=!e&&r&&i;return a&&r.key===i.key&&r.sourceIndex===i.sourceIndex||a&&r.location?r:{location:Object(x.q)(t),text:t?"":n,sourceIndex:null,key:null}}},{key:"_getFirstResult",value:function(e){var t=null;return e&&e.some((function(e){var n=e.results[0],r=!!n;return r&&(t=n),r})),t}},{key:"_selectFirstResult",value:function(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}},{key:"_suggestImmediate",value:function(e,t){var n=this;return this.when().then((function(){return n._getSuggestionsFromSources(e,t)})).then((function(t){var r={activeSourceIndex:n.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return n._formatResponse(r,t),r}))}},{key:"_formatSourceResponse",value:function(e,t,n){var r=t&&t.value||[],i=t&&t.error,a=this.allSources.getItemAt(n);i?(e.errors.push({sourceIndex:n,source:a,error:i}),e.numErrors++):(e.results.push({sourceIndex:n,source:a,results:r}),e.numResults+=r.length)}},{key:"_formatResponse",value:function(e,t,n){var r=this;if(t)if(-1===e.activeSourceIndex){var i=n&&wt(n,"sourceIndex")&&-1!==n.sourceIndex?n.sourceIndex:void 0;t.forEach((function(t,n){r._formatSourceResponse(e,t,void 0!==i?i:n)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}},{key:"_getResultsFromSources",value:function(e,t){var n=this,r=this.allSources,i=!e.location&&wt(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,a=[];if(!r.length){var o=new k.a("search:no-sources-defined","At least one source is required.",{allSources:r});return Ot.error(o),Promise.reject(o)}return-1===i?r.forEach((function(r,i){a.push(n._getResultsFromSource(e,i,t))})):a.push(this._getResultsFromSource(e,i,t)),Object(d.j)(a)}},{key:"_getSuggestionsFromSources",value:function(e,t){var n=this,r=this.allSources,i=this.activeSourceIndex,a=[];if(!r.length){var o=new k.a("suggest:no-sources-defined","At least one source is required.",{allSources:r});return Ot.error(o),Promise.reject(o)}return-1===i?r.forEach((function(r,i){a.push(n._getSuggestionsFromSource(e,i,t))})):a.push(this._getSuggestionsFromSource(e,i,t)),Object(d.j)(a)}},{key:"_getResultsFromSource",value:function(e,t,n){var r,i=this.allSources.getItemAt(t),a=e.location,o=void 0===a?null:a,s=(null==(r=this.view)?void 0:r.spatialReference)||xt,u=wt(i,"maxResults")?i.maxResults:this.maxResults,c=!!(i instanceof De&&wt(i,"exactMatch"))&&i.exactMatch,l=this.view;return i.getResults({view:l,sourceIndex:t,location:o,suggestResult:e,spatialReference:s,exactMatch:c,maxResults:u},n)}},{key:"_getSuggestionsFromSource",value:function(e,t,n){var r=this.allSources.getItemAt(t),i=wt(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,a=e.length,o=wt(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&a>=o){var s,u=(null==(s=this.view)?void 0:s.spatialReference)||xt,c=wt(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,l=this.view;return r.getSuggestions({view:l,sourceIndex:t,suggestTerm:e,spatialReference:u,maxSuggestions:c},n)}return Promise.resolve(null)}},{key:"createDefaultSymbol",value:function(e,t){return"point"===t?new z.a({color:e.color,size:e.size,outline:{color:e.outline.color,width:e.outline.width}}):"polyline"===t?new P.a({color:e.color,width:e.width}):"polygon"===t?new F.a({color:e.color,outline:{color:e.outline.color,width:e.outline.width}}):void 0}},{key:"_getLayerSourcePopupTemplate",value:function(e){var t=e.layer;if(t)return wt(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}},{key:"_getSourceIndexOfResult",value:function(e){var t=null;return this.results.some((function(n){return n.results.some((function(r){return r===e&&(t=n.sourceIndex,!0)}))})),t}},{key:"_goToSearchResult",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!!t,this._abortGoTo(),r=Object(d.d)(),this._gotoController=r,i={target:{target:t},options:{animate:n,signal:r.signal}},e.next=7,this.callGoTo(i);case 7:this._gotoController=null;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_getDefaultSymbol",value:function(e){var t,n,r,i=null==(t=this.view)||null==(n=t.map)||null==(r=n.basemap)?void 0:r.id,a=Object(x.i)(e,"feature","geometry","type");if(Object(x.k)(a)){var o=te({basemap:i,geometryType:a})||te({basemap:"topo",geometryType:a}),s=o&&o.primaryScheme;if(s)return s.color&&wt(s,"opacity")&&(s.color.a=s.opacity),this.createDefaultSymbol(s,a)}return this.defaultSymbol}},{key:"_removeHighlight",value:function(){this._handles.remove(jt)}},{key:"_getLayerView",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,t&&n&&"building-component"!==t.layer.type){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return r=t.layer,e.next=6,n.when();case 6:return e.abrupt("return",n.whenLayerView(r));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_highlightFeature",value:function(e){var t=e.graphic,n=e.layerView,r=t.attributes,i=t.layer.objectIdField,a=n.highlight(r&&r[i]||t);this._handles.add(a,jt)}}]),u}(Object(B.a)(T.a.EventedMixin(S.a)));St.ALL_INDEX=-1,Object(a.a)([Object(l.b)({readOnly:!0,value:null})],St.prototype,"activeSource",null),Object(a.a)([Object(l.b)()],St.prototype,"activeSourceIndex",null),Object(a.a)([Object(l.b)()],St.prototype,"allPlaceholder",null),Object(a.a)([Object(l.b)({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],St.prototype,"allSources",null),Object(a.a)([Object(l.b)()],St.prototype,"autoNavigate",void 0),Object(a.a)([Object(l.b)()],St.prototype,"autoSelect",void 0),Object(a.a)([Object(l.b)()],St.prototype,"defaultPopupTemplate",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"defaultSources",void 0),Object(a.a)([Object(l.b)()],St.prototype,"defaultSymbol",void 0),Object(a.a)([Object(l.b)()],St.prototype,"includeDefaultSources",void 0),Object(a.a)([Object(l.b)()],St.prototype,"locationEnabled",null),Object(a.a)([Object(l.b)()],St.prototype,"maxInputLength",void 0),Object(a.a)([Object(l.b)()],St.prototype,"maxResults",void 0),Object(a.a)([Object(l.b)()],St.prototype,"maxSuggestions",void 0),Object(a.a)([Object(l.b)()],St.prototype,"messages",void 0),Object(a.a)([Object(l.b)()],St.prototype,"minSuggestCharacters",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"placeholder",null),Object(a.a)([Object(l.b)()],St.prototype,"popupEnabled",void 0),Object(a.a)([Object(l.b)({type:E.a})],St.prototype,"popupTemplate",void 0),Object(a.a)([Object(l.b)({type:L.a})],St.prototype,"portal",void 0),Object(a.a)([Object(l.b)()],St.prototype,"resultCount",void 0),Object(a.a)([Object(l.b)()],St.prototype,"resultGraphicEnabled",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"resultGraphic",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"results",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"selectedSuggestion",void 0),Object(a.a)([Object(l.b)()],St.prototype,"searchAllEnabled",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"selectedResult",void 0),Object(a.a)([Object(l.b)()],St.prototype,"searchTerm",null),Object(a.a)([Object(l.b)({type:_t})],St.prototype,"sources",void 0),Object(a.a)([Object(l.b)({readOnly:!0,dependsOn:["allSources.length","updating"]})],St.prototype,"state",null),Object(a.a)([Object(l.b)()],St.prototype,"suggestionDelay",void 0),Object(a.a)([Object(l.b)()],St.prototype,"suggestionCount",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"suggestions",void 0),Object(a.a)([Object(l.b)()],St.prototype,"suggestionsEnabled",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],St.prototype,"updating",null),Object(a.a)([Object(l.b)()],St.prototype,"view",void 0),Object(a.a)([Object(l.b)()],St.prototype,"clear",null);var Mt=St=Object(a.a)([Object(f.a)("esri.widgets.Search.SearchViewModel")],St),It=n("h1D1"),Tt=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).messages=null,i.showMoreResultsOpen=!1,i.viewModel=null,i}return Zt(n,[{key:"render",value:function(){var e={"esri-search-result-renderer__more-results--show-more-results":this.showMoreResultsOpen};return Object(O.a)("div",{class:"esri-search-result-renderer esri-widget"},Object(O.a)("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",e)},this.renderSearchResultName(),this.renderMoreResults()))}},{key:"renderMoreResults",value:function(){return Object(O.a)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}},{key:"renderSearchResultName",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.selectedResult,n=t&&t.name||"";return Object(O.a)("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},n)}},{key:"renderMoreResultsLists",value:function(){var e,t=this,n=null==(e=this.viewModel)?void 0:e.results;if(this.viewModel.resultCount<2)return null;var r=n.map((function(e){return t.renderMoreResultsList(e)}));return Object(O.a)("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},r)}},{key:"renderMoreResultsButton",value:function(){var e=this.messages;return this.viewModel.resultCount<2?null:Object(O.a)("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},Object(O.a)("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}},{key:"renderMoreResultsHeader",value:function(e,t){return Object(O.a)("div",{key:"esri-search-result-renderer__header-"+t,class:"esri-search-result-renderer__more-results-list-header"},e)}},{key:"renderMoreResultsList",value:function(e){var t,n,r=this,i=e.results,a=i.length,o=!!a,s=null==(t=this.viewModel)?void 0:t.selectedResult,u=1===a&&i[0]===s,c=this._getSourceName(e.source,e.sourceIndex),l=(null==(n=this.viewModel)?void 0:n.results.length)>1&&!u?this.renderMoreResultsHeader(c,e.sourceIndex):null,h=o&&i.map((function(e,t){return r.renderMoreResultsListItem(e,t)})),f=o&&!u?Object(O.a)("ul",{key:"esri-search-result-renderer__list-"+e.sourceIndex},h):null;return o?Object(O.a)("div",{key:"esri-search-result-renderer__results-"+e.sourceIndex},l,f):null}},{key:"renderMoreResultsListItem",value:function(e,t){return e!==this.get("viewModel.selectedResult")?Object(O.a)("li",{key:"esri-search-result-renderer__list-item-"+t},Object(O.a)("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}},{key:"_showMoreResultsClick",value:function(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;var t=this.get("viewModel.view.popup");t&&t.reposition()}},{key:"_selectResultClick",value:function(e){e.preventDefault(),this.viewModel&&this.viewModel.select(e.currentTarget["data-result"])}},{key:"_getSourceName",value:function(e,t){return t===Mt.ALL_INDEX?this.messages.all:e.name}}]),n}(j.a);Object(a.a)([Object(l.b)(),Object(m.a)("esri/widgets/Search/t9n/Search")],Tt.prototype,"messages",void 0),Object(a.a)([Object(l.b)()],Tt.prototype,"showMoreResultsOpen",void 0),Object(a.a)([Object(l.b)()],Tt.prototype,"viewModel",void 0),Object(a.a)([Object(It.a)()],Tt.prototype,"_showMoreResultsClick",null),Object(a.a)([Object(It.a)()],Tt.prototype,"_selectResultClick",null);var At=Tt=Object(a.a)([Object(f.a)("esri.widgets.Search.SearchResultRenderer")],Tt),Ct=/<[a-z/][\s\S]*>/i,Et=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._activeMenuItemIndex=-1,i._handles=new y.a,i._inputNode=null,i._menuItemCount=0,i._sourceMenuButtonNode=null,i._sourceListNode=null,i._suggestionListNode=null,i._searchResultRenderer=new At,i._relatedTarget=null,i._locateFailed=null,i.activeMenu="none",i.activeSource=null,i.activeSourceIndex=null,i.allPlaceholder=null,i.allSources=null,i.autoNavigate=null,i.autoSelect=null,i.defaultSources=null,i.disabled=!1,i.goToOverride=null,i.iconClass="esri-icon-search",i.includeDefaultSources=null,i.label=void 0,i.locationEnabled=null,i.maxResults=null,i.maxSuggestions=null,i.messages=null,i.messagesCommon=null,i.minSuggestCharacters=null,i.popupEnabled=null,i.popupTemplate=null,i.portal=null,i.resultGraphic=null,i.resultGraphicEnabled=null,i.results=null,i.searchAllEnabled=null,i.searchTerm=null,i.selectedResult=null,i.sources=null,i.suggestions=null,i.suggestionsEnabled=null,i.view=null,i.viewModel=new Mt,i.own(Object(b.watch)($t(i),"searchTerm",(function(e){(e&&"warning"===i.activeMenu||!e&&!i.get("viewModel.selectedSuggestion.location"))&&(i.activeMenu="none")})),Object(b.on)($t(i),"viewModel.allSources","change",(function(){return i._watchSourceChanges()})),Object(b.init)($t(i),"activeMenu",(function(){return i._resetActiveMenuItemIndex()})),Object(b.init)($t(i),"viewModel.defaultPopupTemplate",(function(e){e&&(e.content=i._renderSearchResultsContent.bind($t(i)))}))),i}return Zt(n,[{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}},{key:"displayedSearchTerm",get:function(){return(""+this.viewModel.searchTerm).trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}},{key:"clear",value:function(){}},{key:"focus",value:function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))}},{key:"blur",value:function(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),this.emit("search-blur"))}},{key:"search",value:function(e){var t=this;this.activeMenu="none",this._cancelSuggest(),this._cancelSearch();var n=Object(d.d)(),r=n.signal;return this._searchController=n,this.viewModel.search(e,{signal:r}).catch((function(e){if(t._searchController===n)return t.activeMenu="none",t._searchController=null,e})).then((function(e){if(t._searchController===n)return t.activeMenu=e.numResults?"none":"warning",t._searchController=null,e}))}},{key:"suggest",value:function(e){var t=this;this._cancelSuggest();var n=Object(d.d)(),r=n.signal;return this._suggestController=n,this.viewModel.suggest(e,null,{signal:r}).then((function(e){if(t._suggestController===n)return t._suggestController=null,e.numResults&&(t.activeMenu="suggestion"),t._scrollToTopSuggestion(),e})).catch((function(){if(t._suggestController===n)return t._suggestController=null,null}))}},{key:"render",value:function(){var e=this.viewModel.state,t={"esri-disabled":"disabled"===e,"esri-widget--disabled":this.disabled};return Object(O.a)("div",{class:this.classes("esri-search esri-widget",t)},"loading"===e?this.renderLoader():this.renderContainer())}},{key:"renderSubmitButton",value:function(){var e=this.messages;return Object(O.a)("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-search"}))}},{key:"renderWarningMenu",value:function(){return Object(O.a)("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},Object(O.a)("div",{class:"esri-search__warning-body"},this.renderWarning()))}},{key:"renderSourceMenuButton",value:function(){var e=this.messages,t=this.activeMenu,n=this.sourceMenuId,r=this.sourceMenuButtonId,i=this.viewModel,a=i.activeSourceIndex;return i.allSources.length>1?Object(O.a)("button",{id:r,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":n,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onblur:this._sourcesButtonBlur,afterCreate:g.i,"data-node-ref":"_sourceMenuButtonNode"},Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),Object(O.a)("span",{class:"esri-search__source-name"},this._getSourceName(a))):null}},{key:"renderSourcesList",value:function(){var e=this,t=this.viewModel,n=t.allSources,r=t.searchAllEnabled,i=this._activeMenuItemIndex,a=this.activeMenu,o=this.sourceMenuId,s=this.sourceMenuButtonId,u="source"===a&&i>-1?this._buildId("source-item",i):null;return n.length>1?Object(O.a)("ul",{"aria-activedescendant":u,"aria-labelledby":s,id:o,role:"menu",bind:this,afterCreate:g.i,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},r?this.renderSource(Mt.ALL_INDEX):null,n.map((function(t,n){return e.renderSource(n)})).toArray()):null}},{key:"renderSourcesMenu",value:function(){return this.viewModel.allSources.length>1?Object(O.a)("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null}},{key:"renderLoader",value:function(){var e=this.messages,t=this.messagesCommon;return Object(O.a)("div",{class:"esri-widget__loader",key:"base-loader"},Object(O.a)("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),Object(O.a)("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle),Object(O.a)("span",{class:"esri-widget__loader-text"},t.loading))}},{key:"renderContainer",value:function(){var e=this.viewModel,t=e.allSources,n=e.state,r=this.activeMenu,i={"esri-search--multiple-sources":t.length>1,"esri-search--loading":"loading"===n,"esri-search--searching":"searching"===n,"esri-search--warning":"warning"===r,"esri-search--sources":"source"===r,"esri-search--show-suggestions":"suggestion"===r};return Object(O.a)("div",{class:this.classes(i,"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}},{key:"renderClearButton",value:function(){return this.searchTerm?Object(O.a)("button",{bind:this,class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-close"})):null}},{key:"renderLocationGroup",value:function(){var e=this.messages,t=this.locationEnabled,n=this.displayedSearchTerm,r="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return t&&!n?Object(O.a)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},Object(O.a)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",r?"esri-menu__list-item--focus":null)},Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",e.useCurrentLocation)):null}},{key:"renderInput",value:function(){var e=this.activeMenu,t=this.locationEnabled,n=this.displayedSearchTerm,r=this.messages,i=this.suggestionsMenuId,a=this.inputId,o=this._activeMenuItemIndex,s=this.viewModel,u=s.maxInputLength,c=s.placeholder,l=s.searchTerm,h=s.suggestionCount,f=!((!t||n)&&!h),p="suggestion"===e&&o>-1?this._buildId("suggestion-item",o):null;return Object(O.a)("input",{"aria-activedescendant":p,"aria-autocomplete":"list","aria-expanded":(f&&"suggestion"===e).toString(),"aria-controls":f?i:null,"aria-owns":f?i:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,placeholder:c,maxlength:u,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:l,id:a,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:g.i,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:l?"":c})}},{key:"renderForm",value:function(){return Object(O.a)("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())}},{key:"renderSuggestList",value:function(e){var t=this,n=e.sourceIndex,r=e.results;return e.results.length?Object(O.a)("ul",{role:"group",key:"esri-search__suggestion-list-"+n,class:this.classes("esri-menu__list","esri-search__suggestions-list")},r.map((function(e){return t.renderSuggestion(e,t._menuItemCount++)}))):null}},{key:"renderSuggestionsGroup",value:function(){var e=this,t=this.viewModel.suggestions;return t?t.map((function(t){return[e.renderSuggestionHeader(t),e.renderSuggestList(t)]})):null}},{key:"renderSuggestionsMenu",value:function(){var e=this.displayedSearchTerm,t=this.locationEnabled,n=this.suggestionsMenuId,r=this.inputId,i=this.viewModel.suggestionCount,a=t&&!e||i;return this._menuItemCount=0,a?Object(O.a)("div",{id:n,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":r,bind:this,afterCreate:g.i,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}},{key:"renderInputContainer",value:function(){return Object(O.a)("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}},{key:"renderSuggestionHeader",value:function(e){var t=this.viewModel,n=t.allSources,r=t.activeSourceIndex,i=e.sourceIndex;return e.results.length&&n.length>1&&r===Mt.ALL_INDEX?Object(O.a)("div",{key:"esri-search__suggestion-header-"+i,class:"esri-menu__header"},this._getSourceName(i)):null}},{key:"renderSuggestion",value:function(e,t){var n=this._activeMenuItemIndex,r=this.messages,i=this.viewModel.searchTerm;if(i){var a=e.text||r.untitledResult,o=Ct.test(a),s=[];if(o)s.push(Object(O.a)("div",{innerHTML:a}));else{var u=this._splitResult(a,i),c=i.toLowerCase();u.forEach((function(e,t){e&&e.length&&(e.toLowerCase()===c?s.push(Object(O.a)("strong",{key:t},e)):s.push(e))}))}var l="suggestion"===this.activeMenu&&n===t;return Object(O.a)("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:"esri-search__suggestion_"+t,"data-suggestion":e,role:"option",class:this.classes("esri-menu__list-item",l?"esri-menu__list-item--focus":null)},s)}}},{key:"renderSource",value:function(e){var t=this.viewModel,n=t.activeSourceIndex,r=t.searchAllEnabled,i={"esri-menu__list-item--active":e===n,"esri-menu__list-item--focus":"source"===this.activeMenu&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},a=r?e+1:e;return Object(O.a)("li",{bind:this,key:"esri-search__source-"+e,id:this._buildId("source-item",a),"aria-checked":(e===n).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",i)},this._getSourceName(e))}},{key:"renderNoResultsWarning",value:function(e){var t=this.messages,n=e?Object(v.a)(t.noResultsFoundForValue,{value:'"'.concat(e,'"')}):t.noResultsFound;return Object(O.a)("div",{key:"esri-search__no_results"},Object(O.a)("div",{class:"esri-search__warning-header"},t.noResults),Object(O.a)("div",{class:"esri-search__warning-text"},n))}},{key:"renderEmptySearchWarning",value:function(){var e=this.messages;return Object(O.a)("div",{key:"esri-search__empty-search"},Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),Object(O.a)("span",{class:"esri-search__no-value-text"},e.emptyValue))}},{key:"renderLocateWarning",value:function(){var e=this.messages;return Object(O.a)("div",{key:"esri-search__locate-error"},Object(O.a)("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),Object(O.a)("span",{class:"esri-search__no-value-text"},e.locateError))}},{key:"renderWarning",value:function(){var e,t=this.displayedSearchTerm,n=this._locateFailed,r=this.viewModel;return n?this.renderLocateWarning():null!=(e=r.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}},{key:"_resetActiveMenuItemIndex",value:function(){this._activeMenuItemIndex=-1}},{key:"_buildId",value:function(e,t){return"".concat(this.id,"-").concat(e).concat(void 0===t?"":"-"+t)}},{key:"_watchSourceChanges",value:function(){var e=this,t=this._handles,n=this.viewModel.allSources,r="sources";t.remove(r),n.forEach((function(n){return t.add(Object(b.watch)(n,"name",(function(){return e.scheduleRender()})),r)}))}},{key:"_handleSourcesMenuToggleClick",value:function(){var e;this.activeMenu="source"===this.activeMenu?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null==(e=this._sourceListNode)||e.focus())}},{key:"_handleClearButtonClick",value:function(){this.viewModel.clear(),this._focus()}},{key:"_handleSearchButtonClick",value:function(){this.search()}},{key:"_handleSuggestionClick",value:function(e){var t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}},{key:"_handleUseCurrentLocationClick",value:function(){this._useCurrentLocation()}},{key:"_useCurrentLocation",value:function(){var e=this;this._focus("none"),this._cancelSuggest(),this._cancelSearch();var t=Object(d.d)(),n=t.signal;this._searchController=t,this.viewModel.searchNearby({signal:n}).catch((function(){e._locateFailed=!0,e.activeMenu="warning"})).then((function(){e._searchController=null}))}},{key:"_handleSourceClick",value:function(e){this._setSourceFromMenuItem(e.currentTarget)}},{key:"_setSourceFromMenuItem",value:function(e){var t;e&&(this.viewModel.activeSourceIndex=e["data-source-index"],this.activeMenu="none",null==(t=this._sourceMenuButtonNode)||t.focus())}},{key:"_sourcesButtonBlur",value:function(e){this._removeActiveMenu(e&&e.relatedTarget,this._sourceListNode)}},{key:"_inputBlur",value:function(e){this._removeActiveMenu(e&&e.relatedTarget||this._relatedTarget,this._suggestionListNode)}},{key:"_storeRelatedTarget",value:function(e){this._relatedTarget=e.relatedTarget}},{key:"_clearButtonFocus",value:function(){this.activeMenu="none"}},{key:"_removeActiveMenu",value:function(e,t){!e||e&&t&&t.contains(e)||(this.activeMenu="none")}},{key:"_cancelSuggest",value:function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}},{key:"_cancelSearch",value:function(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}},{key:"_handleInputKeyup",value:function(e){var t,n=Object(p.a)(e);if(!e.ctrlKey&&!e.metaKey&&"Copy"!==n&&"ArrowLeft"!==n&&"ArrowRight"!==n&&"Shift"!==n){if("Tab"===n||"Escape"===n||e.shiftKey&&"Tab"===n)return this._cancelSuggest(),void("Escape"===n&&(this.activeMenu="none"));var r="Home"===n||"End"===n||"ArrowUp"===n||"ArrowDown"===n;if("Enter"===n&&this._activeMenuItemIndex<0)this._cancelSuggest();else{var i=null==(t=this._suggestionListNode)?void 0:t.getElementsByTagName("li");if(null!=i&&i.length){if("suggestion"!==this.activeMenu&&(this.activeMenu="suggestion"),r)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(n,i,this._suggestionListNode);var a=i[this._activeMenuItemIndex];if("Enter"===n&&a){var o=a["data-suggestion"];return void(o?(this._focus(),this.search(o)):a["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}}}},{key:"handleItemNavigation",value:function(e,t,n){var r=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&Object(g.g)(t[this._activeMenuItemIndex],n)}},{key:"_scrollToTopSuggestion",value:function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}},{key:"_handleInputClick",value:function(){this.activeMenu="suggestion"}},{key:"_handleInputPaste",value:function(e){var t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}},{key:"_handleSourceMenuKeydown",value:function(e){var t=Object(p.a)(e);if(" "!==t&&"Enter"!==t)"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault();else{e.preventDefault();var n=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(n)}}},{key:"_handleSourceMenuKeyup",value:function(e){var t,n,r=Object(p.a)(e),i="ArrowUp"===r||"ArrowDown"===r||"End"===r||"Home"===r;if(i&&e.preventDefault(),"Escape"===r)return this.activeMenu="none",void(null==(n=this._sourceMenuButtonNode)||n.focus());var a=null==(t=this._sourceListNode)?void 0:t.getElementsByTagName("li");return a&&0!==a.length&&i?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(r,a,this._sourceListNode.parentElement)):void 0}},{key:"_focus",value:function(e){this.focus(),e&&(this.activeMenu=e)}},{key:"_formSubmit",value:function(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}},{key:"_getSourceName",value:function(e){var t=this.messages,n=this.viewModel.allSources.getItemAt(e);return e===Mt.ALL_INDEX?t.all:n&&n.name||t.untitledSource}},{key:"_splitResult",value:function(e,t){var n=Object(s.a)(t);return e.replace(new RegExp("(^|)(".concat(n,")(|$)"),"ig"),"$1|$2|$3").split("|")}},{key:"_renderSearchResultsContent",value:function(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}}]),n}(j.a);Object(a.a)([Object(l.b)()],Et.prototype,"_activeMenuItemIndex",void 0),Object(a.a)([Object(l.b)()],Et.prototype,"displayedSearchTerm",null),Object(a.a)([Object(l.b)({readOnly:!0})],Et.prototype,"inputId",null),Object(a.a)([Object(l.b)({readOnly:!0})],Et.prototype,"suggestionsMenuId",null),Object(a.a)([Object(l.b)({readOnly:!0})],Et.prototype,"sourceMenuId",null),Object(a.a)([Object(l.b)({readOnly:!0})],Et.prototype,"sourceMenuButtonId",null),Object(a.a)([Object(l.b)()],Et.prototype,"activeMenu",void 0),Object(a.a)([Object(h.a)("viewModel.activeSource")],Et.prototype,"activeSource",void 0),Object(a.a)([Object(h.a)("viewModel.activeSourceIndex")],Et.prototype,"activeSourceIndex",void 0),Object(a.a)([Object(h.a)("viewModel.allPlaceholder")],Et.prototype,"allPlaceholder",void 0),Object(a.a)([Object(h.a)("viewModel.allSources")],Et.prototype,"allSources",void 0),Object(a.a)([Object(h.a)("viewModel.autoNavigate")],Et.prototype,"autoNavigate",void 0),Object(a.a)([Object(h.a)("viewModel.autoSelect")],Et.prototype,"autoSelect",void 0),Object(a.a)([Object(h.a)("viewModel.defaultSources")],Et.prototype,"defaultSources",void 0),Object(a.a)([Object(l.b)()],Et.prototype,"disabled",void 0),Object(a.a)([Object(h.a)("viewModel.goToOverride")],Et.prototype,"goToOverride",void 0),Object(a.a)([Object(l.b)()],Et.prototype,"iconClass",void 0),Object(a.a)([Object(h.a)("viewModel.includeDefaultSources")],Et.prototype,"includeDefaultSources",void 0),Object(a.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Et.prototype,"label",void 0),Object(a.a)([Object(h.a)("viewModel.locationEnabled")],Et.prototype,"locationEnabled",void 0),Object(a.a)([Object(h.a)("viewModel.maxResults")],Et.prototype,"maxResults",void 0),Object(a.a)([Object(h.a)("viewModel.maxSuggestions")],Et.prototype,"maxSuggestions",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/widgets/Search/t9n/Search")],Et.prototype,"messages",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/t9n/common")],Et.prototype,"messagesCommon",void 0),Object(a.a)([Object(h.a)("viewModel.minSuggestCharacters")],Et.prototype,"minSuggestCharacters",void 0),Object(a.a)([Object(h.a)("viewModel.popupEnabled")],Et.prototype,"popupEnabled",void 0),Object(a.a)([Object(h.a)("viewModel.popupTemplate")],Et.prototype,"popupTemplate",void 0),Object(a.a)([Object(h.a)("viewModel.portal")],Et.prototype,"portal",void 0),Object(a.a)([Object(h.a)("viewModel.resultGraphic")],Et.prototype,"resultGraphic",void 0),Object(a.a)([Object(h.a)("viewModel.resultGraphicEnabled")],Et.prototype,"resultGraphicEnabled",void 0),Object(a.a)([Object(h.a)("viewModel.results")],Et.prototype,"results",void 0),Object(a.a)([Object(h.a)("viewModel.searchAllEnabled")],Et.prototype,"searchAllEnabled",void 0),Object(a.a)([Object(h.a)("viewModel.searchTerm")],Et.prototype,"searchTerm",void 0),Object(a.a)([Object(h.a)("viewModel.selectedResult")],Et.prototype,"selectedResult",void 0),Object(a.a)([Object(h.a)("viewModel.sources")],Et.prototype,"sources",void 0),Object(a.a)([Object(h.a)("viewModel.suggestions")],Et.prototype,"suggestions",void 0),Object(a.a)([Object(h.a)("viewModel.suggestionsEnabled")],Et.prototype,"suggestionsEnabled",void 0),Object(a.a)([Object(h.a)("viewModel.view")],Et.prototype,"view",void 0),Object(a.a)([Object(w.a)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),Object(l.b)({type:Mt})],Et.prototype,"viewModel",void 0),Object(a.a)([Object(h.a)("viewModel.clear")],Et.prototype,"clear",null);var Rt=Et=Object(a.a)([Object(f.a)("esri.widgets.Search")],Et),Dt=n("y3LX"),Lt=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e))._initialViewpoint=null,t._goingHomeController=null,t.go=t.go.bind($t(t)),t}return Zt(r,[{key:"destroy",value:function(){this._cancelGo(),this.view=null}},{key:"state",get:function(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}},{key:"view",set:function(e){var t=this;this._initialViewpoint=null,this._set("view",e),e&&e.when().then((function(){t.view===e&&(t._initialViewpoint=e.viewpoint.clone(),t.notifyChange("viewpoint"))}))}},{key:"viewpoint",get:function(){return this._get("viewpoint")||this._initialViewpoint},set:function(e){this._set("viewpoint",e)}},{key:"go",value:(t=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.get("view.ready")){e.next=2;break}throw new k.a("home:disabled-state","Cannot go when disabled.");case 2:return this._cancelGo(),this.emit("go"),t=Object(d.d)(),this._goingHomeController=t,e.prev=5,e.next=8,this.view.when();case 8:return e.next=10,this.callGoTo({target:this.viewpoint,options:{signal:t.signal}});case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:this._goingHomeController=null;case 15:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(){return t.apply(this,arguments)})},{key:"cancelGo",value:function(){this._cancelGo()}},{key:"_cancelGo",value:function(){var e=this._goingHomeController;e&&e.abort(),this._goingHomeController=null}}]),r}(Object(B.a)(T.a.EventedAccessor));Object(a.a)([Object(l.b)()],Lt.prototype,"_goingHomeController",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],Lt.prototype,"state",null),Object(a.a)([Object(l.b)()],Lt.prototype,"view",null),Object(a.a)([Object(l.b)({type:Dt.a})],Lt.prototype,"viewpoint",null),Object(a.a)([Object(l.b)()],Lt.prototype,"go",null),Object(a.a)([Object(l.b)()],Lt.prototype,"cancelGo",null);var Vt=Lt=Object(a.a)([Object(f.a)("esri.widgets.Home.HomeViewModel")],Lt),Gt=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).goToOverride=null,i.iconClass="esri-icon-home",i.label=void 0,i.messages=null,i.messagesCommon=null,i.view=null,i.viewModel=new Vt,i.viewpoint=null,i}return Zt(n,[{key:"homeTitle",get:function(){var e,t=null==(e=this.viewModel)?void 0:e.state,n=this.messagesCommon,r=this.messages;return"going-home"===t?n.cancel:r.title}},{key:"cancelGo",value:function(){return null}},{key:"go",value:function(){return null}},{key:"render",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.state,n=this.homeTitle,r={"esri-disabled":"disabled"===t};return Object(O.a)("div",{bind:this,class:this.classes("esri-home esri-widget--button esri-widget",r),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":n,title:n},this.renderIcon(),this.renderText())}},{key:"renderIcon",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.state,n={"esri-icon-loading-indicator":"going-home"===t,"esri-rotating":"going-home"===t};return Object(O.a)("span",{"aria-hidden":"true",class:this.classes("esri-icon esri-icon-home",n)})}},{key:"renderText",value:function(){var e=this.messages;return Object(O.a)("span",{class:"esri-icon-font-fallback-text"},e.button)}},{key:"_go",value:function(){var e=this.viewModel;"going-home"===e.state?e.cancelGo():e.go()}}]),n}(j.a);Object(a.a)([Object(h.a)("viewModel.goToOverride")],Gt.prototype,"goToOverride",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],Gt.prototype,"homeTitle",null),Object(a.a)([Object(l.b)()],Gt.prototype,"iconClass",void 0),Object(a.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Gt.prototype,"label",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/widgets/Home/t9n/Home")],Gt.prototype,"messages",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/t9n/common")],Gt.prototype,"messagesCommon",void 0),Object(a.a)([Object(h.a)("viewModel.view")],Gt.prototype,"view",void 0),Object(a.a)([Object(l.b)({type:Vt}),Object(w.a)("go")],Gt.prototype,"viewModel",void 0),Object(a.a)([Object(h.a)("viewModel.viewpoint")],Gt.prototype,"viewpoint",void 0),Object(a.a)([Object(h.a)("viewModel.cancelGo")],Gt.prototype,"cancelGo",null),Object(a.a)([Object(h.a)("viewModel.go")],Gt.prototype,"go",null),Object(a.a)([Object(It.a)()],Gt.prototype,"_go",null);var qt=Gt=Object(a.a)([Object(f.a)("esri.widgets.Home")],Gt),Ht=n("CR/Q"),Jt=n("J3K2"),Yt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._viewpointHandle=null,r._handles=new y.a,r.group=null,r}return Zt(n,[{key:"initialize",value:function(){var e=this;this._handles.add(Object(b.on)(this,"view.ui","expand",(function(t){var n=t.target;n&&n!==e&&n.expanded&&n.group&&n.group===e.group&&e._collapse()})))}},{key:"destroy",value:function(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}},{key:"autoCollapse",set:function(e){this._set("autoCollapse",e),this._watchViewpoint()}},{key:"expanded",set:function(e){var t=!!e;this._set("expanded",t);var n=this.get("view.ui");n&&n.emit("expand",{target:this}),this._viewpointHandleChange(t)}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(e){var t=this;this._get("view")!==e&&(this._set("view",e),e&&Object(b.whenTrueOnce)(e,"ready",(function(){t.view===e&&t._watchViewpoint()})))}},{key:"_viewpointHandleChange",value:function(e){var t=this;this._viewpointHandle&&(e?Object(b.whenTrueOnce)(this.view,"stationary",(function(){return t._viewpointHandle.resume()})):this._viewpointHandle.pause())}},{key:"_watchViewpoint",value:function(){var e=this,t="viewpoint";this._handles.remove(t),this._viewpointHandle=null;var n=this.autoCollapse,r=this.view;if(r&&n){var i="3d"===r.type?"camera":"viewpoint",a=Object(b.pausable)(r,i,(function(){return e._collapse()}));this._handles.add(a,t),this._viewpointHandle=a}}},{key:"_collapse",value:function(){this.expanded=!1}}]),n}(S.a);Object(a.a)([Object(l.b)({value:!1})],Yt.prototype,"autoCollapse",null),Object(a.a)([Object(l.b)({value:!1})],Yt.prototype,"expanded",null),Object(a.a)([Object(l.b)()],Yt.prototype,"group",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],Yt.prototype,"state",null),Object(a.a)([Object(l.b)({value:null})],Yt.prototype,"view",null);var Qt=Yt=Object(a.a)([Object(f.a)("esri.widgets.Expand.ExpandViewModel")],Yt),en=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).autoCollapse=null,i.closeOnEsc=!0,i.collapseTooltip="",i.content="",i.expanded=null,i.expandTooltip="",i.group=null,i.iconNumber=0,i.label=void 0,i.messages=null,i.messagesCommon=null,i.mode="auto",i.view=null,i.viewModel=new Qt,i._handleKeyDown=function(e){var t=$t(i),n=t.closeOnEsc,r=t._toggleButtonEl;t.expanded&&n&&e.target!==r&&"Escape"===e.key&&("function"==typeof n?n(e):n)&&(i.expanded=!1,null==r||r.focus())},i}return Zt(n,[{key:"contentId",get:function(){return this.id+"_controls_content"}},{key:"expandTitle",get:function(){var e=this.expanded,t=this.messagesCommon,n=this.collapseTooltip,r=this.expandTooltip;return e?n||t.collapse:r||t.expand}},{key:"collapseIconClass",get:function(){return"esri-icon-collapse"},set:function(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}},{key:"expandIconClass",get:function(){return Object(Jt.b)(this.content)?this.content.iconClass:"esri-icon-expand"},set:function(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}},{key:"expand",value:function(){this.viewModel.expanded=!0}},{key:"collapse",value:function(){this.viewModel.expanded=!1}},{key:"toggle",value:function(){this.viewModel.expanded=!this.viewModel.expanded}},{key:"render",value:function(){var e=this.mode,t={"esri-expand--auto":"auto"===e,"esri-expand--drawer":"drawer"===e,"esri-expand--floating":"floating"===e};return Object(O.a)("div",{class:this.classes("esri-expand esri-widget",t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}},{key:"renderContainer",value:function(){var e={"esri-expand__container--expanded":this.expanded};return Object(O.a)("div",{class:this.classes("esri-expand__container",e)},this.renderPanel(),this.renderContent())}},{key:"renderMask",value:function(){var e={"esri-expand__mask--expanded":this.expanded};return Object(O.a)("div",{bind:this,onclick:this._toggle,class:this.classes("esri-expand__mask",e)})}},{key:"renderBadgeNumber",value:function(){var e=this.expanded,t=this.iconNumber;return t&&!e?Object(O.a)("span",{key:"expand__icon-number",class:"esri-expand__icon-number"},t):null}},{key:"renderPanelNumber",value:function(){var e=this.iconNumber,t=this.expanded;return e&&t?Object(O.a)("span",{key:"expand__expand-icon-number",class:this.classes("esri-expand__icon-number","esri-expand__icon-number--expanded")},e):null}},{key:"renderIcon",value:function(){var e,t=this.collapseIconClass,n=this.expandIconClass,r=this.expanded,i=(Ft(e={"esri-expand__icon--expanded":r},t,r),Ft(e,n,!r),e);return t===n&&(i[t]=!0),Object(O.a)("span",{"aria-hidden":"true",class:this.classes("esri-collapse__icon",i)})}},{key:"renderTitle",value:function(){return Object(O.a)("span",{class:"esri-icon-font-fallback-text"},this.expandTitle)}},{key:"renderExpandButton",value:function(){var e=this.expanded,t=this.expandTitle,n=this.contentId;return Object(O.a)("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":n,"aria-expanded":e?"true":"false",bind:this,class:"esri-widget--button",onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}},{key:"renderPanel",value:function(){return Object(O.a)("div",{class:"esri-expand__panel"},this.renderExpandButton(),this.renderPanelNumber())}},{key:"renderContent",value:function(){var e=this.expanded,t=this.contentId,n={"esri-expand__content--expanded":e};return Object(O.a)("div",{id:t,role:"region",class:this.classes("esri-expand__content",n)},this.renderContentContainer())}},{key:"renderContentContainer",value:function(){var e=this.content;return"string"==typeof e?Object(O.a)("div",{innerHTML:e}):Object(Jt.b)(e)?e.render():e instanceof HTMLElement?Object(O.a)("div",{bind:e,afterCreate:this._attachToNode}):Object(Jt.a)(e)?Object(O.a)("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}},{key:"_toggle",value:function(){this.toggle()}},{key:"_attachToNode",value:function(e){e.appendChild(this)}},{key:"_storeToggleButtonEl",value:function(e){this._toggleButtonEl=e}}]),n}(j.a);Object(a.a)([Object(l.b)({readOnly:!0})],en.prototype,"contentId",null),Object(a.a)([Object(l.b)({readOnly:!0})],en.prototype,"expandTitle",null),Object(a.a)([Object(h.a)("viewModel.autoCollapse")],en.prototype,"autoCollapse",void 0),Object(a.a)([Object(l.b)()],en.prototype,"closeOnEsc",void 0),Object(a.a)([Object(l.b)()],en.prototype,"collapseIconClass",null),Object(a.a)([Object(l.b)()],en.prototype,"collapseTooltip",void 0),Object(a.a)([Object(l.b)()],en.prototype,"content",void 0),Object(a.a)([Object(h.a)("viewModel.expanded")],en.prototype,"expanded",void 0),Object(a.a)([Object(l.b)()],en.prototype,"expandIconClass",null),Object(a.a)([Object(l.b)()],en.prototype,"expandTooltip",void 0),Object(a.a)([Object(h.a)("viewModel.group")],en.prototype,"group",void 0),Object(a.a)([Object(l.b)()],en.prototype,"iconNumber",void 0),Object(a.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],en.prototype,"label",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/widgets/Expand/t9n/Expand")],en.prototype,"messages",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/t9n/common")],en.prototype,"messagesCommon",void 0),Object(a.a)([Object(l.b)()],en.prototype,"mode",void 0),Object(a.a)([Object(h.a)("viewModel.view")],en.prototype,"view",void 0),Object(a.a)([Object(l.b)({type:Qt})],en.prototype,"viewModel",void 0),Object(a.a)([Object(It.a)()],en.prototype,"_toggle",null);var tn=en=Object(a.a)([Object(f.a)("esri.widgets.Expand")],en),nn=n("Gj5k"),rn=n("LIH3"),an=n("f4Nx"),on=n("qNUd"),sn=n("QLbw");function un(e,t){return e&&e.indexOf(t)>-1}function cn(e,t){var n="decimal-degrees"===e?Object(pt.e)(t,!0):t;return[n.x,n.y]}function ln(e){var t=e.state.paddedViewState,n=e.spatialReference,r=e.width;return n.isWrappable&&t.worldScreenWidth<r}var hn=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).scaleComputedFrom=Object(Q.f)(),r.view=null,r}return Zt(n,[{key:"state",get:function(){return this.get("view.ready")&&"2d"===this.get("view.type")?"ready":"disabled"}},{key:"getScaleBarProperties",value:function(e,t){if("disabled"===this.state||isNaN(e)||!t)return null;var n=this._getDistanceInKm(this.view,this.scaleComputedFrom);return"metric"===t?this._getScaleBarProps(e,n,"metric"):this._getScaleBarProps(e,n/1.609,"non-metric")}},{key:"_getLocationUnit",value:function(){var e=this.get("view.spatialReference"),t=e.isWebMercator,n=e.wkid,r=e.wkt;return t||un(r,"WGS_1984_Web_Mercator")?"decimal-degrees":null!=rn.a[n]||un(r,"PROJCS")?"linear-unit":"unknown"}},{key:"_getDistanceInKm",value:function(e,t){var n=e.state,r=e.spatialReference,i=this._getLocationUnit();if("linear-unit"===i){return n.extent.width*function(e){var t=e.wkid;if(null!=rn.a[t])return rn.a.values[rn.a[t]];var n=e.wkt,r=n.lastIndexOf(",")+1,i=n.lastIndexOf("]]");return parseFloat(n.substring(r,i))}(r)/1e3}var a=zt(this._getScaleMeasuringPoints(e,t),2),o=a[0],s=a[1],u=new dt.a({paths:[[cn(i,o),cn(i,s)]],spatialReference:"decimal-degrees"===i?M.a.WGS84:r}),c=Object(on.c)(u,10);return zt(Object(sn.e)([c],"kilometers"),1)[0]}},{key:"_getScaleMeasuringPoints",value:function(e,t){var n=e.width,r=e.height,i=e.position,a=e.spatialReference;if(ln(e)){var o=Object(an.d)(a).valid;return[new I.a(o[0],0,a),new I.a(o[1],0,a)]}var s=t.y-i[1];s>r?s=r:s<0&&(s=0);var u=Object(Q.f)(0,s),c=Object(Q.f)(n,s);return[e.toMap(u),e.toMap(c)]}},{key:"_getScaleBarProps",value:function(e,t,n){var r=this.view,i=e*t/(ln(r)?r.state.paddedViewState.worldScreenWidth:r.width),a="metric"===n?"km":"mi";i<.1&&("mi"===a?(i*=5280,a="ft"):"km"===a&&(i*=1e3,a="m"));for(var o=0;i>=1;)i/=10,o++;var s=this._getConstraints(i);if(!s)return null;var u=s.min,c=s.max,l=c/i>=i/u?u:c;return{length:e*(l/i),value:Math.pow(10,o)*l,unit:a}}},{key:"_getConstraints",value:function(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}}]),n}(S.a);Object(a.a)([Object(l.b)()],hn.prototype,"scaleComputedFrom",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],hn.prototype,"state",null),Object(a.a)([Object(l.b)()],hn.prototype,"view",void 0);var fn=hn=Object(a.a)([Object(f.a)("esri.widgets.Scalebar.ScaleBarViewModel")],hn);function pn(e){return 2*e}var dn=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).label=void 0,i.messages=null,i.unit="non-metric",i.view=null,i.viewModel=new fn,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this.own([Object(b.whenTrue)(this,"view.stationary",(function(){return e.scheduleRender()})),Object(b.watch)(this,["view.center","view.scale","view.zoom"],(function(){e.view.stationary&&e.scheduleRender()}))])}},{key:"style",set:function(e){this._set("style","dual"===this.unit?"line":e)}},{key:"castStyle",value:function(e){return"line"===e?e:"ruler"}},{key:"castUnit",value:function(e){return"metric"===e||"dual"===e?e:"non-metric"}},{key:"render",value:function(){var e,t,n="disabled"===this.get("viewModel.state"),r={"esri-disabled":n};if(!n){var i=this.unit,a=this.style,o="metric"===i||"dual"===i;if("non-metric"===i||"dual"===i){var s=this.viewModel.getScaleBarProperties(50,"non-metric");s&&(t="ruler"===a?this._renderRuler(s):this._renderLine(s,"bottom"))}if(o){var u=this.viewModel.getScaleBarProperties(50,"metric");u&&(e="ruler"===a?this._renderRuler(u):this._renderLine(u,"top"))}}return Object(O.a)("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes("esri-scale-bar esri-widget",r)},e,t)}},{key:"_renderRuler",value:function(e){var t=pn(Math.round(e.length)),n=this.messages,r=n[e.unit]||n.unknownUnit,i="".concat(pn(e.value)," ").concat(r);return Object(O.a)("div",{class:this.classes("esri-scale-bar__bar-container","esri-scale-bar__bar-container--ruler"),key:"esri-scale-bar__ruler"},Object(O.a)("div",{class:"esri-scale-bar__ruler",styles:{width:t+"px"}},Object(O.a)("div",{class:"esri-scale-bar__ruler-block"}),Object(O.a)("div",{class:"esri-scale-bar__ruler-block"}),Object(O.a)("div",{class:"esri-scale-bar__ruler-block"}),Object(O.a)("div",{class:"esri-scale-bar__ruler-block"})),Object(O.a)("div",{class:this.classes("esri-scale-bar__label-container","esri-scale-bar__label-container--ruler")},Object(O.a)("div",{class:"esri-scale-bar__label"},"0"),Object(O.a)("div",{class:"esri-scale-bar__label"},i)))}},{key:"_renderLine",value:function(e,t){var n=this.messages,r=n[e.unit]||n.unknownUnit,i="".concat(pn(e.value)," ").concat(r),a={"esri-scale-bar__label-container--top":"top"===t,"esri-scale-bar__label-container--bottom":"bottom"===t},o=Object(O.a)("div",{class:this.classes("esri-scale-bar__label-container","esri-scale-bar__label-container--line",a),key:"esri-scale-bar__label"},Object(O.a)("div",{class:"esri-scale-bar__label"},i)),s={"esri-scale-bar__line--top":"top"===t,"esri-scale-bar__line--bottom":"bottom"===t},u=pn(Math.round(e.length)),c=Object(O.a)("div",{class:this.classes("esri-scale-bar__line",s),key:"esri-scale-bar__line",styles:{width:u+"px"}});return Object(O.a)("div",{class:this.classes("esri-scale-bar__bar-container","esri-scale-bar__bar-container--line"),key:"esri-scale-bar__line-container"},[c,o])}},{key:"_handleRootCreateOrUpdate",value:function(e){var t=this.viewModel;if(t){var n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,i=n.top+window.pageYOffset,a=Object(Q.f)(r,i);(a.x!==t.scaleComputedFrom.x||a.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=a)}}}]),n}(j.a);Object(a.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],dn.prototype,"label",void 0),Object(a.a)([Object(l.b)(),Object(m.a)("esri/widgets/ScaleBar/t9n/ScaleBar")],dn.prototype,"messages",void 0),Object(a.a)([Object(l.b)()],dn.prototype,"style",null),Object(a.a)([Object(nn.a)("style")],dn.prototype,"castStyle",null),Object(a.a)([Object(l.b)()],dn.prototype,"unit",void 0),Object(a.a)([Object(nn.a)("unit")],dn.prototype,"castUnit",null),Object(a.a)([Object(h.a)("viewModel.view")],dn.prototype,"view",void 0),Object(a.a)([Object(l.b)()],dn.prototype,"viewModel",void 0);var vn=dn=Object(a.a)([Object(f.a)("esri.widgets.ScaleBar")],dn),yn=function(){return new W.default({baseLayers:[new Ht.default({style:"hybrid",key:"Aku2yja6DA8XcPp4uuD5IPad0jmIj1kYl1pS9u6B3xp9lL3jbVTIArEw9W4bnoPM"})],id:"bing"})},bn=function(e,t){var n={basemap:yn(),spatialReference:new M.a({wkid:4326})},a=new r.default(n),o=new i.default({container:e.nativeElement,center:[-99.5,31.2],zoom:6.5,snapToZoom:!1,map:a,constraints:{rotationEnabled:!1}});o.popup.autoOpenEnabled=!1,new Rt({view:o,container:t.nativeElement,popupEnabled:!1,resultGraphicEnabled:!1});var s=new Rt({view:o,container:document.createElement("div"),popupEnabled:!1,id:"sss",resultGraphicEnabled:!1}),u=new tn({id:"searchExpand",view:o,content:s,expandTooltip:"Search"}),c=new vn({id:"scaleBar",view:o,unit:"non-metric",style:"line"}),l=new qt({view:o});return o.ui.move("zoom","bottom-right"),o.ui.add(l,"bottom-right"),o.ui.add(u,"bottom-right"),o.ui.add(c,"bottom-left"),s.on("select-result",(function(){u.collapse()})),o}},VeZB:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return V})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return I})),n.d(t,"k",(function(){return E})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return p})),n.d(t,"n",(function(){return O})),n.d(t,"o",(function(){return G})),n.d(t,"p",(function(){return H})),n.d(t,"q",(function(){return N})),n.d(t,"r",(function(){return T})),n.d(t,"s",(function(){return P})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return d})),n.d(t,"v",(function(){return j})),n.d(t,"w",(function(){return U})),n.d(t,"x",(function(){return W})),n.d(t,"y",(function(){return F})),n.d(t,"z",(function(){return A})),n.d(t,"A",(function(){return R})),n.d(t,"B",(function(){return S})),n.d(t,"C",(function(){return v})),n.d(t,"D",(function(){return _})),n.d(t,"E",(function(){return B})),n.d(t,"F",(function(){return J})),n.d(t,"G",(function(){return z})),n.d(t,"H",(function(){return C})),n.d(t,"I",(function(){return D})),n.d(t,"J",(function(){return M}));var r=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Wt(this,e),this.TypedArrayConstructor=t,this.elementCount=9;var o=this.TypedArrayConstructor;void 0===i&&(i=9*o.BYTES_PER_ELEMENT);var s=0===n.byteLength?0:r;this.typedBuffer=null==a?new o(n,s):new o(n,s,(a-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Zt(e,[{key:"getMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<9;r++)t[r]=this.typedBuffer[n+r];return t}},{key:"setMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<9;r++)this.typedBuffer[n+r]=t[r]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"copyFrom",value:function(e,t,n){for(var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride,s=0;s<9;++s)r[a+s]=i[o+s]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();r.ElementCount=9;var i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Wt(this,e),this.TypedArrayConstructor=t,this.elementCount=16;var o=this.TypedArrayConstructor;void 0===i&&(i=16*o.BYTES_PER_ELEMENT);var s=0===n.byteLength?0:r;this.typedBuffer=null==a?new o(n,s):new o(n,s,(a-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Zt(e,[{key:"getMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<16;r++)t[r]=this.typedBuffer[n+r];return t}},{key:"setMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<16;r++)this.typedBuffer[n+r]=t[r]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"copyFrom",value:function(e,t,n){for(var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride,s=0;s<16;++s)r[a+s]=i[o+s]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();i.ElementCount=16;var a=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Wt(this,e),this.TypedArrayConstructor=t,this.elementCount=1;var o=this.TypedArrayConstructor;void 0===i&&(i=o.BYTES_PER_ELEMENT);var s=0===n.byteLength?0:r;this.typedBuffer=null==a?new o(n,s):new o(n,s,(a-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Zt(e,[{key:"get",value:function(e){return this.typedBuffer[e*this.typedBufferStride]}},{key:"set",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();a.ElementCount=1;var o=n("M0lq"),s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Wt(this,e),this.TypedArrayConstructor=t,this.elementCount=2;var o=this.TypedArrayConstructor;void 0===i&&(i=2*o.BYTES_PER_ELEMENT);var s=0===n.byteLength?0:r;this.typedBuffer=null==a?new o(n,s):new o(n,s,(a-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Zt(e,[{key:"getVec",value:function(e,t){return Object(o.r)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1])}},{key:"setVec",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"setValues",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=n}},{key:"copyFrom",value:function(e,t,n){var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride;r[a]=i[o],r[a+1]=i[o+1]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();s.ElementCount=2;var u=n("5DEt"),c=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Wt(this,e),this.TypedArrayConstructor=t,this.elementCount=3;var o=this.TypedArrayConstructor;void 0===i&&(i=3*o.BYTES_PER_ELEMENT);var s=0===n.byteLength?0:r;this.typedBuffer=null==a?new o(n,s):new o(n,s,(a-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Zt(e,[{key:"getVec",value:function(e,t){return Object(u.v)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2])}},{key:"setVec",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"setValues",value:function(e,t,n,r){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=n,this.typedBuffer[e*this.typedBufferStride+2]=r}},{key:"copyFrom",value:function(e,t,n){var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride;r[a]=i[o],r[a+1]=i[o+1],r[a+2]=i[o+2]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();c.ElementCount=3;var l=n("dXfX"),h=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Wt(this,e),this.TypedArrayConstructor=t,this.elementCount=4;var o=this.TypedArrayConstructor;void 0===i&&(i=4*o.BYTES_PER_ELEMENT);var s=0===n.byteLength?0:r;this.typedBuffer=null==a?new o(n,s):new o(n,s,(a-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Zt(e,[{key:"getVec",value:function(e,t){return Object(l.l)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2],this.typedBuffer[e*this.typedBufferStride+3])}},{key:"setVec",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2],this.typedBuffer[e*this.typedBufferStride+3]=t[3]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"setValues",value:function(e,t,n,r,i){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=n,this.typedBuffer[e*this.typedBufferStride+2]=r,this.typedBuffer[e*this.typedBufferStride+3]=i}},{key:"copyFrom",value:function(e,t,n){var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride;r[a]=i[o],r[a+1]=i[o+1],r[a+2]=i[o+2],r[a+3]=i[o+3]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();h.ElementCount=4;var f=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float32Array,e,i,a,o)).elementType="f32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);f.ElementType="f32";var p=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float32Array,e,i,a,o)).elementType="f32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);p.ElementType="f32";var d=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float32Array,e,i,a,o)).elementType="f32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);d.ElementType="f32";var v=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float32Array,e,i,a,o)).elementType="f32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);v.ElementType="f32";var y=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float32Array,e,i,a,o)).elementType="f32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(r);y.ElementType="f32";var b=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float64Array,e,i,a,o)).elementType="f64",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(r);b.ElementType="f64";var g=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float32Array,e,i,a,o)).elementType="f32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(i);g.ElementType="f32";var m=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float64Array,e,i,a,o)).elementType="f64",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(i);m.ElementType="f64";var w=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float64Array,e,i,a,o)).elementType="f64",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);w.ElementType="f64";var O=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float64Array,e,i,a,o)).elementType="f64",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);O.ElementType="f64";var j=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float64Array,e,i,a,o)).elementType="f64",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);j.ElementType="f64";var _=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Float64Array,e,i,a,o)).elementType="f64",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);_.ElementType="f64";var x=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint8Array,e,i,a,o)).elementType="u8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);x.ElementType="u8";var k=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint8Array,e,i,a,o)).elementType="u8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);k.ElementType="u8";var S=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint8Array,e,i,a,o)).elementType="u8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);S.ElementType="u8";var M=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint8Array,e,i,a,o)).elementType="u8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);M.ElementType="u8";var I=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint16Array,e,i,a,o)).elementType="u16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);I.ElementType="u16";var T=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint16Array,e,i,a,o)).elementType="u16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);T.ElementType="u16";var A=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint16Array,e,i,a,o)).elementType="u16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);A.ElementType="u16";var C=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint16Array,e,i,a,o)).elementType="u16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);C.ElementType="u16";var E=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint32Array,e,i,a,o)).elementType="u32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);E.ElementType="u32";var P=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint32Array,e,i,a,o)).elementType="u32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);P.ElementType="u32";var R=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint32Array,e,i,a,o)).elementType="u32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);R.ElementType="u32";var D=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Uint32Array,e,i,a,o)).elementType="u32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);D.ElementType="u32";var L=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int8Array,e,i,a,o)).elementType="i8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);L.ElementType="i8";var N=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int8Array,e,i,a,o)).elementType="i8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);N.ElementType="i8";var F=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int8Array,e,i,a,o)).elementType="i8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);F.ElementType="i8";var z=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int8Array,e,i,a,o)).elementType="i8",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);z.ElementType="i8";var V=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int16Array,e,i,a,o)).elementType="i16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);V.ElementType="i16";var G=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int16Array,e,i,a,o)).elementType="i16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);G.ElementType="i16";var U=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int16Array,e,i,a,o)).elementType="i16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);U.ElementType="i16";var B=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int16Array,e,i,a,o)).elementType="i16",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);B.ElementType="i16";var q=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int32Array,e,i,a,o)).elementType="i32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(a);q.ElementType="i32";var H=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int32Array,e,i,a,o)).elementType="i32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);H.ElementType="i32";var W=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int32Array,e,i,a,o)).elementType="i32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);W.ElementType="i32";var J=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return Wt(this,n),(r=t.call(this,Int32Array,e,i,a,o)).elementType="i32",r}return Zt(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(h);J.ElementType="i32"},VtYq:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("OIYi"),i=n("aQrP"),a=n("nndT");function o(e){var t=new i.a;return t.include(a.a,e),t.vertex.uniforms.add("uModelViewMatrix","mat4"),t.vertex.uniforms.add("uProjectionMatrix","mat4"),t.attributes.add("start","vec3"),t.attributes.add("end","vec3"),t.attributes.add("up","vec3"),t.attributes.add("extrude","vec2"),t.varyings.add("uv","vec2"),t.varyings.add("vViewStart","vec3"),t.varyings.add("vViewEnd","vec3"),t.varyings.add("vViewPlane","vec4"),t.vertex.uniforms.add("glowWidth","float"),t.vertex.uniforms.add("pixelToNDC","vec2"),t.vertex.code.add(r.a(de||(de=Rt(["\n  void main() {\n    vec3 pos = mix(start, end, extrude.x);\n\n    vec4 viewPos = uModelViewMatrix * vec4(pos, 1);\n    vec4 projPos = uProjectionMatrix * viewPos;\n    vec2 ndcPos = projPos.xy / projPos.w;\n\n    vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;\n    vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);\n    vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);\n\n    vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);\n    ndcPos += length(lxy) * projExtrudeDir;\n\n    vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));\n    vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;\n\n    vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;\n    vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;\n    vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));\n\n    // Add enough padding in the X screen space direction for glow\n    float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\n    ndcPos.x += xPaddingPixels * pixelToNDC.x;\n\n    uv = ndcPos * 0.5 + 0.5;\n    gl_Position = vec4(ndcPos, 0, 1);\n  }\n  "])))),t.fragment.uniforms.add("globalAlpha","float"),t.fragment.uniforms.add("perScreenPixelRatio","float"),t.fragment.code.add(r.a(ve||(ve=Rt(["\n  float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {\n    vec3 origin = mix(start, end, 0.5);\n    vec3 basis = end - origin;\n    vec3 posAtOrigin = pos - origin;\n\n    float x = dot(normalize(basis), posAtOrigin);\n    float y = dot(plane.xyz, posAtOrigin);\n\n    float dx = max(abs(x) - length(basis), 0.0);\n    float dy = y;\n\n    float dist = length(vec2(dx, dy));\n\n    float width = fwidth(y);\n    float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\n    float pixelDist = dist / min(width, maxPixelDistance);\n    return abs(pixelDist);\n  }\n\n  void main() {\n    vec3 pos;\n    vec3 normal;\n    float depthDiscontinuityAlpha;\n\n    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\n      discard;\n    }\n\n    float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);\n\n    vec4 color = laserlineProfile(distance);\n    float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));\n\n    gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);\n  }\n  "])))),t}var s=Object.freeze({__proto__:null,build:o})},VxUT:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("wSAH");var r=n("6S2I"),i=n("ZwYu"),a=n("fctI");r.a.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");var o=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),(a=t.call(this)).previousVertex=e,a.centerVertex=r,a.nextVertex=i,a}return Zt(n,[{key:"equals",value:function(e){return e instanceof n&&Object(i.d)(this.previousVertex,e.previousVertex)&&Object(i.d)(this.centerVertex,e.centerVertex)&&Object(i.d)(this.nextVertex,e.nextVertex)}}]),n}(a.a)},W4Nn:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("1hFN")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).showLegend=null,e}return Zt(n,[{key:"clone",value:function(){return new r({title:this.title,showLegend:this.showLegend})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],u.prototype,"showLegend",void 0),u=r=Object(i.a)([Object(o.a)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],u),t.a=u},W5Qm:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n("fXoL"),i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("Stxv"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),c=(n("cCpn"),n("dV4Z")),l=n("Jv1m"),h=n("Ehpe"),f=n("/CmD"),p=n("gEht"),d=n("Pt/X"),v=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).activeTool=null,r.activeViewModel=null,r.view=null,r}return Zt(n,[{key:"areaUnit",get:function(){return this.defaultUnit},set:function(e){void 0!==e?this._override("areaUnit",e):this._clearOverride("areaUnit")}},{key:"linearUnit",get:function(){return this.defaultUnit},set:function(e){void 0!==e?this._override("linearUnit",e):this._clearOverride("linearUnit")}},{key:"state",get:function(){var e=this.activeViewModel;return e?e.state:"disabled"}}]),n}(f.a);Object(i.a)([Object(a.b)({type:["area","distance","direct-line"]})],v.prototype,"activeTool",void 0),Object(i.a)([Object(a.b)()],v.prototype,"activeViewModel",void 0),Object(i.a)([Object(a.b)({type:p.p})],v.prototype,"areaUnit",null),Object(i.a)([Object(a.b)(d.a)],v.prototype,"defaultUnit",void 0),Object(i.a)([Object(a.b)({type:p.q})],v.prototype,"linearUnit",null),Object(i.a)([Object(a.b)({readOnly:!0})],v.prototype,"state",null),Object(i.a)([Object(a.b)()],v.prototype,"view",void 0);var y=v=Object(i.a)([Object(s.a)("esri.widgets.Measurement.MeasurementViewModel")],v),b=function(e){Kt(a,e);var t,r,i=Xt(a);function a(e,t){var n;return Wt(this,a),(n=i.call(this,e,t))._widgets=new Map,n.activeTool=null,n.activeWidget=null,n.areaUnit=null,n.iconClass="esri-icon-measure",n.label=void 0,n.linearUnit=null,n.messages=null,n.view=null,n.viewModel=new y,n}return Zt(a,[{key:"initialize",value:function(){var e=this;this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((function(t){e._set("activeWidget",t)})),this.own([this.watch(["view","activeTool"],(function(){e._getActiveWidget().then((function(t){e._set("activeWidget",t)}))})),this.watch("activeWidget",(function(t,n){e.viewModel.set("activeViewModel",t?t.viewModel:null),n&&(n.visible=!1)})),this.watch(["areaUnit","linearUnit"],(function(){return e._updateWidgetUnits()}))])}},{key:"destroy",value:function(){this._destroyWidgets()}},{key:"render",value:function(){var e=this.activeWidget,t=e&&!e.destroyed?e.render():null;return Object(l.a)("div",{class:"esri-measurement"},t)}},{key:"clear",value:function(){this.activeTool=null,this._destroyWidgets()}},{key:"startMeasurement",value:function(){var e=this.viewModel.activeViewModel;e&&Object(u.l)(e.start())}},{key:"_createWidget",value:(r=Ut(regeneratorRuntime.mark((function e(t){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.areaUnit,i=this.linearUnit,a=this.view,e.t0=t,e.next="area"===e.t0?4:"distance"===e.t0?21:"direct-line"===e.t0?27:33;break;case 4:o=a.type,e.t1=o,e.next="2d"===e.t1?8:"3d"===e.t1?14:20;break;case 8:return e.next=11,Promise.all([n.e(0),n.e(24)]).then(n.bind(null,"yKjB"));case 11:return e.t2=e.sent.default,e.t3={view:a,unit:r},e.abrupt("return",new e.t2(e.t3));case 14:return e.next=17,Promise.all([n.e(13),n.e(14),n.e(0),n.e(25)]).then(n.bind(null,"nEdL"));case 17:return e.t4=e.sent.default,e.t5={view:a,unit:r},e.abrupt("return",new e.t4(e.t5));case 20:return e.abrupt("return",null);case 21:return e.next=24,Promise.all([n.e(0),n.e(37)]).then(n.bind(null,"Yt8Z"));case 24:return e.t6=e.sent.default,e.t7={view:a,unit:i},e.abrupt("return",new e.t6(e.t7));case 27:return e.next=30,Promise.all([n.e(14),n.e(0),n.e(36)]).then(n.bind(null,"0Pge"));case 30:return e.t8=e.sent.default,e.t9={view:a,unit:i},e.abrupt("return",new e.t8(e.t9));case 33:return e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_destroyWidgets",value:function(){this._widgets.forEach((function(e){return e.destroy()})),this._widgets.clear()}},{key:"_getActiveWidget",value:(t=Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.activeTool,this.view&&t){e.next=3;break}return e.abrupt("return",null);case 3:if(n=null,!this._widgets.has(t)){e.next=8;break}(n=this._widgets.get(t)).visible=!0,e.next=16;break;case 8:return e.next=10,this._createWidget(t);case 10:if(n=e.sent){e.next=13;break}return e.abrupt("return",null);case 13:return e.next=15,n.viewModel.start();case 15:this._widgets.set(t,n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_updateWidgetUnits",value:function(){var e=this;this._widgets.forEach((function(t){var n=e.areaUnit,r=e.linearUnit;t.unit=function(e){return e&&("esri.widgets.AreaMeasurement2D"===e.declaredClass||"esri.widgets.AreaMeasurement3D"===e.declaredClass)}(t)?n:r}))}}]),a}(h.a);Object(i.a)([Object(o.a)("viewModel.activeTool")],b.prototype,"activeTool",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],b.prototype,"activeWidget",void 0),Object(i.a)([Object(o.a)("viewModel.areaUnit")],b.prototype,"areaUnit",void 0),Object(i.a)([Object(a.b)()],b.prototype,"iconClass",void 0),Object(i.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0),Object(i.a)([Object(o.a)("viewModel.linearUnit")],b.prototype,"linearUnit",void 0),Object(i.a)([Object(a.b)(),Object(c.a)("esri/widgets/Measurement/t9n/Measurement")],b.prototype,"messages",void 0),Object(i.a)([Object(o.a)("viewModel.view")],b.prototype,"view",void 0),Object(i.a)([Object(a.b)({type:y})],b.prototype,"viewModel",void 0);var g,m=b=Object(i.a)([Object(s.a)("esri.widgets.Measurement")],b),w=n("mKlZ"),O=n("NoDi"),j=n("ofXK"),_=n("8WOb"),x=["widgetContainer"],k=function(e){return{selectedBtn:e}},S=function(e){return{active:e}},M=((g=function(){function e(t,n){var r=this;Wt(this,e),this.widgetToggleService=t,this.sketchSelectionService=n,this.isOpen=!1,this.isAreaActive=null,this.measurement=new m,this.subscriptions$=this.widgetToggleService.widgetViewChanged.subscribe((function(e){"measurement"!==e.name&&r.isOpen&&(r.clearMeasurements(),r.toggle())}))}return Zt(e,[{key:"ngOnInit",value:function(){this.measurement.view=this.mapView,this.measurement.container=this.widgetContainerDiv.nativeElement,this.measurement.linearUnit="us-feet",this.measurement.areaUnit="acres"}},{key:"ngOnDestroy",value:function(){this.subscriptions$.unsubscribe()}},{key:"distanceMeasurement",value:function(){this.measurement.activeTool="distance",this.isAreaActive=!1,this.updateSketchState(!1)}},{key:"areaMeasurement",value:function(){this.measurement.activeTool="area",this.isAreaActive=!0,this.updateSketchState(!1)}},{key:"clearMeasurements",value:function(){this.measurement.clear(),this.isAreaActive=null,this.updateSketchState(!0)}},{key:"updateSketchState",value:function(e){this.sketchSelectionService.changeSketchSelectionMode("measure",e)}},{key:"toggle",value:function(){this.isOpen?this.clearMeasurements():(this.widgetToggleService.changeWidgetView("measurement",this.isOpen),this.updateSketchState(!this.isOpen)),this.isOpen=!this.isOpen}}]),e}()).\u0275fac=function(e){return new(e||g)(r.fc(w.a),r.fc(O.a))},g.\u0275cmp=r.Zb({type:g,selectors:[["app-measurement-widget"]],viewQuery:function(e,t){var n;1&e&&r.Xc(x,3),2&e&&r.Ic(n=r.sc())&&(t.widgetContainerDiv=n.first)},inputs:{mapView:"mapView"},decls:14,vars:13,consts:[["title","Measurement",1,"measurementToggleBtn",3,"ngClass","click"],["src","assets/icons/measure.png","aria-label","basemap gallery"],[1,"measureBody",3,"hidden"],[1,"widgetTitle"],[1,"widgetTitleText"],[3,"header","itemName","fillColor"],[1,"widgetCloseBtn","ui-icon","dt-icon-close",3,"click"],[1,"measureContent","overflow-y-auto"],["id","distanceButton","type","button","title","Measure distance between two or more points",1,"action-button","esri-icon-measure-line","bg-pmlo_secondary","text-white",3,"ngClass","click"],["id","areaButton","type","button","title","Measure area",1,"action-button","esri-icon-measure-area","bg-pmlo_secondary","text-white","ml-2",3,"ngClass","click"],["id","clearButton","type","button","title","Clear Measurements",1,"action-button","esri-icon-trash","bg-pmlo_secondary","text-white","ml-2",3,"click"],["widgetContainer",""]],template:function(e,t){1&e&&(r.kc(0,"button",0),r.rc("click",(function(){return t.toggle()})),r.gc(1,"img",1),r.jc(),r.kc(2,"div",2),r.kc(3,"div",3),r.kc(4,"span",4),r.Tc(5,"Measurement"),r.jc(),r.gc(6,"app-help-button",5),r.kc(7,"i",6),r.rc("click",(function(){return t.toggle()})),r.jc(),r.jc(),r.kc(8,"div",7),r.kc(9,"button",8),r.rc("click",(function(){return t.distanceMeasurement()})),r.jc(),r.kc(10,"button",9),r.rc("click",(function(){return t.areaMeasurement()})),r.jc(),r.kc(11,"button",10),r.rc("click",(function(){return t.clearMeasurements()})),r.jc(),r.gc(12,"div",null,11),r.jc(),r.jc()),2&e&&(r.Bc("ngClass",r.Ec(7,k,t.isOpen)),r.Tb(2),r.Bc("hidden",!t.isOpen),r.Tb(4),r.Bc("header","Measurement")("itemName","measurement")("fillColor","white"),r.Tb(3),r.Bc("ngClass",r.Ec(9,S,!1===t.isAreaActive)),r.Tb(1),r.Bc("ngClass",r.Ec(11,S,!0===t.isAreaActive)))},directives:[j.k,_.a],styles:[".measurementToggleBtn[_ngcontent-%COMP%]{position:absolute;top:calc(7.5em + var(--map-button-height));right:1em;height:var(--map-button-height);width:var(--map-button-width)}.measurementToggleBtn.selectedBtn[_ngcontent-%COMP%]{box-sizing:border-box;border:2px solid #0ff}.measureBody[_ngcontent-%COMP%]{position:absolute;top:calc(7.5em + var(--map-button-height) + 3em);right:1em;width:15em;background:#fff;display:flex;flex-direction:column;box-shadow:0 0 10px rgba(0,0,0,.611764705882353);z-index:1}.action-button[_ngcontent-%COMP%]{font-size:16px;border:1px solid #d3d3d3;height:40px;width:40px;text-align:center;box-shadow:0 0 1px rgba(0,0,0,.3);border-radius:5px}.measureContent[_ngcontent-%COMP%]{padding:10px}.action-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #000}.active[_ngcontent-%COMP%]{border:2px solid #0ff}"]}),g)},W9Wu:function(e,t,n){"use strict";n.r(t);var r,i=n("pO5D"),a=n("wSAH"),o=n("nR38"),s=n("srIe"),u=n("6S2I"),c=n("WbKI"),l=n("Gj5k"),h=n("+opI"),f=n("r88o"),p=n("C4aV"),d=n("04ZG"),v=n("Cduq"),y=n("zlDU"),b=n("4EHJ"),g=(n("ju1D"),n("9AIY"),n("9MzC")),m=n("WZb1"),w=n("OvF4"),O=n("LE9a"),j=n("wdpY"),_=n("SFah"),x=n("Lqtk"),k=n("H9eC"),S=n("r0DZ"),M=n("pqNC"),I=n("5pQd"),T=n("VLTf"),A=n("5k2a"),C=n("IvSi"),E=n("uRH/"),P=(n("ZnuT"),n("tCO6"),n("2gBT")),R=(n("JhoD"),n("tI3Y"),n("R4xK"),n("/1dM")),D=n("XNvV"),L=n("+Xal"),N=n("gLc9"),F=n("f/qv"),z=n("ag7Y"),V=n("zqDF"),G=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).expression=null,r.name=null,r.returnType="boolean",r.title=null,r}return Zt(n,[{key:"clone",value:function(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),n}(z.a);Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],G.prototype,"expression",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],G.prototype,"name",void 0),Object(i.a)([Object(c.b)({type:["boolean"],json:{write:!0}})],G.prototype,"returnType",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],G.prototype,"title",void 0);var U=G=r=Object(i.a)([Object(d.a)("esri.form.ExpressionInfo")],G),B=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.label=null,r.type=null,r.visibilityExpression=null,r}return n}(z.a);Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],B.prototype,"description",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],B.prototype,"label",void 0),Object(i.a)([Object(c.b)()],B.prototype,"type",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],B.prototype,"visibilityExpression",void 0);var q,H=B=Object(i.a)([Object(d.a)("esri.form.elements.Element")],B),W=q=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type=null,r}return Zt(n,[{key:"clone",value:function(){return new q({type:this.type})}}]),n}(z.a);Object(i.a)([Object(c.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],W.prototype,"type",void 0);var J,Z=W=q=Object(i.a)([Object(d.a)("esri.form.elements.inputs.AttachmentInput")],W),K=J=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).attachmentKeyword=null,r.editable=!0,r.input=null,r.type="attachment",r}return Zt(n,[{key:"clone",value:function(){return new J({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}}]),n}(H);Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],K.prototype,"attachmentKeyword",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{write:!0}})],K.prototype,"editable",void 0),Object(i.a)([Object(c.b)({type:Z,json:{read:{source:"inputType"},write:{target:"inputType"}}})],K.prototype,"input",void 0),Object(i.a)([Object(c.b)({type:["attachment"],json:{read:!1,write:!0}})],K.prototype,"type",void 0);var Y=K=J=Object(i.a)([Object(d.a)("esri.form.elements.AttachmentElement")],K),X=n("WXCn"),Q=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type=null,r}return n}(z.a);Object(i.a)([Object(c.b)()],Q.prototype,"type",void 0);var $=Q=Object(i.a)([Object(d.a)("esri.form.elements.inputs.Input")],Q),ee=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).maxLength=null,r.minLength=0,r}return n}($);Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],ee.prototype,"maxLength",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],ee.prototype,"minLength",void 0);var te,ne=ee=Object(i.a)([Object(d.a)("esri.form.elements.inputs.TextInput")],ee),re=te=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="barcode-scanner",r}return Zt(n,[{key:"clone",value:function(){return new te({maxLength:this.maxLength,minLength:this.minLength})}}]),n}(ne);Object(i.a)([Object(c.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],re.prototype,"type",void 0);var ie,ae=re=te=Object(i.a)([Object(d.a)("esri.form.elements.inputs.BarcodeScannerInput")],re),oe=ie=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).noValueOptionLabel=null,r.showNoValueOption=!1,r.type="combo-box",r}return Zt(n,[{key:"clone",value:function(){return new ie({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}}]),n}($);Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],oe.prototype,"noValueOptionLabel",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{write:!0}})],oe.prototype,"showNoValueOption",void 0),Object(i.a)([Object(c.b)({type:["combo-box"],json:{read:!1,write:!0}})],oe.prototype,"type",void 0);var se,ue=oe=ie=Object(i.a)([Object(d.a)("esri.form.elements.inputs.ComboBoxInput")],oe);function ce(e){return null!=e?new Date(e):null}function le(e){return e?e.getTime():null}var he=se=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).includeTime=!1,r.max=null,r.min=null,r.type="datetime-picker",r}return Zt(n,[{key:"readMax",value:function(e,t){return ce(t.max)}},{key:"writeMax",value:function(e,t){t.max=le(e)}},{key:"readMin",value:function(e,t){return ce(t.min)}},{key:"writeMin",value:function(e,t){t.min=le(e)}},{key:"clone",value:function(){return new se({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}}]),n}($);Object(i.a)([Object(c.b)({type:Boolean,json:{write:!0}})],he.prototype,"includeTime",void 0),Object(i.a)([Object(c.b)({type:Date,json:{type:Number,write:!0}})],he.prototype,"max",void 0),Object(i.a)([Object(f.a)("max")],he.prototype,"readMax",null),Object(i.a)([Object(v.a)("max")],he.prototype,"writeMax",null),Object(i.a)([Object(c.b)({type:Date,json:{type:Number,write:!0}})],he.prototype,"min",void 0),Object(i.a)([Object(f.a)("min")],he.prototype,"readMin",null),Object(i.a)([Object(v.a)("min")],he.prototype,"writeMin",null),Object(i.a)([Object(c.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],he.prototype,"type",void 0);var fe,pe=he=se=Object(i.a)([Object(d.a)("esri.form.elements.inputs.DateTimePickerInput")],he),de=fe=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).noValueOptionLabel=null,r.showNoValueOption=!1,r.type="radio-buttons",r}return Zt(n,[{key:"clone",value:function(){return new fe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}}]),n}($);Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],de.prototype,"noValueOptionLabel",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{write:!0}})],de.prototype,"showNoValueOption",void 0),Object(i.a)([Object(c.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],de.prototype,"type",void 0);var ve,ye=de=fe=Object(i.a)([Object(d.a)("esri.form.elements.inputs.RadioButtonsInput")],de),be=ve=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="text-area",r}return Zt(n,[{key:"clone",value:function(){return new ve({maxLength:this.maxLength,minLength:this.minLength})}}]),n}(ne);Object(i.a)([Object(c.b)({type:["text-area"],json:{read:!1,write:!0}})],be.prototype,"type",void 0);var ge,me=be=ve=Object(i.a)([Object(d.a)("esri.form.elements.inputs.TextAreaInput")],be),we=ge=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="text-box",r}return Zt(n,[{key:"clone",value:function(){return new ge({maxLength:this.maxLength,minLength:this.minLength})}}]),n}(ne);Object(i.a)([Object(c.b)({type:["text-box"],json:{read:!1,write:!0}})],we.prototype,"type",void 0);var Oe,je={base:$,key:"type",typeMap:{"barcode-scanner":ae,"combo-box":ue,"datetime-picker":pe,"radio-buttons":ye,"text-area":me,"text-box":we=ge=Object(i.a)([Object(d.a)("esri.form.elements.inputs.TextBoxInput")],we)}},_e=Oe=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).domain=null,r.editable=!0,r.fieldName=null,r.hint=null,r.input=null,r.requiredExpression=null,r.type="field",r}return Zt(n,[{key:"clone",value:function(){return new Oe({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}}]),n}(H);Object(i.a)([Object(c.b)({types:X.d,json:{read:{reader:X.b},write:!0}})],_e.prototype,"domain",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{write:!0}})],_e.prototype,"editable",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],_e.prototype,"fieldName",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],_e.prototype,"hint",void 0),Object(i.a)([Object(c.b)({types:je,json:{read:{source:"inputType"},write:{target:"inputType"}}})],_e.prototype,"input",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],_e.prototype,"requiredExpression",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:!1,write:!0}})],_e.prototype,"type",void 0);var xe,ke=_e=Oe=Object(i.a)([Object(d.a)("esri.form.elements.FieldElement")],_e),Se=n("ouUy"),Me=xe=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).displayCount=null,r.displayType="list",r.editable=!0,r.orderByFields=null,r.relationshipId=null,r.type="relationship",r}return Zt(n,[{key:"clone",value:function(){return new xe({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(F.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}}]),n}(H);Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],Me.prototype,"displayCount",void 0),Object(i.a)([Object(c.b)({type:["list"],json:{write:!0}})],Me.prototype,"displayType",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{write:!0}})],Me.prototype,"editable",void 0),Object(i.a)([Object(c.b)({type:[Se.a],json:{write:!0}})],Me.prototype,"orderByFields",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],Me.prototype,"relationshipId",void 0),Object(i.a)([Object(c.b)({type:["relationship"],json:{read:!1,write:!0}})],Me.prototype,"type",void 0);var Ie,Te=Me=xe=Object(i.a)([Object(d.a)("esri.form.elements.RelationshipElement")],Me);function Ae(e){return{typesWithGroup:{base:H,key:"type",typeMap:{attachment:Y,field:ke,group:e,relationship:Te}},typesWithoutGroup:{base:H,key:"type",typeMap:{attachment:Y,field:ke,relationship:Te}}}}function Ce(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return r[e.type].fromJSON(e)}))}function Ee(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return e.toJSON()}))}function Pe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?e.map((function(e){return Object(V.k)(n?t.typesWithGroup:t.typesWithoutGroup,e)})):null}var Re=Ie=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).elements=null,r.initialState="expanded",r.type="group",r}return Zt(n,[{key:"castElements",value:function(e){return Pe(e,Le,!1)}},{key:"readElements",value:function(e,t){return Ce(t.formElements,Le,!1)}},{key:"writeElements",value:function(e,t){t.formElements=Ee(e,Le,!1)}},{key:"clone",value:function(){return new Ie({description:this.description,elements:Object(F.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}}]),n}(H);Object(i.a)([Object(c.b)({json:{write:!0}})],Re.prototype,"elements",void 0),Object(i.a)([Object(l.a)("elements")],Re.prototype,"castElements",null),Object(i.a)([Object(f.a)("elements",["formElements"])],Re.prototype,"readElements",null),Object(i.a)([Object(v.a)("elements")],Re.prototype,"writeElements",null),Object(i.a)([Object(c.b)({type:["collapsed","expanded"],json:{write:!0}})],Re.prototype,"initialState",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:!1,write:!0}})],Re.prototype,"type",void 0);var De,Le=Ae(Re=Ie=Object(i.a)([Object(d.a)("esri.form.elements.GroupElement")],Re)),Ne=Ae(Re),Fe=De=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.elements=null,r.expressionInfos=null,r.title=null,r}return Zt(n,[{key:"castElements",value:function(e){return Pe(e,Ne)}},{key:"readElements",value:function(e,t){return Ce(t.formElements,Ne)}},{key:"writeElements",value:function(e,t){t.formElements=Ee(e,Ne)}},{key:"clone",value:function(){return new De({description:this.description,expressionInfos:Object(F.a)(this.expressionInfos),elements:Object(F.a)(this.elements),title:this.title})}}]),n}(z.a);Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],Fe.prototype,"description",void 0),Object(i.a)([Object(c.b)({json:{write:!0}})],Fe.prototype,"elements",void 0),Object(i.a)([Object(l.a)("elements")],Fe.prototype,"castElements",null),Object(i.a)([Object(f.a)("elements",["formElements"])],Fe.prototype,"readElements",null),Object(i.a)([Object(v.a)("elements")],Fe.prototype,"writeElements",null),Object(i.a)([Object(c.b)({type:[U],json:{write:!0}})],Fe.prototype,"expressionInfos",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],Fe.prototype,"title",void 0);var ze=Fe=De=Object(i.a)([Object(d.a)("esri.form.FormTemplate")],Fe),Ve=n("8prj"),Ge=n("y/NR"),Ue=n("Ehki"),Be=n("dOLD"),qe=(n("4GrV"),n("+rMe")),He=n("bV/r"),We=n("jWBI"),Je=n("36Co"),Ze=n("iRQj"),Ke=n("6HyS"),Ye=0,Xe=u.a.getLogger("esri.layers.graphics.sources.MemorySource"),Qe=function(e){Kt(o,e);var t,n,r,i=Xt(o);function o(e){var t;return Wt(this,o),(t=i.call(this,e))._idToClientGraphic=null,t.type="memory",t}return Zt(o,[{key:"load",value:function(e){var t=Object(s.k)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"workerGeometryType",get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:(r=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.load(n);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,n);case 5:if(r=e.sent,Object(Ke.a)(t,this.layer.spatialReference,r),i=Ve.default.fromJSON(r),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",i);case 10:a=this.layer.objectIdField,o=Vt(i.features);try{for(o.s();!(s=o.n()).done;)u=s.value,(c=this._idToClientGraphic.get(u.attributes[a]))&&(u.geometry=c.geometry)}catch(h){o.e(h)}finally{o.f()}return e.abrupt("return",(i.geometryType=this.layer.geometryType,i));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"queryFeaturesJSON",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new y.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(n);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,n);case 7:return r=e.sent,e.abrupt("return",(Object(Ke.a)(t,this.layer.spatialReference,r),r));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"queryFeatureCount",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,n)}))}},{key:"queryObjectIds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,n)}))}},{key:"queryExtent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,n)})).then((function(e){return{count:e.count,extent:w.a.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("querySnapping",e,n)}))}},{key:"_applyEdits",value:function(e){var t=this;if(!this._connection)throw new y.a("feature-layer-source:edit-failure","Memory source not loaded");var n=this.layer.objectIdField,r=null,i=[],a=[],o=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[n]?e.attributes[n]:null};if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures){var s,u=Vt(e.deleteFeatures);try{for(u.s();!(s=u.n()).done;){var c=o(s.value);null!=c&&i.push(c)}}catch(v){u.e(v)}finally{u.f()}}var l=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){var h,f=Vt(e.updateFeatures);try{for(f.s();!(h=f.n()).done;){var p=h.value;if(a.push(this._serializeFeature(p)),l){var d=o(p);null!=d&&l.set(d,p)}}}catch(v){f.e(v)}finally{f.f()}}return Object(Ze.b)(r?r.features:null,a,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:a,deletes:i}).then((function(e){var n=e.fullExtent,i=e.featureEditResults;if(t.fullExtent=n,r&&r.finish(i.uidToObjectId),t._idToClientGraphic){if(l){var a,o=Vt(i.updateResults);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.success){var u=l.get(s.objectId);null!=u&&t._addIdToClientGraphic(u)}}}catch(v){o.e(v)}finally{o.f()}}var c,h=Vt(i.deleteResults);try{for(h.s();!(c=h.n()).done;){var f=c.value;f.success&&t._idToClientGraphic.delete(f.objectId)}}catch(v){h.e(v)}finally{h.f()}}return t._createEditsResult(i)}))}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new y.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,n=new Array(e.length),r=null,i=0;i<e.length;i++){var a=e[i],o=this._serializeFeature(a);!r&&Object(s.k)(a.geometry)&&(r=a.geometry.type),n[i]=o,t.set(""+o.uid,a)}var u=this;return{features:n,inferredGeometryType:r,finish:function(e){var n=u.sourceJSON.objectIdField;for(var r in e){var i=e[r],a=t.get(r);a&&(a.attributes||(a.attributes={}),-1===i?delete a.attributes[n]:a.attributes[n]=i,u._addIdToClientGraphic(a))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=e.attributes&&e.attributes[this.sourceJSON.objectIdField];null!=t&&this._idToClientGraphic.set(t,e)}}},{key:"_requiresClientGraphicMapping",value:function(){return this._geometryTypeRequiresClientGraphicMapping(this.layer.geometryType||this.sourceJSON.geometryType)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,n=this._geometryForSerialization(e),r=(Ye++).toString();return n?{uid:r,geometry:n.toJSON(),attributes:t}:{uid:r,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(s.j)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Ue.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,u,c,l,h,f,p,d,v,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Je.b)("MemorySourceWorker",{strategy:Object(a.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,n=this.layer,r=n.fields,i=n.spatialReference,o=n.objectIdField,s=n.hasM,u=n.hasZ,c=n.timeInfo,l="defaults"===this.layer.originOf("spatialReference"),h=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){Xe.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),f={features:h.features,fields:r&&r.map((function(e){return e.toJSON()})),geometryType:Be.c.toJSON(this.workerGeometryType),hasM:s,hasZ:u,objectIdField:o,spatialReference:l?null:i&&i.toJSON(),timeInfo:c?c.toJSON():null},e.next=8,this._connection.invoke("load",f,{signal:t});case 8:p=e.sent,d=Vt(p.warnings);try{for(d.s();!(v=d.n()).done;)y=v.value,Xe.warn(y.message,{layer:this.layer,warning:y})}catch(g){d.e(g)}finally{d.f()}p.featureErrors.length&&Xe.warn("Encountered ".concat(p.featureErrors.length," validation errors while loading features"),p.featureErrors),b=p.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(b.geometryType=Be.c.toJSON(h.inferredGeometryType)),"mesh"!==b.geometryType&&"mesh"!==this.layer.geometryType||(b.hasZ=!0),this.sourceJSON=b,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(p.assignedObjectIds);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(He.a.LoadableMixin(Object(qe.b)(O.a)));Object(i.a)([Object(Ge.a)({Type:We.a,ensureType:Object(V.m)(We.a)})],Qe.prototype,"itemType",void 0),Object(i.a)([Object(c.b)()],Qe.prototype,"type",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],Qe.prototype,"layer",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],Qe.prototype,"workerGeometryType",null),Object(i.a)([Object(c.b)()],Qe.prototype,"sourceJSON",void 0);var $e,et=Qe=Object(i.a)([Object(d.a)("esri.layers.graphics.sources.MemorySource")],Qe),tt=n("PVlI"),nt=n("mXvl"),rt=n("iyhF"),it=n("DbUH"),at=n("jhcG"),ot=n("WmKv"),st=n("+AYZ"),ut=n("YBpl"),ct=$e=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"clone",value:function(){var e=this.name,t=this.fields,n=this.isAscending,r=this.isUnique,i=this.description;return new $e({name:e,fields:t,isAscending:n,isUnique:r,description:i})}}]),n}(z.a);Object(i.a)([Object(c.b)({constructOnly:!0})],ct.prototype,"name",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],ct.prototype,"fields",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],ct.prototype,"isAscending",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],ct.prototype,"isUnique",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],ct.prototype,"description",void 0),ct=$e=Object(i.a)([Object(d.a)("esri.layers.support.FeatureIndex")],ct);var lt=n("7MGP"),ht=n("wkZP"),ft=n("o9qb"),pt=n("kbDD"),dt=n("Bbcg"),vt=n("rOQw"),yt=n("orEy"),bt=n("L+uT"),gt=n("gEht"),mt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).shapeAreaField=null,r.shapeLengthField=null,r.units=null,r}return n}(z.a);Object(i.a)([Object(c.b)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],mt.prototype,"shapeAreaField",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],mt.prototype,"shapeLengthField",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:function(e){return gt.a.read(e)||gt.n.read(e)}}})],mt.prototype,"units",void 0);var wt=mt=Object(i.a)([Object(d.a)("esri.layers.support.GeometryFieldsInfo")],mt),Ot=n("EOvV"),jt=n("AMWc"),_t=new h.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),xt=new h.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),kt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).cardinality=null,r.composite=null,r.id=null,r.keyField=null,r.keyFieldInRelationshipTable=null,r.name=null,r.relatedTableId=null,r.relationshipTableId=null,r.role=null,r}return n}(z.a);Object(i.a)([Object(c.b)({json:{read:_t.read,write:_t.write}})],kt.prototype,"cardinality",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"composite",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"id",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"keyField",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"keyFieldInRelationshipTable",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"name",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"relatedTableId",void 0),Object(i.a)([Object(c.b)({json:{read:!0,write:!0}})],kt.prototype,"relationshipTableId",void 0),Object(i.a)([Object(c.b)({json:{read:xt.read,write:xt.write}})],kt.prototype,"role",void 0);var St=kt=Object(i.a)([Object(d.a)("esri.layers.support.Relationship")],kt),Mt=n("Ykwf"),It=n("YOx9"),Tt=n("9Ruv"),At=n("tSEa"),Ct=n("xk++"),Et=n("n6Nx"),Pt=new h.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Rt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Lt="FeatureLayer",Ft=u.a.getLogger("esri.layers.FeatureLayer");function zt(e){return e&&e instanceof O.a}function Gt(e,t,n){return!!(e&&e.hasOwnProperty(t)?e[t]:n)}function Bt(e,t,n){return e&&e.hasOwnProperty(t)?e[t]:n}var qt=Object(bt.a)();function Ht(e,t,n){var r=!(null==n||!n.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}var Jt=function(e){Kt(c,e);var t,r,i,u=Xt(c);function c(){var e;Wt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=u.call.apply(u,[this].concat(n)))._handles=new S.a,e.capabilities=null,e.charts=null,e.copyright=null,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingEnabled=!0,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.floorInfo=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryFieldsInfo=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=m.a.WGS84,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(O.a.ofType(ct)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Zt(c,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles=Object(s.e)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Nt({url:e},t):e}},{key:"load",value:function(e){var t=this,n=Object(s.k)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((function(e){return e})).then(Ut(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(n);case 3:null!=(r=e.sent)&&(t.layerId=r);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new y.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(n);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)}))));return this.addResolvingPromise(r),Promise.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(n).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return{attachment:this._readAttachmentCapabilities((t=t.layerDefinition||t).attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"createQueryVersion",get:function(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,n){return this._readEditingEnabled(t,!0,n)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,n,r){this._writeEditingEnabled(e,t,!0,r)}},{key:"readEditingInfo",value:function(e,t){var n=t.editingInfo;return n?{lastEditDate:null!=n.lastEditDate?new Date(n.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(dt.a)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,n,r){Object(dt.c)(e,t,"layerDefinition.featureReduction",r)}},{key:"fieldsIndex",get:function(){return new N.a(this.fields||[])}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,n,r){null!=r&&r.writeLayerSchema&&Object(o.c)(n,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var n,r=Vt(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(a){r.e(a)}finally{r.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var n,r=Vt(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(a){r.e(a)}finally{r.f()}}}},{key:"parsedUrl",get:function(){var e=this.url?Object(b.J)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(b.y)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(b.y)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(j.j)(e,this.fields),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,n){var r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){var i=Object(L.b)(r,t,n)||void 0;return i||Ft.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:n}),i}if(t.defaultSymbol)return t.types&&t.types.length?new P.a({defaultSymbol:Yt(t.defaultSymbol,t,n),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:Yt(e.symbol,e,n)}}))}):new R.a({symbol:Yt(t.defaultSymbol,t,n)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(zt(t)&&this._resetMemorySource(t),zt(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof O.a?new et({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var n=Ve.default.fromJSON(t.featureSet);return new et({layer:this,items:n&&n.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var n=t.editFieldsInfo,r=n&&n.creatorField,i=n&&n.editorField;return e=e&&e.map((function(e){return vt.a.fromJSON(e)})),this._fixTemplates(e,r),this._fixTemplates(e,i),e}},{key:"readTitle",value:function(e,t){var n=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(n){var i=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(T.i)(this.url,n):n;var a=n;if(!a&&this.url){var o=Object(T.e)(this.url);Object(s.k)(o)&&(a=o.title)}if(!a)return;return"item-title-and-service-name"===this.sublayerTitleMode&&i&&i!==a&&(a=i+" - "+a),Object(T.a)(a)}if("item-title"===this.sublayerTitleMode&&r)return r}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var n=(t=t.layerDefinition||t).typeIdField;if(n){var r=Object(j.n)(t.fields,n);r&&(n=r.name)}return n}},{key:"readTypes",value:function(e,t){var n=this;e=(t=t.layerDefinition||t).types;var r=t.editFieldsInfo,i=r&&r.creatorField,a=r&&r.editorField;return e&&e.map((function(e){return e=yt.a.fromJSON(e),n._fixTemplates(e.templates,i),n._fixTemplates(e.templates,a),e}))}},{key:"url",set:function(e){var t=Object(T.h)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:Ft});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,n,r){Object(T.j)(this,e,null,t,r)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in n.source))throw new y.a(Lt,"Layer source does not support addAttachment capability");return n.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,n){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in r.source))throw new y.a(Lt,"Layer source does not support updateAttachment capability");return r.source.updateAttachment(e,t,n)}))}},{key:"applyEdits",value:(i=Ut(regeneratorRuntime.mark((function e(t,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(122).then(n.bind(null,"CJn3"));case 2:return i=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",i.applyEdits(this,this.source,t,r));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"on",value:function(e,t){return Dt(en(c.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(Tt.a)(this,e)}},{key:"createGraphicsSource",value:(r=Ut(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load({signal:t})));case 2:return e.next=4,Promise.all([n.e(0),n.e(123)]).then(n.bind(null,"DlAm"));case 4:return r=e.sent,Object(g.u)(t),e.next=8,new r.default({layer:this}).load({signal:t});case 8:return i=e.sent,e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:i}),i));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"createQuery",value:function(){var e=new Ct.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var n=this.timeOffset,r=this.timeExtent;return e.timeExtent=null!=n&&null!=r?r.offset(-n.value,n.unit):r||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in n.source))throw new y.a(Lt,"Layer source does not support deleteAttachments capability");return n.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new y.a(Lt,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,n=this.types;if(!t||!e)return null;var r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;var i=null;return n.some((function(e){var t=e.id;return null!=t&&(t.toString()===r.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var n=this.getFeatureType(t&&t.feature);if(n){var r=n.domains&&n.domains[e];if(r&&"inherited"!==r.type)return r}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var n=this;return e=At.a.from(e),this.load().then((function(){if(!n.get("capabilities.data.supportsAttachment"))throw new y.a(Lt,"this layer doesn't support attachments");var t=e,r=t.attachmentTypes,i=t.objectIds,a=t.globalIds,o=t.num,s=t.size,u=t.start,c=t.where;if(!n.get("capabilities.operations.supportsQueryAttachments")){var l=r&&r.length,h=a&&a.length,f=s&&s.length;if(i&&i.length>1||l||h||f||o||u||c)throw new y.a(Lt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||c))throw new y.a(Lt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in n.source))throw new y.a(Lt,"Layer source does not support queryAttachments capability",e);return n.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var n=this;return this.load().then((function(){return n.source.queryFeatures(Ct.a.from(e)||n.createQuery(),t)})).then((function(e){if(e&&e.features){var t,r=Vt(e.features);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.layer=i.sourceLayer=n}}catch(a){r.e(a)}finally{r.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var n=this;return this.load().then((function(){if(n.source.queryObjectIds)return n.source.queryObjectIds(Ct.a.from(e)||n.createQuery(),t);throw new y.a(Lt,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var n=this;return this.load().then((function(){if(n.source.queryFeatureCount)return n.source.queryFeatureCount(Ct.a.from(e)||n.createQuery(),t);throw new y.a(Lt,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var n=this;return this.load().then((function(){if(n.source.queryExtent)return n.source.queryExtent(Ct.a.from(e)||n.createQuery(),t);throw new y.a(Lt,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var n=this;return this.load().then((function(){if("queryRelatedFeatures"in n.source)return n.source.queryRelatedFeatures(Et.a.from(e),t);throw new y.a(Lt,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var n=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in n.source)return n.source.queryRelatedFeaturesCount(Et.a.from(e),t);throw new y.a(Lt,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"read",value:function(e,t){var n=e.featureCollection;if(n){var r=n.layers;r&&1===r.length&&(Dt(en(c.prototype),"read",this).call(this,r[0],t),null!=n.showLegend&&Dt(en(c.prototype),"read",this).call(this,{showLegend:n.showLegend},t))}Dt(en(c.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var n,r,i=(t=Nt(Nt({},t),{},{writeLayerSchema:null!=(n=null==(r=t)?void 0:r.writeLayerSchema)?n:this._hasMemorySource()})).origin,a=t.layerContainerType,o=t.messages;if(this.isTable){if("web-scene"===i||"web-map"===i&&"tables"!==a)return o&&o.push(new y.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return o&&o.push(new y.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===i&&"tables"===a)return o&&o.push(new y.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Dt(en(c.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,n){var r,i=null==(r=e.layerDefinition)?void 0:r.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,!(t&&"web-map"===(null==n?void 0:n.origin)&&!this._hasMemorySource()&&i)||this._hasEditingCapability(i))}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,n,r){if(!e){var i,a,s=null!=(i=this.capabilities)&&null!=(a=i.operations)&&a.supportsSync?"Query,Sync":"Query";Object(o.c)("layerDefinition.capabilities",s,t),!n||null!=r&&r.writeLayerSchema||(t.capabilities=s)}}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,n=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[n]?void 0:Promise.reject(new y.a(Lt,"feature is missing the identifying attribute "+n)):Promise.reject(new y.a(Lt,"'attributes' are required on a feature to query attachments")):Promise.reject(new y.a(Lt,"A feature is required to add/delete/update attachments")):Promise.reject(new y.a(Lt,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(x.default)(this.url,{query:Nt({f:"json"},this.customParameters),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(j.j)(this.renderer,this.fields),Object(j.k)(this.timeInfo,this.fields),Object(It.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var n=e.prototype&&e.prototype.attributes;n&&t&&delete n[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new y.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new y.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var n=Rt[e.name];n&&(t[n]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Gt(e,"isDataVersioned",!1),supportsAttachment:Gt(e,"hasAttachments",!1),supportsM:Gt(e,"hasM",!1),supportsZ:Gt(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Gt(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var n=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],r=-1!==n.indexOf("editing"),i=r&&-1!==n.indexOf("create"),a=r&&-1!==n.indexOf("delete"),o=r&&-1!==n.indexOf("update"),s=-1!==n.indexOf("changetracking");return r&&!(i||a||o)&&(i=a=o=!0),{supportsCalculate:Gt(t,"supportsCalculate",!1),supportsTruncate:Gt(t,"supportsTruncate",!1),supportsValidateSql:Gt(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:a,supportsEditing:r,supportsChangeTracking:s,supportsQuery:-1!==n.indexOf("query"),supportsQueryAttachments:Gt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Gt(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==n.indexOf("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Gt(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t,n=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,o=null==(t=this.url)?void 0:t.includes("MapServer"),s=!Object(a.a)("mapserver-pbf-enabled")&&o&&this.version<10.81,u=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var n=t.toLowerCase().trim();return n&&e.add(n),e}),new Set);return{supportsStatistics:Gt(n,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Gt(n,"supportsPercentileStatistics",!1),supportsCentroid:Gt(n,"supportsReturningGeometryCentroid",!1),supportsDistance:Gt(n,"supportsQueryWithDistance",!1),supportsDistinct:Gt(n,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Gt(n,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Gt(n,"supportsReturningGeometryProperties",!1),supportsHavingClause:Gt(n,"supportsHavingClause",!1),supportsOrderBy:Gt(n,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Gt(n,"supportsPagination",!1),supportsQuantization:Gt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Gt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Gt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Gt(n,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Gt(n,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Gt(n,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Gt(e,"useStandardizedQueries",!1),supportsQueryByOthers:Gt(r,"allowOthersToQuery",!0),supportsHistoricMoment:Gt(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!s&&u.has("pbf"),supportsDisjointSpatialRelationship:Gt(n,"supportsDisjointSpatialRel",!1),supportsCacheHint:Gt(n,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Bt(e,"maxRecordCountFactor",void 0),maxRecordCount:Bt(e,"maxRecordCount",void 0),standardMaxRecordCount:Bt(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Bt(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,n=Gt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Gt(t,"supportsQueryRelatedPagination",!1),supportsCount:n,supportsOrderBy:n}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Gt(e,"allowGeometryUpdates",!0),supportsGlobalId:Gt(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:Gt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Gt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Gt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Gt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Gt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Gt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Gt(t,"allowOthersToUpdate",!0)}}}]),c}(Object(nt.a)(Object(ut.a)(Object(ot.a)(Object(at.a)(Object(tt.a)(Object(E.a)(Object(it.a)(Object(I.a)(Object(rt.a)(M.a))))))))));Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],Jt.prototype,"capabilities",void 0),Object(i.a)([Object(f.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Jt.prototype,"readCapabilities",null),Object(i.a)([Object(c.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Jt.prototype,"charts",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"createQueryVersion",null),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Jt.prototype,"copyright",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Jt.prototype,"displayField",void 0),Object(i.a)([Object(c.b)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],Jt.prototype,"definitionExpression",void 0),Object(i.a)([Object(c.b)({types:k.g,readOnly:!0})],Jt.prototype,"defaultSymbol",void 0),Object(i.a)([Object(c.b)({type:Mt.a})],Jt.prototype,"dynamicDataSource",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"editFieldsInfo",void 0),Object(i.a)([Object(c.b)({type:Boolean})],Jt.prototype,"editingEnabled",void 0),Object(i.a)([Object(f.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Jt.prototype,"readEditingEnabled",null),Object(i.a)([Object(f.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Jt.prototype,"readEditingEnabledFromWebMap",null),Object(i.a)([Object(v.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Jt.prototype,"writeEditingEnabled",null),Object(i.a)([Object(v.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Jt.prototype,"writeEditingEnabledToWebMap",null),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"editingInfo",void 0),Object(i.a)([Object(f.a)("editingInfo")],Jt.prototype,"readEditingInfo",null),Object(i.a)([Object(c.b)(C.b)],Jt.prototype,"elevationInfo",void 0),Object(i.a)([Object(c.b)({types:{key:"type",base:lt.a,typeMap:{selection:pt.a,cluster:ft.a}},json:{write:{target:"layerDefinition.featureReduction"}}})],Jt.prototype,"featureReduction",void 0),Object(i.a)([Object(f.a)("featureReduction",["layerDefinition.featureReduction"])],Jt.prototype,"readFeatureReduction",null),Object(i.a)([Object(v.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:dt.b}})],Jt.prototype,"writeWebSceneFeatureReduction",null),Object(i.a)([Object(c.b)(Nt(Nt({},qt.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Ht}}}}}))],Jt.prototype,"fields",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"fieldsIndex",null),Object(i.a)([Object(c.b)({type:jt.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"},origins:{"web-scene":{write:!1}}}})],Jt.prototype,"floorInfo",void 0),Object(i.a)([Object(c.b)({type:ze,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Jt.prototype,"formTemplate",void 0),Object(i.a)([Object(c.b)({type:w.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Jt.prototype,"fullExtent",void 0),Object(i.a)([Object(c.b)()],Jt.prototype,"gdbVersion",void 0),Object(i.a)([Object(c.b)({readOnly:!0,type:wt,json:{read:{source:"geometryProperties"}}})],Jt.prototype,"geometryFieldsInfo",void 0),Object(i.a)([Object(c.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Pt.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Ht,writer:function(e,t,n){var r=e?Pt.toJSON(e):null;r&&Object(o.c)(n,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:Pt.read}}})],Jt.prototype,"geometryType",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Jt.prototype,"hasM",void 0),Object(i.a)([Object(c.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Jt.prototype,"hasZ",void 0),Object(i.a)([Object(c.b)({readOnly:!0,type:A.a})],Jt.prototype,"heightModelInfo",void 0),Object(i.a)([Object(c.b)({type:Date})],Jt.prototype,"historicMoment",void 0),Object(i.a)([Object(c.b)(C.c)],Jt.prototype,"id",void 0),Object(i.a)([Object(c.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Jt.prototype,"isTable",void 0),Object(i.a)([Object(f.a)("service","isTable",["type","geometryType"]),Object(f.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Jt.prototype,"readIsTable",null),Object(i.a)([Object(v.a)("web-map","isTable")],Jt.prototype,"writeIsTable",null),Object(i.a)([Object(c.b)(C.d)],Jt.prototype,"labelsVisible",void 0),Object(i.a)([Object(c.b)({type:[ht.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Ot.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Ot.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Jt.prototype,"labelingInfo",void 0),Object(i.a)([Object(c.b)(C.i)],Jt.prototype,"opacity",void 0),Object(i.a)([Object(c.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Jt.prototype,"layerId",void 0),Object(i.a)([Object(c.b)(C.e)],Jt.prototype,"legendEnabled",void 0),Object(i.a)([Object(c.b)({type:["show","hide"]})],Jt.prototype,"listMode",void 0),Object(i.a)([Object(c.b)(C.g)],Jt.prototype,"minScale",void 0),Object(i.a)([Object(f.a)("service","minScale",["minScale","effectiveMinScale"])],Jt.prototype,"readMinScale",null),Object(i.a)([Object(c.b)(C.f)],Jt.prototype,"maxScale",void 0),Object(i.a)([Object(f.a)("service","maxScale",["maxScale","effectiveMaxScale"])],Jt.prototype,"readMaxScale",null),Object(i.a)([Object(c.b)({type:String})],Jt.prototype,"globalIdField",void 0),Object(i.a)([Object(f.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(f.a)("service","globalIdField",["globalIdField","fields"])],Jt.prototype,"readGlobalIdFieldFromService",null),Object(i.a)([Object(c.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Ht}}}}})],Jt.prototype,"objectIdField",void 0),Object(i.a)([Object(f.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(f.a)("service","objectIdField",["objectIdField","fields"])],Jt.prototype,"readObjectIdFieldFromService",null),Object(i.a)([Object(c.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Jt.prototype,"operationalLayerType",void 0),Object(i.a)([Object(c.b)(qt.outFields)],Jt.prototype,"outFields",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"parsedUrl",null),Object(i.a)([Object(c.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Jt.prototype,"path",void 0),Object(i.a)([Object(c.b)(C.j)],Jt.prototype,"popupEnabled",void 0),Object(i.a)([Object(c.b)({type:_.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Jt.prototype,"popupTemplate",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"defaultPopupTemplate",null),Object(i.a)([Object(c.b)({type:[St],readOnly:!0})],Jt.prototype,"relationships",void 0),Object(i.a)([Object(c.b)({types:D.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:D.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:L.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,n){return{ignoreOrigin:null==n?void 0:n.writeLayerSchema}},writer:L.c}}})],Jt.prototype,"renderer",null),Object(i.a)([Object(f.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(f.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Jt.prototype,"readRenderer",null),Object(i.a)([Object(c.b)()],Jt.prototype,"sourceJSON",void 0),Object(i.a)([Object(c.b)({type:Boolean})],Jt.prototype,"returnM",void 0),Object(i.a)([Object(c.b)({type:Boolean})],Jt.prototype,"returnZ",void 0),Object(i.a)([Object(c.b)(C.m)],Jt.prototype,"screenSizePerspectiveEnabled",void 0),Object(i.a)([Object(c.b)()],Jt.prototype,"source",null),Object(i.a)([Object(l.a)("source")],Jt.prototype,"castSource",null),Object(i.a)([Object(f.a)("portal-item","source",["featureSet"]),Object(f.a)("web-map","source",["featureSet"])],Jt.prototype,"readSource",null),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"serviceDefinitionExpression",void 0),Object(i.a)([Object(f.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Jt.prototype,"readServiceDefinitionExpression",null),Object(i.a)([Object(c.b)({type:m.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Jt.prototype,"spatialReference",void 0),Object(i.a)([Object(c.b)({type:[vt.a]})],Jt.prototype,"templates",void 0),Object(i.a)([Object(f.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Jt.prototype,"readTemplates",null),Object(i.a)([Object(c.b)({type:st.a})],Jt.prototype,"timeInfo",void 0),Object(i.a)([Object(c.b)()],Jt.prototype,"title",void 0),Object(i.a)([Object(f.a)("service","title",["name"]),Object(f.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Jt.prototype,"readTitle",null),Object(i.a)([Object(f.a)("web-map","title",["layerDefinition.name","title"])],Jt.prototype,"readTitleFromWebMap",null),Object(i.a)([Object(c.b)({type:String})],Jt.prototype,"sublayerTitleMode",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Jt.prototype,"trackIdField",void 0),Object(i.a)([Object(c.b)({json:{read:!1}})],Jt.prototype,"type",void 0),Object(i.a)([Object(c.b)({type:String})],Jt.prototype,"typeIdField",void 0),Object(i.a)([Object(f.a)("service","typeIdField"),Object(f.a)("typeIdField",["layerDefinition.typeIdField"])],Jt.prototype,"readTypeIdField",null),Object(i.a)([Object(c.b)({type:[yt.a]})],Jt.prototype,"types",void 0),Object(i.a)([Object(f.a)("service","types",["types"]),Object(f.a)("types",["layerDefinition.types"])],Jt.prototype,"readTypes",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{write:!1}})],Jt.prototype,"serverGens",void 0),Object(i.a)([Object(c.b)({type:O.a.ofType(ct),readOnly:!0})],Jt.prototype,"indexes",void 0),Object(i.a)([Object(c.b)(C.n)],Jt.prototype,"url",null),Object(i.a)([Object(v.a)("url")],Jt.prototype,"writeUrl",null),Object(i.a)([Object(c.b)({readOnly:!0})],Jt.prototype,"userIsAdmin",void 0),Object(i.a)([Object(c.b)({json:{origins:{service:{read:!0}},read:!1}})],Jt.prototype,"version",void 0),Object(i.a)([Object(f.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Jt.prototype,"readVersion",null),Object(i.a)([Object(c.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Jt.prototype,"visible",void 0),Object(i.a)([Object(f.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Jt.prototype,"readVisible",null),Jt=Object(i.a)([Object(d.a)("esri.layers.FeatureLayer")],Jt);var Yt=Object(p.b)({types:k.k});t.default=Jt},WBXD:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return x}));var r=n("srIe"),i=n("KrcW"),a=n("L/MW"),o=n("ikTR"),s=n("9MzC"),u=function e(t){Wt(this,e),this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1},c=function(){function e(t){Wt(this,e),this.callback=t,this.isActive=!0}return Zt(e,[{key:"remove",value:function(){this.isActive=!1}}]),e}(),l=0,h={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},f=["prepare","preRender","render","postRender","update"],p=[],d=new o.a,v=function(){function e(t){Wt(this,e),this._task=t}return Zt(e,[{key:"remove",value:function(){this._task.removed=!0}},{key:"pause",value:function(){this._task.paused=!0}},{key:"resume",value:function(){this._task.paused=!1}}]),e}(),y={frameTasks:d,willDispatch:!1,clearFrameTasks:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.forAll((function(e){e.removed=!0})),e&&j()},dispatch:_,executeFrameTasks:function(e){var t=e-l;l=e;for(var n=1e3/60,r=Math.max(0,t-n),i=function(i){var a=performance.now(),o=f[i];d.forAll((function(a){var s;a.paused||a.removed||(0===i&&a.ticks++,a.phases[o]&&(h.time=e,h.deltaTime=0===a.ticks?0:t,h.elapsedFrameTime=performance.now()-e,h.frameDuration=n-r,null==(s=a.phases[o])||s.call(a,h)))})),k[i].record(performance.now()-a)},a=0;a<f.length;a++)i(a);j(),S.record(performance.now()-e)}};function b(e){var t=new c(e);return p.push(t),y.willDispatch||(y.willDispatch=!0,Object(i.a)(_)),t}function g(e){var t=new u(e);return d.push(t),null==m&&(l=performance.now(),m=requestAnimationFrame(w)),new v(t)}var m=null;function w(){var e=performance.now();m=null,m=d.length>0?requestAnimationFrame(w):null,y.executeFrameTasks(e)}var O=new o.a;function j(){d.forAll((function(e){e.removed&&O.push(e)})),d.removeUnorderedMany(O.data,O.length),O.clear()}function _(){for(;p.length;){var e=Object(r.d)(p.shift());e.isActive&&e.callback()}y.willDispatch=!1}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=Object(s.g)(),r=function r(){Object(s.n)(t)?n.reject(Object(s.e)()):0===e?n():(--e,Object(i.a)((function(){return r()})))};return r(),n.promise}var k=f.map((function(e){return new a.a(e)})),S=new a.a("total")},WVfK:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u}));var r=n("VeZB"),i=n("EVMh");function a(e,t,n,r){var i=n.typedBuffer,a=n.typedBufferStride,o=e.length;r*=a;for(var s=0;s<o;++s){var u=2*e[s];i[r]=t[u],i[r+1]=t[u+1],r+=a}}function o(e,t,n,r,i){var a=n.typedBuffer,o=n.typedBufferStride,s=e.length;if(r*=o,null==i||1===i)for(var u=0;u<s;++u){var c=3*e[u];a[r]=t[c],a[r+1]=t[c+1],a[r+2]=t[c+2],r+=o}else for(var l=0;l<s;++l)for(var h=3*e[l],f=0;f<i;++f)a[r]=t[h],a[r+1]=t[h+1],a[r+2]=t[h+2],r+=o}function s(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=n.typedBuffer,o=n.typedBufferStride,s=e.length;if(r*=o,1===i)for(var u=0;u<s;++u){var c=4*e[u];a[r]=t[c],a[r+1]=t[c+1],a[r+2]=t[c+2],a[r+3]=t[c+3],r+=o}else for(var l=0;l<s;++l)for(var h=4*e[l],f=0;f<i;++f)a[r]=t[h],a[r+1]=t[h+1],a[r+2]=t[h+2],a[r+3]=t[h+3],r+=o}function u(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(n){var s=r.typedBuffer,u=r.typedBufferStride,c=e.length,l=n[0],h=n[1],f=n[2],p=n[4],d=n[5],v=n[6],y=n[8],b=n[9],g=n[10],m=n[12],w=n[13],O=n[14];if(i*=u,1===a)for(var j=0;j<c;++j){var _=3*e[j],x=t[_],k=t[_+1],S=t[_+2];s[i]=l*x+p*k+y*S+m,s[i+1]=h*x+d*k+b*S+w,s[i+2]=f*x+v*k+g*S+O,i+=u}else for(var M=0;M<c;++M)for(var I=3*e[M],T=t[I],A=t[I+1],C=t[I+2],E=l*T+p*A+y*C+m,P=h*T+d*A+b*C+w,R=f*T+v*A+g*C+O,D=0;D<a;++D)s[i]=E,s[i+1]=P,s[i+2]=R,i+=u}else o(e,t,r,i,a)}function c(e,t,n,r,i,a){if(n){var s=r.typedBuffer,u=r.typedBufferStride,c=e.length,l=n[0],h=n[1],f=n[2],p=n[4],d=n[5],v=n[6],y=n[8],b=n[9],g=n[10],m=Math.abs(1-l*l+p*p+y*y)>1e-5||Math.abs(1-h*h+d*d+b*b)>1e-5||Math.abs(1-f*f+v*v+g*g)>1e-5,w=1e-6,O=1-w;if(i*=u,1===a)for(var j=0;j<c;++j){var _=3*e[j],x=t[_],k=t[_+1],S=t[_+2],M=l*x+p*k+y*S,I=h*x+d*k+b*S,T=f*x+v*k+g*S;if(m){var A=M*M+I*I+T*T;if(A<O&&A>w){var C=Math.sqrt(A);M/=C,I/=C,T/=C}}s[i+0]=M,s[i+1]=I,s[i+2]=T,i+=u}else for(var E=0;E<c;++E){var P=3*e[E],R=t[P],D=t[P+1],L=t[P+2],N=l*R+p*D+y*L,F=h*R+d*D+b*L,z=f*R+v*D+g*L;if(m){var V=N*N+F*F+z*z;if(V<O&&V>w){var G=Math.sqrt(V);N/=G,F/=G,z/=G}}for(var U=0;U<a;++U)s[i+0]=N,s[i+1]=F,s[i+2]=z,i+=u}}else o(e,t,r,i,a)}function l(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=r.typedBuffer,s=r.typedBufferStride,u=e.length;if(i*=s,1===a){if(4===n)for(var c=0;c<u;++c){var l=4*e[c];o[i]=t[l],o[i+1]=t[l+1],o[i+2]=t[l+2],o[i+3]=t[l+3],i+=s}else if(3===n)for(var h=0;h<u;++h){var f=3*e[h];o[i]=t[f],o[i+1]=t[f+1],o[i+2]=t[f+2],o[i+3]=255,i+=s}}else if(4===n)for(var p=0;p<u;++p)for(var d=4*e[p],v=0;v<a;++v)o[i]=t[d],o[i+1]=t[d+1],o[i+2]=t[d+2],o[i+3]=t[d+3],i+=s;else if(3===n)for(var y=0;y<u;++y)for(var b=3*e[y],g=0;g<a;++g)o[i]=t[b],o[i+1]=t[b+1],o[i+2]=t[b+2],o[i+3]=255,i+=s}function h(e,t,n,o,h,f){var p,d=Vt(t.fieldNames);try{for(d.s();!(p=d.n()).done;){var v=p.value,y=e.vertexAttributes.get(v),b=e.indices.get(v);if(y&&b)switch(v){case"position":Object(i.a)(3===y.size);var g=h.getField(v,r.u);g&&u(b,y.data,n,g,f);break;case"normal":Object(i.a)(3===y.size);var m=h.getField(v,r.u);m&&c(b,y.data,o,m,f,1);break;case"uv0":Object(i.a)(2===y.size);var w=h.getField(v,r.m);w&&a(b,y.data,w,f);break;case"color":Object(i.a)(3===y.size||4===y.size);var O=h.getField(v,r.J);O&&l(b,y.data,y.size,O,f);break;case"symbolColor":Object(i.a)(3===y.size||4===y.size);var j=h.getField(v,r.J);j&&l(b,y.data,y.size,j,f);break;case"tangent":Object(i.a)(4===y.size);var _=h.getField(v,r.C);_&&s(b,y.data,_,f)}}}catch(x){d.e(x)}finally{d.f()}}},WXCn:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n("wSAH");var r,i,a=n("Qzg2"),o=n("QQZE"),s=n("tanU"),u=n("3z0I");function c(e,t){switch(e.type){case"range":var n="range"in e?e.range[1]:e.maxValue;if(+t<("range"in e?e.range[0]:e.minValue)||+t>n)return r.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((function(e){return null==e||e.code!==t})))return r.INVALID_CODED_VALUE}return null}(i=r||(r={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",i.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var l={key:"type",base:a.a,typeMap:{range:u.a,"coded-value":o.a,inherited:s.a}};function h(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function f(e){if(!e||!e.type)return null;switch(e.type){case"range":return u.a.fromJSON(e);case"codedValue":return o.a.fromJSON(e);case"inherited":return s.a.fromJSON(e)}return null}},WYax:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),u=n("pdg3"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).active=!1,r.className=null,r.disabled=!1,r.id=null,r.indicator=!1,r.title=null,r.type=null,r.visible=!0,r}return Zt(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),n}(Object(u.a)(s.a));Object(i.a)([Object(a.b)()],c.prototype,"active",void 0),Object(i.a)([Object(a.b)()],c.prototype,"className",void 0),Object(i.a)([Object(a.b)()],c.prototype,"disabled",void 0),Object(i.a)([Object(a.b)()],c.prototype,"id",void 0),Object(i.a)([Object(a.b)()],c.prototype,"indicator",void 0),Object(i.a)([Object(a.b)()],c.prototype,"title",void 0),Object(i.a)([Object(a.b)()],c.prototype,"type",void 0),Object(i.a)([Object(a.b)()],c.prototype,"visible",void 0),c=r=Object(i.a)([Object(o.a)("esri.support.actions.ActionBase")],c),t.a=c},WZb1:function(e,t,n){"use strict";var r,i=n("pO5D"),a=n("f/qv"),o=n("zqDF"),s=n("WbKI"),u=n("04ZG"),c=n("Cduq"),l=n("ag7Y"),h=n("f4Nx"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).latestWkid=null,r.wkid=null,r.wkt=null,r.vcsWkid=null,r.latestVcsWkid=null,r.imageCoordinateSystem=null,r}return Zt(n,[{key:"normalizeCtorArgs",value:function(e){return e&&"object"==typeof e?e:Ft({},"string"==typeof e?"wkt":"wkid",e)}},{key:"isWGS84",get:function(){return Object(h.j)(this)}},{key:"isWebMercator",get:function(){return Object(h.m)(this)}},{key:"isGeographic",get:function(){return Object(h.f)(this)}},{key:"isWrappable",get:function(){return Object(h.n)(this)}},{key:"writeWkt",value:function(e,t){this.wkid||(t.wkt=e)}},{key:"clone",value:function(){if(this===r.WGS84)return r.WGS84;if(this===r.WebMercator)return r.WebMercator;var e=new r;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Object(a.a)(this.imageCoordinateSystem)),e}},{key:"equals",value:function(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;var t=e.imageCoordinateSystem,n=t.id,r=t.referenceServiceName,i=e.imageCoordinateSystem.geodataXform,a=this.imageCoordinateSystem;return null==n||i?JSON.stringify(a)===JSON.stringify(e.imageCoordinateSystem):r?a.id===n&&a.referenceServiceName===r:a.id===n}return Object(h.c)(this,e)}},{key:"toJSON",value:function(e){return this.write(void 0,e)}}],[{key:"fromJSON",value:function(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return r.WebMercator;if(4326===e.wkid)return r.WGS84}var t=new r;return t.read(e),t}}]),n}(l.a);f.GCS_NAD_1927=null,f.WGS84=null,f.WebMercator=null,Object(i.a)([Object(s.b)({readOnly:!0})],f.prototype,"isWGS84",null),Object(i.a)([Object(s.b)({readOnly:!0})],f.prototype,"isWebMercator",null),Object(i.a)([Object(s.b)({readOnly:!0})],f.prototype,"isGeographic",null),Object(i.a)([Object(s.b)({readOnly:!0})],f.prototype,"isWrappable",null),Object(i.a)([Object(s.b)({type:o.a,json:{write:!0}})],f.prototype,"latestWkid",void 0),Object(i.a)([Object(s.b)({type:o.a,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt}}}}}}})],f.prototype,"wkid",void 0),Object(i.a)([Object(s.b)({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid}}}}}}})],f.prototype,"wkt",void 0),Object(i.a)([Object(c.a)("wkt"),Object(c.a)("web-scene","wkt")],f.prototype,"writeWkt",null),Object(i.a)([Object(s.b)({type:o.a,json:{write:!0}})],f.prototype,"vcsWkid",void 0),Object(i.a)([Object(s.b)({type:o.a,json:{write:!0}})],f.prototype,"latestVcsWkid",void 0),Object(i.a)([Object(s.b)()],f.prototype,"imageCoordinateSystem",void 0),(f=r=Object(i.a)([Object(u.a)("esri.geometry.SpatialReference")],f)).prototype.toJSON.isDefaultToJSON=!0,f.GCS_NAD_1927=new f({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),f.WGS84=new f(h.a),f.WebMercator=new f(h.b),Object.freeze&&(Object.freeze(f.GCS_NAD_1927),Object.freeze(f.WGS84),Object.freeze(f.WebMercator)),t.a=f},WbKI:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n("6S2I"),i=n("zqDF"),a=n("nZ3f"),o=n("evjZ"),s=n("LdQC"),u=r.a.getLogger("esri.core.accessorSupport.decorators.property");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){if(t===Function.prototype)throw new Error("Inappropriate use of @property() on a static field: ".concat(t.name,".").concat(n,". Accessor does not support static properties."));var c=Object(o.b)(t,n);r&&(r.get||r.set?(c.get=r.get||c.get,c.set=r.set||c.set):"value"in r&&("value"in e&&u.warn('@property() will redefine the value of "'.concat(n,'" on "').concat(t.constructor.name,'" already defined in the metadata'),e),c.value=e.value=r.value)),null!=e.readOnly&&(c.readOnly=e.readOnly);var l=e.aliasOf;if(l){var f,p="string"==typeof l?l:l.source,d="string"==typeof l?null:!0===l.overridable;c.dependsOn=[p],c.get=function(){var e=Object(a.b)(this,p);if("function"==typeof e){f||(f=p.split(".").slice(0,-1).join("."));var t=Object(a.b)(this,f);t&&(e=e.bind(t))}return e},c.readOnly||(c.set=d?function(e){void 0!==e?this._override(n,e):this._clearOverride(n)}:function(e){Object(s.a)(this,p,e)})}var v=e.type,y=e.types;c.cast||(v?c.cast=function(e){var t=0,n=e;if(Object(i.n)(e))return Object(i.f)(e);for(;Array.isArray(n)&&1===n.length&&"string"!=typeof n[0]&&"number"!=typeof n[0];)n=n[0],t++;var r=n;if(Object(i.o)(r))return 0===t?Object(i.j)(r):Object(i.h)(Object(i.j)(r),t);if(1===t)return Object(i.b)(r);if(t>1)return Object(i.g)(r,t);var a=e;return a.from?a.from:Object(i.m)(a)}(v):y&&(c.cast=Array.isArray(y)?Object(i.c)(Object(i.k)(y[0])):Object(i.k)(y))),e.range&&(c.cast=h(c.cast,e.range)),Object(o.c)(c,e)}}function l(e,t,n){var r=Object(o.b)(e,n);r.json||(r.json={});var i=r.json;return void 0!==t&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function h(e,t){return function(n){var r=+e(n);return null!=t.step&&(r=Math.round(r/t.step)*t.step),null!=t.min&&(r=Math.max(t.min,r)),null!=t.max&&(r=Math.min(t.max,r)),r}}},WiJz:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("srIe"),i=n("Cy1f"),a=n("5DEt"),o=n("aAs6"),s=n("15Hh"),u=n("r+FG"),c=n("+JUG"),l=n("EVMh"),h=n("AD+e"),f=n("7Nfj"),p=n("8uAX"),d=function(){function e(){Wt(this,e),this._disposed=!1}return Zt(e,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}},{key:"acquire",value:function(e,t,n,r,i,a){this.id=Object(p.a)(),this.geometry=e,this.material=t,this.transformation=n,this.instanceParameters=r,this.origin=i,this._shaderTransformation=a,this._disposed=!1}},{key:"release",value:function(){this._disposed=!1}},{key:"dispose",value:function(){this._disposed=!0}},{key:"getStaticTransformation",value:function(){return this.transformation}},{key:"getShaderTransformation",value:function(){return Object(r.k)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}},{key:"computeAttachmentOrigin",value:function(e){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,e):this.geometry.computeAttachmentOrigin(e))&&(Object(a.l)(e,e,this.getStaticTransformation()),!0)}}]),e}();d.pool=new f.a(d);var v=n("vqnv"),y=n("tiP8"),b=function(e){Kt(n,e);var t=Xt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wt(this,n),(e=t.call(this)).type=1,e._geometryRecords=new Array,e._geometries=new Array,e._objectTransformation=Object(u.b)(),e._bvObjectSpace=new m,e._bvWorldSpace=new m,e._bvDirty=!0,e._hasVolatileTransformation=!1,e._visible=!0,e.castShadow=null==r.castShadow||r.castShadow,e.metadata=r.metadata,e.metadata&&e.metadata.isElevationSource&&(e.metadata.lastValidElevationBB=new g),e.transformation=Object(u.b)();var i=r.geometries,a=r.materials,o=r.transformations,s=r.origins;if(Array.isArray(i)){Object(l.a)(a.length===i.length,"Object3D: materials don't match geometries"),Object(l.a)(o.length===i.length,"Object3D: transformations don't match geometries"),e._geometryRecords.length=i.length,e._geometries.length=i.length;for(var c=0;c<i.length;c++)e._geometries[c]=i[c],e._geometryRecords[c]=d.pool.acquire(i[c],a[c],Object(u.c)(o[c]),{highlights:null,occludees:null,visible:!0},s&&s[c])}return e}return Zt(n,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"transformation",get:function(){return this._objectTransformation},set:function(e){Object(s.c)(this._objectTransformation,e),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}},{key:"dispose",value:function(){this._geometryRecords.length=0,this._geometries.length=0}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(e){Object(l.a)(null==this._parentLayer||null==e,"Object3D can only be added to a single Layer"),this._parentLayer=e}},{key:"getNumGeometryRecords",value:function(){return this._geometryRecords.length}},{key:"getGeometryRecord",value:function(e){return Object(l.a)(e>=0&&e<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[e]}},{key:"addGeometry",value:function(e,t,n,i,a,o){n=n||u.a,this._geometries.push(e);var s=d.pool.acquire(e,t,n,i||{highlights:null,occludees:null,visible:!0},a,o);return this._geometryRecords.push(s),this._hasVolatileTransformation=this._hasVolatileTransformation||Object(r.k)(s.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:s}),this._invalidateBoundingVolume(),s}},{key:"removeGeometry",value:function(e){var t=this._geometryRecords.splice(e,1)[0];return this._hasVolatileTransformation=Object(r.k)(t.shaderTransformation)?this._geometryRecords.some((function(e){return Object(r.k)(e.shaderTransformation)})):this._hasVolatileTransformation,t.dispose(),this._geometries.splice(e,1),this._emit("objectGeometryRemoved",{object:this,record:t}),this._invalidateBoundingVolume(),t}},{key:"removeAllGeometries",value:function(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}},{key:"geometryVertexAttrsUpdated",value:function(e){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[e]}),this._invalidateBoundingVolume()}},{key:"isVisible",get:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e;var t,n=Vt(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){t.value.instanceParameters.visible=this._visible}}catch(r){n.e(r)}finally{n.f()}this._emit("visibilityChanged",this)}},{key:"maskOccludee",value:function(){var e,t=new v.a(1),n=Vt(this._geometryRecords);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.instanceParameters.occludees=Object(y.b)(r.instanceParameters.occludees,t)}}catch(i){n.e(i)}finally{n.f()}return this._emit("occlusionChanged",this),t}},{key:"removeOcclude",value:function(e){var t,n=Vt(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.instanceParameters.occludees=Object(y.f)(r.instanceParameters.occludees,e)}}catch(i){n.e(i)}finally{n.f()}this._emit("occlusionChanged",this)}},{key:"highlight",value:function(){var e,t=new v.a(0),n=Vt(this._geometryRecords);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.instanceParameters.highlights=Object(y.b)(r.instanceParameters.highlights,t)}}catch(i){n.e(i)}finally{n.f()}return this._emit("highlightChanged",this),t}},{key:"removeHighlight",value:function(e){var t,n=Vt(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.instanceParameters.highlights=Object(y.f)(r.instanceParameters.highlights,e)}}catch(i){n.e(i)}finally{n.f()}this._emit("highlightChanged",this)}},{key:"getCombinedStaticTransformation",value:function(e,t){return Object(s.l)(Object(r.r)(t,Object(u.b)()),this.transformation,e.getStaticTransformation())}},{key:"getCombinedShaderTransformation",value:function(e,t){return t=t||Object(u.b)(),Object(s.l)(t,this.transformation,e.getShaderTransformation()),t}},{key:"hasVolativeTransformation",value:function(){return this._hasVolatileTransformation}},{key:"getBBMin",value:function(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}},{key:"getBBMax",value:function(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}},{key:"getBounds",value:function(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds}},{key:"_validateBoundingVolume",value:function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init(),this._bvWorldSpace.init();for(var e=0;e<this._geometryRecords.length;++e){var t=this._geometryRecords[e],n=this._geometries[e].boundingInfo;Object(r.k)(n)&&(this._calculateTransformedBoundingVolume(n,this._bvObjectSpace,t.getShaderTransformation()),this._calculateTransformedBoundingVolume(n,this._bvWorldSpace,this.getCombinedShaderTransformation(t)))}Object(a.h)(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),Object(a.h)(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);for(var s=Object(i.e)(),u=Object(i.e)(),c=Object(o.f)(this.transformation),l=0;l<this._geometryRecords.length;++l){var h=this._geometries[l].boundingInfo;if(!Object(r.j)(h)){var f=this._geometryRecords[l].getShaderTransformation(),p=Object(o.f)(f);Object(a.l)(s,h.getCenter(),f);var d=Object(a.n)(s,this._bvObjectSpace.bounds),v=h.getBSRadius()*p;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],d+v),Object(a.l)(u,s,this.transformation);var y=Object(a.n)(u,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],y+v*c)}}this._bvDirty=!1}}},{key:"_calculateTransformedBoundingVolume",value:function(e,t,n){var r=e.getBBMin(),o=e.getBBMax(),s=Object(i.d)(r),u=Object(i.d)(o);Object(a.l)(s,s,n),Object(a.l)(u,u,n);for(var c=0;c<3;++c)t.bbMin[c]=Math.min(t.bbMin[c],s[c],u[c]),t.bbMax[c]=Math.max(t.bbMax[c],s[c],u[c]);for(var l=0;l<3;++l){Object(a.j)(s,r),Object(a.j)(u,o),s[l]=o[l],u[l]=r[l],Object(a.l)(s,s,n),Object(a.l)(u,u,n);for(var h=0;h<3;++h)t.bbMin[h]=Math.min(t.bbMin[h],s[h],u[h]),t.bbMax[h]=Math.max(t.bbMax[h],s[h],u[h])}}},{key:"_invalidateBoundingVolume",value:function(){this._bvDirty=!0,Object(r.k)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}},{key:"_emit",value:function(e,t){Object(r.k)(this._parentLayer)&&this._parentLayer.events.emit(e,t)}},{key:"test",get:function(){var e=this;return{hasGeometry:function(t){return e._geometries.indexOf(t)>-1},getGeometryIndex:function(t){return e._geometries.indexOf(t)}}}}]),n}(h.a),g=function(){function e(){Wt(this,e),this.bbMin=Object(i.g)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=Object(i.g)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}return Zt(e,[{key:"isEmpty",value:function(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}]),e}(),m=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).bounds=Object(c.b)(),e}return Zt(n,[{key:"init",value:function(){Object(a.v)(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Object(a.v)(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),Object(c.a)(this.bounds)}}]),n}(g)},WmHL:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="map-layer",r}return Zt(n,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new r({mapLayerId:e,gdbVersion:t})}}]),n}(c.a);Object(i.a)([Object(s.a)({mapLayer:"map-layer"})],l.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],l.prototype,"mapLayerId",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"gdbVersion",void 0),l=r=Object(i.a)([Object(u.a)("esri.layers.support.source.MapLayerSource")],l)},WmKv:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG");n("4EHJ"),n("ju1D"),n("9AIY");var o=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return Zt(n,[{key:"scaleRangeId",get:function(){return"".concat(this.minScale,",").concat(this.maxScale)}}]),n}(e);return Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],t.prototype,"scaleRangeId",null),t=Object(r.a)([Object(a.a)("esri.layers.mixins.ScaleRangeLayer")],t)}},WqGO:function(e,t,n){var r=n("wsls"),i=n("DDWL"),a=n("LXJO"),o=(n("EoK7"),n("rrxl"),n("9lTW"),n("F9Ye")),s=n("RxWC"),u={1:o,5:s,3:s};function c(e,t){e.setInt32(0,9994),e.setInt32(28,1e3,!0),e.setInt32(32,t,!0)}function l(e,t){t.setFloat64(36,e.xmin,!0),t.setFloat64(44,e.ymin,!0),t.setFloat64(52,e.xmax,!0),t.setFloat64(60,e.ymax,!0)}e.exports=function(e,t,n,o){var s=r.geometries[t],h=u[s],f=100+4*(h.parts(n,s)-n.length)+h.shpLength(n),p=100+h.shxLength(n),d=new ArrayBuffer(f),v=new DataView(d),y=new ArrayBuffer(p),b=new DataView(y),g=h.extent(n);c(v,s),c(b,s),l(g,v),l(g,b),h.write(n,g,new DataView(d,100),new DataView(y,100),s),v.setInt32(24,f/2),b.setInt32(24,50+4*n.length),o(null,{shp:v,shx:b,dbf:i.structure(e),prj:a})}},X2wA:function(e,t,n){"use strict";function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return a()}},n.exports),n.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self},X668:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("srIe"),i=n("15Hh"),a=n("r+FG"),o=n("WiJz"),s=n("dI/Q"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e.view))._resources=null,r._transform=Object(a.b)(),r}return Zt(n,[{key:"object",get:function(){return Object(r.k)(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(e){Object(i.c)(this._transform,e),Object(r.k)(this._resources)&&(this._resources.object.transformation=this._transform,this._resources.layer.commit())}},{key:"recreate",value:function(){this.attached&&this.createResources()}},{key:"recreateGeometry",value:function(){if(!Object(r.j)(this._resources)){var e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries),this._resources.layer.commit()}}},{key:"createResources",value:function(){this.destroyResources();var e=this.view._stage;if(e){var t=new s.a({isPickable:!1});e.add(t);var n=new o.a({castShadow:!1});n.transformation=this._transform,this.createExternalResources(),this.createGeometries(n),e.addMany(n.geometries),this.forEachExternalMaterial((function(t){return e.add(t)})),e.add(n),t.add(n),t.commit(),this.visible||(n.setVisible(!1),t.commit()),this._resources={layer:t,object:n}}}},{key:"destroyResources",value:function(){var e=this.view._stage;!Object(r.j)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((function(t){e.remove(t),t.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}},{key:"updateVisibility",value:function(e){Object(r.j)(this._resources)||(this._resources.object.setVisible(e),this._resources.layer.commit())}}]),n}(n("9ToJ").a)},X8NZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("fXoL"),i=n("jH8C"),a=n("f8+1"),o=n("/WmU"),s=n("I0c2"),u=n("ofXK"),c=["modalRoot"],l=["modalBody"],h=["modalHeader"],f=["modalFooter"],p=["closeIcon"],d=function(e,t){return{"dt-icon-maximize":e,"dt-icon-normalize":t}};function v(e,t){if(1&e){var n=r.lc();r.kc(0,"i",13),r.rc("click",(function(e){return r.Lc(n),r.vc().toggleMaximize(e)})),r.jc()}if(2&e){var i=r.vc();r.Bc("ngClass",r.Fc(1,d,!i.maximized,i.maximized))}}function y(e,t){1&e&&(r.kc(0,"div",14,15),r.zc(2,2),r.jc())}var b=[[["",8,"app-modal-header"]],[["",8,"app-modal-body"]],[["",8,"app-modal-footer"]]],g=function(e){return{"overflow-x-hidden":e}},m=[".app-modal-header",".app-modal-body",".app-modal-footer"],w=function(){var e=function(){function e(t,n){var i=this;Wt(this,e),this.element=t,this.modalService=n,this.dragEnabled=!0,this.scrollTopEnable=!0,this.backdrop=!0,this.closeOnEscape=!0,this.headerBackgroundColor="#353535",this.isHelpModal=!1,this.isOverflowXHidden=!1,this.showFooter=!1,this.closeModal=new r.t,this.resizeEnd=new r.t,this.hasBeenDraggedBefore=!1,this.getDiffHeight=function(){var e=0;return i.modalFooter&&(e=i.modalFooter.nativeElement.offsetHeight),i.modalHeader.nativeElement.offsetHeight+e}}return Zt(e,[{key:"ngOnInit",value:function(){null===localStorage.getItem("_pmlo_help_showed")&&this.isHelpModal&&(this.show(),localStorage.setItem("_pmlo_help_showed","true"))}},{key:"ngAfterViewChecked",value:function(){this.executePostDisplayActions&&(this.hasBeenDraggedBefore||this.center(),this.executePostDisplayActions=!1)}},{key:"onKeyDown",value:function(e){this.closeOnEscape&&(e.preventDefault(),e.stopPropagation(),this.hide())}},{key:"onDragEnd",value:function(){this.hasBeenDraggedBefore=!0}},{key:"onWindowResize",value:function(){this.executePostDisplayActions=!0,this.center()}},{key:"show",value:function(){var e=this;this.executePostDisplayActions=!0,this.visible=!0,setTimeout((function(){e.modalRoot.nativeElement.focus(),e.scrollTopEnable&&(e.modalBody.nativeElement.scrollTop=0)}),1)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.modalService.closedFromButton.emit(this.modalHeader.nativeElement.innerText.trim()),this.visible=!1,this.closeModal.emit(!0),this.focusLastModal()}},{key:"center",value:function(){var e=this.modalRoot.nativeElement.offsetWidth,t=this.modalRoot.nativeElement.offsetHeight;0===e&&0===t&&(this.modalRoot.nativeElement.style.visibility="hidden",this.modalRoot.nativeElement.style.display="block",e=this.modalRoot.nativeElement.offsetWidth,t=this.modalRoot.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.display="none",this.modalRoot.nativeElement.style.visibility="visible");var n=Math.max((window.innerWidth-e)/2,0),r=Math.max((window.innerHeight-t)/2,0);this.modalRoot.nativeElement.style.left=n+"px",this.modalRoot.nativeElement.style.top=r+"px"}},{key:"initDrag",value:function(e){e.target!==this.closeIcon.nativeElement&&(this.maximized||(this.dragEventTarget=e))}},{key:"onResize",value:function(e){"vertical"===e.direction&&this.calcBodyHeight()}},{key:"calcBodyHeight",value:function(){var e=this.getDiffHeight();this.modalBody.nativeElement.style.height=this.modalRoot.nativeElement.offsetHeight-e+"px",this.modalBody.nativeElement.style.maxHeight="none"}},{key:"getMaxModalIndex",value:function(){return Object(i.d)(".ui-modal")}},{key:"focusLastModal",value:function(){var e=Object(i.a)(this.element.nativeElement.parentElement,".ui-modal");e&&e.focus()}},{key:"toggleMaximize",value:function(e){this.maximized?this.revertMaximize():this.maximize(),e.preventDefault()}},{key:"maximize",value:function(){this.preMaximizePageX=parseFloat(this.modalRoot.nativeElement.style.top),this.preMaximizePageY=parseFloat(this.modalRoot.nativeElement.style.left),this.preMaximizeRootWidth=this.modalRoot.nativeElement.offsetWidth,this.preMaximizeRootHeight=this.modalRoot.nativeElement.offsetHeight,this.preMaximizeBodyHeight=this.modalBody.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.top="0px",this.modalRoot.nativeElement.style.left="0px",this.modalRoot.nativeElement.style.width="100vw",this.modalRoot.nativeElement.style.height="100vh";var e=this.getDiffHeight();this.modalBody.nativeElement.style.height="calc(100vh - "+e+"px)",this.modalBody.nativeElement.style.maxHeight="none",this.maximized=!0}},{key:"revertMaximize",value:function(){this.modalRoot.nativeElement.style.top=this.preMaximizePageX+"px",this.modalRoot.nativeElement.style.left=this.preMaximizePageY+"px",this.modalRoot.nativeElement.style.width=this.preMaximizeRootWidth+"px",this.modalRoot.nativeElement.style.height=this.preMaximizeRootHeight+"px",this.modalBody.nativeElement.style.height=this.preMaximizeBodyHeight+"px",this.maximized=!1}},{key:"moveOnTop",value:function(){if(!this.backdrop){var e=this.getMaxModalIndex(),t=parseFloat(window.getComputedStyle(this.modalRoot.nativeElement).zIndex)||0;t<=e&&(t=e+1,this.modalRoot.nativeElement.style.zIndex=t.toString())}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(r.r),r.fc(a.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["app-modal"]],viewQuery:function(e,t){var n;(1&e&&(r.Xc(c,1),r.Xc(l,1),r.Xc(h,1),r.Xc(f,1),r.Xc(p,1)),2&e)&&(r.Ic(n=r.sc())&&(t.modalRoot=n.first),r.Ic(n=r.sc())&&(t.modalBody=n.first),r.Ic(n=r.sc())&&(t.modalHeader=n.first),r.Ic(n=r.sc())&&(t.modalFooter=n.first),r.Ic(n=r.sc())&&(t.closeIcon=n.first))},hostBindings:function(e,t){1&e&&r.rc("keydown.esc",(function(e){return t.onKeyDown(e)}))("resize",(function(){return t.onWindowResize()}),!1,r.Kc)},inputs:{dragEnabled:"dragEnabled",scrollTopEnable:"scrollTopEnable",maximizable:"maximizable",backdrop:"backdrop",inViewport:"inViewport",closeOnEscape:"closeOnEscape",headerBackgroundColor:"headerBackgroundColor",isHelpModal:"isHelpModal",isOverflowXHidden:"isOverflowXHidden",showFooter:"showFooter"},outputs:{closeModal:"closeModal",resizeEnd:"resizeEnd"},ngContentSelectors:m,decls:15,vars:19,consts:[[1,"ui-modal-overlay"],["tabindex","-1","role","dialog","appResizable","","appDraggable","",1,"ui-modal",3,"south","east","southEast","dragEnabled","dragEventTarget","inViewport","resizing","resizeEnd","mousedown","touchstart","dragEnd"],["modalRoot",""],[1,"ui-modal-header",3,"mousedown","touchstart"],["modalHeader",""],[1,"ui-titlebar"],[1,"ui-controlbar"],["class","ui-icon",3,"ngClass","click",4,"ngIf"],[1,"ui-icon","dt-icon-close",3,"click"],["closeIcon",""],[1,"ui-modal-body",3,"ngClass"],["modalBody",""],["class","ui-modal-footer",4,"ngIf"],[1,"ui-icon",3,"ngClass","click"],[1,"ui-modal-footer"],["modalFooter",""]],template:function(e,t){1&e&&(r.Ac(b),r.gc(0,"div",0),r.kc(1,"div",1,2),r.rc("resizing",(function(e){return t.onResize(e)}))("resizeEnd",(function(e){return t.resizeEnd.emit(e)}))("mousedown",(function(){return t.moveOnTop()}))("touchstart",(function(){return t.moveOnTop()}))("dragEnd",(function(){return t.onDragEnd()})),r.kc(3,"div",3,4),r.rc("mousedown",(function(e){return t.initDrag(e)}))("touchstart",(function(e){return t.initDrag(e)})),r.kc(5,"div",5),r.zc(6),r.jc(),r.kc(7,"div",6),r.Sc(8,v,1,4,"i",7),r.kc(9,"i",8,9),r.rc("click",(function(){return t.hide(!0)})),r.jc(),r.jc(),r.jc(),r.kc(11,"div",10,11),r.zc(13,1),r.jc(),r.Sc(14,y,3,0,"div",12),r.jc()),2&e&&(r.Pc("display",t.visible&&t.backdrop?"block":"none"),r.Tb(1),r.Pc("display",t.visible?"block":"none"),r.Bc("south",!0)("east",!0)("southEast",!0)("dragEnabled",t.dragEnabled)("dragEventTarget",t.dragEventTarget)("inViewport",t.inViewport),r.Tb(2),r.Pc("background",t.headerBackgroundColor)("cursor",t.dragEnabled?"move":null),r.Tb(5),r.Bc("ngIf",t.maximizable),r.Tb(3),r.Bc("ngClass",r.Ec(17,g,t.isOverflowXHidden)),r.Tb(3),r.Bc("ngIf",t.showFooter))},directives:[o.a,s.a,u.m,u.k],styles:['.ui-modal *,.ui-modal :after,.ui-modal :before{box-sizing:border-box}.ui-modal,.ui-modal-overlay{z-index:20}.ui-modal-overlay{width:100%;height:100%;background-color:rgba(0,0,0,.2)}.ui-modal,.ui-modal-overlay{display:none;position:fixed;left:0;top:0}.ui-modal{outline:none;background-color:#fff;padding:0;box-shadow:0 .25rem .5rem 0 rgba(0,0,0,.2),0 .375rem 1.25rem 0 rgba(0,0,0,.19)}.ui-modal-header{position:relative;padding:.5rem 1rem;color:#fff;-moz-user-select:none;-webkit-user-select:none;user-select:none;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.ui-modal-body{position:relative;padding:.625rem 1rem;max-height:calc(100vh - 12.5rem);height:calc(100% - 43px);overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}.ui-modal-footer{padding:1rem}.ui-titlebar{flex-grow:1;height:100%;overflow:hidden;font-size:1.125rem}.ui-controlbar,.ui-titlebar{display:flex;align-items:center}.ui-controlbar{background-color:inherit}.ui-icon{cursor:pointer;margin-left:.3em;font-size:1.4rem}.ui-icon:hover{opacity:.75}.dragging{cursor:move;outline:0;box-shadow:0 .25rem .5rem rgba(102,175,233,.6),0 .375rem 1.25rem rgba(0,0,0,.2);-webkit-user-select:none;-moz-user-select:none;user-select:none}.dt-icon-maximize{background-color:transparent;border:.1em solid;border-top:.2em solid}.dt-icon-maximize,.dt-icon-normalize{position:relative;display:inline-block;width:1em;height:1em}.dt-icon-normalize{background-color:inherit}.dt-icon-normalize:after,.dt-icon-normalize:before{content:"";position:absolute;width:.8em;height:.8em;border:.1em solid;background-color:inherit}.dt-icon-normalize:before{top:0;right:0}.dt-icon-normalize:after{bottom:0;left:0;border-top-width:.2em}.dt-icon-close{position:relative;display:inline-block;width:1em;height:1em;background-color:transparent}.dt-icon-close:after,.dt-icon-close:before{content:"";position:absolute;width:1.2em;height:.18em;top:50%;left:50%;background-color:currentColor}.dt-icon-close:before{transform:translate(-50%,-50%) rotate(-225deg)}.dt-icon-close:after{transform:translate(-50%,-50%) rotate(225deg)}.resize-handle-e{position:absolute;cursor:e-resize;height:100%;width:.4375rem;right:-.3125rem;top:0}.resize-handle-se{position:absolute;cursor:se-resize;height:1rem;width:1rem;right:0;bottom:0}.resize-handle-s{position:absolute;cursor:s-resize;height:.4375rem;width:100%;bottom:-.3125rem;left:0}.resizing{-webkit-user-select:none;-moz-user-select:none;user-select:none}'],encapsulation:2}),e}()},XACZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c}));var r=n("zqDF"),i=n("nvBr"),a=n("qRWG"),o=n("Qr4e"),s={type:i.a,json:{type:[r.a],default:null,read:{source:["color","transparency"],reader:function(e,t){var n=null!=t.transparency?Object(o.b)(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new i.a([r[0]||0,r[1]||0,r[2]||0,n]):null}},write:{target:{color:{type:[r.a]},transparency:{type:r.a}},writer:function(e,t){t.color=e.toJSON().slice(0,3);var n=Object(o.a)(e.a);0!==n&&(t.transparency=n)}}}},u={type:Number,cast:a.k,json:{write:!0}},c={type:[Number],cast:function(e){return null!=e?e:Array.isArray(e)?e.map(a.k):null},json:{read:!1,write:!1}}},XNvV:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h}));var r=n("ZnuT"),i=n("tCO6"),a=n("2gBT"),o=n("JhoD"),s=n("tI3Y"),u=n("R4xK"),c=n("/1dM"),l={key:"type",base:r.a,typeMap:{heatmap:u.a,simple:c.a,"unique-value":a.a,"class-breaks":i.a,"dot-density":s.a,dictionary:o.default},errorContext:"renderer"},h={key:"type",base:r.a,typeMap:{simple:c.a,"unique-value":a.a,"class-breaks":i.a},errorContext:"renderer"}},XdUx:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=n("zqDF"),o=n("WbKI"),s=n("Gj5k"),u=n("+opI"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=n("W4Nn"),f=i.a.getLogger("esri.renderers.visualVariables.VisualVariable"),p=new u.a({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),d=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).index=null,r.type=null,r.field=null,r.valueExpression=null,r.valueExpressionTitle=null,r.legendOptions=null,r}return Zt(n,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(f.error(".field: field must be a string value"),null):Object(a.l)(e)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression}},{key:"clone",value:function(){}},{key:"getAttributeHash",value:function(){return"".concat(this.type,"-").concat(this.field,"-").concat(this.valueExpression)}}]),n}(l.a);Object(r.a)([Object(o.b)()],d.prototype,"index",void 0),Object(r.a)([Object(o.b)({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],d.prototype,"type",void 0),Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],d.prototype,"field",void 0),Object(r.a)([Object(s.a)("field")],d.prototype,"castField",null),Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],d.prototype,"arcadeRequired",null),Object(r.a)([Object(o.b)({type:h.a,json:{write:!0}})],d.prototype,"legendOptions",void 0),d=Object(r.a)([Object(c.a)("esri.renderers.visualVariables.VisualVariable")],d),t.a=d},XnA0:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("srIe");function i(e){return e&&"function"==typeof e.highlight}function a(e,t,n){return Object(r.j)(e)||e>n&&(0===t||e<t)}},XpBf:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("fXoL"),i=n("ofXK"),a=n("3Pt+"),o=(n("7HKM"),n("FhEM")),s=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c,a.f,o.a]]}),e}()},XvKw:function(e,t,n){"use strict";function r(){return new Float32Array(4)}function i(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function o(){return r()}function s(){return a(1,1,1,1)}function u(){return a(1,0,0,0)}function c(){return a(0,1,0,0)}function l(){return a(0,0,1,0)}function h(){return a(0,0,0,1)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var f=o(),p=s(),d=u(),v=c(),y=l(),b=h();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:function(e,t){return new Float32Array(e,t,4)},zeros:o,ones:s,unitX:u,unitY:c,unitZ:l,unitW:h,ZEROS:f,ONES:p,UNIT_X:d,UNIT_Y:v,UNIT_Z:y,UNIT_W:b})},"Xwq/":function(e,t,n){"use strict";var r=n("FWf1"),i=n("p//D"),a=n("GiSu");t.toSubscriber=function(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(a.empty)}},Y2gT:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u}));var r={type:"text",color:{r:255,g:255,b:0,a:1},text:"test",yoffset:-6,font:{size:"18px",family:"Arial",weight:"normal",decoration:"none",style:"normal"},lineWidth:"500px"},i={type:"simple-marker",size:"12px",url:"",width:"12px",height:"12px",style:"circle",contentType:"image/svg",name:"circle",color:{r:255,g:255,b:0,a:1}},a={type:"simple-line",color:{r:255,g:255,b:0,a:1},style:"solid",width:2},o={type:"simple-fill",color:{r:0,g:0,b:0,a:0},style:"solid",outline:{color:{r:255,g:255,b:0,a:1},width:2,style:"solid"}},s=function(e){return"polygon"===e?o:"polyline"===e?a:i},u={type:"simple-marker",style:"circle",color:"cyan",size:"20px",outline:{color:[0,0,0],width:1}}},YAUP:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=n("6S2I"),s=(n("zqDF"),n("WbKI")),u=n("RI0u"),c=n("04ZG"),l=n("4EHJ"),h=(n("ju1D"),n("9AIY"),n("lh0l")),f=n("XACZ"),p=n("o685"),d=n("CPZo"),v=n("vJSZ"),y=n("PcLj"),b=n("SFo0"),g=o.a.getLogger("esri.symbols.IconSymbol3DLayer"),m=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).material=null,r.resource=null,r.type="icon",r.size=12,r.anchor="center",r.anchorPosition=void 0,r.outline=void 0,r}return Zt(n,[{key:"clone",value:function(){return new r({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:Object(a.k)(this.material)?this.material.clone():null,outline:Object(a.k)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}}],[{key:"fromSimpleMarkerSymbol",value:function(e){var t=e.color||d.c,n=w(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||d.c).clone()}:null;return new r({size:e.size,resource:{primitive:_(e.style)},material:{color:t},outline:i,anchor:n?"relative":void 0,anchorPosition:n})}},{key:"fromPictureMarkerSymbol",value:function(e){var t=!e.color||Object(d.a)(e.color)?d.c:e.color,n=w(e);return new r({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:n?"relative":void 0,anchorPosition:n})}},{key:"fromCIMSymbol",value:function(e){return new r({resource:{href:Object(l.A)({mediaType:"application/json",data:JSON.stringify(e.data)})}})}}]),n}(h.a);function w(e){var t="width"in e?e.width:e.size,n="height"in e?e.height:e.size,r=O(e.xoffset),i=O(e.yoffset);return(r||i)&&t&&n?{x:-r/t,y:i/n}:null}function O(e){return isFinite(e)?e:0}Object(i.a)([Object(s.b)({type:p.a,json:{write:!0}})],m.prototype,"material",void 0),Object(i.a)([Object(s.b)({type:y.a,json:{write:!0}})],m.prototype,"resource",void 0),Object(i.a)([Object(u.a)({Icon:"icon"},{readOnly:!0})],m.prototype,"type",void 0),Object(i.a)([Object(s.b)(f.b)],m.prototype,"size",void 0),Object(i.a)([Object(u.a)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),Object(s.b)({json:{default:"center"}})],m.prototype,"anchor",void 0),Object(i.a)([Object(s.b)({type:b.a,json:{type:[Number],read:{reader:function(e){return new b.a({x:e[0],y:e[1]})}},write:{writer:function(e,t){t.anchorPosition=[e.x,e.y]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],m.prototype,"anchorPosition",void 0),Object(i.a)([Object(s.b)({type:v.a,json:{write:!0}})],m.prototype,"outline",void 0),m=r=Object(i.a)([Object(c.a)("esri.symbols.IconSymbol3DLayer")],m);var j={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function _(e){return j[e]||(g.warn(e+' cannot be mapped to Icon symbol. Fallback to "circle"'),"circle")}t.a=m},YBpl:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("r88o"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("wdpY")),u=n("1Mqo"),c=n("ZYtI"),l=n("K5Jr"),h=n("+AYZ"),f=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Zt(n,[{key:"readOffset",value:function(e,t){var n=t.timeInfo.exportOptions;if(!n)return null;var r=n.timeOffset,i=u.d.fromJSON(n.timeOffsetUnits);return r&&i?new l.a({value:r,unit:i}):null}},{key:"timeInfo",set:function(e){Object(s.k)(e,this.fields),this._set("timeInfo",e)}}]),n}(e);return Object(r.a)([Object(i.b)({type:c.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(r.a)([Object(i.b)({type:l.a})],t.prototype,"timeOffset",void 0),Object(r.a)([Object(a.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(r.a)([Object(i.b)({value:null,type:h.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(r.a)([Object(i.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(r.a)([Object(o.a)("esri.layers.mixins.TemporalLayer")],t),t}},YOx9:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ACjl"),i=n("9MzC"),a=n("eSsm");function o(e,t,n){return s.apply(this,arguments)}function s(){return(s=Ut(regeneratorRuntime.mark((function e(t,n,o){var s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",n.origin))||"unique-value"!==s.type||!s.styleOrigin){e.next=6;break}return e.next=4,Object(a.c)(s.populateFromStyle());case 4:u=e.sent,Object(i.u)(o),!1===u.ok&&(c=u.error,n&&n.messages&&n.messages.push(new r.a("renderer:style-reference","Failed to create unique value renderer from style reference: "+c.message,{error:c,context:n})),t.clear("renderer",n.origin));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},YXST:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return y}));var r=n("zlDU"),i=n("xSgX"),a=n("3cLA"),o=n("H9eC"),s=n("21Ip"),u=n("n6tj"),c=n("bgch"),l=n("N+cL"),h=n("dTMb"),f=n("NckZ"),p=n("DXYb"),d=n("Tcmu"),v=n("Ibpv");function y(e,t,n,y){var b=function(e,t,n){if(!e)return null;if(n&&"web-scene"===n.origin&&!(e instanceof i.a)&&!(e instanceof a.a)){var y="cim"!==e.type?function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return{symbol:null};if(Object(o.e)(e)||e instanceof a.a)t=e.clone();else if("cim"===e.type)t=h.a.fromCIMSymbol(e);else if(e instanceof s.a)t=c.a.fromSimpleLineSymbol(e);else if(e instanceof d.a)t=h.a.fromSimpleMarkerSymbol(e);else if(e instanceof l.a)t=h.a.fromPictureMarkerSymbol(e);else if(e instanceof p.a)t=f.a.fromSimpleFillSymbol(e);else{if(!(e instanceof v.a))return{error:new r.a("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};t=y?u.a.fromTextSymbol(e):h.a.fromTextSymbol(e)}if(n&&(t.id=e.id),i&&Object(o.e)(t))for(var b=0;b<t.symbolLayers.length;++b)t.symbolLayers.getItemAt(b)._ignoreDrivers=!0;return{symbol:t}}(e):{symbol:null,error:new r.a("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return y.symbol?y.symbol.write(t,n):(n.messages&&n.messages.push(new r.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:n,error:y.error})),null)}return n&&"web-map"===n.origin&&"web-style"===e.type?(n.messages&&n.messages.push(new r.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView."),{symbol:e,context:n})),null):e.write(t,n)}(e,{},y);b&&(t[n]=b)}function b(e,t){return Object(o.f)(e,null,t)}},"YZ0+":function(e,t,n){"use strict";n.r(t);var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=n("6S2I"),u=(n("zqDF"),n("WbKI")),c=n("04ZG"),l=n("Cduq"),h=n("4EHJ"),f=(n("ju1D"),n("9AIY"),n("9MzC")),p=n("ag7Y"),d=n("WZb1"),v=n("LE9a"),y=n("fX31"),b=n("bV/r"),g=n("AiS/"),m=n("GFPt"),w=n("p+Gi"),O=n("wEd+"),j=n("N2Uj"),_=0,x=s.a.getLogger("esri.Basemap"),k=r=function(e){Kt(c,e);var t,i,s,u=Xt(c);function c(e){var t;Wt(this,c),(t=u.call(this,e)).id=null,t.portalItem=null,t.spatialReference=null,t.thumbnailUrl=null,t.title="Basemap",t.id=Date.now().toString(16)+"-basemap-"+_++,t.baseLayers=new v.a,t.referenceLayers=new v.a;var n=function(e){e.parent&&e.parent!==$t(t)&&"remove"in e.parent&&e.parent.remove(e),e.parent=$t(t),"elevation"===e.type&&x.error("Layer '".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as a basemap layer and will therefore be ignored."))},r=function(e){e.parent=null};return t.baseLayers.on("after-add",(function(e){return n(e.item)})),t.referenceLayers.on("after-add",(function(e){return n(e.item)})),t.baseLayers.on("after-remove",(function(e){return r(e.item)})),t.referenceLayers.on("after-remove",(function(e){return r(e.item)})),t}return Zt(c,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){x.error("#load()","Failed to load basemap (title: '".concat(e.title,"', id: '").concat(e.id,"')"),t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}},{key:"destroy",value:function(){var e,t,n=Vt(this.baseLayers.removeAll());try{for(n.s();!(t=n.n()).done;){t.value.destroy()}}catch(a){n.e(a)}finally{n.f()}var r,i=Vt(this.referenceLayers.removeAll());try{for(i.s();!(r=i.n()).done;){r.value.destroy()}}catch(a){i.e(a)}finally{i.f()}this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"normalizeCtorArgs",value:function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=Nt({},e)).resourceInfo),e}},{key:"baseLayers",set:function(e){this._set("baseLayers",Object(y.b)(e,this._get("baseLayers")))}},{key:"_writeBaseLayers",value:function(e,t,n){var r=[];e?(n=Nt(Nt({},n),{},{layerContainerType:"basemap"}),this.baseLayers.forEach((function(e){var t=Object(j.a)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);Object(o.k)(t)&&r.push(t)})),this.referenceLayers.forEach((function(e){var t=Object(j.a)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);Object(o.k)(t)&&(t.isReference=!0,r.push(t))})),t.baseMapLayers=r):t.baseMapLayers=r}},{key:"referenceLayers",set:function(e){this._set("referenceLayers",Object(y.b)(e,this._get("referenceLayers")))}},{key:"writeTitle",value:function(e,t){t.title=e||"Basemap"}},{key:"load",value:function(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return Object(m.a)(this,(function(t){t(e.baseLayers,e.referenceLayers)}))}},{key:"clone",value:function(){var e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new r({resourceInfo:this.resourceInfo}).set(e)}},{key:"read",value:function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),Dt(en(c.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){return e=e||{},t&&t.origin||(t=Nt({origin:"web-map"},t)),Dt(en(c.prototype),"write",this).call(this,e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((function(e){var t=Object(a.a)(e);return t.url&&Object(h.v)(t.url)&&(t.url="https:"+t.url),t.templateUrl&&Object(h.v)(t.templateUrl)&&(t.templateUrl="https:"+t.templateUrl),t}))),e}},{key:"_loadFromSource",value:(s=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.resourceInfo,r=this.portalItem,Object(f.u)(t),i=[],n?(i.push(this._loadLayersFromJSON(n.data,n.context?n.context.url:null,t)),n.data.id&&!n.data.title&&(a=n.data.id,i.push(Object(O.b)(a).then((function(e){e&&o.read({title:e},n.context)}))))):r&&i.push(this._loadFromItem(r,t)),e.next=6,Promise.all(i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_loadLayersFromJSON",value:(i=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s,u,c,l,h,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.resourceInfo&&this.resourceInfo.context,o=this.portalItem&&this.portalItem.portal||a&&a.portal||null,s=a&&"web-scene"===a.origin?"web-scene":"web-map",e.next=5,Promise.all([n.e(0),n.e(148)]).then(n.bind(null,"5Q/x"));case 5:return u=e.sent,c=u.populateOperationalLayers,l=[],Object(f.u)(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)&&(h={context:{origin:s,url:r,portal:o,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},p=c(this.baseLayers,t.baseMapLayers.filter((function(e){return!e.isReference})),h),l.push(p),d=c(this.referenceLayers,t.baseMapLayers.filter((function(e){return e.isReference})),h),l.push(d)),e.next=11,Object(f.j)(l);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"_loadFromItem",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(n);case 2:return r=e.sent,e.next=5,r.fetchData("json",n);case 5:return i=e.sent,a=Object(h.J)(t.itemUrl),e.abrupt("return",(this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:t.portal||g.a.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||g.a.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,n)));case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}],[{key:"fromId",value:function(e){var t=O.a[e];return t?r.fromJSON(t):null}}]),c}(Object(p.b)(b.a));Object(i.a)([Object(u.b)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer:function(e,t,n,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:v.a}},writer:function(e,t,n,r){this._writeBaseLayers(e,t,r)}}}}}})],k.prototype,"baseLayers",null),Object(i.a)([Object(u.b)({type:String,json:{origins:{"web-scene":{write:!0}}}})],k.prototype,"id",void 0),Object(i.a)([Object(u.b)({type:w.default})],k.prototype,"portalItem",void 0),Object(i.a)([Object(u.b)()],k.prototype,"referenceLayers",null),Object(i.a)([Object(u.b)({readOnly:!0})],k.prototype,"resourceInfo",void 0),Object(i.a)([Object(u.b)({type:d.a})],k.prototype,"spatialReference",void 0),Object(i.a)([Object(u.b)()],k.prototype,"thumbnailUrl",void 0),Object(i.a)([Object(u.b)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],k.prototype,"title",void 0),Object(i.a)([Object(l.a)("title")],k.prototype,"writeTitle",null),k=r=Object(i.a)([Object(c.a)("esri.Basemap")],k),t.default=k},YbY9:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("fXoL"),i=n("lNcg"),a=n("d3UM"),o=n("3Pt+"),s=n("ofXK"),u=n("zVIQ"),c=n("OFbc"),l=n("FKr1");function h(e,t){if(1&e&&r.gc(0,"svg-icon",8),2&e){var n=r.vc();r.Bc("src","assets/fillsymbols/symbols-sfs-"+n.fillProps.style+".svg")("svgStyle",n.fillSvgStyle)}}function f(e,t){1&e&&(r.kc(0,"span"),r.Tc(1,"None"),r.jc())}function p(e,t){1&e&&(r.kc(0,"span"),r.Tc(1,"None"),r.jc())}function d(e,t){if(1&e&&r.gc(0,"svg-icon",8),2&e){var n=r.vc().$implicit,i=r.vc();r.Bc("src","assets/fillsymbols/symbols-sfs-"+n+".svg")("svgStyle",i.fillSvgStyle)}}function v(e,t){if(1&e&&(r.kc(0,"mat-option",9),r.Sc(1,p,2,0,"span",5),r.Sc(2,d,1,2,"svg-icon",4),r.jc()),2&e){var n=t.$implicit;r.Bc("value",n),r.Tb(1),r.Bc("ngIf","none"===n),r.Tb(1),r.Bc("ngIf","none"!==n)}}var y=function(){var e=function(){function e(){var t=this;Wt(this,e),this.fillStyles=i.c,this.geomType="",this.changedGraphicsStyle=new r.t,this.fillProps={color:{r:255,g:255,b:0,a:.5},style:"none"},this.fillSvgStyle={"width.px":150,fill:"black"},this.changeFillColor=function(e){t.fillProps.color=e,t.changedGraphicsStyle.emit()},this.changeGraphicsStyle=function(){t.changedGraphicsStyle.emit()}}return Zt(e,[{key:"selectedGraphics",get:function(){return this._selectedGraphics},set:function(e){if(!(this._selectedGraphics=e,void 0===e||e.length<1||(this.geomType=e[0].geometry.type,"circle"!==this.geomType&&"polygon"!==this.geomType))){var t=e[0].attributes.symbol;this.fillProps.style=t.style,this.fillProps.color=t.color}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["app-fillstyle"]],inputs:{drawingTool:"drawingTool",selectedGraphics:"selectedGraphics"},outputs:{changedGraphicsStyle:"changedGraphicsStyle"},decls:16,vars:7,consts:[[3,"hidden"],[2,"display","flex"],[2,"flex-grow","1"],[1,"matSelect",3,"ngModel","ngModelChange","selectionChange"],[3,"src","svgStyle",4,"ngIf"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"color","opacity","colorSelected"],[3,"src","svgStyle"],[3,"value"]],template:function(e,t){1&e&&(r.kc(0,"div",0),r.gc(1,"br"),r.kc(2,"fieldset"),r.kc(3,"legend"),r.Tc(4,"Fill Style"),r.jc(),r.kc(5,"div",1),r.kc(6,"div",2),r.Tc(7," Pattern :"),r.gc(8,"br"),r.kc(9,"mat-select",3),r.rc("ngModelChange",(function(e){return t.fillProps.style=e}))("selectionChange",(function(){return t.changeGraphicsStyle()})),r.kc(10,"mat-select-trigger"),r.Sc(11,h,1,2,"svg-icon",4),r.Sc(12,f,2,0,"span",5),r.jc(),r.Sc(13,v,3,3,"mat-option",6),r.jc(),r.jc(),r.kc(14,"div"),r.kc(15,"app-color-picker",7),r.rc("colorSelected",(function(e){return t.changeFillColor(e)})),r.jc(),r.jc(),r.jc(),r.jc(),r.jc()),2&e&&(r.Bc("hidden",!(t.selectedGraphics.length>0&&("polygon"===t.geomType||"circle"===t.geomType)||"polygon"===t.drawingTool||"circle"===t.drawingTool)),r.Tb(9),r.Bc("ngModel",t.fillProps.style),r.Tb(2),r.Bc("ngIf","none"!==t.fillProps.style),r.Tb(1),r.Bc("ngIf","none"===t.fillProps.style),r.Tb(1),r.Bc("ngForOf",t.fillStyles),r.Tb(2),r.Bc("color",t.fillProps.color)("opacity",100*t.fillProps.color.a))},directives:[a.a,o.j,o.m,a.c,s.m,s.l,u.a,c.b,l.e],styles:["fieldset[_ngcontent-%COMP%]{position:relative;padding-top:12px}.widthSlider[_ngcontent-%COMP%]{width:80%;height:20px}.widthSlider[_ngcontent-%COMP%] > .slidecontainer[_ngcontent-%COMP%]{width:200px}.widthSliderContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;line-height:15px}.buttonActive[_ngcontent-%COMP%]{background-color:#d3d3d3;border:2px solid #0ff;color:#000}.fontButtons[_ngcontent-%COMP%]{min-width:unset!important;width:50px;margin:2px;outline:none}.fontStyle[_ngcontent-%COMP%]{justify-content:center;margin-top:10px}.verticalCenter[_ngcontent-%COMP%]{align-items:center}.matSelect[_ngcontent-%COMP%]{margin-left:10px}.colorDiv[_ngcontent-%COMP%], .marginTop10px[_ngcontent-%COMP%]{margin-top:10px}legend[_ngcontent-%COMP%]{font-weight:600}"]}),e}()},Ykwf:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("Gj5k"),u=n("+opI"),c=n("RI0u"),l=n("r88o"),h=n("C4aV"),f=n("04ZG"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),d=n("ofM5"),v=n("WmHL"),y=n("WZb1"),b=n("dOLD");n("4GrV");var g,m=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="query-table",r}return Zt(n,[{key:"clone",value:function(){var e,t=this.workspaceId,n=this.query,i=this.oidFields,a=this.spatialReference,o=this.geometryType,s={workspaceId:t,query:n,oidFields:i,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:o};return new r(s)}}]),n}(p.a);Object(i.a)([Object(c.a)({queryTable:"query-table"})],m.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],m.prototype,"workspaceId",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],m.prototype,"query",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],m.prototype,"oidFields",void 0),Object(i.a)([Object(o.b)({type:y.a,json:{write:!0}})],m.prototype,"spatialReference",void 0),Object(i.a)([Object(c.a)(b.a)],m.prototype,"geometryType",void 0),m=r=Object(i.a)([Object(f.a)("esri.layers.support.source.QueryTableDataSource")],m);var w,O=g=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="raster",r}return Zt(n,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new g({workspaceId:e,dataSourceName:t})}}]),n}(p.a);Object(i.a)([Object(c.a)({raster:"raster"})],O.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],O.prototype,"dataSourceName",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],O.prototype,"workspaceId",void 0),O=g=Object(i.a)([Object(f.a)("esri.layers.support.source.RasterDataSource")],O);var j,_,x=w=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="table",r}return Zt(n,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,n=this.dataSourceName;return new w({workspaceId:e,gdbVersion:t,dataSourceName:n})}}]),n}(p.a);Object(i.a)([Object(c.a)({table:"table"})],x.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],x.prototype,"workspaceId",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],x.prototype,"gdbVersion",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],x.prototype,"dataSourceName",void 0),x=w=Object(i.a)([Object(f.a)("esri.layers.support.source.TableDataSource")],x);var k=Object(u.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),S=j=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="join-table",r}return Zt(n,[{key:"readLeftTableSource",value:function(e,t,n){return I()(e,t,n)}},{key:"castLeftTableSource",value:function(e){return Object(a.k)(A(),e)}},{key:"readRightTableSource",value:function(e,t,n){return I()(e,t,n)}},{key:"castRightTableSource",value:function(e){return Object(a.k)(A(),e)}},{key:"clone",value:function(){var e,t,n=this.leftTableKey,r=this.rightTableKey,i=this.leftTableSource,a=this.rightTableSource,o=this.joinType,s={leftTableKey:n,rightTableKey:r,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==a?void 0:a.clone())?t:void 0,joinType:o};return new j(s)}}]),n}(p.a);Object(i.a)([Object(c.a)({joinTable:"join-table"})],S.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],S.prototype,"leftTableKey",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],S.prototype,"rightTableKey",void 0),Object(i.a)([Object(o.b)({json:{write:!0}})],S.prototype,"leftTableSource",void 0),Object(i.a)([Object(l.a)("leftTableSource")],S.prototype,"readLeftTableSource",null),Object(i.a)([Object(s.a)("leftTableSource")],S.prototype,"castLeftTableSource",null),Object(i.a)([Object(o.b)({json:{write:!0}})],S.prototype,"rightTableSource",void 0),Object(i.a)([Object(l.a)("rightTableSource")],S.prototype,"readRightTableSource",null),Object(i.a)([Object(s.a)("rightTableSource")],S.prototype,"castRightTableSource",null),Object(i.a)([Object(c.a)(k)],S.prototype,"joinType",void 0),S=j=Object(i.a)([Object(f.a)("esri.layers.support.source.JoinTableDataSource")],S);var M=null;function I(){return M||(M=Object(h.b)({types:A()})),M}var T=null;function A(){return T||(T={key:"type",base:null,typeMap:{"data-layer":E,"map-layer":v.a}}),T}var C={key:"type",base:null,typeMap:{"join-table":S,"query-table":m,raster:O,table:x}},E=_=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="data-layer",r}return Zt(n,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new _({fields:e,dataSource:t})}}]),n}(p.a);Object(i.a)([Object(c.a)({dataLayer:"data-layer"})],E.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:[d.a],json:{write:!0}})],E.prototype,"fields",void 0),Object(i.a)([Object(o.b)({types:C,json:{write:!0}})],E.prototype,"dataSource",void 0),(E=_=Object(i.a)([Object(f.a)("esri.layers.support.source.DataLayerSource")],E)).from=Object(a.m)(E)},YyOG:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return l}));var r=n("zlDU"),i=n("9MzC"),a=n("IDUf"),o=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,s=new Set(["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),u=[],c=new Map;function l(e){if(!u.includes(e)){var t,n=Vt(c.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;d(e.pattern,r)&&c.delete(r)}}catch(i){n.e(i)}finally{n.f()}u.unshift(e)}}function h(e){return f.apply(this,arguments)}function f(){return(f=Ut(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(a.b)(),c.has(t)||c.set(t,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],a=Vt(u),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=18;break}if(!d((s=o.value).pattern,t)){e.next=16;break}return e.prev=7,e.next=10,s.fetchMessageBundle(t,n);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(7),i.push(e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:if(!i.length){e.next=28;break}throw new r.a("intl:message-bundle-error",'Errors occurred while loading "'.concat(t,'"'),{errors:i});case 28:throw new r.a("intl:no-message-bundle-loader",'No loader found for message bundle "'.concat(t,'"'));case 29:case"end":return e.stop()}}),e,null,[[2,20,23,26],[7,13]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n)),i=c.get(t),e.next=5,v.add(i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){if(!o.test(e))return null;var t=zt(o.exec(e),3),n=t[1],r=t[2],i=n+(r?"-"+r.toUpperCase():"");return s.has(i)?i:s.has(n)?n:null}function d(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}Object(a.a)((function(){c.clear()}));var v=new(function(){function e(){Wt(this,e),this._numLoading=0}var t;return Zt(e,[{key:"waitForAll",value:(t=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._dfd,!e.t0){e.next=4;break}return e.next=4,this._dfd.promise;case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"add",value:function(e){var t=this;return this._increase(),e.then((function(){return t._decrease()}),(function(){return t._decrease()})),this.waitForAll()}},{key:"_increase",value:function(){this._numLoading++,this._dfd||(this._dfd=Object(i.f)())}},{key:"_decrease",value:function(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}]),e}())},Z1Ae:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?function(e,t){e.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),t.stippleUVMaxEnabled&&e.varyings.add("stipplePatternUvMax","float"),e.varyings.add("stipplePatternUv","float"),e.fragment.uniforms.add("stipplePatternTexture","sampler2D"),t.stippleOffColorEnabled&&e.fragment.uniforms.add("stippleOffColor","vec4"),e.fragment.code.add(r.a(ye||(ye=Rt(["\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ","\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }"])),t.stippleUVMaxEnabled?"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":"")),e.fragment.code.add(t.stippleOffColorEnabled?r.a(be||(be=Rt(["\n    #define discardByStippleAlpha(stippleAlpha, threshold) {}\n    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)\n    "]))):r.a(ge||(ge=Rt(["\n    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)\n    "]))))}(e,t):function(e){e.fragment.code.add(r.a(me||(me=Rt(["\n  float getStippleAlpha() { return 1.0; }\n\n  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n  #define blendStipple(color, _stippleAlpha_) color\n  "]))))}(e)}},Z1nw:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("m501"),i=n("4frj"),a=n("eHpU"),o=n("+pD8"),s=n("SZUe"),u=n("7ZHn"),c={base:r.a,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i.a,"column-chart":a.a,"line-chart":s.a,"pie-chart":u.a,image:o.a}}},Z35e:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("srIe"),i=n("aunz"),a=function(){function e(t,n,r){Wt(this,e),this.editGeometry=t,this.component=n,this.pos=r,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}return Zt(e,[{key:"apply",value:function(){var e="redo";if(Object(r.j)(this.addedVertex)&&(e="apply",this.addedVertex=new i.d(this.component)),0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{var t=Object(r.q)(this.component.getLastVertex()),n=null;t.right&&(this.originalEdge=t.right,n=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,Object(r.j)(this.left)&&(this.left=new i.b(this.component,t,this.addedVertex)),this.component.edges.push(this.left),t.right=this.left,Object(r.k)(this.originalEdge)&&Object(r.k)(n)&&(Object(r.j)(this.right)&&(this.right=new i.b(this.component,this.addedVertex,n)),this.component.edges.push(this.right),n.left=this.right),this.component.updateVertexIndex(this.addedVertex,t.index+1)}this.editGeometry.emit("change",{addedVertices:[this.addedVertex],operation:e})}},{key:"undo",value:function(){if(Object(r.j)(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),Object(r.k)(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),Object(r.k)(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),Object(r.k)(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),Object(r.k)(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0),this.editGeometry.emit("change",{removedVertices:[this.addedVertex],operation:"undo"})}},{key:"accumulate",value:function(e){return!1}}]),e}()},"Z4F+":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n("+opI").a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},Z5CC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function e(){Wt(this,e),this.openNotificationsModal=new r.t};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ZGlk:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=n("srIe"),o=(n("6S2I"),n("zqDF"),n("WbKI"),n("04ZG")),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),u=n("SuVq"),c=(n("4GrV"),n("zm0L")),l=n("qRWG"),h=n("r0DZ"),f=n("kwW8"),p=n("NWPx"),d=n("ixpo"),v=n("aunz"),y=n("J9+3"),b=n("Hxwb"),g=n("wg3g"),m=n("NRDM"),w=n("/rov"),O=function(){function e(t){var n=t.grabbableForEvent;Wt(this,e),this.events=new c.a,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=n}return Zt(e,[{key:"intersectionDistance",value:function(e,t){return 0}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}]),e}(),j=n("SuoU"),_=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i,o;Wt(this,n),(r=t.call(this))._manipulator=null,r._stagedVertex=null,r.geometryType=null,r.elevationInfo=null,r.snapToSceneEnabled=null,r._handles=new h.a,r._defaultZ=0,r._elevationDrawSurface=null,r._snappingDrawSurface=null,r._snappingManager=null,r._snappingPipeline=new m.a,r._createOperationCompleted=!1,r._pointerDownStates=new Set,r._snappingTask=null,r.view=e.view,r.drawingMode=Object(a.r)(e.drawingMode,j.a),r.geometryType=e.geometryType,r.elevationInfo=e.elevationInfo,r.coordinateHelper=Object(d.a)(e.hasZ,e.hasM,r.view.spatialReference,r.view.viewingMode),r._defaultZ=e.defaultZ,r.snapToSceneEnabled=e.snapToSceneEnabled,r._snappingDrawSurface=Object(a.q)(e.snappingDrawSurface),r._snappingManager=e.snappingManager;var s=null==(i=e.view)||null==(o=i.resourceController)?void 0:o.scheduler;r._frameTask=s?s.registerTask(f.b.SNAPPING,(function(e){return r._frameTask.processQueue(e)}),(function(){return!1})):f.a,r._elevationDrawSurface=e.elevationDrawSurface,r._editGeometry=new y.a(new v.c(r.coordinateHelper),"segment"===r.geometryType?"polyline":r.geometryType),r._activeComponent=new v.a(r._editGeometry.editGeometry),r._editGeometry.editGeometry.components.push(r._activeComponent),r._editGeometry.on(["vertex-add","vertex-update","vertex-remove"],(function(e){var t=e.vertices.map((function(e){return{componentIndex:0,vertexIndex:e.index,coordinates:r.coordinateHelper.toArray(e.pos)}})),n=t.map((function(e){return e.coordinates}));switch(e.type){case"vertex-add":r.emit(e.type,Nt(Nt({},e),{},{added:n,vertices:t}));break;case"vertex-update":r.emit(e.type,Nt(Nt({},e),{},{updated:n,vertices:t}));break;case"vertex-remove":r.emit(e.type,Nt(Nt({},e),{},{removed:n,vertices:t}))}})),r._manipulator=new O({grabbableForEvent:function(e){return"click"!==r.drawingMode||"touch"===e.pointerType&&r._snappingEnabled&&1===r._pointerDownStates.size}}),e.manipulators.add(r._manipulator),r._manipulator.grabbable="point"!==r.geometryType;var u=r.createManipulatorDragPipeline(r._manipulator),c=r._manipulator.events.on("immediate-double-click",(function(e){r._manipulator.dragging||"point"===r.geometryType||(r.complete(),e.stopPropagation())})),l=r._manipulator.events.on("immediate-click",(function(e){if(!r._manipulator.dragging){var t=r._activeComponent,n=r._closeOnClickVertexIndex(e.screenPoint);if(Object(a.k)(n))r.discardStagedVertex(),r.complete();else{var i=r._screenToMap(e.screenPoint);if(Object(a.k)(i))switch(r.drawingMode){case"freehand":break;case"click":case"hybrid":r._snappingTask=Object(a.a)(r._snappingTask),r.hasStagedVertex?r.commitStagedVertex():r._editGeometry.appendVertex(r.coordinateHelper.fromPoint(i)),("point"===r.geometryType||"segment"===r.geometryType&&2===t.vertices.length||"segment"===r.geometryType&&"hybrid"===r.drawingMode&&1===t.vertices.length)&&r.complete()}}e.stopPropagation()}}));return r._handles.add([u,l,c]),r}return Zt(n,[{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"_snappingEnabled",get:function(){return Object(a.k)(this._snappingManager)&&this._snappingManager.options.effectiveEnabled}},{key:"createManipulatorDragPipeline",value:function(e){switch(this.drawingMode){case"click":return this.createManipulatorDragPipelineClick(e);case"freehand":return this.createManipulatorDragPipelineFreehand(e);case"hybrid":return this.createManipulatorDragPipelineHybrid(e)}}},{key:"createManipulatorDragPipelineClick",value:function(e){var t=this;return Object(g.e)(e,(function(e,n,r,i){var o="touch"===i&&t._snappingEnabled;!t.isCompleted&&o&&(n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,("segment"===t.geometryType||o&&0===t.vertices.length)&&t.commitStagedVertex()),e})).next(t._snappingPipeline.createSnapDragEventPipelineStep({predicate:function(){return o},cancel:r,snappingManager:t._snappingManager,snappingContext:new b.a({geometry:t._editGeometry,elevationInfo:t.elevationInfo,pointer:i,visualizer:new w.a})}),t._snappingPipeline.next).next((function(e){return o&&(t.stagedVertex=e.mapEnd,"end"===e.action&&t.commitStagedVertex()),e})).next((function(e){return"end"===e.action&&("segment"!==t.geometryType&&"point"!==t.geometryType||t.complete()),e})),r.next((function(){o&&Object(a.k)(t._snappingManager)&&t._snappingManager.doneSnapping()})))}))}},{key:"createManipulatorDragPipelineFreehand",value:function(e){var t=this;return Object(g.e)(e,(function(e,n){t.isCompleted||n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,"segment"===t.geometryType&&t.commitStagedVertex()),e})).next((function(e){switch(e.action){case"start":case"update":t.stagedVertex=e.mapEnd,"polygon"!==t.geometryType&&"polyline"!==t.geometryType||t.commitStagedVertex();break;case"end":t.complete()}return e}))}))}},{key:"createManipulatorDragPipelineHybrid",value:function(e){var t=this;return Object(g.e)(e,(function(e,n){t.isCompleted||n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,t.commitStagedVertex()),e})).next((function(e){switch(e.action){case"start":case"update":t.stagedVertex=e.mapEnd,"polygon"!==t.geometryType&&"polyline"!==t.geometryType||t.commitStagedVertex();break;case"end":"segment"!==t.geometryType&&"point"!==t.geometryType||t.complete()}return e}))}))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this._editGeometry.destroy(),this._frameTask.remove()}},{key:"onInputEvent",value:function(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}},{key:"canRedo",get:function(){return this._editGeometry.canRedo}},{key:"redo",value:function(){this._editGeometry.redo()}},{key:"canUndo",get:function(){return this._editGeometry.canUndo}},{key:"undo",value:function(){Object(a.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.undo()}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(a.a)(this._snappingTask),this.commitStagedVertex(),this._createOperationCompleted=!0,Object(a.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.emit("complete",{vertices:this.vertices.map((function(e,t){return{componentIndex:0,vertexIndex:t,coordinates:e}})),aborted:e,type:"complete"})}},{key:"cancel",value:function(){this.complete(!0)}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(e){this._manipulator.interactive=e}},{key:"numVertices",get:function(){return Object(a.k)(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"vertices",get:function(){var e=this,t=this._activeComponent.vertices.map((function(t){return e.coordinateHelper.toArray(t.pos)}));return Object(a.k)(this._stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this._stagedVertex)),t}},{key:"spatialReference",get:function(){return this.view.spatialReference}},{key:"hasStagedVertex",get:function(){return Object(a.k)(this._stagedVertex)}},{key:"stagedVertex",get:function(){return this._stagedVertex},set:function(e){if(Object(a.j)(e))this.discardStagedVertex();else if(!Object(a.k)(this._stagedVertex)||!Object(p.a)(this._stagedVertex,e)){Object(a.j)(this._stagedVertex)?this._stagedVertex=Object(i.a)(e):(this._stagedVertex.x=e.x,this._stagedVertex.y=e.y,this._stagedVertex.z=e.z,this._stagedVertex.m=e.m,this._stagedVertex.hasZ=e.hasZ,this._stagedVertex.hasM=e.hasM,this._stagedVertex.spatialReference=e.spatialReference);var t={componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}}},{key:"commitStagedVertex",value:function(){if(this._snappingTask=Object(a.a)(this._snappingTask),Object(a.k)(this._stagedVertex)){var e=this._stagedVertex;this._stagedVertex=null,this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(e))}}},{key:"discardStagedVertex",value:function(){this._stagedVertex=null}},{key:"_onPointerMove",value:function(e){var t=this;if(Object(a.a)(this._snappingTask),!(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing)&&this._manipulator.interactive){var n=Object(l.f)(e.x,e.y),r=this._closeOnClickVertexIndex(n);if(Object(a.k)(r)){this.discardStagedVertex();var i={componentIndex:0,vertexIndex:r,coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[r].pos)};this.emit("cursor-update",{updated:null,vertices:[i],operation:"apply",type:"vertex-update"})}else{var o=this._screenToMap(n);if(this._manipulator.cursor=Object(a.k)(o)?"crosshair":null,Object(a.k)(o))if(Object(a.k)(this._snappingManager)){var u=this._snappingManager,c=new b.a({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:new w.a});this.stagedVertex=u.update(o,c),this._snappingTask=Object(s.h)(function(){var e=Ut(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._frameTask.schedule((function(){return u.snap(o,c,n)}),n);case 2:if(r=e.sent,e.t0=r.valid,!e.t0){e.next=7;break}return e.next=7,t._frameTask.schedule((function(){t.stagedVertex=r.apply()}),n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else this.stagedVertex=o}e.stopPropagation()}}},{key:"_onHold",value:function(e){Object(a.a)(this._snappingTask),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}},{key:"_screenToMapDragEventStep",value:function(){var e=this,t=null;return function(n){if("start"===n.action&&(t=e._screenToMap(n.screenStart)),Object(a.j)(t))return null;var r=e._screenToMap(n.screenEnd);return Object(a.k)(r)?Nt(Nt({},n),{},{mapStart:t,mapEnd:r}):null}}},{key:"_screenToMap",value:function(e){return this._getDrawSurface().screenToMap(e)}},{key:"_mapToScreen",value:function(e){return this._getDrawSurface().mapToScreen(e)}},{key:"_getDrawSurface",value:function(){var e=null;if(this.coordinateHelper.hasZ){var t=this._defaultZ,n=!1;Object(a.k)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(n=!0),Object(a.k)(this.snapToSceneEnabled)&&(n=this.snapToSceneEnabled),Object(a.k)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(n=!1);var r=this._activeComponent.vertices.length;("segment"===this.geometryType||"polygon"===this.geometryType)&&r>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),n=!1),n?e=this._snappingDrawSurface:(this._elevationDrawSurface.defaultZ=t,e=this._elevationDrawSurface)}else this._elevationDrawSurface.defaultZ=null,e=this._elevationDrawSurface;return e}},{key:"_vertexWithinPointerDistance",value:function(e,t){var n=this._mapToScreen(e);return!!Object(a.k)(n)&&function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*r+i*i<=25}(n,t)}},{key:"_closeOnClickVertexIndex",value:function(e){var t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[0].pos,x),e))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[t.vertices.length-1].pos,x),e))return t.vertices.length-1}return null}}]),n}(c.a);_=Object(r.a)([Object(o.a)("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],_);var x=new u.a({x:0,y:0,z:0})},ZHv2:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n("srIe"),i=n("Cy1f"),a=n("5DEt"),o=n("0Kx6"),s=n("9ToJ"),u=n("qZfn"),c=n("OKTS"),l=n("AvGH"),h=n("D8Ta"),f=n("dXfX"),p=n("EVMh"),d=n("1ff1"),v=n("fFEv"),y=n("pO5D"),b=n("15Hh"),g=n("r+FG"),m=n("w6Td"),w=n("ypgp"),O=n("2jVe"),j=n("jjdI"),_=n("GJyJ"),x=n("VtYq"),k=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get().build(this.configuration);return new j.a(e.rctx,t.generateSource("vertex"),t.generateSource("fragment"),n.attributeLocations)}},{key:"bind",value:function(e,t,n){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*n.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*n.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",n.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/n.fullWidth,2/n.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",n.projectionMatrix),Object(b.s)(M,n.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",M),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1)}},{key:"initializePipeline",value:function(){return Object(_.d)({blending:Object(_.f)(1,771),colorWrite:_.b})}},{key:"bindPipelineState",value:function(e){e.setPipelineState(this.pipeline)}}]),n}(w.a);k.shader=new m.a(x.a,(function(){return n.e(45).then(n.bind(null,"9XiL"))})),k.attributeLocations={start:0,end:1,up:2,extrude:3};var S=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).contrastControlEnabled=!1,e}return n}(O.a);Object(y.a)([Object(O.b)()],S.prototype,"contrastControlEnabled",void 0);var M=Object(g.b)();n("wSAH"),n("n4uK");var I=n("Lrt+"),T=n("/ADo"),A=n("fOQB"),C=n("D6bk");n("0meK");var E=function(){function e(t){Wt(this,e),this._renderCoordsHelper=t,this._buffers=null,this._origin=Object(i.e)(),this._dirty=!1,this._count=0,this._vao=null}return Zt(e,[{key:"vertices",set:function(e){var t,n=new Float64Array(3*e.length),r=0,i=Vt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[r++]=a[0],n[r++]=a[1],n[r++]=a[2]}}catch(o){i.e(o)}finally{i.f()}this.buffers=[n]}},{key:"buffers",set:function(e){if(this._buffers=e,this._buffers.length>0){var t=this._buffers[0],n=3*Math.floor(t.length/3/2);Object(a.v)(this._origin,t[n+0],t[n+1],t[n+2])}else Object(a.v)(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}},{key:"draw",value:function(e){var t=this.ensureVAO(e);Object(r.k)(t)&&(e.bindVAO(t),e.drawArrays(4,0,this._count))}},{key:"dispose",value:function(){Object(r.k)(this._vao)&&this._vao.dispose()}},{key:"ensureVAO",value:function(e){return Object(r.j)(this._buffers)?null:(Object(r.j)(this._vao)&&(this._vao=this.createVAO(e,this._buffers)),this.ensureVertexData(this._vao,this._buffers),this._vao)}},{key:"createVAO",value:function(e,t){var n=this.createDataBuffer(t);return this._dirty=!1,new C.a(e,k.attributeLocations,{data:Object(I.a)(D)},{data:A.a.createVertex(e,35044,n)})}},{key:"ensureVertexData",value:function(e,t){if(this._dirty){var n=this.createDataBuffer(t);e.vertexBuffers.data.setData(n),this._dirty=!1}}},{key:"numberOfRenderVertices",value:function(e){return 2*(e.length/3-1)*3}},{key:"createDataBuffer",value:function(e){var t=this,n=e.reduce((function(e,n){return e+t.numberOfRenderVertices(n)}),0);this._count=n;var r,i=D.createBuffer(n),o=this._origin,s=0,u=0,c=Vt(e);try{for(c.s();!(r=c.n()).done;){for(var l=r.value,h=0;h<l.length;h+=3){var f=Object(a.v)(R,l[h+0],l[h+1],l[h+2]);0===h?u=this._renderCoordsHelper.getAltitude(f):this._renderCoordsHelper.setAltitude(u,f);var p=this._renderCoordsHelper.worldUpAtPosition(f,P),d=s+2*h,v=Object(a.i)(R,f,o);if(h<l.length-3){i.up.setVec(d,p),i.up.setVec(d+3,p),i.up.setVec(d+5,p);for(var y=0;y<6;y++)i.start.setVec(d+y,v);i.extrude.setValues(d+0,0,-1),i.extrude.setValues(d+1,1,-1),i.extrude.setValues(d+2,1,1),i.extrude.setValues(d+3,0,-1),i.extrude.setValues(d+4,1,1),i.extrude.setValues(d+5,0,1)}if(h>0){i.up.setVec(d-2,p),i.up.setVec(d-4,p),i.up.setVec(d-5,p);for(var b=-6;b<0;b++)i.end.setVec(d+b,v)}}s+=this.numberOfRenderVertices(l)}}catch(g){c.e(g)}finally{c.f()}return i.buffer}}]),e}(),P=Object(i.e)(),R=Object(i.e)(),D=Object(T.a)().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude"),L=n("+h6m"),N=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get().build(this.configuration);return new j.a(e.rctx,t.generateSource("vertex"),t.generateSource("fragment"),L.a)}},{key:"bind",value:function(e,t){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*t.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*t.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1);var n=null!=e.angleCutoff?e.angleCutoff:u.c;this.program.setUniform2f("angleCutoff",Math.cos(n),Math.cos(Math.max(0,n-Object(c.d)(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",t.perScreenPixelRatio)}},{key:"initializePipeline",value:function(){return Object(_.d)({blending:Object(_.f)(1,771),colorWrite:_.b})}}]),n}(w.a);N.shader=new m.a(u.a,(function(){return n.e(46).then(n.bind(null,"4TuL"))}));var F=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).heightManifoldEnabled=!1,e.pointDistanceEnabled=!1,e.lineVerticalPlaneEnabled=!1,e.intersectsLineEnabled=!1,e.contrastControlEnabled=!1,e}return n}(O.a);Object(y.a)([Object(O.b)()],F.prototype,"heightManifoldEnabled",void 0),Object(y.a)([Object(O.b)()],F.prototype,"pointDistanceEnabled",void 0),Object(y.a)([Object(O.b)()],F.prototype,"lineVerticalPlaneEnabled",void 0),Object(y.a)([Object(O.b)()],F.prototype,"intersectsLineEnabled",void 0),Object(y.a)([Object(O.b)()],F.prototype,"contrastControlEnabled",void 0);var z=Object(i.e)(),V=Object(h.c)(),G={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:Object(c.d)(6),globalAlphaContrastBoost:2};function U(e,t,n,r){var i=z,s=V;Object(a.l)(i,t,r),Object(a.j)(s,n),s[3]=0,Object(f.m)(s,s,r),o.e.fromPositionAndNormal(i,s,e)}var B=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{contrastControlEnabled:!1};Wt(this,e),this._renderCoordsHelper=t,this._config=r,this._technique=null,this._projInfo=Object(h.c)(),this._zScale=Object(l.a)(),this._heightManifoldEnabled=!1,this._heightManifoldTarget=Object(i.e)(),this._pointDistanceEnabled=!1,this._pointDistanceOrigin=Object(i.e)(),this._pointDistanceTarget=Object(i.e)(),this._lineVerticalPlaneEnabled=!1,this._lineVerticalPlaneSegment=o.d.create(),this._intersectsLineEnabled=!1,this._intersectsLineSegment=o.d.create(),this._intersectsLineRadius=3,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._pathVerticalPlaneData=null,this._pathTechnique=null,this.canRender=!0,this._tempNormal=Object(i.e)(),this._tempDir=Object(i.e)(),this._tempUp=Object(i.e)(),this._tempVec3A=Object(i.e)(),this._tempVec3B=Object(i.e)(),this._tempVec4=Object(h.c)(),this._tempPlane=o.e.create(),this._tempSphere=o.g.create(),this._params=Object(v.c)(n,G)}return Zt(e,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?17:16]}},{key:"needsLinearDepth",get:function(){return!0}},{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldTarget},set:function(e){Object(a.j)(this._heightManifoldTarget,e),this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._pointDistanceTarget},set:function(e){Object(a.j)(this._pointDistanceTarget,e),this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._pointDistanceOrigin},set:function(e){Object(a.j)(this._pointDistanceOrigin,e),this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(e){o.d.copy(e,this._lineVerticalPlaneSegment),this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._intersectsLineSegment},set:function(e){o.d.copy(e,this._intersectsLineSegment),this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._intersectsLineRadius},set:function(e){e!==this._intersectsLineRadius&&(this._intersectsLineRadius=e,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,Object(r.k)(this._pathVerticalPlaneData)&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(e){Object(r.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new E(this._renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(e){Object(r.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new E(this._renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"setParameterValues",value:function(e){Object(v.f)(this._params,e)&&this._requestRender()}},{key:"initializeRenderContext",value:function(e){this._context=e;var t=e.renderContext.rctx;this._quadVAO=Object(d.b)(t),this._techniqueRepository=e.shaderTechniqueRep,this._techniqueConfig=new F,this._pathTechniqueConfig=new S}},{key:"uninitializeRenderContext",value:function(){this._quadVAO=Object(r.f)(this._quadVAO),this._techniqueRepository.release(this._technique),this._technique=null,this._pathVerticalPlaneData=Object(r.f)(this._pathVerticalPlaneData),this._techniqueRepository.release(this._pathTechnique),this._pathTechnique=null}},{key:"render",value:function(e){var t=this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,n=this.pathVerticalPlaneEnabled;if(!t&&!n)return!0;var r=e.camera;return Object(p.f)(r.projectionMatrix,r.fullWidth,r.fullHeight,this._projInfo,this._zScale),t&&this.renderUnified(e),n&&this.renderPath(e),!0}},{key:"renderUnified",value:function(e){var t=e.rctx,n=this._selectTechnique(),r=n.program;t.bindProgram(r),n.bindPipelineState(t),this.bindGlobalUniforms(e,r),this.bindHeightManifoldUniforms(e,r),this.bindPointDistanceUniforms(e,r),this.bindLineVerticalPlaneUniforms(e,r),this.bindIntersectsLineUniforms(e,r),n.bind(this._params,e.camera),t.bindVAO(this._quadVAO),t.drawArrays(5,0,4)}},{key:"renderPath",value:function(e){if(!Object(r.j)(this._pathVerticalPlaneData)){this._pathTechniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._pathTechnique=this._techniqueRepository.acquireAndReleaseExisting(k,this._pathTechniqueConfig,this._pathTechnique);var t=e.rctx,n=this._pathTechnique,i=n.program;t.bindProgram(i),n.bindPipelineState(t),this.bindGlobalUniforms(e,i),n.bind(this._params,this._pathVerticalPlaneData.origin,e.camera),this._pathVerticalPlaneData.draw(e.rctx)}}},{key:"bindHeightManifoldUniforms",value:function(e,t){if(this.heightManifoldEnabled){var n=this._tempVec3A,r=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,n),U(r,this._heightManifoldTarget,n,e.camera.viewMatrix),t.setUniform4fv("heightPlane",r)}}},{key:"bindPointDistanceUniforms",value:function(e,t){if(this._pointDistanceEnabled){var n=e.camera,r=this._tempSphere;Object(a.j)(r,this._pointDistanceOrigin),Object(a.l)(r,r,n.viewMatrix),r[3]=Object(a.n)(this._pointDistanceOrigin,this._pointDistanceTarget),t.setUniform4f("pointDistanceSphere",r[0],r[1],r[2],r[3])}}},{key:"bindLineVerticalPlaneUniforms",value:function(e,t){if(this._lineVerticalPlaneEnabled){var n=this._renderCoordsHelper,r=e.camera,i=this._tempPlane,s=this._tempVec3A,u=this._tempUp,c=this._tempDir,l=this._tempNormal;o.d.pointAt(this._lineVerticalPlaneSegment,.5,s),n.worldUpAtPosition(s,u),Object(a.q)(c,this._lineVerticalPlaneSegment.vector),Object(a.f)(l,u,c),Object(a.q)(l,l),U(i,this._lineVerticalPlaneSegment.origin,l,r.viewMatrix),t.setUniform4fv("lineVerticalPlane",i);var h=this._tempVec3A;Object(a.j)(h,this._lineVerticalPlaneSegment.origin),n.setAltitude(0,h),Object(a.l)(h,h,r.viewMatrix),t.setUniform3fv("lineVerticalStart",h);var f=this._tempVec3B;Object(a.e)(f,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector),n.setAltitude(0,f),Object(a.l)(f,f,r.viewMatrix),t.setUniform3fv("lineVerticalEnd",f)}}},{key:"bindIntersectsLineUniforms",value:function(e,t){if(this._intersectsLineEnabled){var n=H,r=W;if(this._intersectsLineInfinite){var i=e.camera;if(o.b.fromRay(o.f.wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),q),q.c0=-Number.MAX_VALUE,!o.c.intersectClipRay(i.frustum,q))return;o.b.getStart(q,n),o.b.getEnd(q,r)}else Object(a.j)(n,this._intersectsLineSegment.origin),Object(a.e)(r,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);var s=this._tempVec3A;Object(a.l)(s,n,e.camera.viewMatrix),t.setUniform3fv("intersectsLineStart",s);var u=this._tempVec4;Object(a.j)(u,this._intersectsLineSegment.vector),this._tempVec4[3]=0,Object(f.m)(this._tempVec4,this._tempVec4,e.camera.viewMatrix),Object(a.l)(r,r,e.camera.viewMatrix),t.setUniform3fv("intersectsLineEnd",r),Object(a.q)(u,u),t.setUniform3f("intersectsLineDirection",u[0],u[1],u[2]),t.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}}},{key:"bindGlobalUniforms",value:function(e,t){var n=e.camera;t.setUniform4fv("projInfo",this._projInfo),t.setUniform2fv("zScale",this._zScale),t.setUniform2f("nearFar",n.near,n.far),this._heightManifoldEnabled?t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)),t.setUniform1i("depthMap",0),e.rctx.bindTexture(e.offscreenRenderingHelper.linearDepthTexture,0),t.setUniform1i("frameColor",1),e.rctx.bindTexture(e.offscreenRenderingHelper.mainColorTexture,1)}},{key:"_requestRender",value:function(){this._context&&this._context.requestRender()}},{key:"_selectTechnique",value:function(){return this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._technique=this._techniqueRepository.acquireAndReleaseExisting(N,this._techniqueConfig,this._technique),this._technique}}]),e}(),q=o.b.create(),H=Object(i.e)(),W=Object(i.e)(),J=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e.view))._angleCutoff=u.c,r._style={},r._heightManifoldTarget=Object(i.e)(),r._heightManifoldEnabled=!1,r._intersectsLine=o.d.create(),r._intersectsLineEnabled=!1,r._intersectsLineInfinite=!1,r._lineVerticalPlaneSegment=null,r._pathVerticalPlaneBuffers=null,r._pointDistanceLine=null,r.applyProps(e),r}return Zt(n,[{key:"testData",get:function(){return this.renderer}},{key:"createResources",value:function(){this.ensureRenderer()}},{key:"destroyResources",value:function(){this.disposeRenderer()}},{key:"updateVisibility",value:function(){this.syncHeightManifold(),this.syncIntersectsLine(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance()}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(e){this._angleCutoff!==e&&(this._angleCutoff=e,this.syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(e){this._style=e,this.syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(e){Object(r.k)(e)?(Object(a.j)(this._heightManifoldTarget,e),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this.syncRenderer(),this.syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(e){if(Object(r.j)(e))this.intersectsLine=null;else{var t=this.view.renderCoordsHelper.worldUpAtPosition(e,Z);this.intersectsLine=o.d.fromValues(e,t),this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(e){Object(r.k)(e)?(o.d.copy(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this.syncIntersectsLine(),this.syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(e){this._intersectsLineInfinite=e,this.syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(e){this._lineVerticalPlaneSegment=Object(r.k)(e)?o.d.copy(e):null,this.syncLineVerticalPlane(),this.syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(e){this._pathVerticalPlaneBuffers=e,this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},set:function(e){this._pointDistanceLine=Object(r.k)(e)?{origin:Object(i.d)(e.origin),target:Object(i.d)(e.target)}:null,this.syncPointDistance(),this.syncRenderer()}},{key:"syncRenderer",value:function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||Object(r.k)(this._pointDistanceLine)||Object(r.k)(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()}},{key:"ensureRenderer",value:function(){Object(r.k)(this.renderer)||(this.renderer=new B(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))}},{key:"syncStyle",value:function(){Object(r.j)(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))}},{key:"syncAngleCutoff",value:function(){Object(r.j)(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})}},{key:"syncHeightManifold",value:function(){Object(r.j)(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))}},{key:"syncIntersectsLine",value:function(){Object(r.j)(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))}},{key:"syncIntersectsLineInfinite",value:function(){Object(r.j)(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)}},{key:"syncPathVerticalPlane",value:function(){Object(r.j)(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=Object(r.k)(this._pathVerticalPlaneBuffers)&&this.visible,Object(r.k)(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}},{key:"syncLineVerticalPlane",value:function(){Object(r.j)(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=Object(r.k)(this._lineVerticalPlaneSegment)&&this.visible,Object(r.k)(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}},{key:"syncPointDistance",value:function(){Object(r.j)(this.renderer)||(this.renderer.pointDistanceEnabled=Object(r.k)(this._pointDistanceLine)&&this.visible,Object(r.k)(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))}},{key:"disposeRenderer",value:function(){Object(r.k)(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)}}]),n}(s.a),Z=Object(i.e)()},ZRjd:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("d3UM"),i=n("bTqV"),a=(n("Tc+0"),n("fXoL")),o=n("ofXK"),s=n("kmnG"),u=n("3Pt+"),c=n("hifB"),l=n("OFbc"),h=(n("8LU1"),n("0EQZ"),n("FKr1"));n("u47x");var f,p,d=((f=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||f)},f.\u0275mod=a.dc({type:f}),f.\u0275inj=a.cc({imports:[[h.d,h.h],h.d]}),f),v=n("Wqx0"),y=((p=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||p)},p.\u0275mod=a.dc({type:p}),p.\u0275inj=a.cc({imports:[[o.c,v.a,u.f,s.d,c.a,l.a,i.b,r.b,d]]}),p);n("YbY9");var b,g=((b=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||b)},b.\u0275mod=a.dc({type:b}),b.\u0275inj=a.cc({imports:[[l.a,c.a,o.c,u.f,i.b,s.d,r.b]]}),b);n("0DCJ");var m,w=((m=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||m)},m.\u0275mod=a.dc({type:m}),m.\u0275inj=a.cc({imports:[[o.c,v.a,u.f,s.d,c.a,l.a]]}),m);n("sq3C"),n("T6IO");var O=["checkbox"],j=function(e,t){return{"ui-button-icon-left":e,"ui-button-icon-right":t}};function _(e,t){if(1&e&&a.gc(0,"span",6),2&e){var n=a.vc();a.Vb(n.checked?n.onIcon:n.offIcon),a.Bc("ngClass",a.Fc(3,j,"left"===n.iconPos,"right"===n.iconPos))}}var x,k,S=function(e,t,n,r,i,a,o){return{"ui-button ui-togglebutton ui-widget ui-state-default ui-corner-all":!0,"ui-button-text-only":e,"ui-button-text-icon-left":t,"ui-button-text-icon-right":n,"ui-button-icon-only":r,"ui-state-active":i,"ui-state-focus":a,"ui-state-disabled":o}},M={provide:u.h,useExisting:Object(a.lb)((function(){return I})),multi:!0},I=((k=function(){function e(){Wt(this,e),this.onLabel="Yes",this.offLabel="No",this.iconPos="left",this.onChange=new a.t,this.checked=!1,this.focus=!1,this.onModelChange=function(){},this.onModelTouched=function(){}}return Zt(e,[{key:"ngAfterViewInit",value:function(){this.checkboxViewChild&&(this.checkbox=this.checkboxViewChild.nativeElement)}},{key:"toggle",value:function(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.checkbox&&this.checkbox.focus())}},{key:"onFocus",value:function(){this.focus=!0}},{key:"onBlur",value:function(){this.focus=!1,this.onModelTouched()}},{key:"writeValue",value:function(e){this.checked=e}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"hasOnLabel",get:function(){return this.onLabel.length>0}},{key:"hasOffLabel",get:function(){return this.onLabel.length>0}}]),e}()).\u0275fac=function(e){return new(e||k)},k.\u0275cmp=a.Zb({type:k,selectors:[["p-toggleButton"]],viewQuery:function(e,t){var n;1&e&&a.Xc(O,1),2&e&&a.Ic(n=a.sc())&&(t.checkboxViewChild=n.first)},inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[a.Sb([M])],decls:7,vars:17,consts:[[3,"ngClass","ngStyle","click","keydown.enter"],[1,"ui-helper-hidden-accessible"],["type","checkbox",3,"checked","focus","blur"],["checkbox",""],["class","ui-button-icon-left",3,"class","ngClass",4,"ngIf"],[1,"ui-button-text","ui-unselectable-text"],[1,"ui-button-icon-left",3,"ngClass"]],template:function(e,t){1&e&&(a.kc(0,"div",0),a.rc("click",(function(e){return t.toggle(e)}))("keydown.enter",(function(e){return t.toggle(e)})),a.kc(1,"div",1),a.kc(2,"input",2,3),a.rc("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()})),a.jc(),a.jc(),a.Sc(4,_,1,6,"span",4),a.kc(5,"span",5),a.Tc(6),a.jc(),a.jc()),2&e&&(a.Vb(t.styleClass),a.Bc("ngClass",a.Hc(9,S,!t.onIcon&&!t.offIcon,t.onIcon&&t.offIcon&&t.hasOnLabel&&t.hasOffLabel&&"left"===t.iconPos,t.onIcon&&t.offIcon&&t.hasOnLabel&&t.hasOffLabel&&"right"===t.iconPos,t.onIcon&&t.offIcon&&!t.hasOnLabel&&!t.hasOffLabel,t.checked,t.focus,t.disabled))("ngStyle",t.style),a.Tb(2),a.Bc("checked",t.checked),a.Ub("id",t.inputId)("tabindex",t.tabindex),a.Tb(2),a.Bc("ngIf",t.onIcon||t.offIcon),a.Tb(2),a.Uc(t.checked?t.hasOnLabel?t.onLabel:"ui-btn":t.hasOffLabel?t.offLabel:"ui-btn"))},directives:[o.k,o.n,o.m],encapsulation:2}),k),T=((x=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||x)},x.\u0275mod=a.dc({type:x}),x.\u0275inj=a.cc({imports:[[o.c]]}),x);n("JiAY");var A,C,E=((A=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||A)},A.\u0275mod=a.dc({type:A}),A.\u0275inj=a.cc({imports:[[o.c,c.a,l.a,u.f,s.d,i.b,d,T,v.a]]}),A),P=n("FhEM"),R=((C=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||C)},C.\u0275mod=a.dc({type:C}),C.\u0275inj=a.cc({imports:[[o.c,c.a,l.a,r.b,u.f,s.d,i.b,d,T,E,w,g,y,c.a,P.a]]}),C)},ZVeJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r=new(n("+opI").a)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),i={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}},ZYtI:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("r88o"),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=n("1Mqo"),h=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).end=null,r.start=null,r}return Zt(n,[{key:"readEnd",value:function(e,t){return null!=t.end?new Date(t.end):null}},{key:"writeEnd",value:function(e,t){t.end=e?e.getTime():null}},{key:"isAllTime",get:function(){return this.equals(r.allTime)}},{key:"isEmpty",get:function(){return this.equals(r.empty)}},{key:"readStart",value:function(e,t){return null!=t.start?new Date(t.start):null}},{key:"writeStart",value:function(e,t){t.start=e?e.getTime():null}},{key:"clone",value:function(){return new r({end:this.end,start:this.start})}},{key:"expandTo",value:function(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=this.start?Object(l.e)(this.start,e):null,n=this.end?Object(l.c)(Object(l.e)(this.end,e),1,e):null;return new r({start:t,end:n})}},{key:"intersection",value:function(e){var t,n,i,a,o,s,u,c;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return r.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var l,h,f=null!=(t=null==(n=this.start)?void 0:n.getTime())?t:-1/0,p=null!=(i=null==(a=this.end)?void 0:a.getTime())?i:1/0,d=null!=(o=null==(s=e.start)?void 0:s.getTime())?o:-1/0,v=null!=(u=null==(c=e.end)?void 0:c.getTime())?u:1/0;if(d>=f&&d<=p?l=d:f>=d&&f<=v&&(l=f),p>=d&&p<=v?h=p:v>=f&&v<=p&&(h=v),!isNaN(l)&&!isNaN(h)){var y=new r;return y.start=l===-1/0?null:new Date(l),y.end=h===1/0?null:new Date(h),y}return r.empty}},{key:"offset",value:function(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var n=new r,i=this.start,a=this.end;return i&&(n.start=Object(l.c)(i,e,t)),a&&(n.end=Object(l.c)(a,e,t)),n}},{key:"equals",value:function(e){if(!e)return!1;var t=this.start?this.start.getTime():this.start,n=this.end?this.end.getTime():this.end,r=e.start?e.start.getTime():e.start,i=e.end?e.end.getTime():e.end;return t===r&&n===i}},{key:"union",value:function(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return f.clone();var t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new r({start:t,end:n})}}],[{key:"allTime",get:function(){return f}},{key:"empty",get:function(){return p}}]),n}(c.a);Object(i.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),Object(i.a)([Object(o.a)("end")],h.prototype,"readEnd",null),Object(i.a)([Object(u.a)("end")],h.prototype,"writeEnd",null),Object(i.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),Object(i.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),Object(i.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),Object(i.a)([Object(o.a)("start")],h.prototype,"readStart",null),Object(i.a)([Object(u.a)("start")],h.prototype,"writeStart",null);var f=new(h=r=Object(i.a)([Object(s.a)("esri.TimeExtent")],h)),p=new h({start:void 0,end:void 0});t.a=h},ZadS:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("xkkJ"),i=n("51PB"),a=n("5rU3"),o=n("0jIh"),s=n("tjz2"),u=n("VxUT"),c=function(){function e(){Wt(this,e)}return Zt(e,[{key:"draw",value:function(e,t){var n,c=[],l=Vt(this.getUniqueHints(e));try{for(l.s();!(n=l.n()).done;){var h=n.value;h instanceof i.a&&c.push(this.visualizeIntersectionPoint(h,t)),h instanceof a.a&&c.push(this.visualizeLine(h,t)),h instanceof o.a&&c.push(this.visualizeParallelSign(h,t)),h instanceof u.a&&c.push(this.visualizeRightAngleQuad(h,t)),h instanceof s.a&&c.push(this.visualizePoint(h,t))}}catch(f){l.e(f)}finally{l.f()}return Object(r.b)(c)}},{key:"getUniqueHints",value:function(e){var t,n=[],r=Vt(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o=!0,s=Vt(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(a.equals(u)){o=!1;break}}}catch(c){s.e(c)}finally{s.f()}o&&n.push(a)}}catch(c){r.e(c)}finally{r.f()}return n}}]),e}()},ZlUD:function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return H})),n.d(t,"d",(function(){return Z})),n.d(t,"e",(function(){return W})),n.d(t,"f",(function(){return G})),n.d(t,"g",(function(){return V})),n.d(t,"h",(function(){return N})),n.d(t,"i",(function(){return J})),n.d(t,"j",(function(){return X})),n.d(t,"k",(function(){return K})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return O})),n.d(t,"n",(function(){return F})),n.d(t,"o",(function(){return D})),n.d(t,"p",(function(){return le})),n.d(t,"q",(function(){return ne})),n.d(t,"r",(function(){return ae})),n.d(t,"s",(function(){return ce})),n.d(t,"t",(function(){return ee})),n.d(t,"u",(function(){return te})),n.d(t,"v",(function(){return b})),n.d(t,"w",(function(){return g})),n.d(t,"x",(function(){return se})),n.d(t,"y",(function(){return $})),n.d(t,"z",(function(){return oe}));var r=n("6S2I"),i=n("zlDU"),a=n("qatw"),o=n("k5I3"),s=n("7tXg"),u=n("gVKr");function c(e,t){return e?t?4:3:t?3:2}var l=r.a.getLogger("esri.tasks.support.optimizedFeatureSet"),h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},f=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a},p=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a,e[n+2]=t[r+2]},d=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a,e[n+2]=t[r+3]},v=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a,e[n+2]=t[r+2],e[n+3]=t[r+3]};function y(e,t,n,r){if(e){if(n)return t&&r?v:p;if(t&&r)return d}else if(t&&r)return p;return f}function b(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function g(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function m(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function w(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function O(e,t,n){return e?t?n?I(e):x(e):n?S(e):j(e):null}function j(e){var t=e.coords;return{x:t[0],y:t[1]}}function _(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function x(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function k(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function S(e){var t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function M(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function I(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function A(e,t){return e&&t?T:e?k:t?M:_}function C(e,t,n,r,i){var a,s=A(n,r),c=Vt(t);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=l.geometry,f=l.attributes,p=void 0;h&&(p=s(new u.a,h)),e.push(new o.a(p,f,null,f[i]))}}catch(d){c.e(d)}finally{c.f()}return e}function E(e,t,n){if(!e)return null;for(var r=c(t,n),i=[],a=0;a<e.coords.length;a+=r){for(var o=[],s=0;s<r;s++)o.push(e.coords[a+s]);i.push(o)}return t?n?{points:i,hasZ:t,hasM:n}:{points:i,hasZ:t}:n?{points:i,hasM:n}:{points:i}}function P(e,t,n,r,i){var a,s=c(n,r),l=Vt(t);try{for(l.s();!(a=l.n()).done;){var h=a.value,f=h.geometry,p=h.attributes,d=void 0;f&&(d=R(new u.a,f,s)),e.push(new o.a(d,p,null,p[i]))}}catch(v){l.e(v)}finally{l.f()}return e}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c(t.hasZ,t.hasM);e.lengths[0]=t.points.length;var r,i=e.coords,a=0,o=Vt(t.points);try{for(o.s();!(r=o.n()).done;)for(var s=r.value,u=0;u<n;u++)i[a++]=s[u]}catch(l){o.e(l)}finally{o.f()}return e}function D(e,t,n){if(!e)return null;var r,i=c(t,n),a=e.coords,o=[],s=0,u=Vt(e.lengths);try{for(u.s();!(r=u.n()).done;){for(var l=r.value,h=[],f=0;f<l;f++){for(var p=[],d=0;d<i;d++)p.push(a[s++]);h.push(p)}o.push(h)}}catch(v){u.e(v)}finally{u.f()}return t?n?{paths:o,hasZ:t,hasM:n}:{paths:o,hasZ:t}:n?{paths:o,hasM:n}:{paths:o}}function L(e,t,n,r,i){var a,s=c(n,r),l=Vt(t);try{for(l.s();!(a=l.n()).done;){var h=a.value,f=h.geometry,p=h.attributes,d=void 0;f&&(d=N(new u.a,f,s)),e.push(new o.a(d,p,null,p[i]))}}catch(v){l.e(v)}finally{l.f()}return e}function N(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c(t.hasZ,t.hasM),i=e.lengths,a=e.coords,o=0,s=Vt(t.paths);try{for(s.s();!(n=s.n()).done;){var u,l=n.value,h=Vt(l);try{for(h.s();!(u=h.n()).done;)for(var f=u.value,p=0;p<r;p++)a[o++]=f[p]}catch(d){h.e(d)}finally{h.f()}i.push(l.length)}}catch(d){s.e(d)}finally{s.f()}return e}function F(e,t,n){if(!e)return null;var r,i=c(t,n),a=e.coords,o=[],s=0,u=Vt(e.lengths);try{for(u.s();!(r=u.n()).done;){for(var l=r.value,h=[],f=0;f<l;f++){for(var p=[],d=0;d<i;d++)p.push(a[s++]);h.push(p)}o.push(h)}}catch(v){u.e(v)}finally{u.f()}return t?n?{rings:o,hasZ:t,hasM:n}:{rings:o,hasZ:t}:n?{rings:o,hasM:n}:{rings:o}}function z(e,t,n,r,i){var a,s=Vt(t);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=c.geometry,h=c.centroid,f=c.attributes,p=void 0;l&&(p=V(new u.a,l,n,r)),e.push(new o.a(p,f,h?_(new u.a,h):null,f[i]))}}catch(d){s.e(d)}finally{s.f()}return e}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.hasZ,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.hasM;return G(e,t.rings,n,r),e}function G(e,t,n,r){var i=c(n,r),a=e.lengths,o=e.coords,s=0;a.length=o.length=0;var u,l=Vt(t);try{for(l.s();!(u=l.n()).done;){var h,f=u.value,p=Vt(f);try{for(p.s();!(h=p.n()).done;)for(var d=h.value,v=0;v<i;v++)o[s++]=d[v]}catch(y){p.e(y)}finally{p.f()}a.push(f.length)}}catch(y){l.e(y)}finally{l.f()}return e}var U=[],B=[];function q(e,t,n,r,i){U[0]=e;var a=zt(H(B,U,t,n,r,i),1)[0];return U.length=B.length=0,a}function H(e,t,n,r,a,s){if(e.length=0,!n){var u,c=Vt(t);try{for(c.s();!(u=c.n()).done;){var h=u.value;e.push(new o.a(null,h.attributes,null,h.attributes[s]))}}catch(f){c.e(f)}finally{c.f()}return e}switch(n){case"esriGeometryPoint":return C(e,t,r,a,s);case"esriGeometryMultipoint":return P(e,t,r,a,s);case"esriGeometryPolyline":return L(e,t,r,a,s);case"esriGeometryPolygon":return z(e,t,r,a,s);default:l.error("convertToFeatureSet:unknown-geometry",new i.a("Unable to parse unknown geometry type '".concat(n,"'"))),e.length=0}return e}function W(e,t,n,r,a,o){var s=e.length;switch(n){case"esriGeometryPoint":C(e,t,r,a,o);break;case"esriGeometryMultipoint":P(e,t,r,a,o);break;case"esriGeometryPolyline":L(e,t,r,a,o);break;case"esriGeometryPolygon":z(e,t,r,a,o);break;default:l.error("convertToFeatureSet:unknown-geometry",new i.a("Unable to parse unknown geometry type '".concat(n,"'")))}for(var u=0;u<t.length;u++)e[u+s].geometryType=n,e[u+s].insertAfter=t[u].insertAfter,e[u+s].groupId=t[u].groupId;return e}function J(e,t,n,r){B[0]=e,Y(U,B,t,n,r);var i=U[0];return U.length=B.length=0,i}function Z(e,t,n){if(!e)return null;var r=new u.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),Object(a.f)(e)?A(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(r,e):Object(a.g)(e)?V(r,e,t,n):Object(a.h)(e)?N(r,e,c(t,n)):Object(a.e)(e)?R(r,e,c(t,n)):void l.error("convertFromGeometry:unknown-geometry",new i.a("Unable to parse unknown geometry type '".concat(e,"'")))}function K(e,t,n,r){var a=e&&("coords"in e?e:e.geometry);if(!a)return null;switch(t){case"esriGeometryPoint":var o=j;return n&&r?o=I:n?o=x:r&&(o=S),o(a);case"esriGeometryMultipoint":return E(a,n,r);case"esriGeometryPolyline":return D(a,n,r);case"esriGeometryPolygon":return F(a,n,r);default:return void l.error("convertToGeometry:unknown-geometry",new i.a("Unable to parse unknown geometry type '".concat(t,"'")))}}function Y(e,t,n,r,a){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,n,r){var i=j;n&&r?i=I:n?i=x:r&&(i=S);var a,o=Vt(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.geometry,c=s.attributes,l=u?i(u):null;e.push({attributes:c,geometry:l})}}catch(h){o.e(h)}finally{o.f()}return e}(e,t,r,a);case"esriGeometryMultipoint":return function(e,t,n,r){var i,a=Vt(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.geometry,u=o.attributes,c=void 0;s&&(c=E(s,n,r)),e.push({attributes:u,geometry:c})}}catch(l){a.e(l)}finally{a.f()}return e}(e,t,r,a);case"esriGeometryPolyline":return function(e,t,n,r){var i,a=Vt(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.geometry,u=o.attributes,c=void 0;s&&(c=D(s,n,r)),e.push({attributes:u,geometry:c})}}catch(l){a.e(l)}finally{a.f()}return e}(e,t,r,a);case"esriGeometryPolygon":return function(e,t,n,r){var i,a=Vt(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.geometry,u=o.attributes,c=o.centroid,l=void 0;if(s&&(l=F(s,n,r)),c){var h=j(c);e.push({attributes:u,centroid:h,geometry:l})}else e.push({attributes:u,geometry:l})}}catch(f){a.e(f)}finally{a.f()}return e}(e,t,r,a);default:l.error("convertToFeatureSet:unknown-geometry",new i.a("Unable to parse unknown geometry type '".concat(n,"'")))}return e}function X(e){var t=e.objectIdFieldName,n=e.spatialReference,r=e.transform,i=e.fields,a=e.hasM,o=e.hasZ,s=e.features,u=e.geometryType,c=e.exceededTransferLimit,l=e.uniqueIdField,h=e.queryGeometry,f=e.queryGeometryType,p={features:Y([],s,u,o,a),fields:i,geometryType:u,objectIdFieldName:t,spatialReference:n,uniqueIdField:l,queryGeometry:K(h,f,!1,!1)};return r&&(p.transform=r),c&&(p.exceededTransferLimit=c),a&&(p.hasM=a),o&&(p.hasZ=o),p}function Q(e,t){var n=new s.a,r=e.hasM,a=e.hasZ,o=e.features,u=e.objectIdFieldName,c=e.spatialReference,h=e.geometryType,f=e.exceededTransferLimit,p=e.transform,d=e.fields;return d&&(n.fields=d),n.geometryType=h,n.objectIdFieldName=u||t,n.spatialReference=c,n.objectIdFieldName?(o&&H(n.features,o,h,a,r,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),r&&(n.hasM=r),a&&(n.hasZ=a),p&&(n.transform=p),n):(l.error(new i.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function $(e){var t=e.transform,n=e.features,r=e.hasM,i=e.hasZ;if(!t)return e;var a,o=Vt(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.geometry&&oe(s.geometry,s.geometry,r,i,t),s.centroid&&oe(s.centroid,s.centroid,r,i,t)}}catch(u){o.e(u)}finally{o.f()}return e.transform=null,e}function ee(e,t){var n=t.geometryType,r=t.features,i=t.hasM,a=t.hasZ;if(!e)return t;for(var o=0;o<r.length;o++){var s=r[o],c=s.weakClone();c.geometry=new u.a,te(c.geometry,s.geometry,i,a,n,e),s.centroid&&(c.centroid=new u.a,te(c.centroid,s.centroid,i,a,"esriGeometryPoint",e)),r[o]=c}return t.transform=e,t}function te(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r;if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var u=h[i],l=t.coords,f=t.lengths,p=c(n,r),d=c(n&&o,r&&s),v=y(n,r,o,s);if(!f.length)return v(e.coords,l,0,0,b(a,l[0]),g(a,l[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;var m,w,O,j,_,x=0,k=0,S=k,M=Vt(f);try{for(M.s();!(_=M.n()).done;){var I=_.value;if(!(I<u)){var T=0;k=S,O=m=b(a,l[x]),j=w=g(a,l[x+1]),v(e.coords,l,k,x,O,j),T++,x+=p,k+=d;for(var A=1;A<I;A++,x+=p)O=b(a,l[x]),j=g(a,l[x+1]),O===m&&j===w||(v(e.coords,l,k,x,O-m,j-w),k+=d,T++,m=O,w=j);T>=u&&(e.lengths.push(T),S=k)}}}catch(C){M.e(C)}finally{M.f()}return e.coords.length=S,e.coords.length?e:null}function ne(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r;if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var u=h[i],l=t.coords,f=t.lengths,p=c(n,r),d=c(n&&o,r&&s),v=y(n,r,o,s);if(!f.length)return v(e.coords,l,0,0,l[0],l[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;var b,g=0,m=a*a,w=Vt(f);try{for(w.s();!(b=w.n()).done;){var O=b.value;if(O<u)g+=O*p;else{var j=e.coords.length/d,_=g,x=g+(O-1)*p;v(e.coords,l,e.coords.length,_,l[_],l[_+1]),ie(e.coords,l,p,m,v,_,x),v(e.coords,l,e.coords.length,x,l[x],l[x+1]);var k=e.coords.length/d-j;k>=u?e.lengths.push(k):e.coords.length=j*d,g+=O*p}}}catch(S){w.e(S)}finally{w.f()}return e.coords.length?e:null}function re(e,t,n,r){var i=e[t],a=e[t+1],o=e[r],s=e[r+1],u=e[n],c=e[n+1],l=o-u,h=s-c;if(0!==l||0!==h){var f=((i-u)*l+(a-c)*h)/(l*l+h*h);f>1?(u=o,c=s):f>0&&(u+=l*f,c+=h*f)}return(l=i-u)*l+(h=a-c)*h}function ie(e,t,n,r,i,a,o){for(var s,u=r,c=0,l=a+n;l<o;l+=n)(s=re(t,l,a,o))>u&&(c=l,u=s);u>r&&(c-a>n&&ie(e,t,n,r,i,a,c),i(e,t,e.length,c,t[c],t[c+1]),o-c>n&&ie(e,t,n,r,i,c,o))}function ae(e,t,n,r){if(!t||!t.coords||!t.coords.length)return null;var i=c(n,r),a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords)for(var l=t.coords,h=0;h<l.length;h+=i){var f=l[h],p=l[h+1];a=Math.min(a,f),s=Math.max(s,f),o=Math.min(o,p),u=Math.max(u,p)}return e[0]=a,e[1]=o,e[2]=s,e[3]=u,e}function oe(e,t,n,r,i){var a=t.coords,o=t.lengths,s=n?r?v:p:r?p:f,u=c(n,r);if(!a.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return s(e.coords,a,0,0,m(i,a[0]),w(i,a[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;for(var l=zt(i.scale,2),h=l[0],d=l[1],y=0,b=0;b<o.length;b++){var g=o[b];e.lengths[b]=g;var O=m(i,a[y]),j=w(i,a[y+1]);s(e.coords,a,y,y,O,j),y+=u;for(var _=1;_<g;_++,y+=u)O+=a[y]*h,j-=a[y+1]*d,s(e.coords,a,y,y,O,j)}return e!==t&&(e.lengths.length=o.length,e.coords.length=a.length),e}function se(e,t,n,r,i,a){var o,s=c(n,r),u=y(n,r,i,a),l=t.coords;e.coords.length=0,e.lengths.length=0,(o=e.lengths).push.apply(o,Bt(t.lengths));for(var h=0;h<l.length;h+=s)u(e.coords,l,e.coords.length,h,l[h],l[h+1]);return e}function ue(e,t,n,r){for(var i=0,a=e[r*t],o=e[r*(t+1)],s=1;s<n;s++){var u=a+e[r*(t+s)],c=o+e[r*(t+s)+1],l=(u-a)*(c+o);a=u,o=c,i+=l}return.5*i}function ce(e,t){for(var n=e.coords,r=e.lengths,i=0,a=0,o=0;o<r.length;o++)a+=ue(n,i,r[o],t),i+=o;return Math.abs(a)}function le(e,t){for(var n=e.clone(),r=e.coords,i=e.lengths,a=0,o=0;o<i.length;o++){for(var s=i[o],u=r[t*a],c=r[t*a+1],l=1;l<s;l++){var h=u+r[t*(a+l)],f=c+r[t*(a+l)+1];n.coords[t*(a+l)]=h,n.coords[t*(a+l)+1]=f,u=h,c=f}a+=s}return n}},ZnuT:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("+opI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("c8tJ"),c=new a.a({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0}),l=function(e){Kt(i,e);var t,n,r=Xt(i);function i(e){var t;return Wt(this,i),(t=r.call(this,e)).authoringInfo=null,t.type=null,t}return Zt(i,[{key:"getRequiredFields",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.collectRequiredFields){e.next=2;break}return e.abrupt("return",[]);case 2:return n=new Set,e.next=5,this.collectRequiredFields(n,t);case 5:return e.abrupt("return",Array.from(n).sort());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return JSON.stringify(this)}},{key:"getMeshHash",value:function(){return JSON.stringify(this)}}]),i}(s.a);Object(r.a)([Object(i.b)({type:u.a,json:{write:!0}})],l.prototype,"authoringInfo",void 0),Object(r.a)([Object(i.b)({type:c.apiValues,readOnly:!0,json:{type:c.jsonValues,read:!1,write:{writer:c.write,ignoreOrigin:!0}}})],l.prototype,"type",void 0),l=Object(r.a)([Object(o.a)("esri.renderers.Renderer")],l),t.a=l},ZuQG:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI"),n("04ZG")),a=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);a=Object(r.a)([Object(i.a)("esri.views.layers.support.ClipArea")],a),t.a=a},ZwYu:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return u}));var r=n("SuVq"),i=n("qRWG"),a=n("Cy1f"),o=n("M0lq"),s=n("9AiD");function u(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function c(e,t){var n=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return n;case 3:return n&&e[2]===t[2];case 4:return n&&e[3]===t[3]}return!1}function l(e,t,n,r){return"2d"===r.type?r.toScreen(t.toPoint(e,y)):(h(e,t,n,r,d),r.state.camera.projectToScreen(d,v),Object(i.f)(v[0],v[1]))}function h(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(a.e)(),o=t.toXYZ(e);return o[2]=Object(s.b)(r,o,t.spatialReference,n)||0,r.renderCoordsHelper.toRenderCoords(o,t.spatialReference,i),i}function f(e,t,n,r,i,a,o){var u=n.toXYZ(e),c=n.toXYZ(t),l=Object(s.b)(i,u,n.spatialReference,r),h=Object(s.b)(i,c,n.spatialReference,r),f=(null==l?h:null==h?l:Math.min(l,h))||0;u[2]=f,c[2]=f,i.renderCoordsHelper.toRenderCoords(u,n.spatialReference,a),i.renderCoordsHelper.toRenderCoords(c,n.spatialReference,o)}function p(e,t){t.sort((function(t,n){return Object(o.j)(t.targetPoint,e)-Object(o.j)(n.targetPoint,e)}))}var d=Object(a.e)(),v=Object(i.g)(),y=new r.a},aAs6:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return u}));var r=n("OKTS"),i=n("Cy1f"),a=n("5DEt");function o(e){var t=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(e[0]*e[0]+e[4]*e[4]+e[8]*e[8],e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),t))}function s(e,t,n){n=n||e;var r=Object(a.g)(e,t);Object(a.v)(n,e[0]-r*t[0],e[1]-r*t[1],e[2]-r*t[2]),Object(a.q)(n,n)}function u(e,t,n){Math.abs(e[0])>Math.abs(e[1])?Object(a.v)(t,0,1,0):Object(a.v)(t,1,0,0),Object(a.f)(n,e,t),Object(a.q)(t,t),Object(a.f)(t,n,e),Object(a.q)(n,n)}function c(e,t){var n=Object(a.o)(e),i=Object(r.b)(e[2]/n),o=Math.atan2(e[1]/n,e[0]/n);return Object(a.v)(t,n,i,o),t}function l(e,t,n){var r=n[0]-t[0],i=n[1]-t[1],a=n[2]-t[2],o=r*r+i*i+a*a;return o?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=a*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(i.e)(),o=Object(a.o)(e),s=Object(a.o)(t),u=Object(a.g)(e,t)/(o*s);if(u<.9999999999999999){var c=Math.acos(u),l=((1-n)*o+n*s)/Math.sin(c),h=l/o*Math.sin((1-n)*c),f=l/s*Math.sin(n*c);return Object(a.d)(w,e,h),Object(a.d)(O,t,f),Object(a.e)(r,w,O)}return Object(a.h)(r,e,t,n)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(i.e)(),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(i.e)(),s=Object(a.o)(e),u=Object(a.o)(t),c=Object(a.g)(e,t)/(s*u);if(c<.9999999999999999){var l=Math.acos(c),h=Math.sin(l),f=Math.sin(n*l),p=Math.sin((1-n)*l),d=(1-n)*s+n*u,v=d/h,y=v/u*f;Object(a.d)(w,e,v/s*p),Object(a.d)(O,t,y),Object(a.e)(r,w,O);var b=1/s*(-Math.cos((1-n)*l)*l*d+p*(-s+u));Object(a.d)(w,e,b);var g=1/u*(Math.cos(n*l)*l*d+f*(-s+u));return Object(a.d)(O,t,g),Object(a.e)(o,w,O),Object(a.d)(o,o,1/h),o}return Object(a.h)(r,e,t,n),Object(a.i)(o,t,e),Object(a.q)(o,o),o}var p=function(){function e(t,n){Wt(this,e),this.min=t,this.max=n,this.range=n-t}return Zt(e,[{key:"ndiff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.ceil((e-t)/this.range)*this.range+t}},{key:"_normalize",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(n-=r)<e?n+=this.ndiff(e-n):n>t&&(n-=this.ndiff(n-t)),i&&n===t&&(n=e),n+r}},{key:"normalize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._normalize(this.min,this.max,e,t,n)}},{key:"clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.c)(e-t,this.min,this.max)+t}},{key:"monotonic",value:function(e,t,n){return e<t?t:t+this.ndiff(e-t,n)}},{key:"minimalMonotonic",value:function(e,t,n){return this._normalize(e,e+this.range,t,n)}},{key:"center",value:function(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}},{key:"diff",value:function(e,t,n){return this.monotonic(e,t,n)-e}},{key:"shortestSignedDiff",value:function(e,t){e=this.normalize(e);var n=(t=this.normalize(t))-e,r=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(r)?n:r}},{key:"contains",value:function(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}]),e}();function d(e,t,n,r){Object(a.i)(v,t,e),Object(a.i)(y,n,e),Object(a.f)(r,v,y),Object(a.q)(r,r),r[3]=-Object(a.g)(e,r)}var v=Object(i.e)(),y=Object(i.e)();function b(e){for(var t in e){var n=e[t];n instanceof Function&&(e[t]=n.bind(e))}return e}b(new p(0,2*Math.PI));var g=b(new p(-Math.PI,Math.PI)),m=b(new p(0,360)),w=(Object(i.e)(),Object(i.e)()),O=Object(i.e)()},aCCJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("fXoL"),i=n("2yZv"),a=n("frIU"),o=n("ofXK");function s(e,t){if(1&e&&(r.kc(0,"div",1),r.Tc(1),r.jc()),2&e){var n=r.vc();r.Tb(1),r.Vc("1:",n.scaleText,"")}}var u=function(){var e=function(){function e(t){Wt(this,e),this.mapViewService=t,this.scaleText=null}return Zt(e,[{key:"ngOnInit",value:function(){var e=this;this.mapViewService.scaleChanged.subscribe((function(t){e.scaleText=Object(i.a)(t,0)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(a.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["app-scale-text"]],decls:1,vars:1,consts:[["class","scaleTextContainer",4,"ngIf"],[1,"scaleTextContainer"]],template:function(e,t){1&e&&r.Sc(0,s,2,1,"div",0),2&e&&r.Bc("ngIf",null!==t.scaleText)},directives:[o.m],styles:[".scaleTextContainer[_ngcontent-%COMP%]{position:absolute;left:1.25em;bottom:4.25em;background-color:#212121;min-width:5.1875em;color:#a6a6a6;font-weight:700;font-size:.75em;padding:0 .5em;text-align:center}"]}),e}()},aFNf:function(e,t,n){"use strict";var r=n("vn/o"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,h,f){var p,d,v,y,b,g,m,w,O,j=f.bits,_=0,x=0,k=0,S=0,M=0,I=0,T=0,A=0,C=0,E=0,P=null,R=0,D=new r.Buf16(16),L=new r.Buf16(16),N=null,F=0;for(_=0;_<=15;_++)D[_]=0;for(x=0;x<u;x++)D[t[n+x]]++;for(M=j,S=15;S>=1&&0===D[S];S--);if(M>S&&(M=S),0===S)return c[l++]=20971520,c[l++]=20971520,f.bits=1,0;for(k=1;k<S&&0===D[k];k++);for(M<k&&(M=k),A=1,_=1;_<=15;_++)if(A<<=1,(A-=D[_])<0)return-1;if(A>0&&(0===e||1!==S))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+D[_];for(x=0;x<u;x++)0!==t[n+x]&&(h[L[t[n+x]]++]=x);if(0===e?(P=N=h,g=19):1===e?(P=i,R-=257,N=a,F-=257,g=256):(P=o,N=s,g=-1),E=0,x=0,_=k,b=l,I=M,T=0,v=-1,y=(C=1<<M)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){m=_-T,h[x]<g?(w=0,O=h[x]):h[x]>g?(w=N[F+h[x]],O=P[R+h[x]]):(w=96,O=0),p=1<<_-T,k=d=1<<I;do{c[b+(E>>T)+(d-=p)]=m<<24|w<<16|O|0}while(0!==d);for(p=1<<_-1;E&p;)p>>=1;if(0!==p?(E&=p-1,E+=p):E=0,x++,0==--D[_]){if(_===S)break;_=t[n+h[x]]}if(_>M&&(E&y)!==v){for(0===T&&(T=M),b+=k,A=1<<(I=_-T);I+T<S&&!((A-=D[I+T])<=0);)I++,A<<=1;if(C+=1<<I,1===e&&C>852||2===e&&C>592)return 1;c[v=E&y]=M<<24|I<<16|b-l|0}}return 0!==E&&(c[b+E]=_-T<<24|64<<16|0),f.bits=M,0}},aJGj:function(e,t,n){"use strict";var r=n("Q1FS");t.EMPTY=new r.Observable((function(e){return e.complete()})),t.empty=function(e){return e?function(e){return new r.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}(e):t.EMPTY}},aK8v:function(e,t,n){"use strict";var r=n("srIe"),i=n("jdNP"),a=n("1/dN");t.a=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._textureIDs=new Set,r._textureRepository=e.textureRep,r._textureId=e.textureId,r._initTransparent=!!e.initTextureTransparent,r._texture=r._acquireIfNotUndefined(r._textureId),r._textureNormal=r._acquireIfNotUndefined(e.normalTextureId),r._textureEmissive=r._acquireIfNotUndefined(e.emissiveTextureId),r._textureOcclusion=r._acquireIfNotUndefined(e.occlusionTextureId),r._textureMetallicRoughness=r._acquireIfNotUndefined(e.metallicRoughnessTextureId),r}return Zt(n,[{key:"dispose",value:function(){var e=this;this._textureIDs.forEach((function(t){return e._textureRepository.release(t)})),this._textureIDs.clear()}},{key:"updateTexture",value:function(e){e!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=e,this._texture=this._acquireIfNotUndefined(this._textureId))}},{key:"bindTexture",value:function(e,t){Object(r.k)(this._texture)&&(t.setUniform1i("tex",i.a.DIFFUSE),e.bindTexture(this._texture.glTexture,i.a.DIFFUSE)),Object(r.k)(this._textureNormal)&&(t.setUniform1i("normalTexture",i.a.NORMAL),e.bindTexture(this._textureNormal.glTexture,i.a.NORMAL)),Object(r.k)(this._textureEmissive)&&(t.setUniform1i("texEmission",i.a.EMISSION),e.bindTexture(this._textureEmissive.glTexture,i.a.EMISSION)),Object(r.k)(this._textureOcclusion)&&(t.setUniform1i("texOcclusion",i.a.OCCLUSION),e.bindTexture(this._textureOcclusion.glTexture,i.a.OCCLUSION)),Object(r.k)(this._textureMetallicRoughness)&&(t.setUniform1i("texMetallicRoughness",i.a.METALLIC_ROUGHNESS),e.bindTexture(this._textureMetallicRoughness.glTexture,i.a.METALLIC_ROUGHNESS))}},{key:"bindTextureScale",value:function(e,t){var n=Object(r.k)(this._texture)&&this._texture.glTexture;n&&n.descriptor.textureCoordinateScaleFactor?t.setUniform2fv("textureCoordinateScaleFactor",n.descriptor.textureCoordinateScaleFactor):t.setUniform2f("textureCoordinateScaleFactor",1,1)}},{key:"_acquireIfNotUndefined",value:function(e){if(!Object(r.j)(e))return this._textureIDs.add(e),this._textureRepository.acquire(e,this._initTransparent)}},{key:"_releaseIfNotUndefined",value:function(e){Object(r.j)(e)||(this._textureIDs.delete(e),this._textureRepository.release(e))}}]),n}(a.a)},aPP3:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("r88o"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=n("SE0f"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).altitude=45,r.azimuth=315,r.colorRamp=null,r.hillshadeType="multi-directional",r.pixelSizePower=.664,r.pixelSizeFactor=.024,r.scalingType="none",r.type="raster-shaded-relief",r.zFactor=1,r}return Zt(n,[{key:"readColorRamp",value:function(e){return Object(h.a)(e)}},{key:"clone",value:function(){return new r({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Object(a.a)(this.colorRamp)})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"altitude",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"azimuth",void 0),Object(i.a)([Object(o.b)({types:h.b,json:{write:!0}})],f.prototype,"colorRamp",void 0),Object(i.a)([Object(u.a)("colorRamp")],f.prototype,"readColorRamp",null),Object(i.a)([Object(o.b)({type:["traditional","multi-directional"],json:{write:!0}})],f.prototype,"hillshadeType",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"pixelSizePower",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"pixelSizeFactor",void 0),Object(i.a)([Object(o.b)({type:["none","adjusted"],json:{write:!0}})],f.prototype,"scalingType",void 0),Object(i.a)([Object(s.a)({rasterShadedRelief:"raster-shaded-relief"})],f.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],f.prototype,"zFactor",void 0),f=r=Object(i.a)([Object(c.a)("esri.renderers.RasterShadedReliefRenderer")],f),t.a=f},aQrP:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("6S2I").a.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder"),i=function(){function e(){Wt(this,e),this.includedModules=new Map}return Zt(e,[{key:"include",value:function(e,t){this.includedModules.has(e)?this.includedModules.get(e)!==t&&r.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(e,t),e(this.builder,t))}}]),e}(),a=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).vertex=new u,e.fragment=new u,e.attributes=new c,e.varyings=new l,e.extensions=new h,e.constants=new f,e}return Zt(n,[{key:"builder",get:function(){return this}},{key:"generateSource",value:function(e){var t=this.extensions.generateSource(e),n=this.attributes.generateSource(e),r=this.varyings.generateSource(),i="vertex"===e?this.vertex:this.fragment,a=i.uniforms.generateSource(),o=i.code.generateSource(),s="vertex"===e?d:p,u=this.constants.generateSource().concat(i.constants.generateSource());return"\n".concat(t.join("\n"),"\n\n").concat(s,"\n\n").concat(u.join("\n"),"\n\n").concat(a.join("\n"),"\n\n").concat(n.join("\n"),"\n\n").concat(r.join("\n"),"\n\n").concat(o.join("\n"))}}]),n}(i),o=function(){function e(){Wt(this,e),this._entries=new Array,this._set=new Set}return Zt(e,[{key:"add",value:function(e,t,n){var r="".concat(e,"_").concat(t,"_").concat(n);return this._set.has(r)||(this._entries.push([e,t,n]),this._set.add(r)),this}},{key:"generateSource",value:function(){return this._entries.map((function(e){return"uniform ".concat(e[1]," ").concat(e[0]).concat((t=e[2])?"[".concat(t,"]"):"",";");var t}))}}]),e}(),s=function(){function e(){Wt(this,e),this._entries=new Array}return Zt(e,[{key:"add",value:function(e){this._entries.push(e)}},{key:"generateSource",value:function(){return this._entries}}]),e}(),u=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).uniforms=new o,e.code=new s,e.constants=new f,e}return Zt(n,[{key:"builder",get:function(){return this}}]),n}(i),c=function(){function e(){Wt(this,e),this._entries=new Array}return Zt(e,[{key:"add",value:function(e,t){this._entries.push([e,t])}},{key:"generateSource",value:function(e){return"fragment"===e?[]:this._entries.map((function(e){return"attribute ".concat(e[1]," ").concat(e[0],";")}))}}]),e}(),l=function(){function e(){Wt(this,e),this._entries=new Array}return Zt(e,[{key:"add",value:function(e,t){this._entries.push([e,t])}},{key:"generateSource",value:function(){return this._entries.map((function(e){return"varying ".concat(e[1]," ").concat(e[0],";")}))}}]),e}(),h=function(){function e(){Wt(this,e),this._entries=new Set}return Zt(e,[{key:"add",value:function(e){this._entries.add(e)}},{key:"generateSource",value:function(t){var n="vertex"===t?e.ALLOWLIST_VERTEX:e.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((function(e){return n.includes(e)})).map((function(e){return"#extension ".concat(e," : enable")}))}}]),e}();h.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],h.ALLOWLIST_VERTEX=[];var f=function(){function e(){Wt(this,e),this._entries=[]}return Zt(e,[{key:"add",value:function(t,n,r){var i="ERROR_CONSTRUCTOR_STRING";switch(n){case"float":i=e.numberToFloatStr(r);break;case"int":i=e.numberToIntStr(r);break;case"bool":i=r.toString();break;case"vec2":i="vec2(".concat(e.numberToFloatStr(r[0]),",                            ").concat(e.numberToFloatStr(r[1]),")");break;case"vec3":i="vec3(".concat(e.numberToFloatStr(r[0]),",                            ").concat(e.numberToFloatStr(r[1]),",                            ").concat(e.numberToFloatStr(r[2]),")");break;case"vec4":i="vec4(".concat(e.numberToFloatStr(r[0]),",                            ").concat(e.numberToFloatStr(r[1]),",                            ").concat(e.numberToFloatStr(r[2]),",                            ").concat(e.numberToFloatStr(r[3]),")");break;case"ivec2":i="ivec2(".concat(e.numberToIntStr(r[0]),",                             ").concat(e.numberToIntStr(r[1]),")");break;case"ivec3":i="ivec3(".concat(e.numberToIntStr(r[0]),",                             ").concat(e.numberToIntStr(r[1]),",                             ").concat(e.numberToIntStr(r[2]),")");break;case"ivec4":i="ivec4(".concat(e.numberToIntStr(r[0]),",                             ").concat(e.numberToIntStr(r[1]),",                             ").concat(e.numberToIntStr(r[2]),",                             ").concat(e.numberToIntStr(r[3]),")");break;case"bvec2":i="bvec2(".concat(r[0].toString(),",                             ").concat(r[1].toString(),")");break;case"bvec3":i="bvec3(".concat(r[0].toString(),",                             ").concat(r[1].toString(),",                             ").concat(r[2].toString(),")");break;case"bvec4":i="bvec4(".concat(r[0].toString(),",                             ").concat(r[1].toString(),",                             ").concat(r[2].toString(),",                             ").concat(r[3].toString(),")");break;case"mat2":case"mat3":case"mat4":i="".concat(n,"(").concat(Array.prototype.map.call(r,(function(t){return e.numberToFloatStr(t)})).join(", "),")")}return this._entries.push("const ".concat(n," ").concat(t," = ").concat(i,";")),this}},{key:"generateSource",value:function(){return Array.from(this._entries)}}],[{key:"numberToIntStr",value:function(e){return e.toFixed(0)}},{key:"numberToFloatStr",value:function(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}}]),e}(),p="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",d="precision highp float;\nprecision highp sampler2D;"},"ack/":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("p6dn")),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).creator=null,r.destroyer=null,r.outFields=null,r.type="custom",r}return Zt(n,[{key:"clone",value:function(){return new r({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Object(a.a)(this.outFields):null})}}]),n}(u.a);Object(i.a)([Object(o.b)()],c.prototype,"creator",void 0),Object(i.a)([Object(o.b)()],c.prototype,"destroyer",void 0),Object(i.a)([Object(o.b)()],c.prototype,"outFields",void 0),Object(i.a)([Object(o.b)({type:["custom"],readOnly:!0})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(s.a)("esri.popup.content.CustomContent")],c),t.a=c},aelY:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i=n("5sKF"),a={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(e,t,n){"-"===t.charAt(0)?e.style.setProperty(t,n):e.style[t]=n}},o=function(e){return Object(i.c)(a,e)},s=function(e,t,n){return n=o(n),Object(i.a)(t,e,void 0,n),Object(i.b)(t,n)},u=function(e,t,n){return n=o(n),Object(i.a)(t,e.parentNode,e,n),Object(i.b)(t,n)},c=function(e,t,n){return n=o(n),t.domNode=e,Object(i.d)(e,t,n),Object(i.b)(t,n)},l=function(e,t,n){return n=o(n),Object(i.a)(t,e.parentNode,e,n),e.parentNode.removeChild(e),Object(i.b)(t,n)},h=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n};r=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){return e.filter(t)[0]};var f=function(e,t){var n=e;return t.forEach((function(e){n=n&&n.children?r(n.children,(function(t){return t.domNode===e})):void 0})),n},p=function(e){var t,n,r=o(e),i=r.performanceLogger,a=!0,p=!1,d=[],v=[],y=function(e,n,a){var o;r.eventHandlerInterceptor=function(e,t,n){var r=function(r){n("domEvent",r);var i=t(),a=h(r.currentTarget,i.domNode);a.reverse();var o,s=f(i.getLastRender(),a);return e.scheduleRender(),s&&(o=s.properties["on"+r.type].apply(s.properties.bind||this,arguments)),n("domEventProcessed",r),o};return function(e,t,n,i){return r}}(t,(function(){return o}),i),o=e(n,a(),r),d.push(o),v.push(a)},b=function(){if(n=void 0,a){a=!1,i("renderStart",void 0);for(var e=0;e<d.length;e++){var t=v[e]();i("rendered",void 0),d[e].update(t),i("patched",void 0)}i("renderDone",void 0),a=!0}};return t={renderNow:b,scheduleRender:function(){n||p||(n=requestAnimationFrame(b))},stop:function(){n&&(cancelAnimationFrame(n),n=void 0),p=!0},resume:function(){p=!1,a=!0,t.scheduleRender()},append:function(e,t){y(s,e,t)},insertBefore:function(e,t){y(u,e,t)},merge:function(e,t){y(c,e,t)},replace:function(e,t){y(l,e,t)},detach:function(e){for(var t=0;t<v.length;t++)if(v[t]===e)return v.splice(t,1),d.splice(t,1)[0];throw new Error("renderFunction was not found")}}}},ag7Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("pO5D"),i=n("04ZG"),a=n("/CmD"),o=n("CWQl"),s=n("xHih"),u=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){Wt(this,n);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.call.apply(t,[this].concat(r))}return Zt(n,[{key:"read",value:function(e,t){Object(o.a)(this,e,t)}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(s.b)(this,e,t)}},{key:"toJSON",value:function(e){return this.write({},e)}}],[{key:"fromJSON",value:function(e,t){return c.call(this,e,t)}}]),n}(e);return t=Object(r.a)([Object(i.a)("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function c(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var n=new this;return n.read(e,t),n}var l=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(u(a.a));l=Object(r.a)([Object(i.a)("esri.core.JSONSupport")],l)},agdK:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D8Ta"),i=n("OIYi"),a=Object(r.d)(1,1,0,1),o=Object(r.d)(1,0,1,1);function s(e){e.fragment.uniforms.add("depthTex","sampler2D"),e.fragment.uniforms.add("highlightViewportPixelSz","vec4"),e.fragment.constants.add("occludedHighlightFlag","vec4",a).add("unoccludedHighlightFlag","vec4",o),e.fragment.code.add(i.a(we||(we=Rt(["\n    void outputHighlight() {\n      vec4 fragCoord = gl_FragCoord;\n\n      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;\n      if (fragCoord.z > sceneDepth + 5e-7) {\n        gl_FragColor = occludedHighlightFlag;\n      }\n      else {\n        gl_FragColor = unoccludedHighlightFlag;\n      }\n    }\n  "]))))}(s||(s={})).bindOutputHighlight=function(e,t,n){e.bindTexture(n.highlightDepthTexture,5),t.setUniform1i("depthTex",5),t.setUniform4f("highlightViewportPixelSz",0,0,n.inverseViewport[0],n.inverseViewport[1])}},aql9:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return c}));var r=n("s7YA"),i=n("IeLS"),a=n("OKTS"),o=n("gEht");function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat(Object(i.b)(t,{minimumFractionDigits:r,maximumFractionDigits:r})," ").concat(function(e,t,n){return e.units[t][n]}(e,n,a))}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=Object(o.v)(t,n);return s(e,Object(o.c)(t,n,a),a,r,i)}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=Object(o.w)(t,n);return s(e,Object(o.c)(t,n,a),a,r,i)}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=Object(o.s)(t,n);return s(e,Object(o.c)(t,n,a),a,r,i)}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=Object(o.t)(t,n);return s(e,Object(o.c)(t,n,a),a,r,i)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=Object(o.u)(t,n);return s(e,Object(o.c)(t,n,a),a,r,i)}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=Object(o.r)(t,n);return s(e,Object(o.c)(t,n,a),a,r,i)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=Object(o.c)(e,t,"degrees"),i=r-Math.floor(r);r-=i;var a=(i*=60)-Math.floor(i);return i-=a,a*=60,"".concat(r.toFixed(),"\xb0 ").concat(i.toFixed(),"' ").concat(a.toFixed(n),'"')}var v=["B","kB","MB","GB","TB"];function y(e,t){var n=0===t?0:Math.floor(Math.log(t)/Math.log(1024));n=Object(a.c)(n,0,v.length-1);var o=Object(i.b)(t/Math.pow(1024,n),{maximumFractionDigits:2});return Object(r.c)(e.units.bytes[v[n]],{fileSize:o})}},aunz:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return u}));var r=n("srIe"),i=n("Ehki"),a=n("UhwK"),o=(n("4GrV"),n("zm0L")),s=n("ixpo"),u=function(){function e(t){Wt(this,e),this.left=null,this.right=null,this.type="vertex",this.index=null,this.component=t}return Zt(e,[{key:"pos",get:function(){return this._pos},set:function(e){this._pos=e,this.component.unnormalizeVertexPositions()}}]),e}(),c=function e(t,n,r){Wt(this,e),this.type="edge",this.component=t,this.left=n,this.right=r,n.right=this,r.left=this},l=function(){function e(t){Wt(this,e),this.vertices=[],this.edges=[],this.data=t}return Zt(e,[{key:"unnormalizeVertexPositions",value:function(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}},{key:"updateVertexIndex",value:function(e,t){if(0!==this.vertices.length){var n=this.vertices[0],r=null,i=e,a=t;do{(r=i).index=a++,i=r.right?r.right.right:null}while(null!=i&&i!==n);r.left&&r!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(r),this.vertices.length-1)}}},{key:"getFirstVertex",value:function(){return 0===this.vertices.length?null:this.vertices[0]}},{key:"getLastVertex",value:function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}},{key:"swapVertices",value:function(e,t){var n=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=n}},{key:"iterateVertices",value:function(e){if(0!==this.vertices.length){var t=this.vertices[0],n=t;do{e(n,n.index),n=Object(r.k)(n.right)?n.right.right:null}while(n!==t&&null!=n)}}}]),e}(),h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this)).coordinateHelper=e,r.undoStack=[],r.redoStack=[],r.components=[],r}return Zt(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;0!==t&&!Object(r.j)(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this.undoStack.push(e),this.redoStack=[])}},{key:"undo",value:function(){if(this.undoStack.length>0){var e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}return null}},{key:"canUndo",get:function(){return this.undoStack.length>0}},{key:"lastOperation",get:function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}},{key:"redo",value:function(){if(this.redoStack.length>0){var e=this.redoStack.pop();return e.apply(),this.undoStack.push(e),e}return null}},{key:"canRedo",get:function(){return this.redoStack.length>0}},{key:"toPoint",value:function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}},{key:"toPolyline",value:function(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach((function(n,r){var i=[],a=n.vertices.find((function(e){return null==e.left})),o=a;do{i.push(t(a.pos)),a=a.right?a.right.right:null}while(a&&a!==o);e.push(i)})),new a.a({paths:e,spatialReference:this.coordinateHelper.spatialReference})}},{key:"toPolygon",value:function(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach((function(n,i){var a=[],o=n.vertices[0],s=o,u=s;do{a.push(t(s.pos)),s=Object(r.k)(s.right)?s.right.right:null}while(s&&s!==u);a.push(t(o.pos)),e.push(a)})),new i.a({rings:e,spatialReference:this.coordinateHelper.spatialReference})}}],[{key:"fromGeometry",value:function(e,t){var r=Object(s.a)(e.hasZ,e.hasM,e.spatialReference,t),i=new n(r);switch(e.type){case"polygon":for(var a=e.rings,o=0;o<a.length;++o){for(var h=a[o],f=new l(i),p=h.length-1,d=0;d<p;++d){var v=r.fromArray(h[d]),y=new u(f);f.vertices.push(y),y.pos=v,y.index=d}for(var b=f.vertices.length-1,g=0;g<b;++g){var m=new c(f,f.vertices[g],f.vertices[g+1]);f.edges.push(m)}var w=new c(f,f.vertices[f.vertices.length-1],f.vertices[0]);f.edges.push(w),i.components.push(f)}break;case"polyline":var O,j=Vt(e.paths);try{for(j.s();!(O=j.n()).done;){for(var _=O.value,x=new l(i),k=_.length,S=0;S<k;++S){var M=r.fromArray(_[S]),I=new u(x);x.vertices.push(I),I.pos=M,I.index=S}for(var T=x.vertices.length-1,A=0;A<T;++A){var C=new c(x,x.vertices[A],x.vertices[A+1]);x.edges.push(C)}i.components.push(x)}}catch(R){j.e(R)}finally{j.f()}break;case"point":var E=new l(i),P=new u(E);P.index=0,P.pos=i.coordinateHelper.fromPoint(e),E.vertices.push(P),i.components.push(E)}return i}}]),n}(o.a)},b9ir:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("h2Da"),i=n("W9Wu"),a=n("U/i9"),o=n("FzwJ"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"soilsDynamicLayer",t=arguments.length>1?arguments[1]:void 0;return new r.default({id:e,url:t,sublayers:[{name:"mapunitpoly"}],minScale:37e3,visible:!1})},u=function(e,t,n,r){var s;switch(e){case"mapImage":s=new a.default;break;case"feature":s=new i.default;break;case"vector":s=new o.default}return s.id=t,s.url=r,s.visible=!1,null!==n&&(s.minScale=n),s}},bHqs:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("Stxv"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),u=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).refreshTimestamp=null,e.refreshDebounced=Object(s.i)(function(){var t=Ut(regeneratorRuntime.mark((function t(n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"==typeof n?i=n:(i=Date.now(),r=n),e._set("refreshTimestamp",i),t.t0=e.doRefresh,!t.t0){t.next=6;break}return t.next=6,e.doRefresh(r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),2e3),e}return Zt(n,[{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()}}]),n}(e);return Object(r.a)([Object(i.b)()],t.prototype,"layer",void 0),Object(r.a)([Object(a.a)("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),t=Object(r.a)([Object(o.a)("esri.layers.mixins.RefreshableLayerView")],t)};function c(e){return"refresh"in e}},bJda:function(e,t,n){"use strict";function r(e){}function i(e){return function(){return e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n("wSAH")},bRsD:function(e,t,n){"use strict";n.r(t);var r,i,a=n("pO5D"),o=(n("wSAH"),n("6S2I")),s=n("WbKI"),u=n("Gj5k"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),h=n("zm0L"),f=n("YZ0+"),p=n("bJda"),d=n("f/qv"),v=n("zqDF"),y=n("Cduq"),b=n("zlDU"),g=n("9MzC"),m=n("ag7Y"),w=n("LE9a"),O=n("nvBr"),j=n("Qr4e"),_=n("fX31"),x=n("bV/r"),k=n("GFPt"),S=n("RI0u"),M=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="none",r}return Zt(n,[{key:"clone",value:function(){return new r({type:this.type})}}]),n}(m.a);Object(a.a)([Object(S.a)({none:"none",stayAbove:"stay-above"})],M.prototype,"type",void 0),M=r=Object(a.a)([Object(c.a)("esri.ground.NavigationConstraint")],M);var I=o.a.getLogger("esri.Ground"),T=i=function(e){Kt(o,e);var t,r,a=Xt(o);function o(e){var t;Wt(this,o),(t=a.call(this,e)).opacity=1,t.surfaceColor=null,t.navigationConstraint=null,t.layers=new w.a;return t.layers.on("after-add",(function(e){return function(e){e.parent&&e.parent!==$t(t)&&"remove"in e.parent&&e.parent.remove(e),e.parent=$t(t),"elevation"!==e.type&&"base-elevation"!==e.type&&I.error("Layer '".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported."))}(e.item)})),t.layers.on("after-remove",(function(e){return function(e){e.parent=null}(e.item)})),t}return Zt(o,[{key:"initialize",value:function(){this.when().catch((function(e){I.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}},{key:"destroy",value:function(){var e,t=Vt(this.layers.removeAll());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.layers.destroy()}},{key:"normalizeCtorArgs",value:function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=Nt({},e)).resourceInfo),e}},{key:"layers",set:function(e){this._set("layers",Object(_.b)(e,this._get("layers")))}},{key:"writeLayers",value:function(e,t,n,r){var i=[];e?(r=Nt(Nt({},r),{},{layerContainerType:"ground"}),e.forEach((function(e){if("write"in e){var t={};Object(p.b)(e)().write(t,r)&&i.push(t)}else r&&r.messages&&r.messages.push(new b.a("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted in the ground"),{layer:e}))})),t.layers=i):t.layers=i}},{key:"load",value:function(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return Object(k.a)(this,(function(t){t(e.layers)}))}},{key:"queryElevation",value:(r=Ut(regeneratorRuntime.mark((function e(t,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load({signal:null==r?void 0:r.signal});case 2:return e.next=4,n.e(23).then(n.bind(null,"LfYK"));case 4:return i=e.sent,a=i.ElevationQuery,Object(g.u)(r),o=new a,s=this.layers.filter(A).toArray(),e.abrupt("return",o.queryAll(s,t,r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"createElevationSampler",value:(t=Ut(regeneratorRuntime.mark((function e(t,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load({signal:null==r?void 0:r.signal});case 2:return e.next=4,n.e(23).then(n.bind(null,"LfYK"));case 4:return i=e.sent,a=i.ElevationQuery,Object(g.u)(r),o=new a,s=this.layers.filter(A).toArray(),e.abrupt("return",o.createSamplerAll(s,t,r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"clone",value:function(){var e={opacity:this.opacity,surfaceColor:Object(d.a)(this.surfaceColor),navigationConstraint:Object(d.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new i({resourceInfo:this.resourceInfo}).set(e)}},{key:"read",value:function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),Dt(en(o.prototype),"read",this).call(this,e,t)}},{key:"_loadFromSource",value:function(e){var t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}},{key:"_loadLayersFromJSON",value:function(e,t,r){var i=this,a=t&&t.origin||"web-scene",o=t&&t.portal||null,s=t&&t.url||null;return Promise.all([n.e(0),n.e(148)]).then(n.bind(null,"5Q/x")).then((function(t){var n=t.populateOperationalLayers;Object(g.u)(r);var u=[];return e.layers&&Array.isArray(e.layers)&&u.push(n(i.layers,e.layers,{context:{origin:a,url:s,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),Object(g.j)(u)})).then((function(){}))}}]),o}(Object(m.b)(x.a));function A(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(a.a)([Object(s.b)({json:{read:!1}})],T.prototype,"layers",null),Object(a.a)([Object(y.a)("layers")],T.prototype,"writeLayers",null),Object(a.a)([Object(s.b)({readOnly:!0})],T.prototype,"resourceInfo",void 0),Object(a.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:v.a,read:{reader:j.b,source:"transparency"},write:{writer:function(e,t){t.transparency=Object(j.a)(e)},target:"transparency"}}})],T.prototype,"opacity",void 0),Object(a.a)([Object(s.b)({type:O.a,json:{type:[v.a],write:function(e,t){t.surfaceColor=e.toJSON().slice(0,3)}}})],T.prototype,"surfaceColor",void 0),Object(a.a)([Object(s.b)({type:M,json:{write:!0}})],T.prototype,"navigationConstraint",void 0);var C=T=i=Object(a.a)([Object(c.a)("esri.Ground")],T),E=n("TRCY"),P=n("Udcy"),R=o.a.getLogger("esri.support.groundUtils"),D={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}},L=n("pPEy"),N=n("5ljs"),F=o.a.getLogger("esri.Map"),z=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).allLayers=new E.a({root:$t(r),rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(e){return e.layers}}),r.allTables=r._createTablesFlattener($t(r)),r.basemap=null,r.ground=new C,r._basemapCache=Object(P.a)(),r}return Zt(n,[{key:"destroy",value:function(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(P.b)(this._basemapCache),this._basemapCache=null}},{key:"castBasemap",value:function(e){return Object(P.c)(e,this._basemapCache)}},{key:"castGround",value:function(e){return"string"==typeof(t=e)?t in D?n=new C({resourceInfo:{data:{layers:[D[t]]}}}):R.warn("Unable to find ground definition for: ".concat(t,'. Try "world-elevation"')):n=Object(v.m)(C,t),n||(F.error("Map.ground may not be set to null or undefined"),this._get("ground"));var t,n}},{key:"findLayerById",value:function(e){return this.allLayers.find((function(t){return t.id===e}))}},{key:"findTableById",value:function(e){return this.allTables.find((function(t){return t.id===e}))}},{key:"_createTablesFlattener",value:function(e){var t=this;return new E.a({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:function(e){return e&&"group"===e.type?t._createTablesFlattener(e):null},itemFilterFunction:function(e){return t._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)}})}},{key:"_isMapOrGroupLayer",value:function(e){return e&&(e===this||this._isGroupLayer(e))}},{key:"_isGroupLayer",value:function(e){return e&&"group"===e.type}}]),n}(Object(N.a)(Object(L.a)(h.a.EventedMixin(l.a))));Object(a.a)([Object(s.b)({readOnly:!0,dependsOn:[]})],z.prototype,"allLayers",void 0),Object(a.a)([Object(s.b)({readOnly:!0})],z.prototype,"allTables",void 0),Object(a.a)([Object(s.b)({type:f.default})],z.prototype,"basemap",void 0),Object(a.a)([Object(u.a)("basemap")],z.prototype,"castBasemap",null),Object(a.a)([Object(s.b)({type:C,nonNullable:!0})],z.prototype,"ground",void 0),Object(a.a)([Object(u.a)("ground")],z.prototype,"castGround",null),z=Object(a.a)([Object(c.a)("esri.Map")],z),t.default=z},bT0G:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return k}));var r=n("xMJK"),i=n("6Q66"),a=n("dCrW");function o(){for(var e=[],t=0;t<=257;t++)e[t]=[t];return e}function s(e,t){for(var n=0;n<t.length;n++)e.push(t[n])}var u=new Set;function c(e,t,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t%4!=0||n%4!=0){var i=new ArrayBuffer(4*Math.ceil(n/4)),a=new Uint8Array(i),o=new Uint8Array(e,t,n);if(r)for(var s=0;s<a.length;s+=4)a[s]=o[s+3],a[s+1]=o[s+2],a[s+2]=o[s+1],a[s+3]=o[s];else a.set(o);return new Uint32Array(a.buffer)}if(r){for(var u=new Uint8Array(e,t,n),c=new Uint8Array(u.length),l=0;l<c.length;l+=4)c[l]=u[l+3],c[l+1]=u[l+2],c[l+2]=u[l+1],c[l+3]=u[l];return new Uint32Array(c.buffer)}return new Uint32Array(e,t,n/4)}(e,t,n,r),a=9,c=o(),l=32,h=c.length,f=[],p=1,d=i[0],v=0,y=i.length,b=8*(4*y-n),g=[];null!=d;){if(l>=a)l-=a,v=d>>>32-a,d<<=a;else{var m=a-l;v=((v=d>>>32-l)<<m)+((d=i[p++])>>>(l=32-m)),d<<=m}if(257===v)break;if(256!==v){var w=c[v];if(null==w){if(v>c.length)throw"data integrity issue: code does not exist on code page";f.push(f[0]),c[h++]=f.slice(),s(g,f)}else s(g,w),f.push(w[0]),f.length>1&&(c[h++]=f.slice()),f=w.slice();if(u.has(h)&&a++,0===l&&(d=i[p++],l=32),p>y||p===y&&l<=b)break}else a=9,h=(c=o()).length,f=[]}return new Uint8Array(g)}u.add(511),u.add(1023),u.add(2047),u.add(4095),u.add(8191);var l=n("D/0F"),h=n("5VpP"),f=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8];function p(e,t){var n="unknown";return 3===e?n="f32":1===e?1===t?n="u1":2===t?n="u2":4===t?n="u4":t<=8?n="u8":t<=16?n="u16":t<=32&&(n="u32"):2===e&&(t<=8?n="s8":t<=16?n="s16":t<=32&&(n="s32")),n}function d(e){var t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;default:t=Float32Array}return t}function v(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function y(e,t){var n=e.get(t);return n&&n.values}function b(e,t){var n=e.get(t);return n&&n.values[0]}function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.a.TIFF_TAGS,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,o=8===a,s=o?j(new DataView(e,n,8),0,t):new DataView(e,n,2).getUint16(0,t),u=4+2*a,c=o?8:2,h=c+s*u;if(n+h>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:h};for(var f,p,d,v,y,b,g,m=n+h+4<=e.byteLength?x(new DataView(e,n+h,8===a?8:4),0,t,8===a):null,O=n+c,_=new Map,k=0;k<s;k++){d=(p=new DataView(e,O+u*k,u)).getUint16(0,t),y=p.getUint16(2,t),v=l.a.getTagName(d,i);var S=[];2===a?(b=p.getUint16(4,t),g=p.getUint16(6,t)):4===a?(b=p.getUint32(4,t),g=p.getUint32(8,t)):8===a&&(b=x(p,4,t,!0),g=x(p,12,t,!0),S.push(p.getUint32(12,t)),S.push(p.getUint32(16,t))),w(e,t,f={id:d,type:y,valueCount:b,valueOffset:g,valueOffsets:S,values:null},r,!1,a),_.set(v,f)}return{success:!0,ifd:_,nextIFD:m,requiredBufferSize:h}}var m=function(e,t,n,a,o){var s,u,l,f,v,y,g=h.a===t,m=b(n,"BITSPERSAMPLE"),w=p(b(n,"SAMPLEFORMAT")||1,m),O=b(n,"COMPRESSION")||1,j=d(w);if(1===O)l=e.slice(a,a+o),f=new Uint8Array(l);else if(8===O||32946===O)f=new Uint8Array(e,a,o),y=new r.a(f).getBytes(),l=new ArrayBuffer(y.length),(f=new Uint8Array(l)).set(y);else if(6===O){f=new Uint8Array(e,a,o);var _=new i.a;_.parse(f);var x=_.getData(_.width,_.height,!0);l=new ArrayBuffer(x.length),(f=new Uint8Array(l)).set(x)}else 5===O&&(l=(f=c(e,a,o,t)).buffer);if("u8"===w||"s8"===w||g)u=new j(l);else{switch(l=new ArrayBuffer(f.length),v=new Uint8Array(l),w){case"u16":case"s16":for(s=0;s<f.length;s+=2)v[s]=f[s+1],v[s+1]=f[s];break;case"u32":case"s32":case"f32":for(s=0;s<f.length;s+=4)v[s]=f[s+3],v[s+1]=f[s+2],v[s+2]=f[s+1],v[s+3]=f[s]}u=new j(l)}return u};function w(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;if(n.values)return!0;var o,s,u=n.type,c=n.valueCount,l=n.valueOffset,h=[],p=f[u],d=8*p,v=c*p,y=c*f[u]*8,b=8===a?64:32,g=n.valueOffsets;if(y>b&&v>(i?e.byteLength:e?e.byteLength-l+r:0))return n.offlineOffsetSize=[l,v],n.values=null,!1;if(y<=b){if(!t)if(b<=32)l>>>=32-y;else{var m=null!=g&&g.length?g[0]:l>>>0,w=null!=g&&g.length?g[1]:Math.round((l-m)/4294967296);y<=32?(l=m>>>32-y,g[0]=l):(l=m*Math.pow(2,32-y)+(w>>>32-y),g[0]=m,g[1]=w>>>32-y)}if(1===c&&d===b)h=[l];else if(64===b){var O=null!=g&&g.length?g[0]:l>>>0,x=null!=g&&g.length?g[1]:Math.round((l-O)/4294967296),k=O,S=32;for(s=1;s<=c;s++){var M=32-d*s%32;if(S<d){var I=k<<M>>>32-S;k=x,h.push(I+(x<<32-S>>>32-S)*Math.pow(2,d-S)),S-=32-(d-S)}else h.push(k<<M>>>32-d),S-=d;0===S&&(S=32,k=x)}}else for(s=1;s<=c;s++)h.push(l<<32-d*s>>>32-d)}else{l-=r,i&&(l=0);for(var T=l;T<l+v;T+=p){switch(u){case 1:case 2:o=new DataView(e,T,1).getUint8(0);break;case 3:o=new DataView(e,T,2).getUint16(0,t);break;case 4:o=new DataView(e,T,4).getUint32(0,t);break;case 5:o=new DataView(e,T,4).getUint32(0,t)/new DataView(e,T+4,4).getUint32(0,t);break;case 6:o=new DataView(e,T,1).getInt8(0);break;case 7:o=new DataView(e,T,1).getUint8(0);break;case 8:o=new DataView(e,T,2).getInt16(0,t);break;case 9:o=new DataView(e,T,4).getInt32(0,t);break;case 10:o=new DataView(e,T,4).getInt32(0,t)/new DataView(e,T+4,4).getInt32(0,t);break;case 11:o=new DataView(e,T,4).getFloat32(0,t);break;case 12:o=new DataView(e,T,8).getFloat64(0,t);break;case 16:case 18:o=j(new DataView(e,T,8),0,t);break;case 17:o=_(new DataView(e,T,8),0,t);break;default:o=null}h.push(o)}}if(2===u){var A="",C=h;for(h=[],s=0;s<C.length;s++)0===C[s]&&""!==A?(h.push(A),A=""):A+=String.fromCharCode(C[s]);""===A&&0!==h.length||h.push(A)}return n.values=h,!0}function O(e){var t,n=e[0],r=b(n,"TILEWIDTH"),i=b(n,"TILELENGTH"),a=b(n,"IMAGEWIDTH"),o=b(n,"IMAGELENGTH"),s=b(n,"BITSPERSAMPLE"),u=b(n,"SAMPLESPERPIXEL"),c=b(n,"SAMPLEFORMAT")||1,l=p(c,s),h=!!y(n,"PLANARCONFIGURATION")&&2===y(n,"PLANARCONFIGURATION")[0],f=y(n,"GDAL_NODATA");null!=f&&("string"==typeof f[0]?(t=f.map((function(e){return parseFloat(e)}))).some((function(e){return isNaN(e)}))&&(t=null):"number"==typeof f[0]&&(t=f));var d,g=b(n,"COMPRESSION")||1;switch(g){case 1:d="NONE";break;case 2:case 3:case 4:case 32771:d="CCITT";break;case 5:d="LZW";break;case 6:case 7:d="JPEG";break;case 32773:d="PACKBITS";break;case 8:case 32946:d="DEFLATE";break;case 34712:d="JPEG2000";break;default:d=String(g)}var m=!0,w="";1!==g&&5!==g&&6!==g&&8!==g&&32946!==g&&(m=!1,w+="unsupported tag compression "+g),c>3&&(m=!1,w+="unsupported tag sampleFormat "+c),s%8!=0&&(m=!1,w+="unsupported tag bitsPerSample "+s);var O,j=b(n,"GEOASCIIPARAMS");if(j){var _=j.split("|").filter((function(e){return e.indexOf("ESRI PE String = ")>-1}))[0],x=_?_.replace("ESRI PE String = ",""):"";O=0===x.indexOf("PROJCS")||0===x.indexOf("GEOGCS")?{wkid:null,wkt:x}:null}var k,S,I=y(n,"GEOTIEPOINTS"),T=y(n,"GEOPIXELSCALE"),A=y(n,"GEOTRANSMATRIX"),C=n.has("GEOKEYDIRECTORY")?n.get("GEOKEYDIRECTORY").data:null,E=!1;if(C){E=2===b(C,"GTRasterTypeGeoKey");var P=b(C,"GTModelTypeGeoKey");if(2===P){var R=b(C,"GeographicTypeGeoKey");R>=1024&&R<=32766&&(O={wkid:R})}else if(1===P){var D=b(C,"ProjectedCSTypeGeoKey");D>=1024&&D<=32766&&(O={wkid:D})}}if(T&&I&&I.length>=6?(k=[T[0],0,I[3]-I[0]*T[0],0,-Math.abs(T[1]),I[4]-I[1]*T[1]],E&&(k[2]-=.5*k[0]+.5*k[1],k[5]-=.5*k[3]+.5*k[4])):A&&16===A.length&&(k=E?[A[0],A[1],A[3]-.5*A[0],A[4],A[5],A[7]-.5*A[5]]:[A[0],A[1],A[3],A[4],A[5],A[7]]),k){for(var L,N=[{x:0,y:o},{x:0,y:0},{x:a,y:o},{x:a,y:0}],F=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,G=Number.NEGATIVE_INFINITY,U=0;U<N.length;U++)F=(L=v(N[U],k)).x>F?F:L.x,V=L.x<V?V:L.x,z=L.y>z?z:L.y,G=L.y<G?G:L.y;S={xmin:F,xmax:V,ymin:z,ymax:G,spatialReference:O}}var B,q,H,W,J,Z=e.filter((function(e){return 1===b(e,"NEWSUBFILETYPE")}));Z.length>0&&(B=Math.round(Math.log(a/b(Z[0],"IMAGEWIDTH"))/Math.LN2),q=Math.round(Math.log(a/b(Z[Z.length-1],"IMAGEWIDTH"))/Math.LN2),H=b(Z[Z.length-1],"TILEWIDTH"),W=b(Z[Z.length-1],"TILEHEIGHT")),H=q>0?H||r:null,W=q>0?W||i:null,r&&(J=[{maxCol:Math.ceil(a/r)-1,maxRow:Math.ceil(o/i)-1,minRow:0,minCol:0}],Z.forEach((function(e){J.push({maxCol:Math.ceil(b(e,"IMAGEWIDTH")/b(e,"TILEWIDTH"))-1,maxRow:Math.ceil(b(e,"IMAGELENGTH")/b(e,"TILELENGTH"))-1,minRow:0,minCol:0})})));var K=function(e){if(!e)return null;var t=e.match(/<Item(.*?)Item>/gi);if(!t||0===t.length)return null;for(var n,r,i,a,o,s=new Map,u=0;u<t.length;u++)r=(n=t[u]).slice("<Item ".length,n.indexOf(">")),(a=n.indexOf("sample="))>-1&&(o=n.slice(a+'sample="'.length,n.indexOf('"',a+'sample="'.length))),(a=n.indexOf("name="))>-1&&(r=n.slice(a+'name="'.length,n.indexOf('"',a+'name="'.length))),r&&(i=n.slice(n.indexOf(">")+1,n.indexOf("</Item>")).trim(),null!=o?s.has(r)?s.get(r)[o]=i:s.set(r,[i]):s.set(r,i)),o=null;var c=s.get("STATISTICS_MINIMUM"),l=s.get("STATISTICS_MAXIMUM"),h=s.get("STATISTICS_MEAN"),f=s.get("STATISTICS_STDDEV"),p=null;if(c&&l){p=[];for(var d=0;d<c.length;d++)p.push({min:parseFloat(c[d]),max:parseFloat(l[d]),avg:h&&parseFloat(h[d]),stddev:f&&parseFloat(f[d])})}var v=s.get("BandName"),y=s.get("WavelengthMin"),b=s.get("WavelengthMax"),g=null;if(v){g=[];for(var m=0;m<v.length;m++)g.push({BandName:v[m],WavelengthMin:y&&parseFloat(y[m]),WavelengthMax:b&&parseFloat(b[m])})}return{statistics:p,bandProperties:g,dataType:s.get("DataType"),rawMetadata:s}}(b(e[0],"GDAL_METADATA"));return{width:a,height:o,tileWidth:r,tileHeight:i,planes:u,isBSQ:h,pixelType:l,compression:d,noData:t,isSupported:m,message:w+=" "+M({width:a,height:o,tileWidth:r,tileHeight:i,planes:u,ifds:e}),extent:S,affine:T?null:k,firstPyramidLevel:B,maximumPyramidLevel:q,pyramidBlockWidth:H,pyramidBlockHeight:W,tileBoundary:J,metadata:K}}function j(e,t,n){var r=e.getUint32(t,n),i=e.getUint32(t+4,n);return n?4294967296*i+r:4294967296*r+i}function _(e,t,n){var r=n?e.getInt32(t,n):e.getUint32(t,n),i=n?e.getUint32(t+4,n):e.getInt32(t+4,n),a=(n?r:i)>=0?1:-1;return n?r*=a:i*=a,a*(n?4294967296*i+r:4294967296*r+i)}function x(e,t,n,r){return r?j(e,t,n):e.getUint32(t,n)}function k(e){var t=new DataView(e,0,16),n=t.getUint16(0,!1),r=null;if(18761===n)r=!0;else{if(19789!==n)throw"unexpected endianess byte";r=!1}var i=t.getUint16(2,r);if(42!==i&&43!==i)throw"unexpected tiff identifier";var a=4,o=43===i;if(o){var s=t.getUint16(a,r);if(a+=2,8!==s)throw"unsupported bigtiff version";if(0!==t.getUint16(a,r))throw"unsupported bigtiff version";a+=2}return{littleEndian:r,isBigTiff:o,firstIFD:x(t,a,r,o)}}function S(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.a.TIFF_TAGS,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,u=g(e,t,n,i,o,s),c=u.ifd;if(c){if(l.a.ifdTags.forEach((function(n,a){c.has(a)&&((r=c.get(a)).data=g(e,t,r.valueOffset-i,i,n).ifd)})),c.has("GEOKEYDIRECTORY")){var h=(r=c.get("GEOKEYDIRECTORY")).values;if(h&&h.length>4){var f=h[0]+"."+h[1]+"."+h[2];r.data=g(e,t,r.valueOffset+6-i,i,l.a.GEO_KEYS,2).ifd,r.data&&r.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[f]})}}if(c.has("XMP")){var p=(r=c.get("XMP")).values;"number"==typeof p[0]&&7===r.type&&(r.values=[Object(a.a)(new Uint8Array(p))])}}return u}function M(e){var t=e.width,n=e.height,r=e.tileHeight,i=e.tileWidth,a=e.planes,o=i?i*r:t*n,s=y(e.ifds[0],"BITSPERSAMPLE")[0],u="";return o*a>Math.pow(2,30)/(s>8?s/8:1)&&(u=i?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),u}function I(e,t){for(var n,r=t.headerInfo,i=t.ifd,a=m(e,r.littleEndian,i,t.offset||0,t.size||e.byteLength),o=r.pixelType,s=r.isBSQ,u=r.planes,c=d(o),l=a.length/u,h=[],f=0;f<u;f++){if(n=new c(l),s)n=a.slice(l*f,l*(f+1));else for(var p=0;p<l;p++)n[p]=a[p*u+f];h.push(n)}var v,y,g=b(i,"TILEWIDTH"),w=b(i,"TILELENGTH"),O=r.noData?r.noData[0]:null,j=r.metadata?r.metadata.statistics:null,_=j?j.map((function(e){return e.min})):null,x=j?j.map((function(e){return e.max})):null;if(null!=O)if(v=new Uint8Array(l),Math.abs(O)>1e24)for(y=0;y<l;y++)v[y]=Math.abs((h[0][y]-O)/O)<1e-6?0:1;else for(y=0;y<l;y++)v[y]=h[0][y]===O?0:1;else _&&x&&t.applyMinMaxConstraint&&(v=function(e,t,n){if(!(e&&e.length>0&&t&&n))return null;for(var r,i,a,o=e[0].length,s=e.length,u=new Uint8Array(o),c=0;c<s;c++)if(r=e[c],i=t[c],a=n[c],0===c)for(var l=0;l<o;l++)u[l]=r[l]<i||r[l]>a?0:1;else for(var h=0;h<o;h++)u[h]&&(u[h]=r[h]<i||r[h]>a?0:1);return u}(h,_,x));return{pixelType:o,width:g,height:w,pixels:h,mask:v,noDataValue:O}}function T(e,t){var n=t=t||function(e){var t=k(e),n=t.littleEndian,r=t.isBigTiff,i=t.firstIFD,a=[];do{var o=S(e,n,i,0,l.a.TIFF_TAGS,r?8:4);if(!o.success)break;a.push(o.ifd),i=o.nextIFD}while(i>0);return Nt(Nt({},O(a)),{},{littleEndian:n,isBigTiff:r,ifds:a})}(e),a=n.ifds,o=n.noData;if(0===a.length)throw"no valid image file directory";var s,u,f=M(t);if(f)throw f;var p=a[0],v=o?o[0]:null;if(u=t.tileWidth?function(e,t,n){var r=y(n,"TILEOFFSETS");if(void 0===r)return null;for(var i,a,o,s,u,c,l,h,f,p,v,b,g,w=y(n,"TILEBYTECOUNTS"),O=t.tileWidth,j=t.tileHeight,_=t.width,x=t.height,k=t.pixelType,S=t.isBSQ,M=t.planes,I=_*x,T=y(n,"BITSPERSAMPLE")[0],A=d(k),C=[],E=0;E<M;E++)C.push(new A(I));var P=Math.ceil(_/O);if(T%8==0)for(i=0;i<r.length;i++)for(h=(c=Math.floor(i/P)*j)*_+(l=i%P*O),o=m(e,t.littleEndian,n,r[i],w[i]),p=0,f=h,b=Math.min(O,_-l),v=Math.min(j,x-c),a=0;a<M;a++)if(g=C[a],S)for(s=0;s<v;s++)for(f=h+s*_,p=O*j*a+s*O,u=0;u<b;u++,f++,p++)g[f]=o[p];else for(s=0;s<v;s++)for(f=h+s*_,p=s*O*M+a,u=0;u<b;u++,f++,p+=M)g[f]=o[p];return{width:_,height:x,pixelType:k,pixels:C}}(e,t,p):function(e,t,n){var a=h.a===t.littleEndian,o=y(n,"STRIPOFFSETS");if(void 0===o)return null;var s,u,l,f,p,v,b,g,m,w,O=t.width,j=t.height,_=t.pixelType,x=t.planes,k=O*j,S=y(n,"BITSPERSAMPLE")[0],M=d(_),I=new M(k*x),T=y(n,"STRIPBYTECOUNTS"),A=y(n,"ROWSPERSTRIP")[0],C=y(n,"COMPRESSION")?y(n,"COMPRESSION")[0]:1,E=A;if(S%8==0)for(s=0;s<o.length;s++){if(p=s*(A*O)*x,E=(s+1)*A>j?j-s*A:A,"u8"===_||"s8"===_||a){if(8===C||32946===C)b=new Uint8Array(e,o[s],T[s]),w=new r.a(b).getBytes(),v=new ArrayBuffer(w.length),(b=new Uint8Array(v)).set(w),b.length!==E*O*x*S/8&&console.log("strip byte counts is different than expected");else if(6===C){b=new Uint8Array(e,o[s],T[s]);var P=new i.a;P.parse(b);var R=P.getData(P.width,P.height,!0);v=new ArrayBuffer(R.length),(b=new Uint8Array(v)).set(R)}else 5===C?v=(b=c(e,o[s],T[s],t.littleEndian)).buffer:1===C&&(T[s]!==E*O*x*S/8&&console.log("strip byte counts is different than expected"),v=e.slice(o[s],o[s]+T[s]));f=new M(v)}else{switch(6===C||8===C||32946===C?(b=new Uint8Array(e,o[s],T[s]),b=new r.a(b).getBytes(),v=new ArrayBuffer(b.length),g=new Uint8Array(v),b.length!==E*O*x*S/8&&console.log("strip byte counts is different than expected")):1===C&&(T[s]!==E*O*x*S/8&&console.log("strip byte counts is different than expected"),v=new ArrayBuffer(T[s]),b=new Uint8Array(e,o[s],T[s]),g=new Uint8Array(v)),_){case"u16":case"s16":for(l=0;l<b.length;l+=2)g[l]=b[l+1],g[l+1]=b[l];break;case"u32":case"s32":case"f32":for(l=0;l<b.length;l+=4)g[l]=b[l+3],g[l+1]=b[l+2],g[l+2]=b[l+1],g[l+3]=b[l]}f=new M(v)}I.set(f,p)}var D=[];if(1===x)D.push(I);else for(s=0;s<x;s++){for(m=new M(k),u=0;u<k;u++)m[u]=I[u*x+s];D.push(m)}return{width:O,height:j,pixelType:_,pixels:D}}(e,t,p),null!==v){if(u.mask=new Uint8Array(u.width*u.height),Math.abs(v)>1e24)for(s=0;s<u.width*u.height;s++)u.mask[s]=Math.abs((u.pixels[0][s]-v)/v)<1e-6?0:1;else for(s=0;s<u.width*u.height;s++)u.mask[s]=u.pixels[0][s]===v?0:1;u.noDataValue=v}return u}},bUUP:function(e,t,n){"use strict";var r=regeneratorRuntime.mark(_),i=regeneratorRuntime.mark(Z);n.d(t,"a",(function(){return Re}));var a=n("mQzU"),o=n("fXoL"),s=n("Dxa7"),u=n("4GrV");function c(e){return e&&e.normalize&&e.normalize(),e&&(e.textContent||"")}var l=/\s*/g,h=/^\s*|\s*$/g,f=/\s+/;function p(e){if(!e||!e.length)return 0;for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function d(e,t){var n=e.getElementsByTagName(t);return n.length?n[0]:null}function v(e){return e.replace(l,"").split(",").map(parseFloat)}function y(e){return e.replace(h,"").split(f).map(v)}function b(e){if(void 0!==e.xml)return e.xml;if(e.tagName){for(var t=e.tagName,n=0;n<e.attributes.length;n++)t+=e.attributes[n].name+e.attributes[n].value;for(var r=0;r<e.childNodes.length;r++)t+=b(e.childNodes[r]);return t}return"#text"===e.nodeName?(e.nodeValue||e.value||"").trim():"#cdata-section"===e.nodeName?e.nodeValue:""}var g=["Polygon","LineString","Point","Track","gx:Track"];function m(e,t,n){var r=c(d(t,"color"))||"",i="stroke"===n||"fill"===n?n:n+"-color";"#"===r.substr(0,1)&&(r=r.substr(1)),6===r.length||3===r.length?e[i]=r:8===r.length&&(e[n+"-opacity"]=parseInt(r.substr(0,2),16)/255,e[i]="#"+r.substr(6,2)+r.substr(4,2)+r.substr(2,2))}function w(e,t,n,r){var i=parseFloat(c(d(t,n)));isNaN(i)||(e[r]=i)}function O(e){var t=e.getElementsByTagName("coord"),n=[],r=[];0===t.length&&(t=e.getElementsByTagName("gx:coord"));for(var i=0;i<t.length;i++)n.push(c(t[i]).split(" ").map(parseFloat));for(var a=e.getElementsByTagName("when"),o=0;o<a.length;o++)r.push(c(a[o]));return{coords:n,times:r}}function j(e,t,n,r){var i,a=function e(t){var n,r,i,a,o,s=[],u=[];if(d(t,"MultiGeometry"))return e(d(t,"MultiGeometry"));if(d(t,"MultiTrack"))return e(d(t,"MultiTrack"));if(d(t,"gx:MultiTrack"))return e(d(t,"gx:MultiTrack"));for(i=0;i<g.length;i++)if(r=t.getElementsByTagName(g[i]))for(a=0;a<r.length;a++)if(n=r[a],"Point"===g[i])s.push({type:"Point",coordinates:v(c(d(n,"coordinates")))});else if("LineString"===g[i])s.push({type:"LineString",coordinates:y(c(d(n,"coordinates")))});else if("Polygon"===g[i]){var l=n.getElementsByTagName("LinearRing"),h=[];for(o=0;o<l.length;o++)h.push(y(c(d(l[o],"coordinates"))));s.push({type:"Polygon",coordinates:h})}else if("Track"===g[i]||"gx:Track"===g[i]){var f=O(n);s.push({type:"LineString",coordinates:f.coords}),f.times.length&&u.push(f.times)}return{geoms:s,coordTimes:u}}(e),o={},s=c(d(e,"name")),u=c(d(e,"address")),l=c(d(e,"styleUrl")),h=c(d(e,"description")),f=d(e,"TimeSpan"),p=d(e,"TimeStamp"),b=d(e,"ExtendedData"),j=d(e,"IconStyle"),_=d(e,"LabelStyle"),x=d(e,"LineStyle"),k=d(e,"PolyStyle"),S=d(e,"visibility");if(s&&(o.name=s),u&&(o.address=u),l){"#"!==l[0]&&(l="#"+l),o.styleUrl=l,t[l]&&(o.styleHash=t[l]),n[l]&&(o.styleMapHash=n[l],o.styleHash=t[n[l].normal]);var M=r[o.styleHash];M&&(j||(j=d(M,"IconStyle")),_||(_=d(M,"LabelStyle")),x||(x=d(M,"LineStyle")),k||(k=d(M,"PolyStyle")))}if(h&&(o.description=h),f){var I=c(d(f,"begin")),T=c(d(f,"end"));o.timespan={begin:I,end:T}}if(p&&(o.timestamp=c(d(p,"when"))),j){m(o,j,"icon"),w(o,j,"scale","icon-scale"),w(o,j,"heading","icon-heading");var A=d(j,"hotSpot");if(A){var C=parseFloat(A.getAttribute("x")),E=parseFloat(A.getAttribute("y"));isNaN(C)||isNaN(E)||(o["icon-offset"]=[C,E])}var P=d(j,"Icon");if(P){var R=c(d(P,"href"));R&&(o.icon=R)}}if(_&&(m(o,_,"label"),w(o,_,"scale","label-scale")),x&&(m(o,x,"stroke"),w(o,x,"width","stroke-width")),k){m(o,k,"fill");var D=c(d(k,"fill")),L=c(d(k,"outline"));D&&(o["fill-opacity"]="1"===D?o["fill-opacity"]||1:0),L&&(o["stroke-opacity"]="1"===L?o["stroke-opacity"]||1:0)}if(b){var N=b.getElementsByTagName("Data"),F=b.getElementsByTagName("SimpleData");for(i=0;i<N.length;i++)o[N[i].getAttribute("name")]=c(d(N[i],"value"));for(i=0;i<F.length;i++)o[F[i].getAttribute("name")]=c(F[i])}S&&(o.visibility=c(S)),a.coordTimes.length&&(o.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var z={type:"Feature",geometry:0===a.geoms.length?null:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:o};return e.getAttribute("id")&&(z.id=e.getAttribute("id")),z}function _(e){var t,n,i,a,o,s,u,l,h,f,v,y,g,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(t={},n={},i={},a=e.getElementsByTagName("Placemark"),o=e.getElementsByTagName("Style"),s=e.getElementsByTagName("StyleMap"),u=0;u<o.length;u++)l=p(b(o[u])).toString(16),t["#"+o[u].getAttribute("id")]=l,n[l]=o[u];for(h=0;h<s.length;h++){for(t["#"+s[h].getAttribute("id")]=p(b(s[h])).toString(16),f=s[h].getElementsByTagName("Pair"),v={},y=0;y<f.length;y++)v[c(d(f[y],"key"))]=c(d(f[y],"styleUrl"));i["#"+s[h].getAttribute("id")]=v}g=0;case 4:if(!(g<a.length)){r.next=13;break}if(m=j(a[g],t,i,n),r.t0=m,!r.t0){r.next=10;break}return r.next=10,m;case 10:g++,r.next=4;break;case 13:case"end":return r.stop()}}),r)}var x=n("Y2gT"),k=n("SuVq"),S=n("jWBI"),M=n("UhwK"),I=n("Ehki"),T=n("KUQ1"),A=n("l4ZG"),C=function(e){var t={id:Object(T.a)(),geometryType:"polygon",symbol:x.d},n=new I.a({rings:e,spatialReference:{wkid:4326}});n=A.b(n);var r=new S.a({geometry:n,attributes:t,symbol:x.d}).toJSON();return r.symbol=x.d,r.geometry.type="polygon",r},E=function(e){var t=[];return e.features.forEach((function(e){switch(e.geometry.type.toLowerCase()){case"point":var n={id:Object(T.a)(),geometryType:"point",symbol:x.c},r=e.geometry.coordinates,i=new k.a({longitude:r[0],latitude:r[1],spatialReference:{wkid:4326}});i=A.b(i);var a=new S.a({geometry:i,attributes:n,symbol:x.c}).toJSON();if(a.symbol=x.c,a.geometry.type="point",t.push(JSON.stringify(a)),void 0!==e.properties&&void 0!==e.properties.name&&""!==e.properties.name){var o=x.e;o.text=e.properties.name,a.attributes={id:Object(T.a)(),symbol:o,geometryType:"text"},a.symbol=o,t.push(JSON.stringify(a))}break;case"linestring":var s={id:Object(T.a)(),geometryType:"polyline",symbol:x.a},u=new M.a({paths:e.geometry.coordinates,spatialReference:{wkid:4326}});u=A.b(u);var c=new S.a({geometry:u,attributes:s,symbol:x.a}).toJSON();c.symbol=x.a,c.geometry.type="polyline",t.push(JSON.stringify(c));break;case"polygon":var l=C(e.geometry.coordinates);t.push(JSON.stringify(l));break;case"multipolygon":for(var h=0;h<e.geometry.coordinates.length;h++){var f=C(e.geometry.coordinates[h]);t.push(JSON.stringify(f))}}})),t},P=function(e){return A.e(e)},R=function(e){return P(new M.a(e.geometry))},D=function(e){return P(new k.a(e.geometry))},L=function(e){var t,n,r=(t=new I.a(e.geometry),n=[],t.rings.forEach((function(e){t.isClockwise(e)?n.push(e):n.push(e.reverse())})),t.rings=n.slice(),t);return P(r)},N=n("sq3C");function F(e){return e&&e.normalize&&e.normalize(),e&&(e.textContent||"")}var z=[["speed","speeds"],["course","courses"],["hAcc","hAccs"],["vAcc","vAccs"],["heartRate","heartRates"]];function V(e){var t={};if(e){var n=B(e,"line");if(n){var r=F(B(n,"color")),i=parseFloat(F(B(n,"opacity"))),a=parseFloat(F(B(n,"width")));r&&(t.stroke=r),isNaN(i)||(t["stroke-opacity"]=i),isNaN(a)||(t["stroke-width"]=96*a/25.4)}}return t}function G(e,t){var n,r,i={};for(r=0;r<t.length;r++)(n=B(e,t[r]))&&(i[t[r]]=F(n));return i}function U(e){for(var t=G(e,["name","cmt","desc","type","time","keywords"]),n=e.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*"),r=0;r<n.length;r++){var i=n[r];i.parentNode.parentNode===e&&(t[i.tagName.replace(":","_")]=F(i))}var a=e.getElementsByTagName("link");a.length&&(t.links=[]);for(var o=0;o<a.length;o++)t.links.push(Object.assign({href:a[o].getAttribute("href")},G(a[o],["text","type"])));return t}function B(e,t){var n=e.getElementsByTagName(t);return n.length?n[0]:null}function q(e){var t,n=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))],r=B(e,"ele"),i=B(e,"gpxtpx:hr")||B(e,"hr"),a=B(e,"time");r&&(t=parseFloat(F(r)),isNaN(t)||n.push(t));var o={coordinates:n,time:a?F(a):null,heartRate:i?parseFloat(F(i)):null},s=B(e,"extensions");return null!==s&&z.map((function(e){return e[0]})).filter((function(e){return"heartrate"!==e})).forEach((function(e){var t=B(s,e);if(null!==t){var n=parseFloat(F(t));isNaN(n)||(o[e]=n)}})),o}function H(e){var t=W(e,"rtept");if(t.line)return{type:"Feature",properties:Object.assign(U(e),V(B(e,"extensions"))),geometry:{type:"LineString",coordinates:t.line}}}function W(e,t){var n=e.getElementsByTagName(t),r=[],i=[],a=n.length,o={};if(a<2)return{};for(var s=function(e){var t=q(n[e]);r.push(t.coordinates),t.time&&i.push(t.time),z.map((function(e){return e[0]})).forEach((function(n){(t[n]||o[n])&&(o[n]||(o[n]=Array(e).fill(null)),o[n].push(t[n]||null))}))},u=0;u<a;u++)s(u);var c={line:r,times:i};return z.forEach((function(e){o[e[0]]&&(c[e[1]]=o[e[0]]||[])})),c}function J(e){for(var t,n=e.getElementsByTagName("trkseg"),r=[],i=[],a={},o=function(e){(t=W(n[e],"trkpt"))&&(t.line&&r.push(t.line),t.times&&t.times.length&&i.push(t.times),z.map((function(e){return e[1]})).forEach((function(n){if(a[n]&&a[n].length||t[n]&&t[n].length){if(a[n]||(a[n]=[]),!a[n].length)for(var i=0;i<e;i++)a[n].push(Array(r[i].length).fill(null));a[n].push(t[n]&&t[n].length?t[n]:Array(t.line.length||0).fill(null))}})))},s=0;s<n.length;s++)o(s);if(0!==r.length){var u=Object.assign(U(e),V(B(e,"extensions")));return i.length&&(u.coordTimes=1===r.length?i[0]:i),z.forEach((function(e){a[e[1]]&&a[e[1]].length&&(u[e[1]]=1===r.length?a[e[1]][0]:a[e[1]])})),{type:"Feature",properties:u,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function Z(e){var t,n,r,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=e.getElementsByTagName("trk"),n=e.getElementsByTagName("rte"),r=e.getElementsByTagName("wpt"),a=0;case 2:if(!(a<t.length)){i.next=11;break}if(o=J(t[a]),i.t0=o,!i.t0){i.next=8;break}return i.next=8,o;case 8:a++,i.next=2;break;case 11:s=0;case 12:if(!(s<n.length)){i.next=21;break}if(u=H(n[s]),i.t1=u,!i.t1){i.next=18;break}return i.next=18,u;case 18:s++,i.next=12;break;case 21:c=0;case 22:if(!(c<r.length)){i.next=28;break}return i.next=25,l=r[c],{type:"Feature",properties:Object.assign(U(l),G(l,["sym"])),geometry:{type:"Point",coordinates:q(l).coordinates}};case 25:c++,i.next=22;break;case 28:case"end":return i.stop()}}),i)}var K=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"area",n=L(e),r="",i=0;i<n.rings.length;i++){r+="<trk>\n<name>".concat(t,"</name><number>1</number>\n<trkseg>\n");for(var a=0;a<n.rings.length;a++)for(var o=0;o<n.rings[a].length;o++){var s=new u.a(n.getPoint(a,o));r+='<trkpt lat="'.concat(s.y,'" lon="').concat(s.x,'"/>\n')}r+="</trkseg>\n</trk>\n"}return r},Y=n("mrSG"),X=n("MQ6a"),Q=n("vArl"),$=n("J7T7");function ee(e){return function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(e[0],e[e.length-1])||e.push(e[0]),e}function te(e){for(var t,n=0,r=0,i=e.length,a=e[r];r<i-1;r++)n+=((t=e[r+1])[0]-a[0])*(t[1]+a[1]),a=t;return n>=0}function ne(e,t,n,r){var i=(r[1]-n[1])*(t[0]-e[0])-(r[0]-n[0])*(t[1]-e[1]);if(0!==i){var a=((r[0]-n[0])*(e[1]-n[1])-(r[1]-n[1])*(e[0]-n[0]))/i,o=((t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]))/i;if(a>=0&&a<=1&&o>=0&&o<=1)return!0}return!1}function re(e,t){for(var n=0;n<e.length-1;n++)for(var r=0;r<t.length-1;r++)if(ne(e[n],e[n+1],t[r],t[r+1]))return!0;return!1}function ie(e,t){var n=re(e,t),r=function(e,t){for(var n=!1,r=-1,i=e.length,a=i-1;++r<i;a=r)(e[r][1]<=t[1]&&t[1]<e[a][1]||e[a][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[a][0]-e[r][0])*(t[1]-e[r][1])/(e[a][1]-e[r][1])+e[r][0]&&(n=!n);return n}(e,t[0]);return!(n||!r)}var ae=n("VcUc");zip.workerScriptsPath="scripts/";var oe,se,ue,ce=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)}))},le=function(e){var t=new zip.BlobWriter;return new Promise((function(n,r){try{e.getData(t,(function(e){n(e)}))}catch(i){r(i)}}))},he=function(e,t,n){var r=new FormData;r.append("publishParameters",JSON.stringify({targetSR:{wkid:102100},maxRecordCount:1e3,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0,genralize:!1,reducePrecision:!1,numberOfDigitsAfterDecimal:0})),r.append("filetype","shapefile"),r.append("f","json"),r.append("file",e),fetch("https://www.arcgis.com/sharing/rest/content/features/generate",{method:"POST",mode:"cors",body:r}).then((function(e){return e.json()})).then((function(e){if(void 0!==e.error)console.error("Error parsing shapefile."+e.error.message);else{var r=[],i=[];e.featureCollection.layers.forEach((function(e){var t=e.layerDefinition.geometryType.split("esriGeometry")[1].toLowerCase();e.featureSet.features.forEach((function(e){var n=e.geometry;n.type=t;var a=new S.a({geometry:n,attributes:{id:Object(T.a)(),geometryType:t,symbol:Object(x.f)(t)},symbol:Object(x.f)(t)});i.push(a);var o=a.toJSON();o.symbol=Object(x.f)(t),o.geometry.type=t,r.push(JSON.stringify(o))}))})),t.dispatch(Object(a.a)({graphics:r})),setTimeout((function(){n.goTo(i)}),250)}}))},fe=function(e,t,n,r){try{e.getEntries((function(e){return Object(Y.a)(void 0,void 0,void 0,regeneratorRuntime.mark((function i(){var o,s,u,c,l,h,f,p,d,v,y,b;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=e.filter((function(e){return/^.*\.(zip)$/gi.test(e.filename)})),s=[],!(o.length>0)){i.next=21;break}u=0;case 4:if(!(u<o.length)){i.next=19;break}return c=o[u],i.next=8,le(c);case 8:return l=i.sent,h=new File([l],c.filename,{type:"application/zip",lastModified:Date.now()}),i.next=12,ce(h);case 12:f=i.sent,p=X.parseZip(f),d=E(p),s=s.concat(d),u>=o.length-1&&n.dispatch(Object(a.a)({graphics:s}));case 16:u++,i.next=4;break;case 19:i.next=33;break;case 21:return i.prev=21,i.next=24,ce(t);case 24:v=i.sent,y=X.parseZip(v),b=E(y),s=b,n.dispatch(Object(a.a)({graphics:b})),i.next=33;break;case 30:i.prev=30,i.t0=i.catch(21),he(t,n,r);case 33:r.goTo(Object(ae.h)(JSON.stringify(s)));case 34:case"end":return i.stop()}}),i,null,[[21,30]])})))}))}catch(i){console.error(i),he(t,n,r)}},pe={addFiles:function(e,t,n){var r=0;function i(){var a=new Blob([t[r]],{type:"application / octet - stream"});oe.add(e[r],new zip.BlobReader(a),(function(){++r<t.length?i():n()}),null)}oe?i():(se=new zip.BlobWriter("application/zip"),zip.createWriter(se,(function(e){oe=e,i()})))},getBlobURL:function(){return new Promise((function(e,t){try{oe.close((function(t){var n=URL.createObjectURL(t);e(n),oe=void 0}))}catch(n){t(n)}}))}},de=function(e){return new Promise((function(t,n){Q.write(e.properties,e.type,e.geometries,(function(e,r){e&&n(e),t(r)}))}))},ve=function(e,t,n){n=n||"text/plain";var r=new Blob([t],{type:n}),i=document.createElement("a");i.download=e,i.href=window.URL.createObjectURL(r),i.onclick=function(){setTimeout((function(){window.URL.revokeObjectURL(i.href)}),100)},i.click(),i.remove()},ye=n("dk/s"),be=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"],ge={esriSLSDash:"dash",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSDashDot:"dash-dot",esriSLSDot:"dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSShortDot:"short-dot",esriSLSSolid:"solid"},me={esriSMSCircle:"circle",esriSMSCross:"cross",esriSMSDiamond:"diamond",esriSMSSquare:"square",esriSMSTriangle:"triangle",esriSMSX:"x"},we=function(e){var t={color:Oe(e.color),style:e.style,width:e.width};if(!be.includes(e.style)){var n=ge[e.style];t.style=void 0===n?"solid":n}return t},Oe=function(e){return{r:e[0],g:e[1],b:e[2],a:e[3]/255}},je=function(e){return{r:e[0],g:e[1],b:e[2],a:0}},_e=function(e){return{id:Object(ae.i)(),geometryType:e,radius:0}},xe=function(e,t){var n=S.a.fromJSON(e);return n.attributes=_e("polygon"),Object(ae.d)(n,we(e.symbol.outline),function(e,t){var n=e.color;return{color:t?je(n):Oe(n),style:"solid"}}(e.symbol,t))},ke=function(e){var t=S.a.fromJSON(e);return t.attributes={id:Object(ae.i)(),geometryType:"point"},Object(ae.c)(t,Me(e.symbol))},Se=function(e){var t=S.a.fromJSON(e);t.attributes=_e("polyline");var n=new u.c({paths:e.geometry.paths,spatialReference:{wkid:e.geometry.spatialReference.wkid}});return t.geometry=n,Object(ae.f)(t,we(e.symbol))},Me=function(e){if("esriPMS"===e.type){var t="watersource.png"===e.url.split("images/")[1]?"tint":"exclamation-triangle",n="tint"===t?.687:1.125,r="tint"===t?{r:41,g:171,b:226,a:1}:{r:248,g:206,b:41,a:1},i=Object(ye.a)(t,r),a=Math.round(1.3*parseInt(e.width,10));return{type:"picture-marker",size:a+"px",url:i,width:a+"px",height:Math.round(a/n)+"px",style:"circle",contentType:"image/svg",name:t,color:r}}var o=e.size,s=me[e.style];return{type:"simple-marker",size:o+"px",url:"",width:o+"px",height:o+"px",style:s,contentType:"image/svg",name:s,color:Oe(void 0===e.color?e.outline.color:e.color)}},Ie=function(e){var t=Te(e.symbol);return{geometry:{x:e.geometry.x,y:e.geometry.y,spatialReference:e.geometry.spatialReference,type:"point"},symbol:t,attributes:{geometryType:"text",id:Object(ae.i)(),parentId:0,readonly:!1,symbol:t}}},Te=function(e){return{type:"text",color:(t=e.color,{r:t[0],g:t[1],b:t[2],a:0===t[3]?.1:t[3]/255}),xoffset:3,yoffset:3,font:{size:isNaN(parseInt(e.font.size,10))?"12px":Math.round(1.33*parseInt(e.font.size,10))+"px",family:"Arial",weight:e.font.weight,style:e.font.style,decoration:e.font.decoration},text:e.text,lineWidth:"500px"};var t},Ae=n("l7P3"),Ce=n("8WOb"),Ee=n("3Pt+"),Pe=["fileInput"],Re=((ue=function(){function e(t){Wt(this,e),this.store=t,this.files=[],this.format="mmp",this.exportEnabled=!1,this.fileUploadError=""}return Zt(e,[{key:"ngOnInit",value:function(){var e=this;this.graphicsSub$=this.store.select((function(e){return e.app.graphics})).subscribe((function(t){e.exportEnabled=t.length>0}))}},{key:"parseUploadedFiles",value:function(e){var t=this,n=new FileReader;n.onload=function(){var r,i,o,s,u,c,l,h=n.result;try{switch(t.format){case"kml":u=h,c=(new DOMParser).parseFromString(u,"text/xml"),l={type:"FeatureCollection",features:Array.from(_(c))},r=E(l),t.store.dispatch(Object(a.a)({graphics:r})),t.mapView.goTo(Object(ae.h)(r));break;case"gpx":r=function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n={type:"FeatureCollection",features:Array.from(Z(t))};return E(n)}(h),t.store.dispatch(Object(a.a)({graphics:r})),t.mapView.goTo(Object(ae.h)(r));break;case"shp":!function(e,t,n){Object(Y.a)(void 0,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:!function(e,t,n,r){var i=new zip.BlobReader(e);zip.createReader(i,(function(i){t(i,e,n,r)}))}(e,fe,t,n);case 1:case"end":return r.stop()}}),r)})))}(e,t.store,t.mapView);break;case"mmp":if(void 0===(i=JSON.parse(h)).length){var f=(s=[],(o=i).boundary.length>0&&o.boundary.forEach((function(e){s.push(JSON.stringify(xe(e,!0)))})),o.lines.length>0&&o.lines.forEach((function(e){s.push(JSON.stringify(Se(e)))})),o.circle.length>0&&o.circle.forEach((function(e){s.push(JSON.stringify(xe(e,!0)))})),o.labels.length>0&&o.labels.forEach((function(e){Ie(e),s.push(JSON.stringify(Ie(e)))})),o.pointsOfInterest.length>0&&o.pointsOfInterest.forEach((function(e){s.push(JSON.stringify(ke(e)))})),o.ranchLabels.length>0&&o.ranchLabels.forEach((function(e){s.push(JSON.stringify(Ie(e)))})),o.ranchFeatures.length>0&&o.ranchFeatures.forEach((function(e){var t;switch(e.geometryType){case"point":t=ke(e);break;case"polyline":t=Se(e);break;case"polygon":t=xe(e,!1)}s.push(JSON.stringify(t))})),s);t.store.dispatch(Object(a.a)({graphics:f})),t.mapView.goTo(Object(ae.h)(JSON.stringify(f)))}else t.store.dispatch(Object(a.a)({graphics:i})),t.mapView.goTo(Object(ae.h)(h))}}catch(p){throw new Error("Unable to import the selected file.")}},n.readAsText(e)}},{key:"chooseFile",value:function(){var e=this,t=this.fileInput.nativeElement;this.files=[],t.accept="."+this.format,"shp"===this.format&&(t.accept=".zip"),t.onchange=function(){for(var n=0;n<t.files.length;n++)e.files.push(t.files[n]);e.fileInput.nativeElement.value="",e.parseUploadedFiles(e.files[0])},t.click()}},{key:"export",value:function(){var e=this;this.store.select((function(e){return e.app.graphics})).pipe(Object(s.take)(1)).subscribe((function(t){switch(e.format){case"kml":ve("userGraphics.kml",(n=[],t.forEach((function(e){var t,r,i,a,o=JSON.parse(e);switch(o.attributes.geometryType){case"point":case"text":n.push((r="text"===(t=o).attributes.geometryType?t.attributes.symbol.text:"",i=D(t),a="<Placemark>\n",a+=""===r?"":"<name>"+r+"</name>\n",a+="<Point>\n<coordinates>\n",a+=i.x.toString()+","+i.y.toString()+" ",a+="\n</coordinates>\n</Point>\n</Placemark>\n"));break;case"polyline":n.push(function(e){var t=R(e),n="<Placemark>\n";n+="<name>Line</name><Style><LineStyle><color>"+Object(N.b)(e.attributes.symbol.color)+"</color><width>"+e.attributes.symbol.width+"</width></LineStyle></Style>\n<LineString>\n<coordinates>\n";for(var r=0;r<t.paths[0].length;r++)n=n+t.paths[0][r].toString()+" ";return n+="\n</coordinates>\n</LineString>\n</Placemark>\n"}(o));break;case"polygon":case"circle":n.push(function(e){for(var t=L(e),n="<PolyStyle><color>".concat(Object(N.b)(e.attributes.symbol.color),"</color><fill>1</fill></PolyStyle>"),r="<Style><LineStyle><color>".concat(Object(N.b)(e.attributes.symbol.outline.color),"</color>\n                        <width>").concat(e.attributes.symbol.outline.width,"</width></LineStyle>").concat(n,"</Style>"),i="",a=0;a<t.rings.length;a++){i+="<Placemark>\n<name>Polygon</name>"+r+"\n<Polygon>\n<tessellate>1</tessellate>\n<outerBoundaryIs>\n<LinearRing>\n<coordinates>\n";for(var o=0;o<t.rings[a].length;o++){var s=new u.a(t.getPoint(a,o));i=i+s.x.toString()+","+s.y.toString()+" "}i+="\n</coordinates>\n</LinearRing>\n</outerBoundaryIs>\n</Polygon>\n</Placemark>\n"}return i}(o))}})),'<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2">\n<Document>\n'+n.join("\n")+"\n</Document>\n</kml>"),"application/xml");break;case"mmp":ve("UserGraphics.mmp",JSON.stringify(t),"application/json");break;case"gpx":ve("userGraphics.gpx",function(e){var t=[];return e.forEach((function(e){var n,r,i=JSON.parse(e);switch(i.attributes.geometryType){case"text":t.push((r=D(n=i),'<wpt lat="'.concat(r.y,'" lon="').concat(r.x,'"></wpt><name>').concat(n.attributes.symbol.text,"</name>\n")));break;case"point":t.push(function(e){var t=D(e);return'<wpt lat="'.concat(t.y,'" lon="').concat(t.x,'"></wpt><name>pt</name>\n')}(i));break;case"polyline":t.push(function(e){for(var t=R(e),n="<trk>\n<name>Line</name>\n<trkseg>\n",r=0;r<t.paths[0].length;r++)n+='<trkpt lat="'.concat(t.paths[0][r][1],'" lon="').concat(t.paths[0][r][0],'"/>\n');return n+="</trkseg>\n</trk>\n"}(i));break;case"polygon":t.push(K(i));break;case"circle":t.push(K(i,"circle"))}})),'<?xml version="1.0" encoding="UTF-8"?>\n<gpx version="1.1" creator="TexasForestInfo.com"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.topografix.com/GPX/1/1"\n  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">\n<name>MMP</name>'+t.join("\n")+" </gpx>"}(t),"application/xml");break;case"shp":r=t,Object(Y.a)(void 0,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={fields:[{name:"id",type:"esriFieldTypeString",length:20}],spatialReference:{wkid:3857},features:[]},r.forEach((function(e){var n=JSON.parse(e),r=n.attributes.geometryType,i={geometry:("point"===r?D(n):"polygon"===r||"circle"===r?L(n):R(n)).toJSON(),attributes:{id:n.attributes.id}};t.features.push(i)})),n=function e(t,n){var r={};if(t.features){r.type="FeatureCollection",r.features=[];for(var i=0;i<t.features.length;i++)r.features.push(e(t.features[i],n))}if("number"==typeof t.x&&"number"==typeof t.y&&(r.type="Point",r.coordinates=[t.x,t.y],"number"==typeof t.z&&r.coordinates.push(t.z)),t.points&&(r.type="MultiPoint",r.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(r.type="LineString",r.coordinates=t.paths[0].slice(0)):(r.type="MultiLineString",r.coordinates=t.paths.slice(0))),t.rings&&(r=function(e){var t,n,r=[],i=[];if(1===e.length){var a=ee(e[0].slice(0));if(te(a))r.push([a.slice()]);else{var o=[a.slice().reverse()];r.push(o)}}else for(var s=0;s<e.length;s++){var u=ee(e[s].slice(0));if(!(u.length<4))if(te(u)){var c=[u.slice().reverse()];r.push(c)}else i.push(u.slice().reverse())}for(var l=[];i.length;){n=i.pop();var h=!1;for(t=r.length-1;t>=0;t--)if(ie(r[t][0],n)){r[t].push(n),h=!0;break}h||l.push(n)}for(;l.length;){n=l.pop();var f=!1;for(t=r.length-1;t>=0;t--)if(re(r[t][0],n)){r[t].push(n),f=!0;break}f||r.push([n.reverse()])}return 1===r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}(t.rings.slice(0))),"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax&&(r.type="Polygon",r.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(r.type="Feature",r.geometry=t.geometry?e(t.geometry,null):null,r.properties=t.attributes?function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(t.attributes):null,t.attributes))try{r.id=function(e,t){for(var n=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"],r=0;r<n.length;r++){var i=n[r];if(i in e&&("string"==typeof e[i]||"number"==typeof e[i]))return e[i]}throw Error("No valid id attribute found")}(t.attributes,n)}catch(a){}return JSON.stringify(r.geometry)===JSON.stringify({})&&(r.geometry=null),t.spatialReference&&t.spatialReference.wkid&&4326!==t.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),r}(t,"id"),i=[],a=n.features.map((function(e){return e.geometry.type.toLowerCase()})),e.t0=a.indexOf("linestring")>-1,!e.t0){e.next=11;break}return e.t1=i,e.next=8,de($.line(n));case 8:e.t2=e.sent,e.t3={type:"line",geom:e.t2},e.t1.push.call(e.t1,e.t3);case 11:if(e.t4=a.indexOf("point")>-1,!e.t4){e.next=19;break}return e.t5=i,e.next=16,de($.point(n));case 16:e.t6=e.sent,e.t7={type:"point",geom:e.t6},e.t5.push.call(e.t5,e.t7);case 19:if(!(a.indexOf("polygon")>-1)){e.next=27;break}return o=$.polygon(n),e.t8=i,e.next=24,de(o);case 24:e.t9=e.sent,e.t10={type:"polygon",geom:e.t9},e.t8.push.call(e.t8,e.t10);case 27:s=[],u=[],i.forEach((function(e){var t=e.type+".",n=e.geom;s.push(n.shp.buffer,n.dbf.buffer,n.shx.buffer,n.prj),u.push(t+"shp",t+"dbf",t+"shx",t+"prj")})),pe.addFiles(u,s,(function(){pe.getBlobURL().then((function(e){var t=document.createElement("a");t.download="MapMyProperty.zip",t.href=e,t.onclick=function(){setTimeout((function(){window.URL.revokeObjectURL(t.href)}),500)},t.click(),t.remove()}))}));case 29:case"end":return e.stop()}}),e)})))}var n,r}))}},{key:"ngOnDestroy",value:function(){this.graphicsSub$.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ue)(o.fc(Ae.h))},ue.\u0275cmp=o.Zb({type:ue,selectors:[["app-import-export"]],viewQuery:function(e,t){var n;1&e&&o.Xc(Pe,1),2&e&&o.Ic(n=o.sc())&&(t.fileInput=n.first)},inputs:{mapView:"mapView"},decls:31,vars:11,consts:[[1,"py-3"],[3,"header","itemName"],[1,"importExportFormat"],["type","radio","name","format","aria-label","MMP",3,"value","ngModel","ngModelChange"],["type","radio","name","format","aria-label","SHP",3,"value","ngModel","ngModelChange"],["type","radio","name","format","aria-label","KML",3,"value","ngModel","ngModelChange"],["type","radio","name","format","aria-label","GPX",3,"value","ngModel","ngModelChange"],[1,"importBtns"],["type","button",1,"btnIcon","pmlo-btn","pmlo-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#FFF","height","24","viewBox","0 0 24 24","width","24",1,"w-7","h-4","mr-1"],["d","M0 0h24v24H0z","fill","none"],["d","M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"],["type","file","id","fileUpload","name","fileUpload","multiple","multiple","accept","*",2,"display","none"],["fileInput",""],["type","button",1,"btnIcon","pmlo-btn","pmlo-secondary",3,"disabled","click"],["d","M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"]],template:function(e,t){1&e&&(o.kc(0,"div",0),o.gc(1,"app-help-button",1),o.gc(2,"br"),o.kc(3,"div",2),o.kc(4,"span"),o.kc(5,"input",3),o.rc("ngModelChange",(function(e){return t.format=e})),o.jc(),o.Tc(6," \xa0 MMP"),o.jc(),o.kc(7,"span"),o.kc(8,"input",4),o.rc("ngModelChange",(function(e){return t.format=e})),o.jc(),o.Tc(9," \xa0 SHP "),o.jc(),o.kc(10,"span"),o.kc(11,"input",5),o.rc("ngModelChange",(function(e){return t.format=e})),o.jc(),o.Tc(12," \xa0 KML"),o.jc(),o.kc(13,"span"),o.kc(14,"input",6),o.rc("ngModelChange",(function(e){return t.format=e})),o.jc(),o.Tc(15," \xa0 GPX"),o.jc(),o.jc(),o.kc(16,"div",7),o.kc(17,"button",8),o.rc("click",(function(){return t.chooseFile()})),o.uc(),o.kc(18,"svg",9),o.gc(19,"path",10),o.gc(20,"path",11),o.jc(),o.tc(),o.kc(21,"span"),o.Tc(22,"Import"),o.jc(),o.jc(),o.gc(23,"input",12,13),o.kc(25,"button",14),o.rc("click",(function(){return t.export()})),o.uc(),o.kc(26,"svg",9),o.gc(27,"path",10),o.gc(28,"path",15),o.jc(),o.tc(),o.kc(29,"span"),o.Tc(30,"Export"),o.jc(),o.jc(),o.jc(),o.jc()),2&e&&(o.Tb(1),o.Bc("header","Import | Export")("itemName","importExport"),o.Tb(4),o.Bc("value","mmp")("ngModel",t.format),o.Tb(3),o.Bc("value","shp")("ngModel",t.format),o.Tb(3),o.Bc("value","kml")("ngModel",t.format),o.Tb(3),o.Bc("value","gpx")("ngModel",t.format),o.Tb(11),o.Bc("disabled",!t.exportEnabled))},directives:[Ce.a,Ee.p,Ee.b,Ee.j,Ee.m],styles:["fieldset[_ngcontent-%COMP%]{position:relative;padding-top:12px}.widthSlider[_ngcontent-%COMP%]{width:80%;height:20px}.widthSlider[_ngcontent-%COMP%] > .slidecontainer[_ngcontent-%COMP%]{width:200px}.widthSliderContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;line-height:15px}.buttonActive[_ngcontent-%COMP%]{background-color:#d3d3d3;border:2px solid #0ff;color:#000}.fontButtons[_ngcontent-%COMP%]{min-width:unset!important;width:50px;margin:2px;outline:none}.fontStyle[_ngcontent-%COMP%]{justify-content:center;margin-top:10px}.verticalCenter[_ngcontent-%COMP%]{align-items:center}.matSelect[_ngcontent-%COMP%]{margin-left:10px}.colorDiv[_ngcontent-%COMP%], .marginTop10px[_ngcontent-%COMP%]{margin-top:10px}legend[_ngcontent-%COMP%]{font-weight:600}.importExportFormat[_ngcontent-%COMP%]{grid-template-columns:100px 100px;grid-template-rows:40px 40px;margin-top:10px}.importBtns[_ngcontent-%COMP%], .importExportFormat[_ngcontent-%COMP%]{display:grid;justify-content:center}.importBtns[_ngcontent-%COMP%]{grid-template-columns:110px 110px;grid-column-gap:10px;margin-bottom:20px}.importExportFormat[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}.btnIcon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center}"]}),ue)},"bV/r":function(e,t,n){"use strict";var r,i=n("pO5D"),a=n("WbKI"),o=n("ACjl"),s=n("04ZG"),u=n("zlDU"),c=n("9MzC"),l=n("+rMe"),h="loaded",f=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._loadController=null,e.loadError=null,e.loadStatus="not-loaded",e._set("loadWarnings",[]),e.addResolvingPromise(new Promise((function(t){var n=e.load.bind($t(e));e.load=function(r){var i=new Promise((function(t,n){var i=Object(c.q)(r,n);e.destroyed&&n(new u.a("load:instance-destroyed","Instance of '".concat(e.declaredClass||e.constructor.name,"' is already destroyed"),{instance:$t(e)})),e._promiseProps.when(t,n).finally((function(){i&&i.remove()}))}));if("not-loaded"===e.loadStatus){e._set("loadStatus","loading");var a=e._loadController=Object(c.d)();n({signal:a.signal}),Object(c.p)(a.signal,(function(){e._promiseProps.abort()}))}return t(),i}}))),e.when((function(){e._set("loadStatus",h),e._loadController=null}),(function(t){e._set("loadStatus","failed"),e._set("loadError",t),e._loadController=null})),e}return Zt(n,[{key:"loaded",get:function(){return this.loadStatus===h}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}},{key:"load",value:function(){return null}},{key:"cancelLoad",value:function(){var e;return this.isFulfilled()||(this._set("loadError",new u.a("load:cancelled","Cancelled")),null==(e=this._loadController)||e.abort()),this}}]),n}(e);return Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"loaded",null),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"loadError",void 0),Object(i.a)([Object(a.b)()],t.prototype,"loadStatus",void 0),Object(i.a)([Object(a.b)({type:[o.a],readOnly:!0})],t.prototype,"loadWarnings",null),t=Object(i.a)([Object(s.a)("esri.core.Loadable")],t),t},p=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(f(l.a));(r=(p=Object(i.a)([Object(s.a)("esri.core.Loadable")],p))||(p={})).LoadableMixin=f,r.isLoadable=function(e){return!(!e||!e.load)},t.a=p},bVvB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e,t){t.attributeColor?(e.attributes.add("color","vec4"),e.varyings.add("vColor","vec4"),e.vertex.code.add(r.a(Oe||(Oe=Rt(["\n      void forwardVertexColor() { vColor = color; }\n    "])))),e.vertex.code.add(r.a(je||(je=Rt(["\n      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }\n    "]))))):e.vertex.code.add(r.a(_e||(_e=Rt(["\n      void forwardVertexColor() {}\n      void forwardNormalizedVertexColor() {}\n    "]))))}},bgch:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),l=n("jWZj"),h=n("OteC"),f=n("xSgX"),p=c.a.ofType({base:null,key:"type",typeMap:{line:l.a,path:h.a}}),d=c.a.ofType({base:null,key:"type",typeMap:{line:l.a,path:h.a}}),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).symbolLayers=new p,r.type="line-3d",r}return Zt(n,[{key:"clone",value:function(){return new r({styleOrigin:Object(a.a)(this.styleOrigin),symbolLayers:Object(a.a)(this.symbolLayers),thumbnail:Object(a.a)(this.thumbnail)})}}],[{key:"fromSimpleLineSymbol",value:function(e){return new r({symbolLayers:[l.a.fromSimpleLineSymbol(e)]})}}]),n}(f.a);Object(i.a)([Object(o.b)({type:p,json:{type:d}})],v.prototype,"symbolLayers",void 0),Object(i.a)([Object(s.a)({LineSymbol3D:"line-3d"},{readOnly:!0})],v.prototype,"type",void 0),v=r=Object(i.a)([Object(u.a)("esri.symbols.LineSymbol3D")],v),t.a=v},bk1R:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("DZP5")),s=n("qRWG"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).angle=0,r.type=null,r.xoffset=0,r.yoffset=0,r.size=9,r}return Zt(n,[{key:"hash",value:function(){return"".concat(this.type,".").concat(this.angle,".").concat(this.size,".").concat(this.xoffset,".").concat(this.yoffset)}}]),n}(o.a);Object(r.a)([Object(i.b)({type:Number,json:{read:function(e){return e&&-1*e},write:function(e,t){return t.angle=e&&-1*e}}})],u.prototype,"angle",void 0),Object(r.a)([Object(i.b)({type:["simple-marker","picture-marker"],readOnly:!0})],u.prototype,"type",void 0),Object(r.a)([Object(i.b)({type:Number,cast:s.k,json:{write:!0}})],u.prototype,"xoffset",void 0),Object(r.a)([Object(i.b)({type:Number,cast:s.k,json:{write:!0}})],u.prototype,"yoffset",void 0),Object(r.a)([Object(i.b)({type:Number,cast:function(e){return"auto"===e?e:Object(s.k)(e)},json:{write:!0}})],u.prototype,"size",void 0),u=Object(r.a)([Object(a.a)("esri.symbols.MarkerSymbol")],u),t.a=u},bvrg:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("RI0u"),c=n("r88o"),l=n("04ZG"),h=n("Cduq"),f=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),p=n("SE0f"),d=n("ZVeJ"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).colorRamp=null,r.computeGamma=!1,r.dynamicRangeAdjustment=!1,r.gamma=[],r.maxPercent=null,r.minPercent=null,r.numberOfStandardDeviations=null,r.outputMax=null,r.outputMin=null,r.sigmoidStrengthLevel=null,r.statistics=[],r.histograms=null,r.useGamma=!1,r.stretchType="none",r.type="raster-stretch",r}return Zt(n,[{key:"readColorRamp",value:function(e){if(e)return Object(p.a)(e)}},{key:"writeStatistics",value:function(e,t,n){var r;null!=(r=e)&&r.length&&(Array.isArray(e[0])||(e=e.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),t[n]=e)}},{key:"readStretchType",value:function(e,t){var n=t.stretchType;return"number"==typeof n&&(n=d.a[n]),d.b.read(n)}},{key:"clone",value:function(){return new r({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Object(a.a)(this.statistics),gamma:Object(a.a)(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Object(a.a)(this.colorRamp),histograms:Object(a.a)(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}}]),n}(f.a);Object(i.a)([Object(s.b)({types:p.b,json:{write:!0}})],v.prototype,"colorRamp",void 0),Object(i.a)([Object(c.a)("colorRamp")],v.prototype,"readColorRamp",null),Object(i.a)([Object(s.b)({type:Boolean,json:{write:!0}})],v.prototype,"computeGamma",void 0),Object(i.a)([Object(s.b)({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],v.prototype,"dynamicRangeAdjustment",void 0),Object(i.a)([Object(s.b)({type:[Number],json:{write:!0}})],v.prototype,"gamma",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"maxPercent",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"minPercent",void 0),Object(i.a)([Object(s.b)({type:o.a,json:{write:!0}})],v.prototype,"numberOfStandardDeviations",void 0),Object(i.a)([Object(s.b)({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],v.prototype,"outputMax",void 0),Object(i.a)([Object(s.b)({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],v.prototype,"outputMin",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],v.prototype,"sigmoidStrengthLevel",void 0),Object(i.a)([Object(s.b)({json:{type:[[Number]],write:!0}})],v.prototype,"statistics",void 0),Object(i.a)([Object(s.b)()],v.prototype,"histograms",void 0),Object(i.a)([Object(h.a)("statistics")],v.prototype,"writeStatistics",null),Object(i.a)([Object(s.b)({type:Boolean,json:{write:!0}})],v.prototype,"useGamma",void 0),Object(i.a)([Object(s.b)({type:d.b.apiValues,json:{type:d.b.jsonValues,write:d.b.write}})],v.prototype,"stretchType",void 0),Object(i.a)([Object(c.a)("stretchType",["stretchType"])],v.prototype,"readStretchType",null),Object(i.a)([Object(u.a)({rasterStretch:"raster-stretch"})],v.prototype,"type",void 0),v=r=Object(i.a)([Object(l.a)("esri.renderers.RasterStretchRenderer")],v),t.a=v},c46T:function(e,t,n){"use strict";function r(){return new Float32Array(2)}function i(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}function a(){return r()}function o(){return i(1,1)}function s(){return i(1,0)}function u(){return i(0,1)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var c=a(),l=o(),h=s(),f=u();Object.freeze({__proto__:null,create:r,clone:function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:i,createView:function(e,t){return new Float32Array(e,t,2)},zeros:a,ones:o,unitX:s,unitY:u,ZEROS:c,ONES:l,UNIT_X:h,UNIT_Y:f})},c8tJ:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("+opI"),c=n("r88o"),l=n("04ZG"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).minValue=0,r.maxValue=0,r}return Zt(n,[{key:"clone",value:function(){return new r({minValue:this.minValue,maxValue:this.maxValue})}}]),n}(h.a);Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],f.prototype,"minValue",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],f.prototype,"maxValue",void 0);var p,d=f=r=Object(i.a)([Object(l.a)("esri.renderer.support.AuthoringInfoClassBreakInfo")],f),v=p=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).field="",r.normalizationField="",r.label="",r.classBreakInfos=[],r}return Zt(n,[{key:"clone",value:function(){return new p({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Object(a.a)(this.classBreakInfos)})}}]),n}(h.a);Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"field",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"normalizationField",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],v.prototype,"label",void 0),Object(i.a)([Object(s.b)({type:[d],json:{write:!0}})],v.prototype,"classBreakInfos",void 0);var y,b=v=p=Object(i.a)([Object(l.a)("esri.renderers.support.AuthoringInfoFieldInfo")],v),g=n("Gj5k"),m=new u.a({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),w=new u.a({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),O={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},j=["high-to-low","above-and-below","centered-on","extremes"],_=Bt(new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])),x=["seconds","minutes","hours","days","months","years"],k=y=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).endTime=null,r.field=null,r.maxSliderValue=null,r.minSliderValue=null,r.startTime=null,r.type=null,r.units=null,r}return Zt(n,[{key:"castEndTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"castStartTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)}},{key:"clone",value:function(){return new y({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}}]),n}(h.a);Object(i.a)([Object(s.b)({types:O,json:{write:!0}})],k.prototype,"endTime",void 0),Object(i.a)([Object(g.a)("endTime")],k.prototype,"castEndTime",null),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],k.prototype,"field",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],k.prototype,"maxSliderValue",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],k.prototype,"minSliderValue",void 0),Object(i.a)([Object(s.b)({types:O,json:{write:!0}})],k.prototype,"startTime",void 0),Object(i.a)([Object(g.a)("startTime")],k.prototype,"castStartTime",null),Object(i.a)([Object(s.b)({type:m.apiValues,value:null,json:{type:m.jsonValues,read:m.read,write:m.write}})],k.prototype,"style",null),Object(i.a)([Object(s.b)({type:_,value:null,json:{type:_,origins:{"web-scene":{type:j,write:{writer:function(e,t){j.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],k.prototype,"theme",null),Object(i.a)([Object(s.b)({type:w.apiValues,json:{type:w.jsonValues,read:w.read,write:w.write}})],k.prototype,"type",void 0),Object(i.a)([Object(s.b)({type:x,json:{type:x,write:!0}})],k.prototype,"units",void 0);var S,M=k=y=Object(i.a)([Object(l.a)("esri.renderers.support.AuthoringInfoVisualVariable")],k),I=n("SE0f"),T=new u.a({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),A=new u.a({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),C=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],E=S=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).colorRamp=null,r.lengthUnit=null,r.maxSliderValue=null,r.minSliderValue=null,r.visualVariables=null,r}return Zt(n,[{key:"classificationMethod",get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)}},{key:"readColorRamp",value:function(e){if(e)return Object(I.a)(e)}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)}},{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(e){this._set("statistics",e)}},{key:"standardDeviationInterval",get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)}},{key:"type",get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(e){this._set("univariateSymbolStyle",e)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(e){this._set("univariateTheme",e)}},{key:"clone",value:function(){return new S({classificationMethod:this.classificationMethod,colorRamp:Object(a.a)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:Object(a.a)(this.field1),field2:Object(a.a)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((function(e){return e.clone()})),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}}]),n}(h.a);Object(i.a)([Object(s.b)({type:T.apiValues,value:null,json:{type:T.jsonValues,read:T.read,write:T.write,origins:{"web-document":{default:"manual",type:T.jsonValues,read:T.read,write:T.write}}}})],E.prototype,"classificationMethod",null),Object(i.a)([Object(s.b)({types:I.b,json:{write:!0}})],E.prototype,"colorRamp",void 0),Object(i.a)([Object(c.a)("colorRamp")],E.prototype,"readColorRamp",null),Object(i.a)([Object(s.b)({type:[String],value:null,json:{write:!0}})],E.prototype,"fields",null),Object(i.a)([Object(s.b)({type:b,value:null,json:{write:!0}})],E.prototype,"field1",null),Object(i.a)([Object(s.b)({type:b,value:null,json:{write:!0}})],E.prototype,"field2",null),Object(i.a)([Object(s.b)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],E.prototype,"focus",null),Object(i.a)([Object(s.b)({type:Number,value:null,json:{type:o.a,write:!0}})],E.prototype,"numClasses",null),Object(i.a)([Object(s.b)({type:C,json:{type:C,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],E.prototype,"lengthUnit",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"maxSliderValue",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"minSliderValue",void 0),Object(i.a)([Object(s.b)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"statistics",null),Object(i.a)([Object(s.b)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],E.prototype,"standardDeviationInterval",null),Object(i.a)([Object(s.b)({type:A.apiValues,value:null,json:{type:A.jsonValues,read:A.read,write:A.write}})],E.prototype,"type",null),Object(i.a)([Object(s.b)({type:[M],json:{write:!0}})],E.prototype,"visualVariables",void 0),Object(i.a)([Object(s.b)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],E.prototype,"univariateSymbolStyle",null),Object(i.a)([Object(s.b)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],E.prototype,"univariateTheme",null),E=S=Object(i.a)([Object(l.a)("esri.renderers.support.AuthoringInfo")],E),t.a=E},cCpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return fe})),n.d(t,"b",(function(){return ye})),n.d(t,"c",(function(){return de})),n.d(t,"d",(function(){return Oe})),n.d(t,"e",(function(){return je})),n.d(t,"f",(function(){return pe})),n.d(t,"g",(function(){return we})),n.d(t,"h",(function(){return me})),n.d(t,"i",(function(){return ve})),n("wSAH");var r,i,a=n("6S2I"),o=n("VW+2"),s=Object.prototype,u=Function.prototype.toString,c=s.hasOwnProperty,l=u.call(Object),h=s.toString,f=(r=Object.getPrototypeOf,i=Object,function(e){return r(i(e))});function p(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var d=/javascript\s*\:/gim,v={whiteList:{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},getDefaultWhiteList:function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},onAttr:function(e,t,n){},onIgnoreAttr:function(e,t,n){},safeAttrValue:function(e,t){return d.test(t)?"":t}},y=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")};function b(e){return null==e}function g(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||v.whiteList,e.onAttr=e.onAttr||v.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||v.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||v.safeAttrValue,this.options=e}g.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue;return function(e,t){var n;";"!==(n=e,e=String.prototype.trimRight?n.trimRight():n.replace(/(\s*$)/g,""))[e.length-1]&&(e+=";");var r=e.length,i=!1,a=0,o=0,s="";function u(){if(!i){var n=y(e.slice(a,o)),r=n.indexOf(":");if(-1!==r){var u=y(n.slice(0,r)),c=y(n.slice(r+1));if(u){var l=t(a,s.length,u,c,n);l&&(s+=l+"; ")}}}a=o+1}for(;o<r;o++){var c=e[o];if("/"===c&&"*"===e[o+1]){var l=e.indexOf("*/",o+2);if(-1===l)break;a=(o=l+1)+1,i=!1}else"("===c?i=!0:")"===c?i=!1:";"===c?i||u():"\n"===c&&u()}return y(s)}(e,(function(e,t,o,s,u){var c=n[o],l=!1;if(!0===c?l=c:"function"==typeof c?l=c(s):c instanceof RegExp&&(l=c.test(s)),!0!==l&&(l=!1),s=a(o,s)){var h,f={position:t,sourcePosition:e,source:u,isWhite:l};return l?b(h=r(o,s,f))?o+":"+s:h:b(h=i(o,s,f))?void 0:h}}))};var m=g,w=p((function(e,t){for(var n in(t=e.exports=function(e,t){return new m(t).process(e)}).FilterCSS=m,v)t[n]=v[n]})),O=function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},j=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},_=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},x=w.getDefaultWhiteList,k=new(0,w.FilterCSS);function S(e){return e.replace(M,"&lt;").replace(I,"&gt;")}var M=/</g,I=/>/g,T=/"/g,A=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,E=/&colon;?/gim,P=/&newline;?/gim,R=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,D=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,L=/u\s*r\s*l\s*\(.*/gi;function N(e){return e.replace(T,"&quot;")}function F(e){return e.replace(A,'"')}function z(e){return e.replace(C,(function(e,t){return String.fromCharCode("x"===t[0]||"X"===t[0]?parseInt(t.substr(1),16):parseInt(t,10))}))}function V(e){return e.replace(E,":").replace(P," ")}function G(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return j(t)}function U(e){return G(e=V(e=z(e=F(e))))}function B(e){return S(e=N(e))}var q=/<!--[\s\S]*?-->/g,H={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},getDefaultWhiteList:function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}},onTag:function(e,t,n){},onIgnoreTag:function(e,t,n){},onTagAttr:function(e,t,n){},onIgnoreTagAttr:function(e,t,n){},safeAttrValue:function(e,t,n,r){if(n=U(n),"href"===t||"src"===t){if("#"===(n=j(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(R.lastIndex=0,R.test(n))return""}else if("style"===t){if(D.lastIndex=0,D.test(n))return"";if(L.lastIndex=0,L.test(n)&&(R.lastIndex=0,R.test(n)))return"";!1!==r&&(n=(r=r||k).process(n))}return B(n)},escapeHtml:S,escapeQuote:N,unescapeQuote:F,escapeHtmlEntities:z,escapeDangerHtml5Entities:V,clearNonPrintableCharacter:G,friendlyAttrValue:U,escapeAttrValue:B,onIgnoreTagStripAll:function(){return""},StripTagBody:function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],i=!1;return{onIgnoreTag:function(a,o,s){if(function(t){return!!n||-1!==O(e,t)}(a)){if(s.isClosing){var u="[/removed]";return r.push([!1!==i?i:s.position,s.position+u.length]),i=!1,u}return i||(i=s.position),"[removed]"}return t(a,o,s)},remove:function(e){var t="",n=0;return function(e,t,n){var r,i;if(Array.prototype.forEach)return e.forEach(t,void 0);for(r=0,i=e.length;r<i;r++)t.call(void 0,e[r],r,e)}(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},stripCommentTag:function(e){return e.replace(q,"")},stripBlankChar:function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},cssFilter:k,getDefaultCSSWhiteList:x};function W(e){var t=_(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=j(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function J(e){return"</"===e.slice(0,2)}var Z=/[^a-zA-Z0-9_:\.\-]/gim;function K(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function Y(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function X(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var Q={parseTag:function(e,t,n){var r="",i=0,a=!1,o=!1,s=0,u=e.length,c="",l="";e:for(s=0;s<u;s++){var h=e.charAt(s);if(!1===a){if("<"===h){a=s;continue}}else if(!1===o){if("<"===h){r+=n(e.slice(i,s)),a=s,i=s;continue}if(">"===h){r+=n(e.slice(i,a)),c=W(l=e.slice(a,s+1)),r+=t(a,r.length,c,l,J(l)),i=s+1,a=!1;continue}if('"'===h||"'"===h)for(var f=1,p=e.charAt(s-f);" "===p||"="===p;){if("="===p){o=h;continue e}p=e.charAt(s-++f)}}else if(h===o){o=!1;continue}}return i<e.length&&(r+=n(e.substr(i))),r},parseAttr:function(e,t){var n=0,r=[],i=!1,a=e.length;function o(e,n){if(!((e=(e=j(e)).replace(Z,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&r.push(i)}}for(var s=0;s<a;s++){var u,c=e.charAt(s);if(!1!==i||"="!==c)if(!1===i||s!==n||'"'!==c&&"'"!==c||"="!==e.charAt(s-1)){if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(u=K(e,s))){o(j(e.slice(n,s))),i=!1,n=s+1;continue}s=u-1;continue}if(-1===(u=Y(e,s-1))){o(i,X(j(e.slice(n,s)))),i=!1,n=s+1;continue}}}else{if(-1===(u=e.indexOf(c,s+1)))break;o(i,j(e.slice(n+1,u))),i=!1,n=(s=u)+1}else i=e.slice(n,s),n=s+1}return n<e.length&&(!1===i?o(e.slice(n)):o(i,X(j(e.slice(n))))),j(r.join(" "))}},$=w.FilterCSS,ee=Q.parseTag,te=Q.parseAttr;function ne(e){return null==e}function re(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=H.onIgnoreTagStripAll),e.whiteList=e.whiteList||H.whiteList,e.onTag=e.onTag||H.onTag,e.onTagAttr=e.onTagAttr||H.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||H.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||H.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||H.safeAttrValue,e.escapeHtml=e.escapeHtml||H.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new $(e.css))}re.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,a=t.onTagAttr,o=t.onIgnoreTagAttr,s=t.safeAttrValue,u=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=H.stripBlankChar(e)),t.allowCommentTag||(e=H.stripCommentTag(e));var l=!1;t.stripIgnoreTagBody&&(l=H.StripTagBody(t.stripIgnoreTagBody,i),i=l.onIgnoreTag);var h=ee(e,(function(e,t,l,h,f){var p,d={sourcePosition:e,position:t,isClosing:f,isWhite:n.hasOwnProperty(l)};if(!ne(p=r(l,h,d)))return p;if(d.isWhite){if(d.isClosing)return"</"+l+">";var v=function(e){var t=_(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=j(e.slice(t+1,-1)))[e.length-1];return n&&(e=j(e.slice(0,-1))),{html:e,closing:n}}(h),y=n[l],b=te(v.html,(function(e,t){var n,r=-1!==O(y,e);return ne(n=a(l,e,t,r))?r?(t=s(l,e,t,c))?e+'="'+t+'"':e:ne(n=o(l,e,t,r))?void 0:n:n}));return h="<"+l,b&&(h+=" "+b),v.closing&&(h+=" /"),h+">"}return ne(p=i(l,h,d))?u(h):p}),u);return l&&(h=l.remove(h)),h};var ie,ae,oe=re,se=p((function(e,t){function n(e,t){return new oe(t).process(e)}for(var r in(t=e.exports=n).filterXSS=n,t.FilterXSS=oe,H)t[r]=H[r];for(var r in Q)t[r]=Q[r];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)})),ue=function(){function e(e,t){var n,r=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,n,i){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(n):se.safeAttrValue(e,t,n,i)}},e&&!t?n=e:e&&t?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[t]=e[t]}))):(n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=n,this._xssFilter=new se.FilterXSS(n)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?se.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,n,r){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,n,r):se.safeAttrValue(e,t,n,r)},e.prototype.validate=function(e,t){void 0===t&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){t[n]=Array.isArray(e[n])&&Array.isArray(t[n])?t[n].concat(e[n]):e[n]}))})),t},e.prototype._iterateOverObject=function(e,t){var n=this;void 0===t&&(t={});try{var r=!1,i=void 0;if(Array.isArray(e))i=e.reduce((function(e,i){var a=n.validate(i,t);return a.isValid?e.concat([i]):(r=!0,e.concat([a.sanitized]))}),[]);else{if(!function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=h.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e))return!1;var t=f(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}(e)){if(t.allowUndefined&&void 0===e)return;return null}i=Object.keys(e).reduce((function(i,a){var o=e[a],s=n.validate(o,t);return s.isValid?i[a]=o:(r=!0,i[a]=s.sanitized),i}),{})}return r?i:e}catch(a){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),ce=function(e){ie||function(e){if("WebkitTransition"in e.style)ie="webkitTransitionEnd",ae="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");ie="transitionend",ae="animationend"}}(e)},le=function(e,t){return void 0===t&&(t=e+"-active"),function(n){ce(n);var r=!1,i=function i(a){r||(r=!0,n.removeEventListener(ie,i),n.removeEventListener(ae,i),n.classList.remove(e),n.classList.remove(t))};n.classList.add(e),n.addEventListener(ie,i),n.addEventListener(ae,i),requestAnimationFrame((function(){n.classList.add(t)}))}},he=function(e,t){return void 0===t&&(t=e+"-active"),function(n,r){ce(n);var i=!1,a=function e(t){i||(i=!0,n.removeEventListener(ie,e),n.removeEventListener(ae,e),r())};n.classList.add(e),n.addEventListener(ie,a),n.addEventListener(ae,a),requestAnimationFrame((function(){n.classList.add(t)}))}};function fe(e){for(var t=o.a.acquire(),n=0;n<arguments.length;n++){var r=arguments[n],i=typeof r;if("string"===i)t.push(r);else if(Array.isArray(r))t.push.apply(t,r);else if("object"===i)for(var a in r)r[a]&&t.push(a)}var s=t.join(" ");return o.a.release(t),s}function pe(){return"rtl"===document.dir}function de(e){this[e.getAttribute("data-node-ref")]=null}function ve(e){this[e.getAttribute("data-node-ref")]=e}function ye(e,t){return("enter"===e?le:he)(t)}a.a.getLogger("esri.widgets.support.widgetUtils");var be=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((function(e,t){return e[t]=[],e}),{}),ge=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],me=new ue({whiteList:be,onTagAttr:function(e,t,n){var r="".concat(t,'="').concat(n,'"');if(ge.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function we(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();(n.top+n.height>r.top+r.height||n.top<r.top)&&e.scrollIntoView({block:"end"})}function Oe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function je(){return Oe().startsWith("dark")}},cHlT:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r,i=n("OIYi"),a=n("lhfp");function o(e,t){t.multipassGeometryEnabled&&e.vertex.include(a.b),e.vertex.code.add(i.a(xe||(xe=Rt(["\n  void main(void) {\n    vec4 posProjCenter;\n    if (dot(position, position) > 0.0) {\n      // Render single point to center of the pixel to avoid subpixel\n      // filtering to affect the marker color\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      ","\n\n      vec3 vpos = projectAux.posModel;\n      if (rejectBySlice(vpos)) {\n        // Project out of clip space\n        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n      }\n\n    }\n    else {\n      // Project out of clip space\n      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n\n    gl_Position = posProjCenter;\n    gl_PointSize = 1.0;\n  }\n  "])),t.multipassGeometryEnabled?i.a(ke||(ke=Rt(["\n        // Don't draw vertices behind geometry\n        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){\n          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n        }"]))):"")),e.fragment.uniforms.add("color","vec4"),e.fragment.code.add(i.a(Se||(Se=Rt(["\n  void main() {\n    gl_FragColor = color;\n  }\n  "]))))}(r||(r={})).bindUniforms=function(e){e.setUniform4f("color",1,1,1,1)}},cKKt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var r=function(e){return function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._isDisposed=!1,e}return Zt(n,[{key:"dispose",value:function(){var e,t=Vt(null!=(n=this._managedDisposables)?n:[]);try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=this[r];this[r]=null,i&&"function"==typeof i.dispose&&i.dispose()}}catch(a){t.e(a)}finally{t.f()}this._isDisposed=!0}},{key:"isDisposed",get:function(){return this._isDisposed}}]),n}(e)},i=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(r(function(){return function e(){Wt(this,e)}}()));function a(){return function(e,t){var n,r;e.hasOwnProperty("_managedDisposables")||(e._managedDisposables=null!=(n=null==(r=e._managedDisposables)?void 0:r.slice())?n:[]),e._managedDisposables.unshift(t)}}},cKtl:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return F})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return M})),n.d(t,"l",(function(){return C})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return L})),n.d(t,"o",(function(){return T})),n.d(t,"p",(function(){return E})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return j})),n.d(t,"s",(function(){return l}));var r=n("srIe"),i=n("OKTS"),a=n("Cy1f"),o=n("5DEt"),s=n("8JEK"),u=n("+JUG");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return[e[0],e[1],e[2],e[3]]}function l(e,t,n,r){return f(e,t,n,r,s.e.get())}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return f(e[0],e[1],e[2],e[3],t)}function f(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c();return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();Object(o.j)(n,t);var r=Object(o.g)(t,t);return Math.abs(r-1)>1e-5&&r>1e-12&&Object(o.d)(n,n,1/Math.sqrt(r)),j(n,e,n),n}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c();return _(Object(o.i)(s.d.get(),e,t),Object(o.i)(s.d.get(),n,t),e,r)}function v(e,t,n,r,i){if(e.count<3)return!1;e.getVec(n,b);for(var a=r,s=!1;a<e.count-1&&!s;)e.getVec(a,g),a++,s=!Object(o.p)(b,g);if(!s)return!1;for(a=Math.max(a,i),s=!1;a<e.count&&!s;)e.getVec(a,m),a++,Object(o.i)(w,b,g),Object(o.q)(w,w),Object(o.i)(O,g,m),Object(o.q)(O,O),s=!Object(o.p)(b,m)&&!Object(o.p)(g,m)&&Math.abs(Object(o.g)(w,O))<y;return s?(d(b,g,m,t),!0):(0!==n||1!==r||2!==i)&&v(e,t,0,1,2)}var y=.99619469809,b=Object(a.e)(),g=Object(a.e)(),m=Object(a.e)(),w=Object(a.e)(),O=Object(a.e)();function j(e,t,n){return e!==n&&h(e,n),n[3]=-Object(o.g)(n,t),n}function _(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c();return p(n,Object(o.f)(s.d.get(),t,e),r)}function x(e,t,n){return!!Object(r.k)(t)&&D(e,t.origin,t.direction,!0,!1,n)}function k(e,t,n){return D(e,t.origin,t.vector,!1,!1,n)}function S(e,t,n){return D(e,t.origin,t.vector,!1,!0,n)}function M(e,t){return R(e,Object(u.c)(t))-t[3]>=0}function I(e,t){return R(e,t)>=0}function T(e,t){return e[0]*(e[0]>0?t[0]:t[3])+e[1]*(e[1]>0?t[1]:t[4])+e[2]*(e[2]>0?t[2]:t[5])+e[3]>=0}function A(e,t){var n=Object(o.g)(e,t.ray.direction),r=-R(e,t.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;var i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function C(e,t){var n=Object(o.g)(e,t.ray.direction),r=-R(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;var i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function E(e,t,n){var r=Object(o.d)(s.d.get(),e,-e[3]),i=P(e,Object(o.i)(s.d.get(),t,r),s.d.get());return Object(o.e)(n,i,r),n}function P(e,t,n){var r=Object(o.d)(s.d.get(),e,Object(o.g)(e,t));return Object(o.i)(n,t,r),n}function R(e,t){return Object(o.g)(e,t)+e[3]}function D(e,t,n,r,a,s){var u=Object(o.g)(e,n);if(0===u)return!1;var c=-(Object(o.g)(e,t)+e[3])/u;return a&&(c=r?Math.max(0,c):Object(i.c)(c,0,1)),!(c<0||!r&&c>1||(Object(o.e)(s,t,Object(o.d)(s,n,c)),0))}function L(e){return e}var N=[0,0,1,0],F=Object.freeze({__proto__:null,create:c,wrap:l,copy:h,fromValues:f,fromNormalAndOffset:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return Object(o.j)(n,e),n[3]=t,n},fromPositionAndNormal:p,fromPoints:d,fromManyPoints:function(e,t){return v(e,t,0,1,2)},fromManyPointsSampleAt:v,setOffsetFromPoint:j,negate:function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},fromVectorsAndPoint:_,intersectRay:x,intersectLineSegment:k,intersectLineSegmentClamp:S,isSphereFullyInside:M,isSphereFullyOutside:function(e,t){return R(e,Object(u.c)(t))+t[3]<0},isPointInside:I,isPointOutside:function(e,t){return R(e,t)<0},isAABBFullyInside:T,clip:A,clipInfinite:C,projectPoint:E,projectVector:P,distance:function(e,t){return Math.abs(R(e,t))},signedDistance:R,normal:L,UP:N})},cM4j:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),s=n("IvSi"),u=n("kJYu"),c=n("Ilhi"),l={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).scale=0,r}return Zt(n,[{key:"destroy",value:function(){this.layer=null}},{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;var e=this.visibleSublayers.map((function(e){return e.toExportImageJSON()}));return e.length?JSON.stringify(e):null}},{key:"hasDynamicLayers",get:function(){return this.layer&&Object(c.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}},{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(l[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var e=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression}));return e.length?JSON.stringify(e.reduce((function(e,t){return e[t.id]=t.definitionExpression,e}),{})):null}},{key:"version",get:function(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this,t=[];if(!this.layer)return t;var n=this.layer.sublayers;n&&n.forEach((function n(r){var i=e.scale;r.visible&&(0===i||(0===r.minScale||i<=r.minScale)&&(0===r.maxScale||i>=r.maxScale))&&(r.sublayers?r.sublayers.forEach(n):t.unshift(r))}));var r=this._get("visibleSublayers");return!r||r.length!==t.length||r.some((function(e,n){return t[n]!==e}))?t:r}},{key:"toJSON",value:function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=Nt(Nt({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}}]),n}(Object(u.b)(o.a));Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"dynamicLayers",null),Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"hasDynamicLayers",null),Object(r.a)([Object(i.b)()],h.prototype,"layer",null),Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"layers",null),Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"layerDefs",null),Object(r.a)([Object(i.b)({type:Number})],h.prototype,"scale",void 0),Object(r.a)([Object(i.b)(s.a)],h.prototype,"timeExtent",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"version",null),Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"visibleSublayers",null),h=Object(r.a)([Object(a.a)("esri.layers.mixins.ExportImageParameters")],h)},cPYn:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).visible=!0,r}return Zt(n,[{key:"clone",value:function(){}}]),n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);Object(r.a)([Object(i.b)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],o.prototype,"type",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],o.prototype,"visible",void 0),o=Object(r.a)([Object(a.a)("esri.symbols.callouts.Callout3D")],o),t.a=o},cWSj:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6S2I"),i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Wt(this,e),this.eventType=t,this.keyModifiers=n}return Zt(e,[{key:"matches",value:function(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;var t,n=e.modifiers,r=Vt(this.keyModifiers);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!n.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}}]),e}(),a=r.a.getLogger("esri.views.input.InputHandler"),o=function(){function e(t){Wt(this,e),this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}return Zt(e,[{key:"incomingEventMatches",get:function(){if(!this._incomingEventMatches)for(var e in this._incomingEventMatches=[],this._incoming){var t,n=Vt(this._incoming[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._incomingEventMatches.push(r.match)}}catch(i){n.e(i)}finally{n.f()}}return this._incomingEventMatches}},{key:"incomingEventTypes",get:function(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((function(e){return e.eventType}))),this._incomingEventTypes}},{key:"outgoingEventTypes",get:function(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}},{key:"hasSideEffects",get:function(){return this._hasSideEffects}},{key:"hasPendingInputs",get:function(){return!1}},{key:"onInstall",value:function(e){var t=this;this._manager?a.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((function(e){return t._handleEvent(e)})),e.setUninstallCallback((function(){return t._onUninstall()})),this._manager=e)}},{key:"onUninstall",value:function(){}},{key:"registerIncoming",value:function(e,t,n){var r,a=this;"function"==typeof t?(n=t,r=[]):r=t||[];var o="string"==typeof e?new i(e,r):e,u=function(){a._incomingEventTypes=null,a._incomingEventMatches=null},c=function(e){var t=a._incoming[e.match.eventType];if(t){var n=t.indexOf(e);t.splice(n,1),u(),a._manager&&a._manager.updateDependencies()}},l=new s(o,n,{onPause:c,onRemove:c,onResume:function(e){var t=a._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),u(),a._manager&&a._manager.updateDependencies())}}),h=this._incoming[o.eventType];return h||(h=[],this._incoming[o.eventType]=h),h.push(l),u(),this._manager&&this._manager.updateDependencies(),l}},{key:"registerOutgoing",value:function(e){var t=this;if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);var n=new u(e,{onEmit:function(e,n,r,i){t._manager.emit(e.eventType,n,r,i)},onRemove:function(e){delete t._outgoing[e.eventType],t._manager.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}},{key:"startCapturingPointer",value:function(e){this._manager.setPointerCapture(e,!0)}},{key:"stopCapturingPointer",value:function(e){this._manager.setPointerCapture(e,!1)}},{key:"refreshHasPendingInputs",value:function(){this._manager.refreshHasPendingInputs()}},{key:"_onUninstall",value:function(){this._manager?(this.onUninstall(),this._manager=null):a.error("This InputHandler is not registered with an InputManager")}},{key:"_handleEvent",value:function(e){var t=this._incoming[e.type];if(t){var n,r=Vt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.match.matches(e)&&(i.callback(e),e.shouldStopPropagation()))break}}catch(a){r.e(a)}finally{r.f()}}}}]),e}(),s=function(){function e(t,n,r){Wt(this,e),this.match=t,this._callback=n,this._handler=r}return Zt(e,[{key:"pause",value:function(){this._handler.onPause(this)}},{key:"resume",value:function(){this._handler.onResume(this)}},{key:"remove",value:function(){this._handler.onRemove(this)}},{key:"callback",get:function(){return this._callback}}]),e}(),u=function(){function e(t,n){Wt(this,e),this.eventType=t,this._removed=!1,this._handler=n}return Zt(e,[{key:"emit",value:function(e,t,n){this._removed||this._handler.onEmit(this,e,t,n)}},{key:"remove",value:function(){this._removed=!0,this._handler.onRemove(this)}}]),e}()},cX6o:function(e,t,n){"use strict";var r=n("nm4c"),i=n("vn/o"),a=n("eydS"),o=n("LOvY"),s=n("Tcbo"),u=n("iTZm"),c=n("gBP8"),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(s[n])}function f(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(e,t){var n,s,u,c,h,f=this.strm,p=this.options.chunkSize,d=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,f.input="string"==typeof e?a.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?new Uint8Array(e):e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&d&&(n=r.inflateSetDictionary(this.strm,d)),n===o.Z_BUF_ERROR&&!0===v&&(n=o.Z_OK,v=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(f.output,f.next_out),c=f.next_out-u,h=a.buf2string(f.output,u),f.next_out=c,f.avail_out=p-c,c&&i.arraySet(f.output,f.output,u,c,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===o.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=h,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},cYFG:function(e,t,n){var r=n("5VIg"),i={string:"C",number:"N",boolean:"L",null:"C"};function a(e){var t={},n=[];for(var a in e)t[a]=null===e[a]?"null":typeof e[a];for(var o in t){var s=i[t[o]];s&&n.push({name:o,type:s,size:r[s]})}return n}e.exports.multi=function(e){var t={};return e.forEach((function(e){!function(e,t){for(var n in t)(void 0===e[n]||null!=t[n])&&(e[n]=t[n])}(t,e)})),a(t)},e.exports.bytesPer=function(e){return e.reduce((function(e,t){return e+t.size}),1)},e.exports.obj=a},ciAr:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=n("6S2I"),o=(n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("0ynT"),l=n("fG4V"),h=n("pPNP"),f=n("ne7T"),p=n("Piei"),d=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0};function v(e){var t=e.altitude,n=e.azimuth,r=e.hillshadeType,i=e.pixelSizePower,a=e.pixelSizeFactor,o=e.scalingType,s=e.isGCS,u=e.resolution,c="multi-directional"===r?2*e.zFactor:e.zFactor,l=u.x,h=u.y,f=c/(8*l),p=c/(8*h);if(s&&c>.001&&(f/=111e3,p/=111e3),"adjusted"===o)if(s){var d=111e3*l,v=111e3*h;f=(c+Math.pow(d,i)*a)/(8*d),p=(c+Math.pow(v,i)*a)/(8*v)}else f=(c+Math.pow(l,i)*a)/(8*l),p=(c+Math.pow(h,i)*a)/(8*h);var y=(90-t)*Math.PI/180,b=Math.cos(y),g=(360-n+90)*Math.PI/180,m=Math.sin(y)*Math.cos(g),w=Math.sin(y)*Math.sin(g),O=[315,270,225,360,180,0],j=[60,60,60,60,60,90],_=new Float32Array([3,5,3,2,1,4]),x=_.reduce((function(e,t){return e+t})),k=_.map((function(e){return e/x})),S="multi-directional"===r?O.length:1,M=new Float32Array(6),I=new Float32Array(6),T=new Float32Array(6);if("multi-directional"===r)for(var A=0;A<S;A++)n=O[A],y=(90-(t=j[A]))*Math.PI/180,b=Math.cos(y),g=(360-n+90)*Math.PI/180,m=Math.sin(y)*Math.cos(g),w=Math.sin(y)*Math.sin(g),M[A]=b,I[A]=m,T[A]=w;else M.fill(b),I.fill(m),T.fill(w);return{resolution:u,factor:[f,p],sinZcosA:m,sinZsinA:w,cosZ:b,sinZcosAs:I,sinZsinAs:T,cosZs:M,weights:k,hillshadeType:["traditional","multi-directional"].indexOf(r)}}var y=a.a.getLogger("esri.renderers.support.RasterSymbolizer"),b={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},g=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"bind",value:function(){var e,t=this.rendererJSON;if(!t)return!1;switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":e=this._updateUVRenderer(t);break;case"rasterColormap":e=this._updateColormapRenderer(t);break;case"rasterStretch":e=this._updateStretchRenderer(t);break;case"classBreaks":e=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":e=this._updateShadedReliefRenderer(t)}return e}},{key:"symbolize",value:function(e){var t=e&&e.pixelBlock;if(!this.isValidPixelBlock(t))return t;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(t,e.simpleStretchParams);try{var n;switch(t.pixels.length>3&&(t=Object(f.h)(t,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":n=this._symbolize_colormap(t);break;case"classBreaks":n=this._symbolize_classBreaks(t);break;case"rasterStretch":n=this._symbolize_stretch(t,e.bandIds);break;case"rasterShadedRelief":var r=e.extent;n=this._symbolize_shadedRelief(t,{isGCS:r.spatialReference.isGeographic,resolution:{x:(r.xmax-r.xmin)/t.width,y:(r.ymax-r.ymin)/t.height}})}return n}catch(i){return y.error("symbolize",i.message),t}}},{key:"simpleStretch",value:function(e,t){if(!this.isValidPixelBlock(e))return e;try{return e.pixels.length>3&&(e=Object(f.h)(e,[0,1,2])),Object(f.o)(e,t)}catch(n){return y.error("symbolize",n.message),e}}},{key:"generateWebGLParameters",value:function(e){if(["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)>-1){var t,n=(null==(t=this.lookup)?void 0:t.colormapLut)||{};return{colormap:n.indexedColormap,colormapOffset:n.offset,type:"lut"}}var r=e.pixelBlock,i=e.isGCS,a=e.resolution,o=e.bandIds,s=this.rendererJSON;return"rasterStretch"===s.type?this.generateStretchWebGLParams(r,s,o):"rasterShadedRelief"===s.type?this.generateShadedReliefWebGLParams(s,i,a):null}},{key:"_isLUTChanged",value:function(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){var t=this.rendererJSON.colorRamp;if(e)return JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);var n=Nt({},this.rendererJSON),r=Nt({},this.lookup.rendererJSON);return n.colorRamp=null,r.colorRamp=null,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}},{key:"_symbolize_colormap",value:function(e){return this._isLUTChanged()&&!this.bind()?e:Object(f.b)(e,this.lookup.colormapLut)}},{key:"_symbolize_classBreaks",value:function(e){var t=["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType)>-1;return this._isLUTChanged()&&!this.bind()?e:t?Object(f.b)(e,this.lookup.colormapLut):Object(f.l)(e,this.lookup.remapLut)}},{key:"_symbolize_stretch",value:function(e,t){var n,r,i=this.rasterInfo,a=i.pixelType,o=i.bandCount,s=this.rendererJSON,u=["u8","u16","s8","s16"].indexOf(a)>-1,c=s.dra,l=s.useGamma?s.gamma:null;if("histogramEqualization"===s.stretchType){var h=c?null:this.lookup.histogramLut,p=this.getStretchCutoff(s,e,t,!h),d=Object(f.o)(e,Nt(Nt({},p),{},{gamma:l}));r=Object(f.i)(d,{lut:c?p.histogramLut:h,offset:0})}else if(u){var v;if(c){var y=this.getStretchCutoff(s,e,t);n=Object(f.e)(Nt(Nt({pixelType:a},y),{},{gamma:l}))}else if(this._isLUTChanged()){if(!this.bind())return e;n=this.lookup?this.lookup.stretchLut:null}else n=this.lookup?this.lookup.stretchLut:null;if(!n)return e;o>1&&(null==t?void 0:t.length)===e.pixels.length&&(null==(v=n)?void 0:v.lut.length)===o&&(n={lut:t.map((function(e){return n.lut[e]})),offset:n.offset}),r=Object(f.i)(e,n)}else{var b=this.getStretchCutoff(s,e,t);r=Object(f.o)(e,Nt(Nt({},b),{},{gamma:l}))}if(s.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return e;r=Object(f.b)(r,this.lookup.colormapLut)}return r}},{key:"_symbolize_shadedRelief",value:function(e,t){var n,r,a,o=this.rendererJSON,s=function(e,t){if(!d(e))return e;var n=e.width,r=e.height,i=e.mask,a=new Uint8Array(n*r);i&&a.set(i);for(var o,s,u,c,l,h,f,y,b=v(t),g=b.factor,m=b.sinZcosA,w=b.sinZsinA,O=b.cosZ,j=b.sinZcosAs,_=b.sinZsinAs,x=b.cosZs,k=b.weights,S=zt(g,2),M=S[0],I=S[1],T=t.hillshadeType,A=e.pixels[0],C=new Uint8Array(n*r),E=1;E<r-1;E++)for(var P=E*n,R=1;R<n-1;R++)if(!i||i[P+R]){var D=8;if(i&&(D=i[P-n+R-1]+i[P-n+R]+i[P-n+R+1]+i[P+R-1]+i[P+R+1]+i[P+n+R-1]+i[P+n+R]+i[P+n+R+1])<7)C[P+R]=0,a[P+R]=0;else{7===D?(o=i[P-n+R-1]?A[P-n+R-1]:A[P+R],s=i[P-n+R]?A[P-n+R]:A[P+R],u=i[P-n+R+1]?A[P-n+R+1]:A[P+R],c=i[P+R-1]?A[P+R-1]:A[P+R],l=i[P+R+1]?A[P+R+1]:A[P+R],h=i[P+n+R-1]?A[P+n+R-1]:A[P+R],f=i[P+n+R]?A[P+n+R]:A[P+R],y=i[P+n+R+1]?A[P+n+R+1]:A[P+R]):(o=A[P-n+R-1],s=A[P-n+R],u=A[P-n+R+1],c=A[P+R-1],l=A[P+R+1],h=A[P+n+R-1],f=A[P+n+R],y=A[P+n+R+1]);var L=(u+l+l+y-(o+c+c+h))*M,N=(h+f+f+y-(o+s+s+u))*I,F=Math.sqrt(1+L*L+N*N),z=0;if("traditional"===T){var V=255*(O+w*N-m*L)/F;V<0&&(V=0),z=V}else for(var G=_.length,U=0;U<G;U++){var B=255*(x[U]+_[U]*N-j[U]*L)/F;B<0&&(B=0),z+=B*k[U]}C[P+R]=255&z}}else C[P+R]=0;for(var q=0;q<r;q++)C[q*n]=C[q*n+1],C[(q+1)*n-1]=C[(q+1)*n-2];for(var H=1;H<n-1;H++)C[H]=C[H+n],C[H+(r-1)*n]=C[H+(r-2)*n];return new p.a({width:n,height:r,pixels:[C],mask:i?a:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}(e,Nt(Nt({},o),t));if(!o.colorRamp)return s;if(this._isLUTChanged(!0)){if(!this.bind())return s;a=this.lookup?this.lookup.hsvMap:null}else a=this.lookup?this.lookup.hsvMap:null;return a?(function(e,t,n,r){if(d(e)&&d(t)){for(var i=r.min,a=r.max,o=e.pixels[0],s=t.pixels,u=t.mask,c=s[0],l=255.00001/(a-i),h=new Uint8ClampedArray(c.length),f=new Uint8ClampedArray(c.length),p=new Uint8ClampedArray(c.length),v=n.length-1,y=0;y<c.length;y++)if(!u||0!==u[y]){var b=Math.floor((c[y]-i)*l),g=zt(n[b<0?0:b>v?v:b],2),m=g[0],w=g[1],O=o[y],j=O*w,_=j*(1-Math.abs(m%2-1)),x=O-j;switch(Math.floor(m)){case 0:h[y]=j+x,f[y]=_+x,p[y]=x;break;case 1:h[y]=_+x,f[y]=j+x,p[y]=x;break;case 2:h[y]=x,f[y]=j+x,p[y]=_+x;break;case 3:h[y]=x,f[y]=_+x,p[y]=j+x;break;case 4:h[y]=_+x,f[y]=x,p[y]=j+x;break;case 5:case 6:h[y]=j+x,f[y]=x,p[y]=_+x}}e.pixels=[h,f,p],e.updateStatistics()}}(s,e,a,null!=(n=null==(r=Object(i.q)(this.rasterInfo.statistics))?void 0:r[0])?n:{min:0,max:8e3}),s):s}},{key:"_updateUVRenderer",value:function(e){var t=this.rasterInfo,n=t.bandCount,r=t.attributeTable,a=t.statistics,o=t.pixelType,s=e.field1;if(!s)return!1;var u=["u8","s8"].indexOf(o)>-1&&a&&null!=a[0].min&&null!=a[0].max;if(!(function(e,t){var n=e.attributeTable,r=e.bandCount;return!(!Object(i.k)(n)||r>1||t&&null==n.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}(this.rasterInfo,s)||1===n&&u))return!1;var c=[];if(r){var l=r.fields.filter((function(e){return"value"===e.name.toLowerCase()}))[0];if(!l)return!1;r.features.forEach((function(t){var n,r=e.uniqueValueInfos.filter((function(e){return String(e.value)===String(t.attributes[s])}))[0],i=null==r||null==(n=r.symbol)?void 0:n.color;i&&c.push([t.attributes[l.name]].concat(i))}))}else{if("value"!==s.toLowerCase())return!1;e.uniqueValueInfos.forEach((function(e){var t,n=null==e||null==(t=e.symbol)?void 0:t.color;n&&c.push([parseInt(""+e.value,10)].concat(n))}))}if(0===c.length)return!1;var h=Object(f.c)({colormap:c});return this.lookup={rendererJSON:e,colormapLut:h},this.canRenderInWebGL=!0,!0}},{key:"_updateColormapRenderer",value:function(e){if(!function(e){var t=e.bandCount,n=e.colormap;return Object(i.k)(n)&&n.length&&1===t}(this.rasterInfo))return!1;var t=e.colormapInfos.map((function(e){return[e.value].concat(e.color)})).sort((function(e,t){return e[0]-t[0]}));if(!t||0===t.length)return!1;var n=Object(f.c)({colormap:t});return this.lookup={rendererJSON:e,colormapLut:n},this.canRenderInWebGL=!0,!0}},{key:"_updateShadedReliefRenderer",value:function(e){if(!function(e){return"elevation"===e.dataType}(this.rasterInfo))return!1;if(e.colorRamp){for(var t=Object(l.b)(e.colorRamp,256,!0),n=Object(f.c)({colormap:t}),r=[],i=n.indexedColormap,a=0;a<i.length;a+=4){var o=Object(c.b)({r:i[a],g:i[a+1],b:i[a+2]});r.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:n,hsvMap:r}}else this.lookup=null;return this.canRenderInWebGL=!0,!0}},{key:"_updateClassBreaksRenderer",value:function(e){var t=["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType)>-1,n=e.classBreakInfos;if(null==n||!n.length)return!1;var r=n.sort((function(e,t){return e.classMaxValue-t.classMaxValue})),i=r[r.length-1],a=e.minValue;if(!t){for(var o=[],s=0;s<r.length;s++){var u;o.push({value:null!=(u=r[s].classMinValue)?u:a,mappedColor:r[s].symbol.color}),a=r[s].classMaxValue}return o.push({value:i.classMaxValue,mappedColor:i.symbol.color}),this.lookup={rendererJSON:e,remapLut:o},this.canRenderInWebGL=!1,!0}var c=[];a=Math.floor(e.minValue);for(var l=0;l<r.length;l++){for(var h=r[l],p=a;p<h.classMaxValue;p++)c.push([p].concat(h.symbol.color));a=Math.ceil(h.classMaxValue)}i.classMaxValue===a&&c.push([i.classMaxValue].concat(i.symbol.color));var d=Object(f.c)({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:d},this.canRenderInWebGL=!0,!0}},{key:"_isHistogramRequired",value:function(e){return"percentClip"===e||"histogramEqualization"===e}},{key:"_updateStretchRenderer",value:function(e){var t=e.stretchType,n=e.dra;if(!("none"===t||e.statistics||this.rasterInfo.statistics||n))return!1;var r=Object(i.q)(e.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(e.stretchType)||null!=r&&r.length||n||(t="minMax");var a=e.gamma,o=e.useGamma,s=e.colorRamp,u=this.rasterInfo.pixelType,c=!n&&["u8","u16","s8","s16"].indexOf(u)>-1;if("histogramEqualization"===t){var h=r.map((function(e){return Object(f.d)(e)}));this.lookup={rendererJSON:e,histogramLut:h}}else if(c){var p=this.getStretchCutoff(e),d=Object(f.e)(Nt(Nt({pixelType:u},p),{},{gamma:o?a:null}));this.lookup={rendererJSON:e,stretchLut:d}}if(s){var v=Object(l.b)(s,256,!0);this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=Object(f.c)({colormap:v}),this.lookup.rendererJSON=e}return this.canRenderInWebGL=!0,!0}},{key:"getStretchCutoff",value:function(e,t,n,r){var a,o,s,u,c=e.stretchType;if(e.dra)if("minMax"===c&&t.statistics)o=t.statistics.map((function(e){return[e.minValue,e.maxValue,0,0]}));else{var l=Object(f.g)(t);o=l.statistics,s=l.histograms}else o=(null==(u=e.statistics)?void 0:u.length)>0?e.statistics:Object(i.q)(this.rasterInfo.statistics),s=e.histograms||Object(i.q)(this.rasterInfo.histograms);!this._isHistogramRequired(c)||null!=(a=s)&&a.length||(c="minMax");var h,p,d,v,y,g,m,w,O,j,_,x,k=o||s?(o||s).length:this.rasterInfo.bandCount,S=[],M=[];switch(o&&!Array.isArray(o[0])&&(o=o.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),c){case"none":var I=b[this.rasterInfo.pixelType]||b.f32;for(w=0;w<k;w++)S[w]=I[0],M[w]=I[1];break;case"minMax":for(w=0;w<k;w++)S[w]=o[w][0],M[w]=o[w][1];break;case"standardDeviation":for(w=0;w<k;w++)S[w]=o[w][2]-e.numberOfStandardDeviations*o[w][3],M[w]=o[w][2]+e.numberOfStandardDeviations*o[w][3],S[w]<o[w][0]&&(S[w]=o[w][0]),M[w]>o[w][1]&&(M[w]=o[w][1]);break;case"histogramEqualization":for(w=0;w<k;w++)S[w]=s[w].min,M[w]=s[w].max;break;case"percentClip":for(w=0;w<s.length;w++){for(h=s[w],y=new Uint32Array(h.size),v=h.counts,d=0,p=(h.max-h.min)/h.size,m=-.5===h.min&&1===p?.5:0,O=0;O<h.size;O++)d+=v[O],y[O]=d;for(g=e.minPercent*d/100,O=0;O<h.size;O++)if(y[O]>g){S[w]=h.min+p*(O+m);break}for(g=(1-e.maxPercent/100)*d,O=h.size-2;O>=0;O--)if(y[O]<g){M[w]=h.min+p*(O+2-m);break}}break;default:for(w=0;w<k;w++)S[w]=o[w][0],M[w]=o[w][1]}return"histogramEqualization"===c?(_=s[0].size||256,j=0,r&&(x=s.map((function(e){return Object(f.d)(e)})))):(_=e.max||255,j=e.min||0),this.getSelectedBandCutoffs({minCutOff:S,maxCutOff:M,outMax:_,outMin:j,histogramLut:x},n)}},{key:"getSelectedBandCutoffs",value:function(e,t){if(null==t||0===t.length)return e;var n=Math.max.apply(null,t),r=e.minCutOff,i=e.maxCutOff,a=e.outMin,o=e.outMax,s=e.histogramLut;return r.length===t.length||r.length<=n?e:{minCutOff:t.map((function(e){return r[e]})),maxCutOff:t.map((function(e){return i[e]})),histogramLut:s?t.map((function(e){return s[e]})):null,outMin:a,outMax:o}}},{key:"generateStretchWebGLParams",value:function(e,t,n){var r,i=null,a=null,o=this.lookup&&this.lookup.colormapLut;t.colorRamp&&o&&(i=o.indexedColormap,a=o.offset),"histogramEqualization"===t.stretchType&&(t=Nt(Nt({},t),{},{stretchType:"minMax"}));var s=t.gamma,u=!!(t.useGamma&&s&&s.some((function(e){return 1!==e}))),c=this.getStretchCutoff(t,e,n),l=c.minCutOff,h=c.maxCutOff,f=c.outMin,p=c.outMax,d=null==(r=e)?void 0:r.getPlaneCount();2===d&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]);var v,y=Math.min(3,(null==n?void 0:n.length)||d||this.rasterInfo.bandCount),b=new Float32Array(y),g=i||u?1:255;for(v=0;v<y;v++)b[v]=(p-f)/(h[v]-l[v])/g;var m=new Float32Array(y);if(u)for(v=0;v<y;v++)m[v]=s[v]>1?s[v]>2?6.5+Math.pow(s[v]-2,2.5):6.5+100*Math.pow(2-s[v],4):1;return{bandCount:y,outMin:f/g,outMax:p/g,minCutOff:l,maxCutOff:h,factor:b,useGamma:u,gamma:u?s:[1,1,1],gammaCorrection:u?m:[1,1,1],colormap:i,colormapOffset:a,type:"stretch"}}},{key:"generateShadedReliefWebGLParams",value:function(e,t,n){var r,a,o,s=null,u=null,c=this.lookup&&this.lookup.colormapLut;e.colorRamp&&c&&(s=c.indexedColormap,u=c.offset);var l=v(Nt(Nt({},e),{},{isGCS:t,resolution:n})),h=null==(r=Object(i.q)(this.rasterInfo.statistics))?void 0:r[0];return Nt(Nt({},l),{},{minValue:null!=(a=h.min)?a:0,maxValue:null!=(o=h.max)?o:8e3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:s,colormapOffset:u})}},{key:"isValidPixelBlock",value:function(e){return!!(e&&e.pixels&&e.pixels.length>0&&0!==e.validPixelCount)}}]),n}(u.a);Object(r.a)([Object(o.b)({json:{write:!0}})],g.prototype,"rendererJSON",void 0),Object(r.a)([Object(o.b)({type:h.a,json:{write:!0}})],g.prototype,"rasterInfo",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],g.prototype,"lookup",void 0),Object(r.a)([Object(o.b)()],g.prototype,"canRenderInWebGL",void 0),g=Object(r.a)([Object(s.a)("esri.renderers.support.RasterSymbolizer")],g),t.a=g},"d+vO":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WYax")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).image=null,r.type="button",r}return Zt(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),n}(s.a);Object(i.a)([Object(a.b)()],u.prototype,"image",void 0),u=r=Object(i.a)([Object(o.a)("esri.support.Action.ActionButton")],u),t.a=u},d3n7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return h}));var r=n("nvBr"),i={main:new r.a([255,127,0]),selected:new r.a([255,255,255]),outline:new r.a([0,0,0,.5]),selectedOutline:new r.a([255,255,255]),hoverOutline:new r.a([255,255,255]),secondary:new r.a([255,255,255]),secondaryOutline:new r.a([100,100,100]),transparent:new r.a([0,0,0,0])};function a(e,t){if(t)for(var n in t)e[n]=t[n]}var o=function e(t){Wt(this,e),this.size=8,this.hoverSize=10,this.color=i.main,this.hoverColor=i.main,this.outlineColor=i.outline,this.hoverOutlineColor=i.hoverOutline,a(this,t)},s=function e(t){Wt(this,e),this.color=i.secondary,this.hoverColor=i.main,a(this,t)},u=function e(t){Wt(this,e),this.color=i.transparent,this.hoverColor=i.transparent,this.outlineColor=i.main,this.hoverOutlineColor=i.main,this.stagedColor=i.transparent,this.stagedOutlineColor=i.secondary,a(this,t)},c=function e(t){Wt(this,e),this.vertex=new o,this.midpoint=new o({color:i.secondary,outlineColor:i.secondaryOutline,size:6}),this.selected=new o({color:i.selected,hoverColor:i.selected,hoverOutlineColor:i.hoverOutline}),a(this,t)},l=function e(t){Wt(this,e),this.center=new o({color:i.secondaryOutline}),this.fill=new u,this.line=new s,this.vertex=new o({color:i.selected,outlineColor:i.main,hoverColor:i.selected,hoverOutlineColor:i.secondaryOutline}),a(this,t)},h=new(function(){return function e(t){Wt(this,e),this.reshapeGraphics=new c,this.transformGraphics=new l,a(this,t)}}())},dCrW:function(e,t,n){"use strict";function r(e,t){for(var n=0,r="",i=0,a=0,o=e.length;n<o;)(i=(a=e[n++])>>4)<8?i=1:15===i?(i=4,a=(7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]):14===i?(i=3,a=(15&a)<<12|(63&e[n++])<<6|63&e[n++]):(i=2,a=(31&a)<<6|63&e[n++]),(0!==a||t)&&(r+=String.fromCharCode(a));return r}n.d(t,"a",(function(){return r}))},dDjh:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return h}));var r=n("GJyJ"),i=Object(r.e)(770,1,771,771),a=Object(r.f)(1,1),o=Object(r.f)(0,771);function s(e){return 2===e?null:1===e?o:a}function u(e){return 2===e?r.c:null}var c=5e5,l={factor:-1,units:-2};function h(e){return e?l:null}function f(e){return 3===e||2===e?513:515}},"dI/Q":function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var r=n("srIe"),i=n("ikTR"),a=n("zm0L"),o=n("Cy1f"),s=n("r0DZ"),u=n("AD+e"),c=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","vertexAttrsUpdated"],l=n("7Nfj"),h=n("5DEt"),f=n("0Kx6"),p=n("EVMh"),d=function(){function e(){Wt(this,e),this.bounds=f.g.create(),this.halfSize=0,this.initFrom(null,null,0,0)}return Zt(e,[{key:"init",value:function(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}},{key:"initFrom",value:function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=Object(r.k)(t)?t:e.createEmptyNode(),Object(r.k)(n)&&f.g.copy(n,this.bounds),this.halfSize=i,this.depth=a,this}},{key:"advance",value:function(t){var n=this.node.children[t];n||(n=e.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;var r=_[t];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.bounds[3]=this.halfSize*k,this}},{key:"advanceTo",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}var r=this._childIndex(e);t&&t(this,r),this.advance(r)}}},{key:"isLeaf",value:function(){return null!=this.node.residents}},{key:"isTerminalFor",value:function(e){return e[3]>this.halfSize/2}},{key:"_childIndex",value:function(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}}],[{key:"createEmptyNode",value:function(){return{children:[null,null,null,null,null,null,null,null],terminals:new i.a({shrink:!0}),residents:new i.a({shrink:!0})}}},{key:"acquire",value:function(){return e._pool.acquire()}},{key:"release",value:function(t){e._pool.release(t)}},{key:"clearPool",value:function(){e._pool.prune()}}]),e}();function v(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function y(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function b(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function g(e,t){return!f.c.intersectsSphere(t,e)}function m(e,t,n,r){if(1===t){var i=n(e[0]);f.g.copy(i,r)}else{T[0]=1/0,T[1]=1/0,T[2]=1/0,A[0]=-1/0,A[1]=-1/0,A[2]=-1/0;for(var a=0;a<t;a++){var o=n(e[a]);j(o[3])&&(v(T,o),y(A,o))}Object(h.h)(r,T,A,.5),r[3]=Math.max(A[0]-T[0],A[1]-T[1],A[2]-T[2])/2}}function w(e,t){for(var n=1/0,r=null,i=0;i<8;++i){var a=O(e,t,x[i]);a<n&&(n=a,r=x[i])}return r}function O(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function j(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}d._pool=new l.a(d);var _=[Object(o.g)(-1,-1,-1),Object(o.g)(1,-1,-1),Object(o.g)(-1,1,-1),Object(o.g)(1,1,-1),Object(o.g)(-1,-1,1),Object(o.g)(1,-1,1),Object(o.g)(-1,1,1),Object(o.g)(1,1,1)],x=[Object(o.g)(-1,-1,-1),Object(o.g)(-1,-1,1),Object(o.g)(-1,1,-1),Object(o.g)(-1,1,1),Object(o.g)(1,-1,-1),Object(o.g)(1,-1,1),Object(o.g)(1,1,-1),Object(o.g)(1,1,1)],k=Math.sqrt(3),S=[null],M=f.g.create(),I=Object(o.e)(),T=Object(o.e)(),A=Object(o.e)(),C=new i.a,E=f.g.create(),P=f.g.create(),R=f.g.create(),D=f.g.create(),L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],N=new i.a,F=[0,0,0,0,0,0,0,0],z=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Wt(this,n),(r=t.call(this)).apiLayerUid=u,r.type=0,r.events=new a.a,r.isSliceable=!1,r._objects=new i.a,r._stageHandles=new s.a,r.apiLayerUid=u,r.group=(e=e||{}).group||"",r.isVisible=null==e.isVisible||e.isVisible,r.isPickable=null==e.isPickable||e.isPickable,r.translation=e.translation?Object(o.d)(e.translation):Object(o.e)(),r}return Zt(n,[{key:"destroy",value:function(){this.detachStage(),this._stage=null}},{key:"attachStage",value:function(e){var t=this;this.detachStage(),this._stage=e;var n,r=Vt(c);try{var i=function(){var r=n.value;t._stageHandles.add(t.events.on(r,(function(t){return e.handleEvent(r,t)})))};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}},{key:"detachStage",value:function(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}},{key:"getObjectIds",value:function(){return this._objects.map((function(e){return e.id}))}},{key:"getObjects",value:function(){return this._objects}},{key:"add",value:function(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),Object(r.k)(this._octree)&&this._octree.add([e])}},{key:"remove",value:function(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),Object(r.k)(this._octree)&&this._octree.remove([e]))}},{key:"addMany",value:function(e){this._objects.pushArray(e);var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){t.value.parentLayer=this}}catch(i){n.e(i)}finally{n.f()}this.events.emit("layerObjectsAdded",{layer:this,objects:e}),Object(r.k)(this._octree)&&this._octree.add(e)}},{key:"removeMany",value:function(e){var t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){var n,i=Vt(t);try{for(i.s();!(n=i.n()).done;){n.value.parentLayer=null}}catch(a){i.e(a)}finally{i.f()}this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),Object(r.k)(this._octree)&&this._octree.remove(t)}}},{key:"commit",value:function(){Object(r.k)(this._stage)&&this._stage.processDirtyLayer(this.id)}},{key:"notifyObjectBBChanged",value:function(e,t){Object(r.k)(this._octree)&&this._octree.update(e,t)}},{key:"getSpatialQueryAccelerator",value:function(){return Object(r.j)(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}},{key:"shaderTransformationChanged",value:function(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}},{key:"invalidateSpatialQueryAccelerator",value:function(){this._octree=Object(r.e)(this._octree)}},{key:"_createOctree",value:function(){this._octree=new(function(){function e(t,n){Wt(this,e),this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new d,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}return Zt(e,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}},{key:"destroy",value:function(){this._degenerateObjects.clear(),d.clearPool(),S[0]=null,C.prune(),N.prune()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);for(var n=d.acquire(),r=0;r<t;r++){var i=e[r];this._isDegenerate(i)?this._degenerateObjects.add(i):(n.init(this._root),this._add(i,n))}d.release(n)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;var n,i=d.acquire(),a=Vt(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=Object(r.k)(t)?t:f.g.copy(this._objectToBoundingSphere(o),E);j(s[3])?(i.init(this._root),this._remove(o,s,i)):this._degenerateObjects.delete(o)}}catch(u){a.e(u)}finally{a.f()}d.release(i),this._shrink()}},{key:"update",value:function(e,t){if(j(t[3])||!this._isDegenerate(e)){var n=function(e){return S[0]=e,S}(e);this.remove(n,t),this.add(n)}}},{key:"forEachAlongRay",value:function(e,t,n){var r=this,i=f.f.wrap(e,t);this._forEachNode(this._root,(function(e){if(!r._intersectsNode(i,e))return!1;var t=e.node;return t.terminals.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),!0}))}},{key:"forEachAlongRayWithVerticalOffset",value:function(e,t,n,r){var i=this,a=f.f.wrap(e,t);this._forEachNode(this._root,(function(e){if(!i._intersectsNodeWithOffset(a,e,r))return!1;var t=e.node;return t.terminals.forAll((function(e){i._intersectsObjectWithOffset(a,e,r)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){i._intersectsObjectWithOffset(a,e,r)&&n(e)})),!0}))}},{key:"forEach",value:function(e){this._forEachNode(this._root,(function(t){var n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}},{key:"forEachDegenerateObject",value:function(e){this._degenerateObjects.forEach(e)}},{key:"findClosest",value:function(e,t,n,r,i){return this._findClosest(e,"front-to-back"===t?1:-1,n,r,i)}},{key:"forEachInDepthRange",value:function(e,t,n,r,i,a,o,s){this._forEachInDepthRange(e,t,"front-to-back"===n?1:-1,r,i,a,o,s)}},{key:"forEachNode",value:function(e){this._forEachNode(this._root,(function(t){return e(t.node,t.bounds,t.halfSize)}))}},{key:"_intersectsNode",value:function(e,t){return b(t.bounds,2*-t.halfSize,T),b(t.bounds,2*t.halfSize,A),Object(p.i)(e.origin,e.direction,T,A)}},{key:"_intersectsNodeWithOffset",value:function(e,t,n){return b(t.bounds,2*-t.halfSize,T),b(t.bounds,2*t.halfSize,A),n.applyToMinMax(T,A),Object(p.i)(e.origin,e.direction,T,A)}},{key:"_intersectsObject",value:function(e,t){var n=this._objectToBoundingSphere(t);return!(n[3]>0)||f.g.intersectsRay(n,e)}},{key:"_intersectsObjectWithOffset",value:function(e,t,n){var r=this._objectToBoundingSphere(t);return!(r[3]>0)||f.g.intersectsRay(n.applyToBoundingSphere(r),e)}},{key:"_forEachNode",value:function(e,t){for(var n=d.acquire().init(e),r=[n];0!==r.length;){if(t(n=r.pop())&&!n.isLeaf())for(var i=0;i<n.node.children.length;i++)n.node.children[i]&&r.push(d.acquire().init(n).advance(i));d.release(n)}}},{key:"_forEachNodeDepthOrdered",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=d.acquire().init(e),a=[i];for(function(e,t,n){if(!N.length)for(var r=0;r<8;++r)N.push({index:0,distance:0});for(var i=0;i<8;++i){var a=_[i];N.data[i].index=i,N.data[i].distance=O(e,t,a)}N.sort((function(e,t){return e.distance-t.distance}));for(var o=0;o<8;++o)n[o]=N.data[o].index}(n,r,F);0!==a.length;){if(t(i=a.pop())&&!i.isLeaf())for(var o=7;o>=0;--o){var s=F[o];s>=i.node.children.length||i.node.children[s]&&a.push(d.acquire().init(i).advance(s))}d.release(i)}}},{key:"_findClosest",value:function(e,t,n,r,i){var a=this,o=1/0,s=1/0,u=null,c=w(e,t),l=0,p=function(i){if(++l,!r||r(i)){var c=a._objectToBoundingSphere(i);if(!n||!g(c,n)){var h=O(e,t,f.g.getCenter(c)),p=h-c[3];p<o&&(o=p,s=h+c[3],u=i)}}};return this._forEachNodeDepthOrdered(this._root,(function(r){if(null!=i&&l>=i)return!1;if(n&&g(r.bounds,n))return!1;if(Object(h.d)(I,c,r.halfSize),Object(h.e)(I,I,r.bounds),O(e,t,I)>s)return!1;var a=r.node;return a.terminals.forAll((function(e){p(e)})),null!==a.residents&&a.residents.forAll((function(e){p(e)})),!0}),e,t),u}},{key:"_forEachInDepthRange",value:function(e,t,n,r,i,a,o,s){var u=this,c=-1/0,l=1/0,p={setRange:function(e){1===n?(c=Math.max(c,e.near),l=Math.min(l,e.far)):(c=Math.max(c,-e.far),l=Math.min(l,-e.near))}};p.setRange(r);var d=O(t,n,e),v=w(t,n),y=w(t,-1*n),b=0,m=function(e){if(++b,!o||o(e)){var r=u._objectToBoundingSphere(e),s=f.g.getCenter(r),h=O(t,n,s)-d;h-r[3]>l||h+r[3]<c||a&&g(r,a)||i(e,p)}};this._forEachNodeDepthOrdered(this._root,(function(e){if(null!=s&&b>=s)return!1;if(a&&g(e.bounds,a))return!1;if(Object(h.d)(I,v,e.halfSize),Object(h.e)(I,I,e.bounds),O(t,n,I)-d>l)return!1;if(Object(h.d)(I,y,e.halfSize),Object(h.e)(I,I,e.bounds),O(t,n,I)-d<c)return!1;var r=e.node;return r.terminals.forAll((function(e){m(e)})),null!==r.residents&&r.residents.forAll((function(e){m(e)})),!0}),t,n)}},{key:"_remove",value:function(e,t,n){C.clear();var r=n.advanceTo(t,(function(e,t){C.push(e.node),C.push(t)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(e),0===r.length)for(var i=C.length-2;i>=0&&this._purge(C.data[i],C.data[i+1]);i-=2);}},{key:"_nodeIsEmpty",value:function(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}},{key:"_purge",value:function(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new i.a({shrink:!0})),!0)}},{key:"_add",value:function(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}},{key:"_split",value:function(e){var t=e.node.residents;e.node.residents=null;for(var n=0;n<t.length;n++){var r=d.acquire().init(e);this._add(t.getItemAt(n),r),d.release(r)}}},{key:"_grow",value:function(e,t){var n=this;if(0!==t&&(m(e,t,(function(e){return n._objectToBoundingSphere(e)}),P),j(P[3])&&!this._fitsInsideTree(P)))if(this._nodeIsEmpty(this._root.node))f.g.copy(P,this._root.bounds),this._root.halfSize=1.25*P[3];else{var r=this._rootBoundsForRootAsSubNode(P);this._placingRootViolatesMaxDepth(r)?this._rebuildTree(P,r):this._growRootAsSubNode(r),d.release(r)}}},{key:"_rebuildTree",value:function(e,t){var n=this;Object(h.j)(R,t.bounds),R[3]=t.halfSize,m([e,R],2,(function(e){return e}),D);var r=d.acquire().init(this._root);this._root.initFrom(null,D,1.25*D[3]),this._forEachNode(r,(function(e){return n.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&n.add(e.node.residents.data,e.node.residents.length),!0})),d.release(r)}},{key:"_placingRootViolatesMaxDepth",value:function(e){var t=this,n=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,r=0;return this._forEachNode(this._root,(function(e){return(r=Math.max(r,e.depth))+n<=t._maximumDepth})),r+n>this._maximumDepth}},{key:"_rootBoundsForRootAsSubNode",value:function(e){for(var t=e[3],n=e,r=-1/0,i=this._root.bounds,a=this._root.halfSize,o=0;o<3;o++){var s=n[o]+t-(i[o]+a),u=Math.max(0,Math.ceil((i[o]-a-(n[o]-t))/(2*a))),c=Math.max(0,Math.ceil(s/(2*a)))+1,l=Math.pow(2,Math.ceil(Math.log(u+c)*Math.LOG2E));r=Math.max(r,l),L[o].min=u,L[o].max=c}for(var h=0;h<3;h++){var f=L[h].min,p=L[h].max,v=(r-(f+p))/2;f+=Math.ceil(v),p+=Math.floor(v),M[h]=i[h]-a-f*a*2+(p+f)*a}return M[3]=r*a*k,d.acquire().initFrom(null,M,r*a,0)}},{key:"_growRootAsSubNode",value:function(e){var t=this._root.node;Object(h.j)(P,this._root.bounds),P[3]=this._root.halfSize,this._root.init(e),e.advanceTo(P,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}},{key:"_shrink",value:function(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}},{key:"_findShrinkIndex",value:function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,n=0,r=0;r<t.length&&null==e;)e=t[n=r++];for(;r<t.length;)if(t[r++])return-1;return n}},{key:"_isDegenerate",value:function(e){return!j(this._objectToBoundingSphere(e)[3])}},{key:"_fitsInsideTree",value:function(e){var t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}]),e}())((function(e){return e.getBounds()})),this._octree.add(this._objects.data,this._objects.length)}}]),n}(u.a)},dL0i:function(e,t,n){"use strict";function r(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}n.d(t,"a",(function(){return r}))},dOLD:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n("+opI");function i(e){return"point"===e||"multipoint"===e||"polyline"===e||"polygon"===e}var a=Object(r.b)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),o=Object(r.b)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},dTMb:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=n("Cduq"),l=n("zlDU"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),f=n("YAUP"),p=n("4bvo"),d=n("qVey"),v=n("xSgX"),y=n("OL/Y"),b=n("Mzq3"),g=h.a.ofType({base:null,key:"type",typeMap:{icon:f.a,object:p.a,text:d.a}}),m=h.a.ofType({base:null,key:"type",typeMap:{icon:f.a,object:p.a}}),w=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).verticalOffset=null,r.callout=null,r.symbolLayers=new g,r.type="point-3d",r}return Zt(n,[{key:"writeSymbolLayers",value:function(e,t,n,r){var i=e.filter((function(e){return"text"!==e.type}));if(r&&r.messages&&i.length<e.length){var a=e.find((function(e){return"text"===e.type}));r.messages.push(new l.a("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a}))}t[n]=i.map((function(e){return e.write({},r)})).toArray()}},{key:"supportsCallout",value:function(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;var e,t=Vt(this.symbolLayers.items);try{for(t.s();!(e=t.n()).done;){switch(e.value.type){case"icon":case"text":case"object":continue;default:return!1}}}catch(n){t.e(n)}finally{t.f()}return!0}},{key:"hasVisibleCallout",value:function(){return Object(y.b)(this)}},{key:"hasVisibleVerticalOffset",value:function(){return Object(y.c)(this)}},{key:"clone",value:function(){return new r({verticalOffset:Object(a.a)(this.verticalOffset),callout:Object(a.a)(this.callout),styleOrigin:Object(a.a)(this.styleOrigin),symbolLayers:Object(a.a)(this.symbolLayers),thumbnail:Object(a.a)(this.thumbnail)})}}],[{key:"fromSimpleMarkerSymbol",value:function(e){return new r({symbolLayers:[f.a.fromSimpleMarkerSymbol(e)]})}},{key:"fromPictureMarkerSymbol",value:function(e){return new r({symbolLayers:[f.a.fromPictureMarkerSymbol(e)]})}},{key:"fromCIMSymbol",value:function(e){if(e.data&&e.data.symbol){var t=e.data.symbol;if("CIMPointSymbol"===t.type&&t.callout)return new r({symbolLayers:[f.a.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new r({symbolLayers:[f.a.fromCIMSymbol(e)]})}},{key:"fromTextSymbol",value:function(e){return new r({symbolLayers:[d.a.fromTextSymbol(e)]})}}]),n}(v.a);Object(i.a)([Object(o.b)({type:b.a,json:{write:!0}})],w.prototype,"verticalOffset",void 0),Object(i.a)([Object(o.b)(y.a)],w.prototype,"callout",void 0),Object(i.a)([Object(o.b)({type:g,json:{type:m,origins:{"web-scene":{type:m}}}})],w.prototype,"symbolLayers",void 0),Object(i.a)([Object(c.a)("web-scene","symbolLayers")],w.prototype,"writeSymbolLayers",null),Object(i.a)([Object(s.a)({PointSymbol3D:"point-3d"},{readOnly:!0})],w.prototype,"type",void 0),w=r=Object(i.a)([Object(u.a)("esri.symbols.PointSymbol3D")],w),t.a=w},dV4Z:function(e,t,n){"use strict";function r(e){return function(t,n){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:n})}}n.d(t,"a",(function(){return r}))},dXfX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return a})),n.d(t,"m",(function(){return g}));var r=n("QhKk");function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function c(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function l(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function h(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function p(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function d(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function v(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o),e}function y(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function b(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}function g(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function m(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function w(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(n-s)<=r.a*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.a*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.a*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-l)<=r.a*Math.max(1,Math.abs(o),Math.abs(l))}Object.freeze({__proto__:null,copy:i,set:a,add:o,subtract:s,multiply:u,divide:c,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:l,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},distance:h,squaredDistance:f,length:p,squaredLength:d,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:v,dot:y,lerp:b,random:function(e,t){var n,i,a,o,s,u;t=t||1;do{s=(n=2*Object(r.b)()-1)*n+(i=2*Object(r.b)()-1)*i}while(s>=1);do{u=(a=2*Object(r.b)()-1)*a+(o=2*Object(r.b)()-1)*o}while(u>=1);var c=Math.sqrt((1-s)/u);return e[0]=t*n,e[1]=t*i,e[2]=t*a*c,e[3]=t*o*c,e},transformMat4:g,transformQuat:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,h=c*i+u*r-o*a,f=c*a+o*i-s*r,p=-o*r-s*i-u*a;return e[0]=l*c+p*-o+h*-u-f*-s,e[1]=h*c+p*-s+f*-o-l*-u,e[2]=f*c+p*-u+l*-s-h*-o,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:m,equals:w,sub:s,mul:u,div:c,dist:h,sqrDist:f,len:p,sqrLen:d})},dZC4:function(e,t,n){"use strict";n.r(t),n.d(t,"hydratedAdapter",(function(){return u}));var r=n("SuVq"),i=n("OvF4"),a=n("V9wi"),o=n("Ehki"),s=n("UhwK"),u={convertToGEGeometry:function(e,t){if(null==t)return null;var n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){var i=e.hasZ(t),a=e.hasM(t),o=new r.a({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return i&&(o.z=e.getPointZ(t)),a&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,n){var r=new o.a({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){var r=new s.a({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){var r=new a.a({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){var r=e.hasZ(t),a=e.hasM(t),o=new i.a({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(r){var s=e.getZExtent(t);o.zmin=s.vmin,o.zmax=s.vmax}if(a){var u=e.getMExtent(t);o.mmin=u.vmin,o.mmax=u.vmax}return o.cache._geVersion=t,o}}},dg76:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var r=function(e){var t="https://edit.jornada.nmsu.edu/catalogs/esd/"+e.ecoclassid.substring(1,5)+"/"+e.ecoclassid;return'\n      <div class="pmlo-popup-content">\n        <p class="mt-2"><b>Map Unit Name</b></p>\n        <p>'.concat(e.muname,'</p>\n\n        <p class="mt-2"><b>Map Unit Dominant Component</b></p>\n        <p>').concat(e.compname,'</p>\n\n        <p class="mt-2"><b>Percent of Map Unit</b></p>\n        <p>').concat(e.comppct_r,'</p>\n\n        <p class="mt-2"><b>Taxonomic Classification</b></p>\n        <p>').concat(""!==e.taxclname?e.taxclname:"&mdash;",'</p>\n\n        <p class="mt-2"><b>A Horizon</b></p>\n        <p>').concat(""!==e.Horizon_A?e.Horizon_A:"&mdash;",'</p>\n\n        <p class="mt-2"><b>B Horizon</b></p>\n        <p>').concat(""!==e.Horizon_B?e.Horizon_B:"&mdash;",'</p>\n\n\n        <p class="mt-2"><b>Erosion Class</b></p>\n        <p>').concat(""!==e.erocl?e.erocl:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Drainage Class</b></p>\n        <p>').concat(""!==e.drclassdcd?e.drclassdcd:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Depth to Water Table (inches)</b></p>\n        <p>').concat(""!==e.wtdepannmin?e.wtdepannmin:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Hydric Rating</b></p>\n        <p>').concat(e.Hydric_Rating,'</p>\n\n        <p class="mt-2"><b>Flooding Frequency</b></p>\n        <p>').concat(""!==e.flodfreqdcd?e.flodfreqdcd:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Presence of Ponding</b></p>\n        <p>').concat(e.pondfreqprs,'</p>\n\n        <p class="mt-2"><b>Site Index Max Value</b></p>\n        <p>').concat(""!==e.si?e.si:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Site Index Max Value Species</b></p>\n        <p>').concat(""!==e.plantcomname?e.plantcomname:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Ecological Class ID</b></p>\n        <p>').concat(""!==e.ecoclassid?'<a href="'+t+'" target="_blank" rel="noopener noreferrer">'+e.ecoclassid+"</a>":"&mdash;",'</p>\n\n        <p class="mt-2"><b>Ecological Class</b></p>\n        <p>').concat(""!==e.ecoclassname?e.ecoclassname:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Const. Limit. - Haul Rds & Log Landings</b></p>\n        <p>').concat(e.CLRoadLndg,'</p>\n\n        <p class="mt-2"><b>Harvest Equip. Operability</b></p>\n        <p>').concat(e.HEquipOp,'</p>\n\n        <p class="mt-2"><b>Erosion Hazard - Off-Road/Trail</b></p>\n        <p>').concat(e.EroHzdORT,'</p>\n\n        <p class="mt-2"><b>Erosion Hazard - Road/Trail</b></p>\n        <p>').concat(e.EroHzdRT,'</p>\n\n        <p class="mt-2"><b>Soil Rutting Hazard</b></p>\n        <p>').concat(e.SoilRutHzd,'</p>\n\n        <p class="mt-2"><b>Suitability - Rds & Log Landings</b></p>\n        <p>').concat(e.LogLndg,'</p>\n\n        <p class="mt-2"><b>Suitability - Rds on Natural Surface</b></p>\n        <p>').concat(e.RoadSuitNS,'</p>\n\n        <p class="mt-2"><b>Potential for Seedling Mortality</b></p>\n        <p>').concat(e.SeedMortal,'</p>\n\n        <p class="mt-2"><b>Mechanical Site Preparation (Surface)</b></p>\n        <p>').concat(e.SitePrepS,'</p>\n\n        <p class="mt-2"><b>Mechanical Site Preparation (Deep)</b></p>\n        <p>').concat(e.SitePrepD,'</p>\n\n        <p class="mt-2"><b>Suitability for Machine Planting</b></p>\n        <p>').concat(e.MechPlant,'</p>\n\n        <p class="mt-2"><b>Suitability for Hand Planting</b></p>\n        <p>').concat(e.HandPlant,'</p>\n\n        <p class="mt-2"><b>Potential for Damage by Fire</b></p>\n        <p>').concat(e.FireDamage,'</p>\n\n        <p class="mt-2"><b>Survey Area Version</b></p>\n        <p>').concat(e.saversion,'</p>\n\n        <p class="mt-2"><b>Tabular Version</b></p>\n        <p>').concat(e.tabularversion,'</p>\n\n        <p class="mt-2"><b>Spatial Version</b></p>\n        <p>').concat(e.spatialversion,"</p>\n      </div>\n    ")},i=function(e){var t="https://edit.jornada.nmsu.edu/catalogs/esd/"+e.ecoclassid.substring(1,5)+"/"+e.ecoclassid;return'\n      <div class="pmlo-popup-content">\n        <p class="mt-2"><b>Map Unit Symbol</b></p>\n        <p>'.concat(e.musym,'</p>\n\n        <p class="mt-2"><b>Map Unit Name</b></p>\n        <p>').concat(e.muname,'</p>\n\n        <p class="mt-2"><b>Slope Gradient (%)</b></p>\n        <p>').concat(""!==e.slopegradwta?e.slopegradwta:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Potential Erosion Hazard</b></p>\n        <p>').concat(e.forpehrtdcp,'</p>\n\n        <p class="mt-2"><b>Flooding Frequency</b></p>\n        <p>').concat(e.flodfreqdcd,'</p>\n\n        <p class="mt-2"><b>Drainage Class</b></p>\n        <p>').concat(e.drclassdcd,'</p>\n\n        <p class="mt-2"><b>Hydric Rating (%)</b></p>\n        <p>').concat(e.hydclprs,'</p>\n\n        <p class="mt-2"><b>pH Top Horizon:</b></p>\n        <p>').concat(e.pH,'</p>\n\n        <p class="mt-2"><b>Ecological Class ID</b></p>\n        <p>').concat(""!==e.ecoclassid?'<a href="'+t+'" target="_blank" rel="noopener noreferrer">'+e.ecoclassid+"</a>":"&mdash;",'</p>\n\n        <p class="mt-2"><b>Ecological Class</b></p>\n        <p>').concat(""!==e.ecoclassname?e.ecoclassname:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Range Productivity (lb/ac/yr)</b></p>\n        <p>').concat(e.rpa,'</p>\n\n        <p class="mt-2"><b>Forest productivity (cuft/ac/yr)</b></p>\n        <p>').concat(e.fpa,'</p>\n\n        <p class="mt-2"><b>Site Index Max Value</b></p>\n        <p>').concat(""!==e.si?e.si:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Site Index Max Value Species</b></p>\n        <p>').concat(""!==e.plantcomname?e.plantcomname:"&mdash;",'</p>\n\n        <p class="mt-2"><b>Survey Area Version</b></p>\n        <p>').concat(e.saversion,'</p>\n\n        <p class="mt-2"><b>Tabular Version</b></p>\n        <p>').concat(e.tabularversion,'</p>\n\n        <p class="mt-2"><b>Spatial Version</b></p>\n        <p>').concat(e.spatialversion,"</p>\n      </div>\n    ")},a=function(e){var t="https://texasforestinfo.tamu.edu/mapmyproperty/";return'\n        <b>\n        <p class="mt-2 text-blue-500">'.concat(""!==e.VegTypePDF?'<a href="'+(t+e.VegTypePDF)+'" target="_blank" rel="noopener noreferrer">'+e.CommonName+"</a>":"&mdash;",'</p>\n      </b>\n        <br>\n        <p class="mt-2"><b>System</b></p>\n        <p>').concat(e.System,'</p>\n\n        <p class="mt-2"><b>Subsystem</b></p>\n        <p class="text-blue-500">').concat(""!==e.SubSysPDF?'<a href="'+(t+e.SubSysPDF)+'" target="_blank" rel="noopener noreferrer">'+e.SubSystem+"</a>":"&mdash;","</p>\n\n  ")},o=function(e){return' <p class="mt-2"><b>Rock Unit Name</b></p>\n  <p>'.concat(e.LONG_NM,'</p>\n\n  <p class="mt-2"><b>Rock Unit Code</b></p>\n  <p>').concat(e.ROCKUNIT_CD,'</p>\n\n  <p class="mt-2"><b>Sheet Name</b></p>\n  <p>').concat(e.SHEET_NM,'</p>\n\n  <p class="mt-2"><b>Period</b></p>\n  <p>').concat(e.Period,'</p>\n\n  <p class="mt-2"><b>Epoch or Series</b></p>\n  <p>').concat(e.Epoch_or_Series,'</p>\n\n  <p class="mt-2"><b>Group</b></p>\n  <p>').concat(e.Group_,'</p>\n\n  <p class="mt-2"><b>Description</b></p>\n  <p>').concat(e.Description,'</p>\n\n  <p class="mt-2"><b>Geo-Order Number</b></p>\n  <p>').concat(e.GEOORDER_NO,"</p>\n  ")}},"dk/s":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("sq3C"),i=function(e,t){var n=Object(r.d)(t),i=function(e,t,n){var r="";switch(t){case"water":r='<svg version="1.1" id="'.concat(e,'"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path stroke="black" stroke-width="1" fill="').concat(n,'" d="M26.86,8.98c-0.5-1.97-3.15-2.06-3.72,0c-2.98,10.81-9.36,13.74-9.36,21.36c0,6.74,5.02,12.2,11.22,12.2\n     s11.22-5.46,11.22-12.2C36.22,22.69,29.86,19.84,26.86,8.98z M25,38.15c-3.94,0-7.14-3.44-7.14-7.68c0-0.6,0.46-1.1,1.02-1.1\n     c0.56,0,1.02,0.49,1.02,1.1c0,3.03,2.28,5.48,5.1,5.48c0.56,0,1.02,0.49,1.02,1.1C26.02,37.65,25.57,38.15,25,38.15z"/>\n   </svg>');break;case"warning":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path stroke="black" stroke-width="1" fill="').concat(n,'" d="M43.96,35.88c1.2,2.07-0.31,4.66-2.69,4.66H10.12c-2.4,0-3.89-2.59-2.69-4.66L23,8.97c1.2-2.07,4.2-2.06,5.4,0\n     L43.96,35.88L43.96,35.88z M25.69,30.32c-1.64,0-2.98,1.33-2.98,2.97c0,1.65,1.34,2.97,2.98,2.97c1.64,0,2.98-1.33,2.98-2.97\n     C28.67,31.65,27.35,30.32,25.69,30.32z M22.86,19.63l0.49,8.79c0.02,0.41,0.37,0.73,0.78,0.73h3.15c0.42,0,0.75-0.32,0.78-0.73\n     l0.49-8.79c0.02-0.44-0.33-0.81-0.78-0.81h-4.11C23.19,18.81,22.83,19.18,22.86,19.63L22.86,19.63z"/>\n   </svg>\n   ');break;case"triangle":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <polygon stroke="black" stroke-width="1" fill="').concat(n,'"  points="24.81,8.5 8.5,41.5 41.5,41.5 "/>\n   </svg>');break;case"tree":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path stroke="black" stroke-width="1" fill="').concat(n,'" d="M36.63,34.56l-4.89-7.06h1.87c0.55,0,1.04-0.39,1.27-1.01c0.23-0.62,0.16-1.34-0.2-1.87l-4.78-7.09h1.77\n     c0.56,0,1.05-0.42,1.27-1.07c0.21-0.64,0.11-1.37-0.26-1.87l-6.74-9.17c-0.37-0.5-1.05-0.5-1.42,0l-6.74,9.17\n     c-0.38,0.5-0.48,1.24-0.26,1.87c0.22,0.65,0.71,1.07,1.27,1.07h1.77l-4.78,7.08c-0.36,0.53-0.43,1.25-0.2,1.87\n     c0.23,0.62,0.71,1.01,1.27,1.01h1.87l-4.89,7.06c-0.37,0.53-0.45,1.26-0.22,1.89c0.23,0.62,0.73,1.03,1.28,1.03h8.36v1.91\n     l-1.85,3.78c-0.32,0.83,0.15,1.8,0.87,1.8h5.87c0.72,0,1.2-0.97,0.87-1.8l-1.85-3.78v-1.91h8.36c0.55,0,1.05-0.41,1.28-1.03\n     C37.08,35.81,37,35.09,36.63,34.56z"/>\n   </svg>\n   ');break;case"square":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <rect stroke="black" stroke-width="1" fill="').concat(n,'" x="10.55" y="10.88"  width="30" height="30"/>\n   </svg>');break;case"pin":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path fill="').concat(n,'" d="M30.65,22l-0.65-8.5h2.25c0.71,0,1.28-0.78,1.28-1.72V8.32c0-0.95-0.57-1.72-1.28-1.72H17.73\n     c-0.71,0-1.28,0.78-1.28,1.72v3.45c0,0.95,0.57,1.72,1.28,1.72h2.25L19.33,22c-2.59,1.62-4.58,4.53-4.58,8.18\n     c0,0.95,0.57,1.72,1.28,1.72h7.26v7.47c0,0.09,0.02,0.18,0.05,0.26l1.28,3.45c0.16,0.42,0.61,0.42,0.77,0l1.28-3.45\n     c0.03-0.08,0.05-0.17,0.05-0.26V31.9h7.26c0.71,0,1.28-0.78,1.28-1.72C35.23,26.5,33.2,23.61,30.65,22z"/>\n   </svg>\n   ');break;case"parking":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path stroke="black" stroke-width="1" fill="').concat(n,'" d="M36.84,9.33H13.16c-1.78,0-3.23,1.5-3.23,3.36v24.63c0,1.85,1.44,3.36,3.23,3.36h23.67\n     c1.78,0,3.23-1.5,3.23-3.36V12.68C40.06,10.83,38.62,9.33,36.84,9.33z M26.08,29.48h-3.23v3.36c0,0.61-0.48,1.12-1.08,1.12h-2.15\n     c-0.59,0-1.08-0.5-1.08-1.12V17.17c0-0.61,0.48-1.12,1.08-1.12h6.46c3.56,0,6.46,3.02,6.46,6.71S29.64,29.48,26.08,29.48z\n      M26.08,20.52h-3.23V25h3.23c1.18,0,2.15-1.01,2.15-2.24C28.23,21.53,27.26,20.52,26.08,20.52z"/>\n   </svg>');break;case"home":r='<svg version="1.1" id="'.concat(e,'"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path stroke="black" stroke-width="1"  fill="').concat(n,'" d="M24.55,17.13L13.82,28.39v12.14c0,0.66,0.42,1.18,0.93,1.18l6.53-0.02c0.51,0,0.92-0.54,0.92-1.18v-7.1\n     c0-0.66,0.42-1.18,0.93-1.18h3.73c0.52,0,0.93,0.53,0.93,1.18v7.09c0,0.66,0.42,1.18,0.93,1.19l0,0l6.52,0.02\n     c0.52,0,0.93-0.53,0.93-1.18V28.38L25.45,17.13C25.19,16.87,24.81,16.87,24.55,17.13L24.55,17.13z M41.51,24.78l-4.87-5.1V9.41\n     c0-0.49-0.31-0.89-0.7-0.89h-3.26c-0.38,0-0.7,0.4-0.7,0.89v5.38l-5.21-5.46c-1.03-1.08-2.52-1.08-3.55,0L8.48,24.78\n     c-0.3,0.31-0.34,0.87-0.09,1.25l0,0l1.49,2.3c0.24,0.38,0.68,0.43,0.99,0.12l0,0l13.7-14.36c0.26-0.26,0.63-0.26,0.89,0l13.7,14.36\n     c0.3,0.31,0.74,0.26,0.99-0.12l0,0l1.47-2.3C41.85,25.65,41.81,25.09,41.51,24.78L41.51,24.78L41.51,24.78z"/>\n   </svg>');break;case"gate":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <path stroke="black" stroke-width="1" fill="').concat(n,'" d="M42.74,32.7h-2.22V22.32h2.22c1.22,0,2.22-1.16,2.22-2.6s-0.99-2.6-2.22-2.6h-2.22v-5.19l-1.23-2.88\n     c-0.3-0.64-0.99-0.86-1.53-0.5c-0.18,0.12-0.33,0.29-0.43,0.5l-1.24,2.88v5.19h-4.43v-5.19l-1.23-2.88c-0.3-0.64-0.99-0.86-1.53-0.5\n     c-0.18,0.12-0.33,0.29-0.43,0.5l-1.24,2.88v5.19h-4.43v-5.19l-1.23-2.88c-0.3-0.64-0.99-0.86-1.53-0.5\n     c-0.18,0.12-0.33,0.29-0.43,0.5l-1.24,2.88v5.19h-4.43v-5.19l-1.23-2.88c-0.3-0.64-0.99-0.86-1.53-0.5\n     c-0.18,0.12-0.33,0.29-0.43,0.5l-1.24,2.88v5.19H7.26c-1.22,0-2.22,1.16-2.22,2.6s0.99,2.6,2.22,2.6h2.22V32.7H7.26\n     c-1.22,0-2.22,1.16-2.22,2.6s0.99,2.6,2.22,2.6h2.22v2.6c0,1.43,0.99,2.6,2.22,2.6s2.22-1.16,2.22-2.6v-2.6h4.43v2.6\n     c0,1.43,0.99,2.6,2.22,2.6c1.22,0,2.22-1.16,2.22-2.6v-2.6h4.43v2.6c0,1.43,0.99,2.6,2.22,2.6c1.22,0,2.22-1.16,2.22-2.6v-2.6h4.43\n     v2.6c0,1.43,0.99,2.6,2.22,2.6s2.22-1.16,2.22-2.6v-2.6h2.22c1.22,0,2.22-1.16,2.22-2.6S43.96,32.7,42.74,32.7z M13.91,32.7V22.32\n     h4.43V32.7H13.91z M22.78,32.7V22.32h4.43V32.7H22.78z M31.65,32.7V22.32h4.43V32.7H31.65z"/>\n   </svg>\n   ');break;case"flag":r='<svg version="1.1" id="'.concat(e,'" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n      x="0px" y="0px" viewBox="0 0 512 512"  xml:space="preserve">\n   <path stroke="black" stroke-width="10"  fill="').concat(n,'" d="M330.5,135.6c-39.8,0-72.6-26.6-122.6-26.6c-18.5,0-35.1,3.4-50.5,9.2c2.1-5.7,3-11.9,2.7-18c-1.3-21.8-18.6-39.2-39.7-40.1\n     C96.5,59,77,78.6,77,102.9c0,14.6,7,27.4,17.8,35.2v295.6c0,10.1,8,18.4,17.8,18.4h11.9c9.8,0,17.8-8.2,17.8-18.4v-72.3\n     c21-9.2,47.2-16.9,84.9-16.9c39.8,0,72.6,26.6,122.6,26.6c35.7,0,64.3-12.5,90.9-31.3c6.4-4.6,10.3-12.1,10.3-20.2V133.5\n     c0-17.9-18-29.8-33.8-22.2C391.8,123.5,360.5,135.6,330.5,135.6z"/>\n   </svg>');break;case"diamond":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <polygon stroke="black" stroke-width="1" fill="').concat(n,'"  points="6.58,26.5 23.49,7.5 41.58,23.5 24.67,42.5 "/>\n   </svg>');break;case"cross":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <g transform="translate(5.0,18.0) scale(0.100000,-0.100000)">\n     <path stroke="black" stroke-width="10" fill="').concat(n,'" d="M164.5,108.5V-26.75l-143.32,0.6l-0.21-82.08l143.73-0.6v-150.91h80.69v150.51l137.98-0.4l0.21,82.08\n       l-138.39,0.6V108.5H164.5z"/>\n   </g>\n   </svg>');break;case"circle":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <circle stroke="black" stroke-width="1" fill="').concat(n,'"  cx="25" cy="25" r="12.5"/>\n   </svg>');break;case"x":r='<svg version="1.1" id="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 50 50" xml:space="preserve">\n   <g transform="translate(13.0,22.0) scale(0.100000,-0.100000) rotate(45,0,0)">\n     <path  fill="').concat(n,'" d="M22.34,88.4l-1-146.12l-157.32-0.48l-1.01-88.67l157.72,0.48l-1.12-163.13l88.67,0.61l1.12,162.73l151.52,0.64\n       l1.01,88.67l-152.12-0.65l1.01,146.32L22.34,88.4z"/>\n   </g>\n   </svg>')}return r}(Math.random(),e,n);return"data:image/svg+xml;base64,"+window.btoa(i)}},dn0f:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return a}));for(var r=n("wSAH"),i=n("nYOO"),a=Object(r.a)("mac")?"Meta":"Ctrl",o={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"},s=48;s<58;s++)o[s]=String.fromCharCode(s);for(var u=1;u<25;u++)o[111+u]="F"+u;for(var c=65;c<91;c++)o[c]=[String.fromCharCode(c+32),String.fromCharCode(c)];function l(e){if(void 0!==e.key)return Object(i.a)(e);var t=o[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function h(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},e31P:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("srIe"),i=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._set=new Set,e}return Zt(n,[{key:"destroy",value:function(){Dt(en(n.prototype),"destroy",this).call(this),this._set=Object(r.o)(this._set)}},{key:"acquire",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=(e=Dt(en(n.prototype),"acquire",this)).call.apply(e,[this].concat(r));return this._set.delete(a),a}},{key:"release",value:function(e){e&&!this._set.has(e)&&(Dt(en(n.prototype),"release",this).call(this,e),this._set.add(e))}},{key:"_dispose",value:function(e){this._set.delete(e),Dt(en(n.prototype),"_dispose",this).call(this,e)}}]),n}(n("7Nfj").a)},eHpU:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("Gxlu")),u=n("sI4m"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="column-chart",r}return Zt(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:u.a.write}})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(o.a)("esri.popup.content.ColumnChartMediaInfo")],c),t.a=c},eSsm:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var r=n("9MzC");function i(e,t,n){return Object(r.j)(e.map((function(e,r){return t.apply(n,[e,r])})))}function a(e,t,n){return Object(r.j)(e.map((function(e,r){return t.apply(n,[e,r])}))).then((function(e){return e.map((function(e){return e.value}))}))}function o(e){return e.then((function(e){return{ok:!0,value:e}})).catch((function(e){return{ok:!1,error:e}}))}function s(e){return e.then((function(e){return{ok:!0,value:e}})).catch((function(e){return Object(r.t)(e),{ok:!1,error:e}}))}},eqZM:function(e,t,n){"use strict";n.d(t,"a",(function(){return kn})),n.d(t,"b",(function(){return Sn}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WBXD")),u=n("N5XI"),c=n("z5yp"),l=n("/CmD"),h=n("LE9a"),f=n("00eo"),p=(n("5sKF"),n("aelY")),d=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).items=new h.a,e._watchUpdatingTracking=new f.a,e._callbacks=new Map,e._projector=Object(p.a)(),e._hiddenProjector=Object(p.a)(),e}return Zt(n,[{key:"needsRender",get:function(){return this.items.length>0}},{key:"initialize",value:function(){var e=this,t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,(function(t){t.added.map((function(t){var n=function(){return t.render()};e._callbacks.set(t,n),e._projector.append(e.surface,n)})),t.removed.map((function(t){var n=e._projector.detach(e._callbacks.get(t));e.surface.removeChild(n.domNode),e._callbacks.delete(t)}))}))}},{key:"addItem",value:function(e){this.items.add(e)}},{key:"removeItem",value:function(e){this.items.remove(e)}},{key:"destroy",value:function(){var e=this;this.items.removeAll(),this._callbacks.forEach((function(t){return e._projector.detach(t)})),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}},{key:"render",value:function(){this._projector.renderNow()}},{key:"computeBoundingRect",value:function(e){var t=this._hiddenSurface,n=this._hiddenProjector,r=null,i=function(){return r=e.render()};n.append(t,i),n.renderNow();var a={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){var o=r.domNode.getBoundingClientRect();a.left=o.left,a.top=o.top,a.right=o.right,a.bottom=o.bottom}for(n.detach(i);t.firstChild;)t.removeChild(t.firstChild);return a}},{key:"overlaps",value:function(e,t){var n=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}},{key:"hasVisibleItems",get:function(){return this.items.some((function(e){return e.visible}))}},{key:"renderCanvas",value:function(e){if(this.items.some((function(e){return e.visible}))){var t=e.getContext("2d");t.save(),t.font="10px "+getComputedStyle(this.surface).fontFamily,this.items.forEach((function(e){t.save(),e.renderCanvas(t),t.restore()})),t.restore()}}}]),n}(l.a);Object(r.a)([Object(a.b)({readOnly:!0})],d.prototype,"surface",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],d.prototype,"items",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],d.prototype,"needsRender",null),Object(r.a)([Object(a.b)({readOnly:!0})],d.prototype,"_watchUpdatingTracking",void 0),Object(r.a)([Object(a.b)({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],d.prototype,"updating",void 0);var v=d=Object(r.a)([Object(o.a)("esri.views.overlay.ViewOverlay")],d),y=n("srIe"),b=n("Stxv"),g=n("Gj5k"),m=n("4gt3"),w=n("nYOO"),O=n("JV2H"),j=(n("G48n"),n("r0DZ")),_=n("5C/r"),x=n("cCpn"),k=n("h1D1"),S=n("dV4Z"),M=n("/quj"),I=n("Jv1m"),T=n("Ehpe"),A=n("J3K2"),C=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).renderNodeContent=function(t){return Object(A.b)(t)&&!t.destroyed?Object(I.a)("div",{key:t},t.render()):t instanceof HTMLElement?Object(I.a)("div",{key:t,bind:t,afterCreate:e._attachToNode}):Object(A.a)(t)?Object(I.a)("div",{key:t,bind:t.domNode,afterCreate:e._attachToNode}):null},e}return Zt(n,[{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),n}(e);return t=Object(r.a)([Object(o.a)("esri.widgets.Feature.ContentMixin")],t)},E=n("zlDU"),P=n("aql9"),R=n("jWBI"),D=n("tSEa"),L=n("yNaq"),N=n("kJYu"),F=n("s7YA"),z=n("wdpY"),V=n("RlM3"),G=n("IeLS"),U=n("iALD"),B=i.a.getLogger("esri.widgets.Feature.support.featureUtils"),q=/href=(""|'')/gi,H=/(\{([^\{\r\n]+)\})/g,W=/\'/g,J=/^\s*expression\//i,Z=/(\n)/gi,K=/[\u00A0-\u9999<>\&]/gim,Y=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,X=/^(?:mailto:|tel:)/,Q=Object(V.a)("short-date-short-time");function $(e){if(!Object(y.j)(e))return e.get("sourceLayer")||e.get("layer")}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","function"==typeof t?t.call(null,n):t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return!X.test(e.trim().toLowerCase())}function re(e,t){var n=function(e,t){if(!function(e){return J.test(e)}(t)||!e)return null;var n,r=t.replace(J,"").toLowerCase();return e.some((function(e){return e.name.toLowerCase()===r&&(n=e,!0)})),n}(t,null==e?void 0:e.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function ie(e,t){var n=ae(t,e);return n?n.name:e}function ae(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function oe(e){return(""+e).trim()}function se(e){var t=e.attributes,n=e.globalAttributes,r=e.layer,i=e.text,a=e.fieldInfoMap;return i?ue({formattedAttributes:n,template:le(i,Nt(Nt({},n),t),r),fieldInfoMap:a}):""}function ue(e){var t=e.formattedAttributes,n=e.template,r=e.fieldInfoMap;return oe(function(e){return e.replace(q,"")}(Object(F.c)(Object(F.c)(n,(function(e){return function(e,t){var n=t.get(e.toLowerCase());return"{".concat(n&&n.fieldName||e,"}")}(e,r)})),t)))}function ce(e,t){return e.replace(H,(function(e,n,r){var i=ae(t,r);return i?"{".concat(i.name,"}"):n}))}function le(e,t,n){var r=ce(e,n);return r?r.replace(Y,(function(e,n,r){return function(e,t,n){var r=(t=oe(t))&&"{"!==t[0];return Object(F.c)(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Nt({},e);return Object.keys(n).forEach((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[e];if("string"==typeof r){var i="%27",a=(n?encodeURIComponent(r):r).replace(W,i);t[e]=a}}(e,n,t)})),n}(n,r))}(e,n||r,t)})):r}function he(e,t){var n=t.fieldName,r=fe(t.fieldInfos,n),i=null==r?void 0:r.clone(),a=t.preventPlacesFormatting,o=ae(t.layer,n);if(i&&o&&"date"===o.type){var s=i.format||new U.a;s.dateFormat=s.dateFormat||"short-date-short-time",i.format=s}var u=i&&i.format;return"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){var n=Number(e);if(!isNaN(n))return n}return e}(e,u))||null==e||null==u?e:a?Object(G.b)(e,Nt(Nt({},Object(G.a)(u)),{},{minimumFractionDigits:0,maximumFractionDigits:20})):u.format(e)}function fe(e,t){if(e&&e.length&&t){var n,r=t.toLowerCase();return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r||(n=e,0))})),n}}function pe(e){var t=[];if(!e)return t;var n=e.fieldInfos,r=e.content;return n&&t.push.apply(t,Bt(n)),r&&Array.isArray(r)?(r.forEach((function(e){if("fields"===e.type){var n=e&&e.fieldInfos;n&&t.push.apply(t,Bt(n))}})),t):t}function de(e){return e.replace(K,(function(e){return"&#".concat(e.charCodeAt(0),";")}))}function ve(e){return"string"==typeof e?e.replace(Z,'<br class="esri-text-new-line" />'):e}function ye(e){var t=e.fieldInfos,n=e.attributes,r=e.layer,i=e.graphic,a=e.fieldInfoMap,o=e.relatedInfos,s=Nt({},n);return null==o||o.forEach((function(e){return function(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((function(n){return we({attributes:e,graphic:n,relatedInfo:t})})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((function(n){return we({attributes:e,graphic:n,relatedInfo:t})})))}(s,e)})),Object.keys(s).forEach((function(e){s[e]=function(e){var t=e.value,n=e.fieldName,r=e.fieldInfos,i=e.fieldInfoMap,a=e.layer,o=e.graphic;if(null==t)return"";var s=function(e){var t=e.fieldName,n=e.value,r=e.graphic,i=e.layer;if(me(t))return null;if(!i||"function"!=typeof i.getFieldDomain)return null;var a=i.getFieldDomain(t,{feature:r});return a&&"coded-value"===a.type?a.getName(n):null}({fieldName:n,value:t,graphic:o,layer:a});if(s)return s;var u=function(e){var t=e.fieldName,n=e.graphic,r=e.layer;if(me(t))return null;if(!r||"function"!=typeof r.getFeatureType)return null;var i=r.typeIdField;if(!i||t!==i)return null;var a=r.getFeatureType(n);return a?a.name:null}({fieldName:n,graphic:o,layer:a});if(u)return u;if(i.get(n.toLowerCase()))return he(t,{fieldInfos:r,fieldName:n,layer:a});var c=a&&a.fieldsIndex;return c&&c.isDateField(n)?Object(V.b)(t,Q):ve(t)}({fieldName:e,fieldInfos:t,fieldInfoMap:a,layer:r,value:s[e],graphic:i})})),s}function be(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.graphic,i=t.popupTemplate,a=t.layer,o=t.spatialReference,a&&i){e.next=3;break}return e.abrupt("return");case 3:if(s=i.returnGeometry,e.t0="function"==typeof a.load,!e.t0){e.next=8;break}return e.next=8,a.load(n);case 8:if(null!=(u=r.attributes[a.objectIdField])){e.next=11;break}return e.abrupt("return");case 11:return c=[u],e.next=14,i.getRequiredFields(a.fields);case 14:if(l=e.sent,h=Object(z.h)(l,r),f=h?[]:l,!h||s){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,p,d,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.layer,i=t.graphic,a=t.outFields,o=t.objectIds,s=t.returnGeometry,u=t.spatialReference,"number"==typeof(c=o[0])||"string"==typeof c){e.next=4;break}throw l="Could not query required fields for the specified feature. The feature's ID is invalid.",h={layer:r,graphic:i,objectId:c,requiredFields:a},f=new E.a("layer-query-features-invalid-objectid",l,h),B.warn(l,h),f;case 4:if("function"==typeof r.queryFeatures){e.next=7;break}throw p="The specified layer does not support the method 'queryFeatures'. The following fields will not be available.",d={layer:r,graphic:i,requiredFields:a},v=new E.a("layer-query-features-unsupported",p,d),B.warn(p,d),v;case 7:return(y=r.createQuery()).objectIds=o,y.outFields=a,y.returnGeometry=!!s,y.outSpatialReference=u,e.next=14,r.queryFeatures(y,n);case 14:return e.abrupt("return",e.sent.features[0]);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()({layer:a,graphic:r,outFields:f,objectIds:c,returnGeometry:s,spatialReference:o},n);case 21:(p=e.sent)&&(p.geometry&&(r.geometry=p.geometry),p.attributes&&(r.attributes=Nt(Nt({},r.attributes),p.attributes)));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e&&-1!==e.indexOf("relationships/")}function we(e){var t=e.attributes,n=e.graphic,r=e.relatedInfo;t&&n&&r&&Object.keys(n.attributes).forEach((function(e){var i=function(e){return e?"relationships/".concat(e.layerId,"/").concat(e.fieldName):""}({layerId:r.relation.id.toString(),fieldName:e});t[i]=n.attributes[e]}))}var Oe={editing:!1,operations:{add:!0,update:!0,delete:!0}},je=h.a.ofType(L.a),_e=function(e){Kt(s,e);var t,n,r,i,a,o=Xt(s);function s(e){var t;return Wt(this,s),(t=o.call(this,e))._getAttachmentsPromise=null,t._attachmentLayer=null,t.abilities=Nt({},Oe),t.activeAttachmentInfo=null,t.attachmentInfos=new je,t.graphic=null,t.mode="view",t.handles.add([Object(u.init)($t(t),"graphic",(function(){return t._graphicChanged()}))]),t}return Zt(s,[{key:"destroy",value:function(){this._attachmentLayer=null,this.graphic=null}},{key:"castAbilities",value:function(e){return Nt(Nt({},Oe),e)}},{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}},{key:"getAttachments",value:(a=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._attachmentLayer,n=this.attachmentInfos,t&&"function"==typeof t.queryAttachments){e.next=3;break}throw new E.a("invalid-layer","getAttachments(): A valid layer is required.");case 3:return r=this._getFeatureId(),i=new D.a({objectIds:[r],returnMetadata:!0}),a=[],o=t.queryAttachments(i).then((function(e){return e[r]||a})).catch((function(){return a})),this._getAttachmentsPromise=o,this.notifyChange("state"),e.next=7,o;case 7:return s=e.sent,e.abrupt("return",(n.removeAll(),s.length&&n.addMany(s),this._getAttachmentsPromise=null,this.notifyChange("state"),s));case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"addAttachment",value:(i=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._attachmentLayer,r=this.attachmentInfos,i=this.graphic,a=this.abilities,t){e.next=3;break}throw new E.a("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});case 3:if(a.operations.add){e.next=5;break}throw new E.a("invalid-abilities","addAttachment(): add abilities are required.");case 5:if(n&&"function"==typeof n.addAttachment){e.next=7;break}throw new E.a("invalid-layer","addAttachment(): A valid layer is required.");case 7:return o=n.addAttachment(i,t).then((function(e){return u._queryAttachment(e.objectId)})),e.next=10,o;case 10:return s=e.sent,e.abrupt("return",(r.add(s),s));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"deleteAttachment",value:(r=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._attachmentLayer,r=this.attachmentInfos,i=this.graphic,a=this.abilities,t){e.next=3;break}throw new E.a("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});case 3:if(a.operations.delete){e.next=5;break}throw new E.a("invalid-abilities","deleteAttachment(): delete abilities are required.");case 5:if(n&&"function"==typeof n.deleteAttachments){e.next=7;break}throw new E.a("invalid-layer","deleteAttachment(): A valid layer is required.");case 7:return o=n.deleteAttachments(i,[t.id]).then((function(){return t})),e.next=10,o;case 10:return s=e.sent,e.abrupt("return",(r.remove(s),s));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateAttachment",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l=this,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:this.activeAttachmentInfo,r=this._attachmentLayer,i=this.attachmentInfos,a=this.graphic,o=this.abilities,t){e.next=4;break}throw new E.a("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});case 4:if(n){e.next=6;break}throw new E.a("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:n});case 6:if(o.operations.update){e.next=8;break}throw new E.a("invalid-abilities","updateAttachment(): Update abilities are required.");case 8:if(s=i.findIndex((function(e){return e===n})),r&&"function"==typeof r.updateAttachment){e.next=11;break}throw new E.a("invalid-layer","updateAttachment(): A valid layer is required.");case 11:return u=r.updateAttachment(a,n.id,t).then((function(e){return l._queryAttachment(e.objectId)})),e.next=14,u;case 14:return c=e.sent,e.abrupt("return",(i.splice(s,1,c),c));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_queryAttachment",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new E.a("invalid-attachment-id","Could not query attachment.");case 2:return n=this._attachmentLayer,r=this._getFeatureId(),i=new D.a({objectIds:[r],attachmentsWhere:"AttachmentId="+t,returnMetadata:!0}),e.abrupt("return",n.queryAttachments(i).then((function(e){return e[r][0]})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_getFeatureId",value:function(){var e=this._attachmentLayer,t=this.graphic;if(!e||!t)return null;var n=e.objectIdField,r=t.attributes;return r&&r[n]}},{key:"_graphicChanged",value:function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((function(){})))}},{key:"_setAttachmentLayer",value:function(){var e=$(this.graphic);this._attachmentLayer=e?"scene"===e.type&&Object(y.k)(e.associatedLayer)?e.associatedLayer:e:null}}]),s}(N.a);Object(r.a)([Object(a.b)()],_e.prototype,"abilities",void 0),Object(r.a)([Object(g.a)("abilities")],_e.prototype,"castAbilities",null),Object(r.a)([Object(a.b)()],_e.prototype,"activeAttachmentInfo",void 0),Object(r.a)([Object(a.b)({readOnly:!0,type:je})],_e.prototype,"attachmentInfos",void 0),Object(r.a)([Object(a.b)({type:R.a})],_e.prototype,"graphic",void 0),Object(r.a)([Object(a.b)()],_e.prototype,"mode",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],_e.prototype,"state",null),Object(r.a)([Object(a.b)({readOnly:!0})],_e.prototype,"supportsResizeAttachments",null);var xe=_e=Object(r.a)([Object(o.a)("esri.widgets.Attachments.AttachmentsViewModel")],_e),ke=n("ss0y"),Se={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Me=window.CSS,Ie=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).abilities=null,i.displayType="list",i.graphic=null,i.label=void 0,i.messages=null,i.messagesUnits=null,i.selectedFile=null,i.submitting=!1,i.viewModel=new xe,i.visibleElements=Nt({},Se),i._supportsImageOrientation=Me&&Me.supports&&Me.supports("image-orientation","from-image"),i._addAttachmentForm=null,i._updateAttachmentForm=null,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this.own(Object(u.on)(this,"viewModel.attachmentInfos","change",(function(){return e.scheduleRender()})),Object(u.init)(this,"viewModel.mode",(function(){return e._modeChanged()})))}},{key:"castVisibleElements",value:function(e){return Nt(Nt({},Se),e)}},{key:"addAttachment",value:function(){var e=this,t=this._addAttachmentForm,n=this.viewModel;return this._set("submitting",!0),this._set("error",null),n.addAttachment(t).then((function(t){return e._set("submitting",!1),e._set("error",null),n.mode="view",t})).catch((function(t){throw e._set("submitting",!1),e._set("error",new E.a("attachments:add-attachment",e.messages.addErrorMessage,t)),t}))}},{key:"deleteAttachment",value:function(e){var t=this,n=this.viewModel;return this._set("submitting",!0),this._set("error",null),n.deleteAttachment(e).then((function(e){return t._set("submitting",!1),t._set("error",null),n.mode="view",e})).catch((function(e){throw t._set("submitting",!1),t._set("error",new E.a("attachments:delete-attachment",t.messages.deleteErrorMessage,e)),e}))}},{key:"updateAttachment",value:function(){var e=this,t=this.viewModel,n=this._updateAttachmentForm;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(n).then((function(n){return e._set("submitting",!1),e._set("error",null),t.mode="view",n})).catch((function(t){throw e._set("submitting",!1),e._set("error",new E.a("attachments:update-attachment",e.messages.updateErrorMessage,t)),t}))}},{key:"render",value:function(){var e=this.submitting,t=this.viewModel.state;return Object(I.a)("div",{class:this.classes("esri-attachments","esri-widget")},e?this.renderProgressBar():null,"loading"===t?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}},{key:"renderErrorMessage",value:function(){var e=this.error,t=this.visibleElements;return e&&t.errorMessage?Object(I.a)("div",{key:"error-message",class:"esri-attachments__error-message"},e.message):null}},{key:"renderAttachments",value:function(){var e=this.viewModel,t=e.mode,n=e.activeAttachmentInfo;return"add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(n):this.renderAttachmentContainer()}},{key:"renderLoading",value:function(){return Object(I.a)("div",{class:"esri-attachments__loader-container",key:"loader"},Object(I.a)("div",{class:"esri-attachments__loader"}))}},{key:"renderProgressBar",value:function(){return this.visibleElements.progressBar?Object(I.a)("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null}},{key:"renderAddForm",value:function(){var e=this.submitting,t=this.selectedFile,n=e||!t,r=this.visibleElements.cancelAddButton?Object(I.a)("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",e&&"esri-button--disabled")},this.messages.cancel):null,i=this.visibleElements.addSubmitButton?Object(I.a)("button",{type:"submit",disabled:n,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{"esri-button--disabled":n})},this.messages.add):null,a=t?Object(I.a)("span",{key:"file-name",class:"esri-attachments__file-name"},t.name):null,o=Object(I.a)("form",{bind:this,afterCreate:x.i,afterRemoved:x.c,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},Object(I.a)("fieldset",{class:"esri-attachments__file-fieldset"},a,Object(I.a)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},t?this.messages.changeFile:this.messages.selectFile,Object(I.a)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),i,r);return Object(I.a)("div",{key:"add-form-container",class:"esri-attachments__form-node"},o)}},{key:"renderDetailsForm",value:function(e){var t=this,n=this.visibleElements,r=this.viewModel,i=this.selectedFile,a=this.submitting,o=e.contentType,s=e.size,u=e.url,c=r.abilities,l=a||!i,h=c.editing&&c.operations.delete&&n.deleteButton?Object(I.a)("button",{key:"delete-button",type:"button",disabled:a,bind:this,onclick:function(n){return t._submitDeleteAttachment(n,e)},class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{"esri-button--disabled":a})},this.messages.delete):null,f=c.editing&&c.operations.update&&n.updateButton?Object(I.a)("button",{disabled:l,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{"esri-button--disabled":l})},this.messages.update):null,p=this.visibleElements.cancelUpdateButton?Object(I.a)("button",{disabled:a,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{"esri-button--disabled":a})},this.messages.cancel):null,d=i?Object(I.a)("span",{key:"file-name",class:"esri-attachments__file-name"},i.name):null,v=c.editing&&c.operations.update?Object(I.a)("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},d,Object(I.a)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,Object(I.a)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,y=Object(I.a)("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},Object(I.a)("label",null,Object(P.c)(this.messagesUnits,s))),b=Object(I.a)("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},Object(I.a)("label",null,o)),g=Object(I.a)("form",{bind:this,afterCreate:x.i,afterRemoved:x.c,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},Object(I.a)("div",{class:"esri-attachments__metadata"},y,b),v,Object(I.a)("div",{class:"esri-attachments__actions"},h,p,f));return Object(I.a)("div",{key:"edit-form-container",class:"esri-attachments__form-node"},Object(I.a)("a",{class:"esri-attachments__item-link",href:u,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),Object(I.a)("div",{class:"esri-attachments__item-link-overlay"},Object(I.a)("span",{class:"esri-attachments__item-link-overlay-icon"},Object(I.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},Object(I.a)("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),Object(I.a)("path",{fill:"none",d:"M0 0h32v32H0z"}))))),g)}},{key:"renderImageMask",value:function(e){var t=e.attachmentInfo,n=e.size,r=this.viewModel.supportsResizeAttachments,i=t.contentType,a=t.name,o=t.url,s=r&&function(e){var t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}(i),u=this._getCSSTransform(t,s),c=u?{transform:u,"image-orientation":"none"}:{},l=-1===o.indexOf("?")?"?":"&",h=s?"".concat(o).concat(l,"w=").concat(n):function(e){var t=Object(ke.a)("esri/themes/base/images/files/");return e?"text/plain"===e?t+"text-32.svg":"application/pdf"===e?t+"pdf-32.svg":"text/csv"===e?t+"csv-32.svg":"application/gpx+xml"===e?t+"gpx-32.svg":"application/x-dwf"===e?t+"cad-32.svg":"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?t+"code-32.svg":"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?t+"zip-32.svg":-1!==e.indexOf("image/")?t+"image-32.svg":-1!==e.indexOf("audio/")?t+"sound-32.svg":-1!==e.indexOf("video/")?t+"video-32.svg":-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?t+"excel-32.svg":-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?t+"word-32.svg":-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?t+"report-32.svg":t+"generic-32.svg":t+"generic-32.svg"}(i),f={"esri-attachments__item-mask--icon":!s},p={"esri-attachments__image--resizable":r};return Object(I.a)("div",{class:this.classes(f,"esri-attachments__item-mask")},Object(I.a)("img",{styles:c,alt:a,src:h,class:this.classes(p,"esri-attachments__image")}))}},{key:"renderAttachmentInfo",value:function(e){var t=this,n=e.attachmentInfo,r=e.displayType,i=this.viewModel.abilities,a=n.name,o=n.url,s=this.renderImageMask({attachmentInfo:n,size:"list"===r?48:400}),u=i.editing?Object(I.a)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",Object(x.f)()?"esri-icon-left":"esri-icon-right")}):null,c=[s,Object(I.a)("label",{class:"esri-attachments__label"},Object(I.a)("span",{class:"esri-attachments__filename"},a||this.messages.noTitle),u)],l=i.editing?Object(I.a)("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":n.id,onclick:function(){return t._startEditAttachment(n)},type:"button"},c):Object(I.a)("a",{key:"details-link",class:"esri-attachments__item-button",href:o,target:"_blank"},c);return Object(I.a)("li",{class:"esri-attachments__item",key:n},l)}},{key:"renderAttachmentContainer",value:function(){var e=this,t=this.displayType,n=this.viewModel,r=this.visibleElements,i=n.attachmentInfos,a=n.abilities,o=i&&i.length,s={"esri-attachments__container--list":"preview"!==t,"esri-attachments__container--preview":"preview"===t},u=a.editing&&a.operations.add&&r.addButton?Object(I.a)("button",{bind:this,onclick:function(){return e._startAddAttachment()},class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},Object(I.a)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null,c=o?Object(I.a)("ul",{class:"esri-attachments__items"},i.toArray().map((function(n){return e.renderAttachmentInfo({attachmentInfo:n,displayType:t})}))):Object(I.a)("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return Object(I.a)("div",{key:"attachments-container",class:this.classes("esri-attachments__container",s)},c,u)}},{key:"_modeChanged",value:function(){this._set("error",null),this._set("selectedFile",null)}},{key:"_handleFileInputChange",value:function(e){var t=e.target,n=t&&t.files&&t.files.item(0);this._set("selectedFile",n)}},{key:"_submitDeleteAttachment",value:function(e,t){e.preventDefault(),this.deleteAttachment(t)}},{key:"_submitAddAttachment",value:function(e){e.preventDefault(),this.addAttachment()}},{key:"_submitUpdateAttachment",value:function(e){e.preventDefault(),this.updateAttachment()}},{key:"_startEditAttachment",value:function(e){var t=this.viewModel;t.activeAttachmentInfo=e,t.mode="edit"}},{key:"_startAddAttachment",value:function(){this.viewModel.mode="add"}},{key:"_cancelForm",value:function(e){e.preventDefault(),this.viewModel.mode="view"}},{key:"_getCSSTransform",value:function(e,t){var n=e.orientationInfo;return!this._supportsImageOrientation&&t&&n?[n.rotation?"rotate(".concat(n.rotation,"deg)"):"",n.mirrored?"scaleX(-1)":""].join(" "):""}}]),n}(T.a);Object(r.a)([Object(b.a)("viewModel.abilities")],Ie.prototype,"abilities",void 0),Object(r.a)([Object(a.b)()],Ie.prototype,"displayType",void 0),Object(r.a)([Object(b.a)("viewModel.graphic")],Ie.prototype,"graphic",void 0),Object(r.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ie.prototype,"label",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/Attachments/t9n/Attachments")],Ie.prototype,"messages",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/core/t9n/Units")],Ie.prototype,"messagesUnits",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Ie.prototype,"selectedFile",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Ie.prototype,"submitting",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Ie.prototype,"error",void 0),Object(r.a)([Object(a.b)({type:xe})],Ie.prototype,"viewModel",void 0),Object(r.a)([Object(a.b)()],Ie.prototype,"visibleElements",void 0),Object(r.a)([Object(g.a)("visibleElements")],Ie.prototype,"castVisibleElements",null);var Te=Ie=Object(r.a)([Object(o.a)("esri.widgets.Attachments")],Ie),Ae=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.title=null,r}return n}(xe);Object(r.a)([Object(a.b)()],Ae.prototype,"description",void 0),Object(r.a)([Object(a.b)()],Ae.prototype,"title",void 0);var Ce=Ae=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Ae),Ee=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).description=null,i.title=null,i}return Zt(n,[{key:"render",value:function(){return Object(I.a)("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())}},{key:"renderTitle",value:function(){var e=this.title;return e?Object(I.a)("h2",{key:"title",class:"esri-feature-element-info__title"},e):null}},{key:"renderDescription",value:function(){var e=this.description;return e?Object(I.a)("div",{key:"description",class:"esri-feature-element-info__description"},e):null}}]),n}(T.a);Object(r.a)([Object(a.b)()],Ee.prototype,"description",void 0),Object(r.a)([Object(a.b)()],Ee.prototype,"title",void 0);var Pe=Ee=Object(r.a)([Object(o.a)("esri.widgets.Feature.support.FeatureElementInfo")],Ee),Re=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._featureElementInfo=null,i.attachmentsWidget=new Te,i.description=null,i.displayType=null,i.graphic=null,i.title=null,i.viewModel=new Ce,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new Pe,Object(u.init)(this,["viewModel.description","viewModel.title"],(function(){return e._setupFeatureElementInfo()})),Object(u.init)(this,"viewModel.graphic",(function(t){return e.attachmentsWidget.graphic=t}))}},{key:"destroy",value:function(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}},{key:"render",value:function(){var e,t=this.attachmentsWidget;return Object(I.a)("div",{class:"esri-feature-attachments"},null==(e=this._featureElementInfo)?void 0:e.render(),null==t?void 0:t.render())}},{key:"_setupFeatureElementInfo",value:function(){var e=this.description,t=this.title;this._featureElementInfo.set({description:e,title:t})}}]),n}(T.a);Object(r.a)([Object(a.b)({readOnly:!0})],Re.prototype,"attachmentsWidget",void 0),Object(r.a)([Object(b.a)("viewModel.description")],Re.prototype,"description",void 0),Object(r.a)([Object(b.a)("attachmentsWidget.displayType")],Re.prototype,"displayType",void 0),Object(r.a)([Object(b.a)("viewModel.graphic")],Re.prototype,"graphic",void 0),Object(r.a)([Object(b.a)("viewModel.title")],Re.prototype,"title",void 0),Object(r.a)([Object(a.b)({type:Ce})],Re.prototype,"viewModel",void 0);var De=Re=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureAttachments")],Re),Le=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e))._loadingPromise=null,t.created=null,t.creator=null,t.destroyer=null,t.graphic=null,t.handles.add(Object(u.init)($t(t),"creator",(function(e){t._destroyContent(),t._createContent(e)}))),t}return Zt(r,[{key:"destroy",value:function(){this._destroyContent()}},{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}},{key:"_destroyContent",value:function(){var e=this.created,t=this.graphic,n=this.destroyer;e&&(ee(n,{graphic:t}).catch((function(){return null})),this._set("created",null))}},{key:"_createContent",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.graphic,r=ee(t,{graphic:n}).catch((function(){return null})),this._loadingPromise=r,this.notifyChange("state"),e.next=4,r;case 4:i=e.sent,r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",i));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),r}(Object(N.b)(l.a));Object(r.a)([Object(a.b)({readOnly:!0})],Le.prototype,"created",void 0),Object(r.a)([Object(a.b)()],Le.prototype,"creator",void 0),Object(r.a)([Object(a.b)()],Le.prototype,"destroyer",void 0),Object(r.a)([Object(a.b)({type:R.a})],Le.prototype,"graphic",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Le.prototype,"state",null);var Ne=Le=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Le),Fe=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).creator=null,i.graphic=null,i.viewModel=null,i._addTargetToAnchors=function(e){Array.from(e.querySelectorAll("a")).forEach((function(e){ne(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))},i}return Zt(n,[{key:"renderLoading",value:function(){return Object(I.a)("div",{class:"esri-feature-content__loader-container",key:"loader"},Object(I.a)("div",{class:"esri-feature-content__loader"}))}},{key:"renderCreated",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.created;return t?t instanceof HTMLElement?Object(I.a)("div",{key:t,bind:t,afterCreate:this._attachToNode}):Object(A.b)(t)?Object(I.a)("div",{key:t},!t.destroyed&&t.render()):Object(I.a)("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}},{key:"render",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.state;return Object(I.a)("div",{class:"esri-feature-content"},"loading"===t?this.renderLoading():this.renderCreated())}},{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),n}(T.a);Object(r.a)([Object(b.a)("viewModel.creator")],Fe.prototype,"creator",void 0),Object(r.a)([Object(b.a)("viewModel.graphic")],Fe.prototype,"graphic",void 0),Object(r.a)([Object(a.b)({type:Ne})],Fe.prototype,"viewModel",void 0);var ze=Fe=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureContent")],Fe),Ve=n("n5EF"),Ge=n("Fjfq"),Ue=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).attributes=null,r.expressionInfos=null,r.description=null,r.fieldInfos=null,r.title=null,r}return Zt(n,[{key:"formattedFieldInfos",get:function(){var e=this.expressionInfos,t=this.fieldInfos,n=[];return null==t||t.forEach((function(t){if(!t.hasOwnProperty("visible")||t.visible){var r=t.clone();r.label=re(r,e),n.push(r)}})),n}}]),n}(l.a);Object(r.a)([Object(a.b)()],Ue.prototype,"attributes",void 0),Object(r.a)([Object(a.b)({type:[Ge.a]})],Ue.prototype,"expressionInfos",void 0),Object(r.a)([Object(a.b)()],Ue.prototype,"description",void 0),Object(r.a)([Object(a.b)({type:[Ve.a]})],Ue.prototype,"fieldInfos",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Ue.prototype,"formattedFieldInfos",null),Object(r.a)([Object(a.b)()],Ue.prototype,"title",void 0);var Be=Ue=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Ue),qe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}],He=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._featureElementInfo=null,i.attributes=null,i.description=null,i.expressionInfos=null,i.fieldInfos=null,i.title=null,i.viewModel=new Be,i.messages=null,i.messagesURIUtils=null,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new Pe,Object(u.init)(this,["viewModel.description","viewModel.title"],(function(){return e._setupFeatureElementInfo()}))}},{key:"destroy",value:function(){this._featureElementInfo.destroy()}},{key:"renderFieldInfo",value:function(e,t){var n=this.viewModel.attributes,r=e.fieldName,i=e.label||r,a=n?null==n[r]?"":n[r]:"",o=!(!e.format||!e.format.dateFormat),s="number"!=typeof a||o?function(e,t){if("string"!=typeof t||!t)return t;var n=function(e){var t=null;return qe.some((function(n){return n.pattern.test(e)&&(t=n),!!t})),t}(t);if(!n)return t;var r=t.match(n.pattern),i=r&&r[2],a=Object(F.c)(Object(F.c)(n.label,{messages:e,hierPart:i}),{appName:n.appName});return t.replace(n.pattern,"<a".concat(n.target?' target="'.concat(n.target,'"'):"",' href="$1"').concat("_blank"===n.target?' rel="noreferrer"':"",">").concat(a,"</a>"))}(this.messagesURIUtils,a):this._forceLTR(a),u={"esri-feature-fields__field-data--date":o};return Object(I.a)("tr",{key:"fields-element-info-row-".concat(r,"-").concat(t)},Object(I.a)("th",{key:"fields-element-info-row-header-".concat(r,"-").concat(t),class:"esri-feature-fields__field-header",innerHTML:i}),Object(I.a)("td",{key:"fields-element-info-row-data-".concat(r,"-").concat(t),class:this.classes("esri-feature-fields__field-data",u),innerHTML:s}))}},{key:"renderFields",value:function(){var e=this,t=this.viewModel.formattedFieldInfos;return t.length?Object(I.a)("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},Object(I.a)("tbody",null,t.map((function(t,n){return e.renderFieldInfo(t,n)})))):null}},{key:"render",value:function(){var e;return Object(I.a)("div",{class:"esri-feature-fields"},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())}},{key:"_setupFeatureElementInfo",value:function(){var e=this.description,t=this.title;this._featureElementInfo.set({description:e,title:t})}},{key:"_forceLTR",value:function(e){return"&lrm;"+e}}]),n}(T.a);Object(r.a)([Object(b.a)("viewModel.attributes")],He.prototype,"attributes",void 0),Object(r.a)([Object(b.a)("viewModel.description")],He.prototype,"description",void 0),Object(r.a)([Object(b.a)("viewModel.expressionInfos")],He.prototype,"expressionInfos",void 0),Object(r.a)([Object(b.a)("viewModel.fieldInfos")],He.prototype,"fieldInfos",void 0),Object(r.a)([Object(b.a)("viewModel.title")],He.prototype,"title",void 0),Object(r.a)([Object(a.b)({type:Be})],He.prototype,"viewModel",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/Feature/t9n/Feature")],He.prototype,"messages",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/support/t9n/uriUtils")],He.prototype,"messagesURIUtils",void 0);var We=He=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureFields")],He),Je=n("qPMW"),Ze=n("9MzC"),Ke=n("Lqtk"),Ye=n("875+"),Xe=n("xk++"),Qe=n("n6Nx"),$e=n("/uz8"),et=i.a.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),tt=new Map;function nt(e){if(!me(e))return null;var t=zt(e.split("/").slice(1),2);return{layerId:t[0],fieldName:t[1]}}var rt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).activeMediaInfoIndex=0,r.attributes=null,r.description=null,r.fieldInfoMap=null,r.formattedAttributes=null,r.layer=null,r.mediaInfos=null,r.popupTemplate=null,r.relatedInfos=null,r.title=null,r}return Zt(n,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}},{key:"setActiveMedia",value:function(e){this._setContentElementMedia(e)}},{key:"next",value:function(){this._pageContentElementMedia(1)}},{key:"previous",value:function(){this._pageContentElementMedia(-1)}},{key:"_setContentElementMedia",value:function(e){var t=this.formattedMediaInfoCount;this.activeMediaInfoIndex=(e+t)%t}},{key:"_pageContentElementMedia",value:function(e){var t=this.activeMediaInfoIndex;this._setContentElementMedia(t+e)}},{key:"_formatMediaInfos",value:function(){var e=this,t=this.attributes,n=this.mediaInfos,r=this.formattedAttributes,i=this.fieldInfoMap,a=this.layer;return null==n?void 0:n.map((function(n){if(!n)return null;if(n.title=se({attributes:t,fieldInfoMap:i,globalAttributes:r,layer:a,text:n.title}),n.caption=se({attributes:t,fieldInfoMap:i,globalAttributes:r,layer:a,text:n.caption}),n.altText=se({attributes:t,fieldInfoMap:i,globalAttributes:r,layer:a,text:n.altText}),"image"===n.type){var o=n.value;return e._setImageValue({value:o,formattedAttributes:r,layer:a}),n.value.sourceURL?n:void 0}if("pie-chart"===n.type||"line-chart"===n.type||"column-chart"===n.type||"bar-chart"===n.type){var s=n.value;return e._setChartValue({value:s,chartType:n.type,attributes:t,formattedAttributes:r,layer:a}),n}return null})).filter(Boolean)}},{key:"_setImageValue",value:function(e){var t=this.fieldInfoMap,n=e.value,r=e.formattedAttributes,i=e.layer,a=n.linkURL,o=n.sourceURL;if(o){var s=ce(o,i);n.sourceURL=ue({formattedAttributes:r,template:s,fieldInfoMap:t})}if(a){var u=ce(a,i);n.linkURL=ue({formattedAttributes:r,template:u,fieldInfoMap:t})}}},{key:"_setChartValue",value:function(e){var t=this,n=e.value,r=e.attributes,i=e.formattedAttributes,a=e.chartType,o=e.layer,s=this.popupTemplate,u=this.relatedInfos,c=n.fields,l=n.normalizeField;if(n.fields=function(e,t){return e&&e.map((function(e){return ie(e,t)}))}(c,o),l&&(n.normalizeField=ie(l,o)),c.some((function(e){return!!(null!=i[e]||me(e)&&u.size)}))){var h=null==s?void 0:s.fieldInfos;c.forEach((function(e){if(me(e))n.series=[].concat(Bt(n.series),Bt(t._getRelatedChartInfos({fieldInfos:h,fieldName:e,formattedAttributes:i,chartType:a,value:n})));else{var o=t._getChartOption({value:n,attributes:r,chartType:a,formattedAttributes:i,fieldName:e,fieldInfos:h});n.series.push(o)}}))}}},{key:"_getRelatedChartInfos",value:function(e){var t,n=this,r=e.fieldInfos,i=e.fieldName,a=e.formattedAttributes,o=e.chartType,s=e.value,u=[],c=nt(i),l=c.layerId,h=c.fieldName,f=null==(t=this.relatedInfos)?void 0:t.get(l.toString());if(!f)return u;var p=f.relatedFeatures,d=f.relation;if(!d||!p)return u;var v=d.cardinality;return p.forEach((function(e){var t=e.attributes;t&&Object.keys(t).forEach((function(e){e===h&&u.push(n._getChartOption({value:s,attributes:t,formattedAttributes:a,fieldName:i,chartType:o,relatedFieldName:e,fieldInfos:r}))}))})),"one-to-many"===v||"many-to-many"===v?u:[u[0]]}},{key:"_getTooltip",value:function(e){var t=e.label,n=e.value;return"pie-chart"===e.chartType?t:"".concat(t,": ").concat(n)}},{key:"_getChartOption",value:function(e){var t,n=e.value,r=e.attributes,i=e.formattedAttributes,a=e.fieldName,o=e.relatedFieldName,s=e.fieldInfos,u=e.chartType,c=this.layer,l=n.normalizeField,h=n.tooltipField,f=l?me(l)?r[nt(l).fieldName]:r[l]:null,p=o&&void 0!==r[o]?r[o]:void 0!==r[a]?r[a]:i[a],d=void 0===p?null:p&&f?p/f:p,v=new Je.a({value:d});if(me(a)){var y=nt(a),b=nt(h),g=b?b.fieldName:null,m=he(d,{fieldInfos:s,fieldName:o,layer:c,preventPlacesFormatting:!!f}),w=y?y.label||y.fieldName:o;return v.tooltip=this._getTooltip({label:g&&void 0!==r[g]?r[g]:w,value:m,chartType:u}),v}var O=fe(s,a),j=ie(a,c),_=h&&void 0!==i[h]?i[h]:re(O||new Ve.a({fieldName:j}),null==(t=this.popupTemplate)?void 0:t.expressionInfos);return v.tooltip=this._getTooltip({label:_,value:i[j],chartType:u}),v}}]),n}(l.a);Object(r.a)([Object(a.b)()],rt.prototype,"activeMediaInfoIndex",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],rt.prototype,"activeMediaInfo",null),Object(r.a)([Object(a.b)()],rt.prototype,"attributes",void 0),Object(r.a)([Object(a.b)()],rt.prototype,"description",void 0),Object(r.a)([Object(a.b)()],rt.prototype,"fieldInfoMap",void 0),Object(r.a)([Object(a.b)()],rt.prototype,"formattedAttributes",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],rt.prototype,"formattedMediaInfos",null),Object(r.a)([Object(a.b)()],rt.prototype,"layer",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],rt.prototype,"formattedMediaInfoCount",null),Object(r.a)([Object(a.b)()],rt.prototype,"mediaInfos",void 0),Object(r.a)([Object(a.b)()],rt.prototype,"popupTemplate",void 0),Object(r.a)([Object(a.b)()],rt.prototype,"relatedInfos",void 0),Object(r.a)([Object(a.b)()],rt.prototype,"title",void 0);var it,at,ot=rt=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],rt),st=n("IDUf"),ut=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],ct=[{name:"default",colors:[].concat(ut.slice(30,39),ut.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],lt=new Map([["ar",function(){return n.e(68).then(n.bind(null,"gVi0")).then((function(e){return e.a}))}],["bs-ba",function(){return n.e(70).then(n.bind(null,"eYZO")).then((function(e){return e.b}))}],["ca-es",function(){return n.e(71).then(n.bind(null,"tp2Y")).then((function(e){return e.c}))}],["cs-cz",function(){return n.e(72).then(n.bind(null,"9MVz")).then((function(e){return e.c}))}],["da-dk",function(){return n.e(73).then(n.bind(null,"tskY")).then((function(e){return e.d}))}],["de-de",function(){return n.e(75).then(n.bind(null,"U2av")).then((function(e){return e.d}))}],["de-ch",function(){return n.e(74).then(n.bind(null,"491z")).then((function(e){return e.d}))}],["el-gr",function(){return n.e(76).then(n.bind(null,"CqAp")).then((function(e){return e.e}))}],["en-us",function(){return n.e(78).then(n.bind(null,"9zSU")).then((function(e){return e.e}))}],["en-ca",function(){return n.e(77).then(n.bind(null,"721A")).then((function(e){return e.e}))}],["es-es",function(){return n.e(79).then(n.bind(null,"zHxr")).then((function(e){return e.e}))}],["et-ee",function(){return n.e(80).then(n.bind(null,"eL3G")).then((function(e){return e.e}))}],["fi-fi",function(){return n.e(81).then(n.bind(null,"Rzvt")).then((function(e){return e.f}))}],["fr-fr",function(){return n.e(82).then(n.bind(null,"VZrM")).then((function(e){return e.f}))}],["he-il",function(){return n.e(83).then(n.bind(null,"ohPc")).then((function(e){return e.h}))}],["hr-hr",function(){return n.e(84).then(n.bind(null,"v1T9")).then((function(e){return e.h}))}],["hu-hu",function(){return n.e(85).then(n.bind(null,"FsYt")).then((function(e){return e.h}))}],["id-id",function(){return n.e(87).then(n.bind(null,"WrCa")).then((function(e){return e.i}))}],["it-it",function(){return n.e(89).then(n.bind(null,"Qc2v")).then((function(e){return e.i}))}],["ja-jp",function(){return n.e(90).then(n.bind(null,"Y18N")).then((function(e){return e.j}))}],["ko-kr",function(){return n.e(91).then(n.bind(null,"LihU")).then((function(e){return e.k}))}],["lt-lt",function(){return n.e(92).then(n.bind(null,"3/00")).then((function(e){return e.l}))}],["lv-lv",function(){return n.e(93).then(n.bind(null,"pDfG")).then((function(e){return e.l}))}],["nb-no",function(){return n.e(94).then(n.bind(null,"zcLm")).then((function(e){return e.n}))}],["nl-nl",function(){return n.e(95).then(n.bind(null,"H4oR")).then((function(e){return e.n}))}],["pl-pl",function(){return n.e(96).then(n.bind(null,"yOHg")).then((function(e){return e.p}))}],["pt-br",function(){return n.e(97).then(n.bind(null,"3kka")).then((function(e){return e.p}))}],["pt-pt",function(){return n.e(98).then(n.bind(null,"7tb5")).then((function(e){return e.p}))}],["ro-ro",function(){return n.e(99).then(n.bind(null,"H88A")).then((function(e){return e.r}))}],["ru-ru",function(){return n.e(100).then(n.bind(null,"1ZEX")).then((function(e){return e.r}))}],["sk-sk",function(){return n.e(101).then(n.bind(null,"RjAZ")).then((function(e){return e.s}))}],["sl-sl",function(){return n.e(102).then(n.bind(null,"WMg+")).then((function(e){return e.s}))}],["sr-rs",function(){return n.e(103).then(n.bind(null,"+fSE")).then((function(e){return e.s}))}],["sv-se",function(){return n.e(104).then(n.bind(null,"ANJb")).then((function(e){return e.s}))}],["th-th",function(){return n.e(105).then(n.bind(null,"kWfD")).then((function(e){return e.t}))}],["tr-tr",function(){return n.e(106).then(n.bind(null,"XNuD")).then((function(e){return e.t}))}],["uk-ua",function(){return n.e(107).then(n.bind(null,"ZaTB")).then((function(e){return e.u}))}],["vi-vn",function(){return n.e(108).then(n.bind(null,"lmxi")).then((function(e){return e.v}))}],["zh-cn",function(){return n.e(109).then(n.bind(null,"udBK")).then((function(e){return e.z}))}],["zh-hk",function(){return n.e(110).then(n.bind(null,"i/1w")).then((function(e){return e.z}))}],["zh-tw",function(){return n.e(110).then(n.bind(null,"i/1w")).then((function(e){return e.z}))}]]),ht=function(e){Kt(i,e);var t,r=Xt(i);function i(e,t){var n;return Wt(this,i),(n=r.call(this,e,t))._refreshTimer=null,n._refreshIntervalInfo=null,n._featureElementInfo=null,n.attributes=null,n.activeMediaInfoIndex=null,n.description=null,n.fieldInfoMap=null,n.layer=null,n.mediaInfos=null,n.popupTemplate=null,n.relatedInfos=null,n.title=null,n.viewModel=new ot,n.messages=null,n}return Zt(i,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new Pe,this.own(Object(u.init)(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],(function(){return e._setupMediaRefreshTimer()})),Object(u.init)(this,["viewModel.description","viewModel.title"],(function(){return e._setupFeatureElementInfo()})))}},{key:"destroy",value:function(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}},{key:"render",value:function(){var e;return Object(I.a)("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}},{key:"renderMedia",value:function(){return this.viewModel.formattedMediaInfoCount?Object(I.a)("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}},{key:"renderImageMediaInfo",value:function(e){var t=this._refreshIntervalInfo,n=this.viewModel,r=n.activeMediaInfoIndex,i=n.formattedMediaInfoCount,a=e.value,o=e.refreshInterval,s=e.altText,u=e.title,c=e.type,l=a.sourceURL,h=a.linkURL,f=ne(h)?"_blank":"_self",p="_blank"===f?"noreferrer":"",d=o?t:null,v=d?d.timestamp:0,y=d?d.sourceURL:l,b=Object(I.a)("img",{alt:s||u,key:"media-".concat(c,"-").concat(r,"-").concat(i,"-").concat(v),src:y});return(h?Object(I.a)("a",{title:u,href:h,rel:p,target:f},b):null)||b}},{key:"renderChartMediaInfo",value:function(e){var t=this.viewModel,n=t.activeMediaInfoIndex,r=t.formattedMediaInfoCount;return Object(I.a)("div",{key:"media-".concat(e.type,"-").concat(n,"-").concat(r),bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})}},{key:"renderMediaInfoType",value:function(){var e=this.viewModel.activeMediaInfo;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}},{key:"renderMediaInfo",value:function(){var e=this.viewModel.activeMediaInfo,t=e.title?Object(I.a)("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:e.title}):null,n=e.caption?Object(I.a)("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:e.caption}):null;return Object(I.a)("div",{key:"media-container",class:"esri-feature-media__item-container"},Object(I.a)("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),t,n)}},{key:"renderMediaPageButton",value:function(e){if(this.viewModel.formattedMediaInfoCount<2)return null;var t="previous"===e,n=t?this.messages.previous:this.messages.next,r=this.classes("esri-feature-media__button",t?"esri-feature-media__previous":"esri-feature-media__next"),i=t?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),a=t?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow"),o=t?"media-previous":"media-next",s=t?this._previous:this._next;return Object(I.a)("button",{type:"button",key:o,title:n,"aria-label":n,tabIndex:0,class:r,bind:this,onclick:s},Object(I.a)("span",{"aria-hidden":"true",class:i}),Object(I.a)("span",{"aria-hidden":"true",class:a}))}},{key:"_setupFeatureElementInfo",value:function(){var e=this.description,t=this.title;this._featureElementInfo.set({description:e,title:t})}},{key:"_next",value:function(){this.viewModel.next()}},{key:"_previous",value:function(){this.viewModel.previous()}},{key:"_getChartDependencies",value:(t=Ut(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(regeneratorRuntime.mark((function e(){var t,r,i,a,o,s,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:Object(st.b)(),t=(r=t)?lt.has(r.toLowerCase())?r.toLowerCase():function(e){var t,n=e.split("-")[0].toLowerCase(),r=null,i=Vt(lt.keys());try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.startsWith(n)){r=a;break}}}catch(o){i.e(o)}finally{i.f()}return r}(r)||"en-us":"en-us",!it||t!==at){e.next=3;break}return e.abrupt("return",it);case 3:return it=n.e(88).then(n.bind(null,"j2qa")).then((function(e){return e.i})),at=t,e.prev=4,e.next=7,Promise.all([it,lt.get(at)()]);case 7:i=e.sent,a=zt(i,2),o=a[0],s=a[1],at===t&&(o.am4core.options.defaultLocale=s.default),o.am4core.options.suppressWarnings=!0,o.am4core.options.autoDispose=!0,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",(it=null,at=null,null));case 17:return e.abrupt("return",it);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))();case 2:r=e.sent,i=this.viewModel.activeMediaInfo,this._renderChart({chartDiv:t,mediaInfo:i,chartsModule:r});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_handleMediaKeyup",value:function(e){var t=Object(w.a)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}},{key:"_renderChart",value:function(e){var t=e.chartsModule,n=e.chartDiv,r=e.mediaInfo,i=r.value,a=r.type,o=t.am4core,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=ct.find((function(e){return e.name===t}));return n?n.colors.map((function(t){return e.color(t)})):null}(o);Object(x.e)()&&o.useTheme(t.am4themes_dark),o.useTheme(t.am4themes_animated),o.useTheme((function(e){e instanceof o.ColorSet&&s&&(e.list=s)}));var u="pie-chart"===a?this._createPieChart(e):this._createXYChart(e);n.setAttribute("aria-label",r.altText||r.title),u.data=i.series.map((function(e){return{tooltip:e.tooltip,value:e.value}})).filter((function(e){return"pie-chart"!==a||e.value>0}))}},{key:"_customizeChartTooltip",value:function(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}},{key:"_createPieChart",value:function(e){var t=e.chartDiv,n=e.chartsModule,r=n.am4core,i=n.am4charts,a=r.create(t,i.PieChart);a.rtl=Object(x.f)();var o=a.series.push(new i.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value="value",o.dataFields.category="tooltip",this._customizeChartTooltip(o.tooltip,r),a}},{key:"_getMinSeriesValue",value:function(e){var t=0;return e.forEach((function(e){return t=Math.min(e.value,t)})),t}},{key:"_createColumnChart",value:function(e,t){var n=t.chartsModule,r=t.mediaInfo.value,i=n.am4core,a=n.am4charts,o=e.xAxes.push(new a.CategoryAxis);o.dataFields.category="tooltip",o.renderer.labels.template.disabled=!0,this._customizeChartTooltip(o.tooltip,i),o.tooltip.events.on("sizechanged",(function(){o.tooltip.dy=-o.tooltip.contentHeight}));var s=e.yAxes.push(new a.ValueAxis),u=s.renderer.labels.template;s.renderer.minLabelPosition=.05,s.renderer.maxLabelPosition=.95,s.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(s.tooltip,i),u.wrap=!0;var c=e.series.push(new a.ColumnSeries);c.dataFields.valueY="value",c.dataFields.categoryX="tooltip",e.cursor=new a.XYCursor,r.series.length>15&&(e.scrollbarX=new i.Scrollbar)}},{key:"_createBarChart",value:function(e,t){var n=t.chartsModule,r=t.mediaInfo.value,i=n.am4core,a=n.am4charts,o=e.yAxes.push(new a.CategoryAxis);o.dataFields.category="tooltip",o.renderer.inversed=!0,o.renderer.labels.template.disabled=!0,this._customizeChartTooltip(o.tooltip,i),o.tooltip.events.on("sizechanged",(function(){o.tooltip.dx=o.tooltip.contentWidth}));var s=e.xAxes.push(new a.ValueAxis),u=s.renderer.labels.template;s.renderer.minLabelPosition=.05,s.renderer.maxLabelPosition=.95,s.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(s.tooltip,i),u.wrap=!0;var c=e.series.push(new a.ColumnSeries);c.dataFields.valueX="value",c.dataFields.categoryY="tooltip",e.cursor=new a.XYCursor,r.series.length>15&&(e.scrollbarY=new i.Scrollbar)}},{key:"_createLineChart",value:function(e,t){var n=t.chartsModule,r=t.mediaInfo.value,i=n.am4core,a=n.am4charts,o=e.xAxes.push(new a.CategoryAxis);o.dataFields.category="tooltip",o.renderer.labels.template.disabled=!0,this._customizeChartTooltip(o.tooltip,i),o.tooltip.events.on("sizechanged",(function(){o.tooltip.dy=-o.tooltip.contentHeight}));var s=e.yAxes.push(new a.ValueAxis),u=s.renderer.labels.template;s.renderer.minLabelPosition=.05,s.renderer.maxLabelPosition=.95,s.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(s.tooltip,i),u.wrap=!0;var c=e.series.push(new a.LineSeries);c.dataFields.categoryX="tooltip",c.dataFields.valueY="value",e.cursor=new a.XYCursor,r.series.length>15&&(e.scrollbarX=new i.Scrollbar)}},{key:"_createXYChart",value:function(e){var t=e.chartDiv,n=e.chartsModule,r=e.mediaInfo.type,i=n.am4core,a=n.am4charts,o=i.create(t,a.XYChart);return o.rtl=Object(x.f)(),"column-chart"===r&&this._createColumnChart(o,e),"bar-chart"===r&&this._createBarChart(o,e),"line-chart"===r&&this._createLineChart(o,e),o}},{key:"_clearMediaRefreshTimer",value:function(){var e=this._refreshTimer;e&&(clearTimeout(e),this._refreshTimer=null)}},{key:"_updateMediaInfoTimestamp",value:function(e){var t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}},{key:"_setupMediaRefreshTimer",value:function(){this._clearMediaRefreshTimer();var e=this.viewModel.activeMediaInfo;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}},{key:"_setRefreshTimeout",value:function(e){var t=this,n=e.refreshInterval,r=e.value;if(n){var i=6e4*n;this._updateMediaInfoTimestamp(r.sourceURL);var a=setInterval((function(){t._updateMediaInfoTimestamp(r.sourceURL)}),i);this._refreshTimer=a}}},{key:"_getImageSource",value:function(e,t){var n=-1!==e.indexOf("?")?"&":"?",r=zt(e.split("#"),2),i=r[0],a=r[1],o=void 0===a?"":a;return"".concat(i).concat(n,"timestamp=").concat(t).concat(o?"#":"").concat(o)}}]),i}(T.a);Object(r.a)([Object(b.a)("viewModel.attributes")],ht.prototype,"attributes",void 0),Object(r.a)([Object(b.a)("viewModel.activeMediaInfoIndex")],ht.prototype,"activeMediaInfoIndex",void 0),Object(r.a)([Object(b.a)("viewModel.description")],ht.prototype,"description",void 0),Object(r.a)([Object(b.a)("viewModel.fieldInfoMap")],ht.prototype,"fieldInfoMap",void 0),Object(r.a)([Object(b.a)("viewModel.layer")],ht.prototype,"layer",void 0),Object(r.a)([Object(b.a)("viewModel.mediaInfos")],ht.prototype,"mediaInfos",void 0),Object(r.a)([Object(b.a)("viewModel.popupTemplate")],ht.prototype,"popupTemplate",void 0),Object(r.a)([Object(b.a)("viewModel.relatedInfos")],ht.prototype,"relatedInfos",void 0),Object(r.a)([Object(b.a)("viewModel.title")],ht.prototype,"title",void 0),Object(r.a)([Object(a.b)({type:ot})],ht.prototype,"viewModel",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/Feature/t9n/Feature")],ht.prototype,"messages",void 0);var ft=ht=Object(r.a)([Object(o.a)("esri.widgets.Feature.FeatureMedia")],ht),pt=n("0OnR"),dt=n("W9Wu"),vt=["$datastore","$map","$layer","$aggregatedfeatures"],yt=i.a.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function bt(e){return gt.apply(this,arguments)}function gt(){return(gt=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.graphic,r=t.view,i=n.isAggregate,a=n.layer,i&&a&&"2d"===(null==r?void 0:r.type)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,r.whenLayerView(a);case 6:if((o=e.sent).createQuery&&o.queryFeatures){e.next=9;break}return e.abrupt("return",[]);case 9:return(s=o.createQuery()).aggregateIds=[n.getObjectId()],e.next=13,o.queryFeatures(s);case 13:return u=e.sent,c=u.features,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return wt.apply(this,arguments)}function wt(){return(wt=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.expressionAttributes,r=t.info,i=t.arcadeUtils,a=t.spatialReference,o=t.map,s=t.graphic,u=t.view,c="expression/"+r.name,l=i.createSyntaxTree(r.expression),h=vt.filter((function(e){return i.hasVariable(l,e)})),e.next=4,i.loadScriptDependencies(l,!0,h);case 4:return f=i.getViewInfo({spatialReference:a}),(p=i.createExecContext(s,f)).useAsync=!0,e.t0=function(e){var t=e.aggregatedFeatures,n=e.arcadeUtils,r=e.featureSetVars,i=e.context,a=e.viewInfo,o=e.map,s=e.graphic;r.forEach((function(e){var r=e.toLowerCase();if("$map"===r&&(i.vars[r]=n.convertMapToFeatureSetCollection({map:o,spatialReference:a.sr})),"$layer"===r&&(i.vars[r]=n.convertFeatureLayerToFeatureSet(s.sourceLayer,a.sr)),"$datastore"===r&&(i.vars[r]=n.convertServiceUrlToWorkspace(s.sourceLayer.url,a.sr)),"$aggregatedfeatures"===r){var u=s.layer,c=u.fields,l=u.objectIdField,h=u.geometryType,f=u.spatialReference,p=u.displayField,d=new dt.default(Nt(Nt({fields:c,objectIdField:l,geometryType:h,spatialReference:f,displayField:p},"feature"===u.type?{templates:u.templates,typeIdField:u.typeIdField,types:u.types}:null),{},{source:t}));i.vars[r]=n.convertFeatureLayerToFeatureSet(d,a.sr)}}))},e.next=9,bt({graphic:s,view:u});case 9:return e.t1=e.sent,e.t2=i,e.t3=h,e.t4=p,e.t5=f,e.t6=o,e.t7=s,e.t8={aggregatedFeatures:e.t1,arcadeUtils:e.t2,featureSetVars:e.t3,context:e.t4,viewInfo:e.t5,map:e.t6,graphic:e.t7},(0,e.t0)(e.t8),d=i.createFunction(l,p),e.next=21,i.executeAsyncFunction(d,p).catch((function(e){return yt.error("arcade-execution-error",{error:e,graphic:s,expressionInfo:r})}));case 21:v=e.sent,n[c]="string"==typeof v?ve(de(v)):Array.isArray(v)?function(e){return'<ul class="esri-widget__list">'.concat(e.map((function(e){return"<li>".concat("string"==typeof e?ve(de(e)):e,"</li>")})).join(""),"</ul>")}(v):v&&"esri.arcade.Dictionary"===v.declaredClass?function(e){return'<table class="esri-widget__table">'.concat(e.keys().map((function(t){var n=e.field(t);return"<tr><th>".concat(t,"</th><td>").concat("string"==typeof n?ve(de(n)):n,"</td></tr>")})).join(""),"</table>")}(v):v;case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e){return jt.apply(this,arguments)}function jt(){return(jt=Ut(regeneratorRuntime.mark((function e(t){var r,i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.popupTemplate,i=t.spatialReference,a=t.graphic,o=t.map,s=t.view,u=r.expressionInfos,c=[],l={},u&&u.length){e.next=4;break}return e.abrupt("return",l);case 4:return e.next=6,Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"CE9W"));case 6:h=e.sent,f=Vt(u);try{for(f.s();!(p=f.n()).done;)d=p.value,c.push(mt({expressionAttributes:l,info:d,arcadeUtils:h,spatialReference:i,map:o,graphic:a,view:s}))}catch(v){f.e(v)}finally{f.f()}return e.next=11,Object(Ze.j)(c);case 11:return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _t=i.a.getLogger("esri.widgets.FeatureViewModel"),xt=function(e){Kt(s,e);var t,n,r,i,a,o=Xt(s);function s(e){var t;return Wt(this,s),(t=o.call(this,e))._handles=new j.a,t._featureAbortController=null,t.graphicChangedThrottled=Object(_.a)(t.graphicChanged,1,$t(t)),t.content=null,t.contentViewModels=[],t.defaultPopupTemplateEnabled=!1,t.formattedAttributes=null,t.lastEditInfo=null,t.relatedInfos=new Map,t.title="",t.view=null,t._handles.add(Object(u.init)($t(t),["graphic","_effectivePopupTemplate"],(function(){return t.graphicChangedThrottled()}))),t}return Zt(s,[{key:"destroy",value:function(){this._clear(),this._cancelFeatureQuery(),this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}},{key:"_effectivePopupTemplate",get:function(){return Object(y.k)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return e=pe(this._effectivePopupTemplate),t=this._sourceLayer,n=new Map,e&&e.forEach((function(e){var r=ie(e.fieldName,t);e.fieldName=r,n.set(r.toLowerCase(),e)})),n;var e,t,n}},{key:"_sourceLayer",get:function(){return $(this.graphic)}},{key:"graphic",set:function(e){this._set("graphic",e?e.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference")}},{key:"map",get:function(){return this.get("view.map")||null},set:function(e){void 0!==e?this._override("map",e):this._clearOverride("map")}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}},{key:"setActiveMedia",value:function(e,t){var n=this.contentViewModels[e];n instanceof ot&&n.setActiveMedia(t)}},{key:"nextMedia",value:function(e){var t=this.contentViewModels[e];t instanceof ot&&t.next()}},{key:"previousMedia",value:function(e){var t=this.contentViewModels[e];t instanceof ot&&t.previous()}},{key:"_clear",value:function(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}},{key:"graphicChanged",value:(a=Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cancelFeatureQuery(),this._clear(),t=this.graphic){e.next=4;break}return e.abrupt("return");case 4:return n=Object(Ze.d)(),this._featureAbortController=n,e.prev=6,e.next=9,this._queryFeature({signal:n.signal});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),_t.error("error","error loading popupTemplate for graphic",{error:e.t0,graphic:t});case 14:this._featureAbortController===n&&(this._featureAbortController=null);case 15:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(){return a.apply(this,arguments)})},{key:"_cancelFeatureQuery",value:function(){var e=this._featureAbortController;e&&e.abort(),this._featureAbortController=null}},{key:"_compileContent",value:function(e){var t=this;if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.map((function(e,n){return"attachments"===e.type?t._compileAttachments(e,n):"custom"===e.type?t._compileCustom(e,n):"fields"===e.type?t._compileFields(e,n):"media"===e.type?t._compileMedia(e,n):"text"===e.type?t._compileText(e,n):void 0})):"string"==typeof e?this._compileText(new pt.a({text:e}),0).text:e}},{key:"_destroyContentViewModels",value:function(){this.contentViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("contentViewModels",[])}},{key:"_compileAttachments",value:function(e,t){var n=this.graphic,r=e.description,i=e.title;return this.contentViewModels[t]=new Ce(Nt({graphic:n},this._compileTitleAndDesc({title:i,description:r}))),e}},{key:"_compileCustom",value:function(e,t){var n=this.graphic,r=e.creator,i=e.destroyer;return this.contentViewModels[t]=new Ne({graphic:n,creator:r,destroyer:i}),e}},{key:"_compileTitleAndDesc",value:function(e){var t=e.title,n=e.description,r=this._fieldInfoMap,i=this._sourceLayer,a=this.graphic,o=this.formattedAttributes,s=a.attributes,u=o.global;return{title:se({attributes:s,fieldInfoMap:r,globalAttributes:u,layer:i,text:t}),description:se({attributes:s,fieldInfoMap:r,globalAttributes:u,layer:i,text:n})}}},{key:"_compileFields",value:function(e,t){var n=this._effectivePopupTemplate,r=this.formattedAttributes,i=e.clone(),a=(null==e?void 0:e.fieldInfos)||(null==n?void 0:n.fieldInfos),o=null==n?void 0:n.expressionInfos,s=Nt(Nt({},r.global),r.content[t]),u=i.description,c=i.title,l=new Be(Nt({attributes:s,expressionInfos:o,fieldInfos:a},this._compileTitleAndDesc({title:c,description:u})));return this.contentViewModels[t]=l,i.fieldInfos=l.formattedFieldInfos.slice(0),i}},{key:"_compileMedia",value:function(e,t){var n=this.graphic,r=this._fieldInfoMap,i=this._effectivePopupTemplate,a=this.relatedInfos,o=this._sourceLayer,s=n.attributes,u=this.formattedAttributes.global,c=e.clone(),l=c.description,h=c.mediaInfos,f=c.title,p=new ot(Nt({activeMediaInfoIndex:c.activeMediaInfoIndex||0,attributes:s,layer:o,fieldInfoMap:r,formattedAttributes:u,mediaInfos:h,popupTemplate:i,relatedInfos:a},this._compileTitleAndDesc({title:f,description:l})));return c.mediaInfos=p.formattedMediaInfos.slice(0),this.contentViewModels[t]=p,c}},{key:"_compileText",value:function(e,t){var n=e.clone(),r=this.graphic,i=this._fieldInfoMap,a=this._sourceLayer;if(n&&n.text){var o=r.attributes;n.text=se({attributes:o,fieldInfoMap:i,globalAttributes:this.formattedAttributes.global,layer:a,text:n.text})}return this.contentViewModels[t]=new Ne({graphic:r,creator:n.text}),n}},{key:"_compileLastEditInfo",value:function(){var e=this._effectivePopupTemplate,t=this._sourceLayer,n=this.graphic;if(e){var r=e.lastEditInfoEnabled,i=null==t?void 0:t.editFieldsInfo;return r&&i?function(e,t){var n=e.creatorField,r=e.creationDateField,i=e.editorField,a=e.editDateField;if(t){var o=t[a];if("number"==typeof o){var s=t[i];return{type:"edit",date:Object(V.b)(o,Q),user:s}}var u=t[r];if("number"==typeof u){var c=t[n];return{type:"create",date:Object(V.b)(u,Q),user:c}}return null}}(i,n.attributes):void 0}}},{key:"_compileTitle",value:function(e){var t=this._fieldInfoMap,n=this._sourceLayer;return se({attributes:this.graphic.attributes,fieldInfoMap:t,globalAttributes:this.formattedAttributes.global,layer:n,text:e})}},{key:"_getTitle",value:(i=Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._effectivePopupTemplate,n=this.graphic,e.abrupt("return",ee(null==t?void 0:t.title,{graphic:n}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_getContent",value:(r=Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._effectivePopupTemplate,n=this.graphic,e.abrupt("return",ee(null==t?void 0:t.content,{graphic:n}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_queryFeature",value:(n=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._featureAbortController,r=this._sourceLayer,i=this.graphic,a=this._effectivePopupTemplate,o=this.spatialReference,s=this.map,u=this.view,e.next=9,Object(Ze.j)({content:this._getContent(),title:this._getTitle()});case 9:if(c=e.sent,l=c.content.value,h=c.title.value,n===this._featureAbortController&&i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Object(Ze.j)({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:Ot({popupTemplate:this._effectivePopupTemplate,spatialReference:o,graphic:i,map:s,view:u}),queryUpdatedFeature:be({graphic:i,popupTemplate:a,layer:r,spatialReference:o},t)});case 16:f=e.sent,p=f.expressionAttributes.value,n===this._featureAbortController&&i&&(this._set("formattedAttributes",this._createFormattedAttributes(l,p)),this._set("title",this._compileTitle(h)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null));case 19:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_createFormattedAttributes",value:function(e,t){var n=this._effectivePopupTemplate,r=this.graphic,i=this.relatedInfos,a=this._sourceLayer,o=this._fieldInfoMap,s=Nt(Nt({},r.attributes),t),u={global:ye({fieldInfos:null==n?void 0:n.fieldInfos,graphic:r,attributes:s,layer:a,fieldInfoMap:o,relatedInfos:i}),content:[]};return Array.isArray(e)&&e.forEach((function(e,t){"fields"===e.type&&e.fieldInfos&&(u.content[t]=ye({fieldInfos:e.fieldInfos,graphic:r,attributes:s,layer:a,fieldInfoMap:o,relatedInfos:i}))})),u}},{key:"_checkForRelatedFeatures",value:function(e){var t=this.graphic,n=this._effectivePopupTemplate;return this._queryRelatedInfos(t,pe(n),e)}},{key:"_queryRelatedInfos",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.relatedInfos,a=this._sourceLayer,i.clear(),!Object(y.k)(a.associatedLayer)){e.next=8;break}return e.next=5,a.associatedLayer.load(r);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=a;case 9:if(o=e.t0){e.next=12;break}return e.abrupt("return");case 12:if((s=n.filter((function(e){return e&&me(e.fieldName)})))&&s.length){e.next=15;break}return e.abrupt("return");case 15:return n.forEach((function(e){return l._configureRelatedInfo(e,o)})),e.next=18,function(e,t){var n=e.layer,r={};return e.relatedInfos.forEach((function(e,i){var a=e.relation;if(!a){var o=new E.a("relation-required","A relation is required on a layer to retrieve related records.");throw et.error(o),o}var s=a.relatedTableId;if("number"!=typeof s){var u=new E.a("A related table ID is required on a layer to retrieve related records.");throw et.error(u),u}var c="".concat(n.url,"/").concat(s),l=tt.get(c),h=l||function(e,t){return Object(Ke.default)(e,{query:{f:"json"},signal:t&&t.signal})}(c,t);l||tt.set(c,h),r[i]=h})),Object(Ze.j)(r)}({relatedInfos:i,layer:o},r);case 18:return u=e.sent,Object.keys(u).forEach((function(e){var t,n=i.get(e.toString()),r=null==(t=u[e])?void 0:t.value;n&&r&&(n.layerInfo=r.data)})),e.next=22,function(e,t){var n=e.graphic,r=e.layer,i={};return e.relatedInfos.forEach((function(e,a){var o;e.layerInfo&&(i[a]=(o=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.layerId.toString(),o=n.layerInfo,s=n.queryTask,u=n.relation,c=n.relatedFields,l=n.outStatistics,!(h=function(e){var t,n=e.originRelationship,r=e.relationships,i=e.layerId;return r&&r.some((function(e){return""+e.relatedTableId===i&&e.id===n.id&&(t=e),!!t})),t}({originRelationship:u,relationships:o.relationships,layerId:a})).relationshipTableId||!h.keyFieldInRelationshipTable){e.next=14;break}return e.next=4,function(e,t,n,r){var i=new Qe.a;return i.outFields=["*"],i.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),i.objectIds=[e.attributes[n.objectIdField]],n.queryRelatedFeatures(i,r)}(t,h,r,i);case 4:if(e.t0=t.attributes[r.objectIdField],f=e.sent[e.t0]){e.next=8;break}return e.abrupt("return",null);case 8:if(p=f.features.map((function(e){return e.attributes[o.objectIdField]})),!((null==l?void 0:l.length)>0&&o.supportsStatistics)){e.next=14;break}return(d=new Xe.a).where=function(e,t,n){for(var r=0,i=[];r<t.length;)i.push("".concat(e," IN (").concat(t.slice(r,1e3+r),")")),r+=1e3;return i.join(" OR ")}(o.objectIdField,p),d.outFields=c,d.outStatistics=l,v={features:Promise.resolve(f),statsFeatures:s.execute(d)},e.abrupt("return",Object(Ze.j)(v));case 14:if(!(y=null==h?void 0:h.keyField)){e.next=18;break}return b=Object(z.q)(Object(z.n)(o.fields,y)),g=function(e,t){var n=t.toLowerCase();for(var r in e)if(r.toLowerCase()===n)return e[r];return null}(t.attributes,u.keyField),m=b?"".concat(y,"=").concat(g):"".concat(y,"='").concat(g,"'"),w=s.execute(new Xe.a({where:m,outFields:n.relatedFields}),i),O=n.outStatistics&&n.outStatistics.length>0&&o.supportsStatistics?s.execute(new Xe.a({where:m,outFields:n.relatedFields,outStatistics:n.outStatistics}),i):null,j={features:w},e.abrupt("return",(O&&(j.statsFeatures=O),Object(Ze.j)(j)));case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return o.apply(this,arguments)})(n,e,r,t))})),Object(Ze.j)(i)}({graphic:t,relatedInfos:i,layer:o},r);case 22:c=e.sent,Object.keys(c).forEach((function(e){var t;!function(e,t){if(t&&e){var n=e.features,r=e.statsFeatures,i=n&&n.value;t.relatedFeatures=i?i.features:[];var a=r&&r.value;t.relatedStatsFeatures=a?a.features:[]}}(null==(t=c[e])?void 0:t.value,i.get(e.toString()))}));case 24:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_configureRelatedInfo",value:function(e,t){var n=this.relatedInfos,r=nt(e.fieldName);if(r){var i=r.layerId,a=r.fieldName;if(i){var o=n.get(i.toString())||function(e,t){var n=function(e,t){if(!t.relationships)return null;var n=null;return t.relationships.some((function(t){return t.id===parseInt(e,10)&&(n=t,!0)})),n}(e,t);if(n){var r="".concat(t.url,"/").concat(n.relatedTableId);return{url:r,queryTask:new $e.a({url:r,sourceSpatialReference:t.spatialReference}),relation:n,relatedFields:[],outStatistics:[]}}}(i,t);o&&(function(e){var t=e.relatedInfo,n=e.fieldName,r=e.fieldInfo;if(t.relatedFields.push(n),r.statisticType){var i=new Ye.a({statisticType:r.statisticType,onStatisticField:n,outStatisticFieldName:n});t.outStatistics.push(i)}}({relatedInfo:o,fieldName:a,fieldInfo:e}),this.relatedInfos.set(i,o))}}}}]),s}(l.a);Object(r.a)([Object(a.b)()],xt.prototype,"_featureAbortController",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"_effectivePopupTemplate",null),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"_fieldInfoMap",null),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"_sourceLayer",null),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"content",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"contentViewModels",void 0),Object(r.a)([Object(a.b)({type:Boolean})],xt.prototype,"defaultPopupTemplateEnabled",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"formattedAttributes",void 0),Object(r.a)([Object(a.b)({type:R.a,value:null})],xt.prototype,"graphic",null),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"lastEditInfo",void 0),Object(r.a)([Object(a.b)()],xt.prototype,"relatedInfos",void 0),Object(r.a)([Object(a.b)()],xt.prototype,"spatialReference",null),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"title",void 0),Object(r.a)([Object(a.b)()],xt.prototype,"map",null),Object(r.a)([Object(a.b)({readOnly:!0})],xt.prototype,"waitingForContent",null),Object(r.a)([Object(a.b)()],xt.prototype,"view",void 0);var kt=xt=Object(r.a)([Object(o.a)("esri.widgets.FeatureViewModel")],xt),St={title:!0,content:!0,lastEditedInfo:!0},Mt=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._contentWidgets=[],i.graphic=null,i.defaultPopupTemplateEnabled=!1,i.label=void 0,i.messages=null,i.messagesURIUtils=null,i.spatialReference=null,i.title=null,i.visibleElements=Nt({},St),i.map=null,i.view=null,i.viewModel=new kt,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this.own(Object(u.init)(this,"viewModel.contentViewModels",(function(){return e._setupContentWidgets()})))}},{key:"destroy",value:function(){this._destroyContentWidgets()}},{key:"castVisibleElements",value:function(e){return Nt(Nt({},St),e)}},{key:"render",value:function(){var e=this.viewModel.waitingForContent;return Object(I.a)("div",{class:this.classes("esri-feature","esri-widget")},Object(I.a)("div",{class:"esri-feature__size-container"},this.renderTitle(),e?this.renderLoading():this.renderContentContainer()))}},{key:"setActiveMedia",value:function(e,t){this.viewModel.setActiveMedia(e,t)}},{key:"nextMedia",value:function(e){this.viewModel.nextMedia(e)}},{key:"previousMedia",value:function(e){this.viewModel.previousMedia(e)}},{key:"renderLoading",value:function(){return Object(I.a)("div",{key:"loading-container",class:"esri-feature__loading-container"},Object(I.a)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}},{key:"renderContentContainer",value:function(){return this.visibleElements.content?Object(I.a)("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null}},{key:"renderTitle",value:function(){var e=this.visibleElements,t=this.title;return e.title?Object(I.a)("h4",{class:"esri-feature__title",innerHTML:t}):null}},{key:"renderContent",value:function(){var e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?Object(I.a)("div",{key:t+"-content-elements"},e.map(this.renderContentElement,this)):null;if("string"==typeof e){var n=this._contentWidgets[0];return!n||n.destroyed?null:Object(I.a)("div",{key:t+"-content"},n.render())}return this.renderNodeContent(e)}},{key:"renderContentElement",value:function(e,t){var n=this.visibleElements;if("boolean"!=typeof n.content&&!n.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);default:return null}}},{key:"renderAttachments",value:function(e){var t=this._contentWidgets[e];if(!t||t.destroyed)return null;var n=t.viewModel,r=n.state,i=n.attachmentInfos;return"loading"===r||i.length>0?Object(I.a)("div",{key:this._buildKey("attachments-element",e),class:this.classes("esri-feature__content-element")},t.render()):null}},{key:"renderCustom",value:function(e,t){var n=e.creator,r=this._contentWidgets[t];return!r||r.destroyed?null:n?Object(I.a)("div",{key:this._buildKey("custom-element",t),class:"esri-feature__content-element"},r.render()):null}},{key:"renderFields",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:Object(I.a)("div",{key:this._buildKey("fields-element",e),class:"esri-feature__content-element"},t.render())}},{key:"renderMedia",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:Object(I.a)("div",{key:this._buildKey("media-element",e),class:"esri-feature__content-element"},t.render())}},{key:"renderLastEditInfo",value:function(){var e=this.visibleElements,t=this.messages,n=this.viewModel.lastEditInfo;if(!n||!e.lastEditedInfo)return null;var r=n.date,i=n.user,a="edit"===n.type?i?t.lastEditedByUser:t.lastEdited:i?t.lastCreatedByUser:t.lastCreated,o=Object(O.a)(a,{date:r,user:i});return Object(I.a)("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},o)}},{key:"renderText",value:function(e,t){var n=this._contentWidgets[t];return!n||n.destroyed?null:e.text?Object(I.a)("div",{key:this._buildKey("text-element",t),class:this.classes("esri-feature__content-element","esri-feature__text")},n.render()):null}},{key:"_buildKey",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"".concat(e,"__").concat(this.get("viewModel.graphic.uid")||"0","-").concat(n.join("-"))}},{key:"_destroyContentWidgets",value:function(){this._contentWidgets.forEach((function(e){e.viewModel=null,e&&!e.destroyed&&e.destroy()})),this._contentWidgets=[]}},{key:"_setupContentWidgets",value:function(){var e=this;this._destroyContentWidgets();var t=this.get("viewModel.content"),n=this.viewModel.contentViewModels;if(Array.isArray(t))t.forEach((function(t,r){"attachments"===t.type&&(e._contentWidgets[r]=new De({displayType:t.displayType,viewModel:n[r]})),"fields"===t.type&&(e._contentWidgets[r]=new We({viewModel:n[r]})),"media"===t.type&&(e._contentWidgets[r]=new ft({viewModel:n[r]})),"text"===t.type&&(e._contentWidgets[r]=new ze({viewModel:n[r]})),"custom"===t.type&&(e._contentWidgets[r]=new ze({viewModel:n[r]}))}),this);else{var r=n[0];r&&!r.destroyed&&(this._contentWidgets[0]=new ze({viewModel:r}))}this.scheduleRender()}}]),n}(C(T.a));Object(r.a)([Object(b.a)("viewModel.graphic")],Mt.prototype,"graphic",void 0),Object(r.a)([Object(b.a)("viewModel.defaultPopupTemplateEnabled")],Mt.prototype,"defaultPopupTemplateEnabled",void 0),Object(r.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Mt.prototype,"label",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/Feature/t9n/Feature")],Mt.prototype,"messages",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/support/t9n/uriUtils")],Mt.prototype,"messagesURIUtils",void 0),Object(r.a)([Object(b.a)("viewModel.spatialReference")],Mt.prototype,"spatialReference",void 0),Object(r.a)([Object(b.a)("viewModel.title")],Mt.prototype,"title",void 0),Object(r.a)([Object(a.b)()],Mt.prototype,"visibleElements",void 0),Object(r.a)([Object(g.a)("visibleElements")],Mt.prototype,"castVisibleElements",null),Object(r.a)([Object(b.a)("viewModel.map")],Mt.prototype,"map",void 0),Object(r.a)([Object(b.a)("viewModel.view")],Mt.prototype,"view",void 0),Object(r.a)([Object(a.b)({type:kt})],Mt.prototype,"viewModel",void 0);var It=Mt=Object(r.a)([Object(o.a)("esri.widgets.Feature")],Mt),Tt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._anchorHandles=new j.a,r.location=null,r.screenLocation=null,r.screenLocationEnabled=!1,r.view=null,r._anchorHandles.add([Object(u.watch)($t(r),["screenLocationEnabled","location","view.size","view.stationary"],(function(){return r._updateScreenPointAndHandle()})),Object(u.watch)($t(r),["view","view.ready"],(function(){return r._wireUpView()}))]),r}return Zt(n,[{key:"destroy",value:function(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}},{key:"_wireUpView",value:function(){var e=this,t="view";if(this._anchorHandles.remove(t),this._viewpointHandle=null,this.get("view.ready")){this._setScreenLocation();var n=this.view,r="3d"===n.type?"camera":"viewpoint",i=Object(u.pausable)(n,r,(function(){return e._viewpointChange()}));this._anchorHandles.add(i,t),this._viewpointHandle=i,this._toggleWatchingViewpoint()}}},{key:"_viewpointChange",value:function(){this._setScreenLocation(),this.emit("view-change")}},{key:"_updateScreenPointAndHandle",value:function(){this._setScreenLocation(),this._toggleWatchingViewpoint()}},{key:"_toggleWatchingViewpoint",value:function(){var e=this._viewpointHandle,t=this.location,n=this.screenLocationEnabled;e&&(t&&n?e.resume():e.pause())}},{key:"_setScreenLocation",value:function(){var e=this.location,t=this.view,n=this.screenLocationEnabled,r=this.get("view.ready"),i=n&&r&&Object(y.k)(e)?t.toScreen(e):null;this._set("screenLocation",i)}}]),n}(n("zm0L").a.EventedAccessor);Object(r.a)([Object(a.b)()],Tt.prototype,"location",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],Tt.prototype,"screenLocation",void 0),Object(r.a)([Object(a.b)()],Tt.prototype,"screenLocationEnabled",void 0),Object(r.a)([Object(a.b)()],Tt.prototype,"view",void 0);var At=Tt=Object(r.a)([Object(o.a)("esri.widgets.support.AnchorElementViewModel")],Tt),Ct=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).visible=!1,r}return n}(At);Object(r.a)([Object(a.b)()],Ct.prototype,"visible",void 0);var Et=Ct=Object(r.a)([Object(o.a)("esri.widgets.CompassViewModel")],Ct),Pt=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._animationDelay=500,i._animationPromise=null,i.location=null,i.view=null,i.viewModel=new Et,i.visible=!1,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this.own([Object(u.watch)(this,"visible",(function(t){return e._visibleChange(t)}))])}},{key:"destroy",value:function(){this._animationPromise=null}},{key:"show",value:function(e){var t=this,n=e.location,r=e.promise;n&&(this.viewModel.location=n),this.visible=!0,r&&r.catch((function(){})).then((function(){return t.hide()}))}},{key:"hide",value:function(){this.visible=!1}},{key:"render",value:function(){var e=this.visible,t=!!this.viewModel.screenLocation,n={"esri-spinner--start":e&&t,"esri-spinner--finish":!e&&t},r=this._getPositionStyles();return Object(I.a)("div",{class:this.classes("esri-spinner",n),styles:r})}},{key:"_visibleChange",value:function(e){var t=this;if(e)this.viewModel.screenLocationEnabled=!0;else{var n=Object(Ze.a)(this._animationDelay);this._animationPromise=n,n.catch((function(){})).then((function(){t._animationPromise===n&&(t.viewModel.screenLocationEnabled=!1,t._animationPromise=null)}))}}},{key:"_getPositionStyles",value:function(){var e=this.viewModel,t=e.screenLocation,n=e.view;if(!n||Object(y.j)(t))return{};var r=n.padding;return{left:t.x-r.left+"px",top:t.y-r.top+"px"}}}]),n}(T.a);Object(r.a)([Object(b.a)("viewModel.location")],Pt.prototype,"location",void 0),Object(r.a)([Object(b.a)("viewModel.view")],Pt.prototype,"view",void 0),Object(r.a)([Object(a.b)({type:Et})],Pt.prototype,"viewModel",void 0),Object(r.a)([Object(b.a)("viewModel.visible")],Pt.prototype,"visible",void 0);var Rt=Pt=Object(r.a)([Object(o.a)("esri.widgets.Spinner")],Pt),Dt=n("l4ZG"),Lt=n("SuVq"),Gt=(n("4GrV"),n("WYax")),qt=n("d+vO"),Ht=n("zq8J"),Jt=n("DXYb"),Yt=(n("H9eC"),n("pqNC")),Qt=n("gvqN"),en=n("rI4C"),tn=n("JYnY"),nn=n("XnA0"),rn=new qt.a({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),an=new qt.a({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),on=new qt.a({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),sn=new qt.a({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"}),un=i.a.getLogger("esri.widgets.Popup.PopupViewModel");function cn(e){var t=e.selectedFeature,n=e.location,r=e.view;return r?"3d"===r.type?t||n:e.get("selectedFeature.geometry")||n:null}var ln=n("KMCJ"),hn=h.a.ofType({key:"type",defaultKeyValue:"button",base:Gt.a,typeMap:{button:qt.a,toggle:Ht.a}}),fn=i.a.getLogger("esri.widgets.Popup.PopupViewModel"),pn=function(e){Kt(s,e);var t,r,i,a,o=Xt(s);function s(e){var t;return Wt(this,s),(t=o.call(this,e))._handles=new j.a,t._pendingPromises=new Set,t._fetchFeaturesController=null,t._selectedClusterFeature=null,t.featurePage=null,t.featuresPerPage=20,t.actions=new hn,t.defaultPopupTemplateEnabled=!1,t.autoCloseEnabled=!1,t.autoOpenEnabled=!0,t.browseClusterEnabled=!1,t.content=null,t.featureViewModels=[],t.highlightEnabled=!0,t.includeDefaultActions=!0,t.selectedClusterBoundaryFeature=new R.a({symbol:new Jt.a({outline:{width:1.5,color:"cyan"},style:"none"})}),t.title=null,t.updateLocationEnabled=!1,t.view=null,t.visible=!1,t.zoomFactor=4,t.zoomToLocation=null,t}return Zt(s,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some((function(e){return e.waitingForContent}))}},{key:"initialize",value:function(){var e=this;this._handles.add([Object(u.init)(this,["autoOpenEnabled","view"],(function(){return e._autoOpenEnabledChange()})),this.on("view-change",(function(){return e._autoClose()})),Object(u.watch)(this,["highlightEnabled","selectedFeature","visible","view"],(function(){return e._highlightFeature()})),Object(u.watch)(this,"view.animation.state",(function(t){return e._animationStateChange(t)})),Object(u.watch)(this,"location",(function(t){return e._locationChange(t)})),Object(u.watch)(this,"selectedFeature",(function(t){return e._selectedFeatureChange(t)})),Object(u.watch)(this,["selectedFeatureIndex","featureCount","featuresPerPage"],(function(){return e._selectedFeatureIndexChange()})),Object(u.watch)(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],(function(){return e._setGraphicOnFeatureViewModels()})),Object(u.watch)(this,"featureViewModels",(function(){return e._featureViewModelsChange()})),this.on("trigger-action",(function(t){return function(e){var t=e.view,n=e.event.action,r=t&&t.popup;if(!n)return Promise.reject(new E.a("trigger-action:missing-arguments","Event has no action"));if(!r)return Promise.reject(new E.a("trigger-action:missing-arguments","view.popup is missing"));var i,a,o=n.disabled,s=n.id;if(!s)return Promise.reject(new E.a("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new E.a("trigger-action:invalid-action","Action is disabled"));if(s===rn.id)return(i=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.location,r=t.selectedFeature,i=t.view,a=t.zoomFactor,o=cn(t)){e.next=4;break}return s=new E.a("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:i}),e.abrupt("return",(un.error(s),Promise.reject(s)));case 4:return u=i.scale/a,c=t.get("selectedFeature.geometry")||n,l=c&&"point"===c.type&&function(e,t){if("3d"!==(null==t?void 0:t.type)||!e||"esri.Graphic"!==e.declaredClass)return!0;var n=t.getViewForGraphic(e);if(n&&"whenGraphicBounds"in n){var r=!1;return n.whenGraphicBounds(e,{useViewElevation:!0}).then((function(e){r=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]})).catch((function(){var t=new E.a("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});un.error(t)})),r}return!0}(r,i),rn.active=!0,rn.disabled=!0,e.next=9,t.view.goTo({target:o,scale:l?u:void 0});case 9:rn.active=!1,rn.disabled=!1,t.zoomToLocation=null,l&&(t.location=c);case 13:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})(r.viewModel);if(s===on.id)return(a=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedFeature,"2d"===(null==(r=t.view)?void 0:r.type)){e.next=4;break}throw i=new E.a("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r}),un.error(i),i;case 4:if(n.isAggregate){e.next=7;break}throw a=new E.a("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),un.error(a),a;case 7:return o=n.sourceLayer,e.next=10,r.whenLayerView(o);case 10:return s=e.sent,(u=s.createQuery()).aggregateIds=[n.getObjectId()],on.active=!0,on.disabled=!0,e.next=15,s.queryExtent(u);case 15:return c=e.sent,l=c.extent,e.next=19,r.goTo({target:l});case 19:on.active=!1,on.disabled=!1;case 21:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})(r.viewModel);if(r.viewModel.browseClusterEnabled=!1,s===sn.id&&(r.featureMenuOpen=!0,r.viewModel.browseClusterEnabled=!0),s===an.id){r.close();var u=r.selectedFeature;if(!u)return Promise.reject(new E.a("trigger-action:"+an.id,"selectedFeature is required",{selectedFeature:u}));var c=u.sourceLayer;return c?c.remove(u):t.graphics.remove(u),Promise.resolve()}return Promise.resolve()}({event:t,view:e.view})})),Object(u.whenFalse)(this,"waitingForResult",(function(){return e._waitingForResultChange()})),Object(u.watch)(this,["features","view","view.map","view.spatialReference"],(function(){return e._updateFeatureVMs()})),Object(u.watch)(this,["view.scale"],this._viewScaleChange),Object(u.whenFalse)(this,"visible",(function(){return e.browseClusterEnabled=!1})),Object(u.watch)(this,"browseClusterEnabled",(function(t){return t?e.enableClusterBrowsing():e.disableClusterBrowsing()}))])}},{key:"destroy",value:function(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){var e=this._get("allActions")||new hn;e.removeAll();var t=this.actions,n=this.defaultActions,r=this.defaultPopupTemplateEnabled,i=this.includeDefaultActions,a=this.selectedFeature,o=i?n.concat(t):t,s=a&&("function"==typeof a.getEffectivePopupTemplate&&a.getEffectivePopupTemplate(r)||a.popupTemplate),u=s&&s.actions,c=s&&s.overwriteActions?u:u?u.concat(o):o;return c&&c.filter(Boolean).forEach((function(t){return e.add(t)})),e}},{key:"defaultActions",get:function(){var e,t=this._get("defaultActions")||new hn;return t.removeAll(),t.addMany(null!=(e=this.selectedFeature)&&e.isAggregate?[on.clone(),sn.clone()]:[rn.clone()]),t}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(e){var t=e||[];this._set("features",t);var n=this.pendingPromisesCount,r=this.promiseCount,i=this.selectedFeatureIndex,a=r&&t.length;a&&n&&-1===i?this.selectedFeatureIndex=0:a&&-1!==i||(this.selectedFeatureIndex=t.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(e){var t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Object(Dt.b)(e)),this._set("location",e)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(e){var t=this;if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((function(e){t._pendingPromises.add(e),e.then((function(n){t._pendingPromises.has(e)&&t._updateFeatures(n),t._updatePendingPromises(e)}),(function(){return t._updatePendingPromises(e)}))})),this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){var e=this.features,t=this.selectedFeatureIndex;return-1===t?null:e[t]||null}},{key:"selectedFeatureIndex",get:function(){var e=this._get("selectedFeatureIndex");return"number"==typeof e?e:-1},set:function(e){var t=this.featureCount;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"centerAtLocation",value:function(){var e=this.view,t=cn(this);if(!t){var n=new E.a("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return fn.error(n),Promise.reject(n)}return this.callGoTo({target:{target:t,scale:e.scale}})}},{key:"clear",value:function(){this.set({promises:[],features:[],content:null,title:null,location:null})}},{key:"fetchFeatures",value:function(e,t){var n=this.view;if(!n||!e){var r=new E.a("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:n});return fn.error(r),Promise.reject(r)}return n.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}},{key:"open",value:function(e){var t=Nt(Nt({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{},{visible:!0}),n=t.fetchFeatures;delete t.fetchFeatures,n&&this._setFetchFeaturesPromises(t.location),this.set(t)}},{key:"triggerAction",value:function(e){var t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}},{key:"next",value:function(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}},{key:"previous",value:function(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}},{key:"disableClusterBrowsing",value:function(){var e;(e=this).features=e.features.filter((function(e){return e.isAggregate})),this._clearBrowsedClusterGraphics()}},{key:"enableClusterBrowsing",value:(a=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedFeature,"2d"===(null==(r=t.view)?void 0:r.type)){e.next=4;break}throw i=new E.a("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:r}),un.error(i),i;case 4:if(n.isAggregate){e.next=7;break}throw a=new E.a("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),un.error(a),a;case 7:return o=n.sourceLayer,e.next=10,r.whenLayerView(o);case 10:return s=e.sent,(u=s.createQuery()).aggregateIds=[n.getObjectId()],e.next=15,s.queryExtent(u);case 15:c=e.sent,l=c.extent,t.selectedClusterBoundaryFeature.geometry=l,r.graphics.add(t.selectedClusterBoundaryFeature);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this);case 2:return e.next=4,function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedFeature,"2d"===(null==(r=t.view)?void 0:r.type)){e.next=4;break}throw i=new E.a("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:r}),un.error(i),i;case 4:if(n.isAggregate){e.next=7;break}throw a=new E.a("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),un.error(a),a;case 7:return o=n.sourceLayer,e.next=10,r.whenLayerView(o);case 10:return s=e.sent,(u=s.createQuery()).aggregateIds=[n.getObjectId()],sn.active=!0,sn.disabled=!0,e.next=15,s.queryFeatures(u);case 15:c=e.sent,l=c.features,sn.active=!1,sn.disabled=!1,t.features=[n].concat(l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_animationStateChange",value:function(e){this.zoomToLocation||(rn.disabled="waiting-for-target"===e)}},{key:"_clearBrowsedClusterGraphics",value:function(){var e,t=null==(e=this.view)?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}},{key:"_viewScaleChange",value:function(){var e;(null!=(e=this.selectedFeature)&&e.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1)}},{key:"_locationChange",value:function(e){var t=this.selectedFeature;this.updateLocationEnabled&&e&&(!t||t.geometry)&&this.centerAtLocation()}},{key:"_selectedFeatureIndexChange",value:function(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}},{key:"_featureViewModelsChange",value:function(){this.featurePage=this.featureCount>1?1:null}},{key:"_setGraphicOnFeatureViewModels",value:function(){var e=this.features,t=this.featureCount,n=this.featurePage,r=this.featuresPerPage,i=this.featureViewModels;if(null!==n){var a=((n-1)*r+t)%t;i.slice(a,a+r).forEach((function(t,n){t&&!t.graphic&&(t.graphic=e[a+n])}))}}},{key:"_selectedFeatureChange",value:(i=Ut(regeneratorRuntime.mark((function e(t){var r,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r=this.location,i=this.updateLocationEnabled,a=this.view,!this.browseClusterEnabled){e.next=11;break}if(this._selectedClusterFeature&&(a.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),!t.isAggregate){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,function(){var e=Ut(regeneratorRuntime.mark((function e(t,r){var i,a,o,s,u,c,l,h,f,p,d,v,b,g,m,w,O,j,_,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(i=function e(t){return t&&"opacity"in t?t.opacity*e(t.parent):1}(t.layer||t.sourceLayer),!Object(y.k)(t.symbol)||Object(y.k)(r)&&!0===r.ignoreGraphicSymbol){e.next=13;break}if("web-style"!==t.symbol.type){e.next=10;break}return e.next=7,t.symbol.fetchSymbol(Object(y.k)(r)?r.abortOptions:null);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.symbol.clone();case 11:return a=e.t0,e.abrupt("return",(Object(en.a)(a,null,i),a));case 13:return o=Object(y.k)(r)&&r.renderer||t.get("layer.renderer")||t.get("sourceLayer.renderer"),e.next=16,o.getSymbolAsync(t,r);case 16:if(s=e.sent){e.next=19;break}return e.abrupt("return");case 19:if("web-style"!==s.type){e.next=25;break}return e.next=22,s.fetchSymbol(Object(y.k)(r)?r.abortOptions:null);case 22:e.t1=e.sent,e.next=26;break;case 25:e.t1=s.clone();case 26:if(s=e.t1,!(!("visualVariables"in o)||"visualVariables"in o&&!o.visualVariables||"visualVariables"in o&&o.visualVariables&&!o.visualVariables.length)){e.next=29;break}return e.abrupt("return",s);case 29:if(!o.arcadeRequiredForVisualVariables||!Object(y.j)(r)&&!Object(y.j)(r.arcade)){e.next=35;break}return u=Nt({},Object(y.q)(r)),e.next=33,Object(Qt.e)();case 33:u.arcade=e.sent,r=u;case 35:return e.next=37,Promise.resolve().then(n.bind(null,"0pea"));case 37:c=e.sent,l=[],h=[],f=[],p=[],d=Vt(o.visualVariables),e.prev=43,d.s();case 45:if((v=d.n()).done){e.next=59;break}b=v.value,e.t2=b.type,e.next="color"===e.t2?50:"opacity"===e.t2?52:"rotation"===e.t2?54:"size"===e.t2?56:57;break;case 50:return l.push(b),e.abrupt("break",57);case 52:return h.push(b),e.abrupt("break",57);case 54:return p.push(b),e.abrupt("break",57);case 56:b.target||f.push(b);case 57:e.next=45;break;case 59:e.next=64;break;case 61:e.prev=61,e.t3=e.catch(43),d.e(e.t3);case 64:return e.prev=64,d.f(),e.finish(64);case 67:if(g=!!l.length&&l[l.length-1],m=g?c.getColor(g,t,r):null,w=!!h.length&&h[h.length-1],O=w?c.getOpacity(w,t,r):null,null!=i&&(O=null!=O?O*i:i),Object(en.a)(s,m,O),!f.length){e.next=73;break}return j=c.getAllSizes(f,t,r),e.next=73,Object(en.d)(s,j);case 73:for(_=0,x=p;_<x.length;_++)k=x[_],Object(en.c)(s,c.getRotationAngle(k,t,r),k.axis);return e.abrupt("return",s);case 75:case"end":return e.stop()}}),e,null,[[43,61,64,67]])})));return function(t,n){return e.apply(this,arguments)}}()(t);case 8:return t.symbol=e.sent,this._selectedClusterFeature=t,e.abrupt("return",void a.graphics.add(this._selectedClusterFeature));case 11:!i&&r||!t.geometry?i&&!t.geometry&&this.centerAtLocation().then((function(){o.location=a.center.clone()})):this.location=Object(y.q)(this._getPointFromGeometry(t.geometry));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_waitingForResultChange",value:function(){!this.featureCount&&this.promises&&(this.visible=!1)}},{key:"_setFetchFeaturesPromises",value:function(e){var t=this;return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((function(e){var n=e.clientOnlyGraphics,r=e.promisesPerLayerView,i=Promise.resolve(n),a=r.map((function(e){return e.promise}));t.promises=[i].concat(Bt(a))}))}},{key:"_destroyFeatureVMs",value:function(){this.featureViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("featureViewModels",[])}},{key:"_updateFeatureVMs",value:function(){var e=this,t=this.selectedFeature,n=this.features,r=this.featureViewModels;if(null!=t&&t.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),n&&n.length){var i=r.slice(0),a=[];n.forEach((function(n,r){if(n){var o=null;if(i.some((function(e,t){return e&&e.graphic===n&&(o=e,i.splice(t,1)),!!o})),o)a[r]=o;else{var s,u,c=new kt({defaultPopupTemplateEnabled:e.defaultPopupTemplateEnabled,spatialReference:null==(s=e.view)?void 0:s.spatialReference,graphic:n===t?n:null,map:null==(u=e.view)?void 0:u.map,view:e.view});a[r]=c}}})),i.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("featureViewModels",a)}}},{key:"_getScreenPoint",value:function(e){var t=this.view;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}},{key:"_autoOpenEnabledChange",value:function(){var e=this,t="auto-fetch-features",n=this._handles,r=this.autoOpenEnabled;if(n.remove(t),r&&this.view){var i=this.view.on("click",(function(t){"mouse"===t.pointerType&&0!==t.button||e._fetchFeaturesAndOpen(t)}),tn.b.WIDGET);n.add(i,t)}}},{key:"_cancelFetchingFeatures",value:function(){var e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}},{key:"_fetchFeaturesWithController",value:function(e,t){var n=this;this._cancelFetchingFeatures();var r=Object(Ze.d)(),i=r.signal;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");var a=this.fetchFeatures(e,{signal:i,event:t});return a.catch((function(){})).then((function(){n._fetchFeaturesController=null,n.notifyChange("waitingForResult")})),a}},{key:"_fetchFeaturesAndOpen",value:function(e){var t=e.screenPoint,n=e.mapPoint,r=this.view;this._fetchFeaturesWithController(t,e).then((function(e){var t=e.clientOnlyGraphics,i=e.promisesPerLayerView,a=e.location,o=[Promise.resolve(t)].concat(Bt(i.map((function(e){return e.promise}))));return r.popup.open({location:a||n,promises:o}),e}))}},{key:"_updatePendingPromises",value:function(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}},{key:"_autoClose",value:function(){this.autoCloseEnabled&&(this.visible=!1)}},{key:"_getPointFromGeometry",value:function(e){return Object(y.j)(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}},{key:"_getLayerView",value:(r=Ut(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.when();case 2:return e.abrupt("return",t.whenLayerView(n));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"_highlightFeature",value:(t=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="highlight",this._handles.remove(t),n=this.selectedFeature,r=this.highlightEnabled,i=this.view,a=this.visible,n&&i&&r&&a){e.next=5;break}return e.abrupt("return");case 5:if(o=n.layer,s=n.sourceLayer,o&&o instanceof Yt.a){e.next=8;break}return e.abrupt("return");case 8:return"map-notes"===(null==s?void 0:s.type)&&(o=s),u=this._getLayerView(i,o),this._highlightPromise=u,e.next=13,u;case 13:if((c=e.sent)&&Object(nn.a)(c)&&this._highlightPromise===u&&this.selectedFeature&&this.highlightEnabled&&this.visible){e.next=16;break}return e.abrupt("return");case 16:l="objectIdField"in o&&o.objectIdField,h=n.attributes,f=c.highlight(h&&l&&h[l]||n),this._handles.add(f,t);case 18:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_updateFeatures",value:function(e){var t=this.features;if(e&&e.length)if(t.length){var n=e.filter((function(e){return-1===t.indexOf(e)}));this.features=t.concat(n)}else this.features=e}}]),s}(Object(ln.a)(At));Object(r.a)([Object(a.b)()],pn.prototype,"featurePage",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"featuresPerPage",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"isLoadingFeature",null),Object(r.a)([Object(a.b)({type:hn})],pn.prototype,"actions",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"active",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"allActions",null),Object(r.a)([Object(a.b)({type:Boolean})],pn.prototype,"defaultPopupTemplateEnabled",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"autoCloseEnabled",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"autoOpenEnabled",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"browseClusterEnabled",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"content",void 0),Object(r.a)([Object(a.b)({type:hn,readOnly:!0})],pn.prototype,"defaultActions",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"featureCount",null),Object(r.a)([Object(a.b)()],pn.prototype,"features",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"featureViewModels",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"highlightEnabled",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"includeDefaultActions",void 0),Object(r.a)([Object(a.b)({type:Lt.a})],pn.prototype,"location",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"pendingPromisesCount",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"selectedClusterBoundaryFeature",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"waitingForResult",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"promiseCount",null),Object(r.a)([Object(a.b)()],pn.prototype,"promises",null),Object(r.a)([Object(a.b)({value:null,readOnly:!0})],pn.prototype,"selectedFeature",null),Object(r.a)([Object(a.b)({value:-1})],pn.prototype,"selectedFeatureIndex",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"selectedFeatureViewModel",null),Object(r.a)([Object(a.b)({readOnly:!0})],pn.prototype,"state",null),Object(r.a)([Object(a.b)()],pn.prototype,"title",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"updateLocationEnabled",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"view",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"visible",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"zoomFactor",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"zoomToLocation",void 0),Object(r.a)([Object(a.b)()],pn.prototype,"centerAtLocation",null);var dn=pn=Object(r.a)([Object(o.a)("esri.widgets.Popup.PopupViewModel")],pn),vn="esri-popup__button",yn="esri-popup__icon",bn={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};function gn(e,t){return void 0===t?"esri-popup__"+e:"esri-popup__".concat(e,"-").concat(t)}var mn=i.a.getLogger("esri.widgets.Popup"),wn={closeButton:!0,featureNavigation:!0},On=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._blurClose=!1,i._blurContainer=!1,i._containerNode=null,i._mainContainerNode=null,i._featureMenuNode=null,i._actionsMenuNode=null,i._focusClose=!1,i._focusContainer=!1,i._focusDockButton=!1,i._focusFeatureMenuButton=!1,i._focusActionsMenuButton=!1,i._focusFirstFeature=!1,i._focusFirstAction=!1,i._handles=new j.a,i._pointerOffsetInPx=16,i._spinner=null,i._feature=null,i._featureMenuIntersectionObserverCallback=function(e){var t=zt(e,1)[0];null!=t&&t.isIntersecting&&i.viewModel.featurePage++},i._featureMenuIntersectionObserver=new IntersectionObserver(i._featureMenuIntersectionObserverCallback),i._displaySpinnerThrottled=Object(_.a)((function(){return i._displaySpinner()}),0),i.actions=null,i.alignment="auto",i.autoCloseEnabled=null,i.autoOpenEnabled=null,i.defaultPopupTemplateEnabled=null,i.content=null,i.collapsed=!1,i.collapseEnabled=!0,i.dockEnabled=!1,i.featureCount=null,i.featureMenuOpen=!1,i.features=null,i.goToOverride=null,i.highlightEnabled=null,i.location=null,i.label=void 0,i.maxInlineActions=3,i.messages=null,i.messagesCommon=null,i.promises=null,i.selectedFeature=null,i.selectedFeatureIndex=null,i.spinnerEnabled=!0,i.title=null,i.updateLocationEnabled=null,i.view=null,i.viewModel=new dn,i.visible=null,i.visibleElements=Nt({},wn),i._addSelectedFeatureIndexHandle(),i.own([Object(u.watch)($t(i),"viewModel.screenLocation",(function(){return i._positionContainer()})),Object(u.watch)($t(i),["viewModel.active","dockEnabled"],(function(){return i._toggleScreenLocationEnabled()})),Object(u.watch)($t(i),"viewModel.screenLocation",(function(e,t){!!e!=!!t&&i.reposition()})),Object(u.watch)($t(i),["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],(function(){return i.reposition()})),Object(u.watch)($t(i),"spinnerEnabled",(function(e){return i._spinnerEnabledChange(e)})),Object(u.watch)($t(i),"viewModel.view.size",(function(e,t){return i._updateDockEnabledForViewSize(e,t)})),Object(u.watch)($t(i),"viewModel.view",(function(e,t){return i._viewChange(e,t)})),Object(u.watch)($t(i),"viewModel.view.ready",(function(e,t){return i._viewReadyChange(e,t)})),Object(u.watch)($t(i),["viewModel.waitingForResult","viewModel.location"],(function(){i._hideSpinner(),i._displaySpinnerThrottled()})),Object(u.watch)($t(i),"selectedFeatureWidget.viewModel.title",(function(e){return i._setTitleFromFeatureWidget(e)})),Object(u.watch)($t(i),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],(function(){return i._setContentFromFeatureWidget()})),Object(u.whenFalse)($t(i),"collapsed",(function(){var e,t;"xsmall"===(null==(e=i.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&i.viewModel.active&&i.collapseEnabled&&i.viewModel.centerAtLocation()})),Object(u.on)($t(i),"viewModel.allActions","change",(function(){return i._watchActions()})),Object(u.init)($t(i),"viewModel.allActions",(function(){return i._watchActions()})),Object(u.watch)($t(i),"viewModel.featureViewModels",(function(){return i._featureMenuViewportScrollTop()}))]),i}return Zt(n,[{key:"destroy",value:function(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(e=this._handles)||e.destroy(),this._unobserveFeatureMenuObserver(),null==(t=this._featureMenuIntersectionObserver)||t.disconnect(),this._handles=null}},{key:"actionsMenuId",get:function(){return this.id+"-actions-menu"}},{key:"actionsMenuButtonId",get:function(){return this.id+"-actions-menu-button"}},{key:"featureMenuId",get:function(){return this.id+"-feature-menu"}},{key:"titleId",get:function(){return this.id+"-popup-title"}},{key:"contentId",get:function(){return this.id+"-popup-content"}},{key:"hasContent",get:function(){var e,t,n,r,i;return!!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||(null==(n=this.selectedFeatureWidget)||null==(r=n.viewModel)?void 0:r.content):null==(i=this.viewModel)?void 0:i.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return!!this.viewModel.active&&this._get("actionsMenuOpen")},set:function(e){this._set("actionsMenuOpen",!!e)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||bn},set:function(e){var t=Nt({},bn),n=this.get("viewModel.view.breakpoints"),r={};n&&(r.width=n.xsmall,r.height=n.xsmall);var i=Nt(Nt({},t),e),a=Nt(Nt({},t.breakpoint),r),o=i.breakpoint;!0===o?i.breakpoint=a:"object"==typeof o&&(i.breakpoint=Nt(Nt({},a),o)),this._set("dockOptions",i),this._setCurrentDockPosition(),this.reposition()}},{key:"featureNavigationEnabled",set:function(e){Object(m.c)(mn,"featureNavigationEnabled",{replacement:"visibleElements.featureNavigation",version:"4.15"}),this.visibleElements=Nt(Nt({},this.visibleElements),{},{featureNavigation:e})}},{key:"selectedFeatureWidget",get:function(){var e=this._feature,t=this.visibleElements,n=this.viewModel.selectedFeatureViewModel,r=Nt(Nt({},t),{},{title:!1});return n?(e?(e.viewModel=n,e.visibleElements=r):this._feature=new It({viewModel:n,visibleElements:r}),this._feature):null}},{key:"castVisibleElements",value:function(e){return Nt(Nt({},wn),e)}},{key:"blur",value:function(){this.viewModel.active||mn.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}},{key:"clear",value:function(){this.viewModel.clear()}},{key:"close",value:function(){this.visible=!1}},{key:"fetchFeatures",value:function(e,t){return this.viewModel.fetchFeatures(e,t)}},{key:"focus",value:function(){this.viewModel.active||mn.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}},{key:"next",value:function(){return this.viewModel.next()}},{key:"open",value:function(e){var t,n;this._handles.remove("selected-index");var r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:!!e&&!!e.actionsMenuOpen,featureMenuOpen:!!e&&!!e.featureMenuOpen};"xsmall"===(null==(t=this.viewModel)||null==(n=t.view)?void 0:n.widthBreakpoint)&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._addSelectedFeatureIndexHandle()}},{key:"previous",value:function(){return this.viewModel.previous()}},{key:"reposition",value:function(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}},{key:"triggerAction",value:function(e){this.viewModel.triggerAction(e)}},{key:"render",value:function(){var e,t,n,r,i=this.actionsMenuOpen,a=this.dockEnabled,o=this.featureMenuVisible,s=this.dividedActions,u=this.currentAlignment,c=this.currentDockPosition,l=this.viewModel.active,h=s.menuActions,f=null==(e=this.selectedFeature)||null==(t=e.layer)?void 0:t.title,p=null==(n=this.selectedFeature)||null==(r=n.layer)?void 0:r.id,d={"esri-popup--aligned-top-center":"top-center"===u,"esri-popup--aligned-bottom-center":"bottom-center"===u,"esri-popup--aligned-top-left":"top-left"===u,"esri-popup--aligned-bottom-left":"bottom-left"===u,"esri-popup--aligned-top-right":"top-right"===u,"esri-popup--aligned-bottom-right":"bottom-right"===u,"esri-popup--is-docked":l&&a,"esri-popup--shadow":l&&!a,"esri-popup--is-docked-top-left":"top-left"===c,"esri-popup--is-docked-top-center":"top-center"===c,"esri-popup--is-docked-top-right":"top-right"===c,"esri-popup--is-docked-bottom-left":"bottom-left"===c,"esri-popup--is-docked-bottom-center":"bottom-center"===c,"esri-popup--is-docked-bottom-right":"bottom-right"===c,"esri-popup--feature-menu-open":o,"esri-popup--actions-menu-open":l&&h.length>1&&i};return Object(I.a)("div",{class:this.classes("esri-popup",d),role:"presentation","data-layer-title":f,"data-layer-id":p,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},l?[this.renderMainContainer(),this.renderPointer()]:null)}},{key:"renderLoadingIcon",value:function(){return Object(I.a)("span",{"aria-hidden":"true",class:this.classes(yn,"esri-icon-loading-indicator","esri-rotating")})}},{key:"renderNavigationLoading",value:function(){var e=this.messagesCommon;return this.viewModel.pendingPromisesCount?Object(I.a)("div",{key:gn("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}},{key:"renderPreviousIcon",value:function(){var e=Object(x.f)(),t={"esri-icon-right-triangle-arrow":e,"esri-popup__pagination-previous-icon--rtl":e,"esri-icon-left-triangle-arrow":!e,"esri-popup__pagination-previous-icon":!e};return Object(I.a)("span",{"aria-hidden":"true",class:this.classes(yn,t)})}},{key:"renderPreviousButton",value:function(){var e=this.messages;return Object(I.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(vn,"esri-popup__pagination-previous"),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}},{key:"renderNextIcon",value:function(){var e=Object(x.f)(),t={"esri-icon-left-triangle-arrow":e,"esri-popup__pagination-next-icon--rtl":e,"esri-icon-right-triangle-arrow":!e,"esri-popup__pagination-next-icon":!e};return Object(I.a)("span",{"aria-hidden":"true",class:this.classes(yn,t)})}},{key:"renderNextButton",value:function(){var e=this.messages;return Object(I.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(vn,"esri-popup__pagination-next"),"aria-label":e.next,title:e.next},this.renderNextIcon())}},{key:"renderFeatureMenuButton",value:function(){var e=this.featureMenuOpen,t=this.featureMenuId,n=this.messagesCommon,r=this.viewModel,i=r.featureCount,a=r.selectedFeatureIndex;return Object(I.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(vn,"esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":n.menu,title:n.menu},this._getPageText(i,a))}},{key:"renderNavigationButtons",value:function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}},{key:"renderDockIcon",value:function(){var e=this.dockEnabled,t=this._wouldDockTo(),n={"esri-icon-minimize":e,"esri-popup__icon--dock-icon":!e,"esri-icon-dock-right":!e&&("top-right"===t||"bottom-right"===t),"esri-icon-dock-left":!e&&("top-left"===t||"bottom-left"===t),"esri-icon-maximize":!e&&"top-center"===t,"esri-icon-dock-bottom":!e&&"bottom-center"===t};return Object(I.a)("span",{"aria-hidden":"true",class:this.classes(n,yn)})}},{key:"renderDockButton",value:function(){var e,t,n,r=this.dockEnabled,i=this.messages,a=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,o=r?i.undock:i.dock;return"xsmall"!==a&&null!=(n=this.dockOptions)&&n.buttonEnabled?Object(I.a)("div",{role:"button","aria-label":o,title:o,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(vn,"esri-popup__button--dock")},this.renderDockIcon()):null}},{key:"renderTitle",value:function(){var e=this.viewModel.title,t=this.titleId,n=this.collapsible,r=this.contentCollapsed,i=this.messagesCommon,a={"esri-popup__header-container--button":n},o=Object(I.a)("h2",{class:"esri-popup__header-title",innerHTML:e}),s=n?Object(I.a)("button",{key:e+"--collapsible",id:t,title:r?i.expand:i.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",a),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed},o):Object(I.a)("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",a)},o);return e?s:null}},{key:"renderCloseIcon",value:function(){return Object(I.a)("span",{"aria-hidden":"true",class:this.classes(yn,"esri-icon-close")})}},{key:"renderCloseButton",value:function(){var e=this.visibleElements,t=this.messagesCommon;return e.closeButton?Object(I.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:vn,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}},{key:"renderHeader",value:function(){return Object(I.a)("header",{class:"esri-popup__header"},this.renderTitle(),Object(I.a)("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))}},{key:"renderContentContainer",value:function(){var e=this.contentId,t=this.hasContent,n=this.contentCollapsed,r=this.viewModel.content;return t&&!n?Object(I.a)("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:"esri-popup__content"},this.renderContent()):null}},{key:"renderActionsMenuButton",value:function(){var e=this.actionsMenuId,t=this.actionsMenuButtonId,n=this.actionsMenuOpen,r=this.dividedActions,i=this.messagesCommon,a=n?i.close:i.open;return r.menuActions.length?Object(I.a)("div",{key:gn("actions-menu-button"),class:this.classes(vn,"esri-popup__actions-menu-button"),role:"button",id:t,"aria-haspopup":"true","aria-controls":n?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":a,title:a},Object(I.a)("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null}},{key:"renderMenuActions",value:function(){var e=this,t=this.actionsMenuId,n=this.actionsMenuButtonId,r=this.actionsMenuOpen,i=this.dividedActions,a=i.menuActions,o=i.inlineActions;return a.length&&r?Object(I.a)("ul",{id:t,role:"menu","aria-labelledby":n,key:gn("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},a.toArray().map((function(t,n){return e.renderAction({action:t,index:n+o.length,type:"menu-item"})}))):null}},{key:"renderInlineActions",value:function(){var e=this,t=this.dividedActions.inlineActions;return!!t.length&&t.toArray().map((function(t,n){return e.renderAction({action:t,index:n,type:"inline"})}))}},{key:"renderInlineActionsContainer",value:function(){var e=this.dividedActions,t=e.inlineActions,n=e.menuActions,r=!!t.length,i=!!n.length;return r||i?Object(I.a)("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":i.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}},{key:"renderNavigation",value:function(){return this.featureNavigationVisible?Object(I.a)("section",{key:gn("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null}},{key:"renderFooter",value:function(){var e=this.featureNavigationVisible,t=this.dividedActions,n=t.inlineActions,r=t.menuActions,i=!!n.length,a={"esri-popup__footer--has-pagination":e,"esri-popup__footer--has-actions":i,"esri-popup__footer--has-actions-menu":!!r.length};return e||i?Object(I.a)("div",{key:gn("feature-buttons"),class:this.classes("esri-popup__footer",a)},this.renderInlineActionsContainer(),this.renderNavigation()):null}},{key:"renderFeatureMenuContainer",value:function(){var e=this.messages,t=this.viewModel,n=t.featureViewModels,r=t.isLoadingFeature,i=Object(O.a)(e.selectedFeatures,{total:n.length});return Object(I.a)("section",{key:gn("menu"),class:"esri-popup__feature-menu"},Object(I.a)("h2",{class:"esri-popup__feature-menu-header"},i),Object(I.a)("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:x.i},this.renderFeatureMenu(),Object(I.a)("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?Object(I.a)("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))}},{key:"renderPointer",value:function(){return this.dockEnabled?null:Object(I.a)("div",{key:gn("pointer"),class:"esri-popup__pointer",role:"presentation"},Object(I.a)("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))}},{key:"renderMainContainer",value:function(){var e=this.dockEnabled,t=this.currentAlignment,n=this.currentDockPosition,r=this.titleId,i=this.contentId,a=this.collapsible,o=this.hasContent,s=this.contentCollapsed,u=this.visibleElements,c=this.viewModel.title,l="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===n||"top-center"===n||"top-right"===n,h="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===n||"bottom-center"===n||"bottom-right"===n,f={"esri-popup--shadow":e,"esri-popup--is-collapsible":a,"esri-popup--is-collapsed":s};return Object(I.a)("div",{class:this.classes("esri-popup__main-container","esri-widget",f),tabIndex:u.closeButton?null:-1,role:"dialog","aria-labelledby":c?r:"","aria-describedby":o&&!s?i:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},l?this.renderFooter():null,l?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null)}},{key:"renderContent",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?Object(I.a)("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}},{key:"renderActionText",value:function(e){return Object(I.a)("span",{key:"text",class:"esri-popup__action-text"},e)}},{key:"renderActionIcon",value:function(e){var t,n=this._getActionClass(e),r=this._getActionImage(e),i=(Ft(t={"esri-icon-loading-indicator":e.active,"esri-rotating":e.active},yn,!!n),Ft(t,"esri-popup__action-image",!e.active&&!!r),t);return n&&(i[n]=!e.active),Object(I.a)("span",{key:"icon","aria-hidden":"true",class:this.classes(yn,i),styles:this._getIconStyles(r)})}},{key:"renderAction",value:function(e){var t=e.action,n=e.index,r=e.type,i=this._getActionTitle(t),a={"esri-popup__action":"toggle"!==t.type,"esri-popup__action-toggle":"toggle"===t.type,"esri-popup__action-toggle--on":"toggle"===t.type&&t.value,"esri-popup__button--disabled":t.disabled},o=[this.renderActionIcon(t),this.renderActionText(i)],s="menu-item"===r?Object(I.a)("li",{key:t.uid,role:"menuitem",tabIndex:0,title:i,"aria-label":i,class:this.classes(vn,a),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":n,onclick:this._triggerAction,onkeydown:this._triggerAction},o):Object(I.a)("div",{key:t.uid,role:"button",tabIndex:0,title:i,"aria-label":i,class:this.classes(vn,a),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":n,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?s:null}},{key:"renderFeatureMenuItem",value:function(e,t){var n=this.messages,r=this.messagesCommon,i=this.viewModel,a=i.selectedFeatureIndex,o=e===i.selectedFeatureViewModel,s={"esri-popup__feature-menu-item--selected":o},u=o?Object(I.a)("span",{key:gn("feature-menu-selected-feature-"+a),title:n.selectedFeature,"aria-label":n.selectedFeature,class:"esri-icon-check-mark"}):null,c=Object(I.a)("span",{innerHTML:e.title||r.untitled});return Object(I.a)("li",{role:"menuitem",tabIndex:-1,key:gn("feature-menu-feature-"+a),class:this.classes(s,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},Object(I.a)("span",{class:"esri-popup__feature-menu-title"},c,u))}},{key:"renderFeatureMenu",value:function(){var e=this,t=this.featureMenuId,n=this.viewModel.featureViewModels;return n.length>1?Object(I.a)("ol",{class:"esri-popup__feature-menu-list",id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},n.filter((function(e){return!!e.graphic})).map((function(t,n){return e.renderFeatureMenuItem(t,n)}))):null}},{key:"_getActionTitle",value:function(e){var t=this.messages,n=this.selectedFeature,r=this.messagesCommon,i=e.id,a=null==n?void 0:n.attributes,o="zoom-to-feature"===i?Object(O.a)(e.title,{messages:t}):"remove-selected-feature"===i?Object(O.a)(e.title,{messages:r}):"zoom-to-clustered-features"===i||"browse-clustered-features"===i?Object(O.a)(e.title,{messages:t}):e.title;return o&&a?Object(O.a)(o,a):o}},{key:"_getActionClass",value:function(e){var t=this.selectedFeature,n=null==t?void 0:t.attributes,r=e.className,i=e.image||r?r:"esri-icon-default-action";return i&&n?Object(O.a)(i,n):i}},{key:"_getActionImage",value:function(e){var t=this.selectedFeature,n=null==t?void 0:t.attributes,r=e.image;return r&&n?Object(O.a)(r,n):r}},{key:"_createFeatureUpdatedAnimation",value:function(){return Object(x.b)("enter","esri-popup--feature-updated")}},{key:"_getInlineActionCount",value:function(){var e=this.maxInlineActions,t=this.featureNavigationVisible;if("number"!=typeof e)return null;var n=Math.round(e);return Math.max(t?n-1:n,0)}},{key:"_watchActions",value:function(){var e=this,t=this.viewModel.allActions;this.notifyChange("dividedActions");var n="actions";this._handles.remove(n),t&&t.forEach((function(t){e._handles.add(Object(u.watch)(t,["active","className","disabled","id","title","image","visible"],(function(){return e.scheduleRender()})),n)}))}},{key:"_divideActions",value:function(){var e=this.viewModel.allActions,t=this._getInlineActionCount(),n=null===t,r=0===t;return{inlineActions:n?e.slice(0):r?new h.a:e.slice(0,t),menuActions:n?new h.a:e.slice(r?0:t)}}},{key:"_featureMenuOpenChanged",value:function(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}},{key:"_actionsMenuOpenChanged",value:function(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}},{key:"_setTitleFromFeatureWidget",value:function(e){this.selectedFeatureWidget&&(this.viewModel.title=e||"")}},{key:"_setContentFromFeatureWidget",value:function(){var e=this.selectedFeatureWidget;e&&(this.viewModel.content=e)}},{key:"_unobserveFeatureMenuObserver",value:function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}},{key:"_featureMenuIntersectionObserverCreated",value:function(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}},{key:"_handleFeatureMenuKeyup",value:function(e){"Escape"===Object(w.a)(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}},{key:"_handleActionMenuKeyup",value:function(e){"Escape"===Object(w.a)(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}},{key:"_handleFeatureMenuItemKeyup",value:function(e){var t=Object(w.a)(e),n=this._featureMenuNode,r=e.currentTarget["data-feature-index"];if(n){var i=n.querySelectorAll("li"),a=i.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),i[i.length-1].focus()):(e.stopPropagation(),i[0].focus()):(e.stopPropagation(),i[(r+1+a)%a].focus()):(e.stopPropagation(),i[(r-1+a)%a].focus())}}},{key:"_handleActionMenuItemKeyup",value:function(e){var t=Object(w.a)(e),n=this._actionsMenuNode,r=e.currentTarget["data-action-index"];if(n){var i=n.querySelectorAll("li"),a=i.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),i[i.length-1].focus()):(e.stopPropagation(),i[0].focus()):(e.stopPropagation(),i[(r+1+a)%a].focus()):(e.stopPropagation(),i[(r-1+a)%a].focus())}}},{key:"_handleMainKeyup",value:function(e){var t=Object(w.a)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())}},{key:"_spinnerEnabledChange",value:function(e){if(this._destroySpinner(),e){var t=this.get("viewModel.view");this._createSpinner(t)}}},{key:"_hideSpinner",value:function(){var e=this._spinner;e&&(e.location=null,e.hide())}},{key:"_displaySpinner",value:function(){var e=this._spinner;if(e){var t=this.viewModel,n=t.location;t.waitingForResult?e.show({location:n}):e.hide()}}},{key:"_getIconStyles",value:function(e){return{"background-image":e?"url(".concat(e,")"):""}}},{key:"_addSelectedFeatureIndexHandle",value:function(){var e=this,t=Object(u.watch)(this,"viewModel.selectedFeatureIndex",(function(t,n){return e._selectedFeatureIndexUpdated(t,n)}));this._handles.add(t,"selected-index")}},{key:"_selectedFeatureIndexUpdated",value:function(e,t){this.featureCount&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}},{key:"_destroySelectedFeatureWidget",value:function(){var e=this._feature;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}},{key:"_isScreenLocationWithinView",value:function(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}},{key:"_isOutsideView",value:function(e){var t=e.popupHeight,n=e.popupWidth,r=e.screenLocation,i=e.side,a=e.view;if(isNaN(n)||isNaN(t)||!a||!r)return!1;var o=a.padding;return"right"===i&&r.x+n/2>a.width-o.right||"left"===i&&r.x-n/2<o.left||"top"===i&&r.y-t<o.top||"bottom"===i&&r.y+t>a.height-o.bottom}},{key:"_calculateAutoAlignment",value:function(e){if("auto"!==e)return e;var t=this._pointerOffsetInPx,n=this._containerNode,r=this._mainContainerNode,i=this.viewModel,a=i.screenLocation,o=i.view;if(Object(y.j)(a)||!o||!n)return"top-center";if(!this._isScreenLocationWithinView(a,o))return this._get("currentAlignment")||"top-center";function s(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}var u=r?window.getComputedStyle(r,null):null,c=u?s(u.getPropertyValue("max-height")):0,l=u?s(u.getPropertyValue("height")):0,h=n.getBoundingClientRect(),f=h.height,p=h.width+t,d=Math.max(f,c,l)+t,v=this._isOutsideView({popupHeight:d,popupWidth:p,screenLocation:a,side:"right",view:o}),b=this._isOutsideView({popupHeight:d,popupWidth:p,screenLocation:a,side:"left",view:o}),g=this._isOutsideView({popupHeight:d,popupWidth:p,screenLocation:a,side:"top",view:o}),m=this._isOutsideView({popupHeight:d,popupWidth:p,screenLocation:a,side:"bottom",view:o});return b?g?"bottom-right":"top-right":v?g?"bottom-left":"top-left":g?m?"top-center":"bottom-center":"top-center"}},{key:"_callCurrentAlignment",value:function(e){return"function"==typeof e?e.call(this):e}},{key:"_getCurrentAlignment",value:function(){var e=this.alignment;return this.dockEnabled||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}},{key:"_setCurrentAlignment",value:function(){this._set("currentAlignment",this._getCurrentAlignment())}},{key:"_setCurrentDockPosition",value:function(){this._set("currentDockPosition",this._getCurrentDockPosition())}},{key:"_calculatePositionResult",value:function(e){var t=["left","right"];return Object(x.f)()&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}},{key:"_callDockPosition",value:function(e){return"function"==typeof e?e.call(this):e}},{key:"_getDockPosition",value:function(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}},{key:"_getCurrentDockPosition",value:function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}},{key:"_wouldDockTo",value:function(){return this.dockEnabled?null:this._getDockPosition()}},{key:"_calculateAutoDockPosition",value:function(e){var t;if("auto"!==e)return e;var n=null==(t=this.viewModel)?void 0:t.view,r=Object(x.f)()?"top-left":"top-right";if(!n)return r;var i=n.padding||{left:0,right:0,top:0,bottom:0},a=n.width-i.left-i.right,o=n.breakpoints;return o&&a<=o.xsmall?"bottom-center":r}},{key:"_positionContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._containerNode;if(e&&(this._containerNode=e),e){var t=this.viewModel.screenLocation,n=e.getBoundingClientRect(),r=n.width,i=this._calculatePositionStyle(t,r);i&&(e.style.top=i.top,e.style.left=i.left,e.style.bottom=i.bottom,e.style.right=i.right)}}},{key:"_calculateFullWidth",value:function(e){var t=this.currentAlignment,n=this._pointerOffsetInPx;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+n:e}},{key:"_calculateAlignmentPosition",value:function(e,t,n,r){var i=this.currentAlignment,a=this._pointerOffsetInPx,o=r/2,s=n.height-t,u=n.width-e,c=this.view.padding;return"bottom-center"===i?{top:t+a-c.top,left:e-o-c.left}:"top-left"===i?{bottom:s+a-c.bottom,right:u+a-c.right}:"bottom-left"===i?{top:t+a-c.top,right:u+a-c.right}:"top-right"===i?{bottom:s+a-c.bottom,left:e+a-c.left}:"bottom-right"===i?{top:t+a-c.top,left:e+a-c.left}:"top-center"===i?{bottom:s+a-c.bottom,left:e-o-c.left}:void 0}},{key:"_calculatePositionStyle",value:function(e,t){var n=this.dockEnabled,r=this.view;if(r){if(n)return{left:"",top:"",right:"",bottom:""};if(!Object(y.j)(e)&&t){var i=this._calculateFullWidth(t),a=this._calculateAlignmentPosition(e.x,e.y,r,i);return a?{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}:void 0}}}},{key:"_viewChange",value:function(e,t){e&&t&&(this.close(),this.clear())}},{key:"_viewReadyChange",value:function(e,t){if(e){var n=this.get("viewModel.view");this._wireUpView(n)}else t&&(this.close(),this.clear())}},{key:"_wireUpView",value:function(e){(this._destroySpinner(),e)&&(this.spinnerEnabled&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions))}},{key:"_dockingThresholdCrossed",value:function(e,t,n){var r=zt(e,2),i=r[0],a=r[1],o=zt(t,2),s=o[0],u=o[1],c=n.width,l=n.height;return i<=c&&s>c||i>c&&s<=c||a<=l&&u>l||a>l&&u<=l}},{key:"_updateDockEnabledForViewSize",value:function(e,t){if(e&&t){var n=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=n.left+n.right,i=n.top+n.bottom,a=[],o=[];a[0]=e[0]-r,a[1]=e[1]-i,o[0]=t[0]-r,o[1]=t[1]-i;var s=this.dockOptions;this._dockingThresholdCrossed(a,o,s.breakpoint)&&this._setDockEnabledForViewSize(s),this._setCurrentDockPosition()}}},{key:"_focusDockButtonNode",value:function(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}},{key:"_closeButtonNodeUpdated",value:function(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}},{key:"_mainContainerNodeUpdated",value:function(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}},{key:"_featureMenuNodeUpdated",value:function(e){if(this._featureMenuNode=e,e&&this._focusFirstFeature){this._focusFirstFeature=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}},{key:"_actionsMenuNodeUpdated",value:function(e){if(this._actionsMenuNode=e,e&&this._focusFirstAction){this._focusFirstAction=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}},{key:"_focusFeatureMenuButtonNode",value:function(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}},{key:"_focusActionsMenuButtonNode",value:function(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}},{key:"_featureMenuViewportScrollTop",value:function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}},{key:"_toggleScreenLocationEnabled",value:function(){var e=this.dockEnabled,t=this.viewModel;t&&(t.screenLocationEnabled=t.active&&!e)}},{key:"_shouldDockAtCurrentViewSize",value:function(e){var t,n,r=e.breakpoint,i=null==(t=this.viewModel)||null==(n=t.view)?void 0:n.ui;if(!i)return!1;var a=i.width,o=i.height;if(isNaN(a)||isNaN(o))return!1;var s=r.hasOwnProperty("width")&&a<=r.width,u=r.hasOwnProperty("height")&&o<=r.height;return s||u}},{key:"_setDockEnabledForViewSize",value:function(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}},{key:"_getPageText",value:function(e,t){return this.featureNavigationVisible?Object(O.a)(this.messages.pageText,{index:t+1,total:e}):null}},{key:"_destroySpinner",value:function(){var e=this._spinner,t=this.view;e&&(t&&t.ui&&t.ui.remove(this._spinner,"popup-spinner"),e.destroy(),this._spinner=null)}},{key:"_createSpinner",value:function(e){e&&(this._spinner=new Rt({view:e}),e.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))}},{key:"_toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"_close",value:function(){this.close(),this.view&&this.view.focus()}},{key:"_toggleDockEnabled",value:function(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}},{key:"_toggleFeatureMenu",value:function(){var e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}},{key:"_toggleActionsMenu",value:function(){var e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}},{key:"_triggerAction",value:function(e){var t=e.currentTarget["data-action-index"],n=this.viewModel.allActions.getItemAt(t);n&&"toggle"===n.type&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(t)}},{key:"_selectFeature",value:function(e){var t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}},{key:"_next",value:function(){this.next()}},{key:"_previous",value:function(){this.previous()}}]),n}(C(T.a));Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"actionsMenuId",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"actionsMenuButtonId",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"featureMenuId",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"titleId",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"contentId",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"hasContent",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"featureNavigationVisible",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"collapsible",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"featureMenuVisible",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"contentCollapsed",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"dividedActions",null),Object(r.a)([Object(b.a)("viewModel.actions")],On.prototype,"actions",void 0),Object(r.a)([Object(a.b)()],On.prototype,"actionsMenuOpen",null),Object(r.a)([Object(a.b)()],On.prototype,"alignment",void 0),Object(r.a)([Object(b.a)("viewModel.autoCloseEnabled")],On.prototype,"autoCloseEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.autoOpenEnabled")],On.prototype,"autoOpenEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.defaultPopupTemplateEnabled")],On.prototype,"defaultPopupTemplateEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.content")],On.prototype,"content",void 0),Object(r.a)([Object(a.b)()],On.prototype,"collapsed",void 0),Object(r.a)([Object(a.b)()],On.prototype,"collapseEnabled",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"currentAlignment",null),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"currentDockPosition",null),Object(r.a)([Object(a.b)()],On.prototype,"dockOptions",null),Object(r.a)([Object(a.b)()],On.prototype,"dockEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.featureCount")],On.prototype,"featureCount",void 0),Object(r.a)([Object(a.b)()],On.prototype,"featureMenuOpen",void 0),Object(r.a)([Object(b.a)("viewModel.features")],On.prototype,"features",void 0),Object(r.a)([Object(a.b)()],On.prototype,"featureNavigationEnabled",null),Object(r.a)([Object(b.a)("viewModel.goToOverride")],On.prototype,"goToOverride",void 0),Object(r.a)([Object(b.a)("viewModel.highlightEnabled")],On.prototype,"highlightEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.location")],On.prototype,"location",void 0),Object(r.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],On.prototype,"label",void 0),Object(r.a)([Object(a.b)()],On.prototype,"maxInlineActions",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/widgets/Popup/t9n/Popup")],On.prototype,"messages",void 0),Object(r.a)([Object(a.b)(),Object(S.a)("esri/t9n/common")],On.prototype,"messagesCommon",void 0),Object(r.a)([Object(b.a)("viewModel.promises")],On.prototype,"promises",void 0),Object(r.a)([Object(b.a)("viewModel.selectedFeature")],On.prototype,"selectedFeature",void 0),Object(r.a)([Object(b.a)("viewModel.selectedFeatureIndex")],On.prototype,"selectedFeatureIndex",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],On.prototype,"selectedFeatureWidget",null),Object(r.a)([Object(a.b)()],On.prototype,"spinnerEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.title")],On.prototype,"title",void 0),Object(r.a)([Object(b.a)("viewModel.updateLocationEnabled")],On.prototype,"updateLocationEnabled",void 0),Object(r.a)([Object(b.a)("viewModel.view")],On.prototype,"view",void 0),Object(r.a)([Object(a.b)({type:dn}),Object(M.a)(["triggerAction","trigger-action"])],On.prototype,"viewModel",void 0),Object(r.a)([Object(b.a)("viewModel.visible")],On.prototype,"visible",void 0),Object(r.a)([Object(a.b)()],On.prototype,"visibleElements",void 0),Object(r.a)([Object(g.a)("visibleElements")],On.prototype,"castVisibleElements",null),Object(r.a)([Object(k.a)()],On.prototype,"_close",null),Object(r.a)([Object(k.a)()],On.prototype,"_toggleDockEnabled",null),Object(r.a)([Object(k.a)()],On.prototype,"_toggleFeatureMenu",null),Object(r.a)([Object(k.a)()],On.prototype,"_toggleActionsMenu",null),Object(r.a)([Object(k.a)()],On.prototype,"_triggerAction",null),Object(r.a)([Object(k.a)()],On.prototype,"_selectFeature",null),Object(r.a)([Object(k.a)()],On.prototype,"_next",null),Object(r.a)([Object(k.a)()],On.prototype,"_previous",null);var jn=On=Object(r.a)([Object(o.a)("esri.widgets.Popup")],On),_n=[0,0];function xn(e){e&&(Object(c.b)(e),e.parentNode&&e.parentNode.removeChild(e))}var kn=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._freqInfo={freq:16,time:750},e._overlayRenderTaskHandle=null,e.height=0,e.position=null,e.resizing=!1,e.root=null,e.surface=null,e.suspended=!0,e.ui=null,e.userContent=null,e.width=0,e.widthBreakpoint=null,e.handles.add([e.watch("cursor",(function(t){var n=e.surface;n&&n.setAttribute("data-cursor",t)})),e.watch("interacting",(function(t){var n=e.surface;n&&n.setAttribute("data-interacting",t.toString())}))]),e}return Zt(n,[{key:"initialize",value:function(){var e=this;this.handles.add(this.watch("ui",(function(t,n){return e._handleUIChange(t,n)}))),this._wireUI(this.ui),this.handles.add([this.on("focus",(function(){return e.notifyChange("focused")})),this.on("blur",(function(){return e.notifyChange("focused")}))])}},{key:"destroy",value:function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}},{key:"container",set:function(e){var t=this,n=this._get("container");if(n!==e){var r="dom-size";if(this.handles.remove(r),this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),xn(this.root),this._set("root",null),Object(c.d)(this.userContent,n),xn(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");var i=document.createElement("div");i.className="esri-view-user-storage",Object(c.d)(e,i),e.appendChild(i),this._set("userContent",i);var a=document.createElement("div");a.className="esri-view-root",e.insertBefore(a,e.firstChild),this._set("root",a);var o=document.createElement("div");o.className="esri-view-surface",o.setAttribute("role","application"),o.tabIndex=0,a.appendChild(o),this._set("surface",o);var l=new v;a.appendChild(l.surface),this._set("overlay",l),l.watch("needsRender",(function(e){e&&!t._overlayRenderTaskHandle?t._overlayRenderTaskHandle=Object(s.a)({render:function(){t.overlay.render()}}):t._overlayRenderTaskHandle&&(t._overlayRenderTaskHandle.remove(),t._overlayRenderTaskHandle=null)})),this.forceDOMReadyCycle(),this.handles.add(Object(u.init)(this,"size",(function(e){var t=zt(e,2),n=t[0],r=t[1],i="esri-view-surface--inset-outline";n>=document.body.clientWidth||r>=document.body.clientHeight?o.classList.add(i):o.classList.remove(i)})),r),this._set("container",e),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}}},{key:"focused",get:function(){var e=document.activeElement===this.surface;return document.hasFocus()&&e}},{key:"popup",get:function(){return this._get("popup")||new jn({view:this})},set:function(e){var t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e)}},{key:"size",get:function(){return[this.width,this.height]}},{key:"blur",value:function(){this.surface&&this.surface.blur()}},{key:"focus",value:function(){this.surface&&this.surface.focus()}},{key:"pageToContainer",value:function(e,t,n){var r=this.position;return e-=r[0],t-=r[1],n?(n[0]=e,n[1]=t):n=[e,t],n}},{key:"containerToPage",value:function(e,t,n){var r=this.position;return e+=r[0],t+=r[1],n?(n[0]=e,n[1]=t):n=[e,t],n}},{key:"_handleUIChange",value:function(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e)}},{key:"_wireUI",value:function(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([Object(u.init)(this,"root",(function(t){e.container=t?function(e){var t=document.createElement("div");return e.appendChild(t),t}(t):null})),Object(u.init)(this,"popup",(function(t,n){var r="popup";n&&e.remove(n,r),t&&(t.view=e.view,e.add(t,{key:r,position:"manual"}))}))],"ui"))}},{key:"_stopMeasuring",value:function(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}},{key:"_startMeasuring",value:function(){var e,t=this,n=this._freqInfo;n.freq=16,n.time=750,this.handles.add([(e=function(){n.freq=16,n.time=750},window.addEventListener("resize",e),{remove:function(){window.removeEventListener("resize",e)}}),Object(s.a)({prepare:function(e){var n=t._measure(),r=t._freqInfo;if(r.time+=e.deltaTime,n&&(r.freq=16,t._get("resizing")||t._set("resizing",!0)),!(r.time<r.freq)){r.time=0;var i=t._position();r.freq=i||n?16:Math.min(750,2*r.freq),!n&&r.freq>=512&&t._get("resizing")&&t._set("resizing",!1)}}})],"measuring"),this._measure(),this._position()}},{key:"_measure",value:function(){var e=this.container,t=e?e.clientWidth:0,n=e?e.clientHeight:0;if(0===t||0===n)return this.suspended||this._set("suspended",!0),!1;var r=this.width,i=this.height;return t===r&&n===i?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:i,width:t,height:n}),!0)}},{key:"_position",value:function(){var e=this.position,t=function(e){var t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return _n[0]=n.left+t.pageXOffset,_n[1]=n.top+t.pageYOffset,_n}(this.container);return!(e&&t[0]===e[0]&&t[1]===e[1]||(this._set("position",[t[0],t[1]]),0))}},{key:"forceDOMReadyCycle",value:function(){}}]),n}(e);return Object(r.a)([Object(a.b)({value:null,cast:function(e){return Object(c.a)(e)}})],t.prototype,"container",null),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"focused",null),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"height",void 0),Object(r.a)([Object(a.b)({type:jn})],t.prototype,"popup",null),Object(r.a)([Object(a.b)({type:v})],t.prototype,"overlay",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"position",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"resizing",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"root",void 0),Object(r.a)([Object(a.b)({value:null,readOnly:!0})],t.prototype,"size",null),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"surface",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"suspended",void 0),Object(r.a)([Object(a.b)()],t.prototype,"ui",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"userContent",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"width",void 0),Object(r.a)([Object(a.b)()],t.prototype,"widthBreakpoint",void 0),t=Object(r.a)([Object(o.a)("esri.views.DOMContainer")],t)};function Sn(e){return e&&"focus"in e}},er0w:function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},evjZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c}));var r=n("f/qv"),i=n("srIe"),a=n("TDcG"),o=function e(t){Wt(this,e),this.autoDestroy=!1,this.properties=t};function s(e){var t=e.constructor.__accessorMetadata__,n=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!n){var a=Object.create(t.properties),s=t.autoDestroy;for(var u in a)a[u]=Object(r.a)(a[u]);(t=new o(a)).autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new o({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Object(i.d)(e.constructor.__accessorMetadata__)}function u(e,t){var n=function(e){return s(e).properties}(e),r=n[t];return r||(r=n[t]={}),r}function c(e,t){return Object(a.c)(e,t,h)}var l=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function h(e){return l.test(e)?"replace":"merge"}},eydS:function(e,t,n){"use strict";var r=n("vn/o"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(c){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,i,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),o=0,a=0;o<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,a,s=t||e.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if((a=o[i])>4)c[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&e[n++],a--;a>1?c[r++]=65533:i<65536?c[r++]=i:(c[r++]=55296|(i-=65536)>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},ezna:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return l}));var r=n("s7YA"),i="__begin__",a="__end__",o=new RegExp(i,"ig"),s=new RegExp(a,"ig"),u=new RegExp("^"+i,"i"),c=new RegExp(a+"$","i");function l(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function h(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function f(e){var t=h(e);if(!t)return null;switch(t.type){case"conventional":return d(t.expression);case"arcade":return t.expression}return null}function p(e){var t=h(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(v);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function d(e){var t;return e?(t=Object(r.c)(e,(function(e){return i+'$feature["'+e+'"]'+a})),t=u.test(t)?t.replace(u,""):'"'+t,t=(t=c.test(t)?t.replace(c,""):t+'"').replace(o,'" + ').replace(s,' + "')):t='""',t}var v=/^\s*\{([^}]+)\}\s*$/i,y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,g=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=y.exec(e)||b.exec(e);return t?t[1]||t[3]:(t=g.exec(e))?t[2]:null}},"f/qv":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n("wSAH");var r=n("ohva");function i(e,t){var n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&i(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function a(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(r.h)(e)||Object(r.k)(e)||Object(r.l)(e)||Object(r.f)(e)||Object(r.i)(e)||Object(r.g)(e)||Object(r.j)(e)||Object(r.d)(e)||Object(r.e)(e))return Object(r.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){var t=new Map;return e.forEach((function(e,n){t.set(n,a(e))})),t}if(e instanceof Set){var n=new Set;return e.forEach((function(e){n.add(a(e))})),n}var i,o=e;if("function"==typeof o.clone)i=o.clone();else if("function"==typeof o.map&&"function"==typeof o.forEach)i=o.map(a);else if("function"==typeof o.notifyChange&&"function"==typeof o.watch)i=o.clone();else{i={};var s,u=Vt(Object.getOwnPropertyNames(e));try{for(u.s();!(s=u.n()).done;){var c=s.value;i[c]=a(e[c])}}catch(l){u.e(l)}finally{u.f()}}return i}function o(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},f4Nx:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return _})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return w})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return j}));var r=n("srIe"),i=n("s7YA"),a=n("LIH3"),o={102113:!0,102100:!0,3857:!0,3785:!0},s={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},u='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',c=[-20037508.342788905,20037508.342788905],l=[-20037508.342787,20037508.342787],h={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:l,dx:1e-5},102100:{wkTemplate:u,valid:c,origin:l,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:l,dx:1e-5},3857:{wkTemplate:u,valid:c,origin:l,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function f(e,t){return!Object(r.j)(e)&&!Object(r.j)(t)&&(e===t||(null!=e.wkid||null!=t.wkid?e.wkid===t.wkid||b(e)&&b(t)||null!=t.latestWkid&&e.wkid===t.latestWkid||null!=e.latestWkid&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function p(e){return _(e)&&e.wkid?h[e.wkid]:null}function d(e){return!!_(e)&&(e.wkid?null==a.a[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function v(e){return!(m(e)||O(e))}function y(e){return _(e)&&4326===e.wkid}function b(e){return _(e)&&null!=e.wkid&&!0===o[e.wkid]}function g(e){return 104971===e||104905===e}function m(e){return _(e)&&null!=e.wkid&&g(e.wkid)}function w(e){return 104903===e}function O(e){return _(e)&&null!=e.wkid&&w(e.wkid)}function j(e){return _(e)&&null!=e.wkid&&!0===s[e.wkid]}function _(e){return Object(r.k)(e)&&(null!=e.wkid&&e.wkid>=2e3||null!=e.wkt)}var x={wkid:4326,wkt:Object(i.c)(h[4326].wkTemplate,{Central_Meridian:"0.0"})},k={wkid:102100,latestWkid:3857}},"f8+1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function e(){Wt(this,e),this.closedFromButton=new r.t};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},fB0p:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e){var t=r.a(Me||(Me=Rt(["\n    vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\n      vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;\n      vec2 pixelSz = vec2(1.0) / widthHeight;\n      vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\n      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n      return vec4(result, clipCoord.zw);\n    }\n  "]))),n=r.a(Ie||(Ie=Rt(["\n\n    vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\n      vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;\n      vec2 pixelSz = vec2(1.0) / widthHeight;\n      vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;\n      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n      return vec4(result, clipCoord.zw);\n    }\n  "])));e.vertex.code.add(t),e.vertex.code.add(n),e.fragment.code.add(t),e.fragment.code.add(n)}},fDnD:function(e,t,n){"use strict";var r=n("4bvL");function i(e,t){if(!(this instanceof i))return new i(e,t);this.files={},this.comment=null,this.root="",e&&this.load(e,t),this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=n("tkqm")).load=n("vI6n"),i.support=n("Mi3D"),i.defaults=n("itLX"),i.utils=n("nnpW"),i.base64={encode:function(e){return r.encode(e)},decode:function(e){return r.decode(e)}},i.compressions=n("7/DV"),e.exports=i},fFCC:function(e,t,n){"use strict";var r=n("9aYe"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(e,t){if(void 0===e||!e.length)return 0;var n="string"!==r.getTypeOf(e);void 0===t&&(t=0);var a=0;t^=-1;for(var o=0,s=e.length;o<s;o++)a=n?e[o]:e.charCodeAt(o),t=t>>>8^i[255&(t^a)];return-1^t}},fFEv:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return m}));var r=n("srIe"),i=n("OKTS"),a=n("Cy1f"),o=n("5DEt"),s=n("QmHG"),u=n("EVMh"),c=n("tiP8"),l=n("2hxh"),h=Object(s.d)();function f(e,t,n,i,a,l,f){var d=Object(c.d)(t),y=n.tolerance;if(!d)if(e.boundingInfo)Object(u.a)(0===e.primitiveType),function e(t,n,i,a,u,c){if(!Object(r.j)(t)){var l=function(e,t,n){return Object(o.v)(n,1/(t[0]-e[0]),1/(t[1]-e[1]),1/(t[2]-e[2]))}(n,i,p);if(Object(s.s)(h,t.getBBMin()),Object(s.r)(h,t.getBBMax()),Object(r.k)(u)&&u.applyToAabb(h),function(e,t,n,r){return function(e,t,n,r,i){var a=(e[0]-r-t[0])*n[0],o=(e[3]+r-t[0])*n[0],s=Math.min(a,o),u=Math.max(a,o),c=(e[1]-r-t[1])*n[1],l=(e[4]+r-t[1])*n[1];if((u=Math.min(u,Math.max(c,l)))<0)return!1;if((s=Math.max(s,Math.min(c,l)))>u)return!1;var h=(e[2]-r-t[2])*n[2],f=(e[5]+r-t[2])*n[2];return!((u=Math.min(u,Math.max(h,f)))<0)&&(!((s=Math.max(s,Math.min(h,f)))>u)&&s<1/0)}(e,t,n,r)}(h,n,l,a)){var f=t.primitiveIndices,d=t.indices,y=t.position,b=f?f.length:d.length/3;if(b>S){var g=t.getChildren();if(void 0!==g){for(var m=0;m<8;++m)void 0!==g[m]&&e(g[m],n,i,a,u,c);return}}v(n,i,0,b,d,y,f,u,c)}}}(e.boundingInfo,i,a,y,l,f);else{var b=e.indices.get("position"),g=e.vertexAttributes.get("position");v(i,a,0,b.length/3,b,g,void 0,l,f)}}var p=Object(a.e)(),d=Object(a.e)();function v(e,t,n,i,a,o,s,u,c){if(s)return function(e,t,n,i,a,o,s,u,c){for(var l=o.data,h=o.stride||o.size,f=e[0],p=e[1],v=e[2],y=t[0]-f,b=t[1]-p,m=t[2]-v,w=n;w<i;++w){var O,j,_,x=s[w],k=3*x,S=h*a[k++],M=l[S++],I=l[S++],T=l[S];S=h*a[k++];var A=l[S++],C=l[S++],E=l[S];S=h*a[k];var P=l[S++],R=l[S++],D=l[S];Object(r.k)(u)&&(M=(O=zt(u.applyToVertex(M,I,T,w),3))[0],I=O[1],T=O[2],A=(j=zt(u.applyToVertex(A,C,E,w),3))[0],C=j[1],E=j[2],P=(_=zt(u.applyToVertex(P,R,D,w),3))[0],R=_[1],D=_[2]);var L=A-M,N=C-I,F=E-T,z=P-M,V=R-I,G=D-T,U=b*G-V*m,B=m*z-G*y,q=y*V-z*b,H=L*U+N*B+F*q;if(!(Math.abs(H)<=Number.EPSILON)){var W=f-M,J=p-I,Z=v-T,K=W*U+J*B+Z*q;if(H>0){if(K<0||K>H)continue}else if(K>0||K<H)continue;var Y=J*F-N*Z,X=Z*L-F*W,Q=W*N-L*J,$=y*Y+b*X+m*Q;if(H>0){if($<0||K+$>H)continue}else if($>0||K+$<H)continue;var ee=(z*Y+V*X+G*Q)/H;ee>=0&&c(ee,g(L,N,F,z,V,G,d),x)}}}(e,t,n,i,a,o,s,u,c);for(var l=o.data,h=o.stride||o.size,f=e[0],p=e[1],v=e[2],y=t[0]-f,b=t[1]-p,m=t[2]-v,w=n,O=3*n;w<i;++w){var j,_,x,k=h*a[O++],S=l[k++],M=l[k++],I=l[k];k=h*a[O++];var T=l[k++],A=l[k++],C=l[k];k=h*a[O++];var E=l[k++],P=l[k++],R=l[k];Object(r.k)(u)&&(S=(j=zt(u.applyToVertex(S,M,I,w),3))[0],M=j[1],I=j[2],T=(_=zt(u.applyToVertex(T,A,C,w),3))[0],A=_[1],C=_[2],E=(x=zt(u.applyToVertex(E,P,R,w),3))[0],P=x[1],R=x[2]);var D=T-S,L=A-M,N=C-I,F=E-S,z=P-M,V=R-I,G=b*V-z*m,U=m*F-V*y,B=y*z-F*b,q=D*G+L*U+N*B;if(!(Math.abs(q)<=Number.EPSILON)){var H=f-S,W=p-M,J=v-I,Z=H*G+W*U+J*B;if(q>0){if(Z<0||Z>q)continue}else if(Z>0||Z<q)continue;var K=W*N-L*J,Y=J*D-N*H,X=H*L-D*W,Q=y*K+b*Y+m*X;if(q>0){if(Q<0||Z+Q>q)continue}else if(Q>0||Z+Q<q)continue;var $=(F*K+z*Y+V*X)/q;$>=0&&c($,g(D,L,N,F,z,V,d),w)}}}var y=Object(a.e)(),b=Object(a.e)();function g(e,t,n,r,i,a,s){return Object(o.v)(y,e,t,n),Object(o.v)(b,r,i,a),Object(o.f)(s,y,b),Object(o.q)(s,s),s}function m(e,t,n,r,a){var o=(n.screenLength||0)*e.pixelRatio;a&&(o=Object(l.d)(o,r,t,a));var s=o*Math.tan(.5*e.fovY)/(.5*e.fullHeight);return Object(i.f)(s*t,n.minWorldLength||0,null!=n.maxWorldLength?n.maxWorldLength:1/0)}function w(e,t,n){if(e){var r=e.parameters;t.setUniform4f(n,r.divisor,r.offset,r.minPixelSize,e.paddingPixelsOverride)}}function O(e,t){var n=t?O(t):{};for(var r in e){var i=e[r];i&&i.forEach&&(i=x(i)),null==i&&r in n||(n[r]=i)}return n}function j(e,t){var n=!1;for(var r in t){var i=t[r];void 0!==i&&(n=!0,e[r]=Array.isArray(i)?i.slice():i)}return n}function _(e,t,n,r,a){if(t.options.selectionMode){for(var o=e.vertexAttributes.get("position").data,s=e.vertexAttributes.get("size"),u=n[0],c=n[1],l=(((s&&s.data[0])+r)/2+4)*e.screenToWorldRatio,h=Number.MAX_VALUE,f=0;f<o.length-5;f+=3){var p=o[f],d=o[f+1],v=u-p,y=c-d,b=o[f+3]-p,g=o[f+4]-d,m=Object(i.c)((b*v+g*y)/(b*b+g*g),0,1),w=b*m-v,O=g*m-y,j=w*w+O*O;j<h&&(h=j)}h<l*l&&a()}}function x(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}var k={multiply:1,ignore:2,replace:3,tint:4},S=1e3},fG4V:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var r=n("nvBr"),i=n("0ynT"),a=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],o={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};function s(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]>t[n]+2||e[n]<t[n]-2)return!1;return!0}function u(e,t,n){var r=Object(i.c)(e),a=Object(i.c)(t),o={l:r.l*(1-n)+n*a.l,a:r.a*(1-n)+n*a.a,b:r.b*(1-n)+n*a.b};return Object(i.e)(o)}function c(e){var t=function(e,t){if(e){var n,i=a,o=null;return"algorithmic"===e.type?i.some((function(t){if(s(e.fromColor.toRgb(),t.fromColor)&&s(e.toColor.toRgb(),t.toColor))return o=t.id,!0})):"multipart"===e.type&&i.some((function(t){if(e.colorRamps&&t.colorRamps&&e.colorRamps.length===t.colorRamps.length&&(n=e.colorRamps,!t.colorRamps.some((function(e,t){if(!s(n[t].fromColor.toRgb(),new r.a(e.fromColor).toRgb())||!s(n[t].toColor.toRgb(),new r.a(e.toColor).toRgb()))return!0})))){if(o)return!0;o=t.id}})),o}}(e);return t?o[t]:null}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&!(t<1)){var r,i,a,o,s,c="toJSON"in e?e.toJSON():e,l="multipart"===c.type?c.colorRamps.length:1,h=[],f=[],p=0;if(1===t)return r="multipart"===c.type?c.colorRamps[0].fromColor:c.fromColor,f.push([0].concat(r)),f;for(var d=0;d<l;d++)h[d]={start:null,end:null},h[d].start=p,h[d].end=p+1/l,p=h[d].end;for(var v=function(e){o=e/(t-1),h.forEach((function(h,p){if(o>=h.start&&(o<h.end||e===t-1&&p===l-1)){s=(o-h.start)/(h.end-h.start),"multipart"===c.type?(r=c.colorRamps[p].fromColor,i=c.colorRamps[p].toColor):(r=c.fromColor,i=c.toColor),0===e?f.push([e].concat(r.slice(0,3))):e===t-1?f.push([e].concat(i.slice(0,3))):(a=u({r:r[0],g:r[1],b:r[2]},{r:i[0],g:i[1],b:i[2]},s),f.push([e,a.r,a.g,a.b]));var d=null!=r[3]?r[3]>1?r[3]/255:r[3]:1,v=null!=i[3]?i[3]>1?i[3]/255:i[3]:1;n&&f[e].push(Math.min(255,Math.round(255*(d*(1-s)+v*s))))}}))},y=0;y<t;y++)v(y);return f}}},fOQB:function(e,t,n){"use strict";var r=n("ohva"),i=n("GVa1"),a=function(){function e(t,n,r,a,o){Wt(this,e),this._context=t,this.bufferType=n,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(1,this),this._glName=this._context.gl.createBuffer(),Object(i.a)(this._context.gl),a&&this.setData(a,o)}return Zt(e,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}},{key:"dispose",value:function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)}},{key:"setData",value:function(e,t){if(e){if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{var n=e.byteLength;Object(r.i)(e)&&(n/=2,this._indexType=5123),Object(r.j)(e)&&(n/=4,this._indexType=5125),this._size=n}var i=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this.bufferType,e,this.usage),this._context.bindVAO(i)}}},{key:"setSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;if(e){(t<0||t>=this._size)&&console.error("offset is out of range!");var a=t,o=n,s=i,u=e.byteLength;Object(r.i)(e)&&(u/=2,a*=2,o*=2,s*=2),Object(r.j)(e)&&(u/=4,a*=4,o*=4,s*=4),void 0===i&&(i=u-1),n>=i&&console.error("end must be bigger than start!"),t+n-i>this._size&&console.error("An attempt to write beyond the end of the buffer!");var c=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);var l=this._context.gl,h=ArrayBuffer.isView(e)?e.buffer:e,f=0===o&&s===e.byteLength?h:h.slice(o,s);l.bufferSubData(this.bufferType,a,f),this._context.bindVAO(c)}}}],[{key:"createIndex",value:function(t,n,r,i){return new e(t,34963,n,r,i)}},{key:"createVertex",value:function(t,n,r){return new e(t,34962,n,r)}}]),e}();t.a=a},fQPN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("+opI"),i=n("qatw"),a=new r.a({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function o(e){var t=e.toJSON(),n=t.geometries1,r=t.geometries2,o=t.relation,s=t.relationParameter,u={};if(n&&n.length){u.geometries1=JSON.stringify({geometryType:Object(i.c)(n[0]),geometries:n});var c=n[0].spatialReference;u.sr=c.wkid?c.wkid:JSON.stringify(c)}return r&&r.length>0&&(u.geometries2=JSON.stringify({geometryType:Object(i.c)(r[0]),geometries:r})),o&&(u.relation=a.toJSON(o)),s&&(u.relationParam=s),u}},fX31:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("LE9a");function i(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a;return t||(t=new i),t===e||(t.removeAll(),(n=e)&&(Array.isArray(n)||"items"in n&&Array.isArray(n.items))?t.addMany(e):e&&t.add(e)),t}function a(e){return e}},fXKp:function(e,t,n){"use strict";var r=n("hwdV").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},fctI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(){Wt(this,e)}},frGm:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_,x,k,S;k=e.input,i=(r=e.next_in)+(e.avail_in-5),S=e.output,o=(a=e.next_out)-(t-e.avail_out),s=a+(e.avail_out-257),u=(n=e.state).dmax,c=n.wsize,l=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,v=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{d<15&&(p+=k[r++]<<d,p+=k[r++]<<(d+=8),d+=8),m=v[p&b];t:for(;;){if(p>>>=w=m>>>24,d-=w,0==(w=m>>>16&255))S[a++]=65535&m;else{if(!(16&w)){if(0==(64&w)){m=v[(65535&m)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}O=65535&m,(w&=15)&&(d<w&&(p+=k[r++]<<d,d+=8),O+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=k[r++]<<d,p+=k[r++]<<(d+=8),d+=8),m=y[p&g];n:for(;;){if(p>>>=w=m>>>24,d-=w,!(16&(w=m>>>16&255))){if(0==(64&w)){m=y[(65535&m)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(j=65535&m,d<(w&=15)&&(p+=k[r++]<<d,(d+=8)<w&&(p+=k[r++]<<d,d+=8)),(j+=p&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,d-=w,j>(w=a-o)){if((w=j-w)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(_=0,x=f,0===h){if(_+=c-w,w<O){O-=w;do{S[a++]=f[_++]}while(--w);_=a-j,x=S}}else if(h<w){if(_+=c+h-w,(w-=h)<O){O-=w;do{S[a++]=f[_++]}while(--w);if(_=0,h<O){O-=w=h;do{S[a++]=f[_++]}while(--w);_=a-j,x=S}}}else if(_+=h-w,w<O){O-=w;do{S[a++]=f[_++]}while(--w);_=a-j,x=S}for(;O>2;)S[a++]=x[_++],S[a++]=x[_++],S[a++]=x[_++],O-=3;O&&(S[a++]=x[_++],O>1&&(S[a++]=x[_++]))}else{_=a-j;do{S[a++]=S[_++],S[a++]=S[_++],S[a++]=S[_++],O-=3}while(O>2);O&&(S[a++]=S[_++],O>1&&(S[a++]=S[_++]))}break}}break}}while(r<i&&a<s);p&=(1<<(d-=(O=d>>3)<<3))-1,e.next_in=r-=O,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=p,n.bits=d}},frIU:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function(){function e(){Wt(this,e),this.soilsDisabled=new r.t,this.boundaryHasPolygons=new r.t,this.sensAreasGLHasPolygons=new r.t,this.scaleChanged=new r.t}return Zt(e,[{key:"pushMapScale",value:function(e){var t=!0;e<=37e3&&(t=!1),this.soilsDisabled.emit(t),this.scaleChanged.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ftD4:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n("zqDF"),i=n("C4aV");function a(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function o(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function s(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}var u=n("JSRQ");function c(e,t){return h(e,"read",t)}function l(e,t){return h(e,"write",t)}function h(e,t,n){var r=e&&e.json;if(e&&e.json&&e.json.origins&&n){var i=e.json.origins[n.origin];i&&("any"===t||t in i)&&(r=i)}return r}var f={processPrototypePropertyMetadata:function(e,t){var n;(function(e){if(e.json||(e.json={}),o(e.json),s(e.json),a(e.json),e.json.origins)for(var t in e.json.origins)o(e.json.origins[t]),s(e.json.origins[t]),a(e.json.origins[t]);return!0})(t)&&((n=t).json&&n.json.origins&&function(){var e=n.json.origins,t={"web-document":["web-scene","web-map"]};for(var r in t)e[r]&&function(){var n=e[r];t[r].forEach((function(t){e[t]=n})),delete e[r]}()}(),function(e){var t=function(e){return e.type?function(e){if(e.type){for(var t=0,n=e.type;Array.isArray(n)&&!Object(r.o)(n);)n=n[0],t++;return{type:n,ndimArray:t}}}(e):function(e){if(e.types){for(var t=0,n=e.types;Array.isArray(n);)n=n[0],t++;return{types:n,ndimArray:t}}}(e)}(e);if(e.json.origins)for(var n in e.json.origins){var a=e.json.origins[n];Object(i.a)(t,a,!1),Object(u.a)(t,a)}Object(i.a)(t,e.json,!0),Object(u.a)(t,e.json)}(t))}}},gBP8:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},gEht:function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return F})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return z})),n.d(t,"i",(function(){return L})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return j})),n.d(t,"m",(function(){return P})),n.d(t,"n",(function(){return q})),n.d(t,"o",(function(){return _})),n.d(t,"p",(function(){return w})),n.d(t,"q",(function(){return O})),n.d(t,"r",(function(){return E})),n.d(t,"s",(function(){return T})),n.d(t,"t",(function(){return A})),n.d(t,"u",(function(){return C})),n.d(t,"v",(function(){return M})),n.d(t,"w",(function(){return I})),n.d(t,"x",(function(){return R})),n("wSAH");var r=n("+opI"),i=n("LIH3"),a=n("f4Nx"),o=n("WZb1"),s=n("IlWj"),u=n("9pTf"),c=39.37,l=s.a.radius*Math.PI/200,h=/UNIT\[([^\]]+)\]\]$/i,f=i.a,p=/UNIT\[([^\]]+)\]/i,d=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),v=Object(r.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),y=function(e){return e*e},b=function(e){return e*e*e},g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:y(.001)},"square-centimeters":{inBaseUnits:y(.01)},"square-decimeters":{inBaseUnits:y(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:y(1e3)},"square-inches":{inBaseUnits:y(.0254)},"square-feet":{inBaseUnits:y(.3048)},"square-yards":{inBaseUnits:y(.9144)},"square-miles":{inBaseUnits:y(1609.344)},"square-us-feet":{inBaseUnits:y(1200/3937)},acres:{inBaseUnits:.0015625*y(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*b(.001)},"cubic-centimeters":{inBaseUnits:1e3*b(.01)},"cubic-decimeters":{inBaseUnits:1e3*b(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*b(1e3)},"cubic-inches":{inBaseUnits:1e3*b(.0254)},"cubic-feet":{inBaseUnits:1e3*b(.3048)},"cubic-yards":{inBaseUnits:1e3*b(.9144)},"cubic-miles":{inBaseUnits:1e3*b(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},m=function(){var e={};for(var t in g)for(var n in g[t].units)e[n]=t;return e}(),w=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],O=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function j(e){return"imperial"===e||"metric"===e}function _(e){var t=m[e];if(t)return t;throw new Error("unknown measure")}function x(e){return function(e){return g[e].baseUnit}(_(e))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=t||_(e),g[t].baseUnit===e}function S(e,t,n){if(t===n)return e;var r=_(t);if(r!==_(n))throw new Error("incompatible units");var i=k(t,r)?e:function(e,t,n){return e*g[n].units[t].inBaseUnits}(e,t,r);return k(n,r)?i:function(e,t,n){return e/g[n].units[t].inBaseUnits}(i,n,r)}function M(e,t){return S(e,t,"meters")<3e3?"meters":"kilometers"}function I(e,t){return S(e,t,"meters")<1e5?"meters":"kilometers"}function T(e,t){return S(e,t,"feet")<1e3?"feet":"miles"}function A(e,t){return S(e,t,"feet")<1e5?"feet":"miles"}function C(e,t){return S(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function E(e,t){return S(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function P(e,t,n){return S(e,t,"meters")/(n*Math.PI/180)}function R(e){return v.fromJSON(e.toLowerCase())||null}function D(e){if(e&&"object"==typeof e&&!Object(a.e)(e))return 1;var t=N(e);return t>1e5?1:t}function L(e){return N(e)>=(e instanceof o.a?Object(u.e)(e).metersPerDegree:1e5)?"meters":z(e)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.metersPerDegree;return F(e,!0)||t}function F(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t){if(Object(a.k)(t))return s.b.metersPerDegree;if(Object(a.l)(t))return s.c.metersPerDegree;!(i=f.values[f[t]])&&r&&d.has(t)&&(i=l)}else if(n)if(-1!==n.search(/^PROJCS/i)){var o=h.exec(n);o&&o[1]&&(i=parseFloat(o[1].split(",")[1]))}else if(-1!==n.search(/^GEOCCS/i)){var u=p.exec(n);u&&u[1]&&(i=parseFloat(u[1].split(",")[1]))}return i}function z(e){var t,n,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t)r=f.units[f[t]];else if(n&&-1!==n.search(/^PROJCS/i)){var i=h.exec(n);i&&i[1]&&(r=(i=/[\\"\\']{1}([^\\"\\']+)/.exec(i[1]))&&i[1])}return r?R(r):null}function V(e){if(!e)return null;switch(z(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}var G={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},U={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},B=Object(r.b)()(G),q=Object(r.b)()(U);Object(r.b)()(Nt(Nt({},G),U))},gHbr:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=n("m0D6");function i(e){return null!=r.a[e]}function a(e){return 1/(r.a[e]||1)}var o=function(){var e=Object.keys(r.a);return e.sort(),e}()},gLc9:function(e,t,n){"use strict";function r(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function i(e){return e.toLowerCase().trim()}t.a=function(){function e(t){if(Wt(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var n,a=[],o=Vt(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=s&&s.name;if(u){var c=i(u);this._fieldsMap.set(u,s),this._fieldsMap.set(c,s),a.push(c),r(s)&&(this.dateFields.push(s),this._dateFieldsSet.add(s))}}}catch(l){o.e(l)}finally{o.f()}a.sort(),this.uid=a.join(",")}}return Zt(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(i(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}()},gVKr:function(e,t,n){"use strict";var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Wt(this,e),this.lengths=null!=t?t:[],this.coords=null!=n?n:[],this.hasIndeterminateRingOrder=r}return Zt(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"forEachVertex",value:function(e){var t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(var n=0;n<this.lengths.length;n++){for(var r=this.lengths[n],i=0;i<r;i++)e(this.coords[2*(i+t)],this.coords[2*(i+t)+1]);t+=r}}},{key:"clone",value:function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}]),e}();t.a=r},gYW1:function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=n("zlDU"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).created=null,r.id=null,r.portal=null,r.title=null,r.username=null,r}return Zt(n,[{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username,"/").concat(this.id):null}},{key:"toJSON",value:function(){throw new o.a("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}}]),n}(s.a);Object(r.a)([Object(i.b)({type:Date})],u.prototype,"created",void 0),Object(r.a)([Object(i.b)()],u.prototype,"id",void 0),Object(r.a)([Object(i.b)()],u.prototype,"portal",void 0),Object(r.a)([Object(i.b)()],u.prototype,"title",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],u.prototype,"url",null),Object(r.a)([Object(i.b)()],u.prototype,"username",void 0);var c,l=u=Object(r.a)([Object(a.a)("esri.portal.PortalFolder")],u),h=n("8aRT"),f=c=function(e){Kt(r,e);var t=Xt(r);function r(){var e;Wt(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).access=null,e.created=null,e.culture=null,e.description=null,e.email=null,e.fullName=null,e.modified=null,e.orgId=null,e.portal=null,e.preferredView=null,e.privileges=null,e.region=null,e.role=null,e.roleId=null,e.sourceJSON=null,e.units=null,e.username=null,e.userType=null,e}return Zt(r,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"userContentUrl",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/community/users/").concat(this.username):null}},{key:"addItem",value:function(e){var t=this,n=e&&e.item,r=e&&e.data,i=e&&e.folder,a={method:"post"};n&&(a.query=n.createPostQuery(),null!=r&&("string"==typeof r?a.query.text=r:"object"==typeof r&&(a.query.text=JSON.stringify(r))));var o=this.userContentUrl;return i&&(o+="/"+("string"==typeof i?i:i.id)),this.portal._request(o+"/addItem",a).then((function(e){return n.id=e.id,n.portal=t.portal,n.loaded?n.reload():n.load()}))}},{key:"deleteItem",value:function(e){var t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+"/items/".concat(e.id,"/delete"),{method:"post"}).then((function(){e.id=null,e.portal=null}))}},{key:"deleteItems",value:function(e){var t=this.userContentUrl+"/deleteItems",n=e.map((function(e){return e.id}));if(n.length){var r={method:"post",query:{items:n.join(",")}};return this.portal._request(t,r).then((function(){e.forEach((function(e){e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}},{key:"fetchFolders",value:function(){var e=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then((function(t){return t&&t.folders?t.folders.map((function(t){var n=l.fromJSON(t);return n.portal=e.portal,n})):[]}))}},{key:"fetchGroups",value:function(){var e=this;return this.portal._request(this.url).then((function(t){return t&&t.groups?t.groups.map((function(t){var n=h.default.fromJSON(t);return n.portal=e.portal,n})):[]}))}},{key:"fetchItems",value:function(e){var t=this;e||(e={});var r,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),Promise.resolve().then(n.bind(null,"p+Gi")).then((function(n){var a=n.default;return r=a,t.portal._request(i,{query:{folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"}})})).then((function(e){var n;return e&&e.items?(n=e.items.map((function(e){var n=r.fromJSON(e);return n.portal=t.portal,n})),Promise.all(n.map((function(e){return e.load()}))).catch((function(e){return e})).then((function(){return{items:n,nextStart:e.nextStart,total:e.total}}))):{items:[],nextStart:-1,total:0}}))}},{key:"fetchTags",value:function(){return this.portal._request(this.url+"/tags").then((function(e){return e.tags}))}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t}},{key:"queryFavorites",value:function(e){return this.favGroupId?(this._favGroup||(this._favGroup=new h.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new o.a("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}},{key:"toJSON",value:function(){throw new o.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}}],[{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var t=new c;return t.sourceJSON=e,t.read(e),t}}]),r}(s.a);Object(r.a)([Object(i.b)()],f.prototype,"access",void 0),Object(r.a)([Object(i.b)({type:Date})],f.prototype,"created",void 0),Object(r.a)([Object(i.b)()],f.prototype,"culture",void 0),Object(r.a)([Object(i.b)()],f.prototype,"description",void 0),Object(r.a)([Object(i.b)()],f.prototype,"email",void 0),Object(r.a)([Object(i.b)()],f.prototype,"favGroupId",void 0),Object(r.a)([Object(i.b)()],f.prototype,"fullName",void 0),Object(r.a)([Object(i.b)({type:Date})],f.prototype,"modified",void 0),Object(r.a)([Object(i.b)()],f.prototype,"orgId",void 0),Object(r.a)([Object(i.b)()],f.prototype,"portal",void 0),Object(r.a)([Object(i.b)()],f.prototype,"preferredView",void 0),Object(r.a)([Object(i.b)()],f.prototype,"privileges",void 0),Object(r.a)([Object(i.b)()],f.prototype,"region",void 0),Object(r.a)([Object(i.b)()],f.prototype,"role",void 0),Object(r.a)([Object(i.b)()],f.prototype,"roleId",void 0),Object(r.a)([Object(i.b)()],f.prototype,"sourceJSON",void 0),Object(r.a)([Object(i.b)()],f.prototype,"thumbnail",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],f.prototype,"thumbnailUrl",null),Object(r.a)([Object(i.b)()],f.prototype,"units",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],f.prototype,"userContentUrl",null),Object(r.a)([Object(i.b)({readOnly:!0})],f.prototype,"url",null),Object(r.a)([Object(i.b)()],f.prototype,"username",void 0),Object(r.a)([Object(i.b)()],f.prototype,"userType",void 0),f=c=Object(r.a)([Object(a.a)("esri.portal.PortalUser")],f),t.default=f},gYg2:function(e,t,n){"use strict";n.d(t,"a",(function(){return Me})),n.d(t,"b",(function(){return oe})),n.d(t,"c",(function(){return je})),n.d(t,"d",(function(){return Oe})),n.d(t,"e",(function(){return ie})),n.d(t,"f",(function(){return se})),n.d(t,"g",(function(){return $})),n.d(t,"h",(function(){return ee})),n.d(t,"i",(function(){return te})),n.d(t,"j",(function(){return ne})),n.d(t,"k",(function(){return ge})),n.d(t,"l",(function(){return me})),n.d(t,"m",(function(){return re})),n.d(t,"n",(function(){return ce})),n.d(t,"o",(function(){return pe})),n.d(t,"p",(function(){return ye})),n.d(t,"q",(function(){return he})),n.d(t,"r",(function(){return ve})),n.d(t,"s",(function(){return be})),n.d(t,"t",(function(){return Ae}));var r,i,a,o,s,u=n("srIe"),c=n("zlDU"),l=n("9MzC"),h=n("f4Nx"),f=n("IlWj"),p=n("SuVq"),d=n("OvF4"),v=n("V9wi"),y=n("Ehki"),b=n("UhwK"),g=n("OKTS"),m=n("Cy1f"),w=n("5DEt"),O=n("9pTf"),j=n("gEht"),_=n("15Hh"),x=n("wSAH"),k=n("ss0y"),S=null;function M(){return!!S}function I(){return r||(r=Promise.all([n.e(0),n.e(154)]).then(n.bind(null,"laFa")).then((function(e){return e.p})).then((function(e){return(0,e.default)({locateFile:function(e){return Object(k.a)("esri/geometry/support/"+e)}})})).then((function(e){z(e)})))}!function(e){function t(e,t,n){S.ensureCache.prepare();var r=U(n),i=n===r,a=S.ensureFloat64(r),o=S._pe_geog_to_proj(S.getPointer(e),t,a);return o&&B(n,t,a,i),o}function n(e,t,n){return r(e,t,n,0)}function r(e,t,n,r){S.ensureCache.prepare();var i=U(n),a=n===i,o=S.ensureFloat64(i),s=S._pe_proj_to_geog_center(S.getPointer(e),t,o,r);return s&&B(n,t,o,a),s}e.geogToProj=t,e.projGeog=function(e,r,i,o){switch(o){case a.PE_TRANSFORM_P_TO_G:return n(e,r,i);case a.PE_TRANSFORM_G_TO_P:return t(e,r,i)}return 0},e.projToGeog=n,e.projToGeogCenter=r}(i||(i={})),(s=a||(a={})).init=function(){s.PE_BUFFER_MAX=S.PeDefs.prototype.PE_BUFFER_MAX,s.PE_NAME_MAX=S.PeDefs.prototype.PE_NAME_MAX,s.PE_MGRS_MAX=S.PeDefs.prototype.PE_MGRS_MAX,s.PE_USNG_MAX=S.PeDefs.prototype.PE_USNG_MAX,s.PE_DD_MAX=S.PeDefs.prototype.PE_DD_MAX,s.PE_DDM_MAX=S.PeDefs.prototype.PE_DDM_MAX,s.PE_DMS_MAX=S.PeDefs.prototype.PE_DMS_MAX,s.PE_UTM_MAX=S.PeDefs.prototype.PE_UTM_MAX,s.PE_PARM_MAX=S.PeDefs.prototype.PE_PARM_MAX,s.PE_TYPE_NONE=S.PeDefs.prototype.PE_TYPE_NONE,s.PE_TYPE_GEOGCS=S.PeDefs.prototype.PE_TYPE_GEOGCS,s.PE_TYPE_PROJCS=S.PeDefs.prototype.PE_TYPE_PROJCS,s.PE_TYPE_GEOGTRAN=S.PeDefs.prototype.PE_TYPE_GEOGTRAN,s.PE_TYPE_COORDSYS=S.PeDefs.prototype.PE_TYPE_COORDSYS,s.PE_TYPE_UNIT=S.PeDefs.prototype.PE_TYPE_UNIT,s.PE_TYPE_LINUNIT=S.PeDefs.prototype.PE_TYPE_LINUNIT,s.PE_STR_OPTS_NONE=S.PeDefs.prototype.PE_STR_OPTS_NONE,s.PE_STR_AUTH_NONE=S.PeDefs.prototype.PE_STR_AUTH_NONE,s.PE_STR_AUTH_TOP=S.PeDefs.prototype.PE_STR_AUTH_TOP,s.PE_STR_NAME_CANON=S.PeDefs.prototype.PE_STR_NAME_CANON,s.PE_PARM_X0=S.PeDefs.prototype.PE_PARM_X0,s.PE_PARM_ND=S.PeDefs.prototype.PE_PARM_ND,s.PE_TRANSFORM_1_TO_2=S.PeDefs.prototype.PE_TRANSFORM_1_TO_2,s.PE_TRANSFORM_2_TO_1=S.PeDefs.prototype.PE_TRANSFORM_2_TO_1,s.PE_TRANSFORM_P_TO_G=S.PeDefs.prototype.PE_TRANSFORM_P_TO_G,s.PE_TRANSFORM_G_TO_P=S.PeDefs.prototype.PE_TRANSFORM_G_TO_P,s.PE_HORIZON_RECT=S.PeDefs.prototype.PE_HORIZON_RECT,s.PE_HORIZON_POLY=S.PeDefs.prototype.PE_HORIZON_POLY,s.PE_HORIZON_LINE=S.PeDefs.prototype.PE_HORIZON_LINE,s.PE_HORIZON_DELTA=S.PeDefs.prototype.PE_HORIZON_DELTA},function(e){var t={},n={},r=function(e){if(e){var t=e.getType();switch(t){case a.PE_TYPE_GEOGCS:e=S.castObject(e,S.PeGeogcs);break;case a.PE_TYPE_PROJCS:e=S.castObject(e,S.PeProjcs);break;case a.PE_TYPE_GEOGTRAN:e=S.castObject(e,S.PeGeogtran);break;default:t&a.PE_TYPE_UNIT&&(e=S.castObject(e,S.PeUnit))}}return e};function i(e,n){var i=null,a=t[e];if(a||(a={},t[e]=a),a.hasOwnProperty(String(n)))i=a[n];else{var o=S.PeFactory.prototype.factoryByType(e,n);S.compare(o,S.NULL)||(i=o,a[n]=i)}return i=r(i)}e.initialize=function(){S.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(a.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,t){var i=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(t))i=a[t];else{var o=S.PeFactory.prototype.fromString(e,t);S.compare(o,S.NULL)||(i=o,a[t]=i)}return i=r(i)},e.geogcs=function(e){return i(a.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(a.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return S.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(a.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(a.PE_TYPE_UNIT,e)}}(o||(o={}));var T,A,C,E,P,R,D,L,N,F=null;function z(e){function t(e,t,n){e[t]=n(e[t])}S=e,a.init(),T.init(),P.init(),D.init(),L.init(),F=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"destroy",value:function(){S.destroy(this)}}]),n}(S.PeGCSExtent);for(var n=0,r=[S.PeDatum,S.PeGeogcs,S.PeGeogtran,S.PeObject,S.PeParameter,S.PePrimem,S.PeProjcs,S.PeSpheroid,S.PeUnit];n<r.length;n++){t(r[n].prototype,"getName",(function(e){return function(){return e.call(this,new Array(a.PE_NAME_MAX))}}))}for(var i=0,o=[S.PeGeogtran,S.PeProjcs];i<o.length;i++){t(o[i].prototype,"getParameters",(function(e){return function(){for(var t=new Array(a.PE_PARM_MAX),n=e.call(this),r=0;r<t.length;r++){var i=S.getValue(n,"*");t[r]=i?S.wrapPointer(i,S.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return t}}))}t(S.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var n=[];return B(n,t,e.call(this)),n}})),t(S.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var t=S._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,r=e.call(this);if(!S.compare(r,S.NULL)){n=[r];var i=this.getSteps();if(i>1)for(var a=S.getPointer(r),o=1;o<i;o++)n.push(S.wrapPointer(a+t*o,S.PeGTlistExtendedGTs))}return n}}));var s=S._pe_getPeHorizonSize(),u=function(e){return function(){var t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);var n=null,r=e.call(this);if(!S.compare(r,S.NULL)){n=[r];var i=r.getNump();if(i>1)for(var a=S.getPointer(r),o=1;o<i;o++)n.push(S.wrapPointer(a+s*o,S.PeHorizon))}return t.set(e,n),n}};t(S.PeProjcs.prototype,"horizonGcsGenerate",u),t(S.PeProjcs.prototype,"horizonPcsGenerate",u),S.PeObject.prototype.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.PE_STR_OPTS_NONE;S.ensureCache.prepare();var t=S.getPointer(this),n=S.ensureInt8(new Array(a.PE_BUFFER_MAX));return S.UTF8ToString(S._pe_object_to_string_ext(t,e,n))}}function V(e){if(e){var t=S.getClass(e);if(t){var n=S.getCache(t);if(n){var r=S.getPointer(e);r&&delete n[r]}}}}function G(e,t){for(var n=[],r=new Array(t),i=0;i<e;i++)n.push(S.ensureInt8(r));return n}function U(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function B(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r)for(var i=0;i<2*t;i++)e[i]=S.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else for(var a=0===e.length,o=0;o<t;o++)a&&(e[o]=new Array(2)),e[o][0]=S.getValue(n,"double"),e[o][1]=S.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}!function(e){var t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=S.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=S._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,r,i,a,o){var s=null,u=new S.PeInteger(o);try{var c=S.PeGTlistExtended.prototype.getGTlist(e,n,r,i,a,u);if((o=u.val)&&(s=[c],o>1))for(var l=S.getPointer(c),h=1;h<o;h++)s.push(S.wrapPointer(l+t*h,S.PeGTlistExtendedEntry))}finally{S.destroy(u)}return s}}(T||(T={})),function(e){e.destroy=function(e){if(e&&e.length){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;V(r),r.getEntries().forEach((function(e){V(e);var t=e.getGeogtran();V(t),t.getParameters().forEach(V),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){V(e);var t=e.getDatum();V(t),V(t.getSpheroid()),V(e.getPrimem()),V(e.getUnit())}))}))}}catch(i){n.e(i)}finally{n.f()}S.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(A||(A={})),function(e){e.geogToGeog=function(e,t,n,r,i){S.ensureCache.prepare();var a=U(n),o=n===a,s=S.ensureFloat64(a),u=0;r&&(u=S.ensureFloat64(r));var c=S._pe_geog_to_geog(S.getPointer(e),t,s,u,i);return c&&B(n,t,s,o),c}}(C||(C={})),function(e){var t=function(e){function t(t,n,r,i,a,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,r,i,o){var s,u;switch(S.ensureCache.prepare(),e){case"dd":s=S._pe_geog_to_dd,u=a.PE_DD_MAX;break;case"ddm":s=S._pe_geog_to_ddm,u=a.PE_DDM_MAX;break;case"dms":s=S._pe_geog_to_dms,u=a.PE_DMS_MAX}var c=0;t&&(c=S.getPointer(t));var l=U(r),h=S.ensureFloat64(l),f=G(n,u),p=s(c,n,h,i,S.ensureInt32(f));if(p)for(var d=0;d<n;d++)o[d]=S.UTF8ToString(f[d]);return p})),n=function(e,t,n,r,i){var a;switch(S.ensureCache.prepare(),e){case"dd":a=S._pe_dd_to_geog;break;case"ddm":a=S._pe_ddm_to_geog;break;case"dms":a=S._pe_dms_to_geog}var o=0;t&&(o=S.getPointer(t));var s=r.map((function(e){return S.ensureString(e)})),u=S.ensureInt32(s),c=S.ensureFloat64(new Array(2*n)),l=a(o,n,u,c);return l&&B(i,n,c),l};e.geog_to_dms=function(e,n,r,i,a){return t("dms",e,n,r,i,a)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,n,r,i,a){return t("ddm",e,n,r,i,a)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,n,r,i,a){return t("dd",e,n,r,i,a)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(E||(E={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=S.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=S.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=S.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=S.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=S.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,t,n,r,i,o,s){S.ensureCache.prepare();var u=0;e&&(u=S.getPointer(e));var c=U(n),l=S.ensureFloat64(c),h=G(t,a.PE_MGRS_MAX),f=S.ensureInt32(h),p=S._pe_geog_to_mgrs_extended(u,t,l,r,i,o,f);if(p)for(var d=0;d<t;d++)s[d]=S.UTF8ToString(h[d]);return p},e.mgrs_to_geog_extended=function(e,t,n,r,i){S.ensureCache.prepare();var a=0;e&&(a=S.getPointer(e));var o=n.map((function(e){return S.ensureString(e)})),s=S.ensureInt32(o),u=S.ensureFloat64(new Array(2*t)),c=S._pe_mgrs_to_geog_extended(a,t,s,r,u);return c&&B(i,t,u),c}}(P||(P={})),function(e){e.geog_to_usng=function(e,t,n,r,i,o,s){S.ensureCache.prepare();var u=0;e&&(u=S.getPointer(e));var c=U(n),l=S.ensureFloat64(c),h=G(t,a.PE_MGRS_MAX),f=S.ensureInt32(h),p=S._pe_geog_to_usng(u,t,l,r,i,o,f);if(p)for(var d=0;d<t;d++)s[d]=S.UTF8ToString(h[d]);return p},e.usng_to_geog=function(e,t,n,r){S.ensureCache.prepare();var i=0;e&&(i=S.getPointer(e));var a=n.map((function(e){return S.ensureString(e)})),o=S.ensureInt32(a),s=S.ensureFloat64(new Array(2*t)),u=S._pe_usng_to_geog(i,t,o,s);return u&&B(r,t,s),u}}(R||(R={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=S.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=S.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=S.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,t,n,r,i){S.ensureCache.prepare();var o=0;e&&(o=S.getPointer(e));var s=U(n),u=S.ensureFloat64(s),c=G(t,a.PE_UTM_MAX),l=S.ensureInt32(c),h=S._pe_geog_to_utm(o,t,u,r,l);if(h)for(var f=0;f<t;f++)i[f]=S.UTF8ToString(c[f]);return h},e.utm_to_geog=function(e,t,n,r,i){S.ensureCache.prepare();var a=0;e&&(a=S.getPointer(e));var o=n.map((function(e){return S.ensureString(e)})),s=S.ensureInt32(o),u=S.ensureFloat64(new Array(2*t)),c=S._pe_utm_to_geog(a,t,s,r,u);return c&&B(i,t,u),c}}(D||(D={})),function(e){var t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=S.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=S.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=S.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=S.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.PE_PCSINFO_OPTION_DOMAIN;return t.has(n)&&((i=t.get(n))[a]&&(r=i[a])),r||(r=S.PePCSInfo.prototype.generate(n,a),i||(i=[],t.set(n,i)),i[a]=r),r}}(L||(L={})),function(e){e.version_string=function(){return S.PeVersion.prototype.version_string()}}(N||(N={}));var q=Object.freeze({__proto__:null,get _pe(){return S},isLoaded:M,isSupported:function(){return!!Object(x.a)("esri-wasm")},load:I,get PeCSTransformations(){return i},get PeDefs(){return a},get PeFactory(){return o},get PeGCSExtent(){return F},get PeGTlistExtended(){return T},get PeGTlistExtendedEntry(){return A},get PeGTTransformations(){return C},get PeNotationDms(){return E},get PeNotationMgrs(){return P},get PeNotationUsng(){return R},get PeNotationUtm(){return D},get PePCSInfo(){return L},get PeVersion(){return N},_init:z}),H=(n("kYAx"),n("1jaj")),W=0,J=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Wt(this,e),this.uid=W++,t?(this._wkt=void 0!==t.wkt?t.wkt:null,this._wkid=void 0!==t.wkid?t.wkid:-1,this._isInverse=void 0!==t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return Zt(e,[{key:"wkt",get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=W++}},{key:"wkid",get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=W++}},{key:"isInverse",get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=W++}},{key:"getInverse",value:function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}],[{key:"fromGE",value:function(t){var n=new e;return n._wkt=t.wkt,n._wkid=t.wkid,n._isInverse=t.isInverse,n}}]),e}(),Z=function(){function e(t){if(Wt(this,e),this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps){var n,r=Vt(t.steps);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.steps.push(i instanceof J?i:new J({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}catch(a){r.e(a)}finally{r.f()}}}return Zt(e,[{key:"getInverse",value:function(){var t=new e;t.steps=[];for(var n=this.steps.length-1;n>=0;n--)t.steps.push(this.steps[n].getInverse());return t}},{key:"getGTListEntry",value:function(){var e,t="",n=Vt(this.steps);try{for(n.s();!(e=n.n()).done;){t+=e.value.uid.toString()+","}}catch(r){n.e(r)}finally{n.f()}return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}},{key:"assignCachedGe",value:function(t,n,r){this._cached_projection[e.cacheKey(t,n)]=r}},{key:"getCachedGeTransformation",value:function(t,n){var r,i="",a=Vt(this.steps);try{for(a.s();!(r=a.n()).done;){i+=r.value.uid.toString()+","}}catch(s){a.e(s)}finally{a.f()}i!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=i);var o=this._cached_projection[e.cacheKey(t,n)];return void 0===o?null:o}}],[{key:"cacheKey",value:function(e,t){return[null!=e.wkid?e.wkid.toString():"-1",null!=e.wkt?e.wkt.toString():"",null!=t.wkid?t.wkid.toString():"-1",null!=t.wkt?t.wkt.toString():""].join(",")}},{key:"fromGE",value:function(t){var n,r=new e,i="",a=Vt(t.steps);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=J.fromGE(o);r.steps.push(s),i+=s.uid.toString()+","}}catch(u){a.e(u)}finally{a.f()}return r._cached_projection={},r._gtlistentry=null,r._chain=i,r}}]),e}(),K=null,Y=null,X=null,Q={};function $(){return!!K&&M()}function ee(){return!0}function te(e){return Object(u.j)(X)&&(X=Promise.all([I(),Promise.resolve().then(n.bind(null,"9gar")).then((function(e){return e.g})),Promise.resolve().then(n.bind(null,"dZC4"))])),X.then((function(t){var n=zt(t,3),r=n[1],i=n[2].hydratedAdapter;Object(l.u)(e),Y=i,(K=r.default)._enableProjection(q)}))}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(e)?0===e.length?[]:re(Y,e,e[0].spatialReference,t,n):re(Y,[e],e.spatialReference,t,n)[0]}function re(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(Object(u.j)(n)||Object(u.j)(r))return t;if(oe(n,r,i))return t.map((function(e){return function(e,t,n){if(!e)return e;if("x"in e){var r=new p.a;return le(e,t,r,n)?r:null}if("xmin"in e){var i=new d.a;return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.xmin,o=e.ymin,s=e.xmax,u=e.ymax,c=e.hasZ,l=e.hasM;return!!de(a,o,c?e.zmin:i,t,He,r)&&(n.xmin=He[0],n.ymin=He[1],c&&(n.zmin=He[2]),!!de(s,u,c?e.zmax:i,t,He,r)&&(n.xmax=He[0],n.ymax=He[1],c&&(n.zmax=He[2]),l&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,!0))}(e,t,i,n)?i:null}if("rings"in e){var a=new y.a;return fe(e,t,a,n)?a:null}if("paths"in e){var o=new b.a;return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.paths,o=e.hasZ,s=e.hasM,u=[];return!!we(a,o,s,t,u,r,i)&&(n.paths=u,n.spatialReference=r,n.hasZ=o,n.hasM=s,!0)}(e,t,o,n)?o:null}if("points"in e){var s=new v.a;return function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.points,s=e.hasZ,u=e.hasM,c=[],l=o.length,h=[],f=Vt(o);try{for(f.s();!(i=f.n()).done;){var p=i.value;h.push(p[0],p[1],s?p[2]:a)}}catch(g){f.e(g)}finally{f.f()}if(!ge(h,t,0,h,r,0,l))return!1;for(var d=0;d<l;++d){var v=3*d,y=h[v],b=h[v+1];c.push(s&&u?[y,b,h[v+2],o[d][3]]:s?[y,b,h[v+2]]:u?[y,b,o[d][2]]:[y,b])}return n.points=c,n.spatialReference=r,n.hasZ=s,n.hasM=u,!0}(e,t,s,n)?s:null}return null}(e,n,r)}));if(Object(u.j)(i)){var a=Z.cacheKey(n,r);void 0!==Q[a]?i=Q[a]:(i=ie(n,r,null),Object(u.j)(i)&&(i=new Z),Q[a]=i)}if(Object(u.j)(K))throw new ae;return K._project(e,t,n,r,i)}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(u.j)(K))throw new ae;if(Object(u.j)(e)||Object(u.j)(t))return null;var r=K._getTransformation(Y,e,t,n,null==n?void 0:n.spatialReference);return null!==r?Z.fromGE(r):null}var ae=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}return n}(c.a);function oe(e,t,n){return!n&&(!!Object(h.c)(e,t)||Object(h.i)(e)&&Object(h.i)(t)&&!!De(e,t,ze))}function se(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($()){e.next=18;break}r=Vt(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=10;break}if(a=i.value,o=a.source,s=a.dest,u=a.geographicTransformation,oe(o,s,u)){e.next=8;break}return e.abrupt("return",te(n));case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.spatialReference,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!Object(u.j)(n)&&le(e,e.spatialReference,t,n,r)}function le(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;He[0]=e.x,He[1]=e.y;var a=e.z;return He[2]=void 0!==a?a:i,!!ge(He,t,0,He,r,0,1)&&(n.x=He[0],n.y=He[1],n.spatialReference=r,void 0===a?(n.z=void 0,n.hasZ=!1):(n.z=He[2],n.hasZ=!0),void 0===e.m?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),!0)}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.spatialReference,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!Object(u.j)(n)&&fe(e,e.spatialReference,t,n,r)}function fe(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.rings,o=e.hasZ,s=e.hasM,u=[];return!!we(a,o,s,t,u,r,i)&&(n.rings=u,n.spatialReference=r,n.hasZ=o,n.hasM=s,!0)}function pe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;He[0]=e.x,He[1]=e.y;var i=e.z;return He[2]=void 0!==i?i:r,ge(He,e.spatialReference,0,t,n,0,1)}function de(e,t,n,r,i,a){return Ue[0]=e,Ue[1]=t,Ue[2]=n,ge(Ue,r,0,i,a,0,1)}function ve(e,t,n,r){return!(Object(u.j)(t)||Object(u.j)(r)||e.length<2)&&(2===e.length&&(Ue[0]=e[0],Ue[1]=e[1],Ue[2]=0,e=Ue),ge(e,t,0,n,r,0,1))}function ye(e,t){He[0]=e.x,He[1]=e.y;var n=e.z;return He[2]=void 0!==n?n:0,be(He,e.spatialReference,t)}function be(e,t,n){return function(e,t,n,r){if(Object(u.j)(t))return!1;var i=_e(t,Ne),a=Re[i][6];return!Object(u.j)(a)&&(a(e,0,Ue,0),n!==Ue&&(n[0]=Ue[0],n[1]=Ue[1],n.length>2&&(n[2]=Ue[2])),!0)}(e,t,n)}function ge(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=De(t,i,ze);if(Object(u.j)(s))return!1;if(s===xe){if(e===r&&n===a)return!0;for(var c=n+3*o,l=n,h=a;l<c;l++,h++)r[h]=e[l];return!0}for(var f=n+3*o,p=n,d=a;p<f;p+=3,d+=3)s(e,p,r,d);return!0}function me(e,t,n,r,i){Object(w.j)(He,e),Object(w.e)(We,e,t),ve(He,n,He,i),ve(We,n,We,i),Object(w.i)(r,We,He),Object(w.q)(r,r)}function we(e,t,n,r,i,a){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=new Array,c=Vt(e);try{for(c.s();!(o=c.n()).done;){var l,h=o.value,f=Vt(h);try{for(f.s();!(l=f.n()).done;){var p=l.value;u.push(p[0],p[1],t?p[2]:s)}}catch(j){f.e(j)}finally{f.f()}}}catch(j){c.e(j)}finally{c.f()}if(!ge(u,r,0,u,a,0,u.length/3))return!1;var d=0;i.length=0;var v,y=Vt(e);try{for(y.s();!(v=y.n()).done;){var b,g=v.value,m=new Array,w=Vt(g);try{for(w.s();!(b=w.n()).done;){var O=b.value;t&&n?m.push([u[d++],u[d++],u[d++],O[3]]):t?m.push([u[d++],u[d++],u[d++]]):n?(m.push([u[d++],u[d++],O[2]]),d++):(m.push([u[d++],u[d++]]),d++)}}catch(j){w.e(j)}finally{w.f()}i.push(m)}}catch(j){y.e(j)}finally{y.f()}return!0}function Oe(e,t,n,r){if(Object(u.j)(e)||Object(u.j)(r))return!1;var i=_e(e,Ne),a=_e(r,Fe);if(i===a&&1!==a&&(0!==i||Object(h.c)(e,r)))return Object(_.i)(n),Object(_.s)(n,n,t),!0;if(1===a||7===a||9===a){var o=0,s=0;if(1===a){var c=Re[i][6],l=Re[6][a];if(Object(u.j)(c)||Object(u.j)(l))return!1;c(t,0,Be,0),l(Be,0,qe,0),o=Ve*Be[0],s=Ve*Be[1]}else if(7===a||9===a){var f=Re[i][a];if(Object(u.j)(f))return!1;f(t,0,qe,0),o=Ve*t[0],s=Ve*t[1]}return je(s,o,n),n[12]=qe[0],n[13]=qe[1],n[14]=qe[2],!0}if(3===a&&(2===i||1===i)){var p=Re[i][6];if(Object(u.j)(p))return!1;p(t,0,Be,0);var d=Ve*Be[1];Se(Be,0,qe,0),Object(_.i)(n),Object(_.s)(n,n,qe);var v=1/Math.cos(d);return Object(_.r)(n,n,[v,v,1]),!0}return!1}function je(e,t,n){var r=Math.sin(t),i=Math.cos(t),a=Math.sin(e),o=Math.cos(e),s=n;return s[0]=-r,s[4]=-a*i,s[8]=o*i,s[12]=0,s[1]=i,s[5]=-a*r,s[9]=o*r,s[13]=0,s[2]=0,s[6]=o,s[10]=a,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1,s}function _e(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Object(j.f)(e,1)),t.spatialReferenceId=e.wkt===O.a.wkt?1:Object(h.j)(e)?2:Object(h.m)(e)?3:e.wkt===O.d.wkt?4:4490===e.wkid?5:e.wkt===O.b.wkt?7:e.wkt===O.c.wkt?9:Object(h.g)(e)?8:Object(h.h)(e)?10:0)}function xe(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function ke(e,t,n,r){n[r++]=Ge*(e[t++]/f.a.radius),n[r++]=Ge*(Math.PI/2-2*Math.atan(Math.exp(-1*e[t++]/f.a.radius))),n[r]=e[t]}function Se(e,t,n,r){!function(e,t,n,r,i){var a=.4999999*Math.PI,o=Object(g.c)(Ve*e[t+1],-a,a),s=Math.sin(o);n[r++]=Ve*e[t]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+s)/(1-s)),n[r]=e[t+2]}(e,t,n,r,f.a)}function Me(e){if(Object(u.j)(e))return!1;var t=_e(e,Ne);return!!Re[t][6]}function Ie(e,t,n,r,i){var a=i+e[t+2],o=Ve*e[t+1],s=Ve*e[t],u=Math.cos(o);n[r++]=Math.cos(s)*u*a,n[r++]=Math.sin(s)*u*a,n[r]=Math.sin(o)*a}function Te(e,t,n,r){Ie(e,t,n,r,f.a.radius)}function Ae(e,t,n,r,i){var a=e[t],o=e[t+1],s=e[t+2],u=Math.sqrt(a*a+o*o+s*s),c=Object(g.b)(s/(0===u?1:u)),l=Math.atan2(o,a);n[r++]=Ge*l,n[r++]=Ge*c,n[r]=u-i}function Ce(e,t,n,r){Ae(e,t,n,r,f.a.radius)}function Ee(e,t,n,r){!function(e,t,n,r,i){var a=Ve*e[t],o=Ve*e[t+1],s=e[t+2],u=Math.sin(o),c=Math.cos(o),l=i.radius/Math.sqrt(1-i.eccentricitySquared*u*u);n[r++]=(l+s)*c*Math.cos(a),n[r++]=(l+s)*c*Math.sin(a),n[r++]=(l*(1-i.eccentricitySquared)+s)*u}(e,t,n,r,f.a)}function Pe(e,t,n,r){var i,a,o,s,u,c,l,h,p,d,v,y,b,g,m,w,O,j,_,x,k,S=H.b,M=e[t],I=e[t+1],T=e[t+2];i=Math.abs(T),a=M*M+I*I,o=Math.sqrt(a),s=a+T*T,u=Math.sqrt(s),x=Math.atan2(I,M),c=T*T/s,l=a/s,g=S.a2/u,m=S.a3-S.a4/u,l>.3?(h=i/u*(1+l*(S.a1+g+c*m)/u),_=Math.asin(h),d=h*h,p=Math.sqrt(1-d)):(p=o/u*(1-c*(S.a5-g-l*m)/u),_=Math.acos(p),d=1-p*p,h=Math.sqrt(d)),v=1-f.a.eccentricitySquared*d,y=f.a.radius/Math.sqrt(v),_+=j=(w=p*(m=i-(b=S.a6*y)*h)-h*(g=o-y*p))/(b/v+(O=p*g+h*m)),k=O+w*j/2,T<0&&(_=-_),n[r++]=Ge*x,n[r++]=Ge*_,n[r]=k}var Re={2:{5:null,8:null,10:null,6:xe,1:Te,7:null,9:null,0:null,3:Se,2:xe,4:Ee},5:{5:xe,8:null,10:null,6:xe,1:Te,7:null,9:null,0:null,3:null,2:null,4:Ee},8:{5:null,8:xe,10:null,6:null,1:null,7:function(e,t,n,r){Ie(e,t,n,r,f.b.radius)},9:null,0:null,3:null,2:null,4:null},10:{5:null,8:null,10:xe,6:null,1:null,7:null,9:function(e,t,n,r){Ie(e,t,n,r,f.c.radius)},0:null,3:null,2:null,4:null},3:{5:null,8:null,10:null,6:ke,1:function(e,t,n,r){ke(e,t,n,r),Te(n,r,n,r)},7:null,9:null,0:null,3:xe,2:ke,4:function(e,t,n,r){ke(e,t,n,r),Ee(n,r,n,r)}},4:{5:Pe,8:null,10:null,6:Pe,1:function(e,t,n,r){Pe(e,t,n,r),Te(n,r,n,r)},7:null,9:null,0:null,3:function(e,t,n,r){Pe(e,t,n,r),Se(n,r,n,r)},2:Pe,4:xe},1:{5:Ce,8:null,10:null,6:Ce,1:xe,7:null,9:null,0:null,3:function(e,t,n,r){Ce(e,t,n,r),Se(n,r,n,r)},2:Ce,4:function(e,t,n,r){Ce(e,t,n,r),Ee(n,r,n,r)}},7:{5:null,8:function(e,t,n,r){Ae(e,t,n,r,f.b.radius)},10:null,6:null,1:null,7:xe,9:null,0:null,3:null,2:null,4:null},9:{5:null,8:null,10:function(e,t,n,r){Ae(e,t,n,r,f.c.radius)},6:null,1:null,7:null,9:xe,0:null,3:null,2:null,4:null},0:{5:null,8:null,10:null,6:null,1:null,7:null,9:null,0:xe,3:null,2:null,4:null},6:{5:null,8:null,10:null,6:xe,1:Te,7:null,9:null,0:null,3:null,2:xe,4:Ee}};function De(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le();return Object(u.j)(e)||Object(u.j)(t)?null:function(e,t,n){if(Object(u.j)(e)||Object(u.j)(t)||n.source.spatialReference===e&&n.dest.spatialReference===t)return n;var r=_e(e,n.source),i=_e(t,n.dest);return n.projector=0===r&&0===i?Object(h.c)(e,t)?xe:null:Re[r][i],n}(e,t,n).projector}function Le(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:xe}}var Ne={spatialReference:null,spatialReferenceId:0},Fe={spatialReference:null,spatialReferenceId:0},ze=Le(),Ve=(Le(),Object(g.d)(1)),Ge=Object(g.n)(1),Ue=Object(m.e)(),Be=Object(m.e)(),qe=Object(m.e)(),He=Object(m.e)(),We=Object(m.e)()},gkbi:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c}));var r=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},l={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},gmIG:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type=null,r}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);Object(r.a)([Object(i.b)({readOnly:!0,json:{read:!1,write:!0}})],o.prototype,"type",void 0),o=Object(r.a)([Object(a.a)("esri.tasks.support.ColorRamp")],o),t.a=o},grla:function(e,t,n){"use strict";function r(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n("wSAH")},guTz:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n("DZP5"),i=n("NckZ"),a=n("H9eC"),o=n("YXST"),s={types:a.k,json:{write:{writer:o.b},origins:{"web-scene":{types:a.l,write:{writer:o.b}}}}},u={types:{base:r.a,key:"type",typeMap:{"simple-fill":a.g.typeMap["simple-fill"],"picture-fill":a.g.typeMap["picture-fill"],"polygon-3d":a.g.typeMap["polygon-3d"]}},json:{write:{writer:o.b},origins:{"web-scene":{type:i.a,write:{writer:o.b}}}}}},gvqN:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return o}));var r,i=n("srIe"),a=n("WZb1");function o(){return s.apply(this,arguments)}function s(){return(s=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r||(r=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"CE9W"));case 2:return t=e.sent,e.next=5,t.arcade.load();case 5:return e.abrupt("return",{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature});case 6:case"end":return e.stop()}}),e)})))()),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n("4GrV");var u=function(e,t,n){return h.create(e,t,n,null,["$feature"])},c=function(e,t,n){return h.create(e,t,n,null,["$feature","$view"])},l=function(e,t,n,r){return h.create(e,t,n,r,["$feature","$view"])},h=function(){function e(t,n,r,i,a,o,s,u){Wt(this,e),this.script=t,this.evaluate=a,this.fields=s,this._syntaxTree=i,this._arcade=n,this._arcadeDictionary=r,this._arcadeFeature=o,this._spatialReference=u,this._referencesGeometry=n.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}var t;return Zt(e,[{key:"repurposeFeature",value:function(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}},{key:"repurposeAdapter",value:function(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}},{key:"createDictionary",value:function(){return new this._arcadeDictionary}},{key:"referencesMember",value:function(e){return this._arcade.referencesMember(this._syntaxTree,e)}},{key:"referencesFunction",value:function(e){return this._arcade.referencesFunction(this._syntaxTree,e)}},{key:"referencesGeometry",value:function(){return this._referencesGeometry}},{key:"referencesScale",value:function(){return this._referencesScale}},{key:"extractFieldLiterals",value:function(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}],[{key:"create",value:(t=Ut(regeneratorRuntime.mark((function t(n,r,s,u,c,l){var h,f,p,d,v,y,b,g,m,w,O,j,_,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return h=t.sent,f=h.arcade,p=h.Feature,d=h.Dictionary,v=a.a.fromJSON(r),y=f.parseScript(n,l),b=c.reduce((function(e,t){return Nt(Nt({},e),{},Ft({},t,null))}),{}),g=null,Object(i.k)(u)&&((g=new d(u)).immutable=!0,b.$config=null),m=f.scriptUsesGeometryEngine(y)&&f.enableGeometrySupport(),w=f.scriptUsesFeatureSet(y)&&f.enableFeatureSetSupport(),O=f.scriptIsAsync(y)&&f.enableAsyncSupport(),j={vars:b,spatialReference:v,useAsync:!!O},(_=new d).immutable=!1,_.setField("scale",0),x=f.compileScript(y,j),t.next=16,Promise.all([m,w,O]);case 16:return t.abrupt("return",new e(n,f,d,y,(function(e){return"$view"in e&&e.$view&&(_.setField("scale",e.$view.scale),e.$view=_),g&&(e.$config=g),x({vars:e,spatialReference:v})}),new p,s,v));case 17:case"end":return t.stop()}}),t)}))),function(e,n,r,i,a,o){return t.apply(this,arguments)})}]),e}()},h1D1:function(e,t,n){"use strict";function r(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:i(e[t])}}}function i(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];!function(e){var t=e.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call.apply(e,[this,t].concat(r)):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click())}}n.d(t,"a",(function(){return r}))},h2Da:function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=n("EyXx"),o=n("srIe"),s=(n("6S2I"),n("zqDF")),u=n("WbKI"),c=n("+opI"),l=n("r88o"),h=n("04ZG"),f=n("Cduq"),p=n("4EHJ"),d=(n("ju1D"),n("9AIY"),n("xHih")),v=n("f4Nx"),y=n("WZb1"),b=n("OvF4"),g=n("LE9a"),m=n("SFah"),w=n("Lqtk"),O=n("jWBI"),j=n("TRCY"),_=n("pqNC"),x=n("5pQd"),k=n("VLTf"),S=n("IvSi"),M=n("uRH/"),I=n("mXvl"),T=n("DbUH"),A=n("jhcG"),C=n("WmKv"),E=n("YBpl"),P=n("kJYu"),R=n("SaAm"),D=n("zlDU"),L=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],N={84:4326,83:4269,27:4267};function F(e){return L.some((function(t){var n=zt(t,2),r=n[0],i=n[1];return e>=r&&e<=i}))}function z(e,t,n){var r;return null!=(r=t.getAttribute(e))?r:n}function V(e,t){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(Z(r)&&r.nodeName===e)return r}return null}function G(e,t){for(var n=[],r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];Z(i)&&i.nodeName===e&&n.push(i)}return n}function U(e,t,n){var r=V(e,t);return r?r.textContent:n}function B(e,t,n){if(!e)return null;var r,i,a,o,s=parseFloat(e.getAttribute("minx")),u=parseFloat(e.getAttribute("miny")),c=parseFloat(e.getAttribute("maxx")),l=parseFloat(e.getAttribute("maxy"));n?(r=isNaN(u)?-Number.MAX_VALUE:u,i=isNaN(s)?-Number.MAX_VALUE:s,a=isNaN(l)?Number.MAX_VALUE:l,o=isNaN(c)?Number.MAX_VALUE:c):(r=isNaN(s)?-Number.MAX_VALUE:s,i=isNaN(u)?-Number.MAX_VALUE:u,a=isNaN(c)?Number.MAX_VALUE:c,o=isNaN(l)?Number.MAX_VALUE:l);var h=new y.a({wkid:t});return new b.a({xmin:r,ymin:i,xmax:a,ymax:o,spatialReference:h})}function q(e,t){var n=V(t,e);if(n){var r=V("DCPType",n);if(r){var i=V("HTTP",r);if(i){var a=V("Get",i);if(a){var o=function(e,t,n,r){var i=V("OnlineResource",n);return i?z("xlink:href",i,null):null}(0,0,a);if(o)return o.indexOf("&")===o.length-1&&(o=o.substring(0,o.length-1)),function(e,t){var n=[],r=Object(p.J)(e);for(var i in r.query)r.query.hasOwnProperty(i)&&-1===t.indexOf(i.toLowerCase())&&n.push(i+"="+r.query[i]);return r.path+(n.length?"?"+n.join("&"):"")}(o,["service","request"])}}}}return null}function H(e,t){var n=G("Operation",e);if(0===n.length)return G("Format",V(t,e)).map((function(e){return e.textContent}));var r=[];return n.forEach((function(e){e.getAttribute("name")===t&&G("Format",e).forEach((function(e){r.push(e.textContent)}))})),r}function W(e,t,n){var r=V(t,e);if(!r)return n;var i=r.textContent;if(null==i||""===i)return n;var a=Number(i);return isNaN(a)?n:a}function J(e,t,n){var r;if(!e)return null;var i={id:n.idCounter++,fullExtents:[],parentLayerId:null,queryable:"1"===e.getAttribute("queryable"),spatialReferences:[],sublayers:null},a=V("LatLonBoundingBox",e),o=V("EX_GeographicBoundingBox",e),s=null;a&&(s=B(a,4326)),o&&((s=new b.a(0,0,0,0,new y.a({wkid:4326}))).xmin=parseFloat(U("westBoundLongitude",o,"0")),s.ymin=parseFloat(U("southBoundLatitude",o,"0")),s.xmax=parseFloat(U("eastBoundLongitude",o,"0")),s.ymax=parseFloat(U("northBoundLatitude",o,"0"))),a||o||(s=new b.a(-180,-90,180,90,new y.a({wkid:4326}))),i.minScale=W(e,"MaxScaleDenominator",0),i.maxScale=W(e,"MinScaleDenominator",0);var u=["1.0.0","1.1.0","1.1.1"].indexOf(t)>-1?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach((function(e){if("Name"===e.nodeName)i.name=e.textContent||"";else if("Title"===e.nodeName)i.title=e.textContent||"";else if("Abstract"===e.nodeName)i.description=e.textContent||"";else if("BoundingBox"===e.nodeName){var r=e.getAttribute(u);if(r&&0===r.indexOf("EPSG:")){var a=parseInt(r.substring(5),10);0===a||isNaN(a)||s||(s="1.3.0"===t?B(e,a,F(a)):B(e,a))}var o=r&&r.indexOf(":");if(o&&o>-1){var c=parseInt(r.substring(o+1,r.length),10);0===c||isNaN(c)||(c=N[c]?N[c]:c);var l="1.3.0"===t?B(e,c,F(c)):B(e,c);i.fullExtents.push(l)}}else if(e.nodeName===u)e.textContent.split(" ").forEach((function(e){0===(e=e.indexOf(":")>-1?parseInt(e.split(":")[1],10):parseInt(e,10))||isNaN(e)||(N[e]&&(e=N[e]),-1===i.spatialReferences.indexOf(e)&&i.spatialReferences.push(e))}));else if("Style"!==e.nodeName||i.legendURL){if("Layer"===e.nodeName){var h=J(e,t,n);h&&(h.parentLayerId=i.id,i.sublayers||(i.sublayers=[]),i.sublayers.push(h))}}else{var f=V("LegendURL",e);if(f){var p=V("OnlineResource",f);p&&(i.legendURL=p.getAttribute("xlink:href"))}}})),i.extent=null==(r=s)?void 0:r.toJSON(),i.dimensions=G("Dimension",e).filter((function(e){return e.getAttribute("name")&&e.getAttribute("units")&&e.textContent})).map((function(e){var t=e.getAttribute("name"),n=e.getAttribute("units"),r=e.textContent,i=e.getAttribute("unitSymbol"),a=e.getAttribute("default"),o="0"!==z("default",e,"0"),s="0"!==z("nearestValue",e,"0"),u="0"!==z("current",e,"0");return/^time$/i.test(t)&&/^ISO8601$/i.test(n)?{name:"time",units:"ISO8601",extent:Q(r),default:Q(a),multipleValues:o,nearestValue:s,current:u}:/^elevation$/i.test(t)?{name:"elevation",units:n,extent:Y(r),unitSymbol:i,default:Y(a),multipleValues:o,nearestValue:s}:{name:t,units:n,extent:X(r),unitSymbol:i,default:X(a),multipleValues:o,nearestValue:s}})),i}function Z(e){return e.nodeType===Node.ELEMENT_NODE}function K(e){return"time"===e.name}function Y(e){if(!e)return null;var t=-1!==e.indexOf("/"),n=e.split(",");return t?n.map((function(e){var t=e.split("/");return t.length<2?null:{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&"0"!==t[2]?parseFloat(t[2]):void 0}})).filter((function(e){return e})):n.map((function(e){return parseFloat(e)}))}function X(e){if(!e)return null;var t=-1!==e.indexOf("/"),n=e.split(",");return t?n.map((function(e){var t=e.split("/");return t.length<2?null:{min:t[0],max:t[1],resolution:t.length>=3&&"0"!==t[2]?t[2]:void 0}})).filter((function(e){return e})):n}function Q(e){if(!e)return null;var t=-1!==e.indexOf("/"),n=e.split(",");return t?n.map((function(e){var t=e.split("/");return t.length<2?null:{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&"0"!==t[2]?$(t[2]):void 0}})).filter((function(e){return e})):n.map((function(e){return new Date(e)}))}function $(e){var t=e.match(/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i);return t?{years:ee(t[1]),months:ee(t[2]),days:ee(t[3]),hours:ee(t[4]),minutes:ee(t[5]),seconds:ee(t[6])}:null}function ee(e){if(!e)return 0;var t=e.match(/(?:\d+(?:.|,)\d+|\d+)/);if(!t)return 0;var n=t[0].replace(",",".");return Number(n)}function te(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}var ne,re=new Set([102100,3857,102113,900913]),ie=new Set([3395,54004]),ae=n("uAeW"),oe=n("Gj5k"),se=n("r0DZ"),ue=0,ce=ne=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._sublayersHandles=new se.a,r.dimensions=null,r.fullExtents=null,r.featureInfoFormat=null,r.featureInfoUrl=null,r.legendUrl=null,r.legendEnabled=!0,r.maxScale=0,r.minScale=0,r.popupEnabled=!1,r.queryable=!1,r.spatialReferences=null,r}return Zt(n,[{key:"description",get:function(){return this._get("description")},set:function(e){this._set("description",e)}},{key:"fullExtent",get:function(){return this._get("fullExtent")},set:function(e){this._set("fullExtent",e)}},{key:"readExtent",value:function(e,t){return(e=t.extent)?b.a.fromJSON(e):null}},{key:"id",get:function(){var e=this._get("id");return null==e?ue++:e},set:function(e){this._set("id",e)}},{key:"readLegendUrl",value:function(e,t){return t?t.legendUrl||t.legendURL:null}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"name",get:function(){return this._get("name")},set:function(e){this._set("name",e)}},{key:"sublayers",set:function(e){var t=this,n=this._get("sublayers");n&&(n.forEach((function(e){e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles.add([e.on("after-add",(function(e){var n=e.item;n.parent=t,n.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))])),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(s.m)(g.a.ofType(ne),e)}},{key:"title",get:function(){return this._get("title")},set:function(e){this._set("title",e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"clone",value:function(){var e=new ne;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents.map((function(e){return e.clone()}))),this.hasOwnProperty("featureInfoFormat")&&(e.featureInfoFormat=this.featureInfoFormat),this.hasOwnProperty("featureInfoUrl")&&(e.featureInfoUrl=this.featureInfoUrl),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers&&this.sublayers.map((function(e){return e.clone()}))),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences.map((function(e){return e}))),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}},{key:"_setAndNotifyLayer",value:function(e,t){var n=this.layer;this._get(e)!==t&&(this._set(e,t),n&&n.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}}]),n}(x.b);Object(r.a)([Object(u.b)()],ce.prototype,"description",null),Object(r.a)([Object(u.b)({readOnly:!0})],ce.prototype,"dimensions",void 0),Object(r.a)([Object(u.b)({value:null})],ce.prototype,"fullExtent",null),Object(r.a)([Object(l.a)("fullExtent",["extent"])],ce.prototype,"readExtent",null),Object(r.a)([Object(u.b)()],ce.prototype,"fullExtents",void 0),Object(r.a)([Object(u.b)()],ce.prototype,"featureInfoFormat",void 0),Object(r.a)([Object(u.b)()],ce.prototype,"featureInfoUrl",void 0),Object(r.a)([Object(u.b)({type:Number,json:{write:{enabled:!1,overridePolicy:function(){return{ignoreOrigin:!0,enabled:!0}}}}})],ce.prototype,"id",null),Object(r.a)([Object(u.b)({type:String,json:{origins:{"web-document":{read:{source:["legendUrl","legendURL"]},write:{target:"legendUrl",ignoreOrigin:!0}}},read:{source:"legendURL"},write:{ignoreOrigin:!0}}})],ce.prototype,"legendUrl",void 0),Object(r.a)([Object(l.a)(["web-document"],"legendUrl")],ce.prototype,"readLegendUrl",null),Object(r.a)([Object(u.b)({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"},origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ce.prototype,"legendEnabled",void 0),Object(r.a)([Object(u.b)({value:null})],ce.prototype,"layer",null),Object(r.a)([Object(u.b)()],ce.prototype,"maxScale",void 0),Object(r.a)([Object(u.b)()],ce.prototype,"minScale",void 0),Object(r.a)([Object(u.b)({type:String,value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],ce.prototype,"name",null),Object(r.a)([Object(u.b)()],ce.prototype,"parent",void 0),Object(r.a)([Object(u.b)({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],ce.prototype,"popupEnabled",void 0),Object(r.a)([Object(u.b)({type:Boolean,json:{write:{ignoreOrigin:!0}}})],ce.prototype,"queryable",void 0),Object(r.a)([Object(u.b)()],ce.prototype,"sublayers",null),Object(r.a)([Object(oe.a)("sublayers")],ce.prototype,"castSublayers",null),Object(r.a)([Object(u.b)({type:[Number],json:{read:{source:"spatialReferences"}}})],ce.prototype,"spatialReferences",void 0),Object(r.a)([Object(u.b)({type:String,value:null,json:{write:{ignoreOrigin:!0}}})],ce.prototype,"title",null),Object(r.a)([Object(u.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],ce.prototype,"visible",null);var le=ce=ne=Object(r.a)([Object(h.a)("esri.layers.support.WMSSublayer")],ce),he=new c.a({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1}),fe=function(e){Kt(i,e);var t,n,r=Xt(i);function i(){var e;Wt(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).allSublayers=new j.a({root:$t(e),rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),e.customParameters=null,e.customLayerParameters=null,e.copyright=null,e.description=null,e.dimensions=null,e.fullExtent=null,e.fullExtents=null,e.featureInfoFormat=null,e.featureInfoUrl=null,e.imageFormat=null,e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.legendEnabled=!0,e.mapUrl=null,e.isReference=null,e.operationalLayerType="WMS",e.spatialReference=null,e.spatialReferences=null,e.sublayers=null,e.type="wms",e.url=null,e.version=null,e.watch("sublayers",(function(t,n){if(n){var r,i=Vt(n);try{for(i.s();!(r=i.n()).done;){r.value.layer=null}}catch(u){i.e(u)}finally{i.f()}e.handles.remove("wms-sublayer")}if(t){var a,o=Vt(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.parent=$t(e),s.layer=$t(e)}}catch(u){o.e(u)}finally{o.f()}e.handles.add([t.on("after-add",(function(t){var n=t.item;n.parent=$t(e),n.layer=$t(e)})),t.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"wms-sublayer")}}),!0),e}return Zt(i,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Nt({url:e},t):e}},{key:"load",value:function(e){var t=this,n=Object(o.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).then((function(){return t._fetchService(n)}),(function(){return t._fetchService(n)}))),Promise.resolve(this)}},{key:"readFullExtentFromItemOrMap",value:function(e,t){var n=t.extent;return new b.a({xmin:n[0][0],ymin:n[0][1],xmax:n[1][0],ymax:n[1][1]})}},{key:"writeFullExtent",value:function(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}},{key:"readImageFormat",value:function(e,t){var n=t.supportedImageFormatTypes;return n&&n.indexOf("image/png")>-1?"image/png":n&&n[0]}},{key:"readSpatialReferenceFromItemOrDocument",value:function(e,t){return new y.a(t.spatialReferences[0])}},{key:"writeSpatialReferences",value:function(e,t){var n=this.spatialReference&&this.spatialReference.wkid;e&&n?(t.spatialReferences=e.filter((function(e){return e!==n})),t.spatialReferences.unshift(n)):t.spatialReferences=e}},{key:"readSublayersFromItemOrMap",value:function(e,t,n){return pe(t.layers,n,t.visibleLayers)}},{key:"readSublayers",value:function(e,t,n){return pe(t.layers,n)}},{key:"writeSublayers",value:function(e,t,n,r){t.layers=[];var i=new Map,a=e.flatten((function(e){var t=e.sublayers;return t&&t.toArray()})).toArray();a.forEach((function(e){"number"==typeof e.parent.id&&(i.has(e.parent.id)?i.get(e.parent.id).push(e.id):i.set(e.parent.id,[e.id]))})),a.forEach((function(e){var n=Nt({sublayer:e},r),a=e.write({parentLayerId:"number"==typeof e.parent.id?e.parent.id:-1},n);if(i.has(e.id)&&(a.sublayerIds=i.get(e.id)),!e.sublayers&&e.name){var o=e.write({},n);delete o.id,t.layers.push(o)}})),t.visibleLayers=a.filter((function(e){return e.visible&&!e.sublayers})).map((function(e){return e.name}))}},{key:"createExportImageParameters",value:function(e,t,n,r){var i=r&&r.pixelRatio||1,a=Object(R.b)({extent:e,width:t})*i,s=new ae.a({layer:this,scale:a}),u=e.xmin,c=e.ymin,l=e.xmax,h=e.ymax,f=function(e,t){var n=e.wkid;return Object(o.j)(t)?n:(!t.includes(n)&&e.latestWkid&&(n=e.latestWkid),re.has(n)?t.find((function(e){return re.has(e)}))||t.find((function(e){return ie.has(e)}))||102100:n)}(e.spatialReference,this.spatialReferences),p="1.3.0"===this.version&&F(f)?"".concat(c,",").concat(u,",").concat(h,",").concat(l):"".concat(u,",").concat(c,",").concat(l,",").concat(h),d=s.toJSON();return Nt(Ft({bbox:p},"1.3.0"===this.version?"crs":"srs",isNaN(f)?void 0:"EPSG:"+f),d)}},{key:"fetchImage",value:(n=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.mapUrl,(u=this.createExportImageParameters(t,n,r,i)).layers){e.next=4;break}return c=document.createElement("canvas"),e.abrupt("return",(c.width=n,c.height=r,c));case 4:return l=null==i||null==(a=i.timeExtent)?void 0:a.start,h=null==i||null==(o=i.timeExtent)?void 0:o.end,f=l&&h?l.getTime()===h.getTime()?te(l):"".concat(te(l),"/").concat(te(h)):void 0,p={responseType:"image",query:this._mixCustomParameters(Nt(Nt({width:n,height:r},u),{},{time:f})),signal:null==i?void 0:i.signal},e.abrupt("return",(null!=i&&i.timestamp&&(p.query=Nt({_ts:i.timestamp},p.query)),Object(w.default)(s,p).then((function(e){return e.data}))));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"fetchFeatureInfo",value:function(e,t,n,r,i){var a=Object(R.b)({extent:e,width:t}),o=function(e){return e.length?e.filter((function(e){return e.popupEnabled&&e.name&&e.queryable})).map((function(e){return e.name})).join(","):""}(new ae.a({layer:this,scale:a}).visibleSublayers);if(!this.featureInfoUrl||!o)return null;var s=Nt({query_layers:o,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:t,height:n},"1.3.0"===this.version?{I:r,J:i}:{x:r,y:i}),u=Nt(Nt({},this.createExportImageParameters(e,t,n)),s),c=this._mixCustomParameters(u),l=Object(p.e)(this.featureInfoUrl,c),h=document.createElement("iframe");h.src=l,h.frameBorder="0",h.marginHeight="0",h.marginWidth="0",h.style.width="100%",h.setAttribute("sandbox","");var f=new m.a({title:this.title,content:h});return new O.a({sourceLayer:this,popupTemplate:f})}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"findSublayerByName",value:function(e){return this.allSublayers.find((function(t){return t.name===e}))}},{key:"supportsSpatialReference",value:function(e){return Object(k.d)(this.url)||this.spatialReferences.some((function(t){var n=900913===t?y.a.WebMercator:new y.a({wkid:t});return Object(v.c)(n,e)}))}},{key:"_fetchService",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.resourceInfo){e.next=6;break}return this.parsedUrl.query&&this.parsedUrl.query.service&&(this.parsedUrl.query.SERVICE=this.parsedUrl.query.service,delete this.parsedUrl.query.service),this.parsedUrl.query&&this.parsedUrl.query.request&&(this.parsedUrl.query.REQUEST=this.parsedUrl.query.request,delete this.parsedUrl.query.request),e.next=4,Object(w.default)(this.parsedUrl.path,{query:Nt(Nt({SERVICE:"WMS",REQUEST:"GetCapabilities"},this.parsedUrl.query),this.customParameters),responseType:"xml",signal:t});case 4:n=e.sent,this.resourceInfo=function(e){if(!e)return null;var t={idCounter:-1};"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/xml"));var n=e.documentElement;if("ServiceExceptionReport"===n.nodeName){var r=Array.prototype.slice.call(n.childNodes).map((function(e){return e.textContent})).join("\r\n");throw new D.a("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",r)}var i=V("Capability",n),a=V("Service",n),o=V("Request",i);if(!i||!a||!o)return null;var s=V("Layer",i);if(!s)return null;var u,c,l,h,f="WMS_Capabilities"===n.nodeName||"WMT_MS_Capabilities"===n.nodeName?n.getAttribute("version"):"1.3.0",p=U("Title",a,"")||U("Name",a,""),d=U("AccessConstraints",a,""),v=U("Abstract",a,""),y=parseInt(U("MaxWidth",a,"5000"),10),g=parseInt(U("MaxHeight",a,"5000"),10),m=H(o,"GetMap"),w=q(o,"GetMap"),O=J(s,f,t),j=0;if(Array.prototype.slice.call(i.childNodes).forEach((function(e){"Layer"===e.nodeName&&(0===j?u=e:1===j?(O.name&&(O.name="",O.sublayers.push(J(u,f,t))),O.sublayers.push(J(e,f,t))):O.sublayers.push(J(e,f,t)),j++)})),!O)return null;var _=O.fullExtents;if((c=O.sublayers)||(c=[]),0===c.length&&c.push(O),!(l=O.extent)){var x=new b.a(c[0].extent);O.extent=x.toJSON(),l=O.extent}!(h=O.spatialReferences).length&&c.length>0&&c.forEach((function(e){h.length||(h=e.spatialReferences||function e(t){var n=[];return t.sublayers.forEach((function(t){!n.length&&t.spatialReferences.length&&(n=t.spatialReferences||e(t))})),n}(e))}));var k,S=q(o,"GetFeatureInfo");if(S){var M=H(o,"GetFeatureInfo");M.indexOf("text/html")>-1?k="text/html":M.indexOf("text/plain")>-1&&(k="text/plain")}k||function e(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach((function(t){e(t)})))}(O);var I=function e(t){var n=[];return t.forEach((function(t){n.push(t),t.sublayers&&t.sublayers.length&&(n=n.concat(e(t.sublayers)),delete t.sublayers)})),n}(c),T=O.minScale||0,A=O.maxScale||0,C=O.dimensions,E=I.reduce((function(e,t){return e.concat(t.dimensions)}),[]),P=C.concat(E).filter(K),R=null;if(P.length>0){var L=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY;P.forEach((function(e){var t=e.extent;!function(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}(t)?t.forEach((function(e){L=Math.min(L,e.min.getTime()),N=Math.max(N,e.max.getTime())})):t.forEach((function(e){L=Math.min(L,e.getTime()),N=Math.max(N,e.getTime())}))})),R={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[L,N]}}return{copyright:d,description:v,dimensions:C,extent:l,fullExtents:_,featureInfoFormat:k,featureInfoUrl:S,mapUrl:w,maxWidth:y,maxHeight:g,maxScale:A,minScale:T,layers:I,spatialReferences:h,supportedImageFormatTypes:m,timeInfo:R,title:p,version:f}}(n.data);case 6:this.parsedUrl&&("https"!==(r=new p.a(this.parsedUrl.path)).scheme||r.port&&"443"!==r.port||-1!==a.a.request.httpsDomains.indexOf(r.host)||a.a.request.httpsDomains.push(r.host)),this.read(this.resourceInfo,{origin:"service"});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_mixCustomParameters",value:function(e){if(!this.customLayerParameters&&!this.customParameters)return e;var t=Nt(Nt({},this.customParameters),this.customLayerParameters);for(var n in t)e[n.toLowerCase()]=t[n];return e}}]),i}(Object(P.b)(Object(I.a)(Object(E.a)(Object(A.a)(Object(C.a)(Object(M.a)(Object(T.a)(Object(x.a)(_.a)))))))));function pe(e,t,n){var r=new Map;e.every((function(e){return null==e.id}))&&(e=Object(i.a)(e)).forEach((function(e,t){return e.id=t}));var a,o=Vt(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=new le;u.read(s,t),-1===(null==n?void 0:n.indexOf(u.name))&&(u.visible=!1),r.set(u.id,u)}}catch(v){o.e(v)}finally{o.f()}var c,l=[],h=Vt(e);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=r.get(f.id);if(null!=f.parentLayerId&&f.parentLayerId>=0){var d=r.get(f.parentLayerId);d.sublayers||(d.sublayers=new g.a),d.sublayers.unshift(p)}else l.unshift(p)}}catch(v){h.e(v)}finally{h.f()}return l}Object(r.a)([Object(u.b)({readOnly:!0})],fe.prototype,"allSublayers",void 0),Object(r.a)([Object(u.b)({json:{type:Object,write:!0}})],fe.prototype,"customParameters",void 0),Object(r.a)([Object(u.b)({json:{type:Object,write:!0}})],fe.prototype,"customLayerParameters",void 0),Object(r.a)([Object(u.b)({type:String,json:{write:!0}})],fe.prototype,"copyright",void 0),Object(r.a)([Object(u.b)()],fe.prototype,"description",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],fe.prototype,"dimensions",void 0),Object(r.a)([Object(u.b)({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{service:{read:{source:"extent"}}}}})],fe.prototype,"fullExtent",void 0),Object(r.a)([Object(l.a)(["web-document","portal-item"],"fullExtent",["extent"])],fe.prototype,"readFullExtentFromItemOrMap",null),Object(r.a)([Object(f.a)(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],fe.prototype,"writeFullExtent",null),Object(r.a)([Object(u.b)()],fe.prototype,"fullExtents",void 0),Object(r.a)([Object(u.b)({type:String,json:{write:{ignoreOrigin:!0}}})],fe.prototype,"featureInfoFormat",void 0),Object(r.a)([Object(u.b)({type:String,json:{write:{ignoreOrigin:!0}}})],fe.prototype,"featureInfoUrl",void 0),Object(r.a)([Object(u.b)({type:String,json:{origins:{"web-document":{default:"image/png",type:he.jsonValues,read:{reader:he.read,source:"format"},write:{writer:he.write,target:"format"}}}}})],fe.prototype,"imageFormat",void 0),Object(r.a)([Object(l.a)("imageFormat",["supportedImageFormatTypes"])],fe.prototype,"readImageFormat",null),Object(r.a)([Object(u.b)({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],fe.prototype,"imageMaxHeight",void 0),Object(r.a)([Object(u.b)({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],fe.prototype,"imageMaxWidth",void 0),Object(r.a)([Object(u.b)()],fe.prototype,"imageTransparency",void 0),Object(r.a)([Object(u.b)(S.e)],fe.prototype,"legendEnabled",void 0),Object(r.a)([Object(u.b)({type:["show","hide","hide-children"]})],fe.prototype,"listMode",void 0),Object(r.a)([Object(u.b)({type:String,json:{write:{ignoreOrigin:!0}}})],fe.prototype,"mapUrl",void 0),Object(r.a)([Object(u.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],fe.prototype,"isReference",void 0),Object(r.a)([Object(u.b)({type:["WMS"]})],fe.prototype,"operationalLayerType",void 0),Object(r.a)([Object(u.b)({type:y.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],fe.prototype,"spatialReference",void 0),Object(r.a)([Object(l.a)(["web-document","portal-item"],"spatialReference",["spatialReferences"])],fe.prototype,"readSpatialReferenceFromItemOrDocument",null),Object(r.a)([Object(u.b)({type:[s.a],json:{read:{source:"spatialReferences"},write:{ignoreOrigin:!0}}})],fe.prototype,"spatialReferences",void 0),Object(r.a)([Object(f.a)(["web-document","portal-item"],"spatialReferences")],fe.prototype,"writeSpatialReferences",null),Object(r.a)([Object(u.b)({type:g.a.ofType(le),json:{write:{target:"layers",overridePolicy:function(e,t,n){if(function(e,t){return e.some((function(e){for(var n in e)if(Object(d.a)(e,n,null,t))return!0;return!1}))}(this.allSublayers,n))return{ignoreOrigin:!0}}}}})],fe.prototype,"sublayers",void 0),Object(r.a)([Object(l.a)(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],fe.prototype,"readSublayersFromItemOrMap",null),Object(r.a)([Object(l.a)("service","sublayers",["layers"])],fe.prototype,"readSublayers",null),Object(r.a)([Object(f.a)("sublayers",{layers:{type:[le]},visibleLayers:{type:[String]}})],fe.prototype,"writeSublayers",null),Object(r.a)([Object(u.b)({json:{read:!1},readOnly:!0,value:"wms"})],fe.prototype,"type",void 0),Object(r.a)([Object(u.b)(S.n)],fe.prototype,"url",void 0),Object(r.a)([Object(u.b)({type:String,json:{write:{ignoreOrigin:!0}}})],fe.prototype,"version",void 0),fe=Object(r.a)([Object(h.a)("esri.layers.WMSLayer")],fe),t.default=fe},h7dw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return a}));var r={func:513},i={func:519},a={mask:255},o={mask:0},s={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},u={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},c={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},l={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},hTmG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return i})),n("wSAH");var r=n("srIe");function i(e,t){return e.vertexBuffers[t].size/a(e.layout[t])}function a(e){return e[0].stride}function o(e,t,n,r,i){var a=e.gl,o=e.capabilities.instancing;e.bindBuffer(n);var s,u=Vt(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=t[c.name],h=(i||(0+c.baseInstance?c.baseInstance:0))*c.stride;if(void 0===l&&console.error("There is no location for vertex attribute '".concat(c.name,"' defined.")),c.baseInstance&&!c.divisor&&console.error("Vertex attribute '".concat(c.name,"' uses baseInstanceOffset without divisor.")),c.count<=4)a.vertexAttribPointer(l,c.count,c.type,c.normalized,c.stride,c.offset+h),a.enableVertexAttribArray(l),c.divisor&&c.divisor>0&&o&&o.vertexAttribDivisor(l,c.divisor);else if(9===c.count)for(var f=0;f<3;f++)a.vertexAttribPointer(l+f,3,c.type,c.normalized,c.stride,c.offset+12*f+h),a.enableVertexAttribArray(l+f),c.divisor&&c.divisor>0&&o&&o.vertexAttribDivisor(l+f,c.divisor);else if(16===c.count)for(var p=0;p<4;p++)a.vertexAttribPointer(l+p,4,c.type,c.normalized,c.stride,c.offset+16*p+h),a.enableVertexAttribArray(l+p),c.divisor&&c.divisor>0&&o&&o.vertexAttribDivisor(l+p,c.divisor);else console.error("Unsupported vertex attribute element count: "+c.count)}}catch(d){u.e(d)}finally{u.f()}}function s(e,t,n,r){var i=e.gl,a=e.capabilities.instancing;e.bindBuffer(n);var o,s=Vt(r);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=t[u.name];if(u.count<=4)i.disableVertexAttribArray(c),u.divisor&&u.divisor>0&&a&&a.vertexAttribDivisor(c,0);else if(9===u.count)for(var l=0;l<3;l++)i.disableVertexAttribArray(c+l),u.divisor&&u.divisor>0&&a&&a.vertexAttribDivisor(c+l,0);else if(16===u.count)for(var h=0;h<4;h++)i.disableVertexAttribArray(c+h),u.divisor&&u.divisor>0&&a&&a.vertexAttribDivisor(c+h,0);else console.error("Unsupported vertex attribute element count: "+u.count)}}catch(f){s.e(f)}finally{s.f()}e.unbindBuffer(34962)}function u(e){switch(e){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function c(e){if(Object(r.j)(e))return 0;if("colorAttachment"in e)return e.glName?c(e.colorAttachment)+c(e.depthStencilAttachment):0;if("descriptor"in e)return e.glName?c(e.descriptor):0;var t=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!t)return 0;var n="hasMipmap"in e&&e.hasMipmap?1.3:1,i=e.width*e.height;return u(t)*i*n}},hnWO:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}));var r=n("/ADo"),i=n("WVfK"),a=Object(r.a)().vec3f("position"),o=Object(r.a)().vec3f("position").vec2f("uv0"),s=Object(r.a)().vec3f("position").vec4u8("color"),u=function(){function e(t){Wt(this,e),this.vertexBufferLayout=t}return Zt(e,[{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){return e.indices.get("position").length}},{key:"write",value:function(e,t,n,r){Object(i.c)(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,n,r)}}]),e}()},"hrr/":function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r,i=n("srIe"),a=n("6S2I"),o=n("OKTS"),s=n("qRWG"),u=n("Cy1f"),c=n("5DEt"),l=n("M0lq"),h=n("/ADo"),f=n("0Kx6"),p=n("EVMh"),d=n("EDiM"),v=n("tiP8"),y=n("1/dN"),b=n("NbNv"),g=n("2uVf"),m=n("R/jG");(r||(r={})).Default={vvSizeEnabled:!1,vvSizeMinSize:Object(m.c)(1,1,1),vvSizeMaxSize:Object(m.c)(100,100,100),vvSizeOffset:Object(m.c)(0,0,0),vvSizeFactor:Object(m.c)(1,1,1),vvSizeValue:Object(m.c)(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:Object(g.a)()};var w=r,O=n("pO5D"),j=n("w6Td"),_=n("ypgp"),x=n("2jVe"),k=n("jjdI"),S=n("GJyJ"),M=n("jpeq"),I=n("0nJL"),T=n("agdK"),A=n("viRi"),C=n("dDjh"),E=n("xtdb"),P=n("h7dw"),R=n("mmha"),D={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7},L=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).stipplePattern=null,i.stippleTextureBind=null,i.stippleTextureRepository=e.stippleTextureRepository,i}return Zt(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build({OITEnabled:0===r.transparencyPassType,output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:r.stippleEnabled,stippleOffColorEnabled:r.stippleOffColorEnabled,stippleUVMaxEnabled:r.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:r.stippleIntegerRepeatsEnabled,roundCaps:r.roundCaps,roundJoins:r.roundJoins,vvColor:r.vvColor,vvSize:r.vvSize,vvInstancingEnabled:!0,vvOpacity:r.vvOpacity,falloffEnabled:r.falloffEnabled,innerColorEnabled:r.innerColorEnabled,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new k.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),D)}},{key:"dispose",value:function(){Dt(en(n.prototype),"dispose",this).call(this),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}},{key:"bindPass",value:function(e,t,n){if(M.a.bindProjectionMatrix(this.program,n.camera.projectionMatrix),4===this.configuration.output&&T.a.bindOutputHighlight(e,this.program,n),n.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",n.inverseViewport),Object(E.a)(this.program,e,n)),this.program.setUniform1f("intrinsicWidth",t.width),this.program.setUniform4fv("intrinsicColor",t.color),this.program.setUniform1f("miterLimit","miter"!==t.join?0:t.miterLimit),this.program.setUniform2fv("cameraNearFar",n.camera.nearFar),this.program.setUniform1f("pixelRatio",n.camera.pixelRatio),this.program.setUniform2f("screenSize",n.camera.fullViewport[2],n.camera.fullViewport[3]),A.a.bindUniformsWithOpacity(this.program,t),this.stipplePattern!==t.stipplePattern){var r=t.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,r),this.stipplePattern=r}if(this.configuration.stippleEnabled){var a=Object(i.k)(this.stippleTextureBind)?this.stippleTextureBind(e,0)*n.camera.pixelRatio:1;if(this.program.setUniform1i("stipplePatternTexture",0),this.program.setUniform1f("stipplePatternPixelSizeInv",1/a),this.configuration.stippleOffColorEnabled){var o=Object(i.q)(t.stippleOffColor);this.program.setUniform4f("stippleOffColor",o[0],o[1],o[2],o.length>3?o[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",t.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",Object(i.r)(t.innerColor,t.color)),this.program.setUniform1f("innerWidth",t.innerWidth*n.camera.pixelRatio))}},{key:"bindDraw",value:function(e){M.a.bindView(this.program,e),I.a.bindUniformsWithOrigin(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e,t){var n=this.configuration,r=3===e,i=2===e;return Object(S.d)({blending:0===n.output||7===n.output?r?C.f:Object(C.a)(e):null,depthTest:{func:Object(C.b)(e)},depthWrite:r?!n.transparent&&n.writeDepth&&S.c:Object(C.c)(e),colorWrite:S.b,stencilWrite:n.sceneHasOcludees?P.h:null,stencilTest:n.sceneHasOcludees?t?P.d:P.c:null,polygonOffset:r||i?n.polygonOffset&&N:C.d})}},{key:"initializePipeline",value:function(){var e=this.configuration,t=e.polygonOffset&&N;return e.occluder&&(this._occluderPipelineTransparent=Object(S.d)({blending:C.f,polygonOffset:t,depthTest:P.a,depthWrite:null,colorWrite:S.b,stencilWrite:null,stencilTest:P.f}),this._occluderPipelineOpaque=Object(S.d)({blending:C.f,polygonOffset:t,depthTest:P.a,depthWrite:null,colorWrite:S.b,stencilWrite:P.g,stencilTest:P.e}),this._occluderPipelineMaskWrite=Object(S.d)({blending:null,polygonOffset:t,depthTest:P.b,depthWrite:null,colorWrite:null,stencilWrite:P.h,stencilTest:P.d})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"primitiveType",get:function(){return 5}},{key:"getPipelineState",value:function(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}]),n}(_.a);L.shader=new j.a(R.a,(function(){return n.e(53).then(n.bind(null,"rG3d"))}));var N={factor:0,units:-4},F=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).output=0,e.occluder=!1,e.slicePlaneEnabled=!1,e.transparent=!1,e.polygonOffset=!1,e.writeDepth=!1,e.stippleEnabled=!1,e.stippleOffColorEnabled=!1,e.stippleIntegerRepeatsEnabled=!1,e.roundCaps=!1,e.roundJoins=!1,e.vvSize=!1,e.vvColor=!1,e.vvOpacity=!1,e.falloffEnabled=!1,e.innerColorEnabled=!1,e.sceneHasOcludees=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!0,e}return n}(x.a);Object(O.a)([Object(x.b)({count:8})],F.prototype,"output",void 0),Object(O.a)([Object(x.b)()],F.prototype,"occluder",void 0),Object(O.a)([Object(x.b)()],F.prototype,"slicePlaneEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"transparent",void 0),Object(O.a)([Object(x.b)()],F.prototype,"polygonOffset",void 0),Object(O.a)([Object(x.b)()],F.prototype,"writeDepth",void 0),Object(O.a)([Object(x.b)()],F.prototype,"stippleEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"stippleOffColorEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"stippleIntegerRepeatsEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"roundCaps",void 0),Object(O.a)([Object(x.b)()],F.prototype,"roundJoins",void 0),Object(O.a)([Object(x.b)()],F.prototype,"vvSize",void 0),Object(O.a)([Object(x.b)()],F.prototype,"vvColor",void 0),Object(O.a)([Object(x.b)()],F.prototype,"vvOpacity",void 0),Object(O.a)([Object(x.b)()],F.prototype,"falloffEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"innerColorEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"sceneHasOcludees",void 0),Object(O.a)([Object(x.b)({count:4})],F.prototype,"transparencyPassType",void 0),Object(O.a)([Object(x.b)()],F.prototype,"multipassTerrainEnabled",void 0),Object(O.a)([Object(x.b)()],F.prototype,"cullAboveGround",void 0);var z=a.a.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial"),V=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e,U))._vertexAttributeLocations=D,r.techniqueConfig=new F,r.layout=r.createLayout(),r}return Zt(n,[{key:"isClosed",value:function(e,t){return W(this.params,e,t)}},{key:"dispose",value:function(){}},{key:"getPassParameters",value:function(){return this.params}},{key:"getTechniqueConfig",value:function(e,t){this.techniqueConfig.output=e;var n=Object(i.k)(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=n,this.techniqueConfig.stippleIntegerRepeatsEnabled=n&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=n&&Object(i.k)(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins="round"===this.params.join,this.techniqueConfig.roundCaps="round"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&Object(i.k)(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,n,r,i,a,o,s,u){u?this.intersectDrapedLineGeometry(e,r,a,o):this.intersectLineGeometry(e,t,n,r,this.params.width,o)}},{key:"intersectDrapedLineGeometry",value:function(e,t,n,r){if(t.options.selectionMode){var i=e.vertexAttributes.get("position").data,a=e.vertexAttributes.get("size"),s=this.params.width;if(this.params.vvSizeEnabled){var u=e.vertexAttributes.get("sizeFeatureAttribute").data[0];s*=Object(o.c)(this.params.vvSizeOffset[0]+u*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(s*=a.data[0]);for(var c=n[0],l=n[1],h=(s/2+4)*e.screenToWorldRatio,f=Number.MAX_VALUE,p=0;p<i.length-5;p+=3){var d=i[p],v=i[p+1],y=c-d,b=l-v,g=i[p+3]-d,m=i[p+4]-v,w=Object(o.c)((g*y+m*b)/(g*g+m*m),0,1),O=g*w-y,j=m*w-b,_=O*O+j*j;_<f&&(f=_)}f<h*h&&r()}}},{key:"intersectLineGeometry",value:function(e,t,n,r,i,a){if(r.options.selectionMode&&!Object(v.d)(t))if(Object(p.g)(n)){var s=e.vertexAttributes,u=s.get("position").data,h=i;if(this.params.vvSizeEnabled){var d=s.get("sizeFeatureAttribute").data[0];h*=Object(o.c)(this.params.vvSizeOffset[0]+d*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else s.has("size")&&(h*=s.get("size").data[0]);var y=r.camera,b=$;Object(l.c)(b,r.point);var g=h*y.pixelRatio/2+4*y.pixelRatio;Object(c.v)(ce[0],b[0]-g,b[1]+g,0),Object(c.v)(ce[1],b[0]+g,b[1]+g,0),Object(c.v)(ce[2],b[0]+g,b[1]-g,0),Object(c.v)(ce[3],b[0]-g,b[1]-g,0);for(var m=0;m<4;m++)if(!y.unprojectFromRenderScreen(ce[m],le[m]))return;f.e.fromPoints(y.eye,le[0],le[1],he),f.e.fromPoints(y.eye,le[1],le[2],fe),f.e.fromPoints(y.eye,le[2],le[3],pe),f.e.fromPoints(y.eye,le[3],le[0],de);for(var w=Number.MAX_VALUE,O=H(this.params,s,e.indices)?u.length-2:u.length-5,j=0;j<O;j+=3){K[0]=u[j]+n[12],K[1]=u[j+1]+n[13],K[2]=u[j+2]+n[14];var _=(j+3)%u.length;if(Y[0]=u[_]+n[12],Y[1]=u[_+1]+n[13],Y[2]=u[_+2]+n[14],!(f.e.signedDistance(he,K)<0&&f.e.signedDistance(he,Y)<0||f.e.signedDistance(fe,K)<0&&f.e.signedDistance(fe,Y)<0||f.e.signedDistance(pe,K)<0&&f.e.signedDistance(pe,Y)<0||f.e.signedDistance(de,K)<0&&f.e.signedDistance(de,Y)<0)){if(y.projectToRenderScreen(K,ee),y.projectToRenderScreen(Y,te),ee[2]<0&&te[2]>0){Object(c.i)(X,K,Y);var x=y.frustum,k=-f.e.signedDistance(x[4],K)/Object(c.g)(X,f.e.normal(x[4]));Object(c.d)(X,X,k),Object(c.e)(K,K,X),y.projectToRenderScreen(K,ee)}else if(ee[2]>0&&te[2]<0){Object(c.i)(X,Y,K);var S=y.frustum,M=-f.e.signedDistance(S[4],Y)/Object(c.g)(X,f.e.normal(S[4]));Object(c.d)(X,X,M),Object(c.e)(Y,Y,X),y.projectToRenderScreen(Y,te)}else if(ee[2]<0&&te[2]<0)continue;ee[2]=0,te[2]=0;var I=f.d.distance2(f.d.fromPoints(ee,te,ie),b);I<w&&(w=I,Object(c.j)(ne,K),Object(c.j)(re,Y))}}var T=r.rayBeginPoint,A=r.rayEndPoint;if(w<g*g){var C=Number.MAX_VALUE;if(f.d.closestLineSegmentPoint(f.d.fromPoints(ne,re,ie),f.d.fromPoints(T,A,ae),Q)){Object(c.i)(Q,Q,T);var E=Object(c.o)(Q);Object(c.d)(Q,Q,1/E),C=E/Object(c.n)(T,A)}a(C,Q)}}else z.error("intersection assumes a translation-only matrix")}},{key:"computeAttachmentOrigin",value:function(e,t){var n=e.vertexAttributes;if(!n)return null;var r=e.indices,i=n.get("position");return Object(d.a)(i,r?r.get("position"):null,r&&H(this.params,n,r),t)}},{key:"createLayout",value:function(){var e=Object(h.a)().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");return e.f32(this.params.vvSizeEnabled?"sizeFeatureAttribute":"size"),this.params.vvColorEnabled?e.f32("colorFeatureAttribute"):e.vec4f("color"),this.params.vvOpacityEnabled&&e.f32("opacityFeatureAttribute"),e}},{key:"createBufferWriter",value:function(){return new B(this.layout,this.params)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new G(e):void 0}},{key:"validateParameterValues",value:function(e){"miter"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}},{key:"requiresTransparent",value:function(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}},{key:"colorRequiresTransparent",value:function(e){return Object(i.k)(e)&&e[3]<1&&e[3]>0}}]),n}(b.a),G=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).updateParameters(),r}return Zt(n,[{key:"updateParameters",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(L,this.material.getTechniqueConfig(this.output,e),this.technique)}},{key:"beginSlot",value:function(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}},{key:"ensureParameters",value:function(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}},{key:"getPipelineState",value:function(e,t){return this.technique.getPipelineState(e,t)}}]),n}(y.a),U=Nt(Nt({width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1},b.b),w.Default),B=function(){function e(t,n){switch(Wt(this,e),this.params=n,this.numJoinSubdivisions=0,this.vertexBufferLayout=t,this.params.join){case"miter":case"bevel":this.numJoinSubdivisions=n.stipplePattern?1:0;break;case"round":this.numJoinSubdivisions=Z}}return Zt(e,[{key:"isClosed",value:function(e){return H(this.params,e.vertexAttributes,e.indices)}},{key:"numCapSubdivisions",value:function(e){if(this.isClosed(e))return 0;switch(this.params.cap){case"butt":return 0;case"square":return 1;case"round":return J}}},{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){var t=2*this.numCapSubdivisions(e)+2,n=e.indices.get("position").length/2+1,r=this.isClosed(e),i=r?2:2*t,a=r?0:1,o=r?n:n-1;if(e.vertexAttributes.has("subdivisions"))for(var s=e.vertexAttributes.get("subdivisions").data,u=a;u<o;++u)i+=4+2*s[u];else i+=(o-a)*(2*this.numJoinSubdivisions+4);return i+=2}},{key:"write",value:function(e,t,n,r){var i=this,a=oe,o=se,s=ue,u=t.vertexAttributes.get("position").data,l=t.indices&&t.indices.get("position"),h=this.numCapSubdivisions(t);l&&l.length!==2*(u.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");var f=null;t.vertexAttributes.has("subdivisions")&&(f=t.vertexAttributes.get("subdivisions").data);var p=1,d=0;this.params.vvSizeEnabled?d=t.vertexAttributes.get("sizeFeatureAttribute").data[0]:t.vertexAttributes.has("size")&&(p=t.vertexAttributes.get("size").data[0]);var v=[1,1,1,1],y=0;this.params.vvColorEnabled?y=t.vertexAttributes.get("colorFeatureAttribute").data[0]:t.vertexAttributes.has("color")&&(v=t.vertexAttributes.get("color").data);var b=0;this.params.vvOpacityEnabled&&(b=t.vertexAttributes.get("opacityFeatureAttribute").data[0]);var g=u.length/3,m=e.transformation,w=new Float32Array(n.buffer),O=this.vertexBufferLayout.stride/4,j=r*O,_=j,x=function(e,t,n,r,a,o,s){if(w[j++]=t[0],w[j++]=t[1],w[j++]=t[2],w[j++]=r,w[j++]=a,w[j++]=o,w[j++]=e[0],w[j++]=e[1],w[j++]=e[2],w[j++]=n[0],w[j++]=n[1],w[j++]=n[2],w[j++]=i.params.vvSizeEnabled?d:p,i.params.vvColorEnabled)w[j++]=y;else{var u=Math.min(4*s,v.length-4);w[j++]=v[u+0],w[j++]=v[u+1],w[j++]=v[u+2],w[j++]=v[u+3]}i.params.vvOpacityEnabled&&(w[j++]=b)};j+=O,Object(c.v)(o,u[0],u[1],u[2]),m&&Object(c.l)(o,o,m);var k=this.isClosed(t);if(k){var S=u.length-3;Object(c.v)(a,u[S],u[S+1],u[S+2]),m&&Object(c.l)(a,a,m)}else{Object(c.j)(a,o),Object(c.v)(s,u[3],u[4],u[5]),m&&Object(c.l)(s,s,m);for(var M=0;M<h;++M){var I=1-M/h;x(a,o,s,I,1,-4,0),x(a,o,s,I,1,4,0)}x(a,o,s,0,0,-4,0),x(a,o,s,0,0,4,0),Object(c.j)(a,o),Object(c.j)(o,s)}for(var T=k?g:g-1,A=k?0:1;A<T;A++){var C=(A+1)%g*3;Object(c.v)(s,u[C+0],u[C+1],u[C+2]),m&&Object(c.l)(s,s,m),x(a,o,s,0,1,-1,A),x(a,o,s,0,1,1,A);for(var E=f?f[A]:this.numJoinSubdivisions,P=0;P<E;++P){var R=(P+1)/(E+1);x(a,o,s,R,1,-2,A),x(a,o,s,R,1,2,A)}x(a,o,s,1,0,-2,A),x(a,o,s,1,0,2,A),Object(c.j)(a,o),Object(c.j)(o,s)}if(k)j=q(w,_+O,w,j,2*O);else{x(a,o,s,0,1,-5,T),x(a,o,s,0,1,5,T);for(var D=0;D<h;++D){var L=(D+1)/h;x(a,o,s,L,1,-5,T),x(a,o,s,L,1,5,T)}}q(w,_+O,w,_,O),j=q(w,j-O,w,j,O)}}]),e}();function q(e,t,n,r,i){for(var a=0;a<i;a++)n[r++]=e[t++];return r}function H(e,t,n){return W(e,t.get("position").data,n?n.get("position"):null)}function W(e,t,n){return!!e.isClosed&&(n?n.length>2:t.length>6)}var J=3,Z=1,K=Object(u.e)(),Y=Object(u.e)(),X=Object(u.e)(),Q=Object(u.e)(),$=Object(u.e)(),ee=Object(s.e)(),te=Object(s.e)(),ne=Object(u.e)(),re=Object(u.e)(),ie=f.d.create(),ae=f.d.create(),oe=Object(u.e)(),se=Object(u.e)(),ue=Object(u.e)(),ce=[Object(s.e)(),Object(s.e)(),Object(s.e)(),Object(s.e)()],le=[Object(u.e)(),Object(u.e)(),Object(u.e)(),Object(u.e)()],he=f.e.create(),fe=f.e.create(),pe=f.e.create(),de=f.e.create()},hufI:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("f4Nx"),i=n("gEht"),a=n("k5I3"),o=n("7tXg"),s=n("gVKr"),u=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],c=function(){function e(t){Wt(this,e),this.options=t,this.geometryTypes=u,this._coordinatePtr=0,this._vertexDimension=0}return Zt(e,[{key:"createFeatureResult",value:function(){return new o.a}},{key:"prepareFeatures",value:function(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}},{key:"finishFeatureResult",value:function(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!Object(r.c)(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var t=Object(i.g)(this.options.sourceSpatialReference)/Object(i.g)(e.spatialReference);if(1!==t){var n,a=Vt(e.features);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.geometry&&o.geometry.coords)for(var s=o.geometry.coords,u=2;u<s.length;u+=3)s[u]*=t}}catch(c){a.e(c)}finally{a.f()}}}}},{key:"addFeature",value:function(e,t){e.features.push(t)}},{key:"createFeature",value:function(){return new a.a}},{key:"createSpatialReference",value:function(){return{wkid:0}}},{key:"createGeometry",value:function(){return new s.a}},{key:"addField",value:function(e,t){e.fields.push(t)}},{key:"allocateCoordinates",value:function(e){e.coords.length=e.lengths.reduce((function(e,t){return e+t}),0)*this._vertexDimension,this._coordinatePtr=0}},{key:"addCoordinate",value:function(e,t){e.coords[this._coordinatePtr++]=t}},{key:"addCoordinatePoint",value:function(e,t){e.coords.push(t)}},{key:"addLength",value:function(e,t){e.lengths.push(t)}},{key:"addQueryGeometry",value:function(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}},{key:"createPointGeometry",value:function(){return new s.a}}]),e}()},hvLT:function(e,t,n){"use strict";function r(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function i(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){return"unknown"===(t||a(e))?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===(e.valueUnit||"unknown")?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i}))},hwdV:function(e,t,n){var r=n("tjlA"),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},iA3P:function(e,t,n){"use strict";var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Wt(this,e),this._seed=t}return Zt(e,[{key:"seed",set:function(t){this._seed=null==t?Math.random()*e._m:t}},{key:"getInt",value:function(){return this._seed=(e._a*this._seed+e._c)%e._m,this._seed}},{key:"getFloat",value:function(){return this.getInt()/(e._m-1)}},{key:"getIntRange",value:function(e,t){return Math.round(this.getFloatRange(e,t))}},{key:"getFloatRange",value:function(t,n){var r=n-t;return t+this.getInt()/e._m*r}}]),e}();r._m=2147483647,r._a=48271,r._c=0,t.a=r},iALD:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("RI0u"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("+opI"),l=Object(c.b)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});l.toJSON.bind(l),l.fromJSON.bind(l);var h,f=n("RlM3"),p=n("IeLS"),d=h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).dateFormat=null,r.digitSeparator=!1,r.places=null,r}return Zt(n,[{key:"clone",value:function(){return new h({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}},{key:"format",value:function(e){return this.dateFormat?Object(f.b)(e,Object(f.a)(this.dateFormat)):Object(p.b)(e,Object(p.a)(this))}}]),n}(u.a);Object(r.a)([Object(o.a)(l)],d.prototype,"dateFormat",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:!0}})],d.prototype,"digitSeparator",void 0),Object(r.a)([Object(a.b)({type:i.a,json:{write:!0}})],d.prototype,"places",void 0),d=h=Object(r.a)([Object(s.a)("esri.popup.support.FieldInfoFormat")],d),t.a=d},iRQj:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n("srIe"),i=n("f4Nx"),a=n("gEht");function o(e,t,n){if(Object(r.j)(t)||Object(r.j)(n)||n.vcsWkid||Object(i.c)(t,n))return null;var o=Object(a.g)(t)/Object(a.g)(n);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o)};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e){var n,r=Vt(e.paths);try{for(r.s();!(n=r.n()).done;){var i,a=Vt(n.value);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.length>2&&(o[2]*=t)}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}}}(e,o)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e){var n,r=Vt(e.rings);try{for(r.s();!(n=r.n()).done;){var i,a=Vt(n.value);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.length>2&&(o[2]*=t)}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}}}(e,o)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e){var n,r=Vt(e.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.length>2&&(i[2]*=t)}}catch(a){r.e(a)}finally{r.f()}}}(e,o)};default:return null}}function s(e,t,n){if(null==e.hasM||e.hasZ){var r,i=Vt(t);try{for(i.s();!(r=i.n()).done;){var a,o=Vt(r.value);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.length>2&&(s[2]*=n)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){i.e(u)}finally{i.f()}}}function u(e,t,n){if((e||t)&&n){var r=Object(a.g)(n);c(e,n,r),c(t,n,r)}}function c(e,t,n){if(e){var r,i=Vt(e);try{for(i.s();!(r=i.n()).done;){l(r.value.geometry,t,n)}}catch(a){i.e(a)}finally{i.f()}}}function l(e,t,n){if(e&&e.spatialReference&&!Object(i.c)(e.spatialReference,t)){var r=Object(a.g)(e.spatialReference)/n;if(1!==r)if("x"in e)null!=e.z&&(e.z*=r);else if("rings"in e)s(e,e.rings,r);else if("paths"in e)s(e,e.paths,r);else if("points"in e&&(null==e.hasM||e.hasZ)){var o,u=Vt(e.points);try{for(u.s();!(o=u.n()).done;){var c=o.value;c.length>2&&(c[2]*=r)}}catch(l){u.e(l)}finally{u.f()}}}}},iTZm:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},ihCf:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return v}));var r=n("nLfN"),i=n("fXoL"),a=n("8LU1"),o=n("EY2u"),s=n("XNiG"),u=n("xgIS"),c=n("3UWI"),l=n("1G5W"),h=n("ofXK"),f=Object(r.f)({passive:!0}),p=function(){var e=function(){function e(t,n){Wt(this,e),this._platform=t,this._ngZone=n,this._monitoredElements=new Map}return Zt(e,[{key:"monitor",value:function(e){var t=this;if(!this._platform.isBrowser)return o.a;var n=Object(a.d)(e),r=this._monitoredElements.get(n);if(r)return r.subject;var i=new s.a,u="cdk-text-field-autofilled",c=function(e){"cdk-text-field-autofill-start"!==e.animationName||n.classList.contains(u)?"cdk-text-field-autofill-end"===e.animationName&&n.classList.contains(u)&&(n.classList.remove(u),t._ngZone.run((function(){return i.next({target:e.target,isAutofilled:!1})}))):(n.classList.add(u),t._ngZone.run((function(){return i.next({target:e.target,isAutofilled:!0})})))};return this._ngZone.runOutsideAngular((function(){n.addEventListener("animationstart",c,f),n.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(n,{subject:i,unlisten:function(){n.removeEventListener("animationstart",c,f)}}),i}},{key:"stopMonitoring",value:function(e){var t=Object(a.d)(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}},{key:"ngOnDestroy",value:function(){var e=this;this._monitoredElements.forEach((function(t,n){return e.stopMonitoring(n)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.oc(r.a),i.oc(i.M))},e.\u0275prov=Object(i.bc)({factory:function(){return new e(Object(i.oc)(r.a),Object(i.oc)(i.M))},token:e,providedIn:"root"}),e}(),d=function(){var e=function(){function e(t,n,r,i){Wt(this,e),this._elementRef=t,this._platform=n,this._ngZone=r,this._destroyed=new s.a,this._enabled=!0,this._previousMinRows=-1,this._document=i,this._textareaElement=this._elementRef.nativeElement,this._measuringClass=n.FIREFOX?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring"}return Zt(e,[{key:"minRows",get:function(){return this._minRows},set:function(e){this._minRows=Object(a.e)(e),this._setMinHeight()}},{key:"maxRows",get:function(){return this._maxRows},set:function(e){this._maxRows=Object(a.e)(e),this._setMaxHeight()}},{key:"enabled",get:function(){return this._enabled},set:function(e){e=Object(a.b)(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}},{key:"_setMinHeight",value:function(){var e=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.minHeight=e)}},{key:"_setMaxHeight",value:function(){var e=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.maxHeight=e)}},{key:"ngAfterViewInit",value:function(){var e=this;this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular((function(){var t=e._getWindow();Object(u.a)(t,"resize").pipe(Object(c.a)(16),Object(l.a)(e._destroyed)).subscribe((function(){return e.resizeToFitContent(!0)}))})))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_cacheTextareaLineHeight",value:function(){if(!this._cachedLineHeight){var e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,this._textareaElement.parentNode.removeChild(e),this._setMinHeight(),this._setMaxHeight()}}},{key:"ngDoCheck",value:function(){this._platform.isBrowser&&this.resizeToFitContent()}},{key:"resizeToFitContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enabled&&(this._cacheTextareaLineHeight(),this._cachedLineHeight)){var n=this._elementRef.nativeElement,r=n.value;if(t||this._minRows!==this._previousMinRows||r!==this._previousValue){var i=n.placeholder;n.classList.add(this._measuringClass),n.placeholder="",n.style.height=n.scrollHeight-4+"px",n.classList.remove(this._measuringClass),n.placeholder=i,this._ngZone.runOutsideAngular((function(){"undefined"!=typeof requestAnimationFrame?requestAnimationFrame((function(){return e._scrollToCaretPosition(n)})):setTimeout((function(){return e._scrollToCaretPosition(n)}))})),this._previousValue=r,this._previousMinRows=this._minRows}}}},{key:"reset",value:function(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}},{key:"_noopInputHandler",value:function(){}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollToCaretPosition",value:function(e){var t=e.selectionStart,n=e.selectionEnd,r=this._getDocument();this._destroyed.isStopped||r.activeElement!==e||e.setSelectionRange(t,n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.fc(i.r),i.fc(r.a),i.fc(i.M),i.fc(h.d,8))},e.\u0275dir=i.ac({type:e,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(e,t){1&e&&i.rc("input",(function(){return t._noopInputHandler()}))},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"]},exportAs:["cdkTextareaAutosize"]}),e}(),v=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.dc({type:e}),e.\u0275inj=i.cc({imports:[[r.b]]}),e}()},ikTR:function(e,t,n){"use strict";var r,i=n("tQ+6");!function(e){var t=function(e){function t(t,n,r,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,r){for(var i=t,a=t,o=n>>>1,s=e[i-1];a<=o;){(a=i<<1)<n&&r(e[a-1],e[a])<0&&++a;var u=e[a-1];if(r(u,s)<=0)break;e[i-1]=u,i=a}e[i-1]=s})),n=function(e,t){return e<t?-1:e>t?1:0};e.sort=function(e,r,i,a){void 0===r&&(r=0),void 0===i&&(i=e.length),void 0===a&&(a=n);for(var o=i>>>1;o>r;o--)t(e,o,i,a);for(var s=r+1,u=i-1;u>r;u--){var c=e[r];e[r]=e[u],e[u]=c,t(e,s,u,a)}},e.iterableSort=regeneratorRuntime.mark((function e(r,i,a,o){var s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i=0),void 0===a&&(a=r.length),void 0===o&&(o=n),s=a>>>1;case 2:if(!(s>i)){e.next=9;break}return t(r,s,a,o),void(e.next=6);case 6:s--,e.next=2;break;case 9:u=i+1,c=a-1;case 11:if(!(c>i)){e.next=21;break}return l=r[i],r[i]=r[c],r[c]=l,t(r,u,c,o),void(e.next=18);case 18:c--,e.next=11;break;case 21:case"end":return e.stop()}}),e)}))}(r||(r={}));var a=r;function o(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}t.a=function(){function e(t){var n=this;Wt(this,e),this.data=[],this._length=0,this._allocator=void 0,this._deallocator=function(){return null},this._shrink=function(){},this._hint=new i.a,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=function(){return o(n)}))}return Zt(e,[{key:"toArray",value:function(){return this.data.slice(0,this.length)}},{key:"getItemAt",value:function(e){if(!(e<0||e>=this._length))return this.data[e]}},{key:"length",get:function(){return this._length},set:function(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(var t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}},{key:"clear",value:function(){this.length=0}},{key:"prune",value:function(){this.clear(),this.data=[]}},{key:"push",value:function(e){this.data[this._length++]=e}},{key:"pushArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=0;n<t;n++)this.data[this._length++]=e[n]}},{key:"fill",value:function(e,t){for(var n=0;n<t;n++)this.data[this._length++]=e}},{key:"pushNew",value:function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));var e=this.data[this._length];return++this._length,e}},{key:"unshift",value:function(e){this.data.unshift(e),this._length++,o(this)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}}},{key:"remove",value:function(e){var t=Object(i.e)(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}},{key:"removeUnordered",value:function(e){var t=Object(i.j)(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}},{key:"removeUnorderedIndex",value:function(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}},{key:"removeUnorderedMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=arguments.length>2?arguments[2]:void 0;this.length=Object(i.k)(this.data,e,this.length,t,this._hint,n),this._shrink()}},{key:"front",value:function(){if(0!==this.length)return this.data[0]}},{key:"back",value:function(){if(0!==this.length)return this.data[this.length-1]}},{key:"swapElements",value:function(e,t){var n;e>=this.length||t>=this.length||e===t||(n=[this.data[t],this.data[e]],this.data[e]=n[0],this.data[t]=n[1])}},{key:"sort",value:function(e){a.sort(this.data,0,this.length,e)}},{key:"iterableSort",value:function(e){return a.iterableSort(this.data,0,this.length,e)}},{key:"some",value:function(e,t){for(var n=0;n<this.length;++n)if(e.call(t,this.data[n],n,this.data))return!0;return!1}},{key:"filterInPlace",value:function(e,t){for(var n=0,r=0;r<this._length;++r){var i=this.data[r];e.call(t,i,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=i,n++)}if(this._deallocator)for(var a=n;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=n,this._shrink(),this}},{key:"forAll",value:function(e,t){for(var n=this.length,r=this.data,i=0;i<n;++i)e.call(t,r[i],i,r)}},{key:"map",value:function(e,t){for(var n=new Array(this.length),r=0;r<this.length;++r)n[r]=e.call(t,this.data[r],r,this.data);return n}},{key:"reduce",value:function(e,t){for(var n=t,r=0;r<this.length;++r)n=e(n,this.data[r],r,this.data);return n}},{key:"has",value:function(e){for(var t=this.length,n=this.data,r=0;r<t;++r)if(n[r]===e)return!0;return!1}}]),e}()},itLX:function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!1,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},ixpo:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("f4Nx"),i=n("SuVq"),a=(n("4GrV"),n("Cy1f")),o=n("5DEt"),s=n("AvGH"),u=n("D8Ta"),c=n("M0lq"),l=n("dXfX"),h=n("8JEK"),f=function(){function e(t,n){Wt(this,e),this.spatialReference=t,this.viewingMode=n,this._unnormalizationInfo=b(t,n)}return Zt(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(s.a)())}},{key:"fromPoint",value:function(e){return this.tag(Object(s.e)(e.x,e.y))}},{key:"fromArray",value:function(e){return this.tag(Object(s.e)(e[0],e[1]))}},{key:"toArray",value:function(e){return[e[0],e[1]]}},{key:"clone",value:function(e){return this.tag(Object(s.d)(e))}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new i.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new i.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,n,r){return Object(c.m)(r,e,t,n)}},{key:"addDelta",value:function(e,t,n){e[0]+=t,e[1]+=n}},{key:"scale",value:function(e,t,n,r){var i=h.c.get(),a=Object(c.d)(i,e,t),o=Object(c.a)(i,n,Object(c.g)(n,a));Object(c.o)(e,e,o,r-1)}},{key:"rotate",value:function(e,t,n){Object(c.q)(e,e,t,n)}},{key:"pointToArray",value:function(e){return[e.x,e.y]}},{key:"getZ",value:function(e,t){return t}},{key:"hasZ",value:function(){return!1}},{key:"unnormalize",value:function(e){y(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){return this.tag(Object(s.e)(e[0],e[1]))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a.g)(e[0],e[1],t)}}]),e}(),p=function(){function e(t,n,r){Wt(this,e),this.valueType=t,this.spatialReference=n,this._unnormalizationInfo=b(n,r)}return Zt(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(a.e)())}},{key:"fromPoint",value:function(e){return this.tag(Object(a.g)(e.x,e.y,0===this.valueType?e.z:e.m))}},{key:"fromArray",value:function(e){return this.tag(Object(a.g)(e[0],e[1],e[2]||0))}},{key:"toArray",value:function(e){return[e[0],e[1],e[2]]}},{key:"clone",value:function(e){return this.tag(Object(a.f)(e))}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new i.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new i.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){var t=0===this.valueType,n=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:n?e[2]:void 0,hasZ:t,hasM:n,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,n,r){return Object(o.h)(r,e,t,n)}},{key:"addDelta",value:function(e,t,n,r){e[0]+=t,e[1]+=n,0===this.valueType&&(e[2]+=r)}},{key:"scale",value:function(e,t,n,r){var i=h.c.get(),a=Object(c.d)(i,e,t),o=Object(c.a)(i,n,Object(c.g)(n,a));Object(c.o)(e,e,o,r-1)}},{key:"rotate",value:function(e,t,n){Object(c.q)(e,e,t,n)}},{key:"pointToArray",value:function(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}},{key:"getZ",value:function(e,t){return 0===this.valueType?e[2]:t}},{key:"hasZ",value:function(){return 0===this.valueType}},{key:"unnormalize",value:function(e){y(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(a.g)(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:n))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.tag(Object(a.g)(e[0],e[1],0===this.valueType?e[2]:t))}}]),e}(),d=function(){function e(t,n){Wt(this,e),this.spatialReference=t,this._unnormalizationInfo=b(t,n)}return Zt(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(u.c)())}},{key:"fromPoint",value:function(e){return this.tag(Object(u.d)(e.x,e.y,e.z,e.m))}},{key:"fromArray",value:function(e){return this.tag(Object(u.d)(e[0],e[1],e[2]||0,e[3]||0))}},{key:"toArray",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"clone",value:function(e){return this.tag(Object(u.g)(e))}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new i.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new i.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,n,r){return Object(l.j)(r,e,t,n)}},{key:"addDelta",value:function(e,t,n,r){e[0]+=t,e[1]+=n,e[2]+=r}},{key:"scale",value:function(e,t,n,r){var i=h.c.get(),a=Object(c.d)(i,e,t),o=Object(c.a)(i,n,Object(c.g)(n,a));Object(c.o)(e,e,o,r-1)}},{key:"rotate",value:function(e,t,n){Object(c.q)(e,e,t,n)}},{key:"pointToArray",value:function(e){return[e.x,e.y,e.z,e.m]}},{key:"getZ",value:function(e){return e[2]}},{key:"hasZ",value:function(){return!0}},{key:"unnormalize",value:function(e){y(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(u.d)(e[0],e[1],e.length>2?e[2]:t,n))}},{key:"toXYZ",value:function(e){return Object(a.g)(e[0],e[1],e[2])}}]),e}();function v(e,t,n,r){return e&&t?new d(n,r):t?new p(1,n,r):e?new p(0,n,r):new f(n,r)}function y(e,t){if(t.supported){var n=1/0,r=-1/0,i=t.upperBoundX-t.lowerBoundX;e.forEach((function(e){for(var a=e.pos[0];a<t.lowerBoundX;)a+=i;for(;a>t.upperBoundX;)a-=i;n=Math.min(n,a),r=Math.max(r,a),e.pos[0]=a}));var a=r-n;i-a<a&&e.forEach((function(e){e.pos[0]<0&&(e.pos[0]+=i)}))}}function b(e,t){var n=Object(r.d)(e);return"global"===t&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}},iy1n:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("fXoL"),i=["*"],a=function(){var e=function(){function e(){Wt(this,e),this.opened=!1,this.backgroundColor="lightgray",this.textColor="black",this.toggle=new r.t}return Zt(e,[{key:"toggleOthers",value:function(){this.opened||this.toggle.emit()}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["app-accordion-panel"]],inputs:{opened:"opened",panelTitle:"panelTitle",backgroundColor:"backgroundColor",textColor:"textColor"},outputs:{toggle:"toggle"},ngContentSelectors:i,decls:8,vars:10,consts:[[1,"mypanel"],[1,"title",3,"click"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"svg"],["d","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"],[1,"body",3,"hidden"]],template:function(e,t){1&e&&(r.Ac(),r.kc(0,"div",0),r.kc(1,"div",1),r.rc("click",(function(){return t.toggle.emit()})),r.Tc(2),r.uc(),r.kc(3,"svg",2),r.gc(4,"path",3),r.jc(),r.jc(),r.tc(),r.kc(5,"div",4),r.zc(6),r.jc(),r.gc(7,"div"),r.jc()),2&e&&(r.Tb(1),r.Pc("color",t.textColor)("background-color",t.backgroundColor),r.Tb(1),r.Vc(" ",t.panelTitle," "),r.Tb(1),r.Pc("fill","#5a5a5a"),r.Xb("rotate",t.opened),r.Tb(2),r.Bc("hidden",!t.opened))},styles:[".mypanel[_ngcontent-%COMP%]{background-color:#fff;color:#222;width:100%}.mypanel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:#ccc;width:100%;padding:10px;cursor:pointer;border-bottom:1px solid #666;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;justify-content:space-between;display:flex}.mypanel[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding:10px}.mypanel[_ngcontent-%COMP%]   .body.hidden[_ngcontent-%COMP%]{display:none}.mypanel[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:15px;width:15px;display:block;float:right;transition-duration:.25s;transition-property:transform;-webkit-user-select:none;-moz-user-select:none;user-select:none}.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}"]}),e}()},iyhF:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG");n("4EHJ"),n("ju1D"),n("9AIY");var o=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).customParameters=null,e}return n}(e);return Object(r.a)([Object(i.b)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=Object(r.a)([Object(a.a)("esri.layers.mixins.CustomParametersMixin")],t)}},"j/Vj":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("fXoL"),i=n("iy1n"),a=n("3E6D"),o=["*"],s=function(){var e=function(){function e(t){Wt(this,e),this.accordionPanelService=t,this.subscription$=[]}return Zt(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.accordionPanels.toArray().forEach((function(t){e.subscription$.push(t.toggle.subscribe((function(){e.togglePanelVisibility(t)})))}))}},{key:"togglePanelVisibility",value:function(e){var t=null;this.accordionPanels.toArray().forEach((function(n){n!==e?n.opened=!1:(e.opened=!e.opened,e.opened&&(t=e))})),this.accordionPanelService.setActivePanel.emit(t)}},{key:"ngOnDestroy",value:function(){this.subscription$.forEach((function(e){return e.unsubscribe()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(a.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["app-accordion"]],contentQueries:function(e,t,n){var a;(1&e&&r.Yb(n,i.a,0),2&e)&&(r.Ic(a=r.sc())&&(t.accordionPanels=a))},ngContentSelectors:o,decls:1,vars:0,template:function(e,t){1&e&&(r.Ac(),r.zc(0))},styles:[".mypanel[_ngcontent-%COMP%]{background-color:#fff;color:#222;width:100%}.mypanel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:#ccc;width:100%;padding:10px;cursor:pointer;border-bottom:1px solid #666;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;justify-content:space-between;display:flex}.mypanel[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding:10px}.mypanel[_ngcontent-%COMP%]   .body.hidden[_ngcontent-%COMP%]{display:none}.mypanel[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:15px;width:15px;display:block;float:right;transition-duration:.25s;transition-property:transform;-webkit-user-select:none;-moz-user-select:none;user-select:none}.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}"]}),e}()},jBHT:function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/PL2")),l=n("ag7Y"),h=Object(o.b)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"}),f=r=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"clone",value:function(){return new r({href:this.href,primitive:this.primitive})}}]),n}(l.a);Object(i.a)([Object(a.b)({type:String,json:{read:c.d,write:c.f}})],f.prototype,"href",void 0),Object(i.a)([Object(s.a)(h)],f.prototype,"primitive",void 0),f=r=Object(i.a)([Object(u.a)("esri.symbols.support.ObjectSymbol3DLayerResource")],f);var p="sphere";t.a=f},jH8C:function(e,t,n){"use strict";function r(e){return"touchstart"===e.type||"mousedown"===e.type&&0===e.button}function i(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches[0]:e.type.startsWith("touch")?e.targetTouches[0]:e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body *";return Array.from(document.querySelectorAll(e)).map((function(e){return parseFloat(window.getComputedStyle(e).zIndex)})).filter((function(e){return!isNaN(e)})).sort((function(e,t){return e-t})).pop()||0}function o(e,t){if("function"==typeof e.closest)return e.closest(t)||null;for(;e;){if(e.matches(t))return e;e=e.parentElement}return null}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o}))},jHF5:function(e,t,n){"use strict";function r(){var e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function i(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a,o,s,u){var c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=u,c},createView:function(e,t){return new Float32Array(e,t,9)}})},jIHu:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return k})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return s})),n.d(t,"m",(function(){return x})),n.d(t,"n",(function(){return r})),n.d(t,"o",(function(){return D})),n.d(t,"p",(function(){return i})),n.d(t,"q",(function(){return P})),n.d(t,"r",(function(){return d})),n.d(t,"s",(function(){return v})),n.d(t,"t",(function(){return y})),n.d(t,"u",(function(){return b})),n.d(t,"v",(function(){return p})),n.d(t,"w",(function(){return f})),n.d(t,"x",(function(){return g})),n.d(t,"y",(function(){return m})),n.d(t,"z",(function(){return w})),n.d(t,"A",(function(){return O})),n.d(t,"B",(function(){return h})),n.d(t,"C",(function(){return c})),n.d(t,"D",(function(){return I})),n.d(t,"E",(function(){return a})),n.d(t,"F",(function(){return E})),n.d(t,"G",(function(){return C})),n.d(t,"H",(function(){return A}));var r=1e-30,i=4294967295,a=512,o=8,s=29,u=16,c=8,l={metrics:{width:15,height:17,left:0,top:-7,advance:14}},h=0,f=0,p=0,d=1,v=2,y=3,b=4,g=5,m=6,w=5,O=6,j=1,_=2,x=2,k=1,S=2,M=4,I=2.5,T=6,A=5,C=6,E=1.15,P=2,R=7,D=500,L=128},jKdI:function(e,t,n){"use strict";var r=n("srIe");t.a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.values().next().value};Wt(this,e),this._peeker=t,this._items=new Set}return Zt(e,[{key:"length",get:function(){return this._items.size}},{key:"clear",value:function(){this._items.clear()}},{key:"peek",value:function(){if(0!==this._items.size)return this._peeker(this._items)}},{key:"push",value:function(e){this.contains(e)||this._items.add(e)}},{key:"contains",value:function(e){return this._items.has(e)}},{key:"pop",value:function(){if(0!==this.length){var e=this.peek();return this._items.delete(Object(r.d)(e)),e}}},{key:"remove",value:function(e){this._items.delete(e)}},{key:"filter",value:function(e){var t=this;return this._items.forEach((function(n){e(n)||t._items.delete(n)})),this}}]),e}()},jWBI:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=n("qatw"),h=n("4GrV"),f=n("SFah"),p=n("H9eC"),d=n("8uAX"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isAggregate=!1,e.layer=null,e.popupTemplate=null,e.sourceLayer=null,Object.defineProperty($t(e),"uid",{value:Object(d.a)(),configurable:!0}),e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:n,popupTemplate:r}}},{key:"attributes",set:function(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}},{key:"geometry",set:function(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}},{key:"symbol",set:function(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}},{key:"visible",set:function(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}},{key:"getEffectivePopupTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(o.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}},{key:"getAttribute",value:function(e){return this.attributes&&this.attributes[e]}},{key:"setAttribute",value:function(e,t){if(this.attributes){var n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes=Ft({},e,t),this._notifyLayer("attributes",void 0,t,e)}},{key:"getObjectId",value:function(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}},{key:"toJSON",value:function(){return{geometry:Object(o.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(o.k)(this.symbol)?this.symbol.toJSON():null,attributes:Nt({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}},{key:"clone",value:function(){return new r(this.cloneProperties())}},{key:"cloneProperties",value:function(){return{attributes:Object(a.a)(this.attributes),geometry:Object(a.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(a.a)(this.symbol),visible:this.visible}}},{key:"_notifyLayer",value:function(e,t,n,r){if(this.layer&&"graphicChanged"in this.layer){var i={graphic:this,property:e,oldValue:t,newValue:n};"attributes"===e&&(i.attributeName=r),this.layer.graphicChanged(i)}}}]),n}(c.a);Object(i.a)([Object(s.b)({value:null})],v.prototype,"attributes",null),Object(i.a)([Object(s.b)({value:null,types:h.e,json:{read:l.a}})],v.prototype,"geometry",null),Object(i.a)([Object(s.b)({type:Boolean})],v.prototype,"isAggregate",void 0),Object(i.a)([Object(s.b)()],v.prototype,"layer",void 0),Object(i.a)([Object(s.b)({type:f.a})],v.prototype,"popupTemplate",void 0),Object(i.a)([Object(s.b)()],v.prototype,"sourceLayer",void 0),Object(i.a)([Object(s.b)({value:null,types:p.g})],v.prototype,"symbol",null),Object(i.a)([Object(s.b)({type:Boolean,value:!0})],v.prototype,"visible",null),((v=r=Object(i.a)([Object(u.a)("esri.Graphic")],v))||(v={})).generateUID=d.a,t.a=v},jWZj:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("nvBr")),l=n("lh0l"),h=n("qRWG"),f=n("XACZ"),p=n("o685"),d=n("CPZo"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).material=null,r.type="line",r.join="miter",r.cap="butt",r.size=Object(h.i)(1),r.stipplePattern=null,r.stippleOffColor=null,r}return Zt(n,[{key:"clone",value:function(){return new r({enabled:this.enabled,material:Object(a.k)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}}],[{key:"fromSimpleLineSymbol",value:function(e){return new r({size:e.width||1,cap:e.cap||"butt",join:e.join||"miter",material:{color:(e.color||d.c).clone()}})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:p.a,json:{write:!0}})],v.prototype,"material",void 0),Object(i.a)([Object(s.a)({Line:"line"},{readOnly:!0})],v.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],v.prototype,"join",void 0),Object(i.a)([Object(o.b)({type:["butt","square","round"],json:{write:!0,default:"butt"}})],v.prototype,"cap",void 0),Object(i.a)([Object(o.b)(f.b)],v.prototype,"size",void 0),Object(i.a)([Object(o.b)(f.c)],v.prototype,"stipplePattern",void 0),Object(i.a)([Object(o.b)({type:c.a})],v.prototype,"stippleOffColor",void 0),v=r=Object(i.a)([Object(u.a)("esri.symbols.LineSymbol3DLayer")],v),t.a=v},jZU2:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return f}));var r=n("OKTS"),i=n("Cy1f"),a=n("5DEt"),o=n("IRkY"),s=n("8JEK");function u(e){return e?{origin:Object(i.d)(e.origin),vector:Object(i.d)(e.vector)}:{origin:Object(i.e)(),vector:Object(i.e)()}}function c(e,t){var n=v.get();return n.origin=e,n.vector=t,n}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(a.j)(n.origin,e),Object(a.j)(n.vector,t),n}function h(e,t){var n=Object(a.i)(s.d.get(),t,e.origin),i=Object(a.g)(e.vector,n),o=Object(a.g)(e.vector,e.vector),u=Object(r.c)(i/o,0,1),c=Object(a.i)(s.d.get(),Object(a.d)(s.d.get(),e.vector,u),n);return Object(a.g)(c,c)}function f(e,t,n,i,o){var u=e.vector,c=e.origin,l=Object(a.i)(s.d.get(),t,c),h=Object(a.g)(u,l)/Object(a.r)(u);return Object(a.d)(o,u,Object(r.c)(h,n,i)),Object(a.e)(o,o,e.origin)}function p(e,t,n,i){var o=1e-6,u=e.origin,c=Object(a.e)(s.d.get(),u,e.vector),l=t.origin,h=Object(a.e)(s.d.get(),l,t.vector),f=s.d.get(),p=s.d.get();if(f[0]=u[0]-l[0],f[1]=u[1]-l[1],f[2]=u[2]-l[2],p[0]=h[0]-l[0],p[1]=h[1]-l[1],p[2]=h[2]-l[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;var d=s.d.get();if(d[0]=c[0]-u[0],d[1]=c[1]-u[1],d[2]=c[2]-u[2],Math.abs(d[0])<o&&Math.abs(d[1])<o&&Math.abs(d[2])<o)return!1;var v=f[0]*p[0]+f[1]*p[1]+f[2]*p[2],y=p[0]*d[0]+p[1]*d[1]+p[2]*d[2],b=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],g=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],m=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*g-y*y;if(Math.abs(m)<o)return!1;var w=(v*y-b*g)/m,O=(v+y*w)/g;n&&(w=Object(r.c)(w,0,1),O=Object(r.c)(O,0,1));var j=s.d.get(),_=s.d.get();return j[0]=u[0]+w*d[0],j[1]=u[1]+w*d[1],j[2]=u[2]+w*d[2],_[0]=l[0]+O*p[0],_[1]=l[1]+O*p[1],_[2]=l[2]+O*p[2],i.tA=w,i.tB=O,i.pA=j,i.pB=_,i.distance2=Object(a.k)(j,_),!0}var d={tA:0,tB:0,pA:Object(i.e)(),pB:Object(i.e)(),distance2:0},v=new o.a((function(){return{origin:null,vector:null}})),y=Object.freeze({__proto__:null,create:u,wrap:c,copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return l(e.origin,e.vector,t)},fromValues:l,fromPoints:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(a.j)(n.origin,e),Object(a.i)(n.vector,t,e),n},distance2:h,distance:function(e,t){return Math.sqrt(h(e,t))},projectPoint:function(e,t,n){return f(e,t,0,1,n)},pointAt:function(e,t,n){return Object(a.e)(n,e.origin,Object(a.d)(n,e.vector,t))},projectPointClamp:f,closestRayDistance2:function(e,t){if(p(e,c(t.origin,t.direction),!1,d)){var n=d.tA,r=d.pB;if(n>=0&&n<=1)return d.distance2;if(n<0)return Object(a.k)(e.origin,r);if(n>1)return Object(a.k)(Object(a.e)(s.d.get(),e.origin,e.vector),r)}return null},closestLineSegmentPoint:function(e,t,n){return!!p(e,t,!0,d)&&(Object(a.j)(n,d.pA),!0)},closestLineSegmentDistance2:function(e,t){return p(e,t,!0,d)?d.distance2:null}})},jdNP:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7}},jhcG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG");n("4EHJ"),n("ju1D"),n("9AIY");var o=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).refreshInterval=0,e}return Zt(n,[{key:"refresh",value:function(){this.emit("refresh")}}]),n}(e);return Object(r.a)([Object(i.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=Object(r.a)([Object(a.a)("esri.layers.mixins.RefreshableLayer")],t)}},jjdI:function(e,t,n){"use strict";n("wSAH");var r=n("srIe"),i=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],a=n("n4uK"),o=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"],s=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function u(e,t){for(var n=t-1;n>=0;n--){var r=e[n];if("whitespace"!==r.type&&"block-comment"!==r.type){if("keyword"!==r.type)break;if("attribute"===r.data||"in"===r.data)return!0}}return!1}function c(e,t,n,r){r=r||n;var i,a=Vt(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;if("ident"===o.type&&o.data===n)return r in t?t[r]++:t[r]=0,c(e,t,r+"_"+t[r],r)}}catch(s){a.e(s)}finally{a.f()}return n}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"afterVersion";function r(e,t){for(var n=t;n<e.length;n++){var r=e[n];if("operator"===r.type&&";"===r.data)return n}return null}var i={data:"\n",type:"whitespace"},a=function(t){return t<e.length&&/[^\r\n]$/.test(e[t].data)},o=function(e){for(var t=-1,i=0,a=-1,o=0;o<e.length;o++){var s=e[o];if("preprocessor"===s.type&&(s.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++i:s.data.match(/\#endif\s*.*/)&&--i),"afterVersion"!==n&&"afterPrecision"!==n||"preprocessor"===s.type&&/^#version/.test(s.data)&&(a=Math.max(a,o)),"afterPrecision"===n&&"keyword"===s.type&&"precision"===s.data){var u=r(e,o);if(null===u)throw new Error("precision statement not followed by any semicolons!");a=Math.max(a,u)}t<a&&0===i&&(t=o)}return t+1}(e);a(o-1)&&e.splice(o++,0,i);var s,u=Vt(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;e.splice(o++,0,c)}}catch(l){u.e(l)}finally{u.f()}a(o-1)&&a(o)&&e.splice(o,0,i)}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lowp";l(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function f(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lowp";l(e,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:r.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function p(e,t){for(var n,r,i=-1,a=t;a<e.length;a++){var o=e[a];if("operator"===o.type&&("["===o.data&&(n=a),"]"===o.data)){r=a;break}"integer"===o.type&&(i=parseInt(o.data,10))}return n&&r&&e.splice(n,r-n+1),i}var d=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(Wt(this,e),this._context=null,this._glName=null,this._locations={},this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===n.length&&console.error("Shaders source should not be empty!"),t.instanceCounter.increment(3,this),this._context=t,this._vertexShaderSource=n,this._fragmentShaderSource=r,Array.isArray(a)){var o,s=Vt(a);try{for(s.s();!(o=s.n()).done;){var u=o.value;this._defines[u]="1"}}catch(c){s.e(c)}finally{s.f()}}else this._defines=a;this._locations=i}return Zt(e,[{key:"glName",get:function(){return this._glName}},{key:"locations",get:function(){return this._locations}},{key:"getDefine",value:function(e){return this._defines[e]}},{key:"dispose",value:function(){if(this._context){var e=this._context.gl;this._vShader&&(e.deleteShader(this._vShader),this._vShader=null),this._fShader&&(e.deleteShader(this._fShader),this._fShader=null),this._glName&&(e.deleteProgram(this._glName),this._glName=null),this._context.instanceCounter.decrement(3,this),this._context=null}}},{key:"initialize",value:function(){if(!this._initialized){this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");var e=this._context.gl,t=e.createProgram();for(var n in e.attachShader(t,this._vShader),e.attachShader(t,this._fShader),this._locations)e.bindAttribLocation(t,this._locations[n],n);e.linkProgram(t),this._glName=t,this._initialized=!0}}},{key:"getUniformLocation",value:function(e){return this.initialize(),void 0===this._nameToUniformLocation[e]&&(this._nameToUniformLocation[e]=this._context.gl.getUniformLocation(this._glName,e)),this._nameToUniformLocation[e]}},{key:"hasUniform",value:function(e){return null!==this.getUniformLocation(e)}},{key:"getAttribLocation",value:function(e){return this.initialize(),void 0===this._nameToAttribLocation[e]&&(this._nameToAttribLocation[e]=this._context.gl.getAttribLocation(this._glName,e)),this._nameToAttribLocation[e]}},{key:"setUniform1i",value:function(e,t){var n=this._nameToUniform1[e];void 0!==n&&t===n||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)}},{key:"setUniform1iv",value:function(t,n){var r=this._nameToUniform1v[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform1v[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform2iv",value:function(t,n){var r=this._nameToUniform2[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform2[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform3iv",value:function(t,n){var r=this._nameToUniform3[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform3[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform4iv",value:function(t,n){var r=this._nameToUniform4[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform4[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform1f",value:function(e,t){var n=this._nameToUniform1[e];void 0!==n&&t===n||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)}},{key:"setUniform1fv",value:function(t,n){var r=this._nameToUniform1v[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform1v[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform2f",value:function(e,t,n){var r=this._nameToUniform2[e];void 0!==r&&t===r[0]&&n===r[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(e),t,n),void 0===r?this._nameToUniform2[e]=[t,n]:(r[0]=t,r[1]=n))}},{key:"setUniform2fv",value:function(t,n){var r=this._nameToUniform2[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform2[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform3f",value:function(e,t,n,r){var i=this._nameToUniform3[e];void 0!==i&&t===i[0]&&n===i[1]&&r===i[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(e),t,n,r),void 0===i?this._nameToUniform3[e]=[t,n,r]:(i[0]=t,i[1]=n,i[2]=r))}},{key:"setUniform3fv",value:function(t,n){var r=this._nameToUniform3[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform3[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform4f",value:function(e,t,n,r,i){var a=this._nameToUniform4[e];void 0!==a&&t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(e),t,n,r,i),void 0===a?this._nameToUniform4[e]=[t,n,r,i]:(a[0]=t,a[1]=n,a[2]=r,a[3]=i))}},{key:"setUniform4fv",value:function(t,n){var r=this._nameToUniform4[t];v(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform4[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniformMatrix3fv",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this._nameToUniformMatrix3[t];(function(e,t){return!!Object(r.j)(e)||(9!==e.length?v(e,t):9!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8])})(a,n)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(t),i,n),void 0===a?this._nameToUniformMatrix3[t]=e._arrayCopy(n):e._arrayAssign(n,a))}},{key:"setUniformMatrix4fv",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this._nameToUniformMatrix4[t];(function(e,t){return!!Object(r.j)(e)||(16!==e.length?v(e,t):16!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8]||e[9]!==t[9]||e[10]!==t[10]||e[11]!==t[11]||e[12]!==t[12]||e[13]!==t[13]||e[14]!==t[14]||e[15]!==t[15])})(a,n)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(t),i,n),void 0===a?this._nameToUniformMatrix4[t]=e._arrayCopy(n):e._arrayAssign(n,a))}},{key:"assertCompatibleVertexAttributeLocations",value:function(e){var t=e.locations===this.locations;return t||console.error("VertexAttributeLocations are incompatible"),t}},{key:"_addLineNumbers",value:function(t){var n=2;return t.replace(/\n/g,(function(){return"\n"+e._padToThree(n++)+":"}))}},{key:"_loadShader",value:function(e){var t=35633===e,n=t?this._vertexShaderSource:this._fragmentShaderSource,r="";for(var l in this._defines)r+="#define ".concat(l," ").concat(this._defines[l],"\n");n=r+n,"webgl2"===this._context.contextVersion&&(n=function(e,t){var n=function(e){return function(e){var t=function(){var e,t,n,r=0,i=0,s=999,u=[],c=[],l=1,h=0,f=0,p=!1,d=!1,v="";return function(e){return c=[],null!==e?b(e.replace?e.replace(/\r\n/g,"\n"):e):(u.length&&y(u.join("")),s=10,y("(eof)"),c)};function y(e){e.length&&c.push({type:o[s],data:e,position:f,line:l,column:h})}function b(a){var o;for(r=0,n=(v+=a).length;e=v[r],r<n;){switch(o=r,s){case 0:r="/"===e&&"*"===t?(u.push(e),y(u.join("")),s=999,r+1):(u.push(e),t=e,r+1);break;case 1:case 2:r="\r"!==e&&"\n"!==e||"\\"===t?(u.push(e),t=e,r+1):(y(u.join("")),s=999,r);break;case 3:r=g();break;case 4:r="."===e||/[eE]/.test(e)?(u.push(e),s=5,t=e,r+1):"x"===e&&1===u.length&&"0"===u[0]?(s=11,u.push(e),t=e,r+1):/[^\d]/.test(e)?(y(u.join("")),s=999,r):(u.push(e),t=e,r+1);break;case 11:r=/[^a-fA-F0-9]/.test(e)?(y(u.join("")),s=999,r):(u.push(e),t=e,r+1);break;case 5:"f"===e&&(u.push(e),t=e,r+=1),r=/[eE]/.test(e)||"-"===e&&/[eE]/.test(t)?(u.push(e),t=e,r+1):/[^\d]/.test(e)?(y(u.join("")),s=999,r):(u.push(e),t=e,r+1);break;case 9999:r=w();break;case 9:r=/[^\s]/g.test(e)?(y(u.join("")),s=999,r):(u.push(e),t=e,r+1);break;case 999:u=u.length?[]:u,r="/"===t&&"*"===e?(f=i+r-1,s=0,t=e,r+1):"/"===t&&"/"===e?(f=i+r-1,s=1,t=e,r+1):"#"===e?(s=2,f=i+r,r):/\s/.test(e)?(s=9,f=i+r,r):(p=/\d/.test(e),d=/[^\w_]/.test(e),f=i+r,s=p?4:d?3:9999,r)}if(o!==r)switch(v[o]){case"\n":h=0,++l;break;default:++h}}return i+=r,v=v.slice(r),c}function g(){if("."===t&&/\d/.test(e))return s=5,r;if("/"===t&&"*"===e)return s=0,r;if("/"===t&&"/"===e)return s=1,r;if("."===e&&u.length){for(;m(u););return s=5,r}if(";"===e||")"===e||"("===e){if(u.length)for(;m(u););return y(e),s=999,r+1}var n=2===u.length&&"="!==e;if(/[\w_\d\s]/.test(e)||n){for(;m(u););return s=999,r}return u.push(e),t=e,r+1}function m(e){for(var t,n,r=0;;){if(t=a.c.indexOf(e.slice(0,e.length+r).join("")),n=a.c[t],-1===t){if(r--+e.length>0)continue;n=e.slice(0,1).join("")}return y(n),f+=n.length,(u=u.slice(n.length)).length}}function w(){if(/[^\d\w_]/.test(e)){var n=u.join("");return s=a.b.indexOf(n)>-1?8:a.a.indexOf(n)>-1?7:6,y(u.join("")),s=999,r}return u.push(e),t=e,r+1}}(),n=[];return(n=n.concat(t(e))).concat(t(null))}(e)}(e);if("300 es"===function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"300 es",i=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,a=Vt(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if("preprocessor"===o.type){var s=i.exec(o.data);if(s){var u=s[1].replace(/\s\s+/g," ");if(u===r)return u;if(u===n)return o.data="#version "+r,n;throw new Error("unknown glsl version: "+u)}}}}catch(c){a.e(c)}finally{a.f()}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(n,"100","300 es"))throw new Error("shader is already glsl 300 es");for(var r=null,l=null,d={},v={},y=0;y<n.length;++y){var b=n[y];switch(b.type){case"keyword":"vertex"===t&&"attribute"===b.data?b.data="in":"varying"===b.data&&(b.data="vertex"===t?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(b.data.trim())&&(b.data=b.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===t&&"gl_FragColor"===b.data&&(r||h(n,r=c(n,d,"fragColor"),"vec4"),b.data=r),"fragment"===t&&"gl_FragData"===b.data){var g=p(n,y+1),m=c(n,d,"fragData");f(n,m,"vec4",g,"mediump"),b.data=m}else"fragment"===t&&"gl_FragDepthEXT"===b.data&&(l||(l=c(n,d,"gl_FragDepth")),b.data=l);break;case"ident":if(i.indexOf(b.data)>=0){if("vertex"===t&&u(n,y))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");b.data in v||(v[b.data]=c(n,d,b.data)),b.data=v[b.data]}}}for(var w=n.length-1;w>=0;--w){var O=n[w];if("preprocessor"===O.type){var j=O.data.match(/\#extension\s+(.*)\:/);if(j&&j[1]&&s.indexOf(j[1].trim())>=0){var _=n[w+1];n.splice(w,_&&"whitespace"===_.type?2:1)}var x=O.data.match(/\#ifdef\s+(.*)/);x&&x[1]&&s.indexOf(x[1].trim())>=0&&(O.data="#if 1");var k=O.data.match(/\#ifndef\s+(.*)/);k&&k[1]&&s.indexOf(k[1].trim())>=0&&(O.data="#if 0")}}return n.map((function(e){return"eof"!==e.type?e.data:""})).join("")}(n,t?"vertex":"fragment"));var d=this._context.gl,v=d.createShader(e);return d.shaderSource(v,n),d.compileShader(v),v}}],[{key:"_padToThree",value:function(e){var t=e.toString();return e<1e3&&(t=("  "+e).slice(-3)),t}},{key:"_arrayCopy",value:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e[n]);return t}},{key:"_arrayAssign",value:function(e,t){for(var n=0;n<e.length;++n)t[n]=e[n]}}]),e}();function v(e,t){if(Object(r.j)(e)||e.length!==t.length)return!0;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}t.a=d},jksI:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF")),a=n("WbKI"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("qatw"),c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).bevelRatio=null,r.geometries=null,r.offsetDistance=null,r.offsetHow=null,r.offsetUnit=null,r}return n}(s.a);Object(r.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"bevelRatio",void 0),Object(r.a)([Object(a.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(u.a)(e)})):null}},write:{writer:function(e,t){t.geometries=e.map((function(e){return e.toJSON()}))}}}})],c.prototype,"geometries",void 0),Object(r.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"offsetDistance",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"offsetHow",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"offsetUnit",void 0),(c=Object(r.a)([Object(o.a)("esri.tasks.support.OffsetParameters")],c)).from=Object(i.m)(c),t.a=c},jpeq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,i=n("15Hh"),a=n("lwwL");!function(e){function t(e,t,n){Object(i.s)(o,n,t),e.setUniform3fv("localOrigin",t),e.setUniformMatrix4fv("view",o)}e.bindCamPosition=function(e,t,n){e.setUniform3f("camPos",n[3]-t[0],n[7]-t[1],n[11]-t[2])},e.bindProjectionMatrix=function(e,t){e.setUniformMatrix4fv("proj",t)},e.bindNearFar=function(e,t){e.setUniform2fv("nearFar",t)},e.bindViewCustomOrigin=t,e.bindView=function(e,n){t(e,n.origin,n.camera.viewMatrix)},e.bindViewport=function(e,t){e.setUniform4fv("viewport",t.camera.fullViewport)}}(r||(r={}));var o=Object(a.a)()},ju1D:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("3r0u");function i(){var e=a.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var t=function(t){return e[t].toString(16)};return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}var a=r.a.crypto||r.a.msCrypto},jwe7:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("nvBr"),l=n("XACZ"),h=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).color=new c.a("white"),e}return Zt(n,[{key:"clone",value:function(){return new r({color:Object(a.a)(this.color)})}}]),n}(u.a);Object(i.a)([Object(o.b)(l.a)],h.prototype,"color",void 0);var f=h=r=Object(i.a)([Object(s.a)("esri.symbols.callouts.LineCallout3DBorder")],h);Object.freeze({__proto__:null,get LineCallout3DBorder(){return h},default:f})},jxyb:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n("wSAH");var r=n("srIe"),i=n("Cy1f"),a=n("5DEt"),o=n("r0DZ"),s=n("dXfX"),u=n("XvKw"),c=n("Gbm8"),l=n("0Kx6"),h=n("yvcr"),f=n("hrr/"),p=n("ZHv2"),d=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._ray=l.f.create(),r._externalResources=null,r._handles=new o.a,r._isWorldDown=!1,r._start=Object(i.e)(),r._end=Object(i.g)(1,0,0),r._width=1,r._color=Object(u.c)(1,0,1,1),r._polygonOffset=!1,r._writeDepthEnabled=!0,r._innerWidth=0,r._innerColor=Object(u.c)(1,1,1,1),r._stippleIntegerRepeats=!0,r._stipplePattern=null,r._stippleOffColor=null,r._falloff=0,r._extensionType=0,r._laserlineStyle=null,r._laserlineEnabled=!1,r._renderOccluded=4,r._fadedExtensions=w,r.applyProps(e),r}return Zt(n,[{key:"createExternalResources",value:function(){var e=this,t=new f.a(this.materialParameters);this._handles.add(this.view.state.watch("camera",(function(){e.updateGeometry()})));var n=new p.a({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:t,laserline:n}}},{key:"destroyExternalResources",value:function(){Object(r.k)(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}},{key:"forEachExternalMaterial",value:function(e){Object(r.k)(this._externalResources)&&e(this._externalResources.material)}},{key:"createGeometries",value:function(e){var t=[Object(i.e)(),Object(i.e)()],n=3===this.extensionType;n&&t.push(Object(i.e)(),Object(i.e)());var a=n?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,o=h.a.createPolylineGeometry(t,null,a);e.addGeometry(o,Object(r.q)(this._externalResources).material),this.updateVertices(o)}},{key:"updateVisibility",value:function(e){Dt(en(n.prototype),"updateVisibility",this).call(this,e),Object(r.k)(this._externalResources)&&(this._externalResources.laserline.visible=e)}},{key:"setStartEndFromWorldDownAtLocation",value:function(e){this._isWorldDown=!0,Object(a.j)(this._start,e),this.view.renderCoordsHelper.worldUpAtPosition(e,this._end),Object(a.i)(this._end,e,this._end),l.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry()}},{key:"start",get:function(){return this._start},set:function(e){this._isWorldDown=!1,Object(a.p)(this._start,e)||(Object(a.j)(this._start,e),l.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"end",get:function(){return this._end},set:function(e){this._isWorldDown=!1,Object(a.p)(this._end,e)||(Object(a.j)(this._end,e),l.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e,this.updateMaterial())}},{key:"color",get:function(){return this._color},set:function(e){Object(s.g)(e,this._color)||(Object(s.c)(this._color,e),this.updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(e){e!==this._polygonOffset&&(this._polygonOffset=e,this.updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this.updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(e){e!==this._innerWidth&&(this._innerWidth=e,this.updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(e){Object(s.g)(e,this._innerColor)||(Object(s.c)(this._innerColor,e),this.updateMaterial())}},{key:"stippleIntegerRepeats",get:function(){return this._stippleIntegerRepeats},set:function(e){e!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=e,this.updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(e){var t=Object(r.k)(e)!==Object(r.k)(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this.updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(e){(Object(r.j)(e)||Object(r.j)(this._stippleOffColor)||!Object(s.g)(e,this._stippleOffColor))&&(this._stippleOffColor=Object(r.k)(e)?Object(u.a)(e):null,this.updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(e){e!==this._falloff&&(this._falloff=e,this.updateMaterial())}},{key:"extensionType",get:function(){return this._extensionType},set:function(e){e!==this._extensionType&&(this._extensionType=e,this.updateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&Object(r.k)(this._laserlineStyle)}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(e){this._laserlineStyle=e,Object(r.k)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,Object(r.k)(e)&&(this._externalResources.laserline.style=e))}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,Object(r.k)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},set:function(e){this._fadedExtensions=Object(r.r)(e,w),this.recreateGeometry()}},{key:"updateMaterial",value:function(){Object(r.j)(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}},{key:"updateGeometry",value:function(){Object(r.k)(this.object)&&this.updateVertices(this.object.geometries[0])}},{key:"updateVertices",value:function(e){var t=3===this._extensionType?this.updateLineSegmentFinite(g):this.updateLineSegmentInfinite(this._extensionType,g);this.updateVertexAttributes(e,t),Object(r.k)(this._externalResources)&&(this._externalResources.laserline.intersectsLine=t)}},{key:"updateLineSegmentFinite",value:function(e){return l.d.fromPoints(this._start,this._end,e)}},{key:"updateLineSegmentInfinite",value:function(e,t){var n=this.view.state.camera;switch(Object(c.e)(this._ray,v),e){case 0:v.c0=-Number.MAX_VALUE;break;case 1:case 2:var i=this._ray.origin,o=Object(r.r)(this.view.elevationProvider.getElevation(i[0],i[1],i[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),s=this.view.renderCoordsHelper.getAltitude(i);this._isWorldDown&&s<o&&Object(a.s)(v.ray.direction,v.ray.direction),2===this._extensionType&&null!=o&&(v.c1=Math.abs(s-o))}if(!l.c.intersectClipRay(n.frustum,v))return l.d.fromPoints(this._start,this._end,t);var u=Object(c.f)(v,y),h=Object(c.d)(v,b);return l.d.fromPoints(u,h,t)}},{key:"updateVertexAttributes",value:function(e,t){var n=e.getMutableAttribute("position").data;if(3===this.extensionType){var i=l.d.pointAt(t,-this.fadedExtensions.start,y);n[0]=i[0],n[1]=i[1],n[2]=i[2];var a=l.d.pointAt(t,0,y);n[3]=a[0],n[4]=a[1],n[5]=a[2];var o=l.d.pointAt(t,1,y);n[6]=o[0],n[7]=o[1],n[8]=o[2];var s=l.d.pointAt(t,1+this.fadedExtensions.end,y);n[9]=s[0],n[10]=s[1],n[11]=s[2]}else{var u=l.d.pointAt(t,0,y);n[0]=u[0],n[1]=u[1],n[2]=u[2];var c=l.d.pointAt(t,1,y);n[3]=c[0],n[4]=c[1],n[5]=c[2]}Object(r.k)(this.object)&&this.object.geometryVertexAttrsUpdated(0)}}]),n}(n("X668").a),v=Object(c.b)(),y=Object(i.e)(),b=Object(i.e)(),g=l.d.create(),m=1/3,w={start:m,end:m}},k5I3:function(e,t,n){"use strict";var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;Wt(this,e),this.displayId=0,this.geohashX=0,this.geohashY=0,this.geometry=t,n&&(this.attributes=n),r&&(this.centroid=r),null!=i&&(this.objectId=i)}return Zt(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}},{key:"weakClone",value:function(){var t=new e(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}]),e}();t.a=r},kB7V:function(e,t,n){"use strict";var r=n("Ip4x"),i=function(){function e(t,n){var r=this;if(Wt(this,e),this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.sprite=n?n.spriteUrl:t.sprite,this.glyphs=n?n.glyphsUrl:t.glyphs,this.layers=t.layers.map((function(e,t,n){return r._create(e,t,n)})),this.layers)for(var i,a=0;a<this.layers.length;a++)i=this.layers[a],this._layerByName[i.id.toLowerCase()]=i,this._uidToLayer.set(i.uid,i),0===i.type&&this.backgroundBucketIds.push(i.id);this._identifyRefLayers()}return Zt(e,[{key:"isPainterDataDriven",value:function(e){var t=this._layerByName[e.toLowerCase()];return!!t&&t.isPainterDataDriven()}},{key:"getStyleLayerId",value:function(e){return e>=this.layers.length?null:this.layers[e].id}},{key:"getStyleLayerByUID",value:function(e){var t=this._uidToLayer.get(e);return null!=t?t:null}},{key:"getStyleLayerIndex",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?this.layers.indexOf(t):-1}},{key:"setStyleLayer",value:function(t,n){if(t&&t.id){n&&n>=this.layers.length&&(n=this.layers.length-1);var r,i=!0,a=this._layerByName[t.id.toLowerCase()];if(a){var o=this.layers.indexOf(a);n||(n=o),n===o?(i=!1,r=e._recreateLayer(t,a),this.layers[n]=r):(this.layers.splice(o,1),r=this._create(t,n,this.layers),this.layers.splice(n,0,r))}else r=this._create(t,n,this.layers),!n||n>=this.layers.length?this.layers.push(r):this.layers.splice(n,0,r);this._layerByName[t.id.toLowerCase()]=r,this._uidToLayer.set(r.uid,r),i&&this._recomputeZValues(),this._identifyRefLayers()}}},{key:"getStyleLayer",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?{type:t.typeName,id:t.id,source:t.source,"source-layer":t.sourceLayer,minzoom:t.minzoom,maxzoom:t.maxzoom,filter:t.filter,layout:t.layout,paint:t.paint}:null}},{key:"deleteStyleLayer",value:function(e){var t=this._layerByName[e.toLowerCase()];if(t){delete this._layerByName[e.toLowerCase()],this._uidToLayer.delete(t.uid);var n=this.layers.indexOf(t);this.layers.splice(n,1),this._recomputeZValues(),this._identifyRefLayers()}}},{key:"getLayerById",value:function(e){return this._layerByName[e.toLowerCase()]}},{key:"getLayoutProperties",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?t.layout:null}},{key:"getPaintProperties",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?t.paint:null}},{key:"setPaintProperties",value:function(t,n){var r=this._layerByName[t.toLowerCase()];if(!r)return"";var i=e._recreateLayer({type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:n},r),a=this.layers.indexOf(r);return this.layers[a]=i,this._layerByName[r.id.toLowerCase()]=i,this._uidToLayer.set(r.uid,i),r.id}},{key:"setLayoutProperties",value:function(t,n){var r=this._layerByName[t.toLowerCase()];if(!r)return"";var i=e._recreateLayer({type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:n,paint:r.paint},r),a=this.layers.indexOf(r);return this.layers[a]=i,this._layerByName[r.id.toLowerCase()]=i,this._uidToLayer.set(r.uid,i),r.id}},{key:"setStyleLayerVisibility",value:function(t,n){var r=this._layerByName[t.toLowerCase()];if(r){var i=r.layout||{};i.visibility=n;var a=e._recreateLayer({type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},r),o=this.layers.indexOf(r);this.layers[o]=a,this._layerByName[r.id.toLowerCase()]=a,this._uidToLayer.set(r.uid,a)}}},{key:"getStyleLayerVisibility",value:function(e){var t,n=this._layerByName[e.toLowerCase()];if(!n)return"none";var r=n.layout;return null!=(t=null==r?void 0:r.visibility)?t:"visible"}},{key:"_recomputeZValues",value:function(){for(var e=this.layers,t=1/(e.length+1),n=0;n<e.length;n++)e[n].z=1-(1+n)*t}},{key:"_identifyRefLayers",value:function(){var e,t=[],n=[],r=0,i=Vt(this.layers);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(1===a.type){var o=a,s=a.source+"|"+a.sourceLayer;s+="|"+JSON.stringify(a.layout&&a.layout.visibility),s+="|"+JSON.stringify(a.minzoom),s+="|"+JSON.stringify(a.maxzoom),s+="|"+JSON.stringify(a.filter),(o.hasDataDrivenFill||o.hasDataDrivenOutline)&&(s+="|"+JSON.stringify(r)),t.push({key:s,layer:a})}if(2===a.type){var u=a,c=a.source+"|"+a.sourceLayer;c+="|"+JSON.stringify(a.layout&&a.layout.visibility),c+="|"+JSON.stringify(a.minzoom),c+="|"+JSON.stringify(a.maxzoom),c+="|"+JSON.stringify(a.filter),c+="|"+JSON.stringify(a.layout&&a.layout["line-cap"]),c+="|"+JSON.stringify(a.layout&&a.layout["line-join"]),u.hasDataDrivenLine&&(c+="|"+JSON.stringify(r)),n.push({key:c,layer:a})}++r}}catch(l){i.e(l)}finally{i.f()}this._assignRefLayers(t),this._assignRefLayers(n)}},{key:"_assignRefLayers",value:function(e){var t,n;e.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(a.key===t)a.layer.refLayerId=n;else if(t=a.key,n=a.layer.id,1===a.layer.type&&!a.layer.getPaintProperty("fill-outline-color"))for(var o=i+1;o<r;o++){var s=e[o];if(s.key!==t)break;if(s.layer.getPaintProperty("fill-outline-color")){e[i]=s,e[o]=a,n=s.layer.id;break}}}}},{key:"_create",value:function(e,t,n){var i=1-(1+t)*(1/(n.length+1)),a=this._runningId++;switch(e.type){case"background":return new r.a(0,e,i,a);case"fill":return new r.c(1,e,i,a);case"line":return new r.e(2,e,i,a);case"symbol":return new r.f(3,e,i,a);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new r.b(4,e,i,a)}throw new Error("Unknown vector tile layer")}}],[{key:"_recreateLayer",value:function(e,t){switch(e.type){case"background":return new r.a(0,e,t.z,t.uid);case"fill":return new r.c(1,e,t.z,t.uid);case"line":return new r.e(2,e,t.z,t.uid);case"symbol":return new r.f(3,e,t.z,t.uid);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new r.b(4,e,t.z,t.uid)}}}]),e}();t.a=i},kJYu:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n("pO5D"),i=n("WbKI"),a=n("04ZG"),o=n("/CmD"),s=n("r0DZ"),u=n("00eo"),c=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new s.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new u.a}}]),n}(e);return Object(r.a)([Object(i.b)({readOnly:!0})],t.prototype,"handles",null),Object(r.a)([Object(i.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(r.a)([Object(a.a)("esri.core.HandleOwner")],t),t},l=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(c(o.a));l=Object(r.a)([Object(a.a)("esri.core.HandleOwner")],l)},"kVK+":function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+h],h+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(s=0,o=l):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+p]=255&o,p+=d,o/=256,c-=8);e[n+p-d]|=128*v}},kYAx:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return u})),n.d(t,"q",(function(){return h})),n("wSAH"),n("srIe");var r=n("OvF4");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return[e[0],e[1],e[2],e[3]]}function a(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i();return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function u(e,t){return new r.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if("length"in t)!function(e){return 4===e.length}(t)?2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1])):(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}return n}function l(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.length,i=e[0],a=e[1],o=e[2],s=e[3],u=0;u<r;u++){var c=t[u];i=Math.min(i,c[0]),a=Math.min(a,c[1]),o=Math.max(o,c[0]),s=Math.max(s,c[1])}return n[0]=i,n[1]=a,n[2]=o,n[3]=s,n}function h(e){return e[0]>=e[2]?0:e[2]-e[0]}function f(e){return e[1]>=e[3]?0:e[3]-e[1]}function p(e){return h(e)*f(e)}function d(e,t){return v(e,t.x,t.y)}function v(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function y(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function b(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function g(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function m(e){return e?g(e,w):i(w)}var w=[1/0,1/0,-1/0,-1/0],O=[0,0,0,0]},kbDD:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("7MGP")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="selection",r}return Zt(n,[{key:"clone",value:function(){return new r}}]),n}(s.a);Object(i.a)([Object(a.b)({type:["selection"]})],u.prototype,"type",void 0),u=r=Object(i.a)([Object(o.a)("esri.layers.support.FeatureReductionSelection")],u),t.a=u},kbDN:function(e,t,n){"use strict";t.a=function(){function e(t,n){Wt(this,e),this._context=t,this._desc=n,this._context.instanceCounter.increment(5,this);var r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,n.internalFormat,n.width,n.height)}return Zt(e,[{key:"descriptor",get:function(){return this._desc}},{key:"resize",value:function(e,t){var n=this._desc;if(n.width!==e||n.height!==t){n.width=e,n.height=t;var r=this._context.gl;this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,n.internalFormat,n.width,n.height)}}},{key:"dispose",value:function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}]),e}()},kglp:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=n("4EHJ"),s=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).requestOptions=null,e.url=null,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"!=typeof e?e:Nt({url:e},t)}},{key:"parsedUrl",get:function(){return this._parseUrl(this.url)}},{key:"_parseUrl",value:function(e){return e?Object(o.J)(e):null}},{key:"_encode",value:function(e,t,n){var r={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){r[i]=[];for(var o=0;o<a.length;o++)r[i][o]=this._encode(a[o])}else if("object"==typeof a)if(a.toJSON){var s=a.toJSON(n&&n[i]);r[i]=t?s:JSON.stringify(s)}else r[i]=t?a:JSON.stringify(a);else r[i]=a}return r}}]),n}((n("ju1D"),n("9AIY"),n("/CmD")).a);Object(r.a)([Object(i.b)({readOnly:!0})],s.prototype,"parsedUrl",null),Object(r.a)([Object(i.b)()],s.prototype,"requestOptions",void 0),Object(r.a)([Object(i.b)({type:String})],s.prototype,"url",void 0),s=Object(r.a)([Object(a.a)("esri.tasks.Task")],s),t.a=s},"kq/K":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=e.coordinateHelper,a=e.targetPoint,o=e.objectId,s=e.constraint;return Wt(this,n),(r=t.call(this,i,a,s)).objectId=o,r}return n}(n("3zv9").a)},krU8:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"b",(function(){return g}));var r=n("mrSG"),i=n("oEnM"),a={type:"simple",symbol:{type:"simple-fill",color:"transparent",style:"solid",outline:{color:"blue",width:2}}},o={type:"simple-marker",style:"square",color:"#8A2BE2",size:"0px"},s=n("tI4m"),u=n("6lH3");n("WbKI"),n("Stxv"),n("evjZ"),n("Gj5k"),n("wSAH"),n("6S2I"),n("4gt3"),n("RI0u"),n("r88o"),n("y/NR");var c,l,h,f=n("04ZG"),p=(n("Cduq"),n("xvdR"),n("4GrV")),d=(h=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"asJSON",value:function(){var e=this.toJSON();return e.centroid=this.centroid,e.extent=this.extent,e.type=this.type,e.radius=this.radius,e.spatialReference=this.spatialReference,e.toJSON=void 0,e}}]),n}(s.a),h=Object(r.b)([Object(f.a)("esri.geometry.Circle")],h)),v=(l=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"asJSON",value:function(){var e=this.toJSON();return e.extent=this.extent,e.type=this.type,e.spatialReference=this.spatialReference,e.rings=this.rings,e.hasM=this.hasM,e.hasZ=this.hasZ,e.toJSON=void 0,e}}]),n}(p.b),l=Object(r.b)([Object(f.a)("esri.geometry.Polygon")],l)),y=(c=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"asJSON",value:function(){var e=this.toJSON();return e.extent=this.extent,e.type=this.type,e.spatialReference=this.spatialReference,e.paths=this.paths,e.toJSON=void 0,e}}]),n}(p.c),c=Object(r.b)([Object(f.a)("esri.geometry.Polyline")],c)),b=function(e,t){return new i.a({view:t,layer:e,pointSymbol:o,polygonSymbol:a.symbol,updateOnGraphicClick:!0,defaultUpdateOptions:{enableRotation:!1,enableScaling:!1,multipleSelectionEnabled:!1,toggleToolOnClick:!1,tool:"reshape"},defaultCreateOptions:{mode:"click"}})},g=function(e,t){return new i.a({view:t,layer:e,pointSymbol:o,polylineSymbol:{type:"simple-line",color:[0,0,255],width:2},updateOnGraphicClick:!1,defaultUpdateOptions:{enableRotation:!1,enableScaling:!1,multipleSelectionEnabled:!1,toggleToolOnClick:!1,tool:"reshape"},defaultCreateOptions:{mode:"click"}})},m=function(e){var t,n=Object(u.geodesicArea)(e.geometry,"square-miles"),r=Math.sqrt(n/Math.PI);if(t=r,e.attributes&&void 0!==e.attributes.radius){var i=e.attributes.radius;t=Math.abs(i-r)<.05?i:r}return new d({center:e.geometry.centroid,radius:t,radiusUnit:"miles",geodesic:!0})},w=function(e,t){return new d({center:e,radius:t,radiusUnit:"miles",geodesic:!0})}},"ku/q":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a}));var r=n("srIe"),i=7;function a(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function o(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return Object(r.d)(void 0)}function s(e){return o(e)}},kwW8:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return i}));var i,a,o=n("pO5D"),s=(n("wSAH"),n("srIe")),u=n("6S2I"),c=(n("zqDF"),n("WbKI")),l=n("04ZG"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("L/MW")),f=n("ikTR"),p=n("9MzC"),d=n("/CmD"),v=n("N5XI"),y=n("MG+P"),b=n("Js3Z"),g=u.a.getLogger("esri.views.support.Scheduler");(a=i||(i={})).REMOTE_CLIENT="worker messages",a.SLIDE="slide",a.STAGE="stage",a.STREAM_DATA_LOADER="stream loader",a.ELEVATION_QUERY="elevation query",a.TERRAIN_SURFACE="terrain",a.SURFACE_GEOMETRY_UPDATES="surface geometry updates",a.GRAPHICS_CORE="Graphics3D",a.I3S_CONTROLLER="I3S",a.POINT_CLOUD_LAYER="point cloud",a.FEATURE_TILE_FETCHER="feature fetcher",a.LABELER="labeler",a.GRAPHICS_DECONFLICTOR="graphics deconflictor",a.FILTER_VISIBILITY="Graphics3D filter visibility",a.FEATURE_QUERY_ENGINE="feature query",a.SCALE_VISIBILITY="Graphics3D scale visibility",a.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",a.POINT_OF_INTEREST_FREQUENT="POI frequent",a.POINT_OF_INTEREST_INFREQUENT="POI infrequent",a.FEATURE_TILE_TREE="feature tile tree",a.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",a.ELEVATION_ALIGNMENT="elevation alignment",a.TEXT_TEXTURE_ATLAS="text texture atlas",a.TEXTURE_UNLOAD="texture unload",a.OVERLAY_MANAGER="overlay manager",a.LINE_OF_SIGHT_TOOL="line of sight tool",a.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",a.ELEVATION_PROFILE="elevation profile",a.SNAPPING="snapping",a[a.TEST_PRIO=1]="TEST_PRIO";var m=(Ft(r={},i.REMOTE_CLIENT,0),Ft(r,i.SLIDE,0),Ft(r,i.STREAM_DATA_LOADER,0),Ft(r,i.ELEVATION_QUERY,0),Ft(r,i.STAGE,1),Ft(r,i.TERRAIN_SURFACE,1),Ft(r,i.SURFACE_GEOMETRY_UPDATES,1),Ft(r,i.GRAPHICS_CORE,2),Ft(r,i.I3S_CONTROLLER,2),Ft(r,i.POINT_CLOUD_LAYER,2),Ft(r,i.FEATURE_TILE_FETCHER,2),Ft(r,i.LABELER,8),Ft(r,i.GRAPHICS_DECONFLICTOR,4),Ft(r,i.FILTER_VISIBILITY,4),Ft(r,i.FEATURE_QUERY_ENGINE,8),Ft(r,i.SCALE_VISIBILITY,4),Ft(r,i.FRUSTUM_VISIBILITY,4),Ft(r,i.POINT_OF_INTEREST_FREQUENT,6),Ft(r,i.POINT_OF_INTEREST_INFREQUENT,30),Ft(r,i.FEATURE_TILE_TREE,16),Ft(r,i.FEATURE_TILE_TREE_ACTIVE,0),Ft(r,i.ELEVATION_ALIGNMENT,12),Ft(r,i.TEXT_TEXTURE_ATLAS,12),Ft(r,i.TEXTURE_UNLOAD,12),Ft(r,i.OVERLAY_MANAGER,12),Ft(r,i.LINE_OF_SIGHT_TOOL,16),Ft(r,i.LINE_OF_SIGHT_TOOL_INTERACTIVE,0),Ft(r,i.SNAPPING,0),r);function w(e){return e in m?m[e]:"number"==typeof e?e:1}var O,j,_=1e3/30;!function(e){var t=function(e){Kt(a,e);var t=Xt(a);function a(e){var n,o;for(var u in Wt(this,a),(n=t.call(this,e)).updating=!0,n.performanceInfo={total:new h.a("total"),tasks:new Array},n._budget=null,n._state=1,n._tasks=new f.a,n._runQueue=new f.a,n._load=0,n._idleStateCallbacks=new f.a,n._idleUpdatesStartFired=!1,n._maxReschedule=S,n._forceTask=!1,n._debug=!1,n._debugHandle=Object(v.init)(b.a,"SCHEDULER_LOG_SLOW_TASKS",(function(e){return n._debug=e})),n._budget=new r(e.nowFunc),I.length=0,i)M.set(i[u],n.performanceInfo.tasks.length),n.performanceInfo.tasks.push(new h.a(i[u])),I.push(0);var c=$t(n);return n._test={get state(){return Object(s.j)(o)?c._state:o},set state(e){o=e},FRAME_SAFETY_BUDGET:6.5,INTERACTING_BUDGET:_,IDLE_BUDGET:100,get budget(){return c._budget.budget},usedBudget:0,updateTask:function(e){return n._updateTask(e)},getState:function(e){return n._getState(e)},getRuntime:function(e){return n._getRuntime(e)},resetRuntimes:function(){return n._resetRuntimes()},getRunning:function(){return n._getRunning()}},n}return Zt(a,[{key:"destroy",value:function(){this._debugHandle&&this._debugHandle.remove()}},{key:"registerTask",value:function(e,t,r){var i=w(e),a=new n(this,e,t,r,i);return this._tasks.push(a),a}},{key:"registerIdleStateCallbacks",value:function(e,t){var n=this,r={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(r),2===this.state&&this._idleUpdatesStartFired&&r.idleBegin();var i=this;return{remove:function(){return n._removeIdleStateCallbacks(r)},set idleBegin(e){i._idleUpdatesStartFired&&(r.idleEnd(),2===i._state&&e()),r.idleBegin=e},set idleEnd(e){r.idleEnd=e}}}},{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return Object(s.j)(this._test.state)?this._state:this._test.state},set:function(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((function(e){return e.idleEnd()}))))}},{key:"updateBudget",value:function(e){this._test.usedBudget=0;var t=6.5,n=e.frameDuration,r=1;switch(this.state){case 2:t=0,n=Math.max(100,e.frameDuration),r=30;break;case 1:n=Math.max(_,e.frameDuration)}return n-=e.elapsedFrameTime+t,2!==this.state&&n<1&&!this._forceTask?(this._forceTask=!0,!1):(n=Math.max(n,r),this._budget.reset(n,this.state),this._maxReschedule=S,this._updateLoad(),this._schedule())}},{key:"frame",value:function(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((function(e){return e.idleBegin()}))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}},{key:"_removeIdleStateCallbacks",value:function(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}},{key:"removeTask",value:function(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}},{key:"_updateTask",value:function(e){this._tasks.forAll((function(t){t.name===e&&t.setPriority(e)}))}},{key:"_getState",value:function(e){if(this._runQueue.some((function(t){return t.name===e})))return j.SCHEDULED;var t=j.IDLE;return this._tasks.forAll((function(n){n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=j.READY:t!==j.READY&&(t=j.WAITING))})),t}},{key:"_getRuntime",value:function(e){var t=0;return this._tasks.forAll((function(n){n.name===e&&(t+=n.runtime)})),t}},{key:"_resetRuntimes",value:function(){this._tasks.forAll((function(e){return e.runtime=0}))}},{key:"_getRunning",value:function(){var e=new Map;if(this._tasks.forAll((function(t){t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;var t="";return e.forEach((function(e,n){t+=e>1?" ".concat(e,"x ").concat(n):" "+n})),t}},{key:"_runIdle",value:function(){this._run()}},{key:"_runInteracting",value:function(){this._run()}},{key:"_runAnimating",value:function(){this._run()}},{key:"_updateLoad",value:function(){var e=this._tasks.reduce((function(e,t){return t.needsUpdate?++e:e}),0);this._load=.9*this._load+e*(1-.9)}},{key:"_schedule",value:function(){var e=this;if(this._maxReschedule<=0)return!1;var t=function(){var t=!1,n=0;if(e._tasks.forAll((function(r){if(r.needsUpdate&&0!==r.schedulePriority&&0!==r.priority)switch(t=!0,n=Math.max(n,r.priority),r.schedulePriority){case 1:r.schedulePriority=0,e._runQueue.push(r);break;default:--r.schedulePriority}})),!t)return{v:(e.updating=!1,!1)};e._maxReschedule===S&&(e._maxReschedule=n),--e._maxReschedule};for(this._runQueue.filterInPlace((function(e){return!!e.needsUpdate||(e.schedulePriority=e.priority,!1)})),this._tasks.forAll((function(t){0===t.priority&&t.needsUpdate&&!e._runQueue.some((function(e){return e===t}))&&e._runQueue.unshift(t)}));0===this._runQueue.length;){var n=t();if("object"==typeof n)return n.v}return this.updating=!0,!0}},{key:"_run",value:function(){for(var e=this._budget.now(),t=0;t<I.length;++t)I[t]=0;do{for(;this._runQueue.length>0;){var n=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.update(this._budget)}catch(a){g.error('Exception in task "'.concat(r.name,'"'),a)}r.schedulePriority=r.priority;var i=this._budget.now()-n;if(r.runtime+=i,I[M.get(r.task)]+=i,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",r.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(I,this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(I,this._budget.now()-e)}},{key:"_recordFrameTaskTimes",value:function(e,t){for(var n=0;n<e.length;++n)this.performanceInfo.tasks[n].record(e[n]);this.performanceInfo.total.record(t)}},{key:"test",get:function(){return this._test}}]),a}(d.a);Object(o.a)([Object(c.b)()],t.prototype,"updating",void 0),Object(o.a)([Object(c.b)()],t.prototype,"nowFunc",void 0),t=Object(o.a)([Object(l.a)("esri.views.support.Scheduler")],t),e.Scheduler=t;var n=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a,o){var s;return Wt(this,n),(s=t.call(this,{}))._scheduler=e,s.name=r,s.update=i,s._needsUpdateCB=a,s._priority=o,s.runtime=0,s._queue=new y.a,s.updating=!1,s.schedulePriority=s._priority,s}return Zt(n,[{key:"normalizeCtorArgs",value:function(){return{}}},{key:"remove",value:function(){this.processQueue(x),this._scheduler.removeTask(this),this.schedule=k.schedule,this.reschedule=k.reschedule}},{key:"priority",get:function(){return this._priority}},{key:"setPriority",value:function(e){this.name=e;var t=w(e);0!==this._priority&&0===this.schedulePriority||(this.schedulePriority=t),this._priority=t}},{key:"task",get:function(){return this.name},set:function(e){this.setPriority(e)}},{key:"needsUpdate",get:function(){return this.updating||this._needsUpdateCB()}},{key:"schedule",value:function(e,t){return this.updating=!0,this._queue.push(e,t)}},{key:"reschedule",value:function(e,t){return this.updating=!0,this._queue.unshift(e,t)}},{key:"processQueue",value:function(e){for(;!e.done&&this._queue.process();)e.madeProgress();this.updating=this._queue.length>0}}]),n}(d.a);Object(o.a)([Object(c.b)()],n.prototype,"updating",void 0),n=Object(o.a)([Object(l.a)("esri.views.support.SchedulerTask")],n);var r=function(){function e(t){Wt(this,e),this.now=t,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}return Zt(e,[{key:"run",value:function(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}},{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"madeProgress",value:function(){this._didWork=!0}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"reset",value:function(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"resetProgress",value:function(){this._didWork=!1}},{key:"hasProgressed",get:function(){return this._didWork}}]),e}();e.Budget=r}(O||(O={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(j||(j={}));var x=function(){var e=new O.Budget((function(){return performance.now()}));return e.enabled=!1,e}(),k=new(function(){function e(){Wt(this,e)}return Zt(e,[{key:"remove",value:function(){}},{key:"processQueue",value:function(){}},{key:"schedule",value:function(e){return Object(p.w)(e())}},{key:"reschedule",value:function(e){return Object(p.w)(e())}}]),e}()),S=Number.MAX_SAFE_INTEGER,M=new Map,I=new Array},l4ZG:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return v}));var r=n("f/qv"),i=n("f4Nx"),a=n("WZb1"),o=n("IlWj");function s(e){return 57.29577951308232*e}function u(e){return.017453292519943*e}function c(e){return null!=e.wkid||null!=e.wkt}var l=[0,0];function h(e,t,n,r,i){var a,o,s=e,u=i;if(u.spatialReference=n,"x"in s&&"x"in u){var c=zt(t(s.x,s.y,l,r),2);u.x=c[0],u.y=c[1]}else if("xmin"in s&&"xmin"in u)a=zt(t(s.xmin,s.ymin,l,r),2),u.xmin=a[0],u.ymin=a[1],o=zt(t(s.xmax,s.ymax,l,r),2),u.xmax=o[0],u.ymax=o[1];else if("paths"in s&&"paths"in u||"rings"in s&&"rings"in u){for(var h,f=("paths"in s?s.paths:s.rings),p=[],d=0;d<f.length;d++){var v=f[d];h=[],p.push(h);for(var y=0;y<v.length;y++)h.push(t(v[y][0],v[y][1],[0,0],r)),v[y].length>2&&h[y].push(v[y][2]),v[y].length>3&&h[y].push(v[y][3])}"paths"in u?u.paths=p:u.rings=p}else if("points"in s&&"points"in u){for(var b=s.points,g=[],m=0;m<b.length;m++)g[m]=t(b[m][0],b[m][1],[0,0],r),b[m].length>2&&g[m].push(b[m][2]),b[m].length>3&&g[m].push(b[m][3]);u.points=g}return i}function f(e,t){var n=e&&(c(e)?e:e.spatialReference),r=t&&(c(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!n||!r)&&(!!Object(i.c)(r,n)||Object(i.m)(r)&&Object(i.j)(n)||Object(i.m)(n)&&Object(i.j)(r))}function p(e,t){var n=e&&e.spatialReference,o=t&&(c(t)?t:t.spatialReference);return f(n,o)?Object(i.c)(n,o)?Object(r.a)(e):Object(i.m)(o)?h(e,d,a.a.WebMercator,!1,Object(r.a)(e)):Object(i.j)(o)?h(e,v,a.a.WGS84,!1,Object(r.a)(e)):null:null}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);var r=u(t);return n[0]=u(e)*o.a.radius,n[1]=o.a.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=s(e/o.a.radius);return n[0]=r?i:i-360*Math.floor((i+180)/360),n[1]=s(Math.PI/2-2*Math.atan(Math.exp(-1*t/o.a.radius))),n}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(r.a)(e);return h(e,d,a.a.WebMercator,t,n)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(r.a)(e);return h(e,v,a.a.WGS84,t,n)}},l4eh:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("WbKI")),o=n("Gj5k"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("qRWG"),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).decoration="none",r.family="sans-serif",r.size=9,r.style="normal",r.weight="normal",r}return Zt(n,[{key:"castSize",value:function(e){return Object(c.k)(e)}},{key:"clone",value:function(){return new r({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}},{key:"hash",value:function(){return"".concat(this.decoration,".").concat(this.family,".").concat(this.size,".").concat(this.style,".").concat(this.weight)}}]),n}(u.a);Object(i.a)([Object(a.b)({type:["underline","line-through","none"],json:{default:"none",write:!0}})],l.prototype,"decoration",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"family",void 0),Object(i.a)([Object(a.b)({type:Number,json:{write:{overridePolicy:function(e,t,n){return{enabled:!n||!n.textSymbol3D}}}}})],l.prototype,"size",void 0),Object(i.a)([Object(o.a)("size")],l.prototype,"castSize",null),Object(i.a)([Object(a.b)({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],l.prototype,"style",void 0),Object(i.a)([Object(a.b)({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],l.prototype,"weight",void 0),l=r=Object(i.a)([Object(s.a)("esri.symbols.Font")],l),t.a=l},lNcg:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=["none","solid","dash","short-dot","dot","dash-dot","short-dash-dot-dot","long-dash","long-dash-dot","short-dash","short-dash-dot"],i=["none","solid","forward-diagonal","backward-diagonal","cross","diagonal-cross"],a=function(e,t){return{type:"simple-fill",color:t.color,style:t.style,outline:{color:e.color?e.color:"transparent",width:e.width,style:e.style}}},o=function(e){return{type:"simple-line",color:e.color,style:e.style,width:e.width}}},lORP:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Wt(this,e),this.header=t,this.body=n}},lh0l:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=n("Cduq"),s=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).enabled=!0,r.type=null,r}return Zt(n,[{key:"writeEnabled",value:function(e,t,n){e||(t[n]=e)}}]),n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);Object(r.a)([Object(i.b)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],s.prototype,"enabled",void 0),Object(r.a)([Object(o.a)("enabled")],s.prototype,"writeEnabled",null),Object(r.a)([Object(i.b)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],s.prototype,"type",void 0),s=Object(r.a)([Object(a.a)("esri.symbols.Symbol3DLayer")],s),t.a=s},lhfp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n("OIYi"),i=n("0Ect");function a(e){e.include(i.a),e.uniforms.add("geometryDepthTexture","sampler2D"),e.uniforms.add("cameraNearFar","vec2"),e.code.add(r.a(Te||(Te=Rt(["\n    //Compare the linearized depths of the vertex/fragment and the geometry in the scene. If vertex/fragment is behind geometry, don't draw it.\n    bool geometryDepthTest(vec2 pos, float elementDepth){\n\n      float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, cameraNearFar);\n      if(elementDepth < (geometryDepth - 1.0)){\n        return true;\n      }\n      return false;\n    }\n  "]))))}function o(e,t,n){n.multipassGeometryEnabled&&n.geometryLinearDepthTexture&&(e.setUniform1i("geometryDepthTexture",11),t.bindTexture(n.geometryLinearDepthTexture,11))}},llFo:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I")),o=n("WbKI"),s=n("Gj5k"),u=n("04ZG"),c=n("zlDU"),l=n("4EHJ"),h=(n("ju1D"),n("9AIY"),n("ikTR")),f=n("9MzC"),p=n("WBXD"),d=n("/CmD"),v=n("Lqtk"),y=n("r0DZ"),b=n("N5XI"),g=n("wk6I"),m=n("f/qv"),w=n("tQ+6"),O=function(){function e(){Wt(this,e),this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return Zt(e,[{key:"getAvailability",value:function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var n=(e-this.location.top)*this.location.width+(t-this.location.left),r=n>>3,i=this._tileAvailabilityBitSet;return r<0||r>i.length?"unknown":i[r]&1<<n%8?"available":"unavailable"}},{key:"_updateFromData",value:function(e){for(var t=!0,n=!0,r=Math.ceil(this.location.width*this.location.height/8),i=new Uint8Array(r),a=0,o=0;o<e.length;o++){var s=o%8;e[o]?(n=!1,i[a]|=1<<s):t=!1,7===s&&++a}n?this._allAvailability="unavailable":t?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=i,this.byteSize+=i.length)}}],[{key:"fromDefinition",value:function(t,n){var r=t.service.request||v.default,i=t.row,a=t.col,o=t.width,s=t.height,u={query:{f:"json"}};return n=n?Nt(Nt({},u),n):u,r(function(e){var t;if("vector-tile"===e.service.type)t="".concat(e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height);else{var n=e.service.tileServers;t="".concat(n&&n.length?n[e.row%n.length]:e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var r=e.service.query;return r&&(t="".concat(t,"?").concat(r)),t}(t),n).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:i,left:a,width:o,height:s},valid:!0,data:Object(w.b)(o*s,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==i||t.location.left!==a||t.location.width!==o||t.location.height!==s))throw new c.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:i,left:a,width:o,height:s}});return e.fromJSON(t)}))}},{key:"fromJSON",value:function(t){e.validateJSON(t);var n=new e;return n.location=Object.freeze(Object(m.a)(t.location)),n._updateFromData(t.data),Object.freeze(n)}},{key:"validateJSON",value:function(e){if(!e||!e.location)throw new c.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new c.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new c.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new c.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new c.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}]),e}();function j(e){return"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var _=a.a.getLogger("esri.layers.support.TilemapCache"),x=r=function(e){Kt(i,e);var t,n=Xt(i);function i(e){var t;return Wt(this,i),(t=n.call(this,e))._handles=new y.a,t._pendingTilemapRequests={},t._availableLevels={},t.levels=5,t.cacheByteSize=2097152,t.request=v.default,t._prefetchingEnabled=!0,t}return Zt(i,[{key:"initialize",value:function(){var e=this;this._tilemapCache=new g.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),Object(b.init)(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"castLevels",value:function(e){return e<=2?(_.error("Minimum levels for Tilemap is 3, but got ",e),3):e}},{key:"size",get:function(){return 1<<this.levels}},{key:"fetchTilemap",value:function(e,t,n,r){var i=this;if(!this._availableLevels[e])return Promise.reject(new c.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")));var a=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,n,a);if(o)return Promise.resolve(o);var s=r&&r.signal;return r=Nt(Nt({},r),{},{signal:null}),new Promise((function(e,t){Object(f.p)(s,(function(){return t(Object(f.e)())}));var n=j(a),o=i._pendingTilemapRequests[n];if(!o){o=O.fromDefinition(a,r).then((function(e){return i._tilemapCache.put(n,e,e.byteSize),e}));var u=function(){return delete i._pendingTilemapRequests[n]};i._pendingTilemapRequests[n]=o,o.then(u,u)}o.then(e,t)}))}},{key:"getAvailability",value:function(e,t,n){if(!this._availableLevels[e])return"unavailable";var r=this._tilemapFromCache(e,t,n,this._tmpTilemapDefinition);return r?r.getAvailability(t,n):"unknown"}},{key:"getAvailabilityUpsample",value:function(e,t,n,r){r.level=e,r.row=t,r.col=n;var i=this.layer.tileInfo;for(i.updateTileInfo(r);;){var a=this.getAvailability(r.level,r.row,r.col);if("unavailable"!==a)return a;if(!i.upsampleTile(r))return"unavailable"}}},{key:"fetchAvailability",value:function(e,t,n,r){return this._availableLevels[e]?this.fetchTilemap(e,t,n,r).catch((function(e){return e})).then((function(r){if(r instanceof O){var i=r.getAvailability(t,n);return"unavailable"===i?Promise.reject(new c.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n})):i}if(Object(f.m)(r))throw r;return"unknown"})):Promise.reject(new c.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")))}},{key:"fetchAvailabilityUpsample",value:function(e,t,n,r,i){var a=this;r.level=e,r.row=t,r.col=n;var o=this.layer.tileInfo;o.updateTileInfo(r);var s=this.fetchAvailability(e,t,n,i).catch((function(e){if(Object(f.m)(e))throw e;if(o.upsampleTile(r))return a.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,n,i,s),s}},{key:"_fetchAvailabilityUpsamplePrefetch",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,i,a,o,s){var u,c,l,h,d,v,y,b,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._prefetchingEnabled){e.next=2;break}return e.abrupt("return");case 2:if(u="prefetch-"+t,!this._handles.has(u)){e.next=5;break}return e.abrupt("return");case 5:return c=Object(f.d)(),s.then((function(){return c.abort()}),(function(){return c.abort()})),l=!1,this._handles.add({remove:function(){l||(l=!0,c.abort())}},u),e.next=11,Object(p.c)(10,c.signal).catch((function(){}));case 11:if(l||(l=!0,this._handles.remove(u)),!Object(f.n)(c)){e.next=14;break}return e.abrupt("return");case 14:for(h={id:t,level:n,row:i,col:a},d=Nt(Nt({},o),{},{signal:c.signal}),v=this.layer.tileInfo,y=function(e){var t=g.fetchAvailability(h.level,h.row,h.col,d);r._prefetches.push(t);var n=function(){r._prefetches.removeUnordered(t)};t.then(n,n)},b=0;r._prefetches.length<r._maxPrefetch&&v.upsampleTile(h);++b)y();case 17:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i,a,o){return t.apply(this,arguments)})},{key:"_initializeTilemapDefinition",value:function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(l.D)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}}},{key:"_tilemapFromCache",value:function(e,t,n,r){r.level=e,r.row=t-t%this.size,r.col=n-n%this.size;var i=j(r);return this._tilemapCache.get(i)}},{key:"_initializeAvailableLevels",value:function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))}},{key:"test",get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,n,r){return!!e._tilemapFromCache(t,n,r,e._tmpTilemapDefinition)}}}}]),i}(d.a);x._maxPrefetch=4,x._prefetches=new h.a({initialSize:r._maxPrefetch}),Object(i.a)([Object(o.b)({constructOnly:!0,type:Number})],x.prototype,"levels",void 0),Object(i.a)([Object(s.a)("levels")],x.prototype,"castLevels",null),Object(i.a)([Object(o.b)({readOnly:!0,type:Number})],x.prototype,"size",null),Object(i.a)([Object(o.b)({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0),Object(i.a)([Object(o.b)({constructOnly:!0})],x.prototype,"layer",void 0),Object(i.a)([Object(o.b)({constructOnly:!0})],x.prototype,"request",void 0),x=r=Object(i.a)([Object(u.a)("esri.layers.support.TilemapCache")],x)},lwwL:function(e,t,n){"use strict";function r(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}n.d(t,"a",(function(){return r}));var i=r();Object.freeze({__proto__:null,create:r,clone:function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,v){var y=new Float32Array(16);return y[0]=e,y[1]=t,y[2]=n,y[3]=r,y[4]=i,y[5]=a,y[6]=o,y[7]=s,y[8]=u,y[9]=c,y[10]=l,y[11]=h,y[12]=f,y[13]=p,y[14]=d,y[15]=v,y},createView:function(e,t){return new Float32Array(e,t,16)},IDENTITY:i})},m0D6:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("IlWj"),i=n("gEht"),a={inches:Object(i.c)(1,"meters","inches"),feet:Object(i.c)(1,"meters","feet"),"us-feet":Object(i.c)(1,"meters","us-feet"),yards:Object(i.c)(1,"meters","yards"),miles:Object(i.c)(1,"meters","miles"),"nautical-miles":Object(i.c)(1,"meters","nautical-miles"),millimeters:Object(i.c)(1,"meters","millimeters"),centimeters:Object(i.c)(1,"meters","centimeters"),decimeters:Object(i.c)(1,"meters","decimeters"),meters:Object(i.c)(1,"meters","meters"),kilometers:Object(i.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.m)(1,"meters",r.a.radius)}},m0vG:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("R4yR"),i=n("tjlA").Buffer;function a(e){return o.apply(this,arguments)}function o(){return(o=Ut(regeneratorRuntime.mark((function e(t){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(global.fetch){e.next=2;break}return e.abrupt("return",r(t));case 2:return n=t.slice(-3).toLowerCase(),a="prj"===n||"cpg"===n,e.prev=3,e.next=6,fetch(t);case 6:if(e.t0=(o=e.sent).status,!(e.t0>399)){e.next=9;break}throw new Error(o.statusText);case 9:if(!a){e.next=11;break}return e.abrupt("return",o.text());case 11:return e.next=13,o.arrayBuffer();case 13:return o=e.sent,e.abrupt("return",i.from(o));case 17:if(e.prev=17,e.t1=e.catch(3),!a){e.next=21;break}return e.abrupt("return",!1);case 21:throw e.t1;case 22:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}},m1Uf:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("fXoL"),i=n("b9ir"),a=n("tk/3"),o=n("frIU"),s=n("mKlZ"),u=n("ofXK"),c=n("8WOb"),l=["checkboxes"];function h(e,t){1&e&&(r.kc(0,"div",10),r.Tc(1,"Loading..."),r.jc())}function f(e,t){if(1&e){var n=r.lc();r.kc(0,"div",4),r.kc(1,"div",5),r.kc(2,"span",6),r.Tc(3,"Layers"),r.jc(),r.gc(4,"app-help-button",7),r.kc(5,"i",8),r.rc("click",(function(){return r.Lc(n),r.vc().toggle()})),r.jc(),r.jc(),r.Sc(6,h,2,0,"div",9),r.jc()}if(2&e){var i=r.vc();r.Bc("hidden",!i.isOpen),r.Tb(4),r.Bc("header","Layers")("itemName","layers")("fillColor","white"),r.Tb(2),r.Bc("ngIf",!i.isFirstTime)}}function p(e,t){1&e&&(r.kc(0,"div"),r.Tc(1,"Loading..."),r.jc())}function d(e,t){if(1&e&&(r.kc(0,"tr"),r.kc(1,"td"),r.gc(2,"img",22),r.jc(),r.kc(3,"td"),r.Tc(4),r.jc(),r.jc()),2&e){var n=t.$implicit;r.Tb(2),r.Bc("src","data:image/png;base64,"+n.imageData,r.Nc)("alt",n.label),r.Tb(2),r.Uc(n.label)}}function v(e,t){if(1&e&&(r.kc(0,"table",20),r.kc(1,"tbody"),r.Sc(2,d,5,3,"tr",21),r.jc(),r.jc()),2&e){var n=r.vc(4);r.Tb(2),r.Bc("ngForOf",n.wetAreasLegendList)}}function y(e,t){1&e&&(r.kc(0,"table",20),r.kc(1,"tbody"),r.kc(2,"tr"),r.kc(3,"td",23),r.kc(4,"div",24),r.uc(),r.kc(5,"svg",25),r.gc(6,"defs"),r.gc(7,"path",26),r.jc(),r.jc(),r.jc(),r.tc(),r.kc(8,"td"),r.Tc(9,"1% Annual Chance Flood Hazard"),r.jc(),r.jc(),r.kc(10,"tr"),r.kc(11,"td",23),r.kc(12,"div",24),r.uc(),r.kc(13,"svg",25),r.gc(14,"defs"),r.gc(15,"path",27),r.jc(),r.jc(),r.jc(),r.tc(),r.kc(16,"td"),r.Tc(17,"0.2% Annual Chance Flood Hazard"),r.jc(),r.jc(),r.kc(18,"tr"),r.kc(19,"td",23),r.kc(20,"div",24),r.uc(),r.kc(21,"svg",25),r.gc(22,"defs"),r.gc(23,"path",28),r.jc(),r.jc(),r.jc(),r.tc(),r.kc(24,"td"),r.Tc(25,"Regulatory Floodway"),r.jc(),r.jc(),r.kc(26,"tr"),r.kc(27,"td",23),r.kc(28,"div",24),r.uc(),r.kc(29,"svg",25),r.gc(30,"defs"),r.gc(31,"path",29),r.jc(),r.jc(),r.jc(),r.tc(),r.kc(32,"td"),r.Tc(33,"Special Floodway"),r.jc(),r.jc(),r.kc(34,"tr"),r.kc(35,"td",23),r.kc(36,"div",24),r.uc(),r.kc(37,"svg",25),r.gc(38,"defs"),r.gc(39,"path",30),r.jc(),r.jc(),r.jc(),r.tc(),r.kc(40,"td"),r.Tc(41,"Future Conditions 1% Annual Chance Flood Hazard"),r.jc(),r.jc(),r.kc(42,"tr"),r.kc(43,"td",23),r.kc(44,"div",24),r.uc(),r.kc(45,"svg",25),r.gc(46,"defs"),r.gc(47,"path",31),r.jc(),r.jc(),r.jc(),r.tc(),r.kc(48,"td"),r.Tc(49,"Area with Reduced Risk Due to Levee"),r.jc(),r.jc(),r.jc(),r.jc())}var b=function(e){return{"cursor-not-allowed":e}},g=function(e){return{opacity:e}},m=function(e){return[e]};function w(e,t){if(1&e){var n=r.lc();r.kc(0,"div",14),r.kc(1,"label",15),r.kc(2,"input",16,17),r.rc("change",(function(e){return r.Lc(n),r.vc(3).updateVisibility(e.target.id)})),r.jc(),r.kc(4,"span",18),r.Tc(5),r.jc(),r.jc(),r.Sc(6,v,3,1,"table",19),r.Sc(7,y,50,0,"table",19),r.jc()}if(2&e){var i=t.$implicit,a=r.vc(3);r.Tb(1),r.Bc("ngClass",r.Ec(8,b,!i.enabled))("ngStyle",r.Ec(10,g,i.enabled?1:.4)),r.Tb(1),r.Bc("id",i.id)("ngClass",r.Ec(12,m,"text-"+a.colorPrefix+"_secondary"))("disabled",!i.enabled),r.Tb(3),r.Uc(i.label),r.Tb(1),r.Bc("ngIf",i.id===a.wetAreasId&&a.wetAreasLayer.visible),r.Tb(1),r.Bc("ngIf",i.id===a.floodZonesId&&a.floodZonesLayer.visible)}}function O(e,t){if(1&e&&(r.kc(0,"div",10),r.Sc(1,w,8,14,"div",13),r.jc()),2&e){var n=r.vc(2);r.Tb(1),r.Bc("ngForOf",n.layersList)}}var j=function(e){return{layersContentLarge:e}};function _(e,t){if(1&e){var n=r.lc();r.kc(0,"div",11),r.kc(1,"div",5),r.kc(2,"span",6),r.Tc(3,"Layers"),r.jc(),r.gc(4,"app-help-button",7),r.kc(5,"i",8),r.rc("click",(function(){return r.Lc(n),r.vc().toggle()})),r.jc(),r.jc(),r.Sc(6,p,2,0,"div",12),r.Sc(7,O,2,1,"div",9),r.jc()}if(2&e){var i=r.vc();r.Bc("hidden",!i.isOpen)("ngClass",r.Ec(7,j,i.floodZonesLayer.visible||i.wetAreasLayer.visible)),r.Tb(4),r.Bc("header","Layers")("itemName","layers")("fillColor","white"),r.Tb(2),r.Bc("ngIf",i.isFirstTime),r.Tb(1),r.Bc("ngIf",!i.isFirstTime)}}var x=function(e){return{selectedBtn:e}},k=function(){var e=function(){function e(t,n,r){var a=this;Wt(this,e),this.http=t,this.mapviewService=n,this.widgetToggleService=r,this.isOpen=!1,this.wetAreasId="wetAreas",this.floodZonesId="floodZones",this.contoursId="contours",this.hydroId="hydro",this.watershedId="watershed",this.parcelsId="parcels",this.contoursEnabled=!1,this.wetAreasEnabled=!1,this.floodZonesEnabled=!1,this.parcelsEnabled=!1,this.isFirstTime=!0,this.layersList=[{id:this.contoursId,label:"Contours",enabled:!1},{id:this.floodZonesId,label:"Flood Zones",enabled:!1},{id:this.hydroId,label:"Hydrology",enabled:!0},{id:this.watershedId,label:"Watersheds",enabled:!0},{id:this.wetAreasId,label:"Wet Areas",enabled:!1},{id:this.parcelsId,label:"Parcels",enabled:!1}],this.wetAreasLegendList=[],this.wetAreasUrl="https://www.fws.gov/wetlands/arcgis/rest/services/Wetlands/MapServer",this.initializeAllLayers=function(){a.contoursLayer=Object(i.a)("mapImage",a.contoursId,null,"https://carto.nationalmap.gov/arcgis/rest/services/contours/MapServer"),a.floodZonesLayer=Object(i.a)("feature",a.floodZonesId,72e3,"https://services.arcgis.com/P3ePLMYs2RVChkJx/ArcGIS/rest/services/USA_Flood_Hazard_Reduced_Set_gdb/FeatureServer/0"),a.hydroLayer=Object(i.a)("mapImage",a.hydroId,null,"https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer"),a.watershedLayer=Object(i.a)("mapImage",a.watershedId,null,"https://hydro.nationalmap.gov/arcgis/rest/services/wbd/MapServer"),a.wetAreasLayer=Object(i.a)("mapImage",a.wetAreasId,null,a.wetAreasUrl),a.parcelsLayer=Object(i.a)("vector",a.parcelsId,72e3,"https://tiles.arcgis.com/tiles/jIL9msH9OI208GCb/arcgis/rest/services/VectorTiles_parcels/VectorTileServer"),a.mapView.map.addMany([a.contoursLayer,a.floodZonesLayer,a.hydroLayer,a.watershedLayer,a.wetAreasLayer,a.parcelsLayer]),a.http.get(a.wetAreasUrl+"/Legend?f=pjson").subscribe((function(e){a.wetAreasLegendList=e.layers[0].legend})),a.mapviewService.scaleChanged.subscribe((function(e){a.layersList.find((function(e){return e.id===a.contoursId})).enabled=e<=3e6,a.layersList.find((function(e){return e.id===a.wetAreasId})).enabled=e<=25e4,e<=72e3?(a.layersList.find((function(e){return e.id===a.floodZonesId})).enabled=!0,a.layersList.find((function(e){return e.id===a.parcelsId})).enabled=!0):(a.layersList.find((function(e){return e.id===a.floodZonesId})).enabled=!1,a.layersList.find((function(e){return e.id===a.parcelsId})).enabled=!1)}))},this.subscriptions$=this.widgetToggleService.widgetViewChanged.subscribe((function(e){"layers"!==e.name&&a.isOpen&&a.toggle()}))}return Zt(e,[{key:"ngOnDestroy",value:function(){this.subscriptions$.unsubscribe()}},{key:"ngOnInit",value:function(){}},{key:"toggle",value:function(){this.widgetToggleService.changeWidgetView("layers",this.isOpen),this.isOpen=!this.isOpen,this.isOpen&&this.isFirstTime&&(this.isFirstTime=!1,this.initializeAllLayers())}},{key:"updateVisibility",value:function(e){switch(e){case this.contoursId:this.contoursLayer.visible=!this.contoursLayer.visible;break;case this.floodZonesId:this.floodZonesLayer.visible=!this.floodZonesLayer.visible;break;case this.hydroId:this.hydroLayer.visible=!this.hydroLayer.visible;break;case this.watershedId:this.watershedLayer.visible=!this.watershedLayer.visible;break;case this.wetAreasId:this.wetAreasLayer.visible=!this.wetAreasLayer.visible;break;case this.parcelsId:this.parcelsLayer.visible=!this.parcelsLayer.visible}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.fc(a.a),r.fc(o.a),r.fc(s.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["app-overlay-layers-widget"]],viewQuery:function(e,t){var n;(1&e&&r.Xc(l,1),2&e)&&(r.Ic(n=r.sc())&&(t.checkboxes=n))},inputs:{mapView:"mapView",colorPrefix:"colorPrefix"},decls:4,vars:5,consts:[["title","Layers",1,"layersToggleBtn",3,"ngClass","click"],["src","assets/icons/layers.png","aria-label","basemap gallery"],["class","layersBody layers-open",3,"hidden",4,"ngIf"],["class","layersBody layers-open",3,"hidden","ngClass",4,"ngIf"],[1,"layersBody","layers-open",3,"hidden"],[1,"widgetTitle"],[1,"widgetTitleText"],[3,"header","itemName","fillColor"],[1,"widgetCloseBtn","ui-icon","dt-icon-close",3,"click"],["class","layersContent overflow-y-auto",4,"ngIf"],[1,"layersContent","overflow-y-auto"],[1,"layersBody","layers-open",3,"hidden","ngClass"],[4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"inline-flex","cursor-pointer",3,"ngClass","ngStyle"],["type","checkbox",1,"m-auto","form-checkbox","h-5","w-5","cursor-pointer",3,"id","ngClass","disabled","change"],["checkboxes",""],[1,"checkbox-label"],["class","legendTable",4,"ngIf"],[1,"legendTable"],[4,"ngFor","ngForOf"],[3,"src","alt"],["width","35"],[2,"width","30px","height","30px"],["overflow","hidden","width","30","height","30",2,"touch-action","none"],["fill","rgb(142, 52, 148)","fill-opacity","0.63","stroke","none","stroke-opacity","0","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","path","M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z","d","M-10-10L 10 0L 10 10L-10 10L-10-10Z","fill-rule","evenodd","transform","matrix(1.00000000,0.00000000,0.00000000,1.00000000,15.00000000,15.00000000)"],["fill","rgb(157, 125, 192)","fill-opacity","0.63","stroke","none","stroke-opacity","0","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","path","M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z","d","M-10-10L 10 0L 10 10L-10 10L-10-10Z","fill-rule","evenodd","transform","matrix(1.00000000,0.00000000,0.00000000,1.00000000,15.00000000,15.00000000)"],["fill","rgb(118, 156, 205)","fill-opacity","0.63","stroke","none","stroke-opacity","0","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","path","M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z","d","M-10-10L 10 0L 10 10L-10 10L-10-10Z","fill-rule","evenodd","transform","matrix(1.00000000,0.00000000,0.00000000,1.00000000,15.00000000,15.00000000)"],["fill","rgb(129, 192, 201)","fill-opacity","0.63","stroke","none","stroke-opacity","0","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","path","M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z","d","M-10-10L 10 0L 10 10L-10 10L-10-10Z","fill-rule","evenodd","transform","matrix(1.00000000,0.00000000,0.00000000,1.00000000,15.00000000,15.00000000)"],["fill","rgb(245, 200, 179)","fill-opacity","0.63","stroke","none","stroke-opacity","0","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","path","M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z","d","M-10-10L 10 0L 10 10L-10 10L-10-10Z","fill-rule","evenodd","transform","matrix(1.00000000,0.00000000,0.00000000,1.00000000,15.00000000,15.00000000)"],["fill","rgb(229, 208, 153)","fill-opacity","0.63","stroke","none","stroke-opacity","0","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","path","M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z","d","M-10-10L 10 0L 10 10L-10 10L-10-10Z","fill-rule","evenodd","transform","matrix(1.00000000,0.00000000,0.00000000,1.00000000,15.00000000,15.00000000)"]],template:function(e,t){1&e&&(r.kc(0,"button",0),r.rc("click",(function(){return t.toggle()})),r.gc(1,"img",1),r.jc(),r.Sc(2,f,7,5,"div",2),r.Sc(3,_,8,9,"div",3)),2&e&&(r.Bc("ngClass",r.Ec(3,x,t.isOpen)),r.Tb(2),r.Bc("ngIf",t.isFirstTime),r.Tb(1),r.Bc("ngIf",!t.isFirstTime))},directives:[u.k,u.m,c.a,u.l,u.n],styles:[".layersToggleBtn[_ngcontent-%COMP%]{position:absolute;top:calc(1.5em + var(--map-button-height));right:1em;height:var(--map-button-height);width:var(--map-button-width)}.layersToggleBtn.selectedBtn[_ngcontent-%COMP%]{box-sizing:border-box;border:2px solid #0ff}.layersBody[_ngcontent-%COMP%]{position:absolute;top:calc(4em + 3em);right:1em;max-height:27.5em;width:18em;background:#fff;display:flex;flex-direction:column;box-shadow:0 0 10px rgba(0,0,0,.611764705882353);z-index:1}.layersContent[_ngcontent-%COMP%]{padding:.5em}.legendTable[_ngcontent-%COMP%]{margin-left:1em}.layersContentLarge[_ngcontent-%COMP%]{width:22em!important}"]}),e}()},m4bB:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t,n){Wt(this,e),this._observers=t,this._observer=n}return Zt(e,[{key:"remove",value:function(){this._observers.delete(this._observer)}}]),e}()},m501:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).altText=null,r.caption="",r.title="",r.type=null,r}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);Object(r.a)([Object(i.b)({type:String,json:{write:!0}})],o.prototype,"altText",void 0),Object(r.a)([Object(i.b)({type:String,json:{write:!0}})],o.prototype,"caption",void 0),Object(r.a)([Object(i.b)({type:String,json:{write:!0}})],o.prototype,"title",void 0),Object(r.a)([Object(i.b)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],o.prototype,"type",void 0),o=Object(r.a)([Object(a.a)("esri.popup.content.mixins.MediaInfo")],o),t.a=o},mKlZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function(){function e(){Wt(this,e),this.widgetViewChanged=new r.t}return Zt(e,[{key:"changeWidgetView",value:function(e,t){this.widgetViewChanged.next({name:e,visible:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},mXvl:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG");n("4EHJ"),n("ju1D"),n("9AIY");var o=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).blendMode="normal",e.effect=null,e}return n}(e);return Object(r.a)([Object(i.b)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),Object(r.a)([Object(i.b)()],t.prototype,"effect",void 0),t=Object(r.a)([Object(a.a)("esri.layers.mixins.BlendLayer")],t)}))},mbIT:function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},mfMX:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("H9eC"),c=n("YXST"),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).description=null,r.label=null,r.symbol=null,r.value=null,r}return Zt(n,[{key:"clone",value:function(){return new r({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return"".concat(this.value,".").concat(e)}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"description",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"label",void 0),Object(i.a)([Object(a.b)({types:u.k,json:{origins:{"web-scene":{types:u.l,write:c.b}},write:c.b}})],l.prototype,"symbol",void 0),Object(i.a)([Object(a.b)({type:[String,Number],json:{type:String,write:{writer:function(e,t){t.value=null==e?void 0:e.toString()}}}})],l.prototype,"value",void 0),l=r=Object(i.a)([Object(o.a)("esri.renderers.support.UniqueValueInfo")],l),t.a=l},mmTy:function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n;++r)t[2*r]=e[r],t[2*r+1]=e[r]-t[2*r]}function i(e,t,n,i){for(var s=0;s<i;++s)a[0]=e[s],r(a,o,1),t[s]=o[0],n[s]=o[1]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=new Float64Array(1),o=new Float32Array(2)},mmha:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return d}));var r=n("OIYi"),i=n("aQrP"),a=n("Q3fD"),o=n("0nJL"),s=n("0Ect"),u=n("69UF"),c=n("xtdb"),l=n("5qpZ"),h=n("wtEh"),f=n("Z1Ae"),p=n("xRv2");function d(e){var t=new i.a;t.extensions.add("GL_OES_standard_derivatives"),t.include(p.a),t.include(l.a,e),t.include(f.a,e),1===e.output&&t.include(h.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2"),t.attributes.add("position","vec3"),t.attributes.add("subdivisionFactor","float"),t.attributes.add("uv0","vec2"),t.attributes.add("auxpos1","vec3"),t.attributes.add("auxpos2","vec3"),t.varyings.add("vColor","vec4"),t.varyings.add("vpos","vec3"),t.varyings.add("linearDepth","float"),e.multipassTerrainEnabled&&t.varyings.add("depth","float");var n=e.falloffEnabled,d=e.innerColorEnabled;return d&&t.varyings.add("vLineDistance","float"),n&&t.varyings.add("vLineDistanceNorm","float"),e.falloffEnabled&&t.fragment.uniforms.add("falloff","float"),e.innerColorEnabled&&(t.fragment.uniforms.add("innerColor","vec4"),t.fragment.uniforms.add("innerWidth","float")),t.vertex.code.add(r.a(Ae||(Ae=Rt(["\n\t\t#define PERPENDICULAR(v) vec2(v.y, -v.x);\n\t\t#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\n\n\t\tfloat interp(float ncp, vec4 a, vec4 b) {\n\t\t\treturn (-ncp - a.z) / (b.z - a.z);\n\t\t}\n\n\t\tvec2 rotate(vec2 v, float a) {\n\t\t\tfloat s = sin(a);\n\t\t\tfloat c = cos(a);\n\t\t\tmat2 m = mat2(c, -s, s, c);\n\t\t\treturn m * v;\n\t\t}\n"])))),t.vertex.code.add(r.a(Ce||(Ce=Rt(["\n    vec4 projectAndScale(vec4 pos) {\n      vec4 posNdc = proj * pos;\n\n      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system\n      // that is twice scaled (going from -size:size).\n      posNdc.xy *= screenSize / posNdc.w;\n      return posNdc;\n    }\n"])))),t.vertex.code.add(r.a(Ee||(Ee=Rt(["\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --\x3e we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ","\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n"])),e.multipassTerrainEnabled?"depth = pos.z;":"")),t.vertex.code.add(r.a(Pe||(Pe=Rt(["\n  void main(void) {\n    float coverage = 1.0;\n    vpos = position;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n      bool isJoin = abs(uv0.y)-3.0 < 0.0;\n\n      float lineWidth = getSize() * pixelRatio;\n\n      // convert sub-pixel coverage to alpha\n      if (lineWidth < 1.0) {\n        coverage = lineWidth;\n        lineWidth = 1.0;\n      }else{\n        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if\n        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly\n        // so we only really care to round anything larger than 1.\n        lineWidth = floor(lineWidth + 0.5);\n      }\n\n      vec4 pos  = view * vec4(position.xyz, 1.0);\n      vec4 prev = view * vec4(auxpos1.xyz, 1.0);\n      vec4 next = view * vec4(auxpos2.xyz, 1.0);\n\n      clipAndTransform(pos, prev, next, isStartVertex);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n  "])))),e.stippleEnabled&&t.vertex.code.add(r.a(Re||(Re=Rt(["\n      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment\n      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment\n      // vector\n      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\n      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\n\n      // Scale s.t. it's in units of stipple pattern size.\n      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;\n    "])))),t.vertex.code.add(r.a(De||(De=Rt(['\n    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\n\n    vec2 capDisplacementDir = vec2(0, 0);\n    vec2 joinDisplacementDir = vec2(0, 0);\n    float displacementLen = lineWidth;\n\n    if (isJoin) {\n\n      // JOIN handling ---------------------------------------------------\n      // determine if vertex is on the "outside or "inside" of the join\n      bool isOutside = ISOUTSIDE;\n\n      // compute miter join position first\n      joinDisplacementDir = normalize(left + right);\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      // compute miter stretch\n      if (leftLen > 0.001 && rightLen > 0.001) {\n        float nDotSeg = dot(joinDisplacementDir, left);\n        displacementLen /= length(nDotSeg * left - joinDisplacementDir);\n\n        // limit displacement of inner vertices\n        if (!isOutside) {\n          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n\n      if (isOutside && (displacementLen > miterLimit * lineWidth)) {\n    '])))),t.vertex.code.add(e.roundJoins?r.a(Le||(Le=Rt(["\n        vec2 startDir;\n        vec2 endDir;\n\n        if (leftLen < 0.001) {\n          startDir = right;\n        }\n        else{\n          startDir = left;\n        }\n        startDir = normalize(startDir);\n        startDir = PERPENDICULAR(startDir);\n\n        if (rightLen < 0.001) {\n          endDir = left;\n        }\n        else{\n          endDir = right;\n        }\n        endDir = normalize(endDir);\n        endDir = PERPENDICULAR(endDir);\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);\n      "]))):r.a(Ne||(Ne=Rt(["\n        // convert to bevel join if miterLimit is exceeded\n        if (leftLen < 0.001) {\n          joinDisplacementDir = right;\n        }\n        else if (rightLen < 0.001) {\n          joinDisplacementDir = left;\n        }\n        else {\n          joinDisplacementDir = isStartVertex ? right : left;\n        }\n        joinDisplacementDir = normalize(joinDisplacementDir);\n        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n  "])))),t.vertex.code.add(r.a(Fe||(Fe=Rt(["\n        displacementLen = lineWidth;\n      }\n    } else {\n    // CAP handling ---------------------------------------------------\n    if (leftLen < 0.001) {\n      joinDisplacementDir = right;\n    }\n    else if (rightLen < 0.001) {\n      joinDisplacementDir = left;\n    }\n    else {\n      joinDisplacementDir = isStartVertex ? right : left;\n    }\n    joinDisplacementDir = normalize(joinDisplacementDir);\n    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n    displacementLen = lineWidth;\n\n    capDisplacementDir = isStartVertex ? -right : left;\n  "])))),t.vertex.code.add(e.roundCaps?r.a(ze||(ze=Rt(["\n    float angle = subdivisionFactor*PI*0.5;\n    joinDisplacementDir *= cos(angle);\n    capDisplacementDir *= sin(angle);\n    "]))):r.a(Ve||(Ve=Rt(["\n    capDisplacementDir *= subdivisionFactor;\n    "])))),t.vertex.code.add(r.a(Ge||(Ge=Rt(["\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ","\n\n  ","\n  ","\n\n  pos.xy += dpos;\n  "])),n||d?r.a(Ue||(Ue=Rt(["float lineDist = lineWidth * sign(uv0.y) * pos.w;"]))):"",d?r.a(Be||(Be=Rt(["vLineDistance = lineDist;"]))):"",n?r.a(qe||(qe=Rt(["vLineDistanceNorm = lineDist / lineWidth;"]))):"")),e.stippleEnabled&&(t.vertex.code.add(r.a(He||(He=Rt(["\n    {\n      // Compute the stipple pattern UV coordinate from the actual position, based on the origin\n      // and direction of the line segment on which the stipple pattern is based.\n\n      // Project the vector from the origin of the segment to the vertex onto the line segment.\n      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)\n      vec2 posVec = pos.xy - stippleSegmentOrigin;\n\n      float stippleSegmentDirectionLength = length(stippleSegmentDirection);\n    "])))),e.stippleIntegerRepeatsEnabled&&t.vertex.code.add(r.a(We||(We=Rt(["\n      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\n      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\n      stipplePatternUvMax = roundedNumberOfPatternRepeats;\n      "])))),t.vertex.code.add(r.a(Je||(Je=Rt(["\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ","\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    "])),e.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale = 1.0;"))),t.vertex.code.add(r.a(Ze||(Ze=Rt(["\n      // Convert back into NDC\n      pos.xy = pos.xy / screenSize * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      gl_Position = pos;\n    }\n  }\n  "])))),e.multipassTerrainEnabled&&(t.fragment.include(s.a),t.include(c.b,e)),t.include(o.a,e),t.fragment.uniforms.add("intrinsicColor","vec4"),t.fragment.include(a.a),t.fragment.code.add(r.a(Ke||(Ke=Rt(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"")),e.innerColorEnabled&&(t.fragment.uniforms.add("pixelRatio","float"),t.fragment.code.add(r.a(Ye||(Ye=Rt(["\n    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\n    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\n    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\n    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);\n    "]))))),t.fragment.code.add(r.a(Xe||(Xe=Rt(["\n    vec4 finalColor = blendStipple(color, stippleAlpha);\n  "])))),e.falloffEnabled&&t.fragment.code.add(r.a(Qe||(Qe=Rt(["\n    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);\n    "])))),t.fragment.code.add(r.a($e||($e=Rt(["\n    if (finalColor.a < ",") {\n      discard;\n    }\n\n    ","\n    ","\n    ","\n    ","\n    ","\n  }\n  "])),r.a.float(u.c),7===e.output?r.a(et||(et=Rt(["gl_FragColor = vec4(finalColor.a);"]))):"",0===e.output?r.a(tt||(tt=Rt(["gl_FragColor = highlightSlice(finalColor, vpos);"]))):"",0===e.output&&e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"",4===e.output?r.a(nt||(nt=Rt(["gl_FragColor = vec4(1.0);"]))):"",1===e.output?r.a(rt||(rt=Rt(["outputDepth(linearDepth);"]))):"")),t}var v=Object.freeze({__proto__:null,build:d})},moES:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=n("qRWG"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).label=null,r.size=null,r.value=null,r}return Zt(n,[{key:"clone",value:function(){return new r({label:this.label,size:this.size,value:this.value})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"label",void 0),Object(i.a)([Object(a.b)({type:Number,cast:u.k,json:{write:!0}})],c.prototype,"size",void 0),Object(i.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"value",void 0),c=r=Object(i.a)([Object(o.a)("esri.renderers.visualVariables.support.SizeStop")],c),t.a=c},n3uD:function(e,t,n){"use strict";var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},n4uK:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n("X2wA"),i=Object(r.b)((function(e){var t;void 0!==(t=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(e.exports=t)})),a=Object(r.b)((function(e){var t;void 0!==(t=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(e.exports=t)})),o=Object(r.b)((function(e){var t;void 0!==(t=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(e.exports=t)}))},n5EF:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("RI0u"),c=n("04ZG"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=n("iALD"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).fieldName=null,r.format=null,r.isEditable=!1,r.label=null,r.stringFieldOption="text-box",r.statisticType=null,r.tooltip=null,r.visible=!0,r}return Zt(n,[{key:"clone",value:function(){return new r({fieldName:this.fieldName,format:this.format?Object(a.a)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}}]),n}(l.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"fieldName",void 0),Object(i.a)([Object(o.b)({type:h.a,json:{write:!0}})],f.prototype,"format",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0,default:!1}})],f.prototype,"isEditable",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(i.a)([Object(u.a)(new s.a({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],f.prototype,"stringFieldOption",void 0),Object(i.a)([Object(o.b)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],f.prototype,"statisticType",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"tooltip",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],f.prototype,"visible",void 0),f=r=Object(i.a)([Object(c.a)("esri.popup.FieldInfo")],f),t.a=f},n6Nx:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("04ZG"),c=n("Cduq"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=n("WZb1"),f=(n("4GrV"),n("Ykwf")),p=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).dynamicDataSource=void 0,r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.start=void 0,r.num=void 0,r.returnGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.where=null,r}return Zt(n,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"clone",value:function(){return new r(Object(a.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),n}(l.a);Object(i.a)([Object(s.b)({type:f.a,json:{write:!0}})],p.prototype,"dynamicDataSource",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"gdbVersion",void 0),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],p.prototype,"geometryPrecision",void 0),Object(i.a)([Object(s.b)({type:Date})],p.prototype,"historicMoment",void 0),Object(i.a)([Object(c.a)("historicMoment")],p.prototype,"_writeHistoricMoment",null),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],p.prototype,"maxAllowableOffset",void 0),Object(i.a)([Object(s.b)({type:[Number],json:{write:!0}})],p.prototype,"objectIds",void 0),Object(i.a)([Object(s.b)({type:[String],json:{write:!0}})],p.prototype,"orderByFields",void 0),Object(i.a)([Object(s.b)({type:[String],json:{write:!0}})],p.prototype,"outFields",void 0),Object(i.a)([Object(s.b)({type:h.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],p.prototype,"outSpatialReference",void 0),Object(i.a)([Object(s.b)({json:{write:!0}})],p.prototype,"relationshipId",void 0),Object(i.a)([Object(s.b)({type:Number,json:{read:{source:"resultOffset"}}})],p.prototype,"start",void 0),Object(i.a)([Object(c.a)("start"),Object(c.a)("num")],p.prototype,"writeStart",null),Object(i.a)([Object(s.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],p.prototype,"num",void 0),Object(i.a)([Object(s.b)({json:{write:!0}})],p.prototype,"returnGeometry",void 0),Object(i.a)([Object(s.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],p.prototype,"returnM",void 0),Object(i.a)([Object(s.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],p.prototype,"returnZ",void 0),Object(i.a)([Object(s.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p.prototype,"where",void 0),(p=r=Object(i.a)([Object(u.a)("esri.tasks.support.RelationshipQuery")],p)).from=Object(o.m)(p),t.a=p},n6tj:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("RI0u"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),l=n("qVey"),h=n("xSgX"),f=n("OL/Y"),p=n("Mzq3"),d=c.a.ofType({base:null,key:"type",typeMap:{text:l.a}}),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).verticalOffset=null,r.callout=null,r.styleOrigin=null,r.symbolLayers=new d,r.type="label-3d",r}return Zt(n,[{key:"supportsCallout",value:function(){return!0}},{key:"hasVisibleCallout",value:function(){return Object(f.b)(this)}},{key:"hasVisibleVerticalOffset",value:function(){return Object(f.c)(this)}},{key:"clone",value:function(){return new r({styleOrigin:Object(a.a)(this.styleOrigin),symbolLayers:Object(a.a)(this.symbolLayers),thumbnail:Object(a.a)(this.thumbnail),callout:Object(a.a)(this.callout),verticalOffset:Object(a.a)(this.verticalOffset)})}}],[{key:"fromTextSymbol",value:function(e){return new r({symbolLayers:[l.a.fromTextSymbol(e)]})}}]),n}(h.a);Object(i.a)([Object(o.b)({type:p.a,json:{write:!0}})],v.prototype,"verticalOffset",void 0),Object(i.a)([Object(o.b)(f.a)],v.prototype,"callout",void 0),Object(i.a)([Object(o.b)({json:{read:!1,write:!1}})],v.prototype,"styleOrigin",void 0),Object(i.a)([Object(o.b)({type:d})],v.prototype,"symbolLayers",void 0),Object(i.a)([Object(s.a)({LabelSymbol3D:"label-3d"},{readOnly:!0})],v.prototype,"type",void 0),v=r=Object(i.a)([Object(u.a)("esri.symbols.LabelSymbol3D")],v),t.a=v},n9Od:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("gmIG")),c=n("Gl+1"),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).colorRamps=null,r.type="multipart",r}return Zt(n,[{key:"clone",value:function(){return new r({colorRamps:Object(a.a)(this.colorRamps)})}}]),n}(u.a);Object(i.a)([Object(o.b)({type:[c.a],json:{write:!0}})],l.prototype,"colorRamps",void 0),Object(i.a)([Object(o.b)({type:["multipart"]})],l.prototype,"type",void 0),l=r=Object(i.a)([Object(s.a)("esri.tasks.support.MultipartColorRamp")],l),t.a=l},nP63:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){e.allLayers.on("change",(function(t){if(t.added.length>0){var n=e.findLayerById("userGraphicsLayer"),r=e.findLayerById("userTextGraphicsLayer"),i=e.findLayerById("geomlabels"),a=e.findLayerById("generalGraphicsLayer");null!==n&&e.reorder(n,e.layers.length-1),null!==r&&e.reorder(r,e.layers.length-1),null!==i&&e.reorder(i,e.layers.length-1),null!==a&&e.reorder(a,e.layers.length-1)}}))}},nR38:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r=n("f/qv");function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function e(t,n,i){return n?Object.keys(n).reduce((function(t,a){var o=t[a],s=n[a];return o===s?t:void 0===o?(t[a]=Object(r.a)(s),t):(Array.isArray(s)||Array.isArray(t)?(o=t[a]=o?Array.isArray(o)?o.concat():[o]:[],s&&(Array.isArray(s)||(s=[s]),i?s.forEach((function(e){-1===o.indexOf(e)&&o.push(e)})):t[a]=s.concat())):s&&"object"==typeof s?t[a]=e(o,s,i):t.hasOwnProperty(a)&&!n.hasOwnProperty(a)||(t[a]=s),t)}),t||{}):t}(e,t,n)}function a(e,t){if(null!=t)return t[e]||s(e.split("."),!1,t)}function o(e,t,n){var r=e.split("."),i=r.pop(),a=s(r,!0,n);a&&i&&(a[i]=t)}function s(e,t,n){var r,i=n,a=Vt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(null==i)return;if(!(o in i)){if(!t)return;i[o]={}}i=i[o]}}catch(s){a.e(s)}finally{a.f()}return i}},nYOO:function(e,t,n){"use strict";function r(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function i(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,n);if(Array.isArray(t)){var i,a=t.slice(),o=Vt(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.addEventListener(s,n)}}catch(u){o.e(u)}finally{o.f()}return{remove:function(){var t,r=Vt(a);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.removeEventListener(i,n)}}catch(u){r.e(u)}finally{r.f()}}}}return e.addEventListener(t,n),{remove:function(){e.removeEventListener(t,n)}}}function a(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,n);var a=i(e,t,(function(t){a.remove(),n.call(e,t)}));return{remove:function(){a.remove()}}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a}));var o={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function s(e){var t=e.key;return o[t]||t}},nZ3f:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("TDcG");function i(e,t){var n="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){var i=parseInt(n,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.getItemAt(i)}var a=Object(r.a)(t);return Object(r.b)(a,n)?a.get(n):t[n]}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"string"==typeof t&&-1===t.indexOf(".")?i(t,e):function e(t,n,r){if(null==t)return t;var a=i(n[r],t);return!a&&r<n.length-1?void 0:r===n.length-1?a:e(a,n,r+1)}(e,Object(r.f)(t),n)}function o(e,t){return a(e,t)}function s(e,t){return void 0!==a(t,e)}},ne7T:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return a})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return d})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return f}));var r=n("Piei"),i=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0};function a(e,t){if(null==t||!t.length||!i(e))return e;var n=e.pixels.length;return t&&t.some((function(e){return e>=n}))||1===n&&1===t.length&&0===t[0]?e:n!==t.length||t.some((function(e,t){return e!==t}))?new r.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map((function(t){return e.pixels[t]})),statistics:e.statistics&&t.map((function(t){return e.statistics[t]}))}):e}function o(e){if(e){var t=e.colormap;if(t&&0!==t.length){var n=t.sort((function(e,t){return e[0]-t[0]})),r=0;n[0][0]<0&&(r=n[0][0]);var i,a=Math.max(256,n[n.length-1][0]-r+1),o=new Uint8Array(4*a),s=[],u=0,c=0,l=5===n[0].length;if(a>65536)return n.forEach((function(e){s[e[0]-r]=l?e.slice(1):e.slice(1).concat([255])})),{indexed2DColormap:s,offset:r,alphaSpecified:l};if(e.fillUnspecified)for(u=(i=n[c])[0]-r;u<a;u++)o[4*u]=i[1],o[4*u+1]=i[2],o[4*u+2]=i[3],o[4*u+3]=l?i[4]:255,u===i[0]-r&&(i=c===n.length-1?i:n[++c]);else for(u=0;u<n.length;u++)o[c=4*((i=n[u])[0]-r)]=i[1],o[c+1]=i[2],o[c+2]=i[3],o[c+3]=l?i[4]:255;return{indexedColormap:o,offset:r,alphaSpecified:l}}}}function s(e,t){if(!i(e))return e;if(!t&&(t.indexedColormap||t.indexed2DColormap))return e;var n=e.clone(),r=n.pixels,a=n.mask,o=n.width*n.height;if(1!==r.length)return e;var s,u=t.indexedColormap,c=t.indexed2DColormap,l=t.offset,h=t.alphaSpecified,f=u.length-1,p=0,d=r[0],v=new Uint8Array(d.length),y=new Uint8Array(d.length),b=new Uint8Array(d.length),g=0;if(u)if(a)for(p=0;p<o;p++)a[p]&&((g=4*(d[p]-l))<l||g>f?a[p]=0:(v[p]=u[g],y[p]=u[g+1],b[p]=u[g+2],a[p]=u[g+3]));else{for(a=new Uint8Array(o),p=0;p<o;p++)(g=4*(d[p]-l))<l||g>f?a[p]=0:(v[p]=u[g],y[p]=u[g+1],b[p]=u[g+2],a[p]=u[g+3]);n.mask=a}else if(a)for(p=0;p<o;p++)a[p]&&(s=c[d[p]],v[p]=s[0],y[p]=s[1],b[p]=s[2],a[p]=s[3]);else{for(a=new Uint8Array(o),p=0;p<o;p++)s=c[d[p]],v[p]=s[0],y[p]=s[1],b[p]=s[2],a[p]=s[3];n.mask=a}return n.pixels=[v,y,b],n.statistics=null,n.pixelType="u8",n.maskIsAlpha=h,n}function u(e){if(!i(e))return null;e.statistics||e.updateStatistics();var t,n,r,a,o,s,u,c,l,h,f,p,d,v,y=e.pixels,b=e.mask,g=e.pixelType,m=e.statistics,w=e.width*e.height,O=y.length,j=[],_=[],x=256;for(a=0;a<O;a++){if(s=new Uint32Array(x),c=y[a],"u8"===g)if(t=-.5,n=255.5,b)for(o=0;o<w;o++)b[o]&&s[c[o]]++;else for(o=0;o<w;o++)s[c[o]]++;else{if(t=m[a].minValue,r=((n=m[a].maxValue)-t)/x,u=new Uint32Array(257),b)for(o=0;o<w;o++)b[o]&&u[Math.floor((c[o]-t)/r)]++;else for(o=0;o<w;o++)u[Math.floor((c[o]-t)/r)]++;for(o=0;o<255;o++)s[o]=u[o];s[255]=u[255]+u[256]}for(j.push({min:t,max:n,size:x,counts:s}),l=0,h=0,d=0,o=0;o<x;o++)l+=s[o],h+=o*s[o];for(v=h/l,o=0;o<x;o++)d+=s[o]*Math.pow(o-v,2);f=(v+.5)*(r=(n-t)/x)+t,p=Math.sqrt(d/(l-1))*r,_.push({min:t,max:n,avg:f,stddev:p})}return{statistics:_,histograms:j}}function c(e){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i=r.min,a=r.max,o=r.size,s=r.counts,u=0,c=0,l=0;l<o;l++)u+=s[l],c+=l*s[l];for(var h=c/u,f=0,p=0;p<o;p++)f+=s[p]*Math.pow(p-h,2);var d=(a-i)/o,v=(h+.5)*d+i,y=Math.sqrt(f/(u-1))*d;t.push({min:i,max:a,avg:v,stddev:y})}return t}function l(e){var t=e.minCutOff,n=e.maxCutOff,r=e.gamma,i=e.pixelType,a=e.outMin||0,o=e.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(i))return null;var s,u,c=t.length,l=0;"s8"===i?l=-127:"s16"===i&&(l=-32767);var h=256;["u16","s16"].indexOf(i)>-1&&(h=65536);var f=[],p=[],d=o-a;for(s=0;s<c;s++)p[s]=n[s]-t[s],f[s]=d/(n[s]-t[s]);var v,y=r&&r.length>=c,b=[];if(y)for(s=0;s<c;s++)b[s]=r[s]>1?r[s]>2?6.5+Math.pow(r[s]-2,2.5):6.5+100*Math.pow(2-r[s],4):1;var g,m,w,O=[];if(y)for(s=0;s<c;s++){for(w=[],u=0;u<h;u++)v=((g=u+l)-t[s])/p[s],m=1,r[s]>1&&(m-=Math.pow(1/d,v*b[s])),w[u]=g<n[s]&&g>t[s]?Math.floor(m*d*Math.pow(v,1/r[s]))+a:g>=n[s]?o:a;O[s]=w}else for(s=0;s<c;s++){for(w=[],u=0;u<h;u++)g=u+l,w[u]=g<=t[s]?a:g>=n[s]?o:Math.floor((g-t[s])/p[s]*d)+a;O[s]=w}if(null!=e.contrastOffset){var j=function(e,t){var n,r,i=Math.min(Math.max(e,-100),100),a=Math.min(Math.max(t,-100),100),o=new Uint8Array(256);for(n=0;n<256;n++)i>0&&i<100?r=(200*n-25500+510*a)/(2*(100-i))+128:i<=0&&i>-100?r=(200*n-25500+510*a)*(100+i)/2e4+128:100===i?r=(r=200*n-25500+256*(100-i)+510*a)>0?255:0:-100===i&&(r=128),o[n]=r>255?255:r<0?0:r;return o}(e.contrastOffset,e.brightnessOffset);for(s=0;s<c;s++)for(w=O[s],u=0;u<h;u++)w[u]=j[w[u]]}return{lut:O,offset:l}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;t=Math.min(t,256);for(var n=e.size,r=e.counts,i=new Uint8Array(n),a=r.reduce((function(e,n){return e+n/t}),0),o=0,s=0,u=0,c=a,l=0;l<n;l++)if(u+=r[l],!(l<n-1&&u+r[l+1]<c)){for(;o<t-1&&c<u;)o++,c+=a;for(var h=s;h<=l;h++)i[h]=o;s=l+1}for(var f=s;f<n;f++)i[f]=t-1;return i}function f(e,t){if(!i(e))return null;var n,r,a,o,s,u=e.clone(),c=u.pixels,l=u.mask,h=t.minCutOff,f=t.maxCutOff,p=t.gamma,d=t.outMin||0,v=t.outMax||255,y=u.width*u.height,b=c.length,g=v-d,m=[],w=[];for(n=0;n<b;n++)w[n]=f[n]-h[n],m[n]=g/(f[n]-h[n]);var O=p&&p.length>=b,j=[];if(O)for(n=0;n<b;n++)j[n]=p[n]>1?p[n]>2?6.5+Math.pow(p[n]-2,2.5):6.5+100*Math.pow(2-p[n],4):1;if(O)if(null!=l){for(r=0;r<y;r++)if(l[r])for(n=0;n<b;n++)s=((a=c[n][r])-h[n])/w[n],o=1,p[n]>1&&(o-=Math.pow(1/g,s*j[n])),c[n][r]=a<f[n]&&a>h[n]?Math.floor(o*g*Math.pow(s,1/p[n]))+d:a>=f[n]?v:d}else for(r=0;r<y;r++)for(n=0;n<b;n++)s=((a=c[n][r])-h[n])/w[n],o=1,p[n]>1&&(o-=Math.pow(1/g,s*j[n])),c[n][r]=a<f[n]&&a>h[n]?Math.floor(o*g*Math.pow(s,1/p[n]))+d:a>=f[n]?v:d;else if(null!=l){for(r=0;r<y;r++)if(l[r])for(n=0;n<b;n++)a=c[n][r],c[n][r]=a<f[n]&&a>h[n]?Math.floor((a-h[n])/w[n]*g)+d:a>=f[n]?v:d}else for(r=0;r<y;r++)for(n=0;n<b;n++)a=c[n][r],c[n][r]=a<f[n]&&a>h[n]?Math.floor((a-h[n])/w[n]*g)+d:a>=f[n]?v:d;return u.pixelType="u8",u.updateStatistics(),u}function p(e,t){if(!i(e))return null;var n,a,o=e.pixels,s=e.mask,u=e.width*e.height,c=o.length,l=t.lut,h=t.offset;l&&1===l[0].length&&(l=o.map((function(){return l})));var f,p,d,v=[];if(h)if(null==s)for(n=0;n<c;n++){for(f=o[n],p=l[n],d=new Uint8Array(u),a=0;a<u;a++)d[a]=p[f[a]-h];v.push(d)}else for(n=0;n<c;n++){for(f=o[n],p=l[n],d=new Uint8Array(u),a=0;a<u;a++)s[a]&&(d[a]=p[f[a]-h]);v.push(d)}else if(null==s)for(n=0;n<c;n++){for(f=o[n],p=l[n],d=new Uint8Array(u),a=0;a<u;a++)d[a]=p[f[a]];v.push(d)}else for(n=0;n<c;n++){for(f=o[n],p=l[n],d=new Uint8Array(u),a=0;a<u;a++)s[a]&&(d[a]=p[f[a]]);v.push(d)}var y=new r.a({width:e.width,height:e.height,pixels:v,mask:s,pixelType:"u8"});return y.updateStatistics(),y}function d(e,t){if(!i(e))return null;var n,r,a,o,s,u,c=e.clone(),l=c.pixels,h=c.width*c.height,f=t.length,p=Math.floor(f/2),d=t[Math.floor(p)],v=l[0],y=!1,b=new Uint8Array(h),g=new Uint8Array(h),m=new Uint8Array(h),w=c.mask,O=4===t[0].mappedColor.length;for(w||((w=new Uint8Array(h)).fill(O?255:1),c.mask=w),s=0;s<h;s++)if(w[s]){for(n=v[s],y=!1,u=p,r=d,a=0,o=f-1;o-a>1;){if(n===r.value){y=!0;break}n>r.value?a=u:o=u,u=Math.floor((a+o)/2),r=t[Math.floor(u)]}y||(n===t[a].value?(r=t[a],y=!0):n===t[o].value?(r=t[o],y=!0):n<t[a].value?(y=!1,r=null):n>t[a].value&&(n<t[o].value?(r=t[a],y=!0):o===f-1?(y=!1,r=null):(r=t[o],y=!0))),y?(b[s]=r.mappedColor[0],g[s]=r.mappedColor[1],m[s]=r.mappedColor[2],w[s]=r.mappedColor[3]):b[s]=g[s]=m[s]=w[s]=0}return c.pixels=[b,g,m],c.mask=w,c.pixelType="u8",c.maskIsAlpha=O,c}function v(e,t,n,r,i,a,o,s){return{xmin:i<=n*e?0:i<n*e+e?i-n*e:e,ymin:a<=r*t?0:a<r*t+t?a-r*t:t,xmax:i+o<=n*e?0:i+o<n*e+e?i+o-n*e:e,ymax:a+s<=r*t?0:a+s<r*t+t?a+s-r*t:t}}function y(e,t){if(!e||0===e.length)return null;var n=e.filter((function(e){return e.pixelBlock}))[0];if(!n)return null;var r=(n.extent.xmax-n.extent.xmin)/n.pixelBlock.width,i=(n.extent.ymax-n.extent.ymin)/n.pixelBlock.height,a=.01*Math.min(r,i),o=e.sort((function(e,t){return Math.abs(e.extent.ymax-t.extent.ymax)>a?t.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-t.extent.xmin)>a?e.extent.xmin-t.extent.xmin:0})),s=Math.min.apply(null,o.map((function(e){return e.extent.xmin}))),u=Math.min.apply(null,o.map((function(e){return e.extent.ymin}))),c=Math.max.apply(null,o.map((function(e){return e.extent.xmax}))),l=Math.max.apply(null,o.map((function(e){return e.extent.ymax}))),h={x:Math.round((t.xmin-s)/r),y:Math.round((l-t.ymax)/i)},f={width:Math.round((c-s)/r),height:Math.round((l-u)/i)},p={width:Math.round((t.xmax-t.xmin)/r),height:Math.round((t.ymax-t.ymin)/i)};return Math.round(f.width/n.pixelBlock.width)*Math.round(f.height/n.pixelBlock.height)!==o.length||h.x<0||h.y<0||f.width<p.width||f.height<p.height?null:{extent:t,pixelBlock:b(o.map((function(e){return e.pixelBlock})),f,h,p)}}function b(e,t,n,a){var o=e.filter((function(e){return i(e)}))[0];if(null==o)return null;var s,u,c,l,h,f,p,d,y,b,g,m,w,O=a?a.width:t.width,j=a?a.height:t.height,_=o.width,x=o.height,k=t.width/_,S=t.height/x,M=n?n.x:0,I=n?n.y:0,T=o.pixelType,A=r.a.getPixelArrayConstructor(T),C=o.pixels.length,E=[];for(f=0;f<C;f++){for(u=new A(O*j),p=0;p<S;p++)for(d=0;d<k;d++)if(c=e[p*k+d],i(c))for(s=c.pixels[f],y=(g=v(_,x,d,p,M,I,O,j)).ymin;y<g.ymax;y++)for(l=(p*x+y-I)*O+(d*_-M),h=y*_,b=g.xmin;b<g.xmax;b++)u[l+b]=s[h+b];E.push(u)}if(e.some((function(e){return null==e||e.mask&&e.mask.length>0})))for(m=new Uint8Array(O*j),p=0;p<S;p++)for(d=0;d<k;d++)if(w=(c=e[p*k+d])?c.mask:null,g=v(_,x,d,p,M,I,O,j),w)for(y=g.ymin;y<g.ymax;y++)for(l=(p*x+y-I)*O+(d*_-M),h=y*_,b=g.xmin;b<g.xmax;b++)m[l+b]=w[h+b];else if(c)for(y=g.ymin;y<g.ymax;y++)for(l=(p*x+y-I)*O+(d*_-M),h=y*_,b=g.xmin;b<g.xmax;b++)m[l+b]=1;else for(y=g.ymin;y<g.ymax;y++)for(l=(p*x+y-I)*O+(d*_-M),h=y*_,b=g.xmin;b<g.xmax;b++)m[l+b]=0;var P=new r.a({width:O,height:j,pixels:E,pixelType:T,mask:m});return P.updateStatistics(),P}function g(e,t,n){if(!i(e))return null;var r=e.width,a=e.height,o=t.x,s=t.y,u=n.width+o,c=n.height+s;if(o<0||s<0||u>r||c>a)return e;if(0===o&&0===s&&u===r&&c===a)return e;e.mask||(e.mask=new Uint8Array(r*a));for(var l=e.mask,h=0;h<a;h++)for(var f=h*r,p=0;p<r;p++)l[f+p]=h<s||h>=c||p<o||p>=u?0:1;return e.updateStatistics(),e}function m(e){if(!i(e))return null;for(var t=e.clone(),n=e.width,r=e.height,a=e.pixels,o=e.mask,s=a[0],u=t.pixels[0],c=2;c<r-1;c++){for(var l=new Map,h=c-2;h<c+2;h++)for(var f=0;f<4;f++){var p=h*n+f;j(l,s[p],o?o[p]:1)}u[c*n]=w(l),u[c*n+1]=u[c*n+2]=u[c*n];for(var d=3;d<n-1;d++){var v=(c-2)*n+d+1;j(l,s[v],o?o[v]:1),j(l,s[v=(c-1)*n+d+1],o?o[v]:1),j(l,s[v=c*n+d+1],o?o[v]:1),j(l,s[v=(c+1)*n+d+1],o?o[v]:1),O(l,s[v=(c-2)*n+d-3],o?o[v]:1),O(l,s[v=(c-1)*n+d-3],o?o[v]:1),O(l,s[v=c*n+d-3],o?o[v]:1),O(l,s[v=(c+1)*n+d-3],o?o[v]:1),u[c*n+d]=w(l)}u[c*n+d+1]=u[c*n+d]}for(var y=0;y<n;y++)u[y]=u[n+y]=u[2*n+y],u[(r-1)*n+y]=u[(r-2)*n+y];return t.updateStatistics(),t}function w(e){if(0===e.size)return 0;for(var t=0,n=-1,r=0,i=e.keys(),a=i.next();!a.done;)(r=e.get(a.value))>t&&(n=a.value,t=r),a=i.next();return n}function O(e,t,n){if(0!==n){var r=e.get(t);1===r?e.delete(t):e.set(t,r-1)}}function j(e,t,n){0!==n&&e.set(t,e.has(t)?e.get(t)+1:1)}function _(e,t,n){var a=t.x,o=t.y,s=n.width,u=n.height;if(0===a&&0===o&&u===e.height&&s===e.width)return e;var c=e.width,l=e.height,h=Math.max(0,o),f=Math.max(0,a),p=Math.min(a+s,c),d=Math.min(o+u,l);if(p<0||d<0||!i(e))return null;a=Math.max(0,-a),o=Math.max(0,-o);for(var v=e.pixels,y=e.mask,b=s*u,g=v.length,m=[],w=0;w<g;w++){for(var O=v[w],j=r.a.createEmptyBand(e.pixelType,b),_=h;_<d;_++)for(var x=_*c,k=(_+o-h)*s+a,S=f;S<p;S++)j[k++]=O[x+S];m.push(j)}for(var M=new Uint8Array(b),I=h;I<d;I++)for(var T=I*c,A=(I+o-h)*s+a,C=f;C<p;C++)M[A++]=y?y[T+C]:1;var E=new r.a({width:n.width,height:n.height,pixelType:e.pixelType,pixels:m,mask:M});return E.updateStatistics(),E}function x(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!i(e))return null;for(var n=e.pixels,a=e.width,o=e.height,s=e.mask,u=e.pixelType,c=[],l=Math.round(a/2),h=Math.round(o/2),f=o-1,p=a-1,d=0;d<n.length;d++){for(var v=n[d],y=r.a.createEmptyBand(u,l*h),b=0,g=0;g<o;g+=2)for(var m=0;m<a;m+=2){var w=v[g*a+m];if(t){var O=m===p?w:v[g*a+m+1],j=g===f?w:v[g*a+m+a];y[b++]=(w+O+j+(m===p?j:g===f?O:v[g*a+m+a+1]))/4}else y[b++]=w}c.push(y)}var _=null;if(s){_=new Uint8Array(l*h);for(var x=0,k=0;k<o;k+=2)for(var S=0;S<a;S+=2){var M=s[k*a+S];if(t){var I=S===p?M:s[k*a+S+1],T=k===f?M:s[k*a+S+a];_[x++]=M*I*T*(S===p?T:k===f?I:s[k*a+S+a+1])?1:0}else _[x++]=M}}return new r.a({width:l,height:h,pixelType:u,pixels:c,mask:_})}function k(e,t,n){if(!i(e))return null;for(var r=t.width,a=t.height,o=e.width,s=e.height,u=new Map,c={x:0,y:0},l=null==n?1:1+n,h=e,f=0;f<l;f++){for(var p=Math.ceil(o/r),d=Math.ceil(s/a),v=0;v<d;v++){c.y=v*a;for(var y=0;y<p;y++){c.x=y*r;var b=_(h,c,t);u.set("".concat(f,"/").concat(v,"/").concat(y),b)}}f<l-1&&(h=x(h)),o=Math.round(o/2),s=Math.round(s/2)}return u}function S(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nearest";if(!i(e))return null;"majority"===o&&(e=m(e));for(var s,u,c,l,h,f,p,d=e,v=d.pixels,y=d.mask,b=d.pixelType,g=e.width,w=e.height,O=r.a.getPixelArrayConstructor(b),j=v.length,_=t.width,x=t.height,k=a.cols,S=a.rows,M=Math.ceil(_/k),I=Math.ceil(x/S),T=!1,A=0;A<n.length;A+=3)-1===n[A]&&-1===n[A+1]&&-1===n[A+2]&&(T=!0);for(var C,E,P=new Float32Array(_*x),R=new Float32Array(_*x),D=0,L="majority"===o?0:.5,N=0;N<I;N++)for(var F=0;F<M;F++){u=n[s=12*(N*M+F)],c=n[s+1],l=n[s+2],h=n[s+3],f=n[s+4],p=n[s+5];for(var z=0;z<S;z++){D=(N*S+z)*_+F*k,E=(z+.5)/S;for(var V=0;V<z;V++)C=(V+.5)/k,P[D+V]=Math.round((u*C+c*E+l)*g-L),R[D+V]=Math.round((h*C+f*E+p)*w-L)}u=n[s+=6],c=n[s+1],l=n[s+2],h=n[s+3],f=n[s+4],p=n[s+5];for(var G=0;G<S;G++){D=(N*S+G)*_+F*k,E=(G+.5)/S;for(var U=G;U<k;U++)C=(U+.5)/k,P[D+U]=Math.round((u*C+c*E+l)*g-L),R[D+U]=Math.round((h*C+f*E+p)*w-L)}}for(var B,q=function(e,t){for(var n=0;n<x;n++){s=n*_;for(var r=0;r<_;r++)e[s]=P[s]<0||R[s]<0?0:t[P[s]+R[s]*g],s++}},H=[],W=0;W<j;W++)q(B=new O(_*x),v[W]),H.push(B);var J=new r.a({width:_,height:x,pixelType:b,pixels:H});if(y)J.mask=new Uint8Array(_*x),q(J.mask,y);else if(T){J.mask=new Uint8Array(_*x);for(var Z=0;Z<_*x;Z++)J.mask[Z]=P[Z]<0||R[Z]<0?0:1}return J.updateStatistics(),J}},niHo:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r,i=n("fXoL"),a=n("HDdC"),o=n("XNiG"),s=((r=function(){function e(){Wt(this,e),this.getWriter=function(e){var t=new zip.BlobWriter;return new Promise((function(n,r){try{e.getData(t,(function(e){n(e)}))}catch(i){r(i)}}))},zip.workerScriptsPath="scripts/"}return Zt(e,[{key:"getEntries",value:function(e){return new a.a((function(t){var n=new zip.BlobReader(e);zip.createReader(n,(function(e){e.getEntries((function(e){t.next(e),t.complete()}))}),(function(e){t.error({message:e})}))}))}},{key:"getData",value:function(e){var t=new o.a,n=new a.a((function(n){var r=new zip.BlobWriter;e.getData(r,(function(e){n.next(e),n.complete(),t.next(void 0)}),(function(e,n){t.next({active:!0,current:e,total:n})}))}));return{progress:t,data:n}}},{key:"createFile",value:function(e,t){return e.lastModifiedDate=new Date,e.name=t,e}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275prov=i.bc({token:r,factory:r.\u0275fac}),r),u=n("bTqV"),c=n("ofXK"),l=(n("bUUP"),n("FKr1")),h=(n("8LU1"),n("3Pt+"));n("R1ws"),n("u47x"),n("0EQZ");var f,p,d=((f=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||f)},f.\u0275mod=i.dc({type:f}),f.\u0275inj=i.cc({imports:[[l.h,l.d],l.d]}),f),v=n("FhEM"),y=((p=function e(){Wt(this,e)}).\u0275fac=function(e){return new(e||p)},p.\u0275mod=i.dc({type:p}),p.\u0275inj=i.cc({providers:[s],imports:[[c.c,u.b,d,h.f,v.a]]}),p)},nm4c:function(e,t,n){"use strict";var r=n("vn/o"),i=n("yDR0"),a=n("7tol"),o=n("frGm"),s=n("aFNf");function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,l(e)):-2}function f(e,t){var n,r;return e&&e.state?(t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==(r=e.state).window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):-2}function p(e,t){var n,r;return e?(r=new c,e.state=r,r.window=null,0!==(n=f(e,t))&&(e.state=null),n):-2}var d,v,y=!0;function b(e){if(y){var t;for(d=new r.Buf32(512),v=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,d,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,v,0,e.work,{bits:5}),y=!1}e.lencode=d,e.lenbits=9,e.distcode=v,e.distbits=5}function g(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=h,t.inflateReset2=f,t.inflateResetKeep=l,t.inflateInit=function(e){return p(e,15)},t.inflateInit2=p,t.inflate=function(e,t){var n,c,l,h,f,p,d,v,y,m,w,O,j,_,x,k,S,M,I,T,A,C,E,P,R=0,D=new r.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,l=e.output,h=e.next_in,c=e.input,v=n.hold,y=n.bits,m=p=e.avail_in,w=d=e.avail_out,C=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(2&n.wrap&&35615===v){n.check=0,D[0]=255&v,D[1]=v>>>8&255,n.check=a(n.check,D,2,0),v=0,y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=30;break}if(y-=4,A=8+(15&(v>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,e.adler=n.check=1,n.mode=512&v?10:12,v=0,y=0;break;case 2:for(;y<16;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(D[0]=255&v,D[1]=v>>>8&255,n.check=a(n.check,D,2,0)),v=0,y=0,n.mode=3;case 3:for(;y<32;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}n.head&&(n.head.time=v),512&n.flags&&(D[0]=255&v,D[1]=v>>>8&255,D[2]=v>>>16&255,D[3]=v>>>24&255,n.check=a(n.check,D,4,0)),v=0,y=0,n.mode=4;case 4:for(;y<16;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(D[0]=255&v,D[1]=v>>>8&255,n.check=a(n.check,D,2,0)),v=0,y=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(D[0]=255&v,D[1]=v>>>8&255,n.check=a(n.check,D,2,0)),v=0,y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((O=n.length)>p&&(O=p),O&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,h,O,A)),512&n.flags&&(n.check=a(n.check,c,O,h)),p-=O,h+=O,n.length-=O),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;O=0;do{A=c[h+O++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&O<p);if(512&n.flags&&(n.check=a(n.check,c,O,h)),p-=O,h+=O,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;O=0;do{A=c[h+O++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&O<p);if(512&n.flags&&(n.check=a(n.check,c,O,h)),p-=O,h+=O,A)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=0,y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;y<32;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}e.adler=n.check=u(v),v=0,y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=d,e.next_in=h,e.avail_in=p,n.hold=v,n.bits=y,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}switch(n.last=1&v,y-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6===t){v>>>=2,y-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,y-=2;break;case 14:for(v>>>=7&y,y-=7&y;y<32;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,v=0,y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(O=n.length){if(O>p&&(O=p),O>d&&(O=d),0===O)break e;r.arraySet(l,c,h,O,f),p-=O,h+=O,d-=O,f+=O,n.length-=O;break}n.mode=12;break;case 17:for(;y<14;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(n.nlen=257+(31&v),y-=5,n.ndist=1+(31&(v>>>=5)),y-=5,n.ncode=4+(15&(v>>>=5)),v>>>=4,y-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}n.lens[L[n.have++]]=7&v,v>>>=3,y-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C=s(0,n.lens,0,19,n.lencode,0,n.work,E={bits:n.lenbits}),n.lenbits=E.bits,C){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(R=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,S=65535&R,!((x=R>>>24)<=y);){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(S<16)v>>>=x,y-=x,n.lens[n.have++]=S;else{if(16===S){for(P=x+2;y<P;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(v>>>=x,y-=x,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],O=3+(3&v),v>>>=2,y-=2}else if(17===S){for(P=x+3;y<P;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}y-=x,A=0,O=3+(7&(v>>>=x)),v>>>=3,y-=3}else{for(P=x+7;y<P;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}y-=x,A=0,O=11+(127&(v>>>=x)),v>>>=7,y-=7}if(n.have+O>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;O--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,E={bits:n.lenbits}),n.lenbits=E.bits,C){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E={bits:n.distbits}),n.distbits=E.bits,C){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(p>=6&&d>=258){e.next_out=f,e.avail_out=d,e.next_in=h,e.avail_in=p,n.hold=v,n.bits=y,o(e,w),f=e.next_out,l=e.output,d=e.avail_out,h=e.next_in,c=e.input,p=e.avail_in,v=n.hold,y=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(R=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,S=65535&R,!((x=R>>>24)<=y);){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(k&&0==(240&k)){for(M=x,I=k,T=S;k=(R=n.lencode[T+((v&(1<<M+I)-1)>>M)])>>>16&255,S=65535&R,!(M+(x=R>>>24)<=y);){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}v>>>=M,y-=M,n.back+=M}if(v>>>=x,y-=x,n.back+=x,n.length=S,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for(P=n.extra;y<P;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(R=n.distcode[v&(1<<n.distbits)-1])>>>16&255,S=65535&R,!((x=R>>>24)<=y);){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(0==(240&k)){for(M=x,I=k,T=S;k=(R=n.distcode[T+((v&(1<<M+I)-1)>>M)])>>>16&255,S=65535&R,!(M+(x=R>>>24)<=y);){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}v>>>=M,y-=M,n.back+=M}if(v>>>=x,y-=x,n.back+=x,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=S,n.extra=15&k,n.mode=24;case 24:if(n.extra){for(P=n.extra;y<P;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===d)break e;if(n.offset>(O=w-d)){if((O=n.offset-O)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}j=O>n.wnext?n.wsize-(O-=n.wnext):n.wnext-O,O>n.length&&(O=n.length),_=n.window}else _=l,j=f-n.offset,O=n.length;O>d&&(O=d),d-=O,n.length-=O;do{l[f++]=_[j++]}while(--O);0===n.length&&(n.mode=21);break;case 26:if(0===d)break e;l[f++]=n.length,d--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===p)break e;p--,v|=c[h++]<<y,y+=8}if(e.total_out+=w-=d,n.total+=w,w&&(e.adler=n.check=n.flags?a(n.check,l,w,f-w):i(n.check,l,w,f-w)),w=d,(n.flags?v:u(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=0,y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===p)break e;p--,v+=c[h++]<<y,y+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=0,y=0}n.mode=29;case 29:C=1;break e;case 30:C=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=f,e.avail_out=d,e.next_in=h,e.avail_in=p,n.hold=v,n.bits=y,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&g(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(w-=e.avail_out,e.total_in+=m-=e.avail_in,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?a(n.check,l,w,e.next_out-w):i(n.check,l,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===m&&0===w||4===t)&&0===C&&(C=-5),C)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:g(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},nndT:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("OIYi"),i=n("0Ect");function a(e){e.fragment.uniforms.add("projInfo","vec4"),e.fragment.uniforms.add("zScale","vec2"),e.fragment.code.add(r.a(it||(it=Rt(["\n    vec3 reconstructPosition(vec2 fragCoord, float depth) {\n      return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n    }\n  "]))))}function o(e,t){e.extensions.add("GL_OES_standard_derivatives"),e.fragment.include(i.a),e.include(a),e.fragment.uniforms.add("glowColor","vec3"),e.fragment.uniforms.add("glowWidth","float"),e.fragment.uniforms.add("glowFalloff","float"),e.fragment.uniforms.add("innerColor","vec3"),e.fragment.uniforms.add("innerWidth","float"),e.fragment.uniforms.add("depthMap","sampler2D"),e.fragment.uniforms.add("nearFar","vec2"),e.fragment.uniforms.add("frameColor","sampler2D"),t.contrastControlEnabled&&e.fragment.uniforms.add("globalAlphaContrastBoost","float"),e.fragment.code.add(r.a(at||(at=Rt(["\n  vec4 blendPremultiplied(vec4 source, vec4 dest) {\n    float oneMinusSourceAlpha = 1.0 - source.a;\n\n    return vec4(\n      source.rgb + dest.rgb * oneMinusSourceAlpha,\n      source.a + dest.a * oneMinusSourceAlpha\n    );\n  }\n  "])))),e.fragment.code.add(r.a(ot||(ot=Rt(["\n  vec4 premultipliedColor(vec3 rgb, float alpha) {\n    return vec4(rgb * alpha, alpha);\n  }\n  "])))),e.fragment.code.add(r.a(st||(st=Rt(["\n  vec4 laserlineProfile(float dist) {\n    if (dist > glowWidth) {\n      return vec4(0.0);\n    }\n\n    float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\n    float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\n\n    return blendPremultiplied(\n      premultipliedColor(innerColor, innerAlpha),\n      premultipliedColor(glowColor, glowAlpha)\n    );\n  }\n  "])))),e.fragment.code.add(r.a(ut||(ut=Rt(["\n  bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {\n    float depth = linearDepthFromTexture(depthMap, uv, nearFar);\n\n    if (-depth == nearFar[0]) {\n      return false;\n    }\n\n    pos = reconstructPosition(gl_FragCoord.xy, depth);\n    normal = normalize(cross(dFdx(pos), dFdy(pos)));\n\n    float ddepth = fwidth(depth);\n    depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\n\n    return true;\n  }\n  "])))),e.fragment.code.add(t.contrastControlEnabled?r.a(ct||(ct=Rt(["\n    float rgbToLuminance(vec3 color) {\n      return dot(vec3(0.2126, 0.7152, 0.0722), color);\n    }\n\n    vec4 laserlineOutput(vec4 color) {\n      float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);\n      float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\n\n      return color * alpha;\n    }\n    "]))):r.a(lt||(lt=Rt(["\n    vec4 laserlineOutput(vec4 color) {\n      return color * globalAlpha;\n    }\n    "]))))}},nnpW:function(e,t,n){"use strict";var r=n("9aYe");t.string2binary=function(e){return r.string2binary(e)},t.string2Uint8Array=function(e){return r.transformTo("uint8array",e)},t.uint8Array2String=function(e){return r.transformTo("string",e)},t.string2Blob=function(e){var t=r.transformTo("arraybuffer",e);return r.arrayBuffer2Blob(t)},t.arrayBuffer2Blob=function(e){return r.arrayBuffer2Blob(e)},t.transformTo=function(e,t){return r.transformTo(e,t)},t.getTypeOf=function(e){return r.getTypeOf(e)},t.checkSupport=function(e){return r.checkSupport(e)},t.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,t.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,t.pretty=function(e){return r.pretty(e)},t.findCompression=function(e){return r.findCompression(e)},t.isRegExp=function(e){return r.isRegExp(e)}},nvBr:function(e,t,n){"use strict";var r=n("srIe"),i=n("zqDF"),a=n("6zdV"),o=n("OKTS");function s(e){return Object(o.c)(Object(i.e)(e),0,255)}function u(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}var c=function(){function e(t){Wt(this,e),this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}return Zt(e,[{key:"isBright",get:function(){return.299*this.r+.587*this.g+.114*this.b>=127}},{key:"setColor",value:function(t){if("string"==typeof t)e.fromString(t,this);else if(Array.isArray(t))e.fromArray(t,this);else{var n,r,i,a;this._set(null!=(n=t.r)?n:0,null!=(r=t.g)?r:0,null!=(i=t.b)?i:0,null!=(a=t.a)?a:1),t instanceof e||this._sanitize()}return this}},{key:"toRgb",value:function(){return[this.r,this.g,this.b]}},{key:"toRgba",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toHex",value:function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return"#".concat(e.length<2?"0"+e:e).concat(t.length<2?"0"+t:t).concat(n.length<2?"0"+n:n)}},{key:"toCss",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.r+", "+this.g+", "+this.b;return e?"rgba(".concat(t,", ").concat(this.a,")"):"rgb(".concat(t,")")}},{key:"toString",value:function(){return this.toCss(!0)}},{key:"toJSON",value:function(){return this.toArray()}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=s(this.r),n=s(this.g),r=s(this.b);return 0===e||1!==this.a?[t,n,r,s(255*this.a)]:[t,n,r]}},{key:"clone",value:function(){return new e(this.toRgba())}},{key:"hash",value:function(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}},{key:"_sanitize",value:function(){return this.r=Math.round(u(this.r,0,255)),this.g=Math.round(u(this.g,0,255)),this.b=Math.round(u(this.b,0,255)),this.a=u(this.a,0,1),this}},{key:"_set",value:function(e,t,n,r){this.r=e,this.g=t,this.b=n,this.a=r}}],[{key:"blendColors",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e;return i.r=Math.round(t.r+(n.r-t.r)*r),i.g=Math.round(t.g+(n.g-t.g)*r),i.b=Math.round(t.b+(n.b-t.b)*r),i.a=t.a+(n.a-t.a)*r,i._sanitize()}},{key:"fromRgb",value:function(t,n){var r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){var i=r[2].split(/\s*,\s*/),o=r[1];if("rgb"===o&&3===i.length||"rgba"===o&&4===i.length){var s=i[0];if("%"===s.charAt(s.length-1)){var u=i.map((function(e){return 2.56*parseFloat(e)}));return 4===i.length&&(u[3]=parseFloat(i[3])),e.fromArray(u,n)}return e.fromArray(i.map((function(e){return parseFloat(e)})),n)}if("hsl"===o&&3===i.length||"hsla"===o&&4===i.length)return e.fromArray(Object(a.d)(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),n)}return null}},{key:"fromHex",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;if(4!==t.length&&7!==t.length||"#"!==t[0])return null;var r=4===t.length?4:8,i=(1<<r)-1,a=Number("0x"+t.substr(1));return isNaN(a)?null:(["b","g","r"].forEach((function(e){var t=a&i;a>>=r,n[e]=4===r?17*t:t})),n.a=1,n)}},{key:"fromArray",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}},{key:"fromString",value:function(t,n){var r=Object(a.a)(t);return r&&e.fromArray(r,n)||e.fromRgb(t,n)||e.fromHex(t,n)}},{key:"fromJSON",value:function(t){return t&&new e([t[0],t[1],t[2],t[3]/255])}},{key:"toUnitRGB",value:function(e){return Object(r.k)(e)?[e.r/255,e.g/255,e.b/255]:null}},{key:"toUnitRGBA",value:function(e){return Object(r.k)(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}}]),e}();c.prototype.declaredClass="esri.Color",t.a=c},nvss:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("wNOj"),i=n("yyYK"),a={runImmediately:!1};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=new i.a((function(){if(o&&!u){var n=s;o.clear(),u=!0,s=Object(r.b)(o,e),u=!1,t(s,n)}})),s=null,u=!1;return u=!0,s=Object(r.b)(o,e),u=!1,n.runImmediately&&t(s,s),{remove:function(){o&&(o.destroy(),o=null,s=null)}}}function s(e,t){var n=new i.a((function(){t(a,o)})),a=null;function o(){return n?(n.clear(),a=Object(r.b)(n,e)):null}return o(),{remove:function(){n&&(n.destroy(),n=null),a=null}}}},o685:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("XACZ"),l=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).color=null,e}return Zt(n,[{key:"clone",value:function(){return new r({color:Object(a.k)(this.color)?this.color.clone():null})}}]),n}(u.a);Object(i.a)([Object(o.b)(c.a)],l.prototype,"color",void 0),l=r=Object(i.a)([Object(s.a)("esri.symbols.support.Symbol3DMaterial")],l),t.a=l},o9qb:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("SFah"),l=n("qRWG"),h=n("H9eC"),f=n("IvSi"),p=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).statisticType=null,e.onStatisticField=null,e.onStatisticValueExpression=null,e}return Zt(n,[{key:"clone",value:function(){return new r({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}}]),n}(u.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"statisticType",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"onStatisticField",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"onStatisticValueExpression",void 0);var d,v=p=r=Object(i.a)([Object(s.a)("esri.layers.support.OutStatistic")],p),y=d=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).name=null,e}return Zt(n,[{key:"clone",value:function(){return new d({name:this.name,outStatistic:this.outStatistic.clone()})}}]),n}(u.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],y.prototype,"name",void 0),Object(i.a)([Object(o.b)({type:v,json:{write:!0}})],y.prototype,"outStatistic",void 0);var b,g=y=d=Object(i.a)([Object(s.a)("esri.layers.support.AggregateField")],y),m=n("wkZP"),w=b=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="cluster",r.clusterRadius=Object(l.k)("80px"),r.clusterMinSize=Object(l.k)("12px"),r.clusterMaxSize=Object(l.k)("50px"),r.popupEnabled=!0,r.popupTemplate=null,r.symbol=null,r.labelingInfo=null,r.labelsVisible=!0,r.fields=null,r}return Zt(n,[{key:"clone",value:function(){return new b({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(a.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(a.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(a.a)(this.popupTemplate)})}}]),n}(u.a);Object(i.a)([Object(o.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],w.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:Number,cast:function(e){return"auto"===e?e:Object(l.k)(e)},json:{write:!0}})],w.prototype,"clusterRadius",void 0),Object(i.a)([Object(o.b)({type:Number,cast:l.k,json:{write:!0}})],w.prototype,"clusterMinSize",void 0),Object(i.a)([Object(o.b)({type:Number,cast:l.k,json:{write:!0}})],w.prototype,"clusterMaxSize",void 0),Object(i.a)([Object(o.b)(f.j)],w.prototype,"popupEnabled",void 0),Object(i.a)([Object(o.b)({type:c.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],w.prototype,"popupTemplate",void 0),Object(i.a)([Object(o.b)({types:h.h})],w.prototype,"symbol",void 0),Object(i.a)([Object(o.b)({type:[m.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],w.prototype,"labelingInfo",void 0),Object(i.a)([Object(o.b)(f.d)],w.prototype,"labelsVisible",void 0),Object(i.a)([Object(o.b)({type:[g],json:{write:!0}})],w.prototype,"fields",void 0),w=b=Object(i.a)([Object(s.a)("esri.layers.support.FeatureReductionCluster")],w),t.a=w},oEnM:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=n("6S2I"),o=(n("zqDF"),n("WbKI")),s=n("04ZG"),u=n("zlDU"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),l=n("SuVq"),h=n("Mu3I"),f=(n("4GrV"),n("zm0L")),p=n("LE9a"),d=n("TKwc"),v=n("qRWG"),y=n("21Ip"),b=n("DXYb"),g=n("Tcmu"),m=n("H9eC"),w=n("jWBI"),O=n("r0DZ"),j=n("N5XI"),_=n("9pTf"),x=n("zgsL"),k=n("JYnY"),S=n("eqZM"),M=n("QS+a"),I=n("HE3w"),T=n("/CmD"),A=n("yftL"),C=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).layer=null,r.enabled=!0,r.updating=!1,r.availability=1,r}return n}(T.a);Object(r.a)([Object(o.b)({constructOnly:!0})],C.prototype,"layer",void 0),Object(r.a)([Object(o.b)()],C.prototype,"enabled",void 0),Object(r.a)([Object(o.b)()],C.prototype,"updating",void 0),Object(r.a)([Object(o.b)()],C.prototype,"availability",void 0);var E=C=Object(r.a)([Object(s.a)("esri.views.interactive.snapping.SnappingLayerSource")],C),P=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).enabled=!1,r.enabledToggled=!1,r.selfEnabled=!0,r.featureEnabled=!0,r.featureSources=new p.a,r.distance=A.a.distance,r.touchSensitivityMultiplier=A.a.touchSensitivityMultiplier,r}return Zt(n,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]),n}(T.a);Object(r.a)([Object(o.b)()],P.prototype,"enabled",void 0),Object(r.a)([Object(o.b)()],P.prototype,"enabledToggled",void 0),Object(r.a)([Object(o.b)()],P.prototype,"selfEnabled",void 0),Object(r.a)([Object(o.b)()],P.prototype,"featureEnabled",void 0),Object(r.a)([Object(o.b)({type:p.a.ofType(E)})],P.prototype,"featureSources",void 0),Object(r.a)([Object(o.b)()],P.prototype,"distance",void 0),Object(r.a)([Object(o.b)()],P.prototype,"touchSensitivityMultiplier",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],P.prototype,"effectiveEnabled",null),Object(r.a)([Object(o.b)({readOnly:!0})],P.prototype,"effectiveSelfEnabled",null),Object(r.a)([Object(o.b)({readOnly:!0})],P.prototype,"effectiveFeatureEnabled",null);var R=P=Object(r.a)([Object(s.a)("esri.views.interactive.snapping.SnappingOptions")],P);function D(e){switch(e){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""}var L=n("JD/0"),N=n("JAyX"),F=n("9AiD"),z=null;function V(){return G.apply(this,arguments)}function G(){return(G=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=z,e.t0){e.next=5;break}return e.next=4,n.e(0).then(n.bind(null,"39Rk"));case 4:z=e.sent;case 5:return e.abrupt("return",z);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=n("tl5A"),B=n("nvss"),q=n("WZb1"),H=n("kJYu"),W=n("M0lq"),J=n("ZwYu"),Z=n("Cy1f"),K=n("KOts"),Y=n("kq/K"),X=function(e){Kt(a,e);var t,r=Xt(a);function a(e){var t;return Wt(this,a),(t=r.call(this,e)).sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}},t}return Zt(a,[{key:"updating",get:function(){return Object(K.a)(this.snappingSources,(function(e){return e.snappingSource.updating}))||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var e,t=this._get("snappingSources")||new Map,n=new Map;if(null!=(e=this.options)&&e.featureSources){var r,a=Vt(this.options.featureSources.items);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.layer.uid,u=t.get(s);if(u)t.delete(s),n.set(s,u);else if(o.layer.loaded){var c=this.createSourceInfo(o);Object(i.k)(c)&&n.set(s,c)}else this.updatingHandles.addPromise(o.layer.load())}}catch(f){a.e(f)}finally{a.f()}}var l,h=Vt(t);try{for(h.s();!(l=h.n()).done;){zt(l.value,2)[1].destroy()}}catch(f){h.e(f)}finally{h.f()}return n}},{key:"initialize",value:function(){var e,t=this;this.updatingHandles.add(this,"snappingSources",(function(){t.notifyChange("updating")}),1),Object(i.k)(this.view)&&this.handles.add([null==(e=this.view.refreshManager)?void 0:e.on("refresh",(function(e){"interval"===e.trigger&&t.refreshSourceOfLayer(e.layerView.layer)})),this.view.on("layerview-create",(function(e){return t.updateLayerView(e.layer,e.layerView)})),this.view.on("layerview-destroy",(function(e){return t.updateLayerView(e.layer,null)}))])}},{key:"refreshSourceOfLayer",value:function(e){var t,n=Vt(this.snappingSources);try{for(n.s();!(t=n.n()).done;){var r=zt(t.value,2)[1].snappingSource;r.layerSource.layer===e&&r.refresh()}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateLayerView",value:function(e,t){var n,r=Vt(this.snappingSources);try{for(r.s();!(n=r.n()).done;){var i=zt(n.value,2)[1];i.snappingSource.layerSource.layer===e&&(i.layerView=t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"destroy",value:function(){this._set("options",null);var e,t=Vt(this.snappingSources);try{for(t.s();!(e=t.n()).done;){zt(e.value,2)[1].destroy()}}catch(n){t.e(n)}finally{t.f()}}},{key:"fetchCandidates",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,r){var a,o,s,u,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.effectiveFeatureEnabled){e.next=2;break}return e.abrupt("return",[]);case 2:a=[],o={distance:this.computeScreeenSizeDistanceParameters(t,n),point:t,coordinateHelper:n.coordinateHelper,types:this.types,filter:null},s=Vt(this.snappingSources);try{for(l=function(){var e=zt(u.value,2)[1],t=e.snappingSource,s=e.layerView;!t.layerSource.enabled||Object(i.k)(s)&&s.suspended||a.push(t.fetchCandidates(o,r).then((function(e){return e.candidates.filter((function(e){return!f.candidateIsExcluded(t,e,n.excludeFeature)}))})))},s.s();!(u=s.n()).done;)l()}catch(p){s.e(p)}finally{s.f()}return e.next=7,Object(c.k)(a);case 7:return h=e.sent.flat(),e.abrupt("return",(Object(c.u)(r),Object(J.e)(t,h),h));case 9:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"computeScreeenSizeDistanceParameters",value:function(e,t){var n=this.options.distance*("touch"===t.pointer?this.options.touchSensitivityMultiplier:1);return Object(i.j)(this.view)?n:"2d"===this.view.type?n*this.view.resolution:this.computeScreeenSizeDistanceParameters3D(e,n,this.view,t)}},{key:"computeScreeenSizeDistanceParameters3D",value:function(e,t,n,r){var i=r.coordinateHelper,a=r.elevationInfo,o=n.state.camera.computeScreenPixelSizeAt(Object(J.a)(e,i,a,n,$))*n.renderCoordsHelper.unitInMeters/n.mapCoordsHelper.unitInMeters,s=t*o;return{x:s/this.computeScreenMagnitudeOfMapOffset(e,o,0,n,r),y:s/this.computeScreenMagnitudeOfMapOffset(e,0,o,n,r)}}},{key:"computeScreenMagnitudeOfMapOffset",value:function(e,t,n,r,i){var a=i.coordinateHelper,o=i.elevationInfo,s=a.clone(e);s[0]+=t,s[1]+=n;var u=Object(J.b)(e,a,o,r),c=Object(J.b)(s,a,o,r),l=c.x-u.x,h=c.y-u.y;return Math.sqrt(l*l+h*h)}},{key:"types",get:function(){return 3}},{key:"candidateIsExcluded",value:function(e,t,n){if(Object(i.j)(n))return!1;var r=this.getCandidateObjectId(t);if(Object(i.j)(r))return!1;var a=e.layerSource.layer;return"graphics"===a.type?n.uid===r:n.sourceLayer===a&&!(!n.attributes||!("objectIdField"in a))&&n.attributes[a.objectIdField]===r}},{key:"getCandidateObjectId",value:function(e){return e instanceof Y.a?e.objectId:null}},{key:"createSourceInfo",value:function(e){var t=this,n=this.createFeatureSnappingSourceType(e);if(Object(i.j)(n))return null;if("loading"in n)return this.updatingHandles.addPromise(n.loading.then((function(){t.destroyed||t.notifyChange("snappingSources")}))),null;var r=Object(i.k)(this.view)?this.view.allLayerViews.find((function(t){return t.layer===e.layer})):null;return new Q(n.source,r)}},{key:"createFeatureSnappingSourceType",value:function(e){switch(e.layer.type){case"feature":case"geojson":case"csv":return this.createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this.createFeatureSnappingSourceGraphicsLayer(e)}return null}},{key:"createFeatureSnappingSourceFeatureLayer",value:function(e){switch(e.layer.source.type){case"feature-layer":var t=this.getSourceModule("featureService");return Object(i.k)(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader};case"memory":case"csv":case"geojson":if("mesh"===e.layer.geometryType)return null;var n=this.getSourceModule("featureCollection");return Object(i.k)(n.module)?{source:new n.module.FeatureCollectionSnappingSource({layerSource:e})}:{loading:n.loader}}return null}},{key:"createFeatureSnappingSourceGraphicsLayer",value:function(e){var t=this.getSourceModule("graphics");return Object(i.k)(t.module)?{source:new t.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}},{key:"getSourceModule",value:function(e){var t=this.sourceModules[e];if(Object(i.j)(t.loader)){var n=this.loadSourceModule(e).then((function(e){t.module=e}));return t.loader=n,{module:t.module,loader:n}}return{module:t.module,loader:t.loader}}},{key:"loadSourceModule",value:function(e){switch(e){case"featureService":return this.updatingHandles.addPromise(Promise.all([n.e(0),n.e(116)]).then(n.bind(null,"uoBZ")));case"featureCollection":return this.updatingHandles.addPromise(Promise.all([n.e(0),n.e(115)]).then(n.bind(null,"LcrR")));case"graphics":return this.updatingHandles.addPromise(Promise.all([n.e(6),n.e(11),n.e(0),n.e(117)]).then(n.bind(null,"sjSM")))}return null}}]),a}(H.a);Object(r.a)([Object(o.b)({constructOnly:!0})],X.prototype,"spatialReference",void 0),Object(r.a)([Object(o.b)({constructOnly:!0})],X.prototype,"view",void 0),Object(r.a)([Object(o.b)()],X.prototype,"options",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],X.prototype,"updating",null),Object(r.a)([Object(o.b)({readOnly:!0})],X.prototype,"snappingSources",null),X=Object(r.a)([Object(s.a)("esri.views.interactive.snapping.FeatureSnappingEngine")],X);var Q=function(){function e(t,n){Wt(this,e),this.snappingSource=t,this.layerView=n,this.handles=new O.a;var r=this.snappingSource.layerSource.layer;"refresh"in r&&this.handles.add(r.on("refresh",(function(){return t.refresh()}))),this.handles.add([Object(j.init)(t,"updating",(function(e){return t.layerSource.updating=e}),!0),Object(j.init)(t,"availability",(function(e){return t.layerSource.availability=e}),!0)])}return Zt(e,[{key:"destroy",value:function(){this.snappingSource.destroy(),this.handles.destroy()}}]),e}(),$=Object(Z.e)(),ee=n("AvGH"),te=function(){function e(t,n){Wt(this,e),this.view=t,this.options=n,this.squaredShortLineThreshold=A.a.shortLineThreshold*A.a.shortLineThreshold}return Zt(e,[{key:"snap",value:function(e,t){return Object(i.k)(t.vertexHandle)?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}},{key:"edgeExceedsShortLineThreshold",value:function(e,t){return this.exceedsShortLineThreshold(e.left.pos,e.right.pos,t)}},{key:"exceedsShortLineThreshold",value:function(e,t,n){var r=n.elevationInfo,i=n.geometry.editGeometry.coordinateHelper;return 0===this.squaredShortLineThreshold||Object(J.f)(Object(J.b)(t,i,r,this.view),Object(J.b)(e,i,r,this.view))>this.squaredShortLineThreshold}},{key:"squaredProximityTreshold",value:function(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){var e=this.options,t=e.distance*e.touchSensitivityMultiplier;return t*t}}]),e}(),ne=n("D5Sn"),re=n("OKTS"),ie=n("5rU3"),ae=n("3zv9"),oe=n("Q+DB"),se=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=e.coordinateHelper,a=e.lineStart,o=e.lineEnd,s=e.targetPoint;return Wt(this,n),(r=t.call(this,i,s,new oe.b(i,a,o))).referenceLineHint=new ie.a(2,a,o),r}return Zt(n,[{key:"hints",get:function(){return[this.referenceLineHint,new ie.a(0,this.lineEndClosestToTarget(),this.targetPoint)]}},{key:"lineEndClosestToTarget",value:function(){var e=this.constraint.start,t=this.constraint.end;return Object(re.o)(Object(W.g)(Object(W.d)(ce,t,e),Object(W.d)(ue,this.targetPoint,e)))>0?t:e}}]),n}(ae.a),ue=Object(ee.a)(),ce=Object(ee.a)(),le=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=n.edges.length,i=[];if(r<1)return i;var a=t.coordinateHelper,o=Object(J.b)(e,a,t.elevationInfo,this.view),s=n.edges[r-1],u=s;do{this.edgeExceedsShortLineThreshold(u,t)&&this._processCandidateProposal(u.left.pos,u.right.pos,e,o,t,i),u=u.left.left}while(u&&u!==s);return i}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(i.q)(t.vertexHandle),a=r.component;if(a.edges.length<2)return n;var o=t.coordinateHelper,s=Object(J.b)(e,o,t.elevationInfo,this.view),u=r.left,c=r.right;u&&c&&this.edgeExceedsShortLineThreshold(u,t)&&this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal(u.left.pos,c.right.pos,e,s,t,n);var l=a.edges[0],h=l;do{h!==r.left&&h!==r.right&&this.edgeExceedsShortLineThreshold(h,t)&&this._processCandidateProposal(h.left.pos,h.right.pos,e,s,t,n),h=h.right.right}while(h&&h!==l);return n}},{key:"_processCandidateProposal",value:function(e,t,n,r,i,a){var o=Object(ne.g)(Object(ee.a)(),n,e,t),s=i.coordinateHelper,u=s.fromXYZ(o,s.getZ(n,0));Object(J.f)(r,Object(J.b)(u,s,i.elevationInfo,this.view))<this.squaredProximityTreshold(i.pointer)&&a.push(new se({coordinateHelper:i.coordinateHelper,lineStart:e,lineEnd:t,targetPoint:u}))}}]),n}(te),he=n("0jIh"),fe=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=e.coordinateHelper,a=e.referenceLine,o=e.lineStart,s=e.targetPoint;Wt(this,n);var u=i.clone(o);return Object(W.d)(u,Object(W.h)(u,u,a.right.pos),a.left.pos),(r=t.call(this,i,s,new oe.b(i,o,u)))._referenceLines=[{edge:a,fadeLeft:!0,fadeRight:!0}],r}return Zt(n,[{key:"hints",get:function(){return[new ie.a(0,this.constraint.start,this.targetPoint),new he.a(this.constraint.start,this.targetPoint)].concat(Bt(this._referenceLines.map((function(e){return new ie.a(1,e.edge.left.pos,e.edge.right.pos,e.fadeLeft,e.fadeRight)}))))}},{key:"addReferenceLine",value:function(e){var t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((function(n){e.right.right===n.edge&&(n.fadeLeft=!1,t.fadeRight=!1),e.left.left===n.edge&&(n.fadeRight=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}]),n}(ae.a),pe=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._tmpProjection=Object(ee.a)(),e}return Zt(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=n.edges.length,i=n.vertices.length,a=[];if(r<2)return a;var o=Object(J.b)(e,t.coordinateHelper,t.elevationInfo,this.view),s=n.vertices[i-1],u=n.vertices[0],c=n.edges[r-1],l=c;do{this.edgeExceedsShortLineThreshold(l,t)&&(this._checkEdgeForParalleLines(l,s.pos,e,o,t,a),this._checkEdgeForParalleLines(l,u.pos,e,o,t,a)),l=l.left.left}while(l&&l!==c);return a}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(i.q)(t.vertexHandle),a=r.component;if(a.edges.length<3)return n;var o=Object(J.b)(e,t.coordinateHelper,t.elevationInfo,this.view),s=r.left,u=r.right,c=a.vertices[0],l=a.vertices[a.vertices.length-1],h=a.edges[0],f=h;do{f!==s&&f!==u&&this.edgeExceedsShortLineThreshold(f,t)&&(s&&this._checkEdgeForParalleLines(f,s.left.pos,e,o,t,n),u&&this._checkEdgeForParalleLines(f,u.right.pos,e,o,t,n),r===c?this._checkEdgeForParalleLines(f,l.pos,e,o,t,n):r===l&&this._checkEdgeForParalleLines(f,c.pos,e,o,t,n)),f=f.right.right}while(f&&f!==h);return n}},{key:"_checkEdgeForParalleLines",value:function(e,t,n,r,i,a){var o=e.left.pos,s=e.right.pos;if(Object(ne.g)(this._tmpProjection,t,o,s),!(Object(W.j)(this._tmpProjection,t)<A.a.parallelLineThreshold)){Object(ne.g)(this._tmpProjection,n,o,s,t);var u=i.coordinateHelper,c=u.fromXYZ(this._tmpProjection,u.getZ(n,0));if(Object(J.f)(r,Object(J.b)(c,u,i.elevationInfo,this.view))<this.squaredProximityTreshold(i.pointer)){if(this.parallelToPreviousCandidate(e,a))return;a.push(new fe({coordinateHelper:u,referenceLine:e,lineStart:t,targetPoint:c}))}}}},{key:"parallelToPreviousCandidate",value:function(e,t){var n,r=e.left.pos,i=e.right.pos,a=Vt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(Object(ne.g)(this._tmpProjection,i,o.constraint.start,o.constraint.end,r),Object(W.j)(this._tmpProjection,i)<A.a.parallelLineThreshold)return o.addReferenceLine(e),!0}}catch(s){a.e(s)}finally{a.f()}return!1}}]),n}(te),de=n("VxUT"),ve=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=e.coordinateHelper,a=e.targetPoint,o=e.constraint,s=e.previousVertex,u=e.centerVertex;return Wt(this,n),(r=t.call(this,i,a,o)).previousVertex=s,r.centerVertex=u,r.referenceLine=new ie.a(1,s,o.start),r}return Zt(n,[{key:"hints",get:function(){return[new ie.a(0,this.constraint.start,this.targetPoint),this.referenceLine,new de.a(this.previousVertex,this.centerVertex,this.targetPoint)]}}]),n}(ae.a),ye=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._tmp=Object(ee.a)(),e}return Zt(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=n.vertices.length,i=[];if(r<2)return i;var a=Object(J.b)(e,t.coordinateHelper,t.elevationInfo,this.view),o=n.vertices[r-1];this._checkForSnappingCandidate(i,o.left,o.pos,e,o.left.left.pos,o.pos,t,e,a);var s=n.vertices[0];return this._checkForSnappingCandidate(i,s.right,s.pos,e,s.right.right.pos,s.pos,t,e,a),i}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(i.q)(t.vertexHandle),a=r.component,o=a.vertices.length;if(o<3)return n;var s=Object(J.b)(e,t.coordinateHelper,t.elevationInfo,this.view),u=r.left,c=r.right,l=a.vertices[0],h=a.vertices[o-1];if(!u)return this._checkForSnappingCandidate(n,l.right.right.right,l.right.right.pos,e,l.right.right.right.right.pos,l.right.right.pos,t,e,s),n;if(!c)return this._checkForSnappingCandidate(n,h.left.left.left,h.left.left.pos,e,h.left.left.left.left.pos,h.left.left.pos,t,e,s),n;if(u&&u.left.left){var f=u.left.left;this._checkForSnappingCandidate(n,f,u.left.pos,e,f.left.pos,u.left.pos,t,e,s)}if(c&&c.right.right){var p=c.right.right;this._checkForSnappingCandidate(n,p,c.right.pos,e,p.right.pos,c.right.pos,t,e,s)}return n}},{key:"_checkForSnappingCandidate",value:function(e,t,n,r,i,a,o,s,u){if(this.edgeExceedsShortLineThreshold(t,o)){Object(W.d)(this._tmp,t.right.pos,t.left.pos);var c=Object(ee.e)(this._tmp[1],-this._tmp[0]),l=Object(W.g)(c,Object(W.d)(this._tmp,r,n))/Object(W.p)(c),h=o.coordinateHelper,f=h.fromXYZ(Object(W.o)(Object(ee.a)(),a,c,l),h.getZ(s,0));Object(J.f)(u,Object(J.b)(f,h,o.elevationInfo,this.view))<this.squaredProximityTreshold(o.pointer)&&e.push(new ve({coordinateHelper:h,targetPoint:f,constraint:new oe.e(h,a,Object(W.o)(h.createNew(),a,c,Object(re.o)(l))),previousVertex:i,centerVertex:a}))}}}]),n}(te),be=function(e){Kt(n,e);var t=Xt(n);function n(e){var r,i=e.coordinateHelper,a=e.targetPoint,o=e.point1,s=e.point2;return Wt(this,n),(r=t.call(this,i,a,new oe.c(i,Object(W.m)(ge,o,s,.5),.5*Object(W.i)(o,s)))).p1=o,r.p2=s,r}return Zt(n,[{key:"hints",get:function(){return[new ie.a(1,this.targetPoint,this.p1),new ie.a(1,this.targetPoint,this.p2),new de.a(this.p1,this.targetPoint,this.p2)]}}]),n}(ae.a),ge=Object(ee.a)(),me=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=[],i=n.vertices.length;return"polygon"!==t.geometry.type||i<2||this._processCandidateProposal(n.vertices[0].pos,n.vertices[i-1].pos,e,t,r),r}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(i.q)(t.vertexHandle),a=r.component;return a.edges.length<2?n:"polyline"!==t.geometry.type||0!==r.index&&r.index!==a.vertices.length-1?(this._processCandidateProposal(r.left.left.pos,r.right.right.pos,e,t,n),n):n}},{key:"_processCandidateProposal",value:function(e,t,n,r,i){if(this.exceedsShortLineThreshold(e,t,r)){var a=Object(W.m)(Object(ee.a)(),e,t,.5),o=.5*Object(W.i)(e,t),s=Object(ne.f)(Object(ee.a)(),n,a,o),u=r.coordinateHelper,c=u.fromXYZ(s,u.getZ(n,0)),l=Object(J.b)(n,u,r.elevationInfo,this.view);Object(J.f)(l,Object(J.b)(c,u,r.elevationInfo,this.view))<this.squaredProximityTreshold(r.pointer)&&i.push(new be({coordinateHelper:u,targetPoint:c,point1:e,point2:t}))}}}]),n}(te),we=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e)).updating=!1,t._snappers=new p.a,t}return Zt(r,[{key:"initialize",value:function(){this._snappers.push(new pe(this.view,this.options),new le(this.view,this.options),new ye(this.view,this.options),new me(this.view,this.options))}},{key:"options",set:function(e){this._set("options",e);var t,n=Vt(this._snappers);try{for(n.s();!(t=n.n()).done;){t.value.options=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"fetchCandidates",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.effectiveSelfEnabled){e.next=2;break}return e.abrupt("return",[]);case 2:r=[],i=Vt(this._snappers.items);try{for(i.s();!(a=i.n()).done;)o=a.value,r.push.apply(r,Bt(o.snap(t,n)))}catch(s){i.e(s)}finally{i.f()}return e.abrupt("return",(Object(J.e)(t,r),r));case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),r}(T.a);Object(r.a)([Object(o.b)({readOnly:!0})],we.prototype,"updating",void 0),Object(r.a)([Object(o.b)({constructOnly:!0})],we.prototype,"view",void 0),Object(r.a)([Object(o.b)()],we.prototype,"options",null),we=Object(r.a)([Object(s.a)("esri.views.interactive.snapping.SelfSnappingEngine")],we);var Oe=n("51PB"),je=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;return Wt(this,n),(o=t.call(this,e,r,new oe.a(e,r,i.constraint,a.constraint))).first=i,o.second=a,o}return Zt(n,[{key:"hints",get:function(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[].concat(Bt(this.first.hints),Bt(this.second.hints),[new Oe.a(this.targetPoint)])}}]),n}(ae.a),_e=function(e){Kt(a,e);var t,n,r=Xt(a);function a(e){var t;return Wt(this,a),(t=r.call(this,e)).options=new R,t.engines=[],t._currentMainCandidate=null,t._currentOtherActiveCandidates=[],t.options=new R,t}return Zt(a,[{key:"initialize",value:function(){var e=this;this.handles.add([Object(B.a)((function(){var t=e.options;return{effectiveFeatureEnabled:t.effectiveFeatureEnabled,effectiveSelfEnabled:t.effectiveSelfEnabled,touchSensitivityMultiplier:t.touchSensitivityMultiplier,distance:t.distance}}),(function(){e.doneSnapping(),e.emit("changed")})),this.watch("options",(function(t){var n,r=Vt(e.engines);try{for(r.s();!(n=r.n()).done;){n.value.options=t}}catch(i){r.e(i)}finally{r.f()}}),!0),Object(j.init)(this.view,"ready",(function(t){return e.onViewReady(t)}),!0)])}},{key:"destroy",value:function(){this.destroyEngines()}},{key:"updating",get:function(){return this.engines.some((function(e){return e.updating}))}},{key:"onViewReady",value:function(e){var t,n;this.destroyEngines(),e&&(this.engines=[new we({view:this.view,options:this.options}),new X({view:this.view,spatialReference:null!=(t=null==(n=this.view)?void 0:n.spatialReference)?t:q.a.WGS84,options:this.options})])}},{key:"destroyEngines",value:function(){var e,t=Vt(this.engines);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.engines.length=0}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){var e=this.options,t=e.distance*e.touchSensitivityMultiplier;return t*t}},{key:"snap",value:(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.coordinateHelper.fromPoint(t),e.next=3,this.fetchCandidates(a,n,r);case 3:return o=e.sent,e.t0=function(){var e=s.processCandidates(a,o,n),t=e.snappedPoint,r=e.hints;return s.removeVisualization(),Object(i.k)(n.visualizer)&&s.handles.add(n.visualizer.draw(r,{coordinateHelper:n.coordinateHelper,elevationInfo:n.elevationInfo,view:s.view}),xe),t},e.abrupt("return",{get valid(){return!Object(c.n)(r)},apply:e.t0});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"update",value:function(e,t){this.removeVisualization();var n=e,r=[];if(Object(i.k)(this._currentMainCandidate)){var a=t.coordinateHelper,o=a.fromPoint(e),s=this._currentMainCandidate.constraint.closestTo(o);if(Object(J.f)(Object(J.b)(o,a,t.elevationInfo,this.view),Object(J.b)(s,a,t.elevationInfo,this.view))<this.squaredPointProximityThreshold(t.pointer)){n=a.createDehydratedPoint(s),this._currentMainCandidate.targetPoint=s,r.push.apply(r,Bt(this._currentMainCandidate.hints));var u,c=Vt(this._currentOtherActiveCandidates);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.targetPoint=s,r.push.apply(r,Bt(l.hints))}}catch(h){c.e(h)}finally{c.f()}}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}return Object(i.k)(t.visualizer)&&this.handles.add(t.visualizer.draw(r,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),xe),n}},{key:"doneSnapping",value:function(){this.removeVisualization(),this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}},{key:"removeVisualization",value:function(){this.handles.remove(xe)}},{key:"fetchCandidates",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.engines.map((function(e){return e.fetchCandidates(t,n,r)})));case 2:return e.abrupt("return",e.sent.flat());case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"processCandidates",value:function(e,t,n){if(t.length<1)return this.doneSnapping(),{snappedPoint:n.coordinateHelper.toPoint(e,new l.a),hints:[]};Object(J.e)(e,t);var r=this._currentMainCandidate;if(Object(i.k)(r)){var a=this.findOldConstraintInNewCandidates(r,t);if(a>=0){if(!(t[a]instanceof je))return this.intersectWithOtherCandidates(a,t,e,n);if(Object(W.j)(e,r.targetPoint)<this.squaredPointProximityThreshold(n.pointer))return this.updateSnappingCandidate(r,t,n)}}return this.intersectWithOtherCandidates(0,t,e,n)}},{key:"findOldConstraintInNewCandidates",value:function(e,t){return e instanceof je?this.findOldCandidateIndex(t,e.first)>=0&&this.findOldCandidateIndex(t,e.second)>=0?0:-1:this.findOldCandidateIndex(t,e)}},{key:"intersectWithOtherCandidates",value:function(e,t,n,r){for(var i=t[e],a=[],o=r.coordinateHelper,s=0;s<t.length;++s)if(s!==e){var u,c=t[s],l=Vt(i.constraint.intersect(c.constraint));try{for(l.s();!(u=l.n()).done;){var h=u.value,f=o.fromXYZ(h.intersection,i.targetPoint[2]);a.push([new je(o,f,i,c),Object(J.f)(Object(J.b)(n,r.coordinateHelper,r.elevationInfo,this.view),Object(J.b)(f,r.coordinateHelper,r.elevationInfo,this.view))])}}catch(p){l.e(p)}finally{l.f()}}return a.length>0&&(a.sort((function(e,t){return e[1]-t[1]})),a[0][1]<this.squaredPointProximityThreshold(r.pointer))?this.updateSnappingCandidate(a[0][0],t,r):this.updateSnappingCandidate(i,t,r)}},{key:"updateSnappingCandidate",value:function(e,t,n){this.doneSnapping(),this._currentMainCandidate=e;var r=this._currentMainCandidate.targetPoint,i=[];i.push.apply(i,Bt(e.hints));var a,o=Vt(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(e instanceof je){if(s.constraint.objectEqual(e.first.constraint)||s.constraint.objectEqual(e.second.constraint))continue}else if(s.constraint.objectEqual(e.constraint))continue;s.constraint.check(r)&&(s.targetPoint=r,this._currentOtherActiveCandidates.push(s),i.push.apply(i,Bt(s.hints)))}}catch(u){o.e(u)}finally{o.f()}return{snappedPoint:n.coordinateHelper.createDehydratedPoint(r),hints:i}}},{key:"squaredPointProximityThreshold",value:function(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}},{key:"findOldCandidateIndex",value:function(e,t){for(var n=-1,r=0;r<e.length;++r)if(t.constraint.objectEqual(e[r].constraint)){n=r;break}return n}},{key:"test",get:function(){return{visualizationsActive:this.handles.has(xe)}}}]),a}(f.a.EventedMixin(H.a));Object(r.a)([Object(o.b)({constructOnly:!0})],_e.prototype,"view",void 0),Object(r.a)([Object(o.b)()],_e.prototype,"options",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],_e.prototype,"updating",null),Object(r.a)([Object(o.b)()],_e.prototype,"engines",void 0),Object(r.a)([Object(o.b)()],_e.prototype,"squaredMouseProximityTreshold",null),Object(r.a)([Object(o.b)()],_e.prototype,"squaredTouchProximityThreshold",null),_e=Object(r.a)([Object(s.a)("esri.views.interactive.snapping.SnappingManager")],_e);var xe="visualization-handle",ke=n("bJda"),Se=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).cancelled=!1,r.history={undo:[],redo:[]},r.type=null,r}return Zt(n,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:Object(ke.a)(this.activeComponent)}return null}},{key:"addToHistory",value:function(e){this.history.redo=[],this.history.undo.push(e)}},{key:"resetHistory",value:function(){this.history.redo=[],this.history.undo=[]}},{key:"canUndo",value:function(){return this.history.undo.length>0}},{key:"canRedo",value:function(){return this.history.redo.length>0}},{key:"complete",value:function(){this.reset(),this.onEnd(),this.emit("complete")}},{key:"cancel",value:function(){this.cancelled=!0,this.complete()}},{key:"reset",value:function(){this.activeComponent.reset()}},{key:"refreshComponent",value:function(){var e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type||e.refresh())}},{key:"undo",set:function(e){var t=this;this._set("undo",(function(){t.canUndo()&&e()}))}},{key:"redo",set:function(e){var t=this;this._set("redo",(function(){t.canRedo()&&e()}))}}]),n}(f.a.EventedAccessor);Object(r.a)([Object(o.b)()],Se.prototype,"activeComponent",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"cancelled",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"history",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"tool",null),Object(r.a)([Object(o.b)()],Se.prototype,"type",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"canUndo",null),Object(r.a)([Object(o.b)()],Se.prototype,"canRedo",null),Object(r.a)([Object(o.b)()],Se.prototype,"onEnd",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"undo",null),Object(r.a)([Object(o.b)()],Se.prototype,"redo",null),Object(r.a)([Object(o.b)()],Se.prototype,"toggleTool",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"addToSelection",void 0),Object(r.a)([Object(o.b)()],Se.prototype,"removeFromSelection",void 0),Se=Object(r.a)([Object(s.a)("esri.widgets.Sketch.support.OperationHandle")],Se);var Me="esri.widgets.Sketch.SketchViewModel",Ie=a.a.getLogger(Me),Te={redoKey:"r",undoKey:"z",centerKey:"Alt",constraintKey:"Control",snappingKey:"Control",cancelKey:"Escape",deleteKeys:["Backspace","Delete"],complete:"c",pan:" "},Ae={defaultZ:0},Ce={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0},Ee=function(e){Kt(X,e);var t,r,a,o,s,f,m,T,A,C,E,P,z,G,B,q,H,W,J,Z,K,Y=Xt(X);function X(e){var t;return Wt(this,X),(t=Y.call(this,e))._activeFillGraphic=null,t._activeLineGraphic=null,t._centerIndicatorGraphic=null,t._centerSymbol=new g.a({style:"cross",size:6,color:[255,255,255]}),t._defaultSegmentOffset=48,t._numUpdating=0,t._handles=new O.a,t._internalGraphicsLayer=new x.a({listMode:"hide",internal:!0}),t._lineGraphic=null,t._operationHandle=null,t._vertexGraphics=[],t._viewHandles=new O.a,t._doUnnormalization=!1,t._moveOperationCloneInfos=[],t.activeFillSymbol=new b.a({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}}),t.activeLineSymbol=new d.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),t.activeVertexSymbol=new g.a({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}}),t.layer=null,t.pointSymbol=new g.a({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),t.polygonSymbol=new b.a({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),t.polylineSymbol=new y.a({color:[130,130,130,1],width:2}),t._snappingManager=null,t.updateGraphics=new p.a,t.updateOnGraphicClick=!0,t.updatePointSymbol=new g.a({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),t.updatePolygonSymbol=new b.a({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),t.updatePolylineSymbol=new y.a({color:[12,207,255],width:2}),t.vertexSymbol=new g.a({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),t._moduleLoaderAbortController=null,t._viewReadyAbortController=null,t._originalAutoOpenEnabled=null,t.defaultCreateOptions=Ae,t.defaultUpdateOptions=Ce,t.snappingOptions=new R,t}return Zt(X,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(j.watch)(this,"layer",(function(){e.cancel(),e._internalGraphicsLayer.elevationInfo=Object(i.k)(e.layer)?e.layer.elevationInfo:null})),Object(j.on)(this,"view.map.layers","change",(function(t){t.removed.indexOf(e.layer)>=0&&e.cancel()})),Object(j.on)(this,"layer.graphics","change",(function(t){if(Object(i.k)(e._operationHandle)){var n,r=Vt(t.removed);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.updateGraphics.includes(a)&&(e.updateGraphics.length>1?e._operationHandle.removeFromSelection(a):e._operationHandle.cancel())}}catch(o){r.e(o)}finally{r.f()}}})),Object(j.init)(this,"layer.elevationInfo",(function(){e.cancel(),e._internalGraphicsLayer.elevationInfo=Object(i.k)(e.layer)?e.layer.elevationInfo:null}),!0),Object(j.init)(this,"view",(function(t){Object(i.e)(e._snappingManager),t&&(e._snappingManager=new _e({view:t,options:e.snappingOptions}))}),!0)])}},{key:"destroy",value:function(){this.cancel(),this._handles=Object(i.e)(this._handles),this._viewHandles=Object(i.e)(this._viewHandles),this._removeDefaultLayer(),Object(i.e)(this._draw),Object(i.e)(this._snappingManager),this._set("view",null),this.emit("destroy")}},{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"_draw",get:function(){return"ready"===this.state||"active"===this.state?new I.a({view:this.view}):null}},{key:"updating",get:function(){return this._numUpdating>0}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return this.view&&"3d"===this.view.type&&Object(i.k)(this.activeComponent)&&"draw-3d"===this.activeComponent.type?Object(i.q)(this.activeComponent.createGraphic):this._get("createGraphic")}},{key:"defaultCreateOptions",set:function(e){this._set("defaultCreateOptions",Nt(Nt({},Ae),e))}},{key:"defaultUpdateOptions",set:function(e){this._set("defaultUpdateOptions",Nt(Nt({},Ce),e))}},{key:"snappingOptions",set:function(e){Object(i.k)(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}},{key:"state",get:function(){var e,t=!(null==(e=this.view)||!e.ready||!this.layer);return t&&this._operationHandle?"active":t?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this,n=this._get("view");if(n){var r=n.container,i=n.map;r&&(n.cursor=null),i&&i.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}this._doUnnormalization=null!=e&&"3d"===e.type&&"global"===e.viewingMode;var a="view-ready";this._handles.remove(a),e&&this._handles.add(Object(j.when)(e,"ready",(function(n){t._viewHandles.removeAll(),n&&t._viewHandles.add(t._generateViewHandles(e))}),!0),a),this._set("view",e)}},{key:"cancel",value:function(){this._moduleLoaderAbortController=Object(i.a)(this._moduleLoaderAbortController),this._viewReadyAbortController=Object(i.a)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}},{key:"complete",value:function(){this._operationHandle&&this._operationHandle.complete()}},{key:"delete",value:function(){var e=this.state,t=this.updateGraphics;if("active"===e&&t.length){var n=this.activeTool,r=this.layer,i=t.toArray();r.removeMany(i),this.cancel(),this._emitDeleteEvent({graphics:i,tool:n})}}},{key:"create",value:(K=Ut(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._waitViewReady();case 2:if("disabled"!==this.state){e.next=4;break}throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Object(c.e)();case 4:if(this.cancel(),t){e.next=6;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'tool'."));case 6:return e.next=8,this._setupCreateOperation(t,n);case 8:r=e.sent,Object(i.j)(r)||this.destroyed||(Object(U.a)(this.view,this._internalGraphicsLayer),r.on("complete",(function(){if(r===a._operationHandle){var e=a.createGraphic,n=a._operationHandle.cancelled;a._operationHandle.destroy(),a._operationHandle=null,a._set("createGraphic",null),a.view&&a.view.map&&a.view.map.remove(a._internalGraphicsLayer),r.cancelled||null==e||a.layer.add(e),a.emit("create",{graphic:e,state:n?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}})),this._operationHandle=r,this.view.ready&&Object(S.b)(this.view)&&this.view.focus());case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return K.apply(this,arguments)})},{key:"update",value:(Z=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._waitViewReady();case 2:if(r=this.layer,a=this.view,"disabled"!==this.state){e.next=5;break}throw a||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),r||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),Object(c.e)();case 5:if(this.cancel(),o=Array.isArray(t)?t:[t],null!=t&&o&&o.length){e.next=9;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'graphics'."));case 9:if(!o.some((function(e){return e.layer!==r?(u._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):Object(i.j)(e.geometry)?(u._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"===a.type&&!a.spatialReference.equals(e.geometry.spatialReference)&&(u._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0)}))){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,this._setupUpdateOperation(o,n);case 13:s=e.sent,this.destroyed||Object(i.j)(s)||Ne(s)||(Object(U.a)(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(s,n),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:s.tool,toolEventInfo:null,type:"update"}));case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return Z.apply(this,arguments)})},{key:"undo",value:function(){this.canUndo()&&this._operationHandle.undo()}},{key:"redo",value:function(){this.canRedo()&&this._operationHandle.redo()}},{key:"canUndo",value:function(){return!(!this._operationHandle||!this._operationHandle.canUndo())}},{key:"canRedo",value:function(){return!(!this._operationHandle||!this._operationHandle.canRedo())}},{key:"toggleUpdateTool",value:function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}},{key:"_getFirstHit",value:(J=Ut(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=this.view.type,e.next="2d"===e.t0?4:"3d"===e.t0?9:15;break;case 4:return e.next=6,this.view.hitTest(t);case 6:return(r=e.sent).results.length>0&&(i=r.results[0]).graphic&&(s=i.graphic,"vector-tile"!==(null==(a=s.layer)?void 0:a.type)&&"imagery"!==(null==(o=s.layer)?void 0:o.type)&&n.push(i)),e.abrupt("break",15);case 9:return u=[this.view.map.ground],this.view.map.allLayers.forEach((function(e){"integrated-mesh"===e.type&&u.push(e)})),e.next=13,this.view.hitTest(t,{exclude:u});case 13:(c=e.sent).results.length>0&&(l=c.results[0],(!c.ground.mapPoint||this.view.map.ground.opacity<1||c.ground.distance-l.distance>-Math.min(3*c.ground.distance,"global"===this.view.viewingMode?Object(_.e)(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&n.push(l));case 15:return e.abrupt("return",{screenPoint:t,results:n});case 16:case"end":return e.stop()}}),e,this)}))),function(e){return J.apply(this,arguments)})},{key:"_generateViewHandles",value:function(e){var t=this;return[e.on("immediate-click",(function(n){var r=t._operationHandle,a=t.defaultUpdateOptions,o=t.layer,s=t.state,u=t.updateGraphics,c=t.updateOnGraphicClick;"disabled"!==s&&("active"!==s||"create"!==r.type)&&c&&(t._beginAsyncOperation(),t._getFirstHit(Object(M.a)(n)).then((function(r){var i=r.results;if(i.length)for(var a=0;a<i.length;++a){var c=i[a];if(c.graphic){var l=c.graphic;if(u.indexOf(l)>-1||l.layer===o)return n.stopPropagation(),l;"2d"!==e.type||t._isComponentGraphic(l)||"active"!==s||t.cancel()}}else"active"===s&&t.cancel();return null})).then((function(e){return Object(i.k)(e)&&-1===u.indexOf(e)?t.update([e],Nt({},a)):null})).then((function(){t._endAsyncOperation()})))}),k.b.WIDGET)]}},{key:"_setupCreateOperation",value:(W=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(r=Nt(Nt({hasZ:"3d"===this.view.type},this.defaultCreateOptions),n),"2d"!==this.view.type){e.next=26;break}e.t0=t,e.next="point"===e.t0?7:"multipoint"===e.t0?9:"polygon"===e.t0||"polyline"===e.t0?13:"rectangle"===e.t0?17:"circle"===e.t0?21:24;break;case 7:return a=this._setupCreatePointOperation(t,r),e.abrupt("break",24);case 9:return e.next=11,this._setupCreateMultipointOperation(t,r);case 11:return a=e.sent,e.abrupt("break",24);case 13:return e.next=15,this._setupCreatePolyOperation(t,r);case 15:return a=e.sent,e.abrupt("break",24);case 17:return e.next=19,this._setupCreateRectangleOperation(t,r);case 19:return a=e.sent,e.abrupt("break",24);case 21:return e.next=23,this._setupCreateCircleOperation(t,r);case 23:a=e.sent;case 24:e.next=32;break;case 26:return e.next=28,this._setupCreate3DOperation(t,this.view,r);case 28:if(o=e.sent,!Object(i.j)(o)&&!Ne(o)){e.next=31;break}return e.abrupt("return",null);case 31:a=o;case 32:return e.abrupt("return",a);case 33:case"end":return e.stop()}}),e,this)}))),function(e,t){return W.apply(this,arguments)})},{key:"_setupCreate3DOperation",value:(H=Ut(regeneratorRuntime.mark((function e(t,r,a){var o,s,u,c,l,h,f,p,d,v=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multipoint"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return o={point:this.pointSymbol,multipoint:null,polyline:this.polylineSymbol,polygon:this.polygonSymbol,rectangle:this.polygonSymbol,circle:this.polygonSymbol}[t],this._removeCreateOperationGraphics(),s="rectangle"!==t,u="rectangle"!==t,this.snappingOptions.enabledToggled=!1,c=Nt(Nt({view:r,mode:"rectangle"===t||"circle"===t?"hybrid":"click"},a),{},{elevationInfo:this.layer.elevationInfo,geometryType:t,createGraphicSymbol:o,snapToScene:!Object(i.k)(this.layer.elevationInfo)||"absolute-height"===this.layer.elevationInfo.mode,snappingManager:this._snappingManager,forceUniformSize:u,centered:s}),e.next=9,this._requireModule(Promise.all([n.e(13),n.e(14),n.e(0),n.e(180)]).then(n.bind(null,"Q44q")));case 9:if(!Ne(l=e.sent)){e.next=12;break}return e.abrupt("return",l);case 12:if(!this.destroyed){e.next=14;break}return e.abrupt("return",null);case 14:return h=new l.module.DrawGraphicTool(c),this.view.tools.add(h),f=null,this.view.activeTool=h,p=[],d=new Se({activeComponent:h,tool:t,type:"update",onEnd:function(){var e;p.forEach((function(e){return e.remove()})),p.length=0,null==(e=v.view.tools)||e.remove(h),h.destroy()},undo:function(){h.canUndo&&h.undo()},redo:function(){h.canRedo&&h.redo()},canUndo:function(){return h.canUndo},canRedo:function(){return h.canRedo}}),e.abrupt("return",(p.push(this.view.on("key-down",(function(e){e.key===Te.pan?(e.stopPropagation(),e.repeat||(h.enabled=!1)):e.key===Te.complete?(e.stopPropagation(),h.completeCreateOperation()):e.key===Te.undoKey?(e.stopPropagation(),d.undo()):e.key===Te.redoKey?(e.stopPropagation(),d.redo()):e.key!==Te.snappingKey||"rectangle"===t||"circle"===t||e.repeat?e.key!==Te.constraintKey||"rectangle"!==t&&"circle"!==t||e.repeat?e.key===Te.centerKey&&(e.repeat||(h.centered=!s,e.stopPropagation())):(h.forceUniformSize=!u,e.stopPropagation()):(v.snappingOptions.enabledToggled=!0,e.stopPropagation())}),k.b.WIDGET),this.view.on("key-up",(function(e){e.key===Te.pan?h.enabled=!0:e.key===Te.snappingKey&&"rectangle"!==t&&"circle"!==t?(v.snappingOptions.enabledToggled=!1,e.stopPropagation()):e.key!==Te.constraintKey||"rectangle"!==t&&"circle"!==t?e.key===Te.centerKey&&(h.centered=s,e.stopPropagation()):(h.forceUniformSize=u,e.stopPropagation())}),k.b.WIDGET),h.on("vertex-add",(function(e){switch(f=Object(i.j)(f)?"start":"active",e.operation){case"apply":v.emit("create",{graphic:Object(i.q)(h.createGraphic),state:f,tool:v.activeTool,toolEventInfo:e,type:"create"});break;case"undo":v._emitUndoEvent({graphics:[Object(i.q)(h.createGraphic)],tool:t});break;case"redo":v._emitRedoEvent({graphics:[Object(i.q)(h.createGraphic)],tool:t})}})),h.on("cursor-update",(function(e){h.drawOperation.numCommittedVertices>0&&v.emit("create",{graphic:Object(i.q)(h.createGraphic),state:"active",tool:v.activeTool,toolEventInfo:{coordinates:e.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),h.on("vertex-remove",(function(e){switch(e.operation){case"apply":v.emit("create",{graphic:Object(i.q)(h.createGraphic),state:"active",tool:v.activeTool,toolEventInfo:e,type:"create"});break;case"undo":v._emitUndoEvent({graphics:[Object(i.q)(h.createGraphic)],tool:t});break;case"redo":v._emitRedoEvent({graphics:[Object(i.q)(h.createGraphic)],tool:t})}})),h.on("complete",(function(e){v._removeCreateOperationGraphics(),v._set("createGraphic",Object(i.q)(e.graphic)),f="complete",e.aborted?d&&d.cancel():d&&d.complete()}))),d));case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return H.apply(this,arguments)})},{key:"_setupCreatePointOperation",value:function(e,t){var n=this,r=this._draw.create(e,{elevationInfo:this.layer.elevationInfo,hasZ:t.hasZ,defaultZ:t.defaultZ,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),a=[r.on("cursor-update",(function(e){Object(i.k)(e.vertexIndex)?n._displayCrosshairCursor():n._displayDefaultCursor()})),r.on("draw-complete",(function(e){var t=n.createPointFromVertex(e.vertices[0]),r=new w.a(t,n.pointSymbol);n._set("createGraphic",r),s&&s.complete()}))],o=[this.view.on("key-down",(function(e){e.key===Te.cancelKey&&(s&&s.cancel(),e.stopPropagation())}),k.b.WIDGET)],s=this._operationHandleForCreateAction(r,[].concat(a,o),e);return s}},{key:"_setupCreateMultipointOperation",value:(q=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return r=e.sent,i=Nt(Nt({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),a=this._draw.create(t,i),o=null,s=[],u=this._operationHandleForCreateAction(a,s,t),e.abrupt("return",(s.push(a.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,s=a[i];o=e,c._drawMultipointGraphic(r,a,!0),c.emit("create",{graphic:c.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),a.on("vertex-remove",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,s=a[i];o=e,c._drawMultipointGraphic(r,a,!0),c.emit("create",{graphic:c.createGraphic,state:"active",tool:t,toolEventInfo:{removed:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),a.on("vertex-update",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,s=a[i];o=e,c._drawMultipointGraphic(r,a,!0),c.emit("create",{graphic:c.createGraphic,state:"active",tool:t,toolEventInfo:{type:n,updated:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:i}]},type:"create"})})),a.on("cursor-update",(function(e){o=e})),a.on("draw-complete",(function(e){var t=e.vertices.slice(0),n=r.createMultipoint(t,c.view.spatialReference);n&&c.createGraphic&&(c.createGraphic.geometry=n),u&&u.complete()})),a.on("undo",(function(e){var t=e.vertices,n=o&&"cursor-update"!==o.type;c._resetCreateOperationGraphics(),t.length&&c._drawMultipointGraphic(r,t,n)})),a.on("redo",(function(e){var t=e.vertices,n=o&&"cursor-update"!==o.type;c._resetCreateOperationGraphics(),t.length&&c._drawMultipointGraphic(r,t,n)}))),s.push(this.view.on("pointer-move",(function(){return c._displayCrosshairCursor()}),k.b.WIDGET),this.view.on("key-down",(function(e){return c._getCommonUpdateOperationKeyDownHandlers(u,e)}),k.b.WIDGET)),u));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return q.apply(this,arguments)})},{key:"_setupCreatePolyOperation",value:(B=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,u,c,l,h,f,p,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return r=e.sent,a=Nt(Nt({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=null,("polyline"===t||"polygon"===t)&&(o=this._draw.create(t,a)),s=null,u=[o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];d._snapLastPolygonVertexToFirst(t,a),s=e,d._drawVertexGraphics(r,t,a,{userClicked:!0}),d.emit("create",{graphic:d.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("vertex-remove",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];d._snapLastPolygonVertexToFirst(t,a),s=e,d._drawVertexGraphics(r,t,a,{userClicked:!0}),d.emit("create",{graphic:d.createGraphic,state:"active",tool:t,toolEventInfo:{removed:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("vertex-update",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];d._snapLastPolygonVertexToFirst(t,a),s=e,d._drawVertexGraphics(r,t,a,{userClicked:!0}),d.emit("create",{graphic:d.createGraphic,state:"active",tool:t,toolEventInfo:{type:n,updated:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}]},type:"create"})})),o.on("cursor-update",(function(e){var n=e.type,i=e.vertices;e.mapPoint&&(d._snapLastPolygonVertexToFirst(t,i),s=e,d._drawVertexGraphics(r,t,i,{userClicked:!1}),i.length>1)&&d.emit("create",{graphic:d.createGraphic,state:"active",tool:t,toolEventInfo:{coordinates:i[i.length-1],type:n},type:"create"})})),o.on("draw-complete",(function(e){var n=e.vertices.slice(0),i=null;"polyline"===t?i=r.createPolyline([n],d.view.spatialReference,d._doUnnormalization):"polygon"===t&&(i=r.createPolygon([n],d.view.spatialReference,d._doUnnormalization,!0)),i&&(d.createGraphic.geometry=i),p&&p.complete()})),o.on("undo",(function(e){var n=e.vertices,i=s&&"cursor-update"!==s.type;d._resetCreateOperationGraphics(),d._snapLastPolygonVertexToFirst(t,n),n.length&&d._drawVertexGraphics(r,t,n,{userClicked:i})})),o.on("redo",(function(e){var n=e.vertices,i=s&&"cursor-update"!==s.type;d._resetCreateOperationGraphics(),d._snapLastPolygonVertexToFirst(t,n),n.length&&d._drawVertexGraphics(r,t,n,{userClicked:i})}))],c=[this.view.on("pointer-move",(function(e){Object(i.k)(o.getCoordsFromScreenPoint(Object(v.f)(e.x,e.y)))?d._displayCrosshairCursor():d._displayDefaultCursor()}),k.b.WIDGET),this.view.on("key-down",(function(e){e.key!==Te.snappingKey||e.repeat?e.key===Te.undoKey&&p&&p.canUndo()?(e.stopPropagation(),p.undo()):e.key===Te.redoKey&&p&&p.canRedo()?(e.stopPropagation(),p.redo()):e.key===Te.cancelKey&&p&&p.cancel():(d.snappingOptions.enabledToggled=!0,e.stopPropagation())}),k.b.WIDGET),this.view.on("key-up",(function(e){e.key===Te.snappingKey&&(d.snappingOptions.enabledToggled=!1,e.stopPropagation())}),k.b.WIDGET)],"polygon"===t&&(l=function(e,t,n){if(!e||!e.layer||!e.visible)return!1;var r=d.view.toScreen(e.geometry);return d._isWithinScreenDistance(r,t,n)},h=function(e){if(!(d._vertexGraphics.length<=2))return l(d._vertexGraphics[0],e,d._getVertexIntersectDistance())},f=!1,c.push(this.view.on("pointer-move",(function(){f=!1}),k.b.WIDGET),this.view.on("pointer-down",(function(e){if(h(e))return f=!0,void e.stopPropagation();d._vertexGraphics.some((function(t){return l(t,e,d._getVertexIntersectDistance())}))&&e.stopPropagation()}),k.b.WIDGET),this.view.on("pointer-up",(function(e){f&&(e.stopPropagation(),o.complete())})))),p=this._operationHandleForCreateAction(o,[].concat(u,c),t),e.abrupt("return",p);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return B.apply(this,arguments)})},{key:"_setupCreateCircleOperation",value:(G=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,u,c,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return r=e.sent,a=Nt(Nt({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=this._draw.create(t,a),s=!1,u=!0,c=[o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,c=a[i];f._drawSegmentGraphic(r,t,a,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem),f.emit("create",{graphic:f.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("cursor-update",(function(e){var n=e.type,i=e.vertices;f._drawSegmentGraphic(r,t,i,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem),2===i.length&&f.emit("create",{graphic:f.createGraphic,state:"active",tool:t,toolEventInfo:{coordinates:i[i.length-1],type:n},type:"create"})})),o.on("draw-complete",(function(e){var t,n=e.vertices.slice(0);1===n.length?(n.push(o.viewAlignedCoordinateSystem.makeMapPoint(n[0][0]+f._defaultSegmentOffset*f.view.resolution,n[0][1])),t=r.createCircle(n,o.viewAlignedCoordinateSystem,!0,f.view.resolution)):t=s?r.createEllipse(n,o.viewAlignedCoordinateSystem,u):r.createCircle(n,o.viewAlignedCoordinateSystem,u,f.view.resolution),f.createGraphic?f.createGraphic.geometry=t:(f._removeCreateGraphic(),f._set("createGraphic",new w.a(t,f.polygonSymbol))),h&&h.complete()}))],l=[this.view.on("pointer-move",(function(e){Object(i.k)(o.getCoordsFromScreenPoint(Object(v.f)(e.x,e.y)))?f._displayCrosshairCursor():f._displayDefaultCursor()}),k.b.WIDGET),this.view.on("key-down",(function(e){e.key===Te.constraintKey?s||(s=!0,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem)):e.key===Te.centerKey?u&&(u=!1,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem)):e.key===Te.cancelKey&&h&&h.cancel()}),k.b.WIDGET),this.view.on("key-up",(function(e){e.key===Te.constraintKey?(s=!1,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem)):e.key===Te.centerKey&&(u=!0,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem))}),k.b.WIDGET)],h=this._operationHandleForCreateAction(o,[].concat(c,l),t),e.abrupt("return",h);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return G.apply(this,arguments)})},{key:"_setupCreateRectangleOperation",value:(z=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,u,c,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return r=e.sent,a=Nt(Nt({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=this._draw.create(t,a),s=!1,u=!1,c=[o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,c=a[i];f._drawSegmentGraphic(r,t,a,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem),f.emit("create",{graphic:f.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("cursor-update",(function(e){var n=e.type,i=e.vertices;f._drawSegmentGraphic(r,t,i,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem),2===i.length&&f.emit("create",{graphic:f.createGraphic,state:"active",tool:t,toolEventInfo:{coordinates:i[i.length-1],type:n},type:"create"})})),o.on("draw-complete",(function(e){var t,n=e.vertices.slice(0);1===n.length&&(s=!1,u=!1),t=s?r.createSquare(n,o.viewAlignedCoordinateSystem,u):r.createRectangle(n,o.viewAlignedCoordinateSystem,u),f.createGraphic?f.createGraphic.geometry=t:(f._removeCreateGraphic(),f._set("createGraphic",new w.a(t,f.polygonSymbol))),h&&h.complete()}))],l=[this.view.on("pointer-move",(function(e){Object(i.k)(o.getCoordsFromScreenPoint(Object(v.f)(e.x,e.y)))?f._displayCrosshairCursor():f._displayDefaultCursor()}),k.b.WIDGET),this.view.on("key-down",(function(e){e.key===Te.constraintKey?s||(s=!0,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem)):e.key===Te.centerKey?u||(u=!0,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem)):e.key===Te.cancelKey&&h&&h.cancel()}),k.b.WIDGET),this.view.on("key-up",(function(e){e.key===Te.constraintKey?(s=!1,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem)):e.key===Te.centerKey&&(u=!1,f._drawSegmentGraphic(r,t,o.vertices,{centered:u,constrainToggle:s},o.viewAlignedCoordinateSystem))}),k.b.WIDGET)],h=this._operationHandleForCreateAction(o,[].concat(c,l),t),e.abrupt("return",h);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return z.apply(this,arguments)})},{key:"_setupUpdateOperation",value:(P=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,u,c,l,h,f,p,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this._defaultUpdateTool,a=this.defaultUpdateOptions,o=this.layer,s=this.view,u=Nt(Nt({},a),n),c=u.tool||r,l=Vt(t);try{for(l.s();!(h=l.n()).done;)f=h.value,o.remove(f),o.add(f)}catch(y){l.e(y)}finally{l.f()}if("3d"!==s.type){e.next=15;break}if(0!==t.length){e.next=6;break}return e.abrupt("return",null);case 6:e.t0=c,e.next="move"===e.t0?9:"reshape"===e.t0?10:"transform"===e.t0?14:15;break;case 9:return e.abrupt("return",this._setupMove3DOperation(t,u,s,c));case 10:if(!(t.length>1)){e.next=12;break}return e.abrupt("return",(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null));case 12:return p=Object(N.a)(t[0]),e.abrupt("return",0===p?this._setupReshape3DOperation(t[0],u,s):(this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat(D(p),").")),null));case 14:return e.abrupt("return",this._setupGraphicTransform3DOperation(t,u,s));case 15:if("move"!==c){e.next=17;break}return e.abrupt("return",this._setupMoveOperation(t,u,s));case 17:if(!(t.length>1)){e.next=19;break}return e.abrupt("return","reshape"===c?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshapeOperation(t,c,u,s));case 19:if(1!==t.length){e.next=25;break}if(d=t[0],"point"!==(v=Object(i.i)(d.geometry,"type"))&&"multipoint"!==v){e.next=23;break}return e.abrupt("return",this._setupMoveOperation(t,u,s));case 23:if("transform"!==c&&"reshape"!==c){e.next=25;break}return e.abrupt("return",this._setupTransformOrReshapeOperation(t,c,u,s));case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,this)}))),function(e,t){return P.apply(this,arguments)})},{key:"_setupMove3DOperation",value:(E=Ut(regeneratorRuntime.mark((function e(t,r,i,a){var o,s,u,c,l,h,f,p,d,v=this,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=y.length>4&&void 0!==y[4]&&y[4],s=Vt(t),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=11;break}if(c=u.value,0===(l=Object(L.a)(c))){e.next=9;break}return e.abrupt("return",(this._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat(D(l),").")),null));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),s.e(e.t0);case 16:return e.prev=16,s.f(),e.finish(16);case 19:return e.next=21,this._requireModule(Promise.all([n.e(13),n.e(14),n.e(0),n.e(180)]).then(n.bind(null,"Q44q")));case 21:if(!Ne(h=e.sent)){e.next=24;break}return e.abrupt("return",h);case 24:return f=new h.module.GraphicMoveTool({view:i,enableZ:r.enableZ,snappingManager:this._snappingManager}),this.view.tools.add(f),f.graphics.addMany(t),o||this.updateGraphics.addMany(t),p=[],d=new Se({activeComponent:f,tool:a,type:"update",onEnd:function(){var e;p.forEach((function(e){return e.remove()})),p.length=0,null==(e=v.view.tools)||e.remove(f),f.destroyed||f.destroy()},undo:function(){Pe(d,v.updateGraphics.toArray()),v._emitUndoEvent({graphics:v.updateGraphics.toArray(),tool:a})},redo:function(){Re(d,v.updateGraphics.toArray()),v._emitRedoEvent({graphics:v.updateGraphics.toArray(),tool:a})},addToSelection:function(e){v.updateGraphics.push(e),f.graphics.push(e),v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=v.updateGraphics.indexOf(e);d.history.undo.forEach((function(e){return e.updates.splice(t,1)})),d.history.redo.forEach((function(e){return e.updates.splice(t,1)})),v.updateGraphics.remove(e),v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==v.updateGraphics.length?f.graphics.remove(e):d.complete()},toggleTool:function(){var e=Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===v.updateGraphics.length&&!1!==r.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if("transform"===a){e.next=4;break}return e.abrupt("return");case 4:if(t=v.updateGraphics.getItemAt(0),0===Object(N.a)(t)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,v._setupReshape3DOperation(t,r,i,!0);case 9:Ne(n=e.sent)||(d.onEnd(),d.destroy(),v._setUpdateOperationHandle(n,r));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(p.push.apply(p,Bt(this._getHandlesForComponent(d,r)).concat([this.view.on("immediate-click",(function(e){return v._getCommonUpdateOperationClickHandlers(d,e,r)}),k.b.WIDGET),this.view.on("key-down",(function(e){return v._getCommonUpdateOperationKeyDownHandlers(d,e)}),k.b.WIDGET)])),d));case 28:case"end":return e.stop()}}),e,this,[[2,13,16,19]])}))),function(e,t,n,r){return E.apply(this,arguments)})},{key:"_setupGraphicTransform3DOperation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&0===function(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(i.j)(e.geometry))return 2;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":return 0;case"multipoint":case"extent":case"mesh":default:return 3}var n=Object(i.k)(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return n&&n.length>0&&n.some((function(e){return"object"===e.type}))?"on-the-ground"!==Object(F.e)(e)&&Object(F.g)(e)?4:0:5}(e[0])){var a=e[0];if(Object(i.k)(a.geometry)&&"point"===a.geometry.type)return this._setupPointTransform3DOperation(a,t,n);if(Object(i.k)(a.geometry)&&("polygon"===a.geometry.type||"polyline"===a.geometry.type))return this._setupPolyTransform3DOperation(a,t,n,r)}return this._setupMove3DOperation(e,t,n,"transform",r)}},{key:"_setupPointTransform3DOperation",value:(C=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s,u,c,l,h,f,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="transform",o=r.enableRotation,s=r.enableScaling,u=r.enableZ,e.next=6,this._requireModule(Promise.all([n.e(13),n.e(14),n.e(0),n.e(180)]).then(n.bind(null,"Q44q")));case 6:if(!Ne(c=e.sent)){e.next=9;break}return e.abrupt("return",c);case 9:return l=new c.module.GraphicTransformTool({graphic:t,view:i,enableRotation:o,enableScaling:s,enableZ:u,snappingManager:this._snappingManager}),this.view.tools.add(l),this.updateGraphics.add(t),h=[],f=new Se({activeComponent:l,tool:a,type:"update",onEnd:function(){var e;h.forEach((function(e){return e.remove()})),h.length=0,null==(e=p.view.tools)||e.remove(l),l.destroyed||l.destroy()},undo:function(){Pe(f,p.updateGraphics.toArray()),p._emitUndoEvent({graphics:p.updateGraphics.toArray(),tool:a})},redo:function(){Re(f,p.updateGraphics.toArray()),p._emitRedoEvent({graphics:p.updateGraphics.toArray(),tool:a})},addToSelection:function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.updateGraphics.add(t),e.next=3,p._setupMove3DOperation(p.updateGraphics.toArray(),r,i,"transform",!0);case 3:Ne(n=e.sent)||(f.onEnd(),f.destroy(),p._setUpdateOperationHandle(n,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.abrupt("return",(h.push.apply(h,Bt(this._getHandlesForComponent(f,r)).concat([this.view.on("immediate-click",(function(e){return p._getCommonUpdateOperationClickHandlers(f,e,r)}),k.b.WIDGET),this.view.on("key-down",(function(e){return p._getCommonUpdateOperationKeyDownHandlers(f,e)}),k.b.WIDGET)])),f));case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return C.apply(this,arguments)})},{key:"_setupPolyTransform3DOperation",value:(A=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s,u,c,l,h,f,p,d,v=this,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.length>3&&void 0!==y[3]&&y[3],o="transform",s=r.enableRotation,u=r.enableScaling,c=r.enableZ,l=r.preserveAspectRatio,e.next=8,this._requireModule(Promise.all([n.e(13),n.e(14),n.e(0),n.e(180)]).then(n.bind(null,"Q44q")));case 8:if(!Ne(h=e.sent)){e.next=11;break}return e.abrupt("return",h);case 11:return f=new h.module.ExtentTransformTool({graphic:t,view:i,enableRotation:s,enableScaling:u,enableZ:c,preserveAspectRatio:l}),this.view.tools.add(f),a||this.updateGraphics.add(t),p=[],d=new Se({activeComponent:f,tool:o,type:"update",onEnd:function(){var e;p.forEach((function(e){return e.remove()})),p.length=0,null==(e=v.view.tools)||e.remove(f),f.destroyed||f.destroy()},canUndo:function(){return f.canUndo()},undo:function(){f.undo(),v._emitUndoEvent({graphics:v.updateGraphics.toArray(),tool:o})},canRedo:function(){return f.canRedo()},redo:function(){f.redo(),v._emitRedoEvent({graphics:v.updateGraphics.toArray(),tool:o})},addToSelection:function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.updateGraphics.add(t),v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,v._setupMove3DOperation(v.updateGraphics.toArray(),r,i,"transform",!0);case 3:Ne(n=e.sent)||(d.onEnd(),d.destroy(),v._setUpdateOperationHandle(n,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.updateGraphics.remove(t),v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"}),d.complete();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=Ut(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===v.updateGraphics.length&&!1!==r.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if(t=v.updateGraphics.getItemAt(0),0===Object(N.a)(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,v._setupReshape3DOperation(t,r,i,!0);case 7:Ne(n=e.sent)||(d.onEnd(),d.destroy(),v._setUpdateOperationHandle(n,r));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(p.push.apply(p,Bt(this._getHandlesForComponent(d,r)).concat([this.view.on("immediate-click",(function(e){return v._getCommonUpdateOperationClickHandlers(d,e,r)}),k.b.WIDGET),this.view.on("key-down",(function(e){return v._getCommonUpdateOperationKeyDownHandlers(d,e)}),k.b.WIDGET),this.view.on("key-down",(function(e){e.key!==Te.constraintKey||e.repeat||(f.preserveAspectRatio=!f.preserveAspectRatio,e.stopPropagation())}),k.b.WIDGET),this.view.on("key-up",(function(e){e.key===Te.constraintKey&&(f.preserveAspectRatio=!f.preserveAspectRatio,e.stopPropagation())}),k.b.WIDGET)])),d));case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return A.apply(this,arguments)})},{key:"_setupMoveOperation",value:(T=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="move",this.updateGraphics.addMany(t),e.next=4,this._getGraphicMover(t,n,r);case 4:if(!Ne(a=e.sent)){e.next=7;break}return e.abrupt("return",a);case 7:return this._syncCloneInfos(),o=new Se({activeComponent:a,tool:i,type:"update",onEnd:function(){var e;c._displayDefaultCursor(),u.forEach((function(e){return e.remove()})),s.forEach((function(e){return e.remove()})),u=[],s=[],a.destroy(),null==(e=c._internalGraphicsLayer)||e.removeMany(Bt(c.updateGraphics.toArray())),c._removeCloneGraphics()},undo:function(){var e=c.updateGraphics.toArray();Pe(o,e),c._syncCloneInfos(),c._emitUndoEvent({graphics:e,tool:i})},redo:function(){var e=c.updateGraphics.toArray();Re(o,e),c._syncCloneInfos(),c._emitRedoEvent({graphics:e,tool:i})},addToSelection:function(e){c.updateGraphics.push(e),a.graphics=c.updateGraphics.toArray();var t=c._createClone(e);c._moveOperationCloneInfos.push({graphic:e,clone:t}),c._internalGraphicsLayer.add(t),c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=c.updateGraphics.indexOf(e);o.history.undo.forEach((function(e){return e.updates.splice(t,1)})),o.history.redo.forEach((function(e){return e.updates.splice(t,1)}));var n=c._moveOperationCloneInfos.findIndex((function(t){return t.graphic===e}));c._internalGraphicsLayer.remove(c._moveOperationCloneInfos[n].clone),c.updateGraphics.remove(e),c._moveOperationCloneInfos.splice(n,1);var r=c.updateGraphics.toArray();c.emit("update",{graphics:r,state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==c.updateGraphics.length?a.graphics=r:o.complete()}}),s=[r.on("immediate-click",(function(e){return c._getCommonUpdateOperationClickHandlers(o,e,n)}),k.b.WIDGET),r.on("key-down",(function(e){c._getCommonUpdateOperationKeyDownHandlers(o,e),e.key!==Te.constraintKey||e.repeat||(a.enableMoveAllGraphics=!a.enableMoveAllGraphics)}),k.b.WIDGET),r.on("key-up",(function(e){e.key===Te.constraintKey&&(a.enableMoveAllGraphics=!a.enableMoveAllGraphics)}),k.b.WIDGET)],u=this._getHandlesForComponent(o,n),e.abrupt("return",(u.push(a.on("graphic-move",(function(e){c._moveOperationCloneInfos.forEach((function(t){var n=e.allGraphics.find((function(e){return e===t.graphic}));n&&(t.clone.geometry=n.geometry)}))}))),o));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return T.apply(this,arguments)})},{key:"_removeCloneGraphics",value:function(){if(this._moveOperationCloneInfos.length){var e,t=Vt(this._moveOperationCloneInfos);try{for(t.s();!(e=t.n()).done;){var n=e.value.clone;this._internalGraphicsLayer.remove(n),n.destroy()}}catch(r){t.e(r)}finally{t.f()}this._moveOperationCloneInfos=[]}}},{key:"_syncCloneInfos",value:function(){this._removeCloneGraphics(),this._moveOperationCloneInfos=this._generateCloneInfos(this.updateGraphics.toArray());var e,t=Vt(this._moveOperationCloneInfos);try{for(t.s();!(e=t.n()).done;){var n=e.value.clone;this._internalGraphicsLayer.add(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"_generateCloneInfos",value:function(e){var t=this;return(null==e?void 0:e.map((function(e){return{graphic:e,clone:t._createClone(e)}})))||[]}},{key:"_createClone",value:function(e){var t=e.clone();return t.symbol=this._getSymbolForClone(e),t}},{key:"_getSymbolForClone",value:function(e){if(Object(i.j)(e.symbol))return null;switch(e.symbol.type){case"cim":return new g.a({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":var t=e.symbol,n=t.xoffset,r=t.yoffset,a=t.height,o=t.width,s=a===o?o:Math.max(a,o);return new g.a({xoffset:n,yoffset:r,size:s,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-marker":var u=e.symbol,c=u.xoffset,l=u.yoffset,h=u.size,f=u.style;return new g.a({xoffset:c,yoffset:l,style:"circle"===f?"circle":"square",size:h+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-fill":return new b.a({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new y.a({color:[255,127,0,1],style:"dash",width:1});case"text":var p=e.symbol,d=p.xoffset,v=p.yoffset;return new g.a({xoffset:d,yoffset:v,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});default:return null}}},{key:"_setupReshape3DOperation",value:(m=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s,u,c,l,h=this,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]&&f[3],o="reshape",e.next=4,this._requireModule(Promise.all([n.e(13),n.e(14),n.e(0),n.e(180)]).then(n.bind(null,"Q44q")));case 4:if(!Ne(s=e.sent)){e.next=7;break}return e.abrupt("return",s);case 7:return this.snappingOptions.enabledToggled=!1,u=new s.module.GraphicReshapeTool({view:i,graphic:t,enableZ:r.enableZ,enableMoveGraphic:r.enableMoveGraphic,snappingManager:this._snappingManager}),i.tools.add(u),a||this.updateGraphics.add(t),c=[],l=new Se({activeComponent:u,tool:o,type:"update",onEnd:function(){var e;c.forEach((function(e){return e.remove()})),c.length=0,null==(e=h.view.tools)||e.remove(u),u.destroyed||u.destroy()},undo:function(){u.beforeUndo(),Pe(l,h.updateGraphics.toArray()),h._emitUndoEvent({graphics:h.updateGraphics.toArray(),tool:o})},redo:function(){Re(l,h.updateGraphics.toArray()),h._emitRedoEvent({graphics:h.updateGraphics.toArray(),tool:o})},addToSelection:function(){var e=Ut(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.updateGraphics.add(t),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,h._setupMove3DOperation(h.updateGraphics.toArray(),r,i,"transform",!0);case 3:Ne(n=e.sent)||(l.onEnd(),l.destroy(),h._setUpdateOperationHandle(n,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.updateGraphics.remove(t),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"}),l.complete();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==r.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h._setupGraphicTransform3DOperation(h.updateGraphics.toArray(),r,i,!0);case 4:Ne(t=e.sent)||(l.onEnd(),l.destroy(),h._setUpdateOperationHandle(t,r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(c.push.apply(c,Bt(this._getHandlesForComponent(l,r)).concat([i.on("immediate-click",(function(e){return h._getCommonUpdateOperationClickHandlers(l,e,r)}),k.b.WIDGET),i.on("key-down",(function(e){h._getCommonUpdateOperationKeyDownHandlers(l,e),e.key===Te.snappingKey&&(h.snappingOptions.enabledToggled=!0,e.stopPropagation())}),k.b.WIDGET),i.on("key-up",(function(e){e.key===Te.snappingKey&&(h.snappingOptions.enabledToggled=!1,e.stopPropagation())}),k.b.WIDGET)])),l));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"_setupTransformOrReshapeOperation",value:(f=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.multipleSelectionEnabled,this.updateGraphics.addMany(t),"transform"!==n){e.next=8;break}return e.next=5,this._getBox(t,r,i);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this._getReshape(t,r,i);case 10:e.t0=e.sent;case 11:if(!Ne(o=e.t0)){e.next=14;break}return e.abrupt("return",o);case 14:return s=new Se({activeComponent:o,type:"update",onEnd:function(){c.forEach((function(e){return e.remove()})),u.forEach((function(e){return e.remove()})),c=[],u=[],s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),l._internalGraphicsLayer.removeMany(l.updateGraphics.toArray())},undo:function(){Pe(s,l.updateGraphics.toArray()),s.refreshComponent(),l._emitUndoEvent({graphics:l.updateGraphics.toArray(),tool:s.tool})},redo:function(){Re(s,l.updateGraphics.toArray()),s.refreshComponent(),l._emitRedoEvent({graphics:l.updateGraphics.toArray(),tool:s.tool})},addToSelection:function(e){var t=s.activeComponent;l.updateGraphics.add(e),t.graphics=l.updateGraphics.toArray(),t.refresh(),s.resetHistory(),l.emit("update",{graphics:l.updateGraphics.toArray(),state:"active",aborted:!1,tool:l.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=s.activeComponent,n=l.updateGraphics.indexOf(e);s.history.undo.forEach((function(e){return e.updates.splice(n,1)})),s.history.redo.forEach((function(e){return e.updates.splice(n,1)})),l.updateGraphics.remove(e);var r=l.updateGraphics.toArray();l.emit("update",{graphics:r,state:"active",aborted:!1,tool:l.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==l.updateGraphics.length?t.graphics=r:s.complete()},toggleTool:function(){var e=Ut(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.updateGraphics.length>1)){e.next=2;break}return e.abrupt("return");case 2:if(n=null,"transform"!==s.tool){e.next=9;break}return e.next=6,l._getReshape(t,r,i);case 6:n=e.sent,e.next=14;break;case 9:if(e.t0="reshape"===s.tool,!e.t0){e.next=14;break}return e.next=13,l._getBox(t,r,i);case 13:n=e.sent;case 14:Ne(n)||(s.activeComponent.destroy(),s.activeComponent=n,s.activeComponent&&(c.forEach((function(e){return e.remove()})),c=l._getHandlesForComponent(s,r)));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u=[i.on("immediate-click",(function(e){l._getFirstHit(Object(M.a)(e)).then((function(t){var n;if(s)if(null!=(n=t.results)&&n.length){var r=s.activeComponent;t.results.some((function(t){if(t.graphic){var n,i=t.graphic;if("box"===(null==r?void 0:r.type)&&null!=(n=e.native)&&n.shiftKey&&a)return s.addToSelection(i),!0;i.layer===l.layer&&s.complete()}return!1}))&&e.stopPropagation()}else s.complete()}))}),k.b.WIDGET),i.on("key-down",(function(e){if(l._getCommonUpdateOperationKeyDownHandlers(s,e),e.key!==Te.snappingKey||e.repeat||(l.snappingOptions.enabledToggled=!0,e.stopPropagation()),e.key===Te.constraintKey&&!e.repeat&&s){var t=s.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),k.b.WIDGET),i.on("key-up",(function(e){var t;if(e.key===Te.snappingKey&&"reshape"===(null==s||null==(t=s.activeComponent)?void 0:t.type)&&(l.snappingOptions.enabledToggled=!1,e.stopPropagation()),e.key===Te.constraintKey&&s){var n=s.activeComponent;n&&"box"===n.type&&(n.preserveAspectRatio=!n.preserveAspectRatio)}}),k.b.WIDGET)],c=this._getHandlesForComponent(s,r),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return f.apply(this,arguments)})},{key:"_getGraphicMover",value:(s=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.enableMoveAllGraphics,e.next=3,this._requireModule(Promise.all([n.e(0),n.e(187)]).then(n.bind(null,"JL5j")));case 3:return o=e.sent,e.abrupt("return",Ne(o)?o:new o.module.default({enableMoveAllGraphics:a,graphics:t,view:i,callbacks:{onGraphicMoveStart:function(e){var t=e.dx,n=e.dy,r=e.graphic;s._displayGrabbingCursor(),s.emit("update",{graphics:s.updateGraphics.toArray(),state:"active",aborted:!1,tool:s.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-start"},type:"update"})},onGraphicMove:function(e){var t=e.dx,n=e.dy,r=e.graphic;return s.emit("update",{graphics:s.updateGraphics.toArray(),state:"active",aborted:!1,tool:s.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move"},type:"update"})},onGraphicMoveStop:function(e){var t=e.dx,n=e.dy,r=e.graphic;s._displayPointerCursor(),s.emit("update",{graphics:s.updateGraphics.toArray(),state:"active",aborted:!1,tool:s.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-stop"},type:"update"})},onGraphicPointerOver:function(){return s._displayPointerCursor()},onGraphicPointerOut:function(){return s._displayDefaultCursor()}}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"_getBox",value:(o=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.enableRotation,o=r.enableScaling,s=r.preserveAspectRatio,e.next=5,this._requireModule(Promise.all([n.e(0),n.e(186)]).then(n.bind(null,"TDy8")));case 5:return u=e.sent,e.abrupt("return",Ne(u)?u:new u.module.default({graphics:t,enableRotation:a,enableScaling:o,preserveAspectRatio:s,layer:this._internalGraphicsLayer,view:i,callbacks:{onMoveStart:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onMove:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onMoveStop:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onScaleStart:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onScale:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onScaleStop:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onRotateStart:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onRotate:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})},onRotateStop:function(e){return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:Nt({},e),type:"update"})}}}));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"_getReshape",value:(a=Ut(regeneratorRuntime.mark((function e(t,r,i){var a,o,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.enableMidpoints,o=void 0===a||a,e.next=4,this._requireModule(Promise.all([n.e(0),n.e(188)]).then(n.bind(null,"BTtK")));case 4:return s=e.sent,e.abrupt("return",Ne(s)?s:new s.module.default({enableMidpoints:o,graphic:t[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:i,callbacks:{onReshapeStart:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:Nt({},e),type:"update"})},onReshape:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:Nt({},e),type:"update"})},onReshapeStop:function(e){var t=e.mover,n=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{mover:t,type:n},type:"update"})},onMoveStart:function(e){var t=e.dx,n=e.dy,r=e.mover,i=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:i},type:"update"})},onMove:function(e){var t=e.dx,n=e.dy,r=e.mover,i=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:i},type:"update"})},onMoveStop:function(e){var t=e.dx,n=e.dy,r=e.mover,i=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:i},type:"update"})},onVertexAdd:function(e){var t=e.added,n=e.type,r=e.vertices,i=t.map((function(e){return Object(h.b)(e.geometry)}));u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{added:i,vertices:r,type:n},type:"update"})},onVertexRemove:function(e){var t=e.removed,n=e.type,r=e.vertices,i=t.map((function(e){return Object(h.b)(e.geometry)}));u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{removed:i,vertices:r,type:n},type:"update"})}}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"_getHandlesForComponent",value:function(e,t){var n=this,r=e.activeComponent;switch(r.type){case"graphic-mover":return[r.on("graphic-click",(function(t){var n,r=t.graphic,i=t.viewEvent;null!=(n=i.native)&&n.shiftKey&&(i.stopPropagation(),e.removeFromSelection(r))})),r.on("graphic-move-start",(function(t){return e.addToHistory(De(t.allGraphics))}))];case"box":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(De(t.graphics))})),r.on("rotate-start",(function(t){return e.addToHistory(De(t.graphics))})),r.on("scale-start",(function(t){return e.addToHistory(De(t.graphics))}))];case"reshape":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(De([t.mover]))})),r.on("reshape-start",(function(t){return e.addToHistory(De([t.graphic]))})),r.on("vertex-add",(function(t){return e.addToHistory(De([t.oldGraphic]))})),r.on("vertex-remove",(function(t){return e.addToHistory(De([t.oldGraphic]))}))];case"move-3d":return[r.on("graphic-move-start",(function(t){e.addToHistory(De(t.allGraphics)),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),r.on("graphic-move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),r.on("graphic-move-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[r.on("graphic-translate-start",(function(t){e.addToHistory(De([t.graphic])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:t.graphic,dx:t.dxScreen,dy:t.dyScreen,type:"move-start"},type:"update"})})),r.on("graphic-translate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),r.on("graphic-rotate-start",(function(t){e.addToHistory(Le([t.graphic])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:t.graphic,angle:t.angle,type:"rotate-start"},type:"update"})})),r.on("graphic-rotate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),r.on("graphic-scale-start",(function(t){e.addToHistory(Le([t.graphic])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:t.graphic,xScale:t.xScale,yScale:t.yScale,type:"scale-start"},type:"update"})})),r.on("graphic-scale-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),r.on("graphic-translate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),r.on("graphic-rotate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),r.on("graphic-scale",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[r.on("reshape",(function(t){"reshape-start"===t.type&&e.addToHistory(De([t.mover])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:t,type:"update"})})),r.on("move",(function(t){"move-start"===t.type&&e.addToHistory(De([t.mover])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:t,type:"update"})})),r.on("vertex-add",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("vertex-remove",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"draw":case"draw-3d":return null;default:return}}},{key:"_onTransformOrReshape2DGraphicClick",value:function(e,t,n){var r,a=n.graphic,o=n.viewEvent;null!=(r=o.native)&&r.shiftKey?(o.stopPropagation(),e.removeFromSelection(a)):t.toggleToolOnClick&&(Object(i.j)(a.geometry)||"extent"!==a.geometry.type?(o.stopPropagation(),e.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))}},{key:"_setUpdateOperationHandle",value:function(e,t){var n=this;this._operationHandle=e;var r=this.view.map;this._disablePopup(t),e.on("complete",(function(){if(e===n._operationHandle){var i=n.updateGraphics.toArray(),a=n._operationHandle.tool;n._operationHandle.destroy(),n._operationHandle=null,n._internalGraphicsLayer.removeMany(n.updateGraphics.toArray()),n.updateGraphics.removeAll(),r&&r.remove(n._internalGraphicsLayer),n._restorePopup(t),n.emit("update",{graphics:i,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}},{key:"_getCommonUpdateOperationClickHandlers",value:function(e,t,n){var r=this,i=Object(M.a)(t);this._getFirstHit(i).then((function(i){var a=i.results;a.length&&(t.native.shiftKey&&r._toggleSelection(a.map((function(e){return e.graphic})),e,n)||a.some((function(e){return e.graphic&&r.updateGraphics.indexOf(e.graphic)>-1})))?t.stopPropagation():e.complete()}))}},{key:"_toggleSelection",value:function(e,t,n){var r=this,i=!!n.multipleSelectionEnabled;return e.some((function(e){return!(null==e||!i||e.layer!==r.layer||(-1===r.updateGraphics.indexOf(e)?t.addToSelection(e):t.removeFromSelection(e),0))}))}},{key:"_getCommonUpdateOperationKeyDownHandlers",value:function(e,t){if(e){var n=t.key;n===Te.undoKey&&e.canUndo()?(t.stopPropagation(),e.undo()):n===Te.redoKey&&e.canRedo()?(t.stopPropagation(),e.redo()):n===Te.cancelKey?(t.stopPropagation(),e.cancel()):Te.deleteKeys.indexOf(n)>=0&&this._onDeleteKey(t)}}},{key:"_onDeleteKey",value:function(e){if(this._operationHandle&&"update"===this._operationHandle.type){var t=this.activeComponent;if(!Object(i.j)(t)&&"reshape"!==t.type&&"reshape-3d"!==t.type){e.stopPropagation();var n=this.updateGraphics.toArray();this.layer.removeMany(n),this._emitDeleteEvent({graphics:n,tool:this.activeTool})}}}},{key:"_drawMultipointGraphic",value:function(e,t,n){var r=null;if(!n&&t.length>1){var i=t.slice(0);i.pop(),r=e.createMultipoint(i,this.view.spatialReference)}else r=e.createMultipoint(t,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=r:this._set("createGraphic",new w.a(r,this.pointSymbol)),n&&1===t.length&&this._internalGraphicsLayer.add(this.createGraphic)}},{key:"_drawVertexGraphics",value:function(e,t,n,r){if(n.length){var i=this._doUnnormalization,a=this.activeLineSymbol,o=this.activeVertexSymbol,s=this.polygonSymbol,u=this.polylineSymbol,c=this.vertexSymbol,l=this.view.spatialReference,h=!(!r||!r.userClicked),f="polygon"===t,p=f?s:u;if(1===n.length){this._removeLineGraphic(),this._removeActiveLineGraphic();var d=this.createPointFromVertex(n[0]),v=f?e.createPolygon([n],l,i,!0):e.createPolyline([n],l,i);this._vertexGraphics.length?this._vertexGraphics[0].geometry=d:this._vertexGraphics.push(new w.a(d,o)),this.createGraphic?this.createGraphic.set({geometry:v,symbol:p}):this._set("createGraphic",new w.a(v,p)),h&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===n.length){var y=this.createPointFromVertex(n[1]),b=e.createPolyline([n],l,i),g=f?e.createPolygon([n],l,i,!0):e.createPolyline([n],l,i);if(!this._vertexGraphics.length){var m=this.createPointFromVertex(n[0]),O=new w.a(m,c);this._vertexGraphics.push(O)}if(1===this._vertexGraphics.length){var j=this._vertexGraphics[0],_=new w.a(y,c);this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(_),this._internalGraphicsLayer.remove(j),this._internalGraphicsLayer.add(j)}else this._vertexGraphics[1].geometry=y;this._showActiveLineGraphic(b);var x=this._vertexGraphics[0];h&&(this._activeLineGraphic.symbol=u,x.symbol=c,this._internalGraphicsLayer.add(this._vertexGraphics[1])),this.createGraphic?this.createGraphic.set({geometry:g,symbol:p}):this._set("createGraphic",new w.a(g,p)),this._internalGraphicsLayer.remove(x),this._internalGraphicsLayer.add(x)}else if(n.length>2){var k=f?e.createPolygon([n],l,i,!0):e.createPolyline([n],l,i);"polygon"===t&&this._showFillGraphic(k);var S=n.map((function(e){return e.slice()})),M=S.pop(),I=[S[S.length-1],M],T=e.createPolyline([S],l,i),A=e.createPolyline([I],l,i);this._showLineGraphic(T),this._showActiveLineGraphic(A);for(var C=0;C<S.length;C++){var E=this._vertexGraphics[C];if(E)E.symbol=h||C!==this._vertexGraphics.length-1?c:o;else{var P=this.createPointFromVertex(n[C]);this._showVertexGraphic(P)}}if(h){this._activeLineGraphic.symbol=u;var R=this.createPointFromVertex(n[n.length-1]);this._showVertexGraphic(R)}else this._activeLineGraphic.symbol=a;this.createGraphic?this.createGraphic.set({geometry:k,symbol:p}):(this._removeCreateGraphic(),this._set("createGraphic",new w.a(k,p)));var D,L=Vt(this._vertexGraphics);try{for(L.s();!(D=L.n()).done;){var N=D.value;this._internalGraphicsLayer.remove(N),this._internalGraphicsLayer.add(N)}}catch(F){L.e(F)}finally{L.f()}}}}},{key:"_drawSegmentGraphic",value:function(e,t,n,r,a){if(n.length){var o,s=!(null==r||!r.centered),u=!(null==r||!r.constrainToggle);1===n.length?this._removeCenterIndicatorGraphic():("rectangle"===t?o=u?e.createSquare(n,a,s):e.createRectangle(n,a,s):"circle"===t&&(o=u?e.createEllipse(n,a,s):e.createCircle(n,a,s,this.view.resolution)),Object(i.k)(o)&&o.extent&&o.extent.center&&this._showCenterIndicatorGraphic(o.extent.center)),o?this.createGraphic?this.createGraphic.geometry=o:(this._removeCreateGraphic(),this._set("createGraphic",new w.a(o,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}}},{key:"_showCenterIndicatorGraphic",value:function(e){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=e:(this._centerIndicatorGraphic=new w.a(e,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))}},{key:"_removeCenterIndicatorGraphic",value:function(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)}},{key:"_showActiveLineGraphic",value:function(e){this._activeLineGraphic?(this._activeLineGraphic.set({geometry:e,symbol:this.activeLineSymbol}),this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new w.a(e,this.activeLineSymbol),this._internalGraphicsLayer.add(this._activeLineGraphic)}},{key:"_showFillGraphic",value:function(e){this._activeFillGraphic?(this._activeFillGraphic.set({geometry:e,symbol:this.activeFillSymbol}),this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new w.a(e,this.activeFillSymbol),this._internalGraphicsLayer.add(this._activeFillGraphic)}},{key:"_showLineGraphic",value:function(e){this._lineGraphic?(this._lineGraphic.set({geometry:e,symbol:this.polylineSymbol}),this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new w.a(e,this.polylineSymbol),this._internalGraphicsLayer.add(this._lineGraphic)}},{key:"_showVertexGraphic",value:function(e,t){var n=new w.a(e,t?this.activeVertexSymbol:this.vertexSymbol);this._vertexGraphics.push(n),this._internalGraphicsLayer.add(n)}},{key:"_resetCreateOperationGraphics",value:function(){this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeActiveLineGraphic(),this._removeVertexGraphics(),this._removeCloneGraphics()}},{key:"_removeCreateGraphic",value:function(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",null))}},{key:"_removeCreateOperationGraphics",value:function(){this._removeCenterIndicatorGraphic(),this._removeActiveLineGraphic(),this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeVertexGraphics()}},{key:"_removeActiveLineGraphic",value:function(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)}},{key:"_removeActiveFillGraphic",value:function(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),this._activeFillGraphic.destroy(),this._activeFillGraphic=null)}},{key:"_removeLineGraphic",value:function(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)}},{key:"_removeVertexGraphics",value:function(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach((function(e){return e.destroy()})),this._vertexGraphics=[])}},{key:"_removeDefaultLayer",value:function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)}},{key:"_operationHandleForCreateAction",value:function(e,t,n){var r=this;return new Se({activeComponent:this._draw,tool:n,type:"create",onEnd:function(){t.forEach((function(e){return e.remove()})),t.length=0,r._removeCreateOperationGraphics(),r._internalGraphicsLayer&&r._internalGraphicsLayer.remove(r.createGraphic),r._displayDefaultCursor()},undo:function(){e.undo(),r._emitUndoEvent({graphics:[r.createGraphic],tool:n})},redo:function(){e.redo(),r._emitRedoEvent({graphics:[r.createGraphic],tool:n})},canUndo:function(){return e&&e.canUndo()},canRedo:function(){return e&&e.canRedo()}})}},{key:"_isComponentGraphic",value:function(e){var t=this.activeComponent;return!(!e||Object(i.j)(t))&&(!(!e.attributes||!e.attributes.esriSketchTool)||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}},{key:"_snapLastPolygonVertexToFirst",value:function(e,t){if(!("polygon"!==e&&t.length<=2)){var n=t[0],r=t[t.length-1],i=this.view.toScreen(new l.a(n[0],n[1],this.view.spatialReference)),a=this.view.toScreen(new l.a(r[0],r[1],this.view.spatialReference));this._isWithinScreenDistance(i,a,this._getVertexIntersectDistance())&&(r[0]=n[0],r[1]=n[1])}}},{key:"_getVertexIntersectDistance",value:function(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?Object(v.h)(this.vertexSymbol.size)/2+3:3}},{key:"_isWithinScreenDistance",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)<=n}},{key:"_displayPointerCursor",value:function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}},{key:"_displayGrabbingCursor",value:function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}},{key:"_displayCrosshairCursor",value:function(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")}},{key:"_displayDefaultCursor",value:function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}},{key:"_logError",value:function(e,t,n){Ie.error(new u.a(e,t,n))}},{key:"_requireModule",value:(r=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,this._moduleLoaderAbortController=n,e.next=4,t;case 4:return r=e.sent,e.abrupt("return",this._moduleLoaderAbortController!==n||n.signal.aborted?{requireError:"aborted"}:{module:r});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_emitUndoEvent",value:function(e){this.emit("undo",Nt(Nt({},e),{},{type:"undo"}))}},{key:"_emitRedoEvent",value:function(e){this.emit("redo",Nt(Nt({},e),{},{type:"redo"}))}},{key:"_emitDeleteEvent",value:function(e){this.emit("delete",Nt(Nt({},e),{},{type:"delete"}))}},{key:"createPointFromVertex",value:function(e){return e.length>2?new l.a(e[0],e[1],e[2],this.view.spatialReference):new l.a(e[0],e[1],this.view.spatialReference)}},{key:"test",value:function(){return this._operationHandle}},{key:"wait",value:function(){return Object(j.whenNotOnce)(this,"updating")}},{key:"_beginAsyncOperation",value:function(){this._numUpdating+=1,this.notifyChange("updating")}},{key:"_endAsyncOperation",value:function(){this._numUpdating-=1,this.notifyChange("updating")}},{key:"_disablePopupEnabled",value:function(e){var t;return"3d"!==(null==(t=this.view)?void 0:t.type)||this.updateOnGraphicClick||Object(i.k)(e)&&e.toggleToolOnClick}},{key:"_disablePopup",value:function(e){if(this._disablePopupEnabled(e)){var t=this.view.popup;t&&Object(i.j)(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}}},{key:"_restorePopup",value:function(e){if(this._disablePopupEnabled(e)){var t=this.view.popup;t&&Object(i.k)(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}}},{key:"_waitViewReady",value:(t=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.view,!e.t0){e.next=6;break}return Object(i.a)(this._viewReadyAbortController),this._viewReadyAbortController=Object(c.d)(),e.next=6,Object(c.x)(Object(j.whenOnce)(this.view,"ready"),this._viewReadyAbortController.signal);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),X}(f.a.EventedAccessor);function Pe(e,t){var n=e.history.undo.pop().updates,r=[];t.forEach((function(e,t){var a=n[t],o={};null!=a&&(Object(i.k)(a.geometry)&&(o.geometry=e.geometry,e.geometry=a.geometry),Object(i.k)(a.symbol)&&(o.symbol=e.symbol,e.symbol=a.symbol),r.push(o))})),e.history.redo.push({updates:r})}function Re(e,t){var n=e.history.redo.pop().updates,r=[];t.forEach((function(e,t){var a=n[t],o={};null!=a&&(Object(i.k)(a.geometry)&&(o.geometry=e.geometry,e.geometry=a.geometry),Object(i.k)(a.symbol)&&(o.symbol=e.symbol,e.symbol=a.symbol),r.push(o))})),e.history.undo.push({updates:r})}function De(e){return{updates:e.map((function(e){return{geometry:e.geometry}}))}}function Le(e){return{updates:e.map((function(e){return{symbol:e.symbol}}))}}function Ne(e){return"requireError"in e&&"aborted"===e.requireError}Object(r.a)([Object(o.b)({readOnly:!0})],Ee.prototype,"_draw",null),Object(r.a)([Object(o.b)()],Ee.prototype,"updating",null),Object(r.a)([Object(o.b)()],Ee.prototype,"_operationHandle",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],Ee.prototype,"activeTool",null),Object(r.a)([Object(o.b)()],Ee.prototype,"activeFillSymbol",void 0),Object(r.a)([Object(o.b)()],Ee.prototype,"activeLineSymbol",void 0),Object(r.a)([Object(o.b)()],Ee.prototype,"activeVertexSymbol",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],Ee.prototype,"createGraphic",null),Object(r.a)([Object(o.b)()],Ee.prototype,"defaultCreateOptions",null),Object(r.a)([Object(o.b)()],Ee.prototype,"defaultUpdateOptions",null),Object(r.a)([Object(o.b)()],Ee.prototype,"layer",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"pointSymbol",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"polygonSymbol",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"polylineSymbol",void 0),Object(r.a)([Object(o.b)({type:R,nonNullable:!0})],Ee.prototype,"snappingOptions",null),Object(r.a)([Object(o.b)()],Ee.prototype,"_snappingManager",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],Ee.prototype,"state",null),Object(r.a)([Object(o.b)({readOnly:!0})],Ee.prototype,"updateGraphics",void 0),Object(r.a)([Object(o.b)()],Ee.prototype,"updateOnGraphicClick",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"updatePointSymbol",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"updatePolygonSymbol",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"updatePolylineSymbol",void 0),Object(r.a)([Object(o.b)({types:m.g})],Ee.prototype,"vertexSymbol",void 0),Object(r.a)([Object(o.b)({value:null})],Ee.prototype,"view",null),Object(r.a)([Object(o.b)()],Ee.prototype,"cancel",null),Object(r.a)([Object(o.b)()],Ee.prototype,"complete",null),Object(r.a)([Object(o.b)()],Ee.prototype,"delete",null),Object(r.a)([Object(o.b)()],Ee.prototype,"create",null),Object(r.a)([Object(o.b)()],Ee.prototype,"update",null),Object(r.a)([Object(o.b)()],Ee.prototype,"undo",null),Object(r.a)([Object(o.b)()],Ee.prototype,"redo",null),Object(r.a)([Object(o.b)()],Ee.prototype,"canUndo",null),Object(r.a)([Object(o.b)()],Ee.prototype,"canRedo",null),Object(r.a)([Object(o.b)()],Ee.prototype,"toggleUpdateTool",null),Ee=Object(r.a)([Object(s.a)(Me)],Ee),t.a=Ee},oSUa:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b}));var r=n("Cy1f"),i=n("5DEt"),a=n("IRkY"),o=n("M0lq"),s=n("8JEK"),u=n("jZU2");function c(e){return e?{p0:Object(r.d)(e.p0),p1:Object(r.d)(e.p1),p2:Object(r.d)(e.p2)}:{p0:Object(r.e)(),p1:Object(r.e)(),p2:Object(r.e)()}}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c();return Object(i.j)(r.p0,e),Object(i.j)(r.p1,t),Object(i.j)(r.p2,n),r}function h(e,t,n){var r=Object(o.i)(e,t),i=Object(o.i)(t,n),a=Object(o.i)(n,e),s=(r+i+a)/2,u=s*(s-r)*(s-i)*(s-a);return u<=0?0:Math.sqrt(u)}function f(e,t,n){return Object(i.i)(v,t,e),Object(i.i)(y,n,e),Object(i.o)(Object(i.f)(v,v,y))/2}var p=new a.a(u.a),d=new a.a((function(){return{p0:null,p1:null,p2:null}})),v=Object(r.e)(),y=Object(r.e)(),b=Object.freeze({__proto__:null,create:c,wrap:function(e,t,n){var r=d.get();return r.p0=e,r.p1=t,r.p2=n,r},copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return l(e.p0,e.p1,e.p2,t)},fromValues:l,distance2:function(e,t){var n=e.p0,r=e.p1,a=e.p2,o=Object(i.i)(s.d.get(),r,n),c=Object(i.i)(s.d.get(),a,r),l=Object(i.i)(s.d.get(),n,a),h=Object(i.i)(s.d.get(),t,n),f=Object(i.i)(s.d.get(),t,r),d=Object(i.i)(s.d.get(),t,a),v=Object(i.f)(o,o,l),y=Object(i.g)(Object(i.f)(s.d.get(),o,v),h),b=Object(i.g)(Object(i.f)(s.d.get(),c,v),f),g=Object(i.g)(Object(i.f)(s.d.get(),l,v),d);if(y>0&&b>0&&g>0){var m=Object(i.g)(v,h);return m*m/Object(i.g)(v,v)}var w=Object(u.b)(Object(u.c)(n,o,p.get()),t),O=Object(u.b)(Object(u.c)(r,c,p.get()),t),j=Object(u.b)(Object(u.c)(a,l,p.get()),t);return Math.min(w,O,j)},intersectRay:function(e,t,n){var r=1e-5,a=t.direction,o=t.origin,s=e.p0,u=e.p1,c=e.p2,l=u[0]-s[0],h=u[1]-s[1],f=u[2]-s[2],p=c[0]-s[0],d=c[1]-s[1],v=c[2]-s[2],y=a[1]*v-d*a[2],b=a[2]*p-v*a[0],g=a[0]*d-p*a[1],m=l*y+h*b+f*g;if(m>-r&&m<r)return!1;var w=1/m,O=o[0]-s[0],j=o[1]-s[1],_=o[2]-s[2],x=w*(O*y+j*b+_*g);if(x<0||x>1)return!1;var k=j*f-h*_,S=_*l-f*O,M=O*h-l*j,I=w*(a[0]*k+a[1]*S+a[2]*M);return!(I<0||x+I>1||(n&&(Object(i.d)(n,a,w*(p*k+d*S+v*M)),Object(i.e)(n,o,n)),0))},areaPoints2d:h,area2d:function(e){return h(e.p0,e.p1,e.p2)},areaPoints3d:f})},oXfm:function(e,t,n){"use strict";var r,i=n("vn/o"),a=n("B/RK"),o=n("yDR0"),s=n("7tol"),u=n("Tcbo");function c(e,t){return e.msg=u[t],t}function l(e){return(e<<1)-(e>4?9:0)}function h(e){for(var t=e.length;--t>=0;)e[t]=0}function f(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function p(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,f(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function v(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function y(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,l=e.w_mask,h=e.prev,f=e.strstart+258,p=c[a+o-1],d=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===d&&c[n+o-1]===p&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<f);if(r=258-(f-a),a=f-258,r>o){if(e.match_start=t,o=r,r>=s)break;p=c[a+o-1],d=c[a+o]}}}while((t=h[t&l])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function b(e){var t,n,r,a,u,c,l,h,f,p,d=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-262)){i.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=d?r-d:0}while(--n);t=n=d;do{r=e.prev[--t],e.prev[t]=r>=d?r-d:0}while(--n);a+=d}if(0===e.strm.avail_in)break;if(l=e.window,h=e.strstart+e.lookahead,p=void 0,(p=(c=e.strm).avail_in)>(f=a)&&(p=f),n=0===p?0:(c.avail_in-=p,i.arraySet(l,c.input,c.next_in,p,h),1===c.state.wrap?c.adler=o(c.adler,l,p,h):2===c.state.wrap&&(c.adler=s(c.adler,l,p,h)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(e.ins_h=e.window[u=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function g(e,t){for(var n,r;;){if(e.lookahead<262){if(b(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=y(e,n)),e.match_length>=3)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}function m(e,t){for(var n,r,i;;){if(e.lookahead<262){if(b(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=y(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(p(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&p(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}function w(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function j(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):c(e,-2)}function _(e){var t,n=j(e);return 0===n&&((t=e.state).window_size=2*t.w_size,h(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function x(e,t,n,r,a,o){if(!e)return-2;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return c(e,-2);8===r&&(r=9);var u=new O;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=n,_(e)}r=[new w(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(b(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,p(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(p(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&p(e,!1),1)})),new w(4,4,8,4,g),new w(4,5,16,8,g),new w(4,6,32,32,g),new w(4,4,16,16,m),new w(8,16,32,32,m),new w(8,16,128,128,m),new w(8,32,128,256,m),new w(32,128,258,1024,m),new w(32,258,258,4096,m)],t.deflateInit=function(e,t){return x(e,t,8,15,8,0)},t.deflateInit2=x,t.deflateReset=_,t.deflateResetKeep=j,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var n,i,o,u;if(!e||!e.state||t>5||t<0)return e?c(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return c(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,d(i,31),d(i,139),d(i,8),i.gzhead?(d(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),d(i,255&i.gzhead.time),d(i,i.gzhead.time>>8&255),d(i,i.gzhead.time>>16&255),d(i,i.gzhead.time>>24&255),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(d(i,255&i.gzhead.extra.length),d(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(d(i,0),d(i,0),d(i,0),d(i,0),d(i,0),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,v(i,y),0!==i.strstart&&(v(i,e.adler>>>16),v(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),f(e),o=i.pending,i.pending!==i.pending_buf_size));)d(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),f(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),f(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(e),i.pending+2<=i.pending_buf_size&&(d(i,255&e.adler),d(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&l(t)<=l(n)&&4!==t)return c(e,-5);if(666===i.status&&0!==e.avail_in)return c(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var g=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(b(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=258){if(b(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==g&&4!==g||(i.status=666),1===g||3===g)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===g&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(d(i,255&e.adler),d(i,e.adler>>8&255),d(i,e.adler>>16&255),d(i,e.adler>>24&255),d(i,255&e.total_in),d(i,e.total_in>>8&255),d(i,e.total_in>>16&255),d(i,e.total_in>>24&255)):(v(i,e.adler>>>16),v(i,65535&e.adler)),f(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?c(e,-2):(e.state=null,113===t?c(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,r,a,s,u,c,l,f,p=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(h(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),u=e.avail_in,c=e.next_in,l=e.input,e.avail_in=p,e.next_in=0,e.input=t,b(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,b(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=u,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},of9L:function(e,t,n){"use strict";var r=n("srIe"),i=n("OKTS"),a=n("xRQN"),o=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Wt(this,e),this._context=null,this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(0,this),this._context=t,this._descriptor=Nt({target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1},n),this.setData(r)}return Zt(e,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"dispose",value:function(){if(this._context&&this._context.gl){if(this._glName){var e=this._context.gl;this._context.unbindTextureAllUnits(this),e.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}},{key:"release",value:function(){this.dispose()}},{key:"resize",value:function(e,t){var n=this._descriptor;n.width===e&&n.height===t||(n.width=e,n.height=t,this.setData(null))}},{key:"setData",value:function(t){if(this._context&&this._context.gl){var n=this._context.gl;this._glName||(this._glName=n.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var i=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var a=this._descriptor;e._validateTexture(this._context,a),n.pixelStorei(n.UNPACK_ALIGNMENT,a.unpackAlignment),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0);var o=a.pixelFormat,s=a.internalFormat?a.internalFormat:o;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){var u=t.width,c=t.height;t instanceof HTMLVideoElement&&(u=t.videoWidth,c=t.videoHeight),a.width&&a.height&&console.assert(u===a.width&&c===a.height),n.texImage2D(n.TEXTURE_2D,0,s,o,a.dataType,t),a.hasMipmap&&this.generateMipmap(),void 0===a.width&&(a.width=u),void 0===a.height&&(a.height=c)}else{null!=a.width&&null!=a.height||console.error("Width and height must be specified!"),n.DEPTH24_STENCIL8&&s===n.DEPTH_STENCIL&&(s=n.DEPTH24_STENCIL8);var l=a.width,h=a.height;if(function(e){return Object(r.k)(e)&&"type"in e&&"compressed"===e.type}(t)){var f=Math.round(Math.log(Math.max(l,h))/Math.LN2)+1;a.hasMipmap=a.hasMipmap&&f===t.levels.length;for(var p=0;;++p){var d=t.levels[Math.min(p,t.levels.length-1)];if(n.compressedTexImage2D(n.TEXTURE_2D,p,s,l,h,0,d),1===l&&1===h||!a.hasMipmap)break;l=Math.max(1,l>>1),h=Math.max(1,h>>1)}}else if(Object(r.k)(t))n.texImage2D(n.TEXTURE_2D,0,s,l,h,0,o,a.dataType,t),a.hasMipmap&&this.generateMipmap();else for(var v=0;n.texImage2D(n.TEXTURE_2D,v,s,l,h,0,o,a.dataType,null),(1!==l||1!==h)&&a.hasMipmap;++v)l=Math.max(1,l>>1),h=Math.max(1,h>>1)}e._applySamplingMode(n,this._descriptor),e._applyWrapMode(n,this._descriptor),e._applyAnisotropicFilteringParameters(this._context,this._descriptor),i&&this._context.bindTexture(i,0)}}},{key:"updateData",value:function(e,t,n,r,i,a){a||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var o=this._context.gl,s=this._descriptor,u=this._context.getBoundTexture(0);this._context.bindTexture(this,0),(t<0||n<0||r>s.width||i>s.height||t+r>s.width||n+i>s.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,s.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,s.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.preMultiplyAlpha?1:0),a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?o.texSubImage2D(o.TEXTURE_2D,e,t,n,s.pixelFormat,s.dataType,a):o.texSubImage2D(o.TEXTURE_2D,e,t,n,r,i,s.pixelFormat,s.dataType,a),this._context.bindTexture(u,0)}},{key:"generateMipmap",value:function(){var t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,e._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var n=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(n,0)}},{key:"setSamplingMode",value:function(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,e._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)}},{key:"setWrapMode",value:function(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,e._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}},{key:"applyChanges",value:function(){var t=this._context.gl,n=this._descriptor;this._samplingModeDirty&&(e._applySamplingMode(t,n),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,n),this._wrapModeDirty=!1)}}],[{key:"_validateTexture",value:function(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");var n=Object(i.h)(t.width)&&Object(i.h)(t.height);Object(a.a)(e.gl)||n||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}},{key:"_applySamplingMode",value:function(e,t){var n=t.samplingMode,r=t.samplingMode;9985===n||9987===n?(n=9729,t.hasMipmap||(r=9729)):9984!==n&&9986!==n||(n=9728,t.hasMipmap||(r=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r)}},{key:"_applyWrapMode",value:function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))}},{key:"_applyAnisotropicFilteringParameters",value:function(e,t){if(null!=t.maxAnisotropy){var n=e.capabilities.textureFilterAnisotropic;if(n){var r=e.gl;r.texParameterf(r.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}}}]),e}();t.a=o},ofM5:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("+opI"),u=n("RI0u"),c=n("r88o"),l=n("04ZG"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),f=n("WXCn"),p=n("Z4F+"),d=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),v=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).alias=null,r.defaultValue=void 0,r.description=null,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r.valueType=null,r}return Zt(n,[{key:"readDescription",value:function(e,t){var n,r=t.description;try{n=JSON.parse(r)}catch(i){}return n?n.value:null}},{key:"readValueType",value:function(e,t){var n,r=t.description;try{n=JSON.parse(r)}catch(i){}return n?d.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),n}(h.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],v.prototype,"alias",void 0),Object(i.a)([Object(o.b)({type:[String,Number],json:{write:{allowNull:!0}}})],v.prototype,"defaultValue",void 0),Object(i.a)([Object(o.b)()],v.prototype,"description",void 0),Object(i.a)([Object(c.a)("description")],v.prototype,"readDescription",null),Object(i.a)([Object(o.b)({types:f.d,json:{read:{reader:f.b},write:!0}})],v.prototype,"domain",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],v.prototype,"editable",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],v.prototype,"length",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],v.prototype,"name",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],v.prototype,"nullable",void 0),Object(i.a)([Object(u.a)(p.a)],v.prototype,"type",void 0),Object(i.a)([Object(o.b)()],v.prototype,"valueType",void 0),Object(i.a)([Object(c.a)("valueType",["description"])],v.prototype,"readValueType",null),v=r=Object(i.a)([Object(l.a)("esri.layers.support.Field")],v),t.a=v},ohva:function(e,t,n){"use strict";function r(e,t){if(e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)}function i(e,t,n){if(e.slice)return e.slice(t,n);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===n?n=e.length:(n<0&&(n+=e.length),n=Math.min(e.length,Math.max(0,n)));for(var r=Math.max(0,n-t),i=new(0,e.constructor)(r),a=0;a<r;a++)i[a]=e[t+a];return i}function a(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function o(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function s(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function u(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function c(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function l(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function h(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function f(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function p(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function d(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function v(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}function y(e){return e?128+e.buffer.byteLength+64:0}n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return i})),n.d(t,"n",(function(){return v}))},opr1:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return c}));var r=n("QhKk");function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=n*a-r*i;return u?(u=1/u,e[0]=a*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*s-a*o)*u,e[5]=(r*o-n*s)*u,e):null}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],l=n[1],h=n[2],f=n[3],p=n[4],d=n[5];return e[0]=r*c+a*l,e[1]=i*c+o*l,e[2]=r*h+a*f,e[3]=i*h+o*f,e[4]=r*p+a*d+s,e[5]=i*p+o*d+u,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*c,e[1]=i*l+o*c,e[2]=r*-c+a*l,e[3]=i*-c+o*l,e[4]=s,e[5]=u,e}function u(e,t,n){var r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=n[0],c=n[1];return e[0]=t[0]*u,e[1]=r*u,e[2]=i*c,e[3]=a*c,e[4]=o,e[5]=s,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*c+a*l+s,e[5]=i*c+o*l+u,e}function l(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function f(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:i,set:function(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e},invert:a,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:o,rotate:s,scale:u,translate:c,fromRotation:l,fromScaling:h,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},subtract:f,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=t[0],l=t[1],h=t[2],f=t[3],p=t[4],d=t[5];return Math.abs(n-c)<=r.a*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=r.a*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=r.a*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=r.a*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-p)<=r.a*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-d)<=r.a*Math.max(1,Math.abs(u),Math.abs(d))},mul:o,sub:f})},orEy:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("r88o"),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=n("QQZE"),h=n("tanU"),f=n("3z0I"),p=(n("WXCn"),n("rOQw")),d=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).id=null,r.name=null,r.domains=null,r.templates=null,r}return Zt(n,[{key:"readDomains",value:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];switch(r.type){case"range":t[n]=f.a.fromJSON(r);break;case"codedValue":t[n]=l.a.fromJSON(r);break;case"inherited":t[n]=h.a.fromJSON(r)}}return t}},{key:"writeDomains",value:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]&&e[r].toJSON());Object(i.c)(n),t.domains=n}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new p.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),n}(c.a);Object(r.a)([Object(a.b)({json:{write:!0}})],d.prototype,"id",void 0),Object(r.a)([Object(a.b)({json:{write:!0}})],d.prototype,"name",void 0),Object(r.a)([Object(a.b)({json:{write:!0}})],d.prototype,"domains",void 0),Object(r.a)([Object(o.a)("domains")],d.prototype,"readDomains",null),Object(r.a)([Object(u.a)("domains")],d.prototype,"writeDomains",null),Object(r.a)([Object(a.b)({json:{write:!0}})],d.prototype,"templates",void 0),Object(r.a)([Object(o.a)("templates")],d.prototype,"readTemplates",null),Object(r.a)([Object(u.a)("templates")],d.prototype,"writeTemplates",null),d=Object(r.a)([Object(s.a)("esri.layers.support.FeatureType")],d),t.a=d},ouUy:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).field=null,r.order=null,r}return Zt(n,[{key:"clone",value:function(){return new r({field:this.field,order:this.order})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"field",void 0),Object(i.a)([Object(a.b)({type:["asc","desc"],json:{write:!0}})],u.prototype,"order",void 0),u=r=Object(i.a)([Object(o.a)("esri.popup.support.RelatedRecordsInfoFieldOrder")],u),t.a=u},"p+Gi":function(e,t,n){"use strict";n.r(t);var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=n("srIe"),o=n("6S2I"),s=n("zqDF"),u=n("WbKI"),c=n("r88o"),l=n("04ZG"),h=n("zlDU"),f=n("4EHJ"),p=(n("ju1D"),n("9AIY"),n("ag7Y")),d=n("OvF4"),v=n("ss0y"),y=n("bV/r"),b=n("AiS/"),g=n("Gj5k"),m=n("/CmD"),w=o.a.getLogger("esri.portal.PortalItemResource"),O=function(e){Kt(i,e);var t,r=Xt(i);function i(e){var t;return Wt(this,i),(t=r.call(this,e)).portalItem=null,t}return Zt(i,[{key:"normalizeCtorArgs",value:function(e){return e&&e.portalItem&&e.path?Nt(Nt({},e),{},{path:this.normalizePath(e.path,e.portalItem)}):e}},{key:"path",set:function(e){Object(a.k)(e)&&Object(f.s)(e)?w.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}},{key:"_castPath",value:function(e){return this.normalizePath(e,this.portalItem)}},{key:"url",get:function(){return this.portalItem&&this.path?"".concat(this.portalItem.itemUrl,"/resources/").concat(this.path):null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?"./resources/"+this.path:null}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=arguments.length>1?arguments[1]:void 0,n=this.url;if(Object(a.j)(n))throw new h.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(n,{responseType:e,signal:Object(a.i)(t,"signal")})}},{key:"update",value:(t=Ut(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(0).then(n.bind(null,"5qYV"));case 2:return e.abrupt("return",e.sent.addOrUpdateResource(this,"update",t,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"hasPath",value:function(){return Object(a.k)(this.path)}},{key:"normalizePath",value:function(e,t){return Object(a.j)(e)?e:(e=e.replace(/^\/+/,""),Object(a.k)(t)&&Object(f.s)(e)&&(e=Object(f.B)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}}]),i}(m.a);Object(r.a)([Object(u.b)()],O.prototype,"portalItem",void 0),Object(r.a)([Object(u.b)({type:String,value:null})],O.prototype,"path",null),Object(r.a)([Object(g.a)("path")],O.prototype,"_castPath",null),Object(r.a)([Object(u.b)({type:String,readOnly:!0})],O.prototype,"url",null),Object(r.a)([Object(u.b)({type:String,readOnly:!0})],O.prototype,"itemRelativeUrl",null);var j=O=Object(r.a)([Object(l.a)("esri.portal.PortalItemResource")],O),_=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).created=null,r.rating=null,r}return n}(m.a);Object(r.a)([Object(u.b)()],_.prototype,"created",void 0),Object(r.a)([Object(u.b)()],_.prototype,"rating",void 0);var x,k=_=Object(r.a)([Object(l.a)("esri.portal.PortalRating")],_),S=x=function(e){Kt(l,e);var t,r,o,u,c=Xt(l);function l(e){var t;return Wt(this,l),(t=c.call(this,e)).access=null,t.accessInformation=null,t.applicationProxies=null,t.avgRating=null,t.categories=null,t.created=null,t.culture=null,t.description=null,t.extent=null,t.groupCategories=null,t.id=null,t.itemControl=null,t.licenseInfo=null,t.modified=null,t.name=null,t.numComments=null,t.numRatings=null,t.numViews=null,t.owner=null,t.ownerFolder=null,t.portal=null,t.screenshots=null,t.size=null,t.snippet=null,t.sourceJSON=null,t.tags=null,t.title=null,t.type=null,t.typeKeywords=null,t.url=null,t}return Zt(l,[{key:"destroy",value:function(){this.portal=null}},{key:"displayName",get:function(){var e=this.type,t=this.typeKeywords||[],n=e;return"Feature Service"===e||"Feature Collection"===e?n=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?n=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?n="Scene Layer":"Scene Package"===e?n="Scene Layer Package":"Stream Service"===e?n="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?n=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?n="Locator":"Geoenrichment Service"===e?n="GeoEnrichment Service":"Microsoft Powerpoint"===e?n="Microsoft PowerPoint":"GeoJson"===e?n="GeoJSON":"Globe Service"===e?n="Globe Layer":"Vector Tile Service"===e?n="Tile Layer":"netCDF"===e?n="NetCDF":"Map Service"===e?n=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?n=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?n="Big Data File Share":"Compact Tile Package"===e&&(n="Tile Package (tpkx)"),n}},{key:"readExtent",value:function(e){return e&&e.length?new d.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}},{key:"iconUrl",get:function(){var e,t=this.type&&this.type.toLowerCase()||"",n=this.typeKeywords||[],r=!1,i=!1,a=!1,o=!1,s=!1,u=!1;return t.indexOf("service")>0||"feature collection"===t||"kml"===t||"wms"===t||"wmts"===t||"wfs"===t?(r=n.indexOf("Hosted Service")>-1,"feature service"===t||"feature collection"===t||"kml"===t||"wfs"===t?(i=n.indexOf("Table")>-1,a=n.indexOf("Route Layer")>-1,o=n.indexOf("Markup")>-1,s=-1!==n.indexOf("Spatiotemporal"),u=-1!==n.indexOf("UtilityNetwork"),e=s&&i?"spatiotemporaltable":i?"table":a?"routelayer":o?"markup":s?"spatiotemporal":r?"featureshosted":u?"utilitynetwork":"features"):e="map service"===t||"wms"===t||"wmts"===t?r||n.indexOf("Tiled")>-1||"wmts"===t?"maptiles":"mapimages":"scene service"===t?n.indexOf("Line")>-1?"sceneweblayerline":n.indexOf("3DObject")>-1?"sceneweblayermultipatch":n.indexOf("Point")>-1?"sceneweblayerpoint":n.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":n.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":n.indexOf("Polygon")>-1?"sceneweblayerpolygon":n.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===t?n.indexOf("Elevation 3D Layer")>-1?"elevationlayer":n.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===t?"streamlayer":"vector tile service"===t?"vectortile":"datastore catalog service"===t?"datastorecollection":"geocoding service"===t?"geocodeservice":"geoprocessing service"===t&&n.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):e="web map"===t||"cityengine web scene"===t?"maps":"web scene"===t?n.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===t||"mobile application"===t||"application"===t||"operation view"===t||"desktop application"===t?"apps":"map document"===t||"map package"===t||"published map"===t||"scene document"===t||"globe document"===t||"basemap package"===t||"mobile basemap package"===t||"mobile map package"===t||"project package"===t||"project template"===t||"pro map"===t||"layout"===t||"layer"===t&&n.indexOf("ArcGIS Pro")>-1||"explorer map"===t&&n.indexOf("Explorer Document")?"mapsgray":"service definition"===t||"csv"===t||"shapefile"===t||"cad drawing"===t||"geojson"===t||"360 vr experience"===t||"netcdf"===t||"administrative report"===t?"datafiles":"explorer add in"===t||"desktop add in"===t||"windows viewer add in"===t||"windows viewer configuration"===t?"appsgray":"arcgis pro add in"===t||"arcgis pro configuration"===t?"addindesktop":"rule package"===t||"file geodatabase"===t||"sqlite geodatabase"===t||"csv collection"===t||"kml collection"===t||"windows mobile package"===t||"map template"===t||"desktop application template"===t||"gml"===t||"arcpad package"===t||"code sample"===t||"form"===t||"document link"===t||"earth configuration"===t||"operations dashboard add in"===t||"rules package"===t||"image"===t||"workflow manager package"===t||"explorer map"===t&&n.indexOf("Explorer Mapping Application")>-1||n.indexOf("Document")>-1?"datafilesgray":"network analysis service"===t||"geoprocessing service"===t||"geodata service"===t||"geometry service"===t||"geoprocessing package"===t||"locator package"===t||"geoprocessing sample"===t||"workflow manager service"===t?"toolsgray":"layer"===t||"layer package"===t||"explorer layer"===t?"layersgray":"scene package"===t?"scenepackage":"mobile scene package"===t?"mobilescenepackage":"tile package"===t||"compact tile package"===t?"tilepackage":"task file"===t?"taskfile":"report template"===t?"report-template":"statistical data collection"===t?"statisticaldatacollection":"insights workbook"===t?"workbook":"insights model"===t?"insightsmodel":"insights page"===t?"insightspage":"insights theme"===t?"insightstheme":"hub initiative"===t?"hubinitiative":"hubpage"===t?"hubpage":"hub event"===t?"hubevent":"hub site application"===t?"hubsite":"relational database connection"===t?"relationaldatabaseconnection":"big data file share"===t?"datastorecollection":"image collection"===t?"imagecollection":"style"===t?"style":"desktop style"===t?"desktopstyle":"dashboard"===t?"dashboard":"raster function template"===t?"rasterprocessingtemplate":"vector tile package"===t?"vectortilepackage":"ortho mapping project"===t?"orthomappingproject":"ortho mapping template"===t?"orthomappingtemplate":"solution"===t?"solutions":"geopackage"===t?"geopackage":"deep learning package"===t?"deeplearningpackage":"real time analytic"===t?"realtimeanalytics":"big data analytic"===t?"bigdataanalytics":"feed"===t?"feed":"excalibur imagery project"===t?"excaliburimageryproject":"notebook"===t?"notebook":"storymap"===t?"storymap":"survey123 add in"===t?"survey123addin":"mission"===t?"mission":"mission report"===t?"missionreport":"quickcapture project"===t?"quickcaptureproject":"pro report"===t?"proreport":"urban model"===t?"urbanmodel":"web experience"===t?"experiencebuilder":"web experience template"===t?"webexperiencetemplate":"workflow"===t?"workflow":"insights script"===t?"insightsscript":"kernel gateway connection"===t?"kernelgatewayconnection":"hub initiative template"===t?"hubinitiativetemplate":"storymap theme"===t?"storymaptheme":"knowledge graph"===t?"knowledgegraph":"maps",e?Object(v.a)("esri/images/portal/"+e+"16.png"):null}},{key:"isLayer",get:function(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}},{key:"itemUrl",get:function(){var e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){var e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"userItemUrl",get:function(){var e=this.get("portal.restUrl");if(!e)return null;var t=this.owner||this.get("portal.user.username");return t?"".concat(e,"/content/users/").concat(this.ownerFolder?"".concat(t,"/").concat(this.ownerFolder):t,"/items/").concat(this.id):null}},{key:"load",value:function(e){var t=this;this.portal||(this.portal=b.a.getDefault());var n=this.portal.load(e).then((function(){return t.sourceJSON?t.sourceJSON:t.id&&t.itemUrl?t.portal._request(t.itemUrl,{signal:Object(a.k)(e)?e.signal:null}):{}})).then((function(e){t.sourceJSON=e,t.read(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"addRating",value:function(e){var t={method:"post",query:{}};return e instanceof k&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((function(){return new k({rating:e,created:new Date})}))}},{key:"clone",value:function(){var e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(i.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(i.a)(this.categories),created:Object(i.a)(this.created),culture:this.culture,description:this.description,extent:Object(i.a)(this.extent),groupCategories:Object(i.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(i.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(i.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(i.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(i.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new x({sourceJSON:this.sourceJSON}).set(e)}},{key:"createPostQuery",value:function(){var e=this.toJSON();for(var t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}},{key:"deleteRating",value:function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((function(){}))}},{key:"fetchData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=arguments.length>1?arguments[1]:void 0;return this.portal._request(this.itemUrl+"/data",Nt({responseType:e},t))}},{key:"fetchRating",value:function(e){return this.portal._request(this.itemUrl+"/rating",e).then((function(e){return null!=e.rating?(e.created=new Date(e.created),new k(e)):null}))}},{key:"fetchRelatedItems",value:function(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",Nt({query:e},t),x)}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t}},{key:"reload",value:function(){var e=this;return this.portal._request(this.itemUrl,{cacheBust:!0}).then((function(t){return e.sourceJSON=t,e.read(t),e}))}},{key:"update",value:function(e){var t=this;return this.id?this.load().then((function(){return t.portal._signIn()})).then((function(){var n=e&&e.data,r={method:"post"};for(var i in r.query=t.createPostQuery(),r.query)null===r.query[i]&&(r.query[i]="");return r.query.clearEmptyFields=!0,null!=n&&("string"==typeof n?r.query.text=n:"object"==typeof n&&(r.query.text=JSON.stringify(n))),t.portal._request(t.userItemUrl+"/update",r).then((function(){return t.reload()}))})):Promise.reject(new h.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}},{key:"updateThumbnail",value:function(e){var t=this;return this.id?this.load().then((function(){return t.portal._signIn()})).then((function(){var n=e.thumbnail,r=e.filename,i={method:"post"};if("string"==typeof n)i.query=Object(f.u)(n)?{data:n}:{url:Object(f.z)(n)},Object(a.k)(r)&&(i.query.filename=r);else{var o=new FormData;Object(a.k)(r)?o.append("file",n,r):o.append("file",n),i.body=o}return t.portal._request(t.userItemUrl+"/updateThumbnail",i).then((function(){return t.reload()}))})):Promise.reject(new h.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}},{key:"fetchResources",value:(u=Ut(regeneratorRuntime.mark((function e(){var t,r,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=i.length>1?i[1]:void 0,e.next=4,n.e(0).then(n.bind(null,"5qYV"));case 4:return e.abrupt("return",e.sent.fetchResources(this,t,r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"addResource",value:(o=Ut(regeneratorRuntime.mark((function e(t,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(0).then(n.bind(null,"5qYV"));case 2:return a=e.sent,e.abrupt("return",(t.portalItem=this,a.addOrUpdateResource(t,"add",r,i)));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"removeResource",value:(r=Ut(regeneratorRuntime.mark((function e(t,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(0).then(n.bind(null,"5qYV"));case 2:if(i=e.sent,!t.portalItem||t.portalItem.itemUrl===this.itemUrl){e.next=5;break}throw new h.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");case 5:return e.abrupt("return",i.removeResource(this,t,r));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"removeAllResources",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(0).then(n.bind(null,"5qYV"));case 2:return e.abrupt("return",e.sent.removeAllResources(this,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"resourceFromPath",value:function(e){return new j({portalItem:this,path:e})}},{key:"toJSON",value:function(){var e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(i.c)(t)}},{key:"_getPostQuery",value:function(){var e=this.toJSON();for(var t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}}],[{key:"from",value:function(e){return Object(s.d)(x,e)}},{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new x({sourceJSON:e})}}]),l}(Object(p.b)(y.a));Object(r.a)([Object(u.b)({type:["private","shared","org","public"]})],S.prototype,"access",void 0),Object(r.a)([Object(u.b)()],S.prototype,"accessInformation",void 0),Object(r.a)([Object(u.b)({json:{read:{source:"appProxies"}}})],S.prototype,"applicationProxies",void 0),Object(r.a)([Object(u.b)()],S.prototype,"avgRating",void 0),Object(r.a)([Object(u.b)()],S.prototype,"categories",void 0),Object(r.a)([Object(u.b)({type:Date})],S.prototype,"created",void 0),Object(r.a)([Object(u.b)()],S.prototype,"culture",void 0),Object(r.a)([Object(u.b)()],S.prototype,"description",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],S.prototype,"displayName",null),Object(r.a)([Object(u.b)({type:d.a})],S.prototype,"extent",void 0),Object(r.a)([Object(c.a)("extent")],S.prototype,"readExtent",null),Object(r.a)([Object(u.b)()],S.prototype,"groupCategories",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],S.prototype,"iconUrl",null),Object(r.a)([Object(u.b)()],S.prototype,"id",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],S.prototype,"isLayer",null),Object(r.a)([Object(u.b)()],S.prototype,"itemControl",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],S.prototype,"itemUrl",null),Object(r.a)([Object(u.b)()],S.prototype,"licenseInfo",void 0),Object(r.a)([Object(u.b)({type:Date})],S.prototype,"modified",void 0),Object(r.a)([Object(u.b)()],S.prototype,"name",void 0),Object(r.a)([Object(u.b)()],S.prototype,"numComments",void 0),Object(r.a)([Object(u.b)()],S.prototype,"numRatings",void 0),Object(r.a)([Object(u.b)()],S.prototype,"numViews",void 0),Object(r.a)([Object(u.b)()],S.prototype,"owner",void 0),Object(r.a)([Object(u.b)()],S.prototype,"ownerFolder",void 0),Object(r.a)([Object(u.b)({type:b.a})],S.prototype,"portal",void 0),Object(r.a)([Object(u.b)()],S.prototype,"screenshots",void 0),Object(r.a)([Object(u.b)()],S.prototype,"size",void 0),Object(r.a)([Object(u.b)()],S.prototype,"snippet",void 0),Object(r.a)([Object(u.b)()],S.prototype,"sourceJSON",void 0),Object(r.a)([Object(u.b)()],S.prototype,"tags",void 0),Object(r.a)([Object(u.b)()],S.prototype,"thumbnail",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],S.prototype,"thumbnailUrl",null),Object(r.a)([Object(u.b)()],S.prototype,"title",void 0),Object(r.a)([Object(u.b)()],S.prototype,"type",void 0),Object(r.a)([Object(u.b)()],S.prototype,"typeKeywords",void 0),Object(r.a)([Object(u.b)()],S.prototype,"url",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],S.prototype,"userItemUrl",null),S=x=Object(r.a)([Object(l.a)("esri.portal.PortalItem")],S),t.default=S},"p//D":function(e,t,n){"use strict";t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},"p5/s":function(e,t,n){"use strict";n.r(t);var r=484813681109536e-20,i=Math.PI/2,a=.017453292519943295,o=57.29577951308232,s=Math.PI/4,u=2*Math.PI,c=3.14159265359,l={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},h={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},f=/[\s_\-\/\(\)]/g;function p(e,t){if(e[t])return e[t];for(var n,r=Object.keys(e),i=t.toLowerCase().replace(f,""),a=-1;++a<r.length;)if((n=r[a]).toLowerCase().replace(f,"")===i)return e[n]}var d=function(e){var t,n,r,i={},o=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e}),{}),s={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*a},lat_1:function(e){i.lat1=e*a},lat_2:function(e){i.lat2=e*a},lat_ts:function(e){i.lat_ts=e*a},lon_0:function(e){i.long0=e*a},lon_1:function(e){i.long1=e*a},lon_2:function(e){i.long2=e*a},alpha:function(e){i.alpha=parseFloat(e)*a},gamma:function(e){i.rectified_grid_angle=parseFloat(e)},lonc:function(e){i.longc=e*a},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;var t=p(h,e);t&&(i.to_meter=t.to_meter)},from_greenwich:function(e){i.from_greenwich=e*a},pm:function(e){var t=p(l,e);i.from_greenwich=(t||parseFloat(e))*a},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(i.axis=e)},approx:function(){i.approx=!0}};for(t in o)n=o[t],t in s?"function"==typeof(r=s[t])?r(n):i[r]=n:i[t]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},v=/\s/,y=/[A-Za-z]/,b=/[A-Za-z84]/,g=/[,\]]/,m=/[\d\.E\-\+]/;function w(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function O(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var r=n.reduce((function(e,t){return j(t,e),e}),t?{}:e);t&&(e[t]=r)}function j(e,t){if(Array.isArray(e)){var n=e.shift();if("PARAMETER"===n&&(n=e.shift()),1===e.length)return Array.isArray(e[0])?(t[n]={},void j(e[0],t[n])):void(t[n]=e[0]);if(e.length)if("TOWGS84"!==n){if("AXIS"===n)return n in t||(t[n]=[]),void t[n].push(e);var r;switch(Array.isArray(n)||(t[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[n]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&j(e[2],t[n]));case"SPHEROID":case"ELLIPSOID":return t[n]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&j(e[3],t[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void O(t,n,e);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return j(e,t[n]);return O(t,n,e)}}else t[n]=e;else t[n]=!0}else t[e]=!0}function _(e){return.017453292519943295*e}w.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;v.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},w.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(g.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},w.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},w.prototype.number=function(e){if(!m.test(e)){if(g.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},w.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},w.prototype.keyword=function(e){if(b.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!g.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},w.prototype.neutral=function(e){if(y.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(m.test(e))return this.word=e,void(this.state=3);if(!g.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},w.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var x=function(e){var t=new w(e).output(),n=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",n]);var i={};return j(t,i),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):e.projName="object"==typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION,e.AXIS){for(var t="",n=0,r=e.AXIS.length;n<r;++n){var i=e.AXIS[n][0].toLowerCase();-1!==i.indexOf("north")?t+="n":-1!==i.indexOf("south")?t+="s":-1!==i.indexOf("east")?t+="e":-1!==i.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;function o(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(a=e),a&&(e.datumCode=a.DATUM?a.DATUM.name.toLowerCase():a.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",_],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",_],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",_],["lat0","latitude_of_origin",_],["lat0","standard_parallel_1",_],["lat1","standard_parallel_1",_],["lat2","standard_parallel_2",_],["azimuth","Azimuth"],["alpha","azimuth",_],["srsCode","name"]].forEach((function(t){return a=(r=t)[1],void(!((i=r[0])in(n=e))&&a in n&&(n[i]=n[a],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,a})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=_(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(i),i};function k(e){var t=this;if(2===arguments.length){var n=arguments[1];k[e]="string"==typeof n?"+"===n.charAt(0)?d(arguments[1]):x(arguments[1]):n}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?k.apply(t,e):k(e)}));if("string"==typeof e){if(e in k)return k[e]}else"EPSG"in e?k["EPSG:"+e.EPSG]=e:"ESRI"in e?k["ESRI:"+e.ESRI]=e:"IAU2000"in e?k["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(k);var S=k,M=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],I=["3857","900913","3785","102113"],T=function(e,t){var n,r;if(e=e||{},!t)return e;for(r in t)void 0!==(n=t[r])&&(e[r]=n);return e},A=function(e,t,n){var r=e*t;return n/Math.sqrt(1-r*r)},C=function(e){return e<0?-1:1},E=function(e){return Math.abs(e)<=c?e:e-C(e)*u},P=function(e,t,n){var r=e*n;return r=Math.pow((1-r)/(1+r),.5*e),Math.tan(.5*(i-t))/r},R=function(e,t){for(var n,r,a=.5*e,o=i-2*Math.atan(t),s=0;s<=15;s++)if(n=e*Math.sin(o),o+=r=i-2*Math.atan(t*Math.pow((1-n)/(1+n),a))-o,Math.abs(r)<=1e-10)return o;return-9999};function D(e){return e}var L=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(e){var t,n,r=e.x,a=e.y;if(a*o>90&&a*o<-90&&r*o>180&&r*o<-180)return null;if(Math.abs(Math.abs(a)-i)<=1e-10)return null;if(this.sphere)t=this.x0+this.a*this.k0*E(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(s+.5*a));else{var u=Math.sin(a),c=P(this.e,a,u);t=this.x0+this.a*this.k0*E(r-this.long0),n=this.y0-this.a*this.k0*Math.log(c)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r=e.x-this.x0,a=e.y-this.y0;if(this.sphere)n=i-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var o=Math.exp(-a/(this.a*this.k0));if(-9999===(n=R(this.e,o)))return null}return t=E(this.long0+r/(this.a*this.k0)),e.x=t,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:D,inverse:D,names:["longlat","identity"]}],N={},F=[];function z(e,t){var n=F.length;return e.names?(F[n]=e,e.names.forEach((function(e){N[e.toLowerCase()]=n})),this):(console.log(t),!0)}var V={start:function(){L.forEach(z)},add:z,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==N[t]&&F[N[t]]?F[N[t]]:void 0}},G={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},U=G.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};G.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var B={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},q={};function H(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:q[e]||null,isNull:!1}}function W(e){return e/3600*Math.PI/180}function J(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function Z(e){return e.map((function(e){return[W(e.longitudeShift),W(e.latitudeShift)]}))}function K(e,t,n){return{name:J(e,t+8,t+16).trim(),parent:J(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function Y(e,t,n,r){for(var i=t+176,a=[],o=0;o<n.gridNodeCount;o++){var s={latitudeShift:e.getFloat32(i+16*o,r),longitudeShift:e.getFloat32(i+16*o+4,r),latitudeAccuracy:e.getFloat32(i+16*o+8,r),longitudeAccuracy:e.getFloat32(i+16*o+12,r)};a.push(s)}return a}function X(e,t){if(!(this instanceof X))return new X(e);t=t||function(e){if(e)throw e};var n=function(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in S}(e))return S[e];if(function(e){return M.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=x(e);if(function(e){var t=p(e,"authority");if(t){var n=p(t,"epsg");return n&&I.indexOf(n)>-1}}(t))return S["EPSG:3857"];var n=function(e){var t=p(e,"extension");if(t)return p(t,"proj4")}(t);return n?d(n):t}return function(e){return"+"===e[0]}(e)?d(e):void 0}(e);if("object"==typeof n){var i=X.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var a=p(B,n.datumCode);a&&(n.datum_params=n.datum_params||(a.towgs84?a.towgs84.split(","):null),n.ellps=a.ellipse,n.datumName=a.datumName?a.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o,s,u,c,l,h,f=function(e,t,n,r,i){if(!e){var a=p(G,r);a||(a=U),e=a.a,t=a.b,n=a.rf}return n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<1e-10)&&(i=!0,t=e),{a:e,b:t,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),v=(l=((u=(o=f.a)*o)-(c=(s=f.b)*s))/u,h=0,n.R_A?(u=(o*=1-l*(.16666666666666666+l*(.04722222222222222+.022156084656084655*l)))*o,l=0):h=Math.sqrt(l),{es:l,e:h,ep2:(u-c)/c}),y=function(e){return void 0===e?null:e.split(",").map(H)}(n.nadgrids),b=n.datum||function(e,t,n,i,a,o,s){var u={};return u.datum_type=void 0===e||"none"===e?5:4,t&&(u.datum_params=t.map(parseFloat),0===u.datum_params[0]&&0===u.datum_params[1]&&0===u.datum_params[2]||(u.datum_type=1),u.datum_params.length>3&&(0===u.datum_params[3]&&0===u.datum_params[4]&&0===u.datum_params[5]&&0===u.datum_params[6]||(u.datum_type=2,u.datum_params[3]*=r,u.datum_params[4]*=r,u.datum_params[5]*=r,u.datum_params[6]=u.datum_params[6]/1e6+1))),s&&(u.datum_type=3,u.grids=s),u.a=n,u.b=i,u.es=a,u.ep2=o,u}(n.datumCode,n.datum_params,f.a,f.b,v.es,v.ep2,y);T(this,n),T(this,i),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=v.es,this.e=v.e,this.ep2=v.ep2,this.datum=b,this.init(),t(null,this)}else t(e)}else t(e)}(X.projections=V).start();var Q=X;function $(e,t,n){var r,a,o,s=e.x,u=e.y,c=e.z?e.z:0;if(u<-i&&u>-1.001*i)u=-i;else if(u>i&&u<1.001*i)u=i;else{if(u<-i)return{x:-1/0,y:-1/0,z:e.z};if(u>i)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),a=Math.sin(u),o=Math.cos(u),{x:((r=n/Math.sqrt(1-t*(a*a)))+c)*o*Math.cos(s),y:(r+c)*o*Math.sin(s),z:(r*(1-t)+c)*a}}function ee(e,t,n,r){var i,a,o,s,u,c,l,h,f,p,d,v,y,b,g,m=e.x,w=e.y,O=e.z?e.z:0;if(i=Math.sqrt(m*m+w*w),a=Math.sqrt(m*m+w*w+O*O),i/n<1e-12){if(b=0,a/n<1e-12)return g=-r,{x:e.x,y:e.y,z:e.z}}else b=Math.atan2(w,m);o=O/a,h=(s=i/a)*(1-t)*(u=1/Math.sqrt(1-t*(2-t)*s*s)),f=o*u,y=0;do{y++,c=t*(l=n/Math.sqrt(1-t*f*f))/(l+(g=i*h+O*f-l*(1-t*f*f))),v=(d=o*(u=1/Math.sqrt(1-c*(2-c)*s*s)))*h-(p=s*(1-c)*u)*f,h=p,f=d}while(v*v>1e-24&&y<30);return{x:b,y:Math.atan(d/Math.abs(p)),z:g}}function te(e){return 1===e||2===e}function ne(e,t,n){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},a=[],s=0;s<e.grids.length;s++){var u=e.grids[s];if(a.push(u.name),u.isNull){i=r;break}if(null!==u.grid){var c=u.grid.subgrids[0],l=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4;if(!(c.ll[1]-l>r.y||c.ll[0]-l>r.x||c.ll[1]+(c.lim[1]-1)*c.del[1]+l<r.y||c.ll[0]+(c.lim[0]-1)*c.del[0]+l<r.x||(i=re(r,t,c),isNaN(i.x))))break}else if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*o+" "+r.y*o+" tried: '"+a+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function re(e,t,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return r;var i={x:e.x,y:e.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=E(i.x-Math.PI)+Math.PI;var a=ie(i,n);if(t){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var o,s,u=9;do{if(s=ie(a,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a.x+=(o={x:i.x-(s.x+a.x),y:i.y-(s.y+a.y)}).x,a.y+=o.y}while(u--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=E(a.x+n.ll[0]),r.y=a.y+n.ll[1]}else isNaN(a.x)||(r.x=e.x+a.x,r.y=e.y+a.y);return r}function ie(e,t){var n,r={x:e.x/t.del[0],y:e.y/t.del[1]},i=Math.floor(r.x),a=Math.floor(r.y),o=r.x-1*i,s=r.y-1*a,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=t.lim[0])return u;if(a<0||a>=t.lim[1])return u;var c=t.cvs[n=a*t.lim[0]+i][0],l=t.cvs[n][1];n++;var h=t.cvs[n][0],f=t.cvs[n][1],p=t.cvs[n+=t.lim[0]][0],d=t.cvs[n][1];n--;var v=t.cvs[n][1],y=o*s,b=o*(1-s),g=(1-o)*(1-s),m=(1-o)*s;return u.x=g*c+b*h+m*t.cvs[n][0]+y*p,u.y=g*l+b*f+m*v+y*d,u}var ae=function(e,t,n){var r,i,a,o=n.x,s=n.y,u=n.z||0,c={};for(a=0;a<3;a++)if(!t||2!==a||void 0!==n.z)switch(0===a?(r=o,i=-1!=="ew".indexOf(e.axis[a])?"x":"y"):1===a?(r=s,i=-1!=="ns".indexOf(e.axis[a])?"y":"x"):(r=u,i="z"),e.axis[a]){case"e":c[i]=r;break;case"w":c[i]=-r;break;case"n":c[i]=r;break;case"s":c[i]=-r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c},oe=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t};function se(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ue(e,t,n){var r;if(Array.isArray(n)&&(n=oe(n)),function(e){se(e.x),se(e.y)}(n),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(n=ue(e,r=new Q("WGS84"),n),e=r),"enu"!==e.axis&&(n=ae(e,!1,n)),"longlat"===e.projName)n={x:n.x*a,y:n.y*a,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),!(n=e.inverse(n)))return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=function(e,t,n){if(function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t))return n;if(5===e.datum_type||5===t.datum_type)return n;var r=e.a,i=e.es;if(3===e.datum_type){if(0!==ne(e,!1,n))return;r=6378137,i=.0066943799901413165}var a=t.a,o=t.b,s=t.es;return 3===t.datum_type&&(a=6378137,o=6356752.314,s=.0066943799901413165),i!==s||r!==a||te(e.datum_type)||te(t.datum_type)?(n=$(n,i,r),te(e.datum_type)&&(n=function(e,t,n){if(1===t)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(2===t){var r=n[3],i=n[4],a=n[5],o=n[6];return{x:o*(e.x-a*e.y+i*e.z)+n[0],y:o*(a*e.x+e.y-r*e.z)+n[1],z:o*(-i*e.x+r*e.y+e.z)+n[2]}}}(n,e.datum_type,e.datum_params)),te(t.datum_type)&&(n=function(e,t,n){if(1===t)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(2===t){var r=n[3],i=n[4],a=n[5],o=n[6],s=(e.x-n[0])/o,u=(e.y-n[1])/o,c=(e.z-n[2])/o;return{x:s+a*u-i*c,y:-a*s+u+r*c,z:i*s-r*u+c}}}(n,t.datum_type,t.datum_params)),n=ee(n,s,a,o),3!==t.datum_type||0===ne(t,!0,n)?n:void 0):n}(e.datum,t.datum,n))return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),"longlat"===t.projName?n={x:n.x*o,y:n.y*o,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),"enu"!==t.axis?ae(t,!0,n):n}var ce=Q("WGS84");function le(e,t,n){var r,i,a;return Array.isArray(n)?(r=ue(e,t,n)||{x:NaN,y:NaN},n.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=ue(e,t,n),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]})),i)}function he(e){return e instanceof Q?e:e.oProj?e.oProj:Q(e)}var fe=function(e,t,n){e=he(e);var r,i=!1;return void 0===t?(t=e,e=ce,i=!0):(void 0!==t.x||Array.isArray(t))&&(n=t,t=e,e=ce,i=!0),t=he(t),n?le(e,t,n):(r={forward:function(n){return le(e,t,n)},inverse:function(n){return le(t,e,n)}},i&&(r.oProj=t),r)},pe=73,de=79,ve={forward:ye,inverse:function(e){var t=we(je(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:be};function ye(e,t){return t=t||5,function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p="00000"+e.easting,d="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(l=e.easting,h=e.northing,f=Oe(e.zoneNumber),n=Math.floor(l/1e5),r=Math.floor(h/1e5)%20,a="AJSAJS".charCodeAt(i=f-1),o="AFAFAF".charCodeAt(i),c=!1,(s=a+n-1)>90&&(s=s-90+65-1,c=!0),(s===pe||a<pe&&s>pe||(s>pe||a<pe)&&c)&&s++,(s===de||a<de&&s>de||(s>de||a<de)&&c)&&++s===pe&&s++,s>90&&(s=s-90+65-1),(u=o+r)>86?(u=u-86+65-1,c=!0):c=!1,(u===pe||o<pe&&u>pe||(u>pe||o<pe)&&c)&&u++,(u===de||o<de&&u>de||(u>de||o<de)&&c)&&++u===pe&&u++,u>86&&(u=u-86+65-1),String.fromCharCode(s)+String.fromCharCode(u))+p.substr(p.length-5,t)+d.substr(d.length-5,t)}(function(e){var t,n,r,i,a,o,s=e.lat,u=e.lon,c=6378137,l=ge(s),h=ge(u);o=Math.floor((u+180)/6)+1,180===u&&(o=60),s>=56&&s<64&&u>=3&&u<12&&(o=32),s>=72&&s<84&&(u>=0&&u<9?o=31:u>=9&&u<21?o=33:u>=21&&u<33?o=35:u>=33&&u<42&&(o=37)),a=ge(6*(o-1)-180+3),t=c/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),n=Math.tan(l)*Math.tan(l),r=.006739496752268451*Math.cos(l)*Math.cos(l);var f,p,d=.9996*t*((i=Math.cos(l)*(h-a))+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,v=.9996*(c*(.9983242984503243*l-.002514607064228144*Math.sin(2*l)+2639046602129982e-21*Math.sin(4*l)-3.418046101696858e-9*Math.sin(6*l))+t*Math.tan(l)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));return s<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(d),zoneNumber:o,zoneLetter:(f=s,p="Z",84>=f&&f>=72?p="X":72>f&&f>=64?p="W":64>f&&f>=56?p="V":56>f&&f>=48?p="U":48>f&&f>=40?p="T":40>f&&f>=32?p="S":32>f&&f>=24?p="R":24>f&&f>=16?p="Q":16>f&&f>=8?p="P":8>f&&f>=0?p="N":0>f&&f>=-8?p="M":-8>f&&f>=-16?p="L":-16>f&&f>=-24?p="K":-24>f&&f>=-32?p="J":-32>f&&f>=-40?p="H":-40>f&&f>=-48?p="G":-48>f&&f>=-56?p="F":-56>f&&f>=-64?p="E":-64>f&&f>=-72?p="D":-72>f&&f>=-80&&(p="C"),p)}}({lat:e[1],lon:e[0]}),t)}function be(e){var t=we(je(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function ge(e){return e*(Math.PI/180)}function me(e){return e/Math.PI*180}function we(e){var t=e.northing,n=e.easting,r=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var a,o,s,u,c,l,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,y=t;r<"N"&&(y-=1e7),l=6*(i-1)-180+3,f=(h=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),a=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),o=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),c=v/(.9996*a);var b=f-a*Math.tan(f)/u*(c*c/2-(5+3*o+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*o+298*s+45*o*o-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);b=me(b);var g,m=(c-(1+2*o+s)*c*c*c/6+(5-2*s+28*o-3*s*s+.05391597401814761+24*o*o)*c*c*c*c*c/120)/Math.cos(f);if(m=l+me(m),e.accuracy){var w=we({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});g={top:w.lat,right:w.lon,bottom:b,left:m}}else g={lat:b,lon:m};return g}function Oe(e){var t=e%6;return 0===t&&(t=6),t}function je(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n=e.length,r=null,i="",a=0;!/[A-Z]/.test(t=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;i+=t,a++}var o=parseInt(i,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(a++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;r=e.substring(a,a+=2);for(var u=Oe(o),c=function(e,t){for(var n="AJSAJS".charCodeAt(t-1),r=1e5,i=!1;n!==e.charCodeAt(0);){if(++n===pe&&n++,n===de&&n++,n>90){if(i)throw"Bad character: "+e;n=65,i=!0}r+=1e5}return r}(r.charAt(0),u),l=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n="AFAFAF".charCodeAt(t-1),r=0,i=!1;n!==e.charCodeAt(0);){if(++n===pe&&n++,n===de&&n++,n>86){if(i)throw"Bad character: "+e;n=65,i=!0}r+=1e5}return r}(r.charAt(1),u);l<_e(s);)l+=2e6;var h=n-a;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,p,d,v=h/2,y=0,b=0;return v>0&&(f=1e5/Math.pow(10,v),p=e.substring(a,a+v),y=parseFloat(p)*f,d=e.substring(a+v),b=parseFloat(d)*f),{easting:y+c,northing:b+l,zoneLetter:s,zoneNumber:o,accuracy:f}}function _e(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function xe(e,t,n){if(!(this instanceof xe))return new xe(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}xe.fromMGRS=function(e){return new xe(be(e))},xe.prototype.toMGRS=function(e){return ye([this.x,this.y],e)};var ke=xe,Se=.01068115234375,Me=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*Se))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*Se)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),t[3]=(n*=e)*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t},Ie=function(e,t,n,r){return r[0]*e-(n*=t)*(r[1]+(t*=t)*(r[2]+t*(r[3]+t*r[4])))},Te=function(e,t,n){for(var r=1/(1-t),i=e,a=20;a;--a){var o=Math.sin(i),s=1-t*o*o;if(i-=s=(Ie(i,o,Math.cos(i),n)-e)*(s*Math.sqrt(s))*r,Math.abs(s)<1e-10)return i}return i},Ae={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Me(this.es),this.ml0=Ie(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,n,r,i=e.y,a=E(e.x-this.long0),o=Math.sin(i),s=Math.cos(i);if(this.es){var u=s*a,c=Math.pow(u,2),l=this.ep2*Math.pow(s,2),h=Math.pow(l,2),f=Math.abs(s)>1e-10?Math.tan(i):0,p=Math.pow(f,2),d=Math.pow(p,2);t=1-this.es*Math.pow(o,2),u/=Math.sqrt(t);var v=Ie(i,o,s,this.en);n=this.a*(this.k0*u*(1+c/6*(1-p+l+c/20*(5-18*p+d+14*l-58*p*l+c/42*(61+179*d-d*p-479*p)))))+this.x0,r=this.a*(this.k0*(v-this.ml0+o*a*u/2*(1+c/12*(5-p+9*l+4*h+c/30*(61+d-58*p+270*l-330*p*l+c/56*(1385+543*d-d*p-3111*p))))))+this.y0}else{var y=s*Math.sin(a);if(Math.abs(Math.abs(y)-1)<1e-10)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=s*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>1e-10)return 93;r=0}else r=Math.acos(r);i<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=n,e.y=r,e},inverse:function(e){var t,n,r,a,o=1/this.a*(e.x-this.x0),s=1/this.a*(e.y-this.y0);if(this.es)if(n=Te(t=this.ml0+s/this.k0,this.es,this.en),Math.abs(n)<i){var u=Math.sin(n),c=Math.cos(n),l=Math.abs(c)>1e-10?Math.tan(n):0,h=this.ep2*Math.pow(c,2),f=Math.pow(h,2),p=Math.pow(l,2),d=Math.pow(p,2);t=1-this.es*Math.pow(u,2);var v=o*Math.sqrt(t)/this.k0,y=Math.pow(v,2);r=n-(t*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*p-9*h*p+h-4*f-y/30*(61+90*p-252*h*p+45*d+46*h-y/56*(1385+3633*p+4095*d+1574*d*p)))),a=E(this.long0+v*(1-y/6*(1+2*p+h-y/20*(5+28*p+24*d+8*h*p+6*h-y/42*(61+662*p+1320*d+720*d*p))))/c)}else r=i*C(s),a=0;else{var b=Math.exp(o/this.k0),g=.5*(b-1/b),m=Math.cos(this.lat0+s/this.k0);t=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(g,2))),r=Math.asin(t),s<0&&(r=-r),a=0===g&&0===m?0:E(Math.atan2(g,m)+this.long0)}return e.x=a,e.y=r,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Ce=function(e){var t=Math.exp(e);return(t-1/t)/2},Ee=function(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),r=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},Pe=function(e,t){for(var n,r=2*Math.cos(2*t),i=e.length-1,a=e[i],o=0;--i>=0;)n=r*a-o+e[i],o=a,a=n;return t+n*Math.sin(2*t)},Re=function(e,t,n){for(var r,i,a=Math.sin(t),o=Math.cos(t),s=Ce(n),u=function(e){var t=Math.exp(e);return(t+1/t)/2}(n),c=2*o*u,l=-2*a*s,h=e.length-1,f=e[h],p=0,d=0,v=0;--h>=0;)r=d,i=p,f=c*(d=f)-r-l*(p=v)+e[h],v=l*d-i+c*p;return[(c=a*u)*f-(l=o*s)*v,c*v+l*f]},De={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ae.init.apply(this),this.forward=Ae.forward,this.inverse=Ae.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),this.cgb[1]=(n*=t)*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),this.cgb[2]=(n*=t)*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),this.cgb[3]=(n*=t)*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(t*(-24832/14175)-2.4)),this.cgb[4]=(n*=t)*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),this.cgb[5]=(n*=t)*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),this.utg[2]=(n*=t)*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),this.utg[3]=(n*=t)*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),this.utg[4]=(n*=t)*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),this.utg[5]=(n*=t)*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=Pe(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(e,t){for(var n,r=2*Math.cos(t),i=e.length-1,a=e[i],o=0;--i>=0;)n=r*a-o+e[i],o=a,a=n;return Math.sin(t)*n}(this.gtu,2*r))},forward:function(e){var t=E(e.x-this.long0),n=e.y;n=Pe(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),a=Math.sin(t),o=Math.cos(t);n=Math.atan2(r,o*i),t=Math.atan2(a*i,Ee(r,i*o)),t=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,n=t-1;return 0===n?e:e*Math.log(t)/n}(t*(1+t/(Ee(1,t)+1))),e<0?-t:t}(Math.tan(t));var s,u,c=Re(this.gtu,2*n,2*t);return n+=c[0],t+=c[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),e.x=s,e.y=u,e},inverse:function(e){var t,n,r=1/this.a*(e.x-this.x0),i=1/this.a*(e.y-this.y0);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var a=Re(this.utg,2*i,2*r);i+=a[0],r+=a[1],r=Math.atan(Ce(r));var o=Math.sin(i),s=Math.cos(i),u=Math.sin(r),c=Math.cos(r);i=Math.atan2(o*c,Ee(u,c*s)),r=Math.atan2(u,c*s),t=E(r+this.long0),n=Pe(this.cgb,i)}else t=1/0,n=1/0;return e.x=t,e.y=n,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Le={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(E(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*a,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,De.init.apply(this),this.forward=De.forward,this.inverse=De.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ne=function(e,t){return Math.pow((1-e)/(1+e),t)},Fe={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s)/(Math.pow(Math.tan(.5*this.lat0+s),this.C)*Ne(this.e*e,this.ratexp))},forward:function(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+s),this.C)*Ne(this.e*Math.sin(n),this.ratexp))-i,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+s)/this.K,1/this.C),a=20;a>0&&(n=2*Math.atan(r*Ne(this.e*Math.sin(e.y),-.5*this.e))-i,!(Math.abs(n-e.y)<1e-14));--a)e.y=n;return a?(e.x=t,e.y=n,e):null},names:["gauss"]},ze={init:function(){Fe.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,n,r,i;return e.x=E(e.x-this.long0),Fe.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),r=Math.cos(e.x),e.x=(i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*r))*n*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*n*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,n,r,i,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(a,this.R2);t=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+e.y*t*this.cosc0/a),r=Math.atan2(e.x*t,a*this.cosc0*n-e.y*this.sinc0*t)}else i=this.phic0,r=0;return e.x=r,e.y=i,Fe.inverse.apply(this,[e]),e.x=E(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Ve={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+C(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/P(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=A(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,n,r,a,o,s,u=e.x,c=e.y,l=Math.sin(c),h=Math.cos(c),f=E(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=1e-10&&Math.abs(c+this.lat0)<=1e-10?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*l+this.coslat0*h*Math.cos(f)),e.x=this.a*t*h*Math.sin(f)+this.x0,e.y=this.a*t*(this.coslat0*l-this.sinlat0*h*Math.cos(f))+this.y0,e):(n=2*Math.atan(this.ssfn_(c,l,this.e))-i,a=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(o=P(this.e,c*this.con,this.con*l),e.x=this.x0+(s=2*this.a*this.k0*o/this.cons)*Math.sin(u-this.long0),e.y=this.y0-this.con*s*Math.cos(u-this.long0),e):(Math.abs(this.sinlat0)<1e-10?(t=2*this.a*this.k0/(1+a*Math.cos(f)),e.y=t*r):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*a*Math.cos(f))),e.y=t*(this.cosX0*r-this.sinX0*a*Math.cos(f))+this.y0),e.x=t*a*Math.sin(f)+this.x0,e))},inverse:function(e){var t,n,r,a;e.x-=this.x0,e.y-=this.y0;var o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,n=this.lat0,o<=1e-10?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/o),t=Math.abs(this.coslat0)<1e-10?E(this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y)):E(this.long0+Math.atan2(e.x*Math.sin(s),o*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=n,e)}if(Math.abs(this.coslat0)<=1e-10){if(o<=1e-10)return n=this.lat0,e.x=t=this.long0,e.y=n,e;e.x*=this.con,e.y*=this.con,n=this.con*R(this.e,o*this.cons/(2*this.a*this.k0)),t=this.con*E(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=1e-10?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+e.y*Math.sin(r)*this.cosX0/o),t=E(this.long0+Math.atan2(e.x*Math.sin(r),o*this.cosX0*Math.cos(r)-e.y*this.sinX0*Math.sin(r)))),n=-1*R(this.e,Math.tan(.5*(i+a)));return e.x=t,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,n){return t*=n,Math.tan(.5*(i+e))*Math.pow((1-t)/(1+t),.5*n)}},Ge={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),a=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+a*t)/(1-a*t));this.K=o-this.alpha*s+this.alpha*a/2*u},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=2*(Math.atan(Math.exp(-this.alpha*(t+n)+this.K))-Math.PI/4),i=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(i))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(i));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=(e.x-this.x0)/this.R,n=2*(Math.atan(Math.exp((e.y-this.y0)/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(t)),i=Math.atan(Math.sin(t)/(Math.cos(this.b0)*Math.cos(t)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+i/this.alpha,o=0,s=r,u=-1e3,c=0;Math.abs(s-u)>1e-7;){if(++c>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(s))/2)),u=s,s=2*Math.atan(Math.exp(o))-Math.PI/2}return e.x=a,e.y=s,e},names:["somerc"]},Ue={init:function(){var e,t,n,r,o,c,l,h,f,p,d,v,y,b=0,g=0,m=0,w=0,O=0,j=0,_=0;this.no_off=(y="object"==typeof(v=this).PROJECTION?Object.keys(v.PROJECTION)[0]:v.PROJECTION,"no_uoff"in v||"no_off"in v||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(y)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var k=!1;if("rectified_grid_angle"in this&&(k=!0),x&&(_=this.alpha),k&&(b=this.rectified_grid_angle*a),x||k)g=this.longc;else if(m=this.long1,O=this.lat1,w=this.long2,j=this.lat2,Math.abs(O-j)<=1e-7||(e=Math.abs(O))<=1e-7||Math.abs(e-i)<=1e-7||Math.abs(Math.abs(this.lat0)-i)<=1e-7||Math.abs(Math.abs(j)-i)<=1e-7)throw new Error;var S=1-this.es;t=Math.sqrt(S),Math.abs(this.lat0)>1e-10?(h=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*h*h,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/S),this.A=this.B*this.k0*t/e,(o=(r=this.B*t/(n*Math.sqrt(e)))*r-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=r,this.E*=Math.pow(P(this.e,this.lat0,h),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=o=1),x||k?(x?(d=Math.asin(Math.sin(_)/r),k||(b=_)):(d=b,_=Math.asin(r*Math.sin(d))),this.lam0=g-Math.asin(.5*(o-1/o)*Math.tan(d))/this.B):(c=Math.pow(P(this.e,O,Math.sin(O)),this.B),l=Math.pow(P(this.e,j,Math.sin(j)),this.B),o=this.E/c,f=(l-c)/(l+c),p=((p=this.E*this.E)-l*c)/(p+l*c),(e=m-w)<-Math.pi?w-=u:e>Math.pi&&(w+=u),this.lam0=E(.5*(m+w)-Math.atan(p*Math.tan(.5*this.B*(m-w))/f)/this.B),d=Math.atan(2*Math.sin(this.B*E(m-this.lam0))/(o-1/o)),b=_=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(b),this.cosrot=Math.cos(b),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(s-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(s+o))},forward:function(e){var t,n,r,a,o,s,u,c,l={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-i)>1e-10){if(t=.5*((o=this.E/Math.pow(P(this.e,e.y,Math.sin(e.y)),this.B))-(s=1/o)),n=.5*(o+s),a=Math.sin(this.B*e.x),r=(t*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(r)-1)<1e-10)throw new Error;c=.5*this.ArB*Math.log((1-r)/(1+r)),s=Math.cos(this.B*e.x),u=Math.abs(s)<1e-7?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+a*this.singam,s)}else c=e.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*e.y;return this.no_rot?(l.x=u,l.y=c):(l.x=c*this.cosrot+(u-=this.u_0)*this.sinrot,l.y=u*this.cosrot-c*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(e){var t,n,r,a,o,s,u,c={};if(e.x=1/this.a*(e.x-this.x0),e.y=1/this.a*(e.y-this.y0),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),a=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),u=((s=Math.sin(this.BrA*t))*this.cosgam+a*this.singam)/o,Math.abs(Math.abs(u)-1)<1e-10)c.x=0,c.y=u<0?-i:i;else{if(c.y=this.E/Math.sqrt((1+u)/(1-u)),c.y=R(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(a*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Be={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),r=A(this.e,t,n),i=P(this.e,this.lat1,t),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=A(this.e,a,o),u=P(this.e,this.lat2,a),c=P(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>1e-10?Math.log(r/s)/Math.log(i/u):t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=C(n)*(i-2e-10));var r,a,o=Math.abs(Math.abs(n)-i);if(o>1e-10)r=P(this.e,n,Math.sin(n)),a=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;a=0}var s=this.ns*E(t-this.long0);return e.x=this.k0*(a*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(s))+this.y0,e},inverse:function(e){var t,n,r,a,o,s=(e.x-this.x0)/this.k0,u=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+u*u),n=1):(t=-Math.sqrt(s*s+u*u),n=-1);var c=0;if(0!==t&&(c=Math.atan2(n*s,n*u)),0!==t||this.ns>0){if(n=1/this.ns,r=Math.pow(t/(this.a*this.f0),n),-9999===(a=R(this.e,r)))return null}else a=-i;return o=E(c/this.ns+this.long0),e.x=o,e.y=a,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},qe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,n,r,i,a,o,s,u=e.y,c=E(e.x-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(o)/1,e.x=s*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,n,r,i,a,o,s,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t)),e.x=this.long0-n/this.alfa,o=t,s=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(s=1),o=e.y,c+=1}while(0===s&&c<15);return c>=15?null:e},names:["Krovak","krovak"]},He=function(e,t,n,r,i){return e*i-t*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},We=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Je=function(e){return.375*e*(1+.25*e*(1+.46875*e))},Ze=function(e){return.05859375*e*e*(1+.75*e)},Ke=function(e){return e*e*e*(35/3072)},Ye=function(e,t,n){var r=t*n;return e/Math.sqrt(1-r*r)},Xe=function(e){return Math.abs(e)<i?e:e-C(e)*Math.PI},Qe=function(e,t,n,r,i){var a,o;a=e/t;for(var s=0;s<15;s++)if(a+=o=(e-(t*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(o)<=1e-10)return a;return NaN},$e={init:function(){this.sphere||(this.e0=We(this.es),this.e1=Je(this.es),this.e2=Ze(this.es),this.e3=Ke(this.es),this.ml0=this.a*He(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,n,r=e.x,i=e.y;if(r=E(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),s=Ye(this.a,this.e,a),u=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),l=c*c,h=this.es*o*o/(1-this.es);t=s*c*(1-l*u*(1/6-(8-u+8*h)*l/120)),n=this.a*He(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*a/o*l*(.5+(5-u+6*h)*l/24)}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r=e.x/this.a,a=e.y/this.a;if(this.sphere){var o=a+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var s=Qe(this.ml0/this.a+a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-i)<=1e-10)return e.x=this.long0,e.y=i,a<0&&(e.y*=-1),e;var u=Ye(this.a,this.e,Math.sin(s)),c=u*u*u/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(s),2),h=r*this.a/u,f=h*h;t=s-u*Math.tan(s)/c*h*h*(.5-(1+3*l)*h*h/24),n=h*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(s)}return e.x=E(n+this.long0),e.y=Xe(t),e},names:["Cassini","Cassini_Soldner","cass"]},et=function(e,t){var n;return e>1e-7?(1-e*e)*(t/(1-(n=e*t)*n)-.5/e*Math.log((1-n)/(1+n))):2*t},tt={init:function(){var e,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-i)<1e-10?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<1e-10?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=et(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,n=[];return n[0]=.3333333333333333*e,n[0]+=.17222222222222222*(t=e*e),n[1]=.06388888888888888*t,n[0]+=.10257936507936508*(t*=e),n[1]+=.0664021164021164*t,n[2]=.016415012942191543*t,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=et(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,n,r,a,o,u,c,l,h,f,p=e.x,d=e.y;if(p=E(p-this.long0),this.sphere){if(o=Math.sin(d),f=Math.cos(d),r=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*r:1+this.sinph0*o+this.cosph0*f*r)<=1e-10)return null;t=(n=Math.sqrt(2/n))*f*Math.sin(p),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<1e-10)return null;n=s-.5*d,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=r}}else{switch(c=0,l=0,h=0,r=Math.cos(p),a=Math.sin(p),o=Math.sin(d),u=et(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=u/this.qp,l=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:h=1+this.sinb1*c+this.cosb1*l*r;break;case this.EQUIT:h=1+l*r;break;case this.N_POLE:h=i+d,u=this.qp-u;break;case this.S_POLE:h=d-i,u=this.qp+u}if(Math.abs(h)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*c-this.sinb1*l*r):(h=Math.sqrt(2/(1+l*r)))*c*this.ymf,t=this.xmf*h*l*a;break;case this.N_POLE:case this.S_POLE:u>=0?(t=(h=Math.sqrt(u))*a,n=r*(this.mode===this.S_POLE?h:-h)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r,a,o,s,u,c,l,h,f=e.x/this.a,p=e.y/this.a;if(this.sphere){var d,v=0,y=0;if((n=.5*(d=Math.sqrt(f*f+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),v=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=1e-10?0:Math.asin(p*y/d),f*=y,p=v*d;break;case this.OBLIQ:n=Math.abs(d)<=1e-10?this.lat0:Math.asin(v*this.sinph0+p*y*this.cosph0/d),f*=y*this.cosph0,p=(v-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:p=-p,n=i-n;break;case this.S_POLE:n-=i}t=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(s=Math.sqrt(f*f+p*p))<1e-10)return e.x=this.long0,e.y=this.lat0,e;a=2*Math.asin(.5*s/this.rq),r=Math.cos(a),f*=a=Math.sin(a),this.mode===this.OBLIQ?(o=this.qp*(u=r*this.sinb1+p*a*this.cosb1/s),p=s*this.cosb1*r-p*this.sinb1*a):(o=this.qp*(u=p*a/s),p=s*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(o=f*f+p*p))return e.x=this.long0,e.y=this.lat0,e;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}t=Math.atan2(f,p),h=(c=Math.asin(u))+c,n=c+(l=this.apa)[0]*Math.sin(h)+l[1]*Math.sin(h+h)+l[2]*Math.sin(h+h+h)}return e.x=E(this.long0+t),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},nt=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)},rt={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=A(this.e3,this.sin_po,this.cos_po),this.qs1=et(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=A(this.e3,this.sin_po,this.cos_po),this.qs2=et(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=et(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>1e-10?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=et(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*E(t-this.long0),o=i*Math.sin(a)+this.x0,s=this.rh-i*Math.cos(a)+this.y0;return e.x=o,e.y=s,e},inverse:function(e){var t,n,r,i,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),r=0,0!==t&&(r=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,a=this.sphere?Math.asin((this.c-n*n)/(2*this.ns0)):this.phi1z(this.e3,(this.c-n*n)/this.ns0),i=E(r/this.ns0+this.long0),e.x=i,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var n,r,i,a,o=nt(.5*t);if(e<1e-10)return o;for(var s=e*e,u=1;u<=25;u++)if(o+=a=.5*(i=1-(r=e*(n=Math.sin(o)))*r)*i/Math.cos(o)*(t/(1-s)-n/i+.5/e*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-7)return o;return null}},it={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,n,r,i,a,o,s,u=e.y;return r=E(e.x-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(a=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(a)<=1e-10?(o=this.x0+1*this.a*n*Math.sin(r)/a,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)/a):(o=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*i)),e.x=o,e.y=s,e},inverse:function(e){var t,n,r,i,a,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),n=Math.sin(i),r=Math.cos(i),o=nt(r*this.sin_p14+e.y*n*this.cos_p14/t),a=Math.atan2(e.x*n,t*this.cos_p14*r-e.y*this.sin_p14*n),a=E(this.long0+a)):(o=this.phic0,a=0),e.x=a,e.y=o,e},names:["gnom"]},at={init:function(){this.sphere||(this.k0=A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,n,r=e.y,i=E(e.x-this.long0);if(this.sphere)t=this.x0+this.a*i*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=et(this.e,Math.sin(r));t=this.x0+this.a*this.k0*i,n=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=n,e},inverse:function(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=E(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*i:i;for(var r,a,o,s,u=Math.asin(.5*t),c=0;c<30;c++)if(a=Math.sin(u),o=Math.cos(u),s=e*a,u+=r=Math.pow(1-s*s,2)/(2*o)*(t/(1-e*e)-a/(1-s*s)+.5/e*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return u;return NaN}(this.e,2*e.y*this.k0/this.a),t=E(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e},names:["cea"]},ot={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.y,n=E(e.x-this.long0),r=Xe(t-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*r,e},inverse:function(e){var t=e.y;return e.x=E(this.long0+(e.x-this.x0)/(this.a*this.rc)),e.y=Xe(this.lat0+(t-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},st={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=We(this.es),this.e1=Je(this.es),this.e2=Ze(this.es),this.e3=Ke(this.es),this.ml0=this.a*He(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,n,r,i=e.y,a=E(e.x-this.long0);if(r=a*Math.sin(i),this.sphere)Math.abs(i)<=1e-10?(t=this.a*a,n=-1*this.a*this.lat0):(t=this.a*Math.sin(r)/Math.tan(i),n=this.a*(Xe(i-this.lat0)+(1-Math.cos(r))/Math.tan(i)));else if(Math.abs(i)<=1e-10)t=this.a*a,n=-1*this.ml0;else{var o=Ye(this.a,this.e,Math.sin(i))/Math.tan(i);t=o*Math.sin(r),n=this.a*He(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+o*(1-Math.cos(r))}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,n,r,i,a,o,s,u,c;if(r=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)t=E(r/this.a+this.long0),n=0;else{var l;for(s=r*r/this.a/this.a+(o=this.lat0+i/this.a)*o,u=o,a=20;a;--a)if(u+=c=-1*(o*(u*(l=Math.tan(u))+1)-u-.5*(u*u+s)*l)/((u-o)/l-1),Math.abs(c)<=1e-10){n=u;break}t=E(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=1e-10)n=0,t=E(this.long0+r/this.a);else{var h,f,p,d,v;for(s=r*r/this.a/this.a+(o=(this.ml0+i)/this.a)*o,u=o,a=20;a;--a)if(v=this.e*Math.sin(u),h=Math.sqrt(1-v*v)*Math.tan(u),f=this.a*He(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=c=(o*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*o*d)/(4*h)+(o-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(c)<=1e-10){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=E(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return e.x=t,e.y=n,e},names:["Polyconic","poly"]},ut={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,n=(e.y-this.lat0)/r*1e-5,i=e.x-this.long0,a=1,o=0;for(t=1;t<=10;t++)o+=this.A[t]*(a*=n);var s,u=o,c=i,l=1,h=0,f=0,p=0;for(t=1;t<=6;t++)s=h*u+l*c,f=f+this.B_re[t]*(l=l*u-h*c)-this.B_im[t]*(h=s),p=p+this.B_im[t]*l+this.B_re[t]*h;return e.x=p*this.a+this.x0,e.y=f*this.a+this.y0,e},inverse:function(e){var t,n,i=(e.y-this.y0)/this.a,a=(e.x-this.x0)/this.a,o=1,s=0,u=0,c=0;for(t=1;t<=6;t++)n=s*i+o*a,u=u+this.C_re[t]*(o=o*i-s*a)-this.C_im[t]*(s=n),c=c+this.C_im[t]*o+this.C_re[t]*s;for(var l=0;l<this.iterations;l++){var h,f=u,p=c,d=i,v=a;for(t=2;t<=6;t++)h=p*u+f*c,d+=(t-1)*(this.B_re[t]*(f=f*u-p*c)-this.B_im[t]*(p=h)),v+=(t-1)*(this.B_im[t]*f+this.B_re[t]*p);f=1,p=0;var y=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)h=p*u+f*c,y+=t*(this.B_re[t]*(f=f*u-p*c)-this.B_im[t]*(p=h)),b+=t*(this.B_im[t]*f+this.B_re[t]*p);var g=y*y+b*b;u=(d*y+v*b)/g,c=(v*y-d*b)/g}var m=u,w=c,O=1,j=0;for(t=1;t<=9;t++)j+=this.D[t]*(O*=m);var _=this.lat0+j*r*1e5;return e.x=this.long0+w,e.y=_,e},names:["New_Zealand_Map_Grid","nzmg"]},ct={init:function(){},forward:function(e){var t=e.y,n=E(e.x-this.long0),r=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return e.x=r,e.y=i,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=E(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e},names:["Miller_Cylindrical","mill"]},lt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Me(this.es)},forward:function(e){var t,n,r=e.x,i=e.y;if(r=E(r-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),o=20;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),c=Math.cos(i);n=this.a*Ie(i,u,c,this.en),t=this.a*r*c/Math.sqrt(1-this.es*u*u)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r,a;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=nt((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=nt(Math.sin(t)/this.n)),r=E(r+this.long0),t=Xe(t)):(t=Te(e.y/this.a,this.es,this.en),(a=Math.abs(t))<i?(a=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(t)),r=E(n)):a-1e-10<i&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]},ht={init:function(){},forward:function(e){for(var t=e.y,n=E(e.x-this.long0),r=t,i=Math.PI*Math.sin(t);;){var a=-(r+Math.sin(r)-i)/(1+Math.cos(r));if(r+=a,Math.abs(a)<1e-10)break}r/=2,Math.PI/2-Math.abs(t)<1e-10&&(n=0);var o=.900316316158*this.a*n*Math.cos(r)+this.x0,s=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=o,e.y=s,e},inverse:function(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var r=E(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return e.x=r,e.y=i,e},names:["Mollweide","moll"]},ft={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=We(this.es),this.e1=Je(this.es),this.e2=Ze(this.es),this.e3=Ke(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=A(this.e,this.sinphi,this.cosphi),this.ml1=He(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=A(this.e,this.sinphi,this.cosphi),this.ml2=He(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=He(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,n=e.x,r=e.y;if(this.sphere)t=this.a*(this.g-r);else{var i=He(this.e0,this.e1,this.e2,this.e3,r);t=this.a*(this.g-i)}var a=this.ns*E(n-this.long0),o=this.x0+t*Math.sin(a),s=this.y0+this.rh-t*Math.cos(a);return e.x=o,e.y=s,e},inverse:function(e){var t,n,r,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;return 0!==n&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere?(i=E(this.long0+a/this.ns),r=Xe(this.g-n/this.a),e.x=i,e.y=r,e):(r=Qe(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=E(this.long0+a/this.ns),e.x=i,e.y=r,e)},names:["Equidistant_Conic","eqdc"]},pt={init:function(){this.R=this.a},forward:function(e){var t,n,r=e.y,a=E(e.x-this.long0);Math.abs(r)<=1e-10&&(t=this.x0+this.R*a,n=this.y0);var o=nt(2*Math.abs(r/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(r)-i)<=1e-10)&&(t=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),u=s*s,c=Math.sin(o),l=Math.cos(o),h=l/(c+l-1),f=h*(2/c-1),p=f*f,d=Math.PI*this.R*(s*(h-p)+Math.sqrt(u*(h-p)*(h-p)-(p+u)*(h*h-p)))/(p+u);a<0&&(d=-d),t=this.x0+d;var v=u+h;return d=Math.PI*this.R*(f*v-s*Math.sqrt((p+u)*(u+1)-v*v))/(p+u),n=r>=0?this.y0+d:this.y0-d,e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i,a,o,s,u,c,l,h,f;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,a=(r=e.x/h)*r+(i=e.y/h)*i,h=3*(i*i/(u=-2*(o=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(s=o-2*i*i+r*r)*s*s/u/u/u-9*o*s/u/u)/27)/(c=(o-s*s/3/u)/u)/(l=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=e.y>=0?(-l*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-l*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,t=Math.abs(r)<1e-10?this.long0:E(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r),e.x=t,e.y=n,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},dt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,n,r,a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_,x=e.x,k=e.y,S=Math.sin(e.y),M=Math.cos(e.y),I=E(x-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(e.x=this.x0+this.a*(i-k)*Math.sin(I),e.y=this.y0-this.a*(i-k)*Math.cos(I),e):Math.abs(this.sin_p12+1)<=1e-10?(e.x=this.x0+this.a*(i+k)*Math.sin(I),e.y=this.y0+this.a*(i+k)*Math.cos(I),e):(m=this.sin_p12*S+this.cos_p12*M*Math.cos(I),g=(b=Math.acos(m))?b/Math.sin(b):1,e.x=this.x0+this.a*g*M*Math.sin(I),e.y=this.y0+this.a*g*(this.cos_p12*S-this.sin_p12*M*Math.cos(I)),e):(t=We(this.es),n=Je(this.es),r=Ze(this.es),a=Ke(this.es),Math.abs(this.sin_p12-1)<=1e-10?(o=this.a*He(t,n,r,a,i),s=this.a*He(t,n,r,a,k),e.x=this.x0+(o-s)*Math.sin(I),e.y=this.y0-(o-s)*Math.cos(I),e):Math.abs(this.sin_p12+1)<=1e-10?(o=this.a*He(t,n,r,a,i),s=this.a*He(t,n,r,a,k),e.x=this.x0+(o+s)*Math.sin(I),e.y=this.y0+(o+s)*Math.cos(I),e):(u=S/M,c=Ye(this.a,this.e,this.sin_p12),l=Ye(this.a,this.e,S),h=Math.atan((1-this.es)*u+this.es*c*this.sin_p12/(l*M)),w=0===(f=Math.atan2(Math.sin(I),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(I)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(f)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(I)*Math.cos(h)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),d=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es),e.x=this.x0+(b=c*w*(1-(O=w*w)*(y=d*d)*(1-y)/6+(j=O*w)/8*(v=p*d)*(1-2*y)+(_=j*w)/120*(y*(4-7*y)-3*p*p*(1-7*y))-_*w/48*v))*Math.sin(f),e.y=this.y0+b*Math.cos(f),e))},inverse:function(e){var t,n,r,a,o,s,u,c,l,h,f,p,d,v,y,b,g,m,w,O,j,_,x;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*i*this.a)return;return n=t/this.a,r=Math.sin(n),a=Math.cos(n),o=this.long0,Math.abs(t)<=1e-10?s=this.lat0:(s=nt(a*this.sin_p12+e.y*r*this.cos_p12/t),u=Math.abs(this.lat0)-i,o=Math.abs(u)<=1e-10?E(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)):E(this.long0+Math.atan2(e.x*r,t*this.cos_p12*a-e.y*this.sin_p12*r))),e.x=o,e.y=s,e}return c=We(this.es),l=Je(this.es),h=Ze(this.es),f=Ke(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*He(c,l,h,f,i),t=Math.sqrt(e.x*e.x+e.y*e.y),s=Qe((p-t)/this.a,c,l,h,f),o=E(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=s,e):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*He(c,l,h,f,i),t=Math.sqrt(e.x*e.x+e.y*e.y),s=Qe((t-p)/this.a,c,l,h,f),o=E(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=s,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),y=Math.atan2(e.x,e.y),d=Ye(this.a,this.e,this.sin_p12),b=Math.cos(y),w=3*this.es*(1-(m=-(g=this.e*this.cos_p12*b)*g/(1-this.es)))*this.sin_p12*this.cos_p12*b/(1-this.es),_=1-m*(j=(O=t/d)-m*(1+m)*Math.pow(O,3)/6-w*(1+3*m)*Math.pow(O,4)/24)*j/2-O*j*j*j/6,v=Math.asin(this.sin_p12*Math.cos(j)+this.cos_p12*Math.sin(j)*b),o=E(this.long0+Math.asin(Math.sin(y)*Math.sin(j)/Math.cos(v))),x=Math.sin(v),s=Math.atan2((x-this.es*_*this.sin_p12)*Math.tan(v),x*(1-this.es)),e.x=o,e.y=s,e)},names:["Azimuthal_Equidistant","aeqd"]},vt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,a,o,s,u=e.y;return r=E(e.x-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),((a=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(a)<=1e-10)&&(o=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)),e.x=o,e.y=s,e},inverse:function(e){var t,n,r,a,o,s,u;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=nt(t/this.a),r=Math.sin(n),a=Math.cos(n),s=this.long0,Math.abs(t)<=1e-10?(u=this.lat0,e.x=s,e.y=u,e):(u=nt(a*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-i,Math.abs(o)<=1e-10?(s=E(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=u,e):(s=E(this.long0+Math.atan2(e.x*r,t*this.cos_p14*a-e.y*this.sin_p14*r)),e.x=s,e.y=u,e))},names:["ortho"]};function yt(e,t,n,r){var a;return e<1e-10?(r.value=1,a=0):(a=Math.atan2(t,n),Math.abs(a)<=s?r.value=1:a>s&&a<=i+s?(r.value=2,a-=i):a>i+s||a<=-(i+s)?(r.value=3,a=a>=0?a-c:a+c):(r.value=4,a+=i)),a}function bt(e,t){var n=e+t;return n<-c?n+=u:n>+c&&(n-=u),n}var gt,mt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=i-s/2?5:this.lat0<=-(i-s/2)?6:Math.abs(this.long0)<=s?1:Math.abs(this.long0)<=i+s?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,n,r,a,o,u,l={x:0,y:0},h={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,5===this.face)a=i-t,n>=s&&n<=i+s?(h.value=1,r=n-i):n>i+s||n<=-(i+s)?(h.value=2,r=n>0?n-c:n+c):n>-(i+s)&&n<=-s?(h.value=3,r=n+i):(h.value=4,r=n);else if(6===this.face)a=i+t,n>=s&&n<=i+s?(h.value=1,r=-n+i):n<s&&n>=-s?(h.value=2,r=-n):n<-s&&n>=-(i+s)?(h.value=3,r=-n-i):(h.value=4,r=n>0?-n+c:-n-c);else{var f,p,d,v,y,b;2===this.face?n=bt(n,+i):3===this.face?n=bt(n,+c):4===this.face&&(n=bt(n,-i)),v=Math.sin(t),y=Math.cos(t),b=Math.sin(n),f=y*Math.cos(n),p=y*b,d=v,1===this.face?r=yt(a=Math.acos(f),d,p,h):2===this.face?r=yt(a=Math.acos(p),d,-f,h):3===this.face?r=yt(a=Math.acos(-f),d,-p,h):4===this.face?r=yt(a=Math.acos(-p),d,f,h):(a=r=0,h.value=1)}return u=Math.atan(12/c*(r+Math.acos(Math.sin(r)*Math.cos(s))-i)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(u)*Math.cos(u))/(1-Math.cos(Math.atan(1/Math.cos(r))))),2===h.value?u+=i:3===h.value?u+=c:4===h.value&&(u+=1.5*c),l.x=o*Math.cos(u),l.y=o*Math.sin(u),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,e.x=l.x,e.y=l.y,e},inverse:function(e){var t,n,r,a,o,s,u,l,h,f,p,d,v={lam:0,phi:0},y={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?y.value=1:e.y>=0&&e.y>=Math.abs(e.x)?(y.value=2,t-=i):e.x<0&&-e.x>=Math.abs(e.y)?(y.value=3,t=t<0?t+c:t-c):(y.value=4,t+=i),h=c/12*Math.tan(t),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),s=Math.atan(o),(u=1-(r=Math.cos(t))*r*(a=Math.tan(n))*a*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?u=-1:u>1&&(u=1),5===this.face)l=Math.acos(u),v.phi=i-l,v.lam=1===y.value?s+i:2===y.value?s<0?s+c:s-c:3===y.value?s-i:s;else if(6===this.face)l=Math.acos(u),v.phi=l-i,v.lam=1===y.value?-s+i:2===y.value?-s:3===y.value?-s-i:s<0?-s-c:-s+c;else{var b,g,m;h=(b=u)*b,g=(h+=(m=h>=1?0:Math.sqrt(1-h)*Math.sin(s))*m)>=1?0:Math.sqrt(1-h),2===y.value?(h=g,g=-m,m=h):3===y.value?(g=-g,m=-m):4===y.value&&(h=g,g=m,m=-h),2===this.face?(h=b,b=-g,g=h):3===this.face?(b=-b,g=-g):4===this.face&&(h=b,b=g,g=-h),v.phi=Math.acos(-m)-i,v.lam=Math.atan2(g,b),2===this.face?v.lam=bt(v.lam,-i):3===this.face?v.lam=bt(v.lam,-c):4===this.face&&(v.lam=bt(v.lam,+i))}return 0!==this.es&&(f=v.phi<0?1:0,p=Math.tan(v.phi),d=this.b/Math.sqrt(p*p+this.one_minus_f_squared),v.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),f&&(v.phi=-v.phi)),v.lam+=this.long0,e.x=v.lam,e.y=v.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},wt=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ot=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],jt=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},_t={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=E(e.x-this.long0),n=Math.abs(e.y),r=Math.floor(11.459155902616464*n);r<0?r=0:r>=18&&(r=17);var i={x:jt(wt[r],n=o*(n-.08726646259971647*r))*t,y:jt(Ot[r],n)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(e){var t={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=wt[18][0],t.y=e.y<0?-i:i;else{var n=Math.floor(18*t.y);for(n<0?n=0:n>=18&&(n=17);;)if(Ot[n][0]>t.y)--n;else{if(!(Ot[n+1][0]<=t.y))break;++n}var r=Ot[n],o=5*(t.y-r[0])/(Ot[n+1][0]-r[0]);o=function(e,t,n,r){for(var i=t;r;--r){var a=e(i);if(i-=a,Math.abs(a)<1e-10)break}return i}((function(e){return(jt(r,e)-t.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(r,e)}),o,0,100),t.x/=jt(wt[n],o),t.y=(5*n+o)*a,e.y<0&&(t.y=-t.y)}return t.x=E(t.x+this.long0),t},names:["Robinson","robin"]},xt={init:function(){this.name="geocent"},forward:function(e){return $(e,this.es,this.a)},inverse:function(e){return ee(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},kt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},St={init:function(){if(Object.keys(kt).forEach((function(e){if(void 0===this[e])this[e]=kt[e].def;else{if(kt[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);kt[e].num&&(this[e]=parseFloat(this[e]))}kt[e].degrees&&(this[e]=this[e]*a)}).bind(this)),Math.abs(Math.abs(this.lat0)-i)<1e-10?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<1e-10?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,n,r,i,a=Math.sin(e.y),o=Math.cos(e.y),s=Math.cos(e.x);switch(this.mode){case 3:n=this.sinph0*a+this.cosph0*o*s;break;case 2:n=o*s;break;case 1:n=-a;break;case 0:n=a}switch(t=(n=this.pn1/(this.p-n))*o*Math.sin(e.x),this.mode){case 3:n*=this.cosph0*a-this.sinph0*o*s;break;case 2:n*=a;break;case 0:n*=-o*s;break;case 1:n*=o*s}return t=(t*this.cg-n*this.sg)*this.cw*(i=1/((r=n*this.cg+t*this.sg)*this.sw*this.h1+this.cw)),n=r*i,e.x=t*this.a,e.y=n*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,n,r,i={x:e.x,y:e.y};e.x=(t=this.pn1*e.x*(r=1/(this.pn1-e.y*this.sw)))*this.cg+(n=this.pn1*e.y*this.cw*r)*this.sg,e.y=n*this.cg-t*this.sg;var a=Ee(e.x,e.y);if(Math.abs(a)<1e-10)i.x=0,i.y=e.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case 3:i.y=Math.asin(o*this.sinph0+e.y*s*this.cosph0/a),e.y=(o-this.sinph0*Math.sin(i.y))*a,e.x*=s*this.cosph0;break;case 2:i.y=Math.asin(e.y*s/a),e.y=o*a,e.x*=s;break;case 0:i.y=Math.asin(o),e.y=-e.y;break;case 1:i.y=-Math.asin(o)}i.x=Math.atan2(e.x,e.y)}return e.x=i.x+this.long0,e.y=i.y,e},names:["Tilted_Perspective","tpers"]};fe.defaultDatum="WGS84",fe.Proj=Q,fe.WGS84=new fe.Proj("WGS84"),fe.Point=ke,fe.toPoint=oe,fe.defs=S,fe.nadgrid=function(e,t){var n=new DataView(t),r=function(e){var t=e.getInt32(8,!1);return 11!==t&&(11!==(t=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(n),i=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:J(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a={header:i,subgrids:function(e,t,n){for(var r=[],i=0;i<t.nSubgrids;i++){var a=K(e,176,n),o=Y(e,176,a,n),s=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);r.push({ll:[W(a.lowerLongitude),W(a.lowerLatitude)],del:[W(a.longitudeInterval),W(a.latitudeInterval)],lim:[s,u],count:a.gridNodeCount,cvs:Z(o)})}return r}(n,i,r)};return q[e]=a,a},fe.transform=ue,fe.mgrs=ve,fe.version="__VERSION__",(gt=fe).Proj.projections.add(Ae),gt.Proj.projections.add(De),gt.Proj.projections.add(Le),gt.Proj.projections.add(ze),gt.Proj.projections.add(Ve),gt.Proj.projections.add(Ge),gt.Proj.projections.add(Ue),gt.Proj.projections.add(Be),gt.Proj.projections.add(qe),gt.Proj.projections.add($e),gt.Proj.projections.add(tt),gt.Proj.projections.add(rt),gt.Proj.projections.add(it),gt.Proj.projections.add(at),gt.Proj.projections.add(ot),gt.Proj.projections.add(st),gt.Proj.projections.add(ut),gt.Proj.projections.add(ct),gt.Proj.projections.add(lt),gt.Proj.projections.add(ht),gt.Proj.projections.add(ft),gt.Proj.projections.add(pt),gt.Proj.projections.add(dt),gt.Proj.projections.add(vt),gt.Proj.projections.add(mt),gt.Proj.projections.add(_t),gt.Proj.projections.add(xt),gt.Proj.projections.add(St),t.default=fe},p6dn:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type=null,r}return n}((n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")).a);Object(r.a)([Object(i.b)({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],o.prototype,"type",void 0),o=Object(r.a)([Object(a.a)("esri.popup.content.Content")],o),t.a=o},pO5D:function(e,t,n){"use strict";function r(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}n.d(t,"a",(function(){return r}))},pPEy:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=(n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("9MzC")),u=n("LE9a"),c=n("fX31"),l=n("pqNC");function h(e){return e&&"group"===e.type}function f(e,t,n){var r,i;if(e)for(var a=0,o=e.length;a<o;a++){if((r=e.getItemAt(a))[t]===n)return r;if(h(r)&&(i=f(r.layers,t,n)))return i}}var p=i.a.getLogger("esri.support.LayersMixin"),d=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];(e=t.call.apply(t,[this].concat(i))).layers=new u.a;var o=function(t){t.parent=$t(e),e.layerAdded(t),"elevation"!==t.type&&"base-elevation"!==t.type||p.error("Layer 'title:".concat(t.title,", id:").concat(t.id,"' of type '").concat(t.type,"' is not supported as an operational layer and will therefore be ignored."))},s=function(t){t.parent=null,e.layerRemoved(t)};return e.layers.on("before-add",(function(e){return function(e){e.parent&&"remove"in e.parent&&e.parent.remove(e)}(e.item)})),e.layers.on("after-add",(function(e){return o(e.item)})),e.layers.on("after-remove",(function(e){return s(e.item)})),e}return Zt(n,[{key:"destroy",value:function(){var e,t=Vt(this.layers.removeAll());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.layerRemoved(n),n.destroy()}}catch(r){t.e(r)}finally{t.f()}this.layers.destroy()}},{key:"layers",set:function(e){this._set("layers",Object(c.b)(e,this._get("layers")))}},{key:"add",value:function(e,t){var n=this,r=this.layers;t=r.getNextIndex(t),e instanceof l.a?e.parent===this?this.reorder(e,t):r.add(e,t):Object(s.o)(e)?e.then((function(e){n.destroyed||n.add(e,t)})):p.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}},{key:"addMany",value:function(e,t){var n=this,r=this.layers;t=r.getNextIndex(t),e.slice().forEach((function(e){e.parent!==n?(r.add(e,t),t+=1):n.reorder(e,t)}))}},{key:"findLayerById",value:function(e){return f(this.layers,"id",e)}},{key:"findLayerByUid",value:function(e){return f(this.layers,"uid",e)}},{key:"remove",value:function(e){return this.layers.remove(e)}},{key:"removeMany",value:function(e){return this.layers.removeMany(e)}},{key:"removeAll",value:function(){return this.layers.removeAll()}},{key:"reorder",value:function(e,t){return this.layers.reorder(e,t)}},{key:"layerAdded",value:function(e){}},{key:"layerRemoved",value:function(e){}}]),n}(e);return Object(r.a)([Object(a.b)()],t.prototype,"layers",null),t=Object(r.a)([Object(o.a)("esri.support.LayersMixin")],t)}},pPNP:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),s=n("OvF4"),u=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).attributeTable=null,r.bandCount=null,r.colormap=null,r.extent=null,r.format=void 0,r.height=null,r.width=null,r.histograms=null,r.keyProperties={},r.multidimensionalInfo=null,r.noDataValue=null,r.pixelSize=null,r.pixelType=null,r.isPseudoSpatialReference=!1,r.spatialReference=null,r.statistics=null,r.storageInfo=null,r.transform=null,r}return Zt(n,[{key:"dataType",get:function(){var e=this.keyProperties&&this.keyProperties.DataType;return e?e.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(e){e&&this._set("nativeExtent",e)}},{key:"nativePixelSize",get:function(){if(null==this.transform)return this.pixelSize;var e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}}]),n}(o.a);Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"attributeTable",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"bandCount",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"colormap",void 0),Object(r.a)([Object(i.b)({type:String,readOnly:!0})],u.prototype,"dataType",null),Object(r.a)([Object(i.b)({type:s.a,json:{write:!0}})],u.prototype,"extent",void 0),Object(r.a)([Object(i.b)({type:s.a,json:{write:!0}})],u.prototype,"nativeExtent",null),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"nativePixelSize",null),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"format",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"height",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"width",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"histograms",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"keyProperties",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"multidimensionalInfo",void 0),Object(r.a)([Object(i.b)()],u.prototype,"noDataValue",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"pixelSize",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"pixelType",void 0),Object(r.a)([Object(i.b)()],u.prototype,"isPseudoSpatialReference",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"spatialReference",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"statistics",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"storageInfo",void 0),Object(r.a)([Object(i.b)({json:{write:!0}})],u.prototype,"transform",void 0),u=Object(r.a)([Object(a.a)("esri.layers.support.RasterInfo")],u),t.a=u},pUVe:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return f}));var r=n("srIe"),i=n("SuVq"),a=(n("4GrV"),n("Cy1f")),o=n("5DEt"),s=n("sTkM"),u=n("BPBZ"),c=n("opr1"),l=n("9+ss");function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(r.k)(n)?[e,t,n]:[e,t]}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(r.k)(n)?{x:e,y:t,z:n}:{x:e,y:t}}var p=function(){function e(t){Wt(this,e),this.spatialReference=t}return Zt(e,[{key:"mapToLocalMultiple",value:function(e){var t=this;return Object(r.g)(e.map((function(e){return t.mapToLocal(e)})))}},{key:"doUnnormalization",get:function(){return!1}}]),e}(),d=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Wt(this,n),(i=t.call(this,r)).defaultZ=a,i.transform=Object(l.b)(),i.transformInv=Object(l.b)(),i.transform=Object(l.a)(e),Object(c.a)(i.transformInv,i.transform),i}return Zt(n,[{key:"makeMapPoint",value:function(e,t){return h(e,t,this.defaultZ)}},{key:"mapToLocal",value:function(e){return f(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}},{key:"localToMap",value:function(e){return h(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this.defaultZ)}}]),n}(p),v=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;Wt(this,n),(i=t.call(this,e.spatialReference)).view=e,i.defaultZ=null,i.pWS=Object(a.e)(),i.tangentFrameUpWS=Object(a.e)(),i.tangentFrameRightWS=Object(a.e)(),i.tangentFrameForwardWS=Object(a.e)(),i.localFrameRightWS=Object(a.e)(),i.localFrameUpWS=Object(a.e)(),i.worldToLocalTransform=Object(s.a)(),i.localToWorldTransform=Object(s.a)(),i.scale=1,i.scale=e.resolution,i.referenceMapPoint=r,i.defaultZ=r.hasZ?r.z:null;var c=e.state.camera.viewRight;i.view.renderCoordsHelper.toRenderCoords(i.referenceMapPoint,i.pWS),i.view.renderCoordsHelper.worldBasisAtPosition(i.pWS,0,i.tangentFrameRightWS),i.view.renderCoordsHelper.worldBasisAtPosition(i.pWS,1,i.tangentFrameUpWS),i.view.renderCoordsHelper.worldBasisAtPosition(i.pWS,2,i.tangentFrameForwardWS);var l=Object(a.e)();return Object(o.d)(l,i.tangentFrameForwardWS,Object(o.g)(c,i.tangentFrameForwardWS)),Object(o.i)(i.localFrameRightWS,c,l),Object(o.q)(i.localFrameRightWS,i.localFrameRightWS),Object(o.f)(i.localFrameUpWS,i.tangentFrameForwardWS,i.localFrameRightWS),Object(u.d)(i.worldToLocalTransform,i.localFrameRightWS,i.tangentFrameRightWS),Object(u.c)(i.localToWorldTransform,i.worldToLocalTransform),i}return Zt(n,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}},{key:"makeMapPoint",value:function(e,t){return h(e,t,this.defaultZ)}},{key:"mapToLocal",value:function(e){var t=Object(a.e)();this.view.renderCoordsHelper.toRenderCoords(new i.a({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),Object(o.t)(t,t,this.worldToLocalTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(r.k)(n)?f(n.x/this.scale,n.y/this.scale):null}},{key:"localToMap",value:function(e){var t=Object(a.e)();this.view.renderCoordsHelper.toRenderCoords(new i.a({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),Object(o.t)(t,t,this.localToWorldTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(r.k)(n)?h(n.x,n.y,this.defaultZ):null}}]),n}(p);function y(e,t){if("2d"===e.type)return new d(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){var n=new i.a(t.length>2?{x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}:{x:t[0],y:t[1],spatialReference:e.spatialReference});return new v(e,n)}return null}},pXG8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("qatw");function i(e){return{geometryType:Object(r.c)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function a(e,t,n){var i=Object(r.b)(t);return e.map((function(e){var t=i.fromJSON(e);return t.spatialReference=n,t}))}},pdg3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("pO5D"),i=n("04ZG"),a=0,o=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object.defineProperty($t(e),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+a++}),e}return n}(e);return t=Object(r.a)([Object(i.a)("esri.core.Identifiable")],t)})),s=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return n}(o(function(){return function e(){Wt(this,e)}}()));s=Object(r.a)([Object(i.a)("esri.core.Identifiable")],s)},phGV:function(e,t,n){"use strict";n.r(t);var r,i=n("pO5D"),a=n("wSAH"),o=n("srIe"),s=n("6S2I"),u=(n("zqDF"),n("WbKI")),c=n("04ZG"),l=n("zlDU"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LE9a")),f=n("jWBI"),p=n("TRCY"),d=n("N5XI"),v=n("f/qv"),y=n("ag7Y"),b=n("nvBr"),g=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).color=new b.a([0,0,0,1]),r}return Zt(n,[{key:"clone",value:function(){return new r(Object(v.a)({color:this.color}))}}]),n}(y.a);Object(i.a)([Object(u.b)({type:b.a,json:{write:!0}})],g.prototype,"color",void 0);var m=g=r=Object(i.a)([Object(c.a)("esri.webmap.background.ColorBackground")],g),w=n("36Co"),O=n("TcGo"),j=n("VW+2"),_=n("r0DZ"),x={widthBreakpoint:{getValue:function(e){var t=e.viewSize[0],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(e){var t=e.viewSize[1],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(e){var t=e.viewSize,n=this.values;return t[1]>=t[0]?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},k={xsmall:544,small:768,medium:992,large:1200};function S(e,t){return t?x[e].valueToClassName[t].split(" "):[]}var M=n("eqZM"),I=n("QS+a"),T=n("9MzC"),A=n("WZb1"),C=n("l4ZG"),E=n("SuVq"),P=n("OvF4"),R=(n("4GrV"),n("qRWG")),D=n("y3LX"),L=n("3/ME"),N=(n("rlSK"),n("tQ+6")),F=n("Stxv"),z=n("WBXD"),V=n("/CmD"),G=n("f4Nx"),U=n("zm0L"),B=n("+rMe"),q=n("bV/r"),H=n("bRsD"),W=n("ZYtI"),J=n("5k2a"),Z=n("kJYu"),K=n("9iar"),Y=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).view=null,r.baseLayerViews=new h.a,r.referenceLayerViews=new h.a,r._loadingHandle=Object(d.init)($t(r),"view.map.basemap",(function(e){e&&e.load().catch((function(){}))})),r}return Zt(n,[{key:"destroy",value:function(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}},{key:"suspended",get:function(){return!this.view||this.view.suspended}},{key:"updating",get:function(){return!(this.view&&this.view.suspended||!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}}]),n}(V.a);Object(i.a)([Object(u.b)({constructOnly:!0})],Y.prototype,"view",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Y.prototype,"baseLayerViews",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Y.prototype,"referenceLayerViews",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Y.prototype,"suspended",null),Object(i.a)([Object(u.b)({type:Boolean,readOnly:!0})],Y.prototype,"updating",null),Y=Object(i.a)([Object(c.a)("esri.views.BasemapView")],Y);var X=n("00eo"),Q=n("KOts"),$=s.a.getLogger("esri.views.LayerViewManager"),ee=function(){function e(t,n,r){var i=this;Wt(this,e),this.layer=t,this.view=n,this.layerViewImporter=r,this._controller=Object(T.d)(),this._deferred=Object(T.f)(),this._started=!1,this.done=!1,Object(T.p)(this._controller.signal,(function(){var e=new l.a("cancelled:layerview-create","layerview creation cancelled",{layer:t});i._deferred.reject(e)}))}var t;return Zt(e,[{key:"promise",get:function(){return this._deferred.promise}},{key:"destroy",value:function(){this._controller.abort();var e=this.layerView;if(e){var t=this.layer,n=this.view;t.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}}},{key:"start",value:(t=Ut(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,u,c,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._started){e.next=2;break}return e.abrupt("return");case 2:return this._started=!0,t=this._controller.signal,n=this.layer,r=this.view,this._map=r.map,e.prev=5,e.next=8,n.load({signal:t});case 8:if(e.t0="prefetchResources"in n,!e.t0){e.next=12;break}return e.next=12,n.prefetchResources({signal:t});case 12:if(!n.createLayerView){e.next=18;break}return e.next=15,n.createLayerView(r,{signal:t});case 15:s=e.sent,e.next=24;break;case 18:if(this.layerViewImporter.hasLayerViewModule(n)){e.next=20;break}throw new l.a("layer:view-not-supported","No layerview implementation was found");case 20:return e.next=22,this.layerViewImporter.importLayerView(n);case 22:c=e.sent,Object(T.u)(t),s="default"in c?new c.default({layer:n,view:r}):new c({layer:n,view:r});case 24:return h=function(){u=Object(o.p)(u),s.destroy(),s.layer=null,s.parent=null,s.view=null,f.done=!0},u=Object(T.p)(t,h),Object(T.u)(t),e.prev=26,e.next=29,s.when();case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),h(),e.t1;case 34:if(null==(i=this._map)||null==(a=i.allLayers)?void 0:a.includes(n)){e.next=36;break}return e.abrupt("return",(h(),void this._deferred.reject(new l.a("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}))));case 36:this.layerView=s,n.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:n,layerView:s}),this.done=!0,this._deferred.resolve(s),e.next=42;break;case 39:e.prev=39,e.t2=e.catch(5),n.emit("layerview-create-error",{view:r,error:e.t2}),r.emit("layerview-create-error",{layer:n,error:e.t2}),this.done=!0,this._deferred.reject(new l.a("layerview:create-error","layerview creation failed",{layer:n,error:e.t2}));case 42:case"end":return e.stop()}}),e,this,[[5,39],[26,31]])}))),function(){return t.apply(this,arguments)})}]),e}(),te=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e))._layerLayerViewInfoMap=new Map,t._watchUpdatingTracking=new X.a,t.supportsGround=!0,t._preloadLayerViewModules=function(){var e,n=null==(e=t.view.map)?void 0:e.allLayers;if(n){var r,i=Vt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.layerViewImporter.hasLayerViewModule(a)&&t.layerViewImporter.importLayerView(a)}}catch(o){i.e(o)}finally{i.f()}}},t._reschedule=function(){return Object(o.j)(t._workPromise)&&(t._workPromise=Object(T.f)()),t.handles.remove("reschedule"),t.handles.add(Object(z.b)(t._doWork),"reschedule"),t._workPromise.promise},t._doWork=function(){var e,n,r,i=t.view.map;if(t._map!==i&&(t.clear(),t._map=i),Object(o.j)(t._workPromise))t.notifyChange("updating");else{t.handles.remove("reschedule"),t.handles.remove("collection-change");var a=new p.a({root:$t(t),rootCollectionNames:t._rootCollectionNames,getChildrenFunction:function(e){return e.layers}});if(!a)return t._workPromise.resolve(),void(t._workPromise=null);var s,u=Vt(a);try{for(u.s();!(s=u.n()).done;){var c=s.value;t._createLayerView(c)}}catch(g){u.e(g)}finally{u.f()}t._refreshCollections();var l,h=Vt(t._layerLayerViewInfoMap);try{for(h.s();!(l=h.n()).done;){var f=zt(l.value,2),d=f[0],v=f[1];a.includes(d)||(t._layerLayerViewInfoMap.delete(v.layer),v.destroy())}}catch(g){h.e(g)}finally{h.f()}var y=a.filter((function(e){return"group"===e.type})).map((function(e){return e.layers})),b=[null==i||null==(e=i.ground)?void 0:e.layers,null==i||null==(n=i.basemap)?void 0:n.baseLayers,null==i||null==(r=i.basemap)?void 0:r.referenceLayers,null==i?void 0:i.layers].concat(Bt(y)).filter((function(e){return!!e}));t.handles.add(b.map((function(e){return t._watchUpdatingTracking.addOnCollectionChange(e,t._reschedule)})),"collection-change"),t._workPromise.resolve(),t._workPromise=null}},t}return Zt(r,[{key:"initialize",value:function(){this.handles.add([Object(d.on)(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),Object(d.init)(this.view,["map.basemap","map.ground","map.layers","ready"],this._reschedule,!0)]),this._preloadLayerViewModules(),this._reschedule()}},{key:"destroy",value:function(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}},{key:"_layersToLayerViews",get:function(){var e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}},{key:"_rootCollectionNames",get:function(){return Array.from(this._layersToLayerViews.keys())}},{key:"updating",get:function(){return!(!Object(o.k)(this._workPromise)&&!this._watchUpdatingTracking.updating)||Object(Q.a)(this._layerLayerViewInfoMap,(function(e){return!e.done}))}},{key:"clear",value:function(){if(!this.destroyed){var e,t=Vt(this._layerLayerViewInfoMap.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}},{key:"whenLayerView",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._reschedule();case 2:if(this._layerLayerViewInfoMap.has(t)){e.next=4;break}throw new l.a("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t});case 4:return e.abrupt("return",this._layerLayerViewInfoMap.get(t).promise);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_refreshCollections",value:function(){var e,t=Vt(this._layersToLayerViews);try{for(t.s();!(e=t.n()).done;){var n=zt(e.value,2),r=n[0],i=n[1];this._populateLayerViewsOwners(this.get(r),this.get(i),this.view)}}catch(a){t.e(a)}finally{t.f()}this.notifyChange("updating")}},{key:"_populateLayerViewsOwners",value:function(e,t,n){if(e&&t){var r,i=0,a=Vt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=this._layerLayerViewInfoMap.get(o);if(s&&s.layerView){var u=s.layerView;u.layer=o,u.parent=n,t.getItemAt(i)!==u&&t.splice(i,0,u),o.layers&&this._populateLayerViewsOwners(o.layers,u.layerViews,u),i+=1}}}catch(c){a.e(c)}finally{a.f()}i<t.length&&t.splice(i,t.length)}else t&&t.removeAll()}},{key:"_createLayerView",value:function(e){var t=this;if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),void this.notifyChange("updating");e.load().catch((function(){})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);var n=new ee(e,this.view,this.layerViewImporter);n.promise.then((function(){return t._refreshCollections()}),(function(n){var r,i;n&&(Object(T.m)(n)||"cancelled:layerview-create"===n.name)||$.error("Failed to create layerview for layer title:'".concat(null!=(r=e.title)?r:"no title","', id:'").concat(null!=(i=e.id)?i:"no id","' of type '").concat(e.type,"'."),{layer:e,error:n}),t._refreshCollections()})),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating")}}]),r}(Z.a);Object(i.a)([Object(u.b)()],te.prototype,"_workPromise",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],te.prototype,"_watchUpdatingTracking",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],te.prototype,"_layersToLayerViews",null),Object(i.a)([Object(u.b)({readOnly:!0})],te.prototype,"_rootCollectionNames",null),Object(i.a)([Object(u.b)()],te.prototype,"layerViewImporter",void 0),Object(i.a)([Object(u.b)()],te.prototype,"supportsGround",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],te.prototype,"updating",null),Object(i.a)([Object(u.b)({constructOnly:!0})],te.prototype,"view",void 0);var ne=te=Object(i.a)([Object(c.a)("esri.views.LayerViewManager")],te),re=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).factor=1.5,r.offset=Object(R.f)(0,0),r.position=null,r.size=120,r.maskUrl=null,r.maskEnabled=!0,r.overlayUrl=null,r.overlayEnabled=!0,r.visible=!0,r}return Zt(n,[{key:"version",get:function(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}}]),n}(V.a);Object(i.a)([Object(u.b)({type:Number})],re.prototype,"factor",void 0),Object(i.a)([Object(u.b)({nonNullable:!0})],re.prototype,"offset",void 0),Object(i.a)([Object(u.b)()],re.prototype,"position",void 0),Object(i.a)([Object(u.b)({type:Number,range:{min:0}})],re.prototype,"size",void 0),Object(i.a)([Object(u.b)()],re.prototype,"maskUrl",void 0),Object(i.a)([Object(u.b)()],re.prototype,"maskEnabled",void 0),Object(i.a)([Object(u.b)()],re.prototype,"overlayUrl",void 0),Object(i.a)([Object(u.b)()],re.prototype,"overlayEnabled",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],re.prototype,"version",null),Object(i.a)([Object(u.b)({type:Boolean})],re.prototype,"visible",void 0);var ie=re=Object(i.a)([Object(c.a)("esri.views.Magnifier")],re),ae=n("bHqs"),oe=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._handles=new _.a,e._currentTick=0,e}return Zt(n,[{key:"initialize",value:function(){var e=this;this._handles.add([this.view.allLayerViews.on("after-changes",(function(){e.notifyChange("tickInterval"),e._handles.remove("layerViewsUpdating"),e._handles.add(e._getLayerViewHandles(),"layerViewsUpdating")})),this.watch("tickInterval",(function(){return e._restartTicking()})),this.watch("view.ready",(function(){return e._restartTicking()}))]),this._restartTicking()}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)}},{key:"tickInterval",get:function(){var e=this.view.allLayerViews.filter((function(e){return Object(ae.b)(e)}));return this._getCommonInterval(e)}},{key:"_restartTicking",value:function(){var e=this;this._currentTick=0,this._intervalID&&clearInterval(this._intervalID),this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval((function(){var t=Date.now();e._currentTick+=e.tickInterval,e.view.allLayerViews.forEach((function(n){if(Object(ae.b)(n)){var r=Math.round(6e4*n.refreshInterval),i=e._currentTick%r==0,a=t-n.refreshTimestamp<5400;r&&i&&!a&&(n.refresh(t),e.emit("refresh",{layerView:n,timestamp:t,trigger:"interval"}))}}))}),this.tickInterval))}},{key:"_getLayerViewHandles",value:function(){var e=this,t=[],n=function(){return e.notifyChange("tickInterval")};return this.view.allLayerViews.forEach((function(r){Object(ae.b)(r)&&r.layer&&t.push(r.watch("refreshInterval",n),r.layer.on("refresh",(function(){var t=Date.now();r.refresh(t),e.emit("refresh",{layerView:r,timestamp:t,trigger:"layer-refresh"})})))})),t}},{key:"_getCommonInterval",value:function(e){return e.toArray().reduce((function(e,t){return function e(t,n){return isNaN(t)||isNaN(n)?0:n<=0?t:e(n,t%n)}(Math.round(6e4*t.refreshInterval),e)}),0)}}]),n}(U.a.EventedAccessor);Object(i.a)([Object(u.b)()],oe.prototype,"view",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],oe.prototype,"tickInterval",null);var se=oe=Object(i.a)([Object(c.a)("esri.views.RefreshManager")],oe),ue=n("OKTS"),ce=n("cWSj"),le=n("JYnY"),he=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],fe={};function pe(e){return!!fe[e]}he.forEach((function(e){fe[e]=!0}));var de=function(){function e(t){Wt(this,e),this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}return Zt(e,[{key:"connect",value:function(e){var t=this;e&&this.disconnect(),this.inputManager=e,this.handlers.forEach((function(e,n){var r=e.handler,i=e.priority;return t.inputManager.installHandlers(n,[r],i)}))}},{key:"disconnect",value:function(){var e=this;this.inputManager&&this.handlers.forEach((function(t,n){return e.inputManager.uninstallHandlers(n)})),this.inputManager=null}},{key:"destroy",value:function(){this.disconnect(),this.handlers.clear(),this.view=null}},{key:"on",value:function(e,t,n,r){var i,a,o=this,s=Array.isArray(e)?e:e.split(",");if(!function(e){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){if(!pe(t.value))return!1}}catch(r){n.e(r)}finally{n.f()}return!0}(s))return s.some(pe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;Array.isArray(t)?a=t:(i=t,a=[]),"function"==typeof n?i=n:r=n,r=null!=r?r:le.b.DEFAULT;var u=this.createUniqueGroupName(),c=new ve(this.view,s,a,i);this.handlers.set(u,{handler:c,priority:r});var l,h=Vt(s);try{for(h.s();!(l=h.n()).done;){var f=l.value,p=this.handlerCounts.get(f)||0;this.handlerCounts.set(f,p+1)}}catch(d){h.e(d)}finally{h.f()}return this.inputManager&&this.inputManager.installHandlers(u,[c],r),{remove:function(){return o.removeHandler(u,s)}}}},{key:"hasHandler",value:function(e){return!!this.handlerCounts.get(e)}},{key:"removeHandler",value:function(e,t){if(this.handlers.has(e)){this.handlers.delete(e);var n,r=Vt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.handlerCounts.get(i);void 0===a?console.error("Trying to remove handler for event that has no handlers registered: ",i):1===a?this.handlerCounts.delete(i):this.handlerCounts.set(i,a-1)}}catch(o){r.e(o)}finally{r.f()}}this.inputManager&&this.inputManager.uninstallHandlers(e)}},{key:"createUniqueGroupName",value:function(){return this.counter+=1,"viewEvents_"+this.counter}}]),e}(),ve=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a){var o;Wt(this,n),(o=t.call(this,!0)).view=e;var s,u=Vt(r);try{for(u.s();!(s=u.n()).done;){switch(s.value){case"click":o.registerIncoming("click",i,(function(e){return a(o.wrapClick(e))}));break;case"double-click":o.registerIncoming("double-click",i,(function(e){return a(o.wrapDoubleClick(e))}));break;case"immediate-click":o.registerIncoming("immediate-click",i,(function(e){return a(o.wrapImmediateClick(e))}));break;case"immediate-double-click":o.registerIncoming("immediate-double-click",i,(function(e){return a(o.wrapImmediateDoubleClick(e))}));break;case"hold":o.registerIncoming("hold",i,(function(e){return a(o.wrapHold(e))}));break;case"drag":o.registerIncoming("drag",i,(function(e){var t=o.wrapDrag(e);t&&a(t)}));break;case"key-down":o.registerIncoming("key-down",i,(function(e){return a(o.wrapKeyDown(e))}));break;case"key-up":o.registerIncoming("key-up",i,(function(e){return a(o.wrapKeyUp(e))}));break;case"pointer-down":o.registerIncoming("pointer-down",i,(function(e){return a(o.wrapPointer(e,"pointer-down"))}));break;case"pointer-move":o.registerIncoming("pointer-move",i,(function(e){return a(o.wrapPointer(e,"pointer-move"))}));break;case"pointer-up":o.registerIncoming("pointer-up",i,(function(e){return a(o.wrapPointer(e,"pointer-up"))}));break;case"pointer-drag":o.registerIncoming("pointer-drag",i,(function(e){return a(o.wrapPointerDrag(e))}));break;case"mouse-wheel":o.registerIncoming("mouse-wheel",i,(function(e){return a(o.wrapMouseWheel(e))}));break;case"pointer-enter":o.registerIncoming("pointer-enter",i,(function(e){return a(o.wrapPointer(e,"pointer-enter"))}));break;case"pointer-leave":o.registerIncoming("pointer-leave",i,(function(e){return a(o.wrapPointer(e,"pointer-leave"))}));break;case"gamepad":o.registerIncoming("gamepad",i,(function(e){a(o.wrapGamepad(e))}));break;case"focus":o.registerIncoming("focus",i,(function(e){a(o.wrapFocus(e))}));break;case"blur":o.registerIncoming("blur",i,(function(e){a(o.wrapBlur(e))}))}}}catch(c){u.e(c)}finally{u.f()}return o}return Zt(n,[{key:"wrapFocus",value:function(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapBlur",value:function(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,u=t.eventId,c=e.cancelable;return{type:"click",pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,screenPoint:Object(R.f)(a,o),mapPoint:this.getMapPoint(a,o),eventId:u,cancelable:c,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapDoubleClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,u=t.eventId,c=e.cancelable;return{type:"double-click",pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),eventId:u,cancelable:c,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapImmediateClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,u=t.eventId,c=s.pointerId,l=e.cancelable;return{type:"immediate-click",pointerId:c,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),eventId:u,cancelable:l,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapImmediateDoubleClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,u=t.eventId,c=s.pointerId,l=e.cancelable;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),eventId:u,cancelable:l,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapHold",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,u=e.cancelable;return{type:"hold",pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),cancelable:u,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"getMapPoint",value:function(e,t){return this.view.toMap(Object(R.f)(e,t),{exclude:[]})}},{key:"wrapDrag",value:function(e){var t=e.data,n=t.center,r=n.x,i=n.y,a=t.action,o=t.pointerType,s=t.button;if("start"===a&&(this.latestDragStart=t),this.latestDragStart){var u=t.pointer.native,c=t.buttons,l=e.cancelable,h=e.timestamp,f={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===a&&(this.latestDragStart=void 0),{type:"drag",action:a,x:r,y:i,origin:f,pointerType:o,button:s,buttons:c,radius:t.radius,angle:Object(ue.n)(t.angle),native:u,timestamp:h,cancelable:l,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}}},{key:"wrapKeyDown",value:function(e){var t=e.data,n=t.key,r=t.repeat,i=t.native,a=e.cancelable;return{type:"key-down",key:n,repeat:r,native:i,timestamp:e.timestamp,cancelable:a,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapKeyUp",value:function(e){var t=e.data,n=t.key,r=t.native,i=e.cancelable;return{type:"key-up",key:n,native:r,timestamp:e.timestamp,cancelable:i,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapPointer",value:function(e,t){var n=e.data,r=n.x,i=n.y,a=n.button,o=n.buttons,s=n.native,u=n.eventId,c=s.pointerId,l=s.pointerType,h=e.cancelable;return{type:t,x:r,y:i,pointerId:c,pointerType:l,button:a,buttons:o,native:s,timestamp:e.timestamp,eventId:u,cancelable:h,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapPointerDrag",value:function(e){var t=e.data.currentEvent,n=t.x,r=t.y,i=t.buttons,a=t.native,o=t.eventId,s=e.data.startEvent.button,u=e.data.startEvent.native.pointerId,c=e.data.startEvent.native.pointerType,l=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},f=e.cancelable;return{type:"pointer-drag",x:n,y:r,pointerId:u,pointerType:c,button:s,buttons:i,action:l,origin:h,native:a,timestamp:e.timestamp,eventId:o,cancelable:f,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapMouseWheel",value:function(e){var t=e.cancelable,n=e.data,r=e.timestamp;return{type:"mouse-wheel",x:n.x,y:n.y,deltaY:n.deltaY,native:n.native,timestamp:r,cancelable:t,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapGamepad",value:function(e){var t=e.data,n=t.action,r=t.state,i=t.device,a=e.cancelable;return{type:"gamepad",device:i,timestamp:e.timestamp,action:n,buttons:r.buttons,axes:r.axes,cancelable:a,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}}]),n}(ce.a),ye=n("Tl51");function be(e){return"mouse"===e}function ge(e){return"mouse"!==e.pointerType||0===e.button}function me(e){return!!e.native.shiftKey}var we={manipulator:null,tool:null},Oe=s.a.getLogger("esri.views.ToolViewManager"),je="manipulators",_e="tools",xe=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e))._handles=new _.a,t._creatingTool=null,t._manipulatorState=new(function(){function e(){Wt(this,e),this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToActiveTool=null,this._cursor=null}return Zt(e,[{key:"cursor",get:function(){return this._cursor}},{key:"handleInputEvent",value:function(e,t){var n=function(){return e.stopPropagation()};switch(e.type){case"pointer-move":be(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":if(!ge(e)||me(e))break;var r=Object(I.a)(e),i=this._intersect(r,e.pointerType,t.forEachTool);if(Object(o.j)(i))break;var a=this._findToolAndManipulatorByKey(i,t.forEachTool,we),s=Object(o.c)(a,(function(e){return e.manipulator})),u=Object(o.c)(a,(function(e){return e.tool}));!(Object(o.k)(s)&&Object(o.k)(u)&&s.interactive)||s.grabbable&&s.grabbableForEvent(e)||!s.grabbing||s.dragging||this._ungrabManipulatorBeforeDragging(s,u,e),Object(o.k)(s)&&s.interactive&&s.grabbable&&s.grabbableForEvent(e)&&!s.grabbing&&(this._grabbedManipulators.set(e.pointerId,{key:i,start:r}),1===this._grabbedManipulators.size&&(this._revertToActiveTool=t.activeTool,t.setActiveTool(i.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",screenPoint:r}),n());break;case"pointer-up":this._handlePointerEnd(e,t);break;case"pointer-drag":if(!ge(e))break;var c=this._grabbedManipulators.get(e.pointerId),l=this._draggedManipulators.get(e.pointerId),h=Object(o.c)(c||l,(function(e){return e.key})),f=this._findManipulatorByKey(h,t.forEachTool);if(Object(o.j)(f))break;var p=Object(I.a)(e);p.x=Object(ue.c)(p.x,0,t.view.width),p.y=Object(ue.c)(p.y,0,t.view.height);var d=Object(o.q)(c||l).start;switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(f.dragging=!0,f.events.emit("drag",l?{action:"update",start:d,screenPoint:p}:{action:"start",start:d,screenPoint:p,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{key:Object(o.q)(h),start:d}));break;case"end":f.dragging=!1,l&&f.events.emit("drag",{action:"end",start:d,screenPoint:p}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}n();break;case"immediate-click":var v=Object(I.a)(e),y=this._intersect(v,e.pointerType,t.forEachTool),b=this._findToolAndManipulatorByKey(y,t.forEachTool,we);if(me(e)||t.forEachTool((function(e){if((!Object(o.k)(b)||b.tool!==e||!e.selectionManagementDisabled)&&e.manipulators){var t=!1;e.manipulators.forEach((function(e){var n=e.manipulator;n.selected&&(n.selected=!1,t=!0)})),t&&e.manipulatorSelectionChanged&&e.manipulatorSelectionChanged()}})),Object(o.j)(b))break;var g=b.manipulator,m=b.tool;if(!g.interactive)break;g.selectable&&!m.selectionManagementDisabled&&(g.selected=!g.selected,m.manipulatorSelectionChanged&&m.manipulatorSelectionChanged()),g.events.emit("immediate-click",{screenPoint:v,button:e.button,pointerType:e.pointerType,shiftKey:e.native.shiftKey,stopPropagation:n});break;case"click":var w=Object(I.a)(e),O=this._intersect(w,e.pointerType,t.forEachTool),j=this._findManipulatorByKey(O,t.forEachTool);if(Object(o.j)(j)||!j.interactive)break;j.events.emit(e.type,{screenPoint:w,button:e.button,pointerType:e.pointerType,shiftKey:e.native.shiftKey}),n();break;case"double-click":var _=Object(I.a)(e),x=this._intersect(_,e.pointerType,t.forEachTool),k=this._findManipulatorByKey(x,t.forEachTool);if(Object(o.j)(k)||!k.interactive)break;k.events.emit("double-click",{screenPoint:_,button:e.button,pointerType:e.pointerType,shiftKey:e.native.shiftKey,stopPropagation:n});break;case"immediate-double-click":var S=Object(I.a)(e),M=this._intersect(S,e.pointerType,t.forEachTool),T=this._findManipulatorByKey(M,t.forEachTool);if(Object(o.j)(T)||!T.interactive)break;T.events.emit("immediate-double-click",{screenPoint:S,button:e.button,pointerType:e.pointerType,shiftKey:e.native.shiftKey,stopPropagation:n})}this._updateCursor(t.forEachTool)}},{key:"_ungrabManipulatorBeforeDragging",value:function(e,t,n){var r=this;e.grabbing=!1,e.events.emit("grab-changed",{action:"end",screenPoint:Object(I.a)(n)}),this._grabbedManipulators.forEach((function(n,i){var a=n.key;a.tool===t&&t.manipulators.findById(a.manipulatorId)===e&&r._grabbedManipulators.delete(i)}))}},{key:"_handlePointerEnd",value:function(e,t){var n=Object(o.c)(this._grabbedManipulators.get(e.pointerId),(function(e){return e.key})),r=this._findManipulatorByKey(n,t.forEachTool);if(Object(o.k)(r)&&!r.dragging){var i=Object(o.k)(t.creatingTool)&&t.creatingTool===Object(o.q)(n).tool;1!==this._grabbedManipulators.size||0!==this._draggedManipulators.size||i||(t.setActiveTool(this._revertToActiveTool),this._revertToActiveTool=null),r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",screenPoint:Object(I.a)(e)})),this._grabbedManipulators.delete(e.pointerId)}}},{key:"_cursorFromMap",value:function(e,t){var n=this,r=null;return Object(Q.a)(e,(function(e){var i=e.key,a=n._findManipulatorByKey(i,t);return!!(Object(o.k)(a)&&a.interactive&&"cursor"in a&&a.cursor)&&(r=a.cursor,!0)})),r}},{key:"_updateCursor",value:function(e){this._cursor=this._grabbedManipulators.size>0?this._cursorFromMap(this._grabbedManipulators,e)||"grabbing":this._hoveredManipulators.size>0?this._cursorFromMap(this._hoveredManipulators,e)||"pointer":null}},{key:"clearPointers",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,a=function(t){return t.tool===e&&(Object(o.j)(i)||t.manipulatorId===i)};this._grabbedManipulators.forEach((function(e,r){var i=e.key;if(a(i)){n._grabbedManipulators.delete(r);var s=n._findManipulatorByKey(i,t);Object(o.k)(s)&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",screenPoint:null}))}})),this._draggedManipulators.forEach((function(e,r){var i=e.key;if(a(i)){n._draggedManipulators.delete(r);var s=n._findManipulatorByKey(i,t);Object(o.k)(s)&&(s.dragging=!1,s.events.emit("drag",{action:"cancel"}))}})),r&&this._hoveredManipulators.forEach((function(e,r){var i=e.key;if(a(i)){n._hoveredManipulators.delete(r);var s=n._findManipulatorByKey(i,t);Object(o.k)(s)&&(s.hovering=!1)}})),this._updateCursor(t)}},{key:"_intersect",value:function(e,t,n){var r=null;return n((function(n){if(null==n.manipulators||!Object(ye.a)(n))return!1;var i=n.manipulators.intersect(e,t);return!Object(o.j)(i)&&(r={manipulatorId:i.id,tool:n},!0)})),r}},{key:"updateHoveredStateFromKnownPointers",value:function(e){var t=this;this._pointerLocations.forEach((function(n,r){t._updateHoveredStateForPointerAtScreenPosition(Object(R.f)(n.x,n.y),r,n.pointerType,e)}))}},{key:"handleHoverEvent",value:function(e,t){"pointer-up"!==e.type&&"immediate-click"!==e.type&&"pointer-move"!==e.type||!be(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Object(I.a)(e),e.pointerId,e.pointerType,t)}},{key:"_updateHoveredStateForPointerAtScreenPosition",value:function(e,t,n,r){var i=this._intersect(e,n,r),a=this._findManipulatorByKey(i,r),s=Object(o.c)(this._hoveredManipulators.get(t),(function(e){return e.key})),u=this._findManipulatorByKey(s,r);Object(o.k)(a)&&!a.interactive&&(a=null),u!==a&&(Object(o.k)(u)&&(u.hovering=!1),Object(o.k)(a)?(a.hovering=!0,this._hoveredManipulators.set(t,{key:Object(o.q)(i)})):this._hoveredManipulators.delete(t),this._updateCursor(r))}},{key:"_findManipulatorByKey",value:function(e,t){return this._findToolAndManipulatorByKey(e,t,we)?we.manipulator:null}},{key:"_findToolAndManipulatorByKey",value:function(e,t,n){return Object(o.j)(e)?null:(n.tool=null,n.manipulator=null,t((function(t){if(t!==e.tool||null==t.manipulators||!Object(ye.a)(t))return!1;var r=t.manipulators.findById(e.manipulatorId);return!!Object(o.k)(r)&&(n.manipulator=r,n.tool=t,!0)})),n.manipulator?n:null)}}]),e}()),t.tools=Object(ye.c)(),t.cursor=null,t._forEachTool=function(e){if(!Object(o.k)(t._creatingTool)||!e(t._creatingTool)){var n,r=Vt(t.tools.items);try{for(r.s();!(n=r.n()).done;){if(e(n.value))return}}catch(i){r.e(i)}finally{r.f()}}},t}return Zt(r,[{key:"initialize",value:function(){var e=this;this._handles.add([this.view.on(he,(function(t){e._handleInputEvent(t)}),le.b.TOOL),this.tools.on("before-add",(function(t){var n=t.item;null==n||e.tools.includes(n)?t.preventDefault():null==n.created||n.created||(Oe.error("tools","Tool can not be added to view before it has been created"),t.preventDefault())})),this.tools.on("before-remove",(function(t){var n=t.item;e._manipulatorState.clearPointers(n,e._forEachTool)})),this.tools.on("change",(function(){e._refreshToolWatchers()}))])}},{key:"destroy",value:function(){this._forEachTool((function(e){return e.destroy()})),this._handles.destroy(),this._handles=null}},{key:"activeTool",set:function(e){var t=this;!Object(o.k)(e)||this.view.ready?(Object(ye.e)(this,e,(function(n){t._set("activeTool",n),t._removeIncompleteTools(e),t._forEachTool((function(e){var n=Object(o.j)(t.activeTool)||e===t.activeTool;e.setEditableFlag&&e.setEditableFlag(1,n);var r=Object(ye.a)(e);!Object(o.j)(t.activeTool)&&r||t._manipulatorState.clearPointers(e,t._forEachTool,!r)})),t._updateCursor()})),this._creatingTool!==e&&this._rejectCreatingTool()):Oe.error("#activeTool=","cannot set active tool while view is not ready")}},{key:"createTool",value:(t=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.view.whenReady();case 2:if(i="Tool creation was interrupted by another tool being created",!Object(T.n)(r)){e.next=5;break}throw Object(T.e)(i);case 5:return a=new t(Nt(Nt({},Object(ye.b)(n)),{},{view:this.view})),s=Object(T.p)(r,(function(){return u.activeTool=null})),this._rejectCreatingTool(i),this._creatingTool=a,a.attach(),this._refreshToolWatchers(),Object(ye.d)(a,!0),e.next=13,a.when();case 13:return Object(o.k)(s)&&s.remove(),this._creatingTool=null,this.tools.add(a),a instanceof V.a&&null!=a.completed&&Object(d.whenOnce)(a,"completed").then((function(){Object(ye.d)(a,!1)})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"attach",value:function(){var e=this;this._forEachTool((function(e){return e.attach()})),"3d"===this.view.type?this._handles.add([this.view.state.watch("camera",(function(){e.forEachManipulator((function(e){null!=e.onViewChange&&e.onViewChange()}))})),this.view.elevationProvider.on("elevation-change",(function(t){e.forEachManipulator((function(e){null!=e.onElevationChange&&e.onElevationChange(t)}))}))],je):this._handles.add(this.view.watch("extent",(function(){e.forEachManipulator((function(e){null!=e.onViewChange&&e.onViewChange()}))})))}},{key:"detach",value:function(){this.activeTool=null,this._forEachTool((function(e){e.detach(),e.destroy()})),this.tools.removeAll(),this._handles.remove(je)}},{key:"forEachManipulator",value:function(e){this._forEachTool((function(t){t.manipulators&&t.manipulators.forEach((function(n){var r=n.manipulator;return e(r,t)}))}))}},{key:"_handleInputEvent",value:function(e){var t=this,n=!1,r=Nt(Nt({},e),{},{stopPropagation:function(){n=!0,e.stopPropagation()}});Object(o.k)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool((function(e){!n&&!1!==e.visible&&e.handleInputEvent&&e.handleInputEvent(r)})),!n&&"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:function(e){t.activeTool=e},creatingTool:this._creatingTool,view:this.view}),!n&&Object(o.k)(this.activeTool)&&this.activeTool.handleInputEventAfter&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}},{key:"_refreshToolWatchers",value:function(){var e=this;this._handles.remove(_e),this._forEachTool((function(t){if(t instanceof V.a){var n=Object(d.watch)(t,["cursor","visible","editable"],(function(){Object(ye.a)(t)||e._manipulatorState.clearPointers(t,e._forEachTool),e._updateCursor()}));e._handles.add(n,_e)}t.manipulators&&e._handles.add(t.manipulators.on("change",(function(n){n.removed.forEach((function(n){var r=n.id;e._manipulatorState.clearPointers(t,e._forEachTool,!0,r)})),e._manipulatorState.updateHoveredStateFromKnownPointers(e._forEachTool),e._updateCursor()})),_e)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}},{key:"_updateCursor",value:function(){var e=null;this._forEachTool((function(t){return null!=t.cursor&&!1!==t.visible&&(e=t.cursor,!0)})),e||(e=this._manipulatorState.cursor),this._get("cursor")!==e&&this._set("cursor",e)}},{key:"_rejectCreatingTool",value:function(e){var t=this._creatingTool;Object(o.j)(t)||(this._manipulatorState.clearPointers(t,this._forEachTool),t.rejectCreation&&t.rejectCreation(Object(T.e)(e)),t.destroy(),this._creatingTool=null,this._refreshToolWatchers())}},{key:"_removeIncompleteTools",value:function(e){var t=this;this.tools.filter((function(t){return(Object(o.j)(e)||t!==e)&&null!=t.completed&&!t.completed})).forEach((function(e){t.tools.remove(e)}))}}]),r}(V.a);Object(i.a)([Object(u.b)({constructOnly:!0,nonNullable:!0})],xe.prototype,"view",void 0),Object(i.a)([Object(u.b)({value:null})],xe.prototype,"activeTool",null),Object(i.a)([Object(u.b)({readOnly:!0,type:h.a})],xe.prototype,"tools",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],xe.prototype,"cursor",void 0);var ke=xe=Object(i.a)([Object(c.a)("esri.views.ToolViewManager")],xe),Se=function(){function e(t,n,r){Wt(this,e),this.analysis=t,this.viewFactory=n,this.controllerFactory=r,this._promise=Object(T.f)(),this.analysisView=null,this.analysisController=null,this._load()}var t;return Zt(e,[{key:"destroy",value:function(){Object(o.k)(this.analysisView)&&this.analysisView.destroy(),Object(o.k)(this.analysisController)&&this.analysisController.destroy()}},{key:"promise",get:function(){return this._promise.promise}},{key:"_load",value:(t=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!Object(o.k)(this.viewFactory)){e.next=7;break}return e.next=4,this.viewFactory(this.analysis);case 4:this.analysisView=e.sent,e.next=8;break;case 7:t=!0;case 8:if(!Object(o.k)(this.controllerFactory)){e.next=14;break}return e.next=11,this.controllerFactory(this.analysis);case 11:this.analysisController=e.sent,e.next=15;break;case 14:t=!0;case 15:t?this._promise.reject("no view/controller factories available for analysis"):this._promise.resolve(Object(o.q)(this.analysisView));case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Me=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e))._items=new Map,t.analyses=new h.a,t}return Zt(r,[{key:"initialize",value:function(){var e=this;this.analyses.on("after-add",(function(t){var n=t.item;e._items.set(n,e._createItem(n))})),this.analyses.on("after-remove",(function(t){var n=t.item,r=e._getItem(n);Object(o.k)(r)&&(r.destroy(),e._items.delete(n))}))}},{key:"whenAnalysisView",value:(t=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._items.has(t)?this._items.get(t).promise:Object(T.r)(new l.a("view:no-analysisview-for-analysis","No analysis view has been found for the analysis")));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getAnalysisView",value:function(e){var t=this._items.get(e);return t?t.analysisView:null}},{key:"_createItem",value:function(e){return new Se(e,this.viewFactory,this.controllerFactory)}},{key:"_getItem",value:function(e){return this._items.get(e)}}]),r}(V.a);Object(i.a)([Object(u.b)({type:h.a})],Me.prototype,"analyses",void 0),Object(i.a)([Object(u.b)()],Me.prototype,"viewFactory",void 0),Object(i.a)([Object(u.b)()],Me.prototype,"controllerFactory",void 0),Me=Object(i.a)([Object(c.a)("esri.views.3d.interactive.graphics.AnalysisManager")],Me);var Ie=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this)).nativeIndex=null,r._detectedDeviceType="unknown",r._detectedDeviceType="standard"===e.mapping?"standard":Te.test(e.id)?"spacemouse":"unknown",r.nativeIndex=e.index,r}return Zt(n,[{key:"native",get:function(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}},{key:"deviceType",get:function(){return this._detectedDeviceType}},{key:"axisThreshold",get:function(){return Ae[this.deviceType]}}]),n}(V.a);Object(i.a)([Object(u.b)({nonNullable:!0,readOnly:!0})],Ie.prototype,"nativeIndex",void 0),Object(i.a)([Object(u.b)({type:String,readOnly:!0})],Ie.prototype,"deviceType",null),Object(i.a)([Object(u.b)({type:Number,readOnly:!0})],Ie.prototype,"axisThreshold",null),Ie=Object(i.a)([Object(c.a)("esri.views.input.gamepad.GamepadInputDevice")],Ie);var Te=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Ae={standard:.15,spacemouse:.025,unknown:0},Ce=Ie,Ee=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).devices=new h.a,e.enabledFocusMode="document",e}return n}(V.a);Object(i.a)([Object(u.b)({type:h.a.ofType(Ce),readOnly:!0})],Ee.prototype,"devices",void 0),Object(i.a)([Object(u.b)({type:["document","view","none"]})],Ee.prototype,"enabledFocusMode",void 0);var Pe=Ee=Object(i.a)([Object(c.a)("esri.views.input.gamepad.GamepadSettings")],Ee),Re=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).gamepad=new Pe,e}return n}(V.a);Object(i.a)([Object(u.b)({readOnly:!0})],Re.prototype,"gamepad",void 0);var De=Re=Object(i.a)([Object(c.a)("esri.views.input.Input")],Re),Le=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).enabled=!0,r.device=null,r.mode="pan",r.tiltDirection="forward-down",r.velocityFactor=1,r}return n}(V.a);Object(i.a)([Object(u.b)({type:Boolean,nonNullable:!0})],Le.prototype,"enabled",void 0),Object(i.a)([Object(u.b)({type:Ce})],Le.prototype,"device",void 0),Object(i.a)([Object(u.b)({type:["pan","zoom"],nonNullable:!0})],Le.prototype,"mode",void 0),Object(i.a)([Object(u.b)({type:["forward-down","forward-up"],nonNullable:!0})],Le.prototype,"tiltDirection",void 0),Object(i.a)([Object(u.b)({type:Number,nonNullable:!0})],Le.prototype,"velocityFactor",void 0);var Ne=Le=Object(i.a)([Object(c.a)("esri.views.navigation.gamepad.GamepadSettings")],Le),Fe=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).browserTouchPanEnabled=!0,r.gamepad=new Ne,r.momentumEnabled=!0,r.mouseWheelZoomEnabled=!0,r}return n}(V.a);Object(i.a)([Object(u.b)({type:Boolean})],Fe.prototype,"browserTouchPanEnabled",void 0),Object(i.a)([Object(u.b)({type:Ne,nonNullable:!0})],Fe.prototype,"gamepad",void 0),Object(i.a)([Object(u.b)({type:Boolean})],Fe.prototype,"momentumEnabled",void 0),Object(i.a)([Object(u.b)({type:Boolean})],Fe.prototype,"mouseWheelZoomEnabled",void 0);var ze=Fe=Object(i.a)([Object(c.a)("esri.views.navigation.Navigation")],Fe),Ve=n("VLTf");function Ge(e){return"heightModelInfo"in e}function Ue(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"ogc-feature":return!0;case"imagery":case"map-image":case"map-notes":case"tile":case"vector-tile":case"scene":case null:default:return!1}}function Be(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wms":case"wmts":case null:return!1}return!1}var qe,He=new J.a({heightModel:"gravity-related-height"}),We=s.a.getLogger("esri.views.support.DefaultsFromMap"),Je=qe=function(e){Kt(i,e);var t,r=Xt(i);function i(){var e;return Wt(this,i),(e=r.apply(this,arguments))._handles=new _.a,e._waitTask=null,e._extentProjectController=null,e._spatialReferenceCandidates=null,e._extentCandidates=null,e.logDebugInformation=!1,e.isSpatialReferenceDone=!1,e.isTileInfoDone=!1,e.isHeightModelInfoSearching=!1,e.spatialReference=null,e.extent=null,e.heightModelInfo=null,e.vcsWkid=null,e.latestVcsWkid=null,e.mapCollectionPaths=qe.DefaultMapCollectionPaths.slice(),e.tileInfo=null,e}return Zt(i,[{key:"initialize",value:function(){var e=this;this.watch("mapCollectionPaths",(function(){e._running&&(e.reset(),e.start())}))}},{key:"destroy",value:function(){this._set("view",null),this._handles&&(this._handles.destroy(),this._handles=null),this._cancelLoading()}},{key:"_running",get:function(){return!!(this._handles&&this._handles.size>0)}},{key:"reset",value:function(){this._handles.removeAll(),this._set("isSpatialReferenceDone",!1),this._set("isTileInfoDone",!1),this._set("isHeightModelInfoSearching",!1),this._set("spatialReference",null),this._set("extent",null),this._set("heightModelInfo",null),this._set("vcsWkid",null),this._set("latestVcsWkid",null),this._set("tileInfo",null),this._spatialReferenceCandidates=null,this._extentCandidates=null}},{key:"start",value:function(){var e=this;this._handles.removeAll();var t,n=this._updateLayerChange.bind(this),r=Vt(this.mapCollectionPaths);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._handles.add(Object(d.on)(this.view,"map."+i,"change",n,n,n,!0))}}catch(a){r.e(a)}finally{r.f()}this._handles.add(Object(d.when)(this,"isSpatialReferenceDone",(function(){return e._updateTileInfo()}),!0))}},{key:"_ownerNameFromCollectionName",value:function(e){var t=e.lastIndexOf(".");return-1===t?"view":"view."+e.slice(0,t)}},{key:"_ensureLoadedOwnersFromCollectionName",value:function(e){for(var t,n=this._ownerNameFromCollectionName(e).split("."),r=0;r<n.length&&(t=this.get(n.slice(0,r+1).join(".")));r++)if(t.load&&!t.isFulfilled())return{collectionName:e,owner:null,loading:t.load().catch((function(){}))};return{collectionName:e,owner:t}}},{key:"_cancelLoading",value:function(){this._waitTask=null,this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null)}},{key:"_updateWhen",value:function(e){var t=this,n=!0,r=!1,i=e.catch((function(){})).then((function(){n?r=!0:i===t._waitTask&&t._update()}));return n=!1,r||(this._waitTask=i),r}},{key:"_updateLayerChange",value:function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1),this._update()}},{key:"_update",value:function(){var e=this;if(this._cancelLoading(),this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");var t=this._processMapCollections((function(t){return e._processSpatialReferenceSource(t)}));if(this._debugLog("Search ended with status '".concat(Ke(t),"'")),0!==t){var n=null,r=this._spatialReferenceCandidates;if(!r||r.length<1?(n=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default (".concat(Ze(n),")"))):(this.defaultSpatialReference&&r.length>1&&r.findIndex((function(t){return t.equals(e.defaultSpatialReference)}))>-1&&(r=[this.defaultSpatialReference]),n=r[0],this._debugLog("Locking to "+Ze(n))),this._set("spatialReference",n),n)if(this.extent)this._set("isSpatialReferenceDone",!0);else{var i=this.logDebugInformation;this.logDebugInformation=!1,this._processMapCollections((function(t){return e._findExtent(t,n)})),this.logDebugInformation=i,this._projectExtentCandidate().catch((function(){})).then((function(){return e._set("isSpatialReferenceDone",!0)}))}else this._set("isSpatialReferenceDone",!0)}}if(null==this.heightModelInfo&&this.view.isHeightModelInfoRequired){this._debugLog("Starting search for height model info...");var a=this._processMapCollections((function(t){return e._processHeightModelInfoSource(t)}),(function(e){return function(e){return null!=e.layers||Be(e)||Ue(e)||Ge(e)}(e)}));this._debugLog("Search ended with status "+Ke(a)),this._set("isHeightModelInfoSearching",0===a)}this._updateTileInfo()}}},{key:"_processMapCollections",value:function(e,t){var n=this;this._preloadMapCollections(t);var r=2;return this._forAllMapCollectionSources((function(e){if(2!==r)return!1;var t=e.collectionName;return n._debugLog("Processing collection ".concat(t,"...")),!(e.loading&&!n._updateWhen(e.loading)&&(n._debugLog("Collection ".concat(e.collectionName," owner is loading -> wait")),r=0,1))}),(function(i){return!(2!==r||(null==t||t(i)?!i.load||i.isFulfilled()||n._updateWhen(i.load())?(!i.load||i.isResolved())&&e(i)&&(r=1,1):(n._debugLog("Source ".concat(i.id," is loading -> wait")),r=0,1):(n._debugLog("Source ".concat(i.id," is skipped due to predicate")),1)))})),r}},{key:"_preloadMapCollections",value:function(e){var t=this,n=10,r=this.logDebugInformation;this.logDebugInformation=!1,this._forAllMapCollectionSources((function(){return!0}),(function(i){return 0!==n&&!(null!=e&&!e(i)||(i.load&&!i.isFulfilled()&&(t.logDebugInformation=r,t._debugLog("Pre-loading source "+i.id),t.logDebugInformation=!1,i.load().catch((function(){})),n--),0))})),this.logDebugInformation=r}},{key:"_forAllMapCollectionSources",value:function(e,t){var n,r=Vt(this.mapCollectionPaths);try{for(r.s();!(n=r.n()).done;){var i="map."+n.value,a=this._ensureLoadedOwnersFromCollectionName(i);if(!1!==e(a)){var o=a.owner;if(!o||o.isRejected&&o.isRejected())this._debugLog("Collection ".concat(i," owner is invalid or rejected -> skip"));else{var s=this.view.get(i);s?this._forEachSource(s,t):this._debugLog("Collection ".concat(i," does not exist -> skip"))}}}}catch(u){r.e(u)}finally{r.f()}}},{key:"_forEachSource",value:function(e,t){var n,r=Vt(e.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;!1!==t(i)&&"layers"in i&&i.layers&&this._forEachSource(i.layers,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"_processSpatialReferenceSource",value:function(e){var t=this._getSupportedSpatialReferences(e);return 0!==t.length&&(this._spatialReferenceCandidates?(t=Object(N.f)(t,this._spatialReferenceCandidates,(function(e,t){return e.equals(t)}))).length>0?this._spatialReferenceCandidates=t:this._debugLog("Layer ".concat(e.id," is ignored because its supported spatial\n          references are not compatible with the previous candidates")):this._spatialReferenceCandidates=t,1===this._spatialReferenceCandidates.length)}},{key:"_findExtent",value:function(e,t){var n="fullExtents"in e&&e.fullExtents||(e.fullExtent?[e.fullExtent]:[]),r=n.find((function(e){return e.spatialReference.equals(t)}));if(r)return this._set("extent",r),!0;if(this._getSupportedSpatialReferences(e).length>0){var i=n.map((function(t){return{extent:t,layer:e}}));this._extentCandidates=(this._extentCandidates||[]).concat(i)}return!1}},{key:"_projectExtentCandidate",value:(t=Ut(regeneratorRuntime.mark((function e(){var t,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._extentCandidates&&this._extentCandidates.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this.spatialReference,!(r=this._extentCandidates.find((function(e){return Object(C.a)(e.extent.spatialReference,t)})))){e.next=7;break}this._set("extent",Object(C.d)(r.extent,t)),e.next=22;break;case 7:return i=this._extentCandidates[0],this._extentProjectController=Object(T.d)(),e.next=11,n.e(158).then(n.bind(null,"4ugL"));case 11:return a=e.sent,e.prev=12,e.next=15,a.projectGeometry(i.extent,t,i.layer.portalItem,this._extentProjectController.signal);case 15:o=e.sent,this._set("extent",o),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(12);case 21:this._extentProjectController=null;case 22:case"end":return e.stop()}}),e,this,[[12,19]])}))),function(){return t.apply(this,arguments)})},{key:"_getSupportedSpatialReferences",value:function(e){var t=this,n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===n.length)return this._debugLog("Layer ".concat(e.id," is ignored because it does not have any spatial references")),[];var r=n.filter((function(n){return t.view.isSpatialReferenceSupported(n,e,(function(e){return t._debugLog(e)}))}));return this._debugLog(0===r.length?"Layer ".concat(e.id," has spatial references but none of them are supported (or layer doesn't require locking)"):"Layer ".concat(e.id," has spatial references. Resulting candidate set: ").concat(r.map(Ze).join(", "))),r}},{key:"_processHeightModelInfoSource",value:function(e){var t=function(e){var t,n=e.url&&Object(Ve.e)(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&Object(o.k)(n)&&"ImageServer"===n.serverType||!Ge(e)||!e.heightModelInfo?(Ue(t=e)?t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ:Be(t))?J.a.deriveUnitFromSR(He,e.spatialReference):null:e.heightModelInfo}(e);return!!t&&(this._set("heightModelInfo",t),this._set("isHeightModelInfoSearching",!1),e.spatialReference&&(this._set("vcsWkid",e.spatialReference.vcsWkid),this._set("latestVcsWkid",e.spatialReference.latestVcsWkid)),!0)}},{key:"_updateTileInfo",value:function(){if(null==this.tileInfo)if(this.view.isTileInfoRequired()){if(this.isSpatialReferenceDone){var e=this.get("view.map");if(e){var t=e.basemap,n=e.get("layers.0"),r=null;if(t&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: basemap still loading");var i=t&&t.get("baseLayers.0");if(i&&"failed"!==i.loadStatus){if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first basemap layer still loading");r="tileInfo"in i&&i.tileInfo}else{if(!n||"failed"===n.loadStatus)return this._debugLog("updateTileInfo: no tileInfo"),void this._set("isTileInfoDone",!0);if(!n.loaded)return this._updateWhen(n.load()),void this._debugLog("updateTileInfo: first operational layer still loading");r="tileInfo"in n&&n.tileInfo}}else if(n&&"failed"!==n.loadStatus){if(!n.loaded)return this._updateWhen(n.load()),void this._debugLog("updateTileInfo: first operational layer still loading");r="tileInfo"in n&&n.tileInfo}r&&!r.spatialReference.equals(this.spatialReference)&&(r=null),this._debugLog("updateTileInfo: setting "+r),this._set("tileInfo",r),this._set("isTileInfoDone",!0)}else this._debugLog("updateTileInfo: no map")}}else this._set("isTileInfoDone",!0)}},{key:"_debugLog",value:function(e){this.logDebugInformation&&We.info(e)}}]),i}(V.a);function Ze(e){return e?JSON.stringify(e.toJSON()):"undefined"}function Ke(e){switch(e){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}}Je.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"],Object(i.a)([Object(u.b)()],Je.prototype,"logDebugInformation",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"isSpatialReferenceDone",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"isTileInfoDone",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"isHeightModelInfoSearching",void 0),Object(i.a)([Object(u.b)({constructOnly:!0})],Je.prototype,"view",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"spatialReference",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"extent",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"heightModelInfo",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"vcsWkid",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"latestVcsWkid",void 0),Object(i.a)([Object(u.b)()],Je.prototype,"mapCollectionPaths",void 0),Object(i.a)([Object(u.b)()],Je.prototype,"defaultSpatialReference",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Je.prototype,"tileInfo",void 0);var Ye,Xe=Je=qe=Object(i.a)([Object(c.a)("esri.views.support.DefaultsFromMap")],Je),Qe=s.a.getLogger("esri.views.View"),$e=Ye=function(e){Kt(a,e);var t,n,r,i=Xt(a);function a(e){var t;return Wt(this,a),(t=i.call(this,e))._userSpatialReference=null,t._cursor=null,t.allLayerViews=new p.a({root:$t(t),rootCollectionNames:["basemapView.baseLayerViews","groundView?.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(e){return e.layerViews}}),t.animation=null,t.basemapView=null,t.defaultsFromMap=new Xe({view:$t(t)}),t.fatalError=null,t.extent=null,t.graphics=new K.b,t.navigating=!1,t.layerViews=new h.a,t.magnifier=new ie,t.padding={left:0,top:0,right:0,bottom:0},t.ready=!1,t.spatialReferenceWarningDelay=1e3,t.supportsGround=!0,t.timeExtent=null,t.type=null,t.scale=null,t.updating=!1,t.initialExtentRequired=!0,t.renderContext=null,t.input=new De,t.navigation=new ze,t.layerViewManager=null,t.refreshManager=null,t.isHeightModelInfoRequired=!1,t.width=null,t.height=null,t.resizing=!1,t.suspended=!1,t.viewEvents=new de($t(t)),t.persistableViewModels=new h.a,t._isValid=!1,t._readyCycleForced=!1,t.handles.add(t.watch("preconditionsReady",(function(e){e?(t._currentSpatialReference=t.spatialReference,Ye.views.add($t(t))):(t._currentSpatialReference=null,Ye.views.remove($t(t))),t.notifyChange("spatialReference"),!e&&t.ready?(t.layerViewManager.clear(),t.toolViewManager.detach(),t._teardown()):e&&!t.ready&&(t._startup(),t.toolViewManager.attach())}),!0)),t}return Zt(a,[{key:"initialize",value:function(){var e,t=this;this.addResolvingPromise(this.validate().then((function(){return t._isValid=!0,Object(d.whenOnce)(t,"ready")}))),this.basemapView=new Y({view:this}),this.layerViewManager=new ne({view:this,layerViewImporter:{importLayerView:function(e){return t.importLayerView(e)},hasLayerViewModule:function(e){return t.hasLayerViewModule(e)}},supportsGround:this.supportsGround}),this.refreshManager=new se({view:this}),this.toolViewManager=new ke({view:this}),this.analysisManager=new Me({viewFactory:function(e){return t.createAnalysisView(e)},controllerFactory:function(e){return t.createAnalysisController(e)}}),this._resetInitialViewPropertiesFromContent(),Object(d.init)(this.defaultsFromMap,"isSpatialReferenceDone",(function(n){var r=!!(t.map&&t.map.allLayers.length>0);if(n&&!t.spatialReference&&r||!e){if(n&&!t.spatialReference&&r&&!e){var i=e=Object(T.a)(t.spatialReferenceWarningDelay);e.then((function(){i===e&&Qe.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})).catch((function(){}))}}else e=null}),!0)}},{key:"destroy",value:function(){if(!this.destroyed){this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics.destroy(),this.graphics=null,this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager.destroy(),this.toolViewManager=null,this.refreshManager.destroy(),this.refreshManager=null,this.layerViewManager.destroy(),this.layerViewManager=null,this.basemapView.destroy(),this.basemapView=null,this.invalidate(),this._emitter.clear(),this.handles.removeAll();var e=this.map;this.map=null,null==e||e.destroy()}}},{key:"_startup",value:function(){this._set("ready",!0)}},{key:"_teardown",value:function(){this._set("ready",!1)}},{key:"whenReady",value:function(){return Promise.resolve(this)}},{key:"toMap",value:function(){return Qe.error("#toMap()","Not implemented on this instance of View"),null}},{key:"heightModelInfo",get:function(){return this.getDefaultHeightModelInfo()}},{key:"interacting",get:function(){return this.navigating}},{key:"preconditionsReady",get:function(){return!!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!q.a.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)}},{key:"map",set:function(e){var t;e!==this._get("map")&&(null!=(t=e)&&t.destroyed&&(Qe.warn("#map","The provided map is already destroyed",{map:e}),e=null),q.a.isLoadable(e)&&e.load().catch((function(){})),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",e))}},{key:"spatialReference",get:function(){var e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&((e=e.clone()).vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e},set:function(e){this._userSpatialReference=e,this._set("spatialReference",e)}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing}},{key:"initialExtent",get:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent}},{key:"cursor",get:function(){var e=this.toolViewManager?this.toolViewManager.cursor:null;return Object(o.k)(e)?e:this._cursor||"default"},set:function(e){this._cursor=e,this.notifyChange("cursor")}},{key:"size",get:function(){return[this.width,this.height]}},{key:"whenLayerView",value:function(e){return this.layerViewManager.whenLayerView(e)}},{key:"getAnalysisView",value:function(e){return this.analysisManager.getAnalysisView(e)}},{key:"whenAnalysisView",value:function(e){return this.analysisManager.whenAnalysisView(e)}},{key:"getDefaultSpatialReference",value:function(){return this.get("defaultsFromMap.spatialReference")}},{key:"getDefaultHeightModelInfo",value:function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null}},{key:"importLayerView",value:function(e){throw new l.a("importLayerView() not implemented")}},{key:"hasLayerViewModule",value:function(e){return!1}},{key:"createAnalysisView",value:(r=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new l.a("createAnalysisView() not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"createAnalysisController",value:(n=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new l.a("createAnalysisController() not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"validate",value:(t=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"invalidate",value:function(){this._isValid=!1}},{key:"isSpatialReferenceSupported",value:function(e,t,n){return!0}},{key:"isTileInfoRequired",value:function(){return!1}},{key:"when",value:function(e,t){return this.isResolved()&&!this.ready&&Qe.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),Dt(en(a.prototype),"when",this).call(this,e,t)}},{key:"forceReadyCycle",value:function(){var e=this;this.ready&&(this._readyCycleForced=!0,Object(d.whenFalseOnce)(this,"preconditionsReady",(function(){return e._readyCycleForced=!1})))}},{key:"createTool",value:function(e,t,n){return this.toolViewManager.createTool(e,t,n)}},{key:"tryFatalErrorRecovery",value:function(){this.fatalError=null}},{key:"_resetInitialViewPropertiesFromContent",value:function(){var e=this;if(this.defaultsFromMap){var t=function(){return e.defaultsFromMap&&e.defaultsFromMap.start()};this.defaultsFromMap.reset(),this._currentSpatialReference=null,this.notifyChange("spatialReference"),this.handles.remove("defaultsFromMap"),this.handles.add([Object(d.watch)(this,"spatialReference",(function(e,n){Object(G.c)(e,n)||t()})),Object(d.watch)(this,"initialExtentRequired",t),Object(z.b)(t)],"defaultsFromMap")}}}]),a}(Object(Z.b)(U.a.EventedMixin(Object(B.b)(V.a))));$e.views=new h.a,Object(i.a)([Object(F.a)("toolViewManager.activeTool")],$e.prototype,"activeTool",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"allLayerViews",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"animation",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"basemapView",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"defaultsFromMap",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"fatalError",void 0),Object(i.a)([Object(u.b)({type:P.a})],$e.prototype,"extent",void 0),Object(i.a)([Object(u.b)(Object(K.c)())],$e.prototype,"graphics",void 0),Object(i.a)([Object(u.b)({readOnly:!0,type:J.a,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],$e.prototype,"heightModelInfo",null),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"interacting",null),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"navigating",void 0),Object(i.a)([Object(u.b)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","initialExtentRequired","initialExtent","defaultsFromMap.isSpatialReferenceDone","defaultsFromMap.isTileInfoDone"]})],$e.prototype,"preconditionsReady",null),Object(i.a)([Object(u.b)({type:h.a,readOnly:!0})],$e.prototype,"layerViews",void 0),Object(i.a)([Object(u.b)({type:ie})],$e.prototype,"magnifier",void 0),Object(i.a)([Object(u.b)({value:null,type:H.default})],$e.prototype,"map",null),Object(i.a)([Object(u.b)()],$e.prototype,"padding",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"ready",void 0),Object(i.a)([Object(u.b)({type:A.a})],$e.prototype,"spatialReference",null),Object(i.a)([Object(u.b)()],$e.prototype,"spatialReferenceWarningDelay",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"stationary",null),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"supportsGround",void 0),Object(i.a)([Object(u.b)({type:W.a})],$e.prototype,"timeExtent",void 0),Object(i.a)([Object(F.a)("toolViewManager.tools")],$e.prototype,"tools",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"toolViewManager",void 0),Object(i.a)([Object(F.a)("analysisManager.analyses")],$e.prototype,"analyses",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"analysisManager",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"type",void 0),Object(i.a)([Object(u.b)({type:Number})],$e.prototype,"scale",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"updating",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"initialExtentRequired",void 0),Object(i.a)([Object(u.b)({readOnly:!0,type:P.a})],$e.prototype,"initialExtent",null),Object(i.a)([Object(u.b)()],$e.prototype,"cursor",null),Object(i.a)([Object(u.b)()],$e.prototype,"renderContext",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"input",void 0),Object(i.a)([Object(u.b)({type:ze,nonNullable:!0})],$e.prototype,"navigation",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"layerViewManager",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"width",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"height",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"resizing",void 0),Object(i.a)([Object(u.b)({value:null,readOnly:!0})],$e.prototype,"size",null),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"suspended",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"viewEvents",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],$e.prototype,"persistableViewModels",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"_isValid",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"_readyCycleForced",void 0),Object(i.a)([Object(u.b)()],$e.prototype,"_currentSpatialReference",void 0);var et=$e=Ye=Object(i.a)([Object(c.a)("esri.views.View")],$e),tt=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).state="running",r.target=null,r}return Zt(n,[{key:"initialize",value:function(){var e=this;this.addResolvingPromise(new Promise((function(t,n){return e._dfd={resolve:t,reject:n}})))}},{key:"done",get:function(){return"finished"===this.state||"stopped"===this.state}},{key:"stop",value:function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new l.a("ViewAnimation stopped")))}},{key:"finish",value:function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}},{key:"update",value:function(e,t){t||(t=Object(T.o)(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}}]),n}(B.a);Object(i.a)([Object(u.b)({readOnly:!0})],tt.prototype,"done",null),Object(i.a)([Object(u.b)({readOnly:!0,type:String})],tt.prototype,"state",void 0),Object(i.a)([Object(u.b)()],tt.prototype,"target",void 0),((tt=Object(i.a)([Object(c.a)("esri.views.ViewAnimation")],tt))||(tt={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};var nt=tt,rt=n("qYtE"),it=n("BVSY"),at=function(){function e(t,n,r,i){Wt(this,e);var a=t.targetGeometry,o=n.targetGeometry;i?"string"==typeof i&&(i=Object(it.b)(i)||it.a.ease):i=it.a.ease,this.easing=i,this.duration=r,this.sCenterX=a.x,this.sCenterY=a.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=n.scale,this.tRotation=n.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}return Zt(e,[{key:"applyRatio",value:function(e,t){var n,r,i,a,o=this.easing(t);t>=1?(n=this.tCenterX,r=this.tCenterY,i=this.tRotation,a=this.tScale):(n=this.sCenterX+o*this.dCenterX,r=this.sCenterY+o*this.dCenterY,i=this.sRotation+o*this.dRotation,a=this.sScale+o*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=r,e.scale=a,e.rotation=i}}]),e}(),ot=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).duration=200,r.transition=null,r.easing=it.a.ease,r.view=null,r.viewpoint=null,r.viewpoint=new D.a({targetGeometry:new E.a,scale:0,rotation:0}),r._updateTask=Object(z.a)({postRender:r._postRender.bind($t(r))}),r._updateTask.pause(),r}return Zt(n,[{key:"destroy",value:function(){this._updateTask.remove(),this._updateTask=null}},{key:"animate",value:function(e,t,n){var r=this;this.stop();var i=this.viewpoint;Object(rt.d)(i,t),this.transition=new at(this.viewpoint,e.target,n&&n.duration||this.duration,n&&n.easing||this.easing);var a=function(){r.animation===e&&r._updateTask&&("finished"===e.state&&(r.transition.applyRatio(r.viewpoint,1),r.view.state&&(r.view.state.viewpoint=r.viewpoint.clone())),r.animation=null,r.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}},{key:"animateContinous",value:function(e,t){var n=this;this.stop(),this.updateFunction=t,this.viewpoint=e;var r=new nt({target:e.clone()}),i=function(){n.animation===r&&n._updateTask&&(n.animation=null,n.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}},{key:"_postRender",value:function(e){var t=this.animation;if(t&&t.state!==nt.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{var n=(performance.now()-this._startTime)/this.transition.duration,r=n>=1;this.transition.applyRatio(this.viewpoint,n),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}}]),n}(V.a);Object(i.a)([Object(u.b)()],ot.prototype,"animation",void 0),Object(i.a)([Object(u.b)()],ot.prototype,"duration",void 0),Object(i.a)([Object(u.b)()],ot.prototype,"transition",void 0),Object(i.a)([Object(u.b)()],ot.prototype,"easing",void 0),Object(i.a)([Object(u.b)()],ot.prototype,"view",void 0),Object(i.a)([Object(u.b)()],ot.prototype,"viewpoint",void 0);var st=ot=Object(i.a)([Object(c.a)("esri.views.2d.AnimationManager")],ot);function ut(){return Promise.all([Promise.all([n.e(0),n.e(190)]).then(n.bind(null,"tpsn")),Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(22)]).then(n.bind(null,"tGAV"))])}var ct,lt,ht=function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(0),n.e(137)]).then(n.bind(null,"ArQ+"))}))},ft=function(){return ut().then((function(){return Promise.all([n.e(2),n.e(4),n.e(5),n.e(17)]).then(n.bind(null,"GJxj"))}))},pt={"base-dynamic":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(0),n.e(125)]).then(n.bind(null,"uWmW"))}))},"base-tile":ht,"bing-maps":ht,csv:ft,"geo-rss":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(126)]).then(n.bind(null,"Uxk/"))}))},feature:ft,geojson:ft,graphics:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(127)]).then(n.bind(null,"xw90"))}))},group:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(128)]).then(n.bind(null,"2GoO"))}))},imagery:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(129)]).then(n.bind(null,"f1zk"))}))},"imagery-tile":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(0),n.e(130)]).then(n.bind(null,"rrwe"))}))},kml:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(131)]).then(n.bind(null,"oM7z"))}))},"map-image":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(132)]).then(n.bind(null,"6BjF"))}))},"map-notes":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(133)]).then(n.bind(null,"eRoJ"))}))},"ogc-feature":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(4),n.e(5),n.e(17),n.e(134)]).then(n.bind(null,"bL7n"))}))},"open-street-map":ht,route:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(135)]).then(n.bind(null,"BLb8"))}))},stream:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(4),n.e(5),n.e(17),n.e(136)]).then(n.bind(null,"+haL"))}))},tile:ht,"vector-tile":function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(138)]).then(n.bind(null,"Rr/1"))}))},wcs:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(0),n.e(130)]).then(n.bind(null,"rrwe"))}))},"web-tile":ht,wms:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(0),n.e(139)]).then(n.bind(null,"JTUT"))}))},wmts:function(){return ut().then((function(){return Promise.all([n.e(2),n.e(3),n.e(0),n.e(140)]).then(n.bind(null,"QHIw"))}))},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null},dt=n("Ehki"),vt=n("UOZ4"),yt=n("IXLn"),bt=n("gYg2"),gt=n("Mu3I"),mt=n("M0lq"),wt=s.a.getLogger("esri.views.MapView"),Ot=ct=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).geometry=null,r.spatialReference=null,r}return Zt(n,[{key:"normalizedGeometry",get:function(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:Object(C.a)(this.geometry,this.spatialReference)?Object(C.d)(this.geometry,this.spatialReference):Object(bt.g)()?Object(bt.j)(this.geometry,this.spatialReference):(wt.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}},{key:"constrain",value:function(e,t){if(!this.normalizedGeometry)return e;var n=e.targetGeometry;if("extent"===this.normalizedGeometry.type?Object(yt.e)(this.normalizedGeometry,n):Object(yt.g)(this.normalizedGeometry,n))return e;var r=function(e,t){var n,r=t.spatialReference,i=[t.x,t.y],a=Number.POSITIVE_INFINITY,o=0,s=0,u=[0,0],c=Vt("extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings);try{for(c.s();!(n=c.n()).done;)for(var l=n.value,h=0;h<l.length-1;h++){Object(gt.h)(u,i,l,h);var f=Object(mt.i)(i,u);f<a&&(a=f,o=u[0],s=u[1])}}catch(p){c.e(p)}finally{c.f()}return{coordinate:new E.a({x:o,y:s,spatialReference:r}),distance:a}}(this.normalizedGeometry,n).coordinate;return r?(e.targetGeometry=r,e):e}},{key:"clone",value:function(){var e,t;return new ct({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(t=this.spatialReference)?void 0:t.clone()})}}]),n}(V.a);Object(i.a)([Object(u.b)({constructOnly:!0})],Ot.prototype,"geometry",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Ot.prototype,"normalizedGeometry",null),Object(i.a)([Object(u.b)({constructOnly:!0})],Ot.prototype,"spatialReference",void 0),Ot=ct=Object(i.a)([Object(c.a)("esri.views.2d.constraints.GeometryConstraint")],Ot);var jt=lt=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).enabled=!0,e.rotationEnabled=!0,e}return Zt(n,[{key:"constrain",value:function(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}},{key:"clone",value:function(){return new lt({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}}]),n}(V.a);Object(i.a)([Object(u.b)()],jt.prototype,"enabled",void 0),Object(i.a)([Object(u.b)()],jt.prototype,"rotationEnabled",void 0);var _t,xt=jt=lt=Object(i.a)([Object(c.a)("esri.views.2d.constraints.RotationConstraint")],jt),kt=_t=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._lodByScale={},r._scales=[],r.effectiveLODs=null,r.effectiveMinZoom=-1,r.effectiveMaxZoom=-1,r.effectiveMinScale=0,r.effectiveMaxScale=0,r.lods=null,r.minZoom=-1,r.maxZoom=-1,r.minScale=0,r.maxScale=0,r.snapToZoom=!0,r}return Zt(n,[{key:"initialize",value:function(){var e,t,n,r=this,i=this.lods,a=this.minScale,o=this.maxScale,s=this.minZoom,u=this.maxZoom,c=-1,l=-1,h=!1,f=!1;if(0!==a&&0!==o&&a<o&&(a=(e=[o,a])[0],o=e[1]),!i||!i.length)return this._set("effectiveMinScale",a),void this._set("effectiveMaxScale",o);(i=i.map((function(e){return e.clone()}))).sort((function(e,t){return t.scale-e.scale})),i.forEach((function(e,t){return e.level=t}));var p,d=Vt(i);try{for(d.s();!(p=d.n()).done;){var v=p.value;!h&&a>0&&a>=v.scale&&(c=v.level,h=!0),!f&&o>0&&o>=v.scale&&(l=n?n.level:-1,f=!0),n=v}}catch(y){d.e(y)}finally{d.f()}-1===s&&(s=0===a?0:c),-1===u&&(u=0===o?i.length-1:l),s=Math.max(s,0),s=Math.min(s,i.length-1),u=Math.max(u,0),s>(u=Math.min(u,i.length-1))&&(s=(t=[u,s])[0],u=t[1]),a=i[s].scale,o=i[u].scale,i.splice(0,s),i.splice(u-s+1,i.length),i.forEach((function(e,t){r._lodByScale[e.scale]=e,r._scales[t]=e.scale})),this._set("effectiveLODs",i),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",u),this._set("effectiveMinScale",a),this._set("effectiveMaxScale",o)}},{key:"constrain",value:function(e,t){if(t&&e.scale===t.scale)return e;var n=this.effectiveMinScale,r=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,o=0!==n&&e.scale>n;if(0!==r&&e.scale<r||o){var s=o?n:r;if(a){var u=(s-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*u,i.y=a.y+(i.y-a.y)*u}e.scale=s}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}},{key:"fit",value:function(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);var t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}},{key:"zoomToScale",value:function(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);var t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var n=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[n]-t[r])}},{key:"scaleToZoom",value:function(e){if(!this.effectiveLODs)return-1;var t,n,r=this._scales;if(e>=r[0])return this.effectiveMinZoom;if(e<=r[r.length-1])return this.effectiveMaxZoom;for(var i=0;i<r.length-1;i++){if(t=r[i],(n=r[i+1])===e)return i+this.effectiveMinZoom+1;if(t>e&&n<e)return i+this.effectiveMinZoom+1-(e-n)/(t-n)}}},{key:"snapToClosestScale",value:function(e){if(!this.effectiveLODs)return e;var t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}},{key:"snapToNextScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(!this.effectiveLODs)return e*t;var n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}},{key:"snapToPreviousScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!this.effectiveLODs)return e*t;var n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}},{key:"clone",value:function(){return new _t({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}},{key:"_getClosestScale",value:function(e){return this._lodByScale[e]||(e=this._scales.reduce((function(t,n){return Math.abs(n-e)<=Math.abs(t-e)?n:t}),this._scales[0])),this._lodByScale[e].scale}}]),n}(V.a);Object(i.a)([Object(u.b)({readOnly:!0})],kt.prototype,"effectiveLODs",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],kt.prototype,"effectiveMinZoom",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],kt.prototype,"effectiveMaxZoom",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],kt.prototype,"effectiveMinScale",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],kt.prototype,"effectiveMaxScale",void 0),Object(i.a)([Object(u.b)({type:[vt.a]})],kt.prototype,"lods",void 0),Object(i.a)([Object(u.b)()],kt.prototype,"minZoom",void 0),Object(i.a)([Object(u.b)()],kt.prototype,"maxZoom",void 0),Object(i.a)([Object(u.b)()],kt.prototype,"minScale",void 0),Object(i.a)([Object(u.b)()],kt.prototype,"maxScale",void 0),Object(i.a)([Object(u.b)()],kt.prototype,"snapToZoom",void 0);var St=kt=_t=Object(i.a)([Object(c.a)("esri.views.2d.constraints.ZoomConstraint")],kt),Mt={base:null,key:"type",typeMap:{extent:P.a,polygon:dt.a}},It=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).lods=null,e.minScale=0,e.maxScale=0,e.minZoom=-1,e.maxZoom=-1,e.rotationEnabled=!0,e.snapToZoom=!0,e}return Zt(n,[{key:"initialize",value:function(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}},{key:"destroy",value:function(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}},{key:"geometry",set:function(e){this._set("geometry",e||null)}},{key:"_defaultLODs",get:function(){var e=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return e&&t&&e.spatialReference.equals(t)?e.lods:null}},{key:"_geometry",get:function(){return new Ot({geometry:this.geometry,spatialReference:this.view.spatialReference})}},{key:"_rotation",get:function(){return new xt({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){return new St({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}},{key:"canZoomInTo",value:function(e){var t=this.effectiveMaxScale;return 0===t||e>=t}},{key:"canZoomOutTo",value:function(e){var t=this.effectiveMinScale;return 0===t||e<=t}},{key:"constrain",value:function(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}},{key:"constrainByGeometry",value:function(e){return this._geometry.constrain(e)}},{key:"fit",value:function(e){return this._zoom.fit(e)}},{key:"zoomToScale",value:function(e){return this._zoom.zoomToScale(e)}},{key:"scaleToZoom",value:function(e){return this._zoom.scaleToZoom(e)}},{key:"snapScale",value:function(e){return this._zoom.snapToClosestScale(e)}},{key:"snapToNextScale",value:function(e){return this._zoom.snapToNextScale(e)}},{key:"snapToPreviousScale",value:function(e){return this._zoom.snapToPreviousScale(e)}}]),n}(U.a.EventedAccessor);Object(i.a)([Object(u.b)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],It.prototype,"effectiveLODs",void 0),Object(i.a)([Object(u.b)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],It.prototype,"effectiveMinScale",void 0),Object(i.a)([Object(u.b)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],It.prototype,"effectiveMaxScale",void 0),Object(i.a)([Object(u.b)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],It.prototype,"effectiveMinZoom",void 0),Object(i.a)([Object(u.b)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],It.prototype,"effectiveMaxZoom",void 0),Object(i.a)([Object(u.b)({types:Mt,value:null})],It.prototype,"geometry",null),Object(i.a)([Object(u.b)({type:[vt.a]})],It.prototype,"lods",void 0),Object(i.a)([Object(u.b)()],It.prototype,"minScale",void 0),Object(i.a)([Object(u.b)()],It.prototype,"maxScale",void 0),Object(i.a)([Object(u.b)()],It.prototype,"minZoom",void 0),Object(i.a)([Object(u.b)()],It.prototype,"maxZoom",void 0),Object(i.a)([Object(u.b)()],It.prototype,"rotationEnabled",void 0),Object(i.a)([Object(u.b)()],It.prototype,"snapToZoom",void 0),Object(i.a)([Object(u.b)()],It.prototype,"view",void 0),Object(i.a)([Object(u.b)()],It.prototype,"_defaultLODs",null),Object(i.a)([Object(u.b)({type:Ot})],It.prototype,"_geometry",null),Object(i.a)([Object(u.b)({type:xt})],It.prototype,"_rotation",null),Object(i.a)([Object(u.b)({readOnly:!0,type:St})],It.prototype,"_zoom",null);var Tt,At=It=Object(i.a)([Object(c.a)("esri.views.2d.MapViewConstraints")],It),Ct=n("AvGH"),Et=n("QhKk"),Pt=n("HJJS"),Rt=n("opr1"),Lt=n("9+ss"),Gt=n("LGNZ"),qt=n("jHF5"),Ht=n("c46T");function Jt(e){return(t=e)instanceof Float32Array&&t.length>=2||function(e){return Array.isArray(e)&&e.length>=2}(e);var t}var Yt=[0,0],Qt=Tt=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._viewpoint2D={center:Object(Ct.a)(),rotation:0,scale:0,spatialReference:null},e.center=[0,0],e.extent=new P.a,e.id=0,e.inverseTransform=Object(Lt.b)(),e.resolution=0,e.rotation=0,e.scale=0,e.transform=Object(Lt.b)(),e.transformNoRotation=Object(Lt.b)(),e.displayMat3=Object(qt.b)(),e.displayViewMat3=Object(qt.b)(),e.viewMat3=Object(qt.b)(),e.viewMat2d=Object(Gt.a)(),e.worldScreenWidth=0,e.size=[0,0],e}return Zt(n,[{key:"pixelRatio",set:function(e){this._set("pixelRatio",e),this._update()}},{key:"size",set:function(e){this._set("size",e),this._update()}},{key:"viewpoint",set:function(e){if(e){var t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}},{key:"copy",value:function(e){var t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=Object(rt.d)(n,e.viewpoint),this._set("size",Object(mt.c)(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}},{key:"clone",value:function(){return new Tt({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}},{key:"toMap",value:function(e,t,n){return Jt(t)?Object(mt.s)(e,t,this.inverseTransform):(Yt[0]=t,Yt[1]=n,Object(mt.s)(e,Yt,this.inverseTransform))}},{key:"toScreen",value:function(e,t,n){return Jt(t)?Object(mt.s)(e,t,this.transform):(Yt[0]=t,Yt[1]=n,Object(mt.s)(e,Yt,this.transform))}},{key:"toScreenNoRotation",value:function(e,t,n){return Jt(t)?Object(mt.s)(e,t,this.transformNoRotation):(Yt[0]=t,Yt[1]=n,Object(mt.s)(e,Yt,this.transformNoRotation))}},{key:"getScreenTransform",value:function(e,t){var n=this._viewpoint2D.center,r=this._get("pixelRatio")||1,i=this._get("size");return Object(rt.i)(e,n,i,t,0,r),e}},{key:"_update",value:function(){var e=this._viewpoint2D,t=e.center,n=e.spatialReference,r=e.scale,i=e.rotation,a=this._get("pixelRatio")||1,o=this._get("size"),s=new D.a({targetGeometry:new E.a(t[0],t[1],n),scale:r,rotation:i});if(this._set("viewpoint",s),o&&n&&r){this.resolution=Object(rt.k)(s),this.rotation=i,this.scale=r,this.spatialReference=n,Object(mt.c)(this.center,t);var u=0!==o[0]?2/o[0]:0,c=0!==o[1]?-2/o[1]:0;Object(Pt.j)(this.displayMat3,u,0,0,0,c,0,-1,1,1);var l=Object(Pt.e)(this.viewMat3),h=Object(Ht.b)(o[0]/2,o[1]/2),f=Object(Ht.b)(-o[0]/2,-o[1]/2),p=Object(Et.d)(i);Object(Pt.a)(l,l,h),Object(Pt.i)(l,l,p),Object(Pt.a)(l,l,f),Object(Pt.g)(this.displayViewMat3,this.displayMat3,l);var d=Object(Rt.d)(this.viewMat2d);return Object(Rt.h)(d,d,h),Object(Rt.f)(d,d,p),Object(Rt.h)(d,d,f),Object(rt.h)(this.extent,s,o),Object(rt.l)(this.transform,s,o,a),Object(Rt.a)(this.inverseTransform,this.transform),Object(rt.m)(this.transformNoRotation,s,o,a),this.worldScreenWidth=Object(rt.n)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}}}]),n}(y.a);Object(i.a)([Object(u.b)({readOnly:!0})],Qt.prototype,"id",void 0),Object(i.a)([Object(u.b)({value:1,json:{write:!0}})],Qt.prototype,"pixelRatio",null),Object(i.a)([Object(u.b)({json:{write:!0}})],Qt.prototype,"size",null),Object(i.a)([Object(u.b)({type:D.a,json:{write:!0}})],Qt.prototype,"viewpoint",null);var tn=Qt=Tt=Object(i.a)([Object(c.a)("esri.views.2d.ViewState")],Qt),nn=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).left=0,e.top=0,e.right=0,e.bottom=0,e}return n}(V.a);Object(i.a)([Object(u.b)()],nn.prototype,"left",void 0),Object(i.a)([Object(u.b)()],nn.prototype,"top",void 0),Object(i.a)([Object(u.b)()],nn.prototype,"right",void 0),Object(i.a)([Object(u.b)()],nn.prototype,"bottom",void 0),nn=Object(i.a)([Object(c.a)("esri.views.2d.PaddedViewState.Padding")],nn);var rn=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).paddedViewState=new tn,e._updateContent=function(){var t=Object(Ct.a)();return function(){var n=e._get("size"),r=e._get("padding");if(n&&r){var i=e.paddedViewState;Object(mt.r)(t,r.left+r.right,r.top+r.bottom),Object(mt.d)(t,n,t),Object(mt.c)(i.size,t);var a=i.viewpoint;a&&(e.viewpoint=a)}}}(),e.watch(["size","padding"],e._updateContent,!0),e.padding=new nn,e.size=[0,0],e}return Zt(n,[{key:"padding",set:function(e){this._set("padding",e||new nn)}},{key:"viewpoint",set:function(e){if(e){var t=e.clone();this.paddedViewState.viewpoint=e,Object(rt.a)(t,e,this._get("size"),this._get("padding"));var n=this._viewpoint2D,r=t.targetGeometry;n.center[0]=r.x,n.center[1]=r.y,n.rotation=t.rotation,n.scale=t.scale,n.spatialReference=r.spatialReference,this._update()}}}]),n}(tn);Object(i.a)([Object(u.b)()],rn.prototype,"paddedViewState",void 0),Object(i.a)([Object(u.b)({type:nn})],rn.prototype,"padding",null),Object(i.a)([Object(u.b)()],rn.prototype,"viewpoint",null);var an=rn=Object(i.a)([Object(c.a)("esri.views.2d.PaddedViewState")],rn),on=(n("Pns9"),n("AY31")),sn=(n("B81a"),n("0wLv"),n("Snp0")),un=s.a.getLogger("esri.views.MapView"),cn=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;Wt(this,n),(r=t.call(this,e))._stationaryTimer=null,r.frameTask=new(function(){function e(t){var n=this;Wt(this,e),this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=function(){n._updateParameters.state=n.view.state,n._updateParameters.stationary=n.view.stationary,n._updateParameters.pixelRatio=window.devicePixelRatio,n._updateParameters.renderingOptions=n.view.renderingOptions},this.update=function(){if(n._updateRequested=!1,n.updateEnabled){var e=n.view,t=e.basemapView,r=e.graphicsView,i=e.labelManager,a=e.layerViews,s=e.state.id;t.baseLayerViews.forEach(n._updateLayerView,n),a.forEach(n._updateLayerView,n),t.referenceLayerViews.forEach(n._updateLayerView,n),Object(o.k)(i)&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(n._updateParameters)),Object(o.k)(r)&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(n._updateParameters)),n.animationInProgress||n._updateRequested||n._frameTaskHandle.pause()}}}return Zt(e,[{key:"destroy",value:function(){this.stop()}},{key:"start",value:function(){var e=this;this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(function(t){e.stationary=t,e.requestFrame()})),this._frameTaskHandle=Object(z.a)(this)}},{key:"stop",value:function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}},{key:"requestUpdate",value:function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}},{key:"requestFrame",value:function(){this._frameTaskHandle&&this._frameTaskHandle.resume()}},{key:"_updateLayerView",value:function(e){var t=this.view.state,n=e.lastUpdateId;null!=n&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),n!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}]),e}())($t(r)),r.featuresTilingScheme=null,r.fullOpacity=1,r.graphicsView=null,r.initialExtent=null,r.labelManager=null,r.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},r.resizeAlign="center",r.supportsGround=!1,r.timeline=new sn.a,r.type="2d",r.constraints=new At,r.padding={top:0,right:0,bottom:0,left:0};var i=r.handles,a=function(){return r.notifyChange("updating")};return i.add([r.watch("viewpoint",(function(){r._lastStationaryEventTimestamp=performance.now(),r._flipStationary(160)}),!0),r.on("resize",(function(e){return r._resizeHandler(e)})),r.watch("animationManager.animation",(function(e){r.animation=e})),r.allLayerViews.on("change",(function(){a(),i.remove("map-view-base-layerViewsUpdating"),i.add(r.allLayerViews.map((function(e){return e.watch("updating",a)})),"map-view-base-layerViewsUpdating")}))],"map-view-base"),r}return Zt(n,[{key:"destroy",value:function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}},{key:"animation",set:function(e){var t=this,n=this._get("animation");if(e!==n)if(n&&n.stop(),e&&!e.isFulfilled()){this._set("animation",e),this.frameTask.animationInProgress=!0;var r=function(){e===t._get("animation")&&(t._set("animation",null),t.frameTask.requestFrame()),t.frameTask.animationInProgress=!1};e.when(r,r)}else this._set("animation",null)}},{key:"center",get:function(){if(!this.ready)return this._get("center");var e=this.state.paddedViewState,t=e.center,n=e.spatialReference;return new E.a({x:t[0],y:t[1],spatialReference:n})},set:function(e){if(null!=e)if(this._normalizeInput(e)){if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");var t=this.viewpoint;Object(rt.c)(t,t,e),this.viewpoint=t}else un.error("#center","incompatible spatialReference ".concat(JSON.stringify(e.spatialReference)," with view's spatialReference ").concat(JSON.stringify(this.spatialReference)))}},{key:"constraints",set:function(e){var t=this,n=this._get("constraints");n&&(this.handles.remove("map-view-base-constraints"),n.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(e.on("update",(function(){t.ready&&t.state&&(t.state.viewpoint=e.fit(t.state.paddedViewState.viewpoint))})),"map-view-base-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(e){if(null!=e){var t=this._normalizeInput(e);if(t)if(t.width&&t.height){if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");var n=this.viewpoint;Object(rt.v)(n,n,t,this.size,{constraints:this.constraints}),this.viewpoint=n}else un.error("#extent","invalid extent size");else un.error("#center","incompatible spatialReference ".concat(JSON.stringify(e.spatialReference)," with view's spatialReference ").concat(JSON.stringify(this.spatialReference)))}}},{key:"initialExtentRequired",get:function(){var e=this.extent,t=this.center,n=this.scale,r=this.viewpoint,i=this.zoom;return!(this.get("map.initialViewProperties.viewpoint")||e||t&&(0!==n||-1!==i)||r)}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(e){if(!isNaN(e))if(this.ready){var t=this.viewpoint;Object(rt.s)(t,t,e),this.viewpoint=t}else this._set("rotation",e)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(e){if(e&&!isNaN(e)){if(!this.ready){this._set("scale",e),this._set("zoom",-1);var t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}var n=this.viewpoint;Object(rt.u)(n,n,e),this.viewpoint=n}}},{key:"stationary",get:function(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}},{key:"updating",get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((function(e){return!e.destroyed&&!("layerViews"in e)&&!0===e.updating})))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");var e=this.state.paddedViewState;return e&&e.viewpoint.clone()},set:function(e){if(null!=e){var t=this._normalizeInput(e);if(t){if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");var n=new D.a({targetGeometry:new E.a,scale:0,rotation:0});Object(rt.d)(n,t),this.constraints.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this.frameTask.requestFrame(),this._set("viewpoint",n)}else!e.scale||isNaN(e.scale)?un.error("#viewpoint","invalid scale value of "+e.scale):Object(o.j)(e.targetGeometry)?un.error("#viewpoint","geometry not defined"):un.error("#viewpoint","incompatible spatialReference ".concat(JSON.stringify(e.targetGeometry.spatialReference)," with view's spatialReference ").concat(JSON.stringify(this.spatialReference)))}}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(e){if(null!=e){if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",e),this._set("scale",0);var t=this._get("extent");t&&(this._set("extent",null),this._set("center",t.center))}if(this.constraints.effectiveLODs){var n=this.viewpoint;Object(rt.u)(n,n,this.constraints.zoomToScale(e)),this.viewpoint=n,this._set("zoom",this.constraints.scaleToZoom(this.scale))}}}},{key:"goTo",value:function(e,t){var n=this;if(e)return this.animation&&(this.animation=null),this._createAnimation(),Object(d.whenTrueOnce)(this,"ready",t&&t.signal).then((function(){var r=Nt({animate:!0},t),i=Object(rt.e)(e,n);return n.animation.update(i),n._gotoTask={},r.animate?n._gotoAnimated(i,r):n._gotoImmediate(i,r)}));un.error("#goTo()","target cannot be null or undefined")}},{key:"hitTest",value:function(e){return Promise.reject("Should be implemented by subclasses")}},{key:"popupHitTest",value:function(e){var t=this;return this.hitTest(e).then((function(n){return Nt(Nt({},n),{},{mapPoint:t.toMap(e)})}))}},{key:"toMap",value:function(e){if(!this.ready)return null;var t=zt(this.state.toMap([0,0],[e.x,e.y]),2),n=t[0],r=t[1];return new E.a({x:n,y:r,spatialReference:this.spatialReference})}},{key:"isTileInfoRequired",value:function(){return!0}},{key:"toScreen",value:function(e){if(!this.ready)return null;var t=this._normalizeInput(e),n=[t.x,t.y];return this.state.toScreen(n,n),Object(R.f)(n[0],n[1])}},{key:"pixelSizeAt",value:function(){return this.ready?this.state.resolution:(un.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}},{key:"requestUpdate",value:function(){this.ready&&this.frameTask.requestUpdate()}},{key:"getDefaultSpatialReference",value:function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}},{key:"isSpatialReferenceSupported",value:function(e,t){return!(!t&&!this._get("ready"))||null!==this._getDefaultViewpoint()}},{key:"importLayerView",value:function(e){return function(e){var t=pt[e.type];if(!Object(o.k)(t))throw function(e){var t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new l.a(n+":view-not-supported",t+" is not supported in 2D")}(e);return t(e)}(e)}},{key:"hasLayerViewModule",value:function(e){return t=e,Object(o.k)(pt[t.type]);var t}},{key:"_createAnimation",value:function(){return this.animation&&!this.animation.done||(this.animation=new nt),this.animation}},{key:"_cancellableGoTo",value:function(e,t,n){var r=this,i=function(){return e===r._gotoTask},a=n.then((function(){i()&&(r.animation=null)})).catch((function(e){throw i()&&(r.animation=null,t.done||(t.stop(),r.frameTask.animationInProgress=!1)),e})),o=new Promise((function(e){return e(a)}));return t.when().catch((function(){i()&&o.cancel&&o.cancel()})),o}},{key:"_gotoImmediate",value:function(e,t){var n=this,r=this._gotoTask,i=this.animation,a=e.then((function(e){if(Object(T.u)(t),r!==n._gotoTask)throw new l.a("view:goto-interrupted","Goto was interrupted");n.viewpoint=i.target=e,i.finish()}));return this._cancellableGoTo(r,i,a)}},{key:"_gotoAnimated",value:function(e,t){var n=this,r=this._gotoTask,i=this.animation,a=e.then((function(e){if(Object(T.u)(t),r!==n._gotoTask)throw new l.a("view:goto-interrupted","Goto was interrupted");return i.update(e),n.animationManager.animate(i,n.viewpoint,t),i.when().then((function(){}),(function(){}))}));return this._cancellableGoTo(r,i,a)}},{key:"_resizeHandler",value:function(e){var t=this.state;if(t){var n=this.state.paddedViewState.viewpoint,r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Object(rt.q)(n,n,r,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints.constrain(n,null),this.state.viewpoint=n}}},{key:"_startup",value:function(){var e=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(e),this._set("animationManager",new st({view:this})),this._set("state",new an({padding:this._get("padding"),size:this.size,viewpoint:e})),this._set("featuresTilingScheme",new on.a(L.a.create({spatialReference:this.spatialReference,size:512}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}},{key:"_teardown",value:function(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var e=this.state.paddedViewState,t=zt(e.center,2),n=t[0],r=t[1],i=e.spatialReference,a=e.rotation,o=e.scale,s=new E.a({x:n,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",a),this._set("scale",o),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}},{key:"_flipStationary",value:function(e){var t=this;return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((function(){t._stationaryTimer=null;var e=performance.now()-t._lastStationaryEventTimestamp;e<160&&(t._stationaryTimer=t._flipStationary(e))}),e)),this._stationaryTimer}},{key:"_normalizeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.spatialReference,n=e&&e.targetGeometry||e;return t?n?t.equals(n.spatialReference)?e:Object(C.a)(n,t)?function(e){return e&&"esri.Viewpoint"===e.declaredClass}(e)?(e.targetGeometry=Object(C.d)(n,t),e):Object(C.d)(n,t):null:null:e}},{key:"_getDefaultViewpoint",value:function(){var e=this.constraints,t={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};e.effectiveLODs?-1!==t.zoom&&(t.scale=e.zoomToScale(t.zoom)):t.zoom=-1;var n=null,r=null,i=0,a=t.viewpoint&&t.viewpoint.rotation,s=t.viewpoint&&t.viewpoint.targetGeometry;Object(o.k)(s)&&("extent"===s.type?n=s:"point"===s.type&&(r=s,i=t.viewpoint.scale));var u=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),c=this._normalizeInput(this.initialExtent),l=t.extent||n||u||c,h=t.center||r||l&&l.center,f=this.get("map.initialViewProperties.viewpoint.scale"),p=t.scale||i||f||l&&Object(rt.f)(l,this.size),d=this.get("map.initialViewProperties.viewpoint.rotation");return h&&p?new D.a({targetGeometry:h,scale:p,rotation:t.rotation||a||d||0}):null}}]),n}(function(e){var t=function(e){Kt(a,e);var t,n,r,i=Xt(a);function a(){return Wt(this,a),i.apply(this,arguments)}return Zt(a,[{key:"fetchPopupFeatures",value:(r=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.when();case 2:return e.next=4,this._prepareFetchPopupFeatures(t,n);case 4:return r=e.sent,i=r.location,a=r.queryArea,o=r.layerViewsAndGraphics,s=r.clientOnlyGraphics,u=Promise.resolve(s),c=this._queryLayerPopupFeatures({queryArea:a,layerViewsAndGraphics:o,options:n}),l=c.map((function(e){return e.promise})),e.abrupt("return",{location:i,clientOnlyGraphics:s,allGraphicsPromise:Object(T.k)([u].concat(Bt(l))).then(N.d),promisesPerLayerView:c});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"_queryLayerPopupFeatures",value:function(e){var t=e.queryArea,n=e.layerViewsAndGraphics,r=e.options;return n.map((function(e){var n=e.layerView,i={clientGraphics:e.graphics,event:Object(o.k)(r)?r.event:null,signal:Object(o.k)(r)?r.signal:null,defaultPopupTemplateEnabled:!!Object(o.k)(r)&&!!r.defaultPopupTemplateEnabled},a=n.fetchPopupFeatures(t,i);return{layerView:n,promise:a}}))}},{key:"_isValidPopupGraphic",value:function(e,t){return e&&!!e.getEffectivePopupTemplate(Object(o.k)(t)&&t.defaultPopupTemplateEnabled)}},{key:"_prepareFetchPopupFeatures",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popupHitTestGraphics(t,n);case 2:return r=e.sent,i=r.clientGraphics,a=r.queryArea,o=r.location,s=this._getFetchPopupLayerViews(),u=this._graphicsPerFetchPopupLayerView(i,s),c=u.layerViewsAndGraphics,l=u.clientOnlyGraphics,e.abrupt("return",{clientOnlyGraphics:l,layerViewsAndGraphics:c,queryArea:a,location:o});case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_popupHitTestGraphics",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popupHitTest(t);case 2:return r=e.sent,i=r.results,a=r.mapPoint,o=i.filter((function(e){return u._isValidPopupGraphic(e.graphic,n)})),s=o.length?o[0].mapPoint:null,e.abrupt("return",{clientGraphics:o.map((function(e){return e.graphic})),queryArea:a,location:a||s});case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_getFetchPopupLayerViews",value:function(){var e=this,t=[];return this.allLayerViews.forEach((function(n){e._isValidPopupLayerView(n)&&t.push(n)})),Object(o.k)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}},{key:"_isValidPopupLayerView",value:function(e){return Object(o.k)(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}},{key:"_graphicsPerFetchPopupLayerView",value:function(e,t){var n,r=[],i=new Map,a=t.map((function(e){var t=[];return i.set("layer"in e?e.layer:e.graphics,t),{layerView:e,graphics:t}})),o=Vt(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.get(s.layer)||null;u?u.push(s):r.push(s)}}catch(c){o.e(c)}finally{o.f()}return{layerViewsAndGraphics:a,clientOnlyGraphics:r}}}]),a}(e);return t=Object(i.a)([Object(c.a)("esri.views.PopupView")],t)}(et));Object(i.a)([Object(u.b)()],cn.prototype,"_stationaryTimer",void 0),Object(i.a)([Object(u.b)()],cn.prototype,"animation",null),Object(i.a)([Object(u.b)({readOnly:!0})],cn.prototype,"animationManager",void 0),Object(i.a)([Object(u.b)({value:null,type:E.a,dependsOn:["state.id","ready"]})],cn.prototype,"center",null),Object(i.a)([Object(u.b)({type:At})],cn.prototype,"constraints",null),Object(i.a)([Object(u.b)({value:null,type:P.a,dependsOn:["state.id","ready"]})],cn.prototype,"extent",null),Object(i.a)([Object(u.b)({readOnly:!0})],cn.prototype,"featuresTilingScheme",void 0),Object(i.a)([Object(u.b)()],cn.prototype,"fullOpacity",void 0),Object(i.a)([Object(u.b)()],cn.prototype,"graphicsView",void 0),Object(i.a)([Object(u.b)({type:P.a})],cn.prototype,"initialExtent",void 0),Object(i.a)([Object(u.b)({dependsOn:["map.initialViewProperties?.viewpoint"]})],cn.prototype,"initialExtentRequired",null),Object(i.a)([Object(u.b)()],cn.prototype,"labelManager",void 0),Object(i.a)([Object(u.b)({value:{top:0,right:0,bottom:0,left:0},cast:function(e){return Nt({top:0,right:0,bottom:0,left:0},e)}})],cn.prototype,"padding",null),Object(i.a)([Object(u.b)({type:Object})],cn.prototype,"renderingOptions",void 0),Object(i.a)([Object(u.b)()],cn.prototype,"resizeAlign",void 0),Object(i.a)([Object(u.b)({readOnly:!0,dependsOn:["state.id"]})],cn.prototype,"resolution",null),Object(i.a)([Object(u.b)({value:0,type:Number,dependsOn:["state.id","ready"]})],cn.prototype,"rotation",null),Object(i.a)([Object(u.b)({value:0,type:Number,dependsOn:["state.id","ready"]})],cn.prototype,"scale",null),Object(i.a)([Object(u.b)({type:A.a,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],cn.prototype,"spatialReference",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],cn.prototype,"state",void 0),Object(i.a)([Object(u.b)({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],cn.prototype,"stationary",null),Object(i.a)([Object(u.b)({readOnly:!0})],cn.prototype,"supportsGround",void 0),Object(i.a)([Object(u.b)({type:sn.a,readOnly:!0})],cn.prototype,"timeline",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],cn.prototype,"type",void 0),Object(i.a)([Object(u.b)({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],cn.prototype,"updating",null),Object(i.a)([Object(u.b)({value:null,type:D.a,dependsOn:["state.id","ready"]})],cn.prototype,"viewpoint",null),Object(i.a)([Object(u.b)({value:-1,dependsOn:["state.id"]})],cn.prototype,"zoom",null);var ln=cn=Object(i.a)([Object(c.a)("esri.views.MapViewBase")],cn);function hn(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}var fn=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,!0)).view=e,i.registerIncoming("double-click",r,(function(e){return i._handleDoubleClick(e,r)})),i}return Zt(n,[{key:"_handleDoubleClick",value:function(e,t){hn(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}]),n}(ce.a),pn=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),(a=t.call(this,!0)).view=e,a.pointerType=r,a.registerIncoming("double-tap-drag",i,(function(e){return a._handleDoubleTapDrag(e)})),a}return Zt(n,[{key:"_handleDoubleTapDrag",value:function(e){var t=e.data;if(t.pointerType===this.pointerType){e.stopPropagation();var n=t.action,r=t.delta,i=this.view,a=i.mapViewNavigation;switch(n){case"begin":var o=i.scale;this._startScale=o,this._currentScale=o,this._previousDelta=r,a.begin();break;case"update":if(this._previousDelta.y===r.y)return;this._previousDelta=r;var s=this._startScale*Math.pow(1.015,r.y);a.setViewpointImmediate(s/this._currentScale),this._currentScale=s;break;case"end":var u=i.constraints,c=u.effectiveLODs;if(!u.snapToZoom||!c)return void a.end();var l=u.snapScale(this._currentScale),h=(r.y>0?Math.max(l,u.snapToPreviousScale(this._startScale)):Math.min(l,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(h)}}}}]),n}(ce.a),dn=function(){function e(t){Wt(this,e),this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=function(){return!0})}return Zt(e,[{key:"handle",value:function(e){var t=e.data,n=t.pointers.size;switch(t.action){case"start":this.currentCount=n,this.emitStart(e);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=n,this.emitStart(e);break;case"update":this.emitUpdate(e);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=n,this.emitStart(e);break;case"end":this.emitEnd(e),this.currentCount=0}this.previousEvent=e}},{key:"emitStart",value:function(e){this.startEvent=e,this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)}},{key:"emitUpdate",value:function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)}},{key:"emitEnd",value:function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent),this.startEvent=null}}]),e}(),vn=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;Wt(this,n),(a=t.call(this,!0)).view=e,a.pointerAction=r,a.registerIncoming("drag",i,(function(e){return a._handleDrag(e)})),a.registerIncoming("pointer-down",(function(){return a.stopMomentumNavigation()}));var o=a.view.mapViewNavigation;return a.dragEventSeparator=new dn({start:function(e,t){o.pan.begin(a.view,t.data),t.stopPropagation()},update:function(e,t){o.pan.update(a.view,t.data),t.stopPropagation()},end:function(e,t){o.pan.end(a.view,t.data),t.stopPropagation()},condition:function(e,t){return 1===e&&hn(t.data,a.pointerAction)}}),a}return Zt(n,[{key:"_handleDrag",value:function(e){var t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}},{key:"stopMomentumNavigation",value:function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}]),n}(ce.a),yn=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;Wt(this,n),(a=t.call(this,!0)).view=e,a.pointerAction=r;var o=a.view.mapViewNavigation;return a.dragEventSeparator=new dn({start:function(e,t){o.rotate.begin(a.view,t.data),t.stopPropagation()},update:function(e,t){o.rotate.update(a.view,t.data),t.stopPropagation()},end:function(e,t){o.rotate.end(),t.stopPropagation()},condition:function(e,t){return 1===e&&hn(t.data,a.pointerAction)}}),a.registerIncoming("drag",i,(function(e){return a.dragEventSeparator.handle(e)})),a}return n}(ce.a),bn=n("5DEt");function gn(e){var t=e*e;return e<0&&(t*=-1),t}var mn=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,!0)).view=e,r.frameTask=null,r.watchHandles=new _.a,r.currentDevice=null,r.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},r.handle=r.registerIncoming("gamepad",(function(e){return r.handleEvent(e)})),r.handle.pause(),r}return Zt(n,[{key:"onInstall",value:function(e){var t=this;Dt(en(n.prototype),"onInstall",this).call(this,e),this.watchHandles.add([Object(d.init)(this.view.navigation.gamepad,"enabled",(function(e){e?(t.handle.resume(),t.frameTask||(t.frameTask=Object(z.a)({update:function(e){return t.frameUpdate(e.deltaTime)}}))):(t.handle.pause(),t.frameTask&&(t.frameTask.remove(),t.frameTask=null))}))])}},{key:"onUninstall",value:function(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),Dt(en(n.prototype),"onUninstall",this).call(this)}},{key:"handleEvent",value:function(e){var t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,function(e){e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0}(this.transformation)):(this.currentDevice=e.data.device,function(e,t,n){var r=n,i=e.state,a=e.device,o="forward-down"===t.tiltDirection?1:-1;"standard"===a.deviceType?(r.translation[0]=gn(i.axes[0]),r.translation[1]=gn(i.axes[1]),r.translation[2]=gn(i.buttons[7])-gn(i.buttons[6]),r.heading=gn(i.axes[2]),r.tilt=gn(i.axes[3])):"spacemouse"===a.deviceType&&(r.translation[0]=1.2*gn(i.axes[0]),r.translation[1]=1.2*gn(i.axes[1]),r.translation[2]=2*-gn(i.axes[2]),r.heading=1.2*gn(i.axes[5]),r.tilt=1.2*gn(i.axes[3])),r.tilt*=o,Object(bn.d)(r.translation,r.translation,1)}(e.data,this.view.navigation.gamepad,this.transformation)))}},{key:"frameUpdate",value:function(e){var t=this.transformation;if(!function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}(t)){var n=this.view.viewpoint.clone(),r=On*this.view.navigation.gamepad.velocityFactor*e;Object(rt.w)(n,n,[t.translation[0]*r,-t.translation[1]*r]);var i=1+t.translation[2]*jn*e,a=this.view.constraints.rotationEnabled?-t.heading*wn*e:0,o=this.view.size,s=[o[0]/2,o[1]];Object(rt.t)(n,n,i,a,s,o);var u=this.view.constraints.constrain(n,this.view.viewpoint);this.view.viewpoint=u}}}]),n}(ce.a),wn=.06,On=.7,jn=6e-4,_n=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a,o;return Wt(this,n),(o=t.call(this,!0)).view=e,o.keys=r,o._pressed=!1,o._keyMap=(Ft(a={},r.left,"left"),Ft(a,r.right,"right"),Ft(a,r.up,"up"),Ft(a,r.down,"down"),a),o.registerIncoming("key-down",i,(function(e){return o._handleKeyDown(e)})),o.registerIncoming("key-up",i,(function(e){return o._handleKeyUp(e)})),o.registerIncoming("blur",i,(function(){return o._handleBlur()})),o}return Zt(n,[{key:"_handleKeyDown",value:function(e){e.data.repeat||this._handleKey(e,!0)}},{key:"_handleKeyUp",value:function(e){this._handleKey(e,!1)}},{key:"_handleBlur",value:function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}},{key:"_handleKey",value:function(e,t){var n=this._keyMap[e.data.key];if(this._pressed=null!=n,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}]),n}(ce.a),xn=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a,o;return Wt(this,n),(o=t.call(this,!0)).view=e,o.keys=r,o._pressed=!1,o._keyToDirection=(Ft(a={},r.clockwiseOption1,"clockwise"),Ft(a,r.clockwiseOption2,"clockwise"),Ft(a,r.counterClockwiseOption1,"counterClockwise"),Ft(a,r.counterClockwiseOption2,"counterClockwise"),Ft(a,r.resetOption1,"reset"),Ft(a,r.resetOption2,"reset"),a),o.registerIncoming("key-down",i,(function(e){return o._handleKeyDown(e)})),o.registerIncoming("key-up",i,(function(e){return o._handleKeyUp(e)})),o.registerIncoming("blur",i,(function(){return o._handleBlur()})),o}return Zt(n,[{key:"_handleKeyDown",value:function(e){e.data.repeat||this._handleKey(e,!0)}},{key:"_handleKeyUp",value:function(e){this._handleKey(e,!1)}},{key:"_handleBlur",value:function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}},{key:"_handleKey",value:function(e,t){var n=e.modifiers;if(!(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)){var r=this._keyToDirection[e.data.key];if(this._pressed=null!=r,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}}]),n}(ce.a),kn=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),(a=t.call(this,!0)).view=e,a.keys=r,a._keysToZoomAction={},a.registerIncoming("key-down",i,(function(e){return a._handleKeyDown(e)})),r.zoomIn.forEach((function(e){return a._keysToZoomAction[e]=0})),r.zoomOut.forEach((function(e){return a._keysToZoomAction[e]=1})),a}return Zt(n,[{key:"_handleKeyDown",value:function(e){this._handleKey(e)}},{key:"_handleKey",value:function(e){var t=e.modifiers;if(!(t.size>0)||t.has("Shift")){var n=e.data.key;if(n in this._keysToZoomAction){var r=this._keysToZoomAction[n],i=this.view.mapViewNavigation,a=null;switch(r){case 0:a=i.zoomIn();break;case 1:a=i.zoomOut();break;default:return}i.begin(),a.then((function(){return i.end()})),e.stopPropagation()}}}}]),n}(ce.a),Sn=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,!0)).view=e,i._canZoom=!0,i.registerIncoming("mouse-wheel",r,(function(e){return i._handleMouseWheel(e)})),i}return Zt(n,[{key:"_handleMouseWheel",value:function(e){var t=this;if(this.view.navigation.mouseWheelZoomEnabled&&(e.preventDefault(),e.stopPropagation(),this._canZoom)){var n=this.view.mapViewNavigation,r=e.data,i=r.x,a=r.y,o=r.deltaY,s=n.zoom(1/Math.pow(.6,1/60*o),[i,a]);s&&(this._canZoom=!1,s.catch((function(){})).then((function(){t._canZoom=!0,n.end()})))}}}]),n}(ce.a),Mn=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;Wt(this,n),(r=t.call(this,!0)).view=e,r.registerIncoming("drag",(function(e){return r._handleDrag(e)})),r.registerIncoming("pointer-down",(function(){return r.stopMomentumNavigation()}));var i=r.view.mapViewNavigation;return r.dragEventSeparator=new dn({start:function(e,t){i.pinch.begin(r.view,t.data),t.stopPropagation()},update:function(e,t){i.pinch.update(r.view,t.data),t.stopPropagation()},end:function(e,t){i.pinch.end(r.view),t.stopPropagation()},condition:function(e){return e>=2}}),r}return Zt(n,[{key:"_handleDrag",value:function(e){this.dragEventSeparator.handle(e)}},{key:"stopMomentumNavigation",value:function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}]),n}(ce.a),In=n("dn0f");function Tn(e){var t=e.native;return t?{buttons:t.buttons.map((function(e){return e.pressed?e.value?e.value:1:0})),axes:t.axes.map((function(t){return function(e,t){var n=Math.abs(e);return n<t?0:Object(ue.o)(e)*(n-t)/(1-t)}(t,e.axisThreshold)}))}:{buttons:[],axes:[]}}var An=function(){function e(t,n){var r=this;Wt(this,e),this.element=t,this.input=n,this._hasEventListeners=!1,this.onConnectGamepad=function(e){r.connectGamepad(e.gamepad)},this.onDisconnectGamepad=function(e){var t=e.gamepad,n=t.index,i=r.inputDevices[n];i&&(r.emitGamepadEvent(t,Tn(i),!1),r.inputDevices.splice(n,1),r.latestUpdate.splice(n,1),r.input.gamepad.devices.remove(i),r.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;var i="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=i&&a,this.supported&&(this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState())}return Zt(e,[{key:"destroy",value:function(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))}},{key:"hasEventListeners",set:function(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}},{key:"onEvent",set:function(e){this.callback=e}},{key:"connectGamepad",value:function(e){var t=new Ce(e);"unknown"!==t.deviceType&&(this.inputDevices[e.index]=t,this.input.gamepad.devices.add(t)),this.ensurePollingState()}},{key:"ensurePollingState",value:function(){this.eventsEnabled?this.startPolling():this.stopPolling()}},{key:"startPolling",value:function(){var e=this;null==this.frameTask&&(this.frameTask=Object(z.a)({update:function(){return e.readGamepadState()}}))}},{key:"stopPolling",value:function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}},{key:"readGamepadState",value:function(){var e=this,t=document.hasFocus(),n=this.element.contains(document.activeElement),r="document"===this.input.gamepad.enabledFocusMode&&!t||"view"===this.input.gamepad.enabledFocusMode&&!n;this.forEachGamepad((function(t){var n=e.inputDevices[t.index];if(n){var i=e.latestUpdate[t.index],a=Tn(n),o=r||function(e){for(var t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(var n=0;n<e.buttons.length;n++)if(0!==e.buttons[n])return!1;return!0}(a);if(i){if(i.timestamp===t.timestamp)return;if(!i.active&&o)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(var n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(var r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}(i.state,a))return}e.emitGamepadEvent(t,a,!o)}}))}},{key:"forEachGamepad",value:function(e){for(var t=window.navigator.getGamepads(),n=0;n<t.length;n++){var r=t[n];this.validate(r)&&e(r)}}},{key:"emitGamepadEvent",value:function(e,t,n){var r=this.latestUpdate[e.index],i=r&&r.active;if(i||n){var a=!i&&n?"start":i&&n?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:n},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:a})}}},{key:"validate",value:function(e){if(!e)return!1;if(!e.connected)return!1;for(var t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}]),e}(),Cn=Object(a.a)("trident"),En=Object(a.a)("edge"),Pn=Object(a.a)("chrome"),Rn=Object(a.a)("ff"),Dn=Object(a.a)("safari"),Ln=function(){function e(t,n){var r=this;Wt(this,e),this.input=n,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new An(t,this.input),this._gamepadSource.onEvent=function(e){return r._callback("gamepad",e)}}return Zt(e,[{key:"destroy",value:function(){var e=this;this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((function(t){e._releasePointerCaptureSafe(t)})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}},{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(e){this._callback=e}},{key:"activeEvents",set:function(e){var t=this;for(var n in this._active)e&&e.has(n)||(this._element.removeEventListener(Nn[n],this._active[n]),delete this._active[n]);e&&e.forEach((function(e){if(!t._active[e]&&Nn[e]){var n=(t._eventHandlers[e]||t._handleDefault).bind(t,e);t._element.addEventListener(Nn[e],n),t._active[e]=n}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}},{key:"setPointerCapture",value:function(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}},{key:"_updateTouchAction",value:function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan"),this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")}},{key:"_updateTouchEventHandling",value:function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}},{key:"_removeTouchAction",value:function(){this._element.classList.remove("esri-view-surface--touch-none"),this._element.classList.remove("esri-view-surface--touch-pan"),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}},{key:"_releasePointerCaptureSafe",value:function(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(Un){}}},{key:"_updateNormalizedPointerLikeEvent",value:function(t,n){var r=Object(I.b)(this._element,t);return e.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}},{key:"_handleKey",value:function(e,t){var n=Object(In.a)(t);n&&"key-up"===e&&this._keyDownState.delete(n);var r={native:t,key:n,repeat:n&&this._keyDownState.has(n)};n&&"key-down"===e&&this._keyDownState.add(r.key),this._callback(e,r)}},{key:"_handlePointer",value:function(e,t){var n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n)}},{key:"_handlePointerPreventDefault",value:function(e,t){var n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n)}},{key:"_handleMouseWheel",value:function(e,t){var n=t.deltaY;switch(t.deltaMode){case 0:(Cn||En)&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}Cn||En?n*=.7:Pn||Dn?n*=.6:Rn&&(n*=1.375);var r=Math.abs(n);r>100&&(n=n/r*200/(1+Math.exp(-.02*(r-100))));var i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,i)}},{key:"_handlePointerCaptureLost",value:function(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}},{key:"_handleDefault",value:function(e,t){var n={native:t};t.preventDefault(),this._callback(e,n)}},{key:"_preventAltKeyDefault",value:function(e){"Alt"===e.key&&e.preventDefault()}},{key:"_preventMultiTouchPanning",value:function(e){e.touches.length>1&&e.preventDefault()}}]),e}();Ln.test={disableSubpixelCoordinates:!1};var Nn={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"},Fn=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.call(this,!0)).registerIncoming("context-menu",(function(e){e.data.native.preventDefault()})),e}return n}(ce.a),zn=n("Fym7");function Vn(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}var Gn,Un,Bn=function(e){Kt(n,e);var t=Xt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:35,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zn.a;return Wt(this,n),(e=t.call(this,!1)).maximumDoubleClickDelay=r,e.maximumDoubleClickDistance=i,e.maximumDoubleTouchDelay=a,e.maximumDoubleTouchDistance=o,e._clock=s,e._pointerState=new Map,e._click=e.registerOutgoing("click"),e._doubleClick=e.registerOutgoing("double-click"),e.registerIncoming("immediate-click",e._handleImmediateClick.bind($t(e))),e.registerIncoming("pointer-drag",e._handlePointerDrag.bind($t(e))),e.registerIncoming("drag",e._handleDrag.bind($t(e))),e}return Zt(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){null!=e.doubleClickTimeout&&(e.doubleClickTimeout.remove(),e.doubleClickTimeout=null)}))}},{key:"hasPendingInputs",get:function(){return Object(Q.a)(this._pointerState,(function(e){return null!=e.doubleClickTimeout}))}},{key:"_pointerId",value:function(e){var t=e.native;return"mouse"===t.pointerType?"".concat(t.pointerId,":").concat(t.button):""+t.pointerType}},{key:"_handleImmediateClick",value:function(e){var t=e.data,n=this._pointerId(t),r=this._pointerState.get(n);if(r){var i="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Vn(r.event.data,t)>i?(this._clearDoubleClickTimeout(n,!0),this._startClick(e)):(this._clearDoubleClickTimeout(n,!1),this._doubleClick.emit(r.event.data,void 0,r.event.modifiers))}else this._startClick(e)}},{key:"_startClick",value:function(e){var t=this,n=this._pointerId(e.data);this._pointerState.set(n,{event:e,doubleClickTimeout:this._clock.setTimeout((function(){return t._doubleClickTimeoutExceeded(n)}),"touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}),this.refreshHasPendingInputs()}},{key:"_handlePointerDrag",value:function(e){var t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0)}},{key:"_handleDrag",value:function(e){var t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0)}},{key:"_clearDoubleClickTimeout",value:function(e,t){var n=this._pointerState.get(e);n&&(n.doubleClickTimeout.remove(),n.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs())}},{key:"_doubleClickTimeoutExceeded",value:function(e){var t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}}]),n}(ce.a),qn=function(e){Kt(n,e);var t=Xt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:35,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zn.a;return Wt(this,n),(e=t.call(this,!1)).maximumDoubleClickDelay=r,e.maximumDoubleClickDistance=i,e.maximumDoubleTouchDelay=a,e.maximumDoubleTouchDistance=o,e._clock=s,e._doubleTapDragReady=!1,e._doubleTapDragActive=!1,e._dragStartCenter=Object(R.f)(0,0),e._pointerState=new Map,e._doubleTapDrag=e.registerOutgoing("double-tap-drag"),e._dragEventSeparator=new dn({start:function(t,n){return e._dragStart(t,n)},update:function(t,n){return e._dragUpdate(n)},end:function(t,n){return e._dragEnd(n)}}),e.registerIncoming("drag",(function(t){return e._dragEventSeparator.handle(t)})),e.registerIncoming("pointer-down",(function(t){return e._handlePointerDown(t)})),e.registerIncoming("pointer-up",(function(){return e._handlePointerUp()})),e}return Zt(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)}))}},{key:"hasPendingInputs",get:function(){return Object(Q.a)(this._pointerState,(function(e){return null!=e.doubleTapTimeout}))}},{key:"_clearPointerDown",value:function(e){var t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}},{key:"_createDoubleTapDragData",value:function(e,t,n){return{action:e,delta:t,button:n.button,buttons:n.buttons,pointer:n.pointer,pointers:n.pointers,pointerType:n.pointerType,timestamp:n.timestamp}}},{key:"_dragStart",value:function(e,t){if(this._doubleTapDragReady&&1===e){this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;var n=t.data,r=t.modifiers,i=n.center;this._dragStartCenter=i;var a=this._createDoubleTapDragData("begin",Object(R.f)(0,0),n);this._doubleTapDrag.emit(a,void 0,r),t.stopPropagation()}}},{key:"_dragUpdate",value:function(e){if(this._doubleTapDragActive){var t=e.data,n=e.modifiers,r=t.center,i=Object(R.f)(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("update",i,t);this._doubleTapDrag.emit(a,void 0,n),e.stopPropagation()}}},{key:"_dragEnd",value:function(e){if(this._doubleTapDragActive){var t=e.data,n=e.modifiers,r=t.center,i=Object(R.f)(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("end",i,t);this._doubleTapDrag.emit(a,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}}},{key:"_handlePointerDown",value:function(e){var t=e.data,n=this._pointerId(t),r=this._pointerState.get(n),i=t.native.pointerType;if(r){var a="touch"===i?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(n),Vn(r.event.data,t)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}},{key:"_handlePointerUp",value:function(){this._doubleTapDragReady=!1}},{key:"_pointerId",value:function(e){var t=e.native,n=t.pointerId,r=t.button,i=t.pointerType;return"mouse"===i?"".concat(n,":").concat(r):""+i}},{key:"_storePointerDown",value:function(e){var t=this,n=e.data,r=n.native.pointerType,i=this._pointerId(n),a=this._clock.setTimeout((function(){return t._clearPointerDown(i)}),"touch"===r?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(i,{event:e,doubleTapTimeout:a}),this.refreshHasPendingInputs()}}]),n}(ce.a),Hn=n("1Mqo"),Wn=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,!1)).navigationTouch=e,r.startStateModifiers=new Set,r.activePointerMap=new Map,r.isDragging=!1,r.isCurrentDragSuppressed=!1,r.drag=r.registerOutgoing("drag"),r.registerIncoming("pointer-drag",r.handlePointerDrag.bind($t(r))),r.registerIncoming("pointer-up",r.handlePointerUpAndPointerLost.bind($t(r))),r.registerIncoming("pointer-capture-lost",r.handlePointerUpAndPointerLost.bind($t(r))),r.registerIncoming("pointer-cancel",r.handlePointerUpAndPointerLost.bind($t(r))),r}return Zt(n,[{key:"createPayload",value:function(e,t,n,r){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:t.buttons,timestamp:r,pointers:Kn(this.activePointerMap),pointer:t,angle:n.angle,radius:n.radius,center:n.center}}},{key:"addPointer",value:function(e){var t=e.native.pointerId,n=Zn(this.activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(t,r);var i=Yn(r,Jn(this.activePointerMap));r.initialAngle=i,r.lastAngle=i,this.updatePointerAngles(n)}},{key:"updatePointer",value:function(e){if(!e||null!=e.x||null!=e.y){var t=this.activePointerMap.get(e.native.pointerId);t?t.event=e:this.addPointer(e)}}},{key:"removePointer",value:function(e){var t=Zn(this.activePointerMap).angle;this.activePointerMap.delete(e),this.updatePointerAngles(t)}},{key:"updatePointerAngles",value:function(e){var t=Zn(this.activePointerMap);this.activePointerMap.forEach((function(n){n.initialAngle=Yn(n,t)-e,n.lastAngle=Yn(n,t)-e}))}},{key:"emitEvent",value:function(e,t,n){var r=Zn(this.activePointerMap);this.drag.emit(this.createPayload(e,t,r,n),void 0,this.startStateModifiers)}},{key:"handlePointerUpAndPointerLost",value:function(e){var t=e.data.native.pointerId,n=Object(Hn.a)(e.timestamp);this.activePointerMap.get(t)&&(1===this.activePointerMap.size?(this.updatePointer(e.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",e.data,n),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(t)):(this.removePointer(t),this.emitEvent("removed",e.data,Object(Hn.a)(e.timestamp))))}},{key:"handlePointerDrag",value:function(e){var t=e.data,n=t.currentEvent,r=Object(Hn.a)(e.timestamp);switch(t.action){case"start":case"update":this.isDragging?this.activePointerMap.has(n.native.pointerId)?(this.updatePointer(n),!this.isCurrentDragSuppressed&&this.emitEvent("update",n,r)):(this.addPointer(n),this.emitEvent("added",n,r),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(n),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",n,r))}}},{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]),n}(ce.a);function Jn(e){var t=[];return e.forEach((function(e){t.push(Object(R.f)(e.event.x,e.event.y))})),function(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Object(R.f)()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){var n=zt(e,2),r=n[0],i=n[1],a=i.x-r.x,o=i.y-r.y;return t.radius=Math.sqrt(a*a+o*o)/2,t.center.x=(r.x+i.x)/2,t.center.y=(r.y+i.y)/2,t}for(var s=0,u=0,c=0;c<e.length;c++)s+=e[c].x,u+=e[c].y;s/=e.length,u/=e.length;for(var l=e.map((function(e){return e.x-s})),h=e.map((function(e){return e.y-u})),f=0,p=0,d=0,v=0,y=0,b=0,g=0,m=0;m<l.length;m++){var w=l[m],O=h[m],j=w*w,_=O*O;f+=j,p+=_,d+=w*O,v+=j*w,y+=_*O,b+=w*_,g+=O*j}var x=.5*(v+b),k=.5*(y+g),S=f*p-d*d,M=(x*p-k*d)/S,I=(f*k-d*x)/S,T=Object(R.f)(M+s,I+u);return{radius:Math.sqrt(M*M+I*I+(f+p)/e.length),center:T}}(t)}function Zn(e){var t=Jn(e),n=0;return e.forEach((function(e){for(var r=Yn(e,t),i=r-e.lastAngle;i>Math.PI;)i-=2*Math.PI;for(;i<-Math.PI;)i+=2*Math.PI;r=e.lastAngle+i,e.lastAngle=r,n+=r-e.initialAngle})),{angle:n/=e.size||1,radius:t.radius,center:t.center}}function Kn(e){var t=new Map;return e.forEach((function(e,n){return t.set(n,e.event)})),t}function Yn(e,t){var n=e.event;return Math.atan2(n.y-t.center.y,n.x-t.center.x)}(Un=Gn||(Gn={}))[Un.Left=0]="Left",Un[Un.Middle=1]="Middle",Un[Un.Right=2]="Right",Un[Un.Back=3]="Back",Un[Un.Forward=4]="Forward",Un[Un.Undefined=-1]="Undefined";var Xn=function(e){Kt(n,e);var t=Xt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:35,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zn.a;return Wt(this,n),(e=t.call(this,!1)).maximumDoubleClickDelay=r,e.maximumDoubleClickDistance=i,e.maximumDoubleTouchDelay=a,e.maximumDoubleTouchDistance=o,e._clock=s,e._pointerState=new Map,e._immediateDoubleClick=e.registerOutgoing("immediate-double-click"),e.registerIncoming("pointer-down",e._handlePointerDown.bind($t(e))),e.registerIncoming("pointer-up",(function(t){e._handlePointerLoss(t,"pointer-up")})),e.registerIncoming("pointer-capture-lost",(function(t){e._handlePointerLoss(t,"pointer-capture-lost")})),e.registerIncoming("pointer-cancel",(function(t){e._handlePointerLoss(t,"pointer-cancel")})),e}return Zt(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),Dt(en(n.prototype),"onUninstall",this).call(this)}},{key:"_handlePointerDown",value:function(e){var t=e.data,n=this._pointerId(t);this._pointerState.has(n)||(this._pointerState.set(n,{downButton:t.native.button,immediateDoubleClick:null}),this.startCapturingPointer(t.native))}},{key:"_handlePointerLoss",value:function(e,t){var n=e.data,r=this._pointerId(n),i=this._pointerState.get(r);if(i&&"pointer-up"===t&&i.downButton===n.native.button){var a=i.immediateDoubleClick;if(a){a.timeoutHandle.remove();var o="touch"===e.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Vn(a,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,a.modifiers),this._removeState(n))}else this._startImmediateDoubleClick(e,i)}}},{key:"_startImmediateDoubleClick",value:function(e,t){var n=this;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((function(){return n._removeState(e.data)}),"touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}}},{key:"_pointerId",value:function(e){var t=e.native;return"mouse"===t.pointerType?"".concat(t.pointerId,":").concat(t.button):""+t.pointerType}},{key:"_removeState",value:function(e){var t=this._pointerId(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}]),n}(ce.a),Qn=function(e){Kt(n,e);var t=Xt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zn.a;return Wt(this,n),(e=t.call(this,!1)).maximumClickDelay=r,e.movementUntilMouseDrag=i,e.movementUntilPenDrag=a,e.movementUntilTouchDrag=o,e.holdDelay=s,e._clock=u,e._pointerState=new Map,e._pointerDrag=e.registerOutgoing("pointer-drag"),e._immediateClick=e.registerOutgoing("immediate-click"),e._pointerHold=e.registerOutgoing("hold"),e.registerIncoming("pointer-down",e._handlePointerDown.bind($t(e))),e.registerIncoming("pointer-up",(function(t){e._handlePointerLoss(t,"pointer-up")})),e.registerIncoming("pointer-capture-lost",(function(t){e._handlePointerLoss(t,"pointer-capture-lost")})),e.registerIncoming("pointer-cancel",(function(t){e._handlePointerLoss(t,"pointer-cancel")})),e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind($t(e))),e._moveHandle.pause(),e}return Zt(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null)})),Dt(en(n.prototype),"onUninstall",this).call(this)}},{key:"_handlePointerDown",value:function(e){var t=this,n=e.data,r=n.native.pointerId,i=null;0===this._pointerState.size&&(i=this._clock.setTimeout((function(){var n=t._pointerState.get(r);n&&(n.isDragging||(t._pointerHold.emit(n.previousEvent,void 0,e.modifiers),n.holdEmitted=!0),n.holdTimeout=null)}),this.holdDelay));var a={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,a),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(e)}},{key:"_createPointerDragData",value:function(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}},{key:"_handlePointerMove",value:function(e){var t=e.data,n=this._pointerState.get(t.native.pointerId);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,t),void 0,n.modifiers):function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}(t,n.startEvent)>this._getDragThreshold(t.native.pointerType)&&this.startDragging(e),n.previousEvent=t)}},{key:"_getDragThreshold",value:function(e){switch(e){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;case"mouse":default:return this.movementUntilMouseDrag}}},{key:"startDragging",value:function(e){var t=this,n=e.data,r=n.native.pointerId;this._pointerState.forEach((function(i){null!=i.holdTimeout&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=e.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?t._pointerDrag.emit(t._createPointerDragData("start",i,n)):t._pointerDrag.emit(t._createPointerDragData("start",i,i.previousEvent),e.timestamp))}))}},{key:"_handlePointerLoss",value:function(e,t){var n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(null!=i.holdTimeout&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",i,"pointer-up"===t?n:i.previousEvent),void 0,i.modifiers):"pointer-up"===t&&i.downButton===n.native.button&&e.timestamp-i.startTimestamp<=this.maximumClickDelay&&!i.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(r),this.stopCapturingPointer(n.native),0===this._pointerState.size&&this._moveHandle.pause())}}]),n}(ce.a),$n={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},er={zoomIn:["=","+"],zoomOut:["-","_"]},tr={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"},nr=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._handles=new _.a,e}return Zt(n,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(d.whenNot)(this.view,"ready",(function(){return e._disconnect()})),Object(d.when)(this.view,"ready",(function(){return e._connect()}))])}},{key:"destroy",value:function(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}},{key:"_disconnect",value:function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}},{key:"_connect",value:function(){var e=this,t=new Ln(this.view.surface,this.view.input),n=[new Xn,new Qn,new Bn,new Wn(this.view.navigation),new qn],r=new le.a({eventSource:t,recognizers:n});r.installHandlers("prevent-context-menu",[new Fn],le.b.INTERNAL),r.installHandlers("navigation",[new Mn(this.view),new mn(this.view),new Sn(this.view),new fn(this.view),new fn(this.view,["Ctrl"]),new vn(this.view,"primary"),new _n(this.view,$n),new kn(this.view,er),new xn(this.view,tr),new yn(this.view,"secondary"),new pn(this.view,"touch")],le.b.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,Object(d.init)(this.view.navigation,"browserTouchPanEnabled",(function(t){e._source.browserTouchPanningEnabled=!t}))}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]),n}(V.a);Object(i.a)([Object(u.b)()],nr.prototype,"view",void 0);var rr=nr=Object(i.a)([Object(c.a)("esri.views.2d.input.MapViewInputManager")],nr),ir=0,ar=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).color=new b.a([0,255,255]),e.haloOpacity=1,e.fillOpacity=.25,e}return Zt(n,[{key:"version",get:function(){return ir++}}]),n}(V.a);Object(i.a)([Object(u.b)({readOnly:!0})],ar.prototype,"version",null),Object(i.a)([Object(u.b)({type:b.a})],ar.prototype,"color",void 0),Object(i.a)([Object(u.b)({type:b.a})],ar.prototype,"haloColor",void 0),Object(i.a)([Object(u.b)()],ar.prototype,"haloOpacity",void 0),Object(i.a)([Object(u.b)()],ar.prototype,"fillOpacity",void 0);var or=ar=Object(i.a)([Object(c.a)("esri.views.2d.support.HighlightOptions")],ar),sr=n("sq/B"),ur={checkMajorWebPerformanceCaveat:!0},cr=n("Gj5k"),lr=n("z5yp"),hr=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).widget=null,e}return Zt(n,[{key:"destroy",value:function(){this.widget&&this.widget.destroy(),this.node=null}},{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(e){var t=this._get("node");e!==t&&(e&&e.classList.add("esri-component"),t&&t.classList.remove("esri-component"),this._set("node",e))}},{key:"castNode",value:function(e){return e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),Object(lr.a)(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}}]),n}(V.a);Object(i.a)([Object(u.b)({dependsOn:[]})],hr.prototype,"id",null),Object(i.a)([Object(u.b)()],hr.prototype,"node",null),Object(i.a)([Object(cr.a)("node")],hr.prototype,"castNode",null),Object(i.a)([Object(u.b)({readOnly:!0})],hr.prototype,"widget",void 0);var fr=hr=Object(i.a)([Object(c.a)("esri.views.ui.Component")],hr),pr=n("cCpn"),dr={left:0,top:0,bottom:0,right:0},vr={bottom:30,top:15,right:15,left:15};function yr(e){return"object"!=typeof e||e instanceof fr||"declaredClass"in e||!("component"in e||"index"in e||"position"in e)?null:e}function br(e,t){var n=t.top,r=t.bottom,i=t.left,a=t.right;e.style.top=n,e.style.bottom=r,e.style.left=i,e.style.right=a}var gr=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._cornerNameToContainerLookup={},r._positionNameToContainerLookup={},r._components=new Array,r._componentToKey=new Map,r._handles=new _.a,r.view=null,r._initContainers(),r}return Zt(n,[{key:"initialize",value:function(){this._handles.add([Object(d.init)(this,"view.padding, container",this._applyViewPadding.bind(this)),Object(d.init)(this,"padding",this._applyUIPadding.bind(this))])}},{key:"destroy",value:function(){this.container=null;var e,t=Vt(this._components);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}},{key:"container",set:function(e){var t=this._get("container");e!==t&&(e&&(e.classList.add("esri-ui"),this._attachContainers(e)),t&&(t.classList.remove("esri-ui"),br(t,{top:"",bottom:"",left:"",right:""}),Object(lr.b)(t)),this._set("container",e))}},{key:"height",get:function(){var e=this.get("view.height")||0;if(0===e)return e;var t=this._getViewPadding();return Math.max(e-(t.top+t.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(e){e?this._override("padding",e):this._clearOverride("padding")}},{key:"castPadding",value:function(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:Nt(Nt({},vr),e)}},{key:"width",get:function(){var e=this.get("view.width")||0;if(0===e)return e;var t=this._getViewPadding();return Math.max(e-(t.left+t.right),0)}},{key:"add",value:function(e,t){var n,r,i,a,o=this;if(Array.isArray(e))e.forEach((function(e){return o.add(e,t)}));else{var s=yr(e);s&&(i=(n=s).index,t=n.position,e=n.component,a=n.key),t&&"object"==typeof t&&(i=(r=t).index,a=r.key,t=r.position),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,a)}}},{key:"remove",value:function(e,t){var n=this;if(e){if(Array.isArray(e))return e.map((function(e){return n.remove(e,t)}));var r=this._find(e);if(r){var i=this._componentToKey;if(i.has(e)&&i.get(e)!==t)return;var a=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(a,1)[0]}}}},{key:"empty",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.empty(e)})).reduce((function(e,t){return e.concat(t)})):"manual"===(e=e||"manual")?Array.prototype.slice.call(this._manualContainer.children).filter((function(e){return!e.classList.contains("esri-ui-corner")})).map((function(e){return t.remove(e)})):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}},{key:"move",value:function(e,t){var n=this;if(Array.isArray(e)&&e.forEach((function(e){return n.move(e,t)})),e){var r,i=yr(e)||yr(t);if(i&&(r=i.index,t=i.position,e=i.component||e),!t||this._isValidPosition(t)){var a=this.remove(e);a&&this.add(a,{position:t,index:r})}}}},{key:"find",value:function(e){if(!e)return null;var t=this._findById(e);return t&&(t.widget||t.node)}},{key:"getPosition",value:function(e){for(var t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}},{key:"_add",value:function(e,t,n,r){e instanceof fr||(e=new fr({node:e})),this._place({component:e,position:t,index:n}),this._components.push(e),r&&this._componentToKey.set(e,r)}},{key:"_find",value:function(e){return e?e instanceof fr?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}},{key:"_getViewPadding",value:function(){return this.get("view.padding")||dr}},{key:"_attachContainers",value:function(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}},{key:"_initContainers",value:function(){var e=document.createElement("div");e.classList.add("esri-ui-inner-container"),e.classList.add("esri-ui-corner-container");var t=document.createElement("div");t.classList.add("esri-ui-inner-container"),t.classList.add("esri-ui-manual-container");var n=document.createElement("div");n.classList.add("esri-ui-top-left"),n.classList.add("esri-ui-corner"),e.appendChild(n);var r=document.createElement("div");r.classList.add("esri-ui-top-right"),r.classList.add("esri-ui-corner"),e.appendChild(r);var i=document.createElement("div");i.classList.add("esri-ui-bottom-left"),i.classList.add("esri-ui-corner"),e.appendChild(i);var a=document.createElement("div");a.classList.add("esri-ui-bottom-right"),a.classList.add("esri-ui-corner"),e.appendChild(a),this._innerContainer=e,this._manualContainer=t;var o=Object(pr.f)();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":i,"bottom-right":a,"top-leading":o?r:n,"top-trailing":o?n:r,"bottom-leading":o?a:i,"bottom-trailing":o?i:a},this._positionNameToContainerLookup=Nt({manual:t},this._cornerNameToContainerLookup)}},{key:"_isValidPosition",value:function(e){return!!this._positionNameToContainerLookup[e]}},{key:"_place",value:function(e){var t=e.component,n=e.index,r=this._positionNameToContainerLookup[e.position||"manual"],i=n>-1;if(function(e){return e&&!e._started&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(t.widget)&&t.widget.startup(),i){var a=Array.prototype.slice.call(r.children);0!==n?n>=a.length?r.appendChild(t.node):Object(lr.c)(t.node,a[n]):r.firstChild?Object(lr.c)(t.node,r.firstChild):r.appendChild(t.node)}else r.appendChild(t.node)}},{key:"_applyViewPadding",value:function(){var e=this.container;e&&br(e,this._toPxPosition(this._getViewPadding()))}},{key:"_applyUIPadding",value:function(){var e=this._innerContainer;e&&br(e,this._toPxPosition(this.padding))}},{key:"_toPxPosition",value:function(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}},{key:"_toPxUnit",value:function(e){return 0===e?"0":e+"px"}},{key:"_findByComponent",value:function(e){var t,n=null;return this._components.some((function(r){return(t=r===e)&&(n=r),t})),n}},{key:"_findById",value:function(e){var t,n=null;return this._components.some((function(r){return(t=r.id===e)&&(n=r),t})),n}},{key:"_findByNode",value:function(e){var t,n=null;return this._components.some((function(r){return(t=r.node===e)&&(n=r),t})),n}}]),n}(U.a.EventedAccessor);Object(i.a)([Object(u.b)()],gr.prototype,"container",null),Object(i.a)([Object(u.b)()],gr.prototype,"height",null),Object(i.a)([Object(u.b)({value:vr})],gr.prototype,"padding",null),Object(i.a)([Object(cr.a)("padding")],gr.prototype,"castPadding",null),Object(i.a)([Object(u.b)()],gr.prototype,"view",void 0),Object(i.a)([Object(u.b)()],gr.prototype,"width",null);var mr=gr=Object(i.a)([Object(c.a)("esri.views.ui.UI")],gr),wr=n("h1D1"),Or=n("dV4Z"),jr=n("Jv1m"),_r=n("Ehpe"),xr=n("eSsm");function kr(e,t){return e&&"copyright"in e&&(!t||"function"==typeof e.originOf&&"user"===e.originOf("copyright"))}function Sr(e,t,n){n&&t&&(e.find((function(e){return e.layerView===t&&e.text===n}))||e.push({text:n,layerView:t}))}var Mr=[],Ir=function(e){Kt(r,e);var t,n=Xt(r);function r(e){var t;return Wt(this,r),(t=n.call(this,e)).clear=function(){t._fetchedAttributionData.clear(),t._pendingAttributions.clear(),t.handles.remove("suspension"),t.notifyChange("state")},t._pendingAttributions=new Set,t._fetchedAttributionData=new Map,t.items=new h.a,t.view=null,t._allLayerViewsChange=function(e){t.handles.remove("suspension");var n=t.get("view.allLayerViews");n&&t.handles.add(n.map((function(e){return e.watch(["suspended","attributionVisible"],t._updateAttributionItems)})),"suspension"),e&&e.removed&&e.removed.forEach((function(e){t._pendingAttributions.delete(e),t._fetchedAttributionData.delete(e)})),t._updateAttributionItems()},t._updateAttributionItems=function(){var e=t.get("view.allLayerViews");Mr.length=0,e?(e.forEach((function(e){if(!e.suspended&&e.get("layer.attributionVisible")){var n=e.layer;if(kr(n,"user"))Sr(Mr,e,n.copyright);else if(n.hasAttributionData){if(t._fetchedAttributionData.has(e)){var r=t._fetchedAttributionData.get(e);return void(r?Sr(Mr,e,t._getDynamicAttribution(r,t.view,n)):kr(n)&&Sr(Mr,e,n.copyright))}t._fetchAttributionData(e)}else{var i=n.get("portalItem.accessInformation");Sr(Mr,e,i||n.copyright)}}})),function(e,t){return e.length!==t.length||e.some((function(e,n){return e.text!==t[n].text}))}(t.items,Mr)&&(t.items.removeAll(),t.items.addMany(Mr)),Mr.length=0,t.notifyChange("state")):t.clear()},t.handles.add([Object(d.on)($t(t),"view.allLayerViews","change",t._allLayerViewsChange,t._allLayerViewsChange,t.clear),Object(d.whenTrue)($t(t),"view.stationary",(function(){return t._updateAttributionItems()}))]),t}return Zt(r,[{key:"destroy",value:function(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}},{key:"state",get:function(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}},{key:"_fetchAttributionData",value:(t=Ut(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pendingAttributions.has(t)){e.next=2;break}return e.abrupt("return");case 2:return this._pendingAttributions.add(t),e.next=5,Object(xr.c)(t.layer.fetchAttributionData());case 5:n=e.sent,this._pendingAttributions.has(t)&&(r=n.ok?this._createContributionIndex(n.value,function(e){return"bing-maps"===e.type}(t.layer)):null,this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)),this._updateAttributionItems();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_createContributionIndex",value:function(e,t){var n=e.contributors,r={};if(!n)return r;for(var i=0;i<n.length;i++){var a=n[i],o=a.coverageAreas;if(!o)return;var s,u=Vt(o);try{for(u.s();!(s=u.n()).done;)for(var c=s.value,l=c.bbox,h=c.zoomMin-(t&&c.zoomMin?1:0),f=c.zoomMax-(t&&c.zoomMax?1:0),p={xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:A.a.WGS84},d={extent:Object(C.b)(p),attribution:a.attribution||"",score:null!=c.score?c.score:100,id:i},v=h;v<=f;v++)r[v]=r[v]||[],r[v].push(d)}catch(y){u.e(y)}finally{u.f()}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}},{key:"_getDynamicAttribution",value:function(e,t,n){var r=t.extent,i=t.scale,a=n.tileInfo.scaleToZoom(i);if(a=Math.min(e.maxKey,Math.round(a)),!r||null==a||a<=-1)return"";var o=e[a],s=Object(C.d)(r.center.clone().normalize(),t.spatialReference),u={};return o?o.filter((function(e){var t=!u[e.id]&&s&&Object(yt.e)(e.extent,s);return t&&(u[e.id]=!0),t})).sort((function(e,t){return t.score-e.score||e.objectId-t.objectId})).map((function(e){return e.attribution})).join(", "):""}}]),r}(Z.a);Object(i.a)([Object(u.b)({readOnly:!0,type:h.a})],Ir.prototype,"items",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Ir.prototype,"state",null),Object(i.a)([Object(u.b)()],Ir.prototype,"view",void 0);var Tr=Ir=Object(i.a)([Object(c.a)("esri.widgets.Attribution.AttributionViewModel")],Ir),Ar=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r))._isOpen=!1,i._attributionTextOverflowed=!1,i._prevSourceNodeHeight=0,i.iconClass="esri-icon-description",i.itemDelimiter=" | ",i.label=void 0,i.messages=null,i.view=null,i.viewModel=new Tr,i}return Zt(n,[{key:"initialize",value:function(){var e=this;this.own(Object(d.on)(this,"viewModel.items","change",(function(){return e.scheduleRender()})))}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((function(e,t){return-1===e.indexOf(t.text)&&e.push(t.text),e}),[]).join(this.itemDelimiter)}},{key:"render",value:function(){var e={"esri-attribution--open":this._isOpen};return Object(jr.a)("div",{bind:this,class:this.classes("esri-attribution esri-widget",e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}},{key:"renderPoweredBy",value:function(){return Object(jr.a)("div",{class:"esri-attribution__powered-by"},"Powered by"," ",Object(jr.a)("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}},{key:"renderSourcesNode",value:function(){var e=this._isOpen,t=this._isInteractive(),n=t?0:-1,r=this.attributionText,i=t?"button":void 0,a={"esri-attribution__sources--open":e,"esri-interactive":t};return Object(jr.a)("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",a),innerHTML:r,role:i,tabIndex:n})}},{key:"_afterSourcesNodeCreate",value:function(e){this._prevSourceNodeHeight=e.clientWidth}},{key:"_afterSourcesNodeUpdate",value:function(e){var t=!1,n=e.clientHeight,r=e.clientWidth,i=e.scrollWidth>=r,a=this._attributionTextOverflowed!==i;if(this._attributionTextOverflowed=i,a&&(t=!0),this._isOpen){var o=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,o&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}},{key:"_toggleState",value:function(){this._isInteractive()&&(this._isOpen=!this._isOpen)}},{key:"_isInteractive",value:function(){return this._isOpen||this._attributionTextOverflowed}}]),n}(_r.a);Object(i.a)([Object(u.b)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ar.prototype,"attributionText",null),Object(i.a)([Object(u.b)()],Ar.prototype,"iconClass",void 0),Object(i.a)([Object(u.b)()],Ar.prototype,"itemDelimiter",void 0),Object(i.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ar.prototype,"label",void 0),Object(i.a)([Object(u.b)(),Object(Or.a)("esri/widgets/Attribution/t9n/Attribution")],Ar.prototype,"messages",void 0),Object(i.a)([Object(F.a)("viewModel.view")],Ar.prototype,"view",void 0),Object(i.a)([Object(u.b)({type:Tr})],Ar.prototype,"viewModel",void 0),Object(i.a)([Object(wr.a)()],Ar.prototype,"_toggleState",null);var Cr=Ar=Object(i.a)([Object(c.a)("esri.widgets.Attribution")],Ar),Er=n("KMCJ"),Pr=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._handles=new _.a,r.orientation={x:0,y:0,z:0},r.view=null,r._updateForCamera=r._updateForCamera.bind($t(r)),r._updateForRotation=r._updateForRotation.bind($t(r)),r._updateRotationWatcher=r._updateRotationWatcher.bind($t(r)),r}return Zt(n,[{key:"initialize",value:function(){this._handles.add(Object(d.init)(this,"view",this._updateRotationWatcher))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null}},{key:"canShowNorth",get:function(){var e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}},{key:"reset",value:function(){if(this.get("view.ready")){var e={};"2d"===this.view.type?e.rotation=0:e.heading=0,this.callGoTo({target:e})}}},{key:"_updateForRotation",value:function(e){null!=e&&(this.orientation={z:e})}},{key:"_updateForCamera",value:function(e){e&&(this.orientation={x:0,y:0,z:-e.heading})}},{key:"_updateRotationWatcher",value:function(e){this._handles.removeAll(),e&&this._handles.add("2d"===e.type?Object(d.init)(this,"view.rotation",this._updateForRotation):Object(d.init)(this,"view.camera",this._updateForCamera))}}]),n}(Object(Er.a)(V.a));Object(i.a)([Object(u.b)({readOnly:!0})],Pr.prototype,"canShowNorth",null),Object(i.a)([Object(u.b)()],Pr.prototype,"orientation",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Pr.prototype,"state",null),Object(i.a)([Object(u.b)()],Pr.prototype,"view",void 0);var Rr=Pr=Object(i.a)([Object(c.a)("esri.widgets.CompassViewModel")],Pr),Dr=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).goToOverride=null,i.iconClass="esri-icon-locate-circled",i.label=void 0,i.messages=null,i.view=null,i.viewModel=new Rr,i}return Zt(n,[{key:"reset",value:function(){return this.viewModel.reset()}},{key:"render",value:function(){var e=this.viewModel,t=e.orientation,n=e.state,r="disabled"===n,i="compass"==("rotation"===n?"rotation":"compass"),a=r?-1:0,o={"esri-disabled":r,"esri-interactive":!r},s={"esri-icon-compass":i,"esri-icon-dial":!i},u=this.messages;return Object(jr.a)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:a,"aria-label":u.reset,title:u.reset},Object(jr.a)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",s),styles:this._toRotationTransform(t)}),Object(jr.a)("span",{class:"esri-icon-font-fallback-text"},u.reset))}},{key:"_reset",value:function(){this.viewModel.reset()}},{key:"_toRotationTransform",value:function(e){return{transform:"rotateZ(".concat(e.z,"deg)")}}}]),n}(_r.a);Object(i.a)([Object(F.a)("viewModel.goToOverride")],Dr.prototype,"goToOverride",void 0),Object(i.a)([Object(u.b)()],Dr.prototype,"iconClass",void 0),Object(i.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Dr.prototype,"label",void 0),Object(i.a)([Object(u.b)(),Object(Or.a)("esri/widgets/Compass/t9n/Compass")],Dr.prototype,"messages",void 0),Object(i.a)([Object(F.a)("viewModel.view")],Dr.prototype,"view",void 0),Object(i.a)([Object(u.b)({type:Rr})],Dr.prototype,"viewModel",void 0),Object(i.a)([Object(wr.a)()],Dr.prototype,"_reset",null);var Lr=Dr=Object(i.a)([Object(c.a)("esri.widgets.Compass")],Dr),Nr=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._handles=new _.a,r.navigationMode="pan",r.view=null,r}return Zt(n,[{key:"initialize",value:function(){this._handles.add(Object(d.when)(this,"view.inputManager",this._setNavigationMode.bind(this)))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null}},{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}},{key:"toggle",value:function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}},{key:"_setNavigationMode",value:function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}}]),n}(V.a);Object(i.a)([Object(u.b)({readOnly:!0})],Nr.prototype,"state",null),Object(i.a)([Object(u.b)()],Nr.prototype,"navigationMode",void 0),Object(i.a)([Object(u.b)()],Nr.prototype,"view",void 0);var Fr=Nr=Object(i.a)([Object(c.a)("esri.widgets.NavigationToggleViewModel")],Nr),zr=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).iconClass="esri-icon-pan2",i.label=void 0,i.messages=null,i.view=null,i.viewModel=new Fr,i}return Zt(n,[{key:"layout",set:function(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}},{key:"toggle",value:function(){return this.viewModel.toggle()}},{key:"render",value:function(){var e="disabled"===this.get("viewModel.state"),t="pan"===this.get("viewModel.navigationMode"),n={"esri-disabled":e,"esri-navigation-toggle--horizontal":"horizontal"===this.layout},r={"esri-navigation-toggle__button--active":t},i={"esri-navigation-toggle__button--active":!t},a=e?-1:0,o=this.messages.toggle;return Object(jr.a)("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",n),onclick:this._toggle,onkeydown:this._toggle,tabIndex:a,"aria-label":o,title:o},Object(jr.a)("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",r)},Object(jr.a)("span",{class:"esri-icon-pan"})),Object(jr.a)("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",i)},Object(jr.a)("span",{class:"esri-icon-rotate"})))}},{key:"_toggle",value:function(){this.toggle()}}]),n}(_r.a);Object(i.a)([Object(u.b)()],zr.prototype,"iconClass",void 0),Object(i.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],zr.prototype,"label",void 0),Object(i.a)([Object(u.b)({value:"vertical"})],zr.prototype,"layout",null),Object(i.a)([Object(u.b)(),Object(Or.a)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],zr.prototype,"messages",void 0),Object(i.a)([Object(F.a)("viewModel.view")],zr.prototype,"view",void 0),Object(i.a)([Object(u.b)({type:Fr})],zr.prototype,"viewModel",void 0),Object(i.a)([Object(wr.a)()],zr.prototype,"_toggle",null);var Vr=zr=Object(i.a)([Object(c.a)("esri.widgets.NavigationToggle")],zr),Gr=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).enabled=!0,e.iconClass="",e.title="",e}return Zt(n,[{key:"render",value:function(){var e=this.enabled?0:-1,t={"esri-disabled":!this.enabled,"esri-interactive":this.enabled},n=Ft({},this.iconClass,!!this.iconClass);return Object(jr.a)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},Object(jr.a)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",n)}),Object(jr.a)("span",{class:"esri-icon-font-fallback-text"},this.title))}},{key:"_triggerAction",value:function(){this.action.call(this)}}]),n}(_r.a);Object(i.a)([Object(u.b)()],Gr.prototype,"action",void 0),Object(i.a)([Object(u.b)()],Gr.prototype,"enabled",void 0),Object(i.a)([Object(u.b)()],Gr.prototype,"iconClass",void 0),Object(i.a)([Object(u.b)()],Gr.prototype,"title",void 0),Object(i.a)([Object(wr.a)()],Gr.prototype,"_triggerAction",null);var Ur=Gr=Object(i.a)([Object(c.a)("esri.widgets.IconButton")],Gr),Br=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;var e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;var e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}}]),n}(V.a);Object(i.a)([Object(u.b)({readOnly:!0})],Br.prototype,"canZoomIn",null),Object(i.a)([Object(u.b)({readOnly:!0})],Br.prototype,"canZoomOut",null),Object(i.a)([Object(u.b)()],Br.prototype,"view",void 0);var qr=Br=Object(i.a)([Object(c.a)("esri.widgets.Zoom.ZoomConditions2D")],Br),Hr=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]),n}(V.a);Object(i.a)([Object(u.b)({readOnly:!0})],Hr.prototype,"canZoomIn",null),Object(i.a)([Object(u.b)({readOnly:!0})],Hr.prototype,"canZoomOut",null),Object(i.a)([Object(u.b)()],Hr.prototype,"view",void 0);var Wr=Hr=Object(i.a)([Object(c.a)("esri.widgets.Zoom.ZoomConditions3D")],Hr),Jr=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).canZoomIn=!1,r.canZoomOut=!1,r}return Zt(n,[{key:"destroy",value:function(){this.view=null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(e){e?"2d"===e.type?this._zoomConditions=new qr({view:e}):"3d"===e.type&&(this._zoomConditions=new Wr({view:e})):this._zoomConditions=null,this._set("view",e)}},{key:"zoomIn",value:function(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():Object(T.l)(e.goTo({zoomFactor:2}))}}},{key:"zoomOut",value:function(){if(this.canZoomOut){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():Object(T.l)(e.goTo({zoomFactor:.5}))}}}]),n}(V.a);Object(i.a)([Object(u.b)()],Jr.prototype,"_zoomConditions",void 0),Object(i.a)([Object(u.b)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Jr.prototype,"canZoomIn",void 0),Object(i.a)([Object(u.b)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Jr.prototype,"canZoomOut",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],Jr.prototype,"state",null),Object(i.a)([Object(u.b)()],Jr.prototype,"view",null);var Zr=Jr=Object(i.a)([Object(c.a)("esri.widgets.Zoom.ZoomViewModel")],Jr),Kr=function(e){Kt(n,e);var t=Xt(n);function n(e,r){var i;return Wt(this,n),(i=t.call(this,e,r)).iconClass="esri-icon-zoom-in-magnifying-glass",i.label=void 0,i.messages=null,i.view=null,i.viewModel=new Zr,i}return Zt(n,[{key:"initialize",value:function(){this._zoomInButton=new Ur({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new Ur({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}},{key:"destroy",value:function(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}},{key:"layout",set:function(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}},{key:"render",value:function(){var e=this.viewModel,t={"esri-zoom--horizontal":"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===e.state&&e.canZoomIn,this._zoomOutButton.enabled="ready"===e.state&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,Object(jr.a)("div",{class:this.classes("esri-zoom esri-widget",t)},this._zoomInButton.render(),this._zoomOutButton.render())}},{key:"zoomIn",value:function(){return this.viewModel.zoomIn()}},{key:"zoomOut",value:function(){return this.viewModel.zoomOut()}}]),n}(_r.a);Object(i.a)([Object(u.b)()],Kr.prototype,"iconClass",void 0),Object(i.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Kr.prototype,"label",void 0),Object(i.a)([Object(u.b)({value:"vertical"})],Kr.prototype,"layout",null),Object(i.a)([Object(u.b)(),Object(Or.a)("esri/widgets/Zoom/t9n/Zoom")],Kr.prototype,"messages",void 0),Object(i.a)([Object(F.a)("viewModel.view")],Kr.prototype,"view",void 0),Object(i.a)([Object(u.b)({type:Zr})],Kr.prototype,"viewModel",void 0);var Yr=Kr=Object(i.a)([Object(c.a)("esri.widgets.Zoom")],Kr);s.a.getLogger("esri.views.ui.DefaultUI");var Xr=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},r.components=[],r}return Zt(n,[{key:"initialize",value:function(){this._handles.add([Object(d.init)(this,"components",this._componentsWatcher.bind(this)),Object(d.init)(this,"view",this._updateViewAwareWidgets.bind(this))])}},{key:"_add",value:function(e,t,r,i){if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}Dt(en(n.prototype),"_add",this).call(this,e,t,r,i)}},{key:"_removeComponents",value:function(e){var t=this;e.forEach((function(e){var n=t._find(e);n&&(t.remove(n),n.destroy())}))}},{key:"_updateViewAwareWidgets",value:function(e){var t=this;this.components.forEach((function(n){var r=t._find(n),i=r&&r.widget;(function(e){return e&&void 0!==e.view})(i)&&(i.view=e)}))}},{key:"_componentsWatcher",value:function(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}},{key:"_adjustPadding",value:function(e){if(-1===e.indexOf("attribution")&&!this._isOverridden("padding")){var t=this.padding.top;this.padding=t}}},{key:"_addComponents",value:function(e){var t=this;this.initialized&&e.forEach((function(e){return t.add(t._createComponent(e),t._defaultPositionLookup[e])}))}},{key:"_createComponent",value:function(e){var t=this._createWidget(e);if(t)return new fr({id:e,node:t})}},{key:"_createWidget",value:function(e){return"attribution"===e?this._createAttribution():"compass"===e?this._createCompass():"navigation-toggle"===e?this._createNavigationToggle():"zoom"===e?this._createZoom():void 0}},{key:"_createAttribution",value:function(){return new Cr({view:this.view})}},{key:"_createCompass",value:function(){return new Lr({view:this.view})}},{key:"_createNavigationToggle",value:function(){return new Vr({view:this.view})}},{key:"_createZoom",value:function(){return new Yr({view:this.view})}}]),n}(mr);Object(i.a)([Object(u.b)()],Xr.prototype,"components",void 0);var Qr=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).components=["attribution","zoom"],r}return n}(Xr=Object(i.a)([Object(c.a)("esri.views.ui.DefaultUI")],Xr));Object(i.a)([Object(u.b)()],Qr.prototype,"components",void 0);var $r,ei,ti,ni,ri,ii,ai=Qr=Object(i.a)([Object(c.a)("esri.views.ui.2d.DefaultUI2D")],Qr),oi=s.a.getLogger("esri.views.MapView");function si(e,t,n){if(e)if(Array.isArray(e)||h.a.isCollection(e)){if(0===e.length)return;e.forEach((function(e){return si(e,t,n)}))}else!function(e){return e instanceof f.a}(e)?n.add(e):t.add(e)}var ui,ci,li=function(e){Kt(r,e);var t=Xt(r);function r(e){var n;return Wt(this,r),(n=t.call(this,e))._magnifierView=null,n._stage=null,n._resolveWhenReady=[],n.rootLayerViews=new p.a({root:$t(n),rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(e){return null}}),n.floors=new h.a,n.graphicsView=null,n.highlightOptions=new or,n.inputManager=new rr({view:$t(n)}),n.mapViewNavigation=null,n.supersampleScreenhotsEnabled=!0,n.ui=new ai,n.rendering=!1,Object(w.a)(),n}return Zt(r,[{key:"destroy",value:function(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}},{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(e){void 0===e?this._clearOverride("background"):this._override("background",e)}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"toMap",value:function(e){if(Object(I.d)(e)){var t=Object(I.c)(this,e);return Dt(en(r.prototype),"toMap",this).call(this,t)}return Dt(en(r.prototype),"toMap",this).call(this,e)}},{key:"hitTest",value:function(e,t){var n=Object(I.d)(e)?Object(I.c)(this,e):e;if(!this.ready||isNaN(n.x)||isNaN(n.y))return Promise.resolve({screenPoint:n,results:[]});var r=this.toMap(n),i=[this.graphicsView];i.push.apply(i,this.allLayerViews.toArray().reverse());var a=new Set,o=new Set,s=new Set,u=new Set;return t&&(si(t&&t.include,a,s),si(t&&t.exclude,o,u)),Promise.all(i.map((function(e){return!e||!e.hitTest||s.size>0&&!e.layer||s.size>0&&e.layer&&!s.has(e.layer)||u.size>0&&e.layer&&u.has(e.layer)?null:e.hitTest(n.x,n.y)}))).then((function(e){return{screenPoint:n,results:e.filter((function(e){return null!=e&&(!(a.size>0)||a.has(e))&&(!(o.size>0)||!o.has(e))})).map((function(e){return{mapPoint:r,graphic:e}}))}}))}},{key:"takeScreenshot",value:function(e){return this.ready?this._stage.takeScreenshot(Object(O.e)(e,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")}},{key:"on",value:function(e,t,n,i){return this.inputManager&&this.viewEvents.on(e,t,n,i)||Dt(en(r.prototype),"on",this).call(this,e,t)}},{key:"hasEventListener",value:function(e){return Dt(en(r.prototype),"hasEventListener",this).call(this,e)||this.viewEvents.hasHandler(e)}},{key:"whenLayerView",value:function(e){return Dt(en(r.prototype),"whenLayerView",this).call(this,e)}},{key:"graphicChanged",value:function(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}},{key:"whenReady",value:function(){var e=this;return new Promise((function(t){e.ready?t(e):e._resolveWhenReady.push(t)}))}},{key:"forceDOMReadyCycle",value:function(){this.forceReadyCycle()}},{key:"validate",value:function(){var e=function(e){e=Nt(Nt({},ur),e);var t=Object(sr.a)();return t.available?e.checkMajorWebPerformanceCaveat&&t.majorPerformanceCaveat?new l.a("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?t.supportsElementIndexUint?t.supportsStandardDerivatives?t.supportsInstancedArrays?null:new l.a("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new l.a("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new l.a("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new l.a("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new l.a("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new l.a("webgl:required","WebGL is required but not supported.")}({checkMajorWebPerformanceCaveat:!1});return Object(a.a)("safari")&&Object(a.a)("safari")<9&&(e=new l.a("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Object(a.a)("safari")})),Object(o.k)(e)?(oi.warn("#validate()",e.message),Promise.reject(e)):Ut(regeneratorRuntime.mark((function e(){var t,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all([n.e(0),n.e(190)]).then(n.bind(null,"tpsn")),Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7),n.e(8),n.e(9),n.e(10),n.e(0),n.e(22)]).then(n.bind(null,"tGAV"))]);case 2:t=e.sent,r=zt(t,2),i=r[1],a=i.GraphicsView2D,o=i.GraphicContainer,s=i.LabelManager,u=i.MapViewNavigation,c=i.MagnifierView2D,l=i.Stage,ei=a,ti=o,ni=s,ri=u,ii=c,$r=l;case 12:case"end":return e.stop()}}),e)})))()}},{key:"_startup",value:function(){var e=this;this.timeline.begin("MapView Startup"),Dt(en(r.prototype),"_startup",this).call(this),this.graphics.owner=this;var t=new $r(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),n=new ei({view:this,graphics:this.graphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new ti(this.featuresTilingScheme)}),i=new ri({view:this,animationManager:this.animationManager}),a=new ni({view:this});this._magnifierView=new ii,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=n,this._set("graphicsView",n),this._set("mapViewNavigation",i),this._set("labelManager",a),this.handles.add([this.rootLayerViews.on("change",(function(){return e._updateStageChildren()})),t.on("post-render",(function(){return e._set("rendering",t.renderRequested)})),t.on("will-render",(function(){return e._set("rendering",t.renderRequested)})),t.on("webgl-error",(function(t){return e.fatalError=t.error})),Object(d.init)(this,"stationary",(function(e){return t.stationary=e}),!0),Object(d.init)(this,"state.id",(function(){return t.state=e.state}),!0),Object(d.init)(this,"background",(function(n){t.background=n,e._magnifierView.background=n}),!0),Object(d.init)(this,"magnifier",(function(t){return e._magnifierView.magnifier=t}),!0),Object(d.init)(this,"renderingOptions",(function(e){return t.renderingOptions=e}),!0),Object(d.init)(this,"highlightOptions",(function(){return t.highlightOptions=e.highlightOptions}),!0)],"map-view"),t.state=this.state,this._updateStageChildren();var o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach((function(t){return t(e)})),this.timeline.end("MapView Startup")}},{key:"_teardown",value:function(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,Dt(en(r.prototype),"_teardown",this).call(this)}},{key:"_updateStageChildren",value:function(){var e=this;this._stage.removeAllChildren(),this.rootLayerViews.forEach((function(t){e._stage.addChild(t.container)})),this._stage.addChild(this.graphicsView.container),this._stage.addChild(this._magnifierView)}}]),r}((ui=Object(M.a)(ln),ci=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._breakpointsHandles=new _.a,e.orientation=null,e.widthBreakpoint=null,e.heightBreakpoint=null,e.breakpoints=k,e}return Zt(n,[{key:"initialize",value:function(){this._breakpointsHandles.add(Object(d.init)(this,["breakpoints","size"],this._updateClassNames))}},{key:"destroy",value:function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)}},{key:"breakpoints",set:function(e){if(e!==this._get("breakpoints")){var t=function(e){return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}(e);if(!t){var n=JSON.stringify(k,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}e=t?e:k,this._set("breakpoints",Nt({},e))}}},{key:"_updateClassNames",value:function(){if(this.container){var e,t=j.a.acquire(),n=j.a.acquire(),r=!1;for(e in x){var i=this[e],a=x[e].getValue({viewSize:this.size,breakpoints:this.breakpoints});i!==a&&(r=!0,this[e]=a,S(e,i).forEach((function(e){return n.push(e)})),S(e,a).forEach((function(e){return t.push(e)})))}r&&(this._applyClassNameChanges(t,n),j.a.release(t),j.a.release(n))}}},{key:"_applyClassNameChanges",value:function(e,t){var n=this.container;n&&(t.forEach((function(e){return n.classList.remove(e)})),e.forEach((function(e){return n.classList.add(e)})))}},{key:"_removeActiveClassNames",value:function(){var e,t=this.container;if(t)for(e in x)S(e,this[e]).forEach((function(e){return t.classList.remove(e)}))}}]),n}(ui),Object(i.a)([Object(u.b)()],ci.prototype,"breakpoints",null),Object(i.a)([Object(u.b)()],ci.prototype,"orientation",void 0),Object(i.a)([Object(u.b)()],ci.prototype,"widthBreakpoint",void 0),Object(i.a)([Object(u.b)()],ci.prototype,"heightBreakpoint",void 0),ci=Object(i.a)([Object(c.a)("esri.views.BreakpointsOwner")],ci)));Object(i.a)([Object(u.b)({type:m})],li.prototype,"background",null),Object(i.a)([Object(u.b)()],li.prototype,"floors",void 0),Object(i.a)([Object(u.b)()],li.prototype,"graphicsView",void 0),Object(i.a)([Object(u.b)({type:or})],li.prototype,"highlightOptions",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],li.prototype,"inputManager",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],li.prototype,"textureManager",null),Object(i.a)([Object(u.b)({readOnly:!0})],li.prototype,"mapViewNavigation",void 0),Object(i.a)([Object(u.b)({type:Boolean})],li.prototype,"navigating",null),Object(i.a)([Object(u.b)({type:Boolean,constructOnly:!0})],li.prototype,"supersampleScreenhotsEnabled",void 0),Object(i.a)([Object(u.b)({type:ai})],li.prototype,"ui",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],li.prototype,"rendering",void 0),Object(i.a)([Object(u.b)({constructOnly:!0})],li.prototype,"renderCanvas",void 0),Object(i.a)([Object(u.b)({constructOnly:!0})],li.prototype,"deactivatedWebGLExtensions",void 0),Object(i.a)([Object(u.b)({constructOnly:!0})],li.prototype,"debugWebGLExtensions",void 0),li=Object(i.a)([Object(c.a)("esri.views.MapView")],li),t.default=li},piud:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("fXoL"),i=n("ofXK"),a=(n("W5Qm"),n("FhEM")),o=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({imports:[[i.c,a.a]]}),e}()},pqNC:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("EyXx")),a=n("6S2I"),o=(n("zqDF"),n("WbKI")),s=n("04ZG"),u=n("zlDU"),c=n("4EHJ"),l=(n("ju1D"),n("9AIY"),n("9MzC")),h=n("WZb1"),f=n("OvF4"),p=(n("4GrV"),n("zm0L")),d=n("pdg3"),v=n("Lqtk"),y=n("bV/r"),b=0,g=a.a.getLogger("esri.layers.Layer"),m=function(e){Kt(p,e);var t,r,o,s=Xt(p);function p(){var e;return Wt(this,p),(e=s.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new f.a(-180,-90,180,90,h.a.WGS84),e.id=Date.now().toString(16)+"-layer-"+b++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=h.a.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return Zt(p,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var n,r;Object(l.m)(t)||a.a.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!=(n=e.title)?n:"no title","', id: '").concat(null!=(r=e.id)?r:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?Object(c.J)(e):null}},{key:"fetchAttributionData",value:(o=Ut(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,Object(v.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new u.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],[{key:"fromArcGISServerUrl",value:(r=Ut(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"==typeof t?{url:t}:t,e.next=3,Promise.all([n.e(0),n.e(169)]).then(n.bind(null,"TPT3"));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromUrl(r);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),g.error("#fromArcGISServerUrl({ url: '"+r.url+"'})","Failed to create layer from arcgis server url",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return r.apply(this,arguments)})},{key:"fromPortalItem",value:(t=Ut(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="portalItem"in t?t:{portalItem:t},e.next=3,n.e(0).then(n.bind(null,"XJLX"));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromItem(r);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),o=r&&r.portalItem,g.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(o&&o.portal&&o.portal.url||i.a.portalUrl)+"', id: '"+(o&&o.id||"unset")+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return t.apply(this,arguments)})}]),p}(p.a.EventedMixin(Object(d.a)(y.a)));Object(r.a)([Object(o.b)({type:String})],m.prototype,"attributionDataUrl",void 0),Object(r.a)([Object(o.b)({type:f.a})],m.prototype,"fullExtent",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],m.prototype,"hasAttributionData",null),Object(r.a)([Object(o.b)({type:String})],m.prototype,"id",void 0),Object(r.a)([Object(o.b)({type:Boolean,nonNullable:!0})],m.prototype,"legendEnabled",void 0),Object(r.a)([Object(o.b)({type:["show","hide","hide-children"]})],m.prototype,"listMode",void 0),Object(r.a)([Object(o.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],m.prototype,"opacity",void 0),Object(r.a)([Object(o.b)()],m.prototype,"parent",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],m.prototype,"parsedUrl",null),Object(r.a)([Object(o.b)({type:Boolean})],m.prototype,"popupEnabled",void 0),Object(r.a)([Object(o.b)({type:Boolean})],m.prototype,"attributionVisible",void 0),Object(r.a)([Object(o.b)({type:h.a})],m.prototype,"spatialReference",void 0),Object(r.a)([Object(o.b)({type:String})],m.prototype,"title",void 0),Object(r.a)([Object(o.b)({type:String,readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0),Object(r.a)([Object(o.b)()],m.prototype,"url",void 0),Object(r.a)([Object(o.b)({type:Boolean,nonNullable:!0})],m.prototype,"visible",void 0),m=Object(r.a)([Object(s.a)("esri.layers.Layer")],m),t.a=m},psH3:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return p})),n("wSAH");var r=n("srIe"),i=n("21Ip"),a=n("DXYb"),o=n("Tcmu"),s=n("Ibpv"),u=n("gkbi"),c=o.a.fromJSON(u.a),l=i.a.fromJSON(u.c),h=a.a.fromJSON(u.b),f=s.a.fromJSON(u.d);function p(e){if(Object(r.j)(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return c;case"polyline":return l;case"polygon":case"extent":return h}return null}var d=o.a.fromJSON(u.e),v=i.a.fromJSON(u.g),y=a.a.fromJSON(u.f)},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},q2iW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("3/ME"),i={type:r.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:a}}}}};function a(e,t,n,i){if(!e)return null;var a=t.minScale,o=t.maxScale,s=t.minLOD,u=t.maxLOD;if(null!=s&&null!=u)return r.a.fromJSON(i&&i.ignoreMinMaxLOD?e:Nt(Nt({},e),{},{lods:e.lods.filter((function(e){var t=e.level;return null!=t&&t>=s&&t<=u}))}));if(0!==a&&0!==o){var c=function(e){return Math.round(1e4*e)/1e4},l=a?c(a):1/0,h=o?c(o):-1/0;return r.a.fromJSON(Nt(Nt({},e),{},{lods:e.lods.filter((function(e){var t=c(e.scale);return t<=l&&t>=h}))}))}return r.a.fromJSON(e)}},qFsG:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y}));var r=n("ihCf"),i=n("fXoL"),a=n("8LU1"),o=n("nLfN"),s=n("FKr1"),u=n("kmnG"),c=n("XNiG"),l=n("3Pt+"),h=new i.B("MAT_INPUT_VALUE_ACCESSOR"),f=["button","checkbox","file","hidden","image","radio","range","reset","submit"],p=0,d=Object(s.n)((function e(t,n,r,i){Wt(this,e),this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i})),v=function(){var e=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i,a,s,u,l,h,f,d){var v;Wt(this,n),(v=t.call(this,u,a,s,i))._elementRef=e,v._platform=r,v.ngControl=i,v._autofillMonitor=h,v._formField=d,v._uid="mat-input-"+p++,v.focused=!1,v.stateChanges=new c.a,v.controlType="mat-input",v.autofilled=!1,v._disabled=!1,v._required=!1,v._type="text",v._readonly=!1,v._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(e){return Object(o.e)().has(e)}));var y=v._elementRef.nativeElement,b=y.nodeName.toLowerCase();return v._inputValueAccessor=l||y,v._previousNativeValue=v.value,v.id=v.id,r.IOS&&f.runOutsideAngular((function(){e.nativeElement.addEventListener("keyup",(function(e){var t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))}))})),v._isServer=!v._platform.isBrowser,v._isNativeSelect="select"===b,v._isTextarea="textarea"===b,v._isNativeSelect&&(v.controlType=y.multiple?"mat-native-select-multiple":"mat-native-select"),v}return Zt(n,[{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=Object(a.b)(e),this.focused&&(this.focused=!1,this.stateChanges.next())}},{key:"id",get:function(){return this._id},set:function(e){this._id=e||this._uid}},{key:"required",get:function(){return this._required},set:function(e){this._required=Object(a.b)(e)}},{key:"type",get:function(){return this._type},set:function(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Object(o.e)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}},{key:"value",get:function(){return this._inputValueAccessor.value},set:function(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}},{key:"readonly",get:function(){return this._readonly},set:function(e){this._readonly=Object(a.b)(e)}},{key:"ngAfterViewInit",value:function(){var e=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe((function(t){e.autofilled=t.isAutofilled,e.stateChanges.next()}))}},{key:"ngOnChanges",value:function(){this.stateChanges.next()}},{key:"ngOnDestroy",value:function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}},{key:"focus",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_focusChanged",value:function(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}},{key:"_onInput",value:function(){}},{key:"_dirtyCheckPlaceholder",value:function(){var e,t,n=(null===(t=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===t?void 0:t.call(e))?null:this.placeholder;if(n!==this._previousPlaceholder){var r=this._elementRef.nativeElement;this._previousPlaceholder=n,n?r.setAttribute("placeholder",n):r.removeAttribute("placeholder")}}},{key:"_dirtyCheckNativeValue",value:function(){var e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}},{key:"_validateType",value:function(){f.indexOf(this._type)}},{key:"_isNeverEmpty",value:function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}},{key:"_isBadInput",value:function(){var e=this._elementRef.nativeElement.validity;return e&&e.badInput}},{key:"empty",get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}},{key:"shouldLabelFloat",get:function(){if(this._isNativeSelect){var e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}},{key:"setDescribedByIds",value:function(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}},{key:"onContainerClick",value:function(){this.focused||this.focus()}}]),n}(d);return e.\u0275fac=function(t){return new(t||e)(i.fc(i.r),i.fc(o.a),i.fc(l.i,10),i.fc(l.l,8),i.fc(l.e,8),i.fc(s.a),i.fc(h,10),i.fc(r.a),i.fc(i.M),i.fc(u.a,8))},e.\u0275dir=i.ac({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(e,t){1&e&&i.rc("focus",(function(){return t._focusChanged(!0)}))("blur",(function(){return t._focusChanged(!1)}))("input",(function(){return t._onInput()})),2&e&&(i.nc("disabled",t.disabled)("required",t.required),i.Ub("id",t.id)("data-placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-invalid",t.errorState&&!t.empty)("aria-required",t.required),i.Xb("mat-input-server",t._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[i.Sb([{provide:u.c,useExisting:e}]),i.Qb,i.Rb]}),e}(),y=function(){var e=function e(){Wt(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.dc({type:e}),e.\u0275inj=i.cc({providers:[s.a],imports:[[r.c,u.d,s.d],r.c,u.d]}),e}()},qNUd:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return g}));var r=n("EyXx"),i=n("srIe"),a=n("6S2I"),o=n("zlDU"),s=n("f4Nx"),u=n("l4ZG"),c=n("Ehki"),l=n("UhwK"),h=n("9w8m"),f=n("4EHJ"),p=n("qatw"),d=(n("4GrV"),n("Lqtk")),v=a.a.getLogger("esri.geometry.support.normalizeUtils");function y(e){return"polygon"===e[0].type}function b(e){return"polyline"===e[0].type}function g(e,t){if(!(e instanceof l.a||e instanceof c.a)){var n="straightLineDensify: the input geometry is neither polyline nor polygon";throw v.error(n),new o.a(n)}var r,i=[],a=Vt(Object(h.b)(e));try{for(a.s();!(r=a.n()).done;){var s=r.value,u=[];i.push(u),u.push([s[0][0],s[0][1]]);for(var f=0;f<s.length-1;f++){var p=s[f][0],d=s[f][1],y=s[f+1][0],b=s[f+1][1],g=Math.sqrt((y-p)*(y-p)+(b-d)*(b-d)),m=(b-d)/g,w=(y-p)/g,O=g/t;if(O>1){for(var j=1;j<=O-1;j++){var _=j*t;u.push([w*_+p,m*_+d])}var x=(g+Math.floor(O-1)*t)/2;u.push([w*x+p,m*x+d])}u.push([y,b])}}}catch(k){a.e(k)}finally{a.f()}return function(e){return"polygon"===e.type}(e)?new c.a({rings:i,spatialReference:e.spatialReference}):new l.a({paths:i,spatialReference:e.spatialReference})}function m(e,t,n){if(t){var r=g(e,1e6);e=Object(u.e)(r,!0)}return n&&(e=Object(h.e)(e,n)),e}function w(e,t,n){if(Array.isArray(e)){var r=e[0];if(r>t){var i=Object(h.d)(r,t);e[0]=r+i*(-2*t)}else if(r<n){var a=Object(h.d)(r,n);e[0]=r+a*(-2*n)}}else{var o=e.x;if(o>t){var s=Object(h.d)(o,t);e=e.clone().offset(s*(-2*t),0)}else if(o<n){var u=Object(h.d)(o,n);e=e.clone().offset(u*(-2*n),0)}}return e}function O(e,t,n){return j.apply(this,arguments)}function j(){return(j=Ut(regeneratorRuntime.mark((function e(t,n,a){var o,v,g,j,_,x,k,S,M,I,T,A,C,E,P,R,D,L,N,F,z,V,G,U,B,q,H,W,J,Z,K,Y,X,Q,$,ee,te,ne,re,ie;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",O([t],n));case 2:o=n?n.url:r.a.geometryServiceUrl,I=0,T=[],A=[],C=Vt(t);try{for(C.s();!(E=C.n()).done;)P=E.value,Object(i.j)(P)?A.push(P):(v||(v=P.spatialReference,g=Object(s.d)(v),j=v.isWebMercator,k=j?102100:4326,_=h.a[k].maxX,x=h.a[k].minX,S=h.a[k].plus180Line,M=h.a[k].minus180Line),g?"mesh"===P.type?A.push(P):"point"===P.type?A.push(w(P.clone(),_,x)):"multipoint"===P.type?((R=P.clone()).points=R.points.map((function(e){return w(e,_,x)})),A.push(R)):"extent"===P.type?(D=P.clone()._normalize(!1,!1,g),A.push(D.rings?new c.a(D):D)):P.extent?(L=P.extent,N=Object(h.d)(L.xmin,x)*(2*_),F=0===N?P.clone():Object(h.e)(P.clone(),N),L.offset(N,0),L.intersects(S)&&L.xmax!==_?(I=L.xmax>I?L.xmax:I,F=m(F,j),T.push(F),A.push("cut")):L.intersects(M)&&L.xmin!==x?(I=L.xmax*(2*_)>I?L.xmax*(2*_):I,F=m(F,j,360),T.push(F),A.push("cut")):A.push(F)):A.push(P.clone()):A.push(P))}catch(ae){C.e(ae)}finally{C.f()}for(z=Object(h.d)(I,_),V=-90,G=z,U=new l.a;z>0;)B=360*z-180,U.addPath([[B,V],[B,-1*V]]),V*=-1,z--;if(!(T.length>0&&G>0)){e.next=28;break}return e.t0=function(e,t){for(var n=-1,r=function(r){for(var i=t.cutIndexes[r],a=t.geometries[r],o=Object(h.b)(a),s=function(e){var t=o[e];t.some((function(n){if(n[0]<180)return!0;for(var r=0,i=0;i<t.length;i++){var o=t[i][0];r=o>r?o:r}r=Number(r.toFixed(9));for(var s=-360*Object(h.d)(r,180),u=0;u<t.length;u++){var c=a.getPoint(e,u);a.setPoint(e,u,c.clone().offset(s,0))}return!0}))},u=0;u<o.length;u++)s(u);if(i===n){if(y(e)){var c,l=Vt(Object(h.b)(a));try{for(l.s();!(c=l.n()).done;){var f=c.value;e[i]=e[i].addRing(f)}}catch(ae){l.e(ae)}finally{l.f()}}else if(b(e)){var p,d=Vt(Object(h.b)(a));try{for(d.s();!(p=d.n()).done;){var v=p.value;e[i]=e[i].addPath(v)}}catch(ae){d.e(ae)}finally{d.f()}}}else n=i,e[i]=a},i=0;i<t.cutIndexes.length;i++)r(i);return e},e.t1=T,e.next=15,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"==typeof t?Object(f.J)(t):t,o=n[0].spatialReference,s=Nt(Nt({},i),{},{query:Nt(Nt({},a.query),{},{f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:Object(p.c)(n[0]),geometries:n}),cutter:JSON.stringify(r)})}),e.next=5,Object(d.default)(a.path+"/cut",s);case 5:return u=e.sent,c=u.data,l=c.cutIndexes,h=c.geometries,v=void 0===h?[]:h,e.abrupt("return",{cutIndexes:l,geometries:v.map((function(e){var t=Object(p.a)(e);return t.spatialReference=o,t}))});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(o,T,U,a);case 15:for(e.t2=e.sent,q=(0,e.t0)(e.t1,e.t2),H=[],W=[],J=0;J<A.length;J++)"cut"!==(Z=A[J])?W.push(Z):(K=q.shift(),Y=t[J],Object(i.k)(Y)&&"polygon"===Y.type&&Y.rings&&Y.rings.length>1&&K.rings.length>=Y.rings.length?(H.push(K),W.push("simplify")):W.push(j?Object(u.b)(K):K));if(H.length){e.next=22;break}return e.abrupt("return",W);case 22:return e.next=24,function(){var e=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?Object(f.J)(t):t,a=n[0].spatialReference,o=Object(p.c)(n[0]),s=Nt(Nt({},r),{},{query:Nt(Nt({},i.query),{},{f:"json",sr:a.wkid?a.wkid:JSON.stringify(a),geometries:JSON.stringify((u=n,{geometryType:Object(p.c)(u[0]),geometries:u.map((function(e){return e.toJSON()}))}))})}),e.t0=function(e,t,n){var r=Object(p.b)(t);return e.map((function(e){var t=r.fromJSON(e);return t.spatialReference=n,t}))},e.next=4,Object(d.default)(i.path+"/simplify",s);case 4:return e.t1=e.sent.data,e.t2=o,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(o,H,a);case 24:for(X=e.sent,Q=[],$=0;$<W.length;$++)ee=W[$],Q.push("simplify"!==ee?ee:j?Object(u.b)(X.shift()):X.shift());return e.abrupt("return",Q);case 28:for(te=[],ne=0;ne<A.length;ne++)"cut"!==(re=A[ne])?te.push(re):(ie=T.shift(),te.push(!0===j?Object(u.b)(ie):ie));return e.abrupt("return",Promise.resolve(te));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){var n=Object(s.d)(t);if(n){var r=zt(n.valid,2),i=r[0],a=r[1],o=a-i;if(e<i)for(;e<i;)e+=o;if(e>a)for(;e>a;)e-=o}return e}},qPMW:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("Stxv"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),c=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).tooltip=null,r.value=null,r.x=null,r.y=null,r}return Zt(n,[{key:"clone",value:function(){return new r({tooltip:this.tooltip,value:this.value})}}]),n}(u.a);Object(i.a)([Object(a.b)()],c.prototype,"tooltip",void 0),Object(i.a)([Object(a.b)()],c.prototype,"value",void 0),Object(i.a)([Object(o.a)("value")],c.prototype,"x",void 0),Object(i.a)([Object(o.a)("tooltip")],c.prototype,"y",void 0),c=r=Object(i.a)([Object(s.a)("esri.popup.content.support.ChartMediaInfoValueSeries")],c),t.a=c},qRWG:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return o}));var r=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function i(e){return e?e/72*96:0}function a(e){return e?72*e/96:0}function o(e){if("string"==typeof e){if(r.test(e)){var t=e.match(r),n=Number(t[1]),i=t[3]&&t[3].toLowerCase(),o="-"===e.charAt(0),s="px"===i?a(n):n;return o?-s:s}return console.warn("screenUtils.toPt: input not recognized!"),null}return e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:e,y:t}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e,t]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e,t]}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[e,t,n]}function h(e){return e}function f(e){return e}function p(e){return e}function d(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}},qSf1:function(e,t,n){"use strict";var r=n("LoQE");function i(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}(i.prototype=new r).readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},qVey:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=(n("6S2I"),n("zqDF"),n("WbKI")),u=n("RI0u"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("lh0l")),f=n("XACZ"),p=n("o685"),d=n("l4eh"),v=n("ag7Y"),y=n("nvBr"),b=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).color=new y.a([0,0,0,1]),e.size=0,e}return Zt(n,[{key:"clone",value:function(){return new r({color:Object(a.a)(this.color),size:this.size})}}]),n}(v.a);Object(i.a)([Object(s.b)(f.a)],b.prototype,"color",void 0),Object(i.a)([Object(s.b)(f.b)],b.prototype,"size",void 0);var g,m=b=r=Object(i.a)([Object(c.a)("esri.symbols.support.Symbol3DHalo")],b),w=g=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._userSize=void 0,r.halo=null,r.material=null,r.text=void 0,r.type="text",r}return Zt(n,[{key:"font",get:function(){return this._get("font")||null},set:function(e){e&&this._userSize&&(e.size=this._userSize),this._set("font",e)}},{key:"writeFont",value:function(e,t,n,r){var i=Nt(Nt({},r),{},{textSymbol3D:!0});t.font=e.write({},i),delete t.font.size}},{key:"size",get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9},set:function(e){this._userSize=e,this.font&&(this.font.size=this._userSize),this.notifyChange("size")}},{key:"clone",value:function(){return new g({enabled:this.enabled,font:this.font&&Object(a.a)(this.font),halo:this.halo&&Object(a.a)(this.halo),material:Object(o.k)(this.material)?this.material.clone():null,size:this.size,text:this.text})}}],[{key:"fromTextSymbol",value:function(e){var t=function(e,t){return e&&t>0?{color:Object(a.a)(e),size:t}:null}(e.haloColor,e.haloSize),n=e.font?e.font.clone():new d.a;return new g({size:n.size,font:n,halo:t,material:e.color?{color:e.color.clone()}:null,text:e.text})}}]),n}(h.a);Object(i.a)([Object(s.b)({type:d.a,json:{write:!0}})],w.prototype,"font",null),Object(i.a)([Object(l.a)("font")],w.prototype,"writeFont",null),Object(i.a)([Object(s.b)({type:m,json:{write:!0}})],w.prototype,"halo",void 0),Object(i.a)([Object(s.b)({type:p.a,json:{write:!0}})],w.prototype,"material",void 0),Object(i.a)([Object(s.b)(f.b),Object(s.b)()],w.prototype,"size",null),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],w.prototype,"text",void 0),Object(i.a)([Object(u.a)({Text:"text"},{readOnly:!0})],w.prototype,"type",void 0),w=g=Object(i.a)([Object(c.a)("esri.symbols.TextSymbol3DLayer")],w),t.a=w},qYtE:function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return U})),n.d(t,"c",(function(){return q})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return G})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return A})),n.d(t,"i",(function(){return L})),n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return R})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return F})),n.d(t,"n",(function(){return V})),n.d(t,"o",(function(){return z})),n.d(t,"p",(function(){return X})),n.d(t,"q",(function(){return H})),n.d(t,"r",(function(){return W})),n.d(t,"s",(function(){return J})),n.d(t,"t",(function(){return Y})),n.d(t,"u",(function(){return K})),n.d(t,"v",(function(){return C})),n.d(t,"w",(function(){return ee}));var r=n("srIe"),i=n("f4Nx"),a=n("WZb1"),o=n("N2DF"),s=n("IlWj"),u=n("l4ZG"),c=n("SuVq"),l=n("OvF4"),h=n("LE9a"),f=n("QhKk"),p=n("y3LX"),d=n("gEht"),v=n("AvGH"),y=n("M0lq"),b=n("opr1"),g=n("9+ss"),m=180/Math.PI;function w(e,t,n,r){return r&&n&&!r.equals(n)&&Object(u.a)(r,n)&&r.isWebMercator?r.isWebMercator?function(e,t){var n=t[1];return n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999),n=Math.sin(Object(f.d)(n)),Object(y.r)(e,Object(f.d)(t[0])*s.a.radius,.5*s.a.radius*Math.log((1+n)/(1-n)))}(e,t):function(e,t,n){var r=Object(f.c)(t[0]/s.a.radius);return Object(y.r)(e,r-360*Math.floor((r+180)/360),Object(f.c)(.5*Math.PI-2*Math.atan(Math.exp(-1*t[1]/s.a.radius))))}(e,t):Object(y.c)(e,t)}function O(e){return e.wkid?e:e.spatialReference||a.a.WGS84}function j(e,t){return t.type?Object(y.r)(e,t.x,t.y):Object(y.c)(e,t)}function _(e){return Object(d.f)(e)}function x(e,t){return Math.max(e.width/t[0],e.height/t[1])*function(e){return Object(i.i)(e)?39.37*_(e)*96:1}(e.spatialReference)}function k(e,t,n,r){return S.apply(this,arguments)}function S(){return(S=Ut(regeneratorRuntime.mark((function e(t,n,i,a){var s,f,p,d,v,y,b,g,m,w,O,j,_,x,S,M,I,T,A,C,E,P,R,D,L,N,F,z,V;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(!Array.isArray(t)||t.length){e.next=4;break}return e.abrupt("return",null);case 4:if(h.a.isCollection(t)&&(t=t.toArray()),!Array.isArray(t)||!t.length||"object"!=typeof t[0]){e.next=39;break}if(p=t.every((function(e){return"attributes"in e})),d=t.some((function(e){return!e.geometry})),v=t,!(p&&d&&n&&n.allLayerViews)){e.next=20;break}y=new Map,b=Vt(t);try{for(b.s();!(g=b.n()).done;)m=g.value,w=m.layer,O=y.get(w)||[],null!=(j=m.attributes[w.objectIdField])&&O.push(j),y.set(w,O)}catch(G){b.e(G)}finally{b.f()}return _=[],y.forEach((function(e,t){var r=n.allLayerViews.find((function(e){return e.layer.id===t.id}));if("queryFeatures"in r){var i=t.createQuery();i.objectIds=e,i.returnGeometry=!0,_.push(r.queryFeatures(i))}})),e.next=15,Promise.all(_);case 15:x=e.sent,S=[],M=Vt(x);try{for(M.s();!(I=M.n()).done;)if((T=I.value)&&T.features&&T.features.length){A=Vt(T.features);try{for(A.s();!(C=A.n()).done;)E=C.value,Object(r.k)(E.geometry)&&S.push(E.geometry)}catch(G){A.e(G)}finally{A.f()}}}catch(G){M.e(G)}finally{M.f()}v=S;case 20:P=Vt(v),e.prev=21,P.s();case 23:if((R=P.n()).done){e.next=30;break}return D=R.value,e.next=27,k(D,n,i,a);case 27:a=e.sent;case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),P.e(e.t0);case 35:return e.prev=35,P.f(),e.finish(35);case 38:return e.abrupt("return",a);case 39:if(!Array.isArray(t)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1]){e.next=43;break}s=new c.a(t),e.next=61;break;case 43:if(!(t instanceof o.a)){e.next=47;break}s=t,e.next=61;break;case 47:if(!("geometry"in t)){e.next=61;break}if(!t.geometry){e.next=52;break}s=t.geometry,e.next=61;break;case 52:if(!t.layer){e.next=61;break}if(L=t.layer,!("queryFeatures"in(N=n.allLayerViews.find((function(e){return e.layer.id===L.id}))))){e.next=61;break}return(F=L.createQuery()).objectIds=[t.attributes[L.objectIdField]],F.returnGeometry=!0,e.next=59,N.queryFeatures(F);case 59:z=e.sent,s=Object(r.i)(z,"features",0,"geometry");case 61:if(!Object(r.j)(s)){e.next=63;break}return e.abrupt("return",null);case 63:if(f="point"===s.type?new l.a({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent){e.next=65;break}return e.abrupt("return",null);case 65:if(V=Object(u.a)(f,i),f.spatialReference.equals(i)||!V){e.next=70;break}f=Object(u.d)(f,i),e.next=72;break;case 70:if(V){e.next=72;break}return e.abrupt("return",null);case 72:return e.abrupt("return",a?a.union(f):f.clone());case 73:case"end":return e.stop()}}),e,null,[[21,32,35,38]])})))).apply(this,arguments)}function M(e,t){var n=e.targetGeometry,r=t.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function I(e,t,n){return n?Object(y.r)(e,.5*(t[0]-n.right+n.left),.5*(t[1]-n.bottom+n.top)):Object(y.a)(e,t,.5)}var T,A=(T=Object(v.a)(),function(e,t,n){var r=t.targetGeometry;j(T,r);var i=.5*R(t);return e.xmin=T[0]-i*n[0],e.ymin=T[1]-i*n[1],e.xmax=T[0]+i*n[0],e.ymax=T[1]+i*n[1],e.spatialReference=r.spatialReference,e});function C(e,t,n,r,i){return q(e,t,n.center),e.scale=x(n,r),i&&i.constraints&&i.constraints.constrain(e),e}var E=function(){var e=Object(v.a)();return function(t,n,r){return Object(y.b)(t,function(e,t){return Object(y.a)(e,t,.5)}(t,n),I(e,n,r))}}(),P=function(){var e=Object(g.b)(),t=Object(v.a)();return function(n,r,i,a){var o=R(r),s=D(r);return Object(y.r)(t,o,o),Object(b.c)(e,t),Object(b.f)(e,e,s),Object(b.h)(e,e,E(t,i,a)),Object(b.h)(e,e,[0,a.top-a.bottom]),Object(y.r)(n,e[4],e[5])}}();function R(e){return e.scale*(t=e.targetGeometry,Object(r.k)(t)&&Object(i.i)(t.spatialReference)?1/(39.37*_(t.spatialReference)*96):1);var t}function D(e){return Object(f.d)(e.rotation)||0}var L=function(){var e=Object(v.a)(),t=Object(v.a)(),n=Object(v.a)();return function(r,i,a,o,s,u){return Object(y.n)(e,i),Object(y.a)(t,a,.5*u),Object(y.r)(n,1/o*u,-1/o*u),Object(b.d)(r),Object(b.h)(r,r,t),s&&Object(b.f)(r,r,s),Object(b.g)(r,r,n),Object(b.h)(r,r,e),r}}(),N=function(){var e=Object(v.a)();return function(t,n,r,i){var a=R(n),o=D(n);return j(e,n.targetGeometry),L(t,e,r,a,o,i)}}(),F=function(){var e=Object(v.a)();return function(t,n,r,i){var a=R(n);return j(e,n.targetGeometry),L(t,e,r,a,0,i)}}();function z(e){if(e.isWrappable){var t=Object(i.d)(e);return t.valid[1]-t.valid[0]}return 0}function V(e,t){return Math.round(z(e)/t)}function G(e,t){return(n=Ut(regeneratorRuntime.mark((function e(t,n){var i,a,o,s,h,f,d,y,b,g,m,_,S,M,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",new p.a({targetGeometry:new c.a,scale:0,rotation:0}));case 2:if(i=n.spatialReference,a=n.constraints,o=n.padding,s=n.viewpoint,h=n.size,f=[o?h[0]-o.left-o.right:h[0],o?h[1]-o.top-o.bottom:h[1]],d=null,t instanceof p.a?d=t:t.viewpoint?d=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(d=t.target),y=null,!d||!d.targetGeometry){e.next=11;break}y=d.targetGeometry,e.next=35;break;case 11:if(!(t instanceof l.a)){e.next=15;break}y=t,e.next=35;break;case 15:if(e.t0=t||t&&("center"in t||"extent"in t||"target"in t),!e.t0){e.next=35;break}return e.next=19,k(t.center,n,i);case 19:if(e.t3=e.sent,e.t3){e.next=24;break}return e.next=23,k(t.extent,n,i);case 23:e.t3=e.sent;case 24:if(e.t2=e.t3,e.t2){e.next=29;break}return e.next=28,k(t.target,n,i);case 28:e.t2=e.sent;case 29:if(e.t1=e.t2,e.t1){e.next=34;break}return e.next=33,k(t,n,i);case 33:e.t1=e.sent;case 34:y=e.t1;case 35:if(!y&&s&&s.targetGeometry?y=s.targetGeometry:!y&&n.extent&&(y=n.extent),b=O(y),i||(i=O(n.spatialReference||n.extent||y)),Object(u.a)(y,i)||!b||b.equals(i)){e.next=39;break}return e.abrupt("return",null);case 39:return g=j(Object(v.a)(),y.center?y.center:y),m=new c.a(w(g,g,b,i),i),_=null,_=d&&Object(r.k)(d.targetGeometry)&&"point"===d.targetGeometry.type?d.scale:t.hasOwnProperty("scale")&&t.scale?t.scale:t.hasOwnProperty("zoom")&&-1!==t.zoom&&a&&a.effectiveLODs?a.zoomToScale(t.zoom):Array.isArray(y)||"point"===y.type||"extent"===y.type&&0===y.width&&0===y.height?n.extent&&Object(u.a)(n.extent,i)?x(Object(u.d)(n.extent,i),f):n.extent?x(n.extent,f):s.scale:Object(u.a)(y.extent,i)?x(Object(u.d)(y.extent,i),f):x(y.extent,f),(S=function(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){var t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((function(e){return"layer"in e}))){var n,r=0,i=0,a=Vt(e);try{for(a.s();!(n=a.n()).done;){var o=n.value.layer;o&&o.minScale&&o.maxScale&&(r=o.minScale<r?o.minScale:r,i=o.maxScale>i?o.maxScale:i)}}catch(s){a.e(s)}finally{a.f()}return r&&i?{min:r,max:i}:null}}}(t))&&(S.min&&S.min>_?_=S.min:S.max&&S.max<_&&(_=S.max)),M=0,d?M=d.rotation:t.hasOwnProperty("rotation")?M=t.rotation:s&&(M=s.rotation),I=new p.a({targetGeometry:m,scale:_,rotation:M}),e.abrupt("return",(a&&(I=a.fit(I),a.constrainByGeometry(I),a.rotationEnabled||(I.rotation=M)),I));case 48:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})(e,t);var n}var U=function(){var e=Object(v.a)(),t=Object(v.a)(),n=[0,0,0];return function(r,i,a){Object(y.d)(e,r,i),Object(y.e)(e,e),Object(y.d)(t,r,a),Object(y.e)(t,t),Object(y.f)(n,e,t);var o=Math.acos(Object(y.g)(e,t)/(Object(y.l)(e)*Object(y.l)(t)))*m;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),B=function(){var e=Object(v.a)();return function(t,n,r,i){var a=t.targetGeometry;return M(t,n),P(e,n,r,i),a.x+=e[0],a.y+=e[1],t}}(),q=(Object(v.a)(),function(){var e=Object(v.a)();return function(t,n,r){M(t,n);var i=t.targetGeometry,a=O(r),o=O(i);return j(e,r),w(e,e,a,o),i.x=e[0],i.y=e[1],t}}()),H=function(){var e=Object(v.a)();return function(t,n,r,i,a){a||(a="center"),Object(y.b)(e,r,i),Object(y.a)(e,e,.5);var o=e[0],s=e[1];switch(a){case"center":Object(y.r)(e,0,0);break;case"left":Object(y.r)(e,-o,0);break;case"top":Object(y.r)(e,0,s);break;case"right":Object(y.r)(e,o,0);break;case"bottom":Object(y.r)(e,0,-s);break;case"top-left":Object(y.r)(e,-o,s);break;case"bottom-left":Object(y.r)(e,-o,-s);break;case"top-right":Object(y.r)(e,o,s);break;case"bottom-right":Object(y.r)(e,o,-s)}return ee(t,n,e),t}}();function W(e,t,n){return M(e,t),e.rotation+=n,e}function J(e,t,n){return M(e,t),e.rotation=n,e}var Z=function(){var e=Object(v.a)();return function(t,n,r,i,a){return M(t,n),isNaN(r)||0===r||(Q(e,i,n,a),t.scale=n.scale*r,$(e,e,t,a),ee(t,t,Object(y.r)(e,e[0]-i[0],i[1]-e[1]))),t}}();function K(e,t,n){return M(e,t),e.scale=n,e}var Y=function(){var e=Object(v.a)();return function(t,n,r,i,a,o){return M(t,n),isNaN(r)||0===r||(Q(e,a,n,o),t.scale=n.scale*r,t.rotation+=i,$(e,e,t,o),ee(t,t,Object(y.r)(e,e[0]-a[0],a[1]-e[1]))),t}}(),X=function(){var e=Object(v.a)(),t=Object(v.a)();return function(n,r,i,a,o,s,u){return E(t,s,u),Object(y.h)(e,o,t),a?Y(n,r,i,a,e,s):Z(n,r,i,e,s)}}(),Q=function(){var e=Object(g.b)();return function(t,n,r,i){return Object(y.s)(t,n,function(e,t,n,r){return N(e,t,n,1),Object(b.a)(e,e)}(e,r,i))}}(),$=function(){var e=Object(g.b)();return function(t,n,r,i){return Object(y.s)(t,n,N(e,r,i,1))}}(),ee=function(){var e=Object(v.a)(),t=Object(g.b)();return function(n,r,i){M(n,r);var a=R(r),o=n.targetGeometry;return Object(b.b)(t,D(r)),Object(b.g)(t,t,Object(v.e)(a,a)),Object(y.s)(e,i,t),o.x+=e[0],o.y+=e[1],n}}()},qZfn:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n("OKTS"),i=n("OIYi"),a=n("aQrP"),o=n("Kq27"),s=n("nndT"),u=Object(r.d)(6);function c(e){var t=new a.a;return t.extensions.add("GL_OES_standard_derivatives"),t.include(o.a),t.include(s.a,e),t.fragment.uniforms.add("angleCutoff","vec2"),t.fragment.uniforms.add("globalAlpha","float"),e.heightManifoldEnabled&&t.fragment.uniforms.add("heightPlane","vec4"),e.pointDistanceEnabled&&t.fragment.uniforms.add("pointDistanceSphere","vec4"),e.lineVerticalPlaneEnabled&&t.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3"),(e.heightManifoldEnabled||e.pointDistanceEnabled||e.lineVerticalPlaneEnabled)&&t.fragment.uniforms.add("maxPixelDistance","float"),e.intersectsLineEnabled&&t.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float"),(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)&&t.fragment.code.add(i.a(ht||(ht=Rt(["\n      float planeDistancePixels(vec4 plane, vec3 pos) {\n        float dist = dot(plane.xyz, pos) + plane.w;\n        float width = fwidth(dist);\n        dist /= min(width, maxPixelDistance);\n        return abs(dist);\n      }"])))),e.pointDistanceEnabled&&t.fragment.code.add(i.a(ft||(ft=Rt(["\n    float sphereDistancePixels(vec4 sphere, vec3 pos) {\n      float dist = distance(sphere.xyz, pos) - sphere.w;\n      float width = fwidth(dist);\n      dist /= min(width, maxPixelDistance);\n      return abs(dist);\n    }\n    "])))),e.intersectsLineEnabled&&t.fragment.code.add(i.a(pt||(pt=Rt(["\n    float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\n      float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\n      return abs(dist) - radius;\n    }\n    "])))),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.fragment.code.add(i.a(dt||(dt=Rt(["\n    bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\n      vec3 dir = end - start;\n      float t2 = dot(dir, pos - start);\n      float l2 = dot(dir, dir);\n      return t2 >= 0.0 && t2 <= l2;\n    }\n    "])))),t.fragment.code.add(i.a(vt||(vt=Rt(["\n  void main() {\n    vec3 pos;\n    vec3 normal;\n    float depthDiscontinuityAlpha;\n\n    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\n      discard;\n    }\n\n    vec4 color = vec4(0, 0, 0, 0);\n  "])))),e.heightManifoldEnabled&&t.fragment.code.add(i.a(yt||(yt=Rt(["\n    {\n      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));\n      vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));\n      color = max(color, heightManifoldColor * heightManifoldAlpha);\n    }\n    "])))),e.pointDistanceEnabled&&t.fragment.code.add(i.a(bt||(bt=Rt(["\n    {\n      // distance to sphere\n      float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\n      vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\n      float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\n\n      color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);\n    }\n    "])))),e.lineVerticalPlaneEnabled&&t.fragment.code.add(i.a(gt||(gt=Rt(["\n    {\n      if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\n        float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\n\n        vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\n        float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\n\n        color = max(color, lineVerticalColor * lineVerticalAlpha);\n      }\n    }\n    "])))),e.intersectsLineEnabled&&t.fragment.code.add(i.a(mt||(mt=Rt(["\n    {\n      if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\n        float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\n        vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\n        float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\n\n        color = max(color, intersectsLineColor * intersectsLineAlpha);\n      }\n    }\n    "])))),t.fragment.code.add(i.a(wt||(wt=Rt(["\n    gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);\n  }\n  "])))),t}var l=Object.freeze({__proto__:null,defaultAngleCutoff:u,build:c})},qatw:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f}));var r=n("N2DF"),i=n("SuVq"),a=n("OvF4"),o=n("V9wi"),s=n("Ehki"),u=n("UhwK");function c(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function l(e){return void 0!==e.points}function h(e){return void 0!==e.x&&void 0!==e.y}function f(e){return void 0!==e.paths}function p(e){return void 0!==e.rings}function d(e){return e?e instanceof r.a?e:h(e)?i.a.fromJSON(e):f(e)?u.a.fromJSON(e):p(e)?s.a.fromJSON(e):l(e)?o.a.fromJSON(e):c(e)?a.a.fromJSON(e):null:null}function v(e){return e?h(e)?"esriGeometryPoint":f(e)?"esriGeometryPolyline":p(e)?"esriGeometryPolygon":c(e)?"esriGeometryEnvelope":l(e)?"esriGeometryMultipoint":null:null}var y={esriGeometryPoint:i.a,esriGeometryPolyline:u.a,esriGeometryPolygon:s.a,esriGeometryEnvelope:a.a,esriGeometryMultipoint:o.a};function b(e){return e&&y[e]||null}},"r+FG":function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function a(e,t){return new Float64Array(e,t,16)}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a}));var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,v){return[e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,v]},createView:a,IDENTITY:o})},r0DZ:function(e,t,n){"use strict";var r=n("pO5D"),i=n("srIe"),a=n("WbKI"),o=n("04ZG"),s=n("/CmD"),u=n("LE9a"),c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e))._groups=new Map,r}return Zt(n,[{key:"destroy",value:function(){this.removeAll()}},{key:"size",get:function(){var e=0;return this._groups.forEach((function(t){e+=t.length})),e}},{key:"add",value:function(e,t){var n=this;if(!this._isHandle(e)&&!Array.isArray(e)&&!u.a.isCollection(e))return this;var r=this._getOrCreateGroup(t);return Array.isArray(e)||u.a.isCollection(e)?e.forEach((function(e){return n._isHandle(e)&&r.push(e)})):r.push(e),this.notifyChange("size"),this}},{key:"forEach",value:function(e,t){if("function"==typeof e)this._groups.forEach((function(t){return t.forEach(e)}));else{var n=this._getGroup(e);n&&t&&n.forEach(t)}}},{key:"has",value:function(e){return this._groups.has(this._ensureGroupKey(e))}},{key:"remove",value:function(e){if(Array.isArray(e)||u.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var t=this._getGroup(e),n=0;n<t.length;n++)t[n].remove();return this._deleteGroup(e),this.notifyChange("size"),this}},{key:"removeAll",value:function(){return this._groups.forEach((function(e){for(var t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}},{key:"_isHandle",value:function(e){return e&&!!e.remove}},{key:"_getOrCreateGroup",value:function(e){if(this.has(e))return this._getGroup(e);var t=[];return this._groups.set(this._ensureGroupKey(e),t),t}},{key:"_getGroup",value:function(e){return Object(i.d)(this._groups.get(this._ensureGroupKey(e)))}},{key:"_deleteGroup",value:function(e){return this._groups.delete(this._ensureGroupKey(e))}},{key:"_ensureGroupKey",value:function(e){return e||"_default_"}}]),n}(s.a);Object(r.a)([Object(a.b)({readOnly:!0})],c.prototype,"size",null),c=Object(r.a)([Object(o.a)("esri.core.Handles")],c),t.a=c},r88o:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("nR38"),i=n("WbKI");function a(e,t,n){var a,o;return void 0===t||Array.isArray(t)?(o=e,n=t,a=[void 0]):(o=t,a=Array.isArray(e)?e:[e]),function(e,t){var s=e.constructor.prototype;a.forEach((function(a){var u=Object(i.c)(e,a,o);u.read&&"object"!=typeof u.read&&(u.read={}),Object(r.c)("read.reader",s[t],u),n&&(u.read.source=(u.read.source||[]).concat(n))}))}}},rI4C:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f}));var r=n("wSAH"),i=n("srIe"),a=n("nvBr"),o=(n("qRWG"),n("o685")),s=n("H9eC"),u=n("eSsm"),c=n("Cy1f");n("zdBc");var l=/\/resource\/(.*?)\.svg$/,h=new a.a("white");function f(e){if(!e||!e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((function(e){return"object"===e.type}));case"line-3d":return e.symbolLayers.some((function(e){return"path"===e.type}));case"polygon-3d":return e.symbolLayers.some((function(e){return"object"===e.type||"extrude"===e.type}));default:return!1}}function p(e,t){var n=t.resource.href;return!Object(r.a)("esri-canvas-svg-support")&&e.styleOrigin&&l.test(n)?n.replace(l,"/resource/png/$1.png"):n}function d(e,t){if(!e)return null;var n=null;return Object(s.e)(e)?n=function(e){var t=e.symbolLayers;if(!t)return null;var n=null;return t.forEach((function(e){"object"===e.type&&null!=e.resource.href||(n="water"===e.type?Object(i.q)(e.color):Object(i.k)(e.material)?Object(i.q)(e.material.color):null)})),n?new a.a(n):null}(e):Object(s.d)(e)&&(n=e.color?new a.a(e.color):null),n?v(n,t):null}function v(e,t){if(null==t)return e;var n=e.toRgba();return n[3]=n[3]*t,new a.a(n)}function y(e,t,n){e&&(t||null!=n)&&(t&&(t=new a.a(t)),Object(s.e)(e)?function(e,t,n){var r=e.symbolLayers;if(r){var a=function(e){var r=Object(i.k)(e)?e:null;return v(t=t||r||null!=n&&h,n)};r.forEach((function(e){if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=a(e.color);else{var r=Object(i.k)(e.material)?e.material.color:null,s=a(r);Object(i.j)(e.material)?e.material=new o.a({color:s}):e.material.color=s,null!=n&&"outline"in e&&Object(i.k)(e.outline)&&Object(i.k)(e.outline.color)&&(e.outline.color=v(e.outline.color,n))}}))}}(e,t,n):Object(s.d)(e)&&function(e,t,n){(t=t||e.color)&&(e.color=v(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=v(e.outline.color,n))}(e,t,n))}function b(e){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("number"==typeof r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function g(e,t,n){for(var r=0;r<3;r++){var i=e[r];switch(i){case"symbol-value":return null!=n[r]?n[r]/t[r]:1;case"proportional":break;default:if(i&&t[r])return i/t[r]}}return 1}function m(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}function w(e,t){return O.apply(this,arguments)}function O(){return(O=Ut(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!r){e.next=2;break}return e.abrupt("return",Object(s.e)(t)?function(){var e=Ut(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.symbolLayers,e.t0=a,!e.t0){e.next=5;break}return e.next=5,Object(u.a)(a,function(){var e=Ut(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Ut(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="extrude"===e.t0?3:"icon"===e.t0||"line"===e.t0||"text"===e.t0?5:"path"===e.t0?7:"object"===e.t0?9:11;break;case 3:return function(e,t){e.size="number"==typeof t[2]?t[2]:0}(t,r),e.abrupt("break",11);case 5:return function(e,t){var n=b(t);Object(i.k)(n)&&(e.size=n)}(t,r),e.abrupt("break",11);case 7:return function(e,t){var n=g(t,c.a,[e.width,void 0,e.height]);e.width=m(t[0],e.width,1,n),e.height=m(t[2],e.height,1,n)}(t,r),e.abrupt("break",11);case 9:return e.next=11,function(){var e=Ut(regeneratorRuntime.mark((function e(t,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Ut(regeneratorRuntime.mark((function e(t){var r,i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(171).then(n.bind(null,"AF15"));case 2:return r=e.sent,e.next=5,r.computeObjectLayerResourceSize(t,10);case 5:i=e.sent,a=t.width,o=t.height,s=t.depth,u=[a,s,o],c=1,l=0;case 12:if(!(l<3)){e.next=19;break}if(null==u[l]){e.next=16;break}return c=u[l]/i[l],e.abrupt("break",19);case 16:l++,e.next=12;break;case 19:for(h=0;h<3;h++)null==u[h]&&(u[h]=i[h]*c);return e.abrupt("return",{resourceSize:i,symbolSize:u});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:i=e.sent,a=i.resourceSize,o=i.symbolSize,s=g(r,a,o),t.width=m(r[0],o[0],a[0],s),t.depth=m(r[1],o[1],a[1],s),t.height=m(r[2],o[2],a[2],s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,r):void(Object(s.d)(t)&&function(e,t){var n=b(t);if(!Object(i.j)(n))switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":var r=e.width/e.height;r>1?(e.width=n,e.height=n*r):(e.width=n*r,e.height=n);break;case"simple-line":e.width=n;break;case"text":e.font.size=n}}(t,r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n){if(e&&null!=t)if(Object(s.e)(e)){var r=e.symbolLayers;r&&r.forEach((function(e){if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else Object(s.d)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}},rJHQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("zqDF"),i=n("qatw"),a=n("Lqtk"),o=n("ACSY"),s=n("u3Ia"),u=n("pXG8"),c=Object(r.m)(o.a);function l(e,t,n){return h.apply(this,arguments)}function h(){return(h=Ut(regeneratorRuntime.mark((function e(t,n,r){var o,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c(n),o=Object(s.c)(t),l=Nt(Nt({},o.query),{},{f:"json"},n.toJSON()),h=n.outSpatialReference,f=Object(i.c)(n.geometries[0]),p=Object(s.a)(l,r),e.abrupt("return",Object(a.default)(o.path+"/project",p).then((function(e){var t=e.data.geometries;return Object(u.a)(t,f,h)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},rOQw:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("f/qv")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("+opI"),s=n("04ZG"),u=n("Cduq"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=new o.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).name=null,r.description=null,r.drawingTool=null,r.prototype=null,r.thumbnail=null,r}return Zt(n,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=l.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(i.c)(Object(i.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(i.c)(Object(i.a)(e))}}]),n}(c.a);Object(r.a)([Object(a.b)({json:{write:!0}})],h.prototype,"name",void 0),Object(r.a)([Object(a.b)({json:{write:!0}})],h.prototype,"description",void 0),Object(r.a)([Object(a.b)({json:{read:l.read,write:l.write}})],h.prototype,"drawingTool",void 0),Object(r.a)([Object(u.a)("drawingTool")],h.prototype,"writeDrawingTool",null),Object(r.a)([Object(a.b)({json:{write:!0}})],h.prototype,"prototype",void 0),Object(r.a)([Object(u.a)("prototype")],h.prototype,"writePrototype",null),Object(r.a)([Object(a.b)({json:{write:!0}})],h.prototype,"thumbnail",void 0),Object(r.a)([Object(u.a)("thumbnail")],h.prototype,"writeThumbnail",null),h=Object(r.a)([Object(s.a)("esri.layers.support.FeatureTemplate")],h),t.a=h},rgtN:function(e,t,n){"use strict";t.a=function(){function e(t){Wt(this,e),this._array=[],t<=0&&console.error("strideInBytes must be positive!"),this._stride=t}return Zt(e,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}},{key:"reset",value:function(){this.array.length=0}},{key:"toBuffer",value:function(){return new Uint32Array(this._array).buffer}}],[{key:"i1616to32",value:function(e,t){return 65535&e|t<<16}},{key:"i8888to32",value:function(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}},{key:"i8816to32",value:function(e,t,n){return 255&e|(255&t)<<8|n<<16}}]),e}()},rhQU:function(e,t,n){n("5VIg");var r=n("3gcQ"),i=n("cYFG");e.exports=function(e,t){var n=t||i.multi(e),a=32*n.length+1,o=i.bytesPer(n),s=new ArrayBuffer(a+32+o*e.length+1),u=new Date,c=new DataView(s);return c.setUint8(0,3),c.setUint8(1,u.getFullYear()-1900),c.setUint8(2,u.getMonth()),c.setUint8(3,u.getDate()),c.setUint32(4,e.length,!0),c.setUint16(8,a+32,!0),c.setUint16(10,o,!0),c.setInt8(32+a-1,13),n.forEach((function(e,t){e.name.split("").slice(0,8).forEach((function(e,n){c.setInt8(32+32*t+n,e.charCodeAt(0))})),c.setInt8(32+32*t+11,e.type.charCodeAt(0)),c.setInt8(32+32*t+16,e.size),"N"==e.type&&c.setInt8(32+32*t+17,3)})),offset=a+32,e.forEach((function(e,t){c.setUint8(offset,32),offset++,n.forEach((function(t){var n=e[t.name];switch(null==n&&(n=""),t.type){case"L":c.setUint8(offset,n?84:70),offset++;break;case"D":offset=r.writeField(c,8,r.lpad(n.toString(),8," "),offset);break;case"N":offset=r.writeField(c,t.size,r.lpad(n.toString(),t.size," ").substr(0,18),offset);break;case"C":offset=r.writeField(c,t.size,r.rpad(n.toString(),t.size," "),offset);break;default:throw new Error("Unknown field type")}}))})),c.setUint8(offset,26),c}},rlSK:function(e,t,n){"use strict";var r=n("7Nfj"),i=function(){function e(t,n,r,i){Wt(this,e),this.set(t,n,r,i)}return Zt(e,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(e){this.set(e)}},{key:"acquire",value:function(e,t,n,r){this.set(e,t,n,r)}},{key:"contains",value:function(e){var t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}},{key:"equals",value:function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}},{key:"clone",value:function(){return new e(this)}},{key:"release",value:function(){this.level=0,this.row=0,this.col=0,this.world=0}},{key:"set",value:function(e,t,n,r){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var i=zt(e.split("/"),4),a=i[0],o=i[1],s=i[2],u=i[3];this.level=parseFloat(a),this.row=parseFloat(o),this.col=parseFloat(s),this.world=parseFloat(u)}else this.level=+e,this.row=+t,this.col=+n,this.world=+r||0;return this}},{key:"toString",value:function(){return"".concat(this.level,"/").concat(this.row,"/").concat(this.col,"/").concat(this.world)}},{key:"getParentKey",value:function(){return this.level<=0?null:new e(this.level-1,this.row>>1,this.col>>1,this.world)}},{key:"getChildKeys",value:function(){var t=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new e(t,n,r,i),new e(t,n,r+1,i),new e(t,n+1,r,i),new e(t,n+1,r+1,i)]}},{key:"compareRowMajor",value:function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}],[{key:"getId",value:function(e,t,n,r){return"object"==typeof e?"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.world):"".concat(e,"/").concat(t,"/").concat(n,"/").concat(r)}}]),e}();i.pool=new r.a(i,null,null,25,50),t.a=i},rrxl:function(e,t,n){var r=n("wsls").jstypes;function i(e){var t={},n=[];for(var i in e)t[i]=typeof e[i];for(var a in t)n.push({name:a,type:r[t[a]]});return n}e.exports.geojson=function(e){var t={};return e.forEach((function(e){!function(e,t){for(var n in t)e[n]=t[n]}(t,e.properties)})),i(t)},e.exports.obj=i},rvq7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("ikTR"),i=function(){function e(t,n,r){Wt(this,e),this._namespace=t,this._storage=n,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}return Zt(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,n,r)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;Wt(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.a,this._users=new r.a}return Zt(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,n,r){var i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemoved(e,i.entry)),n>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(r,-3)- -3;this._db.set(e,{entry:t,size:n,lifetime:a,lives:a}),this._size+=n,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,n){var r=this._db.get(e);if(r&&r.entry===t){if(this._size-=r.size,n>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);r.size=n,this._size+=n,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},r=new Array;this._db.forEach((function(t,i){var a=t.lifetime;r[a]=(r[a]||0)+t.size,e._users.forAll((function(e){var r=e.namespace;i.startsWith(r)&&(n[r]=(n[r]||0)+t.size)}))}));var i={};this._users.forAll((function(e){var t=e.namespace;!isNaN(e.hitRate)&&e.hitRate>0?(n[t]=n[t]||0,i[t]=Math.round(100*e.hitRate)+"%"):i[t]="0%"}));var a=Object.keys(n);a.forEach((function(t){return n[t]=n[t]/e._size*100})),a.sort((function(e,t){return n[t]-n[e]})),a.forEach((function(e){return t[e]=Math.round(n[e])+"% / "+i[e]}));for(var o=r.length-1;o>=0;--o){var s=r[o];s&&(t["Priority "+(o+-3-1)]=Math.round(s/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(n,r){r.startsWith(e)&&(t._size-=n.size,t._db.delete(r),t._notifyRemoved(r,n.entry))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,n){return e._notifyRemoved(n,t.entry)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemoved",value:function(e,t){this._removeFuncs.forAll((function(n){e.startsWith(n[0])&&n[1](t)}))}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=Vt(this._db);try{for(t.s();!(e=t.n()).done;){var n=zt(e.value,2),r=n[0],i=n[1];if(this._db.delete(r),i.lives<=1?(this._size-=i.size,this._notifyRemoved(r,i.entry)):(--i.lives,this._db.set(r,i)),this._size<=.9*this.maxSize)return}}catch(a){t.e(a)}finally{t.f()}}}}]),e}()},s7YA:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c}));var r=n("nR38"),i=/\{([^\}]+)\}/g;function a(e){return null==e?"":e}function o(e,t){return e.replace(i,"object"==typeof t?function(e,n){return a(Object(r.b)(n,t))}:function(e,n){return a(t(n))})}function s(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(function(e){return t&&-1!==t.indexOf(e)?e:"\\"+e}))}function u(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function c(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},sF98:function(e,t,n){var r=n("O/nn");function i(e,t,n,r,i){var a=i(e.slice(t,t+n));switch(r){case"N":case"F":case"O":return parseFloat(a,10);case"D":return new Date(a.slice(0,4),parseInt(a.slice(4,6),10)-1,a.slice(6,8));case"L":return"y"===a.toLowerCase()||"t"===a.toLowerCase();default:return a}}function a(e,t,n,r){for(var a,o,s={},u=0,c=n.length;u<c;)a=i(e,t,(o=n[u]).len,o.dataType,r),t+=o.len,void 0!==a&&(s[o.name]=a),u++;return s}e.exports=function(e,t){for(var n=r(t),i=function(e){var t={};return t.lastUpdated=new Date(e.readUInt8(1)+1900,e.readUInt8(2),e.readUInt8(3)),t.records=e.readUInt32LE(4),t.headerLen=e.readUInt16LE(8),t.recLen=e.readUInt16LE(10),t}(e),o=function(e,t,n){for(var r=[],i=32;i<t&&(r.push({name:n(e.slice(i,i+11)),dataType:String.fromCharCode(e.readUInt8(i+11)),len:e.readUInt8(i+16),decimal:e.readUInt8(i+17)}),13!==e.readUInt8(i+32));)i+=32;return r}(e,i.headerLen-1,n),s=2+(o.length+1<<5),u=i.recLen,c=i.records,l=[];c;)l.push(a(e,s,o,n)),s+=u,c--;return l}},sI4m:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("+opI"),i=Object(r.b)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},sONG:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("4EHJ"),i=n("/PL2");function a(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!Object(r.s)(e)&&t.layer.parsedUrl?Object(r.y)(t.layer.parsedUrl.path,"images",e):Object(i.a)(e,t)}var o={json:{read:{source:["imageData","url"],reader:function(e,t,n){return t.imageData?Object(r.A)({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):a(t.url,n)}},write:{writer:function(e,t,n,a){!function(e,t,n,a){if(Object(r.u)(e)){var o=Object(r.i)(e);t.contentType=o.mediaType,t.imageData=o.data,n&&n.imageData===t.imageData&&n.url&&Object(i.f)(n.url,t,"url",a)}else Object(i.f)(e,t,"url",a)}(e,t,this.source,a)}}}},s={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,t,n){var r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=a(t.url,n)),r}}}}},sTkM:function(e,t,n){"use strict";function r(){return[0,0,0,1]}function i(e,t){return new Float64Array(e,t,4)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:function(e,t,n,r){return[e,t,n,r]},createView:i,IDENTITY:[0,0,0,1]})},"sq/B":function(e,t,n){"use strict";var r,i=n("zBXm");t.a=function(){return r||(r=function(){var e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return e;var t=document.createElement("canvas");if(!t)return e;var n=Object(i.a)(t,{failIfMajorPerformanceCaveat:!0},"webgl");if(n||(n=Object(i.a)(t,{},"webgl"))&&(e.majorPerformanceCaveat=!0),!n)return e;var r=n.getParameter(n.VERSION);if(!r)return e;var a=r.match(/^WebGL\s+([\d.]*)/);if(a){var o=parseFloat(a[1]);e.available=o>=.94;var s=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);s&&(e.supportsHighPrecisionFragment=s.precision>0),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=null!==n.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==n.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==n.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==n.getExtension("OES_texture_float"),e.supportsColorBufferFloat=null!==n.getExtension("WEBGL_color_buffer_float")&&null!==n.getExtension("EXT_float_blend")}return e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;var e=document.createElement("canvas");return!!e&&!!Object(i.a)(e,{},"webgl2")}()?2:1,e}()),r}},srIe:function(e,t,n){"use strict";function r(e){return null!=e}function i(e){return null==e}function a(e){return void 0===e}function o(e,t){return r(e)?t(e):null}function s(e){return e}function u(e,t){if(i(e))throw new Error(t);return e}function c(e,t){return r(e)?e:"function"==typeof t?t():t}function l(e){return r(e)&&e.destroy(),null}function h(e){return r(e)&&e.dispose(),null}function f(e){return r(e)&&e.remove(),null}function p(e){return r(e)&&e.abort(),null}function d(e){return null}function v(e,t){var n,r=new Array,i=Vt(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(b(a,null,t))}}catch(o){i.e(o)}finally{i.f()}return r}function y(e,t){var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){b(n.value,null,t)}}catch(i){r.e(i)}finally{r.f()}}function b(e,t,n){return r(e)?n(e):t}function g(e,t){return r(e)?t(e):null}function m(e){return e.filter((function(e){return r(e)}))}function w(e){for(var t=e,n=0,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(;n<i.length&&t;)t=t[i[n++]];return t}function O(e){return e}n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return i})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return s})),n.d(t,"r",(function(){return c})),n.d(t,"s",(function(){return u}))},ss0y:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("EyXx"),i=n("6S2I"),a=n("zlDU"),o=n("4EHJ");n("Lqtk");var s=i.a.getLogger("esri.assets");function u(e){if(!r.a.assetsPath)throw s.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.a("assets:path-not-set","config.assetsPath is not set");return Object(o.y)(r.a.assetsPath,e)}},svfg:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=new Float32Array(1);function i(e){return a(Math.max(-o,Math.min(e,o)))}function a(e){return r[0]=e,r[0]}var o=a(34028234663852886e22),s={};s.defaultNoDataValue=i(-1/0),s.decode=function(e,t){var n=(t=t||{}).encodedMaskData||null===t.encodedMaskData,r=h(e,t.inputOffset||0,n),a=null!=t.noDataValue?i(t.noDataValue):s.defaultNoDataValue,o=u(r,t.pixelType||Float32Array,t.encodedMaskData,a,t.returnMask),f={width:r.width,height:r.height,pixelData:o.resultPixels,minValue:r.pixels.minValue,maxValue:r.pixels.maxValue,noDataValue:a};return o.resultMask&&(f.maskData=o.resultMask),t.returnEncodedMask&&r.mask&&(f.encodedMaskData=r.mask.bitset?r.mask.bitset:null),t.returnFileInfo&&(f.fileInfo=c(r,a),t.computeUsedBitDepths&&(f.fileInfo.bitDepths=l(r))),f};var u=function(e,t,n,r,i){var a,o,s=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,l=Math.floor(e.width/u),h=Math.floor(e.height/c),p=2*e.maxZError;n=n||(e.mask?e.mask.bitset:null),a=new t(e.width*e.height),i&&n&&(o=new Uint8Array(e.width*e.height));for(var d,v,y=new Float32Array(l*h),b=0;b<=c;b++){var g=b!==c?h:e.height%c;if(0!==g)for(var m=0;m<=u;m++){var w=m!==u?l:e.width%u;if(0!==w){var O,j,_,x,k=b*e.width*h+m*l,S=e.width-w,M=e.pixels.blocks[s];if(M.encoding<2?(0===M.encoding?O=M.rawData:(f(M.stuffedData,M.bitsPerPixel,M.numValidPixels,M.offset,p,y,e.pixels.maxValue),O=y),j=0):_=2===M.encoding?0:M.offset,n)for(v=0;v<g;v++){for(7&k&&(x=n[k>>3],x<<=7&k),d=0;d<w;d++)7&k||(x=n[k>>3]),128&x?(o&&(o[k]=1),a[k++]=M.encoding<2?O[j++]:_):(o&&(o[k]=0),a[k++]=r),x<<=1;k+=S}else if(M.encoding<2)for(v=0;v<g;v++){for(d=0;d<w;d++)a[k++]=O[j++];k+=S}else for(v=0;v<g;v++)if(a.fill)a.fill(_,k,k+w),k+=w+S;else{for(d=0;d<w;d++)a[k++]=_;k+=S}if(1===M.encoding&&j!==M.numValidPixels)throw"Block and Mask do not match";s++}}}return{resultPixels:a,resultMask:o}},c=function(e,t){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:t}}},l=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,n={},r=0;r<t;r++){var i=e.pixels.blocks[r];0===i.encoding?n.float32=!0:1===i.encoding?n[i.bitsPerPixel]=!0:n[0]=!0}return Object.keys(n)},h=function(e,t,n){var r={},i=new Uint8Array(e,t,10);if(r.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!=r.fileIdentifierString.trim())throw"Unexpected file identifier string: "+r.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(r.fileVersion=a.getInt32(0,!0),r.imageType=a.getInt32(4,!0),r.height=a.getUint32(8,!0),r.width=a.getUint32(12,!0),r.maxZError=a.getFloat64(16,!0),t+=24,!n)if(a=new DataView(e,t,16),r.mask={},r.mask.numBlocksY=a.getUint32(0,!0),r.mask.numBlocksX=a.getUint32(4,!0),r.mask.numBytes=a.getUint32(8,!0),r.mask.maxValue=a.getFloat32(12,!0),t+=16,r.mask.numBytes>0){var o=new Uint8Array(Math.ceil(r.width*r.height/8)),s=(a=new DataView(e,t,r.mask.numBytes)).getInt16(0,!0),u=2,c=0;do{if(s>0)for(;s--;)o[c++]=a.getUint8(u++);else{var l=a.getUint8(u++);for(s=-s;s--;)o[c++]=l}s=a.getInt16(u,!0),u+=2}while(u<r.mask.numBytes);if(-32768!==s||c<o.length)throw"Unexpected end of mask RLE encoding";r.mask.bitset=o,t+=r.mask.numBytes}else 0==(r.mask.numBytes|r.mask.numBlocksY|r.mask.maxValue)&&(o=new Uint8Array(Math.ceil(r.width*r.height/8)),r.mask.bitset=o);a=new DataView(e,t,16),r.pixels={},r.pixels.numBlocksY=a.getUint32(0,!0),r.pixels.numBlocksX=a.getUint32(4,!0),r.pixels.numBytes=a.getUint32(8,!0),r.pixels.maxValue=a.getFloat32(12,!0),t+=16;var h=r.pixels.numBlocksX,f=r.pixels.numBlocksY,p=h+(r.width%h>0?1:0),d=f+(r.height%f>0?1:0);r.pixels.blocks=new Array(p*d);for(var v=1e9,y=0,b=0;b<d;b++)for(var g=0;g<p;g++){var m=0;a=new DataView(e,t,Math.min(10,e.byteLength-t));var w={};r.pixels.blocks[y++]=w;var O=a.getUint8(0);if(m++,w.encoding=63&O,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==O&&2!==O){if(w.offsetType=O>>=6,2===O)w.offset=a.getInt8(1),m++;else if(1===O)w.offset=a.getInt16(1,!0),m+=2;else{if(0!==O)throw"Invalid block offset type";w.offset=a.getFloat32(1,!0),m+=4}if(v=Math.min(w.offset,v),1===w.encoding)if(O=a.getUint8(m),m++,w.bitsPerPixel=63&O,w.numValidPixelsType=O>>=6,2===O)w.numValidPixels=a.getUint8(m),m++;else if(1===O)w.numValidPixels=a.getUint16(m,!0),m+=2;else{if(0!==O)throw"Invalid valid pixel count type";w.numValidPixels=a.getUint32(m,!0),m+=4}}var j;if(t+=m,3!=w.encoding)if(0===w.encoding){var _=(r.pixels.numBytes-1)/4;if(_!==Math.floor(_))throw"uncompressed block has invalid length";j=new ArrayBuffer(4*_),new Uint8Array(j).set(new Uint8Array(e,t,4*_));for(var x=new Float32Array(j),k=0;k<x.length;k++)v=Math.min(v,x[k]);w.rawData=x,t+=4*_}else if(1===w.encoding){var S=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),M=Math.ceil(S/4);j=new ArrayBuffer(4*M),new Uint8Array(j).set(new Uint8Array(e,t,S)),w.stuffedData=new Uint32Array(j),t+=S}}else t++,v=Math.min(v,0)}return r.pixels.minValue=v,r.eofOffset=t,r},f=function(e,t,n,r,i,a,o){var s,u,c,l=(1<<t)-1,h=0,f=0,p=Math.ceil((o-r)/i),d=4*e.length-Math.ceil(t*n/8);for(e[e.length-1]<<=8*d,s=0;s<n;s++){if(0===f&&(c=e[h++],f=32),f>=t)u=c>>>f-t&l,f-=t;else{var v=t-f;u=(c&l)<<v&l,u+=(c=e[h++])>>>(f=32-v)}a[s]=u<p?r+u*i:o}return a},p=s.decode},tCO6:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=n("6S2I"),u=n("zqDF"),c=n("WbKI"),l=n("Gj5k"),h=n("+opI"),f=n("RI0u"),p=n("r88o"),d=n("04ZG"),v=n("Cduq"),y=(n("4EHJ"),n("ju1D"),n("9AIY"),n("gvqN")),b=n("wdpY"),g=n("H9eC"),m=n("1hFN"),w=n("ZnuT"),O=n("vk02"),j=n("8RtG"),_=n("guTz"),x=s.a.getLogger("esri.renderers.ClassBreaksRenderer"),k="percent-of-total",S="field",M=new h.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:k,esriNormalizeByField:S}),I=Object(u.m)(j.a),T=r=function(e){Kt(l,e);var t,n,i,s,c=Xt(l);function l(e){var t;return Wt(this,l),(t=c.call(this,e))._compiledValueExpression={valueExpression:null,compiledFunction:null},t.backgroundFillSymbol=null,t.classBreakInfos=null,t.defaultLabel=null,t.defaultSymbol=null,t.field=null,t.isMaxInclusive=!0,t.legendOptions=null,t.normalizationField=null,t.normalizationTotal=null,t.type="class-breaks",t.valueExpression=null,t.valueExpressionTitle=null,t._set("classBreakInfos",[]),t}return Zt(l,[{key:"readClassBreakInfos",value:function(e,t,n){if(Array.isArray(e)){var r=t.minValue;return e.map((function(e){var t=new j.a;return t.read(e,n),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}}},{key:"writeClassBreakInfos",value:function(e,t,n,r){var i=e.map((function(e){return e.write({},r)}));this._areClassBreaksConsecutive()&&i.forEach((function(e){return delete e.classMinValue})),t[n]=i}},{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(x.error(".field: field must be a string value"),null):Object(u.l)(e)}},{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=(t?S:n&&k)||null,t&&n&&x.warn("warning: both normalizationField and normalizationTotal are set!")):e!==S&&e!==k||(e=null),e},set:function(e){this._set("normalizationType",e)}},{key:"addClassBreakInfo",value:function(e,t,n){var r;r="number"==typeof e?new j.a({minValue:e,maxValue:t,symbol:Object(g.c)(n)}):I(Object(a.a)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}},{key:"removeClassBreakInfo",value:function(e,t){for(var n=this.classBreakInfos.length,r=0;r<n;r++){var i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}},{key:"getBreakIndex",value:function(e,t){return this.valueExpression&&(Object(o.j)(t)||Object(o.j)(t.arcade))&&x.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}},{key:"getClassBreakInfo",value:(s=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,e.t0=this.valueExpression&&(Object(o.j)(n)||Object(o.j)(n.arcade)),!e.t0){e.next=11;break}return e.t1=Nt,e.t2=Nt({},r),e.t3={},e.next=8,Object(y.e)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},r=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return i=this.getBreakIndex(t,r),e.abrupt("return",-1!==i?this.classBreakInfos[i]:null);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!Object(o.j)(t)&&!Object(o.j)(t.arcade)){var n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}x.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:(i=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,!this.valueExpression||!Object(o.j)(n)&&!Object(o.j)(n.arcade)){e.next=11;break}return e.next=4,Object(y.e)();case 4:if(i=e.sent,a=i.arcadeUtils,e.t0=a.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,a.enableGeometryOperations();case 10:r=Nt(Nt({},r),{},{arcade:i});case 11:return s=this.getBreakIndex(t,r),e.abrupt("return",s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getSymbols",value:function(){var e=[];return this.classBreakInfos.forEach((function(t){t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(n,".").concat(this.field,".").concat(this.valueExpression)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"clone",value:function(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Object(a.a)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Object(a.a)(this.visualVariables),legendOptions:Object(a.a)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"collectRequiredFields",value:(n=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[this.collectVVRequiredFields(t,n),this.collectSymbolFields(t,n)],e.next=3,Promise.all(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"collectSymbolFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat(Bt(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)}))),[Object(b.a)(t,n,this.valueExpression)]),Object(b.d)(t,n,this.field),Object(b.d)(t,n,this.normalizationField),e.next=5,Promise.all(r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_getBreakIndexForExpression",value:function(e,t){var n=Object(o.r)(t,{}),r=n.viewingMode,i=n.scale,a=n.spatialReference,s=n.arcade,u=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null,c=Object(o.q)(s).arcadeUtils;if(!u){var l=c.createSyntaxTree(this.valueExpression);u=c.createFunction(l),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=this.valueExpression;var h=c.executeFunction(u,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:a})));return this._getBreakIndexfromInfos(h)}},{key:"_getBreakIndexForField",value:function(e){var t=e.attributes,n=this.normalizationType,r=parseFloat(t[this.field]);if(n){var i=this.normalizationTotal,a=parseFloat(t[this.normalizationField]);if("log"===n)r=Math.log(r)*Math.LOG10E;else if(n!==k||isNaN(i)){if(n===S&&!isNaN(a)){if(isNaN(r)||isNaN(a))return-1;r/=a}}else r=r/i*100}return this._getBreakIndexfromInfos(r)}},{key:"_getBreakIndexfromInfos",value:function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var n=0;n<this.classBreakInfos.length;n++){var r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}},{key:"_areClassBreaksConsecutive",value:function(){for(var e=this.classBreakInfos,t=e.length,n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}}]),l}(Object(O.a)(w.a));Object(i.a)([Object(c.b)(_.a)],T.prototype,"backgroundFillSymbol",void 0),Object(i.a)([Object(c.b)({type:[j.a]})],T.prototype,"classBreakInfos",void 0),Object(i.a)([Object(p.a)("classBreakInfos")],T.prototype,"readClassBreakInfos",null),Object(i.a)([Object(v.a)("classBreakInfos")],T.prototype,"writeClassBreakInfos",null),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],T.prototype,"defaultLabel",void 0),Object(i.a)([Object(c.b)(_.b)],T.prototype,"defaultSymbol",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],T.prototype,"field",void 0),Object(i.a)([Object(l.a)("field")],T.prototype,"castField",null),Object(i.a)([Object(c.b)({type:Boolean})],T.prototype,"isMaxInclusive",void 0),Object(i.a)([Object(c.b)({type:m.a,json:{write:!0}})],T.prototype,"legendOptions",void 0),Object(i.a)([Object(c.b)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],T.prototype,"minValue",null),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],T.prototype,"normalizationField",void 0),Object(i.a)([Object(c.b)({type:Number,cast:function(e){return Object(u.i)(e)},json:{write:!0}})],T.prototype,"normalizationTotal",void 0),Object(i.a)([Object(c.b)({type:M.apiValues,value:null,json:{type:M.jsonValues,read:M.read,write:M.write}})],T.prototype,"normalizationType",null),Object(i.a)([Object(f.a)({classBreaks:"class-breaks"})],T.prototype,"type",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],T.prototype,"valueExpression",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],T.prototype,"valueExpressionTitle",void 0),T=r=Object(i.a)([Object(d.a)("esri.renderers.ClassBreaksRenderer")],T),t.a=T},tI3Y:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("6S2I"),s=n("zqDF"),u=n("WbKI"),c=n("Stxv"),l=n("RI0u"),h=n("04ZG"),f=(n("4EHJ"),n("ju1D"),n("9AIY"),n("wdpY")),p=n("nvBr"),d=n("21Ip"),v=n("DXYb"),y=n("ZnuT"),b=n("vk02"),g=n("Gj5k"),m=n("ag7Y"),w=o.a.getLogger("esri.renderers.support.AttributeColorInfo"),O=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).color=null,r.field=null,r.label=null,r.valueExpression=null,r.valueExpressionTitle=null,r}return Zt(n,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(w.error(".field: field must be a string value"),null):Object(s.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new r({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),n}(m.a);Object(i.a)([Object(u.b)({type:p.a,json:{type:[Number],write:!0}})],O.prototype,"color",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],O.prototype,"field",void 0),Object(i.a)([Object(g.a)("field")],O.prototype,"castField",null),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],O.prototype,"label",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],O.prototype,"valueExpression",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],O.prototype,"valueExpressionTitle",void 0);var j,_=O=r=Object(i.a)([Object(h.a)("esri.renderers.support.AttributeColorInfo")],O),x=j=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).unit=null,e}return Zt(n,[{key:"clone",value:function(){return new j({unit:this.unit})}}]),n}(m.a);Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"unit",void 0);var k,S=x=j=Object(i.a)([Object(h.a)("esri.renderers.support.DotDensityLegendOptions")],x),M=k=function(e){Kt(i,e);var t,n,r=Xt(i);function i(e){var t;return Wt(this,i),(t=r.call(this,e)).attributes=null,t.backgroundColor=new p.a([0,0,0,0]),t.blendDots=!0,t.dotBlendingEnabled=!0,t.dotShape="square",t.dotSize=1,t.legendOptions=null,t.outline=new d.a,t.dotValue=null,t.referenceDotValue=null,t.referenceScale=null,t.seed=1,t.type="dot-density",t}return Zt(i,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new v.a({outline:this.outline})}},{key:"getSymbolAsync",value:(n=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new k({attributes:Object(a.a)(this.attributes),backgroundColor:Object(a.a)(this.backgroundColor),dotBlendingEnabled:Object(a.a)(this.dotBlendingEnabled),dotShape:Object(a.a)(this.dotShape),dotSize:Object(a.a)(this.dotSize),dotValue:Object(a.a)(this.dotValue),legendOptions:Object(a.a)(this.legendOptions),outline:Object(a.a)(this.outline),referenceScale:Object(a.a)(this.referenceScale),visualVariables:Object(a.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,n);case 2:r=Vt(this.attributes),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=14;break}if(a=i.value,e.t0=a.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(f.a)(t,n,a.valueExpression);case 11:a.field&&t.add(a.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),r.e(e.t1);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])}))),function(e,n){return t.apply(this,arguments)})}]),i}(Object(b.a)(y.a));Object(i.a)([Object(u.b)({type:[_],json:{write:!0}})],M.prototype,"attributes",void 0),Object(i.a)([Object(u.b)({type:p.a,json:{write:!0}})],M.prototype,"backgroundColor",void 0),Object(i.a)([Object(u.b)({type:Boolean}),Object(c.a)("dotBlendingEnabled")],M.prototype,"blendDots",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],M.prototype,"dotBlendingEnabled",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!1}})],M.prototype,"dotShape",void 0),Object(i.a)([Object(u.b)({type:Number,json:{write:!1}})],M.prototype,"dotSize",void 0),Object(i.a)([Object(u.b)({type:S,json:{write:!0}})],M.prototype,"legendOptions",void 0),Object(i.a)([Object(u.b)({type:d.a,json:{default:null,write:!0}})],M.prototype,"outline",void 0),Object(i.a)([Object(u.b)({type:Number,json:{write:!0}})],M.prototype,"dotValue",void 0),Object(i.a)([Object(u.b)({type:Number}),Object(c.a)("dotValue")],M.prototype,"referenceDotValue",void 0),Object(i.a)([Object(u.b)({type:Number,json:{write:!0}})],M.prototype,"referenceScale",void 0),Object(i.a)([Object(u.b)({type:Number,json:{write:!0}})],M.prototype,"seed",void 0),Object(i.a)([Object(l.a)({dotDensity:"dot-density"})],M.prototype,"type",void 0),M=k=Object(i.a)([Object(h.a)("esri.renderers.DotDensityRenderer")],M),t.a=M},tI4m:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("LIH3")),u=n("l4ZG"),c=n("SuVq"),l=n("Ehki"),h=n("9pTf"),f=n("gEht"),p=n("QLbw"),d=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).center=null,e.geodesic=!1,e.numberOfPoints=60,e.radius=1e3,e.radiusUnit="meters",e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t){var r;if(e&&e.center)r=e;else{if(e&&e.rings)return Dt(en(n.prototype),"normalizeCtorArgs",this).call(this,e,t);r={center:e}}return Nt(Nt(Nt({},Dt(en(n.prototype),"normalizeCtorArgs",this).call(this)),r),t)}},{key:"initialize",value:function(){var e=this.center,t=this.numberOfPoints;if(this.hasZ=e&&e.hasZ,0===this.rings.length&&e){var n,r=Object(f.c)(this.radius,this.radiusUnit,"meters"),i=e.spatialReference,a="geographic";if(i.isWebMercator?a="webMercator":(null!=s.a[i.wkid]||i.wkt&&0===i.wkt.indexOf("PROJCS"))&&(a="projected"),this.geodesic){var o;switch(a){case"webMercator":o=Object(u.e)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=e}n=this._createGeodesicCircle(o,r,t),"webMercator"===a&&(n=Object(u.b)(n))}else{var c;"webMercator"===a||"projected"===a?c=r/this._convert2Meters(1,e.spatialReference):"geographic"===a&&(c=Object(f.m)(r,"meters",Object(h.e)(e.spatialReference).radius)),n=this._createPlanarCircle(e,c,t)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}}},{key:"clone",value:function(){var e=this.center,t=this.numberOfPoints,n=this.radius,i=this.radiusUnit,a=this.geodesic;return new r({center:e.clone(),numberOfPoints:t,radius:n,radiusUnit:i,geodesic:a})}},{key:"_createGeodesicCircle",value:function(e,t,n){for(var r=0,i=[];r<360;){var a=[0,0],o=[e.x,e.y];Object(p.a)(a,o,r,t),this.hasZ&&a.push(e.z),i.push(a),r+=360/n}return i.push(i[0]),new l.a(i)}},{key:"_createPlanarCircle",value:function(e,t,n){for(var r=0,i=[];r<2*Math.PI;){var a=[e.x+Math.cos(-r)*t,e.y+Math.sin(-r)*t];this.hasZ&&a.push(e.z),i.push(a),r+=Math.PI/(n/2)}return i.push(i[0]),new l.a({spatialReference:e.spatialReference,rings:[i]})}},{key:"_convert2Meters",value:function(e,t){var n;if(null!=s.a[t.wkid])n=s.a.values[s.a[t.wkid]];else{var r=t.wkt,i=r.lastIndexOf(",")+1,a=r.lastIndexOf("]]");n=parseFloat(r.substring(i,a))}return e*n}}]),n}(l.a);Object(i.a)([Object(a.b)({type:c.a})],d.prototype,"center",void 0),Object(i.a)([Object(a.b)()],d.prototype,"geodesic",void 0),Object(i.a)([Object(a.b)()],d.prototype,"numberOfPoints",void 0),Object(i.a)([Object(a.b)()],d.prototype,"radius",void 0),Object(i.a)([Object(a.b)()],d.prototype,"radiusUnit",void 0),d=r=Object(i.a)([Object(o.a)("esri.geometry.Circle")],d),t.a=d},tIWS:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("r88o"),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WZb1")),u=(n("4GrV"),n("q2iW")),c=n("llFo"),l=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).copyright=null,e.minScale=0,e.maxScale=0,e.spatialReference=null,e.tileInfo=null,e.tilemapCache=null,e}return Zt(n,[{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"supportsBlankTile",get:function(){return this.version>=10.2}},{key:"readTilemapCache",value:function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}}]),n}(e);return Object(r.a)([Object(i.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(r.a)([Object(i.b)()],t.prototype,"minScale",void 0),Object(r.a)([Object(a.a)("service","minScale")],t.prototype,"readMinScale",null),Object(r.a)([Object(i.b)()],t.prototype,"maxScale",void 0),Object(r.a)([Object(a.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(r.a)([Object(i.b)({type:s.a})],t.prototype,"spatialReference",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(r.a)([Object(i.b)(u.b)],t.prototype,"tileInfo",void 0),Object(r.a)([Object(i.b)()],t.prototype,"tilemapCache",void 0),Object(r.a)([Object(a.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(r.a)([Object(i.b)()],t.prototype,"version",void 0),t=Object(r.a)([Object(o.a)("esri.layers.mixins.ArcGISCachedService")],t)}},"tQ+6":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return b}));var r=n("srIe"),i=n("iA3P");function a(e,t,n){if(Object(r.j)(e)&&Object(r.j)(t))return!0;if(Object(r.j)(e)||Object(r.j)(t)||e.length!==t.length)return!1;if(n){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function o(e,t,n){return e&&t?e.filter(n?function(e){return t.findIndex((function(t){return n(e,t)}))>-1}:function(e){return t.indexOf(e)>-1}):[]}function s(e){return e&&"number"==typeof e.length}var u=!!Array.prototype.fill;function c(e,t){if(u)return new Array(e).fill(t);for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n}function l(e,t){void 0===t&&(t=e,e=0);for(var n=new Array(t-e),r=e;r<t;r++)n[r-e]=r;return n}function h(e){return e.reduce((function(e,t){return e.concat(t||[])}),[])}var f=function e(){Wt(this,e),this.last=0},p=new f;function d(e,t,n,r){r=r||p;for(var i=Math.max(0,r.last-10),a=i;a<n;++a)if(e[a]===t)return r.last=a,a;for(var o=Math.min(i,n),s=0;s<o;++s)if(e[s]===t)return r.last=s,s;return-1}function v(e,t,n,r){var i=null==n?e.length:n,a=d(e,t,i,r);if(-1!==a)return e[a]=e[i-1],null==n&&e.pop(),t}var y=new Set;function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(0===r||0===n)return n;y.clear();for(var o=0;o<r;++o)y.add(t[o]);i=i||p;for(var s=Math.max(0,i.last-10),u=s;u<n;++u)if(y.has(e[u])&&(a&&a.push(e[u]),y.delete(e[u]),e[u]=e[n-1],--n,--u,0===y.size||0===n))return y.clear(),n;for(var c=0;c<s;++c)if(y.has(e[c])&&(a&&a.push(e[c]),y.delete(e[c]),e[c]=e[n-1],--n,--c,0===y.size||0===n))return y.clear(),n;return y.clear(),n}function g(e,t){var n=e.indexOf(t);return-1!==n?(e.splice(n,1),t):null}new i.a},tSEa:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("04ZG"),c=n("Cduq"),l=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),h=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).attachmentTypes=null,r.attachmentsWhere=null,r.keywords=null,r.globalIds=null,r.name=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}return Zt(n,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new r(Object(a.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),n}(l.a);Object(i.a)([Object(s.b)({type:[String],json:{write:!0}})],h.prototype,"attachmentTypes",void 0),Object(i.a)([Object(s.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],h.prototype,"attachmentsWhere",void 0),Object(i.a)([Object(s.b)({type:[String],json:{write:!0}})],h.prototype,"keywords",void 0),Object(i.a)([Object(s.b)({type:[Number],json:{write:!0}})],h.prototype,"globalIds",void 0),Object(i.a)([Object(s.b)({json:{write:!0}})],h.prototype,"name",void 0),Object(i.a)([Object(s.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],h.prototype,"num",void 0),Object(i.a)([Object(s.b)({type:[Number],json:{write:!0}})],h.prototype,"objectIds",void 0),Object(i.a)([Object(s.b)({type:Boolean,json:{default:!1,write:!0}})],h.prototype,"returnMetadata",void 0),Object(i.a)([Object(s.b)({type:[Number],json:{write:!0}})],h.prototype,"size",void 0),Object(i.a)([Object(s.b)({type:Number,json:{read:{source:"resultOffset"}}})],h.prototype,"start",void 0),Object(i.a)([Object(c.a)("start"),Object(c.a)("num")],h.prototype,"writeStart",null),Object(i.a)([Object(s.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],h.prototype,"where",void 0),(h=r=Object(i.a)([Object(u.a)("esri.tasks.support.AttachmentQuery")],h)).from=Object(o.m)(h),t.a=h},tUFA:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("srIe"),i=n("9MzC"),a=n("WBXD"),o=n("jKdI"),s=function e(t,n){Wt(this,e),this.item=t,this.controller=n,this.promise=null},u=function(){function e(t){var n=this;Wt(this,e),this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new o.a(t.peeker),this.process=t.process;var i=t.scheduler;t.task&&Object(r.k)(i)&&(this._task=i.registerTask(t.task,(function(e){return n.update(e)}),(function(){return n.needsUpdate()})))}return Zt(e,[{key:"destroy",value:function(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}},{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"abort",value:function(e){var t=this._controllers.get(e);t&&t.abort()}},{key:"clear",value:function(){this._queue.clear();var e=[];this._controllers.forEach((function(t){return e.push(t)})),this._controllers.clear(),e.forEach((function(e){return e.abort()})),this._processingItems.clear(),this._cancelNext()}},{key:"forEach",value:function(e){this._deferreds.forEach((function(t,n){return e(n)}))}},{key:"get",value:function(e){var t=this._deferreds.get(e);return t?t.promise:void 0}},{key:"isOngoing",value:function(e){return this._processingItems.has(e)}},{key:"has",value:function(e){return this._deferreds.has(e)}},{key:"pause",value:function(){this._isPaused||(this._isPaused=!0,this._cancelNext())}},{key:"push",value:function(e,t){var n=this,a=this.get(e);if(a)return a;var o=Object(i.d)(),s=null;t&&(s=Object(i.p)(t,(function(){return o.abort()})));var u=function(){c.remove(),Object(r.k)(s)&&s.remove(),n._deferreds.delete(e),n._controllers.delete(e),n._queue.remove(e),n._processingItems.delete(e),n._scheduleNext()},c=Object(i.q)(o.signal,(function(){var t=n._processingItems.get(e);t&&t.controller.abort(),u(),l.reject(Object(i.e)())})),l=Object(i.f)();return this._deferreds.set(e,l),this._controllers.set(e,o),l.promise.then(u,u),this._queue.push(e),this._scheduleNext(),l.promise}},{key:"reset",value:function(){var e=[];this._processingItems.forEach((function(t){return e.push(t)})),this._processingItems.clear();for(var t=0,n=e;t<n.length;t++){var r=n[t];this._queue.push(r.item),r.controller.abort()}this._scheduleNext()}},{key:"resume",value:function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}},{key:"takeAll",value:function(){for(var e=[];this._queue.length;)e.push(this._queue.pop());return this.clear(),e}},{key:"needsUpdate",value:function(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}},{key:"update",value:function(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}},{key:"_scheduleNext",value:function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=Object(a.b)((function(){e._schedule=null,e._next()})))}},{key:"_next",value:function(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}},{key:"_cancelNext",value:function(){this._schedule&&(this._schedule.remove(),this._schedule=null)}},{key:"_processResult",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}},{key:"_processError",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}},{key:"_canProcessFulfillment",value:function(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}},{key:"_process",value:function(e){var t=this;if(!Object(r.j)(e)){var n,a=Object(i.d)(),o=new s(e,a);this._processingItems.set(e,o);try{n=this.process(e,a.signal)}catch(u){this._processError(o,u)}Object(i.o)(n)?(o.promise=n,n.then((function(e){return t._processResult(o,e)}),(function(e){return t._processError(o,e)}))):this._processResult(o,n)}}},{key:"test",get:function(){var e=this;return{update:function(t){return e.update(t)}}}}]),e}()},tanU:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI"),n("RI0u")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("Qzg2")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="inherited",r}return Zt(n,[{key:"clone",value:function(){return new r}}]),n}(s.a);Object(i.a)([Object(a.a)({inherited:"inherited"})],u.prototype,"type",void 0),u=r=Object(i.a)([Object(o.a)("esri.layers.support.InheritedDomain")],u),t.a=u},tcYT:function(e,t,n){"use strict";var r=n("9aYe"),i=function(){this.data=[]};i.prototype={append:function(e){e=r.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},e.exports=i},tiP8:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return u}));var r=n("srIe"),i=n("15Hh"),a=n("r+FG"),o=n("EVMh");function s(e,t){return Object(r.j)(e)&&(e=[]),e.push(t),e}function u(e,t){if(Object(r.j)(e))return e;var n=e.filter((function(e){return e!==t}));return 0===n.length?null:n}function c(e){return!!Object(r.k)(e)&&!e.visible}function l(e,t){var n=new Map;return n.set(0,t.acquire(e,0)),n.set(1,t.acquire(e,7)),n.set(4,t.acquire(e,3)),n.set(3,t.acquire(e,2)),n.set(2,t.acquire(e,1)),n.set(5,t.acquire(e,4)),n.set(7,t.acquire(e,3)),n.set(6,t.acquire(e,3)),n}function h(e,t){t.release(e,0),t.release(e,7),t.release(e,3),t.release(e,2),t.release(e,1),t.release(e,4)}function f(e,t,n){var a=e.origin.vec3;Object(o.j)(p,-a[0],-a[1],-a[2]),Object(r.k)(e.transformation)?Object(i.l)(t,p,e.transformation):Object(i.c)(t,p),n&&(Object(i.a)(n,t),Object(i.b)(n,n))}n("mmTy"),new Float64Array(3),new Float32Array(6);var p=Object(a.b)()},tidM:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF")),s=n("WbKI"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).variableName=null,r.dimensionName=null,r.values=[],r.isSlice=!1,r}return Zt(n,[{key:"clone",value:function(){return new r({variableName:this.variableName,dimensionName:this.dimensionName,values:Object(a.a)(this.values),isSlice:this.isSlice})}}]),n}(c.a);Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"variableName",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"dimensionName",void 0),Object(i.a)([Object(s.b)({type:o.p.array(o.p.oneOf([o.p.native(Number),o.p.array(o.p.native(Number))])),json:{write:!0}})],l.prototype,"values",void 0),Object(i.a)([Object(s.b)({type:Boolean,json:{write:!0}})],l.prototype,"isSlice",void 0),l=r=Object(i.a)([Object(u.a)("esri.layers.support.DimensionalDefinition")],l),t.a=l},tjlA:function(e,t,n){"use strict";var r=n("H7XF"),i=n("kVK+"),a=n("49sm");function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(c(e,a+f)!==c(t,f)){h=!1;break}if(h)return a}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function w(e,t,n,r){return G(z(t,e.length-n),e,n,r)}function O(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function j(e,t,n,r){return O(e,t,n,r)}function _(e,t,n,r){return G(V(t),e,n,r)}function x(e,t,n,r){return G(function(e,t){for(var n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function k(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=t;o<n;++o)a+=(r=e[o])<16?"0"+r.toString(16):r.toString(16);return a}function A(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,a){return a||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,a){return a||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(null,t):void 0!==n?"string"==typeof r?s(null,t).fill(n,r):s(null,t).fill(n):s(null,t)}(0,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=e.slice(t,n),h=0;h<s;++h)if(c[h]!==l[h]){a=c[h],o=l[h];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:z(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}},tjz2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ZwYu"),i=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this)).point=e,r}return Zt(n,[{key:"equals",value:function(e){return e instanceof n&&Object(r.d)(this.point,e.point)}}]),n}(n("fctI").a)},tkqm:function(e,t,n){"use strict";var r=n("Mi3D"),i=n("9aYe"),a=n("fFCC"),o=n("er0w"),s=n("itLX"),u=n("4bvL"),c=n("7/DV"),l=n("VJTW"),h=n("z//S"),f=n("MdMo"),p=n("tcYT"),d=n("IpYs"),v=function(e){if(e._data instanceof l&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===i.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},y=function(e){var t=v(e);return"string"===i.getTypeOf(t)?!e.options.binary&&r.nodebuffer?h(t,"utf-8"):e.asBinary():t},b=function(e){var t=v(this);return null==t?"":(this.options.base64&&(t=u.decode(t)),t=e&&this.options.binary?S.utf8decode(t):i.transformTo("string",t),e||this.options.binary||(t=i.transformTo("string",S.utf8encode(t))),t)},g=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};g.prototype={asText:function(){return b.call(this,!0)},asBinary:function(){return b.call(this,!1)},asNodeBuffer:function(){var e=y(this);return i.transformTo("nodebuffer",e)},asUint8Array:function(){var e=y(this);return i.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var m=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},w=function(e,t,n){var r,a=i.getTypeOf(t);if("string"==typeof(n=function(e){return!0===(e=e||{}).base64&&null==e.binary&&(e.binary=!0),(e=i.extend(e,s)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(n)).unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(e=j(e)),n.createFolders&&(r=O(e))&&_.call(this,r,!0),n.dir||null==t)n.base64=!1,n.binary=!1,t=null,a=null;else if("string"===a)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(t=i.string2binary(t));else{if(n.base64=!1,n.binary=!0,!(a||t instanceof l))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===a&&(t=i.transformTo("uint8array",t))}var o=new g(e,t,n);return this.files[e]=o,o},O=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},j=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},_=function(e,t){return t=void 0!==t&&t,e=j(e),this.files[e]||w.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},x=function(e,t,n){var r,o=new l;return e._data instanceof l?(o.uncompressedSize=e._data.uncompressedSize,o.crc32=e._data.crc32,0===o.uncompressedSize||e.dir?(t=c.STORE,o.compressedContent="",o.crc32=0):e._data.compressionMethod===t.magic?o.compressedContent=e._data.getCompressedContent():(r=e._data.getContent(),o.compressedContent=t.compress(i.transformTo(t.compressInputType,r),n))):((r=y(e))&&0!==r.length&&!e.dir||(t=c.STORE,r=""),o.uncompressedSize=r.length,o.crc32=a(r),o.compressedContent=t.compress(i.transformTo(t.compressInputType,r),n)),o.compressedSize=o.compressedContent.length,o.compressionMethod=t.magic,o},k=function(e,t,n,r,s,u){var c,l,h,p,d,v,y=u!==f.utf8encode,b=i.transformTo("string",u(t.name)),g=i.transformTo("string",f.utf8encode(t.name)),w=t.comment||"",O=i.transformTo("string",u(w)),j=i.transformTo("string",f.utf8encode(w)),_=g.length!==t.name.length,x=j.length!==w.length,k=t.options,S="",M="",I="",T=0,A=0;(h=t._initialMetadata.dir!==t.dir?t.dir:k.dir)&&(T|=16),"UNIX"===s?(A=798,T|=(v=d=t.unixPermissions,d||(v=h?16893:33204),(65535&v)<<16)):(A=20,T|=63&(t.dosPermissions||0)),c=(p=t._initialMetadata.date!==t.date?t.date:k.date).getHours(),c<<=6,c|=p.getMinutes(),c<<=5,c|=p.getSeconds()/2,l=p.getFullYear()-1980,l<<=4,l|=p.getMonth()+1,l<<=5,l|=p.getDate(),_&&(M=m(1,1)+m(a(b),4)+g,S+="up"+m(M.length,2)+M),x&&(I=m(1,1)+m(this.crc32(O),4)+j,S+="uc"+m(I.length,2)+I);var C="";return C+="\n\0",C+=y||!_&&!x?"\0\0":"\0\b",C+=n.compressionMethod,C+=m(c,2),C+=m(l,2),C+=m(n.crc32,4),C+=m(n.compressedSize,4),C+=m(n.uncompressedSize,4),C+=m(b.length,2),C+=m(S.length,2),{fileRecord:o.LOCAL_FILE_HEADER+C+b+S,dirRecord:o.CENTRAL_FILE_HEADER+m(A,2)+C+m(O.length,2)+"\0\0\0\0"+m(T,4)+m(r,4)+b+S+O,compressedObject:n}},S={load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,n,r,a,o=[];for(t in this.files)this.files.hasOwnProperty(t)&&(a=new g((r=this.files[t]).name,r._data,i.extend(r.options)),n=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(n,a)&&o.push(a));return o},file:function(e,t,n){if(1===arguments.length){if(i.isRegExp(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}return this.filter((function(t,n){return!n.dir&&t===e}))[0]||null}return w.call(this,e=this.root+e,t,n),this},folder:function(e){if(!e)return this;if(i.isRegExp(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=_.call(this,this.root+e),n=this.clone();return n.root=t.name,n},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){e=i.extend(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode}),i.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t,n,r,a=[],s=0,l=0,h=i.transformTo("string",e.encodeFileName(e.comment||this.comment||""));for(var v in this.files)if(this.files.hasOwnProperty(v)){var y=this.files[v],b=y.options.compression||e.compression.toUpperCase(),g=c[b];if(!g)throw new Error(b+" is not a valid compression method !");var w=x.call(this,y,g,y.options.compressionOptions||e.compressionOptions||{}),O=k.call(this,v,y,w,s,e.platform,e.encodeFileName);s+=O.fileRecord.length+w.compressedSize,l+=O.dirRecord.length,a.push(O)}r=o.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(a.length,2)+m(a.length,2)+m(l,4)+m(s,4)+m(h.length,2)+h;var j=e.type.toLowerCase();for(t="uint8array"===j||"arraybuffer"===j||"blob"===j||"nodebuffer"===j?new d(s+l+r.length):new p(s+l+r.length),n=0;n<a.length;n++)t.append(a[n].fileRecord),t.append(a[n].compressedObject.compressedContent);for(n=0;n<a.length;n++)t.append(a[n].dirRecord);t.append(r);var _=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(e.type.toLowerCase(),_);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",_),e.mimeType);case"base64":return e.base64?u.encode(_):_;default:return _}},crc32:function(e,t){return a(e,t)},utf8encode:function(e){return i.transformTo("string",f.utf8encode(e))},utf8decode:function(e){return f.utf8decode(e)}};e.exports=S},tl5A:function(e,t,n){"use strict";function r(e,t){if(t&&e&&e.map){var n=e.map;n.layers.find((function(e){return e===t}))||n.add(t)}}n.d(t,"a",(function(){return r}))},tyRe:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),u=n("AiS/"),c=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).portal=null,e}return Zt(n,[{key:"clone",value:function(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}}]),n}(s.a);Object(i.a)([Object(a.b)({type:String})],c.prototype,"name",void 0),Object(i.a)([Object(a.b)({type:String})],c.prototype,"styleUrl",void 0),Object(i.a)([Object(a.b)({type:String})],c.prototype,"styleName",void 0),Object(i.a)([Object(a.b)({type:u.a})],c.prototype,"portal",void 0),c=r=Object(i.a)([Object(o.a)("esri.symbols.support.StyleOrigin")],c),t.a=c},u3Ia:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("4EHJ");function i(e,t){var n={query:e};return t&&((n=Nt(Nt({},t),n)).query=Nt(Nt({},n.query),t.query)),n}function a(e){return"string"==typeof e?Object(r.J)(e):e}function o(e,t,n){var r={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){r[i]=[];for(var s=0;s<a.length;s++)r[i][s]=o(a[s])}else if("object"==typeof a)if(a.toJSON){var u=a.toJSON(n&&n[i]);r[i]=t?u:JSON.stringify(u)}else r[i]=t?a:JSON.stringify(a);else r[i]=a}return r}},uAeW:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("/CmD")),s=n("kJYu"),u={visible:"visibleSublayers"},c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).scale=0,r}return Zt(n,[{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("wms-sublayer-update",(function(e){return t.notifyChange(u[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){return this.visibleSublayers.filter((function(e){return e.name})).map((function(e){return e.name})).join(",")}},{key:"version",get:function(){this.commitProperty("layers");var e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this.layer,t=this.scale,n=null==e?void 0:e.sublayers,r=[];return null==n||n.forEach((function e(n){var i=n.minScale,a=n.maxScale,o=n.sublayers;n.visible&&(0===t||(0===i||t<=i)&&(0===a||t>=a))&&(o?o.forEach(e):r.unshift(n))})),r}},{key:"toJSON",value:function(){var e=this.layer,t=this.layers;return{format:e.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:e.imageTransparency,version:e.version,layers:t}}}]),n}(Object(s.b)(o.a));Object(r.a)([Object(i.b)()],c.prototype,"layer",null),Object(r.a)([Object(i.b)({readOnly:!0})],c.prototype,"layers",null),Object(r.a)([Object(i.b)({type:Number})],c.prototype,"scale",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],c.prototype,"version",null),Object(r.a)([Object(i.b)({readOnly:!0})],c.prototype,"visibleSublayers",null),c=Object(r.a)([Object(a.a)("esri.layers.support.ExportWMSImageParameters")],c)},"uRH/":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=n("Cduq"),s=n("zlDU"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("CWQl")),c=n("xHih"),l={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}},h=n("IvSi"),f=function(e){var t=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).title=null,e}return Zt(n,[{key:"writeListMode",value:function(e,t,n,r){(r&&"ground"===r.layerContainerType||e&&Object(c.a)(this,n,{},r))&&(t[n]=e)}},{key:"writeOperationalLayerType",value:function(e,t,n,r){!e||r&&"tables"===r.layerContainerType||(t.layerType=e)}},{key:"writeTitle",value:function(e,t){t.title=e||"Layer"}},{key:"read",value:function(e,t){var r=this;t&&(t.layer=this),Object(u.b)(this,e,(function(t){return Dt(en(n.prototype),"read",r).call(r,e,t)}),t)}},{key:"write",value:function(e,t){if(t&&t.origin){var r="".concat(t.origin,"/").concat(t.layerContainerType||"operational-layers"),i=l[r],a=i&&i[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===r&&(a=!1),!a)return t.messages&&t.messages.push(new s.a("layer:unsupported","Layers (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' are not supported in the context of '").concat(r,"'"),{layer:this})),null}var o=Dt(en(n.prototype),"write",this).call(this,e,Nt(Nt({},t),{},{layer:this})),u=!!t&&!!t.messages&&!!t.messages.filter((function(e){return e instanceof s.a&&"web-document-write:property-required"===e.name})).length;return!this.url&&u?null:o}},{key:"beforeSave",value:function(){}}]),n}(e);return Object(r.a)([Object(i.b)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),Object(r.a)([Object(i.b)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),Object(r.a)([Object(o.a)("listMode")],t.prototype,"writeListMode",null),Object(r.a)([Object(i.b)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),Object(r.a)([Object(o.a)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),Object(r.a)([Object(i.b)(h.h)],t.prototype,"opacity",void 0),Object(r.a)([Object(i.b)({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),Object(r.a)([Object(o.a)("title")],t.prototype,"writeTitle",null),Object(r.a)([Object(i.b)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=Object(r.a)([Object(a.a)("esri.layers.mixins.OperationalLayer")],t)}},ukD5:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n("ACjl"),i=n("tCO6"),a=n("MWLC"),o=n("aPP3"),s=n("bvrg"),u=n("2gBT"),c=n("CLyZ"),l={key:"type",base:null,typeMap:{"unique-value":u.a,"class-breaks":i.a,"raster-colormap":a.a,"raster-stretch":s.a,"vector-field":c.a,"raster-shaded-relief":o.a}},h=Nt(Nt({},l),{},{typeMap:Nt({},l.typeMap)});delete h.typeMap["vector-field"];var f={uniqueValue:u.a,classBreaks:i.a,rasterStretch:s.a,rasterColormap:a.a,vectorField:c.a,rasterShadedRelief:o.a};function p(e,t){if(!e)return null;if("classBreaks"===e.type&&e.classificationMethod){var n=e.authoringInfo||{classificationMethod:""};n.classificationMethod=e.classificationMethod,e.authoringInfo=n}var i,a=(i=e)&&f[i.type]||null;if(a){var o=new a;return o.read(e,t),o}return t&&t.messages&&e&&t.messages.push(new r.a("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}},uljd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n("srIe");var r=n("Mu3I"),i=n("V+VG"),a=n("OKTS"),o=(n("Cy1f"),n("15Hh"),n("kYAx"),n("gYg2")),s=(n("r+FG"),n("AvGH")),u=(n("D8Ta"),n("dXfX"),n("QmHG"),n("GlSV")),c=n("08/N");function l(e,t){if("point"===e.type)return f(e,t,!1);if(Object(c.c)(e))switch(e.type){case"extent":return f(e.center,t,!1);case"polygon":return f(e.centroid,t,!1);case"polyline":return f(h(e),t,!0);case"mesh":return f(e.extent.center,t,!1)}else switch(e.type){case"extent":return f(function(e){var t=Object(a.g)(e.zmin);return Object(u.d)(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),t?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}(e),t,!0);case"polygon":return f(function(e){var t=e.rings[0];if(!t||0===t.length)return null;var n=Object(i.b)(e.rings,e.hasZ);return Object(u.d)(n[0],n[1],n[2],e.spatialReference)}(e),t,!0);case"polyline":return f(h(e),t,!0)}}function h(e){var t=e.paths[0];if(!t||0===t.length)return null;var n=Object(r.f)(t,Object(r.e)(t)/2);return Object(u.d)(n[0],n[1],n[2],e.spatialReference)}function f(e,t,n){var r=n?e:Object(c.a)(e);return t&&e?Object(o.n)(e,r,t)?r:null:r}function p(e,t){for(var n=0;n<e.geometries.length;++n){var r=e.geometries[n].getMutableAttribute("auxpos1");r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttrsUpdated(n))}}Object(s.e)(0,0),Object(s.e)(.5,0),Object(s.e)(1,0),Object(s.e)(0,.5),Object(s.e)(.5,.5),Object(s.e)(1,.5),Object(s.e)(0,1),Object(s.e)(.5,1),Object(s.e)(1,1)},umoc:function(e,t,n){"use strict";var r=n("7Nfj"),i=function(){function e(){Wt(this,e),this.spans=[]}return Zt(e,[{key:"acquire",value:function(e){this.lodInfo=e}},{key:"release",value:function(){this.lodInfo=null,this.spans.length=0}},{key:"forEach",value:function(e,t){var n=this.spans,r=this.lodInfo,i=r.level;if(0!==n.length){var a,o=Vt(n);try{for(o.s();!(a=o.n()).done;)for(var s=a.value,u=s.row,c=s.colFrom,l=s.colTo,h=c;h<=l;h++)e.call(t,i,u,r.normalizeCol(h),r.getWorldForColumn(h))}catch(f){o.e(f)}finally{o.f()}}}}]),e}();i.pool=new r.a(i),t.a=i},vArl:function(e,t,n){e.exports.download=n("1z6z"),e.exports.write=n("WqGO"),e.exports.zip=n("2GIW")},vI6n:function(e,t,n){"use strict";var r=n("4bvL"),i=n("MdMo"),a=n("9aYe"),o=n("TCJ/");e.exports=function(e,t){var n,s,u,c;for((t=a.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode})).base64&&(e=r.decode(e)),n=(s=new o(e,t)).files,u=0;u<n.length;u++)this.file((c=n[u]).fileNameStr,c.decompressed,{binary:!0,optimizedBinaryString:!0,date:c.date,dir:c.dir,comment:c.fileCommentStr.length?c.fileCommentStr:null,unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions,createFolders:t.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},vJSZ:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c=n("nvBr"),l=n("qRWG"),h=n("XACZ"),f=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).color=new c.a([0,0,0,1]),e.size=Object(l.i)(1),e.stipplePattern=null,e.stippleOffColor=null,e}return Zt(n,[{key:"clone",value:function(){return new r({color:Object(a.k)(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}}]),n}(u.a);Object(i.a)([Object(o.b)(h.a)],f.prototype,"color",void 0),Object(i.a)([Object(o.b)(h.b)],f.prototype,"size",void 0),Object(i.a)([Object(o.b)(h.c)],f.prototype,"stipplePattern",void 0),Object(i.a)([Object(o.b)({type:c.a})],f.prototype,"stippleOffColor",void 0),f=r=Object(i.a)([Object(s.a)("esri.symbols.support.Symbol3DOutline")],f),t.a=f},vWU8:function(e,t,n){"use strict";var r=n("9aYe");function i(e){this.data=null,this.length=0,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},e.exports=i},vXsN:function(e,t,n){"use strict";var r=n("vWU8");function i(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}}(i.prototype=new r).byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},vaBp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n("+opI").a)({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"})},viRi:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e,t){t.vvInstancingEnabled&&(t.vvSize||t.vvColor)&&e.attributes.add("instanceFeatureAttribute","vec4"),t.vvSize?(e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),e.vertex.uniforms.add("vvSymbolAnchor","vec3"),e.vertex.code.add(r.a(Ot||(Ot=Rt(["\n      vec3 vvScale(vec4 _featureAttribute) {\n        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n      }\n\n      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\n        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n      }\n    "])))),e.vertex.code.add(r.a(jt||(jt=Rt(["\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ","\n    "])),t.vvInstancingEnabled?r.a(_t||(_t=Rt(["\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }"]))):""))):e.vertex.code.add(r.a(xt||(xt=Rt(["\n      vec4 localPosition() { return vec4(position, 1.0); }\n\n      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }\n    "])))),t.vvColor?(e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(r.a(kt||(kt=Rt(["\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ","\n    "])),t.vvInstancingEnabled?r.a(St||(St=Rt(["\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }"]))):""))):e.vertex.code.add(r.a(Mt||(Mt=Rt(["\n      vec4 vvColor() { return vec4(1.0); }\n    "]))))}!function(e){function t(e,t){t.vvSizeEnabled&&(e.setUniform3fv("vvSizeMinSize",t.vvSizeMinSize),e.setUniform3fv("vvSizeMaxSize",t.vvSizeMaxSize),e.setUniform3fv("vvSizeOffset",t.vvSizeOffset),e.setUniform3fv("vvSizeFactor",t.vvSizeFactor)),t.vvColorEnabled&&(e.setUniform1fv("vvColorValues",t.vvColorValues),e.setUniform4fv("vvColorColors",t.vvColorColors))}e.bindUniforms=t,e.bindUniformsWithOpacity=function(e,n){t(e,n),n.vvOpacityEnabled&&(e.setUniform1fv("vvOpacityValues",n.vvOpacityValues),e.setUniform1fv("vvOpacityOpacities",n.vvOpacityOpacities))},e.bindUniformsForSymbols=function(e,n){t(e,n),n.vvSizeEnabled&&(e.setUniform3fv("vvSymbolAnchor",n.vvSymbolAnchor),e.setUniformMatrix3fv("vvSymbolRotationMatrix",n.vvSymbolRotationMatrix))}}(i||(i={}))},vk02:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I")),o=n("zqDF"),s=n("WbKI"),u=n("r88o"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("wdpY")),f=n("XdUx"),p=n("P2CQ"),d=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="color",r.normalizationField=null,r}return Zt(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new r({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat(Dt(en(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(f.a);Object(i.a)([Object(s.b)({readOnly:!0})],d.prototype,"cache",null),Object(i.a)([Object(s.b)({type:["color"],json:{type:["colorInfo"]}})],d.prototype,"type",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0),Object(i.a)([Object(s.b)({type:[p.a],json:{write:!0}})],d.prototype,"stops",null);var v,y=d=r=Object(i.a)([Object(c.a)("esri.renderers.visualVariables.ColorVariable")],d),b=n("ag7Y"),g=n("Qr4e"),m=v=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).label=null,r.opacity=null,r.value=null,r}return Zt(n,[{key:"readOpacity",value:function(e,t){return Object(g.b)(t.transparency)}},{key:"writeOpacity",value:function(e,t,n){t[n]=Object(g.a)(e)}},{key:"clone",value:function(){return new v({label:this.label,opacity:this.opacity,value:this.value})}}]),n}(b.a);Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],m.prototype,"label",void 0),Object(i.a)([Object(s.b)({type:Number,json:{type:o.a,write:{target:"transparency"}}})],m.prototype,"opacity",void 0),Object(i.a)([Object(u.a)("opacity",["transparency"])],m.prototype,"readOpacity",null),Object(i.a)([Object(l.a)("opacity")],m.prototype,"writeOpacity",null),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],m.prototype,"value",void 0);var w,O=m=v=Object(i.a)([Object(c.a)("esri.renderers.visualVariables.support.OpacityStop")],m),j=w=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="opacity",r.normalizationField=null,r}return Zt(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new w({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat(Dt(en(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(f.a);Object(i.a)([Object(s.b)({readOnly:!0})],j.prototype,"cache",null),Object(i.a)([Object(s.b)({type:["opacity"],json:{type:["transparencyInfo"]}})],j.prototype,"type",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],j.prototype,"normalizationField",void 0),Object(i.a)([Object(s.b)({type:[O],json:{write:!0}})],j.prototype,"stops",null);var _=j=w=Object(i.a)([Object(c.a)("esri.renderers.visualVariables.OpacityVariable")],j),x=n("TzeZ"),k=n("w/y1"),S=n("+opI"),M=n("ACjl"),I=n("/CmD"),T=a.a.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),A={color:y,size:k.a,opacity:_,rotation:x.a},C=new S.a({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),E=/^\[([^\]]+)\]$/i,P=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).colorVariables=null,e.opacityVariables=null,e.rotationVariables=null,e.sizeVariables=null,e}return Zt(n,[{key:"visualVariables",set:function(e){if(this._resetVariables(),(e=e&&e.filter((function(e){return!!e})))&&e.length){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}}}catch(a){n.e(a)}finally{n.f()}this.sizeVariables.length&&this.sizeVariables.some((function(e){return!!e.target}))&&e.sort((function(e,t){return e.target===t.target?0:e.target?1:-1}));for(var i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}},{key:"readVariables",value:function(e,t,n){var r=t.rotationExpression,i=t.rotationType,a=r&&r.match(E),o=a&&a[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:i,field:o})),e)return e.map((function(e){var t=C.read(e.type),r=A[t];r||(T.warn("Unknown variable type: "+t),n&&n.messages&&n.messages.push(new M.a("visual-variable:unsupported","visualVariable of type '".concat(t,"' is not supported"),{definition:e,context:n})));var i=new r;return i.read(e,n),i}))}},{key:"writeVariables",value:function(e,t){var n,r=[],i=Vt(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.toJSON(t);a&&r.push(a)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"_resetVariables",value:function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}}]),n}(I.a);Object(i.a)([Object(s.b)()],P.prototype,"visualVariables",null);var R=P=Object(i.a)([Object(c.a)("esri.renderers.visualVariables.VisualVariableFactory")],P),D={base:f.a,key:"type",typeMap:{opacity:_,color:y,rotation:x.a,size:k.a}},L=function(e){var t=function(e){Kt(r,e);var t,n=Xt(r);function r(){var e;return Wt(this,r),(e=n.apply(this,arguments))._vvFactory=new R,e}return Zt(r,[{key:"visualVariables",set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"readVisualVariables",value:function(e,t,n){return this._vvFactory.readVariables(e,t,n)}},{key:"writeVisualVariables",value:function(e,t,n,r){t[n]=this._vvFactory.writeVariables(e,r)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;var e,t=Vt(this.visualVariables);try{for(t.s();!(e=t.n()).done;){if(e.value.arcadeRequired)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"hasVisualVariables",value:function(e,t){return e?!!this.getVisualVariablesForType(e,t):!!(this.getVisualVariablesForType("size",t)||this.getVisualVariablesForType("color",t)||this.getVisualVariablesForType("opacity",t)||this.getVisualVariablesForType("rotation",t))}},{key:"getVisualVariablesForType",value:function(e,t){var n=this.visualVariables;if(n){var r=n.filter((function(n){return n.type===e&&("string"==typeof t?n.target===t:!1!==t||!n.target)}));return r&&0===r.length?void 0:r}}},{key:"collectVVRequiredFields",value:(t=Ut(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],this.visualVariables&&(r=r.concat(this.visualVariables)),i=Vt(r),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=17;break}if(o=a.value,e.t0=o,!e.t0){e.next=15;break}if(o.field&&Object(h.d)(t,n,o.field),o.normalizationField&&Object(h.d)(t,n,o.normalizationField),e.t1=o.valueExpression,!e.t1){e.next=15;break}return e.next=15,Object(h.a)(t,n,o.valueExpression);case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(3),i.e(e.t2);case 22:return e.prev=22,i.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,19,22,25]])}))),function(e,n){return t.apply(this,arguments)})}]),r}(e);return Object(i.a)([Object(s.b)({types:[D],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),Object(i.a)([Object(u.a)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),Object(i.a)([Object(l.a)("visualVariables")],t.prototype,"writeVisualVariables",null),t=Object(i.a)([Object(c.a)("esri.renderers.mixins.VisualVariablesMixin")],t)}},"vn/o":function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o.set(a=e[t],i),i+=a.length;return o}},o={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},vqnv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("8uAX"),i=function e(t){Wt(this,e),this.channel=t,this.id=Object(r.a)()}},vuI0:function(e,t,n){"use strict";function r(e){var t={};for(var n in e)if("declaredClass"!==n){var i=e[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[n]=[];for(var a=0;a<i.length;a++)t[n][a]=r(i[a])}else"object"==typeof i?i.toJSON&&(t[n]=JSON.stringify(i)):t[n]=i}return t}n.d(t,"a",(function(){return r}))},"w/y1":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I")),o=n("WbKI"),s=n("Gj5k"),u=n("+opI"),c=n("r88o"),l=n("04ZG"),h=n("Cduq"),f=n("zlDU"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("qRWG")),d=n("XdUx"),v=n("moES"),y=(n("zqDF"),n("W4Nn")),b=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).customValues=null,e}return Zt(n,[{key:"clone",value:function(){return new r({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}}]),n}(y.a);Object(i.a)([Object(o.b)({type:[Number],json:{write:!0}})],b.prototype,"customValues",void 0);var g,m=b=r=Object(i.a)([Object(l.a)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],b),w=n("hvLT"),O=n("0pea"),j=a.a.getLogger("esri.renderers.visualVariables.SizeVariable"),_=new u.a({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),x=new u.a({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function k(e){if(null!=e)return"string"==typeof e||"number"==typeof e?Object(p.k)(e):"size"===e.type?Object(w.c)(e)?e:(delete(e=Nt({},e)).type,new M(e)):void 0}function S(e,t,n){if("object"!=typeof e)return e;var r=new M;return r.read(e,n),r}var M=g=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).axis=null,r.legendOptions=null,r.normalizationField=null,r.scaleBy=null,r.target=null,r.type="size",r.useSymbolValue=null,r.valueExpression=null,r.valueRepresentation=null,r.valueUnit=null,r}return Zt(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:O.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(e){j.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}},{key:"index",set:function(e){Object(w.c)(this.maxSize)&&(this.maxSize.index="visualVariables[".concat(e,"].maxSize")),Object(w.c)(this.minSize)&&(this.minSize.index="visualVariables[".concat(e,"].minSize")),this._set("index",e)}},{key:"inputValueType",get:function(){return Object(w.a)(this)}},{key:"maxDataValue",set:function(e){e&&this.stops&&(j.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}},{key:"maxSize",set:function(e){e&&this.stops&&(j.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}},{key:"castMaxSize",value:function(e){return k(e)}},{key:"readMaxSize",value:function(e,t,n){return S(e,0,n)}},{key:"minDataValue",set:function(e){e&&this.stops&&(j.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}},{key:"minSize",set:function(e){e&&this.stops&&(j.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}},{key:"castMinSize",value:function(e){return k(e)}},{key:"readMinSize",value:function(e,t,n){return S(e,0,n)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})):e&&(j.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}},{key:"transformationType",get:function(){return Object(w.b)(this,this.inputValueType)}},{key:"readValueExpression",value:function(e,t){return e||t.expression&&"$view.scale"}},{key:"writeValueExpressionWebScene",value:function(e,t,n,r){if("$view.scale"===e){if(r&&r.messages){var i=this.index;r.messages.push(new f.a("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof i?i:"visualVariables[".concat(i,"]"))+".valueExpression",context:r}))}}else t[n]=e}},{key:"readValueUnit",value:function(e){return e?x.read(e):null}},{key:"clone",value:function(){return new g({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Object(w.c)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Object(w.c)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(e){return e.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"flipSizes",value:function(){if("clamped-linear"===this.transformationType){var e=this.minSize,t=this.maxSize;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){for(var n=this.stops,r=n.map((function(e){return e.size})).reverse(),i=n.length,a=0;a<i;a++)n[a].size=r[a];return this}return this}},{key:"getAttributeHash",value:function(){return"".concat(Dt(en(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.target,"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(d.a);Object(i.a)([Object(o.b)({readOnly:!0})],M.prototype,"cache",null),Object(i.a)([Object(o.b)({type:_.apiValues,json:{type:_.jsonValues,origins:{"web-map":{read:!1}},read:_.read,write:_.write}})],M.prototype,"axis",void 0),Object(i.a)([Object(o.b)({type:String,value:null,json:{read:!1}})],M.prototype,"expression",null),Object(i.a)([Object(o.b)()],M.prototype,"index",null),Object(i.a)([Object(o.b)({type:String,readOnly:!0})],M.prototype,"inputValueType",null),Object(i.a)([Object(o.b)({type:m,json:{write:!0}})],M.prototype,"legendOptions",void 0),Object(i.a)([Object(o.b)({type:Number,value:null,json:{write:!0}})],M.prototype,"maxDataValue",null),Object(i.a)([Object(o.b)({type:Number,value:null,json:{write:!0}})],M.prototype,"maxSize",null),Object(i.a)([Object(s.a)("maxSize")],M.prototype,"castMaxSize",null),Object(i.a)([Object(c.a)("maxSize")],M.prototype,"readMaxSize",null),Object(i.a)([Object(o.b)({type:Number,value:null,json:{write:!0}})],M.prototype,"minDataValue",null),Object(i.a)([Object(o.b)({type:Number,value:null,json:{write:!0}})],M.prototype,"minSize",null),Object(i.a)([Object(s.a)("minSize")],M.prototype,"castMinSize",null),Object(i.a)([Object(c.a)("minSize")],M.prototype,"readMinSize",null),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],M.prototype,"normalizationField",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],M.prototype,"arcadeRequired",null),Object(i.a)([Object(o.b)({type:String})],M.prototype,"scaleBy",void 0),Object(i.a)([Object(o.b)({type:[v.a],value:null,json:{write:!0}})],M.prototype,"stops",null),Object(i.a)([Object(o.b)({type:["outline"],json:{write:!0}})],M.prototype,"target",void 0),Object(i.a)([Object(o.b)({type:String,readOnly:!0})],M.prototype,"transformationType",null),Object(i.a)([Object(o.b)({type:["size"],json:{type:["sizeInfo"]}})],M.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],M.prototype,"useSymbolValue",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],M.prototype,"valueExpression",void 0),Object(i.a)([Object(c.a)("valueExpression",["valueExpression","expression"])],M.prototype,"readValueExpression",null),Object(i.a)([Object(h.a)("web-scene","valueExpression")],M.prototype,"writeValueExpressionWebScene",null),Object(i.a)([Object(o.b)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],M.prototype,"valueRepresentation",void 0),Object(i.a)([Object(o.b)({type:x.apiValues,json:{write:x.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],M.prototype,"valueUnit",void 0),Object(i.a)([Object(c.a)("valueUnit")],M.prototype,"readValueUnit",null),M=g=Object(i.a)([Object(l.a)("esri.renderers.visualVariables.SizeVariable")],M),t.a=M},w6Td:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t,n){Wt(this,e),this._module=t,this._loadModule=n}var t;return Zt(e,[{key:"get",value:function(){return this._module}},{key:"reload",value:(t=Ut(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadModule();case 2:return this._module=e.sent,e.abrupt("return",this._module);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},"wEd+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n("YyOG"),i=n("ss0y");function a(e){return o.apply(this,arguments)}function o(){return(o=Ut(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.indexOf("-vector")>-1?t.slice(0,t.indexOf("-vector")):t,e.next=5,Object(r.a)("esri/t9n/basemaps");case 5:return i=e.sent,e.abrupt("return",i[t]||i[n]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s={streets:{id:"streets",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},wNOj:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return b})),n("wSAH");var r,i=n("6S2I"),a=n("TDcG"),o=[],s=i.a.getLogger("esri.core.Accessor");function u(e){void 0!==r&&r.onObservableAccessed(e)}var c=!1,l=!1;function h(e,t,n){if(c)return f(e,t,n);p(e);var r=t.call(n);return d(),r}function f(e,t,n){var r=c;c=!0,p(e);var i=null;try{i=t.call(n)}catch(a){l&&s.error(a)}return d(),c=r,i}function p(e){r=e,o.push(e)}function d(){var e=o.pop();r=o.length>0?o[o.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function v(e,t){if(!(32&t.flags)){var n=l;l=!1,64&t.flags?f(t,t.metadata.get,e):b(e,t),l=n}}var y=[];function b(e,t){128&t.flags||(t.flags|=128,f(t,(function(){var n,r=Vt(t.metadata.dependsOn||y);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof i&&-1===i.indexOf("."))g(e,i,!1);else for(var o=Object(a.f)(i),s=0,u=e;s<o.length&&null!=u&&"object"==typeof u;++s)u=g(u,o[s],s!==o.length-1)}}catch(c){r.e(c)}finally{r.f()}})),t.flags&=-129)}function g(e,t,n){var r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){var i=parseInt(r,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.getItemAt(i)}var o=Object(a.a)(e),s=null==o?void 0:o.properties.get(r);return s&&(u(s),v(e,s)),n?e[r]:void 0}},wSAH:function(e,t,n){"use strict";var r,i,a,o,s,u=n("3r0u");function c(e){return"function"==typeof a[e]?a[e]=a[e](u.a):a[e]}a=null!=(r=u.a.dojoConfig)&&r.has||null!=(i=u.a.esriConfig)&&i.has?Nt(Nt({},null==(o=u.a.dojoConfig)?void 0:o.has),null==(s=u.a.esriConfig)?void 0:s.has):{},c.add=function(e,t,n,r){return(r||void 0===a[e])&&(a[e]=t),n&&c(e)},c.cache=a,c.add("esri-deprecation-warnings",!0),function(){c.add("host-webworker",void 0!==u.a.WorkerGlobalScope&&self instanceof u.a.WorkerGlobalScope);var e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(c.add("host-browser",e),c.add("host-node","object"==typeof u.a.process&&u.a.process.versions&&u.a.process.versions.node&&u.a.process.versions.v8),c.add("dom",e),c("host-browser")){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r);if(c.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),c.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),c.add("khtml",r.indexOf("Konqueror")>=0?i:void 0),c.add("edge",parseFloat(n.split("Edge/")[1])||void 0),c.add("opr",parseFloat(n.split("OPR/")[1])||void 0),c.add("webkit",!c("wp")&&!c("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),c.add("chrome",!c("edge")&&!c("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),c.add("android",!c("wp")&&parseFloat(n.split("Android ")[1])||void 0),c.add("safari",!(r.indexOf("Safari")>=0)||c("wp")||c("chrome")||c("android")||c("edge")||c("opr")?void 0:parseFloat(r.split("Version/")[1])),c.add("mac",r.indexOf("Macintosh")>=0),c.add("quirks","BackCompat"===document.compatMode),!c("wp")&&n.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));c.add(a,s),c.add("ios",s)}c.add("trident",parseFloat(r.split("Trident/")[1])||void 0),c.add("svg","undefined"!=typeof SVGAngle),c("webkit")||(n.indexOf("Opera")>=0&&c.add("opera",i>=9.8&&parseFloat(n.split("Version/")[1])||i),!(n.indexOf("Gecko")>=0)||c("wp")||c("khtml")||c("trident")||c("edge")||c.add("mozilla",i),c("mozilla")&&c.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}}(),function(){if(u.a.navigator){var e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),n=e.match(/iPhone/i);t&&c.add("esri-mobile",t),n&&c.add("esri-iPhone",n),c.add("esri-geolocation",!!navigator.geolocation)}c.add("esri-canvas-svg-support",!c("trident")),c.add("esri-wasm","WebAssembly"in u.a),c.add("esri-shared-array-buffer",(function(){return"SharedArrayBuffer"in u.a&&!(!1===u.a.crossOriginIsolated)})),c.add("esri-atomics","Atomics"in u.a),c.add("esri-workers","Worker"in u.a),c.add("esri-text-decoder","TextDecoder"in u.a),c.add("esri-text-encoder","TextEncoder"in u.a),c.add("featurelayer-snapshot-enabled",!0),c.add("featurelayer-snapshot-point-min-threshold",8e4),c.add("featurelayer-snapshot-point-max-threshold",4e5),c.add("featurelayer-snapshot-point-coverage",.1),c.add("featurelayer-advanced-symbols",!1),c.add("featurelayer-pbf",!0),c.add("featurelayer-pbf-statistics",!1),c.add("feature-layers-workers",!0),c.add("mapview-transitions-duration",200),c.add("mapserver-pbf-enabled",!1),c("host-webworker")||c("host-browser")&&(c.add("csp-restrictions",(function(){try{new Function}catch(e){return!0}return!1})),c.add("esri-image-decode",(function(){if("decode"in new Image){var e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((function(){c.add("esri-image-decode",!0,!0,!0)})).catch((function(){c.add("esri-image-decode",!1,!0,!0)}))}return!1})),c.add("esri-url-encodes-apostrophe",(function(){var e=u.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),c.add("vectortilelayer-max-buffers",(function(){return c("ff")?160:Number.POSITIVE_INFINITY})))}(),t.a=c},wSjz:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("srIe")),a=(n("6S2I"),n("zqDF"),n("WbKI")),o=n("RI0u"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("lh0l")),c=n("9quj"),l=function(e){Kt(n,e);var t=Xt(n);function n(e){return Wt(this,n),t.call(this,e)}return Zt(n,[{key:"clone",value:function(){}}]),n}(n("ag7Y").a);Object(r.a)([Object(a.b)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l.prototype,"type",void 0);var h,f=l=Object(r.a)([Object(s.a)("esri.symbols.patterns.Pattern3D")],l),p=h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="style",r.style="solid",r}return Zt(n,[{key:"clone",value:function(){return new h({style:this.style})}}]),n}(f);Object(r.a)([Object(a.b)({type:["style"]})],p.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],p.prototype,"style",void 0);var d,v=p=h=Object(r.a)([Object(s.a)("esri.symbols.patterns.StylePattern3D")],p),y={types:{key:"type",base:f,typeMap:{style:v}},json:{read:function(e,t,n){if(!e)return e;switch(e.type){case"style":var r=new v;return r.read(e,n),r}},write:!0}},b=n("CPZo"),g=n("o685"),m=d=function(e){Kt(n,e);var t=Xt(n);function n(){return Wt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"clone",value:function(){return new d({color:Object(i.k)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})}}]),n}(g.a);Object(r.a)([Object(o.a)({multiply:"multiply",replace:"replace",tint:"tint"})],m.prototype,"colorMixMode",void 0);var w,O=m=d=Object(r.a)([Object(s.a)("esri.symbols.support.Symbol3DFillMaterial")],m),j=n("vJSZ"),_=w=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="fill",r.material=null,r.pattern=null,r.castShadows=!0,r.outline=null,r.edges=null,r}return Zt(n,[{key:"clone",value:function(){return new w({edges:Object(i.k)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:Object(i.k)(this.material)?this.material.clone():null,pattern:Object(i.k)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:Object(i.k)(this.outline)?this.outline.clone():null})}}],[{key:"fromSimpleFillSymbol",value:function(e){return new w({material:{color:(e.color||b.b).clone()},pattern:e.style&&"solid"!==e.style?new v({style:e.style}):null,outline:e.outline?new j.a({size:e.outline.width||0,color:(e.outline.color||b.c).clone()}):null})}}]),n}(u.a);Object(r.a)([Object(o.a)({Fill:"fill"},{readOnly:!0})],_.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:O,json:{write:!0}})],_.prototype,"material",void 0),Object(r.a)([Object(a.b)(y)],_.prototype,"pattern",void 0),Object(r.a)([Object(a.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_.prototype,"castShadows",void 0),Object(r.a)([Object(a.b)({type:j.a,json:{write:!0}})],_.prototype,"outline",void 0),Object(r.a)([Object(a.b)(c.a)],_.prototype,"edges",void 0),_=w=Object(r.a)([Object(s.a)("esri.symbols.FillSymbol3DLayer")],_),t.a=_},wdpY:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return te})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return f})),n.d(t,"l",(function(){return j})),n.d(t,"m",(function(){return A})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return P})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return H})),n.d(t,"r",(function(){return W})),n.d(t,"s",(function(){return J})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return Z})),n.d(t,"v",(function(){return ee}));var r=n("nR38"),i=n("srIe"),a=n("zlDU"),o=n("WXCn"),s=n("gvqN"),u=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function l(e,t){if(null!=e&&null!=t){var n,r=Vt(Array.isArray(e)?e:[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(h(u,i,t),"visualVariables"in i&&i.visualVariables){var a,o=Vt(i.visualVariables);try{for(o.s();!(a=o.n()).done;){var s=a.value;h(c,s,t)}}catch(l){o.e(l)}finally{o.f()}}}}catch(l){r.e(l)}finally{r.f()}}}function h(e,t,n){if(e){var i,a=Vt(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Object(r.b)(o,t),u=s&&"function"!=typeof s&&g(n,s);u&&Object(r.c)(o,u.name,t)}}catch(c){a.e(c)}finally{a.f()}}}function f(e,t){if(null!=e&&null!=t)if("startField"in e){var n=g(t,e.startField),r=g(t,e.endField);e.startField=n&&n.name||null,e.endField=r&&r.name||null}else{var i=g(t,e.startTimeField),a=g(t,e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=a&&a.name||null}}var p=new Set;function d(e,t){return e&&t?(p.clear(),v(p,e,t),Array.from(p).sort()):[]}function v(e,t,n){if(n)if(t&&t.length)if(n.includes("*")){var r,i=Vt(t);try{for(i.s();!(r=i.n()).done;){var a=r.value.name;e.add(a)}}catch(h){i.e(h)}finally{i.f()}}else{var o,s=Vt(n);try{for(s.s();!(o=s.n()).done;){y(e,t,o.value)}}catch(h){s.e(h)}finally{s.f()}}else{if(n.includes("*"))return e.clear(),void e.add("*");var u,c=Vt(n);try{for(c.s();!(u=c.n()).done;){var l=u.value;e.add(l)}}catch(h){c.e(h)}finally{c.f()}}}function y(e,t,n){if(t&&t.length){var r=g(t,n);r&&e.add(r.name)}else"string"==typeof n&&e.add(n)}function b(e,t){return Object(i.j)(t)||Object(i.j)(e)?[]:t.includes("*")?e.map((function(e){return e.name})):t}function g(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.name.toLowerCase()===t)return i}}catch(a){r.e(a)}finally{r.f()}}return null}function m(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.name.toLowerCase()===t)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function w(e,t,n){return O.apply(this,arguments)}function O(){return(O=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(s.e)();case 4:i=e.sent,a=i.arcadeUtils,o=a.extractFieldNames(r),u=Vt(o);try{for(u.s();!(c=u.n()).done;)l=c.value,y(t,n,l)}catch(h){u.e(h)}finally{u.f()}case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t=e.displayField,n=e.fields;return t||(n&&n.length?_(n,"name-or-title")||_(n,"unique-identifier")||_(n,"type-or-category")||function(e){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r&&r.name){var i=r.name.toLowerCase();if(i.indexOf("name")>-1||i.indexOf("title")>-1)return r.name}}}catch(a){n.e(a)}finally{n.f()}return null}(n):null)}function _(e,t){var n,r=Vt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.valueType&&i.valueType===t)return i.name}}catch(a){r.e(a)}finally{r.f()}return null}function x(e,t){return k.apply(this,arguments)}function k(){return(k=Ut(regeneratorRuntime.mark((function e(t,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return i=n.fields,a=Object(r.b)("elevationInfo.featureExpressionInfo",n),e.abrupt("return",a?a.collectRequiredFields(t,i):void 0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return M.apply(this,arguments)}function M(){return(M=Ut(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&r&&"cluster"===r.type&&r.fields,!e.t0){e.next=4;break}return e.next=4,Promise.all(r.fields.map((function(e){return(r=Ut(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.outStatistic.onStatisticValueExpression?w(t,n,r.outStatistic.onStatisticValueExpression):t.add(r.outStatistic.onStatisticField);case 1:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})(t,n.fields,e);var r})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return T.apply(this,arguments)}function T(){return(T=Ut(regeneratorRuntime.mark((function e(t,r,o){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&(r.timeInfo&&Object(i.k)(o)&&o.timeExtent&&v(t,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),r.floorInfo&&v(t,r.fields,[r.floorInfo.floorField]),Object(i.k)(o)&&Object(i.k)(o.where)&&o.where&&"1=1"!==o.where))){e.next=7;break}return e.next=3,n.e(6).then(n.bind(null,"ZqIb"));case 3:if((s=e.sent.WhereClause.create(o.where,r.fieldsIndex)).isStandardized){e.next=6;break}throw new a.a("fieldUtils:collectFilterFields","Where clause is not standardized");case 6:v(t,r.fields,s.fieldNames);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){if(!e)return[];var t="editFieldsInfo"in e&&e.editFieldsInfo;return t?d(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function C(e,t){return E.apply(this,arguments)}function E(){return(E=Ut(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.labelingInfo,i=n.fields,e.t0=r&&r.length,!e.t0){e.next=5;break}return e.next=5,Promise.all(r.map((function(e){return(n=Ut(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(i=r.getLabelExpression(),a=r.where,"arcade"!==i.type){e.next=8;break}return e.next=6,w(t,n,i.expression);case 6:e.next=10;break;case 8:(o=i.expression.match(/{[^}]*}/g))&&o.forEach((function(e){y(t,n,e.slice(1,-1))}));case 10:s=/['"]+/g,a&&(3===(u=a.split(" ")).length&&y(t,n,u[0].replace(s,"")),7===u.length&&(y(t,n,u[0].replace(s,"")),y(t,n,u[4].replace(s,""))));case 12:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(t,i,e);var n})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var t=e.defaultValue;return void 0!==t&&G(e,t)?t:e.nullable?null:void 0}function R(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function D(e){return null===e||R(e)}var L="isInteger"in Number?Number.isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function N(e){return null===e||L(e)}function F(e){return null!=e&&"string"==typeof e}function z(e){return null===e||F(e)}function V(){return!0}function G(e,t){var n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=e.nullable?N:L;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?D:R;break;case"string":case"esriFieldTypeString":n=e.nullable?z:F;break;default:n=V}return 1===arguments.length?n:n(t)}var U,B,q=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function H(e){return null!=e&&q.has(e.type)}function W(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function J(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function Z(e,t){return e.nullable&&null===t?null:H(e)&&!function(e,t){var n="string"==typeof e?K(e):e;return!!n&&(n.isInteger?L(t)&&t>=n.min&&t<=n.max:t>=n.min&&t<=n.max)}(e.type,Number(t))?U.OUT_OF_RANGE:G(e,t)?e.domain?Object(o.e)(e.domain,t):null:B.INVALID_TYPE}function K(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Y;case"esriFieldTypeInteger":case"integer":return X;case"esriFieldTypeSingle":case"single":return Q;case"esriFieldTypeDouble":case"double":return $}}(U||(U={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",(B||(B={})).INVALID_TYPE="type-validation-error::invalid-type";var Y={min:-32768,max:32767,isInteger:!0},X={min:-2147483648,max:2147483647,isInteger:!0},Q={min:-34e37,max:12e37,isInteger:!1},$={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function ee(e,t,n){switch(e){case o.a.INVALID_CODED_VALUE:return"Value ".concat(n," is not in the coded domain - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case o.a.VALUE_OUT_OF_RANGE:return"Value ".concat(n," is out of the range of valid values - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case B.INVALID_TYPE:return"Value ".concat(n," is not a valid value for the field type - field: ").concat(t.name,", type: ").concat(t.type,", nullable: ").concat(t.nullable);case U.OUT_OF_RANGE:var r=K(t.type),i=r.min,a=r.max;return"Value ".concat(n," is out of range for the number type - field: ").concat(t.name,", type: ").concat(t.type,", value range is ").concat(i," to ").concat(a)}}function te(e,t){return!function(e,t,n){if(!t||!t.attributes||!e){if(Object(i.k)(n)){var r,a=Vt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n.add(o)}}catch(f){a.e(f)}finally{a.f()}}return!0}var s,u=t.attributes,c=!1,l=Vt(e);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(!(h in u)){if(c=!0,!Object(i.k)(n))break;n.add(h)}}}catch(f){l.e(f)}finally{l.f()}return c}(e,t,null)}},wg3g:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return f}));var r=n("f/qv"),i=n("srIe"),a=(n("xkkJ"),n("l4ZG")),o=n("OKTS"),s=n("qRWG"),u=n("zcE2");function c(e,t){return e.events.on("drag",function(e,t){var n=null,r=null;return function(a){if("cancel"!==a.action){var o={action:a.action,screenStart:a.start,screenEnd:a.screenPoint};"start"===a.action&&Object(i.j)(n)&&(n=new O,r=new O,t(e,n,r,a.pointerType,o)),Object(i.k)(n)&&n.execute(o),"end"===a.action&&Object(i.k)(n)&&(n=null,r=null)}else Object(i.k)(r)&&(r.execute({action:"cancel"}),n=null,r=null)}}(e,t))}function l(e,t){var n=[e.x,e.y,e.z],r=t,i=[Math.cos(r),Math.sin(r)],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(0===a)return null;i[0]/=a,i[1]/=a;var o=function(e){var t=(e.x-n[0])*i[0]+(e.y-n[1])*i[1];e.x=n[0]+t*i[0],e.y=n[1]+t*i[1]};return function(e){return o(e.mapStart),o(e.mapEnd),e}}function h(e){return function(e,t){var n=null,r=Object(i.k)(e[t])?e[t].spatialReference:null;return function(o){if("start"===o.action&&Object(i.k)(e[t])&&(n=function(e,t){return Object(i.j)(e)||"mesh"===e.type?null:e.spatialReference.equals(t)?e.clone():Object(a.a)(e,t)?Object(a.d)(e,t):null}(e[t],o.mapStart.spatialReference)),Object(i.j)(n))return null;var s=o.mapEnd.x-o.mapStart.x,c=o.mapEnd.y-o.mapStart.y,l=o.mapEnd.z-o.mapStart.z,h=Object(u.d)(n.clone(),s,c,l);return e[t]=h.spatialReference.equals(r)?h:Object(a.d)(h,r),Nt(Nt({},o),{},{translationX:s,translationY:c,translationZ:l})}}(e,"geometry")}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=null,o=Object(i.k)(t)&&!e.spatialReference.equals(t)?function(e){return Object(i.k)(e)?Object(a.d)(e,t):e}:function(e){return e},s=Nt({exclude:[]},n);return function(t){if("start"===t.action&&(r=o(e.toMap(t.screenStart,s))),Object(i.j)(r))return null;var n=o(e.toMap(t.screenEnd,s));return Object(i.k)(n)?Nt(Nt({},t),{},{mapStart:r,mapEnd:n}):null}}function p(e){var t=e.map((function(e){return Object(i.q)(h(e))})).filter((function(e){return Object(i.k)(e)}));return function(e){var n=e.mapEnd.x-e.mapStart.x,r=e.mapEnd.y-e.mapStart.y,i=e.mapEnd.z-e.mapStart.z;return t.forEach((function(t){return t(e)})),Nt(Nt({},e),{},{translationX:n,translationY:r,translationZ:i})}}function d(e,t){var n,i=new Map,a=Vt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.set(o,Object(r.a)(e[o]))}}catch(s){a.e(s)}finally{a.f()}return function(t){return i.forEach((function(t,n){e[n]=t})),t}}function v(e){return d(e,["geometry"])}function y(e){var t=e.map((function(e){return Object(i.q)(v(e))})).filter((function(e){return Object(i.k)(e)}));return function(e){return t.forEach((function(t){return t(e)})),e}}function b(e){var t=Object(i.k)(e.symbol)?e.symbol.clone():null;return function(n){return e.symbol=t,n}}function g(){var e=0,t=0,n=0;return function(r){"start"===r.action&&(e=r.mapStart.x,t=r.mapStart.y,n=r.mapStart.z);var i=r.mapEnd.x-e,a=r.mapEnd.y-t,o=r.mapEnd.z-n;return e=r.mapEnd.x,t=r.mapEnd.y,n=r.mapEnd.z,Nt(Nt({},r),{},{mapDeltaX:i,mapDeltaY:a,mapDeltaZ:o,mapDeltaSpatialReference:r.mapStart.spatialReference})}}function m(){var e=0,t=0;return function(n){"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);var r=n.screenEnd.x-e,i=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,Nt(Nt({},n),{},{screenDeltaX:r,screenDeltaY:i})}}function w(e,t){var n=null,r=0,i=0;return function(a){if("start"===a.action&&((n=e.toScreen(t)).x<0||n.x>e.width||n.y<0||n.y>e.height?n=null:(r=a.screenStart.x-n.x,i=a.screenStart.y-n.y)),null==n)return null;var u=Object(o.c)(a.screenEnd.x-r,0,e.width),c=Object(o.c)(a.screenEnd.y-i,0,e.height),l=Object(s.f)(u,c);return a.screenStart=n,a.screenEnd=l,a}}var O=function(){function e(){Wt(this,e),this.execute=function(){}}return Zt(e,[{key:"next",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return Object(i.k)(t)&&(this.execute=function(e){var r=t(e);Object(i.k)(r)&&n.execute(r)}),n}}]),e}()},wk6I:function(e,t,n){"use strict";var r=n("rvq7");t.a=function(){function e(t,n){Wt(this,e),this._storage=new r.b,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return Zt(e,[{key:"put",value:function(e,t,n){this._storage.put(e,t,n,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}()},wkZP:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=(n("6S2I"),n("zqDF"),n("WbKI")),s=n("+opI"),u=n("r88o"),c=n("04ZG"),l=n("Cduq"),h=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),f=n("H9eC"),p=n("YXST"),d=n("ezna"),v=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Zt(n,[{key:"readExpression",value:function(e,t){return t.value?Object(d.a)(t.value):e}},{key:"writeExpression",value:function(e,t,n){null!=this.value&&(e=Object(d.a)(this.value)),t[n]=e}},{key:"clone",value:function(){return new r({expression:this.expression,title:this.title,value:this.value})}}]),n}(h.a);Object(i.a)([Object(o.b)({type:String,json:{write:{allowNull:!0}}})],v.prototype,"expression",void 0),Object(i.a)([Object(u.a)("expression",["expression","value"])],v.prototype,"readExpression",null),Object(i.a)([Object(l.a)("expression")],v.prototype,"writeExpression",null),Object(i.a)([Object(o.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],v.prototype,"title",void 0),Object(i.a)([Object(o.b)({json:{read:!1,write:!1}})],v.prototype,"value",void 0);var y,b=v=r=Object(i.a)([Object(c.a)("esri.layers.support.LabelExpressionInfo")],v),g=n("psH3"),m=new s.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function w(e){return!e||"service"!==e.origin&&!O(e.layer)}function O(e){return"map-image"===(null==e?void 0:e.type)}function j(e){var t,n;return!!O(e)&&!(null==(t=e.capabilities)||null==(n=t.exportMap)||!n.supportsArcadeExpressionForLabeling)}var _=y=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).type="label",r.name=null,r.deconflictionStrategy="static",r.labelExpression=null,r.labelExpressionInfo=null,r.labelPlacement=null,r.maxScale=0,r.minScale=0,r.symbol=g.a,r.useCodedValues=void 0,r.where=null,r}return Zt(n,[{key:"readLabelExpression",value:function(e,t){var n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e}},{key:"writeLabelExpression",value:function(e,t,n){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(d.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var r=Object(d.e)(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}null!=e&&(t[n]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,n,r){if(null==e&&null!=this.labelExpression&&w(r))e=new b({expression:this.getLabelExpressionArcade()});else if(!e)return;var i=e.toJSON(r);i.expression&&(t[n]=i)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(d.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(d.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(d.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new y({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(a.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(a.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var n=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){switch(t){case"=":return e==n;case"<>":return e!=n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n}return!1}));try{if(null==e)return!0;var r=e.split(" ");if(3===r.length)return n(t[r[0]],r[1],r[2]);if(7===r.length){var i=n(t[r[0]],r[1],r[2]),a=r[3],o=n(t[r[4]],r[5],r[6]);switch(a){case"AND":return i&&o;case"OR":return i||o}}return!1}catch(r){console.log("Error.: can't parse = "+e)}}}]),n}(h.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],_.prototype,"name",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],_.prototype,"deconflictionStrategy",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:{overridePolicy:function(e,t,n){return this.labelExpressionInfo&&"service"===(null==n?void 0:n.origin)&&j(n.layer)?{enabled:!1}:{allowNull:!0}}}}})],_.prototype,"labelExpression",void 0),Object(i.a)([Object(u.a)("labelExpression")],_.prototype,"readLabelExpression",null),Object(i.a)([Object(l.a)("labelExpression")],_.prototype,"writeLabelExpression",null),Object(i.a)([Object(o.b)({type:b,json:{write:{overridePolicy:function(e,t,n){return function(e){return w(e)||j(e.layer)}(n)?{allowNull:!0}:{enabled:!1}}}}})],_.prototype,"labelExpressionInfo",void 0),Object(i.a)([Object(l.a)("labelExpressionInfo")],_.prototype,"writeLabelExpressionInfo",null),Object(i.a)([Object(o.b)({type:m.apiValues,json:{type:m.jsonValues,read:m.read,write:m.write}})],_.prototype,"labelPlacement",void 0),Object(i.a)([Object(o.b)({type:Number})],_.prototype,"maxScale",void 0),Object(i.a)([Object(l.a)("maxScale")],_.prototype,"writeMaxScale",null),Object(i.a)([Object(o.b)({type:Number})],_.prototype,"minScale",void 0),Object(i.a)([Object(l.a)("minScale")],_.prototype,"writeMinScale",null),Object(i.a)([Object(o.b)({types:f.i,json:{origins:{"web-scene":{types:f.j,write:p.b,default:null}},write:p.b,default:null}})],_.prototype,"symbol",void 0),Object(i.a)([Object(o.b)({type:Boolean,json:{write:!0}})],_.prototype,"useCodedValues",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],_.prototype,"where",void 0),_=y=Object(i.a)([Object(c.a)("esri.layers.support.LabelClass")],_),t.a=_},wsls:function(e,t){e.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},wtEh:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("OIYi"),i=n("UBvB");function a(e,t){e.fragment.include(i.a),3===t.output?(e.extensions.add("GL_OES_standard_derivatives"),e.fragment.code.add(r.a(It||(It=Rt(["\n      float _calculateFragDepth(const in float depth) {\n        // calc polygon offset\n        const float SLOPE_SCALE = 2.0;\n        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)\n        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));\n        float result = depth + SLOPE_SCALE * m + BIAS;\n        return clamp(result, .0, .999999);\n      }\n\n      void outputDepth(float _linearDepth) {\n        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));\n      }\n    "]))))):1===t.output&&e.fragment.code.add(r.a(Tt||(Tt=Rt(["\n      void outputDepth(float _linearDepth) {\n        gl_FragColor = float2rgba(_linearDepth);\n      }\n    "]))))}},xHih:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}));var r=n("6S2I"),i=n("TDcG"),a=n("ftD4"),o=n("zlDU"),s=n("ku/q"),u=n("tQ+6"),c=r.a.getLogger("esri.core.accessorSupport.write");function l(e,t,n,r,i,a){if(!r||!r.write)return!1;var l=e.get(n);if(!i&&r.write.overridePolicy){var h=r.write.overridePolicy.call(e,l,n,a);void 0!==h&&(i=h)}if(i||(i=r.write),!i||!1===i.enabled)return!1;if((null===l&&!i.allowNull||void 0===l)&&i.isRequired){var f=new o.a("web-document-write:property-required","Missing value for required property '".concat(n,"' on '").concat(e.declaredClass,"'"),{propertyName:n,target:e});return f&&a&&a.messages?a.messages.push(f):f&&!a&&c.error(f.name,f.message),!1}return!(void 0===l||null===l&&!i.allowNull||function(e,t,n,r,i){var a=r.default;if(void 0===a)return!1;if(null!=r.defaultEquals)return r.defaultEquals(i);if("function"==typeof a){if(Array.isArray(i)){var o=a.call(e,t,n);return Object(u.c)(o,i)}return!1}return a===i}(e,n,a,r,l)||void 0===r.default&&!i.ignoreOrigin&&a&&a.origin&&t.store.originOf(n)<Object(s.d)(a.origin))}function h(e,t,n,r){var o=Object(i.a)(e),s=o.metadatas,u=Object(a.d)(s[t],r);return!!u&&l(e,o,t,u,n,r)}function f(e,t,n){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return Object(i.c)(t,e.toJSON());var r=Object(i.a)(e),o=r.metadatas,u=function(u){var c=Object(a.d)(o[u],n);if(!l(e,r,u,c,void 0,n))return"continue";var p=e.get(u),d=function(e,t,n,r,i){var a,o,s={};return null==(a=t.write)||null==(o=a.writer)||o.call(e,r,s,n,i),s}(e,c,c.write&&"string"==typeof c.write.target?c.write.target:u,p,n);Object.keys(d).length>0&&(t=Object(i.c)(t,d),null!=n&&null!=(h=n.resources)&&null!=(f=h.pendingOperations)&&f.length&&Promise.all(n.resources.pendingOperations).then((function(){return Object(i.c)(t,d)})),n&&n.writtenProperties&&n.writtenProperties.push({target:e,propName:u,oldOrigin:Object(s.c)(r.store.originOf(u)),newOrigin:n.origin}))};for(var c in o){var h,f;u(c)}return t}},xMJK:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("X2wA"),i=Object(r.b)((function(e){var t;void 0!==(t=function(){var e=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,n=t?t.byteLength:0;if(e<n)return t;for(var r=512;r<e;)r<<=1;for(var i=new Uint8Array(r),a=0;a<n;++a)i[a]=t[a];return this.buffer=i},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var n=t+e;!this.eof&&this.bufferLength<n;)this.readBlock();var r=this.bufferLength;n>r&&(n=r)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(t,n)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,n){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,n)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}();return function(){if(!self||!self.Uint32Array)return null;var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function o(e){throw new Error(e)}function s(t){var n=0,r=t[n++],i=t[n++];-1!=r&&-1!=i||o("Invalid header in flate stream"),8!=(15&r)&&o("Unknown compression method in flate stream"),((r<<8)+i)%31!=0&&o("Bad FCHECK in flate stream"),32&i&&o("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,e.call(this)}return(s.prototype=Object.create(e.prototype)).getBits=function(e){for(var t,n=this.codeSize,r=this.codeBuf,i=this.bytes,a=this.bytesPos;n<e;)void 0===(t=i[a++])&&o("Bad encoding in flate stream"),r|=t<<n,n+=8;return t=r&(1<<e)-1,this.codeBuf=r>>e,this.codeSize=n-=e,this.bytesPos=a,t},s.prototype.getCode=function(e){for(var t=e[0],n=e[1],r=this.codeSize,i=this.codeBuf,a=this.bytes,s=this.bytesPos;r<n;){var u;void 0===(u=a[s++])&&o("Bad encoding in flate stream"),i|=u<<r,r+=8}var c=t[i&(1<<n)-1],l=c>>16,h=65535&c;return(0==r||r<l||0==l)&&o("Bad encoding in flate stream"),this.codeBuf=i>>l,this.codeSize=r-l,this.bytesPos=s,h},s.prototype.generateHuffmanTable=function(e){for(var t=e.length,n=0,r=0;r<t;++r)e[r]>n&&(n=e[r]);for(var i=1<<n,a=new Uint32Array(i),o=1,s=0,u=2;o<=n;++o,s<<=1,u<<=1)for(var c=0;c<t;++c)if(e[c]==o){var l=0,h=s;for(r=0;r<o;++r)l=l<<1|1&h,h>>=1;for(r=l;r<i;r+=u)a[r]=o<<16|c;++s}return[a,n]},s.prototype.readBlock=function(){function e(e,t,n,r,i){for(var a=e.getBits(n)+r;a-- >0;)t[d++]=i}var s=this.getBits(3);if(1&s&&(this.eof=!0),0!=(s>>=1)){var u,c;if(1==s)u=i,c=a;else if(2==s){for(var l=this.getBits(5)+257,h=this.getBits(5)+1,f=this.getBits(4)+4,p=Array(t.length),d=0;d<f;)p[t[d++]]=this.getBits(3);for(var v=this.generateHuffmanTable(p),y=0,b=(d=0,l+h),g=new Array(b);d<b;){var m=this.getCode(v);16==m?e(this,g,2,3,y):17==m?e(this,g,3,3,y=0):18==m?e(this,g,7,11,y=0):g[d++]=y=m}u=this.generateHuffmanTable(g.slice(0,l)),c=this.generateHuffmanTable(g.slice(l,b))}else o("Unknown block type in flate stream");for(var w=(E=this.buffer)?E.length:0,O=this.bufferLength;;){var j=this.getCode(u);if(j<256)O+1>=w&&(w=(E=this.ensureBuffer(O+1)).length),E[O++]=j;else{if(256==j)return void(this.bufferLength=O);var _=(j=n[j-=257])>>16;_>0&&(_=this.getBits(_)),y=(65535&j)+_,j=this.getCode(c),(_=(j=r[j])>>16)>0&&(_=this.getBits(_));var x=(65535&j)+_;O+y>=w&&(w=(E=this.ensureBuffer(O+y)).length);for(var k=0;k<y;++k,++O)E[O]=E[O-x]}}}else{var S,M=this.bytes,I=this.bytesPos;void 0===(S=M[I++])&&o("Bad block header in flate stream");var T=S;void 0===(S=M[I++])&&o("Bad block header in flate stream"),T|=S<<8,void 0===(S=M[I++])&&o("Bad block header in flate stream");var A=S;void 0===(S=M[I++])&&o("Bad block header in flate stream"),(A|=S<<8)!=(65535&~T)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var C=this.bufferLength,E=this.ensureBuffer(C+T),P=C+T;this.bufferLength=P;for(var R=C;R<P;++R){if(void 0===(S=M[I++])){this.eof=!0;break}E[R]=S}this.bytesPos=I}},s}()}())&&(e.exports=t)}))},xRQN:function(e,t,n){"use strict";t.a=function(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}},xRv2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OIYi");function i(e){e.vertex.code.add(r.a(At||(At=Rt(["\n    const float PI = 3.141592653589793;\n  "])))),e.fragment.code.add(r.a(Ct||(Ct=Rt(["\n    const float PI = 3.141592653589793;\n    const float LIGHT_NORMALIZATION = 1.0 / PI;\n    const float INV_PI = 0.3183098861837907;\n    const float HALF_PI = 1.570796326794897;\n    "]))))}},xSgX:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I")),a=n("WbKI"),o=n("Gj5k"),s=n("r88o"),u=n("ACjl"),c=n("04ZG"),l=n("Cduq"),h=n("4EHJ"),f=(n("ju1D"),n("9AIY"),n("/PL2")),p=n("LE9a"),d=n("DZP5"),v=n("lh0l"),y=n("BcU2"),b=n("wSjz"),g=n("YAUP"),m=n("fX31"),w=n("AiS/"),O=n("jWZj"),j=n("4bvo"),_=n("OteC"),x=n("qVey"),k=n("FuAX"),S=n("tyRe"),M=n("UFqC"),I={icon:g.a,object:j.a,line:O.a,path:_.a,fill:b.a,extrude:y.a,text:x.a,water:k.a},T=p.a.ofType({base:v.a,key:"type",typeMap:I,errorContext:"symbol-layer"}),A=i.a.getLogger("esri.symbols.Symbol3D"),C=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;Wt(this,n),(r=t.call(this,e)).styleOrigin=null,r.thumbnail=null,r.type=null;var i=r.__accessor__&&r.__accessor__.metadatas&&r.__accessor__.metadatas.symbolLayers;return r._set("symbolLayers",new(i&&i.type||p.a)),r}return Zt(n,[{key:"color",get:function(){return null},set:function(e){A.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(e){Object(m.b)(e,this._get("symbolLayers"))}},{key:"readStyleOrigin",value:function(e,t,n){if(e.styleUrl&&e.name){var r=Object(f.a)(e.styleUrl,n);return new S.a({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new S.a({portal:n&&n.portal||w.a.getDefault(),styleName:e.styleName,name:e.name});n&&n.messages&&n.messages.push(new u.a("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}},{key:"writeStyleOrigin",value:function(e,t,n,r){if(e.styleUrl&&e.name){var i=Object(f.e)(e.styleUrl,r);Object(h.s)(i)&&(i=Object(h.C)(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!Object(h.r)(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new u.a("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}},{key:"normalizeCtorArgs",value:function(e){return e instanceof v.a||e&&I[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}}]),n}(d.a);Object(r.a)([Object(a.b)({json:{read:!1,write:!1}})],C.prototype,"color",null),Object(r.a)([Object(a.b)({type:T,nonNullable:!0,json:{write:!0}}),Object(o.a)(m.a)],C.prototype,"symbolLayers",null),Object(r.a)([Object(a.b)({type:S.a})],C.prototype,"styleOrigin",void 0),Object(r.a)([Object(s.a)("styleOrigin")],C.prototype,"readStyleOrigin",null),Object(r.a)([Object(l.a)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],C.prototype,"writeStyleOrigin",null),Object(r.a)([Object(a.b)({type:M.a,json:{read:!1}})],C.prototype,"thumbnail",void 0),Object(r.a)([Object(a.b)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],C.prototype,"type",void 0),C=Object(r.a)([Object(c.a)("esri.symbols.Symbol3D")],C),t.a=C},xazm:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("+opI"),i=n("qatw"),a=new r.a({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),o=new r.a({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function s(e){var t=e.toJSON(),n=t.geometries,r=t.bevelRatio,s=t.offsetDistance,u=t.offsetHow,c=t.offsetUnit,l={bevelRatio:r,offsetDistance:s};return n&&n.length&&(l.geometries=JSON.stringify({geometryType:Object(i.c)(n[0]),geometries:n}),l.sr=JSON.stringify(n[0].spatialReference)),u&&(l.offsetHow=a.toJSON(u)),c&&(l.offsetUnit=o.toJSON(c)),l}},"xk++":function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("f/qv")),o=n("srIe"),s=(n("6S2I"),n("zqDF")),u=n("WbKI"),c=n("Gj5k"),l=n("+opI"),h=n("04ZG"),f=n("Cduq"),p=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),d=n("WZb1"),v=n("SuVq"),y=n("qatw"),b=n("4GrV"),g=n("ZYtI"),m=n("Ykwf"),w=n("AtWh"),O=n("875+"),j=new l.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),_=new l.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),x=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).aggregateIds=null,r.cacheHint=void 0,r.datumTransformation=null,r.distance=void 0,r.dynamicDataSource=void 0,r.gdbVersion=null,r.geometry=null,r.geometryPrecision=void 0,r.groupByFieldsForStatistics=null,r.having=null,r.historicMoment=null,r.maxAllowableOffset=void 0,r.maxRecordCountFactor=1,r.multipatchOption=null,r.num=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.outStatistics=null,r.parameterValues=null,r.pixelSize=null,r.quantizationParameters=null,r.rangeValues=null,r.relationParameter=null,r.resultType=null,r.returnCentroid=!1,r.returnDistinctValues=!1,r.returnExceededLimitFeatures=!0,r.returnGeometry=!1,r.returnQueryGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.sourceSpatialReference=null,r.spatialRelationship="intersects",r.start=void 0,r.sqlFormat=null,r.text=null,r.timeExtent=null,r.units=null,r.where=null,r}return Zt(n,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var n={};for(var r in e){var i=e[r];n[r]=Array.isArray(i)?i.map((function(e){return e instanceof Date?e.getTime():e})):i instanceof Date?i.getTime():i}t.parameterValues=n}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new r(Object(a.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(o.k)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(s.d)(r,e)}}]),n}(p.a);x.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(i.a)([Object(u.b)({json:{write:!0}})],x.prototype,"aggregateIds",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{writer:function(e,t){null!=e&&(t.cacheHint=e)}}}})],x.prototype,"cacheHint",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],x.prototype,"datumTransformation",void 0),Object(i.a)([Object(c.a)("datumTransformation")],x.prototype,"castDatumTransformation",null),Object(i.a)([Object(u.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],x.prototype,"distance",void 0),Object(i.a)([Object(u.b)({type:m.a,json:{write:!0}})],x.prototype,"dynamicDataSource",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"gdbVersion",void 0),Object(i.a)([Object(u.b)({types:b.e,json:{read:y.a,write:!0}})],x.prototype,"geometry",void 0),Object(i.a)([Object(u.b)({type:Number,json:{write:!0}})],x.prototype,"geometryPrecision",void 0),Object(i.a)([Object(u.b)({type:[String],json:{write:!0}})],x.prototype,"groupByFieldsForStatistics",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"having",void 0),Object(i.a)([Object(u.b)({type:Date})],x.prototype,"historicMoment",void 0),Object(i.a)([Object(f.a)("historicMoment")],x.prototype,"writeHistoricMoment",null),Object(i.a)([Object(u.b)({type:Number,json:{write:!0}})],x.prototype,"maxAllowableOffset",void 0),Object(i.a)([Object(u.b)({type:Number,cast:function(e){return e<1?1:e>r.MAX_MAX_RECORD_COUNT_FACTOR?r.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],x.prototype,"maxRecordCountFactor",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"multipatchOption",void 0),Object(i.a)([Object(u.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],x.prototype,"objectIds",void 0),Object(i.a)([Object(u.b)({type:[String],json:{write:!0}})],x.prototype,"orderByFields",void 0),Object(i.a)([Object(u.b)({type:[String],json:{write:!0}})],x.prototype,"outFields",void 0),Object(i.a)([Object(u.b)({type:d.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],x.prototype,"outSpatialReference",void 0),Object(i.a)([Object(u.b)({type:[O.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(o.k)(this.outStatistics)&&this.outStatistics.length>0}}}}})],x.prototype,"outStatistics",void 0),Object(i.a)([Object(u.b)({json:{write:!0}})],x.prototype,"parameterValues",void 0),Object(i.a)([Object(f.a)("parameterValues")],x.prototype,"writeParameterValues",null),Object(i.a)([Object(u.b)({type:v.a,json:{write:!0}})],x.prototype,"pixelSize",void 0),Object(i.a)([Object(u.b)({type:w.a,json:{write:!0}})],x.prototype,"quantizationParameters",void 0),Object(i.a)([Object(u.b)({type:[Object],json:{write:!0}})],x.prototype,"rangeValues",void 0),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],x.prototype,"relationParameter",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"resultType",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnCentroid",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnDistinctValues",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:!e}}}}})],x.prototype,"returnExceededLimitFeatures",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],x.prototype,"returnGeometry",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnQueryGeometry",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnM",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnZ",void 0),Object(i.a)([Object(u.b)({type:d.a,json:{write:!0}})],x.prototype,"sourceSpatialReference",void 0),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"spatialRel",reader:j.read},write:{target:"spatialRel",writer:j.write}}})],x.prototype,"spatialRelationship",void 0),Object(i.a)([Object(u.b)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),Object(i.a)([Object(f.a)("start"),Object(f.a)("num")],x.prototype,"writeStart",null),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"sqlFormat",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"text",void 0),Object(i.a)([Object(u.b)({type:g.a,json:{write:!0}})],x.prototype,"timeExtent",void 0),Object(i.a)([Object(u.b)({type:String,json:{read:_.read,write:{writer:_.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],x.prototype,"units",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],x.prototype,"where",void 0),Object(i.a)([Object(f.a)("where")],x.prototype,"writeWhere",null),x=r=Object(i.a)([Object(h.a)("esri.tasks.support.Query")],x),t.a=x},xkkJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}));var r=n("srIe");function i(e){return a((function(){return e.forEach((function(e){return Object(r.k)(e)&&e.remove()}))}))}function a(e){return{remove:function(){e&&(e(),e=void 0)}}}function o(e){return a((function(){var t=e();Object(r.k)(t)&&t.remove()}))}function s(e){return a(Object(r.k)(e)?function(){return e.destroy()}:void 0)}},xtdb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("OIYi");function i(e,t){e.fragment.uniforms.add("terrainDepthTexture","sampler2D"),e.fragment.uniforms.add("cameraNearFar","vec2"),e.fragment.uniforms.add("inverseViewport","vec2"),e.fragment.code.add(r.a(Et||(Et=Rt(["\n    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.\n    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){\n\n      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);\n      if(fragmentDepth "," terrainDepth){\n        discard;\n      }\n    }\n  "])),t.cullAboveGround?">":"<="))}function a(e,t,n){n.multipassTerrainEnabled&&n.terrainLinearDepthTexture&&(e.setUniform1i("terrainDepthTexture",10),t.bindTexture(n.terrainLinearDepthTexture,10))}},xvdR:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("srIe"),i=n("evjZ"),a=n("WbKI"),o=n("Jpjp"),s=n("4EHJ"),u=n("ju1D"),c=n("ku/q"),l=n("9AIY"),h=n("/PL2");function f(e){var t=Object(r.k)(e)&&e.origins?e.origins:[void 0];return function(n,u){var f,y=function(e,t,n){if(Object(r.k)(e)&&"resource"===e.type)return function(e,t,n){var a=Object(i.b)(t,n);return{type:String,read:function(e,t,n){var r=Object(h.d)(e,t,n);return a.type===String?r:"function"==typeof a.type?new a.type({url:r}):void 0},write:{writer:function(t,i,u,f){if(!f||!f.resources)return"string"==typeof t?void(i[u]=Object(h.e)(t,f)):void(i[u]=t.write({},f));var y=function(e){return Object(r.j)(e)?null:"string"==typeof e?e:e.url}(t),b=y?Object(h.e)(y,Nt(Nt({},f),{},{verifyItemRelativeUrls:f&&f.verifyItemRelativeUrls?{writtenUrls:f.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null}),1):null,g=a.type!==String&&(!Object(o.a)(this)||f&&f.origin&&this.originIdOf(n)>Object(c.d)(f.origin));f&&f.portalItem&&Object(r.k)(b)&&!Object(s.s)(b)?g?function(e,t,n,r,i,a,o,u){var c=o.portalItem.resourceFromPath(r),h=v(n,r,o);Object(l.a)(h)===Object(s.n)(c.path)?(d(e,t,c,h,o.resources.toUpdate),i[a]=r):p(e,t,n,r,i,a,o,u)}(this,n,t,b,i,u,f,e):function(e,t,n,r){r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(e)}),t[n]=e}(b,i,u,f):f&&f.portalItem&&(Object(r.j)(b)||Object(r.k)(Object(h.b)(b))||Object(s.t)(b)||g)?p(this,n,t,b,i,u,f,e):i[u]=b}}}}(e,t,n);switch(Object(r.k)(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":var a=h.c;return{read:a.read,write:a.write}}}(e,n,u),b=Vt(t);try{for(b.s();!(f=b.n()).done;){var g=f.value,m=Object(a.c)(n,g,u);for(var w in y)m[w]=y[w]}}catch(O){b.e(O)}finally{b.f()}}}function p(e,t,i,a,o,c,h,f){var p,y=Object(u.a)(),b=v(i,a,h),g=Object(s.y)(Object(r.i)(f,"prefix"),y),m="".concat(g,".").concat(Object(l.a)(b)),w=h.portalItem.resourceFromPath(m);Object(s.t)(a)&&h.resources.pendingOperations.push((p=Ut(regeneratorRuntime.mark((function e(t){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,"Lqtk"));case 2:return r=e.sent.default,e.next=5,r(t,{responseType:"blob"});case 5:return i=e.sent,a=i.data,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})(a).then((function(e){w.path="".concat(g,".").concat(Object(l.a)(e)),o[c]=w.itemRelativeUrl})).catch((function(){}))),d(e,t,w,b,h.resources.toAdd),o[c]=w.itemRelativeUrl}function d(e,t,n,r,i){i.push({resource:n,content:r,finish:function(n){!function(e,t,n){"string"==typeof e[t]?e[t]=n.url:e[t].url=n.url}(e,t,n)}})}function v(e,t,n){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(n))],{type:"application/json"})}},"y/NR":function(e,t,n){"use strict";function r(e){return function(t,n){t[n]=e}}n.d(t,"a",(function(){return r}))},y3LX:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("srIe")),o=(n("6S2I"),n("WbKI")),s=n("Gj5k"),u=n("04ZG"),c=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),l=n("qatw"),h=n("4GrV"),f=n("zqDF"),p=n("r88o"),d=n("Cduq"),v=n("SuVq"),y=n("OKTS"),b=n("aAs6"),g=r=function(e){Kt(n,e);var t=Xt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).position=new v.a([0,0,0]),e.heading=0,e.tilt=0,e.fov=55,e}return Zt(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){var i={position:e};return null!=t&&(i.heading=t),null!=n&&(i.tilt=n),null!=r&&(i.fov=r),i}return e}},{key:"writePosition",value:function(e,t,n,r){var i=e.clone();i.x=Object(f.i)(e.x||0),i.y=Object(f.i)(e.y||0),i.z=e.hasZ?Object(f.i)(e.z||0):e.z,t[n]=i.write(null,r)}},{key:"readPosition",value:function(e,t){var n=new v.a;return n.read(e,t),n.x=Object(f.i)(n.x||0),n.y=Object(f.i)(n.y||0),n.z=n.hasZ?Object(f.i)(n.z||0):n.z,n}},{key:"equals",value:function(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}},{key:"clone",value:function(){return new r({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}}]),n}(c.a);Object(i.a)([Object(o.b)({type:v.a,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),Object(i.a)([Object(d.a)("position")],g.prototype,"writePosition",null),Object(i.a)([Object(p.a)("position")],g.prototype,"readPosition",null),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(s.a)((function(e){return b.b.normalize(Object(f.i)(e))}))],g.prototype,"heading",void 0),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(s.a)((function(e){return Object(y.c)(Object(f.i)(e),-180,180)}))],g.prototype,"tilt",void 0),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],g.prototype,"fov",void 0);var m,w=g=r=Object(i.a)([Object(u.a)("esri.Camera")],g),O=m=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).rotation=0,r.scale=0,r.targetGeometry=null,r.camera=null,r}return Zt(n,[{key:"castRotation",value:function(e){return(e%=360)<0&&(e+=360),e}},{key:"clone",value:function(){return new m({rotation:this.rotation,scale:this.scale,targetGeometry:Object(a.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(a.k)(this.camera)?this.camera.clone():null})}}]),n}(c.a);function j(){return{enabled:!this.camera}}Object(i.a)([Object(o.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:j}}}}})],O.prototype,"rotation",void 0),Object(i.a)([Object(s.a)("rotation")],O.prototype,"castRotation",null),Object(i.a)([Object(o.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:j}}}}})],O.prototype,"scale",void 0),Object(i.a)([Object(o.b)({types:h.e,json:{read:l.a,write:!0,origins:{"web-scene":{read:l.a,write:{overridePolicy:j}}}}})],O.prototype,"targetGeometry",void 0),Object(i.a)([Object(o.b)({type:w,json:{write:!0}})],O.prototype,"camera",void 0),O=m=Object(i.a)([Object(u.a)("esri.Viewpoint")],O),t.a=O},yDR0:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},yNaq:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF")),o=n("WbKI"),s=n("04ZG"),u=(n("4EHJ"),n("ju1D"),n("9AIY"),n("ag7Y")),c={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},l=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).contentType=null,r.exifInfo=null,r.id=null,r.globalId=null,r.keywords=null,r.name=null,r.parentGlobalId=null,r.parentObjectId=null,r.size=null,r.url=null,r}return Zt(n,[{key:"orientationInfo",get:function(){var e=function(e){var t=e.exifInfo,n=e.exifName,r=e.tagName;if(!t||!n||!r)return null;var i=t.find((function(e){return e.name===n}));return i?function(e){var t=e.tagName,n=e.tags;if(!n||!t)return null;var r=n.find((function(e){return e.name===t}));return r&&r.value||null}({tagName:r,tags:i.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return c[e]||null}},{key:"clone",value:function(){return new r({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}}]),n}(u.a);Object(i.a)([Object(o.b)({type:String})],l.prototype,"contentType",void 0),Object(i.a)([Object(o.b)()],l.prototype,"exifInfo",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],l.prototype,"orientationInfo",null),Object(i.a)([Object(o.b)({type:a.a})],l.prototype,"id",void 0),Object(i.a)([Object(o.b)({type:String})],l.prototype,"globalId",void 0),Object(i.a)([Object(o.b)({type:String})],l.prototype,"keywords",void 0),Object(i.a)([Object(o.b)({type:String})],l.prototype,"name",void 0),Object(i.a)([Object(o.b)({json:{read:!1}})],l.prototype,"parentGlobalId",void 0),Object(i.a)([Object(o.b)({json:{read:!1}})],l.prototype,"parentObjectId",void 0),Object(i.a)([Object(o.b)({type:a.a})],l.prototype,"size",void 0),Object(i.a)([Object(o.b)({json:{read:!1}})],l.prototype,"url",void 0),l=r=Object(i.a)([Object(s.a)("esri.layers.support.AttachmentInfo")],l),t.a=l},yftL:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("pO5D"),i=n("WbKI"),a=n("04ZG"),o=n("ag7Y"),s=n("nvBr"),u=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments)).enabled=!0,e}return n}(o.a);Object(r.a)([Object(i.b)({type:Boolean})],u.prototype,"enabled",void 0),u=Object(r.a)([Object(a.a)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],u);var c=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).lineSnapper=new u,r.parallelLineSnapper=new u,r.rightAngleSnapper=new u,r.rightAngleTriangleSnapper=new u,r.shortLineThreshold=15,r.distance=5,r.pointThreshold=1e-6,r.intersectionParallelLineThreshold=1e-6,r.parallelLineThreshold=1e-6,r.touchSensitivityMultiplier=1.5,r.pointOnLineThreshold=1e-6,r.orange=new s.a([255,127,0]),r.lineHintWidthReference=3,r.lineHintWidthTarget=3,r.lineHintFadedExtensions=.3,r.parallelLineHintWidth=2,r.parallelLineHintLength=24,r.parallelLineHintOffset=1.5,r.rightAngleHintSize=24,r.rightAngleHintOutlineSize=1.5,r}return n}(o.a);Object(r.a)([Object(i.b)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),Object(r.a)([Object(i.b)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),Object(r.a)([Object(i.b)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),Object(r.a)([Object(i.b)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),Object(r.a)([Object(i.b)({type:s.a,nonNullable:!0})],c.prototype,"orange",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),Object(r.a)([Object(i.b)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0);var l=new(c=Object(r.a)([Object(a.a)("esri.views.interactive.snapping.Settings.Defaults")],c))},yoF8:function(e,t,n){"use strict";t.identity=function(e){return e}},ypgp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t,n){Wt(this,e),n&&(this._config=n.snapshot()),this._program=this.initializeProgram(t),t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(t)}return Zt(e,[{key:"dispose",value:function(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}},{key:"reload",value:function(e){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(e),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}},{key:"program",get:function(){return this._program}},{key:"pipeline",get:function(){return this._pipeline}},{key:"key",get:function(){return this._config.key}},{key:"configuration",get:function(){return this._config}},{key:"bindPass",value:function(e,t,n){}},{key:"bindMaterial",value:function(e,t,n){}},{key:"bindDraw",value:function(e,t,n){}},{key:"bindPipelineState",value:function(e){e.setPipelineState(this.pipeline)}},{key:"ensureAttributeLocations",value:function(e){this.program.assertCompatibleVertexAttributeLocations(e)}},{key:"primitiveType",get:function(){return 4}}]),e}()},yvcr:function(e,t,n){"use strict";var r,i,a=n("Cy1f"),o=n("5DEt"),s=n("R/jG"),u=n("0Kx6");(i=r||(r={})).length=function(e,t){var n=e[t],r=e[t+1],i=e[t+2];return Math.sqrt(n*n+r*r+i*i)},i.normalize=function(e,t){var n=e[t],r=e[t+1],i=e[t+2],a=1/Math.sqrt(n*n+r*r+i*i);e[t]*=a,e[t+1]*=a,e[t+2]*=a},i.scale=function(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n},i.add=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t;(i=i||e)[a]=e[t]+n[r],i[a+1]=e[t+1]+n[r+1],i[a+2]=e[t+2]+n[r+2]},i.subtract=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t;(i=i||e)[a]=e[t]-n[r],i[a+1]=e[t+1]-n[r+1],i[a+2]=e[t+2]-n[r+2]};var c,l,h,f,p=n("EVMh"),d=n("EDiM"),v=n("Ango"),y=r;!function(e){for(var t=.5,n=[[-t,-t,t],[t,-t,t],[t,t,t],[-t,t,t],[-t,-t,-t],[t,-t,-t],[t,t,-t],[-t,t,-t]],r=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],i=[0,0,1,0,1,1,0,1],a=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),o=new Uint16Array(36),s=0;s<6;s++)for(var u=0;u<6;u++)o[6*s+u]=s;for(var c=new Uint16Array(36),l=0;l<6;l++)c[6*l+0]=0,c[6*l+1]=1,c[6*l+2]=2,c[6*l+3]=2,c[6*l+4]=3,c[6*l+5]=0;e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(24),s=0;s<8;s++)t[3*s]=n[s][0]*e[0],t[3*s+1]=n[s][1]*e[1],t[3*s+2]=n[s][2]*e[2];return new v.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:r}],["uv0",{size:2,data:i}]],[["position",a],["normal",o],["uv0",c]])}}(c||(c={})),function(e){var t=.5,n=[[-t,0,-t],[t,0,-t],[t,0,t],[-t,0,t],[0,-t,0],[0,t,0]],r=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],i=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),a=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(18),o=0;o<6;o++)t[3*o]=n[o][0]*e[0],t[3*o+1]=n[o][1]*e[1],t[3*o+2]=n[o][2]*e[2];return new v.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:r}]],[["position",i],["normal",a]])}}(l||(l={})),function(e){var t=.5,n=Object(s.c)(-t,0,-t),r=Object(s.c)(t,0,-t),i=Object(s.c)(0,0,t),a=Object(s.c)(0,.5,0),u=Object(s.b)(),c=Object(s.b)(),l=Object(s.b)(),h=Object(s.b)(),f=Object(s.b)();Object(o.i)(u,n,a),Object(o.i)(c,n,r),Object(o.f)(l,u,c),Object(o.q)(l,l),Object(o.i)(u,r,a),Object(o.i)(c,r,i),Object(o.f)(h,u,c),Object(o.q)(h,h),Object(o.i)(u,i,a),Object(o.i)(c,i,n),Object(o.f)(f,u,c),Object(o.q)(f,f);var p=[n,r,i,a],d=[0,-1,0,l[0],l[1],l[2],h[0],h[1],h[2],f[0],f[1],f[2]],y=[0,1,2,3,1,0,3,2,1,3,0,2],b=[0,0,0,1,1,1,2,2,2,3,3,3];e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(12),n=0;n<4;n++)t[3*n]=p[n][0]*e[0],t[3*n+1]=p[n][1]*e[1],t[3*n+2]=p[n][2]*e[2];return new v.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:d}]],[["position",new Uint16Array(y)],["normal",new Uint16Array(b)]])}}(h||(h={})),function(e){e.createBoxGeometry=c.createGeometry,e.createDiamondGeometry=l.createGeometry,e.createTetrahedronGeometry=h.createGeometry,e.createSphereGeometry=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{uv:!0},i=-Math.PI,a=2*Math.PI,o=-Math.PI/2,s=Math.PI,u=Math.max(3,Math.floor(t)),c=Math.max(2,Math.floor(n)),l=(u+1)*(c+1),h=new Float32Array(3*l),f=new Float32Array(3*l),p=new Float32Array(2*l),d=[],y=0,b=0;b<=c;b++){for(var g=[],m=b/c,w=o+m*s,O=Math.cos(w),j=0;j<=u;j++){var _=j/u,x=i+_*a,k=Math.cos(x)*O,S=Math.sin(w),M=-Math.sin(x)*O;h[3*y]=k*e,h[3*y+1]=S*e,h[3*y+2]=M*e,f[3*y]=k,f[3*y+1]=S,f[3*y+2]=M,p[2*y]=_,p[2*y+1]=m,g.push(y),++y}d.push(g)}var I=new Uint32Array(2*u*(c-1)*3);y=0;for(var T=0;T<c;T++)for(var A=0;A<u;A++){var C=d[T][A],E=d[T][A+1],P=d[T+1][A+1],R=d[T+1][A];0===T?(I[y++]=C,I[y++]=P,I[y++]=R):T===c-1?(I[y++]=C,I[y++]=E,I[y++]=P):(I[y++]=C,I[y++]=E,I[y++]=P,I[y++]=P,I[y++]=R,I[y++]=C)}var D=[["position",I],["normal",I]],L=[["position",{size:3,data:h,exclusive:!0}],["normal",{size:3,data:f,exclusive:!0}]];return r.uv&&(L.push(["uv0",{size:2,data:p,exclusive:!0}]),D.push(["uv0",I])),r.offset&&(D[0][0]="offset",L[0][0]="offset",D.push(["position",new Uint32Array(I.length)]),L.push(["position",{size:3,data:Float64Array.from(r.offset),exclusive:!0}])),new v.a(L,D)},e.createPolySphereGeometry=function(e,t,n){var r,i,a=e;if(n)r=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],i=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]);else{var o=a*(1+Math.sqrt(5))/2;r=[-a,o,0,a,o,0,-a,-o,0,a,-o,0,0,-a,o,0,a,o,0,-a,-o,0,a,-o,o,0,-a,o,0,a,-o,0,-a,-o,0,a],i=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1])}for(var s=0;s<r.length;s+=3)y.scale(r,s,e/y.length(r,s));var u={};function c(t,n){var i;t>n&&(t=(i=[n,t])[0],n=i[1]);var a=t.toString()+"."+n.toString();if(u[a])return u[a];var o=r.length;return r.length+=3,y.add(r,3*t,r,3*n,r,o),y.scale(r,o,e/y.length(r,o)),o/=3,u[a]=o,o}for(var l=0;l<t;l++){for(var h=i.length,f=new Uint32Array(4*h),p=0;p<h;p+=3){var d=i[p],b=i[p+1],g=i[p+2],m=c(d,b),w=c(b,g),O=c(g,d),j=4*p;f[j]=d,f[j+1]=m,f[j+2]=O,f[j+3]=b,f[j+4]=w,f[j+5]=m,f[j+6]=g,f[j+7]=O,f[j+8]=w,f[j+9]=m,f[j+10]=w,f[j+11]=O}i=f,u={}}for(var _=new Float32Array(r),x=0;x<_.length;x+=3)y.normalize(_,x);var k=[["position",i],["normal",i]],S=[["position",{size:3,data:new Float32Array(r),exclusive:!0}],["normal",{size:3,data:_,exclusive:!0}]];return new v.a(S,k)},e.createPointGeometry=function(e,t,n,r,i,a,o){var s=[["position",{size:3,data:t?[t[0],t[1],t[2]]:[0,0,0],exclusive:!0}],["normal",{size:3,data:e?[e[0],e[1],e[2]]:[0,0,1],exclusive:!0}],["uv0",{size:(a=a||[0,0]).length,data:a}],["color",{size:4,data:n?[255*n[0],255*n[1],255*n[2],n.length>3?255*n[3]:255]:[255,255,255,255],exclusive:!0}],["size",{size:2,data:null!=r&&2===r.length?r:[1,1]}]];if(null!=i){var u=new Float32Array([i[0],i[1],i[2],i[3]]);s.push(["auxpos1",{size:4,data:u}])}if(null!=o){var c=new Float32Array([o[0],o[1],o[2],o[3]]);s.push(["auxpos2",{size:4,data:c}])}return new v.a(s,null,1)},e.updatePointGeometry=function(e,t,n,r,i,a,o,s){if(null!=e){var u=s.getMutableAttribute("normal").data;u[0]=e[0],u[1]=e[1],u[2]=e[2]}if(null!=t){var c=s.getMutableAttribute("position").data;c[0]=t[0],c[1]=t[1],c[2]=t[2]}if(null!=n){var l=s.getMutableAttribute("color").data;l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3]}if(null!=r){var h=s.getMutableAttribute("size").data;h[0]=r[0],h[1]=r[1]}if(null!=i){var f=s.getMutableAttribute("auxpos1").data;f[0]=i[0],f[1]=i[1],f[2]=i[2],f[3]=i[3]}if(null!=a){var p=s.getMutableAttribute("uv0").data;p[0]=a[0],p[1]=a[1]}if(null!=o){var d=s.getMutableAttribute("auxpos2").data;d[0]=o[0],d[1]=o[1],d[2]=o[2],d[3]=o[3]}},e.createPointArrayGeometry=function(e,t){for(var n=new Float32Array(3*e.length),r=new Float32Array(t?3*e.length:3),i=new Uint32Array(e.length),a=new Uint32Array(e.length),o=0;o<e.length;o++)n[3*o]=e[o][0],n[3*o+1]=e[o][1],n[3*o+2]=e[o][2],t&&(r[3*o]=t[o][0],r[3*o+1]=t[o][1],r[3*o+2]=t[o][2]),i[o]=o,a[o]=0;return t||(r[0]=0,r[1]=1,r[2]=0),new v.a([["position",{size:3,data:n,exclusive:!0}],["normal",{size:3,data:r,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",i],["normal",t?i:a],["uv0",a]],1)},e.createTriangleGeometry=function(){var e=new Uint16Array([0,1,2]),t=new Uint16Array([0,0,0]),n=new Uint16Array([0,0,0]);return new v.a([["position",{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],["normal",{size:3,data:[0,1,0],exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",e],["normal",t],["uv0",n]])};var t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function n(e,t,n,r,i){return!(Math.abs(Object(o.g)(t,e))>i||(Object(o.f)(n,e,t),Object(o.q)(n,n),Object(o.f)(r,n,e),Object(o.q)(r,r),0))}function r(e,t,r,i,a,o,s){return n(e,t,a,o,s)||n(e,r,a,o,s)||n(e,i,a,o,s)}e.createSquareGeometry=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=new Array(12),r=0;r<4;r++)for(var i=0;i<3;i++)n[3*r+i]=e[r][i];var a=new Uint32Array([0,1,2,2,3,0]),o=new Uint32Array([0,0,0,0,0,0]);return new v.a([["position",{size:3,data:n,exclusive:!0}],["normal",{size:3,data:[0,0,1],exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",a],["normal",o],["uv0",a],["color",o]])},e.createConeGeometry=function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=0,u=t,c=e,l=Object(s.c)(0,o,0),h=Object(s.c)(0,o+c,0),f=Object(s.c)(0,-1,0),p=Object(s.c)(0,1,0);r&&(o=c,h=Object(s.c)(0,0,0),l=Object(s.c)(0,o,0),f=Object(s.c)(0,1,0),p=Object(s.c)(0,-1,0));var d=[h,l],y=[f,p],b=n+2,g=Math.sqrt(c*c+u*u);if(r)for(var m=n-1;m>=0;m--){var w=m*(2*Math.PI/n),O=Object(s.c)(Math.cos(w)*u,o,Math.sin(w)*u);d.push(O);var j=Object(s.c)(c*Math.cos(w)/g,-u/g,c*Math.sin(w)/g);y.push(j)}else for(var _=0;_<n;_++){var x=_*(2*Math.PI/n),k=Object(s.c)(Math.cos(x)*u,o,Math.sin(x)*u);d.push(k);var S=Object(s.c)(c*Math.cos(x)/g,u/g,c*Math.sin(x)/g);y.push(S)}var M=new Uint32Array(2*(n+2)*3),I=new Uint32Array(2*(n+2)*3),T=0,A=0;if(i){for(var C=3;C<d.length;C++)M[T++]=1,M[T++]=C-1,M[T++]=C,I[A++]=0,I[A++]=0,I[A++]=0;M[T++]=d.length-1,M[T++]=2,M[T++]=1,I[A++]=0,I[A++]=0,I[A++]=0}if(a){for(var E=3;E<d.length;E++)M[T++]=E,M[T++]=E-1,M[T++]=0,I[A++]=E,I[A++]=E-1,I[A++]=1;M[T++]=0,M[T++]=2,M[T++]=d.length-1,I[A++]=1,I[A++]=2,I[A++]=y.length-1}for(var P=new Float32Array(3*b),R=0;R<b;R++)P[3*R]=d[R][0],P[3*R+1]=d[R][1],P[3*R+2]=d[R][2];for(var D=new Float32Array(3*b),L=0;L<b;L++)D[3*L]=y[L][0],D[3*L+1]=y[L][1],D[3*L+2]=y[L][2];return new v.a([["position",{size:3,data:P,exclusive:!0}],["normal",{size:3,data:D,exclusive:!0}]],[["position",M],["normal",I]])},e.createCylinderGeometry=function(e,t,n,r,i,a){var u=r?Object(s.a)(r):Object(s.c)(1,0,0),c=i?Object(s.a)(i):Object(s.c)(0,0,0);a=null==a||a;var l=Object(s.b)();Object(o.q)(l,u);var h=Object(s.b)();Object(o.d)(h,l,Math.abs(e));var f=Object(s.b)();Object(o.d)(f,h,-.5),Object(o.e)(f,f,c);var p=Object(s.c)(0,1,0);Math.abs(1-Object(o.g)(l,p))<.2&&Object(o.v)(p,0,0,1);var d=Object(s.b)();Object(o.f)(d,l,p),Object(o.q)(d,d),Object(o.f)(p,d,l);var y=2*n+(a?2:0),b=n+(a?2:0),g=new Float32Array(3*y),m=new Float32Array(3*b),w=new Float32Array(2*y),O=new Uint32Array(3*n*(a?4:2)),j=new Uint32Array(3*n*(a?4:2));a&&(g[3*(y-2)+0]=f[0],g[3*(y-2)+1]=f[1],g[3*(y-2)+2]=f[2],w[2*(y-2)]=0,w[2*(y-2)+1]=0,g[3*(y-1)+0]=g[3*(y-2)+0]+h[0],g[3*(y-1)+1]=g[3*(y-2)+1]+h[1],g[3*(y-1)+2]=g[3*(y-2)+2]+h[2],w[2*(y-1)]=1,w[2*(y-1)+1]=1,m[3*(b-2)+0]=-l[0],m[3*(b-2)+1]=-l[1],m[3*(b-2)+2]=-l[2],m[3*(b-1)+0]=l[0],m[3*(b-1)+1]=l[1],m[3*(b-1)+2]=l[2]);for(var _=function(e,t,n){O[e]=t,j[e]=n},x=0,k=Object(s.b)(),S=Object(s.b)(),M=0;M<n;M++){var I=M*(2*Math.PI/n);Object(o.d)(k,p,Math.sin(I)),Object(o.d)(S,d,Math.cos(I)),Object(o.e)(k,k,S),m[3*M+0]=k[0],m[3*M+1]=k[1],m[3*M+2]=k[2],Object(o.d)(k,k,t),Object(o.e)(k,k,f),g[3*M+0]=k[0],g[3*M+1]=k[1],g[3*M+2]=k[2],w[2*M+0]=M/n,w[2*M+1]=0,g[3*(M+n)+0]=g[3*M+0]+h[0],g[3*(M+n)+1]=g[3*M+1]+h[1],g[3*(M+n)+2]=g[3*M+2]+h[2],w[2*(M+n)+0]=M/n,w[2*M+1]=1;var T=(M+1)%n;_(x++,M,M),_(x++,M+n,M),_(x++,T,T),_(x++,T,T),_(x++,M+n,M),_(x++,T+n,T)}if(a){for(var A=0;A<n;A++){var C=(A+1)%n;_(x++,y-2,b-2),_(x++,A,b-2),_(x++,C,b-2)}for(var E=0;E<n;E++){var P=(E+1)%n;_(x++,E+n,b-1),_(x++,y-1,b-1),_(x++,P+n,b-1)}}return new v.a([["position",{size:3,data:g,exclusive:!0}],["normal",{size:3,data:m,exclusive:!0}],["uv0",{size:2,data:w,exclusive:!0}]],[["position",O],["normal",j],["uv0",O]])},e.createTubeGeometry=function(t,n,r,i,a){r=r||10,i=null==i||i,Object(p.a)(t.length>1);for(var o=[],s=[],u=0;u<r;u++){o.push([0,-u-1,-(u+1)%r-1]);var c=u/r*2*Math.PI;s.push([Math.cos(c)*n,Math.sin(c)*n])}return e.createPathExtrusionGeometry(s,t,[[0,0,0]],o,i,a)},e.createPathExtrusionGeometry=function(e,t,n,i,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Object(s.c)(0,0,0),h=e.length,f=new Float32Array(t.length*h*3+(6*n.length||0)),p=new Float32Array(t.length*h*3+(n?6:0)),d=(t.length-1)*h*6+3*i.length*2,y=new Uint32Array(d),g=new Uint32Array(d),m=0,w=0,O=0,j=0,_=Object(s.b)(),x=Object(s.b)(),k=Object(s.b)(),S=Object(s.b)(),M=Object(s.b)(),I=Object(s.b)(),T=Object(s.b)(),A=Object(a.e)(),C=Object(s.b)(),E=Object(s.b)(),P=Object(s.b)(),R=Object(s.b)(),D=Object(s.b)(),L=u.e.create();Object(o.v)(C,0,1,0),Object(o.i)(x,t[1],t[0]),Object(o.q)(x,x),c?(Object(o.e)(A,t[0],l),Object(o.q)(k,A)):Object(o.v)(k,0,0,1),r(x,k,C,C,M,k,b),Object(o.j)(S,k),Object(o.j)(R,M);for(var N=0;N<n.length;N++)Object(o.d)(I,M,n[N][0]),Object(o.d)(A,k,n[N][2]),Object(o.e)(I,I,A),Object(o.e)(I,I,t[0]),f[m++]=I[0],f[m++]=I[1],f[m++]=I[2];p[w++]=-x[0],p[w++]=-x[1],p[w++]=-x[2];for(var F=0;F<i.length;F++)y[O++]=i[F][0]>0?i[F][0]:-i[F][0]-1+n.length,y[O++]=i[F][1]>0?i[F][1]:-i[F][1]-1+n.length,y[O++]=i[F][2]>0?i[F][2]:-i[F][2]-1+n.length,g[j++]=0,g[j++]=0,g[j++]=0;for(var z=n.length,V=n.length-1,G=0;G<t.length;G++){var U=!1;G>0&&(Object(o.j)(_,x),G<t.length-1?(Object(o.i)(x,t[G+1],t[G]),Object(o.q)(x,x)):U=!0,Object(o.e)(E,_,x),Object(o.q)(E,E),Object(o.e)(P,t[G-1],S),u.e.fromPositionAndNormal(t[G],E,L),u.e.intersectRay(L,u.f.wrap(P,_),A)?(Object(o.i)(A,A,t[G]),Object(o.q)(k,A),Object(o.f)(M,E,k),Object(o.q)(M,M)):r(E,S,R,C,M,k,b),Object(o.j)(S,k),Object(o.j)(R,M)),c&&(Object(o.e)(A,t[G],l),Object(o.q)(D,A));for(var B=0;B<h;B++)if(Object(o.d)(I,M,e[B][0]),Object(o.d)(A,k,e[B][1]),Object(o.e)(I,I,A),Object(o.q)(T,I),p[w++]=T[0],p[w++]=T[1],p[w++]=T[2],Object(o.e)(I,I,t[G]),f[m++]=I[0],f[m++]=I[1],f[m++]=I[2],!U){var q=(B+1)%h;y[O++]=z+B,y[O++]=z+h+B,y[O++]=z+q,y[O++]=z+q,y[O++]=z+h+B,y[O++]=z+h+q;for(var H=0;H<6;H++)g[j++]=y[O-6+H]-V}z+=h}for(var W=t[t.length-1],J=0;J<n.length;J++)Object(o.d)(I,M,n[J][0]),Object(o.d)(A,k,n[J][1]),Object(o.e)(I,I,A),Object(o.e)(I,I,W),f[m++]=I[0],f[m++]=I[1],f[m++]=I[2];var Z=w/3;p[w++]=x[0],p[w++]=x[1],p[w++]=x[2];for(var K=z-h,Y=0;Y<i.length;Y++)y[O++]=i[Y][0]>=0?z+i[Y][0]:-i[Y][0]-1+K,y[O++]=i[Y][2]>=0?z+i[Y][2]:-i[Y][2]-1+K,y[O++]=i[Y][1]>=0?z+i[Y][1]:-i[Y][1]-1+K,g[j++]=Z,g[j++]=Z,g[j++]=Z;return new v.a([["position",{size:3,data:f,exclusive:!0}],["normal",{size:3,data:p,exclusive:!0}]],[["position",y],["normal",g]])},e.createPolylineGeometry=function(e,t,n){Object(p.a)(e.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Object(p.a)(3===e[0].length,"createPolylineGeometry(): malformed vertex"),Object(p.a)(null==t||t.length===e.length,"createPolylineGeometry: need same number of points and normals"),Object(p.a)(null==t||3===t[0].length,"createPolylineGeometry(): malformed normal");for(var r=new Float64Array(3*e.length),i=new Uint32Array(2*(e.length-1)),a=0,o=0,s=0;s<e.length;s++){for(var u=0;u<3;u++)r[a++]=e[s][u];s>0&&(i[o++]=s-1,i[o++]=s)}var c=[],l=[];if(c.push(["position",i]),l.push(["position",{size:3,data:r,exclusive:!0}]),t){for(var h=new Float32Array(3*t.length),f=0,y=0;y<e.length;y++)for(var b=0;b<3;b++)h[f++]=t[y][b];c.push(["normal",i]),l.push(["normal",{size:3,data:h,exclusive:!0}])}return n&&(l.push(["color",{size:4,data:n}]),c.push(["color",Object(d.d)(n.length/4)])),new v.a(l,c,2)},e.createExtrudedTriangle=function(e,t,n,r){for(var i=new Array(18),a=[[-t,0,r/2],[n,0,r/2],[0,e,r/2],[-t,0,-r/2],[n,0,-r/2],[0,e,-r/2]],o=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]),s=0;s<6;s++)i[3*s]=a[s][0],i[3*s+1]=a[s][1],i[3*s+2]=a[s][2];return new v.a([["position",{size:3,data:i,exclusive:!0}]],[["position",o]])},e.transformInPlace=function(e,t){for(var n=e.getMutableAttribute("position").data,r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=n[r+2];Object(o.v)(g,i,a,s),Object(o.l)(g,g,t),n[r]=g[0],n[r+1]=g[1],n[r+2]=g[2]}},e.cgToGIS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=e.vertexAttributes,r=n.get("position").data,i=n.get("normal").data;if(i)for(var a=t.getMutableAttribute("normal").data,o=0;o<i.length;o+=3){var s=i[o+1];a[o+1]=-i[o+2],a[o+2]=s}if(r)for(var u=t.getMutableAttribute("position").data,c=0;c<r.length;c+=3){var l=r[c+1];u[c+1]=-r[c+2],u[c+2]=l}return t},e.makeOrthoBasisDirUp=n,e.makeOrthoBasisDirUpFallback=r}(f||(f={}));var b=.99619469809,g=Object(s.b)();t.a=f},yx2s:function(e,t,n){"use strict";var r=n("FWf1");t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof r.Subscriber?t:null}return!0}},yyYK:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t){Wt(this,e),this.notify=t,this._accessed=new Set,this._handles=[]}return Zt(e,[{key:"destroy",value:function(){this._accessed.clear(),this.clear()}},{key:"onObservableAccessed",value:function(e){this._accessed.add(e)}},{key:"onTrackingEnd",value:function(){var e,t=Vt(this._accessed);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._handles.push(n.observe(this))}}catch(r){t.e(r)}finally{t.f()}this._accessed.clear()}},{key:"clear",value:function(){var e,t=Vt(this._handles);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}this._handles.length=0}}]),e}()},"z//S":function(e,t,n){"use strict";(function(t){e.exports=function(e,n){return new t(e,n)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,n("tjlA").Buffer)},z5yp:function(e,t,n){"use strict";function r(e){return"string"==typeof e?document.getElementById(e):e}function i(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function a(e,t){var n=t.parentNode;n&&n.insertBefore(e,t)}function o(e,t){for(;;){var n=e.firstChild;if(!n)break;t.appendChild(n)}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),function(){if("function"==typeof Element.prototype.closest)return function(e,t){return e.closest(t)};Element.prototype.matches||Element}()},"zB/H":function(e,t,n){"use strict";var r=n("mbIT"),i=n("GMZp"),a=n("pshJ"),o=n("LBXl");function s(e){return e.reduce((function(e,t){return e.concat(t instanceof o.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,u=this._ctorUnsubscribe,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(a.isFunction(c)){u&&(this._unsubscribe=void 0);try{c.call(this)}catch(d){t=d instanceof o.UnsubscriptionError?s(d.errors):[d]}}if(r.isArray(l)){h=-1;for(var f=l.length;++h<f;){var p=l[h];if(i.isObject(p))try{p.unsubscribe()}catch(d){t=t||[],d instanceof o.UnsubscriptionError?t=t.concat(s(d.errors)):t.push(d)}}}if(t)throw new o.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zBXm:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return window.WebGLRenderingContext?i(e,t,n)||(a(e,s),null):(a(e,o),null)}function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;switch(r){case"webgl":t=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":t=["webgl2"];break;default:t=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}var i,a=null,o=Vt(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;try{a=e.getContext(s,n)}catch(u){}if(a)break}}catch(c){o.e(c)}finally{o.f()}return a}function a(e,t){var n=e.parentNode;n&&(n.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',s='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},zcE2:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u}));var r=n("Mu3I"),i=n("KLE9"),a=n("kYAx");function o(e,t,n,i){if(null==i||e.hasZ||(i=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=i&&(e.z+=i),e;if("multipoint"===e.type){for(var a=e.points,o=0;o<a.length;o++)a[o]=h(a[o],t,n,i);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=i&&(e.zmin+=i,e.zmax+=i),e;for(var s=Object(r.b)(e),u="polyline"===e.type?e.paths:e.rings,c=0;c<s.length;c++)for(var l=s[c],f=0;f<l.length;f++)l[f]=h(l[f],t,n,i);return"paths"in e?e.paths=u:e.rings=u,e}function s(e,t,n,i,a){var s=e.clone(),u=i.resolution;if("point"===s.type){if(a)o(s,t*u,-n*u);else{var c=i.state.transform,l=i.state.inverseTransform,h=c[0]*s.x+c[2]*s.y+c[4],p=c[1]*s.x+c[3]*s.y+c[5];s.x=l[0]*(h+t)+l[2]*(p+n)+l[4],s.y=l[1]*(h+t)+l[3]*(p+n)+l[5]}return s}if("multipoint"===s.type){if(a)o(s,t*u,-n*u);else for(var d=s.points,v=i.state.transform,y=i.state.inverseTransform,b=0;b<d.length;b++){var g=d[b],m=v[0]*g[0]+v[2]*g[1]+v[4],w=v[1]*g[0]+v[3]*g[1]+v[5];d[b]=f(g,y[0]*(m+t)+y[2]*(w+n)+y[4],y[1]*(m+t)+y[3]*(w+n)+y[5],void 0)}return s}if("extent"===s.type){if(a)o(s,t*u,-n*u);else{var O=i.state.transform,j=i.state.inverseTransform,_=O[0]*s.xmin+O[2]*s.ymin+O[4],x=O[1]*s.xmin+O[3]*s.ymin+O[5],k=O[0]*s.xmax+O[2]*s.ymax+O[4],S=O[1]*s.xmax+O[3]*s.ymax+O[5];s.xmin=j[0]*(_+t)+j[2]*(x+n)+j[4],s.ymin=j[1]*(_+t)+j[3]*(x+n)+j[5],s.xmax=j[0]*(k+t)+j[2]*(S+n)+j[4],s.ymax=j[1]*(k+t)+j[3]*(S+n)+j[5]}return s}if(a)o(s,t*u,-n*u);else{for(var M=Object(r.b)(s),I="polyline"===s.type?s.paths:s.rings,T=i.state.transform,A=i.state.inverseTransform,C=0;C<M.length;C++)for(var E=M[C],P=0;P<E.length;P++){var R=E[P],D=T[0]*R[0]+T[2]*R[1]+T[4],L=T[1]*R[0]+T[3]*R[1]+T[5];E[P]=f(R,A[0]*(D+t)+A[2]*(L+n)+A[4],A[1]*(D+t)+A[3]*(L+n)+A[5],void 0)}"paths"in s?s.paths=I:s.rings=I}return s}function u(e,t,n,o){if("point"===e.type){var s=e.x,u=e.y,c=o?o[0]:s,l=o?o[1]:u,h=e.clone(),p=(u-l)*n+l;return h.x=(s-c)*t+c,h.y=p,h}if("multipoint"===e.type){for(var d=Object(r.b)(e),v=Object(a.g)(),y=zt(Object(i.d)(v,[d]),4),b=y[0],g=y[1],m=y[2],w=y[3],O=o?o[0]:(b+m)/2,j=o?o[1]:(w+g)/2,_=e.clone(),x=_.points,k=0;k<x.length;k++){var S=x[k],M=zt(S,2),I=M[0],T=M[1];x[k]=f(S,(I-O)*t+O,(T-j)*n+j,void 0)}return _}if("extent"===e.type){var A=e.xmin,C=e.xmax,E=e.ymin,P=e.ymax,R=o?o[0]:(A+C)/2,D=o?o[1]:(P+E)/2,L=e.clone();if(L.xmin=(A-R)*t+R,L.ymax=(P-D)*n+D,L.xmax=(C-R)*t+R,L.ymin=(E-D)*n+D,L.xmin>L.xmax){var N=L.xmin;L.xmin=L.xmax,L.xmax=N}if(L.ymin>L.ymax){var F=L.ymin;L.ymin=L.ymax,L.ymax=F}return L}for(var z=Object(r.b)(e),V=Object(a.g)(),G=zt(Object(i.d)(V,z),4),U=G[0],B=G[1],q=G[2],H=G[3],W=o?o[0]:(U+q)/2,J=o?o[1]:(H+B)/2,Z=e.clone(),K="polyline"===Z.type?Z.paths:Z.rings,Y=0;Y<z.length;Y++)for(var X=z[Y],Q=0;Q<X.length;Q++){var $=X[Q],ee=zt($,2),te=ee[0],ne=ee[1];K[Y][Q]=f($,(te-W)*t+W,(ne-J)*n+J,void 0)}return"paths"in Z?Z.paths=K:Z.rings=K,Z}function c(e,t,n,r,i,a){var o=Math.sqrt((n-e)*(n-e)+(r-t)*(r-t));return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t))/o}function l(e,t,n,r,i,a){var o=180*Math.atan2(t-r,e-n)/Math.PI;return 180*Math.atan2(t-a,e-i)/Math.PI-o}function h(e,t,n,r){return f(e,e[0]+t,e[1]+n,null!=e[2]&&null!=r?e[2]+r:void 0)}function f(e,t,n,r){var i=[t,n];return e.length>2&&i.push(null!=r?r:e[2]),e.length>3&&i.push(e[3]),i}},zdBc:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return v}));var r=n("nvBr"),i=n("qRWG"),a=n("Lqtk"),o=n("ss0y"),s=n("1/KW"),u=n("1EXT"),c="picture-fill",l="simple-fill",h="simple-marker",f=new s.a(1e3);function p(e){var t=e.style,n=null;if(e)switch(e.type){case h:"cross"!==t&&"x"!==t&&(n=e.color);break;case l:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:Object(o.a)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5});break;case c:n={type:"pattern",src:e.url,width:Object(i.h)(e.width)*e.xscale,height:Object(i.h)(e.height)*e.yscale,x:Object(i.h)(e.xoffset),y:Object(i.h)(e.yoffset)};break;case"text":n=e.color;break;case"cim":n=Object(u.a)(e)}return n}function d(e,t){var n=e+"-"+t;return void 0!==f.get(n)?Promise.resolve(f.get(n)):Object(a.default)(e,{responseType:"image"}).then((function(e){var r=e.data,i=r.naturalWidth,a=r.naturalHeight,o=document.createElement("canvas");o.width=i,o.height=a;var s=o.getContext("2d");s.fillStyle=t,s.fillRect(0,0,i,a),s.globalCompositeOperation="destination-in",s.drawImage(r,0,0);var u=o.toDataURL();return f.put(n,u),u}))}function v(e){if(!e)return null;var t;switch(e.type){case l:case c:case h:t=v(e.outline);break;case"simple-line":var n=Object(i.h)(e.width);"none"!==e.style&&0!==n&&(t={color:e.color,style:b(e.style),width:n,cap:e.cap,join:"miter"===e.join?Object(i.h)(e.miterLimit):e.join});break;default:t=null}return t}var y,b=(y={},function(e){if(y[e])return y[e];var t=e.replace(/-/g,"");return y[e]=t,t}),g=new r.a([128,128,128])},zfKp:function(e,t,n){"use strict";t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},zgsL:function(e,t,n){"use strict";var r=n("pO5D"),i=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),a=n("04ZG"),o=(n("4EHJ"),n("ju1D"),n("9AIY"),n("pqNC")),s=n("/RTN"),u=n("mXvl"),c=n("WmKv"),l=n("9iar"),h=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).elevationInfo=null,r.graphics=new l.b,r.screenSizePerspectiveEnabled=!0,r.type="graphics",r.internal=!1,r}return Zt(n,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return Dt(en(n.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),n}(Object(u.a)(Object(c.a)(o.a)));Object(r.a)([Object(i.b)({type:s.a})],h.prototype,"elevationInfo",void 0),Object(r.a)([Object(i.b)(Object(l.c)())],h.prototype,"graphics",void 0),Object(r.a)([Object(i.b)({type:["show","hide"]})],h.prototype,"listMode",void 0),Object(r.a)([Object(i.b)()],h.prototype,"screenSizePerspectiveEnabled",void 0),Object(r.a)([Object(i.b)({readOnly:!0})],h.prototype,"type",void 0),Object(r.a)([Object(i.b)({constructOnly:!0})],h.prototype,"internal",void 0),h=Object(r.a)([Object(a.a)("esri.layers.GraphicsLayer")],h),t.a=h},zlDU:function(e,t,n){"use strict";var r=n("f/qv"),i=n("6S2I"),a=function(e){Kt(n,e);var t=Xt(n);function n(e,r,i){var a;return Wt(this,n),$t(a=t.call(this,e,r,i))instanceof n?Qt(a):Qt(a,new n(e,r,i))}return Zt(n,[{key:"toJSON",value:function(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(function(e,t){if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(r.a)(t)}catch(n){return"[object]"}})))}}catch(e){throw i.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}}],[{key:"fromJSON",value:function(e){return new n(e.name,e.message,e.details)}}]),n}(n("NCOb").a);a.prototype.type="error",t.a=a},zm0L:function(e,t,n){"use strict";var r=n("pO5D"),i=n("xkkJ"),a=n("04ZG"),o=n("/CmD"),s=function(){function e(){Wt(this,e),this._emitter=new e.EventEmitter(this)}return Zt(e,[{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"once",value:function(e,t){return this._emitter.once(e,t)}},{key:"hasEventListener",value:function(e){return this._emitter.hasEventListener(e)}}]),e}();!function(e){var t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Wt(this,e),this.target=t,this._listenersMap=null}return Zt(e,[{key:"clear",value:function(){this._listenersMap&&this._listenersMap.clear()}},{key:"emit",value:function(e,t){var n=this._listenersMap&&this._listenersMap.get(e);if(!n)return!1;var r=this.target||this;return Bt(n).forEach((function(e){e.call(r,t)})),n.length>0}},{key:"on",value:function(e,t){var n=this;if(Array.isArray(e)){var r=e.map((function(e){return n.on(e,t)}));return Object(i.b)(r)}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);var a=this._listenersMap.get(e)||[];return a.push(t),this._listenersMap.set(e,a),{remove:function(){var r=n._listenersMap&&n._listenersMap.get(e)||[],i=r.indexOf(t);i>=0&&r.splice(i,1)}}}},{key:"once",value:function(e,t){var n=this.on(e,(function(e){n.remove(),t.call(null,e)}));return n}},{key:"hasEventListener",value:function(e){var t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}]),e}();e.EventEmitter=t,e.EventedMixin=function(e){var n=function(e){Kt(r,e);var n=Xt(r);function r(){var e;return Wt(this,r),(e=n.apply(this,arguments))._emitter=new t,e}return Zt(r,[{key:"destroy",value:function(){this._emitter.clear()}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"once",value:function(e,t){return this._emitter.once(e,t)}},{key:"hasEventListener",value:function(e){return this._emitter.hasEventListener(e)}}]),r}(e);return n=Object(r.a)([Object(a.a)("esri.core.Evented")],n)};var n=function(e){Kt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),(e=t.apply(this,arguments))._emitter=new s.EventEmitter($t(e)),e}return Zt(n,[{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"once",value:function(e,t){return this._emitter.once(e,t)}},{key:"hasEventListener",value:function(e){return this._emitter.hasEventListener(e)}}]),n}(o.a);n=Object(r.a)([Object(a.a)("esri.core.Evented")],n),e.EventedAccessor=n}(s||(s={})),t.a=s},zq8J:function(e,t,n){"use strict";var r,i=n("pO5D"),a=(n("wSAH"),n("6S2I"),n("zqDF"),n("WbKI")),o=n("04ZG"),s=(n("4EHJ"),n("ju1D"),n("9AIY"),n("WYax")),u=r=function(e){Kt(n,e);var t=Xt(n);function n(e){var r;return Wt(this,n),(r=t.call(this,e)).image=null,r.type="toggle",r.value=!1,r}return Zt(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),n}(s.a);Object(i.a)([Object(a.b)()],u.prototype,"image",void 0),Object(i.a)([Object(a.b)()],u.prototype,"value",void 0),u=r=Object(i.a)([Object(o.a)("esri.support.Action.ActionToggle")],u),t.a=u},zqDF:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return T})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return I})),n.d(t,"o",(function(){return _})),n.d(t,"p",(function(){return M})),n("wSAH");var r=n("6S2I").a.getLogger("esri.core.Accessor");function i(e){return null==e?e:new Date(e)}function a(e){return null==e?e:!!e}function o(e){return null==e?e:e.toString()}function s(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function u(e){return null==e?e:Math.round(parseFloat(e))}function c(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function l(e,t){return null!=t&&e&&!(t instanceof e)}function h(e){return e&&"isCollection"in e}function f(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function p(e,t){return!!c(t)&&(r.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+v(e)+"'"),!0)}function d(e,t){return null==t?t:h(e)?function(e,t){if(!t||!t.constructor||!h(t.constructor))return p(e,t)?t:new e(t);var n=f(e.prototype.itemType),r=f(t.constructor.prototype.itemType);return n?r?n===r?t:n.prototype.isPrototypeOf(r.prototype)?new e(t):(p(e,t),t):new e(t):t}(e,t):l(e,t)?p(e,t)?t:new e(t):t}function v(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function y(e){switch(e){case Number:return s;case S:return u;case Boolean:return a;case String:return o;case Date:return i;default:return d.bind(null,e)}}function b(e,t){var n=y(e);return 1===arguments.length?n:n(t)}function g(e,t,n){return 1===arguments.length?g.bind(null,e):t?Array.isArray(t)?t.map((function(t){return e(t,n)})):[e(t,n)]:t}function m(e,t){return 1===arguments.length?g(b.bind(null,e)):g(b.bind(null,e),t)}function w(e,t,n){return 0!==t&&Array.isArray(n)?n.map((function(n){return w(e,t-1,n)})):e(n)}function O(e,t,n){if(2===arguments.length)return O.bind(null,e,t);if(!n)return n;for(var r=t,i=n=w(e,t,n);r>0&&Array.isArray(i);)r--,i=i[0];if(void 0!==i)for(var a=0;a<r;a++)n=[n];return n}function j(e,t,n){return 2===arguments.length?O(b.bind(null,e),t):O(b.bind(null,e),t,n)}function _(e){return!!Array.isArray(e)&&!e.some((function(t){var n=typeof t;return!("string"===n||"number"===n||"function"===n&&e.length>1)}))}function x(e,t){if(2===arguments.length)return x(e).call(null,t);var n,i=new Set,a=e.filter((function(e){return"function"!=typeof e})),o=e.filter((function(e){return"function"==typeof e})),s=Vt(e);try{for(s.s();!(n=s.n()).done;){var u=n.value;"string"!=typeof u&&"number"!=typeof u||i.add(u)}}catch(f){s.e(f)}finally{s.f()}var c=null,h=null;return function(e,t){if(null==e)return e;var n=typeof e,s="string"===n||"number"===n;return s&&(i.has(e)||o.some((function(e){return"string"===n&&e===String||"number"===n&&e===Number})))||"object"===n&&o.some((function(t){return!l(e,t)}))?e:(s&&a.length?(c||(c=a.map((function(e){return"string"==typeof e?"'".concat(e,"'"):""+e})).join(", ")),r.error("Accessor#set","'".concat(e,"' is not a valid value for this property, only the following values are valid: ").concat(c))):"object"==typeof e&&o.length?(h||(h=o.map((function(e){return v(e)})).join(", ")),r.error("Accessor#set","'".concat(e,"' is not a valid value for this property, value must be one of ").concat(h))):r.error("Accessor#set","'".concat(e,"' is not a valid value for this property")),t&&(t.valid=!1),null)}}function k(e,t){if(2===arguments.length)return k(e).call(null,t);var n={},i=[],a=[];for(var o in e.typeMap){var s=e.typeMap[o];n[o]=b(s),i.push(v(s)),a.push(o)}var u=function(){return"'".concat(i.join("', '"),"'")},h=function(){return"'".concat(a.join("', '"),"'")},f="string"==typeof e.key?function(t){return t[e.key]}:e.key;return function(t){if(e.base&&!l(e.base,t))return t;if(null==t)return t;var i=f(t)||e.defaultKeyValue,a=n[i];if(!a)return r.error("Accessor#set","Invalid property value, value needs to be one of ".concat(u(),", or a plain object that can autocast (having .type = ").concat(h(),")")),null;if(!l(e.typeMap[i],t))return t;if("string"==typeof e.key&&!c(t)){var o={};for(var s in t)s!==e.key&&(o[s]=t[s]);return a(o)}return a(t)}}var S=function e(){Wt(this,e)},M={native:function(e){return{type:"native",value:e}},array:function(e){return{type:"array",value:e}},oneOf:function(e){return{type:"one-of",values:e}}};function I(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function T(e){switch(e.type){case"native":return b(e.value);case"array":return g(T(e.value));case"one-of":return function(e){var t=null;return function(n,i){return function e(t,n){if(null==t)return!0;switch(n.type){case"native":switch(n.value){case Number:case S:return"number"==typeof t;case Boolean:return"boolean"==typeof t;case String:return"string"==typeof t}return t instanceof n.value;case"array":return!!Array.isArray(t)&&!t.some((function(t){return!e(t,n.value)}));case"one-of":return n.values.some((function(n){return e(t,n)}))}}(n,e)?n:(null==t&&(t=function e(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case S:return"integer";case Date:return"date";default:return v(t.value)}case"array":return"array of "+e(t.value);case"one-of":var n=t.values.map((function(t){return e(t)}));return"one of ".concat(n.slice(0,n.length-1)," or ").concat(n[n.length-1])}return"unknown"}(e)),r.error("Accessor#set","Invalid property value, value needs to be of type "+t),i&&(i.valid=!1),null)}}(e);default:return null}}}}])}();