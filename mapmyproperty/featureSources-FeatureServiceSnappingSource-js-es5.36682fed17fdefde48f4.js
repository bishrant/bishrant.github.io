!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(s){return void n(s)}l.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function l(e){r(o,i,a,l,u,"next",e)}function u(e){r(o,i,a,l,u,"throw",e)}l(void 0)}))}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){l=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{uoBZ:function(e,n,r){"use strict";r.r(n),r.d(n,"FeatureServiceSnappingSource",(function(){return ne}));var l=r("pO5D"),s=(r("wSAH"),r("srIe")),d=(r("6S2I"),r("zqDF"),r("xkkJ")),h=r("WbKI"),b=r("04ZG"),y=(r("4EHJ"),r("ju1D"),r("9AIY"),r("nvss")),v=r("/CmD"),O=r("SuVq"),g=r("N5XI"),w=r("Js3Z"),j=r("kJYu"),k=r("Wf2p"),m=r("XnA0"),I=r("5DEt"),S=r("D8Ta"),H=r("0Kx6");function T(e,t){return H.a.fromAABoundingRect(t.extent,P),H.a.distance(P,Object(I.v)(_,e.x,e.y,0))}var P=H.a.create(),_=Object(S.c)(),R=function(e){f(n,e);var t=p(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).pointOfInterest=null,r}return c(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=Object(s.k)(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort((function(e,n){return T(t,e)-T(t,n)})),e}},{key:"scaleEnabled",value:function(){return Object(m.b)(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}},{key:"tilesCoveringView",get:function(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||Object(s.j)(this.tileInfo))return[];if(!this.scaleEnabled)return[];var e,t=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),n=t.spans,r=t.lodInfo,i=r.level,a=[],l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw a}}}}(n);try{for(l.s();!(e=l.n()).done;)for(var u=e.value,c=u.row,f=u.colFrom,d=u.colTo,p=f;p<=d;p++){var h={id:null,level:i,row:c,col:r.normalizeCol(p)};this.tileInfo.updateTileInfo(h),a.push(h)}}catch(b){l.e(b)}finally{l.f()}return a}},{key:"tileInfo",get:function(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}},{key:"tileSize",get:function(){return Object(s.k)(this.tileInfo)?this.tileInfo.size[0]:256}},{key:"initialize",value:function(){var e=this;this.handles.add(this.watch("view.state.viewpoint",(function(){return e.notifyChange("tilesCoveringView")}),!0))}}]),n}(Object(j.b)(v.a));Object(l.a)([Object(h.b)({readOnly:!0})],R.prototype,"tiles",null),Object(l.a)([Object(h.b)({readOnly:!0})],R.prototype,"scaleEnabled",null),Object(l.a)([Object(h.b)({readOnly:!0})],R.prototype,"tilesCoveringView",null),Object(l.a)([Object(h.b)({readOnly:!0})],R.prototype,"tileInfo",null),Object(l.a)([Object(h.b)({readOnly:!0})],R.prototype,"tileSize",null),Object(l.a)([Object(h.b)({constructOnly:!0})],R.prototype,"view",void 0),Object(l.a)([Object(h.b)({constructOnly:!0})],R.prototype,"layer",void 0),Object(l.a)([Object(h.b)()],R.prototype,"pointOfInterest",void 0),R=Object(l.a)([Object(b.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],R);var x=function(e){f(n,e);var t=p(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).pointOfInterest=null,r}return c(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(Object(s.k)(t))for(var n=e.map((function(e){return T(t,e)})),r=1;r<n.length;r++)if(n[r-1]>n[r])return e.sort((function(e,n){return T(t,e)-T(t,n)})),e.slice();return e}},{key:"tilesCoveringView",get:function(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(E)}},{key:"tileInfo",get:function(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}},{key:"tileSize",get:function(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}},{key:"effectivePointOfInterest",get:function(){var e,t=this.pointOfInterest;return Object(s.k)(t)?t:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}},{key:"initialize",value:function(){var e=this;this.handles.add(Object(g.init)(this.view,"featureTiles",(function(t){e.handles.remove(z),t&&e.handles.add(t.addClient(),z)})))}},{key:"filterTiles",value:function(e){return Object(s.j)(e)?[]:e.filter((function(e){return Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>C&&2===e.measures.visibility}))}}]),n}(j.a);function E(e){var t=a(e.lij,3),n=t[0],r=t[1],i=t[2],o=e.extent;return{id:"".concat(n,"/").concat(r,"/").concat(i),level:n,row:r,col:i,extent:o}}Object(l.a)([Object(h.b)({readOnly:!0})],x.prototype,"tiles",null),Object(l.a)([Object(h.b)({readOnly:!0})],x.prototype,"tilesCoveringView",null),Object(l.a)([Object(h.b)({readOnly:!0})],x.prototype,"tileInfo",null),Object(l.a)([Object(h.b)({readOnly:!0})],x.prototype,"tileSize",null),Object(l.a)([Object(h.b)({constructOnly:!0})],x.prototype,"view",void 0),Object(l.a)([Object(h.b)()],x.prototype,"pointOfInterest",void 0),Object(l.a)([Object(h.b)()],x.prototype,"effectivePointOfInterest",null),x=Object(l.a)([Object(b.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],x);var C=50,z="feature-tiles",M=r("Ehki"),A=r("r0DZ"),D=r("kYAx"),F=r("OKTS"),N=r("nvBr"),J=r("qVey"),U=r("dTMb"),L=r("DXYb"),V=r("Ibpv"),W=r("jWBI"),B=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]],Z=function(e){f(n,e);var t=p(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).updating=!1,r.enablePolygons=!0,r.enableLabels=!0,r._polygons=new Map,r._labels=new Map,r._enabled=!0,r}return c(n,[{key:"initialize",value:function(){this._symbols=B.map((function(e){return new L.a({color:[e[0],e[1],e[2],.6],outline:{color:"black",width:1}})})),this.update()}},{key:"destroy",value:function(){this._enabled=!1,this.clear()}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.update())}},{key:"update",value:function(){var e=this;if(this._enabled){var t=this.getTiles(),n=new Array,r=new Set(this._labels.keys());t.forEach((function(i,a){var o=i.lij.toString();r.delete(o);var l=i.lij[0],u=i.geometry;if(e.enablePolygons&&!e._polygons.has(o)){var c=new W.a({geometry:u,symbol:e._symbols[l%e._symbols.length]});e._polygons.set(o,c),n.push(c)}if(e.enableLabels){var f=function(e){if(Object(s.k)(e.label))return e.label;var t=e.lij.toString();return Object(s.k)(e.loadPriority)&&(t+=" (".concat(e.loadPriority,")")),t}(i),d=a/(t.length-1),p=Object(F.i)(0,200,d),h=Object(F.i)(20,6,d)/.75,b=Object(s.k)(i.loadPriority)&&i.loadPriority>=t.length,y=new N.a([p,b?0:p,b?0:p]),v="3d"===e.view.type?function(){return new U.a({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new J.a({text:f,halo:{color:"white",size:1/.75},material:{color:y},size:h})]})}:function(){return new V.a({text:f,haloColor:"white",haloSize:1/.75,color:y,size:h})};if(e._labels.has(o)){var O=e._labels.get(o),g=v();(Object(s.j)(O.symbol)||JSON.stringify(g)!==JSON.stringify(O.symbol))&&(O.symbol=g)}else{var w=new W.a({geometry:u.extent.center,symbol:v()});e._labels.set(o,w),n.push(w)}}}));var i=new Array;r.forEach((function(t){e._polygons.has(t)&&(i.push(e._polygons.get(t)),e._polygons.delete(t)),e._labels.has(t)&&(i.push(e._labels.get(t)),e._labels.delete(t))})),this.view.graphics.removeMany(i),this.view.graphics.addMany(n)}else this.clear()}},{key:"clear",value:function(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}}]),n}(v.a);Object(l.a)([Object(h.b)({constructOnly:!0})],Z.prototype,"view",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Z.prototype,"updating",void 0),Object(l.a)([Object(h.b)()],Z.prototype,"enabled",null);var q=function(e){f(n,e);var t=p(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).handles=new A.a,r}return c(n,[{key:"initialize",value:function(){var e=this,t=setInterval((function(){return e.fetchDebugInfo()}),2e3);this.handles.add(Object(d.c)((function(){return clearInterval(t)})))}},{key:"destroy",value:function(){this.handles.destroy()}},{key:"getTiles",value:function(){var e=this;if(!this.debugInfo)return[];var t=new Map,n=new Map;this.debugInfo.storedTiles.forEach((function(e){t.set(e.data.id,e.featureCount)})),this.debugInfo.pendingTiles.forEach((function(e){t.set(e.data.id,e.featureCount),n.set(e.data.id,e.state)}));var r=function(e){var r,i=n.get(e),a=null!=(r=t.get(e))?r:"?";return i?"".concat(i,":").concat(a,"\n").concat(e):"store:".concat(a,"\n").concat(e)},i=new Map;return this.debugInfo.storedTiles.forEach((function(e){i.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((function(e){i.set(e.data.id,e.data)})),Array.from(i.values()).map((function(t){return{lij:[t.level,t.row,t.col],geometry:M.a.fromExtent(Object(D.p)(t.extent,e.view.spatialReference)),label:r(t.id)}}))}},{key:"fetchDebugInfo",value:function(){var e=this;this.handle.getDebugInfo(null).then((function(t){e.debugInfo=t,e.update()}))}}]),n}(Z=Object(l.a)([Object(b.a)("esri.views.support.TileTreeDebugger")],Z));Object(l.a)([Object(h.b)({constructOnly:!0})],q.prototype,"handle",void 0),q=Object(l.a)([Object(b.a)("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],q);var Y=r("9MzC"),K=r("dOLD"),X=r("eLqb"),G=function(e){f(h,e);var t,n,r,a,o,l,d=p(h);function h(e){var t;return u(this,h),(t=d.call(this,e)).availability=0,t.workerHandleUpdating=!0,t.editId=0,t}return c(h,[{key:"updating",get:function(){return this.updatingHandles.updating||this.workerHandleUpdating}},{key:"destroy",value:function(){this.workerHandle.destroy()}},{key:"initialize",value:function(){var e=this;this.workerHandle=new Q(this.scheduler),this.handles.add([this.workerHandle.on("notify-updating",(function(t){var n=t.updating;return e.workerHandleUpdating=n})),this.workerHandle.on("notify-availability",(function(t){var n=t.availability;return e._set("availability",n)}))])}},{key:"setup",value:(l=i(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.serviceInfoFromLayer(t.layer),!Object(s.j)(r)){e.next=3;break}return e.abrupt("return");case 3:return i={configuration:this.convertConfiguration(t.configuration),serviceInfo:r,spatialReference:t.spatialReference.toJSON()},e.next=6,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("setup",i,n));case 6:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"configure",value:(o=i(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.convertConfiguration(t),e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("configure",r,n));case 3:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"refresh",value:(a=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("refresh",{},t));case 2:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchCandidates",value:(r=i(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={distance:t.distance,point:t.coordinateHelper.toPoint(t.point,new O.a).toJSON(),types:t.types,filter:Object(s.k)(t.filter)?t.filter.createQuery().toJSON():null},e.abrupt("return",this.workerHandle.invoke(r,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"updateTiles",value:(n=i(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={tiles:t.tiles,tileInfo:Object(s.k)(t.tileInfo)?t.tileInfo.toJSON():null,tileSize:t.tileSize},e.next=3,this.workerHandle.invokeMethod("updateTiles",r,n);case 3:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"applyEdits",value:(t=i(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,l,u,s,c,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.editId++,c={id:s},e.next=3,this.workerHandle.invokeMethod("beginApplyEdits",c,n);case 3:return this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n)),e.next=6,Object(Y.x)(t.result,n);case 6:return f=e.sent,d={id:s,edits:{addedFeatures:null!=(r=null==(i=f.addedFeatures)?void 0:i.map((function(e){return e.objectId})))?r:[],deletedFeatures:null!=(a=null==(o=f.deletedFeatures)?void 0:o.map((function(e){return e.objectId})))?a:[],updatedFeatures:null!=(l=null==(u=f.updatedFeatures)?void 0:u.map((function(e){return e.objectId})))?l:[]}},e.next=10,this.workerHandle.invokeMethod("endApplyEdits",d,n);case 10:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getDebugInfo",value:function(e){return this.workerHandle.invokeMethod("getDebugInfo",{},e)}},{key:"convertConfiguration",value:function(e){return{filter:Object(s.k)(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}},{key:"serviceInfoFromLayer",value:function(e){var t;return"multipatch"===e.geometryType||"mesh"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((function(e){return e.toJSON()})),geometryType:K.a.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}}]),h}(j.a);Object(l.a)([Object(h.b)({constructOnly:!0})],G.prototype,"scheduler",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],G.prototype,"updating",null),Object(l.a)([Object(h.b)({readOnly:!0})],G.prototype,"availability",void 0),Object(l.a)([Object(h.b)()],G.prototype,"workerHandleUpdating",void 0),G=Object(l.a)([Object(b.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],G);var Q=function(e){f(n,e);var t=p(n);function n(e){return u(this,n),t.call(this,"FeatureServiceSnappingSourceWorker","fetchCandidates",e,{strategy:"dedicated"})}return c(n,[{key:"getTransferList",value:function(){return[]}}]),n}(X.a),$=r("UOZ4"),ee=r("3/ME"),te=function(e){f(n,e);var t=p(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).pointOfInterest=null,r}return c(n,[{key:"tiles",get:function(){return[{id:"0/0/0",level:0,row:0,col:0,extent:Object(D.l)(-1e8,-1e8,1e8,1e8)}]}},{key:"tileInfo",get:function(){return new ee.a({origin:new O.a({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new $.a({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}},{key:"tileSize",get:function(){return this.tileInfo.size[0]}}]),n}(v.a);Object(l.a)([Object(h.b)({readOnly:!0})],te.prototype,"tiles",null),Object(l.a)([Object(h.b)({readOnly:!0})],te.prototype,"tileInfo",null),Object(l.a)([Object(h.b)({readOnly:!0})],te.prototype,"tileSize",null),Object(l.a)([Object(h.b)({constructOnly:!0})],te.prototype,"layer",void 0),Object(l.a)([Object(h.b)()],te.prototype,"pointOfInterest",void 0),te=Object(l.a)([Object(b.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],te);var ne=function(e){f(a,e);var n,r=p(a);function a(e){return u(this,a),r.call(this,e)}return c(a,[{key:"updateTilesParameters",get:function(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}},{key:"updating",get:function(){return this.workerHandle.updating||this.updatingHandles.updating}},{key:"configuration",get:function(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}},{key:"availability",get:function(){return this.workerHandle.availability}},{key:"layer",get:function(){return this.layerSource.layer}},{key:"initialize",value:function(){var e=this;if(Object(s.k)(this.view))switch(this.view.type){case"2d":this.tilesOfInterest=new R({view:this.view,layer:this.layer});break;case"3d":this.tilesOfInterest=new x({view:this.view})}else this.tilesOfInterest=new te({layer:this.layer});if(this.workerHandle=new G({scheduler:Object(s.k)(this.view)&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),this.handles.add([Object(d.a)(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,"updateTilesParameters",(function(){return e.workerHandle.updateTiles(e.updateTilesParameters,null)}),2),this.handles.add([Object(y.a)((function(){return e.configuration}),(function(t){return e.workerHandle.configure(t,null)}))]),Object(s.k)(this.view)){var t=this.view;this.handles.add(Object(g.init)(w.a,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",(function(n){n&&!e.debug?(e.debug=new q({view:t,handle:e.workerHandle}),e.handles.add(Object(d.a)(e.debug),"debug")):!n&&e.debug&&e.handles.remove("debug")})))}this.handles.add(this.layerSource.layer.on("apply-edits",(function(t){e.workerHandle.applyEdits(t,null)})))}},{key:"refresh",value:function(){this.workerHandle.refresh(null)}},{key:"fetchCandidates",value:(n=i(regeneratorRuntime.mark((function e(n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tilesOfInterest.pointOfInterest=n.coordinateHelper.toPoint(n.point,new O.a),e.next=3,this.workerHandle.fetchCandidates(t(t({},n),{},{filter:null}),r);case 3:return i=e.sent,a=i.candidates,e.abrupt("return",{candidates:a.map((function(e){return Object(k.a)(e,n.coordinateHelper)}))});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"getDebugInfo",value:function(e){return this.workerHandle.getDebugInfo(e)}}]),a}(Object(j.b)(v.a));Object(l.a)([Object(h.b)({constructOnly:!0})],ne.prototype,"spatialReference",void 0),Object(l.a)([Object(h.b)({constructOnly:!0})],ne.prototype,"layerSource",void 0),Object(l.a)([Object(h.b)({constructOnly:!0})],ne.prototype,"view",void 0),Object(l.a)([Object(h.b)()],ne.prototype,"tilesOfInterest",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],ne.prototype,"updateTilesParameters",null),Object(l.a)([Object(h.b)({readOnly:!0})],ne.prototype,"updating",null),Object(l.a)([Object(h.b)({readOnly:!0})],ne.prototype,"configuration",null),Object(l.a)([Object(h.b)({readOnly:!0})],ne.prototype,"availability",null),ne=Object(l.a)([Object(b.a)("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],ne)}}])}();