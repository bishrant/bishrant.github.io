(function(){var e={"arcgis-js-api/layers/graphics/featureConversionUtils":"+6sX","esri/layers/graphics/featureConversionUtils":"+6sX","arcgis-js-api/layers/graphics/data/timeSupport":"/61J","esri/layers/graphics/OptimizedFeature":"/COu","arcgis-js-api/layers/graphics/OptimizedFeature":"/COu","esri/layers/graphics/data/QueryEngineCapabilities":"4/qq","arcgis-js-api/layers/graphics/data/QueryEngineCapabilities":"4/qq","arcgis-js-api/layers/graphics/data/AttributesBuilder":"700l","arcgis-js-api/layers/graphics/sources/support/clientSideDefaults":"DaHD","esri/layers/graphics/OptimizedGeometry":"Jvs9","arcgis-js-api/layers/graphics/OptimizedGeometry":"Jvs9","arcgis-js-api/layers/graphics/data/spatialQuerySupport":"V1i6","arcgis-js-api/layers/graphics/data/attributeSupport":"Ytki","arcgis-js-api/layers/graphics/data/QueryEngine":"ZooB","arcgis-js-api/layers/graphics/data/QueryEngineResult":"d81A","arcgis-js-api/layers/graphics/contains":"gT/q","esri/layers/graphics/OptimizedFeatureSet":"xJgq","arcgis-js-api/layers/graphics/OptimizedFeatureSet":"xJgq","arcgis-js-api/layers/graphics/data/utils":"zDti","arcgis-js-api/core/sql/WhereClauseCache":"ztx9"},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+6sX":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ma1f"),r("qsST"),r("Lzvl"),r("/COu"),r("xJgq"),r("Jvs9")],void 0===(i=(function(e,t,r,n,i,s,o,a){"use strict";function u(e,t){return e?t?4:3:t?3:2}Object.defineProperty(t,"__esModule",{value:!0}),t.deltaDecodeGeometry=t.deltaEncodeGeometry=t.getQuantizedArea=t.getSignedQuantizedRingArea=t.removeCollinearVectices=t.removeZMValues=t.unquantizeOptimizedGeometry=t.getQuantizedBoundsOptimizedGeometry=t.getBoundsOptimizedGeometry=t.generalizeOptimizedGeometry=t.quantizeOptimizedGeometry=t.quantizeOptimizedFeatureSet=t.unquantizeOptimizedFeatureSet=t.convertFromFeatureSet=t.convertToFeatureSet=t.convertToFeatures=t.convertToGeometry=t.convertFromGeometry=t.convertToFeature=t.convertFromGraphics=t.convertFromFeatures=t.convertFromFeature=t.convertFromNestedArray=t.convertFromPolygon=t.convertToPolygon=t.convertFromPolyline=t.convertFromPolylineFeatures=t.convertToPolyline=t.convertFromMultipoint=t.convertFromMultipointFeatures=t.convertToMultipoint=t.convertToMultipointFeatures=t.convertFromPoint=t.convertFromPointFeatures=t.convertToPoint=t.unquantizeY=t.unquantizeX=t.quantizeY=t.quantizeX=void 0;var l=n.getLogger("esri.tasks.support.optimizedFeatureSet"),c={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},h=function(e,t,r,n,i,s){e[r]=i,e[r+1]=s},d=function(e,t,r,n,i,s){e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},f=function(e,t,r,n,i,s){e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},p=function(e,t,r,n,i,s){e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function y(e,t,r,n){if(e){if(r)return t&&n?p:d;if(t&&n)return f}else if(t&&n)return d;return h}function g(e,t){return Math.round((t-e.translate[0])/e.scale[0])}function m(e,t){return Math.round((e.translate[1]-t)/e.scale[1])}function v(e,t){return t*e.scale[0]+e.translate[0]}function _(e,t){return e.translate[1]-t*e.scale[1]}function F(e){var t=e.coords;return{x:t[0],y:t[1]}}function I(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function b(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function x(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function S(e){var t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function w(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function T(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function R(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function M(e,t){return e&&t?R:e?x:t?w:I}function G(e,t,r,n,i){for(var o=M(r,n),u=0,l=t;u<l.length;u++){var c=l[u],h=c.geometry,d=c.attributes,f=void 0;h&&(f=o(new a.default,h)),e.push(new s.default(f,d,null,d[i]))}return e}function E(e,t,r,n){for(var i=0,s=t;i<s.length;i++){var o=s[i],a=o.geometry,u=o.attributes,l=void 0;a&&(l=P(a,r,n)),e.push({attributes:u,geometry:l})}return e}function P(e,t,r){if(!e)return null;for(var n=u(t,r),i=[],s=0;s<e.coords.length;s+=n){for(var o=[],a=0;a<n;a++)o.push(e.coords[s+a]);i.push(o)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function N(e,t,r,n,i){for(var o=u(r,n),l=0,c=t;l<c.length;l++){var h=c[l],d=h.geometry,f=h.attributes,p=void 0;d&&(p=Q(new a.default,d,o)),e.push(new s.default(p,f,null,f[i]))}return e}function Q(e,t,r){void 0===r&&(r=u(t.hasZ,t.hasM)),e.lengths[0]=t.points.length;for(var n=e.coords,i=0,s=0,o=t.points;s<o.length;s++)for(var a=o[s],l=0;l<r;l++)n[i++]=a[l];return e}function C(e,t,r){if(!e)return null;for(var n=u(t,r),i=e.coords,s=[],o=0,a=0,l=e.lengths;a<l.length;a++){for(var c=l[a],h=[],d=0;d<c;d++){for(var f=[],p=0;p<n;p++)f.push(i[o++]);h.push(f)}s.push(h)}return t?r?{paths:s,hasZ:t,hasM:r}:{paths:s,hasZ:t}:r?{paths:s,hasM:r}:{paths:s}}function O(e,t,r,n,i){for(var o=u(r,n),l=0,c=t;l<c.length;l++){var h=c[l],d=h.geometry,f=h.attributes,p=void 0;d&&(p=z(new a.default,d,o)),e.push(new s.default(p,f,null,f[i]))}return e}function z(e,t,r){void 0===r&&(r=u(t.hasZ,t.hasM));for(var n=e.lengths,i=e.coords,s=0,o=0,a=t.paths;o<a.length;o++){for(var l=a[o],c=0,h=l;c<h.length;c++)for(var d=h[c],f=0;f<r;f++)i[s++]=d[f];n.push(l.length)}return e}function j(e,t,r){if(!e)return null;for(var n=u(t,r),i=e.coords,s=[],o=0,a=0,l=e.lengths;a<l.length;a++){for(var c=l[a],h=[],d=0;d<c;d++){for(var f=[],p=0;p<n;p++)f.push(i[o++]);h.push(f)}s.push(h)}return t?r?{rings:s,hasZ:t,hasM:r}:{rings:s,hasZ:t}:r?{rings:s,hasM:r}:{rings:s}}function A(e,t,r,n,i){for(var o=0,u=t;o<u.length;o++){var l=u[o],c=l.geometry,h=l.centroid,d=l.attributes,f=void 0;c&&(f=q(new a.default,c,r,n)),e.push(new s.default(f,d,h?I(new a.default,h):null,d[i]))}return e}function q(e,t,r,n){return void 0===r&&(r=t.hasZ),void 0===n&&(n=t.hasM),V(e,t.rings,r,n),e}function V(e,t,r,n){var i=u(r,n),s=e.lengths,o=e.coords,a=0;s.length=o.length=0;for(var l=0,c=t;l<c.length;l++){for(var h=c[l],d=0,f=h;d<f.length;d++)for(var p=f[d],y=0;y<i;y++)o[a++]=p[y];s.push(h.length)}return e}t.quantizeX=g,t.quantizeY=m,t.unquantizeX=v,t.unquantizeY=_,t.convertToPoint=function(e,t,r){return e?t?r?T(e):b(e):r?S(e):F(e):null},t.convertFromPointFeatures=G,t.convertFromPoint=function(e,t,r){return void 0===r&&(r=M(null!=t.z,null!=t.m)),r(e,t)},t.convertToMultipointFeatures=E,t.convertToMultipoint=P,t.convertFromMultipointFeatures=N,t.convertFromMultipoint=Q,t.convertToPolyline=C,t.convertFromPolylineFeatures=O,t.convertFromPolyline=z,t.convertToPolygon=j,t.convertFromPolygon=q,t.convertFromNestedArray=V;var D=[],k=[];function Z(e,t,n,i,o,a){if(e.length=0,!n){for(var u=0,c=t;u<c.length;u++){var h=c[u];e.push(new s.default(null,h.attributes,null,h.attributes[a]))}return e}switch(n){case"esriGeometryPoint":return G(e,t,i,o,a);case"esriGeometryMultipoint":return N(e,t,i,o,a);case"esriGeometryPolyline":return O(e,t,i,o,a);case"esriGeometryPolygon":return A(e,t,i,o,a);default:l.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'")),e.length=0}return e}function Y(e,t,n,i){var s=e&&("coords"in e?e:e.geometry);if(!s)return null;switch(t){case"esriGeometryPoint":var o=F;return n&&i?o=T:n?o=b:i&&(o=S),o(s);case"esriGeometryMultipoint":return P(s,n,i);case"esriGeometryPolyline":return C(s,n,i);case"esriGeometryPolygon":return j(s,n,i);default:return void l.error("convertToGeometry:unknown-geometry",new r("Unable to parse unknown geometry type '"+t+"'"))}}function U(e,t,n,i,s){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,r,n){var i=F;r&&n?i=T:r?i=b:n&&(i=S);for(var s=0,o=t;s<o.length;s++){var a=o[s],u=a.geometry,l=a.attributes,c=u?i(u):null;e.push({attributes:l,geometry:c})}return e}(e,t,i,s);case"esriGeometryMultipoint":return E(e,t,i,s);case"esriGeometryPolyline":return function(e,t,r,n){for(var i=0,s=t;i<s.length;i++){var o=s[i],a=o.geometry,u=o.attributes,l=void 0;a&&(l=C(a,r,n)),e.push({attributes:u,geometry:l})}return e}(e,t,i,s);case"esriGeometryPolygon":return function(e,t,r,n){for(var i=0,s=t;i<s.length;i++){var o=s[i],a=o.geometry,u=o.attributes,l=o.centroid,c=void 0;if(a&&(c=j(a,r,n)),l){var h=F(l);e.push({attributes:u,centroid:h,geometry:c})}else e.push({attributes:u,geometry:c})}return e}(e,t,i,s);default:l.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'"))}return e}function L(e,t,r,n,i,s,o,a){if(void 0===o&&(o=r),void 0===a&&(a=n),e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var l,h,d,f,p=c[i],v=t.coords,_=t.lengths,F=u(r,n),I=u(r&&o,n&&a),b=y(r,n,o,a);if(!_.length)return b(e.coords,v,0,0,g(s,v[0]),m(s,v[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=F,e;for(var x=0,S=0,w=S,T=0,R=_;T<R.length;T++){var M=R[T];if(!(M<p)){var G=0;S=w,d=l=g(s,v[x]),f=h=m(s,v[x+1]),b(e.coords,v,S,x,d,f),G++,x+=F,S+=I;for(var E=1;E<M;E++,x+=F)d=g(s,v[x]),f=m(s,v[x+1]),d===l&&f===h||(b(e.coords,v,S,x,d-l,f-h),S+=I,G++,l=d,h=f);G>=p&&(e.lengths.push(G),w=S)}}return e.coords.length=w,e.coords.length?e:null}function B(e,t,r,n){var i=e[t],s=e[t+1],o=e[n],a=e[n+1],u=e[r],l=e[r+1],c=o-u,h=a-l;if(0!==c||0!==h){var d=((i-u)*c+(s-l)*h)/(c*c+h*h);d>1?(u=o,l=a):d>0&&(u+=c*d,l+=h*d)}return(c=i-u)*c+(h=s-l)*h}function J(e,t,r,n,i,s,o){for(var a,u=n,l=0,c=s+r;c<o;c+=r)(a=B(t,c,s,o))>u&&(l=c,u=a);u>n&&(l-s>r&&J(e,t,r,n,i,s,l),i(e,t,e.length,l,t[l],t[l+1]),o-l>r&&J(e,t,r,n,i,l,o))}function W(e,t,r,n,i){var s=t.coords,o=t.lengths,a=r?n?p:d:n?d:h,l=u(r,n);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,v(i,s[0]),_(i,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;for(var c=i.scale,f=c[0],y=c[1],g=0,m=0;m<o.length;m++){var F=o[m];e.lengths[m]=F;var I=v(i,s[g]),b=_(i,s[g+1]);a(e.coords,s,g,g,I,b),g+=l;for(var x=1;x<F;x++,g+=l)a(e.coords,s,g,g,I+=s[g]*f,b-=s[g+1]*y)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function X(e,t,r,n){for(var i=0,s=e[n*t],o=e[n*(t+1)],a=1;a<r;a++){var u=s+e[n*(t+a)],l=o+e[n*(t+a)+1],c=(u-s)*(l+o);s=u,o=l,i+=c}return.5*i}t.convertFromFeature=function(e,t,r,n,i){D[0]=e;var s=Z(k,D,t,r,n,i)[0];return D.length=k.length=0,s},t.convertFromFeatures=Z,t.convertFromGraphics=function(e,t,n,i,s,o){var a=e.length;switch(n){case"esriGeometryPoint":G(e,t,i,s,o);break;case"esriGeometryMultipoint":N(e,t,i,s,o);break;case"esriGeometryPolyline":O(e,t,i,s,o);break;case"esriGeometryPolygon":A(e,t,i,s,o);break;default:l.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'"))}for(var u=0;u<t.length;u++)e[u+a].geometryType=n,e[u+a].insertAfter=t[u].insertAfter,e[u+a].groupId=t[u].groupId;return e},t.convertToFeature=function(e,t,r,n){k[0]=e,U(D,k,t,r,n);var i=D[0];return D.length=k.length=0,i},t.convertFromGeometry=function(e,t,n){if(!e)return null;var s=new a.default;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),i.isPoint(e)?M(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(s,e):i.isPolygon(e)?q(s,e,t,n):i.isPolyline(e)?z(s,e,u(t,n)):i.isMultipoint(e)?Q(s,e,u(t,n)):void l.error("convertFromGeometry:unknown-geometry",new r("Unable to parse unknown geometry type '"+e+"'"))},t.convertToGeometry=Y,t.convertToFeatures=U,t.convertToFeatureSet=function(e){var t=e.objectIdFieldName,r=e.spatialReference,n=e.transform,i=e.fields,s=e.hasM,o=e.hasZ,a=e.geometryType,u=e.exceededTransferLimit,l=e.uniqueIdField,c=e.queryGeometry,h=e.queryGeometryType,d={features:U([],e.features,a,o,s),fields:i,geometryType:a,objectIdFieldName:t,spatialReference:r,uniqueIdField:l,queryGeometry:Y(c,h,!1,!1)};return n&&(d.transform=n),u&&(d.exceededTransferLimit=u),s&&(d.hasM=s),o&&(d.hasZ=o),d},t.convertFromFeatureSet=function(e,t){var n=new o.default,i=e.hasM,s=e.hasZ,a=e.features,u=e.objectIdFieldName,c=e.spatialReference,h=e.geometryType,d=e.exceededTransferLimit,f=e.transform,p=e.fields;return p&&(n.fields=p),n.geometryType=h,n.objectIdFieldName=u||t,n.spatialReference=c,n.objectIdFieldName?(a&&Z(n.features,a,h,s,i,n.objectIdFieldName),d&&(n.exceededTransferLimit=d),i&&(n.hasM=i),s&&(n.hasZ=s),f&&(n.transform=f),n):(l.error(new r("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)},t.unquantizeOptimizedFeatureSet=function(e){var t=e.transform,r=e.hasM,n=e.hasZ;if(!t)return e;for(var i=0,s=e.features;i<s.length;i++){var o=s[i];o.geometry&&W(o.geometry,o.geometry,r,n,t),o.centroid&&W(o.centroid,o.centroid,r,n,t)}return e.transform=null,e},t.quantizeOptimizedFeatureSet=function(e,t){var r=t.geometryType,n=t.features,i=t.hasM,s=t.hasZ;if(!e)return t;for(var o=0;o<n.length;o++){var u=n[o],l=u.weakClone();l.geometry=new a.default,L(l.geometry,u.geometry,i,s,r,e),u.centroid&&(l.centroid=new a.default,L(l.centroid,u.centroid,i,s,"esriGeometryPoint",e)),n[o]=l}return t.transform=e,t},t.quantizeOptimizedGeometry=L,t.generalizeOptimizedGeometry=function(e,t,r,n,i,s,o,a){if(void 0===o&&(o=r),void 0===a&&(a=n),e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var l=c[i],h=t.coords,d=t.lengths,f=u(r,n),p=u(r&&o,n&&a),g=y(r,n,o,a);if(!d.length)return g(e.coords,h,0,0,h[0],h[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;for(var m=0,v=s*s,_=0,F=d;_<F.length;_++){var I=F[_];if(I<l)m+=I*f;else{var b=e.coords.length/p,x=m,S=m+(I-1)*f;g(e.coords,h,e.coords.length,x,h[x],h[x+1]),J(e.coords,h,f,v,g,x,S),g(e.coords,h,e.coords.length,S,h[S],h[S+1]);var w=e.coords.length/p-b;w>=l?e.lengths.push(w):e.coords.length=b*p,m+=I*f}}return e.coords.length?e:null},t.getBoundsOptimizedGeometry=function(e,t,r,n){if(!t||!t.coords||!t.coords.length)return null;var i=u(r,n),s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords)for(var c=t.coords,h=0;h<c.length;h+=i){var d=c[h],f=c[h+1];s=Math.min(s,d),a=Math.max(a,d),o=Math.min(o,f),l=Math.max(l,f)}return e[0]=s,e[1]=o,e[2]=a,e[3]=l,e},t.getQuantizedBoundsOptimizedGeometry=function(e,t,r,n){for(var i=u(r,n),s=t.coords,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=0,d=0,f=t.lengths;d<f.length;d++){var p=f[d],y=s[h],g=s[h+1];o=Math.min(y,o),a=Math.min(g,a),l=Math.max(y,l),c=Math.max(g,c),h+=i;for(var m=1;m<p;m++,h+=i){var v=s[h],_=s[h+1];y+=v,g+=_,v<0&&(o=Math.min(o,y)),v>0&&(l=Math.max(l,y)),_<0?a=Math.min(a,g):_>0&&(c=Math.max(c,g))}}return e[0]=o,e[1]=a,e[2]=l,e[3]=c,e},t.unquantizeOptimizedGeometry=W,t.removeZMValues=function(e,t,r,n,i,s){var o,a=u(r,n),l=y(r,n,i,s),c=t.coords;e.coords.length=0,e.lengths.length=0,(o=e.lengths).push.apply(o,t.lengths);for(var h=0;h<c.length;h+=a)l(e.coords,c,e.coords.length,h,c[h],c[h+1]);return e},t.removeCollinearVectices=function(e,t,r,n,i){if(!t||!t.coords||!t.coords.length)return null;for(var s=c[r],o=t.coords,a=t.lengths,l=y(n,i,n,i),h=u(n,i),d=0,f=0,p=0,g=0,m=0,v=a;m<v.length;m++){var _=v[m];l(e.coords,o,f=g,d,o[d],o[d+1]);var F=o[d+=h],I=o[d+1],b=F,x=I,S=I/F;l(e.coords,o,f+=h,d,b,x),d+=h;for(var w=2;w<_;w++){var T=(I=o[d+1])/(F=o[d]),R=S===T||!isFinite(S)&&!isFinite(T),M=R&&isFinite(T)?S>=0&&T>=0||S<=0&&T<=0:x>=0&&I>=0||x<=0&&I<=0;R&&M?(b+=F,x+=I):(b=F,x=I,f+=h),l(e.coords,o,f,d,b,x),d+=h,S=T}var G=((f+=h)-g)/h;G>=s&&(e.lengths[p]=G,g=f,p++)}return e.coords.length>g&&(e.coords.length=g),e.lengths.length>p&&(e.lengths.length=p),e.coords.length&&e.lengths.length?e:null},t.getSignedQuantizedRingArea=X,t.getQuantizedArea=function(e,t){for(var r=e.coords,n=e.lengths,i=0,s=0,o=0;o<n.length;o++)s+=X(r,i,n[o],t),i+=o;return Math.abs(s)},t.deltaEncodeGeometry=function(e,t){for(var r=e.clone(),n=e.coords,i=e.lengths,s=0,o=0;o<i.length;o++){for(var a=i[o],u=n[t*s],l=n[t*s+1],c=1;c<a;c++){var h=n[t*(s+c)],d=n[t*(s+c)+1],f=d-l;r.coords[t*(s+c)]=h-u,r.coords[t*(s+c)+1]=f,u=h,l=d}s+=a}return r},t.deltaDecodeGeometry=function(e,t){for(var r=e.clone(),n=e.coords,i=e.lengths,s=0,o=0;o<i.length;o++){for(var a=i[o],u=n[t*s],l=n[t*s+1],c=1;c<a;c++){var h=u+n[t*(s+c)],d=l+n[t*(s+c)+1];r.coords[t*(s+c)]=h,r.coords[t*(s+c)+1]=d,u=h,l=d}s+=a}return r}}).apply(null,n))||(e.exports=i)},"/61J":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeOperator=t.getTimeExtent=void 0,t.getTimeExtent=function(e,t){if(!e)return null;var r=t.featureAdapter,n=e.startTimeField,i=e.endTimeField,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(n&&i)t.forEach((function(e){var t=r.getAttribute(e,n),a=r.getAttribute(e,i);null==t||isNaN(t)||(s=Math.min(s,t)),null==a||isNaN(a)||(o=Math.max(o,a))}));else{var a=n||i;t.forEach((function(e){var t=r.getAttribute(e,a);null==t||isNaN(t)||(s=Math.min(s,t),o=Math.max(o,t))}))}return{start:s,end:o}},t.getTimeOperator=function(e,t,r){if(!t||!e)return null;var n=e.startTimeField,i=e.endTimeField;if(!n&&!i)return null;var s=t.start,o=t.end;return null===s&&null===o?null:void 0===s&&void 0===o?function(){return!1}:n&&i?function(e,t,r,n,i){return null!=n&&null!=i?function(s){var o=e.getAttribute(s,t),a=e.getAttribute(s,r);return(null==o||o<=i)&&(null==a||a>=n)}:null!=n?function(t){var i=e.getAttribute(t,r);return null==i||i>=n}:null!=i?function(r){var n=e.getAttribute(r,t);return null==n||n<=i}:void 0}(r,n,i,s,o):function(e,t,r,n){return null!=r&&null!=n&&r===n?function(n){return e.getAttribute(n,t)===r}:null!=r&&null!=n?function(i){var s=e.getAttribute(i,t);return s>=r&&s<=n}:null!=r?function(n){return e.getAttribute(n,t)>=r}:null!=n?function(r){return e.getAttribute(r,t)<=n}:void 0}(r,n||i,s,o)}}).apply(null,n))||(e.exports=i)},"/COu":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){void 0===e&&(e=null),void 0===t&&(t={}),this.displayId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=n&&(this.objectId=n)}return Object.defineProperty(e.prototype,"hasGeometry",{get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)},enumerable:!1,configurable:!0}),e.prototype.weakClone=function(){var t=new e(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashIndexed=this.geohashIndexed,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t},e}();t.default=r}).apply(null,n))||(e.exports=i)},"4/qq":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities=void 0,t.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}).apply(null,n))||(e.exports=i)},"700l":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("LxLY"),r("Ytki")],void 0===(i=(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=t;var i=e.outFields;if(i&&-1===i.indexOf("*")){this.outFields=i;for(var s=0,o=0,a=i;o<a.length;o++){var u=a[o],l=n.getExpressionFromFieldName(u),c=this.fieldsIndex.get(l),h=c?null:n.getWhereClause(l,r),d=c?c.name:n.getAliasFromFieldName(u)||"FIELD_EXP_"+s++;this._fieldDataCache.set(u,{alias:d,clause:h})}}}return e.prototype.countDistinctValues=function(e){var t=this;return this.returnDistinctValues?(e.forEach((function(e){return t.getAttributes(e)})),this._returnDistinctMap.size):e.length},e.prototype.getAttributes=function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t,r){var i=r?r.name:t,s=null;return this._fieldDataCache.has(i)?s=this._fieldDataCache.get(i).clause:r||(s=n.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(i,{alias:i,clause:s})),r?this.featureAdapter.getAttribute(e,i):s.calculateValue(e,this.featureAdapter)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)},e.prototype.validateItems=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);for(var r={},n=0,i=t;n<i.length;n++){var s=this._fieldDataCache.get(i[n]),o=s.alias,a=s.clause;r[o]=a?a.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,o)}return r},e.prototype._processAttributesForDistinctValues=function(e){if(r.isNone(e)||!this.returnDistinctValues)return e;var t=this.outFields,n=[];if(t)for(var i=0,s=t;i<s.length;i++){var o=this._fieldDataCache.get(s[i]).alias;n.push(e[o])}else for(var o in e)n.push(e[o]);var a=(t||["*"]).join(",")+"="+n.join(","),u=this._returnDistinctMap.get(a)||0;return this._returnDistinctMap.set(a,++u),u>1?null:e},e}();t.default=i}).apply(null,n))||(e.exports=i)},DaHD:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("H1tY"),r("rg9i"),r("35hF")],void 0===(i=(function(e,t,r,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultTemplate=t.createDefaultAttributesFunction=t.createDrawingInfo=void 0,t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.defaultPointSymbolJSON:"esriGeometryPolyline"===e?s.defaultPolylineSymbolJSON:s.defaultPolygonSymbolJSON}}},t.createDefaultAttributesFunction=function(e,t){if(n("csp-restrictions"))return function(){var n;return r.__assign(((n={})[t]=null,n),e)};try{var i="this."+t+" = null;";for(var s in e)i+="this"+(s.indexOf(".")?'["'+s+'"]':"."+s)+" = "+JSON.stringify(e[s])+";";var o=new Function(i);return function(){return new o}}catch(n){return function(){var n;return r.__assign(((n={})[t]=null,n),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:i.clone(e)}}]}}).apply(null,n))||(e.exports=i)},Jvs9:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===r&&(r=!1),this.lengths=e,this.coords=t,this.hasIndeterminateRingOrder=r}return Object.defineProperty(e.prototype,"isPoint",{get:function(){return 0===this.lengths.length},enumerable:!1,configurable:!0}),e.prototype.forEachVertex=function(e){var t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(var r=0;r<this.lengths.length;r++){for(var n=this.lengths[r],i=0;i<n;i++)e(this.coords[2*(i+t)],this.coords[2*(i+t)+1]);t+=n}},e.prototype.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)},e}();t.default=r}).apply(null,n))||(e.exports=i)},V1i6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qMld"),r("k1EI"),r("Thzy"),r("Lzvl"),r("nrlZ"),r("gT/q"),r("+6sX"),r("Jvs9"),r("Q2Em"),r("zDti"),r("2Kdy")],void 0===(i=(function(e,t,n,i,s,o,a,u,l,c,h,d,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canQueryWithRBush=t.checkSpatialQuerySupport=t.getSpatialQueryOperator=t.getGeodesicBufferOperator=t.importGeometryEngine=void 0;var y={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},g={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},v={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function _(){return new Promise((function(e,t){r.e(1).then((function(){var t=[r("tNTp")];e.apply(null,t)}).bind(this)).catch(t.bind(this))}))}t.importGeometryEngine=_,t.getGeodesicBufferOperator=function(){return _().then((function(e){return e.geodesicBuffer}))},t.getSpatialQueryOperator=function(e,t,r,n,i){if(u.isPolygon(t)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var l=h.convertFromPolygon(new d.default,t,!1,!1);return s.resolve((function(e){return c.polygonContainsPoint(l,!1,!1,e)}))}if(u.isPolygon(t)&&"esriGeometryMultipoint"===r){var f=h.convertFromPolygon(new d.default,t,!1,!1);if("esriSpatialRelContains"===e)return s.resolve((function(e){return c.polygonContainsMultipoint(f,!1,!1,e,n,i)}))}if(u.isExtent(t)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return s.resolve((function(e){return o.extentContainsPoint(t,p.getGeometry(r,n,i,e))}));if(u.isExtent(t)&&"esriGeometryMultipoint"===r&&"esriSpatialRelContains"===e)return s.resolve((function(e){return o.extentContainsMultipoint(t,p.getGeometry(r,n,i,e))}));if(u.isExtent(t)&&"esriSpatialRelIntersects"===e){var g=a.getExtentIntersector(r);return s.resolve((function(e){return g(t,p.getGeometry(r,n,i,e))}))}return _().then((function(s){var o=s[y[e]].bind(null,t.spatialReference,t);return function(e){return o(p.getGeometry(r,n,i,e))}}))},t.checkSpatialQuerySupport=function(e,t,r){return n.__awaiter(this,void 0,void 0,(function(){var s,o;return n.__generator(this,(function(n){if(s=e.spatialRel,!(o=e.geometry))return[2];if(!0!==g[s])throw new i("feature-store:unsupported-query","Unsupported query spatial relationship",{query:e});if(!l.isValid(o.spatialReference)||!l.isValid(r))return[2];if(!function(e){return!0===m[u.getJsonType(e)]}(o))throw new i("feature-store:unsupported-query","Unsupported query geometry type",{query:e});if(!function(e){return!0===v[e]}(t))throw new i("feature-store:unsupported-query","Unsupported layer geometry type",{query:e});return e.outSR?[2,f.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR)]:[2]}))}))},t.canQueryWithRBush=function(e){if(u.isExtent(e))return!0;if(u.isPolygon(e)){for(var t=0,r=e.rings;t<r.length;t++){var n=r[t];if(5!==n.length)return!1;if(n[0][0]!==n[1][0]||n[0][0]!==n[4][0]||n[2][0]!==n[3][0]||n[0][1]!==n[3][1]||n[0][1]!==n[4][1]||n[1][1]!==n[2][1])return!1}return!0}return!1}}).apply(null,n))||(e.exports=i)},Ytki:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ma1f"),r("ULaq"),r("ztx9")],void 0===(i=(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasInvalidFieldType=t.getAliasFromFieldName=t.getExpressionFromFieldName=t.validateFields=t.getWhereClause=t.validateHaving=t.validateWhere=void 0;var s=new i.WhereClauseCache(50,500),o="feature-store:unsupported-query",a=n.SetFromValues(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function u(e,t){return e?s.get(e,t):null}function l(e,t,n,i){void 0===i&&(i=!0);for(var s=[],a=0,h=t;a<h.length;a++){var d=h[a];if("*"!==d&&!e.has(d))if(i){var f=c(d);try{var p=u(f,e);if(!p)throw new r(o,"invalid SQL expression",{where:f});if(!p.isStandardized)throw new r(o,"expression is not standard",{clause:p});l(e,p.fieldNames,"expression contains missing fields")}catch(e){var y=e&&e.details;if(y&&(y.clause||y.where))throw e;y&&y.missingFields?s.push.apply(s,y.missingFields):s.push(d)}}else s.push(d)}if(s.length)throw new r(o,n,{missingFields:s})}function c(e){return e.split(" as ")[0]}t.validateWhere=function(e,t){if(!t)return!0;var n=s.get(t,e);if(!n)throw new r(o,"invalid SQL expression",{where:t});if(!n.isStandardized)throw new r(o,"where clause is not standard",{where:t});return l(e,n.fieldNames,"where clause contains missing fields"),!0},t.validateHaving=function(e,t,n){if(!t)return!0;var i=s.get(t,e);if(!i)throw new r(o,"invalid SQL expression",{having:t});if(!i.isAggregate)throw new r(o,"having does not contain a valid aggregate function",{having:t});if(l(e,i.fieldNames,"having contains missing fields"),!i.getExpressions().every((function(t){var r=t.aggregateType,i=t.field,s=e.has(i)&&e.get(i).name;return n.some((function(t){var n=t.onStatisticField,i=t.statisticType;return(e.has(n)&&e.get(n).name)===s&&i.toLowerCase().trim()===r}))})))throw new r(o,"expressions in having should also exist in outStatistics",{having:t});return!0},t.getWhereClause=u,t.validateFields=l,t.getExpressionFromFieldName=c,t.getAliasFromFieldName=function(e){return e.split(" as ")[1]},t.hasInvalidFieldType=function(e,t){var r=t.get(e);return!!r&&!a.has(r.type)}}).apply(null,n))||(e.exports=i)},ZooB:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("rg9i"),r("LxLY"),r("r7jh"),r("qMld"),r("ULaq"),r("8uEs"),r("WRgd"),r("lRq4"),r("hBh5"),r("Lzvl"),r("nrlZ"),r("Ytki"),r("Q2Em"),r("4/qq"),r("d81A"),r("V1i6"),r("/61J"),r("zDti"),r("I90O"),r("tZaU")],void 0===(i=(function(e,t,r,n,i,s,o,a,u,l,c,h,d,f,p,y,g,m,v,_,F,I,b,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Feature=void 0,t.Feature=function(e,t,r,n,i){void 0===t&&(t=null),this.attributes=e,this.geometry=r,this.centroid=n,this.filterFlags=i,this.groupId=-1,this.displayId=t};var S=new Set,w=new o.MemCacheStorage(2e6),T=0,R=function(){function e(e){var t=this;this.capabilities={query:m.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this._changeHandle=this.featureStore.events.on("changed",(function(){return t.clearCache()})),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new o.MemCache(T+++"$$",w)),this.fieldsIndex=new b(e.fields),e.scheduler&&e.task&&(this._frameQueue=new x.default,this._frameTask=e.scheduler.registerTask(e.task,(function(e){return t._update(e)}),(function(){return t._frameQueue.length>0})))}return e.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()},Object.defineProperty(e.prototype,"featureAdapter",{get:function(){return this.featureStore.featureAdapter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullExtent",{get:function(){var e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:I.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeExtent",{get:function(){return this.timeInfo?(this._timeExtent||(this._timeExtent=F.getTimeExtent(this.timeInfo,this.featureStore)),this._timeExtent):null},enumerable:!1,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},e.prototype.executeQuery=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:t=i.clone(e),r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return I.normalizeQuery(t,o.definitionExpression,o.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return o._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return o._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),[3,9];case 8:if((s=r.sent())!==I.QUERY_ENGINE_EMPTY_RESULT)throw s;return n=new v.default([],null,this),[3,9];case 9:return[2,n.createQueryResponse(t)]}}))}))},e.prototype.executeQueryForCount=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:(t=i.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return I.normalizeQuery(t,o.definitionExpression,o.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return o._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return o._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),[3,9];case 8:if((s=r.sent())!==I.QUERY_ENGINE_EMPTY_RESULT)throw s;return[2,0];case 9:return[2,n.createQueryResponseForCount(t)]}}))}))},e.prototype.executeQueryForExtent=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,o,a,u,h,d,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:t=i.clone(e),s=t.outSR,r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return I.normalizeQuery(t,f.definitionExpression,f.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return f._checkQuerySupport(t)}))];case 3:return(t=r.sent()).returnGeometry=!0,t.returnCentroid=!1,t.outSR=null,[4,this._reschedule((function(){return f._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),(o=n.size)?(c.set(G,c.NEGATIVE_INFINITY),this.featureStore.forEachBounds(n.items,(function(e){return c.expand(G,e)}),M),a={xmin:G[0],ymin:G[1],xmax:G[3],ymax:G[4],spatialReference:I.cleanFromGeometryEngine(this.spatialReference)},this.hasZ&&isFinite(G[2])&&isFinite(G[5])&&(a.zmin=G[2],a.zmax=G[5]),(u=g.project(a,n.spatialReference,s)).spatialReference=I.cleanFromGeometryEngine(s||this.spatialReference),u.xmax-u.xmin==0&&(h=l.getMetersPerUnitForSR(u.spatialReference),u.xmin-=h,u.xmax+=h),u.ymax-u.ymin==0&&(h=l.getMetersPerUnitForSR(u.spatialReference),u.ymin-=h,u.ymax+=h),this.hasZ&&null!=u.zmin&&null!=u.zmax&&u.zmax-u.zmin==0&&(h=l.getMetersPerUnitForSR(u.spatialReference),u.zmin-=h,u.zmax+=h),[2,{count:o,extent:u}]):[2,{count:o,extent:null}];case 8:if((d=r.sent())===I.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw d;case 9:return[2]}}))}))},e.prototype.executeQueryForIds=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,this.executeQueryForIdSet(e,t).then((function(e){return u.valuesOfSet(e)}))]}))}))},e.prototype.executeQueryForIdSet=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,o,a,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:(t=i.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,r.label=1;case 1:return r.trys.push([1,9,,10]),[4,this._schedule((function(){return I.normalizeQuery(t,u.definitionExpression,u.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return u._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return u._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),s=n.items,o=new Set,[4,this._reschedule((function(){for(var e=0,t=s;e<t.length;e++)o.add(n.featureAdapter.getObjectId(t[e]))}))];case 8:return r.sent(),[2,o];case 9:if((a=r.sent())===I.QUERY_ENGINE_EMPTY_RESULT)return[2,new Set];throw a;case 10:return[2]}}))}))},e.prototype.executeQueryForLatestObservations=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,s,o,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.timeInfo||!this.timeInfo.trackIdField)throw new n("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});t=i.clone(e),r.label=1;case 1:return r.trys.push([1,9,,10]),[4,this._schedule((function(){return I.normalizeQuery(t,a.definitionExpression,a.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return a._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return a._executeGeometryQuery(t)}))];case 4:return s=r.sent(),[4,this._reschedule((function(){return s.executeObjectIdsQuery(t)}))];case 5:return s=r.sent(),[4,this._reschedule((function(){return s.executeTimeQuery(t)}))];case 6:return s=r.sent(),[4,this._reschedule((function(){return s.executeAttributesQuery(t)}))];case 7:return s=r.sent(),[4,this._reschedule((function(){return s.filterLatest()}))];case 8:return s=r.sent(),[3,10];case 9:if((o=r.sent())!==I.QUERY_ENGINE_EMPTY_RESULT)throw o;return s=new v.default([],null,this),[3,10];case 10:return[2,s.createQueryResponse(t)]}}))}))},e.prototype._schedule=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._frameQueue?[2,this._frameQueue.push(e)]:[2,e()]}))}))},e.prototype._reschedule=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._frameQueue?[2,this._frameQueue.unshift(e)]:[2,e()]}))}))},e.prototype._update=function(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null},e.prototype._getAll=function(){if(!this._allItems){var e=[];this.featureStore.forEach((function(t){return e.push(t)})),this._allItems=new v.default(e,null,this)}return this._allItems},e.prototype._executeGeometryQuery=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,u,l,c,h,d,f,y,g,m,F,I,b,x,S=this;return r.__generator(this,(function(w){switch(w.label){case 0:if(t=e.geometry,i=e.spatialRel,o=p.isValid(n=e.outSR)&&!p.equals(this.spatialReference,n),(a=this._geometryQueryCache?o?JSON.stringify({geometry:t,spatialRelationship:i,outSpatialReference:n}):JSON.stringify({geometry:t,spatialRelationship:i}):null)&&(u=this._geometryQueryCache.get(a),!s.isUndefined(u)))return[2,u];if(l=function(t){return r.__awaiter(S,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return o&&(e.returnGeometry||e.returnCentroid)?[4,t.project(n)]:[3,2];case 1:return i=r.sent(),a&&this._geometryQueryCache.put(a,i,i.size||1),[2,i];case 2:return a&&this._geometryQueryCache.put(a,t,t.size||1),[2,t]}}))}))},!t)return[2,l(this._getAll())];if(c=this.featureAdapter,"esriSpatialRelDisjoint"!==i)return[3,3];if(!(h=this._searchFeatures(this._getQueryBBoxes(t))).length)return[2,l(this._getAll())];for(y=new Set,g=0,m=h;g<m.length;g++)y.add(c.getObjectId(m[g]));return[4,this._reschedule((function(){var e=0;d=new Array(y.size),S.featureStore.forEach((function(t){return d[e++]=t})),f=y}))];case 1:return w.sent(),[4,this._reschedule((function(){return r.__awaiter(S,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,_.getSpatialQueryOperator(i,t,this.geometryType,this.hasZ,this.hasM)];case 1:return e=r.sent(),n=v.default.bind,[4,this._runSpatialFilter(d,(function(t){return!f.has(c.getObjectId(t))||e(c.getGeometry(t))}))];case 2:return[2,new(n.apply(v.default,[void 0,r.sent(),t,this]))]}}))}))}))];case 2:return I=w.sent(),[2,l(I)];case 3:return(F=this._searchFeatures(this._getQueryBBoxes(t))).length?this._canExecuteSoloPass(t,e)?[2,l(new v.default(F,t,this))]:[4,_.getSpatialQueryOperator(i,t,this.geometryType,this.hasZ,this.hasM)]:(I=new v.default([],t,this),a&&this._geometryQueryCache.put(a,I,I.size||1),[2,I]);case 4:return b=w.sent(),[4,this._runSpatialFilter(F,(function(e){return b(c.getGeometry(e))}))];case 5:return x=w.sent(),[2,l(new v.default(x,t,this))]}}))}))},e.prototype._runSpatialFilter=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o=this;return r.__generator(this,(function(a){return t?this._budget?(n=0,i=new Array,s=function(){return r.__awaiter(o,void 0,void 0,(function(){var o;return r.__generator(this,(function(r){switch(r.label){case 0:return n<e.length?(t(o=e[n])&&i.push(o),this._budget.done?[4,this._reschedule((function(){return s()}))]:[3,2]):[3,3];case 1:r.sent(),r.label=2;case 2:return++n,[3,0];case 3:return[2]}}))}))},[2,this._reschedule((function(){return s()})).then((function(){return i}))]):[2,e.filter((function(e){return t(e)}))]:[2,e]}))}))},e.prototype._canExecuteSoloPass=function(e,t){var r=this.geometryType,n=t.spatialRel;return _.canQueryWithRBush(e)&&("esriSpatialRelEnvelopeIntersects"===n||"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n||"esriSpatialRelWithin"===n))},e.prototype._getQueryBBoxes=function(e){if(_.canQueryWithRBush(e)){if(f.isExtent(e))return[h.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(f.isPolygon(e))return e.rings.map((function(e){return h.fromValues(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))}))}return[d.getBoundsXY(h.create(),e)]},e.prototype._searchFeatures=function(e){for(var t=0,r=e;t<r.length;t++)this.featureStore.forEachInBounds(r[t],(function(e){S.add(e)}));var n=new Array(S.size),i=0;return S.forEach((function(e){return n[i++]=e})),S.clear(),n},e.prototype._checkQuerySupport=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new n("feature-store:unsupported-query","Unsupported query options",{query:e});return[2,a.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),_.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),g.checkProjectionSupport(this.spatialReference,e.outSR)]).then((function(){return e}))]}))}))},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,i=e.returnDistinctValues,s=e.outStatistics,o=s?s.map((function(e){return e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase()})):[];if(r&&r.length>0){var a=r.map((function(e){var t=e.toLowerCase();return t.indexOf(" asc")>-1?t.split(" asc")[0]:t.indexOf(" desc")>-1?t.split(" desc")[0]:e})).filter((function(e){return-1===o.indexOf(e)}));y.validateFields(this.fieldsIndex,a,"orderByFields contains missing fields")}if(t&&t.length>0)y.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(i)throw new n("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:e});y.validateWhere(this.fieldsIndex,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,s,o,a,u,l,c,h,d,f;return r.__generator(this,(function(r){if(o=(i=e.groupByFieldsForStatistics)&&i.length,a=(t=e.outStatistics)&&t.length,s=e.having){if(!o||!a)throw new n("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});y.validateHaving(this.fieldsIndex,s,t)}if(a){if(!function(e){return e.every((function(e){return"exceedslimit"!==e.statisticType}))}(t))return[2];for(u=t.map((function(e){return e.onStatisticField})),y.validateFields(this.fieldsIndex,u,"onStatisticFields contains missing fields"),o&&y.validateFields(this.fieldsIndex,i,"groupByFieldsForStatistics contains missing fields"),l=0,c=t;l<c.length;l++)if(d=(h=c[l]).onStatisticField,"percentile_disc"!==(f=h.statisticType)&&"percentile_cont"!==f||!("statisticParameters"in h)){if("count"!==f&&d&&y.hasInvalidFieldType(d,this.fieldsIndex))throw new n("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:h,query:e})}else if(!h.statisticParameters)throw new n("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:h,query:e})}return[2]}))}))},e}();t.default=R;var M=c.create(),G=c.create()}).apply(null,n))||(e.exports=i)},d81A:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("R2Zq"),r("LxLY"),r("qMld"),r("ULaq"),r("u90+"),r("nrlZ"),r("+6sX"),r("700l"),r("Ytki"),r("Q2Em"),r("/61J"),r("zDti")],void 0===(i=(function(e,t,r,n,i,s,o,a,u,l,c,h,d,f,p){"use strict";function y(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function g(e,t,r){return(r?e>t:e<t)?-1:(r?e<t:e>t)?1:0}function m(e,t,r){return r?t-e:e-t}function v(e,t,r,n){if(r&&"esriFieldTypeDate"===r.type){var i=new Date(e).getTime(),s=new Date(t).getTime();if(!isNaN(i)&&!isNaN(s))return m(i,s,n)}return"number"==typeof e&&"number"==typeof t?m(e,t,n):"string"==typeof e&&"string"==typeof t?(i=e.toUpperCase(),s=t.toUpperCase(),!r||"esriFieldTypeGUID"!==r.type&&"esriFieldTypeGlobalID"!==r.type?g(i,s,n):g(y(i),y(s),n)):n?1:-1}Object.defineProperty(t,"__esModule",{value:!0});var _=function(){function e(e,t,r){this.items=e,this.queryGeometry=t,this.definitionExpression=r.definitionExpression,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.fieldsIndex=r.fieldsIndex,this.timeInfo=r.timeInfo,this.featureAdapter=r.featureAdapter}return Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),e.prototype.createQueryResponseForCount=function(e){var t=new c.default(e,this.featureAdapter,this.fieldsIndex);if(!e.outStatistics)return t.countDistinctValues(this.items);var r=e.groupByFieldsForStatistics,n=e.having;if(!(null==r?void 0:r.length))return 1;for(var i=new Map,s=new Map,o=new Set,a=0,u=e.outStatistics;a<u.length;a++){var l=u[a],h="exceedslimit"!==l.statisticType?l.onStatisticField:void 0;if(!s.has(h)){for(var d=[],f=0,p=r;f<p.length;f++){var y=this._getAttributeValues(t,p[f],i);d.push(y)}s.set(h,this._calculateUniqueValues(d))}var g=s.get(h);for(var m in g){var v=g[m],_=v.items,F=v.data.join(",");n&&!t.validateItems(_,n)||o.add(F)}}return o.size},e.prototype.createQueryResponse=function(e){var t;return t=e.outStatistics?e.outStatistics.some((function(e){return"exceedslimit"===e.statisticType}))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(t.queryGeometry=u.isValid(e.outSR)&&!u.equals(this.queryGeometry.spatialReference,e.outSR)?p.cleanFromGeometryEngine(r.__assign({spatialReference:e.outSR},d.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR))):p.cleanFromGeometryEngine(r.__assign({spatialReference:e.outSR},this.queryGeometry))),t},e.prototype.executeAttributesQuery=function(t){var r=h.getWhereClause(t.where,this.fieldsIndex);if(!r)return s.resolve(this);if(r.isStandardized){for(var n=0,i=[],o=0,a=this.items;o<a.length;o++){var u=a[o];r.testFeature(u,this.featureAdapter)&&(i[n++]=u)}var l=new e(i,this.queryGeometry,this);return l.definitionExpression=t.where,s.resolve(l)}return s.reject(new TypeError("Where clause is not standardized"))},e.prototype.executeObjectIdsQuery=function(t){if(!t.objectIds||!t.objectIds.length)return s.resolve(this);var r=o.SetFromValues(t.objectIds),n=this.featureAdapter.getObjectId;return s.resolve(new e(this.items.filter((function(e){return r.has(n(e))})),this.queryGeometry,this))},e.prototype.executeTimeQuery=function(t){var r=f.getTimeOperator(this.timeInfo,t.timeExtent,this.featureAdapter);if(!i.isSome(r))return s.resolve(this);var n=this.items.filter(r);return s.resolve(new e(n,this.queryGeometry,this))},e.prototype.filterLatest=function(){for(var t=this.timeInfo,r=t.trackIdField,i=t.endTimeField||t.startTimeField,o=new Map,a=this.featureAdapter.getAttribute,u=0,l=this.items;u<l.length;u++){var c=l[u],h=a(c,r),d=a(c,i),f=o.get(h);(!f||d>a(f,i))&&o.set(h,c)}var p=n.valuesOfMap(o);return s.resolve(new e(p,this.queryGeometry,this))},e.prototype.project=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!t||u.equals(this.spatialReference,t)?[2,this]:(n=this.featureAdapter,[4,d.projectMany(this.items.map((function(e){return p.getGeometry(i.geometryType,i.hasZ,i.hasM,n.getGeometry(e))})),this.spatialReference,t)]);case 1:return[2,new e(r.sent().map((function(e,t){return n.cloneWithGeometry(i.items[t],l.convertFromGeometry(e,i.hasZ,i.hasM))})),this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}}))}))},e.prototype._sortFeatures=function(e,t,r){if(e.length>1&&t&&t.length)for(var n=function(t){var n=t.split(" "),s=n[0],o=i.fieldsIndex.get(s),a=n[1]&&"desc"===n[1].toLowerCase();e.sort((function(e,t){return v(r(e,s,o),r(t,s,o),o,a)}))},i=this,s=0,o=t.reverse();s<o.length;s++)n(o[s])},e.prototype._createFeatureQueryResponse=function(e){var t=this,n=this.items,i=this,s=i.geometryType,o=i.hasM,u=i.hasZ,l=i.objectIdField,c=i.spatialReference,h=e.outFields,d=e.outSR,f=e.quantizationParameters,y=e.resultRecordCount,g=e.returnZ,m=e.returnM,v=null!=y&&n.length>(e.resultOffset||0)+y,_=h&&(h.indexOf("*")>-1?r.__spreadArrays(this.fieldsIndex.fields):h.map((function(e){return t.fieldsIndex.get(e)})));return{exceededTransferLimit:v,features:this._createFeatures(e,n),fields:_,geometryType:s,hasM:o&&m,hasZ:u&&g,objectIdFieldName:l,spatialReference:p.cleanFromGeometryEngine(d||c),transform:f&&a.toQuantizationTransform(f)||null}},e.prototype._createFeatures=function(e,t){var n=new c.default(e,this.featureAdapter,this.fieldsIndex),i=e.orderByFields,s=e.quantizationParameters,o=e.returnGeometry,u=e.returnCentroid,l=e.maxAllowableOffset,h=e.resultOffset,d=e.resultRecordCount,f=e.returnZ,y=e.returnM,g=this.hasZ&&void 0!==f&&f,m=this.hasM&&void 0!==y&&y,v=[],_=0,F=r.__spreadArrays(t);if(this._sortFeatures(F,i,(function(e,t,r){return n.getFieldValue(e,t,r)})),o||u){var I=a.toQuantizationTransform(s);if(o&&!u)for(var b=0,x=F;b<x.length;b++)v[_++]={attributes:n.getAttributes(E=x[b]),geometry:p.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(E),l,I,g,m)};else if(!o&&u)for(var S=0,w=F;S<w.length;S++)v[_++]={attributes:n.getAttributes(E=w[S]),centroid:p.transformCentroid(this,this.featureAdapter.getCentroid(E,this),I)};else for(var T=0,R=F;T<R.length;T++)v[_++]={attributes:n.getAttributes(E=R[T]),centroid:p.transformCentroid(this,this.featureAdapter.getCentroid(E,this),I),geometry:p.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(E),l,I,g,m)}}else for(var M=0,G=F;M<G.length;M++){var E=G[M],P=n.getAttributes(E);P&&(v[_++]={attributes:P})}var N=h||0;return null!=d&&(v=v.slice(N,Math.min(v.length,N+d))),v},e.prototype._createExceedsLimitQueryResponse=function(e){for(var t=!1,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=0,o=e.outStatistics;s<o.length;s++){var a=o[s];if("exceedslimit"===a.statisticType){r=null!=a.maxPointCount?a.maxPointCount:Number.POSITIVE_INFINITY,n=null!=a.maxRecordCount?a.maxRecordCount:Number.POSITIVE_INFINITY,i=null!=a.maxVertexCount?a.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)t=this.items.length>r;else if(this.items.length>n)t=!0;else{var u=this.hasZ?this.hasM?4:3:this.hasM?3:2,l=this.featureAdapter;t=this.items.reduce((function(e,t){var r=l.getGeometry(t);return e+(r&&r.coords.length||0)}),0)/u>i}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},e.prototype._createStatisticsQueryResponse=function(e){for(var t=this,r={attributes:{}},i=[],s=new Map,o=new Map,a=new Map,u=new Map,l=new c.default(e,this.featureAdapter,this.fieldsIndex),h=e.outStatistics,d=e.groupByFieldsForStatistics,f=e.having,p=e.orderByFields,y=d&&d.length,g=!!y,m=g&&d[0],v=g&&!this.fieldsIndex.get(m),_=0,F=h;_<F.length;_++){var I=F[_],b=I.outStatisticFieldName,x=I.statisticType,S=I,w="exceedslimit"!==x?I.onStatisticField:void 0,T="percentile_disc"===x||"percentile_cont"===x,R=g&&1===y&&(w===m||v)&&"count"===x;if(g){if(!a.has(w)){for(var M=[],G=0,E=d;G<E.length;G++){var P=this._getAttributeValues(l,E[G],s);M.push(P)}a.set(w,this._calculateUniqueValues(M))}var N=a.get(w),Q=function(e){var r=N[e],n=r.count,i=r.data,o=r.items,a=r.itemPositions,c=i.join(",");if(!f||l.validateItems(o,f)){var h=u.get(c)||{attributes:{}},p=null;if(R)p=n;else{var y=C._getAttributeValues(l,w,s),g=a.map((function(e){return y[e]}));p=T&&"statisticParameters"in S?C._getPercentileValue(S,g):C._getStatisticValue(S,g)}h.attributes[b]=p,d.forEach((function(e,r){return h.attributes[t.fieldsIndex.get(e)?e:"EXPR_"+(r+1)]=i[r]})),u.set(c,h)}},C=this;for(var O in N)Q(O)}else P=this._getAttributeValues(l,w,s),r.attributes[b]=T&&"statisticParameters"in S?this._getPercentileValue(S,P):this._getStatisticValue(S,P,o);i.push({name:b,alias:b,type:"esriFieldTypeDouble"})}var z=g?n.valuesOfMap(u):[r];return this._sortFeatures(z,p,(function(e,t){return e.attributes[t]})),{fields:i,features:z}},e.prototype._getStatisticValue=function(e,t,r){var n=e.onStatisticField,i=e.statisticType,s=r&&r.has(n)?r.get(n):this._calculateStatistics(t);return r&&r.set(n,s),s["var"===i?"variance":i]},e.prototype._getPercentileValue=function(e,t){var n=e.statisticParameters,i=e.statisticType,s=n.value,o="desc"===n.orderBy,a=this.fieldsIndex.get(e.onStatisticField),u=r.__spreadArrays(t).filter((function(e){return null!=e})).sort((function(e,t){return v(e,t,a,o)}));return this._calculatePercentile(u,s,"percentile_disc"===i)},e.prototype._getAttributeValues=function(e,t,r){if(r.has(t))return r.get(t);var n=this.fieldsIndex.get(t),i=this.items.map((function(r){return e.getFieldValue(r,t,n)}));return r.set(t,i),i},e.prototype._calculateStatistics=function(e){for(var t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=null,i=null,s=null,o=null,a=[],u=0,l=0,c=e;l<c.length;l++)"string"==typeof(p=c[l])?u++:null==p||isNaN(p)||(n+=p,t=Math.min(t,p),r=Math.max(r,p),a.push(p),u++);if(u){i=n/u;for(var h=0,d=0,f=a;d<f.length;d++){var p=f[d];h+=Math.pow(p-i,2)}o=u>1?h/(u-1):0,s=Math.sqrt(o)}else t=null,r=null;return{avg:i,count:u,max:r,min:t,stddev:s,sum:n,variance:o}},e.prototype._calculateUniqueValues=function(e){for(var t={},r=this.items,n=r.length,i=0;i<n;i++){for(var s=r[i],o=[],a=0,u=e;a<u.length;a++)o.push(u[a][i]);var l=o.join(",");null==t[l]?t[l]={count:1,data:o,items:[s],itemPositions:[i]}:(t[l].count++,t[l].items.push(s),t[l].itemPositions.push(i))}return t},e.prototype._calculatePercentile=function(e,t,r){if(0===e.length)return null;if(t<=0)return e[0];if(t>=1)return e[e.length-1];var n=(e.length-1)*t,i=Math.floor(n),s=i+1,o=n%1,a=e[i],u=e[s];return s>=e.length||r||"string"==typeof a||"string"==typeof u?a:a*(1-o)+u*o},e}();t.default=_}).apply(null,n))||(e.exports=i)},"gT/q":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";function r(e,t){return e?t?4:3:t?3:2}function n(e,t,n,s,o){if(!e)return!1;for(var a=r(t,n),u=e.coords,l=!1,c=0,h=0,d=e.lengths;h<d.length;h++){var f=d[h];l=i(l,u,a,c,f,s,o),c+=f*a}return l}function i(e,t,r,n,i,s,o){for(var a=e,u=n,l=n,c=n+i*r;l<c;l+=r){(u=l+r)===c&&(u=n);var h=t[l],d=t[l+1],f=t[u+1];(d<o&&f>=o||f<o&&d>=o)&&h+(o-d)/(f-d)*(t[u]-h)<s&&(a=!a)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.polygonContainsCoords=t.polygonContainsMultipoint=t.polygonContainsPoint=void 0,t.polygonContainsPoint=function(e,t,r,i){return n(e,t,r,i.coords[0],i.coords[1])},t.polygonContainsMultipoint=function(e,t,i,s,o,a){var u=r(o,a),l=s.coords,c=s.lengths;if(!c)return!1;for(var h=0,d=0;h<c.length;h++,d+=u)if(!n(e,t,i,l[d],l[d+1]))return!1;return!0},t.polygonContainsCoords=n}).apply(null,n))||(e.exports=i)},xJgq:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}return e.prototype.weakClone=function(){var t=new e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t},e}();t.default=r}).apply(null,n))||(e.exports=i)},zDti:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ImIS"),r("LxLY"),r("8uEs"),r("d466"),r("Lzvl"),r("fw2w"),r("nrlZ"),r("Fzzg"),r("+6sX"),r("Jvs9"),r("Q2Em"),r("V1i6")],void 0===(i=(function(e,t,r,n,i,s,o,a,u,l,c,h,d,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanFromGeometryEngine=t.normalizeQueryLike=t.normalizeFilter=t.normalizeQuery=t.getGeometry=t.getCentroid=t.transformCentroid=t.QUERY_ENGINE_EMPTY_RESULT=void 0;var y=new n.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});t.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var g=new d.default,m=new d.default,v=new d.default,_={esriGeometryPoint:h.convertToPoint,esriGeometryPolyline:h.convertToPolyline,esriGeometryPolygon:h.convertToPolygon,esriGeometryMultipoint:h.convertToMultipoint};function F(e,t,r,n,i){void 0===n&&(n=e.hasZ),void 0===i&&(i=e.hasM);var s=e.hasZ&&n,o=e.hasM&&i;if(r){var a=h.quantizeOptimizedGeometry(v,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,i);return h.convertToPoint(a,s,o)}return h.convertToPoint(t,s,o)}function I(e,n,s){return r.__awaiter(this,void 0,void 0,(function(){var l,c,h,d,p,y;return r.__generator(this,(function(r){switch(r.label){case 0:return e?(e.where=l=(l=e.where)&&l.trim(),(!l||/^1 *= *1$/.test(l)||n&&n===l)&&(e.where=null),e.geometry?[4,b(e)]:[2,e]):[2,null];case 1:return c=r.sent(),e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel&&(h=e.geometry.spatialReference,(c=o.getGeometryExtent(c)).spatialReference=h),e.geometry=c,[4,f.checkProjectionSupport(c.spatialReference,s)];case 2:return r.sent(),[4,u.normalizeCentralMeridian(a.fromJSON(c))];case 3:if(d=r.sent()[0],i.isNone(d))throw t.QUERY_ENGINE_EMPTY_RESULT;return p=d.toJSON(),[4,f.project(p,p.spatialReference,s)];case 4:if(!(y=r.sent()))throw t.QUERY_ENGINE_EMPTY_RESULT;return y.spatialReference=s,e.geometry=y,[2,e]}}))}))}function b(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.geometry,i=e.units,null==(n=e.distance)||"vertexAttributes"in t?[2,t]:(o=t.spatialReference,a=i?y.fromJSON(i):s.getUnitString(o),o&&(l.isGeographic(o)||l.isWebMercator(o))?(c=t,[3,3]):[3,1]);case 1:return[4,f.checkProjectionSupport(o,l.WGS84).then((function(){return f.project(t,l.WGS84)}))];case 2:c=r.sent(),r.label=3;case 3:return u=c,[4,p.getGeodesicBufferOperator()];case 4:return[2,r.sent()(u.spatialReference,u,n,a)]}}))}))}t.transformCentroid=F,t.getCentroid=function(e,t,r){return"esriGeometryPolygon"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=c.getCentroidOptimizedGeometry(new d.default,t.geometry,e.hasZ,e.hasM)),F(e,t.centroid,r)):null},t.getGeometry=function(e,t,r,n,i,s,o,a){void 0===o&&(o=t),void 0===a&&(a=r);var u=t&&o,l=r&&a,c=n?"coords"in n?n:n.geometry:null;if(!c)return null;if(i){var d=h.generalizeOptimizedGeometry(m,c,t,r,e,i,o,a);return s&&(d=h.quantizeOptimizedGeometry(v,d,u,l,e,s)),_[e](d,u,l)}return s?(d=h.quantizeOptimizedGeometry(v,c,t,r,e,s,o,a),_[e](d,u,l)):(h.removeZMValues(g,c,t,r,o,a),_[e](g,u,l))},t.normalizeQuery=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,u;return r.__generator(this,(function(r){if(s=e.orderByFields,o=e.groupByFieldsForStatistics,a=e.outStatistics,i=e.outFields)for(u=0;u<i.length;u++)i[u]=i[u].trim();if(s)for(u=0;u<s.length;u++)s[u]=s[u].trim();if(o)for(u=0;u<o.length;u++)o[u]=o[u].trim();if(a)for(u=0;u<a.length;u++)a[u].onStatisticField&&(a[u].onStatisticField=a[u].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),[2,I(e,t,n)]}))}))},t.normalizeFilter=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,I(e,t,n)]}))}))},t.normalizeQueryLike=I,t.cleanFromGeometryEngine=function(e){return e&&x in e?JSON.parse(JSON.stringify(e,S)):e};var x="_geVersion",S=function(e,t){return e!==x?t:void 0}}).apply(null,n))||(e.exports=i)},ztx9:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ZHL0"),r("1eyA")],void 0===(i=(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WhereClauseCache=void 0;var i=function(){function e(e,t){this._cache=new r(e),this._invalidCache=new r(t)}return e.prototype.get=function(e,t){var r=t.uid+":"+e,i=this._cache.get(r);if(i)return i;if(void 0!==this._invalidCache.get(r))return null;try{var s=n.WhereClause.create(e,t);return this._cache.put(r,s),s}catch(e){return this._invalidCache.put(r,null),null}},e}();t.WhereClauseCache=i}).apply(null,n))||(e.exports=i)}}]);